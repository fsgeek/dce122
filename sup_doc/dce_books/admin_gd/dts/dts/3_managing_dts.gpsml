...\"
...\" @OSF_COPYRIGHT@
...\" COPYRIGHT NOTICE
...\" Copyright (c) 1990, 1991, 1992, 1993 Open Software Foundation, Inc.
...\" ALL RIGHTS RESERVED (DCE).  See the file named COPYRIGHT.DCE in the
...\" src directory for the full copyright text.
...\"
...\"
...\" HISTORY
...\" $Log: 3_managing_dts.gpsml,v $
...\" Revision 1.1.11.1  1996/09/19  15:26:47  sherman
...\" 	{def,13578,R1.2.2}
...\" 	Added or fixed dcecp commands and output
...\" 	[1996/09/19  15:25:29  sherman]
...\"
...\" Revision 1.1.9.1  1996/03/12  15:55:50  wardr
...\" 	{edit R1.2.1}
...\" 	Release Edits
...\" 	[1996/03/12  15:55:35  wardr]
...\" 
...\" Revision 1.1.7.30  1995/05/25  19:05:00  rcb
...\" 	PRENTICE HALL reformat: *really* last change
...\" 	[1995/05/25  14:27:27  rcb]
...\" 
...\" 	PRENTICE HALL reformat: final changes
...\" 	[1995/05/25  13:17:10  rcb]
...\" 
...\" 	PRENTICE HALL reformat
...\" 	[1995/04/17  20:22:31  rcb]
...\" 
...\" 	PRENTICE HALL reformat -- index entries, odds and ends
...\" 	[1995/03/27  19:50:24  rcb]
...\" 
...\" 	prevented hyphenation of option names
...\" 	[1995/03/09  15:01:34  rcb]
...\" 
...\" 	PRENTICE HALL reformat
...\" 	[1995/03/06  19:04:23  rcb]
...\" 
...\" 	incorporated 1.1 edits
...\" 	[1995/03/06  18:00:39  rcb]
...\" 
...\" Revision 1.1.7.29  1994/11/07  15:24:38  steto
...\" 	{def, CR12699, Removed extraneous refs to 'commands'.}
...\" 	[1994/11/07  15:24:09  steto]
...\" 
...\" Revision 1.1.7.28  1994/10/20  16:42:02  steto
...\" 	{edt, R1.1, Fixed errors.}
...\" 	[1994/10/20  16:41:19  steto]
...\" 
...\" Revision 1.1.7.27  1994/10/20  14:26:49  steto
...\" 	{edt, R1.1, Checked for freeze.}
...\" 	[1994/10/20  14:26:34  steto]
...\" 
...\" Revision 1.1.7.26  1994/10/19  20:13:07  wardr
...\" 	{edit R1.1}
...\" 	Final GA release edits
...\" 	[1994/10/19  20:10:54  wardr]
...\" 
...\" Revision 1.1.7.25  1994/10/17  19:57:40  steto
...\" 	{edt, R1.1, Clarified and added last review comments.}
...\" 	[1994/10/17  19:57:23  steto]
...\" 
...\" Revision 1.1.7.24  1994/10/14  20:44:29  steto
...\" 	[edt, R1.1, Incorporated review comments.}
...\" 	[1994/10/14  20:44:07  steto]
...\" 
...\" Revision 1.1.7.23  1994/09/30  12:56:11  neilson
...\" 	CR 10290 - No changes.  The action requested by the CR seems already
...\" 	to have been done.
...\" 	[1994/09/30  12:55:42  neilson]
...\" 
...\" Revision 1.1.7.22  1994/09/07  15:25:53  steto
...\" 	{enh, CR10014, R1.1, Prepared for final review.}
...\" 	[1994/09/07  15:25:31  steto]
...\" 
...\" Revision 1.1.7.21  1994/08/26  16:19:33  steto
...\" 	{edt, R1.1, Fixed bad index entries.}
...\" 	[1994/08/26  16:19:14  steto]
...\" 
...\" Revision 1.1.7.20  1994/08/18  15:15:44  steto
...\" 	{enh, CR 10014, R1.1, Changed instructions for manual reconfig.}
...\" 	[1994/08/18  15:15:21  steto]
...\" 
...\" Revision 1.1.7.19  1994/08/01  15:11:48  steto
...\" 	{edt, 10014, R1.1}
...\" 	Incorporated second review comments; fixed DTS command descriptions.
...\" 	[1994/08/01  15:11:19  steto]
...\" 
...\" Revision 1.1.7.18  1994/07/14  18:08:10  steto
...\" 	{edt,R1.1,Fixed list problem.}
...\" 	[1994/07/14  18:07:45  steto]
...\" 
...\" Revision 1.1.7.17  1994/07/12  21:28:57  steto
...\" 	{enh, 10014, R1.1, Made further edits for GA.}
...\" 	[1994/07/12  21:28:30  steto]
...\" 
...\" Revision 1.1.7.16  1994/07/11  14:57:33  steto
...\" 	{edt, 10014, R1.1, Removed extra information on dtscp.}
...\" 	[1994/07/11  14:57:00  steto]
...\" 
...\" Revision 1.1.7.15  1994/05/23  20:12:34  wardr
...\" 	{edit R1.1}
...\" 	SGML fixes
...\" 	[1994/05/23  20:12:09  wardr]
...\" 
...\" Revision 1.1.7.14  1994/05/18  14:02:54  wardr
...\" 	{edit R1.1}
...\" 	SGML fixes
...\" 	[1994/05/18  14:02:06  wardr]
...\" 
...\" Revision 1.1.7.13  1994/05/12  16:06:02  steto
...\" 	{enh, 10014, edt, R1.1}
...\" 	Added review comments from engineers; some still to be incorporated.
...\" 	  Fixed index entry errors.
...\" 	[1994/05/12  16:05:39  steto]
...\" 
...\" Revision 1.1.7.12  1994/05/09  21:55:08  steto
...\" 	{edt, R1.1}
...\" 	Fixed index entries causing build problems.
...\" 	[1994/05/09  21:54:27  steto]
...\" 
...\" Revision 1.1.7.11  1994/05/03  22:20:39  steto
...\" 	{enh, 10014, edt, R1.1]
...\" 	Changed text so that examples are for the DCE control program,
...\" 	  rather than the	DTS control program.   Altered some section headings
...\" 	  so they contain verbs.  Fixed spacing and paragraph tags.
...\" 	[1994/05/03  22:20:11  steto]
...\" 
...\" Revision 1.1.7.10  1994/04/05  20:55:07  zahn
...\" 	{enh,5923,R1.1}
...\" 
...\" 	Fixed cross-references to now-defunct User's Guide and Ref.
...\" 	[1994/04/05  20:54:52  zahn]
...\" 
...\" Revision 1.1.7.9  1993/11/12  22:36:07  rom
...\" 	{defect,8459,R1.0.3}
...\" 	Change name of characteristic from "time differential factor" to "local
...\" 	time differential factor".
...\" 	Remove "local servers" from list of characteristics.
...\" 	[1993/11/12  22:33:56  rom]
...\" 
...\" Revision 1.1.7.8  1993/11/11  18:45:59  zahn
...\" 	Fixed mismatched change bar for one instance of
...\" 	CR7843 bug fix.
...\" 	[1993/11/11  18:45:31  zahn]
...\" 
...\" Revision 1.1.7.7  1993/11/05  19:03:55  lmk
...\" 	{defect,9002,R1.0.3}
...\" 	Added epoch name to Table 15-2.
...\" 	[1993/11/05  19:03:41  lmk]
...\" 
...\" Revision 1.1.7.6  1993/10/22  17:11:07  lmk
...\" 	{defect,7843,R1.0.3}
...\" 	Did some reorganization of chapter:
...\" 	   Moved 15.1.3 to 15.1.2; also took out accessing info
...\" 	   Moved all of 15.3 to 15.2 and added material
...\" 	   Moved all of 15.2 to 15.3
...\" 	[1993/10/22  17:10:27  lmk]
...\" 
...\" Revision 1.1.7.5  1993/08/24  01:29:35  tmw
...\" 	Added index entries for second version of master index.
...\" 	[1993/08/24  01:04:47  tmw]
...\" 
...\" Revision 1.1.7.4  1993/07/06  18:36:55  buckler
...\" 	{edit, R1.0.2}
...\" 	Prentice-Hall editorial changes.
...\" 	[1993/07/06  18:22:04  buckler]
...\" 
...\" Revision 1.1.7.3  1993/06/30  15:13:57  lmk
...\" 	{defect,7842,R1.0.2a}
...\" 	Changed "Settable DTS Characteristics" table
...\" 	[1993/06/30  15:13:35  lmk]
...\" 
...\" Revision 1.1.7.2  1993/05/25  15:41:44  buckler
...\" 	{edit, R1.0.2}
...\" 	Prentice-Hall editorial review.
...\" 	[1993/05/25  15:38:11  buckler]
...\" 
...\" Revision 1.1.5.5  1993/02/15  22:08:46  buckler
...\" 	Changed .P! to .pI and added Postscript boundary boxes
...\" 	[1993/02/15  22:07:39  buckler]
...\" 
...\" Revision 1.1.5.4  1993/01/28  20:08:21  dbelch
...\" 	Embedding copyright notice
...\" 	[1993/01/28  18:42:45  dbelch]
...\" 
...\" Revision 1.1.5.3  1993/01/27  17:21:52  buckler
...\" 	Fixed cross-refs and figure calls for new book org
...\" 	[1993/01/27  17:18:31  buckler]
...\" 
...\" Revision 1.1.5.2  1992/08/31  17:42:39  weir
...\" 	Removed change bars
...\" 	[1992/08/31  17:38:08  weir]
...\" 
...\" Revision 1.1.2.5  1992/06/17  16:56:45  h_hoff
...\" 	Affected doc: Admin_gd, pp 3-3, Note
...\" 
...\" 	1. CR2183 -- changed 'inf' reference to '-----'
...\" 	2. CR2183 -- Change 'infinite' to 'unspecified.'
...\" 	[1992/06/17  15:26:59  h_hoff]
...\" 
...\" Revision 1.1  92/01/29  16:19:00  damon
...\" 	Initial revision
...\" 
...\" $EndLog$
...\"
...\" Copyright 1991, Open Software Foundation, Inc.  ALL RIGHTS RESERVED.
...\"   HISTORY COMMENTS:
...\"
...\"   DATE:                            COMMENT:
...\"
...\"	Fri Oct 25, 1991                 Initial File Submission for final
...\"                                    integration at IBM
...\"
...\" ********************************************************************
...\"                                                                    *
...\" COPYRIGHT (c) 1991 BY DIGITAL EQUIPMENT CORPORATION,               *
...\" Maynard, Massachusetts                                             *
...\" All Rights Reserved.                                               *
...\"                                                                    *
...\" This document is furnished under a license and may be used and     *
...\" copied only in accordance with the terms of such license and with  *
...\" the inclusion of the above copyright notice.  No title to or        *
...\" ownership of the document is hereby transferred.                   *
...\"                                                                    *
...\" The information in this document is subject to change without      *
...\" notice and should not be construed as a commitment by Digital      *
...\" Equipment Corporation.                                             *
...\"                                                                    *
...\" ********************************************************************
...\"
.H 1 "Managing the DCE DTS"
.P
.iX "-[" "DTS" "managing"
This chapter describes management tasks that you perform for the
DCE DTS.  The DCE control
.iX "DCE control program" "commands for managing DTS"
program (\*Ldcecp\*O) has commands that you can use for
performing these tasks.  The chapter contains brief descriptions
of these commands.  Detailed descriptions of the commands appear in
the \*(Ar.
.P
Prior to the creation of \*Ldcecp\*O, the DTS control program
(\*Ldtscp\*O) was used to manage DTS.  You can still
use this control program, but all of its operations have been incorporated into
\*Ldcecp\*O.  Again, you can refer to the \*(Ar for detailed
descriptions of \*Ldtscp\*O commands for manging DTS. 
.H 2 "Using the DCE Control Program"
.P
Since detailed information about \*Ldcecp\*O and its command
syntax appears in Chapter 1 of this guide, this chapter does not repeat the
information.  It describes only the commands that \*Ldcecp\*O 
provides specifically for managing DTS.
.P
The \*Ldcecp\*O commands for DTS perform various
operations on objects representing components of the service.  For example,
the \*Ldts stop\*O command stops the server or clerk on the local node.
The following subsections describe the DTS objects that \*Ldcecp\*O 
operates on and the types of operations that the control program can perform
on these objects.
.P
.H 3 "DTS Objects"
.P
.iX "\*Ldcecp\*O" "DCE control program"
.iX "commands" "\*Ldcecp\*O"
The DCE control program has functions that operate on the following DTS
objects:
.ML
.LI
\*Ldts\*O
.P
This object represents either of the following:
.ML
.LI
A local or global server that supplies the time to
client applications and systems in a distributed computing environment.
.LI
An intermediary program that plays the role of a clerk on a client
system.  DTS clerks obtain the time from a DTS server and adjust the clock.
.LE
.LI
\*Lclock\*O
.P
This object represents the local system's clock and the time that the clock
tells.
.LE
.nL
.ne 20
.H 3 "dcecp Operations for DTS"
.P
.iX "DTS" "\*Ldcecp\*O operations for managing"
.iX "commands" "\*Ldcecp\*O"
Table 25-1 summarizes the operations performed by \*Ldcecp\*O
commands on DTS objects.
.P
.ne 6i
.zA "def, 13578,R1.2.2,Add dcecp commands"
.TB "dcecp Operations for DTS"
.TS
center, allbox, tab(@);
lB | lB
l | l.
Operation@Description
_
\*Lactivate\*O@T{
Changes the state of the clerk or server process from
inactive to active and causes the object to synchronize its time.
T}
\*Lcatalog\*O@Returns a list of DTS servers in the specified cell.
\*Lcompare\*O@T{
Compares the time reported by the local clerk with that of a specified server.
T}
\*Lconfigure\*O@Configures a server as a global or local server.
\*Ldeactivate\*O@T{
Changes the state of a clerk or server process
from active to inactive and causes the object to stop synchronizing its time.
T}
\*Lhelp\*O@T{
Displays a list of operations that can be performed on
the clerk, server, or clock, or a verbose description of the specified
object.
T}
\*Lmodify\*O@Modifies the attribute information for a clerk or server.
\*Loperations\*O@T{
Displays a short list of the operations that can be
performed on the clerk, server, or clock.
T}
\*Lset\*O@T{
Sets the clock gradually or immediately to the time specified
by the argument (in DTS-style timestamp format).
T}
\*Lshow\*O@T{
For a clerk or server, displays information about attributes or
counters.   For a clock, displays the clock's time in the DTS-style
timestamp format.
T}
\*Lstop\*O@Stops the clerk or server process.
\*Lsynchronize\*O@T{
Tells \*Ldtsd\*O to gradually or immediately synchronize
(the \%\*L-abruptly\*O option) with the DTS servers.
T}
.TE
.zZ "def, 13578,R1.2.2,Add dcecp commands"
.H 3 "DTS Object Attributes and Counters"
.P
DTS clerk and server objects have attributes and counters, which are pieces
or sets of data that reflect or affect their operational behavior.
Some DTS clerk and server attributes are used internally by the DTS daemon
and you are allowed only to view the values (with the \*Ldcecp\*O 
\*Ldts show\*O command).  Others contain values that you can
reset according to the needs of your environment (with the \*Ldcecp\*O
\*Ldts modify\*O command).  Counters are
used internally by the DTS daemon and contain values that you can only view.
.P
Table 25-2 lists the server and clerk attributes that you
can set.  Table 25-3 lists the server and clerk attributes 
that you cannot set.
.P
For detailed descriptions of both the DTS server and clerk attributes
and counters, see the \*Ldts_intro(8dts)\*O reference page.
.P
.TB "Settable DTS Object Attributes"
.TS
center, box, tab(%);
lb | lb
lb | c
lb | c
lb | c
lb | lb
lb | lb
lb | lb
lb | lb
lb | lb
lb | c
lb | c
lb | c
lb | lb
lb | lb.
\*LServers\*O%\*LClerks\*O
=
\*Lcheckinterval\*O%\(em
\*Lcourierrole\*O%\(em
\*Lepoch\*O%\(em
\*Lglobaltimeout\*O%\*Lglobaltimeout\*O
\*Llocaltimeout\*O%\*Llocaltimeout\*O
\*Lmaxinaccuracy\*O%\*Lmaxinaccuracy\*O
\*Lminservers\*O%\*Lminservers\*O
\*Lqueryattempts\*O%\*Lqueryattempts\*O
\*Lserverentry\*O%\(em
\*Lservergroup\*O%\(em
\*Lserverprincipal\*O%\(em
\*Lsyncinterval\*O%\*Lsyncinterval\*O
\*Ltolerance\*O%\*Ltolerance\*O
.TE
.P
.ne 4i
.TB "Unsettable DTS Object Attributes"
.TS
center, box, tab(%);
lb | lb
lb | lb
lb | lb
lb | lb.
\*LServers\*O%\*LClerks\*O
=
\*Lactcourierrole\*O%\(em
\*Lautotdfchange\*O%\*Lautotdfchange\*O
\*Lclockadjrate\*O%\*Lclockadjrate\*O
\*Lclockresolution\*O%\*Lclockresolution\*O
\*Lglobalservers\*O%\*Lglobalservers\*O
\*Llastsync\*O%\(em
\*Llocalservers\*O%\*Llocalservers\*O
\*Lmaxdriftrate\*O%\*Lmaxdriftrate\*O
\*Lnexttdfchange\*O%\*Lnexttdfchange\*O
\*Lprovider\*O%\(em
\*Lstatus\*O%\(em
\*Ltdf\*O%\*Ltdf\*O
\*Ltimerep\*O%\*Ltimerep\*O
\*Ltype\*O%\*Ltype\*O
\*Luuid\*O%\*Luuid\*O
\*Lversion\*O%\*Lversion\*O
.TE
.H 2 "DTS Timestamp Format"
.P
.iX "-[" "timestamps" "format"
All responses to \*Ldcecp\*O commands
contain a timestamp that conforms to the input and output format shown
in Figure 25-1.
.P
.ne 2.25i
.FG "DTS Timestamp Format"
.pI ../dts/dts/figures/3_managing_dts_07.ps 0 0 1
.sp .5
.P
.ne 3
.iX "inaccuracy values" "example"
The following example shows a typical DTS time display:
.oS
1994-03-16-14:29:47.52000-05:00I000.003
.oE
.P
The timestamp uses the DTS format that is explained in 
...\" the chapter on DTS concepts. 
Chapter 23.  In this example, the year is 1994, the day is March 16,
and the time is 14 hours, 29 minutes, and 47.52 seconds.  A negative
TDF of 5 hours and an inaccuracy of 3
milliseconds are included in the timestamp.
.iX "-]" "timestamps" "format"
.H 2 "Reconfiguring DTS on Nodes"
.P
.iX "-[" "DTS" "reconfiguring on nodes"
.iX 
DTS is initially configured during the overall DCE configuration procedure
for a node (see the \*(Ai).  The DCE configuration procedure
automatically creates and activates DTS servers and DTS clerks on
designated nodes.  You can,
however, reconfigure DTS on a node at any time.  If you choose to do this,
you must perform the following steps:
.AL
.LI
Stop the clerk or server process (DTS daemon) that is currently
executing on the node.
.LI
Run the \*Ldce_config\*O script to restart the DTS daemon on the node as
a clerk or server.
.LI
Set any clerk or server attribute values as needed.
.LE
.P
The following subsections provide detailed instructions for performing
each of the reconfiguration steps just listed.
.H 3 "Stopping an Existing Clerk or Server"
.P
To stop the existing DTS clerk or DTS server on a node, use the \*Ldcecp\*O
\*Ldts stop\*O command.  Execution of this command
first deactivates the clerk or server (that is, disables the function
by which the clerk or server synchronizes the system clock), then stops
the process.  You enter the \*Ldts stop\*O command as follows:
.zA "def, 13578,R1.2.2,Added dcecp return prompts to all examples"
.iS
\*Cdcecp>\*O \*Ldts stop\*O
\*Cdcecp>
.iE
.P
The \*Ldts stop\*O command calls the \*Ldcecp\*O
\*Ldts deactivate\*O command to deactivate the clerk or server
process.  This is the command that you should use whenever you want
to deactivate a clerk or server process, but not stop it.  You enter the
\*Ldts deactivate\*O command as follows:
.iS
\*Cdcecp>\*O \*Ldts deactivate\*O
\*Cdcecp>
.iE
.H 3 "Creating a New Clerk or Server"
.P
.iX "DTS" "creating a new clerk or server"
To create a new clerk or server on the node, use the functions of the
\*Ldce_config\*O script that configure additional DTS clerks and
servers (see the \*(Ai).  The \*Ldce_config\*O functions for
configuring additional clerks and servers restart the DCE daemon (\*Ldtsd\*O)
as either a clerk or server.
.P
Just as during initial DTS configuration, if you are creating a server,
you must tell the
\*Ldce_config\*O script the type of server that it is to create: global or
local.  Before you choose the server type, you should consider the role
that the server will play in propagating the network time.
.P
Local servers can
have a noncourier role (the value of the \*Lcourierrole\*O attribute is set
to \*Lnoncourier\*O).  A noncourier server does not participate in time
propagation.  Local servers can also have a courier role (the value of the
\*Lcourierrole\*O attribute is set to \*Lcourier\*O) or a backup courier role
(the value of the \*Lcourierrole\*O attribute is set to
\*Lbackup\*O).  Courier servers have primary responsibility for
synchronizing the clocks between the nodes in a segment of the network.  Backup
couriers are secondary links, which propagate the time when no courier server
is available.  When you create a local server, the courier role is
automatically set to \*Lbackup\*O.
.P
Global servers must play the \*Lnoncourier\*O role.  They cannot be designated
as couriers or backup couriers.
.P
Section 25.6.1 provides more information about server courier roles and
instructions for changing the courier role after you create a server.
.H 3 "Setting Clerk and Server Attribute Values"
.P
Once you have created a new clerk or server on a node, you will want to
set certain of the entity's attribute values.
.P
If you reconfigure a node to be a server, you need to match the epoch
(the \*Lepoch\*O attribute value) of the newly created server to the epoch
that is shared by the preexisting servers in the network segment.  You want
to do this so that the new server can synchronize immediately with these
servers.  Instructions for changing server epoch numbers 
are given in Section 25.6.2.
.P
You may also want to check the rest of the attributes that apply only to
servers to see that they complement the value settings of the attributes for
preexisting servers.  For instance, if the server has an external 
time-provider, you may want to check the \*Lcheckinterval\*O attribute.  This
attribute specifies the amount of time that the server waits before
synchronizing with the other servers on the LAN.
.P
If you have changed your mind about a server's courier role since you created
the server, you can modify the \*Lcourierrole\*O attribute value.
.P
If you created a clerk, you may want to check the new clerk's
attribute values against those of the preexisting clerks and servers in
the network.
.P
General instructions for modifying the attributes of DTS clerks and
DTS servers are covered in Section 25.5.
.iX "-]" "DTS" "reconfiguring on nodes"
.H 2 "Temporarily Reconfiguring DTS"
.P
.iX "DTS" "temporary reconfiguration on a node"
.iX "DTS" "clerks" "converting to servers"
.iX "DTS" "servers" "converting to clerks"
From time to time, a situation or problem may arise in your network that
requires you to temporarily reconfigure DTS on one or more nodes.   Perhaps
a node in the LAN is having problems and you need to have another node
take over the clerk or server role of the problem node.  Rather than adding an
unnecessary server or clerk to the network, you can \*Vconvert\*O the clerk
or server so that it plays the needed role.
.P
.ne 6
If you convert a clerk or server, the change is only temporary.  When
DCE is stopped and restarted on a node, the node will revert to its initial
DTS configuration.  A node that was initially configured
as a DTS server will become a server; a node that was initially configured
as a DTS clerk will become a clerk.  In order to permanently
change the DTS configuration on a node, you must run the \*Ldce_config\*O
script as discussed in Section 25.3.
.P
To temporarily convert a clerk to a server, or visa versa, perform these steps:
.AL
.LI
Stop the clerk or server process that is currently
executing on the node by using the \*Ldcecp\*O \*Ldts stop\*O
command:
.iS
\*Cdcecp> \*Ldts stop\*O
\*Cdcecp> 
.iE
.P
After you stop the clerk or server, quit \*Ldcecp\*O.
.LI
Restart the DTS daemon on the node as a clerk or server
by executing the \*Ldtsd\*O command with
the appropriate option (the \%\*L-c\*O option for a clerk or
the \%\*L-s\*O option for a server).  For example, to create a local server, 
enter the following command:
.iS
dtsd -s
.iE
.P
The example command creates a local server that is a backup courier
(the server's \*Lcourierrole\*O attribute value is set to
\*Lbackup\*O by default).  If desired, you can designate another courier
role for the server in the \*Ldtsd\*O command line by using the command's
\%\*L-k\*O option.  Other than a backup courier, the local server
created in the example can be a courier (\*Lcourier\*O) or cannot have any
courier role (\*Lnoncourier\*O).
.P
In the following example, the local server is given the role of a courier:
.iS
dtsd -s -k courier
.iE
.P
To create a global server, you enter the
\*Ldtsd\*O command with the \%\*L-g\*O option:
.iS
dtsd -s -g
.iE
.nS "note"
.ne 10
If you are reconfiguring a node that previously ran a DTS clerk so that it
runs a DTS server, you need to perform extra steps.  You must create a
principal account for the new server in the DCE Security Service registry, and
you must add the server's name to the existing DTS server group
(\*Ldts-entity\*O).  Otherwise, DTS clerks will not be able to find
the newly created server.  For instructions on creating a principal account,
see Chapter 31 of this guide.  For instructions on adding a principal name
to a group, refer to Chapter 30.
.nE
.LI
Set any clerk or server attribute values as needed by using the DCE
control program's \*Ldts modify\*O command.  The following section
provides instructions for modifying DTS clerk and server attributes.
.LE
.H 2 "Modifying Clerk and Server Attributes"
.P
Many management tasks involve modifying the attributes of DTS clerks and
DTS servers.  The DCE control program has several commands for displaying
and changing the attributes of these entities.
.P
To display the attribute values of a DTS clerk or DTS server, you use the
\*Ldts show\*O command.  (The \*Ldts show\*O command can
also be used to view the values of DTS entity counters; however, you cannot
modify counter values.
.P
For example, to display the attributes values for all the clients and servers
on the local node, enter the following command:
.iS
.ne 27
\*Cdcecp>\*O \*Ldts show\*O
\*C{checkinterval +0-01:30:00.000I-----}
{epoch 0}
{tolerance +0-00:10:00.000I-----}
{tdf -0-05:00:00.000I-----}
{maxinaccuracy +0-00:00:00.100I-----}
{minservers 3}
{queryattempts 3}
{localtimeout +0-00:00:05.000I-----}
{globaltimeout +0-00:00:15.000I-----}
{syncinterval +0-00:02:00.000I-----}
{type server}
{courierrole backup}
{actcourierrole courier}
{clockadjrate 10000000 nsec/sec}
{maxdriftrate 1000000 nsec/sec}
{clockresolution 10000000 nsec}
{version V1.0.1}
{timerep V1.0.0}
{provider no}
{autotdfchange no}
{nexttdfchange 1994-10-30-06:00:00.000+00:00I0.000}
{serverprincipal hosts/gumby/self}
{serverentry hosts/gumby/dts-entity}
{servergroup subsys/dce/dts-servers}
{status enabled}
{uuid 000013ed-000b-0000-b8ef-03a4fcdf00a4}
\*Cdcecp>
.iE
.P
The example display shows the attribute values for the single server
located on the local node.  The attributes that the \*Ldts show\*O command
displays for a clerk are different.  Also, there will be more
attributes displayed for a server (see Tables 25-2 and 25-3).
.P
If you wish to modify the attributes for a DTS clerk or server, you can
use the \*Ldcecp\*O \*Ldts modify\*O command.  Several examples of
this command appear in the following subsections, which
describe the settable attributes for clerks and servers.  These subsections
also offer suggestions for various attribute settings, depending on your
network configuration.
.H 3 "The minservers Attribute"
.P
.iX "minservers attribute" "changing"
.iX "DTS" "servers" "changing the number required"
The \*Lminservers\*O attribute specifies how many
servers must supply time values to the system before DTS can synchronize
the local clock.
.P
The default and minimum recommended value for the \*Lminservers\*O attribute
is \*L3\*O; your system requires values from three servers in order to
compute a reliable new time.  Depending on whether it is a server or clerk,
the system has different requirements of the other systems in the network:
.ML
.LI
A clerk requires values from three servers.
.LI
A server requires values from two other servers.  Each server uses its own
clock value when computing a new time.
.LE
.P
To reset the \*Lminservers\*O attribute value, enter the \*Ldts modify\*O
command with the \%\*L-change\*O option to set the desired value.  The
command accepts values from \*L1\*O to \*L10\*O.  For example, to
increase the required number of servers to \*L4\*O, issue the following
command:
.iS
\*Cdcecp>\*O \*Ldts modify -change {minservers 4}\*O
\*Cdcecp>
.iE
.P
Although no direct relationship exists between the
\*Llocalservers\*O attribute, which specifies the number of local
servers in a LAN, and the \*Lminservers\*O attribute, the 
\*Lminservers\*O attribute value is usually a subset of all the local
servers.  To see the current values of both or either of these
attributes, you can use the \*Ldts show\*O command.  Wait until the
DTS nodes on your LAN are running for at least 10 minutes before you
issue the command.  That way, the \*Ldts show\*O command is sure to
show all of the local servers in your node's synchronization list.  The
\*Ldts show\*O command can be entered either with options \%(\*L-attributes\*O
or \*L-all\*O) or without them, as follows:
.iS
.ne 27
\*Cdcecp> \*Ldts show\*O
\*C{checkinterval +0-01:30:00.000I-----}
{epoch 0}
{tolerance +0-00:10:00.000I-----}
{tdf -0-05:00:00.000I-----}
{maxinaccuracy +0-00:00:00.100I-----}
{minservers 4}
{queryattempts 3}
{localtimeout +0-00:00:05.000I-----}
{globaltimeout +0-00:00:15.000I-----}
{syncinterval +0-00:02:00.000I-----}
{type server}
{courierrole backup}
{actcourierrole courier}
{clockadjrate 10000000 nsec/sec}
{maxdriftrate 1000000 nsec/sec}
{clockresolution 10000000 nsec}
{version V1.0.1}
{timerep V1.0.0}
{provider no}
{autotdfchange no}
{nexttdfchange 1994-10-30-06:00:00.000+00:00I0.000}
{serverprincipal hosts/gumby/self}
{serverentry hosts/gumby/dts-entity}
{servergroup subsys/dce/dts-servers}
{status enabled}
{uuid 000013ed-000b-0000-b8ef-03a4fcdf00a4}
\*Cdcecp>
.iE
.P
In the previous example, the \*Lminservers\*O attribute value is
set to \*L4\*O.  This setting provides redundancy; in the case where there are no
global servers in the network, the system synchronizes even if a local server
becomes unavailable.
.P
Whenever the system cannot contact the number of servers specified by the
\*Lminservers\*O attribute setting, the system increments the
\*Ltoofewservers\*O counter, logs the event, and displays the event
message \*LToo Few Servers Detected\*O.  Information included in the
event message shows the number of servers that are currently available
and the number required.  If you see this event message displayed, check
whether any of the servers have failed, test the communications links to
ensure that the system has not been isolated from the servers, or add
servers to the network.
.P
.ne 2
You can use the \*Lminservers\*O attribute in other ways,
depending on your network configuration.  Consider the following cases:
.ML
.LI
.ne 7
If you have only a few systems in your network and you want to synchronize the
nodes regardless of server drift, lower the \*Lminservers\*O
attribute value to \*L1\*O or \*L2\*O.  
Although the resulting synchronized time is a less
reliable measure of UTC, you increase the likelihood that the systems will
synchronize.  If the setting is less than \*L3\*O, however, the system cannot
identify faulty servers.  Subsequent server clock drift causes divergence
from UTC.
.LI
To increase fault tolerance and ensure that the systems compute reliable times,
set the \*Lminservers\*O attribute value to \*L3\*O (the default setting) or
higher.  The systems can then identify faulty servers and compute the
narrowest overlapping interval for the time values that
they receive.  Remember, however, that your system
will not synchronize until there are at least three servers available.
.LE
.P
The number of nodes in your network and the types of applications that you
use determine whether guaranteed synchronization or reliable times and fault
tolerance are more important.
.H 3 "Use of minservers Attribute with Global Servers"
.P
.iX "global servers" "changing required"
If your network consists of more than a single LAN, it should have a set of
global servers.  You can create global servers by advertising local servers to
the cell profile.  (See Section 25.6.1.1 for further information.)
.P
The presence of global servers in your network can influence the value that
you choose for the \*Lminservers\*O attribute.  If the number of local
servers available to a clerk or server is less than the \*Lminservers\*O
attribute setting, the clerk or server automatically searches the cell
profile for a global server name.  The clerk or server then requests time
values from the global and local servers.
.P
You can check to see whether global servers exist by entering the
\*Ldts show\*O command and viewing the \*Lglobalservers\*O attribute
value.  The \*Ldts show\*O command can be entered with options
(\*L-attributes\*O or \*L-all\*O) or without any options, as follows:
.iS
.ne 27
\*Cdcecp> \*Ldts show\*C
{checkinterval +0-01:30:00.000I-----}
{epoch 0}
{tolerance +0-00:10:00.000I-----}
{tdf -0-05:00:00.000I-----}
{maxinaccuracy +0-00:00:00.100I-----}
{minservers 3}
{queryattempts 3}
{localtimeout +0-00:00:05.000I-----}
{globaltimeout +0-00:00:15.000I-----}
{syncinterval +0-00:02:00.000I-----}
{type server}
{courierrole backup}
{actcourierrole courier}
{clockadjrate 10000000 nsec/sec}
{maxdriftrate 1000000 nsec/sec}
{clockresolution 10000000 nsec}
{version V1.0.1}
{timerep V1.0.0}
{provider no}
{autotdfchange no}
{nexttdfchange 1994-10-30-06:00:00.000+00:00I0.000}
{serverprincipal hosts/gumby/self}
{serverentry hosts/gumby/dts-entity}
{servergroup subsys/dce/dts-servers}
{status enabled}
{uuid 000013ed-000b-0000-b8ef-03a4fcdf00a4}
\*Cdcecp>
.iE
.P
The \*Ldts show\*O displays the name, node ID,
and node name for all of the global servers known by the local node.
.nL
.ne 12
.H 3 "Use of minservers Attribute with Systems on Point-to-Point Lines"
.P
If you are using DTS on a system that connects to a LAN
through a point-to-point WAN link, the solitary system never has more than
one local server available.  The recommended \*Lminservers\*O attribute
setting for such a system is \*L3\*O.  
If the system is configured as a clerk, it
does not have any local servers and must query three global servers to
synchronize.  If the system is configured as a server, it must query two
global servers to synchronize.
.H 3 "The maxinaccuracy Attribute"
.P
.iX "-[" "maxinaccuracy attribute"
.iX "-[" "time" "inaccuracy values" "maximum"
The \*Lmaxinaccuracy\*O attribute specifies the greatest allowable
bound on your system's inaccuracy before DTS causes the system to
synchronize.  When the system exceeds the bound determined by the
\*Lmaxinaccuracy\*O attribute setting, DTS forces the system to synchronize
until the inaccuracy is reduced to a level that is at or below the
setting.  Use the \*Lmaxinaccuracy\*O attribute setting as a trigger for
synchronization.  You can vary the setting to vary the tolerance of
intersystem synchronizations, but be aware that, as the setting
becomes lower, network overhead rises.  The default setting is 0.10 seconds
(100 milliseconds).
.P
The effects of the \*Lmaxinaccuracy\*O attribute setting on the system's
synchronization behavior are the following:
.AL
.LI
The system's clock value accumulates more inaccuracy than the 
\*Lmaxinaccuracy\*O attribute value and DTS initiates a
synchronization.
.LI
DTS computes a new time value.
.LI
DTS adjusts the system clock.
.LI
If the new clock setting still exceeds the \*Lmaxinaccuracy\*O attribute
value, or if clock drift later causes the inaccuracy to reach the value, the
cycle is repeated.
.LE
.P
.ne 4
Note that, if synchronization repeatedly fails to achieve an inaccuracy that is
less than the \*Lmaxinaccuracy\*O attribute value, the system can be
continuously synchronizing.  (See Section 25.5.5
for information on how the \*Lsyncinterval\*O attribute
prevents this loop.)
.P
.ne 5
The default \*Lmaxinaccuracy\*O attribute value is designed to keep the
system accurate enough for most applications without being intrusive to
network communications or system processing.  If your network includes one or
more time-providers that ensure extremely low inaccuracy, you can lower the
\*Lmaxinaccuracy\*O attribute value.  Raise the value in the following cases:
.ML
.LI
If a time-provider is not used in the network
.LI
If a system is part of a WAN-only network configuration
.LI
If the applications that call DTS do not require the
level of precision achieved by the default setting
.LE
.P
The following example shows how to change the \*Lmaxinaccuracy\*O
attribute value to 0.2 seconds:
.iS 
\*Cdcecp>\*O \*Ldts modify -change {maxinaccuracy 00-00:00:00.200}\*O
\*Cdcecp>
.iE
.iX "-]" "maxinaccuracy attribute" 
.iX "-]" "time" "inaccuracy values" "maximum"
.H 3 "The syncinterval Attribute"
.P
.iX "syncinterval attribute"
.iX "clocks" "restricting synchronization cycles"
The \*Lsyncinterval\*O attribute prevents your system from
synchronizing more often than the specified interval.  This attribute
prevents the \*Lmaxinaccuracy\*O attribute from causing continuous
synchronizations.  As mentioned in Section 25.5.4, the \*Lmaxinaccuracy\*O
attribute triggers system synchronization as long as the system's
inaccuracy is above a specified value.  The \*Lsyncinterval\*O attribute
prevents synchronization from occurring more frequently than the
specified interval value.  (The \*Lsyncinterval\*O attribute value is
randomized to prevent several systems from synchronizing simultaneously
and is an average rather than an exact value.)
.P
The \*Lmaxinaccuracy\*O and \*Lsyncinterval\*O
attributes are interdependent; system synchronization occurs
automatically when \*Eboth\*O of the following conditions are met:
.ML
.LI
The inaccuracy of its clock equals or exceeds the 
\*Lmaxinaccuracy\*O attribute value.
.LI
The time since the last synchronization equals or exceeds the 
\*Lsyncinterval\*O attribute value (slightly randomized).
.LE
.P
.ne 3
Note that, if the system reaches the \*Lsyncinterval\*O attribute
setting but has not yet reached the \*Lmaxinaccuracy\*O attribute setting,
the system does not synchronize.
.P
.ne 5
The default \*Lsyncinterval\*O attribute value is 2 minutes for
servers and 10 minutes for clerks.  If you are trying to minimize the skew
between systems, you can lower the \*Lsyncinterval\*O attribute
value.  For example, if you want a clerk to synchronize every 5 minutes if
its inaccuracy reaches 100 milliseconds, enter the following command:
.P
.iS
\*Cdcecp>\*O \*Ldts modify -change  {syncinterval 00-00:05:00.0000}\*O
\*Cdcecp>
.iE
.P
The \*Lsyncinterval\*O attribute does not prevent the
\*Lclock synchronize\*O command from working.  You can synchronize a system at
any time by entering this command.  The \*Lsyncinterval\*O attribute only
affects automatic synchronizations triggered by the \*Lmaxinaccuracy\*O
attribute.  (See the \*Lclock(8dce)\*O reference page 
for more information.)
.H 3 "The tolerance Attribute"
.P
.iX "-[" "tolerance attribute"
.iX "-[" "clocks" "correcting malfunctions"
The \*Ltolerance\*O attribute determines how DTS reacts if the system clock
becomes faulty.  A faulty clock is a rare condition, but some causes of
faulty clocks include the following:
.ML
.LI
Defects in the clock hardware, including clock drift that is greater than the
manufacturer's specifications.
.LI
Malfunctioning time-providers.
.LI
Hardware clock ticks are lost by the operating system.
.LI
The system memory containing the clock value is corrupted.
.LE
.P
During the synchronization process, DTS detects that a
system's clock is faulty if the clock value and its inaccuracy fail to
intersect with those of the servers used for synchronization.  This process
is shown in Figure 25-2, where value \*Lt2\*O is faulty.
.P
.ne 3.75i
.FG "Local Fault"
.pI ../dts/dts/figures/3_managing_dts_10.ps 0 0 1
.sp .5
.P
If DTS detects a faulty system clock during
synchronization, the severity of the fault and the system's 
\*Ltolerance\*O attribute setting determine how DTS
reacts.  When the fault is detected, DTS performs one of
the following operations:
.ML
.LI
If the faulty time interval that is supplied by the clock is within the bounds
of the error tolerance, DTS increases the inaccuracy of
the value supplied by the clock and adjusts the clock gradually.
.LI
If the faulty time interval that is supplied by the clock is outside the bounds
of the error tolerance, DTS immediately sets the clock to
the new computed time.
.LE
.P
Before you change the default \*Ltolerance\*O setting (5 minutes), determine
the requirements of the applications that use the system time.  Some
distributed applications, such as the CDS server,
require that systems have no more than 5 minutes of inaccuracy.  Larger error
tolerances may prevent such applications from properly sequencing
CDS namespace entries.  For these applications, you will want to set the
\*Ltolerance\*O attribute value to 5 minutes or less.
.P
.ne 7
Some applications may require DTS to adjust the system
clock gradually and monotonically (forward).  You can increase the
\*Ltolerance\*O attribute setting for these applications to ensure that the
clock is abruptly set only in the event of a catastrophic error.  If you
could set the \*Ltolerance\*O attribute value to infinity, you
could guarantee that the clock is never set abruptly.  This setting is not
available, but you can enter any setting less than 10675199-00:00:00.000 
(approximately 29,227.5 years).
.P
The following example shows how to set the \*Ltolerance\*O attribute value
to 3 minutes:
.iS
\*Cdcecp>\*O \*Ldts modify -change  {tolerance 00-00:03:00.000}\*O
\*Cdcecp>
.iE
.iX "-]" "tolerance attribute"
.iX "-]" "clocks" "correcting malfunctions"
.H 3 "The localtimeout, globaltimeout, and queryattempts Attributes"
.P
.iX "-[" "localtimeout attribute"
.iX "-[" "globaltimeout attribute"
.iX "-[" "queryattempts attribute"
.iX "-[" "DTS" "servers" "setting response time"
When a system queries a server, it waits for a response for the period
that is specified by the \*Llocaltimeout\*O or \*Lglobaltimeout\*O
attribute.  The \*Llocaltimeout\*O attribute setting applies when the system
attempts to contact a local server; the \*Lglobaltimeout\*O attribute setting
applies when the system attempts to contact a global server.
.P
The \*Lqueryattempts\*O attribute determines how many times DTS resets
the timeout timer before the system quits trying to contact a given
server.  Once the timeout setting has elapsed the number of times that is
determined by the \*Lqueryattempts\*O attribute, 
the system quits querying the server.  If the system is querying a global
server, DTS then generates a \*LServer Not Responding\*O event report and 
removes the server from the system's list of global servers.  If a response
from the global or local server is required in order to meet the
\*Lminservers\*O attribute setting, DTS generates a 
\*LToo Few Servers\*O event report, and the system does not synchronize.
.P
The default setting for the \*Lqueryattempts\*O attribute is \*L3\*O.  The 
following example shows how to set the \*Lqueryattempts\*O attribute value
to \*L4\*O:
.iS
\*Cdcecp>\*O \*Ldts modify -change  {queryattempts 4}\*O
\*Cdcecp>
.iE
.P
.ne 8
The default setting for the \*Llocaltimeout\*O attribute is 5
seconds, and the default setting for the \*Lglobaltimeout\*O
attribute is 15 seconds.  The global setting is larger to account for the
communications delay on WAN links that are often used to access the
global set.  It is unlikely that you will have to change the
\*Llocaltimeout\*O attribute setting.  The \*Lglobaltimeout\*O
attribute setting, however, may need to be changed due to the
variations in WAN topologies and transmission quality.  In the following
example, the \*Lglobaltimeout\*O setting is changed to 20 seconds:
.iS
\*Cdcecp>\*O \*Ldts modify -change  {globaltimeout 00-00:00:20.000}\*O
\*Cdcecp>
.iE
.P
If you continually receive \*LServer Not Responding\*O 
event reports for a global server, increase the \*Lglobaltimeout\*O
setting.  If you increase the setting and the event reports continue,
there may be a problem with the communications link to the server.
.iX "-]" "localtimeout attribute"
.iX "-]" "globaltimeout attribute"
.iX "-]" "queryattempts attribute"
.iX "-]" "DTS" "servers" "setting response time"
.H 3 "The serverentry and serverprincipal Attributes"
.P
.iX "serverentry attribute"
.iX "serverprincipal attribute"
.iX "DTS" "servers" "changing names"
During the initial configuration of DCE and DTS, one DTS entry name is
created for use with CDS, and one DTS name is created for use with the registry
service.  If you subsequently wish to change the name of a server, you can do
this by changing two of the server's attributes: the \*Lserverentry\*O
attribute and \*Lserverprincipal\*O attribute.  The default settings for
these \*Ldcecp\*O attributes are the same as the default settings
for the names that are created during the initial DCE configuration;
\*Ethey are the recommended settings\*O.  This section describes additional
considerations for the settings of these attributes.  If you decide to
change the settings of the \*Lserverentry\*O and \*Lserverprincipal\*O
attribute values, be sure that the new values are appropriate.  If not, you
will experience trouble with DTS.
.P
The \*Lserverentry\*O attribute specifies the CDS entry name where
bindings for the server are exported.  If you change the setting of this
attribute, the entry is also modified in the namespace.  The following
is an example command that sets the \*Lserverentry\*O attribute value:
.iS
\*Cdcecp>\*O \*Ldts modify  - change {serverentry /.:/hosts/cyclops/dts_ref_node}\*O
\*Cdcecp>
.iE
...\" EXTRA INFORMATION FROM R1.0.3 -- PURPOSE UNKNOWN
...\" .P
...\".LI "server group name"
...\".nL
...\"This attribute setting specifies the name of the security group that
...\"controls access to the DTS servers.  If you change the name in the \*Ldtscp\*O
...\"program, you must add existing DTS servers to the new group using the registry
...\"service.  For further information on adding server principals to the new group
...\"you specify with \*Ldtscp\*O, see the user accounts chapter in the \*EDCE
...\"User's Guide\*O.  The following example shows how to set the attribute:
...\".iS
...\"\*Cdtscp>\*O \*Lset server group name/.:/hosts/<hostname>/time-reference\*O
...\".iE
.P
.ne 8
The \*Lserverprincipal\*O attribute specifies the principal name of
the server that is used for authentication.  If you change the name by using
\*Ldcecp\*O, you must create a matching principal name and
account in the security service registry.  When you do this, you must
add the new principal name to the existing DTS server group
(\*Ldts-servers\*O).  The machine principal must be a member of this
authorization group.
See Chapter 31 of this guide
for further information on creating a new principal 
account and Chapter 30 for information on
adding a principal name to an existing server group. 
.P
The following example command sets the \*Lserverprincipal\*O attribute:
.iS
\*Cdcecp>\*O \*Ldts modify  -change {serverprincipal /.:/hosts/ajax/dts_machine}\*O
\*Cdcecp>
.iE
.H 2 "Management Tasks Specific to Servers"
.P
.iX "-[" "DTS" "servers" "specific management tasks"
Managing DTS servers involves some special tasks.  These tasks include the
following:
.ML
.LI
Setting a server's epoch
.LI
Assigning the courier role to a server
.LI
Designating a server as a global server
.LI
Setting the attributes for a connection to a time-provider
.LE
.P
The following subsections describe these server-specific tasks.
.H 3 "Designating Global and Courier Servers"
.P
.iX "-[" "DTS" "servers" "designating"
If your network has WAN links or is an extended LAN, you may need to use
global and courier servers to synchronize the nodes in separate network
segments.  To synchronize nodes across a network, you assign global roles
to some servers and courier roles to selected local servers.
(See Chapter 23 for advice on planning the location of global and local
courier servers.)  To assign server roles, follow the instructions in the
following subsections.
.H 4 "Advertising Global Servers"
.P
.iX "-[" "global servers" "advertising"
To assign a server to the global set of servers, you must advertise the server
with the \*Ldcecp\*O \*Ldts configure\*O command.  Advertising the
server simultaneously adds binding information to the server's CDS name and
also adds the server's entry to the cell profile.  Since CDS and the cell
profile are available to every node in your network, DTS can perform a
lookup in the cell profile to obtain the locations of nodes that it cannot
reach on the LAN.
.P
The following command example shows how to advertise a server as a global
server, thereby registering it with CDS and entering it in the cell profile:
.iS
\*Cdcecp>\*O \*Ldts configure -global\*O
\*Cdcecp>
.iE
.P
The \%\*L-global\*O option designates that a server should be
configured as a global server rather than as a local server.
.P
To remove a server's designation as a global server, use the
\*Ldts configure\*O command, as follows:
.iS
\*Cdcecp>\*O \*Ldts configure -notglobal\*O
\*Cdcecp>
.iE
.P
This command unadvertises the global server, removing its entry from
the cell profile and its binding information from its CDS name.
.iX "-]" "global servers" "advertising"
.H 4 "Assigning the Courier Role to Servers"
.P
.iX "-[" "couriers" "designating"
Courier servers play an important role in maintaining synchronization
between the systems in separate parts of your network.  A courier server
requests a time value from at least one global server at every
synchronization.  This procedure enables a courier server to propagate times
from remote systems to a LAN or local area, thereby keeping the LAN in
synchronization with all the other parts of the network.
.P
There are three courier roles that you can assign to a server (the
\*Lcourierrole\*O attribute), as follows:
.ML
.iX "backup couriers"
.LI
.ne 3
\*Lbackup\*O
.LI
\*Lcourier\*O
.LI
\*Lnoncourier\*O
.LE
.P
The default courier role for a global or local server at its creation is
\*Lbackup\*O.
.P
Use the \*Lcourier\*O setting for the \*Lcourierrole\*O attribute to
designate a server as the primary link to other portions of your network.  Use
the \*Lbackup\*O setting to designate a server as a secondary link to other
areas of the network.  A backup courier is only effective if no other
courier is available on the LAN.
.P
Note that there are no significant processing or overhead penalties
associated with the backup courier role; you can designate one of
the servers on a LAN as a courier, and designate all the other servers on
the LAN as backup couriers.  If you have configured several servers as backup
couriers and the courier becomes unavailable, the backup courier with the
lowest-ordered UUID becomes the effective courier.
.P
To assign the courier role to a server, enter the following \*Ldcecp\*O
command:
.iS
\*Cdcecp>  \*Ldts modify -change  {courierrole courier}\*O
\*Cdcecp> 
.iE
.P
To assign the backup courier role to a server, enter the following command:
.iS
\*Cdcecp>  \*Ldts modify -change  {courierrole backup}\*O
\*Cdcecp> 
.iE
...\" One cannot do the following procedure in R1.1 because foreign
...\" principals cannot belong to groups in the local cell.  Foreign pincipals
...\" will be able to belong to local cell groups in R1.2.
...\" .H 3 "Designating Global Servers Outside a Cell"
...\" .P
...\" .iX "profile" "cell"
...\" .iX "server" "advertising outside a cell"
...\" .iX "server" "global" "accessing outside a cell"
...\" .iX "security group" "DTS server"
...\" Advertising a global server adds the server's entry to the cell profile,
...\" where it is available to the other servers and clerks within that cell.  To
...\" allow servers to access global servers in a different cell, you must
...\" manually add the combined remote cell/server name to the cell profile.  The
...\" \*Ldcecp\*O \*Ldts activate\*O command cannot perform this function.
...\" .P
...\" To manually add a global server name from a remote cell to the local cell
...\" profile, follow these steps:
...\" .AL
...\" .LI
...\" Use the \*Ldcecp\*O \*Lrpcprofile show\*O command to display the
...\" cell profile for the remote cell as shown in the following example.  You must
...\" know the name of the cell or obtain it from the cell administrator.
...\" .iS
...\" \*Cdcecp>\*O \*Lrpcprofile  show  /.../remote_cell/cell-profile\*O
...\" .iE
...\" .P
...\" After you enter this command, the remote cell's global server names and their
...\" matching UUIDs are displayed.  Select and record the name of the global server
...\" you want to add to the local cell profile.
...\" .LI
...\" Use \*Lrpcprofile add\*O command to add the global server name you want to
...\" add to the local cell profile, as in the following example:
...\" .iS
...\" \*Cdcecp> \*Lrpcprofile add  cell-profile  -member /.../remote_cell/hosts/cliburn \\
...\" -interface 1757914-82c9-11c9-8a59-08002b0dc035,1.0\*O
...\" .iE
...\" .LI
...\" Once you have added the global server name from the remote cell to the local
...\" cell profile, you must add the  principal name of the server to the
...\" \*L/.:/subsys/dce/dts-servers\*O security group using the \*Ldcecp\*O 
...\" \*Lgroup add\*O command.  (You must have the appropriate permissions
...\" to edit the registry database).  The following command adds the server:
...\" .iS
...\" \*Cdcecp>\*O \*Lgroup add  /.:/subsys/dce/dts-servers  -member svr_1\*O
...\" .iE
...\" .LE
...\" .P
...\" See the \*Lgroup.8dce\*O reference page
...\" for further information on adding groups to the registry.
.iX "-]" "couriers" "designating"
.iX "-]" "DTS" "servers" "designating"
.H 3 "Matching Server Epochs"
.P
.iX "-[" "DTS" "servers" "matching epochs" 
.iX "-[" "epochs" "matching"
At startup, a server's epoch number must match those of the other servers
with which it synchronizes.  When synchronizing, a server disregards clock
values that are from servers whose epoch numbers do not match its own.
.P
When DTS servers are initially enabled, the epoch number for each 
server is 0, so you need not change the epoch numbers at initial
installation.  Later, if you add a server to an existing
network, or change a clerk to a server, ensure that the new server and the
preexisting servers have matching epoch numbers.  Enter the DCE
control program's \*Ldts show\*O command to find out the epoch number of
the server.  For example:
.iS
\*Ldts show /.:/hosts/orion/dts-server\*O
.iE
.P
Examine the attributes list that the command returns for the
server's \*Lepoch\*O attribute value.  If the epoch of the server that you
just created matches those of the other servers, the new server can synchronize
immediately.  If the epochs do not match, however, and you do not change the
epoch of the new server, the new server ignores the preexisting servers.  The
following example shows how to change a server's epoch number after you enable
the server:
.iS
\*Cdcecp>\*O \*Lclock set -abruptly -epoch 0\*O
\*Cdcecp> 
.iE
.P
Once you know that a server is starting up with the proper epoch number, 
\*Edo not\*O change the epoch unless serious system or 
network problems corrupt all of the server clock values.  In the unlikely
event that the majority of the server clocks become faulty, use the
\*Ldts show\*O and \*Lclock set\*O commands to isolate problem servers so
that you can perform troubleshooting and maintenance without affecting the
rest of the DTS application.
...\" .P
...\" See the DECdts Problem Solving
...\" chapter for further information on setting epoch numbers to isolate, test,
...\" and troubleshoot system clocks.
...\" ...\
...\" ...\" .H 4 "The Advertisement Interval and Check Interval Attributes"
...\" ...\" .P
...\" ...\" .iX "advertisement interval attribute"
...\" ...\" Use the \*Ladvertisement interval\*O attribute to specify how often you
...\" ...\" would like the servers on a LAN to broadcast their availability by means of
...\" ...\" advertisement messages.  The default setting of 90 minutes is usually adequate.
...\" ...\" You can update the lists of servers maintained in all the systems more
...\" ...\" frequently by lowering the setting, but be aware that lower settings contribute
...\" ...\" to greater network overhead.  The following example shows how to set the
...\" ...\" \*L\*Ladvertisement interval\*O\*O value:
...\" ...\" .iS
...\" ...\" \*Cdtscp>\*O \*Lset advertisement interval 00-00:00:30.000\*O
...\" ...\" .iE
.iX "-]" "epochs" "matching"
.iX "-]" "DTS" "servers" "matching epochs"
.H 3 "Setting the checkinterval Attribute for Connection to a Time-Provider"
.P
.iX "DTS" "servers" "checkinterval attribute"
.iX "-[" "time-provider" "checking server synchronization"
.iX "-[" "DTS" "servers" "checking synchronization with time-providers"
If a server is connected to a time-provider, set its \*Lcheckinterval\*O
attribute.  DTS uses the \*Lcheckinterval\*O attribute to periodically check
all the servers on a LAN to make sure that they remain synchronized with
the time-provider.  When the amount of time specified by the
\*Lcheckinterval\*O attribute setting has
elapsed, the server with the time-provider (the TP server) performs the
following procedure:
.AL
.LI
The TP server requests time values from all the other servers on the
LAN.
.LI
The TP server starts the synchronization process.
.LI
The TP server identifies the server time intervals that do not intersect
with its own.
.LI
The TP server issues event messages for each faulty server it detects.
.LE
.P
.ne 7
In the previous sequence, note that the TP server does not actually set the
system clock after it starts the synchronization process.  The TP server merely
runs the process to detect faulty servers.  The DTS software assumes that the
time value at the TP server is the most accurate available, so the TP server
does not use the values it collects from other servers to change its clock. 
Instead, the TP server functions as a reference timekeeper 
for the other servers.
.P
You can set the check interval to a lower value for a more rapid notification
of faulty servers, but be aware that lower settings can increase the load on
network resources.  The following example shows how to set the
\*Lcheckinterval\*O attribute value:
.iS
\*Cdcecp>\*O \*Ldts modify /.:/hosts -change {checkinterval 00-00:00:30.0000]\*O
\*Cdcecp>
.iE
.iX "-]" "DTS" "servers" "checking synchronization with time-providers"
.iX "-]" "time-provider" "checking server synchronization"
.iX "-]" "DTS" "servers" "specific management tasks"
.H 2 "Changing the System Time"
.P
.iX "-[" "system time" "changing"
.iX "-: system time" "clocks" "adjusting"
There are three ways you can change the system's time by using \*Ldcecp\*O
commands.  The following subsections describe reasons for changing
the system time, and then show examples of the commands that you can use to
modify the time and change the system clock.
.H 3 "Updating the Time Monotonically"
.P
.iX "system time" "changing" "monotonically"
.iX "-: system time" "time" "setting gradually"
.iX "\*Ldtscp\*O commands" "\*Lclock set\*O"
.iX "\*Lclock set\*O command"
If your network does not use time-providers, and the network systems have
been running for some time, you may want to update the time on several
systems to match UTC or another external reference.  When time-providers are
absent from your network, the systems remain closely synchronized, but their
clocks may drift away from accepted time standards such as UTC.
.P
Use the \*Ldcecp\*O \*Lclock set\*O command when you want to modify
the time on a server system to make it more accurate.  The DTS
synchronization process ensures that the new time you supply with the
command is propagated to the other network systems.  In
order to update the system clock to a new time, the new time and inaccuracy
you specify for a system must form a smaller interval than the current
system interval.
.P
.ne 5
In order to use the \*Lclock set\*O command effectively, you must have
temporary access to a trusted time reference.  Such references can include
the time signals that many standards organizations disseminate by radio or
telephone.  You can also use a clock that you have recently verified as
accurate.  (See 
...\" the section on time reference sources 
Appendix C for suppliers of UTC time.)
.P
Because it is a manually entered command that is 
used to modify an absolute time, the \*Lclock set\*O command is not useful
for small inaccuracy settings.  The minimum reliable inaccuracy that you can
achieve with the command is approximately 1 second.  Human error and
processing delays combine to make lower settings unreliable.  For example,
you enter the command and new time and then begin monitoring the
reference.  When you perceive that the reference has reached the desired time,
you press
.kY "Return"
to initiate the command.  Your perception of the reference mark and
your pressing of 
.kY "Return"
do not exactly coincide.  Furthermore, once the command is initiated, DTS
takes time to interpret and execute the command.
.P
The following example shows how to monotonically update the time on a server
system; that is, how to reset the clock and
eventually propagate the adjustment throughout the network:
.iS
\*Cdcecp>\*O \*Lclock set  1994-10-07-09:30:15.00I01.00\*O
\*Cdcecp>
.iE
.P
If your systems require synchronization that is closer than 1 second to a
standard such as UTC, consider purchasing one of the time-providers listed in 
Appendix C.  All of the time-providers that are described in the listing
compensate for transmission and processing delays, and can provide time
references that are accurate to the millisecond level.
.H 3 "Updating the Time Nonmonotonically"
.P
.iX "system time" "updating nonmonotonically"
.iX "-: system time" "time" "setting abruptly"
.iX "\*Ldtscp\*O commands" "\*Lclock set\*O"
.iX "\*Lclock set\*O command"
Use the \*Lclock set\*O command with the \%\*L-abruptly\*O option when you
want to abruptly set the time for a server system.  The \*Lclock set\*O
command with the \%\*L-abruptly\*O option immediately (nonmonotonically)
changes the system clock setting to the specified time, rather than
gradually (monotonically) adjusting the time.
.nS "note"
.ne 7
Exercise caution when
changing the system time abruptly.  The abrupt adjustment of the time is
appropriate at system startup or when the system clock is faulty and you
identify and correct the problem.  Changing the system time to a setting that
falls outside the time intervals of the system's known servers causes DTS
to declare the system faulty at the next synchronization.
.nE
.P
Because the \*Lclock set\*O command is usually used to correct gross clock
errors, it is likely that the time you specify for a given system will appear
faulty to the system's known servers if the system and servers have the same
epoch number.  You \*Ecan\*O prevent the systems whose times you are changing
from being declared faulty.  Use the \*Lclock set\*O command's
\%\*L-epoch\*O option along with the \*L-abruptly\*O option to set the new time
to isolate it from the other systems.  You
can then change the time and epoch for the other systems until all the systems
once again share the same epoch.  This process is useful in the rare case when
the majority of servers in the network are faulty.
.P
In order to use the \*Lclock set\*O command effectively, you must have
temporary access to an accurate time reference.  Such references can include
the time signals that many standards organizations disseminate by radio or
telephone.  You can also use a clock that you have recently verified as
accurate. 
(See
...\" the External Time-Provider Sources appendix 
Appendix C for a list of time reference sources.)
.P
Because it is a manually entered command that is 
used to modify an absolute time, the \*Lclock set\*O command is not useful
for small inaccuracy settings.  The minimum reliable inaccuracy that you can
achieve with the command is approximately 1 second.  Human error and
processing delays combine to make lower settings unreliable.  For example,
you enter the command and new time and then begin monitoring the
reference.  When you perceive that the reference has reached the desired
time, you press 
.kY "Return"
to initiate the command.  Your perception of the reference mark and your
pressing of 
.kY "Return"
do not exactly coincide.  Furthermore, once the command is
initiated, DTS takes time to interpret and execute the
command.
.P
The following example shows how to change both the time and epoch for a
system:
.iS
\*Cdcecp>\*O \*Lclock set 1993-10-07-09:30:15.0000I01.0000 -abruptly -epoch 1\*O
\*Cdcecp>
.iE
.H 3 "Forcing System Synchronization"
.P
.iX "-[" "clocks" "forcing synchronization"
Once you create and enable DTS on all the systems that are in your network,
they synchronize without any further intervention.  There are situations,
however, when you may want to force a system to synchronize immediately
rather than waiting for the amount of time that is specified by the
\*Lsyncinterval\*O and \*Lmaxinaccuracy\*O attributes.  As an example, you
may want to synchronize a system with a TP server that you have just added
to the network.
.P
To forcibly synchronize the clock on a system, you use the
\*Ldts synchronize\*O command.  If you enter the \*Ldts synchronize\*O
command without the \*L-abruptly\*O option, the time is adjusted
gradually.  If you enter the \*Ldts synchronize\*O command with the
\%\*L-abruptly\*O option, the time is immediately adjusted.  In the
situation posed by our example, you might want to use the command with
the \%\*L-abruptly\*O option to have the narrow time interval contributed by
the time-provider quickly propagated throughout the network:
.iS
\*Cdcecp>\*O \*Ldts synchronize -abruptly\*O
\*Cdcecp>
.iE
.iX "-]" "clocks" "forcing synchronization"
.iX "-]" "system time" "changing"
...\" .H 4 "Setting the System Clock to Local Time"
...\" .iX "time" "local"
...\" .iX "time" "displays"
...\" .iX "TDF"
...\" .P
...\" DTS uses UTC time as the standard by which it monitors and
...\" adjusts time.  All times that are displayed by DTS reflect
...\" the time zone rule that is selected at system installation.  Normally, the
...\" time displayed is a \*Llocal time\*O that is offset from UTC by a
...\" specified number of hours and minutes.  The offset used to determine the
...\" local time is called the Time Differential Factor (TDF).  The time zone rules
...\" for each geographic location also dictate seasonal changes to the TDF and
...\" the resulting local time display.
.H 2 "Controlling Access to DTS"
.P
.iX "-[" "DTS" "access control"
.iX "ACLs" "in DTS"
You can assign privileges that control access to DTS objects
by using DCE Authorization Service access control lists (ACLs).
...\" (See the \*(Ai for further information on the DCE Authorization Service.)
.P
The DTS principal that represents the server on a given system is the primary
access control object for DTS.  This principal has controlled access
by human users and clerk or server processes.  The default name that you
can use for the DTS object in any \*Ldcecp\*O command
is \*L/.:hosts/\*Vhostname\*L/dts-entity\*O.
.P
The ACL for the DTS server can contain any type of ACL entry that
is valid for a principal (human or process) or authorization group to which
this principal belongs.  See Chapter 28 of this guide for a discussion of the
DCE ACLs facility and descriptions of ACL types and their entries.
.P
.ne 8
To display the ACL entries in the DTS server principal's ACL,
you can use the \*Ldcecp\*O \*Lacl show\*O command.  For example:
.iS
\*Cdcecp> \*Lacl show  /.:/hosts/Detroit2/dts-entity\*C
{unauthenticated r--}
{user hosts/Detroit2/self rwc}
{group subsys/dce/dts-admin rwc}
{any_other r--}
\*Cdcecp>
.iE
.P
To modify any of the entries in the DTS server principal's ACL, you can use
the \*Lacl modify\*O command.  Instructions for using this command appear in
Chapter 28.
...\" The following two sections describe how the DTS ACLs are initially
...\" configured
...\" and how to modify entries and privileges for them.
...\"
...\" .H 3 "Using the acl_edit command to Modify DTS ACLs"
...\" .iX "acl_edit command" "DTS use of"
...\" .P
...\" \*LNOTE TO REVIEWERS:\*O The following items will be
...\" addressed after receipt of initial configuration details:
...\" .ML
...\" .LI
...\" What does ACL output look like?
...\" .LI
...\" How does the time service administrator get registered as a principal?
...\" .LI
...\" How is the
...\" /.:/subsys/dce/dts-servers group created and is membership automatically
...\" granted?
...\" .LI
...\" How are the time-provider and management interface
...\" principals created and what do
...\" they look like?
...\" .LI
...\" How are
...\" permissions for DTS Principals and group members modified?
...\".LE
.iX "-]" "DTS" "access control"
.iX "-]" "DTS" "managing"
.zZ "def, 13578,R1.2.2,Added dcecp return prompts to all examples"
