...\"
...\" @OSF_COPYRIGHT@
...\" COPYRIGHT NOTICE
...\" Copyright (c) 1990, 1991, 1992, 1993 Open Software Foundation, Inc.
...\" ALL RIGHTS RESERVED (DCE).  See the file named COPYRIGHT.DCE in the
...\" src directory for the full copyright text.
...\"
...\"
...\" HISTORY
...\" $Log: processes.gpsml,v $
...\" Revision 1.1.8.1  1996/05/14  19:52:41  wardr
...\" 	{enh,R1.2.2}
...\" 	Removed changebars
...\" 	[1996/05/14  19:51:24  wardr]
...\"
...\" Revision 1.1.6.16  1995/07/13  16:07:30  buckler
...\" 	1.1 edits and Prentice Hall reformat
...\" 	[1995/07/13  16:07:07  buckler]
...\" 
...\" Revision 1.1.6.15  1994/08/03  21:15:57  jeff
...\" 	More editorial stuff.
...\" 	[1994/08/03  21:15:43  jeff]
...\" 
...\" Revision 1.1.6.14  1994/08/02  12:54:50  jeff
...\" 	{defect, 11180, R1.1}
...\" 	Document DFS/NFS Secure Gateway.
...\" 	[1994/08/02  12:54:23  jeff]
...\" 
...\" Revision 1.1.6.13  1994/07/17  18:40:23  jeff
...\" 	Editorial improvements.
...\" 	[1994/07/17  18:39:40  jeff]
...\" 
...\" Revision 1.1.6.12  1994/05/31  21:02:05  jeff
...\" 	Small editorial improvements.
...\" 	[1994/05/31  21:01:50  jeff]
...\" 
...\" Revision 1.1.6.11  1994/05/19  20:49:51  jeff
...\" 	{defect, 8118, R1.1}
...\" 	Correct use of double quotes.
...\" 	[1994/05/19  20:49:10  jeff]
...\" 
...\" Revision 1.1.6.10  1994/05/10  20:11:44  jeff
...\" 	Fix formatting error.
...\" 	[1994/05/10  20:10:28  jeff]
...\" 
...\" Revision 1.1.6.9  1994/05/06  13:52:22  jeff
...\" 	{defect, 10552, R1.1}
...\" 	Fix index entry inconsistencies.
...\" 	[1994/05/06  13:50:40  jeff]
...\" 
...\" Revision 1.1.6.8  1994/04/28  22:21:24  jeff
...\" 	{defect, 10439, R1.1}
...\" 	Correct cross-references for reorganization of DFS documentation.
...\" 	[1994/04/28  22:15:14  jeff]
...\" 
...\" Revision 1.1.6.7  1993/11/10  20:05:49  zahn
...\" 	CR5778 had two starting change bars.  I removed
...\" 	one of them.
...\" 	[1993/11/10  20:05:17  zahn]
...\" 
...\" Revision 1.1.6.6  1993/10/15  15:00:53  jeff
...\" 	{def,9132,R1.0.3}
...\" 	The protections set and checked by the bosserver are only defaults.
...\" 	[1993/10/15  15:00:38  jeff]
...\" 
...\" Revision 1.1.6.5  1993/09/27  03:26:22  tmw
...\" 	Added index entries for second version of master index.
...\" 	[1993/09/27  03:23:36  tmw]
...\" 
...\" Revision 1.1.6.4  1993/09/16  11:29:32  kdu
...\" 	{def,5778,R1.0.3}
...\" 	Short forms of machine names.
...\" 	[1993/09/16  11:29:02  kdu]
...\" 
...\" Revision 1.1.6.3  1993/08/11  00:04:09  jeff
...\" 	Changed versions for defect fixes from 1.0.2A to 1.0.3.
...\" 	[1993/08/11  00:03:30  jeff]
...\" 
...\" Revision 1.1.6.2  1993/07/30  17:54:57  kdu
...\" 	{def,8386,R1.0.3}
...\" 	Incorporate OSF editorial comments into DFS Admin Guide and related
...\" 	documentation.
...\" 	[1993/07/30  17:53:03  kdu]
...\" 
...\" Revision 1.1.4.16  1993/02/21  22:54:11  jeff
...\" 	Fix for defect 7219, review comments.
...\" 	[1993/02/21  22:53:46  jeff]
...\" 
...\" Revision 1.1.4.15  1993/02/05  20:36:02  jeff
...\" 	Fix for defect 7135, change key file to keytab file.
...\" 	[1993/02/05  20:11:59  jeff]
...\" 
...\" Revision 1.1.4.14  1993/02/04  01:49:51  jeff
...\" 	Fix for defect 7073.
...\" 	[1993/02/04  01:49:26  jeff]
...\" 
...\" Revision 1.1.4.13  1993/01/28  19:05:28  dbelch
...\" 	Embedding copyright notice
...\" 	[1993/01/28  18:29:25  dbelch]
...\" 
...\" Revision 1.1.4.12  1993/01/27  21:09:26  buckler
...\" 	Fixed cross-refs and figure calls for new book org
...\" 	[1993/01/27  21:06:50  buckler]
...\" 
...\" Revision 1.1.4.11  1993/01/08  15:41:01  jeff
...\" 	Small addition for defect 6721.
...\" 	[1993/01/08  15:40:21  jeff]
...\" 
...\" Revision 1.1.4.10  1993/01/08  15:27:36  jeff
...\" 	Fix for defect 6721, correct bos restart documentation.
...\" 	[1993/01/08  15:27:01  jeff]
...\" 
...\" Revision 1.1.4.9  1992/11/14  16:36:45  jeff
...\" 	Fix for defect 6021, changes to -file and -dir options.
...\" 	[1992/11/14  16:36:17  jeff]
...\" 
...\" Revision 1.1.4.8  1992/11/13  01:03:15  jeff
...\" 	Fix for defect 5120, correct description of -localauth option.
...\" 	[1992/11/13  01:02:45  jeff]
...\" 
...\" Revision 1.1.4.7  1992/11/10  22:35:12  jeff
...\" 	Fix for defect 5782, document bos uninstall -all option and
...\" 	clarify functionality.
...\" 	[1992/11/10  22:34:32  jeff]
...\" 
...\" Revision 1.1.4.6  1992/11/09  14:21:56  jeff
...\" 	Fix for defect 5783, provide bos install details.
...\" 	[1992/11/09  14:21:30  jeff]
...\" 
...\" Revision 1.1.4.5  1992/10/31  01:28:31  jeff
...\" 	Fix for defect 5791, bos status command displays NoAuth message.
...\" 	[1992/10/31  01:26:21  jeff]
...\" 
...\" Revision 1.1.4.4  1992/10/30  21:38:42  jeff
...\" 	Fix for defect 4782, Update Server clarified for bos install/uninstall.
...\" 	[1992/10/30  21:38:03  jeff]
...\" 
...\" Revision 1.1.4.3  1992/10/29  00:21:53  jeff
...\" 	Fix for defect 5801, remove bos exec command from the documentation.
...\" 	[1992/10/28  23:38:36  jeff]
...\" 
...\" Revision 1.1.4.2  1992/08/26  12:09:54  weir
...\" 	Removed change bars
...\" 	[1992/08/26  11:53:24  weir]
...\" 
...\" Revision 1.1.2.5  1992/07/04  16:55:59  jeff
...\" 	Included that the status flags for processes are represented
...\" 	in the BosConfig file as 1 and 0.
...\" 	[1992/07/04  16:55:01  jeff]
...\" 
...\" Revision 1.1.2.4  1992/05/12  15:59:11  jeff
...\" 	Verified and/or modified italics and other editorial
...\" 	aspects of the file.
...\" 	[1992/05/12  14:54:51  jeff]
...\" 
...\" Revision 1.1.2.3  1992/04/29  22:18:09  jeff
...\" 	Added .zA/.zZ tags around -noauth/-localauth changes.
...\" 	[1992/04/29  22:12:26  jeff]
...\" 
...\" Revision 1.1.2.2  1992/04/29  19:00:10  jeff
...\" 	Modified syntax and description of -noauth and -localauth options.
...\" 	[1992/04/28  23:48:46  jeff]
...\" 
...\" Revision 1.1  1992/01/29  16:14:47  damon
...\" 	Initial revision
...\" 
...\" $EndLog$
...\"
...\" (c) Copyright 1991, Open Software Foundation, Inc.  ALL RIGHTS RESERVED
..."Copyright (C) 1989, 1991, Transarc Corporation
..."The Gulf Tower
..."707 Grant Street
..."Pittsburgh, PA  15219
...\" CHANGED
...\" 12-09-91:  Removed two index tags that appeared on the first page.
...\" 12-09-91:  Changed Command to Parameter in the last line of the bos
...\"            status output for the upserver process in Section 5.4.2.
...\" 12-10-91:  Removed an extraneous index tag that followed the heading
...\"            for Section 5.10 (it was printing in the index).
...\" 12-10-91:  In Section 5.2.1, removed a MarkerStyle formatting line that
...\"            was printing in the middle of page 5-4.
...\" 12-10-91:  In Section 5.4.1, added a paragraph break after "Interpreting
...\"            Output Results" (bottom of page 5-7).
...\" 12-10-91:  In Section 5.4.2, added a paragraph break after "Interpreting
...\"            Output Results" (middle of page 5-9).
...\" END CHANGED
...\"DOCUMENTSTYLE [12pt]{book}
.H 1 "Monitoring and Controlling Server Processes"
.iX "-[" "BOS Server" "how to use"
.iX "-[" "server machines" "controlling and monitoring processes"  
.P
To provide efficient and correct operation, the processes that are running on 
DFS server machines in a cell must be configured properly.  The Basic OverSeer
Server (BOS Server) continually monitors and, if necessary, restarts the
other server processes on a machine; you specify the processes that the BOS 
Server is to monitor.  The BOS Server runs on all DFS server machines.
.P
You also control server process status by issuing \*Lbos\*O commands to
perform routine maintenance or to correct errors the BOS Server cannot correct
by itself.  This chapter explains how to define a server machine's processes
and how to start and stop them.  The BOS Server can monitor and control
processes other than DFS processes.  However, the information in this chapter
refers specifically to DFS server processes.
.P
.iX "BOS Server" "unsupported processes"
.iX "\*Lfxd\*O process" "BOS Server control"
.iX "\*Ldfsd\*O process" "BOS Server control"
.iX "\*Ldfsbind\*O process" "BOS Server control"
.iX "\*Ldfsexport\*O command" "BOS Server control" 
Do not use the BOS Server to control the following processes on a machine:
\*Lfxd\*O, \*Ldfsd\*O, \*Ldfsbind\*O, or \*Ldfsexport\*O.  The first two
processes spawn kernel threads that, if continually restarted, can eventually
result in system failure on the machine.  The last two processes are usually
executed only when a machine initially starts, and they must be started in
the proper sequence with respect to other processes.  It is recommended that
all four of these processes be started by including a line in the proper
initialization file (\*L/etc/rc\*O or its equivalent).
.H 2 "Process Entries in the BosConfig File"
.iX "DFS servers" "restarting"
.iX "-[" "\*LBosConfig\*O file" "entries"
.P
You define which processes the BOS Server monitors by creating process
entries in the \*Vdcelocal\*L/var/dfs/BosConfig\*O file on the local disk
of each server machine.  The information in a process entry defines how the
process is to run.  You control the process status (\*LRun\*O or \*LNotRun\*O)
by changing the entry with \*Lbos\*O commands.  When the BOS Server starts, it
creates a \*LBosConfig\*O file with no process entries if the file does not
already exist.
.P
The order in which process entries are added to or appear in the
\*LBosConfig\*O file is irrelevant.  The BOS Server restarts multiple processes
virtually simultaneously.  However, do not depend on one process starting before
another simply because its entry precedes that of the other process in the
\*LBosConfig\*O file.  The BOS Server has no control over how long a process
takes to start.
.P
.nS "caution"
.iX "\*LBosConfig\*O file" "editing"
Do not directly edit the information in the \*LBosConfig\*O
file; use only the commands described in this chapter to alter the file.
Directly editing the \*LBosConfig\*O file can result in changes to process
entries of which the BOS Server is unaware.  Such changes do not take effect
until the BOS Server is restarted and again reads the file.
.nE
.P
Each process entry includes the following information about its process:
.ML
.LI
Its name.  The name that appears in the \*LBosConfig\*O file for a process is
the name used to refer to that process with any \*Lbos\*O commands that require
a process name.
.LI
Its type.  The type can be one of the following:
.ML
.LI
.iX "\*Lsimple\*O process"
\*Lsimple\*O: A \*Lsimple\*O process is a continuous process that runs
independently of any other processes on a server machine.  All standard DFS
processes are \*Lsimple\*O processes.  This process has a single parameter:
the command to be executed.
.iX "processes" "simple"
.LI
.iX "\*Lcron\*O process"
\*Lcron\*O: A \*Lcron\*O process, like a \*Lsimple\*O process, runs
independently of other processes; however, a \*Lcron\*O process runs
periodically, not continuously.  This process has two parameters: the first
is the command that is to be executed; the second is the time that the 
command is to be executed.
.LE
.LI
Its status flag.  Status flags are for internal use only and do not appear in
any output.  The flag can have one of the following values:
.ML
.LI
\*LRun\*O, meaning the process needs to run whenever possible.  The BOS Server
starts the process initially at reboot and restarts it automatically if it 
fails at any time.  This flag is used to keep a process running at all times; 
for example, to ensure that the \*Lftserver\*O process on a File Server 
machine runs continuously. (The \*LRun\*O status flag appears in the 
\*LBosConfig\*O file as a \*L1\*O.)
.LI
\*LNotRun\*O, meaning the process never runs.  The BOS Server never starts or
automatically restarts the process; the process runs only when you instruct 
the BOS Server to start it.  This flag is used to stop a process for an 
extended period of time; for example, to stop the \*Lupclient\*O process from 
accessing new binary files while you test the current binaries. (The 
\*LNotRun\*O status flag appears in the \*LBosConfig\*O file as a \*L0\*O.)
.LE
.LI
Its command parameters.  These parameters are used by the BOS Server to run the
process.
.LE
.P
The following output from the \*Lbos status\*O command displays an entry from
the \*LBosConfig\*O file. (See Section 5.4 for more information about the
\*Lbos status\*O command, which is used to list entries from the
\*LBosConfig\*O file.)
.nL
.ps 11
.vs 12
.oS
\*CInstance ftserver, (type is simple) currently running normally.\*O
\*CProcess last started at Fri Nov 22 05:36:02 1991 (1 proc starts)\*O
\*CParameter 1 is `\*Vdcelocal\*C/bin/ftserver'\*O
.oE
.ps 12
.vs 14
.P
It is possible for the BOS Server's memory state to change independently of
the \*LBosConfig\*O file.  The BOS Server checks the \*LBosConfig\*O file
whenever it starts or restarts, (in response to the \*Lbos restart\*O
command, at the general restart time, or at system reboot).  At that time, the
BOS Server transfers information from the file into memory and does not read
the file again until it restarts.
.P
.iX "\*Lbos\*O command suite" "\*Lshutdown\*O"
.iX "\*Lbos\*O command suite" "\*Lstartup\*O"
Therefore, it is possible to use the \*Lbos shutdown\*O command to stop a
running process, even though its status flag in the \*LBosConfig\*O file is
\*LRun\*O.  Similarly, you can use the \*Lbos startup\*O command to start a
process running by setting its memory state status flag to \*LRun\*O without
setting its status flag in the file to \*LRun\*O.  The commands discussed in
this chapter can affect the BOS Server's memory state, the information in the
\*LBosConfig\*O file, or both.
.P
.iX "DFS servers" "starting and stopping"
.ne 8
Starting or stopping certain processes, either temporarily or permanently, has
an effect on the other processes that run on the other server machines in your
cell.  For example, an \*Lupserver\*O process must run on each System Control
machine and Binary Distribution machine.  If you start or stop the process on
one machine, you must start it on a replacement System Control or Binary
Distribution machine.  You must also modify the \*Lupclient\*O processes on the
appropriate server machines so that they reference the new System Control 
or Binary Distribution machine.
.iX "-]" "\*LBosConfig\*O file" "entries"
.H 2 "Standard Information in this Chapter"
.P
The following subsections present options and arguments common to many of the 
commands described in this chapter.  It also presents some common operations 
that are explained in the chapter or that can be useful when performing other
operations.
.H 3 "Standard Options and Arguments"
.P
The following options and arguments are used with many of the commands
described in this chapter.  If an option or argument is not described with a
command in the text, a description of it appears here. (See Part 2 of this
guide and reference for complete details about each command.)
.ML
.LI
The \*L\-server\*O \*Vmachine\*O option specifies the server machine on
which the command is to execute.  This option names the machine whose process
or file is to be affected.  The BOS Server on this machine executes the command.
This option can be used to specify a server machine in a foreign cell.
.P
To run a privileged \*Lbos\*O command (a \*Lbos\*O command that requires the
issuer to have some level of administrative privilege) using a privileged
identity, always specify the full DCE pathname of the machine (for example,
\*L/.../abc.com/hosts/fs1\*O).
.P
To run an unprivileged \*Lbos\*O command, you can use any of the following to
specify the machine:
.ML
.LI
The machine's DCE pathname (for example, \*L/.../abc.com/hosts/fs1\*O)
.LI
The machine's host name (for example, \*Lfs1.abc.com\*O or \*Lfs1\*O)
.LI
The machine's IP address (for example, \*L11.22.33.44\*O)
.LE
.nS "note"
.iX "authorization checking" "unprivileged identity"
If you specify the host name or IP address of the machine, the command
executes using the unprivileged identity \*Lnobody\*O (the equivalent of
running the command with the \*L\-noauth\*O option); unless DFS authorization
checking is disabled on the specified machine, a privileged \*Lbos\*O command
issued in this manner fails.  If you specify the machine's host name or IP
address, the command displays the following message (using the \*L\-noauth\*O
option suppresses the message):
.nL
.ps 11
.vs 12
.oS
bos:  WARNING: short form for server used; no authentication
information will be sent to the bosserver
.oE
.ps 12
.vs 14
.nE
.LI
The \*L\-process\*O \*Vserver_process\*O option is the process to be created, 
started, or stopped.  The following names are recommended for DFS server 
processes, but a process can be given any name:
.ML
.LI
\*Lftserver\*O: The Fileset Server process
.LI
\*Lflserver\*O: The Fileset Location Server process
.LI
\*Lupclient\*O: The client portion of the Update Server that transfers binary
files (such as those for server processes) from \*Vdcelocal\*L/bin\*O and
transfers configuration files (such as administrative lists) from
\*Vdcelocal\*L/var/dfs\*O on the System Control machine
.LI
\*Lupserver\*O: The server portion of the Update Server
.LI
\*Lrepserver\*O: The Replication Server process
.LI
\*Lbakserver\*O: The Backup Server process
.LE
.LI
The \*L\-cmd\*O \*Vcmd_line\*O option specifies the commands and parameters
that the BOS Server uses to create a process.  For a \*Lsimple\*O process, only
one command line specifying the binary file's complete pathname is necessary.
This can be the pathname of a DFS command or any other command to be executed.
For example, the command \*L"\*Vdcelocal\*L/bin/fts clonesys"\*O backs up every
fileset in the file system.  As this example shows, you must enclose the
parameter in "\|" (double quotes) if it contains spaces, and you must specify
the complete pathname for the command.
.P
For a \*Lcron\*O process, \*Vcmd_line\*O specifies the following two command
parameters: 
.ML
.LI
The \*Vfirst parameter\*O is the command that the BOS Server executes.  As with
the sole parameter for a \*Lsimple\*O process, this parameter can be the 
complete pathname of the binary file for a DFS command or any other command 
to be executed.  As the example for the \*Lsimple\*O process shows, you must 
enclose the parameter in double quotes if it contains spaces, and you must 
specify the complete pathname for the command.
.LI
The \*Vsecond parameter\*O specifies the time at which the BOS Server is to
execute the command.  This parameter must also be surrounded with double quotes
if it contains spaces.  Valid values are
.ML
.LI
\*Lnever\*O
.P
The command does not execute, but the process entry remains in
the \*LBosConfig\*O file.
.LI
\*Lnow\*O
.P
The command executes immediately, but it never executes again; the
process entry is removed from the \*LBosConfig\*O file after the command is
executed.
.LI
A specific day of the week at a specific time (\*L"\*Vday hh:mm\*L"\*O).  The
command executes weekly at the specified day and time.
.LI
A specific time (\*Vhh:mm\*O).  The command executes daily at the specified
time.
.P
If you specify a day, it must appear first, in lowercase letters. You can enter
either the entire name or just the first three letters; for example,
\*Lsunday\*O or \*Lsun\*O.  When indicating a time, separate hours from minutes
with a colon.  You can use 24-hour time or 1:00 through 12:00 with \*Lam\*O or
\*Lpm\*O (for example, \*L14:30\*O or \*L"2:30 pm"\*O).  You must enclose the
entry in "\|" (double quotes) if it contains spaces (for example, \*L"sun 2:30
pm"\*O).
.LE
.LE
.nL
.ne 15
.LI
The \*L\-noauth\*O option directs the \*Lbos\*O program to use the unprivileged
identity \*Lnobody\*O as the identity of the issuer of the command.  If DFS
authorization checking has been disabled with the \*Lbos setauth\*O command,
the identity \*Lnobody\*O has the necessary privileges to perform any
operation. (See Chapter 4 for information about disabling DFS authorization
checking.) If you use this option, do not use the \*L\-localauth\*O option.
.LI
The \*L\-localauth\*O option directs the \*Lbos\*O program to use the DFS
server principal of the machine on which the command is issued as the identity
of the issuer.  Each DFS server machine has a DFS server principal stored in
the Registry Database.  A DFS server principal is a unique, fully qualified
principal name that ends with the string \*Ldfs-server\*O; for example,
\*L/.../abc.com/hosts/fs1/dfs-server\*O.  Do not confuse a machine's DFS
server principal with its unique \*Lself\*O identity. (See Chapter 6 for
information about DFS server principals.)
.P
Use this option only if the command is issued from a DFS server machine. You
must be logged into the server machine as \*Lroot\*O for this option to work.
If you use this option, do not use the \*L\-noauth\*O option.
.LE
.P
The \*L\-noauth\*O and \*L\-localauth\*O options are always optional.
.H 3 "Standard Commands and Operations"
.P
Some of the following commands and operations are described in many places in
this chapter; others can prove useful when the operations in this chapter are
performed.  If a command or operation is described in detail here, it is not
described in depth in later sections of this chapter where it is used.
.H 4 "Determining Administrative Privilege"
.iX "\*Lbos\*O command suite" "determining appropriate privileges"
.P
To perform the majority of \*Lbos commands\*O, the issuer must be listed in the
\*Ladmin.bos\*O file on the machine used in the command.  To determine the
members of a list, issue the \*Lbos lsadmin\*O command:
.iS
\*C$ \*Lbos lsadmin -server \*Vmachine\*L -adminlist admin.bos\*O
.iE
.P
The \*L\-adminlist\*O \*Ladmin.bos\*O option specifies that members of the 
\*Ladmin.bos\*O file are to be listed.
.H 4 "Examining Log Files"
.iX "-[" "BOS Server" "log files"
.iX "-[" "log files" "viewing (DFS)"
.P
The \*Lbosserver\*O process and most of the server processes it monitors 
generate log files.  The log files record execution messages and error 
messages generated by the server processes as they execute.  By default, the 
processes write the files to the \*Vdcelocal\*L/var/dfs/adm\*O directory, 
although some server processes can be instructed to write their log files to a 
different directory.  A list of the log files and the processes that write 
them follows:
.ML
.LI
The \*LBakLog\*O file is generated by the Backup Server process on each Backup
Database machine.
.LI
The \*LBosLog\*O file is generated by the BOS Server process on each server
machine.
.LI
The \*LDfsgwLog\*O file is generated by the Gateway Server process on each
Gateway Server machine.
.LI
The \*LFlLog\*O file is generated by the Fileset Location Server process on 
each Fileset Database machine.
.LI
The \*LFtLog\*O file is generated by the Fileset Server process on each File
Server machine.
.LI
The \*LRepLog\*O file is generated by the Replication Server process on each
server machine.
.LI
The \*LUpLog\*O file is generated by the \*Lupserver\*O process on each server
machine that is running the server portion of the Update Server.
.LE
.P
.iX "-[" "\*Lbos\*O command suite" "\*Lgetlog\*O"
The \*Lbos getlog\*O command can be used to examine any of these log files,
including the \*L.old\*O versions created by the associated server processes.
By default, the command looks in the \*Vdcelocal\*L/var/dfs/adm\*O directory
for the log file that it is to display.  It is not necessary to specify the full
pathname of a log file if it resides in the default directory.  However, if the
file resides elsewhere, the full pathname of the log file must be provided.
.P
.ne 15
In addition, no privilege is necessary to view a log file that resides in the
default directory.  If the file resides in a different directory, the issuer of
the command must be listed in the \*Ladmin.bos\*O file on the machine on which
the file is located, which is specified by the \*L\-server\*O option.
.iS
\*C$ \*Lbos getlog -server \*Vmachine\*L -file \*Vlog_file\*O
.iE
.P
The \*L\-file\*O \*Vlog_file\*O option specifies the log file that is to be 
displayed.  A simple filename is sufficient for a log file that resides in the
\*Vdcelocal\*L/var/dfs/adm\*O directory.  A full pathname is required for a
log file that resides in a different directory.
.iX "-]" "\*Lbos\*O command suite" "\*Lgetlog\*O"
.iX "-]" "BOS Server" "log files"
.iX "-]" "log files" "viewing (DFS)"
.H 2 "Creating and Starting Processes"
.iX "-[" "\*LBosConfig\*O file" "adding entries"
.iX "\*Lbos\*O command suite" "\*Lcreate\*O"
.iX "-[" "DFS servers" "creating"
.P
To start a new process on a server machine, use the \*Lbos create\*O command
to alter the \*LBosConfig\*O file.  This adds a process entry for the new
process to the \*LBosConfig\*O file and sets the status flag for the process
to \*LRun\*O in both the file and the BOS Server's memory, making the effect
immediate.  You can use the command to create both \*Lsimple\*O and \*Lcron\*O
processes.
.P
The server process name included in this command is used by the BOS Server to
reference the process.  It is also used in any subsequent \*Lbos\*O commands
that require a process name.  The BOS Server adds it to the \*LBosConfig\*O
file when it creates the process's entry.  The name does not appear in process
listings generated with the \*Lps\*O command or its equivalent.
.H 3 "Creating and Starting a simple Process"
.iX "\*Lsimple\*O process"
.P
To create and start a \*Lsimple\*O process, do the following:
.P
.AL
.LI
Verify that you have the necessary privilege.  You must be included in the 
\*Ladmin.bos\*O file on the machine where the process is to be started. 
If necessary, issue the \*Lbos lsadmin\*O command to check.
.nL
.ne 15
.LI
Create an entry for the \*Lsimple\*O process in the \*LBosConfig\*O file, and
start it:
.iS
\*C$ \*Lbos create -server \*Vmachine\*L -process \*Vserver_process\*L -type simple \e
-cmd \*Vcmd_line\*O...
.iE
.P
The \*L\-type simple\*O option specifies this as a \*Lsimple\*O process.
.P
Following is an example \*Lsimple\*O process entry named \*Lflserver\*O on the
machine named \*Lfs1\*O:
.iS
\*C$ \*Lbos create /.../abc.com/hosts/fs1 flserver simple \*Vdcelocal\*L/bin/flserver\*O
.iE
.P
.LE
.H 3 "Creating and Starting a cron Process"
.iX "-[" "\*Lcron\*O process"
.P
To create and start a \*Lcron\*O process, do the following:
.P
.AL
.LI
Verify that you have the necessary privilege.  You must be included in the 
\*Ladmin.bos\*O file on the machine where the process is to be started. 
If necessary, issue the \*Lbos lsadmin\*O command to check.
.LI
Create an entry for the \*Lcron\*O process in the \*LBosConfig\*O file, and
start it:
.iS
\*C$ \*Lbos create -server \*Vmachine\*L -process \*Vserver_process\*L -type cron \e
-cmd \*Vcmd_line\*O...
.iE
.P
The \*L\-type cron\*O option specifies this as a \*Lcron\*O process.
.P
Following is a sample \*Lcron\*O process entry named \*Lbackup\*O on the
machine named \*Lfs1\*O.  The \*L\-localauth\*O option allows the
unauthenticated process to use the DFS server principal of \*Lfs1\*O to
execute the privileged \*Lfts clonesys\*O command.
.iS
\*C$ \*Lbos create /.../abc.com/hosts/fs1 backup cron \e
"\*Vdcelocal\*L/bin/fts clonesys -s /.../abc.com/hosts/fs1 -localauth" 5:30\*O
.iE
.LE
.iX "-]" "\*LBosConfig\*O file" "adding entries"
.iX "-]" "\*Lcron\*O process"
.iX "-]" "DFS servers" "creating"
.H 2 "Listing Status and Machine Information"
.iX "-[" "\*Lbos\*O command suite" "\*Lstatus\*O"
.P
Use the \*Lbos status\*O command to check the processes that are running on 
a server machine.  The command causes the BOS Server to probe and determine 
the status of each process on the machine.  It then displays output about the 
status of each process.  It also displays appropriate messages if DFS 
authorization checking is disabled on the machine or if the machine's 
\*Vdcelocal\*O directory or its contents are not protected appropriately.
.P
The process information provided by the \*Lbos status\*O command enables you 
to determine the role of the server machine (File Server machine, System 
Control machine, Binary Distribution machine, Fileset Database machine, 
Backup Database machine, or multiple machine roles).  When you are using the 
\*Lbos status\*O command to determine server machine roles, include the 
\*L\-long\*O option to provide more detailed output.
.H 3 "Checking the Statuses of Processes on a Server Machine"
.iX "-[" "server machines" "checking process status"
.P
Enter the \*Lbos status\*O command to check the statuses of the processes on
a server machine.  Use the \*L\-process\*O option to display the statuses of
specific processes on the specified server machine, or omit the option to
display the statuses of all processes on the machine.
.iS
\*C$ \*Lbos status -server \*Vmachine\*O [\*L\-process \*Vserver_process\*O...] [\*L\-long\*O]
.iE
.P
The \*L\-long\*O option indicates that more detailed information about the 
specified processes is to be displayed.
.P
The command first displays the following line if DFS authorization checking
is disabled on the machine (it does not display the line if DFS authorization
checking is enabled):
.oS
\*CBosserver reports machine is not checking authorization.\*O
.oE
.P
It then displays the following line if the BOS Server finds that the
\*Vdcelocal\*O directory or a directory or file beneath it on the machine
has protections that the BOS Server believes are inappropriate:
.oS
\*CBosserver reports inappropriate access on server directories.\*O
.oE
.P
The BOS Server displays this message if the UNIX mode bits on the
\*Vdcelocal\*O directory and its contents do not enforce certain protections;
for example, the message can indicate that users who should not be able to
write to the \*Vdcelocal\*O directory and its subdirectories have write access.
The BOS Server also displays the message if a directory or file is not owned by
the appropriate user (for example, \*Lroot\*O).
.P
The BOS Server displays the message as a courtesy to the user. It does nothing
to change the protections, nor does it fail if the protections are violated.
(See the description of the \*Lbos status\*O command in Part 2 of this guide
and reference for information about the protections the BOS Server wants to
see enforced.)
.nS "note"
Your vendor can modify the default protections enforced by the BOS Server.
Refer to your vendor's documentation to determine the protections that apply
for your version of DFS.
.nE
.P
The command then displays status information about the processes on the
machine.  The possible statuses for any process include
.ML
.LI
\*Ccurrently running normally\*O
.P
For a \*Lsimple\*O process, this means
it is currently running; for a \*Lcron\*O process, this means it is scheduled
to run.
.LI
\*Ctemporarily enabled\*O
.P
The status flag for the process in the
\*LBosConfig\*O file is \*LNotRun\*O, but the process has been enabled with
the \*Lbos startup\*O or \*Lbos restart\*O command.
.LI
\*Ctemporarily disabled\*O
.P
Either the \*Lbos shutdown\*O command was used
to stop the process, or the BOS Server quit trying to restart the process, in
which case the message \*Cstopped for too many errors\*O also appears.
.LI
\*Cdisabled\*O
.P
The status flag for the process in the \*LBosConfig\*O file
is \*LNotRun\*O, and the process has not been enabled. 
.LI
\*Chas core file\*O
.P
The process failed or produced a core file at some
time.  This message can appear with any of the other messages.  Core files are
stored in \*Vdcelocal\*L/var/dfs/adm\*O.  The name of the core file indicates
the process that failed; for example, \*Lcore.ftserver\*O.
.LE
.P
The output for a \*Lcron\*O process includes an auxiliary status message,
reporting when the command is next scheduled to execute.
.P
The following additional information is displayed when the \*L\-long\*O option
is used:
.ML
.LI
The process type (\*Lsimple\*O or \*Lcron\*O).
.LI
How many \*Lproc start\*O procedures occurred; \*Lproc start\*O
procedures occur when the process is
started or restarted by the current BOS Server.
.LI
The time of the last \*Lproc start\*O.
.LI
The exit time and error exit time when the process last failed.  This appears
only if the process failed while the BOS Server was running. (Provided the BOS
Server was running both when the process was started and when it failed, the
BOS Server can provide this information for any process that has an entry in
the \*LBosConfig\*O file.)
.LI
The command and its options that are used by the BOS Server to start the 
process.
.LE
.P
The following examples show two executions of the \*Lbos status\*O command on
the same server machine.  The first example shows the output displayed when the
\*L\-long\*O option is omitted from the command.
.iS
\*C$ \*Lbos status /.../abc.com/hosts/fs4\*O
.iE
.nL
.ps 11
.vs 12
.oS
\*CInstance ftserver, currently running normally.\*O
.oE
.ps 12
.vs 14
.P
The second example shows the output displayed when the \*L\-long\*O option is
included with the command.
.iS
\*C$ \*Lbos status /.../abc.com/hosts/fs4 -long\*O
.iE
.nL
.ps 11
.vs 12
.oS
\*CInstance ftserver, (type is simple) currently running normally.\*O
\*CProcess last started at Fri Nov 22 05:36:02 1991 (1 proc starts)\*O
\*CParameter 1 is `\*Vdcelocal\*C/bin/ftserver'\*O
.oE
.ps 12
.vs 14
.P
.iX "-]" "server machines" "checking process status"
.H 3 "Determining Server Machine Roles"
.iX "-[" "machines" "roles in DFS"
.P
The following instructions can help you use the \*Lbos status\*O command to
determine which server machines are filling the various machine roles in your
cell or domain.  The instructions assume that your cell is configured 
according to the installation and configuration instructions for your system; 
for example, they assume that all machines except the System Control machine 
are running a client portion of the Update Server that references the 
\*Vdcelocal\*L/var/dfs\*O directory on the System Control machine.  If your 
server machines are not configured in this manner, these instructions may not 
help you determine the roles of the machines.
.P
.iX "System Control machines" "how to identify"
.iX "Binary Distribution machines"
To determine whether a server machine is a System Control machine, a Binary
Distribution machine, or neither of the two types of machines, issue the
\*Lbos status\*O command on the machine with \*Lupserver\*O as the argument
for the \*L\-process\*O option.  The output from the command indicates only
whether the machine is a System Control machine, a Binary Distribution machine,
or neither of the two; a machine that fits neither of the two roles can be a
File Server machine, a Fileset Database machine, a Backup Database machine, or
any combination of the three.
.P
To learn which machine is the System Control machine, issue the \*Lbos
status\*O command on any server machine, using \*Lupclient\*O as the argument
for the \*L\-process\*O option.  The output for the \*Lupclient\*O process used
to obtain administrative lists from the System Control machine includes the
\*Lupclient\*O command used to start the process.  The first parameter of the
command is the name of the System Control machine; the second parameter is the
pathname to the administrative lists on that machine; for example, 
\*Vdcelocal\*L/var/dfs\*O.
.P
To learn which machine is a Binary Distribution machine, issue the \*Lbos
status\*O command on a server machine of the CPU/OS type you wish to check,
again using \*Lupclient\*O as the argument for \*L\-process\*O.  The output for
the \*Lupclient\*O process used to obtain binary files from the Binary
Distribution machine includes the \*Lupclient\*O command used to start the
process.  The first parameter of the command is the name of the Binary
Distribution machine; the second parameter is the pathname to the binary 
files on that machine; for example, \*Vdcelocal\*L/bin\*O.
.P
When using the \*Lbos status\*O command to determine machine roles, always use
the \*L\-long\*O option to display more detailed information about the specified
processes.  You must use the \*L\-long\*O option to determine the exact role of a
server machine.
.P
The following examples illustrate how to determine whether a machine is
a System Control machine or a Binary Distribution machine.  The output for a
server machine that is neither a System Control machine nor a Binary
Distribution machine displays that no \*Lupserver\*O is running.
.iS
\*C$ \*Lbos status /.../abc.com/fs1 upserver -long\*O
.iE
.nL
.ps 11
.vs 12
.oS
\*Cbos: failed to get instance info for `upserver' (no such entity)\*O
.oE
.ps 12
.vs 14
.P
The output for a System Control machine includes references to the
\*Lupserver\*O process and the \*Vdcelocal\*L/var/dfs\*O directory, where
administrative lists are stored.
.iS
\*C$ \*Lbos status /.../abc.com/fs2 upserver -long\*O
.iE
.nL
.ps 11
.vs 12
.oS
\*CInstance upserver, (type is simple) currently running normally.\*O
\*CProcess last started at Mon Nov 4 05:23:54 1991 (1 proc starts)\*O
\*CParameter 1 is `\*Vdcelocal\*C/bin/upserver \*Vdcelocal\*C/var/dfs'\*O
.oE
.ps 12
.vs 14
.P
The output for a Binary Distribution machine includes references to the
\*Lupserver\*O process and the \*Vdcelocal\*L/bin\*O directory, where binary
files for processes and programs are stored.
.iS
\*C$ \*Lbos status /.../abc.com/fs3 upserver -long\*O
.iE
.nL
.ps 11
.vs 12
.oS
\*CInstance upserver, (type is simple) currently running normally.\*O
\*CProcess last started at Mon Nov 4 05:16:31 1991 (1 proc starts)\*O
\*CParameter 1 is `\*Vdcelocal\*C/bin/upserver \*Vdcelocal\*C/bin'\*O
.oE
.ps 12
.vs 14
.iX "-]" "machines" "roles in DFS"
.iX "-]" "\*Lbos\*O command suite" "\*Lstatus\*O"
.H 2 "Stopping and Removing Processes"
.iX "-[" "DFS servers" "stopping"
.iX "\*Lbos\*O command suite" "\*Lstop\*O" 
.P
You can stop a process by using the \*Lbos stop\*O command to set its status 
flag to \*LNotRun\*O in both the BOS Server's memory and the \*LBosConfig\*O 
file.  The process then appears as \*Cdisabled\*O in the output from the \*Lbos
status\*O command.  The entry remains in the file, but it does not run again
until you issue the \*Lbos start\*O command, which changes its status flag 
to \*LRun\*O in \*Eboth\*O the memory and the \*LBosConfig\*O file.  You 
can also issue the \*Lbos startup\*O command to run the process by changing 
its status flag \*Eonly\*O in memory.
.P
.iX "\*Lbos\*O command suite" "\*Lshutdown\*O"
To halt a process temporarily (for example, to perform maintenance or make
alterations to a configuration), use the \*Lbos shutdown\*O command to change
the process's status in the BOS Server's memory to \*LNotRun\*O.  The effect is
immediate and remains until you again change the memory state or until the BOS
Server restarts, at which time it consults the \*LBosConfig\*O file and sets
the memory state to match the information in the file.
.P
.iX "\*Lbos\*O command suite" "\*Ldelete\*O"
After you stop a process with the \*Lbos stop\*O command, you can remove it
from the \*LBosConfig\*O file with the \*Lbos delete\*O command.  It then no
longer appears in the output from the \*Lbos status\*O command.  You must use 
the \*Lbos stop\*O command to stop a process (\*Lsimple\*O or \*Lcron\*O) whose
status is \*LRun\*O before you use the \*Lbos delete\*O command to remove it
from the \*LBosConfig\*O file.  An error occurs if the status of a process
being deleted is \*LRun\*O when the \*Lbos delete\*O command is issued.
.nS "caution"
Do not temporarily stop a database server process on all
machines simultaneously.  This would make the database totally unavailable.
.nE
.H 3 "Stopping Processes by Changing Their Status Flags to NotRun"
.P
To stop processes by changing their status flags to \*LNotRun\*O, do the
following:
.P
.AL
.LI
Verify that you have the necessary privilege.  You must be included in the
\*Ladmin.bos\*O file on the machine where the processes are to be
stopped.  If necessary, issue the \*Lbos lsadmin\*O command to
check.
.LI
Issue the \*Lbos stop\*O command to stop the processes by changing their
status flags in the \*LBosConfig\*O file and in the BOS Server's memory to 
\*LNotRun\*O:
.iS
\*C$ \*Lbos stop -server \*Vmachine\*L -process \*Vserver_process\*O... [\*L\-wait\*O]
.iE
.P
The \*L\-wait\*O option causes the command shell prompt to remain
absent until the processes have stopped.  If omitted, the prompt
immediately returns, even if the processes have not yet
stopped.
.LE
.H 3 "Stopping Processes Temporarily"
.iX "\*Lbos\*O command suite" "\*Lshutdown\*O"
.P
To stop processes temporarily, do the following:
.P
.AL
.LI
Verify that you have the necessary privilege.  You must be included in the
\*Ladmin.bos\*O file on the machine where the processes are to be
stopped.  If necessary, issue the \*Lbos lsadmin\*O command to
check.
.LI
Issue the \*Lbos shutdown\*O command to stop the processes by changing
their status flags in the BOS Server's memory to \*LNotRun\*O:
.iS
\*C$ \*Lbos shutdown -server \*Vmachine\*O [\*L\-process \*Vserver_process\*O...] [\*L\-wait\*O]
.iE
.P
The \*L\-process\*O \*Vserver_process\*O option specifies each
server process to be stopped.  Omit this option to stop all processes
except the BOS Server.
.P
The \*L\-wait\*O option causes the command shell prompt to remain
absent until the processes have stopped.  If omitted, the prompt
immediately returns, even if the processes have not yet
stopped.
.LE
.H 3 "Removing Processes from the BosConfig File"
.iX "\*LBosConfig\*O file" "removing entries"
.iX "\*Lbos\*O command suite" "\*Lstop\*O"
.iX "\*Lbos\*O command suite" "\*Ldelete\*O"
.iX "DFS servers" "deleting"
.P
To remove processes from the \*LBosConfig\*O file, do the following:
.P
.AL
.LI
Verify that you have the necessary privilege.  You must be included in the
\*Ladmin.bos\*O file on the machine from which the process is to
be removed.  If necessary, issue the \*Lbos lsadmin\*O command to
check.
.LI
Issue the \*Lbos stop\*O command to stop the processes by changing their
status flags in the \*LBosConfig\*O file and in the BOS Server's memory to 
\*LNotRun\*O; you must also do this for \*Lcron\*O processes, even though 
they do not run continuously.
.iS
\*C$ \*Lbos stop -server \*Vmachine\*L -process \*Vserver_process\*O... [\*L\-wait\*O]
.iE
.P
The \*L\-wait\*O option causes the command shell prompt to remain absent until 
the processes have stopped.  If omitted, the prompt immediately returns, even if
the processes have not yet stopped.
.LI
Remove the processes from the \*LBosConfig\*O file with the \*Lbos delete\*O
command:
.iS
\*C$ \*Lbos delete -server \*Vmachine\*L -process \*Vserver_process\*O...
.iE
.P
.LE
.iX "-]" "DFS servers" "stopping"
.H 2 "Starting Processes"
.iX "-[" "DFS servers" "starting"
.P
When starting processes, you can use the \*Lbos start\*O command to change
their status flags to \*LRun\*O in both the \*LBosConfig\*O file and in the
BOS Server's memory.  You can also start processes that are temporarily disabled
(processes that have a status of \*LRun\*O in the \*LBosConfig\*O file but a 
status of \*LNotRun\*O in memory) by using the \*Lbos startup\*O command 
and changing only the memory state to \*LRun\*O.  You can use the 
\*Lbos startup\*O command to change a process's status in memory to \*LRun\*O 
even if its status in the \*LBosConfig\*O file is \*LNotRun\*O; thus, you can 
use the \*Lbos startup\*O command to run tests on a server process without 
enabling it permanently.
.P
A newly started process is a completely new instance; if you install new
binaries during the time a process is shut down, they are used when you issue
\*Lbos start\*O or \*Lbos startup\*O.  If an instance of a process is already
running, the only effect of these commands is to ensure that the process's
status flag is set to \*LRun\*O in memory and, if \*Lbos start\*O is used, in
the \*LBosConfig\*O file; you must issue the \*Lbos restart\*O command to start
a new instance of the process.
.H 3 "Starting Processes by Changing Their Status Flags to Run"
.iX "\*Lbos\*O command suite" "\*Lstart\*O"
.P
To start processes by changing their status flags to \*LRun\*O, do the
following:
.P
.AL
.LI
Verify that you have the necessary privilege.  You must be included in the
\*Ladmin.bos\*O file on the machine where the processes are to be
started.  If necessary, issue the \*Lbos lsadmin\*O command to
check.
.LI
Issue the \*Lbos start\*O command to start the processes by changing their
status flags in the \*LBosConfig\*O file and in memory to \*LRun\*O:
.iS
\*C$ \*Lbos start -server \*Vmachine\*L -process \*Vserver_process\*O...
.iE
.P
.LE
.H 3 "Starting All Stopped Processes That Have BosConfig Flags of Run"
.iX "\*Lbos\*O command suite" "\*Lstartup\*O"
.P
To start all stopped processes that have status flags of \*LRun\*O in the
\*LBosConfig\*O file, do the following:
.P
.AL
.LI
Verify that you have the necessary privilege.  You must be included in the
\*Ladmin.bos\*O file on the machine where the processes are to be
started.  If necessary, issue the \*Lbos lsadmin\*O command to
check.
.LI
Use the \*Lbos startup\*O command to start each process that has a status 
flag of \*LRun\*O in the \*LBosConfig\*O file; this changes each process's 
status flag in the BOS Server's memory from \*LNotRun\*O to \*LRun\*O.  Each 
process's status flag in the \*LBosConfig\*O file remains the same.
.iS
\*C$ \*Lbos startup -server \*Vmachine\*O
.iE
.P
.LE
.H 3 "Starting Specific Temporarily Stopped Processes"
.P
To start processes that were temporarily stopped, do the following:
.P
.AL
.LI
Verify that you have the necessary privilege.  You must be included in the
\*Ladmin.bos\*O file on the machine where the processes are to be
started.  If necessary, issue the \*Lbos lsadmin\*O command to
check.
.LI
Use the \*Lbos startup\*O command to start each specified process by
changing its status flag in the BOS Server's memory to \*LRun\*O.  Each 
process's status flag in the \*LBosConfig\*O file remains unchanged.
.iS
\*C$ \*Lbos startup -server \*Vmachine\*L -process \*Vserver_process\*O...
.iE
.P
.LE
.iX "-]" "DFS servers" "starting"
.H 2 "Restarting Processes"
.iX "\*Lbos\*O command suite" "\*Lrestart\*O"
.iX "-[" "DFS servers" "restarting"
.P
You may sometimes need to stop and then restart a process (for example, to load
a new binary file immediately rather than wait for the BOS Server to perform
its daily check for new files, which is described in Section 5.9).  You can use
the \*Lbos restart\*O command to stop and restart any or all processes on a
server machine, including the BOS Server itself.  The \*Lbos restart\*O command
can be used to restart only those processes already controlled by the BOS
Server.  It does not change the status flag for a process in the \*LBosConfig\*O
file.
.nS "caution"
Restarting some processes can cause a service outage.  You should
schedule these outages for times of low usage on the system.
.nE
.P
.AL
.LI
Verify that you have the necessary privilege.  You must be included in the 
\*Ladmin.bos\*O file on the machine on which the processes are to be 
restarted.  If necessary, issue the \*Lbos lsadmin\*O command to check.
.LI
There are three ways to use the \*Lbos restart\*O command: you can stop and
restart specific processes; you can stop and restart all processes,
\*Eincluding\*O the BOS Server; or you can stop and restart all processes
\*Eexcept\*O the BOS Server.
.P
\*ETo stop and restart specific processes\*O, use the \*L\-process\*O option
with the \*Lbos restart\*O command.  Specify the name of each server process 
to be stopped and restarted.  The BOS Server stops and immediately restarts 
all specified processes, regardless of their status flags in the 
\*LBosConfig\*O file.
.iS
\*C$ \*Lbos restart -server \*Vmachine\*L -process \*Vserver_process\*O...
.iE
.P
\*ETo restart all processes including the BOS Server\*O, use the
\*L\-bosserver\*O option with \*Lbos restart\*O the command.  The BOS Server 
stops all processes, including itself.  A new BOS Server immediately starts; 
it then restarts all processes with the status flag \*LRun\*O in the 
\*LBosConfig\*O file.
.iS
\*C$ \*Lbos restart -server \*Vmachine\*L -bosserver\*O
.iE
.P
.ne 8
The \*L\-bosserver\*O option indicates that the BOS Server on \*L\-server\*O 
is to stop all processes, including itself; a new BOS Server starts, 
restarting all processes with the status flag \*LRun\*O.
.P
\*ETo stop and restart all processes except the BOS Server\*O, omit both the
\*L\-process\*O and \*L\-bosserver\*O options from the \*Lbos restart\*O command.
The BOS Server stops all processes except itself.  It then immediately 
restarts all processes with the status flag \*LRun\*O in the \*LBosConfig\*O 
file.
.iS
\*C$ \*Lbos restart -server \*Vmachine\*O
.iE
.P
.LE
.iX "-]" "DFS servers" "restarting"
.H 2 "Installing Process Binary Files"
.iX "-[" "binary files" "installing"
.iX "binary files" "storing"
.P
Binary files for DFS server processes are stored on the local disk of each
server machine.  By default, the files are stored in the \*Vdcelocal\*L/bin\*O
directory.  The Binary Distribution machine for each CPU/OS type in a cell
houses the master versions of the binary files for its machine and operating
system type in this same local directory.  The files can be stored in a
different directory on any machine, but it avoids potential confusion if they
are stored in the default directory on all machines.
.P
.iX "\*Lbos\*O command suite" "\*Linstall\*O"
The \*Lbos install\*O command can be used to install a new process binary file
on a server machine.  It should be used to install new binary files only on
Binary Distribution machines.  The files are then distributed from each Binary
Distribution machine to other server machines of the same CPU/OS type via the
Update Server.  By default, the \*Lupclient\*O process on each server
machine checks the Binary Distribution machine of its CPU/OS type for new (or
different) versions of binary files every 5 minutes; if it finds that versions
of files installed on the Binary Distribution machine are different from those
on the local machine, it automatically copies the files to its local machine
via the \*Lupserver\*O process on the Binary Distribution machine.
.P
Do not install new binary files on a server machine other than the Binary
Distribution machine.  The binary files are overwritten the next time the
\*Lupclient\*O process on the machine copies versions of files from the Binary
Distribution machine of its CPU/OS type.
.P
.ne 15
The \*Lbos install\*O command preserves former versions of files in the
installation directory by assigning \*L.BAK\*O and \*L.OLD\*O extensions as
follows:
.ML
.LI
If a current version of the file exists, the command adds a \*L.BAK\*O
extension to its name.
.LI
If a \*L.BAK\*O version of the file exists, the command changes its extension
to \*L.OLD\*O before giving the current version a \*L.BAK\*O extension.
.LI
If \*L.BAK\*O and \*L.OLD\*O versions of the file exist and the current
\*L.BAK\*O version is less than 7 days old, the current version of the file
overwrites the current \*L.BAK\*O version, but the \*L.OLD\*O version remains
unchanged.
.LI
If \*L.BAK\*O and \*L.OLD\*O versions of the file exist and the current
\*L.BAK\*O version is at least 7 days old, the current \*L.BAK\*O version
overwrites the current \*L.OLD\*O version, and the current version of the file
overwrites the current \*L.BAK\*O version.  Use the \*Lbos getdates\*O command
to examine the time stamps of current, \*L.BAK\*O, and \*L.OLD\*O versions of
binary files to determine when they were installed.
.LE
.P
The \*Lbos install\*O command installs all files with the UNIX mode bits set
to \*L755\*O, regardless of the mode bits associated with a version of the
file that currently exists in the installation directory.  These permissions
are subject to the \*Lumask\*O associated with the BOS Server on the machine
on which the files are installed.  The mode bits associated with the current
version of the file are preserved when it becomes the \*L.BAK\*O version.  The
\*Lbos install\*O command neither preserves nor manipulates the Access 
Control List (ACL) permissions of a file installed from or to a DCE LFS 
fileset.
.P
.iX "\*Lbos\*O command suite" "\*Luninstall\*O"
The \*Lbos uninstall\*O command replaces the current version of a binary file
with the next-oldest version of the file: the \*L.BAK\*O version, if it
exists; otherwise, the \*L.OLD\*O version.  If both the \*L.BAK\*O and
\*L.OLD\*O versions exist, the \*L.OLD\*O version replaces the \*L.BAK\*O
version when the latter becomes the current version.  The \*Lbos uninstall\*O
command's \*L\-all\*O option can be used to remove all versions of a 
binary file.
.P
.iX "\*Lbos\*O command suite" "\*Lprune\*O"
The \*Lbos prune\*O command can be used to remove only the \*L.BAK\*O and
\*L.OLD\*O versions of binary files from the \*Vdcelocal\*L/bin\*O directory.
The \*Lbos prune\*O command can also be used to remove core files, which are
generated when processes monitored by the BOS Server go down, from the 
\*Vdcelocal\*L/var/dfs/adm\*O directory.
.P
.iX "\*Lbos\*O command suite" "\*Lrestart\*O"
.ne 8
After new versions of binary files for processes controlled by the BOS Server
are installed on a machine, you can use the \*Lbos restart\*O command to begin
using them immediately.  Otherwise, the new versions are not used until the next
new binary restart time (specified in the \*Vdcelocal\*L/var/dfs/BosConfig\*O
file) of the BOS Server on the machine. (See Section 5.9 for detailed
information about checking and setting scheduled restart times.)
.H 3 "Installing New Binary Files"
.P
To install new binary files, do the following:
.AL
.LI
Verify that you have the necessary privilege.  You must be included in the 
\*Ladmin.bos\*O file on the machine on which the binary files are to be 
installed.  If necessary, issue the \*Lbos lsadmin\*O command to check.
.LI
Enter the \*Lbos install\*O command to install a new version of each specified
binary file:
.iS
\*C$ \*Lbos install -server \*Vmachine\*L -file \*Vbinary_file\*O... [\*L\-dir \*Valternate_dest\*O]
.iE
.P
The \*L\-file\*O \*Vbinary_file\*O option specifies the pathname of each 
binary file to be installed on the machine specified with \*L\-server\*O.  For 
each file, specify either a full or a relative pathname; relative pathnames 
are interpreted relative to the current working directory.  An installed file 
replaces a file of the same name.
.P
The \*L\-dir\*O \*Valternate_dest\*O option specifies the pathname of the 
directory on \*L\-server\*O in which all specified files are to be installed. 
Omit the \*L\-dir\*O option to install the files in the default directory, 
\*Vdcelocal\*L/bin\*O; otherwise, provide a full or relative pathname. 
Relative pathnames are interpreted relative to the \*Vdcelocal\*O directory 
on \*L\-server\*O.
...\" 
.LE
.iX "-]" "binary files" "installing"
.nL
.ne 15
.H 3 "Replacing Binary Files with Older Versions"
.iX "binary files" "replacing"
.iX "\*Lbos\*O command suite" "\*Luninstall\*O"
.P
To replace binary files with older versions of the files, do the following:
.P
.AL
.LI
Verify that you have the necessary privilege.  You must be included in the 
\*Ladmin.bos\*O file on the machine on which the binary files reside.  If 
necessary, issue the \*Lbos lsadmin\*O command to check.
.LI
Enter the \*Lbos uninstall\*O command to replace the current version of each
specified binary file with its next-oldest (\*L.BAK\*O or \*L.OLD\*O) version:
.nL
.ps 11
.vs 12
.iS
\*C$ \*Lbos uninstall -server \*Vmachine\*L -file \*Vbinary_file\*O... [\*L\-dir \*Valternate_dest\*O] [\*L\-all\*O]
.iE
.ps 12
.vs 14
.P
The \*L\-file\*O \*Vbinary_file\*O option specifies the name of each binary 
file to be replaced with its next-oldest version.  Each specified file is 
replaced with its \*L.BAK\*O version, if it exists; otherwise, it is replaced 
with its \*L.OLD\*O version.  If both the \*L.BAK\*O and \*L.OLD\*O versions 
exist, the \*L.OLD\*O version also replaces the \*L.BAK\*O version.  All 
specified files must reside in the same directory (\*Vdcelocal\*L/bin\*O or 
an alternate directory specified with the \*L\-dir\*O option).  Specify only 
filenames; the command ignores all but the final component of a pathname.
.P
The \*L\-dir\*O \*Valternate_dest\*O option provides the pathname of the 
directory in which all specified files reside.  Omit the \*L\-dir\*O option if 
the files reside in the default directory, \*Vdcelocal\*L/bin\*O; otherwise, 
provide a full or relative pathname.  Relative pathnames are interpreted 
relative to the \*Vdcelocal\*O directory on \*L\-server\*O.
.P
The \*L\-all\*O option indicates that all versions (current, \*L.BAK\*O, 
and \*L.OLD\*O) of each specified file are to be removed.
...\" 
.LE
.H 3 "Checking the Time Stamps on Binary Files"
.iX "binary files" "timestamps"
.iX "timestamps" "on binary files"
.iX "\*Lbos\*O command suite" "\*Lgetdates\*O"
.P
Enter the \*Lbos getdates\*O command to determine when binary files were
installed:
.iS
\*C$ \*Lbos getdates -server \*Vmachine\*L -file \*Vbinary_file\*O... [\*L\-dir \*Valternate_dest\*O]
.iE
.P
.ne 10
The \*L\-file\*O \*Vbinary_file\*O option specifies the name of the current 
version of each binary file whose time stamps are to be displayed.  The time 
stamps on the current, \*L.BAK\*O, and \*L.OLD\*O versions of each file are 
displayed.  All specified files must reside in the same directory, 
\*Vdcelocal\*L/bin\*O, or an alternate directory specified with the \*L\-dir\*O
option.  Specify only filenames; the command ignores all but the final 
component of a pathname.
.P
The \*L\-dir\*O \*Valternate_dest\*O option specifies the pathname of the 
directory in which all specified files reside.  Omit this option if the files 
reside in the default directory, \*Vdcelocal\*L/bin\*O; otherwise, provide 
a full or relative pathname.  Relative pathnames are interpreted relative 
to the \*Vdcelocal\*O directory on \*L\-server\*O.
...\" 
.H 3 "Removing Old Binary and Core Files"
.iX "-[" "binary files" "removing"
.iX "-[" "core files" "deleting"
.P
To remove old binary and core files, do the following:
.P
.AL
.LI
Verify that you have the necessary privilege.  You must be included in the 
\*Ladmin.bos\*O file on the machine on which the binary and core files reside.
If necessary, issue the \*Lbos lsadmin\*O command to check.
.LI
Enter the \*Lbos prune\*O command to remove old versions of \*L.BAK\*O files,
\*L.OLD\*O files, core files, or any combination of the files from the
\*Vdcelocal\*L/bin\*O and \*Vdcelocal\*L/var/dfs/adm\*O directories:
.iS
\*C$ \*Lbos prune -server \*Vmachine\*O [\*L\-bak\*O] [\*L\-old\*O] [\*L\-core\*O] [\*L\-all\*O]
.iE
.P
The \*L\-bak\*O option specifies that all \*L.BAK\*O files are to be 
removed from \*Vdcelocal\*L/bin\*O.  Use this option and optionally 
\*L\-old\*O, \*L\-core\*O, or both, or use \*L\-all\*O.
.P
The \*L\-old\*O option specifies that all \*L.OLD\*O files are to be removed 
from \*Vdcelocal\*L/bin\*O.  Use this option and optionally \*L\-bak\*O, 
\*L\-core\*O, or both, or use \*L\-all\*O.
.P
The \*L\-core\*O option specifies that all core files are to be removed from
\*Vdcelocal\*L/var/dfs/adm\*O.  Use this option and optionally \*L\-bak\*O,
\*L\-old\*O, or both, or use \*L\-all\*O.
.P
.ne 10
The \*L\-all\*O option specifies that all \*L.BAK\*O and \*L.OLD\*O files are 
to be removed from \*Vdcelocal\*L/bin\*O and all core files are to be 
removed from \*Vdcelocal\*L/var/dfs/adm\*O.  Use this option or use some 
combination of \*L\-bak\*O, \*L\-old\*O, and \*L\-core\*O.
...\" 
.LE
.H 3 "Removing All Versions of Binary Files
.iX "\*Lbos\*O command suite" "\*Luninstall\*O"
.P
To remove all versions of binary files, do the following:
.P
.AL
.LI
Verify that you have the necessary privilege.  You must be included in the 
\*Ladmin.bos\*O file on the machine on which the binary files reside.  If 
necessary, issue the \*Lbos lsadmin\*O command to check.
.LI
Enter the \*Lbos uninstall\*O command and include its \*L\-all\*O option to
remove all versions of each specified binary file:
.iS
\*C$ \*Lbos uninstall -server \*Vmachine\*L -file \*Vbinary_file\*O... \e
[\*L\-dir \*Valternate_dest\*O] [\*L\-all\*O]
.iE
.P
The \*L\-file\*O \*Vbinary_file\*O option specifies the name of each binary 
file to be removed.  The current, \*L.BAK\*O, and \*L.OLD\*O versions of 
each file are removed.  All specified files must reside in the same directory,
\*Vdcelocal\*L/bin\*O, or an alternate directory specified with the \*L\-dir\*O
option.  Specify only filenames; the command ignores all but the final 
component of a pathname.
.P
The \*L\-dir\*O \*Valternate_dest\*O option specifies the pathname of 
the directory in which all specified files reside.  Omit this option if the 
files reside in the default directory, \*Vdcelocal\*L/bin\*O; otherwise, 
provide a full or relative pathname.  Relative pathnames are interpreted 
relative to the \*Vdcelocal\*O directory on \*L\-server\*O.
.P
The \*L\-all\*O option indicates that all versions (current, \*L.BAK\*O, and 
\*L.OLD\*O) of each specified file are to be removed.
...\" 
.LE
.iX "-]" "binary files" "removing"
.iX "-]" "core files" "deleting"
.H 2 "Setting Scheduled Restart Times"
.iX "-[" "BOS Server" "setting restart times"
.iX "BOS Server" "types of restarts"
.P
The BOS Server performs two types of scheduled restarts: a general restart and
a new binary restart.  During a general restart, the BOS Server first restarts
itself (using a new binary file, if one exists); it then restarts all other
server processes on its machine that have a status flag of \*LRun\*O in the
\*LBosConfig\*O file.  It is recommended that the general restart time be set
as a weekly time; by default, the BOS Server performs this type of restart
weekly, on Sunday at 4:00 a.m.
.P
During a new binary restart, the BOS Server checks for newly installed binary
files.  Binary files are installed on Binary Distribution machines with the
\*Lbos install\*O command, after which they are propagated to other machines
by the Update Server.  If a new version of a process's binary file was installed
in \*Vdcelocal\*L/bin\*O after the process last started on the server machine,
the BOS Server restarts the process so that the new instance of the binary file
is used.  It is recommended that the new binary restart time be specified as a
daily time; by default, the BOS Server executes this type of restart daily, at
5:00 a.m.
.P
The default general and new binary restart times are set for early morning,
when system usage is typically lowest.  The \*LBosConfig\*O file on every
server machine records the two restart times.  This is a local file, so the
information can be different for different machines.  You can check and reset
both time settings with the \*Lbos getrestart\*O and \*Lbos setrestart\*O
commands.
.P
You can set a restart time as a day and time or as just a time. When including
a day, specify the day first, in lowercase letters; you can enter the entire
name or just the first three letters (for example, \*Lsunday\*O or \*Lsun\*O).
When indicating a time, separate hours from minutes with a \*L:\*O (colon);
you can use 24-hour time or 1:00 through 12:00 with \*Lam\*O or \*Lpm\*O (for
example, \*L14:30\*O or \*L"2:30 pm"\*O).  You must enclose the entire entry in
"\|" (double quotes) if it contains spaces (for example, \*L"2:30 pm"\*O or
\*L"sun 14:30"\*O).
.P
You can also set a restart time as \*Lnever\*O or \*Lnow\*O. The setting
\*Lnever\*O indicates that the BOS Server does not perform the indicated type
of restart.  For a restart time, the setting \*Lnow\*O is equivalent to
specifying the current day and time.
.nL
.ne 10
.nS "caution"
.iX "\*LBosConfig\*O file" "editing"
.iX "\*Lbos\*O command suite" "\*Lsetrestart\*O"
Never edit the restart times in the \*LBosConfig\*O file directly; use the
\*Lbos setrestart\*O command only.  If you edit the restart times directly, the
BOS Server does not recognize the new times until it is restarted and again
reads the \*LBosConfig\*O file.
.nE
.H 3 "Checking the Current Restart Times"
.iX "\*Lbos\*O command suite" "\*Lgetrestart\*O"
.P
To check the current time settings, issue the \*Lbos getrestart\*O command:
.iS
\*C$ \*Lbos getrestart -server \*Vmachine\*O
.iE
.P
Following is an example of the output from this command:
.iS
\*C$ \*Lbos getrestart /.../abc.com/hosts/fs3\*O
.iE
.nL
.ps 11
.vs 12
.oS
\*CServer /.../abc.com/hosts/fs3 restarts at sun 4:00 am\*O
\*CServer /.../abc.com/hosts/fs3 restarts for new binaries at 5:00 am\*O
.oE
.ps 12
.vs 14
.H 3 "Setting the General Restart Time"
.iX "\*Lbos\*O command suite" "\*Lsetrestart\*O"
.P
To set the general restart time, do the following:
.P
.AL
.LI
Verify that you have the necessary privilege.  You must be included in the
\*Ladmin.bos\*O file on the machine whose general restart time is to be set.
If necessary, issue the \*Lbos lsadmin\*O command to check.
.LI
Set the general restart time by issuing the \*Lbos setrestart\*O command with
the \*L\-general\*O option:
.iS
\*C$ \*Lbos setrestart -server \*Vmachine\*L -general \*Vtime\*O
.iE
.P
The \*L\-general\*O option identifies this as the general restart
time, not the new binary restart time; \*Vtime\*O is the time at which 
the BOS Server is to restart itself and the other processes it controls.
.LE
.H 3 "Setting the New Binary Restart Time"
.P
To set the new binary restart time, do the following:
.P
.AL
.LI
Verify that you have the necessary privilege.  You must be included in the
\*Ladmin.bos\*O file on the machine whose new binary restart time is to be
set.  If necessary, issue the \*Lbos lsadmin\*O command to check.
.LI
Set the new binary restart time by issuing the \*Lbos setrestart\*O command
with the \*L\-newbinary\*O option:
.iS
\*C$ \*Lbos setrestart -server \*Vmachine\*L -newbinary \*Vtime\*O
.iE
.P
The \*L\-newbinary\*O option identifies this as the new binary restart time, 
not the general restart time; \*Vtime\*O is the time at which the BOS Server 
is to check for new binary files in \*Vdcelocal\*L/bin\*O.
.LE
.iX "-]" "BOS Server" "setting restart times"
.H 2 "Rebooting a Server Machine"
.iX "-[" "server machines" "rebooting"
.iX "Fileset Database machines"
.nS "note"
Consult other DCE component documentation to determine the impact of rebooting
on other DCE components.
.nE
.P
Rebooting a server machine, while not difficult, should never be the first
method used to solve DFS-related problems.  You should reboot a server machine
only if no other recourse is available, such as when a process that is not 
controlled by the BOS Server fails.  Rebooting causes a service outage.  If 
the machine being rebooted is the only Fileset Database machine, it can make 
the entire file system unavailable to all users; if the machine is a File 
Server machine, people using filesets located only on that machine (for 
example, user filesets) cannot access those filesets.
.P
To prepare a server machine for powering down, you can issue the \*Lbos
shutdown\*O command to have the BOS Server shut down the other server
processes that are running on the machine; the BOS Server does not shut 
itself down\(emit terminates correctly when you turn off the machine.  You 
can then reboot the machine by issuing the machine's \*Lreboot\*O command 
(or its equivalent).
.P
.ne 10
You can reboot a machine from either the local console or the console of a
remote machine (via \*Ltelnet\*O or an appropriate program).  The two
approaches are essentially the same, with the exception that rebooting from
the local console lets you track the status of the reboot as it occurs, which
you cannot do with remote rebooting.  Regardless of the reboot method you use,
server processes restart automatically after the reboot if the machine's
initialization file (\*L/etc/rc\*O or its equivalent) contains the following
instruction to restart the BOS Server:
.oS
\*Vdcelocal\*C/bin/bosserver\*O
.oE
.P
To reboot a server machine, do the following:
.AL
.LI
\*ETo reboot from the console of a remote machine\*O, open a remote connection
to the machine you want to reboot (using \*Ltelnet\*O or an appropriate
program).  To reboot from the local console of the machine you want to 
reboot, omit this step.
.LI
Verify that you have the necessary privilege.  You must be included in the 
\*Ladmin.bos\*O file on the machine to be rebooted.  If necessary, issue the 
\*Lbos lsadmin\*O command to check.
.LI
Issue the \*Lbos shutdown\*O command to prepare to power down the machine to
be rebooted.  This command directs the BOS Server to shut down the other DFS
server processes that are running on the machine by changing their status 
flags in the BOS Server's memory to \*LNotRun\*O.  The BOS Server does not 
shut itself down; it terminates safely when you turn off the machine. 
Include the \*L\-wait\*O option to be sure that all processes have stopped 
before performing the next step.
.iS
\*C$ \*Lbos shutdown -server \*Vmachine\*L -wait\*O
.iE
.P
The \*L\-wait\*O option causes the command shell prompt to remain absent 
until the processes are stopped.  If the \*L\-wait\*O option is omitted, the 
prompt returns immediately, even if the processes are not yet stopped.
.LI
Log in as \*Lroot\*O in the native UNIX file system of the machine to be
rebooted.  For example:
.iS
\*C$ \*Lsu root\*O
\*CPassword: \*Vroot_password\*O
.iE
.P
.ne 10
.LI
Issue the appropriate reboot command (\*L/etc/reboot\*O or its equivalent) for
the machine to be rebooted.  For example:
.iS
\*C# \*L/etc/reboot\*O
.iE
.P
.LE
.iX "-]" "server machines" "rebooting"
.iX "-]" "server machines" "controlling and monitoring processes"
.iX "-]" "BOS Server" "how to use"
