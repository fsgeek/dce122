CR Number                     : 13695
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : security tests
Short Description             : Must have authz tests for secd and DCE ACL lib
Reported Date                 : 1/8/97
Found in Baseline             : 1.1
Found Date                    : 1/8/97
Severity                      : B
Priority                      : 1
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[1/8/97 public]

There's not enough ACL/authorization testing going on.  An error case
in secd's sec_acl_mgr_get_access() and a couple similar cases in
the DCE ACL library have gone unnoticed (by tests and multiple reviewers
from multiple companies) for a couple of years.  This is not an area
where DCE can afford to have bugs (theoretically, no part should have bugs,
but this ranks up there in the worst places for a bug).

There must be tests written to test the authorization checks (normal
and delegate) of secd and the DCE ACL lib, in the next release of DCE!



CR Number                     : 13687
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : rpc
Subcomponent Name             : perf test
Short Description             : Perf test needs to be TETized and added to func test suite
Reported Date                 : 12/18/96
Found in Baseline             : 1.0
Found Date                    : 12/18/96
Severity                      : B
Priority                      : 1
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : src/test/rpc/runtime/perf/*
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[12/18/96 public]

The RPC runtime PERF test has always (since before the days of DCE) been a
manual client-server test.  As we've recently found out the hard way, this
leads to it not being run often enough and can also lead to operator error
missing problems that should have been uncovered.

The test should be TETized (via shell script wrappers would be fine) and
added as part of the automated functional test suite, since it does cover
some parts of the RPC runtime functionality that may not be covered well
enough by other automated tests.



CR Number                     : 13671
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : CertAPI
Short Description             : pkc_get_registered_policies API call not tested
Reported Date                 : 11/18/96
Found in Baseline             : 1.2b5
Found Date                    : 11/18/96
Severity                      : D
Priority                      : 1
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : src/test/security/api/capi/Makefile, src/test/security/api/capi/grp_test.cxx (new file)
Diff supplied by              : provider
Diff release                  : 1.2b5
Sensitivity                   : public

[11/18/96 public]
When compiling our API coverage results for the Certification API,
we found that the convenience routine pkc_get_registered_policies 
is not being tested.  This OT supplies a stand-alone test for
this routine.

----------------------------------------------------------------
src/test/security/api/capi/Makefile must be modified as follows:
----------------------------------------------------------------
At the end of the file, change the lines:

>test_registry_OFILES = test_registry.o trycase_helper.o
>trycase_a_OFILES = trycase_a.o cds_help_a.o trycase_helper.o
>PROGRAMS = trycase_a test_registry
>
>.include <${RULES_MK}>

to the following:

>test_registry_OFILES = test_registry.o trycase_helper.o
>trycase_a_OFILES = trycase_a.o cds_help_a.o trycase_helper.o
>grp_test_OFILES = grp_test.o
>PROGRAMS = trycase_a test_registry grp_test
>
>.include <${RULES_MK}>

----------------------------------------------------------------
Add new file src/test/security/api/capi/grp_test.cxx as follows:
----------------------------------------------------------------
extern "C" {
#include <stdio.h>
#include <stdlib.h>
}
#include <dce/pkc_api.h>

int main(int argc, char * argv[]) {


   unsigned32 status;
   gss_OID_set oid_set;
   gss_OID plcy;
   int i;
   int reg_plcy_found = 0;
   int hier_plcy_found = 0;

   status = pkc_get_registered_policies(&oid_set);

   if (status) {
      fprintf(stderr,
              "pkc_get_registered_policies returned 0x%x\n",
              status);
      fprintf(stderr, "!!!!!!!!!!Test failed!!!!!!!!!!\n");
      return EXIT_FAILURE;
   };

   fprintf(stdout,
           "pkc_get_registered_policies returned %d policies\n",
           oid_set->count);

   if (oid_set->count != 2) {
      fprintf(stderr, "Expecting 2\n");
      fprintf(stderr, "!!!!!!!!!!!Test failed!!!!!!!!\n");
      return EXIT_FAILURE;
   };

   for (i=0;i<2;i++) {

      plcy = &((oid_set->elements)[i]);

      if (plcy->length != 4) {
          fprintf(stderr,
                  "Length of policy OID %d is %d, expecting 4\n",
                  i, plcy->length);
          fprintf(stderr, "!!!!!!Test failed!!!!!!\n");
          return EXIT_FAILURE;
      };

      if (((unsigned char *)(plcy->elements))[0] != 0x2b) {
          fprintf(stderr,
             "First octet of policy %d is 0x%2.2x, expecting 0x2b\n",
             i, ((unsigned char *)(plcy->elements))[0]);
          fprintf(stderr, "!!!!!!!!!Test failed!!!!!!!!!\n");
          return EXIT_FAILURE;
      };
      if (((unsigned char *)(plcy->elements))[1] != 0x18) {
          fprintf(stderr,
             "Second octet of policy %d is 0x%2.2x, expecting 0x2b\n",
             i, ((unsigned char *)(plcy->elements))[1]);
          fprintf(stderr, "!!!!!!!!!Test failed!!!!!!!!!\n");
          return EXIT_FAILURE;
      };
      if (((unsigned char *)(plcy->elements))[2] != 0x09) {
          fprintf(stderr,
             "Third octet of policy %d is 0x%2.2x, expecting 0x2b\n",
             i, ((unsigned char *)(plcy->elements))[2]);
          fprintf(stderr, "!!!!!!!!!Test failed!!!!!!!!!\n");
          return EXIT_FAILURE;
      };
      if (((unsigned char *)(plcy->elements))[3] == 0x0c) {
          fprintf(stdout,
                  "Policy %d is DCE-HIERARCHY\n", i);
          hier_plcy_found++;
      } else if (((unsigned char *)(plcy->elements))[3] == 0x0d) {
         fprintf(stdout,
                 "Policy %d is DCE-REGISTRY\n", i);
         reg_plcy_found++;
      } else {

         fprintf(stderr, "Final octet of policy %d is %2.2x\n",
                 i,((unsigned char *)(plcy->elements))[3]);
         fprintf(stderr, "Expecting 0x0c or 0x0d\n");
         fprintf(stderr, "!!!!!!!!Test failed!!!!!!\n");
         return EXIT_FAILURE;
      };
   };

   if ((reg_plcy_found != 1) || (hier_plcy_found != 1)) {
      fprintf(stderr, "Error - incorrect policy registrations:\n");
      fprintf(stderr,
              "Registry policy found %d times (should be 1)\n",
              reg_plcy_found);
      fprintf(stderr,
              "Hierarchy policy found %d times (should be 1)\n",
              hier_plcy_found);
      fprintf(stderr, "!!!!!!!!Test failed!!!!!!!!\n");
      return EXIT_FAILURE;
   };
   fprintf(stdout, "pkc_get_registered_policies test succeeded\n");
   return EXIT_SUCCESS;

}

--------------------------------------------------------------------------
Running the test
--------------------------------------------------------------------------

This new test does not run under tet.  To run the test, set your working
directory to obj/<platform>/test/security/api/capi and execute "grp_test".
A successful run will result in the following output to stdout:

>pkc_get_registered_policies returned 2 policies
>Policy 0 is DCE-REGISTRY
>Policy 1 is DCE-HIERARCHY
>pkc_get_registered_policies test succeeded

Any test failures will print diagnostic messages on stderr, finishing with
a line of the form:

>!!!!!!!!Test Failed!!!!!!!!

Successful test run will also return 0 to the shell; a test failure will
return EXIT_FAILURE.



CR Number                     : 13667
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : 
Short Description             : Fixes to Certification API test procedures
Reported Date                 : 11/14/96
Found in Baseline             : 1.2.2b5
Found Date                    : 11/14/96
Severity                      : B
Priority                      : 1
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[11/25/96 public]

This OT contains all the fixes to the build procedures
needed to run the Certification API functional tests described
in the Testing Guide.

If you are interested in just picking up the new files,
all the files that need to be modified as per the discussion in
this OT have been included in their entirety at the end of the OT
(search for string "Complete Set of Files".)


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

[11/14/96 public]


Currently, in R1.2, the tetized version of Certification API (CAPI) tests 
(in directory "src/test/functional/security/ts/capi")
have the following two bugs:

1.  test-registry.sh :  This shell script invokes the
    tetized program "test_registry_tet" twice, once for
    testing with certificed login credentials, and another
    time for testing with uncertified login credentials.

    Due to a deficiency in tcc, the output of the second
    invocation of test_registry_tet is not appended to
    the resulting journal file (even though the test
    succeeds).


2.  test-hierarchy.sh : This shell script invokes
    the tetized program "trycase_a_tet" which runs
    the CAPI tests for two configurations at once:
          (a) when certificates are stored in DCE CDS.
          (b) when certificates are stored in X500.

    Even though this cannot be classified strictly as
    a bug, it may be important to run just (a) or (b)
    separately. 

This OT describes fixes to these two problems.     

The changes  affect only the way the tests are run for CAPI and 
does not change any files that implement basic CAPI functionality. 
So these changes don't  impact  the existing code for CAPI in any 
significant way.

All changes (two completely new files not in the current R1.2 
distribution, and three modified files since the R1.2 distribution)  
are localized to component directory "src/test/functional/security/ts/capi".

The new files are:

src/test/functional/security/ts/capi/test-registry-second.sh  (described in Part IV)
src/test/functional/security/ts/capi/test-hierarchy-second.sh (described in Part V)

The  files to be modified  are:

src/test/functional/security/ts/capi/Makefile                 (described in Part I)
src/test/functional/security/ts/capi/test-registry.sh         (described in Part II)
src/test/functional/security/ts/capi/test-hierarchy.sh        (described in Part III)

The OT has five parts indicating either a change to an
existing R1.2 file (Parts I, II, III), or a new file
to be added to your  R1.2 distribution (Parts IV and V) 
in the directory "src/test/functional/security/ts/capi".

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Part I.


Changes to src/test/functional/security/ts/capi/Makefile:

  a) Change the line 

     TESTS = test-registry test-hierarchy               TO

     TESTS = test-registry test-hierarchy test-registry-second test-hierarchy-second

  b) Change the line

     SCRIPTS = test-registry test-hierarchy             TO
  
     SCRIPTS = test-registry test-hierarchy test-registry-second test-hierarchy-second

  c) Add the following two lines after the line beginning with word "PROGRAMS":

     SUBDIRS = certs keys testcases
     ILIST = ${PROGRAMS} ${DATAFILES} ${SCRIPTS}
 


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Part II.

"src/test/functional/security/ts/capi/test-registry.sh"
This shell script runs a specific test for retrieving public keys stored 
in the security registry.

BELOW  IS THE MODIFIED FILE and not a DIFF OUTPUT. 

Please replace the file test-registry.sh (inbetween ------ lines)
in your source distribution with the one below: 

-------------------- modified test-registry.sh for R1.2 -------------------
#!/bin/sh
#
# JC - Aug 20, 1996
# Script to invoke the PKSS tests             
# test-registry.sh
#

echo "**********************************************************"
echo "Invoking test-registry..."
echo "**********************************************************"
echo "Doing dce_login_noexec..."
rm -f dce_login_noexec
ln -s `which dce_login` dce_login_noexec
KRB5CCNAME=`dce_login_noexec -c cell_admin -dce-`
export KRB5CCNAME
klist
#
# ignore any errors here.
#
echo "============================================================"
echo "** IGNORE Any Errors while deleteing principal foo
echo "** This is just a cleanup"
echo "============================================================"
echo "Deleting principal foo.."
rgy_edit < delete_foo
echo "============================================================"
echo "** Creating principal test_capi **, This better work! 
echo "============================================================"
rgy_edit < create_foo
echo "============================================================"
echo "Creating Authn/Cipher ERA schema and attaching it to test_capi's xattrs..."
echo "If the ERA schema already exists, you can ignore the error here as well.."
echo "We don't delete the schema since it may affect existing principals"
echo "other than the test principal test_capi which use this schema"
echo "============================================================"
dcecp < create_era
echo "============================================================"
echo "** STARTING Registry Policy Test **, "
echo "   Any errors now will result in failure"
echo "============================================================"
#
# running first with certified credentials
#
REGISTRY_TEST_ARGUMENTS=direct
export REGISTRY_TEST_ARGUMENTS
echo "Trying <test_registry_tet direct> ......"
./test_registry_tet
echo "RETURNED from <test_registry_tet direct>"
echo "CLEANING up after run of Registry Policy Test"
echo "Deleting principal foo.."
rgy_edit < delete_foo
kdestroy
echo "END of Registry Policy Test"
#EOF
-------------------- end of test-registry.sh ----------------------



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Part III.

"src/test/functional/security/ts/capi/test-hierarchy.sh"
This shell script runs a specific test for retrieving public keys stored 
in DCE CDS 

BELOW  IS THE MODIFIED FILE and not a DIFF OUTPUT. 

Please replace the test-hierarchy.sh (inbetween ------ lines)
in your source distribution with the one below: 

--------------------  modified test-hierarchy.sh for R1.2 ----------------------
#
# JC - Aug 20, 1996
# Script to invoke the PKSS tests             
# test-hierarchy.sh
#
echo "******************************************************"
echo "Invoking test-hierarchy (Hierarchical Policy Test) ..."
echo "******************************************************"
echo "Doing dce_login_noexec..."
rm -f dce_login_noexec
ln -s `which dce_login` dce_login_noexec
KRB5CCNAME=`dce_login_noexec -c cell_admin -dce-`
export KRB5CCNAME
klist
#
# running first with certified credentials
#
HIERARCHICAL_TEST_ARGUMENTS="pc1 pc2 pc3 pc4 pc5 pc6 pc7"
export HIERARCHICAL_TEST_ARGUMENTS
echo " ===  Starting a run of test with arguments $HIERARCHICAL_TEST_ARGUMENTS"
./trycase_a_tet
echo "Returned from trycase_a_tet"
echo "******************************************************"
echo "END of Hierarchical Policy Test"
echo "******************************************************"
kdestroy
KRB5CCNAME=
export KRB5CCNAME
#EOF
--------------------  end of test-hierarchy.sh ----------------------

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Part IV.


"src/test/functional/security/ts/capi/test-registry-second.sh"
This shell script runs a specific test for retrieving public keys 
stored in the security registry. 

THIS IS A NEW FILE  not in R1.2 

Please add  this file into your corresponding R1.2 directory.


--------------------  test-registry-second.sh ----------------------
#!/bin/sh
#
# JC - Aug 20, 1996
# Script to invoke the PKSS tests             
# test-registry-second.sh
#

echo "**********************************************************"
echo "Invoking test-registry..."
echo "**********************************************************"
echo "Doing dce_login_noexec..."
rm -f dce_login_noexec
ln -s `which dce_login` dce_login_noexec
KRB5CCNAME=`dce_login_noexec cell_admin -dce-`
export KRB5CCNAME
klist
#
# ignore any errors here.
#
echo "============================================================"
echo "** IGNORE Any Errors while deleteing principal foo
echo "** This is just a cleanup"
echo "============================================================"
echo "Deleting principal foo.."
rgy_edit < delete_foo
echo "============================================================"
echo "** Creating principal test_capi **, This better work! 
echo "============================================================"
rgy_edit < create_foo
echo "============================================================"
echo "Creating Authn/Cipher ERA schema and attaching it to test_capi's xattrs..."
echo "If the ERA schema already exists, you can ignore the error here as well.."
echo "We don't delete the schema since it may affect existing principals"
echo "other than the test principal test_capi which use this schema"
echo "============================================================"
dcecp < create_era
echo "============================================================"
echo "** STARTING Registry Policy Test **, "
echo "   Any errors now will result in failure"
echo "============================================================"
#
# running without certified credentials
#
REGISTRY_TEST_ARGUMENTS=untrusted
export REGISTRY_TEST_ARGUMENTS
echo "Trying <test_registry_tet untrusted> ......."
./test_registry_tet
echo "RETURNED from <test_registry_tet untrusted>"
echo "CLEANING up after run of Registry Policy Test"
echo "Deleting principal foo.."
rgy_edit < delete_foo
kdestroy
echo "END of Registry Policy Test"
#EOF
-------------------- end of test-registry-second.sh ----------------------

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Part V


"src/test/functional/security/ts/capi/test-hierarchy-second.sh"
This shell script runs test cases for retrieving public keys stored in the X500 

THIS IS A NEW FILE not in R1.2 

Please add this file into your corresponding R1.2 directory.

--------------------  test-hierarchy-second.sh ----------------------
#
# JC - Aug 20, 1996
# Script to invoke the PKSS tests             
# test-hierarchy-second.sh
#
echo "******************************************************"
echo "Invoking test-hierarchy (Hierarchical Policy Test) ..."
echo "******************************************************"
#
# running first with certified credentials
#
HIERARCHICAL_TEST_ARGUMENTS="xc1 xc2 xc3 xc7"
export HIERARCHICAL_TEST_ARGUMENTS
echo " ===  Starting a run of test with arguments $HIERARCHICAL_TEST_ARGUMENTS"
./trycase_a_tet
echo "Returned from trycase_a_tet"
echo "******************************************************"
echo "END of Hierarchical Policy Test"
echo "******************************************************"
#EOF
--------------------  end of test-hierarchy-second.sh ----------------------


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

[11/25/96 public]


We discovered the following two additional problems in the 
Makefiles  used to build and install tests for certification API:

  (a). Doing a "build" from the "src/test" directory
     does not copy the following data directories (and files within)
     
       "src/test/security/api/capi/certs"
       "src/test/security/api/capi/testcases"
       "src/test/security/api/capi/keys"
       
      to the following directories: 

       "obj/rios/test/security/api/capi/certs"
       "obj/rios/test/security/api/capi/testcases"
       "obj/rios/test/security/api/capi/keys"

     This will cause the tests to fail if they are run
     directly from the "obj/rios/test/security/api/capi"
     directory without using tet.

  (b). Doing a "build install_all" from "src/test" directory
     does not copy the above data directories (and files within)

     to  the following directories:

      "/releases/release/rios/test/functional/security/ts/capi/certs"
      "/releases/release/rios/test/functional/security/ts/capi/testcases"
      "/releases/release/rios/test/functional/security/ts/capi/certs"

     This can cause the tests to fail when run under tet.

To solve the above two problems, you need to make the following changes
to your R1.2 distribution  (in addition to the changes described
in the when this OT was created):

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  (Change I) Change the file 
    "src/test/security/api/Makefile" as follows:

    Replace the lines (Set 1 below) currently in this file to 
    to the next set of lines (Set 2 below) 

    ===============================================
    Set 1  (lines currently in the above Makefile):
    ===============================================

    DATA_SUBDIRS   = control moretests
    .if ${TARGET_MACHINE}=="HP800" || !defined(USE_DES)
    SUBDIRS = testsh moretests control gssapi
    .else
    SUBDIRS = testsh moretests control gssapi capi
    .endif


    ======================================================
    Set 2 (Replacement lines for the lines shown in Set 1)
    ======================================================
    .if ${TARGET_MACHINE}=="HP800" || !defined(USE_DES)
    SUBDIRS = testsh moretests control gssapi
    DATA_SUBDIRS   = control moretests
    .else
    SUBDIRS = testsh moretests control gssapi capi
    DATA_SUBDIRS   = control moretests capi
    .endif


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  (Change II) Append the following two lines to  file
    "src/test/security/api/capi/Makefile" :

      SUBDIRS = certs keys testcases
      ILIST=${PROGRAMS}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  (Change III) Append the following lines to file 
    "src/test/security/api/capi/certs/certs_data.mk":

     ILIST += ${DATAFILES}
     .if defined(_TEST_MK_)
     IDIR = /test/tet/functional/security/ts/capi/certs/
     .endif

              Append the following lines to file 
    "src/test/security/api/capi/keys/keys_data.mk":

     ILIST += ${DATAFILES}
     .if defined(_TEST_MK_)
     IDIR = /test/tet/functional/security/ts/capi/keys/
     .endif

              Append the following lines to file 
    "src/test/security/api/capi/testcases/test_data.mk":

     ILIST += ${DATAFILES}
     .if defined(_TEST_MK_)
     IDIR = /test/tet/functional/security/ts/capi/testcases/
     .endif

   

===========================================
Complete Set of Files
===========================================

Files that need modification as per the OT discussion
are enclosed below in their entirety between lines of asterisk's ("*"):

File 1:  ./src/test/security/api/capi/Makefile

*****************************************************************

#
# @OSF_COPYRIGHT@
# COPYRIGHT NOTICE
# Copyright (c) 1990, 1991, 1992, 1993, 1996 Open Software Foundation, Inc.
# ALL RIGHTS RESERVED (DCE).  See the file named COPYRIGHT.DCE in the
# src directory for the full copyright text.
#
# HISTORY
# $Log:	c013667,v $
# Revision 1.2  96/11/25  13:49:55  root
# changed fields:  new/changed/deleted note(s) [girkar 11/25/96 public] [girkar 11/14/96 public] [girkar 11/25/96 public] [girkar 11/14/96 public]
# 
# Revision 1.1.2.1  1996/11/14  16:17:51  arvind
# 	OSF DCE 1.2.2 Drop 5
# 	[1996/11/14  14:31:49  arvind]
#
# Revision /main/DCE_1.2.2/1  1996/10/18  00:45 UTC  arvind
# 	CAPI drop from DEC
# 	[1996/10/16  20:45 UTC  arvind  /main/arvind_capi/1]
# 
# $EndLog$
#
#  @DEC_COPYRIGHT@
#  Copyright (c) 1996
#  Digital Equipment Corporation, Maynard, Massachusetts, USA
#  All Rights Reserved
#  



LIBS = -lpkplcy -lpktrust -lpk -lpkcrypto -lpkxds -ldce -bloadmap:error
CC_LD = xlC

DATA_SUBDIRS = certs keys testcases
SUBDIRS = certs keys testcases

LIBFLAGS = -L../../../../security/pkc -L../../../../security/pkc/capi/trust \
            -L../../../../security/pkc/capi/plcy  -L../../../../security/pkc/capi/crypto \
            -L../../../../security/pkc/xds

INCFLAGS = -I. -I../../../../security/pkc/h -I../../../../security/h -I../../../../directory/cds/includes

test_registry_OFILES = test_registry.o trycase_helper.o
trycase_a_OFILES = trycase_a.o cds_help_a.o trycase_helper.o
PROGRAMS = trycase_a test_registry 

ILIST=${PROGRAMS}

.include <${RULES_MK}>

****************************************************************

File 2: ./src/test/security/api/capi/certs/certs_data.mk


****************************************************************
#
# @OSF_COPYRIGHT@
# COPYRIGHT NOTICE
# Copyright (c) 1990, 1991, 1992, 1993, 1996 Open Software Foundation, Inc.
# ALL RIGHTS RESERVED (DCE).  See the file named COPYRIGHT.DCE in the
# src directory for the full copyright text.
#
# All Rights Reserved
#
# @DEC_COPYRIGHT@
# Copyright (c) 1996
# Digital Equipment Corporation, Maynard, Massachusetts, USA
# All Rights Reserved
#
# HISTORY
# $Log:	c013667,v $
# Revision 1.2  96/11/25  13:49:55  root
# changed fields:  new/changed/deleted note(s) [girkar 11/25/96 public] [girkar 11/14/96 public] [girkar 11/25/96 public] [girkar 11/14/96 public]
# 
# Revision 1.1.2.1  1996/11/14  16:59:29  arvind
# 	OSF DCE 1.2.2 Drop 5
# 	[1996/11/14  15:02:58  arvind]
#
# Revision /main/DCE_1.2.2/2  1996/11/04  22:38 UTC  arvind
# 	Cert-API drop 2 from DEC
# 	[1996/11/03  22:48 UTC  arvind  /main/DCE_1.2.2/arvind_capi2/1]
# 
# Revision /main/DCE_1.2.2/1  1996/10/18  00:49 UTC  arvind
# 	CAPI drop from DEC
# 	[1996/10/17  01:16 UTC  arvind  /main/arvind_capi/1]
# 
# $EndLog$
#
#  






CERTS = 0_1_0_0.cert 0_2_0_0.cert 0_3_0_0.cert 0_4_0_0.cert 0_5_0_0.cert 0_6_0_0.cert \
        0_7_0_0.cert 1_0_0_0.cert 1_2_0_0.cert 1_3_0_0.cert 1_4_0_0.cert 1_5_0_0.cert \
        1_6_0_0.cert 1_7_0_0.cert 2_0_0_0.cert 2_1_0_0.cert 2_3_0_0.cert 2_4_0_0.cert \
        2_5_0_0.cert 2_6_0_0.cert 2_7_0_0.cert 3_0_0_0.cert 3_1_0_0.cert 3_2_0_0.cert \
        3_4_0_0.cert 3_5_0_0.cert 3_6_0_0.cert 3_7_0_0.cert 4_0_0_0.cert 4_1_0_0.cert \
        4_2_0_0.cert 4_3_0_0.cert 4_5_0_0.cert 4_6_0_0.cert 4_7_0_0.cert 5_0_0_0.cert \
        5_1_0_0.cert 5_2_0_0.cert 5_3_0_0.cert 5_4_0_0.cert 5_6_0_0.cert 5_7_0_0.cert \
        6_0_0_0.cert 6_1_0_0.cert 6_2_0_0.cert 6_3_0_0.cert 6_4_0_0.cert 6_5_0_0.cert \
        6_7_0_0.cert 7_0_0_0.cert 7_1_0_0.cert 7_2_0_0.cert 7_3_0_0.cert 7_4_0_0.cert \
        7_5_0_0.cert 7_6_0_0.cert

XCERTS =  8_9_0_0.cert 8_10_0_0.cert 8_11_0_0.cert 8_12_0_0.cert 8_13_0_0.cert 8_14_0_0.cert 8_15_0_0.cert \
          9_10_0_0.cert 9_11_0_0.cert  9_12_0_0.cert  9_13_0_0.cert  9_14_0_0.cert  9_15_0_0.cert 9_8_0_0.cert \
         10_11_0_0.cert  10_12_0_0.cert  10_13_0_0.cert  10_14_0_0.cert  10_15_0_0.cert 10_8_0_0.cert   10_9_0_0.cert  \
         11_12_0_0.cert  11_14_0_0.cert  11_10_0_0.cert  11_13_0_0.cert  11_15_0_0.cert 11_6_0_0.cert   11_8_0_0.cert  \
         12_11_0_0.cert  12_14_0_0.cert  12_9_0_0.cert 12_10_0_0.cert  12_13_0_0.cert  12_15_0_0.cert  12_8_0_0.cert \
         13_11_0_0.cert  13_14_0_0.cert  13_9_0_0.cert 13_10_0_0.cert  13_12_0_0.cert  13_15_0_0.cert  13_8_0_0.cert \
         14_11_0_0.cert  14_13_0_0.cert 14_9_0_0.cert 14_10_0_0.cert  14_12_0_0.cert  14_15_0_0.cert 14_8_0_0.cert \
         15_11_0_0.cert  15_13_0_0.cert  15_9_0_0.cert 15_10_0_0.cert  15_12_0_0.cert  15_14_0_0.cert  15_8_0_0.cert








CROSS_CERTS =   0_1_0_0.crcert 0_2_0_0.crcert 0_3_0_0.crcert 0_4_0_0.crcert \
                0_5_0_0.crcert 0_6_0_0.crcert 0_7_0_0.crcert 1_2_0_0.crcert \
                1_3_0_0.crcert 1_4_0_0.crcert 1_5_0_0.crcert 1_6_0_0.crcert \
                1_7_0_0.crcert 2_3_0_0.crcert 2_4_0_0.crcert 2_5_0_0.crcert \
                2_6_0_0.crcert 2_7_0_0.crcert 3_4_0_0.crcert 3_5_0_0.crcert \
                3_6_0_0.crcert 3_7_0_0.crcert 4_5_0_0.crcert 4_6_0_0.crcert \
                4_7_0_0.crcert 5_6_0_0.crcert 5_7_0_0.crcert 6_7_0_0.crcert 

XCROSS_CERTS = 8_10_0_0.crcert  8_11_0_0.crcert  8_12_0_0.crcert  8_13_0_0.crcert \
               8_14_0_0.crcert  8_15_0_0.crcert  8_9_0_0.crcert \
               9_10_0_0.crcert  9_11_0_0.crcert  9_12_0_0.crcert  9_13_0_0.crcert  \
               9_14_0_0.crcert 9_15_0_0.crcert \
               10_11_0_0.crcert  10_12_0_0.crcert  10_13_0_0.crcert  10_14_0_0.crcert  \
               10_15_0_0.crcert \
               11_12_0_0.crcert  11_13_0_0.crcert  11_14_0_0.crcert  11_15_0_0.crcert \
               12_13_0_0.crcert  12_14_0_0.crcert  12_15_0_0.crcert \
               13_14_0_0.crcert  13_15_0_0.crcert \
               14_15_0_0.crcert


CRLS =      1_0_0.crl

XCRLS =     9_0_8.crl

DATAFILES =  ${CERTS} ${CROSS_CERTS} ${CRLS} ${XCERTS} ${XCROSS_CERTS} ${XCRLS}

ILIST += ${DATAFILES}
.if defined(_TEST_MK_)
IDIR = /test/tet/functional/security/ts/capi/certs/
.endif

****************************************************************

File 3: ./src/test/security/api/capi/testcases/test_data.mk

****************************************************************

#
# @OSF_COPYRIGHT@
# COPYRIGHT NOTICE
# Copyright (c) 1990, 1991, 1992, 1993, 1996 Open Software Foundation, Inc.
# ALL RIGHTS RESERVED (DCE).  See the file named COPYRIGHT.DCE in the
# src directory for the full copyright text.
#
# All Rights Reserved
#
# @DEC_COPYRIGHT@
# Copyright (c) 1996
# Digital Equipment Corporation, Maynard, Massachusetts, USA
# All Rights Reserved
#
# HISTORY
# $Log:	c013667,v $
# Revision 1.2  96/11/25  13:49:55  root
# changed fields:  new/changed/deleted note(s) [girkar 11/25/96 public] [girkar 11/14/96 public] [girkar 11/25/96 public] [girkar 11/14/96 public]
# 
# Revision 1.1.2.1  1996/11/14  17:11:43  arvind
# 	OSF DCE 1.2.2 Drop 5
# 	[1996/11/14  15:19:14  arvind]
#
# Revision /main/DCE_1.2.2/2  1996/11/04  22:39 UTC  arvind
# 	Cert-API drop 2 from DEC
# 	[1996/11/03  22:53 UTC  arvind  /main/DCE_1.2.2/arvind_capi2/1]
# 
# Revision /main/DCE_1.2.2/1  1996/10/18  00:51 UTC  arvind
# 	CAPI drop from DEC
# 	[1996/10/16  20:47 UTC  arvind  /main/arvind_capi/1]
# 
# $EndLog$
#
#  



TESTCASES = pc1 pc2 pc3 pc4 pc5 pc6 pc7 xc1 xc2 xc3 xc7
TEST_PRINCIPALS = principals
HELPERS = cdsconfig cdscreatedir cdsdeletedir cdsprincattr revokelist xdsconfig \
          xdscreatedir xdsdeletedir xdsprincattr

DATAFILES =  ${TESTCASES} ${TEST_PRINCIPALS} ${HELPERS}
           
ILIST += ${DATAFILES}
.if defined(_TEST_MK_)
IDIR = /test/tet/functional/security/ts/capi/testcases/
.endif


****************************************************************

File 4: ./src/test/security/api/capi/keys/keys_data.mk


****************************************************************


#
# @OSF_COPYRIGHT@
# COPYRIGHT NOTICE
# Copyright (c) 1990, 1991, 1992, 1993, 1996 Open Software Foundation, Inc.
# ALL RIGHTS RESERVED (DCE).  See the file named COPYRIGHT.DCE in the
# src directory for the full copyright text.
#
# All Rights Reserved
#
# @DEC_COPYRIGHT@
# Copyright (c) 1996
# Digital Equipment Corporation, Maynard, Massachusetts, USA
# All Rights Reserved
#
# HISTORY
# $Log:	c013667,v $
# Revision 1.2  96/11/25  13:49:55  root
# changed fields:  new/changed/deleted note(s) [girkar 11/25/96 public] [girkar 11/14/96 public] [girkar 11/25/96 public] [girkar 11/14/96 public]
# 
# Revision 1.1.2.1  1996/11/14  17:06:52  arvind
# 	OSF DCE 1.2.2 Drop 5
# 	[1996/11/14  15:14:31  arvind]
#
# Revision /main/DCE_1.2.2/2  1996/11/04  22:39 UTC  arvind
# 	Cert-API drop 2 from DEC
# 	[1996/11/03  22:52 UTC  arvind  /main/DCE_1.2.2/arvind_capi2/1]
# 
# Revision /main/DCE_1.2.2/1  1996/10/18  00:50 UTC  arvind
# 	CAPI drop from DEC
# 	[1996/10/16  20:45 UTC  arvind  /main/arvind_capi/1]
# 
# $EndLog$
#
#  




PUBLIC_KEYS = \
0_0.pubkey \
1_0.pubkey \
2_0.pubkey \
3_0.pubkey \
4_0.pubkey \
5_0.pubkey \
6_0.pubkey \
7_0.pubkey \


PRIVATE_KEYS = \
0_0.privkey \
1_0.privkey \
2_0.privkey \
3_0.privkey \
4_0.privkey \
5_0.privkey \
6_0.privkey \
7_0.privkey \

XPUBLIC_KEYS = \
11_0.pubkey  13_0.pubkey  15_0.pubkey \
8_0.pubkey 10_0.pubkey  12_0.pubkey  14_0.pubkey  9_0.pubkey


XPRIVATE_KEYS = \
11_0.privkey  13_0.privkey  15_0.privkey  8_0.privkey \
10_0.privkey  12_0.privkey  14_0.privkey 9_0.privkey



DATAFILES =  ${PUBLIC_KEYS} ${PRIVATE_KEYS} ${XPUBLIC_KEYS} ${XPRIVATE_KEYS}
 
ILIST += ${DATAFILES}
.if defined(_TEST_MK_)
IDIR = /test/tet/functional/security/ts/capi/keys/
.endif



****************************************************************

File 5: ./src/test/security/api/Makefile


****************************************************************


#
# @OSF_COPYRIGHT@
# COPYRIGHT NOTICE
# Copyright (c) 1990, 1991, 1992, 1993, 1996 Open Software Foundation, Inc.
# ALL RIGHTS RESERVED (DCE).  See the file named COPYRIGHT.DCE in the
# src directory for the full copyright text.
#
#
# HISTORY
# $Log:	c013667,v $
# Revision 1.2  96/11/25  13:49:55  root
# changed fields:  new/changed/deleted note(s) [girkar 11/25/96 public] [girkar 11/14/96 public] [girkar 11/25/96 public] [girkar 11/14/96 public]
# 
# Revision 1.1.14.1  1996/11/14  16:17:38  arvind
# 	OSF DCE 1.2.2 Drop 5
# 	[1996/11/14  14:31:41  arvind]
#
# Revision /main/DCE_1.2.2/3  1996/11/04  22:39 UTC  arvind
# 	Don't build CAPI for HP/UX
# 	[1996/10/18  15:36 UTC  arvind  /main/DCE_1.2.2/arvind_work/1]
# 
# Revision /main/DCE_1.2.2/arvind_work/4  1996/10/31  19:50 UTC  arvind
# 	Don't build CAPI tests for intl build
# 
# Revision /main/DCE_1.2.2/arvind_work/1  1996/10/18  15:36 UTC  arvind
# 	Don't build CAPI for HP/UX
# 
# Revision /main/DCE_1.2.2/1  1996/10/18  00:45 UTC  arvind
# 	CAPI drop from DEC
# 	[1996/10/16  20:47 UTC  arvind  /main/arvind_capi/1]
# 
# Revision 1.1.12.2  1996/03/11  02:29:52  marty
# 	Update OSF copyright years
# 	[1996/03/10  20:01:04  marty]
# 
# Revision 1.1.12.1  1995/12/11  20:15:54  root
# 	Submit OSF/DCE 1.2.1
# 	[1995/12/11  19:48:58  root]
# 
# Revision 1.1.10.1  1994/06/28  20:01:05  wray
# 	GSSAPI BL3 (OT 10824)
# 	[1994/06/28  19:25:27  wray]
# 
# Revision 1.1.8.2  1993/05/24  20:48:43  cjd
# 	Submitting 102-dme port to 103i
# 	[1993/05/24  20:16:11  cjd]
# 
# Revision 1.1.6.2  1993/05/12  18:20:02  jd
# 	486 port: Add control to the subdirs line so install will visit.
# 	[1993/05/12  18:15:17  jd]
# 
# Revision 1.1.2.2  1992/12/31  17:25:15  htf
# 	Embedding copyright notice
# 	[1992/12/31  16:50:12  htf]
# 
# Revision 1.1  1992/01/19  04:08:46  devrcs
# 	Initial revision
# 
# $EndLog$
#
#
# DCE Security Services 
# test/security/api Makefile
#

EXPINC_SUBDIRS = control
.if ${TARGET_MACHINE}=="HP800" || !defined(USE_DES)
SUBDIRS = testsh moretests control gssapi 
DATA_SUBDIRS   = control moretests
.else
SUBDIRS = testsh moretests control gssapi capi
DATA_SUBDIRS   = control moretests capi
.endif

.include <${RULES_MK}>


****************************************************************

File 6: ./src/test/functional/security/ts/capi/Makefile


****************************************************************

#   
# @OSF_COPYRIGHT@
# COPYRIGHT NOTICE
# Copyright (c) 1996 Open Software Foundation, Inc.
# ALL RIGHTS RESERVED (DCE).  See the file named COPYRIGHT.DCE for
# the full copyright text.
#  
# All Rights Reserved
#  
# HISTORY
# $Log:	c013667,v $
# Revision 1.2  96/11/25  13:49:55  root
# changed fields:  new/changed/deleted note(s) [girkar 11/25/96 public] [girkar 11/14/96 public] [girkar 11/25/96 public] [girkar 11/14/96 public]
# 
# Revision 1.1.2.1  1996/11/14  16:10:59  arvind
# 	OSF DCE 1.2.2 Drop 5
# 	[1996/11/14  15:22:19  arvind]
#
# Revision /main/DCE_1.2.2/1  1996/10/18  00:44 UTC  arvind
# 	Fix build errors
# 	[1996/10/17  20:30 UTC  arvind  /main/arvind_capi/4]
# 
# 	Fix build errors
# 	[1996/10/17  20:10 UTC  arvind  /main/arvind_capi/3]
# 
# 	Fix build error
# 	[1996/10/17  19:44 UTC  arvind  /main/arvind_capi/2]
# 
# 	CAPI drop from DEC
# 	[1996/10/16  20:36 UTC  arvind  /main/arvind_capi/1]
# 
# $EndLog$
#
# (c) Copyright 1996,
# Digital Equipment Corporation, Maynard, Massachusetts, USA
# All Rights Reserved
#
# Makefile for Private Key Store Server (PKSS) and friends
#


#
# Need this for the TET tests
TET_ROOT      = /test/tet/functional/security
TET_TESTS     = ../..
TET_SCEN_FILE = $(TET_TESTS)/tet_scen
UPDATE_TET_SCEN = ${TET_TESTS}/tools/update_tet_scen
OTHERS          = update_tet_scen_rule
TESTS	= test-registry test-hierarchy test-registry-second test-hierarchy-second


STANDARD_TETLIBS = -ltettcm -ltetapi
COMPONENT_DIR = /ts/capi

DATA_SUBDIRS = certs keys testcases
SUBDIRS = certs keys testcases

# VPATH = ${MAKETOP}/test/security/api/capi:\
#        ${MAKETOP}/security/pkc/h
VPATH = ../../../../security/api/capi:${MAKETOP}/security/pkc/h


RIOS_CPP_LIBS = -L/usr/lpp/xlC/lib -L/usr/lpp/xlC -lC -lm
CPP_LIBS = ${${TARGET_MACHINE}_CPP_LIBS}


#
# libs for binding
#
# LIBS = ${${TARGET_MACHINE}_LIBS} -lpk -lcdsutil -lgdb -lpsm -ldce -lbsafe2 ${CPP_LIBS} ${STANDARD_TETLIBS}


LIBFLAGS = -L../../../../../security/pkc -L../../../../../security/pkc/capi/trust \
            -L../../../../../security/pkc/capi/plcy  -L../../../../../security/pkc/capi/crypto \
            -L../../../../../security/pkc/xds

LIBS = ${${TARGET_MACHINE}_LIBS} -lpkplcy -lpktrust -lpk -lpkcrypto -lpkxds -ldce \
       ${CPP_LIBS} ${STANDARD_TETLIBS} -bloadmap:error 

CC_LD = xlC



# LIBDIRS = -L../../../../../security/psm -L../../../../../security/pkc -L../../../../../directory/cds/gloria/gdb -L../../../../../directory/cds/library -L../../../../tet/src/posix_c/api
#
# flags for compiling
#
#CFLAGS		= ${${TARGET_MACHINE}_CFLAGS} -g -DDEBUG -DSVC_DEBUG -DENABLE_ALL
# CFLAGS		= ${${TARGET_MACHINE}_CFLAGS} -g -DENABLE_ALL -DMALLOCTRACE -DENVIRONMENT_TET

CFLAGS		= ${${TARGET_MACHINE}_CFLAGS}  -DENVIRONMENT_TET 

INCFLAGS = -I. -I../../../../../security/pkc/h -I../../../../../security/h \
               -I../../../../../directory/cds/includes \
               -I${BSAFE_ROOT}/usr/include

SCRIPTS = test-registry test-hierarchy test-registry-second test-hierarchy-second
DATAFILES = create_foo delete_foo create_era


test_registry_tet_OFILES = test_registry.o trycase_helper.o
trycase_a_tet_OFILES = trycase_a.o cds_help_a.o trycase_helper.o
PROGRAMS =  trycase_a_tet  test_registry_tet


#
# install directory
#
IDIR		= ${TET_ROOT}/${COMPONENT_DIR}/

#
# things to install
#

ILIST = ${PROGRAMS} ${SCRIPTS} ${DATAFILES}

.include <${RULES_MK}>

update_tet_scen_rule:
	${UPDATE_TET_SCEN} ${TET_SCEN_FILE} ${COMPONENT_DIR} ${TESTS}



****************************************************************

File 7: ./src/test/functional/security/ts/capi/test-registry.sh


****************************************************************

#!/bin/sh
#
# JC - Aug 20, 1996
# Script to invoke the PKSS tests             
# test-registry.sh
#

echo "**********************************************************"
echo "Invoking test-registry..."
echo "**********************************************************"
echo "Doing dce_login_noexec..."
rm -f dce_login_noexec
ln -s `which dce_login` dce_login_noexec
KRB5CCNAME=`dce_login_noexec -c cell_admin -dce-`
export KRB5CCNAME
klist
#
# ignore any errors here.
#
echo "============================================================"
echo "** IGNORE Any Errors while deleteing principal foo
echo "** This is just a cleanup"
echo "============================================================"
echo "Deleting principal foo.."
rgy_edit < delete_foo
echo "============================================================"
echo "** Creating principal test_capi **, This better work! 
echo "============================================================"
rgy_edit < create_foo
echo "============================================================"
echo "Creating Authn/Cipher ERA schema and attaching it to test_capi's xattrs..."
echo "If the ERA schema already exists, you can ignore the error here as well.."
echo "We don't delete the schema since it may affect existing principals"
echo "other than the test principal test_capi which use this schema"
echo "============================================================"
dcecp < create_era
echo "============================================================"
echo "** STARTING Registry Policy Test **, "
echo "   Any errors now will result in failure"
echo "============================================================"
#
# running first with certified credentials
#
REGISTRY_TEST_ARGUMENTS=direct
export REGISTRY_TEST_ARGUMENTS
echo "Trying <test_registry_tet direct> ......"
./test_registry_tet
echo "RETURNED from <test_registry_tet direct>"
echo "CLEANING up after run of Registry Policy Test"
echo "Deleting principal foo.."
rgy_edit < delete_foo
kdestroy
echo "END of Registry Policy Test"
#EOF

****************************************************************

File 8: ./src/test/functional/security/ts/capi/test-hierarchy.sh


****************************************************************

#
# JC - Aug 20, 1996
# Script to invoke the PKSS tests             
# test-hierarchy.sh
#
echo "******************************************************"
echo "Invoking test-hierarchy (Hierarchical Policy Test) ..."
echo "******************************************************"
echo "Doing dce_login_noexec..."
rm -f dce_login_noexec
ln -s `which dce_login` dce_login_noexec
KRB5CCNAME=`dce_login_noexec -c cell_admin -dce-`
export KRB5CCNAME
klist
#
# running first with certified credentials
#
HIERARCHICAL_TEST_ARGUMENTS="pc1 pc2 pc3 pc4 pc5 pc6 pc7"
export HIERARCHICAL_TEST_ARGUMENTS
echo " ===  Starting a run of test with arguments $HIERARCHICAL_TEST_ARGUMENTS"
./trycase_a_tet
echo "Returned from trycase_a_tet"
echo "******************************************************"
echo "END of Hierarchical Policy Test"
echo "******************************************************"
kdestroy
KRB5CCNAME=
export KRB5CCNAME
#EOF

****************************************************************

File 9: ./src/test/functional/security/ts/capi/test-registry-second.sh


****************************************************************


#!/bin/sh
#
# JC - Aug 20, 1996
# Script to invoke the PKSS tests             
# test-registry-second.sh
#

echo "**********************************************************"
echo "Invoking test-registry..."
echo "**********************************************************"
echo "Doing dce_login_noexec..."
rm -f dce_login_noexec
ln -s `which dce_login` dce_login_noexec
KRB5CCNAME=`dce_login_noexec cell_admin -dce-`
export KRB5CCNAME
klist
#
# ignore any errors here.
#
echo "============================================================"
echo "** IGNORE Any Errors while deleteing principal foo
echo "** This is just a cleanup"
echo "============================================================"
echo "Deleting principal foo.."
rgy_edit < delete_foo
echo "============================================================"
echo "** Creating principal test_capi **, This better work! 
echo "============================================================"
rgy_edit < create_foo
echo "============================================================"
echo "Creating Authn/Cipher ERA schema and attaching it to test_capi's xattrs..."
echo "If the ERA schema already exists, you can ignore the error here as well.."
echo "We don't delete the schema since it may affect existing principals"
echo "other than the test principal test_capi which use this schema"
echo "============================================================"
dcecp < create_era
echo "============================================================"
echo "** STARTING Registry Policy Test **, "
echo "   Any errors now will result in failure"
echo "============================================================"
#
# running without certified credentials
#
REGISTRY_TEST_ARGUMENTS=untrusted
export REGISTRY_TEST_ARGUMENTS
echo "Trying <test_registry_tet untrusted> ......."
./test_registry_tet
echo "RETURNED from <test_registry_tet untrusted>"
echo "CLEANING up after run of Registry Policy Test"
echo "Deleting principal foo.."
rgy_edit < delete_foo
kdestroy
echo "END of Registry Policy Test"
#EOF

****************************************************************

File 10: ./src/test/functional/security/ts/capi/test-hierarchy-second.sh

****************************************************************

#
# JC - Aug 20, 1996
# Script to invoke the PKSS tests             
# test-hierarchy-second.sh
#
echo "******************************************************"
echo "Invoking test-hierarchy (Hierarchical Policy Test) ..."
echo "******************************************************"
#
# running first with certified credentials
#
HIERARCHICAL_TEST_ARGUMENTS="xc1 xc2 xc3 xc7"
export HIERARCHICAL_TEST_ARGUMENTS
echo " ===  Starting a run of test with arguments $HIERARCHICAL_TEST_ARGUMENTS"
./trycase_a_tet
echo "Returned from trycase_a_tet"
echo "******************************************************"
echo "END of Hierarchical Policy Test"
echo "******************************************************"
#EOF

****************************************************************



CR Number                     : 13565
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : src/test/security/api/moretests
Short Description             : Test cases never run the
intended test
Reported Date                 : 7/9/96
Found in Baseline             : 1.1
Found Date                    : 7/9/96
Severity                      : C
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[7/9/96 public]

A support customer reported the following:
==========================================

Area:                   test
Component Name:         sec

Severity Level:         Minor

Date of First Occurrence: 6/13/96

Affected File(s):
    src/test/security/api/moretests/acct_add_del.c
    src/test/security/api/moretests/acct_admin_repl.c
    src/test/security/api/moretests/acct_lookup.c
    src/test/security/api/moretests/acct_passwd.c
    src/test/security/api/moretests/acct_rename.c
    src/test/security/api/moretests/acct_repl_all.c
    src/test/security/api/moretests/acct_user_repl.c

One Line Description: Testcases never run the intended test

Full Description:

    The testcases have a check to validate the setup before running the
    actual test (in most cases).  The validation code is incorrect and
    subsequent error reporting is incorrect.  The net result is that the
    test is never run, but the testcase indicates a successful completion.

----------------------------------------------------------------------------
/* CUT [ SECTION ONE ] */

/* Setup the parameters to the sec_rgy_acct_add function. */

   bzero ((char *)&user_part, sizeof (user_part));

   user_part.passwd_version_number = 1;
   user_part.passwd_dtm = time(NULL);
   user_part.flags = 0;

   memcpy ((char *)user_part.gecos,
       (char *)"marco's test user account\0",
       sizeof (user_part.gecos));

   memcpy ((char *)user_part.homedir,
       (char *)"//node_feb5/marco\0",
       sizeof (user_part.homedir));

   memcpy ((char *)user_part.shell,
       (char *)"/bin/seashell\0",
       sizeof (user_part.shell));

/* CUT */

/* Add the test account. */

   sec_rgy_acct_add (context,

/* CUT */

/* Even if tstatus came back with the normal return on the acct_add
   above, check to see if the account really exists by attempting to
   look it up in the registry.  */

   sec_rgy_acct_lookup (context,

/* CUT  [ SECTION TWO ] */

/* If the lookup fails or if the data supplied as input to acct_add does
   not match the data returned as output from the acct_lookup, then treat
   the acct_add as if it had failed. */

   if ((tstatus != rpc_s_ok)
       || (key_parts != lkp_key_parts)
       || (memcmp ((char *)&admin_part,
                   (char *)&lkp_admin_part,
                   sizeof (sec_rgy_acct_admin_t)))
       || (memcmp ((char *)&user_part,
                   (char *)&lkp_user_part,
                   sizeof (sec_rgy_acct_user_t))))
     {
       TSHMessage (ctx, SETUP, "sec_rgy_acct_lookup failed\n");
       goto EXIT_DEL_ACCT;
     }
----------------------------------------------------------------------------

    The code in SECTION ONE above zeros the user_part structure then uses
    memcpy to copy strings (plus any trailing garbage in memory) into the
    user_part structure.

    The user_part structure is used as input to sec_rgy_acct_add(), then
    sec_rgy_acct_lookup() is called to verify successful completion of the
    acct_add call.  The verification in SECTION TWO does a memcmp of the
    entire user_part and admin_part structures.  These will never compare
    correctly since only the valid string portions of the user_part.gecos,
    user_part.homedir, and user_part.shell are transferred by the RPC.
    The extra garbage copied into user_part via the memcpy never compares
    correctly with the garbage in the lkp_user_part returned from the
    sec_rgy_acct_lookup() call.

    The call to TSHMessage() then silently covers up the problem since it is
    passing a flag of SETUP (0x00000000).  The TSHMessage routine never prints
    anything, the cleanup routine is jumped to, and the output of the testcase
    indicates success.
	
Repeat By:

    <A description of how to reproduce the problem (optional)>

Proposed Solution:

    The memcpy's to initialize the user_part structure should be changed to
    strncpy to avoid the chance of attempting to access unallocated memory.

    The memcmp of the entire structure in the validation should be changed to
    compare each important field of the structure using strcmp where
    appropriate.
	
    The calls to TSHMessage() should be changed to use the flag MOFAILURE so
    that an error message is printed and the failure is correctly indicated.



CR Number                     : 13415
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : file
Short Description             : update tests
Reported Date                 : 3/28/96
Found in Baseline             : 1.2.1
Found Date                    : 3/28/96
Severity                      : C
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : dfs.lock,dfs.glue,dfs.repfs,dfs.read_write_all.main
Sensitivity                   : public

[3/28/96 public]


Several of the systest/file tests do not run in 1.2.1. I have
repaired these in the Transarc tree and the new tests will be
submitted in 1.2.2. Here are the diffs for the changes:

dfs.glue:

1,23d0
< #!/bin/ksh -
< #-
< # @TRANSARC_COPYRIGHT@
< #
< # $TALog: dfs.glue,v $
< # Revision 12.5  1996/03/20  13:17:16  gait
< # Retrofit Solaris changes back to AIX. Now all tests run
< # smoothly on both platforms.
< #
< # Get running on both platforms.
< # [from r12.4 by delta gait-db17508-repair-system-tests-for-DFS, r1.2]< #
< # Revision 12.4  1996/03/18  15:18:07  gait
< # Fix several broken system tests that are used by OSF to test DFS.
< # The fixes are for both Solaris and AIX.
< #
< # Fixes to the glue test. Mainly to fix mode bits on mount points and
< # shared files, replace relative paths with absolute paths, other small
< # stuff.
< # [from r12.1 by delta gait-db17508-repair-system-tests-for-DFS, r1.1]< #
< # $EndTALog$
< 
33a11,14
> # Revision 1.1.14.1  1995/12/11  21:59:21  root
> #     Submit OSF/DCE 1.2.1
> #     [1995/12/11  20:58:40  root]
> #
37c18
< #
---
> # 
203c184
< HOSTNAME=`/bin/hostname`
---
> HOSTNAME=`hostname`
239d219
<       chmod 777 ${DFS_PATH}/${RUNDIR}
241d220
< chmod 777 ${UFS_PATH}/${RUNDIR}
311d289
< chmod 777 ${UFS_PATH}/${RUNDIR}/*


dfs.lock:

1,30d0
< #!/bin/sh -
< #-
< # @TRANSARC_COPYRIGHT@
< #
< # $TALog: dfs.lock,v $
< # Revision 12.6  1996/03/26  21:27:13  gait
< # Incorporate reviewer changes.
< #
< # Don't remove files twice in cleanup routine. Make setup cleaner
< # for test directories.
< # [from r12.5 by delta gait-db17508-repair-system-tests-for-DFS, r1.3]< #
< # Revision 12.5  1996/03/20  13:17:17  gait
< # Retrofit Solaris changes back to AIX. Now all tests run
< # smoothly on both platforms.
< #
< # Get running on both platforms.
< # [from r12.4 by delta gait-db17508-repair-system-tests-for-DFS, r1.2]< #
< # Revision 12.4  1996/03/18  15:18:12  gait
< # Fix several broken system tests that are used by OSF to test DFS.
< # The fixes are for both Solaris and AIX.
< #
< # As above plus code to bullet-proof killing processes and removing
< # files. This has to be done carefully so as not to break other CHO
< # tests.
< # [from r12.1 by delta gait-db17508-repair-system-tests-for-DFS, r1.1]< #
< # $EndTALog$
< 
40a11,14
> # Revision 1.1.15.1  1995/12/11  21:59:24  root
> #     Submit OSF/DCE 1.2.1
> #     [1995/12/11  20:58:43  root]
> #
44c18
< #
---
> # 
608d581
<       chmod 666 $log_dir/*.$$.$ITERATION.*.$wfc_case.log > /dev/null 2>&1
615,616d587
<       chmod 666 $cliinfo.$wfc_case > /dev/null 2>&1
<       chmod 666 $tmp_dir/$$.wfc_mess_lines.$wfc_case > /dev/null 2>&1
618d588
<       chmod 666 $wfc_errout > /dev/null 2>&1
696,704d665
< 
<       # delete detritus files
<       # all these have been coerced to end in "lock_test"
<       cd ..
<       rm -rf $DFS_PATH
<       rm -rf $SYNCH_DIR
<       rm -rf $TMP_DIR
<       rm -rf $LOG_DIR
< 
717d677
< 
801d760
<    chmod 777 ${data_base}.$ITERATION > /dev/null 2>&1
803d761
<    chmod 666 $log_dir/$host.$$.$ITERATION.$seq.$sc_case.log > /dev/null 2>&1
828d785
< chmod 666 $cliinfo > /dev/null 2>&1
838d794
< chmod 666 $cliinfo.$sc_case > /dev/null 2>&1
956d911
<       chmod 666 $log_dir/*.$$.$ITERATION.*.$cls_case.log > /dev/null 2>&1
961d915
<       chmod 666 $tmp_dir/$$.cls_lock_tries.$cls_case > /dev/null 2>&1
963d916
<       chmod 666 $tmp_dir/$$.cls_lock_lines.$cls_case > /dev/null 2>&1
969d921
<       chmod 666 $cliinfo.$cls_case > /dev/null 2>&1
971d922
<       chmod 666 $tmp_dir/$$.cls_chk_out.$cls_case > /dev/null 2>&1
984d934
<        chmod 666 $tmp_dir/$$.cls_lock_tries.$cls_case > /dev/null 2>&1996d945
<        chmod 666 $tmp_dir/$$.cls_lock_chk.$cls_case > /dev/null 2>&1
1002,1003c951
<       #
<       chmod 666 $tmp_dir/$$.cls_lock_tries.$cls_case > /dev/null 2>&1
---
>       #      
1008,1010c956
<       #
<       chmod 666 $tmp_dir/$$.cls_locker_lines.$cls_case > /dev/null 2>&1
<       chmod 666 $tmp_dir/$$.cls_lock_chk.$cls_case  > /dev/null 2>&1
---
>       # 
1012d957
<       chmod 666 $tmp_dir/$$.cls_locker_out.$cls_case > /dev/null 2>&1
1018d962
<        chmod 666 $synch_base.$ITERATION.$sc_case > /dev/null 2>&1
1027d970
<        chmod 666 $synch_base.$ITERATION.$sc_case > /dev/null 2>&1
1033d975
<       chmod 666 $tmp_dir/$$.cls_chk_out.$cls_case > /dev/null 2>&1
1089d1030
<       chmod 666 $tmp_dir/$$.crs_prob_cli.$crs_case > /dev/null 2>&1
1101d1041
<       chmod 666 $log_dir/*.$$.$ITERATION.*.$cls_case.log > /dev/null 2>&1
1107d1046
<       chmod 666 $tmp_dir/$$.crs_comp_lines.$crs_case > /dev/null 2>&1
1109d1047
<       chmod 666 $tmp_dir/$$.crs_cli_passed.$crs_case > /dev/null 2>&1
1114d1051
<       chmod 666 $cliinfo.$crs_case > /dev/null 2>&1
1132,1133d1068
<       chmod 666 $tmp_dir/$$.crs_cli_passed.$crs_case > /dev/null 2>&1
<       chmod 666 $tmp_dir/$$.crs_pass_cli.$crs_case > /dev/null 2>&1
1135d1069
<       chmod 666 $tmp_dir/$$.crs_chk_pass.$crs_case > /dev/null 2>&1
1145d1078
<        chmod 666 $tmp_dir/$$.crs_comp_lines.$crs_case > /dev/null 2>&11190d1122
<       chmod 666 $log_dir/$mach.$$.$ITERATION.*.$kj_case.log > /dev/null 2>&1
1197c1129
<          jobsleft=`$RSH $PS -ef | grep lock_test`
---
>          jobsleft=`$RSH ps -e | grep filewnr`
1202,1204c1134,1135
<             pidsleft=`echo $jobsleft | awk '{print $2}'`
<             echo "killing $pidsleft on $mach"
<           $RSH kill -9 $pidsleft
---
>             pidsleft=`echo $jobsleft | awk '{print $1}'`
>             echo "   Could not kill $pidsleft on $mach"
1207c1138
<          echo "Any jobs still running on $mach?"
---
>          echo "No jobs running on $mach..."
1209,1221d1139
< 
<       # above code, while theoretically correct, does not work reliably
<       # and sometimes relict processes are left hanging on client
<       # we arranged that the string "lock_test" is always imbedded
<       # in command lines so we can grep for it
<       # last chance to kill client processes
<       pids=`$RSH $PS -ef | grep lock_test | awk '{print $2}'`
<       for pid in $pids
<       do
<       echo killing $pid on $mach
<       $RSH kill -9 $pid > /dev/null 2>&1
<       done
<       echo killed all jobs on $mach
1224,1229d1141
<    # delete detritus files
<    # all these have been coerced to end in "lock_test"
<    rm -rf $DFS_PATH/*
<    rm -rf $SYNCH_DIR/*
<    rm -rf $LOG_DIR/*
< 
1244,1245d1155
< PS=/usr/bin/ps
< 
1383,1421d1292
< # modify path so we can kill relict client process
< # make sure the string "lock_test" is in the execution path
< # this will work even when running CHO
< 
< rm -f /:/lock_test > /dev/null 2>&1
< ln -s $TROOT /:/lock_test
< TROOT=/:/lock_test
< echo TROOT $TROOT
< 
< # make sure the working directory is private to this test
< # be careful because we sometimes use the same directory
< # for multiple purposes in this test
< 
< rm -rf $DFS_PATH/lock_test > /dev/null 2>&1
< rm -rf $SYNCH_DIR/lock_test > /dev/null 2>&1
< rm -rf $LOG_DIR/lock_test > /dev/null 2>&1
< rm -rf $TMP_DIR/lock_test >  > /dev/null 2>&1
< mkdir $DFS_PATH/lock_test
< chmod 777 $DFS_PATH/lock_test
< DFS_PATH=$DFS_PATH/lock_test
< if test ! -d $SYNCH_DIR/lock_test
< then
<       mkdir $SYNCH_DIR/lock_test
<       chmod 777 $SYNCH_DIR/lock_test
< fi
< SYNCH_DIR=$SYNCH_DIR/lock_test
< if test ! -d $TMP_DIR/lock_test
< then
<       mkdir $TMP_DIR/lock_test
<       chmod 777 $TMP_DIR/lock_test
< fi
< TMP_DIR=$TMP_DIR/lock_test
< if test ! -d $LOG_DIR/lock_test
< then
<       mkdir $LOG_DIR/lock_test
<       chmod 777 $LOG_DIR/lock_test
< fi
< LOG_DIR=$LOG_DIR/lock_test
< 
1634d1504
< chmod 777 ./* > /dev/null 2>&1
1795d1664
<     chmod 666 $cliinfo > /dev/null 2>&1
1941d1809
<        chmod 666 $synch_base.$ITERATION.$curr_case > /dev/null 2>&1
1989,1990d1856
<       kill_jobs $curr_case
< 
2015c1881
<    rm -f $data_base.$ITERATION
---
>    rm $data_base.$ITERATION



dfs.repfs:

1,34d0
< #!/bin/ksh -
< #-
< # @TRANSARC_COPYRIGHT@
< #
< # $TALog: dfs.repfs,v $
< # Revision 12.5  1996/03/20  13:17:25  gait
< # Retrofit Solaris changes back to AIX. Now all tests run
< # smoothly on both platforms.
< #
< # Get running on both platforms.
< # [from r12.3 by delta gait-db17508-repair-system-tests-for-DFS, r1.2]< #
< # Revision 12.3  1995/11/07  19:41:07  moyer
< # Delta created to fix a number of errors in the dfs.repfs test.
< # In particular, there were a number of errors in the manipulation of
< # replication site lists, and the fileset owner was not getting set
< # at creation time.  Other minor improvements were made as well.
< #
< # Function-specific updates:
< #   create_mountpoints() - added chown and chmod of working fileset.
< #   add_rep() - fixed sed args for updating REP_SERVERS_LEFT and REP_AGGRS_LEFT.
< #   same_machine_rep() - removed incorrect and unrequired update of
< #     REP_SERVERS_LEFT and REP_AGGRS_LEFT.
< #   switch_rep() - fixed sed args for removing old (orig) rep site from
< #     REP_SERVERS and REP_AGGRS.
< #   update_fileset() - made dirwrite.sh's file arg a variable set in repfs.data.
< #   main() - added cm checkfilesets at start; fixed add_rep() args
< # General updates:
< #   Added -f flag to all rm's.
< #   Documented some requirements for correctly maintaining rep site lists.
< # [from r12.1 by delta moyer-7072-dfs.repfs-test-fix-various-errors, r1.1]
< #
< # $EndTALog$
< 
44a11,14
> # Revision 1.1.6.1  1995/12/11  21:59:37  root
> #     Submit OSF/DCE 1.2.1
> #     [1995/12/11  20:58:52  root]
> #
48c18
< #
---
> # 
206,208d175
< #
< # Note: for all this list maintenance to work, $1 must be REP_SERVERS_LEFT
< #       and $2 must be REP_AGGRS_LEFT.
210d176
<  servers=$1
211a178
>  servers=$1
218c185
<      ERROR_STRING="ERROR (add_rep): addsite" ; break 
---
>      ERROR_STRING="ERROR (setup_rep): addsite" ; break 
224,226c191,193
<    REP_AGGRS_LEFT=`print ${REP_AGGRS_LEFT} | sed 's/'$A'//'`
<    REP_SERVERS_LEFT=`print ${REP_SERVERS_LEFT} | sed 's/'$S'//'`
<    aggrs=`print ${aggrs} | sed 's/^ *[^ ]* *//'`
---
>    REP_AGGRS_LEFT=`print ${REP_AGGRS_LEFT} | sed 's/'$3'//'`
>    REP_SERVERS_LEFT=`print ${REP_SERVERS_LEFT} | sed 's/'$4'//'`
>    aggrs=`print ${aggrs} | sed 's/^[^ ]* *//'`
242,243d208
<    chown $DCE_PRIN ${MOUNT_PATH}/${FILESET}
<    chmod 755 ${MOUNT_PATH}/${FILESET}
265c230
< # the read/write fileset. REP_SERVERS and REP_AGGRS are set.
---
> # the read/write fileset. REP_SERVERS and REP_AGGRS are updated.
275,276c240,246
<  REP_SERVERS="$FILESET_SERVER"
<  REP_AGGRS="$FILESET_AGGR"
---
>  REP_SERVERS="$FILESET_SERVER $REP_SERVERS"
>  REP_AGGRS="$FILESET_AGGR $REP_AGGRS"
> # update the what's left lists 
> # Note: the FILESET_SERVER and FILESET_AGGR should not be in the lists, but
> #       they should be removed if they are
>  REP_AGGRS_LEFT=`print ${REP_AGGRS_LEFT} | sed 's/'$FILESET_AGGR'//'`
>  REP_SERVERS_LEFT=`print ${REP_SERVERS_LEFT} | sed 's/'$FILESET_SERVER'//'`
315c285
<  rm -rf ${MOUNT_PATH}/${FILESET}/*.$1
---
>  rm -r ${MOUNT_PATH}/${FILESET}/*.$1
361c331
<  rm -rf ${MOUNT_PATH}/${FILESET}/*.M
---
>  rm -r ${MOUNT_PATH}/${FILESET}/*.M
380,383d349
< #
< # Note: for all this list maintenance to work, $1 must be $FILESET_SERVER,
< #       $2 must be $FILESET_AGGR, $3 must be left-most of REP_SERVERS_LEFT,
< #       and $4 must be left-most of REP_AGGRS_LEFT.
410,412c376,378
< # remove old server and aggr from lists; must be last elements of each<  REP_SERVERS=`print ${REP_SERVERS} | sed 's/'$1' *$//'`
<  REP_AGGRS=`print ${REP_AGGRS} | sed 's/'$2' *$//'`
---
> # remove old server and aggr from lists
>  REP_SERVERS=`print ${REP_SERVERS} | sed 's/'$1'//'`
>  REP_AGGRS=`print ${REP_AGGRS} | sed 's/'$2'//'`
422c388
<    ERROR_STRING="ERROR (switch_rep): update_fileset"
---
>    ERROR_STRING="ERROR (same_machine_rep): update_fileset"
435c401
<  rm -rf ${MOUNT_PATH}/${FILESET}/*.N
---
>  rm -r ${MOUNT_PATH}/${FILESET}/*.N
522c488
<      rm -f ${MOUNT_PATH}/${FILESET}/$M.testfile.*
---
>      rm ${MOUNT_PATH}/${FILESET}/$M.testfile.*
525c491
<      rm -rf ${MOUNT_PATH}/${FILESET}/$M.testdir.*
---
>      rm -r ${MOUNT_PATH}/${FILESET}/$M.testdir.*
528d493
<    echo DO: $RSH $M -n dce_login $DCE_PRIN $DCE_PRIN_PW -exec ksh -c "'${TROOT}/filewnr -n 100 -b 100 -p $M.test.$1 -f ${MOUNT_PATH}/${FILESET}/$M.testfile.$1'"
535,537d499
<    chown -R ${DCE_PRIN} ${MOUNT_PATH}/${FILESET}/*
<    chgrp -R ${DCE_PRIN_GROUP} ${MOUNT_PATH}/${FILESET}/*
<    chmod -R 777 ${MOUNT_PATH}/${FILESET}/*
539,540c501
<    echo DO: $RSH $M -n dce_login $DCE_PRIN  $DCE_PRIN_PW -exec ksh -c "'${TROOT}/dirwrite.sh -p ${MOUNT_PATH}/${FILESET} -t $M.testdir.$1 -n 10 -l $BIG_FILE '"
<    $RSH $M -n dce_login $DCE_PRIN  $DCE_PRIN_PW -exec ksh -c "'${TROOT}/dirwrite.sh -p ${MOUNT_PATH}/${FILESET} -t $M.testdir.$1 -n 10 -l $BIG_FILE '"
---
>    $RSH $M -n dce_login $DCE_PRIN  $DCE_PRIN_PW -exec ksh -c "'${TROOT}/dirwrite.sh -p ${MOUNT_PATH}/${FILESET} -t $M.testdir.$1 -n 10 -l /etc/dce_config '"
546,548d506
<    chown -R ${DCE_PRIN} ${MOUNT_PATH}/${FILESET}/*
<    chgrp -R ${DCE_PRIN_GROUP} ${MOUNT_PATH}/${FILESET}/*
<    chmod -R 777 ${MOUNT_PATH}/${FILESET}/*
551d508
<    echo DO: $RSH $M -n dce_login $DCE_PRIN $DCE_PRIN_PW -exec ksh -c "'echo $M.$1 >> ${MOUNT_PATH}/${FILESET}/update-file '"
558,560d514
<    chown -R ${DCE_PRIN} ${MOUNT_PATH}/${FILESET}/*
<    chgrp -R ${DCE_PRIN_GROUP} ${MOUNT_PATH}/${FILESET}/*
<    chmod -R 777 ${MOUNT_PATH}/${FILESET}/*
934d887
< cm checkfilesets
989c942
< add_rep ${REP_SERVERS_LEFT} ${REP_AGGRS_LEFT} || {
---
> add_rep  ${SERVERS_LEFT} ${AGGRS_LEFT} || {


dfs.read_write_all.main:

2,6d1
< 
< #-
< # @TRANSARC_COPYRIGHT@
< #
< 
14a10,20
> # Revision 1.1.10.1  1995/12/11  21:59:32  root
> #     Submit OSF/DCE 1.2.1
> #
> #     HP revision /main/jrr_1.2_mothra/1  1995/12/06  16:12 UTC  bell_d
> #     additions to make test operate on non-LFS dfs
> #
> #           Insert Checks for Machines, Aggregates, and Servers using DFS commands
> #           to locate the information and extract it for use, rather than require
> #     the fixed information in the dfs.read.write.data file
> #     [1995/12/11  20:58:48  root]
> #
18c24
< #
---
> # 
104c110
<      RSH="/bin/rsh"
---
>      RSH="rsh"
196a203,238
> #  Now set the machines names variable based on the set in the hosts file
> 
> MACHINES=`cdscp list dir /.:/hosts/* |awk '{print $1}' |sed 's/LIST//'|\
>   sed 's/DIRECTORY//' |sed 's/AT//'`
> 
> x=0
> for i in ${MACHINES}
> do
>   ((x = x + 1))
> done
> NUMBER_OF_USERS=$x
> 
>   
> #
> #   At this point we've found the list of machines possible for testing.
> #   Now get the number of sites from the fts lsfldb data and use it to determine
> #   how many possible servers there may be.
> #   Also get the server names from the FLDB listing, as well as the aggregate
> #   names associated with each server.
> #
> 
> numb_sites=`fts lsfldb|grep "number of sites"| awk '{print $4}'`
> 
> ## Locate the servers and their aggregates for testing 
> #
> 
> 
>   AGGR_SERVERS=`fts lsfldb |grep ".ch." |awk '{print $1}'|sed 's/.cell//'\
>     |sed 's/.ch//'|sed 's/.apollo//' |sed 's/.hp//'|sed 's/.com//'|sed 's/.c//'\
>     |sed 's/.co//'`
> echo " $AGGR_SERVERS "
>   AGGR_NAMES=`fts lsfldb |grep ".ch." |awk '{print $3}'`
> 
> echo "Aggregates:   $AGGR_NAMES "
> 
> 
267,270d308
<    if [[ $HOSTTYPE = SunOS ]]
<    then
<        ping_command='eval ping $rhost 1'
<    else
277d314
<    fi
417c454
<          u=${BASE_USER_NAME}${n}-fs
---
>          u=${BASE_USER_NAME}${n}
420c457,464
<           print "fts create -ftname ${u}.fs -server ${agger_server} -aggregate ${agger_name}"
---
>           
>           if [ $aggr_type = Non-LFS ]
>           then
>           cd ${i}
>           mkdir ${u}
>           
>           else
>             print "fts create -ftname ${u}.fs -server ${agger_server} -aggregate ${agger_name}"
425,427d468
<             chmod 777 ${i}/${u}
<             chown ${DCE_PRIN} ${i}/${u}
<             chgrp ${DCE_PRIN_GROUP} ${i}/${u}
432a474
>         fi
434a477,482
>             
>             if [ $aggr_type = Non-LFS ]
>             then
>            cd ${i}
>            rm -R ${u}
>           else
440a489
>           fi
474c523
<         ${RSH} $rhost cm check
---
>         ${RSH} $rhost -n -l ${BASE_USER_NAME}1 cm check
522,530c571,580
<       print "${CHMOD} 777 ${i}"
<       ${CHMOD} 777 ${i}
<         print "${COPY} ${TROOT}/${USER_PROFILE} ${i}-fs/.${USER_PROFILE}"
<         ${COPY} ${TROOT}/${USER_PROFILE} ${i}-fs/.${USER_PROFILE}
<         print "${COPY} ${TROOT}/${TODO_SCRIPT} ${i}-fs/${TODO_SCRIPT}"<         ${COPY} ${TROOT}/${TODO_SCRIPT} ${i}-fs/${TODO_SCRIPT}
<       chmod 777 ${i}-fs/${TODO_SCRIPT}
<         print "${CHMOD} -R 777 ${i}-fs"
<         ${CHMOD} -R 777 ${i}-fs
---
>         print "${COPY} ${TROOT}/${USER_PROFILE} ${i}/.${USER_PROFILE}">         ${COPY} ${TROOT}/${USER_PROFILE} ${i}/.${USER_PROFILE}
>         print "${COPY} ${TROOT}/${TODO_SCRIPT} ${i}/${TODO_SCRIPT}"
>         ${COPY} ${TROOT}/${TODO_SCRIPT} ${i}/${TODO_SCRIPT}
>         print "${CHOWN} -R ${BASE_USER_NAME}${n} ${i}"
>         ${CHOWN} -R ${BASE_USER_NAME}${n} ${i}
>         print "${CHMOD} -R 755 ${i}"
>         ${CHMOD} -R 755 ${i}
>         print "${CHGRP} -R ${GROUP_NAME} ${i}"
>         ${CHGRP} -R ${GROUP_NAME} ${i}
567,568c617
< echo DO: ${RSH} ${m} ${DCE_LOGIN} ${u} ${DFS_USER_PWD} -exec ${user_home}-fs/${TODO_SCRIPT} ${COMMON_LOG_FILE} ${u} ${TIME_TO_RUN}
<        ${RSH} ${m} ${DCE_LOGIN} ${u} ${DFS_USER_PWD} -exec ${user_home}-fs/${TODO_SCRIPT} ${COMMON_LOG_FILE} ${u} ${TIME_TO_RUN} > ${LOCAL_LOG_DIR}/${m}.${u}.log 2>&1 &
---
>        ${RSH} ${m} -n -l ${u} ${DCE_LOGIN} ${u} ${DFS_USER_PWD} -exec ${user_home}/${TODO_SCRIPT} ${COMMON_LOG_FILE} ${u} ${TIME_TO_RUN} > ${LOCAL_LOG_DIR}/${m}.${u}.log 2>&1 &
796c845,846
<       if [[ $aggr_type != LFS ]]
---
> 
>       if [[ $aggr_type = LFS ]]
798,800c848,855
<         print "FAILED - $aggr_name on $rhost is NOT an LFS aggregate."<         print "$PROGNAME exiting."
<         exit 1
---
>         aggr_free=`print $aggr_info | awk '{print $5}'`
>         if (( aggr_size > aggr_free ))
>         then
>            print "FAILED - Info on $rhost aggregate $aggr_name incorrect."
>            print "Only $aggr_free K free, not $aggr_size."
>            print "$PROGNAME exiting."
>            exit 1
>         fi
802,810d856
<       aggr_free=`print $aggr_info | awk '{print $5}'`
<       if (( aggr_size > aggr_free ))
<       then
<         print "FAILED - Info on $rhost aggregate $aggr_name incorrect."
<         print "Only $aggr_free K free, not $aggr_size."
<         print "$PROGNAME exiting."
<         exit 1
<       fi
< 
834,835c880,881
<       ruid_rgids=`${RSH} $rhost grep $user /etc/passwd`
<       ruid=`print $ruid_rgids | awk -F: '{print $3}'`
---
>         ruid_rgids=`${RSH} $rhost -n -l $user id`
>         ruid=`print $ruid_rgids | awk -F= '{print $2}' | awk -F\( '{print $1}'`
903d948
<      echo Wait for $pid
965d1009
< cm checkfilesets
969c1013
< check_dirs "${BASE_MOUNT_POINTS}" "777"
---
> check_dirs "${BASE_MOUNT_POINTS}" "755"
1006d1049
< cm checkfilesets


dirwrite.sh:

2,3d1
< #-
< # @TRANSARC_COPYRIGHT@
5d2
< 
13a11,14
> # Revision 1.1.6.1  1995/12/11  22:00:06  root
> #     Submit OSF/DCE 1.2.1
> #     [1995/12/11  20:59:16  root]
> #
19c20
< #
---
> # 
78c79
< HOST=`uname -n`
---
> HOST=`hostname`
99c100
< ME=`/usr/ucb/whoami`
---
> ME=`whoami`


do.ksh:

1,21d0
< #!/bin/ksh -
< #-
< # @TRANSARC_COPYRIGHT@
< #
< # $TALog: do.ksh,v $
< # Revision 12.5  1996/03/20  13:17:27  gait
< # Retrofit Solaris changes back to AIX. Now all tests run
< # smoothly on both platforms.
< #
< # Get running on both platforms.
< # [from r12.4 by delta gait-db17508-repair-system-tests-for-DFS, r1.2]< #
< # Revision 12.4  1996/03/18  15:18:23  gait
< # Fix several broken system tests that are used by OSF to test DFS.
< # The fixes are for both Solaris and AIX.
< #
< # Fixes as above.
< # [from r12.1 by delta gait-db17508-repair-system-tests-for-DFS, r1.1]< #
< # $EndTALog$
< 
30a10,13
> # Revision 1.1.8.1  1995/12/11  22:00:08  root
> #     Submit OSF/DCE 1.2.1
> #     [1995/12/11  20:59:17  root]
> #
34c17
< #
---
> # 
111d93
<      chmod 777 $myhome/$i
180,187c162,169
<       cp /opt/dcelocal/etc/cds.conf .
<       dd if=$myhome/myfiles/cds.conf of=$myhome/myfiles/cds.conf.upper conv=ucase
<       dd if=$myhome/myfiles/cds.conf.upper of=$myhome/myfiles/cds.conf.lower conv=lcase
<       rm cds.conf.upper 
<       cat $myhome/myfiles/cds.conf.lower | tr '[a-z]' '[A-Z]' > $myhome/myfiles/cds.conf.upper
<       rm $myhome/myfiles/cds.conf.lower
<       cat $myhome/myfiles/cds.conf.upper | tr '[A-Z]' '[a-z]' > $myhome/myfiles/cds.conf.lower
<       rm cds.conf cds.conf.upper $myhome/myfiles/cds.conf.lower
---
>       cp /opt/dcelocal/etc/dce_config .
>       dd if=$myhome/myfiles/dce_config of=$myhome/myfiles/dce_config.upper conv=ucase
>       dd if=$myhome/myfiles/dce_config.upper of=$myhome/myfiles/dce_config.lower conv=lcase
>       rm dce_config.upper 
>       cat $myhome/myfiles/dce_config.lower | tr '[a-z]' '[A-Z]' > $myhome/myfiles/dce_config.upper
>       rm $myhome/myfiles/dce_config.lower
>       cat $myhome/myfiles/dce_config.upper | tr '[A-Z]' '[a-z]' > $myhome/myfiles/dce_config.lower
>       rm dce_config dce_config.upper $myhome/myfiles/dce_config.lower
231c213
< . ./.profile
---
> . .profile
235c217
< host=`/bin/hostname`
---
> host=`hostname`



CR Number                     : 13309
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : 
Short Description             : tc_slv_delfrc unable to determine replica deletion
Reported Date                 : 2/7/96
Found in Baseline             : 1.2.1
Found Date                    : 2/7/96
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[2/7/96 public]

       Replica deletion in tc_slv_delfrc is unable to confirm that 
       the replica has been deleted.
       
	|............  
	|............  subsys/dce/sec/blu2 (master)
	| 
	|........ subsys/dce/sec/ibm_l3 on subsys/dce/sec/blu2 subsys/dce/sec/knuckle's replist
	| 
	|**** ERROR **** : subsys/dce/sec/ibm_l3 exists on some replica lists :
	   subsys/dce/sec/blu2 subsys/dce/sec/knuckle
	|.... Checking if ibm_l3 is a replica
	|........ Waiting until secd started on hosts: ibm_l3
	|........ secd running on ibm_l3
	|**** ERROR **** : ibm_l3 is not a replica because : 
	|**** ERROR **** : registry does not exist
	|**** ERROR **** : The .mkey file does not exist
	|**** ERROR **** : Failed to verify if replica subsys/dce/sec/ibm_l3 deleted 
	   (delrep -force)
	|
	|+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++



CR Number                     : 13308
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : 
Short Description             : svccfg003 fails with notice of log not created
Reported Date                 : 2/7/96
Found in Baseline             : 1.2.1
Found Date                    : 2/7/96
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[2/7/96 public]

svcc003 fails with the following message when it executes on AIX:

	|According to /etc/rc.dce, the following DCE dced daemons
	|  are configured to run on this machine:
	|dced
	|FAILURE: /usr/tmp/svc_logs/DASH-W/dced.NOTICE not created
	|FAIL



CR Number                     : 13299
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : 
Short Description             : new DFS delegation tests
Reported Date                 : 2/6/96
Found in Baseline             : 1.2
Found Date                    : 2/6/96
Severity                      : D
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[2/6/96 public]

While recently testing DFS 1.2.1, I was unable to get the DFS
delegation tests to work. I hear that no one else has had any
luck with them either. However, the System Test group at
Transarc has constructed working delegation tests from scratch.
This defect is a rubric for adding these tests to the DFS test
suite.



CR Number                     : 13297
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : sec
Subcomponent Name             : grp_override
Short Description             : override_check_group_passwd fail
Reported Date                 : 2/2/96
Found in Baseline             : 1.2.1
Found Date                    : 2/2/96
Severity                      : D
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[2/2/96 public]

grp_override functional test failing.  24 tests pass, 1 failure:  

FAILED feature override_check_group_passwd seq 8 result: 0   expected: 1



CR Number                     : 13296
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 13220
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : gssapi test
Short Description             : should fail with gssapi crypto capability in export build
Reported Date                 : 2/1/96
Found in Baseline             : 1.2
Found Date                    : 12/17/95
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[2/1/96 public]
The gssapi functional test currently prints a notice that data privacy is
available via gssapi; it should actually fail in the export build case.



CR Number                     : 13228
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : functional/security migration-tc
Short Description             : sec_rgy_attr() doesn't init cursor
Reported Date                 : 12/19/95
Found in Baseline             : 1.1
Found Date                    : 12/19/95
Severity                      : A
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : src/test/functional/security/ts/client/migration/migration-tc.c
Sensitivity                   : public

[12/19/95 public]

In migration-tc.c, sec_rgy_att() is calling sec_rgy_attr_sch_update_entry()
with a NULL sch_entry_p.  This is not allowed, and in some cases, causes
the test to hang.

Also, sec_rgy_attr() is calling sec_rgy_attr_lookup_by_id()
with an uninitialized cursor, leading to a crash.  The man page for
sec_rgy_attr_lookup_by_id() allows this, but the man page is wrong
(this will be a seperate OT).  migration-tc.c must initialize the
cursor.

Diffs:
*** migration-tc.c.old  Tue Dec 19 12:19:03 EST 1995
--- migration-tc.c      Tue Dec 19 12:20:58 EST 1995
***************
*** 122,129 ****
  static void sec_rgy_attr_sch(void)
  {
      error_status_t            st;
!     sec_attr_schema_entry_t   *sch_entry_p = NULL,
!                               sch_entry,
                                schema_entries[1];
      uuid_t                    attr_id;
      unsigned32                        cur_num_entries,
--- 122,129 ----
  static void sec_rgy_attr_sch(void)
  {
      error_status_t            st;
!     sec_attr_schema_entry_t   sch_entry,
!                               *sch_entry_p = &sch_entry,
                                schema_entries[1];
      uuid_t                    attr_id;
      unsigned32                        cur_num_entries,
***************
*** 219,224 ****
--- 219,230 ----
       * sec_attr_trig_update
       */

+     sec_rgy_attr_cursor_init( context, sec_rgy_domain_person, (unsigned_char_p
_t) "root",
+                             &num_attrs, &cursor, &st);
+     CHECK_RESULT(true, "Migration(sec_rgy_attr): sec_rgy_attr_cursor_init",
+         &st, error_status_ok);
+
+     num_attrs = 1;
      sec_rgy_attr_lookup_by_id(context, sec_rgy_domain_person, (unsigned_char_p
_t)"root",
                              &cursor, num_attrs, num_attrs, attrs, &num_ret, ou
t_attrs,
                              &num_left, &st);



CR Number                     : 13227
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : migration-tc
Short Description             : various bugs
Reported Date                 : 12/19/95
Found in Baseline             : 1.1
Found Date                    : 12/19/95
Severity                      : A
Priority                      : 4
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : src/test/functional/security/ts/client/migration/migration-tc.c
Sensitivity                   : public

[12/19/95 public]

A few more bugs in migration-tc.c;



CR Number                     : 13184
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : audit tests
Short Description             : Fix dependencies
Reported Date                 : 10/31/95
Found in Baseline             : 1.1
Found Date                    : 10/31/95
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : security/audit/ts/{api_filter,api_log,api_log_to_daemon,ecfile_filter}/Makefile
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[10/31/95 public]

Minor dependency fixes...

*** /vob/dce.src.test/src/test/security/audit/ts/api_filter/Makefile@@/main/3   Fri Jun 10 16:45:26 1994
--- /vob/dce.src.test/src/test/security/audit/ts/api_filter/Makefile@@/main/HPDCE02/2   Tue Jun 27 17:20:16 1995
***************
*** 6,11 ****
--- 6,21 ----
  #
  # HISTORY
  # $Log:	c013184,v $
# Revision 1.3  96/08/26  16:21:45  root
# changed fields:  new/changed/deleted note(s) [damon 08/26/96 public]
# 
# Revision 1.2  95/11/02  17:12:13  root
# changed fields:  new/changed/deleted note(s) [trant 11/01/95 public]
# 
# Revision 1.1  95/10/31  17:37:30  root
# new CR
# 
+ # Revision /main/HPDCE02/2  1995/06/27  21:20 UTC  kline_s
+ #     Merge in revised audit tests.
+ #
+ # Revision /main/HPDCE02/kline_s_mothra/1  1995/06/27  01:49 UTC  kline_s
+ #     Added aud_testf.h dependency for aud_testf_rpc_manager.o
+ #     Removed ignored -g option from CCFLAGS.
+ #
+ # Revision /main/HPDCE02/1  1995/03/01  22:30 UTC  mob
+ #     Change dependency from .idl to .h
+ #
  # Revision 1.1.2.2  1994/06/10  20:45:26  devsrc
  #     cr10872 - fixed copyright
  #     [1994/06/10  17:17:00  devsrc]
***************
*** 32,38 ****
             delfilter.worldover addfilter.princ1noac addfilter.group1noac \
             addfilter.princ1succalarm addfilter.princ1denialarm

! CFLAGS   = -g ${${TARGET_MACHINE}_CFLAGS}

  INCFLAGS = -I../../../../../security/audit/h -I../../../../../security/audit/idl

--- 42,48 ----
             delfilter.worldover addfilter.princ1noac addfilter.group1noac \
             addfilter.princ1succalarm addfilter.princ1denialarm

! CFLAGS   = ${${TARGET_MACHINE}_CFLAGS}

  INCFLAGS = -I../../../../../security/audit/h -I../../../../../security/audit/idl

***************
*** 44,50 ****

  aud_testf_cstub.o: aud_testf_cstub.c

! aud_testf.o: aud_testf.idl

  LIBS = -laudit -ldce  -ltetapi -ltettcm
  .include <${RULES_MK}>
--- 54,62 ----

  aud_testf_cstub.o: aud_testf_cstub.c

! aud_testf.o: aud_testf.h
!
! aud_testf_rpc_manager.o: aud_testf.h

  LIBS = -laudit -ldce  -ltetapi -ltettcm
  .include <${RULES_MK}>
*** /vob/dce.src.test/src/test/security/audit/ts/api_log/Makefile@@/main/4      Fri Jun 10 16:45:47 1994
--- /vob/dce.src.test/src/test/security/audit/ts/api_log/Makefile@@/main/HPDCE02/4      Fri Aug 18 16:10:06 1995
***************
*** 6,11 ****
--- 6,28 ----
  #
  # HISTORY
  # $Log:	c013184,v $
# Revision 1.3  96/08/26  16:21:45  root
# changed fields:  new/changed/deleted note(s) [damon 08/26/96 public]
# 
# Revision 1.2  95/11/02  17:12:13  root
# changed fields:  new/changed/deleted note(s) [trant 11/01/95 public]
# 
# Revision 1.1  95/10/31  17:37:30  root
# new CR
# 
+ # Revision /main/HPDCE02/4  1995/08/18  20:10 UTC  kline_s
+ #     Merge fix for CHFts15645.
+ #
+ # Revision /main/HPDCE02/kline_s_mothra/3  1995/08/17  21:30 UTC  kline_s
+ #     CHFts16115: Remove DES_HIDDEN conditional - only using one protection
+ #     level due to singular Domestic/Export release.
+ #
+ # Revision /main/HPDCE02/kline_s_mothra/2  1995/07/06  19:45 UTC  kline_s
+ #     Enable tests to function properly using international (ie. non-DES) bits.
+ #
+ # Revision /main/HPDCE02/kline_s_mothra/1  1995/06/27  02:04 UTC  kline_s
+ #     Added aud_test.h dependency for aud_test_rpc_manager.o.
+ #     Removed ignored -g option from list of CCFLAGS options.
+ #
+ # Revision /main/HPDCE02/1  1995/03/01  22:29 UTC  mob
+ #     Change dependency from .idl to .h
+ #
  # Revision 1.1.2.3  1994/06/10  20:45:47  devsrc
  #     cr10872 - fixed copyright
  #     [1994/06/10  17:17:11  devsrc]
***************
*** 32,38 ****
  SCRIPTS  = api_log
  OTHERS   =

! CFLAGS = -g ${${TARGET_MACHINE}_CFLAGS}
  INCFLAGS = -I../../../../../security/audit/h -I../../../../../security/audit/idl

  IDLFILES = aud_test.idl
--- 49,56 ----
  SCRIPTS  = api_log
  OTHERS   =

! CFLAGS = ${${TARGET_MACHINE}_CFLAGS}
!
  INCFLAGS = -I../../../../../security/audit/h -I../../../../../security/audit/idl

  IDLFILES = aud_test.idl
***************
*** 43,49 ****

  aud_test_cstub.o: aud_test_cstub.c

! aud_test.o: aud_test.idl

  aud_test_LIBS = -ltettcm -ltetapi -laudit -ldce

--- 61,69 ----

  aud_test_cstub.o: aud_test_cstub.c

! aud_test.o: aud_test.h
!
! aud_test_rpc_manager.o: aud_test.h

  aud_test_LIBS = -ltettcm -ltetapi -laudit -ldce

*** /vob/dce.src.test/src/test/security/audit/ts/api_log_to_daemon/Makefile@@/main/4    Fri Jun 10 16:45:56 1994
--- /vob/dce.src.test/src/test/security/audit/ts/api_log_to_daemon/Makefile@@/main/HPDCE02/4    Fri Aug 18 16:10:45
1995
***************
*** 6,11 ****
--- 6,28 ----
  #
  # HISTORY
  # $Log:	c013184,v $
# Revision 1.3  96/08/26  16:21:45  root
# changed fields:  new/changed/deleted note(s) [damon 08/26/96 public]
# 
# Revision 1.2  95/11/02  17:12:13  root
# changed fields:  new/changed/deleted note(s) [trant 11/01/95 public]
# 
# Revision 1.1  95/10/31  17:37:30  root
# new CR
# 
+ # Revision /main/HPDCE02/4  1995/08/18  20:10 UTC  kline_s
+ #     Merge fix for CHFts16115
+ #
+ # Revision /main/HPDCE02/kline_s_mothra/3  1995/08/17  21:30 UTC  kline_s
+ #     CHFts16115: Remove DES_HIDDEN conditional - only using one protection
+ #     level due to singular Domestic/Export release.
+ #
+ # Revision /main/HPDCE02/kline_s_mothra/2  1995/07/06  19:45 UTC  kline_s
+ #     Enable tests to function properly using international (ie. non-DES) bits.
+ #
+ # Revision /main/HPDCE02/kline_s_mothra/1  1995/06/27  02:27 UTC  kline_s
+ #     Added aud_testd.h dependency for aud_testd_rpc_manager.o.
+ #     Removed ignored -g option from list of CCFLAGS options.
+ #
+ # Revision /main/HPDCE02/1  1995/03/01  22:29 UTC  mob
+ #     Change dependency from .idl to .h
+ #
  # Revision 1.1.2.3  1994/06/10  20:45:56  devsrc
  #     cr10872 - fixed copyright
  #     [1994/06/10  17:17:17  devsrc]
***************
*** 32,38 ****
  SCRIPTS  = api_log_to_daemon stopauditd startauditd disableauditd \
             setaclnologperm restorelogperm

! CFLAGS = -g ${${TARGET_MACHINE}_CFLAGS}

  INCFLAGS = -I../../../../../security/audit/h -I../../../../../security/audit/idl

--- 49,56 ----
  SCRIPTS  = api_log_to_daemon stopauditd startauditd disableauditd \
             setaclnologperm restorelogperm

! # Can't use encryption for international build
! CFLAGS = ${${TARGET_MACHINE}_CFLAGS}

  INCFLAGS = -I../../../../../security/audit/h -I../../../../../security/audit/idl

***************
*** 44,50 ****

  aud_testd_cstub.o: aud_testd_cstub.c

! aud_testd.o: aud_testd.idl

  LIBS = -ltettcm -ltetapi -laudit -ldce
  .include <${RULES_MK}>
--- 62,70 ----

  aud_testd_cstub.o: aud_testd_cstub.c

! aud_testd.o: aud_testd.h
!
! aud_testd_rpc_manager.o: aud_testd.h

  LIBS = -ltettcm -ltetapi -laudit -ldce
  .include <${RULES_MK}>
*** /vob/dce.src.test/src/test/security/audit/ts/ecfile_filter/Makefile@@/main/4        Fri Jun 10 16:46:21 1994
--- /vob/dce.src.test/src/test/security/audit/ts/ecfile_filter/Makefile@@/main/HPDCE02/4        Fri Aug 18 16:10:31
1995
***************
*** 6,11 ****
--- 6,27 ----
  #
  # HISTORY
  # $Log:	c013184,v $
# Revision 1.3  96/08/26  16:21:45  root
# changed fields:  new/changed/deleted note(s) [damon 08/26/96 public]
# 
# Revision 1.2  95/11/02  17:12:13  root
# changed fields:  new/changed/deleted note(s) [trant 11/01/95 public]
# 
# Revision 1.1  95/10/31  17:37:30  root
# new CR
# 
+ # Revision /main/HPDCE02/4  1995/08/18  20:10 UTC  kline_s
+ #     Merge fix for CHFts16115
+ #
+ # Revision /main/HPDCE02/kline_s_mothra/3  1995/08/17  21:31 UTC  kline_s
+ #     CHFts16115: Remove DES_HIDDEN conditional - only using one protection
+ #     level due to singular Domestic/Export release.
+ #
+ # Revision /main/HPDCE02/kline_s_mothra/2  1995/07/06  19:45 UTC  kline_s
+ #     Enable tests to function properly using international (ie. non-DES) bits.
+ #
+ # Revision /main/HPDCE02/kline_s_mothra/1  1995/06/27  02:16 UTC  kline_s
+ #     Add aud_testec_rpc_manager.o build dependency on aud_testec.h.
+ #
+ # Revision /main/HPDCE02/1  1995/03/01  22:29 UTC  mob
+ #     Change dependency from .idl to .h
+ #
  # Revision 1.1.2.3  1994/06/10  20:46:21  devsrc
  #     cr10872 - fixed copyright
  #     [1994/06/10  17:17:32  devsrc]
***************
*** 45,51 ****

  aud_testec_cstub.o: aud_testec_cstub.c

! aud_testec.o: aud_testec.idl

  LIBS = -laudit -ldce  -ltetapi -ltettcm
  .include <${RULES_MK}>
--- 61,69 ----

  aud_testec_cstub.o: aud_testec_cstub.c

! aud_testec.o: aud_testec.h
!
! aud_testec_rpc_manager.o: aud_testec.h

  LIBS = -laudit -ldce  -ltetapi -ltettcm
  .include <${RULES_MK}>

[11/01/95 public]
Please also include this fix in the next merge.  Thanks.

[08/26/96 public]
From a quick inspection of files it seems that a lot has changed since this
was filed and that this may all be moot. Any objection to my closing/cancelling
this?



CR Number                     : 13134
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : update/query
Short Description             : query on heavily traffic'ed net fails
Reported Date                 : 10/2/95
Found in Baseline             : 1.2
Found Date                    : 08/22/95
Severity                      : E
Priority                      : 4
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : query.c
Sensitivity                   : public

[10/2/95 public]

On a heavily loaded network the Security query test after update will 
have a varying number (2 or 3) of errors because it is unforgiving 
in its time limits to get information over the net.



CR Number                     : 13133
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dcerpidl5
Short Description             : dcerpidl5 test executable dumps core
Reported Date                 : 10/2/95
Found in Baseline             : 1.2
Found Date                    : 09/04/95
Severity                      : E
Priority                      : 4
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[10/2/95 public]

dcerpidl5 test does not operate, the test executable repas_client 
dumps core.  This has been the case for quite a while, according to 
SQA here.  This problem has been seen in all versions of DCE to date. 
Because of the way the test is written, it will dump core, but give 
a tet_result of "pass."  This is because it looks for failure information 
in a log file, which never gets there because of the core dump.



CR Number                     : 13132
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : hclrel001
Short Description             : hclrel001 run to same cell fails
Reported Date                 : 10/2/95
Found in Baseline             : 1.1
Found Date                    : 06/21/95
Severity                      : E
Priority                      : 4
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[10/2/95 public]

When hclrel001 is run with the same cell name twice as its arguements, 
(so that it runs to the same cell) it fails.  This is a problem with 
the test itself, and not DCE intercell. 

to itself



CR Number                     : 13116
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : other
S/W Ref Platform              : other
Component Name                : systest
Subcomponent Name             : rpc, sec, dced, dcecp, thr, systest
Short Description             : SVR4 porting changes
Reported Date                 : 9/11/95
Found in Baseline             : 1.1
Found Date                    : 9/11/95
Severity                      : D
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[9/11/95 public]

SVR4 porting changes from support customer:

*** /animal/build/dce1.1/src/./test/functional/admin/dcecp/ts/aud/audevents_show_P.tcl	Tue Dec 13 11:06:41 1994
--- ./test/functional/admin/dcecp/ts/aud/audevents_show_P.tcl	Tue May  2 12:08:31 1995
***************
*** 8,20 ****
  #
  # HISTORY
  # $Log:	c013116,v $
# Revision 1.1  95/09/11  15:54:39  root
# new CR
# 
! # Revision 2.1  1994/12/13  16:04:18  devrcs
! # OSF DCE 1.1 Source
  #
  # Revision 1.1.2.2  1994/10/01  01:33:24  rousseau
  # 	Updated for auditd changes.
  # 	[1994/10/01  01:24:54  rousseau]
! #
  # Revision 1.1.2.1  1994/09/28  21:38:08  melman
  # 	moved admin tests to test/functional
  # 	[1994/09/28  21:06:47  melman]
--- 8,24 ----
  #
  # HISTORY
  # $Log:	c013116,v $
# Revision 1.1  95/09/11  15:54:39  root
# new CR
# 
! # Revision 2.1.1.2  1995/05/02  16:08:29  tomj
! # 	Change audit event codes to start at 0x300, instead of 0x100
! # 	security uses 0x100.
  #
+ # Revision 2.1  1994/12/13  16:04:18  devrcs
+ # 	OSF DCE 1.1 Source
+ # 
  # Revision 1.1.2.2  1994/10/01  01:33:24  rousseau
  # 	Updated for auditd changes.
  # 	[1994/10/01  01:24:54  rousseau]
! # 
  # Revision 1.1.2.1  1994/09/28  21:38:08  melman
  # 	moved admin tests to test/functional
  # 	[1994/09/28  21:06:47  melman]
***************
*** 70,76 ****
      # Run the test
      test {
  	audevents show {dce_audit_filter_modify}
!     } compare_strings {{dce_audit_filter_modify 0x100 0x103 0x104}}
  
      # Cleanup steps
  }
--- 74,80 ----
      # Run the test
      test {
  	audevents show {dce_audit_filter_modify}
!     } compare_strings {{dce_audit_filter_modify 0x300 0x303 0x304}}
  
      # Cleanup steps
  }
***************
*** 84,90 ****
      # Run the test
      test {
  	audevents show [audevents cat]
!     } compare_lists {{dce_audit_admin_modify 0x105 0x106 0x107 0x108} {dce_audit_admin_query 0x109 0x10a} {dce_audit_filter_modify 0x100 0x103 0x104} {dce_audit_filter_query 0x101 0x102} {dce_dts_mgt_modify 0x200 0x201 0x202 0x203 0x207 0x208 0x209 0x20a} {dce_dts_mgt_query 0x20b 0x20c 0x20d 0x20e 0x20f 0x210} {dce_dts_synch 0x204 0x205 0x206} {dce_dts_time_provider 0x211 0x212} {dce_sec_authent 0x101 0x102 0x103 0x104 0x10c 0x125} {dce_sec_control 0x105 0x106 0x107 0x108 0x109 0x10a 0x10b 0x10c 0x10d 0x10e 0x10f 0x110 0x111 0x112 0x113 0x114 0x115 0x116 0x117 0x118 0x119 0x11a 0x11b 0x11c 0x11d 0x11e 0x11f 0x120 0x121 0x122 0x123 0x124 0x125 0x126 0x127 0x128 0x129 0x12a} {dce_sec_modify 0x106 0x10d 0x10e 0x10f 0x111 0x114 0x115 0x116 0x117 0x11a 0x11b 0x11f 0x121 0x123} {dce_sec_query 0x105 0x107 0x108 0x109 0x10a 0x10b 0x110 0x112 0x113 0x118 0x11c 0x11d 0x11e 0x120 0x122} {dce_sec_server 0x124 0x125 0x126 0x127 0x128}}
  
      # Cleanup steps
  }
--- 88,94 ----
      # Run the test
      test {
  	audevents show [audevents cat]
!     } compare_lists {{dce_audit_admin_modify 0x305 0x306 0x307 0x308} {dce_audit_admin_query 0x309 0x30a} {dce_audit_filter_modify 0x300 0x303 0x304} {dce_audit_filter_query 0x301 0x302} {dce_dts_mgt_modify 0x200 0x201 0x202 0x203 0x207 0x208 0x209 0x20a} {dce_dts_mgt_query 0x20b 0x20c 0x20d 0x20e 0x20f 0x210} {dce_dts_synch 0x204 0x205 0x206} {dce_dts_time_provider 0x211 0x212} {dce_sec_authent 0x101 0x102 0x103 0x104 0x10c 0x125} {dce_sec_control 0x105 0x106 0x107 0x108 0x109 0x10a 0x10b 0x10c 0x10d 0x10e 0x10f 0x110 0x111 0x112 0x113 0x114 0x115 0x116 0x117 0x118 0x119 0x11a 0x11b 0x11c 0x11d 0x11e 0x11f 0x120 0x121 0x122 0x123 0x124 0x125 0x126 0x127 0x128 0x129 0x12a} {dce_sec_modify 0x106 0x10d 0x10e 0x10f 0x111 0x114 0x115 0x116 0x117 0x11a 0x11b 0x11f 0x121 0x123} {dce_sec_query 0x105 0x107 0x108 0x109 0x10a 0x10b 0x110 0x112 0x113 0x118 0x11c 0x11d 0x11e 0x120 0x122} {dce_sec_server 0x124 0x125 0x126 0x127 0x128}}
  
      # Cleanup steps
  }
*** /animal/build/dce1.1/src/./test/functional/admin/dcecp/ts/aud/audtrail_show_P.tcl	Tue Dec 13 11:06:50 1994
--- ./test/functional/admin/dcecp/ts/aud/audtrail_show_P.tcl	Tue May  2 12:08:35 1995
***************
*** 8,20 ****
  #
  # HISTORY
  # $Log:	c013116,v $
# Revision 1.1  95/09/11  15:54:39  root
# new CR
# 
! # Revision 2.1  1994/12/13  16:04:28  devrcs
! # OSF DCE 1.1 Source
  #
  # Revision 1.1.2.1  1994/09/28  21:38:21  melman
  # 	moved admin tests to test/functional
  # 	[1994/09/28  21:07:01  melman]
! #
  # Revision 1.1.2.5  1994/06/10  20:03:26  devsrc
  # 	cr10872 - fixed copyright
  # 	[1994/06/10  16:53:02  devsrc]
--- 8,23 ----
  #
  # HISTORY
  # $Log:	c013116,v $
# Revision 1.1  95/09/11  15:54:39  root
# new CR
# 
! # Revision 2.1.1.2  1995/05/02  16:08:33  tomj
! # 	Make sure tmp file is removed before and after test.
  #
+ # Revision 2.1  1994/12/13  16:04:28  devrcs
+ # 	OSF DCE 1.1 Source
+ # 
  # Revision 1.1.2.1  1994/09/28  21:38:21  melman
  # 	moved admin tests to test/functional
  # 	[1994/09/28  21:07:01  melman]
! # 
  # Revision 1.1.2.5  1994/06/10  20:03:26  devsrc
  # 	cr10872 - fixed copyright
  # 	[1994/06/10  16:53:02  devsrc]
***************
*** 127,132 ****
--- 130,136 ----
      tet_infoline audtrail_show_7_P: Check that we can dump an audit trail to a file using -to.
  
      # Setup steps
+     catch {exec rm -f $DCP_AUD_TRAIL_OUTFILE } donotcare
  
      # Run the test
      if {([catch {audtrail show $TET_ROOT/$DCP_AUD_TRAIL_FILE_1 -to $DCP_AUD_TRAIL_OUTFILE} msg] != 0) || ([file exists $DCP_AUD_TRAIL_OUTFILE] == 0)} {
***************
*** 139,144 ****
--- 143,149 ----
      }
  
      # Cleanup steps
+     catch {exec rm -f $DCP_AUD_TRAIL_OUTFILE } donotcare
  }
  
  
*** /animal/build/dce1.1/src/./test/functional/admin/dcecp/ts/cds/clearinghouse_create_P.tcl	Tue Dec 13 11:06:59 1994
--- ./test/functional/admin/dcecp/ts/cds/clearinghouse_create_P.tcl	Tue May  2 12:08:38 1995
***************
*** 8,20 ****
  #
  # HISTORY
  # $Log:	c013116,v $
# Revision 1.1  95/09/11  15:54:39  root
# new CR
# 
! # Revision 2.1  1994/12/13  16:04:36  devrcs
! # OSF DCE 1.1 Source
  #
  # Revision 1.1.2.1  1994/09/28  21:38:33  melman
  # 	moved admin tests to test/functional
  # 	[1994/09/28  21:07:17  melman]
! #
  # Revision 1.1.2.5  1994/09/06  13:14:35  kevins
  # 	OT 10617 modified messages in negative tests
  # 	[1994/09/06  12:30:39  kevins]
--- 8,26 ----
  #
  # HISTORY
  # $Log:	c013116,v $
# Revision 1.1  95/09/11  15:54:39  root
# new CR
# 
! # Revision 2.1.1.2  1995/05/02  16:08:36  tomj
! # 	Sleep before removing freshly created clearinghouses.
! # 	If the replicated root directory is still in the 'new' state
! # 	when the delete request arrives, the directory isn't (and can't be)
! # 	removed so the clearinghouse can't be removed.
  #
+ # Revision 2.1  1994/12/13  16:04:36  devrcs
+ # 	OSF DCE 1.1 Source
+ # 
  # Revision 1.1.2.1  1994/09/28  21:38:33  melman
  # 	moved admin tests to test/functional
  # 	[1994/09/28  21:07:17  melman]
! # 
  # Revision 1.1.2.5  1994/09/06  13:14:35  kevins
  # 	OT 10617 modified messages in negative tests
  # 	[1994/09/06  12:30:39  kevins]
***************
*** 72,77 ****
--- 78,86 ----
           } dcp_find_pgo clrcr_ch
  
      # Cleanup steps
+     # if we delete too fast, it wont work
+     exec sleep 10
+ 
          # The clearinghouses /.:/clrcr_ch must be deleted
      if {[dcp_wrap {clearinghouse delete /.:/clrcr_ch}] != 0} {return;}
  }
***************
*** 95,100 ****
--- 104,112 ----
          # Successful completion
  
      # Cleanup steps
+     # if we delete too fast, it wont work
+     exec sleep 10
+ 
          # The clearinghouses /.:/clrcr_ch /.:/clrcl1_ch must be deleted. 
      if {[dcp_wrap {clearinghouse delete {/.:/clrcr_ch /.:/clrcl1_ch}}] != 0} {return;}
  
*** /animal/build/dce1.1/src/./test/functional/admin/dcecp/ts/cds/clearinghouse_delete_P.tcl	Tue Dec 13 11:07:01 1994
--- ./test/functional/admin/dcecp/ts/cds/clearinghouse_delete_P.tcl	Tue May  2 12:08:41 1995
***************
*** 8,20 ****
  #
  # HISTORY
  # $Log:	c013116,v $
# Revision 1.1  95/09/11  15:54:39  root
# new CR
# 
! # Revision 2.1  1994/12/13  16:04:38  devrcs
! # OSF DCE 1.1 Source
  #
  # Revision 1.1.2.1  1994/09/28  21:38:35  melman
  # 	moved admin tests to test/functional
  # 	[1994/09/28  21:07:22  melman]
! #
  # Revision 1.1.2.5  1994/09/06  13:14:37  kevins
  # 	OT 10617 modified messages in negative tests
  # 	[1994/09/06  12:30:47  kevins]
--- 8,26 ----
  #
  # HISTORY
  # $Log:	c013116,v $
# Revision 1.1  95/09/11  15:54:39  root
# new CR
# 
! # Revision 2.1.1.2  1995/05/02  16:08:39  tomj
! # 	Sleep before removing the freshly created clearinghouses.
! # 	If the replicated root directory is still in the 'new' state
! # 	when the delete request arrives, the directory isn't (and can't be)
! # 	removed so the clearinghouse can't be removed.
  #
+ # Revision 2.1  1994/12/13  16:04:38  devrcs
+ # 	OSF DCE 1.1 Source
+ # 
  # Revision 1.1.2.1  1994/09/28  21:38:35  melman
  # 	moved admin tests to test/functional
  # 	[1994/09/28  21:07:22  melman]
! # 
  # Revision 1.1.2.5  1994/09/06  13:14:37  kevins
  # 	OT 10617 modified messages in negative tests
  # 	[1994/09/06  12:30:47  kevins]
***************
*** 67,72 ****
--- 73,81 ----
          # Clearinghouse /.:/clrd_ch  must exist 
      if {[dcp_wrap {clearinghouse create /.:/clrd_ch}] != 0} {return;}
  
+     # can't delete the clearinghouse too fast or it will fail
+     exec sleep 10
+ 
      # Run the test
      test { clearinghouse delete /.:/clrd_ch
           dcp_missing [directory list /.: -object -simple] clrd_ch
***************
*** 86,91 ****
--- 95,103 ----
          # Must be on the machine that contains the cdsd process.
          # Clearinghouses /.:/clrd_ch /.:/clrd1_ch must exist. 
      if {[dcp_wrap {clearinghouse create {/.:/clrd_ch /.:/clrd1_ch}}] != 0} {return;}
+ 
+     # can't delete the clearinghouse too fast or it will fail
+     exec sleep 10
  
      # Run the test
      test { clearinghouse delete {/.:/clrd_ch /.:/clrd1_ch} 
*** /animal/build/dce1.1/src/./test/functional/admin/dcecp/ts/cds/clearinghouse_disable_P.tcl	Tue Dec 13 11:07:03 1994
--- ./test/functional/admin/dcecp/ts/cds/clearinghouse_disable_P.tcl	Tue May  2 12:09:52 1995
***************
*** 7,20 ****
  #
  #
  # HISTORY
! # $Log:	c013116,v $
# Revision 1.1  95/09/11  15:54:39  root
# new CR
# 
! # Revision 2.1  1994/12/13  16:04:40  devrcs
! # OSF DCE 1.1 Source
  #
  # Revision 1.1.2.1  1994/09/28  21:38:37  melman
  # 	moved admin tests to test/functional
  # 	[1994/09/28  21:07:26  melman]
! #
  # Revision 1.1.2.5  1994/09/06  13:14:38  kevins
  # 	OT 10617 modified messages in negative tests
  # 	[1994/09/06  12:30:52  kevins]
--- 7,25 ----
  #
  #
  # HISTORY
! # $Log:	c013116,v $
# Revision 1.1  95/09/11  15:54:39  root
# new CR
# 
! # Revision 2.1.1.2  1995/05/02  16:09:50  tomj
! # 	Sleep between create and delete of clearinghouse.
! # 	Hack tests not to fail because delete command returns non-zero
! # 	and test driver thinks this means failure.
  #
+ # Revision 2.1  1994/12/13  16:04:40  devrcs
+ # 	OSF DCE 1.1 Source
+ # 
  # Revision 1.1.2.1  1994/09/28  21:38:37  melman
  # 	moved admin tests to test/functional
  # 	[1994/09/28  21:07:26  melman]
! # 
  # Revision 1.1.2.5  1994/09/06  13:14:38  kevins
  # 	OT 10617 modified messages in negative tests
  # 	[1994/09/06  12:30:52  kevins]
***************
*** 69,80 ****
  
      # Run the test
      test { clearinghouse disable /.:/clrdi_ch 
!          clearinghouse delete /.:/clrdi_ch
!          } compare_strings {Specified clearinghouse does not exist}
  
  
      # Cleanup steps
      if {[dcp_wrap {clearinghouse create /.:/clrdi_ch}] != 0} {return;}
      if {[dcp_wrap {clearinghouse delete /.:/clrdi_ch}] != 0} {return;}
  }
  
--- 74,87 ----
  
      # Run the test
      test { clearinghouse disable /.:/clrdi_ch 
!          catch {clearinghouse delete /.:/clrdi_ch} out
! 	 list $out
!          } compare_strings {{Specified clearinghouse does not exist}}
  
  
      # Cleanup steps
      if {[dcp_wrap {clearinghouse create /.:/clrdi_ch}] != 0} {return;}
+     exec sleep 10
      if {[dcp_wrap {clearinghouse delete /.:/clrdi_ch}] != 0} {return;}
  }
  
***************
*** 92,102 ****
  
      # Run the test
      test { clearinghouse disable {/.:/clrdi_ch /.:/clrdi1_ch}
!          clearinghouse delete  {/.:/clrdi_ch /.:/clrdi1_ch}
!          } compare_strings {Specified clearinghouse does not exist}
  
      # Cleanup steps
      if {[dcp_wrap {clearinghouse create {/.:/clrdi_ch /.:/clrdi1_ch} }] != 0} {return;}
      if {[dcp_wrap {clearinghouse delete {/.:/clrdi_ch /.:/clrdi1_ch} }] != 0} {return;}
  }
  
--- 99,111 ----
  
      # Run the test
      test { clearinghouse disable {/.:/clrdi_ch /.:/clrdi1_ch}
!          catch {clearinghouse delete {/.:/clrdi_ch /.:/clrdi1_ch}} out
! 	 list $out
!          } compare_strings {{Specified clearinghouse does not exist}}
  
      # Cleanup steps
      if {[dcp_wrap {clearinghouse create {/.:/clrdi_ch /.:/clrdi1_ch} }] != 0} {return;}
+     exec sleep 10
      if {[dcp_wrap {clearinghouse delete {/.:/clrdi_ch /.:/clrdi1_ch} }] != 0} {return;}
  }
  
*** /animal/build/dce1.1/src/./test/functional/admin/dcecp/ts/cds/clearinghouse_show_P.tcl	Tue Dec 13 11:07:05 1994
--- ./test/functional/admin/dcecp/ts/cds/clearinghouse_show_P.tcl	Tue May  2 12:09:55 1995
***************
*** 8,20 ****
  #
  # HISTORY
  # $Log:	c013116,v $
# Revision 1.1  95/09/11  15:54:39  root
# new CR
# 
! # Revision 2.1  1994/12/13  16:04:42  devrcs
! # OSF DCE 1.1 Source
  #
  # Revision 1.1.2.1  1994/09/28  21:38:40  melman
  # 	moved admin tests to test/functional
  # 	[1994/09/28  21:07:31  melman]
! #
  # Revision 1.1.2.5  1994/09/06  13:14:40  kevins
  # 	OT 10617 modified messages in negative tests
  # 	[1994/09/06  12:30:59  kevins]
--- 8,26 ----
  #
  # HISTORY
  # $Log:	c013116,v $
# Revision 1.1  95/09/11  15:54:39  root
# new CR
# 
! # Revision 2.1.1.2  1995/05/02  16:09:53  tomj
! # 	Sleep before removing the freshly created clearinghouses.
! # 	If the replicated root directory is still in the 'new' state
! # 	when the delete request arrives, the directory isn't (and can't be)
! # 	removed so the clearinghouse can't be removed.
  #
+ # Revision 2.1  1994/12/13  16:04:42  devrcs
+ # 	OSF DCE 1.1 Source
+ # 
  # Revision 1.1.2.1  1994/09/28  21:38:40  melman
  # 	moved admin tests to test/functional
  # 	[1994/09/28  21:07:31  melman]
! # 
  # Revision 1.1.2.5  1994/09/06  13:14:40  kevins
  # 	OT 10617 modified messages in negative tests
  # 	[1994/09/06  12:30:59  kevins]
***************
*** 73,78 ****
--- 79,86 ----
           } compare_strings found 
  
      # Cleanup steps
+     # If we delete too fast, it will fail
+     exec sleep 10
      if {[dcp_wrap {clearinghouse delete /.:/clrsh_ch}] != 0} {return;}
  }
  
***************
*** 92,97 ****
--- 100,107 ----
         } compare_strings found
  
      # Cleanup steps
+     # If we delete too fast, it will fail
+     exec sleep 10
      if {[dcp_wrap {clearinghouse delete {/.:/clrsh_ch /.:/clrsh1_ch}}] != 0} {return;}
  }
  
***************
*** 105,110 ****
--- 115,121 ----
      # Setup steps
          # Must be running as cell administrator.
      if {[dcp_wrap {clearinghouse create /.:/clrsh_ch }] != 0} {return;}
+     exec sleep 10
  
      # Run the test
      test {
***************
*** 112,117 ****
--- 123,130 ----
           } compare_strings found
  
      # Cleanup steps
+     # If we delete too fast, it will fail
+     exec sleep 10
      if {[dcp_wrap {clearinghouse delete /.:/clrsh_ch}] != 0} {return;}
  }
  
***************
*** 125,130 ****
--- 138,144 ----
      # Setup steps
          # Must be running as cell administrator. 
      if {[dcp_wrap {clearinghouse create /.:/clrsh_ch}] != 0} {return;}
+     exec sleep 10
  
      # Run the test
      test { 
***************
*** 132,137 ****
--- 146,153 ----
           } compare_strings found
  
      # Cleanup steps
+     # If we delete too fast, it will fail
+     exec sleep 10
      if {[dcp_wrap {clearinghouse delete /.:/clrsh_ch}] != 0} {return;}
  }
  
*** /animal/build/dce1.1/src/./test/functional/admin/dcecp/ts/ktb/keytab_add_N.tcl	Tue Dec 13 11:08:03 1994
--- ./test/functional/admin/dcecp/ts/ktb/keytab_add_N.tcl	Tue May  2 12:09:58 1995
***************
*** 8,20 ****
  #
  # HISTORY
  # $Log:	c013116,v $
# Revision 1.1  95/09/11  15:54:39  root
# new CR
# 
! # Revision 2.1  1994/12/13  16:05:39  devrcs
! # OSF DCE 1.1 Source
  #
  # Revision 1.1.2.2  1994/09/29  22:01:32  baum
  # 	Fixed negative messages (OT 12370)
  # 	[1994/09/29  22:01:06  baum]
! #
  # Revision 1.1.2.1  1994/09/28  21:40:19  melman
  # 	moved admin tests to test/functional
  # 	[1994/09/28  21:09:32  melman]
--- 8,24 ----
  #
  # HISTORY
  # $Log:	c013116,v $
# Revision 1.1  95/09/11  15:54:39  root
# new CR
# 
! # Revision 2.1.1.2  1995/05/02  16:09:56  tomj
! # 	For unauthenticated test, we don't care about the logout result
! # 	and corrected the expected error message.
  #
+ # Revision 2.1  1994/12/13  16:05:39  devrcs
+ # 	OSF DCE 1.1 Source
+ # 
  # Revision 1.1.2.2  1994/09/29  22:01:32  baum
  # 	Fixed negative messages (OT 12370)
  # 	[1994/09/29  22:01:06  baum]
! # 
  # Revision 1.1.2.1  1994/09/28  21:40:19  melman
  # 	moved admin tests to test/functional
  # 	[1994/09/28  21:09:32  melman]
***************
*** 190,201 ****
      tet_infoline keytab_add_9_N: Check that unauthenticated users are handled correctly.
  
      # Setup steps
!     if {[dcp_wrap {logout}] != 0} {return;}
  
      # Run the test
      test {
          list [catch {keytab add ktb2 -member test_princ1 -random -registry} msg] $msg
!     } compare_strings {1 {No currently established network identity for which context exists}}
  
      # Cleanup steps
  }
--- 194,206 ----
      tet_infoline keytab_add_9_N: Check that unauthenticated users are handled correctly.
  
      # Setup steps
!     #if {[dcp_wrap {logout}] != 0} {return;}
!     catch {logout} donotcare
  
      # Run the test
      test {
          list [catch {keytab add ktb2 -member test_princ1 -random -registry} msg] $msg
!     } compare_strings {1 {Not authenticated}}
  
      # Cleanup steps
  }
*** /animal/build/dce1.1/src/./test/functional/admin/dcecp/ts/misc/shell_P.tcl	Tue Dec 13 11:08:33 1994
--- ./test/functional/admin/dcecp/ts/misc/shell_P.tcl	Tue May  2 12:10:01 1995
***************
*** 8,20 ****
  #
  # HISTORY
  # $Log:	c013116,v $
# Revision 1.1  95/09/11  15:54:39  root
# new CR
# 
! # Revision 2.1  1994/12/13  16:06:10  devrcs
! # OSF DCE 1.1 Source
  #
  # Revision 1.1.2.1  1994/09/28  21:41:13  melman
  # 	moved admin tests to test/functional
  # 	[1994/09/28  21:10:26  melman]
! #
  # Revision 1.1.2.2  1994/06/17  18:43:32  devsrc
  # 	cr10872 - fix copyright
  # 	[1994/06/17  18:27:00  devsrc]
--- 8,23 ----
  #
  # HISTORY
  # $Log:	c013116,v $
# Revision 1.1  95/09/11  15:54:39  root
# new CR
# 
! # Revision 2.1.1.2  1995/05/02  16:09:59  tomj
! # 	Don't give explicit path for hostname
  #
+ # Revision 2.1  1994/12/13  16:06:10  devrcs
+ # 	OSF DCE 1.1 Source
+ # 
  # Revision 1.1.2.1  1994/09/28  21:41:13  melman
  # 	moved admin tests to test/functional
  # 	[1994/09/28  21:10:26  melman]
! # 
  # Revision 1.1.2.2  1994/06/17  18:43:32  devsrc
  # 	cr10872 - fix copyright
  # 	[1994/06/17  18:27:00  devsrc]
***************
*** 46,55 ****
      tet_infoline shell_1_P: Verify that we can run a command from the OS.
  
      # Setup steps
!     if {[dcp_wrap {set HOSTNAME [exec /bin/hostname]}] != 0} {return;}
  
      # Run the test
!     test { shell /bin/hostname } compare_strings $HOSTNAME
  
      # The command should return the output of the local OS's 'hostname'
      # command.
--- 49,58 ----
      tet_infoline shell_1_P: Verify that we can run a command from the OS.
  
      # Setup steps
!     if {[dcp_wrap {set HOSTNAME [exec hostname]}] != 0} {return;}
  
      # Run the test
!     test { shell hostname } compare_strings $HOSTNAME
  
      # The command should return the output of the local OS's 'hostname'
      # command.
*** /animal/build/dce1.1/src/./test/functional/admin/dcecp/ts/secval/secval_cleanup.tcl	Tue Dec 13 11:11:39 1994
--- ./test/functional/admin/dcecp/ts/secval/secval_cleanup.tcl	Tue May  2 12:10:04 1995
***************
*** 8,20 ****
  # 
  # HISTORY
  # $Log:	c013116,v $
# Revision 1.1  95/09/11  15:54:39  root
# new CR
# 
! # Revision 2.1  1994/12/13  16:09:16  devrcs
! # OSF DCE 1.1 Source
  #
  # Revision 1.1.2.1  1994/09/28  21:46:04  melman
  # 	moved admin tests to test/functional
  # 	[1994/09/28  21:14:14  melman]
! #
  # Revision 1.1.2.2  1994/06/17  18:44:04  devsrc
  # 	cr10872 - fix copyright
  # 	[1994/06/17  18:29:40  devsrc]
--- 8,23 ----
  # 
  # HISTORY
  # $Log:	c013116,v $
# Revision 1.1  95/09/11  15:54:39  root
# new CR
# 
! # Revision 2.1.1.2  1995/05/02  16:10:02  tomj
! # 	Use explicit path for tet_setup.
  #
+ # Revision 2.1  1994/12/13  16:09:16  devrcs
+ # 	OSF DCE 1.1 Source
+ # 
  # Revision 1.1.2.1  1994/09/28  21:46:04  melman
  # 	moved admin tests to test/functional
  # 	[1994/09/28  21:14:14  melman]
! # 
  # Revision 1.1.2.2  1994/06/17  18:44:04  devsrc
  # 	cr10872 - fix copyright
  # 	[1994/06/17  18:29:40  devsrc]
***************
*** 41,49 ****
  	    
      # Delete acl entry user:cell_admin
      set rescode [catch \
! 		{exec tet_setup secval_cleanup.sh $DCP_HOSTNAME_THREE} result]
      if {$rescode != 0} {
! 	tet_infoline Command failed: exec tet_setup secval_cleanup.sh \
  	$DCP_HOSTNAME_THREE
  	tet_infoline Command returned: $result
  	tet_infoline Test aborted.
--- 44,52 ----
  	    
      # Delete acl entry user:cell_admin
      set rescode [catch \
! 		{exec $TET_ROOT/tools/tet_setup secval_cleanup.sh $DCP_HOSTNAME_THREE} result]
      if {$rescode != 0} {
! 	tet_infoline Command failed: exec $TET_ROOT/tools/tet_setup secval_cleanup.sh \
  	$DCP_HOSTNAME_THREE
  	tet_infoline Command returned: $result
  	tet_infoline Test aborted.
*** /animal/build/dce1.1/src/./test/functional/admin/dcecp/ts/secval/secval_setup.tcl	Tue Dec 13 11:11:43 1994
--- ./test/functional/admin/dcecp/ts/secval/secval_setup.tcl	Tue May  2 12:10:07 1995
***************
*** 8,20 ****
  # 
  # HISTORY
  # $Log:	c013116,v $
# Revision 1.1  95/09/11  15:54:39  root
# new CR
# 
! # Revision 2.1  1994/12/13  16:09:20  devrcs
! # OSF DCE 1.1 Source
  #
  # Revision 1.1.2.1  1994/09/28  21:46:12  melman
  # 	moved admin tests to test/functional
  # 	[1994/09/28  21:14:20  melman]
! #
  # Revision 1.1.2.2  1994/06/17  18:44:05  devsrc
  # 	cr10872 - fix copyright
  # 	[1994/06/17  18:29:44  devsrc]
--- 8,23 ----
  # 
  # HISTORY
  # $Log:	c013116,v $
# Revision 1.1  95/09/11  15:54:39  root
# new CR
# 
! # Revision 2.1.1.2  1995/05/02  16:10:05  tomj
! # 	Use explicit path for tet_setup.
  #
+ # Revision 2.1  1994/12/13  16:09:20  devrcs
+ # 	OSF DCE 1.1 Source
+ # 
  # Revision 1.1.2.1  1994/09/28  21:46:12  melman
  # 	moved admin tests to test/functional
  # 	[1994/09/28  21:14:20  melman]
! # 
  # Revision 1.1.2.2  1994/06/17  18:44:05  devsrc
  # 	cr10872 - fix copyright
  # 	[1994/06/17  18:29:44  devsrc]
***************
*** 41,49 ****
  		
      # Add acl entry user:cell_admin
      set rescode [catch \
! 		{exec tet_setup secval_setup.sh $DCP_HOSTNAME_THREE} result]
      if {$rescode != 0} {
! 	tet_infoline Command failed: exec tet_setup secval_setup.sh \
  						  $DCP_HOSTNAME_THREE
  	tet_infoline Command returned: $result
  	tet_infoline Test aborted.
--- 44,52 ----
  		
      # Add acl entry user:cell_admin
      set rescode [catch \
! 		{exec $TET_ROOT/tools/tet_setup secval_setup.sh $DCP_HOSTNAME_THREE} result]
      if {$rescode != 0} {
! 	tet_infoline Command failed: exec $TET_ROOT/tools/tet_setup secval_setup.sh \
  						  $DCP_HOSTNAME_THREE
  	tet_infoline Command returned: $result
  	tet_infoline Test aborted.
*** /animal/build/dce1.1/src/./test/functional/admin/dcecp/ts/secval/secval_status_P.tcl	Tue Dec 13 11:11:44 1994
--- ./test/functional/admin/dcecp/ts/secval/secval_status_P.tcl	Tue May  2 12:10:10 1995
***************
*** 8,20 ****
  # 
  # HISTORY
  # $Log:	c013116,v $
# Revision 1.1  95/09/11  15:54:39  root
# new CR
# 
! # Revision 2.1  1994/12/13  16:09:21  devrcs
! # OSF DCE 1.1 Source
  #
  # Revision 1.1.2.1  1994/09/28  21:46:15  melman
  # 	moved admin tests to test/functional
  # 	[1994/09/28  21:14:22  melman]
! #
  # Revision 1.1.2.1  1994/09/01  20:24:43  pwang
  # 	Initial implementation
  # 	[1994/09/01  20:19:56  pwang]
--- 8,23 ----
  # 
  # HISTORY
  # $Log:	c013116,v $
# Revision 1.1  95/09/11  15:54:39  root
# new CR
# 
! # Revision 2.1.1.2  1995/05/02  16:10:08  tomj
! # 	Turn secval back on after last test otherwise cell is hosed!
  #
+ # Revision 2.1  1994/12/13  16:09:21  devrcs
+ # 	OSF DCE 1.1 Source
+ # 
  # Revision 1.1.2.1  1994/09/28  21:46:15  melman
  # 	moved admin tests to test/functional
  # 	[1994/09/28  21:14:22  melman]
! # 
  # Revision 1.1.2.1  1994/09/01  20:24:43  pwang
  # 	Initial implementation
  # 	[1994/09/01  20:19:56  pwang]
***************
*** 124,129 ****
--- 127,133 ----
      } compare_strings {0 0}
  
      # Cleanup steps
+     catch {secval activate} donotcare
  }
  
  set iclist "ic1 ic2 ic3 ic4 ic5 "
*** /animal/build/dce1.1/src/./test/functional/admin/dcecp/ts/server/server_stop_P.tcl	Tue Dec 13 11:12:03 1994
--- ./test/functional/admin/dcecp/ts/server/server_stop_P.tcl	Tue May  2 12:10:13 1995
***************
*** 8,20 ****
  # 
  # HISTORY
  # $Log:	c013116,v $
# Revision 1.1  95/09/11  15:54:39  root
# new CR
# 
! # Revision 2.1  1994/12/13  16:09:40  devrcs
! # OSF DCE 1.1 Source
  #
  # Revision 1.1.2.1  1994/09/28  21:46:58  melman
  # 	moved admin tests to test/functional
  # 	[1994/09/28  21:14:51  melman]
! #
  # Revision 1.1.2.5  1994/09/20  22:12:22  pwang
  # 	Used match_string.
  # 	[1994/09/20  22:11:38  pwang]
--- 8,23 ----
  # 
  # HISTORY
  # $Log:	c013116,v $
# Revision 1.1  95/09/11  15:54:39  root
# new CR
# 
! # Revision 2.1.1.2  1995/05/02  16:10:11  tomj
! # 	Check for core files with pids for unixware2.0
  #
+ # Revision 2.1  1994/12/13  16:09:40  devrcs
+ # 	OSF DCE 1.1 Source
+ # 
  # Revision 1.1.2.1  1994/09/28  21:46:58  melman
  # 	moved admin tests to test/functional
  # 	[1994/09/28  21:14:51  melman]
! # 
  # Revision 1.1.2.5  1994/09/20  22:12:22  pwang
  # 	Used match_string.
  # 	[1994/09/20  22:11:38  pwang]
***************
*** 136,142 ****
      # Setup steps
      catch {server stop tserver -method hard} dontcare 
      if {[dcp_wrap {server start tserver}] != 0} {return;}
!     catch {exec rm -f $TET_ROOT/functional/admin/dcecp/ts/server/core} dontcare
  
      # Run the test
      test {
--- 139,145 ----
      # Setup steps
      catch {server stop tserver -method hard} dontcare 
      if {[dcp_wrap {server start tserver}] != 0} {return;}
!     catch {exec rm -f $TET_ROOT/functional/admin/dcecp/ts/server/core*} dontcare
  
      # Run the test
      test {
***************
*** 145,156 ****
  
      exec sleep 20
      test {
!       list [catch {exec ls $TET_ROOT/functional/admin/dcecp/ts/server/core} msg] $msg
!     } compare_strings "0 $TET_ROOT/functional/admin/dcecp/ts/server/core"
  
      # Cleanup steps
      catch {server stop tserver -method hard} dontcare 
!     catch {exec rm -f $TET_ROOT/functional/admin/dcecp/ts/server/core} dontcare
  }
  
  
--- 148,159 ----
  
      exec sleep 20
      test {
!       list [catch {exec ls $TET_ROOT/functional/admin/dcecp/ts/server/core*} msg] $msg
!     } compare_strings "0 $TET_ROOT/functional/admin/dcecp/ts/server/core*"
  
      # Cleanup steps
      catch {server stop tserver -method hard} dontcare 
!     catch {exec rm -f $TET_ROOT/functional/admin/dcecp/ts/server/core*} dontcare
  }
  
  
*** /animal/build/dce1.1/src/./test/functional/admin/dced/ts/api/dtapi_srvr_utils.c	Tue Dec 13 11:12:28 1994
--- ./test/functional/admin/dced/ts/api/dtapi_srvr_utils.c	Tue May  2 12:10:16 1995
***************
*** 10,22 ****
  /*
   * HISTORY
   * $Log:	c013116,v $
# Revision 1.1  95/09/11  15:54:39  root
# new CR
# 
!  * Revision 2.1  1994/12/13  16:10:05  devrcs
!  * OSF DCE 1.1 Source
   *
   * Revision 1.1.2.2  1994/09/30  22:55:36  baum
   * 	Fixed a number of test things (OT 12393)
   * 	[1994/09/30  22:54:24  baum]
!  *
   * Revision 1.1.2.1  1994/09/28  21:47:45  melman
   * 	moved admin tests to test/functional
   * 	[1994/09/28  21:15:24  melman]
--- 10,26 ----
  /*
   * HISTORY
   * $Log:	c013116,v $
# Revision 1.1  95/09/11  15:54:39  root
# new CR
# 
!  * Revision 2.1.1.2  1995/05/02  16:10:14  tomj
!  * 	Don't sleep, use pthread_delay_np.
!  * 	Pass correct status when server never listens.
   *
+  * Revision 2.1  1994/12/13  16:10:05  devrcs
+  * 	OSF DCE 1.1 Source
+  * 
   * Revision 1.1.2.2  1994/09/30  22:55:36  baum
   * 	Fixed a number of test things (OT 12393)
   * 	[1994/09/30  22:54:24  baum]
!  * 
   * Revision 1.1.2.1  1994/09/28  21:47:45  melman
   * 	moved admin tests to test/functional
   * 	[1994/09/28  21:15:24  melman]
***************
*** 47,52 ****
--- 51,57 ----
  
  #include <dtapi_impl.h>
  #include <dtapi_1_srvr.h>
+ #include <pthread.h>
  
  
  /*
***************
*** 67,72 ****
--- 72,78 ----
          rpc_binding_handle_t    rpc_binding;
          error_status_t          st,tmp_st;
  	int			i;
+ 	struct timespec		wait_time;
  
          rpc_string_binding_compose(DCED_SRVR_OBJ1,
                                     (unsigned_char_p_t)DCED_SRVR_PROTO,
***************
*** 83,89 ****
--- 89,101 ----
  #endif
                  return false;
          }
+ 	{
+ 	    char txt_msg[DCED_TEST_MSG_LEN];
  
+ 	    sprintf(txt_msg, "String binding is: %s", string_binding);
+ 	    tet_infoline(txt_msg);
+ 	}
+ 
          rpc_binding_from_string_binding(string_binding, &rpc_binding, &st);
          rpc_string_free(&string_binding, &tmp_st);
          if (st != error_status_ok)
***************
*** 102,117 ****
  #define NUM_TRIES 6
  #define SLEEP_INTERVAL 10
  
  	for ( i = 0; i < NUM_TRIES; i++ ) {
! 	  rpc_mgmt_is_server_listening ( rpc_binding, &tmp_st );
! 	  if ( tmp_st == error_status_ok )
! 	    break;
! 	  sleep ( SLEEP_INTERVAL );
  	}
  	if ( i == NUM_TRIES ) {
  	  
  	  tet_infoline("dced_test_server never started listening" );
! 	  dced_util_printerr(st);
  	  return false;
  	}
  	  
--- 114,132 ----
  #define NUM_TRIES 6
  #define SLEEP_INTERVAL 10
  
+ 	wait_time.tv_sec = SLEEP_INTERVAL;
+ 	wait_time.tv_nsec = 0;
  	for ( i = 0; i < NUM_TRIES; i++ ) {
! 	  if (rpc_mgmt_is_server_listening(rpc_binding, &tmp_st) &&
! 	     (tmp_st == error_status_ok) ) {
! 	      break;
! 	  }
! 	  pthread_delay_np ( &wait_time );
  	}
  	if ( i == NUM_TRIES ) {
  	  
  	  tet_infoline("dced_test_server never started listening" );
! 	  dced_util_printerr(tmp_st);
  	  return false;
  	}
  	  
*** /animal/build/dce1.1/src/./test/functional/admin/dced/ts/api/dtapi_utils.c	Tue Dec 13 11:12:30 1994
--- ./test/functional/admin/dced/ts/api/dtapi_utils.c	Tue May  2 12:10:21 1995
***************
*** 10,25 ****
  /*
   * HISTORY
   * $Log:	c013116,v $
# Revision 1.1  95/09/11  15:54:39  root
# new CR
# 
!  * Revision 2.1  1994/12/13  16:10:06  devrcs
!  * OSF DCE 1.1 Source
   *
   * Revision 1.1.2.2  1994/09/30  22:55:39  baum
   * 	Fixed a number of test things (OT 12393)
   * 	[1994/09/30  22:54:27  baum]
!  *
   * 	New secval tests plus the ability to run without TET (OT 11975)
   * 	[1994/09/30  21:14:44  baum]
!  *
   * Revision 1.1.2.1  1994/09/28  21:47:47  melman
   * 	moved admin tests to test/functional
   * 	[1994/09/28  21:15:25  melman]
--- 10,28 ----
  /*
   * HISTORY
   * $Log:	c013116,v $
# Revision 1.1  95/09/11  15:54:39  root
# new CR
# 
!  * Revision 2.1.1.2  1995/05/02  16:10:17  tomj
!  * 	In print_key, don't try to print password when it's des encrypted.
   *
+  * Revision 2.1  1994/12/13  16:10:06  devrcs
+  * 	OSF DCE 1.1 Source
+  * 
   * Revision 1.1.2.2  1994/09/30  22:55:39  baum
   * 	Fixed a number of test things (OT 12393)
   * 	[1994/09/30  22:54:27  baum]
!  * 
   * 	New secval tests plus the ability to run without TET (OT 11975)
   * 	[1994/09/30  21:14:44  baum]
!  * 
   * Revision 1.1.2.1  1994/09/28  21:47:47  melman
   * 	moved admin tests to test/functional
   * 	[1994/09/28  21:15:25  melman]
***************
*** 503,510 ****
--- 506,518 ----
  )
  {
  
+     if((key_ptr->passwd)->key.key_type == sec_passwd_plain) {
  	sprintf(txt_msg,"principal, version, passwd: %s %d %s\n",
  		key_ptr->principal, key_ptr->version, (key_ptr->passwd)->key.tagged_union.plain);
+     } else {
+ 	sprintf(txt_msg,"principal, version, passwd: %s %d %s\n",
+ 		key_ptr->principal, key_ptr->version, "<encrypted>");
+     }
  	tet_infoline(txt_msg);
  }
  
*** /animal/build/dce1.1/src/./test/

CR Number                     : 12981
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : migration test
Short Description             : Security migration test aborts 
with 'Fault invalid tag' exception.
Reported Date                 : 7/28/95
Found in Baseline             : 1.1wp
Found Date                    : 7/24/95
Severity                      : A
Priority                      : 1
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : migration-tc.c
Sensitivity                   : public

[7/28/95 public]

(from Tom Jordahl at Gradient)

In the file:
	src/test/functional/security/ts/client/migration/migration-tc.c,
sec_rgy_attr_update() is called with num_attrs==1, but the attrs array
is assigned to NULL.  There needs to be at least one element in the array.
Otherwise, the call tries to marshall the non-existent element and 
generates an 'Invalid tag' (the sec_attr_value_t is a union) exception.

Repeat by:
	Run the migration tests as shipped with the warranty patch
	and the sec_rgy_attr() test will die.  If you stack garbage
	it is correct.  This fix also solves the coredump problem with
	sec_rgy_attr_lookup_by_id().

Proposed Solution:
	Put something in the attrs array.



Diff:

***************
*** 8,17 ****
  /*
   * HISTORY
   * $Log:	c012981,v $
# Revision 1.1  95/07/28  13:42:41  root
# new CR
# 
   * Revision 1.1.2.1  1995/06/26  20:41:00  tom
   *    OSF DCE Warranty Patch code
   *    [1995/06/26  19:06:36  tom]
!  *
   * $EndLog$
   */
  /*
--- 8,22 ----
  /*
   * HISTORY
   * $Log:	c012981,v $
# Revision 1.1  95/07/28  13:42:41  root
# new CR
# 
+  * Revision 1.1.3.2  1995/07/24  16:49:56  tom
+  *    In sec_rgy_attr test, put something in the attrs array
+  *    so we don't get a 'Fault invalid tag' exception when
+  *    we call sec_rgy_attr_update().
+  *
   * Revision 1.1.2.1  1995/06/26  20:41:00  tom
   *    OSF DCE Warranty Patch code
   *    [1995/06/26  19:06:36  tom]
!  *
   * $EndLog$
   */
  /*
***************
*** 187,194 ****
                        num_ret,
                          num_attrs = 1;
      sec_attr_t                out_attrs[20],
!                         *attrs = NULL;
      sec_attr_cursor_t cursor;

      sec_rgy_attr_update(context, sec_rgy_domain_person, (unsigned_char_p_t)"root",
                        num_attrs, num_attrs, attrs, &num_ret, out_attrs, &num_left,
--- 192,203 ----
                        num_ret,
                          num_attrs = 1;
      sec_attr_t                out_attrs[20],
!                         attrs[20];
      sec_attr_cursor_t cursor;
+     unsigned32                status;
+
+     uuid_create(&attrs[0].attr_id, &status);
+     attrs[0].attr_value.attr_encoding = sec_attr_enc_void;

      sec_rgy_attr_update(context, sec_rgy_domain_person, (unsigned_char_p_t)"root",

!                             &cursor, num_attrs, 20, attrs, &num_ret, out_attrs,
                              &num_left, &st);
      CHECK_MIGRATE_RESULT(Msec_rgy_attr_lookup_by_id, true,
                         "Migration(sec_rgy_attr): sec_rgy_attr_lookup_by_id", &st);
--- 223,229 ----
       */

      sec_rgy_attr_lookup_by_id(context, sec_rgy_domain_person, (unsigned_char_p_t)"root",
!                             &cursor, num_attrs, num_attrs, attrs, &num_ret, out_attrs,
                              &num_left, &st);
      CHECK_MIGRATE_RESULT(Msec_rgy_attr_lookup_by_id, true,
                         "Migration(sec_rgy_attr): sec_rgy_attr_lookup_by_id", &st);



CR Number                     : 12937
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : acct_rename
Short Description             : acct_rename test script doesn't pass
Reported Date                 : 6/26/95
Found in Baseline             : 1.1wp
Found Date                    : 6/26/95
Severity                      : B
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[6/26/95 public]

acct_rename test script doesn't pass. The file 
src/test/security/api/control/acct_rename.tsh has the following in it:

test $TEST \
"2 account does not exist" \
$ACCT_RENAME_NOT_FOUND $sec_rgy_object_not_found

test $TEST \
"3 target account already exists" \
$ACCT_RENAME_NOT_FOUND $sec_rgy_name_exists

Test 3 should never pass, since it is doing exactly the
same test as test 2.

Repeat By:

        Run the security api acct_rename tests.

Proposed Solution:


Change the test file:

*** /dce/build/dce1.1/src/test/security/api/control//acct_rename.tsh    Mon Dec
12 23:08:27 1994
--- acct_rename.tsh     Mon Jun 19 16:40:19 1995
***************
*** 6,11 ****
--- 6,13 ----
  # src directory for the full copyright text.
  #
  # HISTORY
+ # Fix third test to actually test already exists and
+ # look for object exists error code.
  # $Log:	c012937,v $
# Revision 1.1  95/06/26  15:16:28  root
# new CR
# 
  # Revision 2.1  1994/12/13  04:06:23  devrcs
  # OSF DCE 1.1 Source
***************
*** 68,74 ****
 
  test $TEST \
  "3 target account already exists" \
! $ACCT_RENAME_NOT_FOUND $sec_rgy_name_exists
 
  # In dce 1.0 the only valid key_parts value is sec_rgy_acct_key_person.
  # No test of non-unique key parts will be conducted until this
--- 70,76 ----
 
  test $TEST \
  "3 target account already exists" \
! $ACCT_RENAME_ALREADY_EXISTS $sec_rgy_object_exists

  # In dce 1.0 the only valid key_parts value is sec_rgy_acct_key_person.
  # No test of non-unique key parts will be conducted until this



CR Number                     : 12936
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : other
S/W Ref Platform              : other
Component Name                : sec
Subcomponent Name             : grp_override
Short Description             : grp_override tests fails
Reported Date                 : 6/26/95
Found in Baseline             : 1.1wp
Found Date                    : 6/26/95
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[6/26/95 public]

Customer reported:

I am getting failures that are timing related on SVR4.

If I add a sleep(1) in between each test, I can duplicate the
OSF results, otherwise I get sparadic failures.

I believe the problem is sec_clientd(aka dced) checks the modification
time of the override file, and since this is in seconds, doesn't
refresh its cache if things happen too quickly (as they do in the test).

Note that sequence #23 fails both for me and in the OSF 1.1 test results.
I have not analyzed why this test fails.  I'll leave this to HP/OSF

Repeat By:

        Run grp_override test on a sufficiently fast machine.
        Sequence 19 (and possbily later tests) will fail.
        Sequence 23 will always fail.

Proposed Solution:

        Add a sleep or at least a second between each replacement
of the group override file.  This way the modification times are
certain to be different.

        This will not fix the failure for #23.



CR Number                     : 12935
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : grp_override
Short Description             : grp_override functional tests install in the wrong place
Reported Date                 : 6/26/95
Found in Baseline             : 1.1wp
Found Date                    : 6/26/95
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[6/26/95 public]

grp_override functional tests install in the wrong place.

Proposed Solution:

Fix the IDIRS:

*** /dce/build/dce1.1/src/test/functional/security/grp_override/Makefile
Tue Dec 13 00:03:25 1994
--- Makefile    Tue Jun 20 11:50:42 1995
***************
*** 25,31 ****
 
  ILIST         = ${DATAFILES}

! IDIR            = ${TET_ROOT}/security/
 
  SUBDIRS               = ts

--- 25,31 ----
 
  ILIST         = ${DATAFILES}

! IDIR            = ${TET_ROOT}/grp_override/
 
  SUBDIRS               = ts

*** /dce/build/dce1.1/src/test/functional/security/grp_override/ts/Makefile
Tue Dec 13 00:03:31 1994
--- Makefile    Tue Jun 20 11:52:07 1995
***************
*** 45,51 ****
 

  # Directory in which to install the files
! IDIR = /test/tet/functional/grp_override/
 
  grp_override_OFILES = \
                         grp_override.o
--- 45,51 ----
 

  # Directory in which to install the files
! IDIR = ${TET_ROOT}/grp_override/ts/
 
  grp_override_OFILES = \
                         grp_override.o



CR Number                     : 12891
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : admin
Short Description             : rep_ch_2_checklist test prematurely disables cds server
Reported Date                 : 5/26/95
Found in Baseline             : 1.1
Found Date                    : 5/26/95
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : test/systest/admin/cds/tests/rep_ch_2_checklist
Sensitivity                   : public

[5/26/95 public]

A support customer reports:

> The rep_ch_2_checklist disables the server then tries to
> clear the clearinghouse without the server present.  
> 
> cdscp> cdscp disable server
> cdscp> cdscp clear clearinghouse /.:/admintest2_ch
> Binding incomplete (no object ID and no endpoint) (dce / rpc)
> Binding incomplete (no object ID and no endpoint) (dce / rpc)
> Binding incomplete (no object ID and no endpoint) (dce / rpc)
> Binding incomplete (no object ID and no endpoint) (dce / rpc)

The suggested fix is to reverse the sequence of these commands:

>     *** /tmp/ci.10240..rep_ch_2_checklist.10272.1      Thu Mar  2 13:50:04 1995
>     --- /tmp/rep_ch_2_checklist.10272.2        Thu Mar  2 13:50:04 1995
>     ***************
>     *** 596,613 ****
>         >       Known Clearinghouses = /.../admin_cell/admintest2_ch
>       
>       - On admintest2 disable the admintest2_ch clearinghouse using the clear
>         clearinghouse command.
>       
>     -   cdscp disable server
>     - 
>     -   >  No Output Expected
>     -   
>         cdscp clear clearinghouse /.:/admintest2_ch
>       
>         >  No Output Expected
>       
>       - On admintest3 copy the admintest2_ch files locally from admintest2.
>       
>         cd /opt/dcelocal/var/directory/cds
>       
>         >  No Output Expected
>     --- 596,613 ----
>         >       Known Clearinghouses = /.../admin_cell/admintest2_ch
>       
>       - On admintest2 disable the admintest2_ch clearinghouse using the clear
>         clearinghouse command.
>       
>         cdscp clear clearinghouse /.:/admintest2_ch
>       
>         >  No Output Expected
>       
>     +   cdscp disable server     # hitm
>     + 
>     +   >  No Output Expected
>     +   
>       - On admintest3 copy the admintest2_ch files locally from admintest2.
>       
>         cd /opt/dcelocal/var/directory/cds
>       
>         >  No Output Expected

Curious that this was never noticed before--timing-sensitive, it would
appear.


[ 09/20/95 bhandaru ]

 This is also reported by Hal Soft. Systems. Customer Ticket # 22031
 I am including the report below

 
>
>
>
>                          DCE Problem Report
>                  =================================
>
>
>Submitter Information (Include Email address at miminum)
>- ---------------------
>
>Submitter Name:         Scott LoGiudice
>Organization:           HaL Software Systems
>Email Address:          scottl@hal.com
>Phone:                  (512) 834-9964 x 5019
>DCE License Number:     1352
>
>
>Hardware/Software Configuration
>- -------------------------------
>
>Offering and Version:   DCE 1.1
>Component (Module):     src/test/systest/admin/cds/tests/rep_ch_2_checklist
>Client Hardware:        Irrelevant
>Client Software:        Irrelevant
>Server Hardware:        Irrelevant
>Server Software:        Irrelevant
>Compiler:               Irrelevant
>
>Problem Description
>- -------------------
>
>Severity Level: Minor
>
>Date of First Occurrence: 9/20/95
>
>One Line Description:
>
>        Instructions to "cdscp disable server" prior to "cdscp clear clearinghouse" are wrong
>
>Full Description:
>
>        The instructions in the rep_ch_2_checklist to clear a clearinghouse
>        need to omit the "cdscp diable server" step. Here's the current
>        instruction segment in question:
>
>        - On admintest2 disable the admintest2_ch clearinghouse using the clear
>          clearinghouse command.
> 
>          cdscp disable server
> 
>          >  No Output Expected
> 
>          cdscp clear clearinghouse /.:/admintest2_ch
>
>          >  No Output Expected
>
>        THIS COMMAND WILL FAIL AS SHOWN BELOW UNLESS
>        THE "cdscp diable server" COMMAND WAS OMITTED.
>
>        root@wilma>$ cdscp clear clearinghouse /.:/wilma_ch
>        Binding incomplete (no object ID and no endpoint) (dce / rpc)
>        Binding incomplete (no object ID and no endpoint) (dce / rpc)
>        Binding incomplete (no object ID and no endpoint) (dce / rpc)
>        Binding incomplete (no object ID and no endpoint) (dce / rpc)
>        root@wilma>$
>
>Repeat By:
>
>        
>
>Proposed Solution:
>
>        Omit the "cdscp disable server" step in the test instructions 
>
> ------------------ Scott LoGiudice (512) 834-9962 x5019 ----------------------



CR Number                     : 12888
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dlgcfg001
Short Description             : The dlgcfg001 systest should
use -update flag with rgy_edit
Reported Date                 : 5/26/95
Found in Baseline             : 1.1
Found Date                    : 5/26/95
Severity                      : D
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : dlgcfg001
Sensitivity                   : public

[5/26/95 public]

Reported by Tom Jordahl at Gradient:

dlgcfg001 is missing the -update switch to rgy_edit so if you have
a replica in your system test cell, the setup could fail if the
rgy_edit binds to a replica.

Proposed Solution:

use the variable already defined in the test:

replace

	rgy_edit <<EOF

with

	${RGY_EXEC} <<EOF



CR Number                     : 12780
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : gssapi test
Short Description             : Extra free's in test-gssapi.c
Reported Date                 : 1/26/95
Found in Baseline             : 1.1
Found Date                    : 1/26/95
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : test/security/api/gssapi/test-gssapi.c
Sensitivity                   : public

[1/26/95 public]
Free's showed up as errors when using sentinel.

diff -c test-gssapi.c fixed-test-gssapi.c 
*** test-gssapi.c       Thu Jan 26 11:14:18 1995
--- fixed-test-gssapi.c Thu Jan 26 11:15:34 1995
***************
*** 994,1000 ****
                    error_status);
            fflush(stderr);
        };
-       if (temp_c_ptr) free(temp_c_ptr);
  
        temp_c_ptr = NULL;
        fprintf(stdout, 
--- 994,999 ----
***************
*** 1011,1017 ****
            fflush(stderr);
            if (interactive) pause();
        };
-       if (temp_c_ptr) free(temp_c_ptr);



CR Number                     : 12752
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : 
Short Description             : bad grep test for server startup
Reported Date                 : 11/18/94
Found in Baseline             : 1.1
Found Date                    : 11/18/94
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : src/test/systest/security/sec.rgy.7/dcesergy
Sensitivity                   : public

[11/18/94 public]

Full Description:

in dcesecrgy, there is a loop to test for the existence of the server
process before continuing with the test. The logic of this test is flawed,
although in the general case, the server has already started, and there is
no neeed to delay and the test results are inconsequential. In the case
where server has not yet started, it is likely that the test will
erroneously conclude that the server is running, and proceed prematurely.
The basic problem is that the grep is likely to pick up the grep itself,
even though the server is not actually running

Proposed solution:

follow the grep bt a grep -v grep.

# These lines get secrgy_server's pid
  
!         until ( ps -ef |grep secrgy_server | grep -v grep> /dev/null )
          do

[11/18/94 public]
Alternative is to use ps -e, which will not pick up the grep command
itself.  This saves an extra grep.



CR Number                     : 12751
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : thr
Subcomponent Name             : 
Short Description             : check servers unable to detect late starting rios rservr
Reported Date                 : 11/18/94
Found in Baseline             : 1.1
Found Date                    : 11/18/94
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : ./test/systest/threads/dcethrpc
Sensitivity                   : public

[11/18/94 public]

Full Description:

the function check_servers does a preliminary check to see if a remote
server is running, and if it finds that it is not, then it enters a delay loop
where it tests for the server either until the server comes up, or the
delay time expires. In te case where the preliminary check does not find
the server active, I have found that in the case of a remote rs6000
machine, the test performed in the loop is not detecting a running server,
and thus always runs to timeout, and consequent error. The problem is that
the name of the process being looked for "thd_server" is truncated in the
output of the "ps -eal" command, and thus the "grep thd_server" never finds it.

$RSH_COMM $HOST "ps -ael | grep thd_server" | grep thd_server 1>/dev/null
2>&1

Note that the flags to the preliminary test are different, and don't result
in truncation.

${RSH_COMM} ${HOST} "ps -ef | grep thd_server" | grep thd_server | grep -v
grep 1>/dev/null 2>&1

Proposed Solution:

remove the -l from the ps flags used by the test in the delay loop.

$RSH_COMM $HOST "ps -ae | grep thd_server" | grep thd_server 1>/dev/null
2>&1



CR Number                     : 12750
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : rpc
Short Description             : dcerpcrun; bad call to free in server, results in SEGV
Reported Date                 : 11/18/94
Found in Baseline             : 1.1
Found Date                    : 11/18/94
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : ./test/systest/rpc/rpc.runtime.1/manager.c
Sensitivity                   : public

[11/18/94 public]

Full Description:

in dcerpcrun, there is a call to free in the server for a buffer which has
never been allocated, depending on how sensitive your memory mangement
system is to heap corruption, this may cause the server to SEGV.

Proposed solution:

remove the free.

***************
*** 498,504 ****
           if (j > MANAGER_ELEMENT_COUNT) break;
      }
      (*iop_struct->push)(iop_struct->state,(pt_struct *)manager_buffer,0);
!     free(manager_buffer);
      fflush(fp);
  CATCH_ALL
        RERAISE;
--- 498,507 ----
           if (j > MANAGER_ELEMENT_COUNT) break;
      }
      (*iop_struct->push)(iop_struct->state,(pt_struct *)manager_buffer,0);
! 
! /*  the manager buffer was not allocated, therefore it cannot be freed!
!     free(manager_buffer);
! */
      fflush(fp);
  CATCH_ALL
        RERAISE;



CR Number                     : 12749
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : 
Short Description             : delay; unitialized variable secrgy_client
Reported Date                 : 11/18/94
Found in Baseline             : 1.1
Found Date                    : 11/18/94
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : ./test/systest/security/sec.rgy.7/secrgy_client.c
Sensitivity                   : public

[11/18/94 public]


Full Description:

for the secrgy system test, the client makes a remote procedure call to
the server, passing in the rpc a value which the server uses (if non-zero)
as a timeout paramter to a clall to select. The value of delay is
esatablished
as an optional parameter of the client startup. If you do NOT specify delay
on the client startup (as does the secrgy system test), a value for delay 
obtained simply by taking the value occuring in storage at program startup.
In our case, the result was that a single iteration of the test apperared
to
run forever.

Proposed solution:

Initialize delay in the client.

--- 8,13 ----
***************
*** 181,187 ****
     sec_passwd_str_t     passwd;
     unsigned32         duration;
     unsigned32         add_number = 0;
!    unsigned32         delay;
     unsigned_char_p_t  protseq = ( unsigned_char_p_t ) NULL;
     unsigned_char_p_t  import_protseq;
     unsigned32         expire_tm, cur_tm, exc_exp;
--- 178,184 ----
     sec_passwd_str_t     passwd;
     unsigned32         duration;
     unsigned32         add_number = 0;
!    unsigned32         delay = 0;
     unsigned_char_p_t  protseq = ( unsigned_char_p_t ) NULL;
     unsigned_char_p_t  import_protseq;
     unsigned32         expire_tm, cur_tm, exc_exp;



CR Number                     : 12747
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : rpc
Short Description             : hostname resolved differently
Reported Date                 : 11/11/94
Found in Baseline             : 1.1b24
Found Date                    : 11/11/94
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
		src/test/systest/file/rpc/rpc.runtime.1/dcerpcrun
		src/test/systest/file/rpc/rpc.runtime.1/clientwrapper
Sensitivity                   : public

[11/11/94 public]

In the function checkHost in dcerpcrun, the list of client hosts is
being checked by rsh to that machine and using "uname -n" to extract
the hostname. However, in clientwrapper, the hostname is being resolved
by "hostname". If "uname -n" and "hostname" return different values
the test will either fail to run on a client (when "uname -n" is
different than the client hostname specified) or the timestamp file
created by clientwrapper with the command:

$RSHELL $SERVER -n "/bin/date \"+%M%S%n\" >$WORKDIR/client_$HOST.start &"

will not be found, since HOST is resolved by using hostname.

[11/11/94 public]
Everything should use "uname -n", that's the POSIX command.



CR Number                     : 12742
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : 
Short Description             : rpc.sec.2_runtest.sh syntax error
Reported Date                 : 11/7/94
Found in Baseline             : 1.1b24
Found Date                    : 11/7/94
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[11/7/94 public]

While running the rpc.sec.2 test a syntax error was encountered on
line 217 in rpc.sec.2_runtest.sh.

The incorrect line is:

 if ["$rs2_rt_local_os" = "SINIX-D" ]

this should be:

 if [ "$rs2_rt_local_os" = "SINIX-D" ]



CR Number                     : 12722
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : erarel001
Short Description             : erarel001 gets occasional failures w/ secd replica
Reported Date                 : 10/25/94
Found in Baseline             : 1.1b23
Found Date                    : 10/25/94
Severity                      : C
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[10/25/94 public]

The erarel001 test sometimes fails when run in a cell
with a security replica (other than the master).  The
reason for this is believed to be that the test will
use one 'dcecp -c' command to update the registry and
follow it immediately with another 'dcecp -c' command
to verify the update.  If the update has not propagated
from the master to the slave and the second dcecp command
binds to the slave then it won't get the expected results.
~
This usually just happens on 'deletes' as shown it TET log:
520|0 1 12970 9 44|ERROR: Attribute sestrneedleaneedle was not deleted from registry as expecte
din delete_attr
520|0 1 12970 9 45|Output of previous command:
520|0 1 12970 9 46|{sestrneedleaneedle sestrleneedleneedleorigval}

The test could be changed to always bind to the master.  Or further
investigation could be done into whether or not the update SHOULD
have reached the replicas in the time between the dcecp command.

Workaround for now is to only run it in a cell with a single secd running.
~



CR Number                     : 12701
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dced
Subcomponent Name             : 
Short Description             : dced srvrconf test fails
Reported Date                 : 10/21/94
Found in Baseline             : 1.1b22
Found Date                    : 10/21/94
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[10/21/94 public]

The following failures were found in the journal file:

...
520|0 1 18929 1 1|dced_server_create_1, Assertion 01(A):
520|0 1 18929 1 2|When a srvrconf dced binding handle is supplied to
520|0 1 18929 1 3|dced_server_create along with the server object,
520|0 1 18929 1 4|its entry will be created and the status is set to error_statu
s_ok.
520|0 1 18929 1 5|enter: dced_server_create
520|0 1 18929 1 6|leave: dced_server_create 289255630
520|0 1 18929 1 7|dced_server_create failed:
520|0 1 18929 1 8|dced_util_printerr: printing text for status = 289255630
520|0 1 18929 1 9|Cannot create object; already exists (dce / dhd)
220|0 1 1 14:21:21|FAIL


There are also several UNRESOLVED tet codes:

...
520|1 1 18930 1 1|dced_server_delete_1, Assertion 01(A):
520|1 1 18930 1 2|When a srvrconf dced binding handle is supplied to
520|1 1 18930 1 3|dced_server_delete along with the server object id,
520|1 1 18930 1 4|its entry will be deleted and the status is set to error_statu
s_ok.
520|1 1 18930 1 5|dced_server_create failed:
520|1 1 18930 1 6|dced_util_printerr: printing text for status = 289255630
520|1 1 18930 1 7|Cannot create object; already exists (dce / dhd)
220|1 1 2 14:21:24|UNRESOLVED
...
10|2 /ts/api/server_mod_attr 14:21:25|TC Start, scenario ref 133-1
15|2 1.10 3|TCM Start
520|2 0 18931 1 1|dced_server_create failed:
520|2 0 18931 1 2|dced_util_printerr: printing text for status = 289255630
520|2 0 18931 1 3|Cannot create object; already exists (dce / dhd)
400|2 1 1 14:21:27|IC Start
200|2 1 14:21:27|TP Start
520|2 1 18931 1 1|dced_server_modify_attributes_1, Assertion 01(A):
520|2 1 18931 1 2|When a srvrconf dced binding handle is supplied to
520|2 1 18931 1 3|dced_server_modify_attributes along with the server object,
520|2 1 18931 1 4|its entry will be created and the status is set to error_statu
s_ok.
220|2 1 2 14:21:28|UNRESOLVED
...
520|2 3 18931 1 1|dced_server_modify_attributes_3, Assertion 02(A):
520|2 3 18931 1 2|When a srvrconf dced binding handle is supplied to
520|2 3 18931 1 3|dced_server_modify_attributes along with a non-existant server
 object id,
520|2 3 18931 1 4|dced_s_not_found is returned.
220|2 3 2 14:21:28|UNRESOLVED

[10/20/94 public]
I can understand why this is giving you problems.

  1. Unlike the dcecp tests, the dced *require* you to be dce_logged'in as
     cell_admin
  2. They don't clean up well if they fail.  So, if they FAIL once, you're
     probably stuck until you do manual cleanup.  In the case of srvrconf,
     do a dcecp -c server cat and look for something with
     'dced_test_server' in the name.  If there, do a dcecp -c server del
     to get rid of it.  Then dce_login cell_admin and re-run.

[10/20/94 public]
I can see the "manual cleanup" as a workaround but not a permanent fix.
Why cannot we do a "could-be-wasted-cleanup" in IC setup procedure to
cleanup the possble mess left over by a possible failure?

[10/20/94/public]
We could and we should be I doubt this will be given UHYP status at this
point. I will ask Susan/mpt/sally about it.



CR Number                     : 12700
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : rpc
Subcomponent Name             : 
Short Description             : I18N eval/codeset conversion fails
Reported Date                 : 10/21/94
Found in Baseline             : 1.1b22
Found Date                    : 10/21/94
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[10/21/94 public]

The following error were found in the journal file:

...
10|2 /ts/cs_eval/cs_byte/method_fixed_cmir 12:44:20|TC Start, scenario ref 108-1
15|2 1.10 1|TCM Start
400|2 1 1 12:44:21|IC Start
200|2 1 12:44:21|TP Start
520|2 1 31377 1 1|test case (cs_byte client_method_fixed_cmir_array)
520|2 1 31377 1 2|PASSED rpc_ns_binding_import_begin()
520|2 1 31377 1 3|PASSED rpc_ns_import_ctx_add_eval()
520|2 1 31377 1 4|FAILED rpc_ns_binding_import_next()   result:   No more bindin
gs (dce / rpc)  expected:   Successful completion (dce / svc)
220|2 1 1 12:44:52|FAIL
...
10|7 /ts/cs_eval/cs_byte/method_conf 12:47:04|TC Start, scenario ref 113-1
15|7 1.10 1|TCM Start
400|7 1 1 12:47:05|IC Start
200|7 1 12:47:05|TP Start
520|7 1 31398 1 1|test case (cs_byte client_method_conf_array)
520|7 1 31398 1 2|PASSED rpc_ns_binding_import_begin()
520|7 1 31398 1 3|PASSED rpc_ns_import_ctx_add_eval()
520|7 1 31398 1 4|PASSED rpc_ns_binding_import_next()
520|7 1 31398 1 5|PASSED rpc_ns_binding_import_done()
520|7 1 31398 1 6|PASSED rpc_ep_resolve_binding()
520|7 1 31398 1 7|PASSED rpc_mgmt_is_server_listening()
520|7 1 31398 1 8|FAILED 382312502  MSG: Connection closed (dce / rpc)
520|7 1 31398 1 9|FAILED 382312514  MSG: Connection request rejected (dce / rpc)

520|7 1 31398 1 10|FAILED 382312514  MSG: Connection request rejected (dce / rpc
)
520|7 1 31398 1 11|FAILED 382312514  MSG: Connection request rejected (dce / rpc
)
520|7 1 31398 1 12|FAILED 382312514  MSG: Connection request rejected (dce / rpc
)
520|7 1 31398 1 13|FAILED rpc_mgmt_stop_server_listening()      result:   Connec
tion request rejected (dce / rpc)       expected:   Successful completion (dce /
 svc)
220|7 1 40 12:47:39|DCE_FAIL
510|7|ABORT on result code 40 "DCE_FAIL"
50||Result code action is Abort

[10/25/94 public]
Mariko, can you please work with Bob on these failures.



CR Number                     : 12698
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : dce_config waits on UID error
Reported Date                 : 10/21/94
Found in Baseline             : 1.1b22
Found Date                    : 10/21/94
Severity                      : B
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[10/21/94 public]

When running the gds functional tests the gdssetup_all test is hung.
Here is the process running from that session:

    root 17982 18459   0 17:05:40  pts/0  0:00 ksh /ufs/test/tet/functional/dire
ctory/gds/ts/gdssetup/gdssetup_all 
    root 18459  9996   0 14:34:38  pts/0  0:01 /dcetest/dcelocal/test/tet/bin/tc
c -e functional/directory/gds all 
    root 19164 20880   0 17:08:39  pts/0  0:01 gdscp -c x500obj bind -dirid 5 -d
sa /C=de/O=dbp/OU=dap11/CN=dsa/CN=dsa-m5; ?  x5
    root 19337 17982   0 17:05:48  pts/0  0:00 ksh /ufs/test/tet/functional/dire
ctory/gds/ts/gdssetup/gdssetup_all 
    root 20880 19337   0 17:05:49  pts/0  0:00 ksh lib/valid/begin.setup 

The tet_xres file in ts/gdssetup contains the following:

15|5 1.10 2|TCM Start
520|5 0 20810 1 1|GDSSETUP TEST START
400|5 1 1 17:05:47|IC Start
200|5 1 17:05:48|TP Start
520|5 1 20810 1 2|GDSSETUP: TEST CASE lib/valid/begin.setup


The following tests have already been run without any failures:

CACHE-ADMIN TEST
DSA ADMIN TEST
SHADOW TEST
SUBTREE_ADMIN TEST
SCHEME TEST

[10/25/94 public]
The bind seems to hang.
(
    root 19164 20880   0 17:08:39  pts/0  0:01 gdscp -c x500obj bind -dirid 5 -d
sa /C=de/O=dbp/OU=dap11/CN=dsa/CN=dsa-m5; ?  x5
)

Can you reproduce this? Could you send me the output of
"gdsdirinfo"? If any process is missing I'd need the logfile of
this process.

[10/25/94 public]
I was able to run the gdssetup test without the process hanging. I
reinstalled gds and then tried to run gds_sec. This has not proceeded past
the configuration stage. I believe the problem is related to the user id
in /etc/passwd. Here is the contents of /etc/dce_config.log:

...
lines deleted
...
D:         Executing: rm -f /usr/tmp/krb5kdc_rcache
V:         Creating /krb5/krb.conf file.
D:         Executing: echo c=ie/o=digital  > /krb5/krb.conf
D:         Executing: echo c=ie/o=digital dfswizard >> /krb5/krb.conf
V:         Adding kerberos5 entry to /etc/services.
V:         Ensuring dced is running.
DEBUG:     Executing: config_epmap()
S:****** Starting dced...
S:****** Initializing dced...
D:         Executing: dced -i || { err_exit "dced -i failed to start."; }
D:         Executing: dced -b || { err_exit "dced -b failed to start."; }
DEBUG:     Executing: modify_rcfile(dced)
V:         Successfully modified rcfile /etc/rc.dce for "dced"
S:****** The current highest UNIX ID for persons on this node is 32767.
WARNING: The current highest UNIX ID for persons on this node is close to or abo
ve the maximum value supported for this cell (32767).  The suggested starting po
int for UNIX ID's that are automatically generated by the Security Service is be
ing set to 100. You should be aware that this will probably conflict with UID's
currently in use on your node.  If you continue, you will have the option of set
ting the starting point to a value other than that suggested.  You may also use
any value less than 32767 now, and use the "rgy_edit> properties" command to rai
se the maximum id and reset the starting point after the initial Security Server
 is configured.
DEBUG:     Executing: x_exit()
V:         User query: Press <RETURN> to continue, CTRL-C to exit:


The /etc/passwd file on this machine is as follows:

# cat /etc/passwd
root:!:0:0::/:/bin/ksh
daemon:!:1:1::/etc:
bin:!:2:2::/bin:
sys:!:3:3::/usr/sys:
adm:!:4:4::/usr/adm:
uucp:!:5:5::/usr/lib/uucp:  
dce-ptgt:!:20:12::/:
dce-rgy:!:21:12::/:
guest:!:100:100::/usr/guest:
lpd:!:104:9::/:
tserver:!:163:12::/:
tclient:!:164:12::/:
pvtest:*:200:1:dcedfacl TESTER:/u/pvtest:/bin/ksh
tstmlr1:*:901:1:Test Mailer User 1:/tmp:/bin/ksh
tstmlr2:*:902:1:Test Mailer User 2:/tmp:/bin/ksh
tstmlr3:*:903:1:Test Mailer User 1:/tmp:/bin/ksh
tstmlr4:*:904:1:Test Mailer User 1:/tmp:/bin/ksh
testit:*:999:1:test loging:/u/testit:/bin/ksh -c /u/testit/.start
jean:!:1022:12::/:
felps:!:2679:1:Robert Felps:/u/felps:/bin/ksh
testor:*:2999:1:Test User for DFS:/u/testor:/bin/ksh
aclgu::32763:32765:Acl Test User:/tmp:/bin/sh
acluu::32764:32767:Acl Test User:/tmp:/bin/sh
acloou::32765:32767:Acl Test User:/tmp:/bin/sh
aclgou::32766:32766:Acl Test User:/tmp:/bin/sh
acluou::32767:32766:Acl Test User:/tmp:/bin/sh
nobody:!:4294967294:4294967294::/:
lhughes:!:1040:1:Liz Hughes:/home/lhughes:/bin/ksh


The problem appears to be with dce_config itself in that it cannot
handle an entry in the /etc/passwd which is greater than or equal to
32767. I am going to try to run this on another machine.

[10/25/94 public]
Re-assigning this to 'cfg' because this is clearly a problem with
dce_config.  To re-state the problem:

The GDS FVTs run dce_config in batch mode.  dce_config runs into a problem
with the UID and prompts the user to hit <return> or <ctrl-c>.
Unfortunately, in batch mode the prompt goes into /tmp/dce_config.log but
the script hangs waiting for keyboard input.

It appears to the GDS tester that the test has hung.  (In actuality, one
could simply hit return.)

The correct behaviour in batch mode would be for dce_config to abort.

[10/26/94 public]
The simple work around (for the time being) is to remove the entries
which (as dce_config said) are at or near 32767 from /etc/passwd.

Or you could set DEFAULT_MAX_ID to something higher than
the default 32767.  See dce_config_env for details.

Rich is correct that dce_config should probably abort in this case
The fix is to use 'err_exit' instead of 'x_exit'.
Err_exit will exit if the variable EXIT_ON_ERROR is set to 'y'.



CR Number                     : 12685
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : 
Short Description             : Audit systests need to be moved
Reported Date                 : 10/20/94
Found in Baseline             : 1.1
Found Date                    : 10/20/94
Severity                      : C
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[10/26/94 public]

Deferred to 1.2

[10/20/94 public]

Since the audit component is located under security,
the audit system tests should be moved under the security system tests too.



CR Number                     : 12683
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : 
Short Description             : sec gen_pwd errors
Reported Date                 : 10/20/94
Found in Baseline             : 1.1b22
Found Date                    : 10/20/94
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[10/20/94 public]

I found two major problems with this test:
1) It not built in the backing tree. Building it was not a problem, but
   no Makefile exists.
2) The file setup.ksh which is run by the test calls "attr_update".
   This program/script is not located in the build tree.

According to the TestSummary file this test has been run succesfully.
How is this possible?



CR Number                     : 12681
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : sec
Subcomponent Name             : 
Short Description             : sec gssapi test hangs
Reported Date                 : 10/20/94
Found in Baseline             : 1.1b22
Found Date                    : 10/20/94
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[10/20/94 public]

When running the gssapi test the following output appears in tet_xres
and the test case hangs indefinitely:

15|0 1.10 1|TCM Start
400|0 1 1 17:24:10|IC Start
200|0 1 17:24:10|TP Start
520|0 1 20804 1 1|Retrieving test-driver argument-list
520|0 1 20804 1 2|Parsing argument-list
520|0 1 20804 1 3|Invoking main test program
520|0 1 20804 1 4|GSSAPI tester started

[10/20/94 public]
This is how I execute the gssapi and the results are as follows:

1. Execute gss-test-setup.sh from ./gssapi/ts

# ./gss-test-setup.sh^M
Adding accounts for GSSAPI test: gss-test-1 & gss-test-2^M
Please supply the cell_admin password:^M
^M
^M
Adding principals...^M
Current site is: registry server at
/.../final_hp_cell/subsys/dce/sec/master ^M
Domain changed to: principal^M
bye.^M
Adding accounts...^M
Current site is: registry server at
/.../final_hp_cell/subsys/dce/sec/master ^M
Domain changed to: account^M
bye.^M
Adding keytable...^M
Current site is: registry server at
/.../final_hp_cell/subsys/dce/sec/master ^M
bye.^M
Setup phase completed^M

2. Invoke the tests by issuing the following command.
   /test/security/api/gssapi/test-gssapi -i -l -p gss-pw-1 gss-prin-1 gss-prin-2 gss-keytab

Here is the results script:
--------------------------

GSSAPI tester^M
^M
^M
Logging in as "gss-prin-1"...^M
Succesfully logged in as client.^M
Tests available:^M
^M
 1:  Error codes^M
 2:  Name Conversions^M
 3:  Server keytable registration^M
 4:  Credential establishment^M
 5:  Kerberos authentication^M
 6:  DCE authentication^M
 7:  Sign service^M
 8:  Seal service (non-encrypting)^M
 9:  Seal service (encrypting)^M
10:  PAC extraction routines (obsolete)^M
11:  Context deletion^M
12:  DCE Credential extraction^M
13:  DCE login-context extraction^M
14:  Delegation test 1: Refusing impersonation^M
15:  Delegation test 2: Refusing traced delegation^M
16:  Delegation test 3: Accepting impersonation^M
17:  Delegation test 4: Accepting traced delegation^M
18:  Delegation test 5: Constructing impersonation^M
19:  Misc routines^M
20:  Credential management^M
^M
Selected tests: <none>^M
Select test, 'A' to select all, 0 or 'S' to start:A^M
Selected tests: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 ^M
Select test, 'A' to select all, 0 or 'S' to start:s^M
^M
Performing following tests:^M
 1:  Error codes^M
 2:  Name Conversions^M
 3:  Server keytable registration^M
 4:  Credential establishment^M
 5:  Kerberos authentication^M
 6:  DCE authentication^M
 7:  Sign service^M
 8:  Seal service (non-encrypting)^M
 9:  Seal service (encrypting)^M
10:  PAC extraction routines (obsolete)^M
11:  Context deletion^M
12:  DCE Credential extraction^M
13:  DCE login-context extraction^M
14:  Delegation test 1: Refusing impersonation^M
15:  Delegation test 2: Refusing traced delegation^M
16:  Delegation test 3: Accepting impersonation^M
17:  Delegation test 4: Accepting traced delegation^M
18:  Delegation test 5: Constructing impersonation^M
19:  Misc routines^M
20:  Credential management^M
^M
===========================================================================^M
^M
1.  Error message routines^M
Checking default message availability via dce_msg_get_default_msg()^M
rpc_s_ok: ^M
Error 173CA011 retrieving RPC_S_OK error text^M
GSSDCE_S_MESSAGE_LATE: The token was valid, but a later token has already
been re
ceived.^M
Checking catalog message availability via dce_msg_get_cat_msg^M
rpc_s_ok: ^M
Error 173CA015 retrieving RPC_S_OK error text^M
GSSDCE_S_MESSAGE_LATE: ^M
Error 173CA015 retrieving GSSDCE_S_MESSAGE_LATE error text^M
Press return to continue...^M
Checking combined message availability via dce_msg_get_msg^M
rpc_s_ok: Unknown message number 0x00000000^M
Error 173CA011 retrieving RPC_S_OK error text^M
GSSDCE_S_MESSAGE_LATE: The token was valid, but a later token has already
been re
ceived.^M
Supplementary info bits...^M
Bit 00:^M
    Calling gss_display_status for bit code^M
    Returned from gss_display_status^M
   A response token is required from the peer application.^M
    Calling gss_release_buffer^M
    Returned from gss_release_buffer^M
Bit 01:^M
    Calling gss_display_status for bit code^M
    Returned from gss_display_status^M
   The token is a duplicate of one already received.^M
    Calling gss_release_buffer^M
    Returned from gss_release_buffer^M
Bit 02:^M
    Calling gss_display_status for bit code^M
    Returned from gss_display_status^M
   The token is old. A more recent token has already been received.^M
    Calling gss_release_buffer^M
    Returned from gss_release_buffer^M
Bit 03:^M
    Calling gss_display_status for bit code^M
    Returned from gss_display_status^M
   The token was received out of sequence.^M

    Calling gss_release_buffer^M
    Returned from gss_release_buffer^M
Bit 04:^M
Bit 11:^M
    Calling gss_display_status for bit code^M
    Returned from gss_display_status^M
   <No message>^M
Bit 12:^M
    Calling gss_display_status for bit code^M
    Returned from gss_display_status^M
   <No message>^M
Bit 13:^M
    Calling gss_display_status for bit code^M
    Returned from gss_display_status^M
   <No message>^M
Bit 14:^M
    Calling gss_display_status for bit code^M
    Returned from gss_display_status^M
   <No message>^M
Bit 15:^M
    Calling gss_display_status for bit code^M
    Returned from gss_display_status^M
   <No message>^M
Press return to continue...^M
^M
Named error codes:^M
GSS_S_BAD_MECH:^M
    Calling gss_display_status for code^M
   The specified authentication mechanism is unsupported.^M
GSS_S_BAD_NAME:^M
    Calling gss_display_status for code^M
   The name passed by the parameter was invalid.^M
GSS_S_BAD_NAMETYPE:^M
    Calling gss_display_status for code^M
   The name passed by the name parameter is unsupported.^M
GSS_S_BAD_BINDINGS:^M
    Calling gss_display_status for code^M
   The given channel bindings did not match those in the token.^M
GSS_S_BAD_STATUS:^M
    Calling gss_display_status for code^M
   The status value was invalid.^M
GSS_S_BAD_SIG:^M
    Calling gss_display_status for code^M
   The token's signature was incorrect.^M
GSS_S_NO_CRED:^M
    Calling gss_display_status for code^M
   No credentials were supplied.^M
GSS_S_NO_CONTEXT:^M
    Calling gss_display_status for code^M
   No security context has been established.^M
GSS_S_DEFECTIVE_TOKEN:^M
    Calling gss_display_status for code^M
   The token was invalid.^M
GSS_S_DEFECTIVE_CREDENTIAL:^M
    Calling gss_display_status for code^M
   The supplied credentials are invalid.^M
GSS_S_CREDENTIALS_EXPIRED:^M
    Calling gss_display_status for code^M
   The supplied credentials have expired.^M
GSS_S_CONTEXT_EXPIRED:^M
    Calling gss_display_status for code^M
   The security context has expired.^M
GSS_S_FAILURE:^M
    Calling gss_display_status for code^M
   The routine failed.^M
BAD_SIG+OLD_TOKEN:^M
    Calling gss_display_status for code^M
   The token's signature was incorrect.^M
    Calling gss_display_status for code^M
   The token is old. A more recent token has already been received.^M
^M
===========================================================================^M
^M
2.  Miscellaneous routine tests^M
2.2:  OID manipulation, set creation^M
    Calling GSSDCE_CREATE_EMPTY_OID_SET^M
    Returned from GSSDCE_CREATE_EMPTY_OID_SET^M
^M
    Calling GSSDCE_ADD_OID_SET_MEMBER^M
    Returned from GSSDCE_ADD_OID_SET_MEMBER^M
^M
    Calling GSSDCE_ADD_OID_SET_MEMBER^M
    Returned from GSSDCE_ADD_OID_SET_MEMBER^M
^M
Element 0: length=5, Addr=400cfec0^M
Element 1: length=4, Addr=400cfeb0^M
2.3:  OID manipulation, set interrogation 1^M
    Calling GSSDCE_TEST_OID_SET_MEMBER^M
    Returned from GSSDCE_TEST_OID_SET_MEMBER^M
^M
Element 0: length=5, Addr=400cfec0^M
Element 1: length=4, Addr=400cfeb0^M
2.4:  OID manipulation, set interrogation 2^M
    Calling GSSDCE_TEST_OID_SET_MEMBER^M
    Returned from GSSDCE_TEST_OID_SET_MEMBER^M
^M
Element 0: length=5, Addr=400cfec0^M
Element 1: length=4, Addr=400cfeb0^M
2.5:  OID manipulation, set interrogation 3^M
    Calling GSSDCE_TEST_OID_SET_MEMBER^M
    Returned from GSSDCE_TEST_OID_SET_MEMBER^M
^M
Element 0: length=5, Addr=400cfec0^M
Element 1: length=4, Addr=400cfeb0^M
2.6:  OID manipulation, set free^M
    Calling GSS_RELEASE_OID_SET^M
    Returned from GSS_RELEASE_OID_SET^M
2.7:  GSS_INDICATE_MECHS^M
    Calling GSS_INDICATE_MECHS^M
    Returned from GSS_INDICATE_MECHS^M
2.8:  GSS_INDICATE_MECHS, verifying results^M
    Calling GSSDCE_TEST_OID_SET_MEMBER^M
    Returned from GSSDCE_TEST_OID_SET_MEMBER^M
^M
    Calling GSSDCE_TEST_OID_SET_MEMBER^M
    Returned from GSSDCE_TEST_OID_SET_MEMBER^M
^M
    Calling GSSDCE_TEST_OID_SET_MEMBER^M
    Returned from GSSDCE_TEST_OID_SET_MEMBER^M
^M
2.9:  Releasing mech-set^M
    Calling GSS_RELEASE_OID_SET^M
    Returned from GSS_RELEASE_OID_SET^M
3.2:  GSS_Import_name for server name^M
   Converting server-name "gss-prin-2" to internal form^M
    Calling GSS_IMPORT_NAME^M
    Returned from GSS_IMPORT_NAME^M
^M
    Calling GSS_RELEASE_NAME^M
    Returned from GSS_RELEASE_NAME^M
^M
    Returned from GSS_RELEASE_NAME^M
^M
^M
===========================================================================^M
    Calling GSS_IMPORT_NAME^M
    Calling GSS_IMPORT_NAME^M
Registering server in table gss-keytab^M
    Calling GSSDCE_REGISTER_ACCEPTOR_IDENTITY^M
    Returned from GSSDCE_REGISTER_ACCEPTOR_IDENTITY^M
^M
^M
^M
4.  Kerberos tests^M
4.2:  GSS_Acquire_cred (as KRB server)^M
    Calling CREATE_EMPTY_OID_SET ^M
    Returned from CREATE_EMPTY_OID_SET^M
^M
    Calling ADD_OID_SET_MEMBER^M
    Returned from ADD_OID_SET_MEMBER^M
^M
    returned from GSS_ACQUIRE_CRED^M
Got cred handle 1^M
^M
    Calling GSS_RELEASE_OID_SET^M
    Returned from GSS_RELEASE_OID_SET^M
    Calling GSS_INQUIRE_CRED^M
    returned from GSS_INQUIRE_CRED^M
^M
    Calling GSS_DISPLAY_NAME^M
    Returned from GSS_DISPLAY_NAME^M
^M
   Server Name: "/.../final_hp_cell/gss-prin-2"^M
    Calling GSS_RELEASE_BUFFER^M
    Returned from GSS_RELEASE_BUFFER^M
^M
^M
^M
    Calling GSS_RELEASE_NAME^M
    Returned from GSS_RELEASE_NAME^M
^M
   Expiration (secs): 86399^M
   Mechanism count: 1^M
   Credential-type: ACCEPT^M
4.3:  GSS_Acquire_cred (as KRB client)^M
    Calling GSS_ACQUIRE_CRED^M
    returned from GSS_ACQUIRE_CRED^M
Got cred handle 2^M
^M
    Calling GSS_RELEASE_OID_SET^M
    Returned from GSS_RELEASE_OID_SET^M
^M
    Calling GSS_INQUIRE_CRED^M
    returned from GSS_INQUIRE_CRED^M
^M
    Calling GSS_DISPLAY_NAME^M
    Returned from GSS_DISPLAY_NAME^M
^M
    Calling GSS_RELEASE_NAME^M
    Returned from GSS_RELEASE_NAME^M
^M
   Client Name: "/.../final_hp_cell/gss-prin-1"^M
    Calling GSS_RELEASE_BUFFER^M
    Returned from GSS_RELEASE_BUFFER^M
^M
   Expiration (secs): 86399^M
   Mechanism count: 1^M
   Credential-type:BOTH^M
4.4:  Init_Sec_Context (KRB client)^M
    Calling GSS_INIT_SEC_CONTEXT^M
    returned from INIT_SEC_CONTEXT^M
^M
Got ctx handle 1^M
4.5:  Accept_Sec_Context (KRB server)^M
    Calling GSS_ACCEPT_SEC_CONTEXT^M
    returned from ACCEPT_SEC_CONTEXT^M
^M
    Calling GSS_RELEASE_BUFFER^M
    Returned from GSS_RELEASE_BUFFER^M
^M
Got ctx handle 2^M
^M
^M
       WARNING! Non-exportable GSSAPI!^M
^M
    Calling GSS_DISPLAY_NAME^M
    Returned from GSS_DISPLAY_NAME^M
^M
    Calling GSS_RELEASE_NAME^M
    Returned from GSS_RELEASE_NAME^M
^M
   Client Name: "/.../final_hp_cell/gss-prin-1"^M
    Calling GSS_RELEASE_BUFFER^M
    Returned from GSS_RELEASE_BUFFER^M
^M
Flags:^M
  Mutual^M
  Replay detection^M
  Out-of-sequence detection^M
  Confidentiality (NON-EXPORTABLE!)^M
  Integrity^M
4.6:  Init_Sec_Context (client, 2nd time)^M
    Calling GSS_INIT_SEC_CONTEXT^M
    returned from INIT_SEC_CONTEXT^M
Got ctx handle 1^M
^M
    Calling GSS_RELEASE_BUFFER^M
    Returned from GSS_RELEASE_BUFFER^M
^M
Flags:^M
  Mutual^M
  Replay detection^M
  Out-of-sequence detection^M
  Confidentiality^M
  Integrity^M
^M
^M
       WARNING! Non-exportable GSSAPI!^M
^M
    Calling GSS_RELEASE_OID_SET^M
^M
    Calling GSS_RELEASE_CRED (KRB server)^M
^M
    Calling GSS_RELEASE_CRED (KRB client)^M
^M
^M
===========================================================================^M
^M
5.  Credential establishment tests^M
5.2:  Establishing Kerberos mechanism credentials^M
    Calling CREATE_EMPTY_OID_SET ^M
    Returned from CREATE_EMPTY_OID_SET^M
^M
    Calling ADD_OID_SET_MEMBER^M
    Returned from ADD_OID_SET_MEMBER^M
^M
    Calling GSS_ACQUIRE_CRED (KRB server)^M
    returned from GSS_ACQUIRE_CRED (KRB server)^M
    Calling GSS_ACQUIRE_CRED (KRB client)^M
    returned from GSS_ACQUIRE_CRED (KRB client)^M
5.3:  GSS_Acquire_cred (as DCE server)^M
    Calling GSS_IMPORT_NAME^M
    Returned from GSS_IMPORT_NAME^M
^M
    Calling GSS_ACQUIRE_CRED^M
    returned from GSS_ACQUIRE_CRED^M
Got cred handle 5^M
^M
    Calling GSS_RELEASE_OID_SET^M
    Returned from GSS_RELEASE_OID_SET^M
    Calling GSS_INQUIRE_CRED^M
    returned from GSS_INQUIRE_CRED^M
^M
    Calling GSS_DISPLAY_NAME^M
    Returned from GSS_DISPLAY_NAME^M
^M
   Server Name: "/.../final_hp_cell/gss-prin-2"^M
    Calling GSS_RELEASE_BUFFER^M
    Returned from GSS_RELEASE_BUFFER^M
^M
    Calling GSS_RELEASE_NAME^M
    Returned from GSS_RELEASE_NAME^M
^M
   Expiration (secs): 86399^M
   Mechanism count: 2^M
   Credential-type: ACCEPT^M
^M
6.  DCE authentication tests^M
6.2:  GSS_Acquire_cred (as client)^M
    Calling GSS_ACQUIRE_CRED^M
    returned from GSS_ACQUIRE_CRED^M
Got cred handle 6^M
^M
    Calling GSS_RELEASE_OID_SET^M
    Returned from GSS_RELEASE_OID_SET^M
^M
    Calling GSS_INQUIRE_CRED^M
    returned from GSS_INQUIRE_CRED^M
^M
    Calling GSS_DISPLAY_NAME^M
    Returned from GSS_DISPLAY_NAME^M
^M
    Calling GSS_RELEASE_NAME^M
    Returned from GSS_RELEASE_NAME^M
^M
   Client Name: "/.../final_hp_cell/gss-prin-1"^M
    Calling GSS_RELEASE_BUFFER^M
    Returned from GSS_RELEASE_BUFFER^M
^M
   Expiration (secs): 86399^M
   Mechanism count: 1^M
   Credential-type:BOTH^M
6.3:  Init_Sec_Context (DCE client)^M
    Calling GSS_INIT_SEC_CONTEXT^M
    returned from INIT_SEC_CONTEXT^M
Got ctx handle 3^M
^M
6.4:  Accept_Sec_Context (DCE server)^M
    Calling GSS_ACCEPT_SEC_CONTEXT^M
    returned from ACCEPT_SEC_CONTEXT^M
^M
    Calling GSS_RELEASE_BUFFER^M
    Returned from GSS_RELEASE_BUFFER^M
^M
Got ctx handle 4^M
^M
^M
       WARNING! Non-exportable GSSAPI!^M
^M
    Calling GSS_DISPLAY_NAME^M
    Returned from GSS_DISPLAY_NAME^M
^M
    Calling GSS_RELEASE_NAME^M
    Returned from GSS_RELEASE_NAME^M
^M
   Client Name: "/.../final_hp_cell/gss-prin-1"^M
    Calling GSS_RELEASE_BUFFER^M
    Returned from GSS_RELEASE_BUFFER^M
^M
Flags:^M
  Mutual^M
  Replay detection^M
  Out-of-sequence detection^M
  Confidentiality^M
  Integrity^M
6.5:  Init_Sec_Context (client, 2nd time)^M

    Calling GSS_INIT_SEC_CONTEXT^M
    returned from INIT_SEC_CONTEXT^M
^M
    Calling GSS_RELEASE_BUFFER^M
    Returned from GSS_RELEASE_BUFFER^M
^M
Got ctx handle 3^M
Flags:^M
  Mutual^M
  Replay detection^M
  Out-of-sequence detection^M
  Confidentiality^M
  Integrity^M
^M
^M
       WARNING! Non-exportable GSSAPI!^M
^M
^M
===========================================================================^M
^M
7.  GSS_SIGN (integrity protection)^M
    Calling GSS_SIGN for client packet 1^M
    returned from GSS_SIGN^M
^M
    Calling GSS_SIGN for client packet 2^M
    returned from GSS_SIGN^M
    Calling GSS_SIGN for client packet 3^M
    returned from GSS_SIGN^M
^M
    Calling server GSS_VERIFY with client message 1^M
    returned from GSS_VERIFY^M
^M
    Calling server GSS_VERIFY with client message 1 again^M
    returned from GSS_VERIFY^M
^M
    Calling client GSS_VERIFY with client message 1 ^M
1994-10-19-11:41:26.532-04:00I----- PID#21983 ERROR gss protection gssapi.c
7588
0x7affb2e8^M
Sequence number invalid in decode_message_header^M
1994-10-19-11:41:26.757-04:00I----- PID#21983 ERROR gss protection gssapi.c
7601
0x7affb2e8^M
Detected reflected token in decode_message_header^M
1994-10-19-11:41:26.842-04:00I----- PID#21983 ERROR gss protection gssapi.c
8096
0x7affb2e8^M
Decode_message_header failed in gss_verify (1286203c)^M
    returned from GSS_VERIFY^M
^M
    Calling server GSS_VERIFY with client token 1, bad data^M
1994-10-19-11:41:27.007-04:00I----- PID#21983 ERROR gss protection gssapi.c
8231
0x7affb2e8^M
The token signature was incorrect^M
    returned from GSS_VERIFY^M
^M
    Calling server GSS_VERIFY with client token 3^M
    returned from GSS_VERIFY^M
^M
    Calling server GSS_VERIFY with client token 2^M
    returned from GSS_VERIFY^M
^M
    Calling server GSS_VERIFY with client token 3 again^M
    returned from GSS_VERIFY^M
^M
    Calling server GSS_VERIFY with client token 2 again^M
    returned from GSS_VERIFY^M
^M
    Calling GSS_RELEASE_BUFFER for message 1^M
    Returned from GSS_RELEASE_BUFFER^M
^M
    Calling GSS_RELEASE_BUFFER for message 2^M
    Returned from GSS_RELEASE_BUFFER^M
^M
    Calling GSS_RELEASE_BUFFER for message 3^M
    Returned from GSS_RELEASE_BUFFER^M
^M
^M
===========================================================================^M
^M
8.  GSS_SEAL (integrity protection)^M
    Calling GSS_SEAL for client packet 4^M
    returned from GSS_SEAL^M
^M
    Calling GSS_SEAL for client packet 5^M
    returned from GSS_SEAL^M
^M
    Calling GSS_SEAL for client packet 6^M
    returned from GSS_SEAL^M
^M
    Calling server GSS_UNSEAL with client packet 4^M
    returned from GSS_UNSEAL^M
^M
    Calling GSS_RELEASE_BUFFER^M
    Returned from GSS_RELEASE_BUFFER^M
    Calling server GSS_UNSEAL with client message 1 again^M
    returned from GSS_UNSEAL^M
^M
    Calling GSS_RELEASE_BUFFER^M
    Returned from GSS_RELEASE_BUFFER^M
    Calling server GSS_UNSEAL with client packet 6^M
    returned from GSS_UNSEAL^M
^M
    Calling GSS_RELEASE_BUFFER^M
    Returned from GSS_RELEASE_BUFFER^M
    Calling server GSS_UNSEAL with client packet 5^M
    returned from GSS_UNSEAL^M
^M
    Calling GSS_RELEASE_BUFFER^M
    Returned from GSS_RELEASE_BUFFER^M
    Calling server GSS_UNSEAL with client packet 6^M
    returned from GSS_UNSEAL^M
^M
    Calling GSS_RELEASE_BUFFER^M
    Returned from GSS_RELEASE_BUFFER^M
    Calling server GSS_UNSEAL with client token 2 again^M
    returned from GSS_UNSEAL^M
^M
    Calling GSS_RELEASE_BUFFER^M
    Returned from GSS_RELEASE_BUFFER^M
    Calling GSS_RELEASE_BUFFER for message 1^M
    Returned from GSS_RELEASE_BUFFER^M
^M
    Calling GSS_RELEASE_BUFFER for message 2^M
    Returned from GSS_RELEASE_BUFFER^M
^M
    Calling GSS_RELEASE_BUFFER for message 3^M
    Returned from GSS_RELEASE_BUFFER^M
^M
^M
===========================================================================^M
^M
9.  GSS_SEAL (confidentiality protection)^M
    Calling GSS_SEAL for client packet 4^M
    returned from GSS_SEAL^M
^M
    Calling GSS_SEAL for client packet 5^M
    returned from GSS_SEAL^M
^M
    Calling GSS_SEAL for client packet 6^M
    returned from GSS_SEAL^M
^M
    Calling server GSS_UNSEAL with client message 1^M
    returned from GSS_UNSEAL^M
^M
    Calling GSS_RELEASE_BUFFER^M
    Returned from GSS_RELEASE_BUFFER^M
    Calling server GSS_UNSEAL with client message 1 again^M
    returned from GSS_UNSEAL^M
^M
    Calling GSS_RELEASE_BUFFER^M
    Returned from GSS_RELEASE_BUFFER^M
    Calling server GSS_UNSEAL with client token 3^M
    returned from GSS_UNSEAL^M
^M
    Calling GSS_RELEASE_BUFFER^M
    Returned from GSS_RELEASE_BUFFER^M
    Calling server GSS_UNSEAL with client token 2^M
    returned from GSS_UNSEAL^M
^M
    Calling GSS_RELEASE_BUFFER^M
    Returned from GSS_RELEASE_BUFFER^M
    Calling server GSS_UNSEAL with client token 3 again^M
    returned from GSS_UNSEAL^M
^M
    Calling GSS_RELEASE_BUFFER^M
    Returned from GSS_RELEASE_BUFFER^M
    Calling server GSS_UNSEAL with client token 2 again^M
    returned from GSS_UNSEAL^M
^M
    Calling GSS_RELEASE_BUFFER^M
    Returned from GSS_RELEASE_BUFFER^M
    Calling GSS_RELEASE_BUFFER for message 1^M
    Returned from GSS_RELEASE_BUFFER^M
^M
    Calling GSS_RELEASE_BUFFER for message 2^M
    Returned from GSS_RELEASE_BUFFER^M
^M
    Calling GSS_RELEASE_BUFFER for message 3^M
    Returned from GSS_RELEASE_BUFFER^M
^M
^M
10.  PAC extraction^M
^M
^M
^M
11.  DCE credentials extraction^M
    Calling gssdce_extract_creds_from_sec_context^M
    Returned from gssdce_extract_creds_from_sec_context^M
^M
    Verifying returned creds by calling sec_cred_get_initiator^M
    Returned from sec_cred_get_initiator^M
    Calling sec_cred_iniatialize_attr_cursor^M
    Returned from sec_cred_iniatialize_attr_cursor^M
    Calling sec_cred_get_extended_attrs^M
    Returned from sec_cred_get_extended_attrs^M
sec_cred_get_extended_attrs failed on GSSAPI-derived authz_cred_handle^M
Return status: 1712212E^M
Message: no more entries available^M
This error is expected, and does not cause a test failure^M
^M
12.  Extraction of login-context from credential^M
    Calling gssdce_cred_to_login_context^M
    Returned from gssdce_cred_to_login_context^M
^M
^M
13.  Delegation functional test 1: Refusal of offered impersonation^M
    Calling gssdce_login_context_to_cred^M
    Returned from login_context_to_cred^M
^M
    Calling GSS_INIT_SEC_CONTEXT^M
    returned from INIT_SEC_CONTEXT^M
Got ctx handle 5^M
^M
    Calling GSS_ACCEPT_SEC_CONTEXT^M
    returned from ACCEPT_SEC_CONTEXT^M
^M
    Calling GSS_RELEASE_BUFFER for token.1^M
    Returned from GSS_RELEASE_BUFFER^M
^M
Got ctx handle 6^M
^M
^M
       WARNING! Non-exportable GSSAPI!^M
^M
    Calling GSS_DISPLAY_NAME^M

    Returned from GSS_DISPLAY_NAME^M
^M
    Calling GSS_RELEASE_NAME^M
    Returned from GSS_RELEASE_NAME^M
^M
   Client Name: "/.../final_hp_cell/gss-prin-1"^M
    Calling GSS_RELEASE_BUFFER^M
    Returned from GSS_RELEASE_BUFFER^M
^M
Flags:^M
  Mutual^M
  Replay detection^M
  Out-of-sequence detection^M
  Confidentiality^M
  Integrity^M
    Calling GSS_INIT_SEC_CONTEXT again^M
    returned from INIT_SEC_CONTEXT^M
^M
    Calling GSS_RELEASE_BUFFER for token.2^M
    Returned from GSS_RELEASE_BUFFER^M
^M
Got ctx handle 5^M
Flags:^M
  Mutual^M
  Replay detection^M
  Out-of-sequence detection^M
  Confidentiality^M
  Integrity^M
^M
^M
       WARNING! Non-exportable GSSAPI!^M
^M
^M
^M
    Returned from GSS_RELEASE_BUFFER^M
^M
^M
14.  Delegation functional test 2: Refusal of offered traced delegation^M
    Calling gssdce_login_context_to_cred^M
    Returned from login_context_to_cred^M
^M
    Calling GSS_INIT_SEC_CONTEXT^M
    returned from INIT_SEC_CONTEXT^M
Got ctx handle 7^M
^M
    Calling GSS_ACCEPT_SEC_CONTEXT^M
    returned from ACCEPT_SEC_CONTEXT^M
^M
    Calling GSS_RELEASE_BUFFER for token.1^M
    Returned from GSS_RELEASE_BUFFER^M
^M
Got ctx handle 8^M
^M
^M
       WARNING! Non-exportable GSSAPI!^M
^M
    Calling GSS_DISPLAY_NAME^M
    Returned from GSS_DISPLAY_NAME^M
^M
    Calling GSS_RELEASE_NAME^M
    Returned from GSS_RELEASE_NAME^M
^M
   Client Name: "/.../final_hp_cell/gss-prin-1"^M
    Calling GSS_RELEASE_BUFFER^M
    Returned from GSS_RELEASE_BUFFER^M
^M
Flags:^M
  Mutual^M
  Replay detection^M
  Out-of-sequence detection^M
  Confidentiality^M
  Integrity^M
    Calling GSS_INIT_SEC_CONTEXT again^M
    returned from INIT_SEC_CONTEXT^M
^M
    Calling GSS_RELEASE_BUFFER for token.2^M
    Returned from GSS_RELEASE_BUFFER^M
^M
Got ctx handle 7^M
Flags:^M
  Mutual^M
  Replay detection^M
  Out-of-sequence detection^M
  Confidentiality^M
  Integrity^M
^M
^M
      WARNING! Non-exportable GSSAPI!^M
^M
^M
^M
    Returned from GSS_RELEASE_BUFFER^M
^M
^M
15.  Delegation functional test 3: Acceptance of offered impersonation^M
    Calling gssdce_login_context_to_cred^M
    Returned from login_context_to_cred^M
^M
    Calling GSS_INIT_SEC_CONTEXT^M
    returned from INIT_SEC_CONTEXT^M
Got ctx handle 9^M
^M
    Calling GSS_ACCEPT_SEC_CONTEXT^M
    returned from ACCEPT_SEC_CONTEXT^M
^M
    Calling GSS_RELEASE_BUFFER for token.1^M
    Returned from GSS_RELEASE_BUFFER^M
^M
Got ctx handle 10^M
^M
^M
       WARNING! Non-exportable GSSAPI!^M
^M
Delegation occurred as requested^M
A delegated credential (10) was returned as expected^M
    Calling GSS_DISPLAY_NAME^M
    Returned from GSS_DISPLAY_NAME^M
^M
    Calling GSS_RELEASE_NAME^M
    Returned from GSS_RELEASE_NAME^M
^M
   Client Name: "/.../final_hp_cell/gss-prin-1"^M
    Calling GSS_RELEASE_BUFFER^M
    Returned from GSS_RELEASE_BUFFER^M
^M
Flags:^M
  Delegation^M
  Mutual^M
  Replay detection^M
  Out-of-sequence detection^M
  Confidentiality^M
  Integrity^M
    Calling GSS_INIT_SEC_CONTEXT again^M
    returned from INIT_SEC_CONTEXT^M
^M
    Calling GSS_RELEASE_BUFFER for token.2^M
    Returned from GSS_RELEASE_BUFFER^M
^M
Got ctx handle 9^M
Flags:^M
  Delegation^M
  Mutual^M
  Replay detection^M

  Out-of-sequence detection^M
  Confidentiality^M
  Integrity^M
^M
^M
       WARNING! Non-exportable GSSAPI!^M
^M
^M
^M
    Returned from GSS_RELEASE_BUFFER^M
^M
    Calling GSS_RELEASE_CRED (delegated credential)^M
^M
^M
16.  Delegation functional test 4: Acceptance of offered traced
delegation^M
    Calling gssdce_login_context_to_cred^M
    Returned from login_context_to_cred^M
^M
    Calling GSS_INIT_SEC_CONTEXT^M
    returned from INIT_SEC_CONTEXT^M
Got ctx handle 11^M
^M
    Calling GSS_ACCEPT_SEC_CONTEXT^M
    returned from ACCEPT_SEC_CONTEXT^M
^M
    Calling GSS_RELEASE_BUFFER for token.1^M
    Returned from GSS_RELEASE_BUFFER^M
^M
Got ctx handle 12^M
^M
^M
       WARNING! Non-exportable GSSAPI!^M
^M
Delegation occurred as requested^M
A delegated credential (12) was returned as expected^M
    Calling GSS_DISPLAY_NAME^M
    Returned from GSS_DISPLAY_NAME^M
^M
    Calling GSS_RELEASE_NAME^M
    Returned from GSS_RELEASE_NAME^M
^M
   Client Name: "/.../final_hp_cell/gss-prin-1"^M
    Calling GSS_RELEASE_BUFFER^M
    Returned from GSS_RELEASE_BUFFER^M
^M
Flags:^M
  Delegation^M
  Mutual^M
  Replay detection^M
  Out-of-sequence detection^M
  Confidentiality^M
  Integrity^M
    Calling GSS_INIT_SEC_CONTEXT again^M
    returned from INIT_SEC_CONTEXT^M
^M
    Calling GSS_RELEASE_BUFFER for token.2^M
    Returned from GSS_RELEASE_BUFFER^M
^M
Got ctx handle 11^M
Flags:^M
  Delegation^M
  Mutual^M
  Replay detection^M

  Out-of-sequence detection^M
  Confidentiality^M
  Integrity^M
^M
^M
       WARNING! Non-exportable GSSAPI!^M
^M
^M
^M
    Returned from GSS_RELEASE_BUFFER^M
^M
    Calling GSS_RELEASE_CRED (delegated credential)^M
^M
^M
17.  Delegation functional test 5: Initiation of impersonation^M
    Calling GSS_INIT_SEC_CONTEXT^M
    returned from INIT_SEC_CONTEXT^M
Got ctx handle 13^M
^M
    Calling GSS_ACCEPT_SEC_CONTEXT^M
    returned from ACCEPT_SEC_CONTEXT^M
^M
    Calling GSS_RELEASE_BUFFER for token.1^M
    Returned from GSS_RELEASE_BUFFER^M
^M
Got ctx handle 14^M
^M
^M
       WARNING! Non-exportable GSSAPI!^M
^M
Delegation occurred as requested^M
A delegated credential (13) was returned as expected^M
    Calling GSS_DISPLAY_NAME^M
    Returned from GSS_DISPLAY_NAME^M
^M
    Calling GSS_RELEASE_NAME^M
    Returned from GSS_RELEASE_NAME^M
^M
   Client Name: "/.../final_hp_cell/gss-prin-1"^M
    Calling GSS_RELEASE_BUFFER^M
    Returned from GSS_RELEASE_BUFFER^M
^M
Flags:^M
  Delegation^M
  Mutual^M
  Replay detection^M
  Out-of-sequence detection^M
  Confidentiality^M
  Integrity^M
    Calling GSS_INIT_SEC_CONTEXT again^M
    returned from INIT_SEC_CONTEXT^M
^M
    Calling GSS_RELEASE_BUFFER for token.2^M
    Returned from GSS_RELEASE_BUFFER^M
^M
Got ctx handle 13^M
Flags:^M
  Delegation^M
  Mutual^M
  Replay detection^M
  Out-of-sequence detection^M
  Confidentiality^M
  Integrity^M
^M
^M
       WARNING! Non-exportable GSSAPI!^M
^M
^M
^M
    Returned from GSS_RELEASE_BUFFER^M
^M
    Calling GSS_RELEASE_CRED (delegated credential)^M
^M
^M
18.  Context deletion^M
^M
^M
    Returned from GSS_RELEASE_BUFFER^M
^M
^M
19.  Credential management^M
19.2:  Creating a BOTH-mode credential from the keytable^M
    Calling GSS_ACQUIRE_CRED^M
    returned from GSS_ACQUIRE_CRED^M
Got cred handle 14^M
^M
    Calling GSS_RELEASE_OID_SET^M
    Returned from GSS_RELEASE_OID_SET^M
    Calling GSS_INQUIRE_CRED^M
    returned from GSS_INQUIRE_CRED^M
^M
    Calling GSS_DISPLAY_NAME^M
    Returned from GSS_DISPLAY_NAME^M
^M
   Server Name: "/.../final_hp_cell/gss-prin-2"^M
    Calling GSS_RELEASE_BUFFER^M
    Returned from GSS_RELEASE_BUFFER^M
^M
    Calling GSS_RELEASE_NAME^M
    Returned from GSS_RELEASE_NAME^M
^M
   Expiration (secs): 86399^M
   Mechanism count: 2^M
   Credential-type:BOTH^M
    Calling GSS_RELEASE_OID_SET^M
    Returned from GSS_RELEASE_OID_SET^M
19.3:  Extracting login-context from new credential^M
    Calling gssdce_cred_to_login_context^M
    Returned from gssdce_cred_to_login_context^M
^M
Got context 401d3c88^M
19.4:  Verifying newly-extracted login-context^M
>>>Checking login-context 401d3c88^M
    Calling sec_login_get_expiration^M
    Returned from sec_login_get_expiration^M
    Calling sec_login_get_groups^M
    Returned from sec_login_get_groups^M
>>>Exp: 782617329^M
>>>num_groups: 1^M
19.5:  Releasing credential...^M
    Calling gss_release_cred^M
    Returned from gss_release_cred^M
^M
19.6:  Verifying login-context again...^M
>>>Checking login-context 401d3c88^M
    Calling sec_login_get_expiration^M
    Returned from sec_login_get_expiration^M
    Calling sec_login_get_groups^M
    Returned from sec_login_get_groups^M
>>>Exp: 782617329^M
>>>num_groups: 1^M
19.7:  Deleting extracted context^M
Purging login context 401d3c88^M
    Calling sec_login_purge_context^M
    Returned from sec_login_purge_context^M
19.8:  Creating another BOTH-mode credential from the keytable^M
    Calling GSS_ACQUIRE_CRED^M
    returned from GSS_ACQUIRE_CRED^M
Got cred handle 15^M
^M
    Calling GSS_RELEASE_OID_SET^M
    Returned from GSS_RELEASE_OID_SET^M
    Calling GSS_INQUIRE_CRED^M
    returned from GSS_INQUIRE_CRED^M
^M
    Calling GSS_DISPLAY_NAME^M
    Returned from GSS_DISPLAY_NAME^M
^M
   Server Name: "/.../final_hp_cell/gss-prin-2"^M
    Calling GSS_RELEASE_BUFFER^M
    Returned from GSS_RELEASE_BUFFER^M
^M
    Calling GSS_RELEASE_NAME^M
    Returned from GSS_RELEASE_NAME^M
^M
   Expiration (secs): 86399^M
   Mechanism count: 2^M
   Credential-type:BOTH^M
    Calling GSS_RELEASE_OID_SET^M
    Returned from GSS_RELEASE_OID_SET^M
19.9:  Extracting login-context from new credential^M
    Calling gssdce_cred_to_login_context^M
    Returned from gssdce_cred_to_login_context^M
^M
19.10:  Verifying newly-extracted login-context^M
>>>Checking login-context 401d4558^M
    Calling sec_login_get_expiration^M
    Returned from sec_login_get_expiration^M
    Calling sec_login_get_groups^M
    Returned from sec_login_get_groups^M
>>>Exp: 782617332^M
>>>num_groups: 1^M
19.11:  Setting cred GSSAPI-managed^M
    Calling gssdce_set_cred_context_ownership^M
    Returned from gssdce_set_cred_context_ownership^M
^M
19.12:  Releasing credential...^M
    Calling gss_release_cred^M
    Returned from gss_release_cred^M
^M
^M
^M
All tests successfully completed^M

[10/20/94 public]

When running under TET, you should get output to stdout/stderr between the last
message you see ("GSSAPI tester started") and the next TET-logged message
(which will be a success or failure message).  Are you blocking output on either
of these streams?  All the output that Rajendra posted (except the menu, which
you don't get under TET) should be seen.

If you're not simply blocking, do you see any output to stdout or stderr?

Also, please try running the test-program stand-alone (following Rajendra's 
example) and post the output you get from that.

[10/24/94 public]
test-gssapi.c has an error on line 637, where the value from getopt is
0xff. This value is being compared to 0xffffffff (EOF = -1). I
changed this line to be:


    while ((c = getopt(argc, argv, "lit:p:")) != (char)EOF) {

[10/26/94 public]
Oops.  The real fix for this is to declare 'c' as an int rather than a char.
I think that the code as written will work on platforms that use a signed type
for char, and break on platforms on which char is unsigned.



CR Number                     : 12676
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : 
Short Description             : sec group override test fails
Reported Date                 : 10/19/94
Found in Baseline             : 1.1b22
Found Date                    : 10/19/94
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[10/19/94 public]

The following output was generated by the group override test:

testing override_get_by_unix_num
pass: feature override_get_by_unix_num seq 1
pass: feature override_get_by_unix_num seq 2
pass: feature override_get_by_unix_num seq 3
pass: feature override_get_by_unix_num seq 4

testing override_is_grp_pwd_overridden
pass: feature override_is_grp_pwd_overidden seq 5
pass: feature override_is_grp_pwd_overidden seq 6
pass: feature override_is_grp_pwd_overidden seq 7

testing override_check_group_passwd
fail: feature override_check_group_passwd seq 8 result: 0   expected: 1
pass: feature override_check_group_passwd seq 9

testing sec_rgy_pgo_get_by_eff_unix_num
pass: feature sec_rgy_pgo_get_by_eff_unix_num seq 10
pass: feature sec_rgy_pgo_get_by_eff_unix_num seq 11
pass: feature sec_rgy_pgo_get_by_eff_unix_num seq 12

testing override_get_group_info
pass: feature override_get_group_info seq 13
pass: feature override_get_group_info seq 14
pass: feature override_get_group_info seq 15
pass: feature override_get_group_info seq 16

testing modify of /opt/dcelocal/etc/group_override after sec_clientd boot
testing override_get_group_info
pass: feature override_get_group_info seq 17

testing modify of /opt/dcelocal/etc/group_override after sec_clientd boot
testing override_get_group_info
pass: feature override_get_group_info seq 18

testing errors when /opt/dcelocal/etc/group_override is removed
testing override_get_group_info
pass: feature override_get_group_info seq 19

now reinstate /opt/dcelocal/etc/group_override and do a sanity check
testing override_get_group_info
pass: feature override_get_group_info seq 20

testing override_get_group_info member cursor stuff
pass: feature override_get_group_info seq 21
pass: feature override_get_group_info seq 22
fail: feature override_get_group_info seq 23 result: 0   expected: 387063929
pass: feature override_get_group_info seq 24
pass: feature override_get_group_info seq 25

passwd_export:  Could not open temporary passwd file /etc/ptmp for writing ( Do 
not specify an existing file. ).
couldn't run 'passwd_export -d /tmp' command - exit status 256

[10/20/94 public]
I have a fix in my sandbox for test 23 failure (it is basically a return
status code check change). I don't see any other failures like you are
seeing. Please check your test setup.

Here is the results script:

# tcc -e /usr/users/desai/sectest/dce1.1/grp_override^M
journal file name is:
/usr/users/desai/sectest/dce1.1/grp_override/results/0006e/
journal^M
testing override_get_by_unix_num^M
pass: feature override_get_by_unix_num seq 1^M
pass: feature override_get_by_unix_num seq 2^M
pass: feature override_get_by_unix_num seq 3^M
pass: feature override_get_by_unix_num seq 4^M
^M
testing override_is_grp_pwd_overridden^M
pass: feature override_is_grp_pwd_overidden seq 5^M
pass: feature override_is_grp_pwd_overidden seq 6^M
pass: feature override_is_grp_pwd_overidden seq 7^M
^M

testing override_check_group_passwd^M
pass: feature override_check_group_passwd seq 8^M
pass: feature override_check_group_passwd seq 9^M
^M
testing sec_rgy_pgo_get_by_eff_unix_num^M
pass: feature sec_rgy_pgo_get_by_eff_unix_num seq 10^M
pass: feature sec_rgy_pgo_get_by_eff_unix_num seq 11^M
pass: feature sec_rgy_pgo_get_by_eff_unix_num seq 12^M
^M
testing override_get_group_info^M
pass: feature override_get_group_info seq 13^M
pass: feature override_get_group_info seq 14^M
pass: feature override_get_group_info seq 15^M
pass: feature override_get_group_info seq 16^M
^M
testing modify of /opt/dcelocal/etc/group_override after sec_clientd boot^M
testing override_get_group_info^M
pass: feature override_get_group_info seq 17^M
^M
testing modify of /opt/dcelocal/etc/group_override after sec_clientd boot^M
testing override_get_group_info^M
pass: feature override_get_group_info seq 18^M
^M
testing errors when /opt/dcelocal/etc/group_override is removed^M
testing override_get_group_info^M
pass: feature override_get_group_info seq 19^M
^M
now reinstate /opt/dcelocal/etc/group_override and do a sanity check^M
testing override_get_group_info^M
pass: feature override_get_group_info seq 20^M
^M
testing override_get_group_info member cursor stuff^M
pass: feature override_get_group_info seq 21^M
pass: feature override_get_group_info seq 22^M
pass: feature override_get_group_info seq 23^M
pass: feature override_get_group_info seq 24^M
pass: feature override_get_group_info seq 25^M
^M
pass- check: kmem::333 in line: kmem::333:root,sys in file: /tmp/group^M
pass- check:
nogroup::555:a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,a0,a1,a2,a3,a4,a5,a6,a7,a
8,a9,a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,a0,a1,a2,a3,a4,a
5,a6,a7,a8,a9,a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,a0,a1,a
2,a3,a4,a5,a6,a7,a8,a9,a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,a0,a1,a2,a3,a4,a5,a6,a7,a8,a
9 in line:
nogroup::555:a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,a0,a1,a2,a3,a4,a5,a6,a7,a8,
a9,a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,a0,a1,a2,a3,a4,a5,
a6,a7,a8,a9,a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,a0,a1,a2,
a3,a4,a5,a6,a7,a8,a9,a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,
a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,a0,a1,a2,a3,a4,a5,a6,
a7,a8,a9,a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,a0,a1,a2,a3,a4,a5,a6,a7,a8,a9 in
file: /tm
p/group^M
pass- check: bin::444: in line: bin::444: in file: /tmp/group^M
# exit^M

[10/21/94 public]
I may have interrupted the test the first time it was run and it left
the file /etc/ptmp. I moved this file and then reran the test and test 8
and test 23 failed. I did not get the same failure about opening /etc/ptmp.

However, I then decided to run the test again because /etc/ptmp had
been recreated. The test failed when it tried to open /etc/ptmp. This
file should be deleted by the test probably before and after the test
is run. I believe that leaving a temporary file in /etc is not a good
idea. Why can't this file be created in /tmp?

[10/21/94 public]
This test shouldn't be creating /etc/ptmp itself and I doubt that it is.
That file is created by passwd_export when it starts up and deleted when
it finishes.  It must be /etc/ptmp because that's what vipw uses to make
sure multiple processes aren't trying to update /etc/passwd at the same
time.  Are you running the test as root?  If not, then you're probably
creating the file, but don't have permissions to remove it?  If that's the
case, then this is just pilot error and the CR should be cancelled (or
changed to ask for documentation with the test that says that it needs to
be run as root).



CR Number                     : 12672
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : 
Short Description             : sec_rgy_attr_sch-tc test fails
Reported Date                 : 10/19/94
Found in Baseline             : 1.1b22
Found Date                    : 10/19/94
Severity                      : D
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[10/19/94 public]

The sec_rgy_attr_sch-tc test failed with the following:

520|0 5 20315 1 1|test case (tp5)
520|0 5 20315 1 2|FAILED sec_rgy_attr_sch_scan()        result:         Fault re
mote no memory (dce / rpc)      expected:       this operation not implemented (
dce / sec)
220|0 5 1 15:52:59|FAIL

It appears that test test needs to be updated.

[10/20/94 public]
HP wants to take a look at the back-end for this
call (rs_*_sch_scan) - even though the test isn't
implemented, the "Fault remote no memory" status
is *NOT* expected and we want to understand why
we're getting this.  If we find the code problem,
a separate OT will be opened for this and if time
allows, we'll put it in the unintegrated tree.

[10/20/94 public]

Don't bother, it's a bug in the test code. I fixed it
while working on the functional tests for security replication.
The fix will be submitted as part of that.

[10/20/94 public]
Ran the same test with the latest Integrated 1.1 bits and this test does
fail. This appears to be intermittent since this test passed before.

FAILED sec_rgy_attr_sch_scan()
result:         Fault remote no memory (dce / rpc)
expected:       this operation not implemented (dce / sec)

[10/20/94 public]

No, it was probably always failing. There was another test in this
same test case that was core dumping - this problem was eventually
fixed.

*However*, when a TET test purpose causes a core dump, the Test Case
Controller loses contact with the test case and reports the test
case as being incomplete (or the TET results for this test case
is missing).

To catch these problems, I strongly recommend the following :

1) Set the following in tetexec.cfg

TET_SAVE_FILES=./core

TCC will look for core files after the test case completes and copy
them to the results directory.

2) Run a script after the test suite is finished which looks for core files
in $TET_ROOT/{test_suite}/results directory.

3) Carefully parse the TET journal looking for missing test case results.

This should really be mandatory.



CR Number                     : 12671
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dfs
Subcomponent Name             : 
Short Description             : dfs low test8 fails
Reported Date                 : 10/19/94
Found in Baseline             : 1.1b22
Found Date                    : 10/19/94
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[10/19/94 public]

The following error occured in the low/test8:

Prog8 pid 16968 iter 1 starting open test.

- ERROR 66: exec-access test on 'f1.1001.666' failed (rf=0, errno=13)
- ERROR: prog8 process 1 returned 1
- ERROR 66: exec-access test on 'f1.1001.666' failed (rf=0, errno=13)
- ERROR: prog8 process 1 returned 1
test8 process 1 failed
test8 cleaning up

This may have been a problem with acls since I was running the test
in an episode file system.



CR Number                     : 12649
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : 
Short Description             : dcecdsacl6 test fails
Reported Date                 : 10/18/94
Found in Baseline             : 1.1b22
Found Date                    : 10/18/94
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[10/18/94 public]

The following failure was found in the journal file:

...
520|0 1 32373 1 62|acl_edit /.../doyen.test.cell/hosts/yale.austin.ibm.com -l
520|0 1 32373 1 63|ERROR on test case 11
...

The variable CDSSHOST does not strip the domain name. The following line
needs to be changed in src/test/systest/directory/cds/cds.acl.6/dcecdsacl6:

    export CDSSHOST=`hostname | awk -F"." '{print $1}'`



CR Number                     : 12630
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : systest
Subcomponent Name             : 
Short Description             : audstr001 systest fails
Reported Date                 : 10/14/94
Found in Baseline             : 1.1b21
Found Date                    : 10/14/94
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[10/14/94 public]

The audstr001 system test fails with the following error:

...
AUDITD is running
Password must be changed!
Do try_logins
1st shmget: File exists
Could not get first shared memory segment id
10/14/94:13:19:24-error---:try_logins failed
Finish try_logins
...

In the file src/test/systest/audit/ts/try_logins.c the value of key
in the call to shmget is a static value. For some reason when I ran
this test shget was returning EEXIST. I modified try_logins.c to
increment the key until shget either succeeded or returned an
errno value that was not EEXIST. When I ran this version of try_logins
the test passed.

Perhaps the key should be generated from ftok?



CR Number                     : 12626
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : systest
Subcomponent Name             : 
Short Description             : rpc dcerpper system test fails
Reported Date                 : 10/14/94
Found in Baseline             : 1.1b21
Found Date                    : 10/14/94
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[10/14/94 public]

The following errors were found in the journal file:

...
520|0 1 20403 1 46|Checking results in /tmp/perf_client_yale.austin.ibm.com.log.
yale
520|0 1 20403 1 47|ERROR: rpper_check_results: Test failure detected in /tmp/per
f_client_yale.austin.ibm.com.log.yale
520|0 1 20403 1 48|Checking results in /tmp/perf_client_yale.austin.ibm.com.log.
agony
520|0 1 20403 1 49|ERROR: rpper_check_results: Test failure detected in /tmp/per
f_client_yale.austin.ibm.com.log.agony
220|0 1 1 22:32:07|FAIL
...
520|0 0 20403 1 2|LOG: /tmp/perf_client_yale.austin.ibm.com.log.yale
520|0 0 20403 1 3|LOG: rshsp yale /tmp/perf_client_yale.austin.ibm.com 00 ncadg_
ip_udp:129.35.67.232[2001] 3 400 y n
520|0 0 20403 1 4|LOG: *** Call count mismatch (Null call test [0]
...
520|0 0 20403 1 16|LOG: rshsp yale /tmp/perf_client_yale.austin.ibm.com 01 ncadg
_ip_udp:129.35.67.232[2001] 3 50 y n 3000
520|0 0 20403 1 17|LOG: *** Call count mismatch (101, 50)
520|0 0 20403 1 18|LOG: *** Call count mismatch (101, 50)
520|0 0 20403 1 19|LOG: *** Call count mismatch (Variable length input arg test
...
520|0 0 20403 1 76|LOG: rshsp yale /tmp/perf_client_yale.austin.ibm.com 10 ncadg
_ip_udp:129.35.67.232[2001] 2 2 y n 60
520|0 0 20403 1 77|LOG: *** Call count mismatch (203, 2)
520|0 0 20403 1 78|LOG: Slow call test [10]
...
520|0 0 20403 1 88|LOG: /tmp/perf_client_yale.austin.ibm.com.log.agony
520|0 0 20403 1 89|LOG: rshsp agony /tmp/perf_client_yale.austin.ibm.com 00 ncad
g_ip_udp:129.35.67.232[2001] 3 400 y n
520|0 0 20403 1 90|LOG: *** Call count mismatch (Null call test [0]
...
520|0 0 20403 1 102|LOG: rshsp agony /tmp/perf_client_yale.austin.ibm.com 01 nca
dg_ip_udp:129.35.67.232[2001] 3 50 y n 3000
520|0 0 20403 1 103|LOG: *** Call count mismatch (103, 50)
520|0 0 20403 1 104|LOG: *** Call count mismatch (119, 50)
520|0 0 20403 1 105|LOG: *** Call count mismatch (Variable length input arg test
...
520|0 0 20403 1 162|LOG: rshsp agony /tmp/perf_client_yale.austin.ibm.com 10 nca
dg_ip_udp:129.35.67.232[2001] 2 2 y n 60
520|0 0 20403 1 163|LOG: *** Call count mismatch (4, 2)
520|0 0 20403 1 164|LOG: Slow call test [10]

[10/14/94 public]
The call count mis-match happens when you run two clients against
one server.  Notice that it was expecting 50 calls and get back
around 100, which implies that someone else is calling the
same routines.

I would think you are running several system tests at the same time
on the same machines.

[10/14/94 public]
I re-ran the test and made sure there were no other tests running
and I still got the same results.

[10/14/94 public]

Is your client running multi-threaded?

[10/14/94 public]
The enrties in the journal file indicate that the client is NOT running
multi-threaded.



CR Number                     : 12604
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dfs
Short Description             : dfs.wan_checklist needs corrections
Reported Date                 : 10/12/94
Found in Baseline             : 1.1b21
Found Date                    : 10/12/94
Severity                      : B
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[10/12/94 public]

The following corrections should be made to the dfs.wan_checklist:

C. 2.	Use dce_config to configure the necessary principal and acls and
	to start the gdad daemon as an "Additional Server".

	d. 2. If the above fails, you may want to investigate further with
	nslookup or other name service utilities on your machine. (The 
	gda_clerk process is no longer built.)

D. 2. a. On the local_cell:
	> cd /.../foreign_cell/fs;ls
	> mkdir local_cell_dir
	> cd local_cell_dir
	> echo "local_cell cell_admin" > local_cell_file

      b. On the foreign_cell:
	> cd /.../foreign_cell/fs/local_cell_dir
	> cat local_cell_file

	> cd /.../local_cell/fs;ls
	> mkdir foreign_cell_dir
	> cd foreign_cell_dir
	> echo "foreign_cell cell_admin" > foreign_cell_file

      c. On the local_cell:
	> cat /.../local_cell/fs/foreign_cell_dir/foreign_cell_file



CR Number                     : 12589
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : eraobj001
Short Description             : eraobj001 (dceseacl) test leaves acls on /.:/sec/xattrschema
Reported Date                 : 10/12/94
Found in Baseline             : 1.1b21
Found Date                    : 10/12/94
Severity                      : C
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[10/12/94 public]

The eraobj001 test (dceseacl with ERA=yes) adds a test user acl
to /.:/sec/xattrschema but doesn't remove it.  The test user
is removed by the test and the result is that /.:/sec/xattrschema
has 'orphaned' uuids with acls on it as follows:

520|0 1 3775 1 668|dcecp -c acl show /.:/sec/xattrschema
520|0 1 3775 1 669|{unauthenticated r----}
520|0 1 3775 1 670|{user cell_admin rcidm}
520|0 1 3775 1 671|{user 000005fa-e200-21cd-9800-0000c0dade56 r----}
520|0 1 3775 1 672|{user 000005fc-e201-21cd-9800-0000c0dade56 r--d-}
520|0 1 3775 1 673|{user 00000622-e209-21cd-9800-0000c0dade56 r----}
520|0 1 3775 1 674|{user 00000623-e20a-21cd-9800-0000c0dade56 r--d-}
520|0 1 3775 1 675|{user 0000064a-e212-21cd-9800-0000c0dade56 r----}
520|0 1 3775 1 676|{user 0000064b-e213-21cd-9800-0000c0dade56 r--d-}
520|0 1 3775 1 677|{user 00000672-e219-21cd-9800-0000c0dade56 r----}

...

The test should be updated to remove the user acl from /.:/sec/xattrschema



CR Number                     : 12588
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : systest
Subcomponent Name             : era
Short Description             : eraobj001 systest fails to add/del attr on group
Reported Date                 : 10/12/94
Found in Baseline             : 1.1b21
Found Date                    : 10/12/94
Severity                      : B
Priority                      : 1
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[10/12/94 public]

Running the ERAOBJ001 test on osf/1 w/ bl-21 gives errors
when trying to add and delete an era from a group.  The purpose
of the test is to verify ACL manipulation on rgy objects.  The
test passes on hpux and I can't recreate it with a short example
outside of the test (on osf1).  I've added checks on the ACLs right
before the xattr operation and they show that I should have
permission (according the the aclmgr setting in the schema) to
add and then delete the attributes.  There are no problems with
the principal or org objects, just group.  The test can be run by
installing the sec systests and running:

  run.sec -l 1 eraobj001

Here are excerpts from the TET journal:

520|0 1 3775 1 439|dcecp -c xattr show /.:/sec/xattrschema/seaclclifiji0attr
520|0 1 3775 1 440|{aclmgr
520|0 1 3775 1 441|{{principal {{query r} {update rfu} {test r} {delete rDm}}}
520|0 1 3775 1 442|{group {{query r} {update rm} {test rt} {delete rDm}}}
520|0 1 3775 1 443|{organization {{query r} {update rm} {test rt} {delete rDm}}}}}
520|0 1 3775 1 444|{annotation {schema-added-by-seaclclifiji0-for-testing}}
520|0 1 3775 1 445|{applydefs yes}
520|0 1 3775 1 446|{encoding printstring}
520|0 1 3775 1 447|{intercell reject}
520|0 1 3775 1 448|{multivalued yes}
520|0 1 3775 1 449|{reserved no}
520|0 1 3775 1 450|{scope {}}
520|0 1 3775 1 451|{trigbind {none {}}}
520|0 1 3775 1 452|{trigtype none}
520|0 1 3775 1 453|{unique no}
520|0 1 3775 1 454|{uuid d5480e28-e524-11cd-9886-0000c0dade56}

...

520|0 1 3775 1 593|The cell is now authenticated by seaclclifiji1
520|0 1 3775 1 594|Attempting to add attr seaclclifiji0attr with val fiji1oval to group seaclclifiji0gr
oup
520|0 1 3775 1 595|Output of previous command:
520|0 1 3775 1 596|dcecp -c acl check /.:/sec/xattrschema
520|0 1 3775 1 597|r----
520|0 1 3775 1 598|dcecp -c acl show /.:/sec/group
520|0 1 3775 1 599|{unauthenticated r-----}
520|0 1 3775 1 600|{user cell_admin rcidDn}
520|0 1 3775 1 601|{user seacladfijip rc----}
520|0 1 3775 1 602|{group acct-admin rcidDn}
520|0 1 3775 1 603|{other_obj r-----}
520|0 1 3775 1 604|{any_other r-----}
520|0 1 3775 1 605|dcecp -c acl check /.:/sec/group
520|0 1 3775 1 606|r-----
520|0 1 3775 1 607|dcecp -c acl show /.:/sec/group/seaclclifiji0group
520|0 1 3775 1 608|{unauthenticated r-t-----}
520|0 1 3775 1 609|{user cell_admin rctDnfmM}
520|0 1 3775 1 610|{user seaclclifiji0 rctDnfmM}
520|0 1 3775 1 611|{user seacladfijip rc------}
520|0 1 3775 1 612|{user seaclclifiji1 r-----m-}
520|0 1 3775 1 613|{group_obj r-t-----}
520|0 1 3775 1 614|{group acct-admin rctDnfmM}
520|0 1 3775 1 615|{other_obj r-t-----}
520|0 1 3775 1 616|{any_other r-------}
520|0 1 3775 1 617|dcecp -c acl check /.:/sec/group/seaclclifiji0group
520|0 1 3775 1 618|r-----m-
520|0 1 3775 1 619|ERROR: dcecp group modify seaclclifiji0group -add {seaclclifiji0attr fiji1oval} fail
ed in add_attr
520|0 1 3775 1 620|Output of previous command:
520|0 1 3775 1 621|Error: User is not authorized to update record

...

520|0 1 3775 1 649|The cell is now authenticated by seaclclifiji1
520|0 1 3775 1 650|Attempting to delete attr seaclclifiji0attr from group object seaclclifiji0group
520|0 1 3775 1 651|Output of previous command:
520|0 1 3775 1 652|dcecp -c xattr show /.:/sec/xattrschema/seaclclifiji0attr
520|0 1 3775 1 653|{aclmgr
520|0 1 3775 1 654|{{principal {{query r} {update rfu} {test r} {delete rDm}}}
520|0 1 3775 1 655|{group {{query r} {update rm} {test rt} {delete rDm}}}
520|0 1 3775 1 656|{organization {{query r} {update rm} {test rt} {delete rDm}}}}}
520|0 1 3775 1 657|{annotation {schema-added-by-seaclclifiji0-for-testing}}
520|0 1 3775 1 658|{applydefs yes}
520|0 1 3775 1 659|{encoding printstring}
520|0 1 3775 1 660|{intercell reject}
520|0 1 3775 1 661|{multivalued yes}
520|0 1 3775 1 662|{reserved no}
520|0 1 3775 1 663|{scope {}}
520|0 1 3775 1 664|{trigbind {none {}}}
520|0 1 3775 1 665|{trigtype none}
520|0 1 3775 1 666|{unique no}
520|0 1 3775 1 667|{uuid d5480e28-e524-11cd-9886-0000c0dade56}
520|0 1 3775 1 758|dcecp -c acl check /.:/sec/group
520|0 1 3775 1 759|r-----
520|0 1 3775 1 760|dcecp -c acl show /.:/sec/group
520|0 1 3775 1 761|{unauthenticated r-----}
520|0 1 3775 1 762|{user cell_admin rcidDn}
520|0 1 3775 1 763|{user seacladfijip rc----}
520|0 1 3775 1 764|{group acct-admin rcidDn}
520|0 1 3775 1 765|{other_obj r-----}
520|0 1 3775 1 766|{any_other r-----}
520|0 1 3775 1 767|dcecp -c acl show /.:/sec/group/seaclclifiji0group
520|0 1 3775 1 768|{unauthenticated r-t-----}
520|0 1 3775 1 769|{user cell_admin rctDnfmM}
520|0 1 3775 1 770|{user seaclclifiji0 rctDnfmM}
520|0 1 3775 1 771|{user seacladfijip rc------}
520|0 1 3775 1 772|{user seaclclifiji1 r--D--m-}
520|0 1 3775 1 773|{group_obj r-t-----}
520|0 1 3775 1 774|{group acct-admin rctDnfmM}
520|0 1 3775 1 775|{other_obj r-t-----}
520|0 1 3775 1 776|{any_other r-------}
520|0 1 3775 1 777|dcecp -c acl check /.:/sec/group/seaclclifiji0group
520|0 1 3775 1 778|r--D--m-
520|0 1 3775 1 779|ERROR: dcecp group modify seaclclifiji0group -remove seaclclifiji0attr failed in del
ete_attr
520|0 1 3775 1 780|Output of previous command:
520|0 1 3775 1 781|Error: User is not authorized to update record



CR Number                     : 12586
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : 
Short Description             : small number of dlgcfg001 failures in 48 CHO run
Reported Date                 : 10/12/94
Found in Baseline             : 1.1b21
Found Date                    : 10/12/94
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[10/12/94 public]


There were a small number of failures in last weekends 48 CHO run
of dlgcfg001.  These happened after about 48 hours.
The client apparently wasn't able to talk to the delegate.

520|0 1 20460 1 12|ERROR: client side test FAILED
520|0 1 20460 1 13|non zero return code
520|0 1 20460 1 14|ERROR: local attribute test FAILED
520|0 1 20460 1 15|non zero return code
520|0 1 20460 1 16|ERROR: remote attribute test FAILED
520|0 1 20460 1 17|non zero return code

There was a hardware failure on the machine that had the
client about the same time these tests were running.
So this may be hardware related.  Once the machine is repaired by CF,
I will rerun the test.



CR Number                     : 12578
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dced
Subcomponent Name             : api fvt test
Short Description             : dced_g_uuid_fileattr is redefined in api fvt tests
Reported Date                 : 10/11/94
Found in Baseline             : 1.1
Found Date                    : 10/11/94
Severity                      : A
Priority                      : 1
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1maint
Affected File(s)              : dtapi_utils.c
Sensitivity                   : public

[10/11/94 public]
dced_g_uuid_fileattr is redefined in dtapi_utils.c. The fix is
to remove the definition.

[11/14/95 public]
----------BEGIN SUBMISSION REQUEST-----------------------
OT CR #:     12578

OT Summary:      redefinition of dced_g_uuid_fileattr in dced tests

Components:      test / dced

Fix summary:     Remove redefinition 

Files modified:  dtapi_utils.c

How tested:     code review, compile and link on hp800

Platforms:    all

Tested against: 1.1GA + unintegrated + Warranty Patch

How to verify:   Code review

Diff:           

*** dtapi_utils.c       Sun Oct 29 17:36:01 1995
--- /u0/sandboxes/bhandaru/ot12578/link/src/test/functional/admin/dced/ts/api/dtapi_utils.c     Fri Sep 30 18:55:41 1994
***************
*** 72,80 ****
  #include <dtapi_1_srvr.h>
  
  #define         CONFIG_NM       (dced_string_t)"/config/"
! 
! /* Defined in src/dced/api/dced_data.c */
! extern uuid_t dced_g_uuid_fileattr;
  
  /* from the idl file */
  uuid_t DTAPI_IF_1_UUID  = { /* 002d2117-7062-1dd2-a9bb-0000c03cd04c */
--- 72,81 ----
  #include <dtapi_1_srvr.h>
  
  #define         CONFIG_NM       (dced_string_t)"/config/"
! uuid_t dced_g_uuid_fileattr = { /* 008b47dd-6ec9-1d6a-9ac7-0000c09ce054 */
!     0x008b47dd, 0x6ec9, 0x1d6a, 0x9a, 0xc7,
!     {0x00, 0x00, 0xc0, 0x9c, 0xe0, 0x54}
! };
  
  /* from the idl file */
  uuid_t DTAPI_IF_1_UUID  = { /* 002d2117-7062-1dd2-a9bb-0000c03cd04c */

--------END SUBMISSION REQUEST-------------------



CR Number                     : 12577
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : local_TET.admin
Short Description             : script doesn't parse TET
scenarios correctly
Reported Date                 : 10/11/94
Found in Baseline             : 1.1
Found Date                    : 10/11/94
Severity                      : C
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : local_TET.admin
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[10/11/94 public]

When selecting the 'all_no_gds_sec_gds_setup' TET scenario, local_TET.admin
only ran 'gds_sec'

This is because the test driver simply searches for the string 'gds_sec' in
the TET scenario name.  If it finds this it runs gds_sec, otherwise it runs
the scenario specified in the command line.

This means the following tet scenarios are unusable:

		all_no_gds_sec
		all_no_gds_sec_gds_setup
		all_no_gds_sec_gds_setup_gdscp
		all_no_gds_sec_gdscp



CR Number                     : 12504
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : 
Short Description             : Need priv_attr_triq_query
functional test
Reported Date                 : 10/5/94
Found in Baseline             : 1.1
Found Date                    : 10/5/94
Severity                      : C
Priority                      : 1
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[10/5/94 public]

There are no functional tests for the priv_attr_triq_query() trigger callouts
in the privilege server, hence we don't know whether the trigger callout
feature works as advertised.  

Hopefully, the tests can be developed in time to be included in the
unintegrated tree.



CR Number                     : 12489
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : hcell
Short Description             : HCLREL001 needs to have a dcecp command sequence incorporated
Reported Date                 : 10/4/94
Found in Baseline             : 1.1b20
Found Date                    : 10/4/94
Severity                      : A
Priority                      : 1
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[10/4/94 public]

HCLREL001 would be significantly more thorough if it incorporated
a dcecp test sequence for intercell testing. Julie wrote 
this test sequence last week. Now it needs to be incorporated into the test.

[10/5/94 public]
off the HYP list as this will not be able to be completed in time
for the bit freeze.  It could potentially go into unintegrated, if
completed in time for that deadline.



CR Number                     : 12488
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : hcells
Short Description             : HCLREL001 needs state file for secondary clearinghouses
Reported Date                 : 10/4/94
Found in Baseline             : 1.1b20
Found Date                    : 10/4/94
Severity                      : B
Priority                      : 1
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[10/4/94 public]

HCLREL001 is written to create state files for primary and 
secondary clearinghouses. Currently no files are included for 
the secondary clearinghouses. At a minimum, a copy 
of the primary state file should be made for use in testing
the secondaries.



CR Number                     : 12418
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 12419
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : fvt
Short Description             : Cells should have unique names
Reported Date                 : 9/29/94
Found in Baseline             : 1.1
Found Date                    : 9/29/94
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : see below
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[9/29/94 public]

A number of the GDS FVTs have cell names hard-coded in the tests.  The
problem is that it is a "Bad Thing" to have two DCE cells with the same
name, so if you run the test on more than one machine at the same time one
or more of your cells may become confused.

The machine names, then, should be created during the test execution.  I
suggest adding the hostname.  E.g., instead of:

	/c=ie/o=digital

Use

	/c=ie/o=<hostname>
or
	/c=ie/o=digital/ou=<hostname>

Here are a list of tests which have this problem:

	gds_sec
	switch_*

Files which must be changed:

gds/tools/local_TET.admin
gds/ts/config/dsa11_init.bat
gds/ts/config/dsa11_objects.tcl
gds/ts/config/dsa12_init.bat
gds/ts/config/dsa12_objects.tcl
gds/ts/lib/shfuncs
xds/tools/local_TET.api
xds/ts/lib/shfuncs
xds/ts/switch/switch_mt
xds/ts/switch/switch_st
xds/ts/switch/switch_DNS
xds/ts/switch/lib/*

[09/30/94 public]
It is not that easy.
It's easy to follow your proposal for the gds_sec tests but not for
the switch tests. The switch tests use xt_test which includes
xt_parms.h. The cell_names are hardcoded in xt_parms.h
and are used for adding, reading, ...from CDS and to compare
expected and received result.
So: Do you want to have a fix for the gds_sec tests?
For xt_tests it's too difficult and too late, I guess.

[9/30/94 public]
Don't spend any time on this (hence, the priority.)  This will have to wait
until 1.2.

[9/30/94 public]
Adding pointer to ot12419, which concerns adding Porting & Testing Guide
documentation to explain these problems.



CR Number                     : 12388
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dcesergy
Short Description             : dcesergy reports occassional rpc errors
Reported Date                 : 9/28/94
Found in Baseline             : 1.1b19
Found Date                    : 9/28/94
Severity                      : B
Priority                      : 1
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[9/28/94 public]

A 18 hour run of dcesergy (sec.rgy.7) test over the weekend showed
various  errors, resulting in a total of 39 passes and 27 failures.
While this may be attributable to poor performance, that's not
immediately clear and these need to be investigated further.  Here
are the errors and the number of times they occurred:

81	log_in: Registry object not found (dce / sec)
 3	rgy_test_login: Connection request timed out (dce / rpc)
11	rpc_ns_binding_import_next: Entry not found (dce / rpc)
 1	rpc_ns_binding_import_next: No more bindings (dce / rpc)
 7	rpc_ns_binding_import_next: Not an RPC entry (dce / rpc)
 1	sec_login_set_context: status 0x141290bd (dce / krb)



CR Number                     : 12270
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dceseacl
Short Description             : reports passed incorrectly but records error
Reported Date                 : 9/20/94
Found in Baseline             : 1.1b18
Found Date                    : 9/20/94
Severity                      : A
Priority                      : 1
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[9/20/94 public]

When the dceseacl test fails it still prints out the message
that it passed at the end, right before recording the tet_result
as an error:

20|0 1 11269 1 571|DCESEACL Passed
220|0 1 41 19:18:02|DCE_ERROR



CR Number                     : 12225
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : systest
Subcomponent Name             : rpbnk_auth
Short Description             : HUGE # of defunct processes on 'hung' machine
Reported Date                 : 9/16/94
Found in Baseline             : 1.1b17
Found Date                    : 9/16/94
Severity                      : B
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[9/16/94 public]

In a CHO cell, a 1.1 osf/1 client seemingly hung (entire
node, couldn't do anything in any windows but could still
ping).  Returning to the node some time later (at least a 
day later) it was back up and running.  Not sure what 
happened in what order, or how reproducible this is, but 
I wanted to record it and here's what's left:

DCED had crashed (at least 8hrs after noticing the hung machine)
and there were an ENORMOUS number of defunct processes, looking 
like the following to ps:
30691 ??         <      0:00.00 <defunct>

root@trinidad> ps ax | grep defunct | wc -l
       549

I've seen this happen once before but didn't record what
was running.  This cell was running a 48 CHO of rpbank_auth
(udp), which may cause the defunct processes(?)

Here's the info from the dced core file, don't know if
if means anything, except maybe the acl_db part:

Core was generated by `dced'.
Program terminated with signal 10, Bus error.
#0  0xa4003548 in acl_db ()
(gdb) break main
Breakpoint 1 at 0x40038e: file /project/dce/build/dce1.1-snap/src/admin/dced/server/main.c, line 329.
(gdb) run
Starting program: /opt/dcelocal/bin/dced 

Breakpoint 1, main (ac=1, av=0xbffff9cc)
    at /project/dce/build/dce1.1-snap/src/admin/dced/server/main.c:329
Source file is more recent than executable.
329         pthread_t           tid;
(gdb) kill
Kill the inferior process? (y or n) y
In Local core dump file,
#0  0xa4003548 in malloc (Cannot access memory at address 0xa40034a8.
(gdb) where
#0  0xa4003548 in malloc (Cannot access memory at address 0xa40034a8.

[9/16/94 public]
In looking at some machine statistics recorded during the run, it appears
that the defunct processes appeared at the same time that /usr filled to
100%.  Also, the dced crash coincided with swap space hitting 100%.  So,
I'm cancelling this...

[9/19/94 public]
I'm re-opening this and assigning it to systest since it seems like
it's a problem with rpbank.  It hosed the CHO cell again with the
same symptoms of defunct processes (788 this a.m. to be exact).  It
happened about 13hrs into the run.  /usr never got above 66%; swap
never got above 59%; all other local filesystems ok, all daemons up
and running.
The only constant is rpbank_auth.  Last time was udp, this time tcp.
No apparent test failures associated with it.  Need to look into how 
it spawns/waits for child processes.

[9/21/94 public]
Well I no longer think it's a problem with rpbank since it happened
yesterday on yet another osf/1 machine (sec master) while running
one loop of dcesepol.  Test seemingly hung and machine slowed to a
near halt.  ps showed 746 defunct processes.  Rumor has it this is
an osf/1 bug that has reared it's head before.  The three machines
where I've encountered it all have the most recent OS:
root@edgar> uname -a
OSF1 edgar 1.2 osc1.2 DCE i386

[9/28/94 public]
Just to leave more info in here, Jeff Carter says:

> There's a good possibility that this is a symptom of CR7246/8703/9075, which
> was fixed shortly after OSF/1 R1.2 was released. The changes for these CRs
> are in OSF/1 R1.2.2 (and OSF/1 R1.3), and are probably in OSF/1 R1.2.1.

Since this is so sporadic and has not occurred in the last round of 
system test runs, we won't bother upgrading or doing further investigation



CR Number                     : 12173
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : client
Short Description             : printf %s being passed a struct
Reported Date                 : 9/13/94
Found in Baseline             : 1.1
Found Date                    : 9/13/94
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[9/13/94 public]

Customer reported that "login_test" sometimes dumps core because a print
formatting statement is being passed a sec_passwd_rec_t struct instead of 
a string:

> Full Description:
> 
>      The api security test for login drops core when run with the
>      highest debug output_level because it prints a binary structure
>      (passwd) as a string (%s).
> 
> 
> Proposed Solution:  
> 
>      Replace code like
> 
>           TSHMessage(ctx, MOTRACE, 
>                     "sec_login_valid_and_cert_ident (%s .. ), status; %s\n",
>                      passwd, error_buf);
> 
>      with code like
> 
>           TSHMessage(ctx, MOTRACE, 
>                     "sec_login_valid_and_cert_ident (%s .. ), status; %s\n",
>                     passwd.key.tagged_union.plain, error_buf);
> 
>      so the %s gets a char* argument not a binary structure or like
> 
>           TSHMessage(ctx, MOTRACE, 
>                     "sec_login_valid_and_cert_ident ( .. ), status; %s\n",
>                     error_buf);
> 
>      so the %s is removed. 
> 
>      I found this problem only in moretests/login_test.c.

Nothing further to add--either solution would fix the problem.



CR Number                     : 12164
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : client
Short Description             : glitches in passwd_import test
Reported Date                 : 9/13/94
Found in Baseline             : 1.1
Found Date                    : 9/13/94
Severity                      : D
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : passwd_import.sh
Sensitivity                   : public

[9/13/94 public]

Customer reports a couple of small glitches in the "passwd_import.sh" test
script:

> Full Description:
> 
>      The api security test for passwd_import has several minor bugs:
> 
>      1. if test is run for first time then rm -r  /tmp/tmp_dir
>         outputs error that file/dir does not exist.
> 
>      4. There are too many questions expected of passwd_import. The
>         answers are too numerous. The sequence y,a,y,a makes no sense 
>         and should be y,a,n.
       
And has suggested the following fixes:
  
> Proposed Solution:  
> 
>      Replace code in src/test/security/api/moretests/passwd_import.sh
> 
>         "1")
> !         rm -r  /tmp/tmp_dir
>         :        :        :        :        :        :        :
>           echo "unix_bin" >> /tmp/passwd_import.script
>           echo "y" >> /tmp/passwd_import.script
>           echo "a">> /tmp/passwd_import.script
> !         echo "y" >> /tmp/passwd_import.script
> !         echo "a" >> /tmp/passwd_import.script
>         :        :        :        :        :        :        :
> 
> 
>      with code like
> 
>         "1")
> !         rm -rf  /tmp/tmp_dir  # use -f to not complain if directory does not exist
>         :        :        :        :        :        :        :
>           echo "unix_bin" >> /tmp/passwd_import.script
>           echo "y" >> /tmp/passwd_import.script
>           echo "a">> /tmp/passwd_import.script
> !         echo "n" >> /tmp/passwd_import.script
>         :        :        :        :        :        :        :

I would only add that the first problem could alternatively be fixed by
file-specific existence tests a la:

	if [ -s /tmp/tmp_dir/foo ]
	then
		rm /tmp/tmp_dir/foo	
	fi

[9/13/94 public]
This is a test defect, not a code defect, so I modified the appropriate
field above to accurately represent that fact...



CR Number                     : 12163
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : client
Short Description             : group/user ID/name dependencies
Reported Date                 : 9/13/94
Found in Baseline             : 1.1
Found Date                    : 9/13/94
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : passwd_import.sh
Sensitivity                   : public

[9/13/94 public]

Customer reported several instances in the "passwd_import.sh" test script
where expected results may not occur because of embedded assumptions about
the mappings of "standard" group and user IDs and names:

> Full Description:
> 
>      passwd_import test #9 fails because it assumes that specific
>      Unix usernames and groups have the same user and group ids
>      on all platforms.  The ids on SVR4 platforms, however, are
>      not the same as on other platforms.
> 
>      The test does not get the expected set of conflicts.  There
>      are only 2 conflicts instead of the expected 7.  So the
>      resulting set of user/group ids is not what the test expects.
> 
> Full Description:
> 
>      The api security test for passwd_import has several minor bugs:
> 
>      2. the sed command must handle comment lines (start with #) in
>         passwd and group files.

(Note:  this is not a bug but a request for an enhancement to allow 
modification of the test "group" and "passwd" files to handle local 
variations in group and user IDs and names.)

>      3. bpc in moretests/passwd file has group 0 which is root on SVR4.
>         So, the rgy_edit command "c -p bpc -g system -o org..." fails.
>         It should be "c -p bpc -g root -o org..." fails.
> 
>      5. rgy_edit is told to del sys for testcase 6 when it does not
>         exist on SVR4.

An informal survey of a few of our own machines confirms the potential 
problem, which extends well beyond SVR4-based implementations:

GID	Test	HP-UX	AIX		SINIX	SCO	SunOS
---	----	-----	---		-----	---	-----

0	root	root	system		root	root	wheel
1	other	other	staff		other	other	daemon
2	bin	bin	bin		bin	bin	kmem
3	sys	sys	sys		sys	sys	bin
4	adm	adm	adm		adm	adm	tty
5	daemon	daemon	uucp		uucp	uucp	operator
6	mail	mail	mail		mail	----	news
7	lp	lp	security	tty	mail	----

The customer proposes a number of SVR4-specific solutions:

> Proposed Solution:  
> 
>      Change the security passwd_import.sh script to expect a
>      different set of user and group ids for SVR4 platforms.
> 
> Proposed Solution:  
> 
>      Replace code in src/test/security/api/moretests/passwd_import.sh
> 
>                 if [ "$1" = 6 ]
>                 then
>               echo "del unix_bin " >> /tmp/passwd_import.script
> -             echo "del sys" >> /tmp/passwd_import.script
>         :        :        :        :        :        :        :
>         "4")
> !               sed -e "/[\/ ]\*.*/d" ../moretests/passwd | sed -e "1d" > /tmp/tmp_dir/passwd
> !               sed -e "/[\/ ]\*.*/d" ../moretests/group  | sed -e "1d"  > /tmp/tmp_dir/group
>         :        :        :        :        :        :        :
>           # Change user's passwd and account status, so the user can login.
> 
>           echo "v" > /tmp/passwd_import.script
> !         echo "c -p bpc -g system -o org -pw -dce- -mp -dce- -av -pv"  >> /tmp/passwd_import.script
>         :        :        :        :        :        :        :
> 
> 
>      with code like
> 
>                 if [ "$1" = 6 ]
>                 then
>               echo "del unix_bin " >> /tmp/passwd_import.script
>         :        :        :        :        :        :        :
>         "4")
> !               sed -e "/[\/ ]\*.*/d" ../moretests/passwd | sed -e "/^#/d" | sed -e "1d" > /tmp/tmp_dir/passwd
> !               sed -e "/[\/ ]\*.*/d" ../moretests/group  | sed -e "/^#/d" | sed -e "1d"  > /tmp/tmp_dir/group
>         :        :        :        :        :        :        :
>           # Change user's passwd and account status, so the user can login.
> 
>           echo "v" > /tmp/passwd_import.script
> !         echo "c -p bpc -g root -o org -pw -dce- -mp -dce- -av -pv"  >> /tmp/passwd_import.script

Aside from the change in the sed line, which could be generally useful for
anyone modifying the test "group" and "passwd" files, these changes will only
work for systems with the same group and user IDs and names as those on the
customer's system.

As I see it, there are three basic options for dealing with this:

	(1) Add a lot of implementation-specific code (like the above) to 
	    "passwd_import.sh", with the likelihood that there will still 
	    be discrepancies.

	(2) Rewrite (or write a script which itself rewrites)
	    "passwd_import.sh" to modify the test "group" and "passwd" files
	    and some of the specific tests within "passwd_import.sh" based
	    on either the actual "group" and "passwd" files of the platform 
	    being tested or else on IDs and names defined in some sort of 
	    test-specific configuration file; either way, this could take a 
	    fair amount of work.

	(3) Add specific language to the release notes or the porting guide
	    which explicitly indicates that "passwd_import.sh" and the test 
	    "group" and "passwd" files may need to be modified to accommodate 
	    local variations in these "standard" IDs; this is clearly the 
	    simplest option.

[9/13/94 public]
This is a test defect, not a code defect, so I modified the appropriate
field above to accurately represent that fact...



CR Number                     : 12092
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : era/epac
Short Description             : dlg_client era/epac test needs expanding
Reported Date                 : 9/7/94
Found in Baseline             : 1.1b16
Found Date                    : 9/7/94
Severity                      : B
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[9/7/94 public]

The dlg_client program needs to have the ERA test expanded
to test more attribute types carried in EPACs.

[9/12/94 public]

Assigned.



CR Number                     : 12091
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dceseacl
Short Description             : documenting dceseacl CHO failures
Reported Date                 : 9/7/94
Found in Baseline             : 1.1b16
Found Date                    : 9/7/94
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[9/7/94 public]

dceseact records seldom failures during 48CHO.  An example of the
journal files reads as follows:

root@barbados> cat journal.00105
0|1.10 15:30:41 19940904|User: root (0) TCC Start, Command Line:
/dcetest/dcelocal/test/tet/bin/tcc -e -j
/dcetest/dcelocal/status/system/dceseact.barbados.940902172414/fail/journal.00105
-i /tmp/dceseact.940902172414.6323 system/security dceseact 
20|/dcetest/dcelocal/test/tet/system/security/tetexec.cfg 1|Config Start
30||TET_VERSION=1.10
30||TET_OUTPUT_CAPTURE=False
30||TET_RESCODES_FILE=tet_code
30||TET_EXEC_IN_PLACE=False
30||TET_NSIG=31
30||TET_SIG_IGN=26
40||Config End
70||"Starting DCESEACT Test Suite"
10|0 /ts/dceseact/dceseact 15:30:42|TC Start, scenario ref 69-1
15|0 1.9 1|TCM Start
520|0 0 24478 1 1|Attempting to authenticate the cell by cell_admin
520|0 0 24478 1 2|The cell is now authenticated by cell_admin
520|0 0 24478 1 3|Attempting to access rgy_edit as current user.
520|0 0 24478 1 4|Current user can access registry
520|0 0 24478 1 5|Starting test DCESEACT
400|0 1 1 15:32:19|IC Start
200|0 1 15:32:19|TP Start
520|0 1 24478 1 6|Scanning registry for users...begin check_rgy()
520|0 1 24478 1 7|Determining the current state of registry
520|0 1 24478 1 8|Attempting to verify existence of seactbarbadosp
520|0 1 24478 1 9|Attempting to verify existence of seactbarbadosa
520|0 1 24478 1 10|Attempting to verify existence of seactbarbadosg
520|0 1 24478 1 11|Attempting to verify existence of seactbarbadoso
520|0 1 24478 1 12|State of registry is fine...end check_rgy()
520|0 1 24478 1 13|Attempting to add users to registry...begin add_to_rgy
520|0 1 24478 1 14|Attempting to add person seactbarbadosp to registry
520|0 1 24478 1 15|Person seactbarbadosp has been ADDED to the registry.
520|0 1 24478 1 16|Attempting to add alias seactbarbadosa to registry
520|0 1 24478 1 17|Alias seactbarbadosa has been added to the registry.
520|0 1 24478 1 18|Attempting to add group seactbarbadosg
520|0 1 24478 1 19|Group seactbarbadosg has been ADDED to the registry.
520|0 1 24478 1 20|Attempting to add organization seactbarbadoso
520|0 1 24478 1 21|Organization seactbarbadoso has been ADDED to the
registry.
520|0 1 24478 1 22|Attempting to add account for person seactbarbadosp
520|0 1 24478 1 23|Account seactbarbadosp has been ADDED to the registry.
520|0 1 24478 1 24|Attempting to add account for person seactbarbadosa
520|0 1 24478 1 25|Account seactbarbadosa has been ADDED to the registry.
520|0 1 24478 1 26|Attempting remote login...begin remote_login_first()
520|0 1 24478 1 27|Attempting to change seactbarbadosp's password at west
520|0 1 24478 1 28|ERROR: Unable to change seactbarbadosp account's
password at: west (rlogin_to_machine 1)
520|0 1 24478 1 29|ERROR: seactbarbadosp account's password was not changed
at: west (rlogin_to_machine 2)
2)
520|0 1 24478 1 38|ERROR: Cannot verify seactbarbadosp account's new
password at: dce3 (rlogin_to_machine 3)
520|0 1 24478 1 39|Attempting to change seactbarbadosa's password at dce3
520|0 1 24478 1 40|ERROR: Unable to change seactbarbadosa account's
password at: dce3 (rlogin_to_machine 1)
520|0 1 24478 1 41|seactbarbadosa account's password was changed at: dce3
(rlogin_to_machine 2) AS EXPECTED
520|0 1 24478 1 42|Verified seactbarbadosa account's new password at: dce3
(rlogin_to_machine 3) AS EXPECTED
520|0 1 24478 1 43|Attempting to change seactbarbadosp's password at
trinidad
520|0 1 24478 1 44|Was able to change seactbarbadosp account's password at:
trinidad (rlogin_to_machine 1) AS EXPECTED
520|0 1 24478 1 45|seactbarbadosp account's password was changed at:
trinidad (rlogin_to_machine 2) AS EXPECTED
520|0 1 24478 1 46|Verified seactbarbadosp account's new password at:
trinidad (rlogin_to_machine 3) AS EXPECTED
520|0 1 24478 1 47|Attempting to change seactbarbadosa's password at
trinidad
520|0 1 24478 1 48|Was able to change seactbarbadosa account's password at:
trinidad (rlogin_to_machine 1) AS EXPECTED
520|0 1 24478 1 49|seactbarbadosa account's password was changed at:
trinidad (rlogin_to_machine 2) AS EXPECTED
520|0 1 24478 1 50|Verified seactbarbadosa account's new password at:
trinidad (rlogin_to_machine 3) AS EXPECTED
520|0 1 24478 1 51|Attempting to change seactbarbadosp's password at
barbados
520|0 1 24478 1 52|Was able to change seactbarbadosp account's password at:
barbados (rlogin_to_machine 1) AS EXPECTED
520|0 1 24478 1 53|seactbarbadosp account's password was changed at:
barbados (rlogin_to_machine 2) AS EXPECTED
520|0 1 24478 1 54|Verified seactbarbadosp account's new password at:
barbados (rlogin_to_machine 3) AS EXPECTED
520|0 1 24478 1 55|Attempting to change seactbarbadosa's password at
barbados
520|0 1 24478 1 56|Was able to change seactbarbadosa account's password at:
barbados (rlogin_to_machine 1) AS EXPECTED
520|0 1 24478 1 57|seactbarbadosa account's password was changed at:
barbados (rlogin_to_machine 2) AS EXPECTED
520|0 1 24478 1 58|Verified seactbarbadosa account's new password at:
barbados (rlogin_to_machine 3) AS EXPECTED
520|0 1 24478 1 59|Attempting updates to registry...begin run_updates()
520|0 1 24478 1 60|Attempting to change name of group
520|0 1 24478 1 61|New group name has been ADDED to the registry
520|0 1 24478 1 62|Name of group has been changed to newseactbarbadosg
520|0 1 24478 1 63|Was able to change group to new
name...change_group_name()
520|0 1 24478 1 64|Attempting to add cell_admin member to group in
add_to_group_or_org
520|0 1 24478 1 65|Members cell_admin have been ADDED properly to group
newseactbarbadosg
520|0 1 24478 1 66|Attempting to change the full name of organization
seactbarbadoso
520|0 1 24478 1 67|Organization seactbarbadoso's full name has been changed
AS EXPECTED
520|0 1 24478 1 68|Attempting to add cell_admin member to org in
add_to_group_or_org
520|0 1 24478 1 69|Members cell_admin have been ADDED properly to org
seactbarbadoso
520|0 1 24478 1 70|Attempting to change home directory of person
seactbarbadosp
520|0 1 24478 1 71|Was able to change home directory for seactbarbadosp
520|0 1 24478 1 72|Attempting to delete objects from database
520|0 1 24478 1 73|/opt/dcelocal/bin/rgy_edit -update executed properly
520|0 1 24478 1 74|Determining the current state of registry
520|0 1 24478 1 75|Attempting to verify existence of seactbarbadosp
520|0 1 24478 1 76|Attempting to verify existence of seactbarbadosa
520|0 1 24478 1 77|Attempting to verify existence of newseactbarbadosg
520|0 1 24478 1 78|Attempting to verify existence of seactbarbadoso
520|0 1 24478 1 79|Objects created for testing have been removed from
registry
520|0 1 24478 1 80|Attempting second set of remote logins...begin
remote_login_second()
520|0 1 24478 1 81|Attempting to login non-existent accounts at west
520|0 1 24478 1 82|Was NOT able to login to non-existent person account:
seactbarbadosp AS EXPECTED
520|0 1 24478 1 83|Was NOT able to login to non-existent alias account:
seactbarbadosa AS EXPECTED
520|0 1 24478 1 84|Attempting to login non-existent accounts at dce3
520|0 1 24478 1 85|Was NOT able to login to non-existent person account:
seactbarbadosp AS EXPECTED
520|0 1 24478 1 86|Was NOT able to login to non-existent alias account:
seactbarbadosa AS EXPECTED
520|0 1 24478 1 87|Attempting to login non-existent accounts at trinidad
520|0 1 24478 1 88|Was NOT able to login to non-existent person account:
seactbarbadosp AS EXPECTED
520|0 1 24478 1 89|Was NOT able to login to non-existent alias account:
seactbarbadosa AS EXPECTED
520|0 1 24478 1 90|Attempting to login non-existent accounts at barbados
520|0 1 24478 1 91|Was NOT able to login to non-existent person account:
seactbarbadosp AS EXPECTED
520|0 1 24478 1 92|Was NOT able to login to non-existent alias account:
seactbarbadosa AS EXPECTED
520|0 1 24478 1 93|DCESEACT Failed
220|0 1 1 16:06:11|FAIL
410|0 1 1 16:06:11|IC End
80|0 0 16:06:54|TC End
70||"Completed DCESEACT Test Suite"
900|16:06:54|TCC End

[9/12/94 public]

Assigned.



CR Number                     : 12090
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : thr
Short Description             : dcethrpc failures because
thd_client core dumps
Reported Date                 : 9/7/94
Found in Baseline             : 1.1b16
Found Date                    : 9/7/94
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[9/7/94 public]

In a 48CHO run of dcethrpc and dcethrpc_auth, it is not unusual
to find a small number (1 to 10) of failures. These failures are 
recorded in the journal files and they read as follows:

520|0 1 3822 1 22|ERROR: Start of thd_client -h dce3 on west failed
...
520|0 1 3822 1 31|ERROR: dcethrpc threads test failed

or

520|0 1 4031 1 28|ERROR:Failed to start thd_server on trinidad
...
520|0 1 4031 1 33|ERROR: dcethrpc threads test failed

[9/12/94 public]

Assigned.

[9/28/96 public]

I am just entering some reference data for those interested:

In a 48CHO run of this tests I had 11 failures- all were as described 
in this CR. The failures happened a different times, as the times in
the logs show:

root@alan> pwd
/dcetest/dcelocal/results/system/dcethrpc.alan.940926175137/fail
root@alan> ls -lt
total 68
-rw-rw-rw-   1 root     system             2827 Sep 28 15:26 journal.01147
-rw-rw-rw-   1 root     system             2796 Sep 28 13:45 journal.01110
-rw-rw-rw-   1 root     system             2796 Sep 28 10:55 journal.01044
-rw-rw-rw-   1 root     system             2827 Sep 28 10:39 journal.01041
-rw-rw-rw-   1 root     system             2796 Sep 28 07:51 journal.00978
-rw-rw-rw-   1 root     system             2827 Sep 28 07:30 journal.00973
-rw-rw-rw-   1 root     system             1746 Sep 28 05:58 journal.00934
-rw-rw-rw-   1 root     system             2827 Sep 28 04:40 journal.00901
-rw-rw-rw-   1 root     system             2827 Sep 27 21:27 journal.00712
-rw-rw-rw-   1 root     system             4559 Sep 27 06:02 journal.00310
-rw-rw-rw-   1 root     system             2939 Sep 27 05:43 journal.00309

root@alan> grep ERROR *        
journal.00309:520|0 1 13424 1 27|ERROR:Failed to start thd_server on alan
journal.00309:520|0 1 13424 1 33|ERROR: dcethrpc threads test failed
journal.00309:220|0 1 41 05:43:34|DCE_ERROR
journal.00310:520|0 1 16200 1 25|ERROR:Failed to start thd_server on dce3
journal.00310:520|0 1 16200 1 36|ERROR:Failed to start thd_server on west
journal.00310:520|0 1 16200 1 48|ERROR:Failed to start thd_server on needle
journal.00310:520|0 1 16200 1 53|ERROR: dcethrpc threads test failed
journal.00310:220|0 1 41 06:02:06|DCE_ERROR
journal.00712:520|0 0 21663 1 4|ERROR: Copying thd_server to dce3:/tmp
failed
journal.00712:520|0 1 21663 1 25|ERROR:Failed to start thd_server on alan
journal.00712:520|0 1 21663 1 31|ERROR: dcethrpc threads test failed
journal.00712:220|0 1 41 21:27:16|DCE_ERROR
journal.00901:520|0 0 21002 1 4|ERROR: Copying thd_server to dce3:/tmp
failed
journal.00901:520|0 1 21002 1 25|ERROR:Failed to start thd_server on alan
journal.00901:520|0 1 21002 1 31|ERROR: dcethrpc threads test failed
journal.00901:220|0 1 41 04:39:49|DCE_ERROR
.....

[10/11/94 public]

I think I found the reason why this test is failing. 
The ouput log to the screen says:

-log-----: host:barbados
program:/dcetest/dcelocal/test/tet/system/threads/ts/dcethrpc/thd_client
          pid:2960
Array reads served by barbados successful

/dcetest/dcelocal/test/tet/system/tools/su.dce[74]: 2960 Memory
fault(coredump)

The coredump is actually that of thd_client which is kept in the TET 
temporary directory and it gets removed as soon as the iteration
finishes. (we never save them). Today I saved the coredump and 
found that it belonged to thd_client. gdb gave some information
but I did not find it very useful. Here it is:

root@barbados> ts/dcethrpc/thd_client /tmp/core
<

GDB is free software and you are welcome to distribute copies of it
 under certain conditions; type "show copying" to see the conditions.
There is absolutely no warranty for GDB; type "show warranty" for details.
GDB 4.5, Copyright 1992 Free Software Foundation, Inc.

OSF version 1.0 created Mon Dec  7 14:40:14 1992

OSF version 1.0 created Mon Dec  7 14:40:14 1992

..
Core was generated by `thd_client'.
Program terminated with signal 11, Segmentation fault.
#0  0x408a28 in head ()
(gdb) break main
Breakpoint 1 at 0x40011c: file
/project/dce/build/dce1.1-snap/src/test/systest/threads/thd_client.c, line
216.
(gdb) run
Starting program:
/dcetest/dcelocal/test/tet/system/threads/ts/dcethrpc/thd_client 

Breakpoint 1, main (argc=1, argv=0xbffffd3c)
    at
/project/dce/build/dce1.1-snap/src/test/systest/threads/thd_client.c:216
Source file is more recent than executable.
216             cma_init();
(gdb) kill
Kill the inferior process? (y or n) y
In Local core dump file,
#0  0x408a28 in head ()
(gdb) where
#0  0x408a28 in head ()
Cannot access memory at address 0xc608dd40.
(gdb)



CR Number                     : 12077
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : 
Short Description             : Name service unavailable
Reported Date                 : 9/7/94
Found in Baseline             : 1.1b16
Found Date                    : 9/7/94
Severity                      : D
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[9/7/94 public]

During a weekend run of DCDREL001 using BL16.3, the following 
error message was output repeatedly (roughly 20 times) to the 
terminal on the HP-UX core services node:

  "Failed to retrieve server binding from the namespace: 
     Name service unavailable (dce / rpc)"

DCE appeared to still be operational on this node after these 
messages were output.

[9/13/94 public]

Rick... do you still see this on BL17 or latest? If so, please 
try to find the appropriate component to assign it to (dced or rpc).

[09/15/94 public]
Assigning to systest until we can get more info (e.g., what RPC call
failed to what server).  First guess is that CDS died for some
reason.

[09/15/94 public]

The cds server was unreachable for a time yesterday from a dce client, a
cdscp sho dir /.: command failed.  After a time it  became reachable again.  
I am running BL17.

Martha Lynch has also seen cds 'go away' and come back.



CR Number                     : 11992
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : fvt
Short Description             : tests should use dcecp
Reported Date                 : 9/1/94
Found in Baseline             : 1.1
Found Date                    : 9/1/94
Severity                      : E
Priority                      : 4
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[9/1/94 public]
GDS and XDS test scripts and testcases should use 'dcecp' for all cell
configuration and maniuplation.  cdscp and rgy_edit should not be used.



CR Number                     : 11966
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : sec
Short Description             : dcesepol fails when executed
on a 1.0.3 client in a cell with 1.1 core servers
Reported Date                 : 8/30/94
Found in Baseline             : 1.1b16
Found Date                    : 8/30/94
Severity                      : B
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[8/30/94 public]

dcecepol fails when executed on a 1.0.3 client in a cell that 
has its core servers running on a 1.1 cell. At this point I don't
know if the test is the problem of DCE.

The test was executed on soldier with the command:

run.sec -l 1 -m "soldier west barbados trinidad" dcesepol

where soldier is an 1.0.3 machine (AIX); the others are running 1.1

The abridge version of the error messages says:

                "run.sec -l 1 -m soldier west barbados trinidad dcesepol"
completed at 08/30/94-16
:21:21
                /opt/dcelocal/bin complete: Feb 16 1994
                Failures under
/dcetest/dcelocal/results/system/dcesepol.soldier.940829160804
                There were 4886 ERRORs and/or FAILures total in
                the 1 failed iterations.  Here's the breakdown:
                1 - ERROR: Some users were able to login UNEXPECTEDLY or 
			warning messages did not appear
                1 - ERROR: Unable to complete all remote logins
                1 - ERROR: sepolsoldier1p unable to login to barbados
                1 - ERROR: sepolsoldier1p unable to login to soldier
                1 - ERROR: sepolsoldier1p unable to login to trinidad
                1 - ERROR: sepolsoldier1p unable to login to west
             523 - ERROR: sepolsoldier2p unable to login to barbados
             223 - ERROR: sepolsoldier2p unable to login to soldier
             523 - ERROR: sepolsoldier2p unable to login to trinidad
             523 - ERROR: sepolsoldier2p unable to login to west
               1 - ERROR: sepolsoldier3p unable to login to barbados
               1 - ERROR: sepolsoldier3p unable to login to soldier
               1 - ERROR: sepolsoldier3p unable to login totrinidad
               1 - ERROR: sepolsoldier3p unable to login to west
               2 - FAIL
               1 - Final Logins: Pass = 7164, Fail = 1800, Total = 8964
               1 - Logins: Pass = 1008, Fail = 0, Total = 1008
               1 - Logins: Pass = 1020, Fail = 0, Total = 1020

...

               1 - Logins: Pass = 300, Fail = 0, Total = 300              
               1 - Logins: Pass = 3012, Fail = 108, Total =3120
               1 - Logins: Pass = 3021, Fail = 111, Total =3132
               1 - Logins: Pass = 3030, Fail = 114, Total =3144
               1 - Logins: Pass = 3039, Fail = 117, Total =3156
               1 - Logins: Pass = 3048, Fail = 120, Total =3168
               1 - Logins: Pass = 3057, Fail = 123, Total =3180
               1 - Logins: Pass = 3066, Fail = 126, Total =3192
               1 - Logins: Pass = 3075, Fail = 129, Total =3204
               1 - Logins: Pass = 3084, Fail = 132, Total =3216
               1 - Logins: Pass = 3093, Fail = 135, Total =3228
               1 - Logins: Pass = 3102, Fail = 138, Total =3240
               1 - Logins: Pass = 3111, Fail = 141, Total =3252
               1 - Logins: Pass = 312, Fail = 0, Total = 312

...
        6 - Sorry. Password Validation Failure. 
	  - Client's entry in database has expired (dce / krb)
      746 - Sorry. Password Validation Failure. -Invalid password. (dce / sec)
     1578 - Sorry. Password Validation Failure. 
	  - Password has expired (dce / krb)
        2 - Sorry. User Identification Failure. 
	  - Client's entry in database has expired (dce / krb)
        2 - Sorry. User Identification Failure. 
	  - KRB5 error code 23

[9/12/94 public]

Assigned.



CR Number                     : 11935
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : 
Short Description             : audit system tests need updated README
Reported Date                 : 8/29/94
Found in Baseline             : 1.1b14
Found Date                    : 8/29/94
Severity                      : B
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[8/29/94 public]


The audit system tests now require that the audit daemon
is running first, the README file should be updated 
to reflect this fact.



CR Number                     : 11894
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : gss
Short Description             : Add gssapi tests for coverage
Reported Date                 : 8/25/94
Found in Baseline             : 1.1b15
Found Date                    : 8/25/94
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : test-gssapi.c
Sensitivity                   : public

[8/25/94 public]
This is a placeholder, to remind me that I have to enhance the gssapi
test-suite to improve the test-coverage numbers for GSSAPI.

[9/15/94 public]

Some additional test (mostly for support & convenience routines) were
added in today's drop.

Still need additional negative tests to get the coverage numbers up.

[9/23/94 public]

Submitted additional test exercising credential management routines.



CR Number                     : 11847
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : 
Short Description             : gdx_xds_str_001 tests failing
Reported Date                 : 8/24/94
Found in Baseline             : 1.1b16
Found Date                    : 8/24/94
Severity                      : B
Priority                      : 1
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[8/24/94 public]

The gds_xds_str_001 tests are failing after an hour.  The tests appear
to be having problems setting up some test clients.  I'm enclosing a 
typical log from one of the error runs.  I don't know enough about gds
and the gds system tests to make any sense of this.  Any help would be
appreciated.

   BEGINNING gds_xds_str_001 ITERATION 3 (bXrdXu) AT Tue Aug 23 17:21:25 EDT 19
94
   -----------------------------------------------------------------------

   Beginning client startup for process 11770 Iteration 3 at Tue Aug 23 17:21:2
6 EDT 1994
   --------------------------------------------------------------------------

      Testcase is bXrdXu
      Testcase file is T4bXrdXuX.11770
      Running on system davis to create the test tree.

      Starting tree create on davis (OSF1) at Tue Aug 23 17:21:26 EDT 1994
      Looking for Testcase gds_xds_str_001_brdX_bt passed in the logs for itera
tion 3
      Starting at Tue Aug 23 17:21:26 EDT 1994 (maximum of 5 loops).
      Done looking for Testcase gds_xds_str_001_brdX_bt passed in the logs for
iteration 3.
      Finished at Tue Aug 23 17:23:27 EDT 1994 (after 3 loops)...
      All clients got message
      Cleaning up temporary files...
      Tree creation completed at Tue Aug 23 17:23:27 EDT 1994
      STARTing xt_test client 1 (testcase bXrdXu) on brandy (HP-UX) at Tue Aug
23 17:23:27 EDT 1994
      STARTed xt_test client 1 (testcase bXrdXu) - local PID is 13183
      STARTing xt_test client 2 (testcase bXrdXu) on brandy (HP-UX) at Tue Aug
23 17:23:28 EDT 1994
      STARTed xt_test client 2 (testcase bXrdXu) - local PID is 13187
      STARTing xt_test client 3 (testcase bXrdXu) on davis (OSF1) at Tue Aug 23
 17:23:33 EDT 1994
      STARTed xt_test client 3 (testcase bXrdXu) - local PID is 13191
      STARTing xt_test client 4 (testcase bXrdXu) on davis (OSF1) at Tue Aug 23
 17:23:35 EDT 1994
      STARTed xt_test client 4 (testcase bXrdXu) - local PID is 13195
   ------------------------------------------------------------------------
   Finished client startup for process 11770 at Tue Aug 23 17:23:35 EDT 1994


   Check startup for iteration 3 (bXrdXu) at Tue Aug 23 17:23:35 EDT 1994
   ------------------------------------------------------------------
      Looking for (startup) passed in the logs for iteration 3
      Starting at Tue Aug 23 17:23:35 EDT 1994 (maximum of 5 loops).
      Done looking for (startup) passed in the logs for iteration 3.
      Finished at Tue Aug 23 17:26:20 EDT 1994 (after 3 loops)...
      All clients got message
      Cleaning up temporary files...
      ERROR: CLIENT STARTUP FAILED!!
         The following clients reported errors during startup:
           1 brandy HP-UX
           4 davis OSF1
      Removing temporary files...
   ------------------------------------------------------------------
   Startup check for iteration 3 (bXrdXu) done at Tue Aug 23 17:26:22 EDT 1994

      ERROR in bXrdXu client startup for iteration 3
   Starting to kill jobs for process 11770 , iteration 3 at Tue Aug 23 17:26:23
 EDT 1994
   ---------------------------------------------------------------------
      No jobs running on brandy...
      No jobs running on davis...
   ---------------------------------------------------------------------
   Finished killing jobs for process 11770 at Tue Aug 23 17:26:27 EDT 1994

   Starting pass 3 cleanup at Tue Aug 23 17:26:27 EDT 1994
   -----------------------------------------------------------------
      Starting tree delete on davis (OSF1) at Tue Aug 23 17:26:28 EDT 1994
      Looking for Testcase gds_xds_str_001_brdX_dt passed in the logs for itera
tion 3
      Starting at Tue Aug 23 17:26:28 EDT 1994 (maximum of 5 loops).
      Done looking for Testcase gds_xds_str_001_brdX_dt passed in the logs for
iteration 3.
      Finished at Tue Aug 23 17:30:29 EDT 1994 (after 5 loops)...
      After 5 loops some clients still missing message.
      Cleaning up temporary files...
      WARNING - Tree deletion failed (see  for details)
      Creating /dcetest/dcelocal/status/current/gds_xds_str_001/error/3 for the
 logs...
      Copying logs to /dcetest/dcelocal/status/current/gds_xds_str_001/error/3.
..
        Pass log (/dcetest/dcelocal/status/current/gds_xds_str_001/working/1177
0.3.passlog)...
        D2 and xt logs...
      Copying logs from brandy to /dcetest/dcelocal/status/current/gds_xds_str_
001/error/3...
     Removing the logs from brandy...
      Copying logs from davis to /dcetest/dcelocal/status/current/gds_xds_str_0
01/error/3...
   Removing the logs from davis...
   ------------------------------------------------------------------
   Finished pass 3 cleanup at Tue Aug 23 17:30:42 EDT 1994


      gds_xds_str_001: ITERATION 3 - testcase (bXrdXu) GOT AN ERROR.


   --------------------------------------------------------------------
   COMPLETED gds_xds_str_001 ITERATION 3 AT Tue Aug 23 17:30:43 EDT 1994

[8/24/94 public]
This log really doesn't help identify the problem.  Please try to identify
the actual commands on which the test is tripping.

[8/24/94 public]

The following errors were returned in gds_xds_str_001 logs for this iteration:

 brandy.3.1.11770.HP-UX.d2log:

[7]gds_xds_str_001_bXrdu_1: Function BIND :
[7]gds_xds_str_001_bXrdu_1:     session = session1
[7]gds_xds_str_001_bXrdu_1:     workspace = workspace1
[7]gds_xds_str_001_bXrdu_1:     call ds_bind()
[7]gds_xds_str_001_bXrdu_1:     xt_cmp_status: received status from XT_BIND was
:
[7]gds_xds_str_001_bXrdu_1: "Some part of the directory is currently not availa
ble."
[7]gds_xds_str_001_bXrdu_1: xt_cmp_status: DS_SUCCESS expected but not returned
 from XT_BIND
[7]gds_xds_str_001_bXrdu_1:     (ERROR) expected and received DS_status from xt
_ds_bind differ
[7]gds_xds_str_001_bXrdu_1:     BIND returned ERROR

brandy.3.1.11770.HP-UX.xtlog:

1994-08-23-17:24:39.435-04:00I0.579 PID#13183 WARNING gds general d21readc.c 25
3 0x400baee8
Allocation of 2048 byte failed.
[7]gds_xds_str_001_bXrdu_1:     xt_cmp_status: received status from XT_BIND was
:
[7]gds_xds_str_001_bXrdu_1: "Some part of the directory is currently not availa
ble."
[7]gds_xds_str_001_bXrdu_1: xt_cmp_status: DS_SUCCESS expected but not returned
 from XT_BIND
[7]gds_xds_str_001_bXrdu_1:  Func xt_ds_bind : expected and received DS_status
differ
[7]gds_xds_str_001_bXrdu_1:  Func xt_run : Function call FAILED
[7]gds_xds_str_001_bXrdu_1: BIND returned ERROR

davis.3.3.11770.OSF1.cud2_log:

: Function BIND :
:       session = default_session
:       workspace = workspace1
:       call ds_bind()
:       xt_cmp_status: received status from XT_BIND was:
: "Some part of the directory is currently not available."
: xt_cmp_status: DS_SUCCESS expected but not returned from XT_BIND
:       (ERROR) expected and received DS_status from xt_ds_bind differ
:       BIND returned ERROR

davis.3.3.11770.OSF1.cuxtlog:

[1]: INITIALIZE returned OK
[1]: VERSION returned OK
[1]:    xt_cmp_status: received status from XT_BIND was:
[1]: "Some part of the directory is currently not available."
[1]: xt_cmp_status: DS_SUCCESS expected but not returned from XT_BIND
[1]:  Func xt_ds_bind : expected and received DS_status differ
[1]:  Func xt_run : Function call FAILED
[1]: BIND returned ERROR

davis.3.4.11770.OSF1.d2log: (several of the following errors)

[5]gds_xds_str_001_bXrdu_3: Function READ :
[5]gds_xds_str_001_bXrdu_3:     session = bound_session1
[5]gds_xds_str_001_bXrdu_3:     name = name76
[5]gds_xds_str_001_bXrdu_3:     selection = entry_info_selection1
[5]gds_xds_str_001_bXrdu_3:     call ds_read()
[6]gds_xds_str_001_bXrdu_2:     xt_cmp_status: received status from XT_DSREAD w
as:
[4]gds_xds_str_001_bXrdu_1:     xt_cmp_status: received status from XT_DSREAD w
as:
[7]gds_xds_str_001_bXrdu_1:     xt_cmp_status: received status from XT_DSREAD w
as:
[6]gds_xds_str_001_bXrdu_2: "Some part of the Directory Service is not willing
to perform the operation."
[6]gds_xds_str_001_bXrdu_2: xt_cmp_status: DS_SUCCESS expected but not returned
 from XT_DSREAD
[6]gds_xds_str_001_bXrdu_2:     (ERROR) expected and received DS_status from xt
_ds_read differ
[6]gds_xds_str_001_bXrdu_2:     READ returned ERROR

[6]gds_xds_str_001_bXrdu_2: Function UNBIND :
[6]gds_xds_str_001_bXrdu_2:     session = bound_session1
[6]gds_xds_str_001_bXrdu_2:     call ds_unbind()
[4]gds_xds_str_001_bXrdu_1: "Some part of the Directory Service is not willing
to perform the operation."
[4]gds_xds_str_001_bXrdu_1: xt_cmp_status: DS_SUCCESS expected but not returned
 from XT_DSREAD
[4]gds_xds_str_001_bXrdu_1:     (ERROR) expected and received DS_status from xt
_ds_read differ
[4]gds_xds_str_001_bXrdu_1:     READ returned ERROR

[6]gds_xds_str_001_bXrdu_2: Function BIND :
[6]gds_xds_str_001_bXrdu_2:     session = session1
[6]gds_xds_str_001_bXrdu_2:     workspace = workspace1
[6]gds_xds_str_001_bXrdu_2:     call ds_bind()
[7]gds_xds_str_001_bXrdu_1: "Some part of the Directory Service is not willing
to perform the operation."
[7]gds_xds_str_001_bXrdu_1: xt_cmp_status: DS_SUCCESS expected but not returned
 from XT_DSREAD
[7]gds_xds_str_001_bXrdu_1:     (ERROR) expected and received DS_status from xt
_ds_read differ
[7]gds_xds_str_001_bXrdu_1:     READ returned ERROR

[8/29/94 public]

Some further info:

The gdsdirinfo command on the HP server after the tests were run returned:

#       PROCTYPE    PID    DIRID    IPCID    STATE
#
        Monitor     5549     -        5        -        
        DUA-Cache   5553     -        1        -        
        C-Stub      5555     -        2        -        
        DSA         5559     1        31       - 

The gdsdirinfo on the OSF1 client after the test run was completed returned:

#       PROCTYPE    PID    DIRID    IPCID    STATE
#
        Monitor     19955    -        5        -        
        DUA-Cache   6581     -        1        -        
        DSA         5875     1        31       -        
        C-Stub      5533     -        2        -        
        S-Stub      6039     1        11       -        
        S-Stub      6304     2        12       -        
        DSA         6049     2        32       -

[9/26/94 public]

I'm going to reassign this to test, as it looks to be a problem with setup.
Assigning more than one server per dirid may well fix this.

[10/12/94 public]
This should have been switch to the 'systest' component when this was
reassigned to 'test.'  Doing so now.



CR Number                     : 11839
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : 
Short Description             : need to add dcecp verification to audstr001 test
Reported Date                 : 8/23/94
Found in Baseline             : 1.1b14
Found Date                    : 8/23/94
Severity                      : A
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[8/23/94 public]


Need to add dcecp verification of resulting security audit trail
into audstr001 test.

[9/19/94 public]

Discussed this bug with Susan,
Can manually verify results of tests 
by doing "dcecp audtrail show" after tests complete.
Lowering priority of this bug to a 2.



CR Number                     : 11831
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dcecdsacl6
Short Description             : dcecdsacl6 config variables don't work
Reported Date                 : 8/23/94
Found in Baseline             : 1.1b14
Found Date                    : 8/23/94
Severity                      : C
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[8/23/94 public]

This test uses a variety of variables in different places to
specify the number of administrative and non-administrative
users to generate. With the current test code, the only way the
test can work is if you use the exact set of values specified
currently in the data file. The variables are interrelated in
unexpected, and not particularly obvious, ways, and they don't
define what the comments state that they define.

[9/12/94 public]

Assigned to Peter O'Malley.



CR Number                     : 11788
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dcecdsacl6
Short Description             : Test operations don't overlap
Reported Date                 : 8/19/94
Found in Baseline             : 1.1b14
Found Date                    : 8/19/94
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[8/19/94 public]

The documentation for this test states that "five administrators
on each host in Cell1 and Cell2 simulataneously verify valid and
invalid ACL entry type permissions and management on replicas, soft
links, objects, and directories." (DCE 1.0.3 Porting and Testing Guide, 
section 11.1.2.7. In the test, however, all the test operations are
performed sequentially. That is, the commands for one adminstrator
on one clearinghouse in one cell for one specified state are executed,
and then the next set for a different adminstrator are executed, etc.
There is no overlapping of operations at all in this test as far
as I can determine.

[9/12/94 public]

Assigned to Peter O'Malley



CR Number                     : 11784
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dcecdsacl6
Short Description             : dcecdsacl6 doesn't create CDS clearinghouses or replicas
Reported Date                 : 8/19/94
Found in Baseline             : 1.1b14
Found Date                    : 8/19/94
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[8/19/94 public]

cds.acl.6, prior to being ported to TET, created clearinghouses
and directory replicas. This functionality was apparently dropped 
in the port to TET, but its removal was not highlighted. The 
documentation of the TET-ized version of the test in the DCE Porting 
and Testing Guide for DCE 1.0.3 (section 11.5.4) describes this 
ts part of the test's functionality. It states, for example, that "Three 
clearinghouse replicas are created on server machines". None are actually 
created by the TET-ized version of the test.

[9/12/94 public]

Assigned to Peter O'Malley.



CR Number                     : 11741
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dced
Short Description             : DCDREL001,002, and 003 need module headers expanded
Reported Date                 : 8/17/94
Found in Baseline             : 1.1b13
Found Date                    : 8/17/94
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[8/17/94 public]

The module headers in the code modules used in DCDREL001, 002, 
and 003 have incomplete entries, such as "TBD" for items that 
have been determined. These need to be completed.

[09/28/94 public]
Not necessary for 1.1, deferred.



CR Number                     : 11740
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dced
Short Description             : Modify DCDREL002 and 003 so that each dcecp procedure targets the dced on some other node
Reported Date                 : 8/17/94
Found in Baseline             : 1.1b13
Found Date                    : 8/17/94
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[8/17/94 public]

DCDREL002 and DCDREL003 allow an unlimited number of test nodes but
are currently restricted to performing their operations locally on each 
of the test nodes selected.

When time permits these should be modified to operate between
nodes, so that the dcecp commands executed on each selected node effect
a dced on some other selected node.

[10/25/94 public]

Clearly time doesn't permit in this release. Deferred.



CR Number                     : 11739
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dced
Short Description             : DCDREL001 needs modification to use dce_server_register
Reported Date                 : 8/17/94
Found in Baseline             : 1.1b13
Found Date                    : 8/17/94
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[8/17/94 public]

DCDREL001 runs two test servers per node, with the intent being
that one of these servers will register endpoints using rpc_ep_register() 
and the other will use dce_server_register(). Since the definition
of the API for the latter routine wasn't finalized when the test
was developed, both servers were initially setup to use the former. 

The test should be enhanced when time permits to use the dced call.



CR Number                     : 11648
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : 
Short Description             : dlgcfg001 not capturing all output
Reported Date                 : 8/10/94
Found in Baseline             : 1.1b13
Found Date                    : 8/10/94
Severity                      : B
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[8/10/94 public]


The dlgcfg001 system test is not capturing all output
when there is an error.  When rsh does not succeed
it should report back an error.

[9/19/94 public]

Discussed this bug with Susan, lowering priority to a 2.



CR Number                     : 11645
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : 
Short Description             : dlgcfg001 test not checking rsh
Reported Date                 : 8/10/94
Found in Baseline             : 1.1b13
Found Date                    : 8/10/94
Severity                      : B
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[8/10/94 public]

The dlgcfg001 test does not check first if the the other
nodes in the cell are accessible by rsh.

The test should do this first.

[9/19/94 public]

After discussing with Susan, lowering priority
of this bug to a 2.



CR Number                     : 11638
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : functional tests
Short Description             : Functional test for preauth needed
Reported Date                 : 8/10/94
Found in Baseline             : 1.1b14
Found Date                    : 8/10/94
Severity                      : C
Priority                      : 1
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[8/10/94 public]

Although there are functional tests which test sec_login_validate_identity(),
a test is needed to ensure that DCE preauthentication is working
properly and it is not failing and falling back to a less secure
preauthentication.

Test would consist of attaching an pre_auth_req ERA of value 2 to a
test principal and then performing a login with valid and invalid
passwords.



CR Number                     : 11615
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : 
Short Description             : 64-bit porting changes
Reported Date                 : 8/9/94
Found in Baseline             : 1.1
Found Date                    : 8/9/94
Severity                      : E
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[8/9/94 public]

The following systest files have occurances of 'long' and 'unsigned
long's that need to be changed to 'signed32' and 'unsigned32' types:

	bank.c			rpc.cds.3_cmain.c	client_aux.c
	bankd.c			rpc.cds.3_smain.c 	server.c	
	transactions.c					client.c

	rpc.sec.2._smain.c	secrgy_client.c		dceth002_c.c
				secrgy_server.c		thd_client.c
				utils.c			thd_server.c
							thd_util.c

The following systest files needed to have the RPC stacksize increased 
for a 64-bit platform:
	
	bankd.c
	rpc.cds.3_smain.c
	rpc.sec.2_smain.c
	secrgy_server.c

The following systest files needed to have the pthread stacksize increased 
for a 64-bit platform:

	secrgy_client.c

The follOwing systset files included an include file not needed by the alpha
platform:

	xx_lib_r.c

Following are the diff files from the above files:
===========================================================================
systest/src/rpc/bank.c
------------------------------
209,211c206,208
< static void DoWithdraw(handle_t, char *, signed32, error_status_t *);
< static void DoDeposit(handle_t, char *, signed32, error_status_t *);
< static void DoInquire(handle_t, char *, signed32, error_status_t *);
---
> static void DoDeposit(handle_t, char *, long, error_status_t *);
> static void DoWithdraw(handle_t, char *, long, error_status_t *);
> static void DoInquire(handle_t, char *, long, error_status_t *);
252c249
<                                           char **, char **, signed32 *,
---
>                                           char **, char **, long *,
274,276c271
< **    long amount = -1;
< */
<       signed32 amount = -1;
---
>       long amount = -1;

569c564
<                                   signed32 *amt, unsigned32 *etry_syntax,
---
>                                   long *amt, unsigned32 *etry_syntax,
779c774
< static void DoDeposit(handle_t h, char *acct_name, signed32 amt,
---
> static void DoDeposit(handle_t h, char *acct_name, long amt,
842c837
< static void DoWithdraw(handle_t h, char *acct_name, signed32 amt,
---
> static void DoWithdraw(handle_t h, char *acct_name, long amt,
905c900
< static void DoInquire(handle_t h, char *acct_name, signed32 amt,
---
> static void DoInquire(handle_t h, char *acct_name, long amt,
                                                                      
systest/rpc/bankd.c
-----------------------------
199,201d195
< #ifdef __alpha
< #include <dce/dtss_long_size.h.
< #endif
213,216c207,210
< error_status_t res_deposit(handle_t, char *, signed32);
< error_status_t unres_deposit(handle_t, char *, signed32);
< error_status_t res_withdraw(handle_t, char *, signed32);
< error_status_t unres_withdraw(handle_t, char *, signed32);
---
> error_status_t res_deposit(handle_t, char *, long);
> error_status_t unres_deposit(handle_t, char *, long);
> error_status_t res_withdraw(handle_t, char *, long);
> error_status_t unres_withdraw(handle_t, char *, long);
242c236
< signed32 NumAccts, NextAcct;
---
> long NumAccts, NextAcct;
276,278c270
< #ifdef __alpha
<         unsigned32 thread_stack_size, status;
< #endif
---
>
283,296d274
< #if BITS_IN_LONG >= 64
<         /*
<          * If 64 bits, increase the RPC thread stack size, because
<        * addresses take twice as much room.
<         */
<          thread_stack_size = 64000;
<          rpc_mgmt_set_server_stack_size(thread_stack_size, &status);
<          if (status != rpc_s_ok)
<                 {
<                 perror("\n Error increasing thread_stack_size");
<                 exit(1);
<                 }
< #endif
<
628c606
<       signed32 tot;
---
>       long tot;
791c769
<       signed32 current_time;
---
>       long current_time;
888c866
< error_status_t res_deposit(handle_t h, char *acct_name, signed32 amount)
---
> error_status_t res_deposit(handle_t h, char *acct_name, long amount)
962c940
< error_status_t res_withdraw(handle_t h, char *acct_name, signed32 amount)
---
> error_status_t res_withdraw(handle_t h, char *acct_name, long amount)
1041c1019

< error_status_t unres_deposit(handle_t h, char *acct_name, signed32 amount)
---
> error_status_t unres_deposit(handle_t h, char *acct_name, long amount)
1108c1086
< error_status_t unres_withdraw(handle_t h, char *acct_name, signed32 amount)
---
> error_status_t unres_withdraw(handle_t h, char *acct_name, long amount)
                                                                          
systest/rpc/transactions.c
------------------------------
<  *
142,145c138,141
<       signed32 ck_trans;      /* total checking transactions */
<       signed32 sv_trans;      /* total savings transactions */
<       signed32 cd_trans;      /* total cd transactions */
<       signed32 ira_trans;     /* total ira transactions */
---
>       long ck_trans;  /* total checking transactions */
>       long sv_trans;  /* total savings transactions */
>       long cd_trans;  /* total cd transactions */
>       long ira_trans; /* total ira transactions */
164c160
<       signed32 amount, finish_time;
---
>       long amount, finish_time;
193,194c189,190
<       finish_time = time((signed32 *)0) + atoi(argv[4]);
<       while (time((signed32 *)0) < finish_time)
---
>       finish_time = time((long *)0) + atoi(argv[4]);
>       while (time((long *)0) < finish_time)
196c192
<               srand((int) time((signed32 *)0));
---
>               srand((int) time((long *)0));
201c197
<               srand((int) time((signed32 *)0));
---
>               srand((int) time((long *)0));
207c203
<               srand((int) time((signed32 *)0));
---
>               srand((int) time((long *)0));
212c208
<               srand((int) time((signed32 *)0));
---
>               srand((int) time((long *)0));

systest/rpc/rpc.cds.3/rpc.cds.3_cmain.c
-------------------------------------------
323c319
< signed32  id_lifetime;             /*---* expiration interval      *---*/
---
> long  id_lifetime;                 /*---* expiration interval      *---*/
2225c2221
<    signed32 tbuf;
---
>    long tbuf;

systest/rpc/rpc.cds.3/rpc.cds.3_smain.c
-----------------------------------------
<  *
315c310
< signed32  id_lifetime;
---
> long  id_lifetime;
575,577c570
< #ifdef __alpha
<    unsigned32 thread_stack_size;
< #endif
---
>
1442,1456c1435
< #if BITS_IN_LONG >=64
<      /*
<       * If 64 bits, increase the RPC thread stack size, because
<       * addresses take twice as much room.
<      */
<      thread_stack_size = 64000;
<      rpc_mgmt_set_server_stack_size(thread_stack_size, &status);
<      if (status != rpc_s_ok)
<       {
<       perror("rpc stacksize increase failed");
<       exit(1);

< #endif

systest/rpc/rpc.sec.2/rpc.sec.2_smain.c
--------------------------------------------
<  *
233,236d228
< #ifdef __alpha
< #include <dce/dtss_long_size.h>
< #include <rpc.h>
< #endif
247,250d238
<
< #ifdef __alpha
< unsigned32 thread_stack_size;
< #endif
332c320
< signed32  id_lifetime;
---
> long  id_lifetime;
1323,1336d1310
<
< #if BITS_IN_LONG >= 64
<    /*
<     * If 64 bits, increase the RPC thread stack size, because
<     * addresses take twice as much room.
<    */
<    thread_stack_size = 64000;
<    rpc_mgmt_set_server_stack_size(thread_stack_size, &status);
<    if (status != rpc_s_ok)
<      {
<       perror(" \n Error increasing thread_stack_size :");
<       exit(1);
<       }
< #endif

systest/security/sec.rgy.7/secrgy_client.c
--------------------------------------------
<  *
105,107c101
< #ifdef __alpha
< #include <dce/dtss_long_size.h>
< #endif
---
>
210,214d203
<
< #ifdef __alpha
<    pthread_attr_t       attr;
<    int                  stacksize;
< #endif
252c241
<                 duration =  atoi(optarg);
---
>                 duration =  atol(optarg);
271c260
<                 client_number = atoi(optarg);
---
>                  client_number = atol(optarg);
284c273
<                 delay = atoi(optarg);
---
>                 delay = atol(optarg);
288c277
<                 add_number = atoi(optarg);
---
>                 add_number = atol(optarg);
490,514d478
< #if BITS_IN_LONG >= 64
<   /* Increase pthreads stack size, because 64 bit addresses need twice
<   ** as much room.
<   */
<   ret = pthread_attr_create(&attr);
<   if (ret == -1)
<    {
<       perror("pthread_attr_create failed");
<       exit(0);
<    }
<    stacksize = pthread_attr_getstacksize(attr);
<    if (ret == -1)
<    {
<       perror("pthread_attr_getstacksize failed");
<       exit(0);
<    }
<    stacksize = 64000;
<    ret = pthread_attr_setstacksize(&attr,stacksize);
<    if (ret == -1)
<    {
<       perror("pthread_attr_set stacksize failed");
<       exit(0);
<    }
<
<    /* create the threads using the new attributes */
518,527d481
<                       attr,
<                       (pthread_startroutine_t) do_test,
<                       (pthread_addr_t) &call_args[i]);
<       }
<
< #else /* create the threads using the default */
<
<    if ( server_exit_f != TRUE && userkey == NULL ){
<       for (i = 0; i < client_number; ++i) {
<               ret = pthread_create ( &thd_id[i],
532d485
532d485
< #endif
579,580c532,533
<               unsigned32 esize,
<               unsigned32 *ecount)
---
>               unsigned long esize,
>               unsigned long *ecount)
606c559
<                  unsigned32 bsize,
---
>                  unsigned long bsize,
608c561
<                  unsigned32 *bcount)
---
>                  unsigned long *bcount)
                                       
systest/security/sec.rgy.7/secrgy_server.c
------------------------------------------------
<  *
121,123c117
< #ifdef __alpha
< #include <dce/dtss_long_size.h>
< #endif
---
>
130,134d123
< #ifdef __alpha
< unsigned32      thread_stack_size;
< int             pstacksize;
< pthread_attr_t  attr;
< #endif
215,216c204,205
<    signed32           cert_expire;
<    signed32           refresh_interval;
---
>    long                       cert_expire;
>    long               refresh_interval;
470,516d458
< #if BITS_IN_LONG >= 64
<         /*
<         ** Increase the pthread stacksize because 64 bit addresses take twice
<         ** as much room.
<         */
<         ret = pthread_attr_create(&attr);
<         if (ret == -1)
<         {
<             perror("pthread_attr_create failed");
<             exit(0);
<         }
<         pstacksize = pthread_attr_getstacksize(attr);
<         if (ret == -1)
<         {
<             perror("pthread_attr_getstacksize failed");
<             exit(0);
<         }
<         pstacksize = 64000;
<         ret = pthread_attr_setstacksize(&attr,pstacksize);
<         if (ret == -1)
<         {
<             perror("pthread_attr_set stacksize failed");
<             exit(0);
<         }
<
<         /*
<         ** Increase the RPC thread stacksize, also.
<         */
<         thread_stack_size = 50000;
<         rpc_mgmt_set_server_stack_size(thread_stack_size, &tstatus);
<         if (tstatus != rpc_s_ok)
<           {
<           perror("rpc stacksize increase failed");
<           exit(1);
<           }
<
<
<         /* Create the thread using the increased values */
<         if (pthread_create(&thread_id,
<                                attr,
<           (pthread_startroutine_t)maintain_id,
<           (pthread_addr_t)&ref_thread_params) != 0 ) {
<               perror(" \n    Error creating refresh thread:");
<               exit(1);
<        }
<
< #else  /* Create the thread using the defaults */
523,524d464
< #endif
<
584,588c524,528
<    unsigned32                 secs;
<    unsigned32                 microsecs;
<    unsigned32                 rt_secs;
<    unsigned32                 rt_duration;
<    signed32                   cert_expire;
---
>    unsigned long              secs;
>    unsigned long              microsecs;
>    unsigned long              rt_secs;
>    unsigned long              rt_duration;
>    long                               cert_expire;
621c561
< #if defined(SNI_SVR4) || defined(__alpha)
---
> #ifdef SNI_SVR4
648c588
<     unsigned32 data_count;
---
>     unsigned long data_count;

708c648
<       signed32                add_number,
---
>       long                    add_number,
719,720c659,660
<       unsigned32              secs;
<       unsigned32              microsecs;
---
>       unsigned long           secs;
>       unsigned long           microsecs;
781c721
<       signed32                add_number,
---
>       long                    add_number,
792,793c732,733
<       unsigned32              secs;
<       unsigned32              microsecs;
---
>       unsigned long           secs;
>       unsigned long           microsecs;
907c847
<    signed32           cert_expire;
---
>    long                       cert_expire


systest/security/utils.c
------------------------------
120c117
< void getimer(unsigned32 *sec, unsigned32 *usec)
---
> void getimer(long *sec, long *usec)
122c119
<         unsigned32 tsec;
---
>         long tsec;
272c269
< signed32           unix_num;
---
> long               unix_num;

systest/threads/dceth002_c.c
-------------------------------
167c165
<     threads_p = (pthread_t *)malloc(sizeof(pthread_t)*thread_count);
---
>     threads_p = malloc(sizeof(pthread_t)*thread_count);

systest/threads/thd_client.c
------------------------------
412c409
< void assign_array(signed32 *a, int n)
---
> void assign_array(long *a, int n)
417c414
<               a[i] = (signed32)i;
---
>               a[i] = (long)i;
429,430c426,427
<       void allocate_arrays(signed32 **, signed32 **, int), assign_arrays(signe
d32 *, int);
<       void validate_and_free_arrays(signed32 *, signed32 *, int, char *);
---
>       void allocate_arrays(long **, long **, int), assign_arrays(long *, int);
>       void validate_and_free_arrays(long *, long *, int, char *);
437c434
<       signed32 *original, *copy;
---
>       long *original, *copy;
440,446c437,443
<
<       rpc_string_binding_compose((unsigned_char_t *)nil_string,
<                                   (unsigned_char_t *)a->protocol,
<                                   (unsigned_char_t *)a->address,
<                                   (unsigned_char_t *)a->endpoint,
<                                   (unsigned_char_t *)nil_string,
<                                   (unsigned_char_t **)&string_binding,
---
>
>       rpc_string_binding_compose(nil_string,
>                                   a->protocol,
>                                   a->address,
>                                   a->endpoint,
>                                   nil_string,
>                                   &string_binding,
452c449
<       rpc_binding_from_string_binding((unsigned_char_p_t)string_binding, &rh,
&status);
---
>       rpc_binding_from_string_binding(string_binding, &rh, &status);
518c515
< void allocate_arrays(signed32 **original_array, signed32 **copy_array, int arr
ay_size)
---
> void allocate_arrays(long **original_array, long **copy_array, int array_size)
520,521c517,518
<       *original_array = (signed32 *) malloc(array_size * sizeof(signed32));
<       if (*original_array == (signed32 *)NULL)
---
>       *original_array = (long *) malloc(array_size * sizeof(long));
>       if (*original_array == (long *)NULL)
528,529c525,526
<       *copy_array = (signed32 *) malloc(array_size * sizeof(signed32));
<       if (*copy_array == (signed32 *)NULL)
---
>       *copy_array = (long *) malloc(array_size * sizeof(long));
>       if (*copy_array == (long *)NULL)
542c539
< void validate_and_free_arrays(signed32 *original_array, signed32 *copy_array,
---
> void validate_and_free_arrays(long *original_array, long *copy_array,
                                                                          
systest/rpc/threads/thd_server.c
-------------------------------------
161,162c158,159
<       signed32 *orig_ar;     /* address of the original array */
<       signed32 *sub_ar;      /* address of the copy array */
---
>       long *orig_ar;     /* address of the original array */
>       long *sub_ar;      /* address of the copy array */
182c179
<       void get_port(unsigned_char_t *, unsigned_char_t *, unsigned32), get_and
_show_bindings(void);
---
>       void get_port(char *, char *, unsigned32), get_and_show_bindings(void);
214c211
<       get_port((unsigned_char_t *)protocol, (unsigned_char_t *)endpoint, max_c
alls);
---
>       get_port(protocol, endpoint, max_calls);
318c315
< void get_port(unsigned_char_t *prot, unsigned_char_t *port, unsigned32 max)
---
> void get_port(char *prot, char *port, unsigned32 max)
322c319
<       rpc_server_use_protseq_ep(prot, max, (unsigned_char_t *)port, &status);
---
>       rpc_server_use_protseq_ep(prot, max, port, &status);
350,353c347,349
<                 rpc_binding_to_string_binding(bind_vec->binding_h[i],
<                               (unsigned_char_p_t *)&string_binding,
<                               &status);
<
---
>               rpc_binding_to_string_binding(bind_vec->binding_h[i],
>                                            &string_binding,
>                                            &status);
359c355
<                 rpc_string_free((unsigned_char_p_t *)&string_binding, &status)
;
---
>                 rpc_string_free(&string_binding, &status);
411,412c407,408
< error_status_t thd_read_portion (handle_t h, signed32 *orig_ar, signed32 s, si
gned32 *copy,
<                                signed32 mi, signed32 count, signed32 chunks)
---
> error_status_t thd_read_portion (handle_t h, long *orig_ar, long s, long *copy
,
>				long mi, long count, long chunks)


systest/threads/thd_util.c
------------------------------
257c254
<       unsigned32 long_host_addr;
---
>       ulong long_host_addr;
260c257
<       hp = gethostbyaddr(&long_host_addr, sizeof(unsigned32), AF_INET);
---
>       hp = gethostbyaddr(&long_host_addr, sizeof(ulong), AF_INET);
514a512
> }

systest/tools/xx_lib_r.c
---------------------------
108d104
< #ifndef __alpha
110d105
< #endif

[10/11/94 public]
Bumping priority to 0 and assigning to Susan now that the unintegrated
tree is open. The steps that need to happen are:
	- changes reviewed
	- changes tested
	- submission to unintegrated
	- logs compressed and placed in project archive
	- pointer in Rel Notes to tests and logs

The changed files and logs are in:

	/afs/dce.osf.org/project/dce/osf/gmd

The review should verify that there are no "ifdef/ifndef alpha"
directives and that the:

#if BITS_IN_LONG >= 64

directives have been changed to

#if LONG_BIT >= 64

I promised Kim all the tests and logs would go out on the 1.1 tape.
If the unintegrated tree is not appropriate (ie. because the above
steps can not happen), please submit to the nosupport/unsupport area.

Kim tested on:
	- 1.1 on the intel 486/osf1
	- 1.0.3 on the HP/hp-ux

[10/17/94 public]
I've reviewed the changes and just noticed that there is still one
instance of 'alpha' used in secrgy_server.c:
616c561
< #if defined(SNI_SVR4) || defined(__alpha)
---
> #ifdef SNI_SVR4

Is this required?  Also, can you tell me where I can get the
full files so that I can try to build/run them on the 1.1 HP
platform?  If they are checked into your sandbox I can just 
check them out from that branch into my sanbox and rebuild.

[10/26/94 public]
Due to time constraints, we were unable to test these changes in 
time for submission to the unintegrated tree.  So we've included
the diffs here:


===src/test/systest/audit/ts/Makefile===
30c30
< audrel001_LIBS		= -ltettcm -ltetapi -ldcetst -laudit ${${TARGET_MACHINE}_LIBS} -ldce 
---
> audrel001_LIBS		= -ltettcm -ltetapi -ldcetst -laudit -ldce 

===src/test/systest/dced/ts/rel/dcdrel001/Makefile===
49c49
< LIBS		= -ldceutils -ldcetst -ldcdtst ${${TARGET_MACHINE}_LIBS} -ldce
---
> LIBS		= -ldceutils -ldcetst -ldcdtst -ldce

===src/test/systest/dced/ts/rel/dcdrel002/Makefile===
40c40
< LIBS            =  ${${TARGET_MACHINE}_LIBS} -ldce
---
> LIBS            =  -ldce

===src/test/systest/dced/ts/rel/dcdrel003/Makefile===
46c46
< LIBS            = ${${TARGET_MACHINE}_LIBS} -ldce
---
> LIBS            = -ldce

===src/test/systest/rpc/rpc.cds.3/Makefile===
134c134
< LIBS = -ldce ${${TARGET_MACHINE}_LIBS}
---
> LIBS = -ldce

===src/test/systest/rpc/rpc.sec.2/Makefile===
174c174
< LIBS = -ldce ${${TARGET_MACHINE}_LIBS} 
---
> LIBS = -ldce  

===src/test/systest/rpc/bank.c===
11,13d10
<  * Revision for AXP porting purposes 1994/08/08 khelbick
<  * 	Changed longs to signed32 and unsigned longs to unsigned32 
<  *
209,211c206,208
< static void DoWithdraw(handle_t, char *, signed32, error_status_t *); 
< static void DoDeposit(handle_t, char *, signed32, error_status_t *); 
< static void DoInquire(handle_t, char *, signed32, error_status_t *);
---
> static void DoDeposit(handle_t, char *, long, error_status_t *); 
> static void DoWithdraw(handle_t, char *, long, error_status_t *); 
> static void DoInquire(handle_t, char *, long, error_status_t *);
252c249
< 					    char **, char **, signed32 *, 
---
> 					    char **, char **, long *, 
274,276c271
< ** 	long amount = -1; 
< */
< 	signed32 amount = -1; 
---
> 	long amount = -1; 
569c564
< 				    signed32 *amt, unsigned32 *etry_syntax, 
---
> 				    long *amt, unsigned32 *etry_syntax, 
779c774
< static void DoDeposit(handle_t h, char *acct_name, signed32 amt, 
---
> static void DoDeposit(handle_t h, char *acct_name, long amt, 
842c837
< static void DoWithdraw(handle_t h, char *acct_name, signed32 amt, 
---
> static void DoWithdraw(handle_t h, char *acct_name, long amt, 
905c900
< static void DoInquire(handle_t h, char *acct_name, signed32 amt, 
---
> static void DoInquire(handle_t h, char *acct_name, long amt, 

===src/test/systest/rpc/bankd===
11,13d10
<  * Revision for AXP porting purposes 1994/08/08 khelbick
<  *      Increases RPC stacksize for 64-bit compatibility 
<  *
210,213c207,210
< error_status_t res_deposit(handle_t, char *, signed32); 
< error_status_t unres_deposit(handle_t, char *, signed32); 
< error_status_t res_withdraw(handle_t, char *, signed32); 
< error_status_t unres_withdraw(handle_t, char *, signed32);
---
> error_status_t res_deposit(handle_t, char *, long); 
> error_status_t unres_deposit(handle_t, char *, long); 
> error_status_t res_withdraw(handle_t, char *, long); 
> error_status_t unres_withdraw(handle_t, char *, long);
239c236
< signed32 NumAccts, NextAcct;
---
> long NumAccts, NextAcct;
273,275c270
< #ifdef __osf__
<         unsigned32 thread_stack_size, status; 
< #endif
---
> 
280,293d274
< #if LONG_BIT >= 64
<         /* 
<          * If 64 bits, increase the RPC thread stack size, because
< 	 * addresses take twice as much room.
<         */
<          thread_stack_size = 24000;
<          rpc_mgmt_set_server_stack_size(thread_stack_size, &status);
<          if (status != rpc_s_ok)
<                 {
<                 perror("\n Error increasing thread_stack_size");
<                 exit(1);
<                 }
< #endif
< 
625c606
< 	signed32 tot;
---
> 	long tot;
788c769
< 	signed32 current_time;
---
> 	long current_time;
885c866
< error_status_t res_deposit(handle_t h, char *acct_name, signed32 amount)
---
> error_status_t res_deposit(handle_t h, char *acct_name, long amount)
959c940
< error_status_t res_withdraw(handle_t h, char *acct_name, signed32 amount)
---
> error_status_t res_withdraw(handle_t h, char *acct_name, long amount)
1038c1019
< error_status_t unres_deposit(handle_t h, char *acct_name, signed32 amount)
---
> error_status_t unres_deposit(handle_t h, char *acct_name, long amount)
1105c1086
< error_status_t unres_withdraw(handle_t h, char *acct_name, signed32 amount)
---
> error_status_t unres_withdraw(handle_t h, char *acct_name, long amount)

===src/test/systest/rpc/bnk_util===
11,13d10
<  * Revision 1994/08/08 khelbick
<  * 	cast malloc of uuid_* for 64-bit compatability
<  *
287c284
< 	uuid_t *handle_obj = (uuid_t *)malloc(sizeof(uuid_t));
---
> 	uuid_t *handle_obj = malloc(sizeof(uuid_t));

===src/test/systest/rpc/rpc.runtime.1/client.c===
11,13d10
<  * Revision for AXP porting purposes 1994/08/08 khelbick
<  *      Changed longs to signed32 and unsigned longs to unsigned32 
<  *
196c193
<         my_addr = *(unsigned32 *) hp->h_addr;
---
>         my_addr = *(unsigned long *) hp->h_addr;

===src/test/systest/rpc/rpc.runtime.1/client_aux.c===
11,13d10
<  * Revision for AXP porting purposes 1994/08/08 khelbick
<  *      Changed longs to signed32 and unsigned longs to unsigned32
<  *
66,67c63,64
< void client_alloc (ndr_void_p_t state,
< 		   unsigned32 bsize,
---
>  void client_alloc (ndr_void_p_t state,
> 		   unsigned long bsize,
69c66
< 		   unsigned32 *bcount)
---
> 		   unsigned long *bcount)
76c73
< void client_iop_pull (rpc_ss_pipe_state_t state_arg,
---
>  void client_iop_pull (rpc_ss_pipe_state_t state_arg,
78,79c75,77
< 		      unsigned32 esize,
< 		      unsigned32 *ecount)
---
>  		      unsigned long esize,
> 		      unsigned long *ecount)
> 
113c111
< 		      unsigned32 ecount)
---
> 		      unsigned long ecount)
163c161
<     unsigned32 msec;
---
>     unsigned long msec;
173c171
<         unsigned32 elapsed_usec;
---
>          unsigned long elapsed_usec;
185,186c183,184
<         avg_time->msec = (unsigned32) (elapsed_usec / 1000);
<         avg_time->usec = (unsigned32) (elapsed_usec % 1000);
---
>          avg_time->msec = (unsigned long) (elapsed_usec / 1000);
>         avg_time->usec = (unsigned long) (elapsed_usec % 1000);
207,208c205,206
<     iop_struct.pull = (void *)client_iop_pull;
<     iop_struct.push = (void *)client_iop_push;
---
>     iop_struct.pull = client_iop_pull;
>     iop_struct.push = client_iop_push;

===src/test/systest/rpc/rpc.runtime.1/dcerpcrun===
336,338d335
< # we had problems with this in v1.0.3 test script - had to change to 
< # while [ $n -le $NETRETRYS ] && [ $n -ne $status ] && [ $n -ne $rflag ] 
< # kh - 8/8/94
354,358d350
< # there is no match function in DEC/OSF 1 awk function - however, it is
< # supported in gawk from Free Software Foundation which OSF supports - kh
< # in V1.0.3 script I changed this to gawk as follows:
< # print - $pingresult | gawk '{ if (match($(NF-2),"100%")) {exit 1} else {exit 0# } }' - kh 8/8/94
< 

===src/test/systest/threads/dceth002_c.c===
11,12d10
<  * Revision 1994/08/08 
<  *    Cast the malloc to the correct type. C Groder 8/94 
167c165
<     threads_p = (pthread_t *)malloc(sizeof(pthread_t)*thread_count);
---
>     threads_p = malloc(sizeof(pthread_t)*thread_count);

===src/test/systest/rpc/rpc.runtime.1/dumpDB.c===
23d22
< #ifndef __osf__
25,26d23
< #ifndef __i386
< #ifndef __hpux           /** cg add - not needed for HPUX or i386*/

===src/test/systest/rpc/rpc.cds.3/rpc.cds.3_cmain.c===
11,14d10
<  *
<  * Revision for AXP porting purposes 1994/08/08 khelbick
<  *      Changed longs to signed32 and unsigned longs to unsigned32
<  *
323c319
< signed32  id_lifetime;             /*---* expiration interval      *---*/
---
> long  id_lifetime;                 /*---* expiration interval      *---*/
2225c2221
<    signed32 tbuf;
---
>    long tbuf;

===src/test/systest/rpc/rpc.cds.3/rpc.cds.3_smain.c===
11,15d10
<  *
<  * Revision for AXP porting purposes 1994/08/08 khelbick
<  *      Changed longs to signed32 and unsigned longs to unsigned32
<  * 	Increase RPC stacksize for 64-bit compatibility
<  *
315c310
< signed32  id_lifetime;
---
> long  id_lifetime;
575,577c570
< #ifdef __osf__
<    unsigned32 thread_stack_size;
< #endif
---
> 
1442,1456c1435
< #if LONG_BIT >=64
<      /*
<       * If 64 bits, increase the RPC thread stack size, because
<       * addresses take twice as much room.
<      */
<      thread_stack_size = 64000; 
<      rpc_mgmt_set_server_stack_size(thread_stack_size, &status);
<      if (status != rpc_s_ok) 
< 	{
< 	perror("rpc stacksize increase failed");
< 	exit(1);
<         }
< #endif
< 
<     /*---*
---
>    /*---*

===src/test/systest/rpc/rpc.sec.2/rpc.sec.2_smain.c===
11,14d10
<  * Revision for AXP porting purposes 1994/08/08 khelbick
<  *      Changed longs to signed32 and unsigned longs to unsigned32
<  *  	Increased RPC stacksize for 64-bit compatability
<  *
233d228
< #include <dce/rpc.h>
244,247d238
< 
< #ifdef __osf__
< unsigned32 thread_stack_size;
< #endif
329c320
< signed32  id_lifetime;
---
> long  id_lifetime;
1320,1333d1310
< 
< #if LONG_BIT >= 64
<    /* 
<     * If 64 bits, increase the RPC thread stack size, because
<     * addresses take twice as much room.
<    */
<    thread_stack_size = 64000;
<    rpc_mgmt_set_server_stack_size(thread_stack_size, &status);
<    if (status != rpc_s_ok)
<      {   
<       perror(" \n Error increasing thread_stack_size :");
<       exit(1);
<       }
< #endif

===src/test/systest/security/sec.rgy.7/secrgy_client.c===
11,14d10
<  * Revision for AXP porting purposes 1994/08/08 khelbick
<  *      Changed longs to signed32 and unsigned longs to unsigned32
<  *      Increased pthread stacksize to be 64-bit compatible  
<  *
104a101
> 
207,211d203
< 
< #ifdef __osf__
<    pthread_attr_t       attr;
<    int                  stacksize;
< #endif
249c241
<                 duration =  atoi(optarg);
---
>                 duration =  atol(optarg);
268c260
<                 client_number = atoi(optarg);
---
>                  client_number = atol(optarg);
281c273
<                 delay = atoi(optarg);
---
>                 delay = atol(optarg);
285c277
<                 add_number = atoi(optarg);
---
>                 add_number = atol(optarg);
487,511d478
< #if LONG_BIT >= 64
<   /* Increase pthreads stack size, because 64 bit addresses need twice 
<   ** as much room.
<   */
<   ret = pthread_attr_create(&attr);
<   if (ret == -1)
<    {
< 	perror("pthread_attr_create failed");
< 	exit(0);
<    }
<    stacksize = pthread_attr_getstacksize(attr);
<    if (ret == -1)
<    {
< 	perror("pthread_attr_getstacksize failed");
< 	exit(0);
<    }
<    stacksize = 64000; 
<    ret = pthread_attr_setstacksize(&attr,stacksize);
<    if (ret == -1)
<    {
< 	perror("pthread_attr_set stacksize failed");
< 	exit(0);
<    }
< 
<    /* create the threads using the new attributes */
515,524d481
< 			attr, 
< 			(pthread_startroutine_t) do_test,
< 			(pthread_addr_t) &call_args[i]); 
<    	}
< 
< #else /* create the threads using the default */
< 
<    if ( server_exit_f != TRUE && userkey == NULL ){	
<    	for (i = 0; i < client_number; ++i) {
< 		ret = pthread_create ( &thd_id[i], 
529d485
< #endif
576,577c532,533
< 		unsigned32 esize,
< 		unsigned32 *ecount)
---
> 		unsigned long esize,
> 		unsigned long *ecount)
603c559
< 		   unsigned32 bsize,
---
> 		   unsigned long bsize,
605c561
< 		   unsigned32 *bcount)
---
> 		   unsigned long *bcount)

===src/test/systest/security/sec.rgy.7/secrgy_server.c===
11,14d10
<  * Revision for AXP porting purposes 1994/08/08 khelbick
<  *      Changed longs to signed32 and unsigned longs to unsigned32
<  *	Increased pthread stacksize for 64-bit compatibility
<  *
120a117
> 
127,131d123
< #ifdef __osf__
< unsigned32      thread_stack_size;
< int             pstacksize;
< pthread_attr_t  attr;
< #endif
212,213c204,205
<    signed32		cert_expire;
<    signed32		refresh_interval;
---
>    long			cert_expire;
>    long 		refresh_interval;
467,513d458
< #if LONG_BIT >= 64
<         /*
<         ** Increase the pthread stacksize because 64 bit addresses take twice
<         ** as much room.
<         */
<         ret = pthread_attr_create(&attr);
<         if (ret == -1)
<         {
<             perror("pthread_attr_create failed");
<             exit(0);
<         }
<         pstacksize = pthread_attr_getstacksize(attr);
<         if (ret == -1)
<         {
<             perror("pthread_attr_getstacksize failed");
<             exit(0);
<         }
<         pstacksize = 64000;
<         ret = pthread_attr_setstacksize(&attr,pstacksize);
<         if (ret == -1)
<         {
<             perror("pthread_attr_set stacksize failed");
<             exit(0);
<         }
<                                                  
<         /*
<         ** Increase the RPC thread stacksize, also.
<         */
<         thread_stack_size = 50000;
<         rpc_mgmt_set_server_stack_size(thread_stack_size, &tstatus);
<         if (tstatus != rpc_s_ok)
< 	    {
<     	    perror("rpc stacksize increase failed");
< 	    exit(1);
< 	    }
< 
<        
<         /* Create the thread using the increased values */
<         if (pthread_create(&thread_id,
<           			 attr,
<           (pthread_startroutine_t)maintain_id,
<           (pthread_addr_t)&ref_thread_params) != 0 ) {
<           	perror(" \n    Error creating refresh thread:");
<           	exit(1);
<        }
< 
< #else  /* Create the thread using the defaults */
522c467
< #endif
---
> 
579,583c524,528
<    unsigned32   		secs; 
<    unsigned32   		microsecs;
<    unsigned32    		rt_secs;
<    unsigned32    		rt_duration;
<    signed32			cert_expire;
---
>    unsigned long		secs; 
>    unsigned long		microsecs;
>    unsigned long 		rt_secs;
>    unsigned long		rt_duration;
>    long				cert_expire;
616c561
< #if defined(SNI_SVR4) || defined(__alpha) 
---
> #ifdef SNI_SVR4
643c588
<     unsigned32 data_count;
---
>     unsigned long data_count;
703c648
< 	signed32		add_number,
---
> 	long			add_number,
714,715c659,660
<    	unsigned32		secs; 
<    	unsigned32		microsecs;
---
>    	unsigned long		secs; 
>    	unsigned long		microsecs;
776c721
< 	signed32		add_number,
---
> 	long			add_number,
787,788c732,733
<    	unsigned32		secs; 
<    	unsigned32		microsecs;
---
>    	unsigned long		secs; 
>    	unsigned long		microsecs;
902c847
<    signed32		cert_expire;
---
>    long			cert_expire;

===src/test/systest/rpc/rpc.runtime.1/server.c===
11,14d10
<  * Revision for AXP porting purposes 1994/08/08 khelbick
<  *      Changed longs to signed32 and unsigned longs to unsigned32
<  *	Included include file stdlib.h - needed for clean compile
<  *
224c220
<     rpc_server_listen((signed32)1, &st);
---
>     rpc_server_listen((long)1, &st);

===src/test/systest/threads/thd_client.c===
11,13d10
<  * Revision for AXP porting purposes 1994/08/08 khelbick
<  *      Changed longs to signed32 and unsigned longs to unsigned32
<  * 
412c409
< void assign_array(signed32 *a, int n)
---
> void assign_array(long *a, int n)
417c414
< 		a[i] = (signed32)i;
---
> 		a[i] = (long)i;
429,430c426,427
< 	void allocate_arrays(signed32 **, signed32 **, int), assign_arrays(signed32 *, int);
< 	void validate_and_free_arrays(signed32 *, signed32 *, int, char *);
---
> 	void allocate_arrays(long **, long **, int), assign_arrays(long *, int);
> 	void validate_and_free_arrays(long *, long *, int, char *);
437c434
< 	signed32 *original, *copy;
---
> 	long *original, *copy;
440,446c437,443
< 
< 	rpc_string_binding_compose((unsigned_char_t *)nil_string,
< 				    (unsigned_char_t *)a->protocol,
< 				    (unsigned_char_t *)a->address,
< 				    (unsigned_char_t *)a->endpoint,
< 				    (unsigned_char_t *)nil_string,
< 				    (unsigned_char_t **)&string_binding,
---
> 	
> 	rpc_string_binding_compose(nil_string,
> 				    a->protocol,
> 				    a->address,
> 				    a->endpoint,
> 				    nil_string,
> 				    &string_binding,
518c515
< void allocate_arrays(signed32 **original_array, signed32 **copy_array, int array_size)
---
> void allocate_arrays(long **original_array, long **copy_array, int array_size)
520,521c517,518
< 	*original_array = (signed32 *) malloc(array_size * sizeof(signed32));
< 	if (*original_array == (signed32 *)NULL)
---
> 	*original_array = (long *) malloc(array_size * sizeof(long));
> 	if (*original_array == (long *)NULL)
528,529c525,526
< 	*copy_array = (signed32 *) malloc(array_size * sizeof(signed32));
< 	if (*copy_array == (signed32 *)NULL)
---
> 	*copy_array = (long *) malloc(array_size * sizeof(long));
> 	if (*copy_array == (long *)NULL)
542c539
< void validate_and_free_arrays(signed32 *original_array, signed32 *copy_array, 
---
> void validate_and_free_arrays(long *original_array, long *copy_array, 

===src/test/systest/threads/thd_server.c===
11,13d10
<  * Revision for AXP porting purposes 1994/08/08 khelbick
<  *      Changed longs to signed32 and unsigned longs to unsigned32
<  *
161,162c158,159
< 	signed32 *orig_ar;     /* address of the original array */
< 	signed32 *sub_ar;      /* address of the copy array */
---
> 	long *orig_ar;     /* address of the original array */
> 	long *sub_ar;      /* address of the copy array */
182c179
< 	void get_port(unsigned_char_t *, unsigned_char_t *, unsigned32), get_and_show_bindings(void); 
---
> 	void get_port(char *, char *, unsigned32), get_and_show_bindings(void); 
214c211
< 	get_port((unsigned_char_t *)protocol, (unsigned_char_t *)endpoint, max_calls);
---
> 	get_port(protocol, endpoint, max_calls);
318c315
< void get_port(unsigned_char_t *prot, unsigned_char_t *port, unsigned32 max)
---
> void get_port(char *prot, char *port, unsigned32 max)
322c319
< 	rpc_server_use_protseq_ep(prot, max, (unsigned_char_t *)port, &status);
---
> 	rpc_server_use_protseq_ep(prot, max, port, &status);
350,353c347,349
<                 rpc_binding_to_string_binding(bind_vec->binding_h[i],
< 				(rpc_binding_handle_t *)&string_binding,
< 			        &status);
< 
---
> 		rpc_binding_to_string_binding(bind_vec->binding_h[i],
> 					     &string_binding,
> 					     &status);
359c355
<                 rpc_string_free((rpc_binding_handle_t *)&string_binding, &status);
---
>                 rpc_string_free(&string_binding, &status);
411,412c407,408
< error_status_t thd_read_portion (handle_t h, signed32 *orig_ar, signed32 s, signed32 *copy,
< 				 signed32 mi, signed32 count, signed32 chunks)
---
> error_status_t thd_read_portion (handle_t h, long *orig_ar, long s, long *copy,
> 				 long mi, long count, long chunks)

===src/test/systest/threads/thd_util.c===
11,13d10
<  * Revision for AXP porting purposes 1994/08/08 khelbick
<  *      Changed longs to signed32 and unsigned longs to unsigned32
<  *
257c254
< 	unsigned32 long_host_addr;
---
> 	ulong long_host_addr;
260c257
< 	hp = gethostbyaddr(&long_host_addr, sizeof(unsigned32), AF_INET);
---
> 	hp = gethostbyaddr(&long_host_addr, sizeof(ulong), AF_INET);
514a512
> }

===src/test/systest/rpc/transactions.c===
11,14d10
<  *
<  * Revision for AXP porting purposes 1994/08/08 khelbick
<  *      Changed longs to signed32 and unsigned longs to unsigned32
<  *
127,130d122
< #include <dce/dce.h>
< #ifdef __osf__
< #include <dce/nbase.h>
< #endif
146,149c138,141
< 	signed32 ck_trans; 	/* total checking transactions */
< 	signed32 sv_trans; 	/* total savings transactions */
< 	signed32 cd_trans; 	/* total cd transactions */
< 	signed32 ira_trans;	/* total ira transactions */
---
> 	long ck_trans; 	/* total checking transactions */
> 	long sv_trans; 	/* total savings transactions */
> 	long cd_trans; 	/* total cd transactions */
> 	long ira_trans;	/* total ira transactions */
168c160
< 	signed32 amount, finish_time;
---
> 	long amount, finish_time;
197,198c189,190
< 	finish_time = time((signed32 *)0) + atoi(argv[4]);
< 	while (time((signed32 *)0) < finish_time)
---
> 	finish_time = time((long *)0) + atoi(argv[4]);
> 	while (time((long *)0) < finish_time)
200c192
< 		srand((int) time((signed32 *)0));
---
> 		srand((int) time((long *)0));
205c197
< 		srand((int) time((signed32 *)0));
---
> 		srand((int) time((long *)0));
211c203
< 		srand((int) time((signed32 *)0));
---
> 		srand((int) time((long *)0));
216c208
< 		srand((int) time((signed32 *)0));
---
> 		srand((int) time((long *)0));

===src/test/systest/security/sec.rgy.7/utils.c===
11,13d10
<  * Revision for AXP porting purposes 1994/08/08 khelbick
<  *      Changed longs to signed32 and unsigned longs to unsigned32
<  *
120c117
< void getimer(unsigned32 *sec, unsigned32 *usec)
---
> void getimer(long *sec, long *usec)
122c119
<         unsigned32 tsec;
---
>         long tsec;
272c269
< signed32           unix_num;
---
> long               unix_num;

===src/test/systest/tools/xx_lib_r.c===
11,13d10
<  * Revision for AXP porting purposes 1994/08/08 khelbick
<  *     cma include files not needed for DEC/OSF - our threads are in kernal 
<  *
108d104
< #ifndef __osf__
110d105
< #endif



CR Number                     : 11569
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : gds
Short Description             : fix machine name output in worldSetup.gds
Reported Date                 : 8/5/94
Found in Baseline             : 1.1b13
Found Date                    : 8/5/94
Severity                      : C
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[8/5/94 public]

Test setup output should be fixed to indicate the node name where gds is being 
configured.  Test setup output currently uses the DSA directory id.



CR Number                     : 11564
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 11351
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : cds
Short Description             : rep_ch_2_checklist should not access excluded clearinghouse
Reported Date                 : 8/4/94
Found in Baseline             : 1.1b13
Found Date                    : 8/4/94
Severity                      : B
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[8/4/94 public]

Once a clearinghouse has been excluded using set dir to new epoch ... exclude,
it should not be accessed again.

The expected output and commands in rep_ch_2_checklist should be changed to
reflect this.

[9/26/94 public]

rep_ch_2_checklist cannot be run completely due to the inability to move the 
clearinghouse to another machine (CR 9700).



CR Number                     : 11537
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : systest
Subcomponent Name             : 
Short Description             : problems running rep_ch_1_checklist testcase
Reported Date                 : 8/3/94
Found in Baseline             : 1.0.3
Found Date                    : 8/3/94
Severity                      : C
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[8/3/94 public]

This is being opened on behalf of the IBM DCE System Test 
group.  They have been unable to run the testcase 
rep_ch_1_checklist.  Here is their report:

        OSF test case rep_ch_1_checklist needs to be reworked.

        The Following   are errors I found in OSF test   case 
        rep_ch_1_checklist, so for:

        1. According to the context, it is a mixture of automatic and 
           manual test case.    It needs to be fixed to become a 
           fully pure automatic test case.


        2. In line 370 of the test case it tries to stop dce on the remote
           host, but, then in the next line, it checks the dce status in
           the current machine.     It causes false failure because dce
           still runs on the current machine.

        line 370:       stop_dce_remote ${ADD_SRV} ${OSPASSWORD}
                                         ^^^^^^^^^
        line 371:       dcestatus ${HOSTNAME}
                                   ^^^^^^^^^^

        3. In line 501, there is an undefined "<cellname>"
 
        line 501:       cdscp create replica /.:/testdir clearinghouse \
                        /.../<cellname>/admintest_ch
                             ^^^^^^^^^^
 
        4. In line 506, there is an undefined "<local>_ch".   Also
           "(capture status)" needs either to be removed or marked as
           comment.

        line 506:       cdscp show replica /.:/testdir clearinghouse \
                        /.:/<local>_ch (capture stats)
                            ^^^^^^^^^^

        5. In line 632, the test case tries to DISABLE THE TEST CLEARINGHOUSE
           ON THE REMOTE MACHINE, but, actually, the command will be executed
           on the LOCAL machine. 

        line 632:       cdscp disable server

        6. in lines 540, 681, 743, 806 and 847, the command cdscp is executed
           interactively, it needs to be fixed to become a automatic test case.

        line 540:cdscp
        line 681:cdscp
        line 743:cdscp
        line 806:cdscp
        line 847:cdscp


        Best regards,


                Charles Hsieh

[9/12/94 public]

Assigned to Peter O'Malley.



CR Number                     : 11536
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dcegdshd
Short Description             : Add capability to GDS dcegdshd
system test to dump state information..
Reported Date                 : 8/3/94
Found in Baseline             : 1.1b13
Found Date                    : 8/3/94
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[8/3/94 public]

Add capability to GDS dcegdshd system test to dump state information
and enable tracing when a bind error occurs.



CR Number                     : 11371
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : thr
Subcomponent Name             : Makefile
Short Description             : install threads functional test and script to the install area
Reported Date                 : 7/20/94
Found in Baseline             : 1.1
Found Date                    : 7/20/94
Severity                      : D
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[7/20/94 public]

install runtest script and all the functional tests for threads.

Add the following two lines to Makefile:

	SCRIPT		= runtest
	ILIST		= ${PROGRAMS} ${SCRIPT}



CR Number                     : 11277
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : 
Short Description             : sec_admin commands change_master and become master need to be added to replica_checklist
Reported Date                 : 7/13/94
Found in Baseline             : 1.1
Found Date                    : 7/13/94
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[7/13/94 public]

The sec_admin commands change_master and become_master should be added
to the security checklist test replica_checklist.



CR Number                     : 11221
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : 
Short Description             : Should be able to run audit tests in parrallel on different machines.
Reported Date                 : 7/8/94
Found in Baseline             : 1.1
Found Date                    : 7/8/94
Severity                      : B
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[7/20/94 public]

This is a test message.

[7/8/94 public]


Currently, a tester is restricted to running the audit tests
one one node at a time.  The tester should be able to 
run multiple copies of the tests on different nodes at the same time.



CR Number                     : 11145
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : other
S/W Ref Platform              : other
Component Name                : rpc
Subcomponent Name             : 
Short Description             : cover_ool test fails because of call thread stack size.
Reported Date                 : 6/30/94
Found in Baseline             : 1.0.3
Found Date                    : 6/30/94
Severity                      : C
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[6/30/94 public]

In cover_ool.idl the ARRAY_SIZE is too large for some platform default
thread stack. This is a porting problem (the test runs fine on the
reference platforms) but it would nice to have provision in the common
server for setting the call threads stack size with
rpc_mgmt_set_server_stack_size.



CR Number                     : 10946
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : checklist
Short Description             : problems in checklist tests
Reported Date                 : 6/14/94
Found in Baseline             : 1.1
Found Date                    : 6/14/94
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : DCPSAN002 DCPSAN003 admin_test_env.tcl functions rep_ch_1_checklist rep_ch_2_checklist start_dce stop_dce
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[6/14/94 public]

Problems in checklist tests, mostly due to directory structures changing,
some tool changes, etc.



CR Number                     : 10905
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 10869
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : delegation
Short Description             : add delegation functional tests
Reported Date                 : 6/8/94
Found in Baseline             : 1.1
Found Date                    : 6/8/94
Severity                      : B
Priority                      : 1
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[6/8/94 public]

Need to add tests which exercise DFS access via a delegated identity.



CR Number                     : 10828
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : other
S/W Ref Platform              : other
Component Name                : systest
Subcomponent Name             : rpc
Short Description             : alignment error in
.../src/test/systest/rpc/rpc.runtime.1/client_aux.c
Reported Date                 : 6/1/94
Found in Baseline             : 1.0.3
Found Date                    : 6/1/94
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : .../src/test/systest/rpc/rpc.runtime.1/client_aux.c
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[6/1/94 public]

 In .../src/test/systest/rpc/rpc.runtime.1/client_aux.c the declaration

          byte client_buffer[CLIENT_BUFFER_SIZE];

causes an alignment fault when it is accessed as 

	pt_struct *
        
in the function client_iop_pull().


Peter, If this fix is obvious/easy, go for it.  Otherwise, please
defer.  Thanks,Susan



CR Number                     : 10681
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : tkm
Short Description             : token_test not build/in wrong tree
Reported Date                 : 5/17/94
Found in Baseline             : 1.1
Found Date                    : 5/17/94
Severity                      : E
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[5/17/94 public]

In reviewing dfs functional tests (including those still in the
src/file tree rather than the src/test/file tree), came across

	src/file/token_test

which is not being built. These tests should be built, tried out,
and moved to the test tree.



CR Number                     : 10486
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : admin/Makefile
Short Description             : SUBDIRS includes ``file'' unconditionally.
Reported Date                 : 4/28/94
Found in Baseline             : 1.1
Found Date                    : 4/28/94
Severity                      : D
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : test/systest/admin/Makefile
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[4/28/94 public]

Defining NO_DFS has no effect in test/systest/admin; the file part
is always made.

*** Makefile~	Thu Apr 28 15:29:32 1994
--- Makefile	Thu Apr 28 15:30:46 1994
***************
*** 24,30 ****
--- 24,34 ----
  # 
  # $EndLog$
  #
+ .ifdef NO_DFS
+ SUBDIRS = cds sec
+ .else
  SUBDIRS = cds sec file
+ .endif
  
  .include <${RULES_MK}>

[7/6/94 public]
Assigning to me - probably applies to test/systest/file as well, no?



CR Number                     : 10484
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dts
Short Description             : dcetmsyn tests invalid / last sync
Reported Date                 : 4/28/94
Found in Baseline             : 1.0.3
Found Date                    : 4/28/94
Severity                      : B
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[4/28/94 public]
The test "dcetmsyn" is incorrect.  The test checks the time reported in
last synchronization before and after a sync occurred.  The time gets updated
whether the sync was completed or not.  Therefore the only check that should
be made to ensure that the sync occurred is the sync complete counter.
If the counter is not updated, then maybe check the other counters
(such as too few servers detected) for possible reasons of failure).



CR Number                     : 10435
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 10433
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : thr
Subcomponent Name             : 
Short Description             : select masks delcared int
Reported Date                 : 4/21/94
Found in Baseline             : 1.0.3
Found Date                    : 4/21/94
Severity                      : B
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[4/21/94 public]

The following files all use an int instead of an fd_set.  Because an fd_set
can be larger than an int, this causes memory to be scribbled.

    cupb_nbi_001
    cuvb_nbi_002
    cuvb_nbi_003
    cuvi_nbi_004
    puvb_nbi_002
    puvb_nbi_003
    puvi_nbi_004

[4/25/94 public]

Diffs to fix this problem follow.

======================================================================
diff -r ../../../link/src/test/threads/cupb_nbi_001.c ./cupb_nbi_001.c
10a11,13
>  * Revision 1.1.3.2  94/04/25  11:26:58  weisman
>  * 	Changed select logic to use fd_sets instead of ints
>  * 
109a113
> #include <sys/select.h>
126c130,131
<     int		 fds, i;
---
>     fd_set fds;
>     int i;
133a139
>     FD_ZERO (&fds);
135c141
< 	fds = 2;
---
>         FD_SET (1, &fds);
149a156
>     FD_ZERO (&fds);
151c158
< 	fds = 2;
---
>         FD_SET (1, &fds);
diff -r ../../../link/src/test/threads/cuvb_nbi_002.c ./cuvb_nbi_002.c
10a11,16
>  * Revision 1.1.1.2  94/04/25  11:27:00  weisman
>  * 	Changed select logic to use fd_sets instead of ints
>  * 
>  * Revision 1.1  1994/03/07  20:16:05  rat
>  *        Base version
>  *
100a107
> #include <sys/select.h>
277,282c284,290
<     int  readfds = 0,
<          writefds = 0,
<          exceptfds = 0,
< 	 temp_r,
< 	 temp_w,
<          maxfds = 0,
---
>     fd_set  readfds,
>             writefds,      
>             exceptfds,
>             temp_r,
> 	    temp_w;
> 
>     int  maxfds = 0,
296a305,309
> 
>     FD_ZERO (&readfds);
>     FD_ZERO (&writefds);
>     FD_ZERO (&exceptfds);
> 
298,299c311,312
<         readfds |= 1<<t_socket[cnt];
<         writefds |= 1<<t_socket[cnt];
---
>         FD_SET (t_socket [cnt], &readfds);
>         FD_SET (t_socket [cnt], &writefds);
309,310c322,323
<         readfds |= 1<<cnt;
<         writefds |= 1<<cnt;
---
>         FD_SET (cnt, &readfds);
>         FD_SET (cnt, &writefds);
diff -r ../../../link/src/test/threads/cuvb_nbi_003.c ./cuvb_nbi_003.c
10a11,16
>  * Revision 1.1.1.2  94/04/25  11:27:02  weisman
>  * 	Changed select logic to use fd_sets instead of ints
>  * 
>  * Revision 1.1  1994/03/07  20:16:07  rat
>  *        Base version
>  *
97a104
> #include <sys/select.h>
273,278c280,286
<     int  readfds = 0,
<          writefds = 0,
<          exceptfds = 0,
< 	 temp_r,
< 	 temp_w,
<          maxfds = 0,
---
>    fd_set readfds,
>           writefds,
>           exceptfds,
> 	  temp_r,
> 	  temp_w;
> 
>     int  maxfds = 0,
292a301,305
> 
>     FD_ZERO (&readfds);
>     FD_ZERO (&writefds);
>     FD_ZERO (&exceptfds);
> 
294,295c307,308
<         readfds |= 1<<t_socket[cnt];
<         writefds |= 1<<t_socket[cnt];
---
>         FD_SET (t_socket [cnt], &readfds);
>         FD_SET (t_socket [cnt], &writefds);
304,305c317,318
<         readfds |= 1<<cnt;
<         writefds |= 1<<cnt;
---
>         FD_SET (cnt, &readfds);
>         FD_SET (cnt, &writefds);
diff -r ../../../link/src/test/threads/cuvi_nbi_004.c ./cuvi_nbi_004.c
14a15,17
>  * Revision 1.1.3.2  94/04/25  11:27:04  weisman
>  * 	Changed select logic to use fd_sets instead of ints
>  * 
113a117
> #include <sys/select.h>
235c239,240
<     int     r, w, e, rv;
---
>     fd_set  r, w, e;
>     int     rv;     
291c296,299
< 	    r = 1 << fd; w = 0; e = 0;
---
>             FD_ZERO (&r);
>             FD_ZERO (&w);
>             FD_ZERO (&e);
>             FD_SET (fd, &r);
307c315,318
< 	r = 1 << fd; w = 0; e = 0;
---
>         FD_ZERO (&r);
>         FD_ZERO (&w);
>         FD_ZERO (&e);
>         FD_SET (fd, &r);
diff -r ../../../link/src/test/threads/puvb_nbi_002.c ./puvb_nbi_002.c
10a11,16
>  * Revision 1.1.1.2  94/04/25  11:27:06  weisman
>  * 	Changed select logic to use fd_sets instead of ints
>  * 
>  * Revision 1.1  1994/03/07  20:17:14  rat
>  *        Base version
>  *
101a108
> #include <sys/select.h>
281,286c288,293
<     int  readfds = 0,
<          writefds = 0,
<          exceptfds = 0,
< 	 temp_r,
< 	 temp_w,
<          maxfds = 0,
---
>     fd_set  readfds,
>             writefds,
>             exceptfds,
> 	    temp_r,
> 	    temp_w;
>     int  maxfds = 0,
301a309,313
> 
>     FD_ZERO (&readfds);
>     FD_ZERO (&writefds);
>     FD_ZERO (&exceptfds);
> 
303,304c315,316
<         readfds |= 1<<t_socket[cnt];
<         writefds |= 1<<t_socket[cnt];
---
>         FD_SET (t_socket [cnt], &readfds);
>         FD_SET (t_socket [cnt], &writefds);
314,315c326,327
<         readfds |= 1<<cnt;
<         writefds |= 1<<cnt;
---
>         FD_SET (cnt, &readfds);
>         FD_SET (cnt, &writefds);
diff -r ../../../link/src/test/threads/puvb_nbi_003.c ./puvb_nbi_003.c
10a11,16
>  * Revision 1.1.1.2  94/04/25  11:27:08  weisman
>  * 	Changed select logic to use fd_sets instead of ints
>  * 
>  * Revision 1.1  1994/03/07  20:17:16  rat
>  *        Base version
>  *
103a110
> #include <sys/select.h>
278,283c285,290
<     int  readfds = 0,
<          writefds = 0,
<          exceptfds = 0,
< 	 temp_r,
< 	 temp_w,
<          maxfds = 0,
---
>     fd_set  readfds,
>             writefds,
>             exceptfds,
> 	    temp_r,
> 	    temp_w;
>     int  maxfds = 0,
298a306,310
> 
>     FD_ZERO (&readfds);
>     FD_ZERO (&writefds);
>     FD_ZERO (&exceptfds);
> 
300,301c312,313
<         readfds |= 1<<t_socket[cnt];
<         writefds |= 1<<t_socket[cnt];
---
>         FD_SET (t_socket [cnt], &readfds);
>         FD_SET (t_socket [cnt], &writefds);
310,311c322,323
<         readfds |= 1<<cnt;
<         writefds |= 1<<cnt;
---
>         FD_SET (cnt, &readfds);
>         FD_SET (cnt, &writefds);
diff -r ../../../link/src/test/threads/puvi_nbi_004.c ./puvi_nbi_004.c
10a11,16
>  * Revision 1.1.1.2  94/04/25  11:27:10  weisman
>  * 	Changed select logic to use fd_sets instead of ints
>  * 
>  * Revision 1.1  1994/03/07  20:17:19  rat
>  *        Base version
>  *
99a106
> #include <sys/select.h>
217c224,225
<     int     r, w, e, rv;
---
>     fd_set  r, w, e;
>     int     rv;
267c275,278
< 	    r = 1 << fd; w = 0; e = 0;
---
>             FD_ZERO (&r);
>             FD_ZERO (&w);
>             FD_ZERO (&e);
>             FD_SET (fd, &r);
269d279
<



CR Number                     : 10433
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 10435
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : thr
Subcomponent Name             : 
Short Description             : fd_set wrongly declared int
Reported Date                 : 4/21/94
Found in Baseline             : 1.0.3
Found Date                    : 4/21/94
Severity                      : B
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : cuvb_nbi_004.c
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[4/21/94 public]

The test cuvb_nbi_004.c wrongly declares an fd_set as a cma_t_integer.
This causes the too-small fd_set to be overwritten by select().

The diff below fixes this.

[There may be other similar cases in threads; I have not checked for these
yet.] 

======================================================================
***************
*** 195,201 ****
  	cma_t_integer	id;
  #endif	/* prototype */
      {
!     cma_t_integer	    rfds, nfound;
      static struct timeval   poll = {0, 0},
  			    timeout = {2, 500000};   /* 2.5 Seconds */
      cts_timebuf_t	    start;
--- 204,211 ----
  	cma_t_integer	id;
  #endif	/* prototype */
      {
!     fd_set                  rfds;
!     cma_t_integer	    nfound;
      static struct timeval   poll = {0, 0},
  			    timeout = {2, 500000};   /* 2.5 Seconds */
      cts_timebuf_t	    start;
***************
*** 213,219 ****
      /*
       * Test #1:  Polling select with no waiting data.
       */
!     rfds = 1 << p_fd[id];
      nfound = select (p_fd[id]+1, &rfds, 0, 0, &poll);
      if (nfound < 0) my_failure ("Error in select (poll/no data)");
      if (nfound > 0) cts_failed ("Polling select with no data, found data.");
--- 223,229 ----
      /*
       * Test #1:  Polling select with no waiting data.
       */
!     FD_SET (p_fd[id], &rfds);
      nfound = select (p_fd[id]+1, &rfds, 0, 0, &poll);
      if (nfound < 0) my_failure ("Error in select (poll/no data)");
      if (nfound > 0) cts_failed ("Polling select with no data, found data.");
***************
*** 221,227 ****
      /*
       * Test #2:  Timed select with no waiting data.
       */
!     rfds = 1 << p_fd[id];
      nfound = select (p_fd[id]+1, &rfds, 0, 0, &timeout);
      if (nfound < 0) my_failure ("Error in select (timeout/no data)");
      if (nfound > 0) cts_failed ("Timeout select with no data, found data.");
--- 231,237 ----
      /*
       * Test #2:  Timed select with no waiting data.
       */
!     FD_SET (p_fd[id], &rfds);
      nfound = select (p_fd[id]+1, &rfds, 0, 0, &timeout);
      if (nfound < 0) my_failure ("Error in select (timeout/no data)");
      if (nfound > 0) cts_failed ("Timeout select with no data, found data.");
***************
*** 246,253 ****
      /*
       * Test #3:  "Blocking" select with no waiting data.
       */
-     rfds = 1 << p_fd[id];
  
      nfound = select (p_fd[id]+1, &rfds, 0, 0, 0);
      cts_gettime(&end);
  
--- 256,264 ----
      /*
       * Test #3:  "Blocking" select with no waiting data.
       */
  
+     FD_SET (p_fd[id], &rfds);
+ 
      nfound = select (p_fd[id]+1, &rfds, 0, 0, 0);
      cts_gettime(&end);
  
***************
*** 269,275 ****
      /*
       * Test #4:  Polling select with waiting data.
       */
!     rfds = 1 << p_fd[id];
      nfound = select (p_fd[id]+1, &rfds, 0, 0, &poll);
      if (nfound < 0) my_failure ("Error in select (poll/data)");
      if (nfound == 0) cts_failed ("Polling select with data, found no data.");
--- 280,287 ----
      /*
       * Test #4:  Polling select with waiting data.
       */
! 
!     FD_SET (p_fd[id], &rfds);
      nfound = select (p_fd[id]+1, &rfds, 0, 0, &poll);
      if (nfound < 0) my_failure ("Error in select (poll/data)");
      if (nfound == 0) cts_failed ("Polling select with data, found no data.");
***************
*** 277,283 ****
      /*
       * Test #5:  Timed select with waiting data.
       */
!     rfds = 1 << p_fd[id];
      nfound = select (p_fd[id]+1, &rfds, 0, 0, &timeout);
      if (nfound < 0) my_failure ("Error in select (timeout/data)");
      if (nfound == 0) cts_failed ("Timeout select with data, found no data.");
--- 289,296 ----
      /*
       * Test #5:  Timed select with waiting data.
       */
! 
!     FD_SET (p_fd[id], &rfds);
      nfound = select (p_fd[id]+1, &rfds, 0, 0, &timeout);
      if (nfound < 0) my_failure ("Error in select (timeout/data)");
      if (nfound == 0) cts_failed ("Timeout select with data, found no data.");
***************
*** 285,291 ****
      /*
       * Test #6:  "Blocking" select with waiting data.
       */
!     rfds = 1 << p_fd[id];
      nfound = select (p_fd[id]+1, &rfds, 0, 0, 0);
      if (nfound < 0) my_failure ("Error in select (blocking/data)");
      if (nfound == 0) cts_failed ("Blocking select with data, found no data.");
--- 298,305 ----
      /*
       * Test #6:  "Blocking" select with waiting data.
       */
! 
!     FD_SET (p_fd[id], &rfds);
      nfound = select (p_fd[id]+1, &rfds, 0, 0, 0);
      if (nfound < 0) my_failure ("Error in select (blocking/data)");
      if (nfound == 0) cts_failed ("Blocking select with data, found no data.");

[4/21/94 public]

Minor addition to above -- each FD_SET should be preceeded by a:
	
   FD_ZERO (&rfds);



CR Number                     : 10276
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dfs
Subcomponent Name             : dfsbind
Short Description             : test DFS with H-Cells
Reported Date                 : 4/1/94
Found in Baseline             : 1.1b6
Found Date                    : 4/1/94
Severity                      : B
Priority                      : 1
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[4/1/94 public]


Ron desperately wants to work on this so it's his :-).


When attempting to DFS in a cell which has an aliased cellname,
via the alias name, dfsbind does not correctly distinguish between
the cds part of the name and the dfs part of the name.  The following
trace results from issuing a 'touch abc' from /.../newalias/fs, 
which returns an error.  The same command when issued relative to
the original cell name will execute correctly. 

time 345.718003, pid 9: sec_id_parse_name: entry name=/.../newalias
time 345.788230, pid 9: sec_id_parse_name: exit code:387063930
time 345.788499, pid 9: rpc_ns_entry_inq_resolution: entry
time 346.020050, pid 9: rpc_ns_entry_inq_resolution: exit code:0
time 346.048650, pid 9: ProcessRequest: exit code:21
time 346.048927, pid 9: helper write: entry
time 346.064272, pid 9: helper write: exit code:33
time 360.941413, pid 1: helper read: exit code:24
time 360.941811, pid 1: helper read: entry
time 360.942615, pid 10: ProcessRequest: entry
time 360.942891, pid 10: sec_id_parse_name: entry name=/.../newalias/fs
time 360.960041, pid 10: sec_id_parse_name: exit code:387063930
time 360.960302, pid 10: rpc_ns_entry_inq_resolution: entry
time 361.162999, pid 10: rpc_ns_entry_inq_resolution: exit code:0
time 361.163473, pid 10: ProcessRequest: exit code:21
time 361.163688, pid 10: helper write: entry
time 361.172487, pid 10: helper write: exit code:36
time 365.503754, pid 1: helper read: exit code:28
time 365.504150, pid 1: helper read: entry
time 365.505142, pid 11: ProcessRequest: entry
time 365.505417, pid 11: sec_id_parse_name: entry name=/.../newalias/fs/abc
time 365.521667, pid 11: sec_id_parse_name: exit code:387063930
time 365.521928, pid 11: rpc_ns_entry_inq_resolution: entry
time 365.605600, pid 11: rpc_ns_entry_inq_resolution: exit code:382312643
time 365.606093, pid 11: ProcessRequest: exit code:2
time 365.606306, pid 11: helper write: entry
time 365.615022, pid 11: helper write: exit code:40

[4/12/94 public]
This looks like an expected failure. The code to update the 
security service with the new cell alias is not implemented.  
When dfsbind goes to the rgy using sec_id_parse_name() to parse 
the cell alias, the rgy returns "object not found" indicating that 
it is not (yet) aware of the new cell alias.

I'm lowering the priority until the security portion of this work
is implemented, at which time we'll check again to make sure this
works.  I'm also including Rob Stanzel on the list to make sure
I'm not mistaken about this being an expected failure.

[9/15/94 public]
This is really a place holder to test DFS with H-Cells.

[2/23/96 public]
Transarc requests that CR type be changed to "test" (not code).



CR Number                     : 10231
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : thr
Subcomponent Name             : 
Short Description             : Uninitialized variables in crvb_sig_003.c
Reported Date                 : 3/26/94
Found in Baseline             : 1.0.3
Found Date                    : 3/26/94
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[3/26/94 public]

In test/threads/crvb_sig_003.c, in the functions pipe1_thread() and
pipe2_thread(), the local variables empty_mask and flags are uninitialized.
These values are passed into sigaction() and unexpected behavior can occur.



CR Number                     : 10065
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dfs
Subcomponent Name             : fts test4
Short Description             : exp stat incorrect for E65
Reported Date                 : 3/4/94
Found in Baseline             : 1.0.3a
Found Date                    : 3/4/94
Severity                      : D
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : test/file/fts/test4
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[3/4/94 public]
this is the same problem as test8 in OT9989

test4 when run in a 'ufs' cell fails op E65

fts delfldbentry -prefix $base_name.2 $av_arg
dfs_ftsCheckResult $? $DFS_PASS_EQ_ZERO $DFS_WORKS_ON_BOTH $p E65 rc

the fileset was not created since fts create doesn't work
in a 'ufs' only cell...



CR Number                     : 10053
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : thr
Subcomponent Name             : 
Short Description             : CRVB_TIM_002 and CRVB_CVX_TIM_001 tests failed
Reported Date                 : 3/2/94
Found in Baseline             : 1.1
Found Date                    : 3/2/94
Severity                      : B
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[3/2/94 public]
This is the output from these tests:

START,  Test "CRVB_TIM_002":    Test accuracy of repeated concurrent delays
Thread 0: 0 under, 226004 over; min 0.000683, max 0.669859, avg 0.000737
Thread 1: 0 under, 179 over; min 1.000578, max 1.517567, avg 1.004374
FAILED, Test "CRVB_TIM_002":    Thread 1 had waits more than 20% too long
Thread 2: 0 under, 89 over; min 2.000563, max 2.016240, avg 2.001310
Thread 3: 0 under, 60 over; min 3.000576, max 3.057703, avg 3.002049
Thread 4: 0 under, 45 over; min 4.000651, max 4.069154, avg 4.002713
Thread 5: 0 under, 36 over; min 5.000595, max 5.068188, avg 5.003408
Thread 6: 0 under, 30 over; min 6.000636, max 6.080881, avg 6.003992
Thread 7: 0 under, 25 over; min 7.000605, max 7.005466, avg 7.001221
Thread 8: 0 under, 22 over; min 8.000607, max 8.004925, avg 8.001291
Thread 9: 0 under, 20 over; min 9.000591, max 9.016312, avg 9.001803
Thread 10: 0 under, 18 over; min 10.000634, max 10.009778, avg 10.002045
Thread 11: 0 under, 16 over; min 11.000589, max 11.001805, avg 11.001059
Thread 12: 0 under, 15 over; min 12.000701, max 12.016713, avg 12.002354
Thread 13: 0 under, 13 over; min 13.000583, max 13.001480, avg 13.001003
Thread 14: 0 under, 12 over; min 14.000581, max 14.001703, avg 14.001146
Thread 15: 0 under, 12 over; min 15.000637, max 15.020157, avg 15.002726
Thread 16: 0 under, 11 over; min 16.000683, max 16.001575, avg 16.001109
Thread 17: 0 under, 10 over; min 17.000648, max 17.001329, avg 17.000968
Thread 18: 0 under, 10 over; min 18.000614, max 18.020138, avg 18.003386
Thread 19: 0 under, 9 over; min 19.000607, max 19.001471, avg 19.000889


START,  Test "CRVB_CVX_TIM_001":        Test cma_cond_timed_wait with timeout an
d signals
COMMNT, Test "CRVB_CVX_TIM_001":        Part 1: signal after timeout interval
FAILED, Test "CRVB_CVX_TIM_001":        Expected 10 second interval: actual was 
9.959789 seconds
COMMNT, Test "CRVB_CVX_TIM_001":        Part 2: signal before timeout interval



CR Number                     : 9984
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dcerpbnk
Short Description             : dcerpbnk - Unconditionally overrides options.
Reported Date                 : 2/21/94
Found in Baseline             : 1.1
Found Date                    : 2/21/94
Severity                      : D
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[2/21/94 public]

There are a number of options supported by RUN.RPC for the DCERPBNK_AUTH
variant of DCERPBNK which are simply overridden by fixed values in the test
code.  They are: PRIN_NAME, AUTH_LVL, AUTH_SVC, and AUTHZ_SVC.



CR Number                     : 9972
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : rpc/rpc.sec.2
Short Description             : rpc.sec.2 - Many problems with test
Reported Date                 : 2/16/94
Found in Baseline             : 1.0.3
Found Date                    : 2/16/94
Severity                      : B
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : rpc.sec.2_smain.c
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[2/16/94 public]

There are several problems of varying importance:

1) When you run the rpc.sec.2 system test more than once without cleaning up
the CDS entry it uses to export binding and objects, this test failes. I
haven't saved the log messages.

2) This test prints error messages for status that was expected in a good
situation also.

3) Possible memory leak that could hurt in stress test.

Solve #2: To fix the printing of annoying error messages change the main() in
          rpc.sec.2_smain.c as shown below:

-----BEGIN FIX 1-------------
         if (status == rpc_s_entry_not_found)
         {
            printf("\n Server: No name space entry for %s\n",
                                                        PVAL(params,cds_name));           break;
         }

+#ifdef SNI_SVR4
+         /*
+          * Need to check 'status != rpc_s_no_more_members' before calling
+          * rpcsec2_check_stat() so that it won't print ERROR message for
+          * an expected status value = rpc_s_no_more_members. - Parul 1/11/94
+          */
+         if (status != rpc_s_no_more_members &&
+             rpcsec2_check_stat(status, "getting uuid",
+                              err_stats, &nerr_stats,  debug, 0) )
+#else /* !SNI_SVR4 */
         if (rpcsec2_check_stat(status, "getting uuid",
                              err_stats, &nerr_stats,  debug, 0) &&
                                              status != rpc_s_no_more_members)
#endif /* SNI_SVR4 */
         {
            /*---* error getting uuid, report it... *---*/
            printf("Can't get uuids to unexport!! \n");
            dump_uuid_v((uuid_vector_p_t)&uuid_v, &status);
-----END FIX 1-------------

Solve #3: To avoid possible memory leak free up the NS handle at the correct
          place in main() in file rpc.sec.2_smain.c as shown below:

-----BEGIN FIX 2-------------
      /*---*
       *---* we always push count one too far and allocate one too many uuids
       *---* so decrement the count and free the extra uuid slot.
       *---*/
      uuid_v.count--;
      free(uuid_v.uuid[uuid_v.count]);

+#ifdef SNI_SVR4    /* Moved up to more appropriate place */
+      {
+         unsigned32 status1;          /*---* Generic status return param *---*/+         /*---* free the context for the inquiry *---*/
+         printf(" Server: freeing inquiry context...");
+         rpc_ns_entry_object_inq_done(&inq_ctxt, &status1);
+
+         if (rpcsec2_check_stat(status1, "freeing inquiry context",
+                                err_stats, &nerr_stats, debug, 0))
+         {
+            rpcsec2_kill_threads(thread_ids[RPCSEC2_MAIN_THD]);
+            exit(1);
+         }
+       }
+#endif /* SNI_SVR4 */

      /*---*
       *---* we either exit the loop with rpc_s_entry_not_found or

    :         :             :                :                 :
    :         :             :                :                 :

                rpcsec2_kill_threads(thread_ids[RPCSEC2_MAIN_THD]);
                exit(3);
            }

+#ifndef SNI_SVR4    /* Move up to more appropriate place */
            /*---* free the context for the inquiry *---*/
            printf(" Server: freeing inquiry context...");
            rpc_ns_entry_object_inq_done(&inq_ctxt, &status);

            if (rpcsec2_check_stat(status, "freeing inquiry context",
                              err_stats, &nerr_stats, debug, 0))
            {
               rpcsec2_kill_threads(thread_ids[RPCSEC2_MAIN_THD]);
               exit(1);
            }
+#endif /* SNI_SVR4 */

            /*---* if repl_uuid is not set... *---*/
-----END FIX 2-------------

Solve #1: To fix the repeated invocation of the test do the following in
          the same function and file:

-----BEGIN FIX 3-------------
               obj_uuid_v.uuid[0] = uuid_v.count > 1? uuid_v.uuid[uuid_v.count]                                                   : uuid_v.uuid[0];

               /*---* if more than one uuid...  *---*/
+#ifndef SNI_SVR4
+               /*
+                * This condition should not be applied for decrementing
+                * uuid_v.count because even when it is set to 1, we are
+                * using the object uuid at uuid_v.uuid[0] that should not
+                * be freed in the later for loop and so count should be
+                * decremented to 0. - Parul 1/11/94
+                */
               if (uuid_v.count > 1)
+#endif /* SNI_SVR4 */
                  /*---*
                   *---* adjust the count to account for the uuid we will
                   *---* keep
                   *---*/
                  uuid_v.count--;

            } /*---* end of if (!repl_uuid && !use_null) *---*/
        :       :       :       :       :
        :       :       :       :       :
        :       :       :       :       :
   printf(" Server: Client principle name is %s\n", client_pname);

   /*---* if we are passing a UUID *---*/
+#ifdef SNI_SVR4
+   /*
+    * Fix a bug which causes the obj_uuid_v.uuid[0] to be overwritten by
+    * some junk in obj_uuid. -Parul 1/11/94
+    */
+   if (!use_null && repl_uuid)
+#else /* !SNI_SVR4 */
   if (!use_null || repl_uuid)
+#endif /* SNI_SVR4 */
   {
      /*---*
       *---* load the uuid_vector; we use the new value if we are replacing
       *---* the uuid, else we use the uuid we have from the namespace inquiry
       *---*/
-----BEGIN FIX 3-------------

Lines with prefix '+' shows changed code. These are generic fixes and so 
#ifdef's should be removed.

[2/17/94 public]
As the writer of this test, I felt compelled to note a few things:

 1. Since we usually ran in clean cells or against the same server, the
    uuid cleanup code was not a high priority, and the defect you found
    was missed.  I would fix this a bit differently (move the for loop in
    question into the "if (uuid_v.count > 1)" block and leave the
    conditional on the uuid_v.count decrement alone - avoids a needless
    trip into the for loop), but your fix will work.

    Note that the dce1.1 backing tree version of this program now supports
    cleanup of the namespace on server exit.

 
 2. the status-checking routine was designed to check status, and report
    anything that was not rpc_s_ok.  we just ignored the expected error
    reports.  I guess our annoyance threshold was by nature set higher :-).


 3. I am not sure how this maps to a memory leak.  The test was written
    with the intent that the server starts up and is long lived.  You are 
    right in stating that the server holds some static amount (one inquiry
    context's worth) of memory that it could possibly free, but I usually 
    associate a "leak" with the idea of a continously increasing loss of 
    memory.  If the server is re-started, the memory is released on the 
    exit.  Has this caused you problems?  I am not disputing the fixing of 
    this, I am just curious.

[2/17/94 public]

1. Sure you can fix it that way. I just wanted to avoid many line changes.
   However, the incorrect condition clause 'if (!use_null || repl_uuid)'
   v/s 'if (!use_null && repl_uuid)' would need to be applied in any case.

3. It wasn't a  serious problem. I noticed that NS handle was being freed
   at the wrong place. You're right that this chunk of memory will be freed
   when server exits. So far this hasn't caused any problems but I wouldn't
   want to wait for it.

[9/12/94 public]

Changed responsible engineer from DasSarma to Peter O'Malley.

[9/26/94 public]

The problem with the small memory leak at startup does not appear to be serious
enough to warrant a fix at this late date.



CR Number                     : 9945
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : rpc/rpc.cds.3/rpc.cds.3_cmain.c
Short Description             : rpc.cds.3 - Client prints incorrect error for a valid status.
Reported Date                 : 2/11/94
Found in Baseline             : 1.0.3
Found Date                    : 2/11/94
Severity                      : C
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : rpc.cds.3_cmain.c
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[2/11/94 public]

The rpc.cds.3 test's client reports rpc_s_no_more_binding as an ERROR eventhough
it isn't. Its an expected status when application does repeated calls to
rpc_ns_binding_import_next(). So I have moved the call to the status reporting
function 'rpcsec2_check_stat()' after the status is verified to be something
other than rpc_s_no_more_binding and rpc_s_ok.

      rpc_ns_binding_import_next(imprt_ctxt, &bndng_hndle, &ret_stat);

+#ifndef SNI_SVR4
      rpcsec2_check_stat(ret_stat, "getting next binding handle",
                                            err_stats, &nerr_stats, debug, 0);
+#endif  /* SNI_SVR4 */
      if (ret_stat == rpc_s_no_more_bindings)
         continue;
      else if (ret_stat != rpc_s_ok)
      {
+#ifdef SNI_SVR4
+         rpcsec2_check_stat(ret_stat, "getting next binding handle",
+                            err_stats, &nerr_stats, debug, 0);
+#endif  /* SNI_SVR4 */
         rpccds3_cli_kill_threads(thread_ids[RPCCDS3_MAIN_THD]);
         exit(1);
      }

The '+' prefix shows the addition. The code between first #ifndef should
actually be removed.



CR Number                     : 9790
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dfs
Subcomponent Name             : test
Short Description             : itlFile_Flock uses Solaris in
error message
Reported Date                 : 1/20/94
Found in Baseline             : 1.0.3a
Found Date                    : 1/20/94
Severity                      : E
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : test/file/itl/file/itl_file.c
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public
Transarc Herder               : 
Transarc Status               : 
Transarc Deltas               : 

[1/20/94 public]
the following code source does not apply 
to both SUNOS5 and __hpux
/*
 *  itlFile_Flock() --
 *    Issue the flock() system call.
 */
SHARED boolean_t itlFile_Flock()
{
#if defined(SUNOS5) || defined(__hpux)
    itl_Error("flock not defined on Solaris\n");
#else /* defined(SUNOS5) || defined(__hpux) */
either a variable should be set to the correct
plaform name or re-word the message...

[1/24/94 public]
Changed Responsible Engr. from `Elliot_Jaffe@transarc.com' to `rsarbo@osf' 
Changed Resp. Engr's Company from `tarc' to `osf' 
Added field Transarc Herder with value `' 
Added field Transarc Status with value `'
Changed Responsible Engr. from `rsarbo@osf' to `rsarbo' 
Added field Transarc Deltas with value `'



CR Number                     : 9786
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : 
Short Description             : unusual ACL behavior when an unan unauthenticated user
Reported Date                 : 1/20/94
Found in Baseline             : 1.0.3a
Found Date                    : 1/20/94
Severity                      : D
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public
Transarc Deltas               : 
Transarc Herder               : 
Transarc Status               : 

[1/20/94 public]

I am not sure whether this is the correct behavior.

An unauthenticated user who has RWXID permissions (through any_other
ACL), I tried to create a file...

>% echo `date` > unauth.file
dfs: set auth binding failed (code 387064042); running unauthenticated.
dfs: set auth binding failed (code 387064042); running unauthenticated.

>% ls -l unauth.file
-rw-rw-r--   1 nobody   65534          0 Jan 20 08:43 unauth.file

An empty file was created.

The error code from above is ...

root@smirk> ./stcode_hp 387064042
387064042 (decimal), 171220ea (hex): Context handle not valid (dce / sec)

>% touch test
touch: cannot change times on test
>% ls -l test
-rw-------   1 nobody   65534          0 Jan 20 10:31 test

[1/27/98 public]
Defering to 1.1 when we can further investigate ACLs for an unauthenticated
user.

[1/27/94 public]
Actually, this might not be an ACL issue.  OT 8650 addresses a problem
which results in the auth_helper confusing creds.  Doesn't the message that
you got back from dfsbind with the 387064042 code indicate that you had
credentials which are no longer valid (instead of having no network
identity established at all).  I'm pretty sure I've seen the 'context
handle not valid' error in the situation described by OT 8650 as well
as the 382312714 code.  It might be working determining if you are
running with the fix for 8650.
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `' 
Added field Transarc Status with value `'



CR Number                     : 9694
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : 
Short Description             : intermittent spurious move failure in fts test21
Reported Date                 : 1/6/94
Found in Baseline             : 1.0.3a
Found Date                    : 1/6/94
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public
Transarc Deltas               : 
Transarc Herder               : jaffe@transarc.com
Transarc Status               : open

[1/6/94 public]
On repeated runs of fts test21, we are sometimes seeing that the last fts move
fails, i.e. the one for which the message "move unexpectedly FAILED but we
are not counting this as an error..." is printed.  This is quite mysterious,
especially when the aggregates are very different from each other in size.
We have not yet found a reliable way to reproduce it.
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `jaffe@transarc.com' 
Added field Transarc Status with value `open'



CR Number                     : 9685
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dfs
Subcomponent Name             : lfs
Short Description             : intermittent failure in RCX tests on HP/UX
Reported Date                 : 1/5/94
Found in Baseline             : 1.0.3a
Found Date                    : 1/5/94
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public
Transarc Deltas               : 
Transarc Herder               : jaffe@transarc.com
Transarc Status               : open

[1/5/94 public]
When forking processes to do the "robustness test", the runrcx parent process
may die.  This can happen after all the subprocesses have been forked, or
only some of them.  With the parent dead, there is nobody around to kill the
subprocesses, and the test just goes on forever.
I'm not sure that the parent process is really dying, or just mistaking itself
for a subprocess.  If my memory serves, the df listing showed N-1 subprocesses
whose PPID was the Nth subprocess.
Unfortunately this is not reliably reproducible.
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `jaffe@transarc.com' 
Added field Transarc Status with value `open'

[1/5/94 public]
Defer to 1.1.



CR Number                     : 9666
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dcerpbnk
Short Description             : dcerpbnk often fails trying to export ad_intf and tr_intf
Reported Date                 : 12/29/93
Found in Baseline             : 1.0.3
Found Date                    : 12/29/93
Severity                      : B
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[12/29/93 public]

The dcerpbnk system test often fails with the error:

	ERROR: /.:/ad_intf_tahiti & /.:/tr_intf_tahiti not exported
	       within ~120 seconds

The command used on tahiti was:

	run.rpc -t 84 -m "brandy dce9 tahiti" -P ncacn_ip_tcp dcerpbnk

The test failed 7 times out of 508 with this error.  I'm not sure if this
is a problem with bankd or DCE so I am assigning it to systest.

[09/12/94 public]

Priority from 1 ---> 2.



CR Number                     : 9630
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : admin
Short Description             : admin_checklist improvements
Reported Date                 : 12/17/93
Found in Baseline             : 1.0.3a
Found Date                    : 12/17/93
Severity                      : D
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : test/systest/admin/file/tests/admin_checklist
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[12/17/93 public]

- Extra credit if you actually try/include repeating an aggrid on a
different and then the same machine to see if uniqueness is enforced
at all!

- Before example dfstab line:

The "ufs" field is correct for all native filesystems, including jfs
and hfs.

syncserv example could be improved (newaggr w/o deleting filesets
to create mismatch(

growaggr example could be improved - rios can support this.

[01/13/94 public]
Also ...
For synfldb, use fts delfldbentry to create mismatch.

[01/14/94 public]
Hmm -
Suggestion for syncserv may not be correct - newaggr'ing a detached
aggregate without having deleted its fileset first, then doing
a syncserv, only caused the mismatches to be reported - not corrected -
check docs for expected behavior.

[01/16/94 public]
For the cm setsetuid instructions, it would be useful to do "ls -l" commands
in the directory to show the change in permission bit view w/r/to
cm setsetuid states. Also, the vmstat example isn't valid for HP
platform - vmstat execution isn't sensitive to the "s" bit - remsh
execution is - but I haven't gotten the test to work with this yet either,
blocked until 9552 in?

[01/17/94 public]
The acl portion should include the umask of the current
user (and the info that the permission bits and acls of files
and directories are the result of filtering the initial object
and container acls through the umask). This omission bumps this
CR to a B2 defect rather than the lower sev/pri enh it was.

[01/17/94 public]
New info - old mount points are NOT meant to work with new fileset
names (ie. fts rename invalidates old mount points). Update fts
rename section accordingly.

[01/18/94 public]
Partial fix submitted to 103a:
# Revision 1.1.8.2  94/01/18  18:43:35  gmd
#       Partial fix for 9630:
#               - mention "ufs" valid for all native filesystems
#               in dfstab
#               - delfldbentry to set up for syncfldb
#               - ls -l's in cm setsetuid
#               - umask mentioned and shown in acl section
#               - old mount points no good after fts rename

SO ... that leaves:
	- aggrid uniqueness testing
	- improving growaggr example
	- improving syncserv example (if possible)

Note that automating this checklist is a higher priority than making
these additions. Returning this to an enhancement request since
errors corrected with submission.

[01/26/94 public]
Instructions for disabling flservers and file servers should use
bos shutdown -wait and bos delete.



CR Number                     : 9605
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dfs
Subcomponent Name             : fts test20
Short Description             : fts test20 has two E35 assertions
Reported Date                 : 12/10/93
Found in Baseline             : 1.0.3
Found Date                    : 12/10/93
Severity                      : E
Priority                      : 4
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public
Transarc Deltas               : 
Transarc Herder               : 
Transarc Status               : open

[12/10/93 public]
fts test20 has two E35 assertions and an E35.1. They should be changed
to E35, E35.1, and E35.2.
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `' 
Added field Transarc Status with value `open'

[12/13/93 public]
Changed CR in Code, Doc, or Test? from `code' to `test'

[12/13/93 public]
Assigning to myself as a placeholder.  Changing state to defer.



CR Number                     : 9548
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dcethrpc_auth
Short Description             : dcethrpc_auth - Expects password=account name
Reported Date                 : 11/23/93
Found in Baseline             : 1.0.3
Found Date                    : 11/23/93
Severity                      : D
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[11/23/93 public]

DCETHRPC_AUTH requires that the user create an account where the password
is the same as the account name.  Furthermore, it requires that users
manually create local accounts (via the RGY_EDIT KTADD command) on machines
that DCETHRPC_AUTH is supposed to work with (-m option).  Use of this test
therefore not only requires manual intervention, but creates a potential
security hole as well.



CR Number                     : 9547
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dcethrpc
Short Description             : dcethrpc - System Test unable to kill server
Reported Date                 : 11/23/93
Found in Baseline             : 1.0.3
Found Date                    : 11/23/93
Severity                      : D
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[11/23/93 public]

The DCE System Test, DCETHRPC, is, upon very rare occasion, unable to kill
the remote servers it starts up.  The kill is attempted by the script
KILLPROC.  That script not only fails to kill the server, but fails not
report that fact.  Ultimately this results in a test hang because DCETHRPC
asks interactively for permission to delete the server file, which it can't
just delete because the server is still running.



CR Number                     : 9546
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dcecdsacl6
Short Description             : cds.acl.6 - Won't run with >1 CDS server
Reported Date                 : 11/23/93
Found in Baseline             : 1.0.3
Found Date                    : 11/23/93
Severity                      : B
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[11/23/93 public]

DCECDSACL6 must be run on the machine which is a CDS server.  Furthermore,
if there is a CDS replica, then DCECDSACL6 fails.  No work has been done
towards establishing the mechanism of the failure.  The failure is highly
reproducible in a small cell where the secondary CDS server simply backs up
the first.  It is not currently known if there were another server not
replicating the first if this would cause the failure.  Note that the
precise list of failures varies from run to run.

[03/03/94 public]

Put some modifications into DCECDSACL6.  The aforementioned problem of not
being able to run ACL6 on a machine other than the CDS server machine is no
longer a problem.  The other problem, failing when there is a replica, is
still a problem.

[03/03/94 public]

The DCE 1.1 system test HCLREL001 was based on DCECDSACL6. The same
limitations described here apply to HCLREL001. Please refer to 
OT 12488 for information on how HCLREL001 is addresssing these
limitations.



CR Number                     : 9545
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dcecdsacl6 and dceseacl
Short Description             : cds.acl.6 and dceseacl - Need some output while running
Reported Date                 : 11/23/93
Found in Baseline             : 1.0.3
Found Date                    : 11/23/93
Severity                      : E
Priority                      : 4
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[11/23/93 public]

DCECDSACL6 and DCESEACL are slow tests which produces blank or no output
under normal circumstances.  The output needs to be meaningful so that the
users can keep better track of what those test's progress.

[12/01/93 public]

As part of another CR I checked out DCECDSACL6 et al and, while I had them,
added some STDOUT message code to display progress.  This fix awaits
opening of the 1.1 tree.

[03/03/94 public]

The aforementioned DCECDSACL6 with messages to STDOUT is now in the 1.1
tree.  DCESEACL still produces no output, so this CR is only half done.



CR Number                     : 9544
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dcecdsalc6 and cdsserv
Short Description             : cds.acl.6 and cdsserv - Expect CH names end with _ch
Reported Date                 : 11/23/93
Found in Baseline             : 1.0.3
Found Date                    : 11/23/93
Severity                      : D
Priority                      : 4
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[11/23/93 public]

A number of DCE System Tests expect that existing DCE clearinghouse names
will end in "_CH" when this is not, in fact, a DCE requirement.  This
includes, but is not necessarily limited too, DCECDSACL6 and CDSSERV.



CR Number                     : 9543
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : profile.dce.tet
Short Description             : profile.dce.tet - Must not clear ENV variable
Reported Date                 : 11/23/93
Found in Baseline             : 1.0.3
Found Date                    : 11/23/93
Severity                      : D
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[11/23/93 public]

Modify PROFILE.DCE.TET so that it does NOT clear the Korn Shell variable
ENV.  To do this makes the assumption that DCE users do not have anything
vital to proper operation of their systems tucked off in a file somewhere
(other than /.profile).  This is a VERY bad assumption to make.  It also
clobbers non-essential features that many system administrators have
created for themselves, and that's a negative for DCE customer
satisfaction.



CR Number                     : 9541
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dcetest_config
Short Description             : dcetest_config - Needs to accept multiple options
Reported Date                 : 11/23/93
Found in Baseline             : 1.0.3
Found Date                    : 11/23/93
Severity                      : D
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[11/23/93 public]

Change DCETEST_CONFIG so that in all cases where multiple options done
serially are legal, the user can enter them all at once and be done with
it.



CR Number                     : 9540
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dcetest_config
Short Description             : dcetest_config - Error msgs gone before can be read
Reported Date                 : 11/23/93
Found in Baseline             : 1.0.3
Found Date                    : 11/23/93
Severity                      : D
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[11/23/93 public]

Change DCETEST_CONFIG so that error messages don't disappear before you can
read them.  This could be done with a simple pause-for-acknowledge or
implementing (or turning on) something to inhibit clearing the screen.
(DCE_CONFIG has something like this.)

[7/7/94 public]
Actually, I think this can be cancelled.  Part of the work I did on another
defect was to remove the calls to 'clear'.



CR Number                     : 9538
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dcetest_config
Short Description             : dcetest_config - Doesn't install tools by default
Reported Date                 : 11/23/93
Found in Baseline             : 1.0.3
Found Date                    : 11/23/93
Severity                      : D
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[11/23/93 public]

Change DCETEST_CONFIG so that the tools are installed when all components
are selected (the "97" choice).  This will prevent our users from
accidentally not loading tools when they installing a new version of DCE
System Test.  In fact this REALLY needs to be changed because the default,
"no", is probably the wrong response in most cases.



CR Number                     : 9537
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : 
Short Description             : System Tests must check dir names
Reported Date                 : 11/23/93
Found in Baseline             : 1.0.3
Found Date                    : 11/23/93
Severity                      : E
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[11/23/93 public]

Many DCE System Tests REQUIRE that $STTMPDIR and $TET_ROOT are the same
thing on all systems the test is running on, but there is no code to
enforce that.  You will see statements like

	rsh <machine_name> "mv $TET_ROOT/<something> $STTMPDIR"

Note the statement is expanded by the local machine but executed by the
remote machine.  If the local $STTMPDIR is, for example, /USR/TMP and the
remote machine has no /USR/TMP, then you will get a failure.  At minimum we
need code to sure that these places exist on all machines.  That is
probably easier than trying to get a machine to do remote name lookups.



CR Number                     : 9536
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : 
Short Description             : Can't run System Tests together
Reported Date                 : 11/23/93
Found in Baseline             : 1.0.3
Found Date                    : 11/23/93
Severity                      : D
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[11/23/93 public]

Modify the DCE System Tests and their .DATA files so that you can always
run any combination of them anywhere in the cell without having to worry
about them interfering with each other (or themselves) and failing.

The usual problem here is the use of names that are invariant, mostly file
names and DCE object names.  For example, if you run two copies of DCETHRPC
anywhere in the cell and aim them both at one machine (-m option), then
they will each try to create a file called /TMP/THD_SERVER on that machine
and eventually delete it.  If the timing is such that one invocation
deletes the file immediately after the other has created it, then a failure
will occur.

One possible solution is to have a kind of a global naming scheme
throughout the DCE System Tests where a unique, base name is created by an
invocation of RUN_LOOPS.KSH, and that name is then used as part of all
file, directory, and DCE object names, thus preventing name collision and
the resulting failures.

If the nature of a test makes it impossible to run without regard to itself
or other DCE System Tests, then the test itself should detect that fact and
post an unambiguous error message to that effect in the TET Journal.



CR Number                     : 9535
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : 
Short Description             : System Tests use -dce- password
Reported Date                 : 11/23/93
Found in Baseline             : 1.0.3
Found Date                    : 11/23/93
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[11/23/93 public]

Modify PROFILE.DCE.TET so that it ASKS FOR the system administrator account
name (default: cell_admin) and its password (default: -dce-).  Export the
resulting variables.  Modify all the DCE System Tests and their .DATA files
to use these variables.  This is the first and most necessary step in being
able to run the DCE System Tests in a production DCE cell.  Without it
users are forced to create a stand-alone cell or run with a severe security
hole.

[11/23/93 public]

Changed this from a low priority defect to a higher priority enhancement.



CR Number                     : 9534
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : 
Short Description             : System Tests don't KDESTROY creds
Reported Date                 : 11/23/93
Found in Baseline             : 1.0.3
Found Date                    : 11/23/93
Severity                      : C
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[11/23/93 public]

We need to go through all the DCE System Tests and make sure that they all
KDESTROY during cleanup any creds they create while testing.  It has gotten
to the point where a weekend run can create so many credential files that
it will either take down DCE or take 20 minutes to delete them all.



CR Number                     : 9487
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : gds_xds_str_001
Short Description             : gds_xds_str_001 - needs to be tet-ized
Reported Date                 : 11/15/93
Found in Baseline             : 1.0.3
Found Date                    : 11/15/93
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[11/15/93 public]
The short description says it all.  Assigned to Peter Shaw for re-assignment.


Deferred.  Will not address in 1.1.  Assigned to Martha DasSarma to put
this on the right person's list anyway, even though we won't address it.



CR Number                     : 9392
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : other
S/W Ref Platform              : other
Component Name                : thr
Subcomponent Name             : 
Short Description             : compilation problems in thread tests
Reported Date                 : 11/8/93
Found in Baseline             : 1.0.3
Found Date                    : 11/8/93
Severity                      : D
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : test/threads/crvb_thd_010.c,crvb_alt_003.c,prvb_can_003.c,prvb_thd_006.c,prrb_thd_001.c
Sensitivity                   : public

[11/8/93 public]

The following problems were reported to be preventing ANSI C compilation
of some of the thread tests. Proposed solutions are included.
_______________
crvb_thd_010.c
_______________
     *** /crvb_thd_010.c
     --- /new/crvb_thd_010.c
     ***************
     *** 145,156 ****
            */

           cma_thread_create (
                       &thread1,
                       &attr,
     !                 thread_routine,
     !                 cma_c_null_ptr);

           /*
            * Set flag to LOW and changed default threads priority to fifo/low.
            * This should allow the created thread to run and return LOW. Then
            * return default thread to fifo/high and change the flag value.
     --- 145,156 ----
            */

           cma_thread_create (
                       &thread1,
                       &attr,
     !                 (cma_t_start_routine)thread_routine,
     !                 (cma_t_address)cma_c_null_ptr);

           /*
            * Set flag to LOW and changed default threads priority to fifo/low.
            * This should allow the created thread to run and return LOW. Then
            * return default thread to fifo/high and change the flag value.
     ***************
     *** 166,180 ****
            * Join with the created thread expecting a result value of LOW.
            */

           cma_thread_join (&thread1, &exit, &result);

     !     if (result == HIGH)
             cts_failed ("Created thread allowed to run, despite lower priorit\n");
     !     else if (result == END)
             cts_failed ("Created thread did not run during priority change\n");
     !     else if (result != LOW)
             cts_failed ("Unknown failure, did not get expected return value\n");

           cts_result ();

           }
     --- 166,180 ----
            * Join with the created thread expecting a result value of LOW.
            */

           cma_thread_join (&thread1, &exit, &result);

     !     if ((cma_t_integer)result == HIGH)
             cts_failed ("Created thread allowed to run, despite lower priorit\n");
     !     else if ((cma_t_integer)result == END)
             cts_failed ("Created thread did not run during priority change\n";
     !     else if ((cma_t_integer)result != LOW)
             cts_failed ("Unknown failure, did not get expected return value\n");

           cts_result ();

           }
_______________
crvb_alt_003.c
________________
     *** /crvb_alt_003.c
     --- /new/crvb_alt_003.c
     ***************
     *** 291,301 ****
        _CMA_VOLATILE_ cts_timebuf_t    *t2;
       #endif   /* prototype */
           {
           cma_t_integer        sec, ms;

     !  return (cts_timediff(t1, t2));

           }
       /*  DEC/CMS REPLACEMENT HISTORY, Element CRVB_ALT_003.C */
       /*  *4    12-FEB-1991 01:30:45 BUTENHOF "Changes to alert control" */
       /*  *3     5-SEP-1990 09:39:41 BUTENHOF "Convert to new CMA interfaces" */
     --- 291,301 ----
        _CMA_VOLATILE_ cts_timebuf_t    *t2;
       #endif   /* prototype */
           {
           cma_t_integer        sec, ms;

     !  return ((cma_t_interval)cts_timediff((cts_timebuf_t *)t1,(cts_timebuf_t *)t2));

           }
       /*  DEC/CMS REPLACEMENT HISTORY, Element CRVB_ALT_003.C */
       /*  *4    12-FEB-1991 01:30:45 BUTENHOF "Changes to alert control" */
       /*  *3     5-SEP-1990 09:39:41 BUTENHOF "Convert to new CMA interfaces" */
______________
prvb_can_003.c
______________

     *** /prvb_can_003.c
     --- /new/prvb_can_003.c
     ***************
     *** 324,334 ****
        (t1, t2)
        _CMA_VOLATILE_ cts_timebuf_t    *t1;
        _CMA_VOLATILE_ cts_timebuf_t    *t2;
       #endif   /* prototype */
           {
     !  return (cts_timediff(t1, t2));
           }
       /*  DEC/CMS REPLACEMENT HISTORY, Element PRVB_CAN_003.C */
       /*  *4    17-JUN-1991 11:41:03 BUTENHOF "Fix compilation warnings" */
       /*  *3    12-FEB-1991 01:35:04 BUTENHOF "Changes to alert control" */
       /*  *2     7-SEP-1990 09:06:41 BUTENHOF "Remove CMA-isms from pthread tests" */
     --- 324,334 ----
        (t1, t2)
        _CMA_VOLATILE_ cts_timebuf_t    *t1;
        _CMA_VOLATILE_ cts_timebuf_t    *t2;
       #endif   /* prototype */
           {
     !  return (cts_timediff((cts_timebuf_t *)t1, (cts_timebuf_t *)t2));
           }
       /*  DEC/CMS REPLACEMENT HISTORY, Element PRVB_CAN_003.C */
       /*  *4    17-JUN-1991 11:41:03 BUTENHOF "Fix compilation warnings" */
       /*  *3    12-FEB-1991 01:35:04 BUTENHOF "Changes to alert control" */
       /*  *2     7-SEP-1990 09:06:41 BUTENHOF "Remove CMA-isms from pthread tests" */
______________
prvb_thd_006.c
______________

     *** /prvb_thd_006.c.9723
     --- /new/prvb_thd_006.c
     ***************

     ***************
     *** 167,176 ****
     --- 167,180 ----

       #if _CMA_UNIX_TYPE == _CMA__SVR4
       #define min_iterations   100000
       #endif

     + #ifndef min_iterations
     + #define min_iterations   100000
     + #endif
     +

       unsigned int     start = 0, quit[thread_count], maybe_done = 0;
       pthread_mutex_t  smutex, maybe_done_mutex, qmutex[thread_count];
       pthread_cond_t   start_cv, maybe_done_cv;

     ***************
     *** 278,295 ****
        }

           status = pthread_cond_init  (&start_cv,pthread_condattr_default);
           check(status,"pthread_cond_init");

           for (i = 0; i < thread_count; i++)
        status = pthread_create (
                &threads[i],
                attr,
     !          thread,
                (pthread_addr_t)i);
        check(status,"pthread_create");
     
           fprintf (stderr, "Starting...");
           status = pthread_mutex_lock (&smutex);
           check(status,"pthread_mutex_loc");
           start = 1;
           status = pthread_mutex_unlock (&smutex);
     --- 282,299 ----
        }

           status = pthread_cond_init  (&start_cv,pthread_condattr_default);
           check(status,"pthread_cond_init");

           for (i = 0; i < thread_count; i++) {
        status = pthread_create (
                &threads[i],
                attr,
     !          (pthread_startroutine_t)thread,
                (pthread_addr_t)i);
        check(status,"pthread_create");
     
        }
           fprintf (stderr, "Starting...");
           status = pthread_mutex_lock (&smutex);
           check(status,"pthread_mutex_loc");
           start = 1;
           status = pthread_mutex_unlock (&smutex);
______________
prrb_thd_001.c
______________

     *** /prrb_thd_001.c
     --- /new/prrb_thd_001.c
     ***************
     *** 58,68 ****
        pthread_t self;

        self = pthread_self();
        pthread_detach(&self);
        if (method)
     !          pthread_exit(1);
        else
                return (0);
       }

       pthread_mutex_t parent_mutex;
     --- 58,68 ----
        pthread_t self;

        self = pthread_self();
        pthread_detach(&self);
        if (method)
     !          pthread_exit((pthread_addr_t)1);
        else
                return (0);
       }

       pthread_mutex_t parent_mutex;
     ***************
     *** 75,85 ****
        pthread_t ct[MAXSIMCHILD];

        for (cnt = 0; cnt < ITERS; ++cnt) {
                for (ccnt = 0; ccnt < G_simchild; ++ccnt) {
                        if (pthread_create(&ct[ccnt],
     !                          pthread_attr_default, child, number & 1) == -1) {
                                cts_failed("parent %d failed on %dth ", number, cnt);
                                perror("child create");
                                return (1);
                        }
                }
     --- 75,86 ----
        pthread_t ct[MAXSIMCHILD];

        for (cnt = 0; cnt < ITERS; ++cnt) {
                for (ccnt = 0; ccnt < G_simchild; ++ccnt) {
                        if (pthread_create(&ct[ccnt],
     !                          pthread_attr_default, (pthread_startroutine_t)child,
     !                          (pthread_addr_t)(number & 1)) == -1) {
                                cts_failed("parent %d failed on %dth ", number, cnt);
                                perror("child create");
                                return (1);
                        }
                }
     ***************
     *** 117,127 ****
        if (2 < ac)
                G_simchild = atoi(av[1]);
        if (MAXSIMCHILD < G_simchild)
                G_simchild = MAXSIMCHILD;
        for (p = 1; p <= parents; ++p) {
     !          if (pthread_create(&pt, pthread_attr_default, parent, p) == -1) {
                        perror("can't create");
                        exit(1);
                }
                cts_comment("parent %d created", p);
        }
     --- 118,128 ----
        if (2 < ac)
                G_simchild = atoi(av[1]);
        if (MAXSIMCHILD < G_simchild)
                G_simchild = MAXSIMCHILD;
        for (p = 1; p <= parents; ++p) {
     !          if (pthread_create(&pt, pthread_attr_default, (pthread_startroutine_t)parent, (pthread_addr_t)p) == -1) {
                        perror("can't create");
                        exit(1);
                }
                cts_comment("parent %d created", p);
        }



CR Number                     : 9331
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : sec
Subcomponent Name             : test/security/api/moretests/sec_acl_stubs.c
Short Description             : clash between function decl.
and def. for sec_acl_get_access
Reported Date                 : 11/3/93
Found in Baseline             : 1.0.3
Found Date                    : 11/3/93
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[11/3/93 public]

Licensee reported:

"In test/security/api/moretests/sec_acl_stubs.c, the inclusion of
 dce/daclif.h defines sec_acl_get_access() as extern, but the definition
 is provided in the .c file in question.  Our ANSI compiler chokes.
"

I think the real problem is that the signatures are different in two
definitions:

In sec_acl_stubs.c, it is defined as:

void sec_acl_get_access (acl_handle, manager_type, user_obj, group_obj,
                         net_rights, status)

  sec_acl_handle_t acl_handle;
  uuid_t *manager_type;
  sec_id_t *user_obj;
  sec_id_t *group_obj;
  sec_acl_permset_t *net_rights;
  unsigned32 *status;


But in daclif.h, it is defined as:

    void sec_acl_get_access (
        [in]        sec_acl_handle_t        h,
        [in, ref]   uuid_t                  *manager_type,
        [out, ref]  sec_acl_permset_t       *net_rights,
        [out]       error_status_t          *st
    );

[11/03/93 public]
You're right that is the signature-mismatch that is causing the error.
Making DCE source code ANSI-compliant is a DCE 1.1 cleanup task.  Changed
the "fix in" to 1.1



CR Number                     : 9294
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cds
Subcomponent Name             : cds func tests
Short Description             : cdstest and func test driver should be picked up in 1.1
Reported Date                 : 10/29/93
Found in Baseline             : 1.0.3
Found Date                    : 10/29/93
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[10/29/93 public]
In the cds functional tests, there are a functional test cdstest: 
cdstest.c cdstest.sh and cds functional tests driver: dcesx/tp.sh.
The cdstest excises the cds clerk API and should increase our 
test coverage largely. dcesx/tp.sh is actually a test triver script
for all cds functional tests (cdspi, cdscp, acl, nsi). Currently, this
two are not used and not documented, they should be picked up in 1.1
timeframe to increate the test coverage and make it easy to run and log
tests and check the test results.



CR Number                     : 9266
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000,hppa
S/W Ref Platform              : aix,hpux
Component Name                : dfs
Subcomponent Name             : test
Short Description             : acl tests don't clean up on failure
Reported Date                 : 10/26/93
Found in Baseline             : 1.0.3
Found Date                    : 10/26/93
Severity                      : C
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : test/file/acl/scripts/common/init.sh
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[10/26/93 public]
when running acl tests in chocell you cannot cleanly stop the
tests and restart without performing an acl_edit on the various
levels of the scratch dir, if a single interation of the acl
tests fail they will likely never pass again as the scratch
dirs are left without sufficient permissions for the init.sh
script to remove the dirs...

this is easy to produce, start the acl tests, once the full
scratch tree has been created and the various sub tests are
running, kill em off and try to rm -rf the scratch dir...

[12/23/93 public]
Deferring to 1.1.

[7/6/94 public]
Deferring to 1.2 ... changing to an enhancements since, like low
tests, sometimes you'll want the stuff left around, sometimes not.



CR Number                     : 9265
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000,hppa
S/W Ref Platform              : hpux,aix
Component Name                : dfs
Subcomponent Name             : test
Short Description             : low tests always dump core on failure
Reported Date                 : 10/26/93
Found in Baseline             : 1.0.3
Found Date                    : 10/26/93
Severity                      : D
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : test/file/low/prog*.c files
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public
Transarc Deltas               : 
Transarc Herder               : 
Transarc Status               : 

[10/26/93 public]
the low tests prog3a,b,c and prog9, prog13, prog14 all dump
low.prog*.kernel.dump.pid files causing the disk to become  
full when chocell testing 
these tests should have a switch passed which enables/disables
the creation of these files verses a 'rebuild' of the low progs

[10/27/93 public]
this is a good idea for an enhancement
Changed Defect or Enhancement? from `def' to `enh' 
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `' 
Added field Transarc Status with value `'

[3/30/94 public]
We're looking at this in 1.1

[7/6/94 public]
Sorry - probably not making the cut - deferred to 1.2



CR Number                     : 9210
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : acl example server.
Short Description             : dacl_sutil should be defuncted
Reported Date                 : 10/20/93
Found in Baseline             : 1.0.3
Found Date                    : 10/20/93
Severity                      : E
Priority                      : 4
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : client/admin/acl_edit/svr_example/dacl_sutil.c
Sensitivity                   : public

[10/20/93 public]

security/client/admin/acl_edit/svr_example/dacl_sutil.c should go away and
the function it implements should be be replaced by dce_error_inq_text().

[10/20/93 public]
It isn't used for anything (isn't even built).  We'll defunct it when the
tree opens up again for 1.1 work.

[10/3/94 public]
A year later he says "wow, I remember this CR, kinda sad that there hasn't
been time in a year to defunct an unused file :-(".  Reassigned to test,
since the acl server has been moved from the core tree to the test tree.



CR Number                     : 9135
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : systest
Subcomponent Name             : sec.rgy.7
Short Description             : sec.rgy.7 - test_drv.ksh does not support multiple machine configuration ...
Reported Date                 : 10/15/93
Found in Baseline             : 1.0.3
Found Date                    : 10/15/93
Severity                      : B
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : test_drv.ksh
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[10/15/93 public]

The shell script test_drv.ksh which is used to run the 
system test sec.rgy.7 does not allow a tester to configure 
more than one machine. At the present time, one can only 
run the test, server and client, on one machine. 

This script also uses the killproc procedure to bring down
the server in the cleanup function. Instead it should have
the client bring down the server. This feature is supported.



CR Number                     : 9133
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : systest
Subcomponent Name             : sec.rgy.7
Short Description             : sec.rgy.7
Reported Date                 : 10/15/93
Found in Baseline             : 1.0.3
Found Date                    : 10/15/93
Severity                      : B
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[10/15/93 public]

Run sec.rgy.7 overnight on a two machine cell (both HP). After
of having run successfully for 1 hour, the client login and logout
operation run (happily) in an infinite loop.

This CR will also be used to report any enhancements made to the
test.

[11/8/93 public]

When running this test intercell, secrgy_client queries the wrong 
DCE Security server to calculate the MAX ID in the cell. It queries
the local SEC server, but instead it should query the one in the 
foreign cell where the accounts are to be added.



CR Number                     : 9116
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : rpc.runtime.1
Short Description             : rpc.runtime.1: IP address reported in journal file is wrong
Reported Date                 : 10/14/93
Found in Baseline             : 1.0.3
Found Date                    : 10/14/93
Severity                      : E
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[10/14/93 public]

In the TET journal file, the IP address of the client machines is reported 
incorrectly.  Example:

|Test results for client@traffic.osf.org (90.5.105.130)

The IP address should be 130.105.5.90 not 90.5.105.130.

[9/21/93 public]

Just not able to squeeze it in ... deferring.



CR Number                     : 9094
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 4616
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : sec
Subcomponent Name             : test/security/api/testsh/tsh.l
Short Description             : api/testsh/tsh.l needs
prototype for malloc()
Reported Date                 : 10/13/93
Found in Baseline             : 1.0.3
Found Date                    : 10/13/93
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[10/13/93 public]

Licensee reported:

" Since test/security/api/testsh/tsh.l does not include a prototype for 
 malloc() our ANSI compiler complains of a type mismatch.

 add include of stdlib.h to provide prototype for malloc()
"

OT 4616 was also about unable to compile the c code from tsh.l. It was
fixed by including <malloc.h>, but malloc.h does not give the prototype for
malloc() (check /usr/include/malloc.h of AIX)



CR Number                     : 9093
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : 
Short Description             : macro redefinition causing
compilation to fail
Reported Date                 : 10/13/93
Found in Baseline             : 1.0.3
Found Date                    : 10/13/93
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[10/13/93 public]

Licensee reported: (code under test/security/api/moretests)

" In tests/security/api/moretests/key_mgmt.c, the macro PLAIN_PASSWD is
 already defined from rgymacro.h via key_mgmt.h.  This redefinition
 prevents the file from compiling with our ANSI compiler.


 In addition, tsh_misc.h includes tsh_common.h which defines
 SUCCESS and FAILURE, but later
 key_mgmt.h includes rgymacro.h which includes macros.h which redefines
 SUCCESS and FAILURE.  This also prevents compilation with our compiler.
"

rgymacro.h and macros.h are under src/security/h.

The suggested fix is for key_mgmt.c to undef PLAIN_PASSWD before defining
again. And adding #if defined(FAILURE) to macros.h.



CR Number                     : 8663
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : systest
Short Description             : restructure directory
Reported Date                 : 9/22/93
Found in Baseline             : 1.0.3
Found Date                    : 9/22/93
Severity                      : E
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[9/22/93 public]

Enhancement request to restructure the dfs system tests into multiple
directories. This will make file-test relations more obvious and ease
TET'izing.

Proposed subdirectories are:

glue	stress	checklists	rwall	lock	common

where

glue would contain:
dfs.glue
dirread.c
dirwrite.sh

stress would contain:
dfs.maxdir
dfs.maxfile
dfs.block_frag

checklists would contain checklists

rwall would contain:
dfs.read_write_all.main
do.ksh
profile
README.RWALL

lock would contain:
dfs.lock

common would contain:
filewnr.c
check_RC.ksh

Ideas/comments welcome.

[12/1/93 public]
Status changed to defer to indicate fixby field = 1.1 intentional.

[7/6/93 public]
Deferring for now - MAY be able to get to this one in 1.1 but
not a priority ...



CR Number                     : 8632
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : 
Short Description             : allow input of a start UNIX id to the rgy tests rather than using fixed hardwired ones
Reported Date                 : 9/19/93
Found in Baseline             : 1.0.2
Found Date                    : 9/19/93
Severity                      : D
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : src/test/security/api/moretests/rgy_*
Sensitivity                   : public

[9/19/93 public]

In some ports of DCE the registry is configured with UNIX ids beginning at
a value (e.g. 1000) which causes failures when running some of the tests in
src/test/security/api/moretests (e.g. rgy_add.sh, rgy_change.sh) which use
fixed UNIX ids such as 1002 (these ids being already attributed).  Make
those tests more flexible so that they can start from a given UNIX id
rather than use fixed ones.



CR Number                     : 8475
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : thr
Subcomponent Name             : functional tests
Short Description             : return value from pthread_getprio() is not checked properly in prvb_thd_006.c
Reported Date                 : 8/18/93
Found in Baseline             : 1.0.3
Found Date                    : 8/18/93
Severity                      : E
Priority                      : 4
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[8/18/93 public]

A chance look at the file prvb_thd_006.c revealed an error at line 253:

    prio = pthread_getprio(pthread_self ());
    check (sched_pol, "pthread_getprio");

The first argument to the check macro should be prio, not sched_pol.

The rest of this file and the other tests should be checked for similar
"cut and paste" errors.



CR Number                     : 8358
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : rpc.sec.2 and rpc.cds.3 setup scripts
Short Description             : rpc.sec.2 and rpc.cds.3 - contain limit calls for pre-osf1.1
Reported Date                 : 7/23/93
Found in Baseline             : 1.0.2
Found Date                    : 7/23/93
Severity                      : D
Priority                      : 4
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : rpc.sec.2_setup.sh, rpc.sec.2_runtest.sh, rpc.cds.3_setup.sh, start_test
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[7/23/93 public]
While looking at the rpc.sec.2_setup.sh script for Everett Heller, I
noticed the code that special-cases remote shell calls to OSF/1 clients
because there was a problem in OSF/1 1.0.[34] is still in there.  The 
problem has been fixed in later versions of OSF/1, so the code should
be removed.  The code does not (to my knowledge) prevent the test from 
executing correctly, ergo the very low priority/severity.



CR Number                     : 8357
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : rpc
Subcomponent Name             : 
Short Description             : NULL_UUID and MEMORY_ERROR multiply defined.
Reported Date                 : 7/22/93
Found in Baseline             : 1.0.2
Found Date                    : 7/22/93
Severity                      : E
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : in test/rpc/rtandidl/moretests tsh_string.h tsh_uuid.h string_free.c
Sensitivity                   : public

[7/22/93 public]

test/rpc/rtandidl/moretests/string_free.c includes tsh_string.h and
tsh_uuid.h which both define NULL_UUID and MEMORY_ERROR causing an ANSI-C
compiler to issue redefinition warnings.



CR Number                     : 8212
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : systest tools
Short Description             : there should be a repository of system test tools
Reported Date                 : 6/29/93
Found in Baseline             : 1.0.2b6
Found Date                    : 6/29/93
Severity                      : C
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : test/systest/file/conf_util.sh
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[6/29/93 public]
The script conf_util.sh is contains shell functions that are used by 
a number of system tests (rpc.sec.2, rpc.cds.3, and dfs.lock).  Currently,
this file (possibly with a different name) is located in two directories in
the source tree, and for dfs.lock, it will have to be submitted again.  

The proper solution is to submit this file and others like it that provide
useful, generic functions, to the systest/tools directory and remove the
redundant copies.

[07/21/93 public]
I submitted the Makefile to get the conf_util.sh script installed, but I 
am leaving the defect open so that this issue will get addressed sooner
or later.



CR Number                     : 8209
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dfs.lock system test
Short Description             : dfs.lock - does not save parameter info if command line args are used
Reported Date                 : 6/29/93
Found in Baseline             : 1.0.2b6
Found Date                    : 6/29/93
Severity                      : C
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : test/systes/file/dfs.lock
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[6/29/93 public]
Gail Driscoll had a big problem with the command line switches that I added
to the dfs.lock script; namely that they broke the "audit trail" that tied
a bunch of test results to a configuration file.  In other words, a test 
run should run only from a config file in order to insure that another test
run will use the same parameters, and to insure that the parameters of a 
test run are stored for inspection later.  Where the command line flags add
flexibility, they do not preserve the parameters of the test run unless the
log from the driver is saved.  So currently, if you want the command line
arguements, you have to invoke the test as dfs.lock_cl.  If you want to
save the parameters the test was run with, you have to save the driver log
(which, it occurs to me now, you probably would anyway, since the driver
log is what contains the lines like "ITERATION 43: PASSED" that tell you
if the test worked or not).

  It ocurred to me that a possible solution to this conflict between
reproducibility and flexibilty is to have dfs.lock create a new config file
that reflects the parameters under which the test will run, if any command
line parameters are specified.  This would work something like this:

    If any command line parameters are specified, then a flag is set that 
indicates a new config file is to be generated.  After all the command line
flags are processed, and the parameters of the test run are set, the flag
is checked.  If it is set, the following happens:
   - the script checks to see if a backup of the config file used by the
     test already exists (this is the file <config_file>.orig).  
   - if a backup does not exist, the config file is copied to the backup
     name.
   - the config file is copied to <config_name>.bak.
   - the current values of all the parameters are written to the config
     file in a format that is suitable for use as a config file for the 
     next test run.  A comment is placed in the file indicating that the 
     file was automatically generated, and indicating the path to the
     original and backup config files.

[9/23/93 public]
This is now to be an enhancement.

[9/21/94 public]
Nice idea ... all the dfs system tests could use this interface - but
one thing at a time, for 1.1, we updated all the automated tests to
have the same command line interface, maybe next time around we can enhance.



CR Number                     : 8040
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : unix test
Short Description             : unxi test #4 failed.
Reported Date                 : 5/21/93
Found in Baseline             : 1.0.2
Found Date                    : 5/21/93
Severity                      : B
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
 ./test/security/api/moretests/unix_getgrnam.c
Sensitivity                   : public

[5/21/93 public]
Not initialized person_name before calling strcat.  So test failed
with "data mismatch"



CR Number                     : 8028
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cds
Subcomponent Name             : 
Short Description             : what is test/directory/cds/dcesx/tp.sh?
Reported Date                 : 5/20/93
Found in Baseline             : 1.0.2
Found Date                    : 5/20/93
Severity                      : E
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : test/directory/cds/dcesx/tp.sh
Sensitivity                   : public

[5/20/93 public]

test/directory/cds/dcesx/tp.sh appears to be incomplete (e.g. dcecheck is
missing). tp.sh should either be completed, documented, and used to test
cds, or it should be removed from the functional test branch of the source
tree.



CR Number                     : 7995
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : rpc.cds.3 and rpc.sec.2 system tests
Short Description             : rpc.cds.3 and rpc.sec.2 - do not conform to 1.1 requirements
Reported Date                 : 5/13/93
Found in Baseline             : 1.0.2b23
Found Date                    : 5/13/93
Severity                      : C
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[5/13/93 public]
This defect is a place holder to remind us that tests, as well as "regular"
code, must conform to the 1.1 specifications for servicability, I18n and
code cleanup.  The rpc.sec.2 and rpc.cds.3 tests currently do not.



CR Number                     : 7994
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : rpc.sec.2 and rpc.cds.3 system tests
Short Description             : rpc.sec.2 and rpc.cds.3 - do not allow setup for tests to be undone.
Reported Date                 : 5/13/93
Found in Baseline             : 1.0.2b23
Found Date                    : 5/13/93
Severity                      : D
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[5/13/93 public]
The rpc.sec.2 and rpc.cds.3 system tests add principals and keys to the 
registry, and directories to the CDS namespace.  There should be a script
that removes the principals/keys and CDS directories, etc.



CR Number                     : 7992
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : rpc.sec.2 and rpc.cds.3 systests
Short Description             : rpc.sec.2 and rpc.cds.3 - do not handle exceptions.
Reported Date                 : 5/13/93
Found in Baseline             : 1.0.2b23
Found Date                    : 5/13/93
Severity                      : E
Priority                      : 4
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[5/13/93 public]
Neither the client or server code for the rpc.sec.2 and rpc.cds.3 system
tests handles exceptions; ie: no TRY..CATCH wrapping of calls.

[9/23/93 public]
Changed to enhancement.



CR Number                     : 7960
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 8005
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : dacl
Short Description             : Need a regression test to ensure existence of mask_obj when necessary
Reported Date                 : 5/7/93
Found in Baseline             : 1.0.2a
Found Date                    : 5/7/93
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public
Transarc Status               : open
Transarc Deltas               : 
Transarc Herder               : jaffe@transarc.com

[5/7/93 public]
The mask_obj entry is not set in the ACL for the file created by the
unauthenticated user even though the ACL has a foreign_other entry.
POSIX specifies that a mask_obj entry always has to be present in an
ACL with more that just user_obj, group_obj and other_obj entries.
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `jaffe@transarc.com' 
Added field Transarc Status with value `open'

[5/10/93 public]
I'd like to add that the salvager should report such errors but
apparently does not.  The salvager used the same function to validate
ACLs as the setacl call does it so this means that
dacl_epi_ValidiateBuffer should do these additional checks.

[5/17/93 public]
Since the model is now to use other_obj in an initial ACL only as a template
as described under OT 8005, a foreign_other is no longer added into
the ACL for a file/dir created by a foreign user unless the initial ACL
explicitly specifies so. And in that case the initial ACL will always have
a mask_obj entry too, which will be inherited correctly. Hence
we no longer need to modify dacl_ChangeRealm to create a mask_obj
as it will no longer be called upon to convert a other_obj to foreign_other.
But dacl_epi_ValidateBuffer still needs modification to ensure that mask_obj
is present when there is any entry other than the {user,group,other}_obj.
Under OT 8005, dacl_epi_ValidateBuffer has been fixed to do this. I will
add a regression test into the test_vnodeops test suite to test this.
Filled in Inter-dependent CRs with `8005'

[5/17/93 public]
Convert this into a test enhancement request for the regression test.
Changed Defect or Enhancement? from `def' to `enh' 
Changed CR in Code, Doc, or Test? from `code' to `test' 
Changed Short Description from `The ACL for a file created by an 
 unauthenticated user does not have mask_obj.' to `Need a regression test to 
 ensure existence of mask_obj when necessary' 
Changed Severity from `B' to `C' 
Changed Priority from `1' to `2'



CR Number                     : 7806
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : security tests
Short Description             : security tests have the password -dce- hardcoded in scripts and C code.
Reported Date                 : 4/27/93
Found in Baseline             : 1.0.2
Found Date                    : 4/27/93
Severity                      : C
Priority                      : 4
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[4/27/93 public]

Many of the security tests only work if the cell_admin password is -dce-.
This basically means NONE of the tests can be run on a real cell. Worse,
knowledge of this password has been hardcoded into C sources, for example:

	src/test/security/api/moretests/unix_getpwname.c

and several others in that directory.

The cell_admin password (and really the account name too) should be
parameterized, so that the tests can be run in a real cell.

[10/14/93 public]

The test functionality works as required. This request is not a defect, but
an enhancement to support flexible cell admin password. Changing this
defect to an enhancement.

[9/1/94 public]

Lowered priority and deferred to 1.2 .
It does not seem that running the tests on a 'real' cell is a
high priority item.  First it will bring the cell to its knees
and make it unusable for some time.  Second the tests are liable
to leave the cell in unknown state as not much consideration has
been given to the case of them being run on a 'real' cell.
Finally it's too late for the 1.1 timeframe.



CR Number                     : 7792
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : rpc.cds.3
Short Description             : no driver for rpc.cds.3
Reported Date                 : 4/23/93
Found in Baseline             : 1.0.2b23
Found Date                    : 4/23/93
Severity                      : C
Priority                      : 1
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[4/23/93 public]
There is no driver for the rpc.cds.3 system test.  This should be cloned
from the rpc.sec.2_runtest.sh script.

[9/23/93 public]
Re-assign to Cindy Mckeen as per Peter Shaw.

[10/15/92]

rpc.cds.3 can be run manually.  Writing a test driver to automate running
the test is more of an enhancement than a defect.  This CR is being
reclassified to an enhancement for 1.1.



CR Number                     : 7783
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : other
S/W Ref Platform              : other
Component Name                : systest
Subcomponent Name             : rpc.sec.2 and rpc.cds.3 system tests
Short Description             : rpc.sec.2 and rpc.cds.3 - Are not portable to systems that do not have the getclock() library call.
Reported Date                 : 4/22/93
Found in Baseline             : 1.0.2b23
Found Date                    : 4/22/93
Severity                      : A
Priority                      : 1
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : src/test/systest/rpc/rpc.cds.3/{rpc.cds.3_defs.h, rpc.cds.3_cmain.c,maintain_id.c, rep_timer.c}, src/test/systest/rpc/rpc.sec.2/{rpc.sec.2_cmain.c, rpc.sec.2_defs.h}
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[4/22/93 public]
The header files and source files noted above do sub-second timing using
the OSF AES specified library call getclock().  These files should be
changed so that a compiler switch can be used to make them use the
gettimeofday() library call instead, given it's wide use.

[9/23/93 public]
Marked as an enhancement as per Peter Shaw.



CR Number                     : 7686
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dcetest_config
Short Description             : dcetest_config should have a setup phase for 102 tests and dcegdshd
Reported Date                 : 4/12/93
Found in Baseline             : 1.0.2b23
Found Date                    : 4/12/93
Severity                      : C
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : src/test/systest/dcetest_config
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[4/12/93 public]
Many of the new system tests developed for dce1.0.2 and dcegdshd (from the dce
1.0.1 system test suite) need to have some sort of setup done between 
installation of the test and execution of the test.  The dcetest_config
script should provide a menu that allows the user to do this setup in 
automatic manner.

[08/11/93 public]
Changed owner to Cindy since she is working on dcetest_config.



CR Number                     : 7569
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : rpc.sec.2
Short Description             : rpc.sec.2 - needs to handle conn_closed and auth_tckt_expired in call loop
Reported Date                 : 3/23/93
Found in Baseline             : 1.0.2b19
Found Date                    : 3/23/93
Severity                      : C
Priority                      : 1
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : test/systest/rpc/rpc.sec.2/rpc.sec.2_cmain.c
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[3/23/93 public]
The rpc.sec.2_cmain.c file needs the following changes in the call loop
to handle the occurance of auth ticket expired and connection closed errors
in when making an rpc to the server (especially for TCP clients):

  1) if an auth ticket error is returned, then at most one message about it
     should be printed until the lat_id_refr value changes.  The client
     should probably delay until the next refresh.

  2) if a connetion closed is received, the client must rebind.

[08/23/93 public]
This defct was opened against the wrong component.  Changed the component
to the correct "dce".

[9/23/93 public]
Changed to enhancement as per Peter Shaw.



CR Number                     : 7549
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : rpc
Subcomponent Name             : rtandidl
Short Description             : string.h ambiguity
Reported Date                 : 3/19/93
Found in Baseline             : 1.0.2b19
Found Date                    : 3/19/93
Severity                      : D
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[3/19/93 public]

In test/rpc/rtandidl/moretests.h there is a file string.idl.  This gets
transformed by the idl compiler into string.h.  That name is ambiguous with
the more generic Un*x string.h include file.



CR Number                     : 7450
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : test/security/api/moretests
Short Description             : provide a prefix for temporary
files where to redirect output.
Reported Date                 : 3/9/93
Found in Baseline             : 1.0.2b18
Found Date                    : 3/9/93
Severity                      : E
Priority                      : 4
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[3/9/93 public]

Most of the *.sh scripts (e.g. sec_acl_setup.sh, passwd_import.sh,
passwd_override.sh) in the directory src/test/security/api/moretests
redirect the output to a file in the following manner, for example:

in the rgy_setup_init.sh,
 
echo "do acc" >>/tmp/rgy_edit.script

or

in the passwd_import.sh script,

../moretests/binlogin lp -dce-  >> /tmp/passwd_import_ie.out


It would be better to provide a prefix variable for the temp files the 
scripts create and allow users to customize them their own environment.

eg. 

PI_TMP="/YOURTEMPDIR"

and replace all the instances of /tmp to $PI_TMP in the scripts.

[03/09/93 public]
Actually this is probably best and follows standard shell practive:
	PI_TMP=${TMPDIR-/tmp}



CR Number                     : 7375
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : rpc
Subcomponent Name             : test/idl/threads
Short Description             : code references "cma" entrypoints
Reported Date                 : 2/26/93
Found in Baseline             : 1.0.2b17
Found Date                    : 2/26/93
Severity                      : B
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[2/26/93 public]

The test/rpc/idl/threads test uses cma entrypoints and include files
instead of the corresponding pthread versions.  It can/should/must be
changed.



CR Number                     : 7352
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : rpc
Subcomponent Name             : rtandidl
Short Description             : improper use of strcmp over uuids.
Reported Date                 : 2/24/93
Found in Baseline             : 1.0.2b16
Found Date                    : 2/24/93
Severity                      : C
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[2/24/93 public]

Some of the tests in test/rpc/rtandidl/moretests/bind_handle_tsts.c and
str_binding_tsts.c use strcmp to compare uuids.  These should be cleaned up
to use uuid_equal.



CR Number                     : 7125
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : lfs
Short Description             : salt should look at salvager verify status
Reported Date                 : 2/3/93
Found in Baseline             : 1.0.2
Found Date                    : 2/3/93
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public
Transarc Status               : open
Transarc Deltas               : 
Transarc Herder               : jaffe@transarc.com

[2/3/93 public]
When the salt salvager tests check the salvager's repairs, they
currently do not pay attention to the exit status returned by the
salvager.  This was in part a deliberate decision: salt reaches
its own conclusions without relying on the salvager's judgments.
However, salt only examines the small subset of file system
structures that it considers relevant to the case at hand and
therefore may miss other file system corruption, which the salvager
verify step may catch.  It seems sensible to report that a salt
test has failed whenever salvager verification fails, even if
salt's own checking does not detect any corruption.
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `jaffe@transarc.com' 
Added field Transarc Status with value `open'



CR Number                     : 7019
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : systest
Short Description             : rpc.sec.2,rpc.runtime.1,etc unportable filenames
Reported Date                 : 1/26/93
Found in Baseline             : 1.0.1
Found Date                    : 1/26/93
Severity                      : E
Priority                      : 4
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[1/26/93 public]
There are a handful of files (rpc.sec.2,rpc.runtime.1,etc) in the
src/test/systest/rpc directory that have two periods in the directory
or filename.  This isn't maximally portable and should be renamed to
things like rpcsec2, runtime, etc.  I think one period in filenames
and no periods in directory names is best.

A cleanup/portability issue for 1.1

[5/13/94 public]
Since this is a system test bug, I am assigning it to Paul Ellis.
Personally, I don't think this is a useful thing to do, but
I will leave the final call up to the systest people.



CR Number                     : 6866
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : testsh
Short Description             : testsh in rpc and sec should be collapsed into one directory.
Reported Date                 : 1/16/93
Found in Baseline             : 1.0.2
Found Date                    : 1/16/93
Severity                      : B
Priority                      : 1
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[1/16/93 public]

The test directories src/test/rtandidl/testsh and 
src/test/security/api/testsh are identical and should be collapsed into one
so that fixes do not have to be made into both sets of files.

[2/26/93 public]

This enh is even more desirable now.  The testsh in
test/rpc/rtandidl/testsh has been significantly cleaned up and the security
tests should use that version.

The tests should be moved to a common subtree and out of rpc and security.

[6/10/93 public]

Changed component to security.



CR Number                     : 6842
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : low
Short Description             : low/test7 script needlessly enumerates files to be deleted
Reported Date                 : 1/14/93
Found in Baseline             : 1.0.2b11
Found Date                    : 1/14/93
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : test/file/low/test7
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public
Transarc Status               : 
Transarc Deltas               : 
Transarc Herder               : 

[1/14/93 public]
In removing its target directory before running prog7, the low/test7
script makes life needlessly complicated by saying "rm -rf tdir.7/*",
apparently in order to preserve tdir.7 itself.  It would be better
to use "rm -rf tdir.7" followed by a new "mkdir tdir.7", since, given
the number of files (symlinks) created by the test, enumerating the
files can stress the limit placed on command line length by exec().

[9/29/93 public]
Don,
I changed this to an enhancement since the test program, low/test7, 
does not fail in itself. 
Tu
Changed Defect or Enhancement? from `def' to `enh' 
Changed H/W Ref Platform from `pmax' to `all' 
Changed S/W Ref Platform from `osf1' to `all' 
Filled in Subcomponent Name with `low' 
Filled in Responsible Engr. with `tu@transarc/.com' 
Filled in Resp. Engr's Company with `tarc' 
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `' 
Added field Transarc Status with value `'

[3/30/94 public]
We're looking at this in 1.1

[9/21/94 public]
Well ... we didn't get to this either ... unless Ron or Andy
are sufficiently bored or annoyed by this ...



CR Number                     : 6632
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : acl tests
Short Description             : acl sizetest depends on number of principals/groups
Reported Date                 : 12/25/92
Found in Baseline             : 1.0.1b24
Found Date                    : 12/25/92
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public
Transarc Status               : open
Transarc Deltas               : 
Transarc Herder               : jaffe@transarc.com

[12/25/92 public]

The sizetest test should be independent of the number of entries in
the security registry and create additional principals and groups to 
exercise big acls.
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `jaffe@transarc.com' 
Added field Transarc Status with value `open'



CR Number                     : 6310
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : 
Short Description             : Missing README files in install tree
Reported Date                 : 12/3/92
Found in Baseline             : 1.0.2
Found Date                    : 12/3/92
Severity                      : E
Priority                      : 4
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public
Transarc Status               : open
Transarc Deltas               : 
Transarc Herder               : andi@transarc.com

[12/3/92 public]
Only the acl, bos, and zlc tests install their README files.
Either they all should (which I think they should), or none should.
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `mcinerny@transarc.com' 
Added field Transarc Status with value `open'

[12/3/92 public]
Changed Responsible Engr. from `pakhtar' to `shl@transarc.com'

[8/15/95 public]
Reassigned to people who currently work in the File Systems group...
Changed Short Description from `Missing README files in intall tree' to 
 `Missing README files in install tree' 
Changed Interest List CC from `fred@transarc.com, jaffe@transarc.com' to 
 `biyani@transarc.com' 
Changed Responsible Engr. from `shl@transarc.com' to `andi@transarc.com' 
Changed Transarc Herder from `mcinerny@transarc.com' to `andi@transarc.com'



CR Number                     : 6276
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : ACL tests
Short Description             : All ACL tests cannot be run together.
Reported Date                 : 12/1/92
Found in Baseline             : 1.0.1b24
Found Date                    : 12/1/92
Severity                      : D
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public
Transarc Status               : open
Transarc Deltas               : 
Transarc Herder               : jaffe@transarc.com

[12/1/92 public]
All ACL tests cannot be run via one invocation of the ACL test driver 
due to setup needs. As discussed with Beth, it would be desirable
to seperate the tests into 3 different phases 
  - initialisation/setup phase
  - execution phase ( single or multiple tests)
  - cleanup phase
This would enable multiple tests to be run via one invocation of the
execution phase driver.
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `mason@transarc.com' 
Added field Transarc Status with value `open'

[8/16/93 public]
This task is part of sweeping old defects for OSF. 
                                                                              
The complaint addressd above is legitimate but it cannot be considered
as a defect. It is really a matter of how to automate the test suite to
be more user-friendly to run. 
                                                                              
In addition. IBM's also has done some of the work on acl_edit by adding a new
set of options to the user interface and a DBG trace utility to facilitate the
debuging process. This work (Rajesh has the copy) can be merged into our code
base as part of (the first phase) the  enhacement work described above. 
                                                                              
Mark it enh. 
Changed Defect or Enhancement? from `def' to `enh' 
Changed Interest List CC from `mason@transarc.com, bab@transarc.com' to 
 `tu@transarc.com, comer@transarc.com' 
Changed Transarc Herder from `mason@transarc.com' to `jaffe@transarc.com'



CR Number                     : 6243
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : lfs
Short Description             : stand-alone Episode must initialize localCellID
Reported Date                 : 11/30/92
Found in Baseline             : 1.0.2
Found Date                    : 11/30/92
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public
Transarc Deltas               : 
Transarc Herder               : jaffe@transarc.com
Transarc Status               : open

[11/30/92 public]
DFS seems to be relying on the protocol exporter to initialize
dacl_localCellID.  The value to initialize it to is taken from some syscall,
presumably the one that starts the protocol exporter.

Suppose I run standalone Episode.  Normally I need to have some DCE components
running, so that acl_edit can do its thing.  But I am not supposed to need
to have DFS running.

But without DFS running, nobody is initializing dacl_localCellID.  Because
of this, all dummy ACL's returned by dacl_InitEpiAcl have a realm ID of all
0's.  sec_acl_ParseAcl chokes on this (returns DACL_ERROR_SEC_RGY_PGO_ERRORS).

I don't know what the ``right'' fix is.  Should the Episode initialization
syscall try to initialize dacl_localCellID the way that the PX initialization
syscall does?  Or, should sec_acl_ParseAcl do a special-case check for
all-zero realm ID's?  Or what?
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `jaffe@transarc.com' 
Added field Transarc Status with value `open'

[2/8/93 public]
Since this is SA Episode, it is only applicable to test.

Changed CR in Code, Doc, or Test? from `code' to `test'

[12/23/93 public]
Setting status to defer. This CR may be cancelled since SA episode is
not a deliverable of OSF DFS.



CR Number                     : 5957
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : lfs
Short Description             : Enhancement to rcx tests for directory length consistency
Reported Date                 : 11/5/92
Found in Baseline             : 1.0.1b24
Found Date                    : 11/5/92
Severity                      : D
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public
Transarc Status               : open
Transarc Deltas               : 
Transarc Herder               : mason@transarc.com

[11/5/92 public]
Modify rcx to use the size field returned by lstat in determining
the consistency of the directory but do not use the size field in
calculating the system state checksum. 
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `mason@transarc.com' 
Added field Transarc Status with value `open'

[3/9/93 public]
Changed Responsible Engr. from `jdp@transarc.com' to `rajesh@transarc.com'



CR Number                     : 5914
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : EPISODE
Short Description             : us_io does not really do writes asynchronously
Reported Date                 : 11/3/92
Found in Baseline             : 1.0.2
Found Date                    : 11/3/92
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public
Transarc Deltas               : 
Transarc Herder               : jaffe@transarc.com
Transarc Status               : open

[11/3/92 public]
The us_io routines that simulate asynchronous I/O completion actually do
the writes when strategy is called.  This means that from the point of
view of the disk the I/O isn't really asynchronous at all.  For testing
recovery this is inadaquate.
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `jaffe@transarc.com' 
Added field Transarc Status with value `open'

[11/11/93 public]
Opened this in Transarc's DB as 4666.
Changed CR in Code, Doc, or Test? from `code' to `test' 
Changed Subcomponent Name from `lfs' to `EPISODE' 
Filled in Reported by Company's Ref. Number with `4666'



CR Number                     : 5769
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 3804, 5508
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : lfs
Short Description             : Need tests for "new block security" functionality
Reported Date                 : 10/22/92
Found in Baseline             : 1.0.1b24
Found Date                    : 10/22/92
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public
Transarc Status               : open
Transarc Deltas               : 
Transarc Herder               : mason@transarc.com

[10/22/92 public]
We need tests for the New Block Security functionality that has been
added into the LFS code.

Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `mason@transarc.com' 
Added field Transarc Status with value `open'

[10/22/92 public]
Deltas mason-ot5508-wrong-comparison-in-WaitForTranFree and
ota-new-block-security-2467, should enable new block security.

Filled in Inter-dependent CRs with `3804, 5508'

[10/22/92 public]
Changed Interest List CC from `ota@transarc.com' to `ota,mason'

[mcinerny@transarc.com 10/23/92 public] 
This is not a bug in the system code base, but a bug with the test
code base.

Changed CR in Code, Doc, or Test? from `code' to `test'



CR Number                     : 5683
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : lfs
Short Description             : Need tests for newaggr
Reported Date                 : 10/16/92
Found in Baseline             : 1.0.1b24
Found Date                    : 10/16/92
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public
Transarc Status               : open
Transarc Deltas               : 
Transarc Herder               : mason@transarc.com

[10/16/92 public]

Need tests for newaggr.

Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `mason@transarc.com' 
Added field Transarc Status with value `open'



CR Number                     : 5672
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 5368
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : test
Short Description             : CreateLocalUser needs to create requisite dirs
Reported Date                 : 10/15/92
Found in Baseline             : 1.0.2
Found Date                    : 10/15/92
Severity                      : E
Priority                      : 4
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public
Transarc Status               : open
Transarc Deltas               : 
Transarc Herder               : mcinerny@transarc.com

[10/15/92 public]
The test/file/util/CreateLocalAccount script needs the following
directories to exist in order to succeed:

RIOS:  /u/$new_user
PMAX:  /usr/users
	(yes, /usr/users -- it does not need to make a dir for each new user)

Perhaps it should be more assertive about having these dirs?  Especially 
on a pmax, where the lack of /usr/users causes the subordinate call to adduser
to loop forever.

Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `mcinerny@transarc.com' 
Added field Transarc Status with value `open'



CR Number                     : 5595
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : fs, low
Short Description             : The debug flag should not be hard coded in C files.
Reported Date                 : 10/8/92
Found in Baseline             : 1.0.2
Found Date                    : 10/8/92
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public
Transarc Status               : open
Transarc Deltas               : 
Transarc Herder               : jaffe@transarc.com

[10/8/92 public]
The debug flags in C programs, such as prog1.c, ..., prog14.c in fs and low
have been hard coded, which is not the way we want. Each time you want to
change the flags you have explicitly fire a defect to set the flags.
Those flags should be passed to thos C programs by the scripts. In fact,
we just want use a single debug set at script level to control the debug
flags both for scripts and C programs.
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `jaffe@transarc.com' 
Added field Transarc Status with value `open'

[7/20/93 public]
The problem is not considered a bug. However, we should enhance it in the
future, so marked. 
Changed Defect or Enhancement? from `def' to `enh' 
Changed Interest List CC from `pakhtar@transarc.com, fred@transarc.com' to 
 `pakhtar@transarc.com, fred@transarc.com, tu'

[3/30/94 public]
We're looking at this for 1.1

[7/6/94 public]
Doesn't look like we'll have time ...



CR Number                     : 5567
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : 
Short Description             : dfsexport
Reported Date                 : 10/6/92
Found in Baseline             : 1.0.2
Found Date                    : 10/6/92
Severity                      : D
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public
Transarc Status               : open
Transarc Deltas               : 
Transarc Herder               : jaffe@transarc.com

[10/6/92 public]
Sure would be nice if we used a uniform paradigm for device naming in dfs.
For example, newaggr will accept the name "epi0" and convert it to /dev/epi0
while dfsexport will only accept /dev/epi0.
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `jaffe@transarc.com' 
Added field Transarc Status with value `open'

[3/30/94 public]
We're looking at this for 1.1

[3/31/94 public]
We'd need to know what the deficiencies are.  I believe that at least some
of the cases have been handled since the bug was filed.  But we may have
a fix or two.



CR Number                     : 5530
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : lfs
Short Description             : efts attach on a non-Episode aggregate does not generate meaningful error
Reported Date                 : 10/2/92
Found in Baseline             : 1.0.1b24
Found Date                    : 10/2/92
Severity                      : E
Priority                      : 4
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public
Transarc Status               : open
Transarc Deltas               : 
Transarc Herder               : mason@transarc.com

[10/2/92 public]

This is on build dfs-102-1.51. efts attach on a BSD filesystem /dev/rcxb 
generates:

 [tmp] efts attach /dev/rcxb
efts: Aggregate may need to be recovered (dfs / ftu)

 [tmp] salvage /dev/rcxb
Salvaging /dev/rcxb
Will run recovery on /dev/rcxb
 SectorSize 512; TotalBlocks 16384; BlockSize 4096;
 FragmentSize 512; FileSysCreateTime 718039474;
 FileSysClean 1; FileSysEmpty 0; FileSysMountedAs ``/tmp/r''
/dev/rrcxb: Not an Episode file system.
/dev/rrcxb: cannot verify an aggregate with these parameters.
Problem with /dev/rrcxb as Episode aggregate: crash (exit=0x10).

efts should probably complain its not a Episode aggregate as salvage does.

Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `mason@transarc.com' 
Added field Transarc Status with value `open'

[10/26/92 public]
Actually this is a cosmetic enhancement request
Changed Defect or Enhancement? from `def' to `enh'



CR Number                     : 5409
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : lfs
Short Description             : test code in vnops should be moved to test tree
Reported Date                 : 9/16/92
Found in Baseline             : 1.0.2
Found Date                    : 9/16/92
Severity                      : D
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public
Transarc Status               : open
Transarc Deltas               : 
Transarc Herder               : jaffe@transarc.com

[9/16/92 public]
The test code in the develoment tree under file/episode/vnops should be moved
to the test tree.

Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `jaffe@transarc.com' 
Added field Transarc Status with value `open'

[01/27/93 public]
Since nothing seems to have been done to resolve this defect,
we'd like to change it to an enhancement and (hence) defer it
out of 1.0.2.  Text will be added to the 1.0.2 release notes
pointing out the presence of these tests in the src/file tree.



CR Number                     : 5408
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : lfs
Short Description             : test code for dir should be moved to test tree
Reported Date                 : 9/16/92
Found in Baseline             : 1.0.2
Found Date                    : 9/16/92
Severity                      : D
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public
Transarc Status               : open
Transarc Deltas               : 
Transarc Herder               : jaffe@transarc.com

[9/16/92 public]
The test code in the file/episode/dir tree should be moved into the
test tree.
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `jaffe@transarc.com' 
Added field Transarc Status with value `open'

[01/27/93 public]
Since nothing seems to have been done to resolve this defect,
we'd like to change it to an enhancement and (hence) defer it
out of 1.0.2.  Text will be added to the 1.0.2 release notes
pointing out the presence of these tests in the src/file tree.



CR Number                     : 5407
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : lfs
Short Description             : tests need to be moved
Reported Date                 : 9/16/92
Found in Baseline             : 1.0.2
Found Date                    : 9/16/92
Severity                      : D
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public
Transarc Status               : open
Transarc Deltas               : 
Transarc Herder               : jaffe@transarc.com

[9/16/92 public]
Test code in file/episode/anode needs to be moved to the test code tree.
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `jaffe@transarc.com' 
Added field Transarc Status with value `open'

[01/27/93 public]
Since nothing seems to have been done to resolve this defect,
we'd like to change it to an enhancement and (hence) defer it
out of 1.0.2.  Text will be added to the 1.0.2 release notes
pointing out the presence of these tests in the src/file tree.

[8/8/95 public]
test

[8/8/95 public]
another test

[8/8/95 public]
Still another test.

[8/8/95 public]
You guessed it: more testing.



CR Number                     : 5406
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : lfs
Short Description             : tests should be moved to test tree
Reported Date                 : 9/16/92
Found in Baseline             : 1.0.2
Found Date                    : 9/16/92
Severity                      : D
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public
Transarc Status               : open
Transarc Deltas               : 
Transarc Herder               : jaffe@transarc.com

[9/16/92 public]
Test code should be moved from the file/episode/logbuf directory to the test
tree.
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `jaffe@transarc.com' 
Added field Transarc Status with value `open'

[9/28/92 public]
Reassigned to Mike M. who is handling this.

Changed Responsible Engr. from `mason@transarc.com' to `mcinerny@transarc.com'

[12/7/92 public]
Changed Defect or Enhancement? from `def' to `enh'

[12/23/92 public]
Changed Responsible Engr. from `mcinerny@transarc.com' to `jaffe@transarc.com'



CR Number                     : 5405
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : lfs
Short Description             : tests should be moved to test tree
Reported Date                 : 9/16/92
Found in Baseline             : 1.0.2
Found Date                    : 9/16/92
Severity                      : D
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public
Transarc Status               : open
Transarc Deltas               : 
Transarc Herder               : jaffe@transarc.com

[9/16/92 public]
Tests in the directory file/episode/async should be moved into the
test source tree.
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `jaffe@transarc.com' 
Added field Transarc Status with value `open'

[01/27/93 public]
Since nothing seems to have been done to resolve this defect,
we'd like to change it to an enhancement and (hence) defer it
out of 1.0.2.  Text will be added to the 1.0.2 release notes
pointing out the presence of these tests in the src/file tree.



CR Number                     : 5404
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : lfs
Short Description             : tests need to be moved into test tree
Reported Date                 : 9/16/92
Found in Baseline             : 1.0.2
Found Date                    : 9/16/92
Severity                      : D
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public
Transarc Status               : open
Transarc Deltas               : 
Transarc Herder               : jaffe@transarc.com

[9/16/92 public]
The tests in the file/episode/tools directory need to be moved into
the test tree.
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `jaffe@transarc.com' 
Added field Transarc Status with value `open'

[9/28/92 public]
Assigned to Mike M.

Changed Responsible Engr. from `mason@transarc.com' to `mcinerny@transarc.com'

[12/7/92 public]
Changed Defect or Enhancement? from `def' to `enh'

[12/23/92 public]
Changed Responsible Engr. from `mcinerny@transarc.com' to `jaffe@transarc.com'



CR Number                     : 5349
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : EPISODE
Short Description             : test_anode needs to test intermediate FS states
Reported Date                 : 9/8/92
Found in Baseline             : 1.0.2
Found Date                    : 9/8/92
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public
Transarc Deltas               : 
Transarc Herder               : jaffe@transarc.com
Transarc Status               : open

[9/8/92 public]
In order to detect various types of errors reliably, test_anode needs
a mechanism for running recovery on the file system after some number
of updates corresponding to a partially completed file system operation
have been applied to it.   Ted has suggested an option that causes
recovery to run following every disk update.
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `jaffe@transarc.com' 
Added field Transarc Status with value `open'

[11/11/93 public]
Opened this as 4667 in Transarc's database.
Changed Subcomponent Name from `lfs' to `EPISODE' 
Filled in Reported by Company's Ref. Number with `4667'



CR Number                     : 5314
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : fs tests
Short Description             : Convert fs tests for the TET environment
Reported Date                 : 9/2/92
Found in Baseline             : 1.0.1b24
Found Date                    : 9/2/92
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public
Transarc Deltas               : 
Transarc Herder               : mason@transarc.com
Transarc Status               : open

[9/2/92 public]

The tests need to be converted for the TET environment. This OT is for the
fs tests.

Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `mason@transarc.com' 
Added field Transarc Status with value `open'



CR Number                     : 4945
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : pmax
S/W Ref Platform              : osf1
Component Name                : cds
Subcomponent Name             : 
Short Description             : dacl tests need to be augmented
Reported Date                 : 8/6/92
Found in Baseline             : 1.0.1
Found Date                    : 8/6/92
Severity                      : B
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[8/6/92 public]
The dacl tests do not test all permutations (or even a significant subset)
of the possible permissions with respect to the relevant cdscp commands.
All of the tests (read, create, delete, modify and replicas) could be
improved significantly.

[8/10/92 public]

We believe that the dacl_tests are not yet completely reliable for
production use in CDS componenet testing.  Mark Sawyer recommends that the
entire dacl test suite be audited for accuracy and completeness.



CR Number                     : 4916
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 3850, 6229
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : low tests
Short Description             : Clean up the structure of low tests.
Reported Date                 : 8/4/92
Found in Baseline             : 1.0.1
Found Date                    : 8/4/92
Severity                      : D
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : some
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public
Transarc Deltas               : rajesh-clean-low-tests
Transarc Herder               : mason@transarc.com
Transarc Status               : open

[8/4/92 public]
Introduce structure, modularity into the low tests. Remove make and
clean options. 

Fix in sandbox.
Added field Transarc Deltas with value `rajesh-clean-low-tests' 
Added field Transarc Herder with value `mason@transarc.com' 
Added field Transarc Status with value `export'

[11/16/92 public]
This defect was submitted no latter than 1.50.  We never marked it as such
because the CML delta had no OT number in it.
Changed Status from `open' to `fix' 
Filled in Fixed In Baseline with `1.0.2' 
Filled in Affected File with `some' 
Changed Transarc Status from `export' to `submit'

[11/28/92 public]

There are still make and clean options for low/testErrMap - open.

[11/30/92 public]
Rajesh, care to try again.  Please open a new delta to fix this.
Changed Transarc Status from `submit' to `open'

[11/30/92 public]
OT 6229 is opened for the purpose.
Changed Inter-dependent CRs from `3850' to `3850, 6229' 
Changed Severity from `E' to `D' 
Changed Priority from `4' to `3'

[3/21/94 public]
Assigned to Gail to verify.

[5/13/94 public]
Yup - Diane's right, testErrMap and rtestErrMapQuota still have
"make" and "clean" options - I'll try to fit some low cleanup
into the schedule ...

[7/6/94 public]
Not making it - deferring.



CR Number                     : 4847
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : 
Short Description             : Tests missing for some
documented interfaces.
Reported Date                 : 7/27/92
Found in Baseline             : 1.0.1b19
Found Date                    : 7/27/92
Severity                      : E
Priority                      : 4
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public
Transarc Deltas               : 
Transarc Herder               : 
Transarc Status               : 

[7/27/92 public]

There are no explicit tests for the following  interfaces:

  ioctl
  pioctl
  BOSSVR_*
  FTSERVER_*
  VC_*
  VL_*

These interfaces are documented.

[7/29/92 public]
Assigned to pervaze for further assignment.
Filled in Responsible Engr. with `pakhtar@transarc.com' 
Filled in Resp. Engr's Company with `tarc' 
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `' 
Added field Transarc Status with value `'

[8/20/92 public]
We are currently in the process of planning further test construction.
Part of this work will be to produce API tests, for the interfaces
listed above. Once the scope of the tests (and schedule) is committed,
this OT will be closed, and individual enhancement requests will be 
created for each work item.



CR Number                     : 4702
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : EPISODE
Short Description             : ravage should salvage even if recovery fails
Reported Date                 : 7/13/92
Found in Baseline             : 1.0.2
Found Date                    : 7/13/92
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public
Transarc Deltas               : 
Transarc Herder               : jdp@transarc.com
Transarc Status               : open

[7/13/92 public]
A recent accidental change to the salvage command defaults caused this
ravager to start running recovery.  This was useful in that it resulted
in several salvager core dumps (see OT 4431).  However, if the log is
bad (perhaps because we trashed a log page), the salvager exits without
doing anything.  The ravager should detect this and run salvager without
requesting recovery.
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `jdp@transarc.com' 
Added field Transarc Status with value `open'

[10/19/93 public]
This is really an enhancement request for a salvager test program.
Changed Defect or Enhancement? from `def' to `enh'

[10/19/93 public]
Changed Subcomponent Name from `lfs' to `EPISODE' 
Filled in Reported by Company's Ref. Number with `4515'



CR Number                     : 4397
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cds
Subcomponent Name             : cp_killer.sh
Short Description             : Make cp_clerk.tests the last test.
Reported Date                 : 6/23/92
Found in Baseline             : 1.0.1
Found Date                    : 6/23/92
Severity                      : C
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[6/23/92 public]

The last line in the test cp_clerk.tests is the disable clerk
call.  A comment before the call says that this should be
the last test executed by cp_killer since the clerk cannot
be restarted once killed.  However, cp_killer.sh does not
have cp_clerk.tests as the last test.  cp_killer.sh should
be changed to call cp_clerk.tests last.



CR Number                     : 4394
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : tests
Short Description             : DFS tests assume . is on PATH.
Reported Date                 : 6/23/92
Found in Baseline             : 1.0.1b18
Found Date                    : 6/23/92
Severity                      : E
Priority                      : 3
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public
Transarc Status               : open
Transarc Deltas               : 
Transarc Herder               : mason@transarc.com

[6/23/92 public]
Many of the current DFS tests assume that . is on the PATH environment
variable.  This can be temporarily fixed by putting . on the PATH
variable, but the scripts themselves should be changed to use explicit
paths.
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `mason@transarc.com' 
Added field Transarc Status with value `open'

[6/29/92 public]
Changeed from a defect in code to a defect in the tests.
Changed CR in Code, Doc, or Test? from `code' to `test'

[11/17/92 public]
Type changed to enhancement. This isn't a required change for 1.0.2
Changed Defect or Enhancement? from `def' to `enh'

[9/15/94 public]
Changed Responsible Engr. from `fred@transarc.com' to `andi@transarc.com'



CR Number                     : 4076
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : cds
Subcomponent Name             : src/test/directory/cds/cp_test.sh
Short Description             : "cp_test.sh directory" errors
on some of the tests
Reported Date                 : 6/5/92
Found in Baseline             : 1.0
Found Date                    : 6/5/92
Severity                      : D
Priority                      : 1
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[6/5/92 public]

Full Description:

	"cp_test.sh directory" errors on some of the tests
	The clearinghouse2 and 3 do not exist, so the test
	errors out as does some others in this suite

Repeat By:

	execute "cp_test.sh directory" and view directory.log

Proposed Solution:

	build or create the clearinghouses as necessary for
	this test.

[6/23/92 public]
These clearinghouses were intended by the developer of the test to
be created manually. If they don't exist, use the options described
in the test script (-noch?) to eliminate the tests that reference them.



CR Number                     : 1816
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : other
S/W Ref Platform              : other
Component Name                : cds
Subcomponent Name             : 
Short Description             : dcecdnam: Add attribute lookups?
Reported Date                 : 01/09/92
Found in Baseline             : 1.0
Found Date                    : 
Severity                      : C
Priority                      : 2
Status                        : open
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[01/29/92 public]

Orbit reference number 4481
product       dce_osf
phaseFound    development

History:
lastUpdate    92/01/09 13:37:13
assignDate    92/01/09 13:37:13





    addDate              action          userLogin (userName)
    -------------------- --------------- ----------------------------------
    92/01/09 13:37:15    create          kwalker (Ken Walker)

[01/09/92 public]
The System Test dcecdnam was originally designed to perform lookups based on
attribute values.  (Example: "find all objects where attribute GROUP == 8".)
There is some code in to support this, but most of it is skipped over during
compilation or execution.

If this is feasible (i.e.: can be done in both CDS and GDS by both XDS and
shell-level commands), this capability should be added.

[4/6/92 public]
Changed from defect to enhancement.



