CR Number                     : 13364
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : bld
Subcomponent Name             : 
Short Description             : ENDGAME: Install missing files
Reported Date                 : 2/23/96
Found in Baseline             : 1.2.1
Found Date                    : 2/23/96
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2.1
Fixed In Baseline             : 1.2.1
Affected File(s)              : src/test/systest/Makefile
Sensitivity                   : public

[2/23/96 public]
Install missing files dcetest_config, .profile.dcest.tet

[2/23/96 public]
Fixed.



CR Number                     : 13360
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : bld
Subcomponent Name             : 
Short Description             : ENDGAME: Conditionalize build of HP test
Reported Date                 : 2/23/96
Found in Baseline             : 1.2.1
Found Date                    : 2/23/96
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2.1
Fixed In Baseline             : 1.2.1
Affected File(s)              : src/test/Makefile
Sensitivity                   : public

[2/23/96 public]
Conditionalize build of HP test

[2/23/96 public]
DIFF:


*** /u2/sandboxes/nb/link/src/test/Makefile     Fri Dec  8 16:06:17 1995
--- Makefile    Thu Feb 22 14:36:58 1996
***************
*** 150,162 ****
  BUILD_SYSTEST =  systest
  .endif
  
  .ifdef BUILD_FUNC_TESTS
! DATA_SUBDIRS =   threads rpc directory security ${BUILD_DFS} functional valida
tion        
  EXPINC_SUBDIRS = include threads rpc directory time security ${BUILD_DFS} tet 
functional
  EXPLIB_SUBDIRS = lib threads rpc directory time security ${BUILD_DFS} \
                   tet functional
  SUBDIRS =        include lib threads rpc directory time security tools \
!                dce ${BUILD_DFS} tet functional validation
  .else
  EXPINC_SUBDIRS = include threads rpc directory time security \
                ${BUILD_DISKLESS} ${BUILD_DFS} tet functional
--- 154,170 ----
  BUILD_SYSTEST =  systest
  .endif
  
+ .if ${TARGET_MACHINE} == "HP800"
+ VALIDATION_TEST = validation
+ .endif
+ 
  .ifdef BUILD_FUNC_TESTS
! DATA_SUBDIRS =   threads rpc directory security ${BUILD_DFS} functional ${VALI
DATION_TEST}        
  EXPINC_SUBDIRS = include threads rpc directory time security ${BUILD_DFS} tet 
functional
  EXPLIB_SUBDIRS = lib threads rpc directory time security ${BUILD_DFS} \
                   tet functional
  SUBDIRS =        include lib threads rpc directory time security tools \
!                dce ${BUILD_DFS} tet functional ${VALIDATION_TEST}
  .else
  EXPINC_SUBDIRS = include threads rpc directory time security \
                ${BUILD_DISKLESS} ${BUILD_DFS} tet functional
***************
*** 165,171 ****
                ${BUILD_DISKLESS} ${BUILD_SYSTEST} tet functional
  SUBDIRS =        include lib threads rpc directory time security tools \
                 dce ${BUILD_DFS} ${BUILD_DISKLESS} ${BUILD_SYSTEST} tet functio
nal \
!                validation
  
  #OTHERS = dcetest_config
  #ILIST  = ${OTHERS}
--- 173,179 ----
                ${BUILD_DISKLESS} ${BUILD_SYSTEST} tet functional
  SUBDIRS =        include lib threads rpc directory time security tools \
                 dce ${BUILD_DFS} ${BUILD_DISKLESS} ${BUILD_SYSTEST} tet functio
nal \
!                ${VALIDATION_TEST}
  
  #OTHERS = dcetest_config
  #ILIST  = ${OTHERS}



CR Number                     : 12979
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : sec
Short Description             : allow machine-specific LIBS for build
Reported Date                 : 7/27/95
Found in Baseline             : 1.1
Found Date                    : 7/27/95
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : security/server/bin/./Makefile, security/server/sec_salvage_db/./Makefile
Sensitivity                   : public

[7/27/95 public]

(cut and paste of SC 20240 description follows)

 DESCRIPTION:

 In the second Beta release, we came across 2 instances of Makefiles which
 were not set up to allow for target-specific definitions of LIBS.

 In the rpc/csrc/Makefile, we found that by allowing LIBS to default to
 that provided via rpc.mk, rather than defining it simply as -ldce, was
 the fix.

 In security/audit/auditd/Makefile, we added ${${TARGET_MACHINE}_LIBS}
 to the LIBS list.  But we assume it could be fixed via security.mk as well.
Related-file::Added 940930 by rusman:: /build/hiosfm/RCS/dce1.1/src/security/ser
ver/bin/./Makefile,v 7.3
 /build/hiosfm/RCS/dce1.1/src/security/server/bin/./Makefile,v 7.3
 rusman 1994/09/30 12:50:32 +4 -4
 Reason:  OSDqa09314 allow machine-specific LIBS for build
 put machine-specific target LIBS last

     *** /tmp/ci.6099..Makefile.6133.1  Fri Sep 30 08:50:34 1994
     --- /tmp/Makefile.6133.2   Fri Sep 30 08:50:34 1994
     ***************
     *** 90,102 ****
         LDIRS =        -L../../krb5/kdc -L../../krb5/lib/kdb -L../rsdb -L../rrs
 -L../../utils -L../../audit/libaudit -L../lm
         EXE_LIBS =     -lkrb5kdc -lkdb -lrsdb -lrrs -lsecutil -laudit -ldce

       # note that -lrs comes before ${LIBS}, but -lrss comes both before and af
ter ${LIBS}

     ! secd_LIBS = ${LDIRS} -L../rs -lrs ${EXE_LIBS} -lrss ${${TARGET_MACHINE}_L
IBS} -llm

     ! sec_create_db_LIBS = ${LDIRS} -L../rs -lrsdb -lrs  ${EXE_LIBS} ${${TARGET
_MACHINE}_LIBS} -llm

       .include <${RULES_MK}>

       clean:
        rm -f *.o ${PROGRAMS}
     --- 90,102 ----
         LDIRS =        -L../../krb5/kdc -L../../krb5/lib/kdb -L../rsdb -L../rrs
 -L../../utils -L../../audit/libaudit -L../lm
         EXE_LIBS =     -lkrb5kdc -lkdb -lrsdb -lrrs -lsecutil -laudit -ldce

       # note that -lrs comes before ${LIBS}, but -lrss comes both before and af
ter ${LIBS}

     ! secd_LIBS = ${LDIRS} -L../rs -lrs ${EXE_LIBS} -lrss -llm ${${TARGET_MACHI
NE}_LIBS}

     ! secd_LIBS = ${LDIRS} -L../rs -lrs ${EXE_LIBS} -lrss -llm ${${TARGET_MACHI
NE}_LIBS}

     ! sec_create_db_LIBS = ${LDIRS} -L../rs -lrsdb -lrs  ${EXE_LIBS} -llm ${${T
ARGET_MACHINE}_LIBS}

       .include <${RULES_MK}>

       clean:
        rm -f *.o ${PROGRAMS}

Related-file::Added 940930 by rusman:: /build/hiosfm/RCS/dce1.1/src/security/ser
ver/sec_salvage_db/./Makefile,v 7.3
 /build/hiosfm/RCS/dce1.1/src/security/server/sec_salvage_db/./Makefile,v 7.3
 rusman 1994/09/30 12:51:21 +3 -3
 Reason:  OSDqa09314 allow machine-specific LIBS for build
 put target-specific list last in LIBS

     *** /tmp/ci.6164..Makefile.6198.1  Fri Sep 30 08:51:23 1994
     --- /tmp/Makefile.6198.2   Fri Sep 30 08:51:23 1994
     ***************
     *** 99,109 ****
       EXE_LIBS =       -lkrb5kdc -lkdb -lrsdb -lsecutil ../../../libdce/bound_d
ce_nostrip.o -laudit -ldce -lrrs -llm
       .endif

       # note that -lrs comes before ${LIBS}, but -lrss comes both before and af
ter ${LIBS}

     ! sec_salvage_db_LIBS = ${LDIRS} -L../rs -lrsdb -lrs ${EXE_LIBS} ${${TARGET
_MACHINE}_LIBS} -llm

       .include <${RULES_MK}>

       clean:
        rm -f *.o ${PROGRAMS}
     --- 99,109 ----
       EXE_LIBS =       -lkrb5kdc -lkdb -lrsdb -lsecutil ../../../libdce/bound_d
ce_nostrip.o -laudit -ldce -lrrs -llm
       .endif

       # note that -lrs comes before ${LIBS}, but -lrss comes both before and af
ter ${LIBS}

     ! sec_salvage_db_LIBS = ${LDIRS} -L../rs -lrsdb -lrs ${EXE_LIBS} -llm ${${T
ARGET_MACHINE}_LIBS}

       .include <${RULES_MK}>

       clean:
        rm -f *.o ${PROGRAMS}

[2/6/96 public]
Fix is already in the 1.2.1 codebase. Closed.



CR Number                     : 12739
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : test
Short Description             : test defect for Andy
Reported Date                 : 10/28/94
Found in Baseline             : 1.1
Found Date                    : 10/28/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b24
Affected File(s)              : src/Makeconf
Sensitivity                   : public

[10/28/94 public]

This is a test defect.

[10/28/94 public]
Second note:  found the problem.  Forgot to plug in the machine.



CR Number                     : 12679
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : defunct areas in src/nosupport that will not be shipped
Short Description             : defunct areas in src/nosupport that will not be shipped
Reported Date                 : 10/20/94
Found in Baseline             : 1.1
Found Date                    : 10/20/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b23
Affected File(s)              : src/nosupport/security/sec_salvage_db
Sensitivity                   : public

[10/20/94 public]

Defunct the areas in nosupport that we are not going to ship.

./src/nosupport/glb
./src/nosupport/security/audit
./src/nosupport/security/sec_salvage_db

thanks
annie

[10/21/94 public]
It turned out that 
    ./src/nosupport/security/audit
should NOT be defuncted.

thanks
annie



CR Number                     : 12546
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : all files in the backing tree
Short Description             : copyright expansion on all files that needs them
Reported Date                 : 10/6/94
Found in Baseline             : 1.1
Found Date                    : 10/6/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b23
Affected File(s)              : expanded copyrights in new files for DCE1.1 sources and DCE1.1 doc sources
Sensitivity                   : public

[10/6/94 public]

We need to expand copyrights for all files in the backing tree
that needs them.

thanks
annie

[10/11/94 public]
On October 6, copyright has been expanded based on DCE1.1 baseline 20
for the DCE1.1 sources.  The DCE1.1 doc was on based on the Sept 28
doc sources.  

We will have to do a final one close to the bit freeze date.

[10/18/94 public]

We need to expand copyrights for all files in the DCE source tree
that needs them.  This will be based on baseline 22.

thanks
annie



CR Number                     : 12121
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : rpc
Short Description             : enable capabalities to set debugging/optimization switch for compiler
Reported Date                 : 9/9/94
Found in Baseline             : 1.1
Found Date                    : 9/9/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : src/rpc/rpc.mk
Sensitivity                   : public

[9/9/94 public]
Allow the rpc component to be able to build with pre-set a compiler 
switch that applies specifically to the rpc component only.  i.e.
do the same thing as in OT12111 for security.

So, src/rpc/rpc.mk needs to be modified as such:

.ifdef RPC_OPT_LEVEL
OPT_LEVEL=${RPC_OPT_LEVEL}
.endif

To set debugging on for the whole rpc component, one would do the 
following in one's sandbox environment:

export RPC_OPT_LEVEL=-g

To set optimization, do the following:

export RPC_OPT_LEVEL=-O

thanks
annie

[9/13/94 public]
lowering this to a B-2 as it is sort of a nice thing to have BUT it
is not required.

[9/19/94 public]
closed this bug as the implementation is now there.



CR Number                     : 12111
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : sec
Short Description             : enable compilation debugging switch (-g) for security at the component level
Reported Date                 : 9/8/94
Found in Baseline             : 1.1
Found Date                    : 9/8/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : src/security/security.mk
Sensitivity                   : public

[9/8/94 public]
Right now, we would like to enable the compilation debugging switch
at the security component level but is unable to do so.  The way to
do this is to add the code below to src/security/security.mk:

.ifdef SEC_OPT_LEVEL 
CC_OPT_LEVEL=-g
.endif

Then, set SEC_OPT_LEVEL in one's environment.  So, the nightly build
should have this variable set to 1 if the -g switch is desirable.

[9/8/94 public]

This looks good, but you probably want:

.ifdef SEC_OPT_LEVEL 
OPT_LEVEL=${SEC_OPT_LEVEL}
.endif

That way both LD_OPT_LEVEL and CC_OPT_LEVEL will get set properly.
Also it allows you to set SEC_OPT_LEVEL to what you want to build
with, instead of just assuming -g.

[9/8/94 public]
Good thought.  Just a heads up.  At least on the HP we already link with -g
though we don't compile with it.  We probably put -g on LDFLAGS somewhere
but I'm just guessing.  You might end up with two -g's on the link line and
I don't know what will happen.  Could be okay.

[9/8/94 public]
Did what Andy Mckeen has suggested.  Added the code below to 
src/security/security.mk

    .ifdef SEC_OPT_LEVEL 
    OPT_LEVEL=${SEC_OPT_LEVEL}
    .endif

At present, only the HP nightly build platform has sufficient
room to turn this on.  So, the following flag was put in the
nightly build script:

export SEC_OPT_LEVEL=-g

If anyone wants to turn on the debugging switch for security in
his/her sandbox, merely set the shell environment variable as
such:

    export SEC_OPT_LEVEL=-g

in his/her sandbox.

[9/9/94 public]
I noticed that not all Makefiles in security has include the security.mk
file.  Hence, the above scheme does not work on all subdirectories within
security.  This is a bug and should probably be cleaned up.

thanks
annie

[9/9/94 public]

The component specific makefiles (security.mk. rpc.mk, etc...) are
included from within the osf.dce.mk common makefile so every Makefile that
includes the common makefiles will have the appropriate component
specific makefile included.

[9/9/94 public]
My mistake.  I was scanning for security in the log and those that did not
have the -g switch comes from the file/security area NOT the security 
component.  ALL IS WELL.

[9/9/94 public]
I just found out that I need to do a little more than just the above three
lines.

It looked like the loader for the rios and at386 platforms do not
understand the -g option.  So, the above changes in security.mk should
have been:

.ifdef SEC_OPT_LEVEL
# Only the HP platform's loader recognizes the -g switch
.if ${TARGET_MACHINE} == "HP800"
OPT_LEVEL=${SEC_OPT_LEVEL}
.else
CC_OPT_LEVEL=${SEC_OPT_LEVEL}
.endif

thanks
annie



CR Number                     : 11923
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : copyrights
Short Description             : modified copyrights for some dce/utils/svc files
Reported Date                 : 8/26/94
Found in Baseline             : 1.1
Found Date                    : 8/26/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : dce/utils/svc/{dceprintf.c,msgdeftable.c,svclog.c,svcprintf.c,svcreg.c,svcroute.c}
Sensitivity                   : public

[8/26/94 public]
Some of the files in dce/utils/svc are going to be put into the
public domain.  We have a tentative list but Dave Lounsbury is working
on making the final and official list.  Renee Rice will be sending
me the copyright text and initial list of files.

I assigned this to our copyright queen :-)  We can close this once
Dave gives Annie the final list of files.

[08/30/94 public]

After speaking with Renee and Dave, here is the list.

The following files in src/dce/utils/svc
    dceprintf.c msgdeftable.c svclog.c svcprintf.c svcreg.c svcroute.c

Should be given this copyright text:
    Permission is hereby granted to use, copy, modify and freely distribute 
    the software in this file and its documentation for any purpose without 
    fee, provided that the above copyright notice appears in all copies and 
    that both the copyright notice and this permission notice appear in 
    supporting documentation.  Further, provided that the name of Open 
    Software Foundation, Inc. ("OSF") not be used in advertising or 
    publicity pertaining to distribution of the software without prior 
    written permission from OSF.  OSF makes no representations about the 
    suitability of this software for any purpose.  It is provided "as is" 
    without express or implied warranty.

[8/30/94 public]
Submitted the files listed above with the new copyright.

[9/12/94 public]
Ron,

Can you also add this line below to the files mentioned above?

    Copyright (c) 1993, 1994 Open Software Foundation, Inc.

You need to add the line prior to the 'Permission ...' text.

Let me know if you have any questions.

thanks
annie

[ rrizzo 9/13/94 public ]

Fully fixed, verified by builds on 2 platforms, approved & submitted.



CR Number                     : 11873
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : 
Short Description             : build.made files created in src tree
Reported Date                 : 8/25/94
Found in Baseline             : 1.1b15
Found Date                    : 8/25/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : Unknown..
Sensitivity                   : public

[8/25/94 public]
During build of libdce, the file build.made is created in several directories
(e.g.: src/dce/utils/dcecf, src/threads) .
If the source tree is mounted read-only, this procedure does not work.
(This is as ugly as self-modifying code ;-) ).
Please look for a different directory, where these files are created (obj ?).

[8/30/94 public]
Norbert,
   I am lowering the priority on this and defering it to dce1.2.  You are 
absolutley right that writing into the source is a bad practice  in general.
However, at this stage in the game we must set aside those things  
that "work, but are not the best practice to follow" and concentrate
on things that will either hold up the release or inhibit us from producing
a quality offering.  

   I believe that this CR should be the first one addressed
in the dce1.2 project.  The change would be to a few lines in "libdce/Makefile".
Also, during the start of dce1.2 we will have plenty of time to weed out
any adverse side effects we may incur as a result of moving "build.made"
to the "obj" tree.

[2/6/96 public]
Does not happen anymore, I checked my 1.2.1 sandbox and backing tree. I don't
know who fixed it and when. Closing.



CR Number                     : 11852
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : bld
Subcomponent Name             : cds, libdce
Short Description             : don't really need libdce.a on HP-UX
Reported Date                 : 8/24/94
Found in Baseline             : 1.1
Found Date                    : 8/24/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : directory/cds/cds.mk
					     libdce/HP800/machdep.mk
					     config/dce_config
Sensitivity                   : public

[8/24/94 public]

Unlike the other reference platforms, HP-UX builds both the static *and*
the shared library version of libdce.   

The only thing in the build which uses the static version is parser_aid (in
CDS) and it doesn't even use any routines in libdce!

So, I'm proposing to submit:
 - a patch to cds.mk which causes it to not bother to link parser_aid
against libdce.a on HP-UX
 - a patch to libdce/HP800/machdep.mk to turn off the build of libdce.a

this should save some space in people's sandboxes and save some time, too..

[8/24/94 public]

Bill,

Hold it! you may break my user profiling build.

[8/24/94 public]

If you turn off USE_SHARED_LIBRARIES, it still builds libdce.a

[8/24/94 public]
 Submitted.

[8/25/94 public]

Bill, the install_all pass still builds and installs libdce.a on HP-UX
because of ILIST in libdce/Makefile . Is it intentional?

[8/25/94 public]
Removed the code which installs libdce.a during app. dev. install
from dce_config.

[8/26/94 public]

revised fix to machdep.mk submitted.



CR Number                     : 11667
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : bsubmit of TestSummary core dumps
Short Description             : ODE2.3 bsubmit core dumps when trying to submit TestSummary
Reported Date                 : 8/12/94
Found in Baseline             : 1.1
Found Date                    : 8/12/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : test/TestSummary
Sensitivity                   : public

[8/12/94 public]

ODE2.3 bsubmit core dumps when submitting TestSummary.  The
workaround for now is to use ODE2.3.4 bsubmit.  I will put
ODE2.3.4 bsubmit in the backing tree in:

    /project/dce/build/dce1.1/ODE_tools/at386/bin

It will be called bsubmit.ode2.3.4.

By Monday, we will fix this problem so that ODE2.3 bsubmit will
work with this file.

thanks
annie

[8/17/94 public]

Marty Lynch has fixed the ancestry in the file - test/TestSummary.  
So, ODE2.3 bsubmit will not work with this file.

Please let us know if you have any bsubmit problems that are
related to this file - test/TestSummary.

thanks
annie



CR Number                     : 11496
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : osf.std.mk
Short Description             : Someone (HP) has changed the ability of CC_OPT_LEVEL
Reported Date                 : 7/29/94
Found in Baseline             : 1.1
Found Date                    : 7/29/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b17
Affected File(s)              : lbe/mk/osf.std.mk
Sensitivity                   : public

[7/29/94 public]

The CC_OPT_LEVEL has been commented out in osf.dce.mk and
put in osf.std.mk in a new way as such:

    .if defined(DEBUG_ON)
    CC_OPT_LEVEL=-g
    .else
    CC_OPT_LEVEL=-O
    .endif

This created a problem because DEBUG_ON can only be set in one's
environment or in Makeconf in order to activate the -g option.  
This is rather restrictive because it means that a component CANNOT 
turn on -g.

thanks
annie

[8/11/94 public]
Could be okay now.  The following is what is in osf.std.mk.  Note that they
are assigned with ?= not just =.

#
#  Compilation optimization level.  This should be set to whatever
#  combination of -O and -g flags you desire.  Defaults to -O.
#
#  Allow these flags to be overridden per target
#
.if defined(OPT_LEVEL)
_CC_OL_=${${.TARGET}_OPT_LEVEL:U${OPT_LEVEL}}
_LD_OL_=${${.TARGET}_OPT_LEVEL:U${OPT_LEVEL}}
.else
.if defined(DEBUG_ON)
CC_OPT_LEVEL?=-g
.else
CC_OPT_LEVEL?=-O
.endif
_CC_OL_=${${.TARGET}_OPT_LEVEL:U${${.TARGET}_CC_OPT_LEVEL:U${CC_OPT_LEVEL}}}
LD_OPT_LEVEL?=
_LD_OL_=${${.TARGET}_OPT_LEVEL:U${${.TARGET}_LD_OPT_LEVEL:U${LD_OPT_LEVEL}}}
.endif

[9/1/94 public]
I have verified that the code Howard mentioned above is currently in
osf.std.mk.  I have also checked with several developers to see
of "OPT_LEVEL" and "CC_OPT_LEVEL" behave they way they are generally
expected to behave.  I'm marking this as fixed.



CR Number                     : 11488
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : rpc/rpcd and security/server/sec_clientd
Short Description             : move rpcd, sec_clientd to nosupport
Reported Date                 : 7/29/94
Found in Baseline             : 1.1b12
Found Date                    : 7/29/94
Severity                      : B
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : rpc/rpcd/*, security/server/sec_clientd/*
Sensitivity                   : public

[7/29/94 public]
rpcd and sec_clientd should be moved to nosupport.

Related to this, dce_config, dce.rm, and friends, should have remnants
of rpcd and sec_clientd removed. (eg, starting the servers, creating
and deleting files and directories)

[10/05/94 public]
To update -- I already changed dce_config and the scripts.
I also changed rpc/Makefile and security/server/Makefile so that
rpcd and sec_clientd are not built.

[10/05/94 public]
areas have been moved to nosupport.
   1) move rpc/rpcd and security/server/sec_clientd to nosupport
   2) defunt files in rpc/rpcd and security/server/sec_clientd 
   3) remove directories from backing tree
   4) change rpc/Makefile and security/server/Makefile to reflect
      the move



CR Number                     : 11454
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : 
Short Description             : remove some extra noise
Reported Date                 : 7/26/94
Found in Baseline             : 1.1
Found Date                    : 7/26/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : lbe/mk/osf.std.mk
Sensitivity                   : public

[7/26/94 public]
Any reason not to remove some noisy echo's from osf.std.mk?
*** osf.std.mk	Tue Jul 26 16:52:05 1994
--- /tmp/x	Tue Jul 26 22:43:37 1994
***************
*** 1042,1048 ****
  
  clobber_all: $${_all_targets_}
  	-${RM} ${_RMFLAGS_} core depend.mk
- 	@echo "All Clean targets = $${_all_targets_}"
  
  .if !empty(_CLOBBER_TARGETS_:Mclobber_*)
  ${_CLOBBER_TARGETS_:Mclobber_*}:
--- 1042,1047 ----
***************
*** 1146,1152 ****
  .else
  
  export_all: $${_all_targets_}
- 	@echo "Export all targets = $${_all_targets_}"
  
  .if !empty(_EXPORT_TARGETS_:Mexport_*)
  ${_EXPORT_TARGETS_:Mexport_*}: $${_EXPFILES_}
--- 1145,1150 ----

[08/30/94 public]
Submitted and has made it through a clean nightly build.
Fixed.



CR Number                     : 11414
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : doc
Short Description             : need automatic SGML conversion script
Reported Date                 : 7/25/94
Found in Baseline             : 1.1
Found Date                    : 7/25/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : /project/docsrc/local/Blds/sgml-format.ksh
Sensitivity                   : public

[7/25/94 public]

The documentation conversion from SML -> SGML is currently run manually.
If the conversion step were run as an automatic cron job, any errors that
occur during conversion could be addressed earlier.  An SGML conversion
script should be run periodically to identify any problems with the
DCE1.1 documentation.  Here are Hal's comments:

    I would like to have the SGML conversion tool run nightly.  This should
    simply be a matter of getting a cron job on quill to do the following:

	cd /project/docsrc/SGML/tpt/fickle/Convert
	make DCE

    This does NOT have to be synchronized with the nightly doc build as it
    works directly from the sources.

[7/29/94 public]

Added a script to run the conversion on quill nightly (starting at 12:45am).
There seems to be a bug with the Ultrix make, so I ended up commenting out
a problematic line in the /project/docsrc/SGML/tpt/fickle/Convert/Makefile.
Also had to build/install an Ultrix version of fickle under
/project/tools/bin/mips.ULTRIX/fickle.  The nightly cron script runs as
"devsrc" and sends e-mail upon completion to "dce-doc-osf" and "ratdce."

[10/26/94 public]

closing this one fell through the cracks.



CR Number                     : 11244
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : 
Short Description             : manpages should be automaically installed
Reported Date                 : 7/11/94
Found in Baseline             : 1.1b9
Found Date                    : 7/11/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : do-dce-man
Sensitivity                   : public

[7/11/94 public]
DCE manpages should be automatically installed/updated in /project/dce/man
from the doc tree.  Right now they are not, tho they used to be (via cron
from quill).  (The rats said they wanted to be responsible for this toward
the end of last year.)

[7/13/94 public]
Assigned to rrizzo

[7/20/94 public]

changed do-dce-man to reflect the current dce doc areas.
Changed cron to enable building on sunday evenings
tested build on quill



CR Number                     : 11189
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : backing build
Short Description             : remove directories in dce1.1
Reported Date                 : 7/6/94
Found in Baseline             : 1.1
Found Date                    : 7/6/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : .security/audit/auditcp
Sensitivity                   : public

[7/6/94 public]
src/security/audit/auditcp/* has been defuncted, so the directories:

	src/security/audit/auditcp
	src/security/audit/auditcp/HP800

should be removed from the dce1.1 backing build.

[7/13/94 public]
directory has been defuncted



CR Number                     : 11125
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : rcs
Short Description             : Need to prune long branches
Reported Date                 : 6/29/94
Found in Baseline             : 1.1
Found Date                    : 6/29/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b9
Affected File(s)              : src/test/TestSummary,
config/dce_config
Sensitivity                   : public

[6/29/94 public]
There are a number of files in DCE which are frequently modified.  This
means that they have long branches which impacts source control performance
to a degree.  

Here are a list (of the top of my head) of files which need to be pruned:

File						Branch Length
----						-------------
test/TestSummary				81
config/dce_config				29
  *this isn't long, but is painful because there have been many changes.
admin/dcecp/dcp.sams				73

My suggestion is in two parts:

1.  For the three files identified, create a new branch for DCE1_1.  This
will result in performance gains for source control operations.

2.  Create a script which monitors branch lengths and alerts you of when
they are in need of pruning.  Factors which determine the need for pruning
are:

	1.  branch length
	2.  size of file
	3.  the cumulative complexity of the changes

[7/11/94 public]

We had this problem on the OSC as well.  ODE naturally prune's its
branches as you move from one project to the next.  Unfortunately,
there are always a small handful of files that grow wildly out of
control.  I agree that the three files listed here should be
pruned and I will submit a request to dce-drb to prune them 
by hand.  

At this point in the project I feel that addressing part 2 (coming
up with an script to weed out long branches) is overkill and
would take time away from addressing other CR's.  On the OSC
we use to check the SNAPSHOT file once a month for out of 
control branches.  That seemed (at the time) to be the most effective
use of our time and I believe the same is true for the DCE rats.
For example, the dcp.sams file now has 83 submissions since
December.  That comes out to about 13 submissions a month.  A
branch length of 13 is pretty reasonable.  Since the files in question
have already been identified; keeping track of them on a monthly basis
seems to be the most direct way to resolve this.

[7/11/94 public]
The DCE1_1 branches for 

test/TestSummary
config/dce_config
admin_dcecp/dcp.sams

have been pruned.  The new branch label is DCE1_1 (as you would expect)
and the old branch label is DCE1_1_TRIMMED.  The ancestry line had to be 
updated by hand (to denote that the new DCE1_1 branch was derived 
from the end of the DCE1_1_TRIMMED branch) but that will only effect HP
(since they keep a shadow copy of the RCS tree).

BTW these files are pretty big, so, check-outs might still be a little
slow.  If there is any garbage code in there, you may want to consider 
removing it.



CR Number                     : 11114
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 11110
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : backing build
Short Description             : support SNAPSHOT file
Reported Date                 : 6/28/94
Found in Baseline             : 1.1
Found Date                    : 6/28/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dce1.1/logs/SNAPSHOT
Sensitivity                   : public

[zeliff 6/28/94 public] 
The SNAPSHOT is a more-or-less obsolete appendage from earlier versions of
ODE.  However, it is a useful repository of information.  One can, for
example, find the location of a source file without running a 'find' over
the source tree.  The SNAPSHOT file in the backing build is updated
periodically (but not consistently) by the ODE tools when files are checked
in.  The result is that it is incomplete and frequently contains duplicate
entries of file names.  E.g.:

  ./Makeconf      1.2.37.7        1.2.37.6
  ./Makeconf,v    1.2.29.4
  ./Makefile      1.2.32.24       1.2.32.23
  ./Makefile,v    1.2.32.3
    
Part of the current nightly build process is to derive a complete SNAPSHOT
file from the RCS tree.  This file, then, is used to "snap" the sources for
the nightly build.  

It would be useful to have, as part of the nightly snap process, the
SNAPSHOT file in the backing build replaced by the snapshot file from the
snap process.

Additionally, one could solve ot11110 at the same time by running the
SNAPSHOT file through a filter to create the FILE_LIST and leaving this in
the backing build logs directory.

[sally 6/28/94 public] 
We are in the process of doing this - even before the discussion.  I
talked with Bill Summerfield yesterday and explained why the snapshot
file was out of date.  I told him we would be updating our nighlty build
scripts to pull the snapshot file that we create nightly from the rcs tree
back to the 1.1 source tree.  That is happening in tonight's build scripts

As for the other item: FILE_LIST - we'll see what we can do - why run it
through a filter when you can just use the find command at the source level.

[6/30/94 public]
We are pulling the newly created SNAPSHOT file back as part of the nightly
build now.



CR Number                     : 11111
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : makefiles
Short Description             : add DEFAULT_SUBDIRS handling
Reported Date                 : 6/28/94
Found in Baseline             : 1.1
Found Date                    : 6/28/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : lbe/mk/osf.dce.passes.mk
Sensitivity                   : public

[6/28/94 public]

I would like to see the following stanza added to osf.dce.passes.mk,
just before the block that starts _SETUP_SUBDIRS_ = ${SETUP_SUBDIRS}
	.if	defined(DEFAULT_SUBDIRS)
	DATA_SUBDIRS	 ?= ${DEFAULT_SUBDIRS}
	EXPBIN_SUBDIRS	 ?= ${DEFAULT_SUBDIRS}
	EXPINC_SUBDIRS	 ?= ${DEFAULT_SUBDIRS}
	EXPLIB_SUBDIRS	 ?= ${DEFAULT_SUBDIRS}
	EXPSHLIB_SUBDIRS ?= ${DEFAULT_SUBDIRS}
	SAMIDL_SUBDIRS	 ?= ${DEFAULT_SUBDIRS}
	SETUP_SUBDIRS	 ?= ${DEFAULT_SUBDIRS}
	SUBDIRS		 ?= ${DEFAULT_SUBDIRS}
	.endif
This would let Makefiles who want to visit all subdirs in all passes just
do
	DEFAULT_SUBDIRS = foo bar baz
	SAMIDL_SUBDIRS = idl
and the right thing would happen.

[7/12/94 public]
Rich,

   Your description of the problem you are trying to solve
is a bit short.  I have no problems putting this in the common makefiles,
but, when I test this I'd like to make sure that you will be getting
exactly what you want.

   Could you elaborate on this abit.  What problems or annoyances in the
builds are you trying to overcome?

[07/12/94 public]
Sure:
	SAMIDL_SUBDIRS	= a b c
	EXPINC_SUBDIRS	=  b c
	EXPLIB_SUBDIRS	= a b c
	SUBDIRS		= a b c
becomes
	DEFAULT_SUBDIRS = a b c
	EXPINC_SUBDIRS = b c

[7/12/94 public]
Hmmm, your description is still a little short.  Are there specific subsystems
that you are planning to use this with?  Could you point them out?

[07/12/94 public]
for example, directory/Makefile, repalce EXPINC_SUBDIRS and SUBDIRS
with one DEFAULT_SUBDIRS
directory/cds/Makefile, replace the SUBDIRS, EXPINC_SUBDIRS, and
EXPLIB_SUBDIRS with one DEFUALT_SUBDIRS.
etc.

[7/12/94 public]
Rich,
  I'm testing these changes with the examples you listed.  These changes are
pretty minor and I'd be surprized if there was a problem.  Seems like a small
win, though.  I hope people don't misuse this.  I'd hate to see your builds
traverse every single directory for every single pass.

[8/30/94 public]
Fix has been submitted.

[10/19/94 public ]
Done



CR Number                     : 11110
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 11114
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : build scripts
Short Description             : list of all files
Reported Date                 : 6/28/94
Found in Baseline             : 1.1
Found Date                    : 6/28/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : build scripts, FILES_LIST
Sensitivity                   : public

[6/28/94 public]

I would like the nightly build script to do
	cd ..../src ; find . -type f -print >FILE.LIST
This would make it much easier on developers who want to do "xargs grep"
pipelines looking for all occurences of something.

[06/28/94 public]
Annie Poh told me about the .../logs/SNAPSHOT file.  The task then, is
even easier:
	sed -e 's/,v.*..//' <.../logs/SNAPSHOT >.../src/FILE.LIST

[6/28/94 public]
Not quite that easy.  According to the ODE guys "the SNAPSHOT file is not
guarenteed to be accurate."   You would have to make sure that the SNAPSHOT
file is created afresh before extracting the file list.

While we're at it, can we update the SNAPSHOT file in the backing build
from the version in the dce1.1-snap area?  The version in the backing build
contains *many* duplicate entries ...

  ./Makeconf      1.2.37.7        1.2.37.6
  ./Makeconf,v    1.2.29.4
  ./Makefile      1.2.32.24       1.2.32.23
  ./Makefile,v    1.2.32.3

gemini zeliff/ot$ wc -l /project/dce/build/dce1.1-snap/logs/SNAPSHOT  
     12105 /project/dce/build/dce1.1-snap/logs/SNAPSHOT

gemini zeliff/ot$ wc -l /project/dce/build/dce1.1/logs/SNAPSHOT     
     20631 /project/dce/build/dce1.1/logs/SNAPSHOT

[06/28/94 public]
Oh so then we'll have to use the find.  Rich can you open a new OT for
your snapshot stuff?  Tnx.

[6/28/94 public]
ot11114 opened.

[6/28/94 public]
Rich Zeliff, the SNAPSHOT is accurate in the snap area.  It gets 
re-created nighlty.  The one that is NOT-reliable is the one in
the backing tree.  We are in the process of trying to make the 
SNAPSHOT file in the backing tree more reliable as we speak.

I guess I did not make myself clear when I talked to Rich Salz last.
The SNAPSHOT in the snap area is accurate.  

thanks
annie

[6/30/94 public]

The list of files is now in the backing tree; ./logs/FILES_LIST
It gets created every evening during the snap and is pulled back to the 
backing tree.  It is created via the find command as Rich first suggested.



CR Number                     : 11105
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : dfs core tests
Short Description             : script hung
Reported Date                 : 6/27/94
Found in Baseline             : 1.1
Found Date                    : 6/27/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dfs smoketest
Sensitivity                   : public

[6/27/94 public]

DFS smoketests hung on mudslide

dcelocal=/usr/opt/dcelocal
dcetest=/dcetest/dcelocal/test
+ /usr/bin/whoami 
user_name=root
+ [ root != root ] 
+ unset NLSPATH 
LANG=En_US
+ export NLSPATH LANG 
+ cd /mnt/tailor/opt/dce1.1/etc 
+ ./dce_config -c /usr/rrizzo/RAT_tools/mult_mach_configs/mudslide_secr_cdsr_dfsc.cmd -e /usr/rrizzo/RAT_tools/mult_mach_configs/mudslide_secr_cdsr_dfsc.env -i 


S:****** Attempting to remove all remnants of previous DCE installations for all components...

[6/27/94 public]

gmd added DIR_REPLICATE variable to the dce_config env file



CR Number                     : 11069
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : debug flag
Short Description             : disk full
Reported Date                 : 6/24/94
Found in Baseline             : 1.1
Found Date                    : 6/24/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : bld
Sensitivity                   : public

[6/24/94 public]

The debug flag was turned on in last nights build which
exhausted the disk space on the build systems resulting
in incomplete builds.

ld: Write failed in dfs_server.ext
*** Error code 1



CR Number                     : 11066
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : bld
Subcomponent Name             : 
Short Description             : CC_OPT_LEVEL is set to NULL on HP
Reported Date                 : 6/24/94
Found in Baseline             : 1.1
Found Date                    : 6/24/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : src/Makeconf
Sensitivity                   : public

[6/24/94 public]
For HP800, CC_OPT_LEVEL is set to NULL in src/Makeconf.
This prevents set setting of CC_OPT_LEVEL from command line.

[6/24/94 public]

Can you clarify this bug please.

In the past, on the HP800 platform, CC_OPT_LEVEL is set to
NULL as such:

    CC_OPT_LEVEL=

You are right, you cannot make changes from the command
line for this variable.

Yesterday, I made some changes to src/Makeconf that took
this away as such:

    .if defined(DEBUG_ON_NOW)
        CC_OPT_LEVEL=-g
    .endif

However, this might have caused the build to fail.

So, I will be backing out my changes.  In backing out my
changes, the CC_OPT_LEVEL will be as before.  Is this 
what you want?  If not please respond because I am going
to fix it.

thanks
annie

[6/28/94 public]
CC_OPT_LEVEL on HP800 is now the following:

  CC_OPT_LEVEL?=

I think this does what people want.



CR Number                     : 10911
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa, i486
S/W Ref Platform              : hpux, osf1
Component Name                : bld
Subcomponent Name             : COPYRIGHT.DCE
Short Description             : COPYRIGHT.DCE not absolute
Reported Date                 : 6/9/94
Found in Baseline             : 1.1
Found Date                    : 6/9/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : src/Makefile
Sensitivity                   : public

[6/9/94 public]

COPYWRIGHT problem ???????

release   -o bin -g bin -m 755 -tostage /u3/devobj/sb/nb_ux/install/hp800/opt/dce1.1 -fromfile / COPYRIGHT.DCE/ 
release: target "COPYRIGHT.DCE/" not absolute
release: / is not a regular file
*** Error code 1
`install_all' not remade because of errors.

[06/09/94 public]
mama mia, IDIR and ILIST are reversed.  What a goof.  
It is fixed now.
thanks
annie



CR Number                     : 10892
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : put COPYRIGHT.DCE in the install tree
Short Description             : COPYRIGHT.DCE is NOT in the install tree, and the header files reference it
Reported Date                 : 6/8/94
Found in Baseline             : 1.1
Found Date                    : 6/8/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1
Affected File(s)              : src/Makefile
Sensitivity                   : public

[6/8/94 public]

The fix is to put the following in src/Makefile

ILIST = COPYRIGHT.DCE
IDIR = ./

COPYRIGHT.DCE is referenced in the DCE sources.  During the
install phase, COPYRIGHT.DCE is not in the /opt/dce1.1 area.
This would have been o.k. since OSF does not deal with 
binaries.

Unfortunately, at install/configuration time, the DCE header 
files get put in /usr/include/dce which is a link to 
/opt/dce1.1/share/include/dce.  These files are text file 
and they reference COPYRIGHT.DCE.

Soooo, COPYRIGHT.DCE will be installed so that it is locatable
if needed.  It will reside in /opt/dce1.1

thanks
annie

[06/08/94 public]

File has been submitted.



CR Number                     : 10877
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : bld
Subcomponent Name             : file/fshost
Short Description             : signal 10 error
Reported Date                 : 6/7/94
Found in Baseline             : 1.1
Found Date                    : 6/7/94
Severity                      : B
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : /ode/bin/make: job.c, str.c, var.c
Sensitivity                   : public

[6/7/94 public]



c89 -c       -DGENERIC -DAPPLETALK -DFDDI_VM -DHW_VISIBLE_TBL -D_UNSUPPORTED -DWSIO_PHYSIO  -DEQUIVMEM -DNGRAF_WS -DSPARSE_PDIR -D_WSIO -DSNAKES_IO -DPA89 -DGETMOUNT -DLOCAL_DISC -DFSS  -DREGION -DOSDEBUG -D_HPUX_SOURCE -DHFS -DAUDIT  -DACLS -DFSD_KI -DPSTAT -DPOSIX -DMP -DLWSYSCALL -DICA_ON -DRDB -DEQUIVMEM -DSYSCALLTRACE  -DBSDJOBCTL -DQUOTA -DFPC_BUG -DNSYNC -DTEAC_FLOPPY -DAUTOCHANGER -D_PA_RISC_1_1 -DTIMEX_BUG -DTIMEX  -DKERNEL -D_KERNEL  -DAFS_DEBUG -DHP_DFS -I/project/dce/build/hp_kinc/hp800 -D__hppa -Dhp9000s800 -Dhp9000s700 -D__hp9000s800 -D__hp9000s700 -DHPUX -D__hpux -Dunix +DA1.0 -D_HPUX_SOURCE    -I- -I. -I/u3/devobj/sb/nb_ux/src/file/epidummy -I/project/dce/build/dce1.1-snap/src/file/epidummy  -I/u3/devobj/sb/nb_ux/export/hp800/usr/include -I/project/dce/build/dce1.1-snap/export/hp800/usr/include    /project/dce/build/dce1.1-snap/src/file/epidummy/epidummy.c
ar crl libepidum.a epidummy.o
rm -rf /u3/devobj/sb/nb_ux/export/hp800/usr/lib/libepidum.a
makepath /u3/devobj/sb/nb_ux/export/hp800/usr/lib/libepidum.a
(cd .; tar cfh - libepidum.a) |  (cd /u3/devobj/sb/nb_ux/export/hp800/usr/lib; tar xf -)
`build_all' not remade because of errors.
*** Error code 1

[ /file/fshost at 21:24 (PM) Monday ]
*** Signal 10

[ /file/epidummy at 21:39 (PM) Monday ]
`build_all' not remade because of errors.
*** Error code 1

[ /admin/dcecp at 21:41 (PM) Monday ]
`build_all' not remade because of errors.
*** Error code 1

[ /file/libafs at 22:37 (PM) Monday ]
make: don't know how to make libhost.a (continuing)

[6/7/94 public]
The signal 10 comes from make.  It is a tools problem,
not a DFS problem.  Please stop assigning this problem to me.
See Sally or Ron Rizzo for the long and sordid story of
this problem.

[6/7/94 public]

I'm reassigning this back to DFS.

We don't get Signal 10s in the DCE 1.1 build.  We search for them in every
nightly.  The sudden appearance of a Signal 10 in "file/fshost" and the
failure that resulted is a real DFS bug.

[6/9/94 public]

Sorry Ron - I've let all the rats know that you really aren't responsible
for "make" and that we are.  Ron I guess was not aware of the fact that
this is a make problem and that it does also occur in the 1.1 builds as well.
Sure the fact that it always occurs in "./file" is interesting, but it is
really not your fault.

I have also lowered the severity from A to B - as it only happens occasionally
and by rebuilding those modules the "Signal" goes away.

[7/13/94 public]
I have closed this bug - We were given some changes that transarc made to
their 2.3.4 version of ode that fixed some memory corruption problems.
We have been building with those changes in the nightly build for 5 days
now - and the Signal 10 has gone away.  We retrofitted their changes to
our 2.3.3 version of ode make - as we will not be moving up to 2.3.4 ode
during the DCE 1.1 timeframe. We only picked up the changes for the make
sources as shown below:

RCS file: ode/bin/make/RCS/job.c,v
retrieving revision 2.1
diff -cwt -r2.1 ode/bin/make/job.c
*** 2.1	1994/05/09 00:00:00
- - --- ode/bin/make/job.c	1994/06/07 21:22:27
***************
*** 951,956 ****
- - --- 974,983 ----
                   * space and save off a pointer.
                   */
                  *t++ = '\0';
+                 if (!start) {
+                     done = TRUE;
+                     continue;
+                 }
                  if (argc == argmax) {
                      argmax <<= 1;               /* ramp up fast */
                      argv = (const char **)realloc(argv,
***************
*** 980,985 ****
- - --- 1007,1019 ----
          }
          if (!(job->flags & JOB_REMOTE))
              argv[0] = argv[1];
+     }
+     if (argc == argmax) {
+         argmax += 1;            /* ramp up not so fast */
+         argv = (const char **)realloc(argv,
+                                       argmax * sizeof(char *));
+         if (argv == 0)
+             enomem();
      }
      argv[argc] = (const char *)NULL;
      *argvp = (char **)argv;
RCS file: ode/bin/make/RCS/str.c,v
retrieving revision 2.1
diff -cwt -r2.1 ode/bin/make/str.c
*** 2.1	1994/05/09 00:00:00
- - --- ode/bin/make/str.c	1994/06/07 21:23:01
***************
*** 231,236 ****
- - --- 248,255 ----
                           * space and save off a pointer.
                           */
                          *t++ = '\0';
+                         if (!start)
+                                 goto done;
                          if (argc == argmax) {
                                  argmax *= 2;            /* ramp up fast */
                                  if (!(argv = (const char **)realloc(argv,
***************
*** 272,278 ****
                          start = t;
                  *t++ = ch;
          }
! done:   argv[argc] = (char *)NULL;
          *store_argc = argc;
          return((char **)argv);
  }
- - --- 291,303 ----
                          start = t;
                  *t++ = ch;
          }
! done:   if (argc == argmax) {
!                 argmax += 1;            /* ramp up not so fast */
!                 if (!(argv = (const char **)realloc(argv,
!                     argmax * sizeof(char *))))
!                 enomem();
!         }
!         argv[argc] = (char *)NULL;
          *store_argc = argc;
          return((char **)argv);
===================================================================
RCS file: ode/bin/make/RCS/var.c,v
retrieving revision 2.1
diff -cwt -r2.1 ode/bin/make/var.c
*** 2.1	1994/05/09 00:00:00
- - --- ode/bin/make/var.c	1994/06/07 21:23:08
***************
*** 285,290 ****
- - --- 308,317 ----
                   * space and save off a pointer.
                   */
                  *t++ = '\0';
+                 if (!start) {
+                     done = TRUE;
+                     continue;
+                 }
                  if (argc == argmax) {
                      argmax <<= 1;               /* ramp up fast */
                      av = (const char **)realloc(av,
***************
*** 313,318 ****
- - --- 340,352 ----
              *t++ = ch;
          }
          av[0] = av[1];
+         if (argc == argmax) {
+             argmax += 1;                /* ramp up not so fast */
+             av = (const char **)realloc(av,
+                                         argmax * sizeof(char *));
+             if (av == 0)
+                 enomem();
+         }
          av[argc] = (char *)NULL;
      }
  
***************
*** 2337,2342 ****
- - --- 2371,2377 ----
      }
      result = (char *) Buf_GetBase(buf);
      result = strndup(result, Buf_Size(buf));
+     *freePtr = TRUE;
      Buf_Destroy(buf);
      return(result);
  }



CR Number                     : 10871
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : copyright expansion
Short Description             : copyright expansion
Reported Date                 : 6/6/94
Found in Baseline             : 1.1
Found Date                    : 6/6/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1
Affected File(s)              : files in dce without copyrights
Sensitivity                   : public

[6/6/94 public]

Because all files to be shipped by OSF must have the OSF copyright,
a bunch of files (about 1000) in DCE1.1 MUST be modified to have
the OSF copyright text.

Another set of files (about 8000) have an incorrect copyright
information.  These will also have to be updated.

thanks
annie

[6/20/94 public]

As of June 17, the copyright expansion has been completed.
We are all set for beta.

thanks
annie



CR Number                     : 10848
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : admin/tcl7.*/doc
Short Description             : incorrect comment leaders
Reported Date                 : 6/2/94
Found in Baseline             : 1.1
Found Date                    : 6/2/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1
Affected File(s)              : described below
Sensitivity                   : public

[6/2/94 public]

The files in question are:

      ./admin/tcl7.0/doc/history.n    NONE
      ./admin/tcl7.1/doc/history.n    NONE
      ./admin/tcl7.3/doc/history.n    NONE
      ./admin/tcl7.0/doc/AddErrInfo.3 NONE
      ./admin/tcl7.0/doc/AppInit.3    NONE
      ./admin/tcl7.0/doc/Async.3  NONE
      ./admin/tcl7.0/doc/Backslash.3  NONE
      ./admin/tcl7.0/doc/CallDel.3    NONE
      ./admin/tcl7.0/doc/CmdCmplt.3   NONE
      ./admin/tcl7.0/doc/Concat.3 NONE
      ./admin/tcl7.0/doc/CrtCommand.3 NONE
      ./admin/tcl7.0/doc/CrtInterp.3  NONE
      ./admin/tcl7.0/doc/CrtMathFnc.3 NONE
      ./admin/tcl7.0/doc/CrtPipelin.3 NONE
      ./admin/tcl7.0/doc/CrtTrace.3   NONE
      ./admin/tcl7.0/doc/DString.3    NONE
      ./admin/tcl7.0/doc/DetachPids.3 NONE
      ./admin/tcl7.0/doc/EnterFile.3  NONE
      ./admin/tcl7.0/doc/Eval.3   NONE
      ./admin/tcl7.0/doc/ExprLong.3   NONE
      ./admin/tcl7.0/doc/GetInt.3 NONE
      ./admin/tcl7.0/doc/Hash.3   NONE
      ./admin/tcl7.0/doc/Interp.3 NONE
      ./admin/tcl7.0/doc/LinkVar.3    NONE
      ./admin/tcl7.0/doc/PrintDbl.3   NONE
      ./admin/tcl7.0/doc/RecordEval.3 NONE
      ./admin/tcl7.0/doc/RegExp.3 NONE
      ./admin/tcl7.0/doc/SetRecLmt.3  NONE
      ./admin/tcl7.0/doc/SetResult.3  NONE
      ./admin/tcl7.0/doc/SetVar.3 NONE
      ./admin/tcl7.0/doc/SplitList.3  NONE
      ./admin/tcl7.0/doc/StrMatch.3   NONE
      ./admin/tcl7.0/doc/Tcl.n    NONE
      ./admin/tcl7.0/doc/TildeSubst.3 NONE
      ./admin/tcl7.0/doc/TraceVar.3   NONE
      ./admin/tcl7.0/doc/append.n NONE
      ./admin/tcl7.0/doc/array.n  NONE
      ./admin/tcl7.0/doc/break.n  NONE
      ./admin/tcl7.0/doc/case.n   NONE
      ./admin/tcl7.0/doc/catch.n  NONE
      ./admin/tcl7.0/doc/cd.n NONE
      ./admin/tcl7.0/doc/close.n  NONE
      ./admin/tcl7.0/doc/concat.n NONE
      ./admin/tcl7.0/doc/continue.n   NONE
      ./admin/tcl7.0/doc/eof.n    NONE
      ./admin/tcl7.0/doc/error.n  NONE
      ./admin/tcl7.0/doc/eval.n   NONE
      ./admin/tcl7.0/doc/exec.n   NONE
      ./admin/tcl7.0/doc/exit.n   NONE
      ./admin/tcl7.0/doc/expr.n   NONE
      ./admin/tcl7.0/doc/file.n   NONE
      ./admin/tcl7.0/doc/flush.n  NONE
      ./admin/tcl7.0/doc/for.n    NONE
      ./admin/tcl7.0/doc/foreach.n    NONE
      ./admin/tcl7.0/doc/format.n NONE
      ./admin/tcl7.0/doc/gets.n   NONE
      ./admin/tcl7.0/doc/glob.n   NONE
      ./admin/tcl7.0/doc/global.n NONE
      ./admin/tcl7.0/doc/if.n NONE
      ./admin/tcl7.0/doc/incr.n   NONE
      ./admin/tcl7.0/doc/info.n   NONE
      ./admin/tcl7.0/doc/join.n   NONE
      ./admin/tcl7.0/doc/lappend.n    NONE
      ./admin/tcl7.0/doc/library.n    NONE
      ./admin/tcl7.0/doc/lindex.n NONE
      ./admin/tcl7.0/doc/linsert.n    NONE
      ./admin/tcl7.0/doc/list.n   NONE
      ./admin/tcl7.0/doc/llength.n    NONE
      ./admin/tcl7.0/doc/lrange.n NONE
      ./admin/tcl7.0/doc/lreplace.n   NONE
      ./admin/tcl7.0/doc/lsearch.n    NONE
      ./admin/tcl7.0/doc/lsort.n  NONE
      ./admin/tcl7.0/doc/man.macros   NONE
      ./admin/tcl7.0/doc/open.n   NONE
      ./admin/tcl7.0/doc/pid.n    NONE
      ./admin/tcl7.0/doc/proc.n   NONE
      ./admin/tcl7.0/doc/puts.n   NONE
      ./admin/tcl7.0/doc/pwd.n    NONE
      ./admin/tcl7.0/doc/read.n   NONE
      ./admin/tcl7.0/doc/regexp.n NONE
      ./admin/tcl7.0/doc/regsub.n NONE
      ./admin/tcl7.0/doc/rename.n NONE
      ./admin/tcl7.0/doc/return.n NONE
      ./admin/tcl7.0/doc/scan.n   NONE
      ./admin/tcl7.0/doc/seek.n   NONE
      ./admin/tcl7.0/doc/set.n    NONE
      ./admin/tcl7.0/doc/source.n NONE
      ./admin/tcl7.0/doc/split.n  NONE
      ./admin/tcl7.0/doc/string.n NONE
      ./admin/tcl7.0/doc/switch.n NONE
      ./admin/tcl7.0/doc/tclsh.1  NONE
      ./admin/tcl7.0/doc/tclvars.n    NONE
      ./admin/tcl7.0/doc/tell.n   NONE
      ./admin/tcl7.0/doc/time.n   NONE
      ./admin/tcl7.0/doc/trace.n  NONE
      ./admin/tcl7.0/doc/unknown.n    NONE
      ./admin/tcl7.0/doc/unset.n  NONE
      ./admin/tcl7.0/doc/uplevel.n    NONE
      ./admin/tcl7.0/doc/upvar.n  NONE
      ./admin/tcl7.0/doc/while.n  NONE
      ./admin/tcl7.1/doc/AddErrorInfo.3   NONE
      ./admin/tcl7.1/doc/AppInit.3    NONE
      ./admin/tcl7.1/doc/Async.3  NONE
      ./admin/tcl7.1/doc/Backslash.3  NONE
      ./admin/tcl7.1/doc/CallDel.3    NONE
      ./admin/tcl7.1/doc/CmdCmplt.3   NONE
      ./admin/tcl7.1/doc/Concat.3 NONE
      ./admin/tcl7.1/doc/CrtCommand.3 NONE
      ./admin/tcl7.1/doc/CrtInterp.3  NONE
      ./admin/tcl7.1/doc/CrtMathFnc.3 NONE
      ./admin/tcl7.1/doc/CrtPipelin.3 NONE
      ./admin/tcl7.1/doc/CrtTrace.3   NONE
      ./admin/tcl7.1/doc/DString.3    NONE
      ./admin/tcl7.1/doc/DetachPids.3 NONE
      ./admin/tcl7.1/doc/EnterFile.3  NONE
      ./admin/tcl7.1/doc/Eval.3   NONE
      ./admin/tcl7.1/doc/ExprLong.3   NONE
      ./admin/tcl7.1/doc/GetInt.3 NONE
      ./admin/tcl7.1/doc/Hash.3   NONE
      ./admin/tcl7.1/doc/Interp.3 NONE
      ./admin/tcl7.1/doc/LinkVar.3    NONE
      ./admin/tcl7.1/doc/PrintDbl.3   NONE
      ./admin/tcl7.1/doc/RecordEval.3 NONE
      ./admin/tcl7.1/doc/RegExp.3 NONE
      ./admin/tcl7.1/doc/SetRecLmt.3  NONE
      ./admin/tcl7.1/doc/SetResult.3  NONE
      ./admin/tcl7.1/doc/SetVar.3 NONE
      ./admin/tcl7.1/doc/SplitList.3  NONE
      ./admin/tcl7.1/doc/StrMatch.3   NONE
      ./admin/tcl7.1/doc/Tcl.n    NONE
      ./admin/tcl7.1/doc/TildeSubst.3 NONE
      ./admin/tcl7.1/doc/TraceVar.3   NONE
      ./admin/tcl7.1/doc/append.n NONE
      ./admin/tcl7.1/doc/array.n  NONE
      ./admin/tcl7.1/doc/break.n  NONE
      ./admin/tcl7.1/doc/case.n   NONE
      ./admin/tcl7.1/doc/catch.n  NONE
      ./admin/tcl7.1/doc/cd.n NONE
      ./admin/tcl7.1/doc/close.n  NONE
      ./admin/tcl7.1/doc/concat.n NONE
      ./admin/tcl7.1/doc/continue.n   NONE
      ./admin/tcl7.1/doc/eof.n    NONE
      ./admin/tcl7.1/doc/error.n  NONE
      ./admin/tcl7.1/doc/eval.n   NONE
      ./admin/tcl7.1/doc/exec.n   NONE
      ./admin/tcl7.1/doc/exit.n   NONE
      ./admin/tcl7.1/doc/expr.n   NONE
      ./admin/tcl7.1/doc/file.n   NONE
      ./admin/tcl7.1/doc/flush.n  NONE
      ./admin/tcl7.1/doc/for.n    NONE
      ./admin/tcl7.1/doc/foreach.n    NONE
      ./admin/tcl7.1/doc/format.n NONE
      ./admin/tcl7.1/doc/gets.n   NONE
      ./admin/tcl7.1/doc/glob.n   NONE
      ./admin/tcl7.1/doc/global.n NONE
      ./admin/tcl7.1/doc/if.n NONE
      ./admin/tcl7.1/doc/incr.n   NONE
      ./admin/tcl7.1/doc/info.n   NONE
      ./admin/tcl7.1/doc/join.n   NONE
      ./admin/tcl7.1/doc/lappend.n    NONE
      ./admin/tcl7.1/doc/library.n    NONE
      ./admin/tcl7.1/doc/lindex.n NONE
      ./admin/tcl7.1/doc/linsert.n    NONE
      ./admin/tcl7.1/doc/list.n   NONE
      ./admin/tcl7.1/doc/llength.n    NONE
      ./admin/tcl7.1/doc/lrange.n NONE
      ./admin/tcl7.1/doc/lreplace.n   NONE
      ./admin/tcl7.1/doc/lsearch.n    NONE
      ./admin/tcl7.1/doc/lsort.n  NONE
      ./admin/tcl7.1/doc/man.macros   NONE
      ./admin/tcl7.1/doc/open.n   NONE
      ./admin/tcl7.1/doc/pid.n    NONE
      ./admin/tcl7.1/doc/proc.n   NONE
      ./admin/tcl7.1/doc/puts.n   NONE
      ./admin/tcl7.1/doc/pwd.n    NONE
      ./admin/tcl7.1/doc/read.n   NONE
      ./admin/tcl7.1/doc/regexp.n NONE
      ./admin/tcl7.1/doc/regsub.n NONE
      ./admin/tcl7.1/doc/rename.n NONE
      ./admin/tcl7.1/doc/return.n NONE
      ./admin/tcl7.1/doc/scan.n   NONE
      ./admin/tcl7.1/doc/seek.n   NONE
      ./admin/tcl7.1/doc/set.n    NONE
      ./admin/tcl7.1/doc/source.n NONE
      ./admin/tcl7.1/doc/split.n  NONE
      ./admin/tcl7.1/doc/string.n NONE
      ./admin/tcl7.1/doc/switch.n NONE
      ./admin/tcl7.1/doc/tclsh.1  NONE
      ./admin/tcl7.1/doc/tclvars.n    NONE
      ./admin/tcl7.1/doc/tell.n   NONE
      ./admin/tcl7.1/doc/time.n   NONE
      ./admin/tcl7.1/doc/trace.n  NONE
      ./admin/tcl7.1/doc/unknown.n    NONE
      ./admin/tcl7.1/doc/unset.n  NONE
      ./admin/tcl7.1/doc/uplevel.n    NONE
      ./admin/tcl7.1/doc/upvar.n  NONE
      ./admin/tcl7.1/doc/while.n  NONE
      ./admin/tcl7.3/doc/AddErrInfo.3 NONE
      ./admin/tcl7.3/doc/AppInit.3    NONE
      ./admin/tcl7.3/doc/Async.3  NONE
      ./admin/tcl7.3/doc/Backslash.3  NONE
      ./admin/tcl7.3/doc/CallDel.3    NONE
      ./admin/tcl7.3/doc/CmdCmplt.3   NONE
      ./admin/tcl7.3/doc/Concat.3 NONE
      ./admin/tcl7.3/doc/CrtCommand.3 NONE
      ./admin/tcl7.3/doc/CrtInterp.3  NONE
      ./admin/tcl7.3/doc/CrtMathFnc.3 NONE
      ./admin/tcl7.3/doc/CrtPipelin.3 NONE
      ./admin/tcl7.3/doc/CrtTrace.3   NONE
      ./admin/tcl7.3/doc/DString.3    NONE
      ./admin/tcl7.3/doc/DetachPids.3 NONE
      ./admin/tcl7.3/doc/EnterFile.3  NONE
      ./admin/tcl7.3/doc/Eval.3   NONE
      ./admin/tcl7.3/doc/ExprLong.3   NONE
      ./admin/tcl7.3/doc/GetInt.3 NONE
      ./admin/tcl7.3/doc/Hash.3   NONE
      ./admin/tcl7.3/doc/Interp.3 NONE
      ./admin/tcl7.3/doc/LinkVar.3    NONE
      ./admin/tcl7.3/doc/PrintDbl.3   NONE
      ./admin/tcl7.3/doc/RecordEval.3 NONE
      ./admin/tcl7.3/doc/RegExp.3 NONE
      ./admin/tcl7.3/doc/SetRecLmt.3  NONE
      ./admin/tcl7.3/doc/SetResult.3  NONE
      ./admin/tcl7.3/doc/SetVar.3 NONE
      ./admin/tcl7.3/doc/SplitList.3  NONE
      ./admin/tcl7.3/doc/StrMatch.3   NONE
      ./admin/tcl7.3/doc/Tcl.n    NONE
      ./admin/tcl7.3/doc/TildeSubst.3 NONE
      ./admin/tcl7.3/doc/TraceVar.3   NONE
      ./admin/tcl7.3/doc/append.n NONE
      ./admin/tcl7.3/doc/array.n  NONE
      ./admin/tcl7.3/doc/break.n  NONE
      ./admin/tcl7.3/doc/case.n   NONE
      ./admin/tcl7.3/doc/catch.n  NONE
      ./admin/tcl7.3/doc/cd.n NONE
      ./admin/tcl7.3/doc/close.n  NONE
      ./admin/tcl7.3/doc/concat.n NONE
      ./admin/tcl7.3/doc/continue.n   NONE
      ./admin/tcl7.3/doc/eof.n    NONE
      ./admin/tcl7.3/doc/error.n  NONE
      ./admin/tcl7.3/doc/eval.n   NONE
      ./admin/tcl7.3/doc/exec.n   NONE
      ./admin/tcl7.3/doc/exit.n   NONE
      ./admin/tcl7.3/doc/expr.n   NONE
      ./admin/tcl7.3/doc/file.n   NONE
      ./admin/tcl7.3/doc/flush.n  NONE
      ./admin/tcl7.3/doc/for.n    NONE
      ./admin/tcl7.3/doc/foreach.n    NONE
      ./admin/tcl7.3/doc/format.n NONE
      ./admin/tcl7.3/doc/gets.n   NONE
      ./admin/tcl7.3/doc/glob.n   NONE
      ./admin/tcl7.3/doc/global.n NONE
      ./admin/tcl7.3/doc/if.n NONE
      ./admin/tcl7.3/doc/incr.n   NONE
      ./admin/tcl7.3/doc/info.n   NONE
      ./admin/tcl7.3/doc/join.n   NONE
      ./admin/tcl7.3/doc/lappend.n    NONE
      ./admin/tcl7.3/doc/library.n    NONE
      ./admin/tcl7.3/doc/lindex.n NONE
      ./admin/tcl7.3/doc/linsert.n    NONE
      ./admin/tcl7.3/doc/list.n   NONE
      ./admin/tcl7.3/doc/llength.n    NONE
      ./admin/tcl7.3/doc/lrange.n NONE
      ./admin/tcl7.3/doc/lreplace.n   NONE
      ./admin/tcl7.3/doc/lsearch.n    NONE
      ./admin/tcl7.3/doc/lsort.n  NONE
      ./admin/tcl7.3/doc/man.macros   NONE
      ./admin/tcl7.3/doc/open.n   NONE
      ./admin/tcl7.3/doc/pid.n    NONE
      ./admin/tcl7.3/doc/proc.n   NONE
      ./admin/tcl7.3/doc/puts.n   NONE
      ./admin/tcl7.3/doc/pwd.n    NONE
      ./admin/tcl7.3/doc/read.n   NONE
      ./admin/tcl7.3/doc/regexp.n NONE
      ./admin/tcl7.3/doc/regsub.n NONE
      ./admin/tcl7.3/doc/rename.n NONE
      ./admin/tcl7.3/doc/return.n NONE
      ./admin/tcl7.3/doc/scan.n   NONE
      ./admin/tcl7.3/doc/seek.n   NONE
      ./admin/tcl7.3/doc/set.n    NONE
      ./admin/tcl7.3/doc/source.n NONE
      ./admin/tcl7.3/doc/split.n  NONE
      ./admin/tcl7.3/doc/string.n NONE
      ./admin/tcl7.3/doc/switch.n NONE
      ./admin/tcl7.3/doc/tclsh.1  NONE
      ./admin/tcl7.3/doc/tclvars.n    NONE
      ./admin/tcl7.3/doc/tell.n   NONE
      ./admin/tcl7.3/doc/time.n   NONE
      ./admin/tcl7.3/doc/trace.n  NONE
      ./admin/tcl7.3/doc/unknown.n    NONE
      ./admin/tcl7.3/doc/unset.n  NONE
      ./admin/tcl7.3/doc/uplevel.n    NONE
      ./admin/tcl7.3/doc/upvar.n  NONE
      ./admin/tcl7.3/doc/while.n  NONE

These files have the BSD copyrights in them BUT the comment leader
is stated as NONE.  This is NOT appropriate if OSF is to put its
copyright there.

[06/06/94 public]

Thanks to Maryanne for pointing out the fact that the above should
have been filed with the dcecp component.  I was not sure which
component they belong to.

[6/6/94 public]
All files under admin/tcl7.0 and admin/tcl7.1 should be defuncted.

Those listed above under tcl7.3 should be corrected.

[6/8/94 public]
All the files under admin/tcl7.0 and admin/tcl7.1 have been defuncted.
The files in admin/tcl7.3/doc have been fixed and submitted. 

Pointed back to the rats to have them delete the directory skeleton
of admin/tcl7.0 and admin/tcl7.1

[06/10/94 public]
defuncted directories have been removed from backing tree.  THANKS John.



CR Number                     : 10843
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : 
Short Description             : Remove empty directories from
backing build
Reported Date                 : 6/2/94
Found in Baseline             : 1.1
Found Date                    : 6/2/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b8
Affected File(s)              : see below
Sensitivity                   : public

[6/2/94 public]
There are a bunch of empty directories in the backing build which should be
manually removed.  These are the results of wholesale sections of code
being defuncted -- the defunct operation removes the file from the backing
build but doesn't remove empty directories.

Here's a handy-dandy script to find empty directories:

  #!/bin/ksh
  find . -type d -print > /tmp/dirlist.$$
  
  while read dirname
  do
	  \ls $dirname > /tmp/lsfile
	  if [ ! -s /tmp/lsfile ]
	  then
		  echo $dirname
	  fi
	  rm /tmp/lsfile
  done < /tmp/dirlist.$$

Here's the output as run from dce1.1/src on 6/2.  Bear in mind that you
will have to remove empty parent directories, as well.

./admin/tcl7.3/tests
./directory/gds/AT386/adm/admin
./directory/gds/AT386/cacheadm/admin
./directory/gds/AT386/conf
./directory/gds/AT386/nds
./directory/gds/HP800/adm/admin
./directory/gds/HP800/cacheadm/admin
./directory/gds/HP800/conf
./directory/gds/HP800/nds
./directory/gds/HP800/rtros/com/routil
./directory/gds/PMAX/adm/admin
./directory/gds/PMAX/cacheadm/admin
./directory/gds/PMAX/conf
./directory/gds/RIOS/adm/admin
./directory/gds/RIOS/cacheadm/admin
./directory/gds/RIOS/conf
./directory/gds/RIOS/nds
./directory/gds/SVR4/adm/admin
./directory/gds/SVR4/cacheadm/admin
./directory/gds/SVR4/conf
./directory/gds/SVR4/nds
./directory/gds/dua/switch/h
./directory/gds/oss/prod
./directory/gds/oss/tools/asn
./directory/gds/ros/Product/Include
./directory/gds/ros/Product/Sources
./directory/gds/ros/Seplog/lib
./directory/gds/ros/Seplog/lib_r
./directory/gds/ros/sh/include
./directory/gds/ros/step
./directory/gds/uids
./directory/gds/slog
./test/admin/dcecp/ts/clock
./test/config
./test/directory/gds/ros/testenv/AT386
./test/directory/gds/ros/testenv/HP800
./test/directory/gds/ros/testenv/PMAX
./test/directory/gds/ros/testenv/RIOS
./test/directory/gds/ros/testenv/SVR4
./test/directory/gds/ros/testenv/adm
./test/directory/gds/ros/testenv/conf
./test/directory/gds/ros/testenv/rosinit/badhist
./test/directory/gds/ros/testenv/rosresp/badhist
./test/directory/gds/ros/tools
./test/directory/gds/tst/t.cache
./test/directory/gds/tst/t.cadm
./test/directory/gds/tst/t.dsa
./test/directory/gds/tst/t.scheme
./test/directory/gds/gdscp/misc/invalid
./test/directory/gds/gdscp/misc/valid
./test/directory/gds/gdscp/referral/invalid
./test/directory/gds/gdscp/structured/valid
./test/directory/gds/gdscp/x500abbr/invalid
./test/directory/gds/gdscp/x500abbr/valid
./test/directory/gds/gdscp/x500obj/invalid
./test/directory/gds/gdscp/x500obj/valid
./test/directory/gds/gdscp/x500svc/invalid
./test/directory/gds/gdscp/x500svc/valid
./test/directory/xds/tests.mhs/invalid
./test/directory/xds/tests.mhs/tree
./test/directory/xds/tests.mhs/valid
./test/directory/xds/tests.switch/invalid
./test/directory/xds/tests.switch/threads_af
./test/directory/xds/tests.switch/threads_as
./test/directory/xds/tests.switch/threads_os
./test/directory/xds/tests.switch/threads_up
./test/directory/xds/tests.switch/tree
./test/directory/xds/tests.switch/valid
./test/directory/xds/tests.xds/basic
./test/directory/xds/tests.xds/invalid
./test/directory/xds/tests.xds/stress
./test/directory/xds/tests.xds/threads_af
./test/directory/xds/tests.xds/threads_as
./test/directory/xds/tests.xds/threads_os
./test/directory/xds/tests.xds/threads_stress
./test/directory/xds/tests.xds/threads_up
./test/directory/xds/tests.xds/tree
./test/directory/xds/tests.xds/valid
./test/directory/xds/tests.xom/basic
./test/directory/xds/tests.xom/invalid
./test/directory/xds/tests.xom/threads_as
./test/directory/xds/tests.xom/valid
./test/directory/xds/tests.xoms/invalid
./test/directory/xds/tests.xoms/threads_af
./test/directory/xds/tests.xoms/threads_as
./test/directory/xds/tests.xoms/valid
./test/rpc/idl_frontend/DUMPERS/expected_results
./test/rpc/idl_frontend/ERRORS/expected_results
./test/rpc/idl_frontend/OK
./test/rpc/idl_frontend/STUBS/expected_results
./test/rpc/idl_frontend/STUBS_DUMPERS/expected_results
./test/rpc/idl_frontend/import
./turnoff_lock_dir

[06/02/94 public]
The following pipeline outputs empty directories in the right order,
so that you could feed this whole thing right into "|xargs rmdir"
    find . -type d -print \
	| awk '{print length, $0}' \
	| sort -nr \
	| awk '{print $2}'



CR Number                     : 10833
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : src/Makefile
Short Description             : NO_ADMIN should be removed
Reported Date                 : 6/2/94
Found in Baseline             : 1.1
Found Date                    : 6/2/94
Severity                      : E
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : src/Makefile
Sensitivity                   : public

[6/2/94 public]
The NO_ADMIN switch to turn the building of tcl and dcecp on/off should
be removed form the code.  These things should always be built.

[9/7/94 public]
NO_ADMIN only occurs in the top level Makefile (src/Makefile).  Reference
of this variable has been removed.

In the nightly build, reference to this variable has been commented out.
This is o.k.



CR Number                     : 10724
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : lots
Short Description             : makefile cleanups.
Reported Date                 : 5/20/94
Found in Baseline             : 1.1
Found Date                    : 5/20/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : Makefiles
Sensitivity                   : public

[5/20/94 public]

Some pending makefile cleanups and sams improvements as described in my
recent mail to dce-drb.

[05/24/94 public]
These changes broke the build for a few days and I, for one, am Not Pleased.
Raised priority to A0.
The dced/idl/Makefile needed to be changed to get SAMIDL_TARGETS updated.
That was submitted.  This defect should not be closed until we have a
clean nightly build.

[05/27/94 public]
These problems have been fixed - They are not breaking the nighlty 
build any longer.



CR Number                     : 10666
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : rules for SAMS output file is too restrictive
Short Description             : rules for SAMS output file is too restrictive
Reported Date                 : 5/16/94
Found in Baseline             : 1.1
Found Date                    : 5/16/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.2.1
Affected File(s)              : lbe/mk/osf.std.mk
Sensitivity                   : public

[5/16/94 public]

Found by Ron Arbo.

The rules in osf.std.mk for building SAMS output files have a 
hard-coded dependency on the technology being 'dce'.  This breaks
DFS (and presumably ISV).

[05/20/94 public]

The QUICK fix for now is to do the following:

    With the existing SAMS rules, the fix is to add a new variable
    called TECHNOLOGY.  This will be set to dce in the common Makefiles 
    but will be set to dfs in the dfs component.

    The change will affect only one file, which is osf.std.mk. 

    Everything else will behave as is.

The PERMANENT fix is as followed:

    At BETA, (a few weeks from now) we will sync DFS (DCE1.1a) with DCE1.1.  
    Then, we will discard the osf.std.mk from DFS (DCE1.1a).  We will be
    doing the following to all the DCE components:

        * Changing the rules in osf.std.mk to not have to strip the
          hard-coded name 'dce'. 
        * Changing the names of all existing .sams files and the
          relevant Makefiles.  Doing a find on dce1.1, we find that 
          the files are:

               ./admin/dcecp/dcp.sams
               ./admin/dced/idl/dhd.sams
               ./dce/utils/svc/svc.sams
               ./dce/utils/dcecf/cfg.sams
               ./dce/utils/misc/lib.sams
               ./directory/cds/includes/cds.sams
               ./directory/gds/sams/gds.sams
               ./rpc/idl/uuidgen/uid.sams
               ./rpc/sys_idl/rpc.sams
               ./rpc/csrc/csr.sams
               ./security/audit/libaudit/aud.sams
               ./time/common/dts.sams

           AND of course all the sams in dfs which resides in the src/file
           area.

    I have already tested the PERMANENT and it works.  It has been approved
    by Rich Salz and Howard Melman.

Sorry, I forgot to add the fact that with this 'new' permanent change, we
will have to send mail out to providers, users, etc and tell them how to 
name their *.sams files. 

Let me know if you have any questions.

thanks
annie

[07/07/94 public]

The following is additional information about the implementation 
of sams to support multilple technology names.  i.e. the TECHNOLOGY
variable.

The current DCE1.1a has the following changes:

    Added the following to osf.std.mk
    
        TECHNOLOGY?=dce
        change all sams rules so that the hard-coded word 'dce'
            is being replaced by the TECNOLOGY variable.

    Added the following to file/Makefile:

       TECHNOLOGY=dfs

This has been working for DFS for months now.

When DCE1.1a merges up to DCE1.1, this changes should be kept
in DCE1.1 so that DCE1.1a changes WILL NOT break.

The permanent 'cleaner' solution (stated above) should be 
implemented in DCE1.1 in the future as time permits.

thanks
annie

[2/6/96 public]

The above changes seems to have made it into 1.2.1 as well :-) Closing.



CR Number                     : 10624
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : tools
Short Description             : sams in 1.1a needs updating
Reported Date                 : 5/12/94
Found in Baseline             : 1.1
Found Date                    : 5/12/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : 1.1a shared sandbox files
Sensitivity                   : public

[5/12/94 public]
The sams utility in the 1.1a backing tree is broken at least for
HP.  Can it be updated with the version in the 1.1 tree?  
Alternatively, do we even need a 1.1a tools area?  We should be 
using the 1.1 tools.

[05/12/94 public]
Ron,

QUESTION: I am assuming that you were backed by DCE1.1 and build your
          stuff in that sandbox to find out that the DCE1.1 tools work.
          Is that correct?
    
Please respond as the above question will impact what the rats are going
to do.
     
My major concern is not the tools area BUT rather what goes with the
tools.  i.e. the header files.  So, this is what we have decided to do: 
    
      0) Check to make sure that NOTHING has changed in the tools between
         DCE1.1-bl8 and DCE1.1.
      1) create a sandbox backed by DCE1.1-bl8.  (WE DID agreed in the
         meeting today that it is going to be the tools in DCE1.1-bl8, RIGHT?)
      2) Build the setup pass to get the tools and 'other' files such as
         the header files.
      3) Figure out a way so that the tools WILL NOT get overwritten
         during the Nightly Build; especially the 'other' files which
         happen to be in the export area.
         (This is currently a fuzzy step right now.)
      4) DO a full build with the changes above
      5) When there are NO errors, the tools will get copied over to the
         DCE1.1a tree and it will be the DESIRABLE one.
 
In looking at the above steps, this task will NOT be visible IMMEDIATELY.
I am estimating the completion of this task to be in place by Wednesday
next week.

So, please let me know if the above is NOT desirable time-wise, and
step-wise.

thanks
annie

[05/13/94 public]

Added a QUICK hack:

    0) move DCE1.1-baseline/bl-5 tools/hp800/bin/sams to 
       tools/hp800/bin/sams.original.
    1) Put DCE1.1 tools/hp800/bin/sams in DCE1.1-baseline/bl-5
       tools/hp800/bin/sams.

Reverted all the Buildconf, Buildconf.exp changes so that DEFTOOLBASE
will NOW work.

This is agreeable with Ron.  SO, I am now lowering the priority of this 
bug.

[7/14/94 public ]
Closed this bug - since we have merged up to 1.1 there is  no need
for separate scheme for tools.



CR Number                     : 10594
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 10581
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : makefiles
Short Description             : dcecp doesn't build
Reported Date                 : 5/10/94
Found in Baseline             : 1.1b8
Found Date                    : 5/10/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b9
Affected File(s)              : lbe/mk/osf.std.mk
Sensitivity                   : public

[5/10/94 public]

A cut-and-paste error from OT CR 10581 put this line into osf.std.mk:
	RIOS_STRICT_COMPILER_WARNINGS = +w1
The +w1 should be removed.

[05/10/94 public]
Fix made and submitted.

[05/11/94 public]
Closed.



CR Number                     : 10581
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : makefiles
Short Description             : getting strict compiler warnings
Reported Date                 : 5/9/94
Found in Baseline             : 1.1b8
Found Date                    : 5/9/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b9
Affected File(s)              : lbe/mk/osf.std.mk, etc.
Sensitivity                   : public

[5/9/94 public]

It would be nice if we could incrementally move over to strict code
cleanup compliance by being able to do this in per-component
directories:
	CFLAGS += ${STRICT_COMPILER_WARNINGS}
The following lines can be added to lbe/mk/osf.std.mk around line 430:

+ # Stanza to set string warnings; by machine type.
+ HP800_STRICT_COMPILER_WARNINGS = +w1
+ AT386_STRICT_COMPILER_WARNINGS = -pedantic -Wchar-subscripts -Wcomment \
+                               -Wformat -Wid-clash-32 -Wimplicit \
+                               -Wmissing-prototypes -Wswitch -Wreturn-type \
+                               -Wstrict-prototypes -Wtraditional -Wunused
+ RIOS_STRICT_COMPILER_WARNINGS = +w1
+ ${_T_M_}_STRICT_COMPILER_WARNINGS?=
+ STRICT_COMPILER_WARNINGS?=${${_T_M_}_STRICT_COMPILER_WARNINGS}

I will submit this change and "fix" admin/dcecp/Makefile.



CR Number                     : 10490
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : dfs
Short Description             : build failed due to incorrect merge
Reported Date                 : 4/29/94
Found in Baseline             : 1.1a
Found Date                    : 4/29/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1a
Affected File(s)              : affected files have been changed
Sensitivity                   : public

[4/29/94 public]

Some of the files submitted by mbs has the 'diff merged lines' << and >>
in them.



CR Number                     : 10472
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 10470
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : conf or makefiles?
Short Description             : Add FVTBASE
Reported Date                 : 4/28/94
Found in Baseline             : 1.1
Found Date                    : 4/28/94
Severity                      : B
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : test/test.mk
Sensitivity                   : public

[4/28/94 public]

It would really REALLY help things out if our build environment
had a variable that pointed to the top of the tree
where new (tet-based) functional tests should go.  I don't know
if this should be FVTDIR, set in osf.std.mk like IDIR is, or
if it should be FVTBASE set in Buildconf like EXPORTBASE is.

That way, most test makefiles could just do
	IDIR = ${FVTBASE}/sec
and so on.

I'd like to see this happen sooner, rather then later, so our Makefiles
can take advantage of it now.

[7/13/94 public]
Where do the "tet-based" functional tests reside now?  Where would you like
them to end up in the install tree?

[7/13/94 public]
From what I've been told the FVTBASE variable should be set to 
<install-path>/<target_machine>/dcetest/dce1.1

The variable FVTBASE can be defined the same way TOSTAGE is set.  There
are some limitations, though.  Each makefile in the tet subsystem
that wants to install things into the FVTBASE will have to specify
that fact by setting a variable (e.g. USE_FVTBASE).  Each makefile would 
look something like:


USE_FVTBASE = 1
IDIR=test/tet/functional/<component>

The common makefiles would then use FVTBASE instead of TOSTAGE.  Makefiles
in the tet subsystem would NOT be able to install things in BOTH FVTBASE
and TOSTAGE.

------------------
If these limitations are unacceptable then another solution would
be to set FVTBASE to "../../dcetest/dce1.1" and require all tet Makefiles
to use the syntax:

IDIR=${FVTBASE}/test/tet/functional/<component>

that way different programs can be installed in different BOTH FVTBASE 
and TOSTAGE by using the syntax:

programA_IDIR=/etc/programA
programB_IDIR=${FVTBASE}/test/tet/functional/<component>/programB


------------------

Comments???

[7/14/94 public]
Since I have not heard any further comments, I'm assuming that the first 
suggestion (using USE_FVTBASE=1) is acceptable.  I will begin
testing today and will submit the changes (along with a few other CR's)
next week.  If anyone has any concerns, please speak up.

[7/14/94 public]
I have one minor one.  Rich wants this:

>  That way, most test makefiles could just do
> 	IDIR = ${FVTBASE}/sec
>  and so on.

The email I sent and backing tree says TET functional tests are installed in: 

> In the install tree, TETized functional tests should go in:
> 
>   install/<machine>/dcetest/dce1.1/test/tet/functional/<component>

And note that the above is NOT /opt/dce1.1 but /dcetest/dce1.1, I
believe this is done via a different value for TOSTAGE.

Your proposed solution would require setting IDIR as:

> IDIR=${FVTBASE}/test/tet/functional/<component>

Which is not what Rich asked for.  I don't think any of care of the
internals of whether FVTBASE is set as TOSTAGE is or not, as long as we
can write Makefiles as Rich would like.

[8/31/94 public]
I have added the line
FVTBASE = /test/tet/functional
to test.mk.  With this change, all Makefiles in the test subsystem
will be able to install tests directly into 
<install-base>/dcetest/dce1.1/test/tet/functional/<componemt>
simply by adding the line
IDIR = ${FVTBASE}/<component>  
to the Makefile.



CR Number                     : 10465
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : bld
Subcomponent Name             : file/xvnode
Short Description             : Signal 10 broke libxnvode.a build
Reported Date                 : 4/27/94
Found in Baseline             : 1.1
Found Date                    : 4/27/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : libxvnode.a
Sensitivity                   : public

[4/27/94 public]

[ /file/xvnode at 23:12 (PM) Tuesday ]

c89 -c -DGENERIC -DAPPLETALK -DFDDI_VM -DHW_VISIBLE_TBL-D_UNSUPPORTED \
 -DWSIO_PHYSIO -DEQUIVMEM -DNGRAF_WS -DSPARSE_PDIR -D_WSIO -DSNAKES_IO -DPA89 \
 -DGETMOUNT -DLOCAL_DISC -DFSS  -DREGION -DOSDEBUG -D_HPUX_SOURCE -DHFS \
 -DAUDIT -DACLS -DFSD_KI -DPSTAT -DPOSIX -DMP -DLWSYSCALL -DICA_ON -DRDB \
 -DEQUIVMEM -DSYSCALLTRACE  -DBSDJOBCTL -DQUOTA -DFPC_BUG -DNSYNC \
 -DTEAC_FLOPPY -DAUTOCHANGER -D_PA_RISC_1_1 -DTIMEX_BUG -DTIMEX -DKERNEL \
 -D_KERNEL -DAFS_DEBUG -DHP_DFS -I/project/dce/build/hp_kinc/hp800  -D__hppa \
 -Dhp9000s800 -Dhp9000s700 -D__hp9000s800 -D__hp9000s700 -DHPUX -D__hpux \
 -Dunix +DA1.0 -D_HPUX_SOURCE -I- -I. -I/u3/devobj/sb/nb_ux/src/file/xvnode \
 -I/project/dce/build/dce1.1-snap/src/file/xvnode \
 -I/u3/devobj/sb/nb_ux/export/hp800/usr/include \
 -I/project/dce/build/dce1.1-snap/export/hp800/usr/include \
 /project/dce/build/dce1.1-snap/src/file/xvnode/HPUX/xvfs_os2vfs.c
*** Signal 10

[4/27/94 public]
This is a known problem with make.  This has nothing to do with DFS.
I suggest you talk to Sally, perhaps you are not using the correct
version of make.

[5/5/94 public]

When using "purified" make for nightly build, Signal 10 goes away.  So
we've closed this CR.



CR Number                     : 10463
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : 
Short Description             : Create Makefile for src/test/functional
Reported Date                 : 4/26/94
Found in Baseline             : 1.1
Found Date                    : 4/26/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : Makefile
Sensitivity                   : public

[4/26/94 public]


Create the Makefile for src/test/functional



CR Number                     : 10462
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : common makefiles
Short Description             : IDL invocation is confusing
Reported Date                 : 4/26/94
Found in Baseline             : 1.1b7
Found Date                    : 4/26/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b8
Affected File(s)              : lbe/mk/osf.std.mk
Sensitivity                   : public

[4/26/94 public]
The way osf.std.mk invokes IDL is confusing.  It puts the source
filename BEFORE some of the flags, as in:
	idl -I...  foo.idl -server none
and so on.  Standard practice is flags before parameters.  A minor edit
to osf.std.mk fixes this.

[06/16/94 public]
Fixed several weeks ago:
    # Revision 1.2.45.7  1994/04/26  20:19:48  rsalz
    #       Change IDL invocation so all flags come first (OT CR 10462)
    #       [1994/04/26  19:04:06  rsalz]



CR Number                     : 10436
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : bld
Subcomponent Name             : link flags
Short Description             : hpux progs need end.o for stack tb
Reported Date                 : 4/21/94
Found in Baseline             : 1.1
Found Date                    : 4/21/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : src/Makeconf
Sensitivity                   : public

[4/21/94 public]

Faults are usually reported in the default build hp-ux reference binaries
with less-than-useful degenerate tracebacks provided.  For corefile stack
tracebacks to be complete, /usr/lib/end.o must be linked in with programs;
this is a small (~9K) addition that will greatly aid our diagnosis of problems.

The easiest way to do this is by adding the -g option for the final links.

[6/10/94 public]

OSF's build process should set LD_OPT_LEVEL=-g in Buildconf or Makeconf for
HP800.

[6/28/94 public]
Added LD_OPT_LEVEL?=-g to the HP800 section of Makeconf.



CR Number                     : 10376
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486,rs6000
S/W Ref Platform              : osf1,aix
Component Name                : bld
Subcomponent Name             : admin/dced/api
Short Description             : permission denied for dced_util.c
Reported Date                 : 4/18/94
Found in Baseline             : 1.1
Found Date                    : 4/18/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b8
Affected File(s)              : dced_util.c
Sensitivity                   : public

[4/18/94 public]

/project/dce/build/dce1.1-snap/tools/at386/macho/gcc \
 -B/project/dce/build/dce1.1-snap/tools/at386/macho/ -c -D_SHARED_LIBRARIES \
 -I. -I/u1/devobj/sb/nb_486/src/admin/dced/api \
 -I/project/dce/build/dce1.1-snap/src/admin/dced/api -I. \
 -I/u1/devobj/sb/nb_486/src/admin/dced/api \ 
 -I/project/dce/build/dce1.1-snap/src/admin/dced/api -I../idl \
 -I/u1/devobj/sb/nb_486/src/admin/dced/idl \
 -I/project/dce/build/dce1.1-snap/src/admin/dced/idl \
 -I/u1/devobj/sb/nb_486/export/at386/usr/include \
 -I/project/dce/build/dce1.1-snap/export/at386/usr/include -pic-lib \
 -L/u1/devobj/sb/nb_486/export/at386/usr/shlib \
 -L/project/dce/build/dce1.1-snap/export/at386/usr/shlib -L/usr/shlib \
 -L/u1/devobj/sb/nb_486/export/at386/usr/lib \
 -L/project/dce/build/dce1.1-snap/export/at386/usr/lib \
 /project/dce/build/dce1.1-snap/src/admin/dced/api/dced_util.c \
 /project/dce/build/dce1.1-snap/tools/at386/macho/cpp: \
 /project/dce/build/dce1.1-snap/src/admin/dced/api/dced_util.c: \
 Permission denied
*** Error code 1

[04/19/94 public]
It's an ODE defect that checked-in file don't have the right permission.
Mario fixed the RCS file and offers the following work-around:
    Whenever a person checks in a file, they 
    should be sure that there is "other" read permissions set (ie: r--r--r--). 
    Otherwise when the files gets checked in by the developer,           ^
    there won't be permissions in the "other" for reading the file and a
    "permission denied" will be the result.



CR Number                     : 10374
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : osf.dce.mk
Short Description             : _GENIDLINC_ not like _GENINC_
Reported Date                 : 4/17/94
Found in Baseline             : 1.1b7
Found Date                    : 4/17/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.2.1
Affected File(s)              : lbe/mk/osf.dce.mk
Sensitivity                   : public

[4/17/94 public]
The late, great, Mark Hickey once sent some email about this:
    the -I flags on your idl command line do not include any that refer to
    the backing tree source directory, where you expect to find the .acf
    file.  If you put the .acf in your sandbox, then it gets found sort of
    by accident.

    The -I flags on your idl command line is insufficient because the
    osf.std.mk common makefile variable _GENIDLINC_ does not reference the
    "." directory the way the _GENINC_ variable does; ie, in osf.dce.mk:
	    _ansi_GENINC_=${x:L:!${GENPATH} -I.!} # = paths to the
						  # current sb and
						  # backing build
	    _CC_GENINC_=${_${_CCTYPE_}_GENINC_}
    while in osf.std.mk:
	    _GENINC_=\
		${_CC_GENINC_} ${_INCFLAGS_:!${GENPATH} ${_INCFLAGS_}!}

	     _CCFLAGS_=\
		    ...
		    ...
	       ${_CC_NOSTDINC_} ${_GENINC_} ${_CC_INCDIRS_} ${_CC_PICLIB_}
					      ^^^^^^^^^^^^
Quoting further, in case the above is as clear as mud:
    So for compiles, you get the -I to the source directory for free, but
    for idl's you don't.  I THINK THIS IS AN ERROR.  I think that the 
    _GENIDLINC_ variable should give you the -I. for free.

[4/22/94 public]
Assisted to Annie and included some preliminary info:
For osf.dce.mk:

        add the following after "project specific rules"

        # project specific rules for IDL                   #
        ####################################################
        
        _host_GENIDLINC_=
        _ansi_GENIDLINC_=${x:L:!${GENPATH} -I.!}
        _traditional_GENIDLINC_=${x:L:!${GENPATH} -I.!}
        _writable_strings_GENIDLINC_=${x:L:!${GENPATH} -I.!}
        _CC_GENIDLINC_=${_${_CCTYPE_}_GENIDLINC_}
         
        ####################################################

For osf.std.mk:

        change the line from this:
           "${_IDLINCFLAGS_:!${GENPATH} ${_IDLINCFLAGS_}!"
        to this:
           "${_CC_GENIDLINC_} ${_IDLINCFLAGS_:!${GENPATH}
${_IDLINCFLAGS_}!}"

Keep in mind that this hasn't been tested, and testing it can be rather
difficult since you will need a situation in which there is an idl file
looking for a header file that may have just been created or exists within
the current directory.

[7/27/94 public]

HI Rich,

Additional information required ...

Can you point me to the source area where this problem occurs?
This way it is easier for me to analyze the problem.

From the description above I have an idea of what is needed.  
i.e.  idl compilation line should have -I. or the ability to
do so.  However, a new fact is now in place for DCE1.1:

    IDL no longer need .acf files in DCE1.1
      
thanks
annie

[07/28/94 public]
>   IDL no longer need .acf files in DCE1.1
This is totally wrong.  ACF files are needed a great deal in DCE.
Perhaps you are confusing them with xxx_saux and xxx_caux files?

I have a source directory that has an IDL and an ACF file.  I want to
modify the IDL file so I bco it.  I don't have the ACF in my sandbox,
it is only in the backing tree.

Here is a way to test it.  In a sandbox go to src/admin/dced/server.
Do the following:
	bco dced_convert.idl
	build dced_convert_cstub.o
You will get compiler errors.  These errors indicate that the generated
code doesn't match the prototype.  This means that the ACF file, which is
used to modify the generated code so that IDL encoding services are used,
WAS NOT FOUND.  Go to the object tree, remove dced_convert_cstub.o. Go
back to src/admin/dced/server
	bco -read dced_convert.acf
	build dced_convert_cstub.o
You will now see no errors.  This means that the ACF file was found.

GENIDLINC should be set the same way GENINC is set.

[2/6/96 public]
Fix is present in 1.2.1. Closing.



CR Number                     : 10364
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : dced/server
Short Description             : missing file dcedhdsvc.h
Reported Date                 : 4/15/94
Found in Baseline             : 1.1
Found Date                    : 4/15/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b8
Affected File(s)              : src/Makefile src/admin/dced/idl/Makefile
Sensitivity                   : public

[4/15/94 public]

dcedhdsvc.h does not exist but is included in dcedimpl.h


/project/dce/build/dce1.1-snap/src/admin/dced/server/dcedimpl.h:63:
dcedhdsvc.h:
 No such file or directory
*** Error code 1

[4/15/94 public ]

Are you sure that the nightly build snapped the right makefile?
When I run "build" in the dced/idl directory I get the right sams
invocations:
; build
relative path: ./admin/dced/idl
cd ../../../../obj/hp800/admin/dced/idl
exec make MAKEFILE_PASS=AUTOGEN  _SUBMAKE_=_IS_SUBMAKE_  build_all
/project/dce/build/dce1.1/tools/hp800/bin/sams       -oh /project/dce/build/dce1.1/src/admin/dced/idl/dhd.sams
/project/dce/build/dce1.1/tools/hp800/bin/sams       -omc /project/dce/build/dce1.1/src/admin/dced/idl/dhd.sams
/project/dce/build/dce1.1/tools/hp800/bin/sams       -osu /project/dce/build/dce1.1/src/admin/dced/idl/dhd.sams
/project/dce/build/dce1.1/tools/hp800/bin/sams       -osu /project/dce/build/dce1.1/src/admin/dced/idl/dhd.sams
rm -f /sandbox/rsalz/d/export/hp800/usr/include/dce/dcedhdmsg.h
makepath /sandbox/rsalz/d/export/hp800/usr/include/dce/dcedhdmsg.h
cp -r dcedhdmsg.h /sandbox/rsalz/d/export/hp800/usr/include/dce/dcedhdmsg.hexec make MAKEFILE_PASS=FIRST  _SUBMAKE_=_IS_SUBMAKE_  build_all
*** Signal 2
{I interrupted with CTRL/C here}

Making this a build issue and taking my name off as resp engineer

[4/17/94 public]
Exported dcedhdsvc.h in admin/dced/idl/Makefile.

[04/17/94 public]
The sams-generated header file dcedhdsvc.h should NOT be exported.  This
file can be used only by the dced server code.  Putting it into the
export area is a work-around, not a fix.  Re-opened the defect.

[04/19/94 public]
Figured it out:  added admin to the SAMIDL_SUBDIRS pass in the toplevel
makefile.  Closed.



CR Number                     : 10343
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 9641
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : config files
Short Description             : Use DCE1.1 in install tree
Reported Date                 : 4/13/94
Found in Baseline             : 1.1
Found Date                    : 4/13/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dce/Buildconf,
Sensitivity                   : public

[4/13/94 public]
This defect needs to be address in conjunction with CFG defect 9641.

File changes necesssary in the Rat area are:

dce/Builconf:  change TOSTAGE
test/test.mk:  change TOSTAGE

You'll probably also need to check any of your scripts for necessary
changes.



CR Number                     : 10257
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 9974
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : 
Short Description             : DTS audit code points not in default build
Reported Date                 : 3/31/94
Found in Baseline             : 1.1
Found Date                    : 3/31/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.2.1
Affected File(s)              : time/service/Makefile
Sensitivity                   : public

[3/31/94 public]

The DTS audit code points currently need to be enabled by 
a compile line flag.  They should be in the default build.

[03/31/94 public]

This is not a DTS issue.  DTS is doing the right thing -- audit points
are compiled, or not, based on whether or not DCE_AUD_POINTS is defined.
If we want to turn auditing on then we need to either put this #define
in dce.h or add -DDCE_AUD_POINTS to CFLAGS.  Changed this to build issue.

[3/31/94 public]
Hmm, I think I'll have to push libaudit into libdce before we turn this on.
(See defect 9974.)  I'll get that out tomorrow or Monday.

[4/4/94 public]

Changed the priority on this to a D2; significant problem with a medium
priority. The workaround is add the flag in your sandbox and rebuild DTS.

Currently auditing is not turned on in the nightly builds.

[6/9/94 public]

I just wanted to make the RATS and Charlie aware that
this problem is still open.
DTS audit code points should be in the default build.
No action is necessary immediately; but this should
be on somebody's list after beta.

[2/6/96 public]
Fixed in 1.2.1. Closing.



CR Number                     : 10140
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : bld
Subcomponent Name             : rpc/idl/klib
Short Description             : many common include files cannot
					     be found
Reported Date                 : 3/15/94
Found in Baseline             : 1.1
Found Date                    : 3/15/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : rpc/idl/klib/Makefile
Sensitivity                   : public

[3/15/94 public]

The problem seems to center on "rpc/idl/klib".

The vast majority of errors for the HP were complaints in RPC and
DFS about common include files.  I don't yet know what causes it:
libdce built on the HP, etc.  But I'm filing an OT now in case
someone out there recognizes the failure.

The modules affected are in RPC and DFS and include:

	rpc/idl/klib
	rpc/runtime
	rpc/kdes
	file/*.klib
	file/sysacl
	file/fshost	
	file/tkc
	<etc.>

and involve complaints from what look like common include files, eg,
types.h, user.h, sysincludes.h, param.h, spl.h. time.h. signal.h,
proc.h, vmmac.h, resources.h, privgrp.h, errono.h, etc.

Here are samples of the error messages:

[ /rpc/idl/klib at 20:50 (PM) Monday ]

types.h: 7: Unable to find include file '../h/stdsyms.h'.
types.h: 273: Unable to find include file '../h/_types.h'.
errno.h: 11: Unable to find include file '../h/stdsyms.h'.
errno.h: 200: Unable to find include file '../h/_errno.h'.
*** Error code 1

[ /rpc/kruntime at 20:50 (PM) Monday ]

param.h: 8: Unable to find include file '../h/stdsyms.h'.
param.h: 19: Unable to find include file '../h/types.h'.
param.h: 11: Unable to find include file '../h/sysmacros.h'.
param.h: 22: Unable to find include file '../h/time.h'.
spl.h: 78: Unable to find include file '../h/stdsyms.h'.
param.h: 279: Unable to find include file '../h/signal.h'.
param.h: 406: Unable to find include file '../h/kpreempt.h'.
param.h: 423: Unable to find include file '../h/_param.h'.
....
time.h: 9: Unable to find include file '../h/stdsyms.h'.
socket.h: 30: Unable to find include file '../h/stdsyms.h'.
uio.h: 8: Unable to find include file '../h/stdsyms.h'.
errno.h: 11: Unable to find include file '../h/stdsyms.h'.
errno.h: 200: Unable to find include file '../h/_errno.h'.
sysconf.h: 132: Unable to find include file 'h/assert.h'.
sysconf.h: 142: Unable to find include file 'h/malloc.h'.
types.h: 7: Unable to find include file '../h/stdsyms.h'.
types.h: 273: Unable to find include file '../h/_types.h'.
poll.h: 7: Unable to find include file '../h/stdsyms.h'.

[ /file/util.klib at 21:26 (PM) Monday ]

sysincludes.h: 60: Unable to find include file 'dux/lookupops.h'.
user.h: 17: Unable to find include file '../h/time.h'.
user.h: 18: Unable to find include file '../h/resource.h'.
user.h: 19: Unable to find include file '../h/privgrp.h'.
user.h: 20: Unable to find include file '../h/errno.h'.
user.h: 21: Unable to find include file '../h/signal.h'.
user.h: 22: Unable to find include file '../h/proc.h'.
user.h: 27: Unable to find include file '../h/vmmac.h'.
*** Error code 1 

[ /file/kutils.klib at 21:26 (PM) Monday ]

sysincludes.h: 60: Unable to find include file 'dux/lookupops.h'.
user.h: 17: Unable to find include file '../h/time.h'.
user.h: 18: Unable to find include file '../h/resource.h'.
user.h: 19: Unable to find include file '../h/privgrp.h'.
user.h: 20: Unable to find include file '../h/errno.h'.
user.h: 21: Unable to find include file '../h/signal.h'.
user.h: 22: Unable to find include file '../h/proc.h'.
user.h: 27: Unable to find include file '../h/vmmac.h'.
osi_sysconfig_mach.h: 48: Unable to find include file 'sys/kload.h'.
*** Error code 1

[3/15/94 public]

The include files involved are kernel header files.  The HP build machine
show the kernel header files in "hp_kinc" currently mounted.  It is possible
though unlikely that they weren't mounted during the nightly build, or, less
unlikely, that they are mounted yet inaccessible for some as yet unknown
reason.  We are still investigating.

[3/15/94 public]

We have found definite evidence for the following explanation:

The errors were caused by the fact that the directory holding the HP's
kernel header files was unmounted due to the repeated rebooting of
the the DCE 1.,1 control machine and the HP build machine over the last
few days to correct equipment and network problems.

I am beefing up RaT procedures to ensure that this directory stays mounted
or gets speedily remounted on the build machine.

[3/16/94 public]

Mounted "vertigo:/u0/hp_kinc" fixed the problem.  The HP platform built
last night.



CR Number                     : 10063
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : 
Short Description             : Many -I/xxx/xx args repeated in builds
Reported Date                 : 3/4/94
Found in Baseline             : 1.1b0
Found Date                    : 3/4/94
Severity                      : A
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : /src/dce/Buildconf
Sensitivity                   : public

[3/4/94 public]
When build (or, rather, make) run the compiler in a sandbox, it repeats the
-I/xxx/xxx and -L/xxx/xxx args for the sandbox you're working in.
For example (from HP nightly bld log, reformatted for clarity):

    c89 [ a bunch of args ]
	-I/u3/devobj/sb/nb_ux/src/security/utils
	-I/u3/devobj/sb/nb_ux/src/security/utils
	-I/project/dce/build/dce1.1-snap/src/security/utils
	-I../h
	-I/u3/devobj/sb/nb_ux/src/security/h
	-I/u3/devobj/sb/nb_ux/src/security/h
	-I/project/dce/build/dce1.1-snap/src/security/h
	-I../client/rca
	-I/u3/devobj/sb/nb_ux/src/security/client/rca
	-I/u3/devobj/sb/nb_ux/src/security/client/rca
	-I/project/dce/build/dce1.1-snap/src/security/client/rca
	-I../idl
	-I/u3/devobj/sb/nb_ux/src/security/idl
	-I/u3/devobj/sb/nb_ux/src/security/idl
	-I/project/dce/build/dce1.1-snap/src/security/idl
	-I/u3/devobj/sb/nb_ux/export/hp800/usr/include
	-I/u3/devobj/sb/nb_ux/export/hp800/usr/include
	-I/project/dce/build/dce1.1-snap/export/hp800/usr/include
	/project/dce/build/dce1.1-snap/src/security/client/rca/acct.c

Same thing happens with the "-L" flag when linking programs.

Check any build log file in /project/dce/build/nb_{ux,486}/logs.
(It's hard to tell when 'more'ing the file, since the lines are very long.)
This has been this way before 1.1 started up.

[3/4/94 public]
Ah, it's an ODE bug, not DCE.  It was reported months ago, but not yet
fixed.  If you use "make" instead of "build", it does not happen.

[3/9/94 public]
From the ODE folks (Damon):

    This is due to missing 'replace' directives in the Buildconf file.

    The reason that things are fine when make is run instead of build is that
    make uses the existing environment variables, and build creates them again.
    The problem is that when it creates them again, it starts with their
    current contents.

    So, in Buildconf, MAKESYSPATH should be:

	replace setenv MAKESYSPATH ${source_base}/lbe/mk

    instead of

	setenv MAKESYSPATH ${source_base}/lbe/mk

    This is also true of the variables BACKED_SOURCEDIR, SOURCEDIR, INCDIRS,
    and LIBDIRS.

So Buildconf should be adjusted appropriately.

[06/15/94 public]
FYI:  I cannot build dced in my sandbox on the rios because of this.
Bumped priority.  Just to make this clear, it's a fix to src/dce/Buildconf.

[07/14/94 public]

Fixed in nightly build
tested by smoketests
resident in bl-12



CR Number                     : 10043
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : dcecp
Short Description             : restore and rebuild cdscp.h
Reported Date                 : 3/1/94
Found in Baseline             : 1.1
Found Date                    : 3/1/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : cdscp.h
Sensitivity                   : public

[3/1/94 public]

cdscp.h was a corrupted RCS file.
Needs to be restore & rebuilt

[3/1/94 public]
I had cf restore cdscp.h.  Unfortunately, they didn't have the latest 
revision so I got an older one and then I rebuilt it with the latest
code (checked in 1.1.5.5 - _CDSCP_H stuff, then stamped with baseline 3
stamp).  Checked backing tree.

[3/2/94 public]
Restored/rebuilt file had no problems in build.



CR Number                     : 9940
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : bld
Subcomponent Name             : bld
Short Description             : permissions problem broke libdce.a
Reported Date                 : 2/11/94
Found in Baseline             : 1.1
Found Date                    : 2/11/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : rpc/sys_idl/rpc.idl,
					     rpc/runtime/cs_s_eval.c,
					     rpc/runtime/nslookup.c
Sensitivity                   : public

[2/11/94 public]

A bug among RPC files submitted broke security which in turn broke
libdce.a on the 486.

[2/11/94 public]

The RPC files submitted were fine.  The breakage of "libdce.a" on
the 486 was caused by a permissions problem on the RaT machines.
This OT is being closed.

[2/15/94 public]

  The problem was the left over test directory on the build machine.
I had to work on the build machine to resolve CR 9925, and since I could 
not log in as myself, I used root account.  After the test was done,
I should have cleaned up the test directory, but I didn't.  Since the
test directory was owned by root, and the nightly build was run as
devobj, there was a permission problem to write into the directory.

  The Saturday nightly build showed the problem was resolved.



CR Number                     : 9801
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : sup colletions
Short Description             : krbclt.c, krbcn.c, and
krbdgcom.c should not be omitted from source sup collections.
Reported Date                 : 1/24/94
Found in Baseline             : 1.1b13
Found Date                    : 1/24/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : sup/source/list
Sensitivity                   : public

[1/24/94 public]
Most DCE source sup collections omit the files krbclt.c, krbcn.c, and
krbdgcom.c (of rpc/runtime) from the non-DES sup collections.  This is
because these files require changes to build without DES.

The changes, however, are fairly minor:  simply add:

#define NOENCRYPTION

I don't *think* there is any non-exportable code in these files.

Therefore, I think these files should not be omitted from the 'src' sup
collections.

[3/17/94 public]
Assigned to Mario Moreira (myself)

[3/18/94 public]
I've checked with developers to ensure that these files do not contain
non-exportable code (info from tom).  I've made changes to sup/source/list
to remove these files from the omit list and rescanned.  Checked to ensure
that these files are in sup.

[8/02/94 public]
Reopened. The sup for bl-13 does not contain the files krbcn.c,
krbdgcom.c and krbclt.c .

[8/08/94 public]
Same applies to bl-14.

[8/08/94 public ]
I have fixed the sup colleciton file for bl-14, I have rescanned
the collection and done a trial sup to verify that the files
are now being pulled over.  If you resup bl-14 you should get the
files now.



CR Number                     : 9793
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : bld
Subcomponent Name             : lbe/mk
Short Description             : Rename passes so it is obvious
what the pass is doing
Reported Date                 : 1/21/94
Found in Baseline             : 1.1
Found Date                    : 1/21/94
Severity                      : E
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : osf.dce.passes.mk
Sensitivity                   : public

[1/21/94 public]
Rename passes so it is obvious to you what the pass is doing.
An example: FIRST pass is doing EXPINC
	    FIRSTA pass is doing MVDATA
	    FIRSTB pass is doing CHKDATA
	    THIRD pass is doing EXPLIB and EXPSHLIB

[1/21/94 public]
I don't know as I agree with this change.  The current mechanism makes it
easy to add a new function to a pass.  The also correspond to passes in
other projects common makefiles.  SECOND isn't used since the OSC uses for
something that DCE doesn't have.  FIRST and THIRD do the same thing in both
projects.  Are we ever going to get to the point where the common makefiles
are common?

It seems a like a change for no real benefit.  For example what would you
rename THIRD to "obviously" express that both EXPLIB and EXPSHLIB are done?
What about the BASIC pass?

Also, as this is a cosmetic change, it should be severity E.

[1/21/94 public]
Granted, this is a cosmetic change and I agree with severity E, but I get a
lot of questions from people asking what does (example) FIRSTA do, etc...
While it is easy enough for me to tell them (to read the docs), making it a
bit more obvious doesn't hurt (I'll bet if I conducted an exam on the DCE
staff on passes, that there would be very few people who would get higher
than a 75% on identifying there function and we compile all the time).

PS. BASIC could probably be better named to COMP (general compile).  Not a
biggie cause I understand this is low in priority/severity.

[1/21/94 public]
I don't see any reason to constrain ourselves by what other projects are
doing.  Simple naming changes won't inhibit the operation or ordering of
the build in any way.

I think there are reasonably obvious benefits to having pass names
correspond to the targets used for build invocations and Makefile
directions:

	EXPINC
	LIBS (for EXP[SH]LIB)
	PROGRAMS

Again, this is a low priority defect.

[4/19/94 public]
Well, given the resources on the project, that people are (basically)
used to the pass structure, that it has been low priority (cosmetic), 
and that (maybe) no one will really care, it has been decided that 
the pass names will remain the same.



CR Number                     : 9792
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : 
Short Description             : Set a policy on what to do
with SAMIDL variables and AUTOGEN pass
Reported Date                 : 1/21/94
Found in Baseline             : 1.1
Found Date                    : 1/21/94
Severity                      : D
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : none
Sensitivity                   : public

[1/21/94 public]
It is now possible to set some variables in Makefiles to enable you
to use the AUTOGEN pass to build and export *.idl and header files to
the export tree.  The AUTOGEN pass follows the setup pass and is before 
the EXPORT pass.        

While this is now possible, the question is, should it be left to the
developers to determine what they want exported and make changes 
themselves, should the pass export all *.idl and their generated header
files, or should we come up with a list of the directories to which
particular *.idl and headers get exported?  Keep in mind that by
running the AUTOGEN to pick up *.idl and header files, we may come
across duplicates that will have to be dealt with (ex: rpc/kruntime/ep.acf
and rpc/sys_idl/ep.acf). 

The initial consensus is to use the normal EXPINC (FIRST) pass to do the
primary exporting and then use AUTOGEN for special cases of exporting.
It should be stressed that the AUTOGEN pass is NOT a replacement of the
EXPORT pass, but as a pass to generate and organize files so that
subsequent passes can have needed files in place.

Once policy has been set, a writeup should be sent out to developers and
also placed in some document.

[4/12/94 public]
Changed "Responsible Engr" to mario (me).

[4/22/94 public]
Using the AUTOGEN (aka SAMIDL) pass.

POLICY: All sams and idl files which produce dependency products (.h or
.idl)
        must use the AUTOGEN pass.

Use AUTOGEN pass for specific needs (ex: when you need .idl and .h
exported).
This is not meant to replace the EXPINC pass, but resolve dependency
issues for these header files specific to idl and sams files.  The AUTOGEN 
pass follows the SETUP pass and runs before the EXPORT pass.

While other possible options are possible, they require a lot (2+ weeks) of

work, which is a luxury neither OSF, Provider, and RAT engineers currently
have.  This approach will resolve the immediate dependency problems and
take little work to impliment.  Engineers can add further .idl and .h files

directly to the AUTOGEN pass.  This may change the policy eventually to an 
AUTOGEN pass that exports all sams and idl stuff, although this is not 
likely to happen in the time frame of DCE1.1.

We have a very complex set of build dependencies involving idl files and 
their subsequent code generated probucts:  headers, and stubs -- both 
source code and object module format.  We seem to be getting into the same 
sort of dependency problem with sams files.

Note - the following constraints were considered:
        - the time remaining on the DCE1.1 project
        - the work load of OSF, Providers, and RAT engineering cycles
        - avoid violating the assignment of build operation->pass

Example: To use the AUTOGEN pass

        - place your directory in the SAMIDL_SUBDIRS in each Makefile
          until you get to the directory needed.  For example, you need
          to use the AUTOGEN pass for the directory/gds/sams directory,
          do the following:

                top-level Makefile: SAMIDL_SUBDIRS = directory
                directory Makefile: SAMIDL_SUBDIRS = gds
                gds Makefile: SAMIDL_SUBDIRS = sams

                *Note: ensure you place the directory name in the order
                       in which you need the files.
          
Below is a preliminary writeup on this for the "DCE Porting and Testing
Guide". 

*****************************************************************************

                           AUTOGEN/SAMIDL pass
                           -------------------

10.1.3 Organization of the DCE Build Process

* AUTOGEN

  This pass builds sams and idl related files.  They can also be exported.
  You can generate header files from *.idl files and export them so that
  other components, have the required dependent *.idl or header file.

10.1.4.2 Subdirectory Variables

* SAMIDL_SUBDIRS

  Defines a list of subdirectories to visit during the autogen pass.  
  This pass is used to build sams, *.idl, header, *cstubs.c, *stubs.c, 
  *cstubs.o, and *stubs.o files in the obj tree.

10.1.4.3a ODE Variables Used in the AUTOGEN Pass

The following variables are used by ODE during the autogen pass to 
determine various targets and dependencies.  The goal of the autogen 
pass to to build sams files and place any *.idl and header dependency
needed by other components into the export tree or obj tree.

* SAMIDL_INCLUDES

  Defines a list of files (*.idl and *.h) to be exported.  This 
   should only be used for those files generated in the AUTOGEN pass. 

* IDLFILES

  Defines a list of *.idl files to run the idl compiler on

* SAMSFILES

  Defines a list of *.sams files to run the sams compiler on.

* SAMS_TARGETS

  Defines a list of files to be generated from the ${SAMFILES} and 
  placed in the obj tree.

  For example:  the dcp.sams file, SAMS_TARGETS might be set
                to the following: dcedcpsvc.h dcedcpmsg.h dcedcpmac.h
                                  dcedcpsvc.c dcedcpmsg.c dcedcp.cat

* SAMS_SCRIPTS

  Defines a list of sams scripts to be built during the autogen pass.
 
* SAMS_OTHERS

  Defines a list of other things to be built during the autogen pass.

* SAMSFLAG

  Defines a list of flags to pass to the sams compiler.



CR Number                     : 9729
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : common makefiles
Short Description             : SAMIDL pass doesn't understand IDL
Reported Date                 : 1/12/94
Found in Baseline             : 1.1
Found Date                    : 1/12/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : none, but tested with
top-level Makefiles and some component Makefiles
Sensitivity                   : public

[1/12/94 public]
Despite the name, the SAMIDL (a.k.a, AUTOGEN) pass doesn't know what to do
with IDL files.

The SAMIDL pass was intended to address the needs specified in RFC34.2,
DCE1.1 Coding Style Guide, Sections 5.1 (k) and (l).  Basically, there
would be one pass at the top of the build which would run through the tree
and build all the .sams and .idl files.  This works with sams files but not
with IDL.

Basically, we need an idl target for the pass (say, IDL_TARGETS to
correspond to SAMS_TARGETS -- we don't want to use IDLFILES because that is
a target that is already used and we need backward compatibility.)  Then,
we need a double-suffix rule such that make will understand the rather
complex dependency rules of IDL files:

	.acf -> .idl -> {.h, *_cstub.[co], *_sstub.[co]}

I think this work is confined to lbe/mk/osf.dce.passes.mk, osf.std.mk
[01-13-94 public]

Assigning this to Mario Moreira.

[1/21/94 public]

Investigated common Makefiles and logs, ran various tests, and found that
SAMIDL functionality is already in place.  It is set to be used during the
AUTOGEN pass.  The quesiton remains to what extent will idl type files be
used during this pass (policy issue).  Otherwise, technically this has been
resolved.  I am opening up a policy CR on this issue.  Below is some 
information about AUTOGEN and SAMIDL variables:

10.1.3 Organization of the DCE Build Process

* AUTOGEN

  This pass builds sams and idl related files.  They can also be exported.
  You can generate header files from *.idl files and export them so that
  other components, have the required dependent *.idl or header file.

10.1.4.2 Subdirectory Variables

* SAMIDL_SUBDIRS

  Defines a list of subdirectories to visit during the autogen pass.  
  This pass is used to build sams, *.idl, header, *cstubs.c, *stubs.c, 
  *cstubs.o, and *stubs.o files in the obj tree.

10.1.4.3a ODE Variables Used in the setup Pass

The following variables are used by ODE during the autogen pass to 
determine various targets and dependencies.  The goal of the autogen 
pass to to build sams files and place any *.idl and header dependency
needed by other components into the export tree or obj tree.

* SAMIDL_INCLUDES

  Defines a list of include files (*.idl and *.h) to be exported.

* IDLFILES

  Defines a list of *.idl files to run the idl compiler on.



CR Number                     : 9723
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : 
Short Description             : Remove HPisms in top Makefile
burati@apollo.hp.com ratdce
Reported Date                 : 1/12/94
Found in Baseline             : 1.1b1
Found Date                    : 1/12/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : src/Makefile
Sensitivity                   : public

[1/12/94 public]
The conditional processing on HPUX should be removed.  Also, things like
${BUILD_HP_VALUE_ADDED}.

[1/12/94 public]
Added Bill to CC interest list.

[1/13/94 public]

Assigning to Mario Moreira.

[2/8/94 public]
Added further information from Rich Zeliff about plans to remove HPisms and
added Mike Burati to CC list.

**HP (Bill and Mike) please review and respond if necessary**

HP has embedded hooks in DCE makefile source code for their productization
work..  We (Howard, Rich$, and I) want to remove them because 1)they have
nothing to do with our version of DCE and 2) they give the incorrect
impression that there are customizations in DCE which benefit HP.

This will have no effect on DCE1.1 development efforts but will make
integration with continuing DCE1.1 development somewhat more difficult for
the HP productization group.  HP will be unhappy about this.  However, they
will not be under any more of a burden then any other productization group.

Details:

The "top-level makefiles" (src/Makefile and src/Makeconf) more-or-less
govern how the build happens and what part of the code is built.  During
either the drop of the HP/UX core port or the DFS port, HP introduced some
HPUX specific code to the principle section of the makefile.  This really
has no business being there.  Here's the code fragment (cleaned up somewhat
for readability):

  .if ${TARGET_OS} == "HPUX"
  EXPINC_SUBDIRS=${BUILD_THREADS} ${BUILD_DCE} \
                 ${BUILD_DFS:U${NO_LATENT_DFS_SUPPORT:D:Ufile}} \
                 ${BUILD_DISKLESS} ${BUILD_HP_VALUE_ADDED} ${BUILD_ADMIN}
  .else
  EXPINC_SUBDIRS=${BUILD_THREADS} ${BUILD_DCE} ${BUILD_DFS} \
                 ${BUILD_DISKLESS} ${BUILD_HP_VALUE_ADDED} ${BUILD_ADMIN}
  .endif
  
  .if ${TARGET_OS} == "HPUX"
  DATA_SUBDIRS=   ${BUILD_HP_VALUE_ADDED} ${BUILD_DFS}
  .else
  DATA_SUBDIRS=   ${BUILD_HP_VALUE_ADDED}
  .endif
  
  EXPSHLIB_SUBDIRS = ${BUILD_LIBDCE}
  EXPLIB_SUBDIRS=${BUILD_THREADS} ${BUILD_DCE} \
                 ${BUILD_DFS} ${BUILD_DISKLESS} ${LIBDCE_LAST} \
                 ${BUILD_LIBDCEDFS} ${BUILD_HP_VALUE_ADDED} ${BUILD_ADMIN}
  SUBDIRS=       ${BUILD_THREADS} ${BUILD_DCE} ${BUILD_LIBDCE} \
                 ${BUILD_DFS} ${BUILD_DISKLESS} ${BUILD_LIBDCEDFS} \
                 ${BUILD_HP_VALUE_ADDED} ${BUILD_ADMIN}
    
I see no need for the special HPUX processing so I would like to eliminate
these "if" statements.  This would also mean removing the
BUILD_HP_VALUE_ADDED variable and the entire second if contstruction.

[4/7/94 public]
Got comments from Mike Burati and Doug Robinson.  Removed 
${BUILD_HP_VALUE_ADDED} and changed ${NO_LATENT_DFS_SUPPORT:D:Ufile} to
file.  Built, installed, and smoketested on all platforms.

[4/8/94 public]
Submitted into last night's build and built, installed, and smoketested ok.



CR Number                     : 9717
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : dce
Short Description             : modify Buildconf to allow
building from full src tree (no workons or backing tree)
Reported Date                 : 1/11/94
Found in Baseline             : 1.1
Found Date                    : 1/11/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1
Affected File(s)              : dce/Buildconf
Sensitivity                   : public

[1/11/94 public]
Buildconf should allow for a user to build from a full populated src
tree with having to do a workon or back to a backing tree.  By removing
the "setenv" from source_base, export_base, obj_base, and tool_base,
and adding a "SOURCEBASE ${source_base}, this can be accomplished.

[1/12/94 public]
Modified Buildconf and tested.  Originally a problem with setup of
Bob Whitehurst (IBM, Austin).  He used fully populated sandbox with
no backing build or workon to activate the Buildconf/Buildconf.exp
variables.

[1/17/94 public]
Built on all three plaforms - no errors.



CR Number                     : 9687
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : diskless
Short Description             : diskless should be removed
from the build
Reported Date                 : 1/6/94
Found in Baseline             : 1.1
Found Date                    : 1/6/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : src/Makefile, src/Makeconf
Sensitivity                   : public

[1/6/94 public]
Diskless is no longer part of DCE and therefore should be removed from the
build.  This doesn't mean simply asserting NO_DISKLESS (or whatever the
variable name is), but this means actually removing references to
'diskless' from src/Makefile and src/Makeconf.

A second task -- which isn't really a bld defect -- is to move diskless to
'nosupport'

[1/13/94 public]

Assigning this defect to Ron Rizzo.

[3/18/94 public]
Reassigning this defect to Ron Rizzo.

[7/1/94 public ]
Changed status to closed.



CR Number                     : 9686
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : 
Short Description             : dcecp shouldn't be built
Reported Date                 : 1/6/94
Found in Baseline             : 1.1
Found Date                    : 1/6/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : build scripts
	build.ksh
Sensitivity                   : public

[1/6/94 public]
dcecp should not be built as part of the nightly build.  You can turn this
off by asserting the environment variable NO_ADMIN.

[01/13/94 public]

The envirnoment varible NO_ADMIN was added to all three build scripts on
Friday Jan 7, 1994 as a temporary fix.

The switch NO_ADMIN should be added to src/Makeconf with the appropriate
comments.

[1/21/94 public]
Changed the responsible engineer to me and lowered the priority to B1 since
we have a work around in place. 

I added the NO_ADMIN flag to the src/Makeconf file with the appropriate comments.

[1/21/94 public]

I cancelled the request to submit the above change.

The general replies from Howard Melman, John Bowe and John Rousseau were
that ./src/admin should always be visited. If a component under ./src/admin
should NOT be built, the ./src/admin/Makefile would be modified to reflect
this. 

References to NO_ADMIN in the ./src/Makefile should also be removed.

[1/22/94 public]

Removed references to NO_ADMIN in ./src/Makefile and commented out
references to dcecp in the ./src/admin/Makefile as per discussions with
Howard Melman and John Bowe.

[2/2/94 public]

Closed this defect because dcecp will be submitted to the source tree
tonight. The tree has been locked the past week so I did not put through
the proposed changes to ./src/Makefile and ./src/admin/Makefile.

The NO_ADMIN has been commented out of all the nightly build scripts.



CR Number                     : 9676
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : 
Short Description             : Trim comment headers in src/Make*
Reported Date                 : 1/4/94
Found in Baseline             : 1.1
Found Date                    : 1/4/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : src/Makeconf, src/Makefile
Sensitivity                   : public

[1/4/94 public]
The history logs are getting a tad lengthy in these two makefiles. 
Let's remove all messages from prior to the start of dce1.1.  I imagine
we'll be adding plenty of new history to these files throughout the course
of 1.1 ....

[1/13/94 public]

Assigning to Ron Rizzo.
The files are src/Makeconf and src/Makefile. We only need the history from
dce1.0.3.

[7.11.94 public]
All Comments prior to dce1.0.3  have been removed.



CR Number                     : 9657
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : bld
Subcomponent Name             : src/config, src/directory/gds/ASN1/lib_r
Short Description             : Cannot find "/usr/tmp/build.made"
Reported Date                 : 12/27/93
Found in Baseline             : 1.1
Found Date                    : 12/27/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : build.made
Sensitivity                   : public

[12/27/93 public]

During the "makepath" step of the core build phase, in "src/config"
and "src/directory/gds/ASN1/lib_r" the temporary file

	/usr/tmp/build.made

isn't found.

[12/28/93 public]

This OSF RE build environment glitch disappeared in the 12/27/93
overnight build as mysteriously as it had appeared over the weekend.



CR Number                     : 9656
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : bld
Subcomponent Name             : src/lbe/mk
Short Description             : many modules of many components
                                             complain about "-ldce"
Reported Date                 : 12/27/93
Found in Baseline             : 1.1
Found Date                    : 12/27/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : osf.std.mk
Sensitivity                   : public

[12/27/93 public]

Many modules of many components complain as follows:

	/bin/ld:  Can't find library for -ldce

"/src/lbe/mk/osf.std.mk" defines:

LIBS ?= -ldce

Since no files have been submitted since the previous build, the
assumption is the errors are caused by a break or change in the
OSF release engineering build environment over the long weekend.

[12/28/93 public]

This OSF RE build environment glitch disappeared in the 12/27/93
overnight build as mysteriously as it had appeared over the weekend.



CR Number                     : 9652
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : 
Short Description             : src/test/test.mk can't find test/rpc/rpc.mk
Reported Date                 : 12/23/93
Found in Baseline             : 1.1
Found Date                    : 12/23/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : See Below
Sensitivity                   : public

[12/23/93 public]

On all 3 platforms "src/test/test.mk" complains it can't find
 
	../../..//test/rpc/rpc.mk

(The path expansion is wrong if the current directory is
"src/test"; if so, "rpc.mk" is in "./rpc/rpc.mk".)

[12/27/93 public]
Assigned to Tom, this looks like a problem with the RPC functional tests.

[12/28/93 public]

Reading a DRB request by Diane it occurred to me that this problem was
the same as the one that she was fixing in DFS tests.  I am going to
submit a fix for this.

[12/28/93 public]

Fixed, affected file are:

./test/rpc/idl/alias/Makefile
./test/rpc/idl/ao_arrays/Makefile
./test/rpc/idl/array/Makefile
./test/rpc/idl/array2/Makefile
./test/rpc/idl/array_v1_string/Makefile
./test/rpc/idl/array_v2_string/Makefile
./test/rpc/idl/arrayp/Makefile
./test/rpc/idl/arrayptr/Makefile
./test/rpc/idl/arraystr/Makefile
./test/rpc/idl/arraystr2/Makefile
./test/rpc/idl/arrayswith/Makefile
./test/rpc/idl/arrayv1/Makefile
./test/rpc/idl/bigtest1/Makefile
./test/rpc/idl/binop_alloc/Makefile
./test/rpc/idl/binopwk/Makefile
./test/rpc/idl/brown/Makefile
./test/rpc/idl/bug_3/Makefile
./test/rpc/idl/comprefs/Makefile
./test/rpc/idl/comprefs_ool/Makefile
./test/rpc/idl/conftree/Makefile
./test/rpc/idl/context/Makefile
./test/rpc/idl/context2/Makefile
./test/rpc/idl/cover1/Makefile
./test/rpc/idl/cover2/Makefile
./test/rpc/idl/cover_array/Makefile
./test/rpc/idl/cover_array_ool/Makefile
./test/rpc/idl/cover_contain_ref/Makefile
./test/rpc/idl/cover_ool/Makefile
./test/rpc/idl/cover_struct/Makefile
./test/rpc/idl/cover_top_pointer/Makefile
./test/rpc/idl/cover_union/Makefile
./test/rpc/idl/epv/Makefile
./test/rpc/idl/es_array/Makefile
./test/rpc/idl/es_arrayb/Makefile
./test/rpc/idl/es_arrayc/Makefile
./test/rpc/idl/factorial/Makefile
./test/rpc/idl/faultstat/Makefile
./test/rpc/idl/fpe/Makefile
./test/rpc/idl/gregbug1/Makefile
./test/rpc/idl/h_ta/Makefile
./test/rpc/idl/ichar1/Makefile
./test/rpc/idl/ichar2/Makefile
./test/rpc/idl/icharexp/Makefile
./test/rpc/idl/icharpkl/Makefile
./test/rpc/idl/ignore/Makefile
./test/rpc/idl/mtsaconf/Makefile
./test/rpc/idl/mtsvary/Makefile
./test/rpc/idl/multiref/Makefile
./test/rpc/idl/n_e_union/Makefile
./test/rpc/idl/no_op/Makefile
./test/rpc/idl/nodethreads/Makefile
./test/rpc/idl/ool/Makefile
./test/rpc/idl/oolsmall/Makefile
./test/rpc/idl/oolthings/Makefile
./test/rpc/idl/op_results/Makefile
./test/rpc/idl/orecord/Makefile
./test/rpc/idl/out_refs/Makefile
./test/rpc/idl/outrefs/Makefile
./test/rpc/idl/packed_byte_array/Makefile
./test/rpc/idl/parray/Makefile
./test/rpc/idl/pipe_of_array/Makefile
./test/rpc/idl/pipefault/Makefile
./test/rpc/idl/pipes/Makefile
./test/rpc/idl/pipetest/Makefile
./test/rpc/idl/pipetest2/Makefile
./test/rpc/idl/pipetest2_cancel/Makefile
./test/rpc/idl/pipetest2_ool/Makefile
./test/rpc/idl/pointarray/Makefile
./test/rpc/idl/pointed/Makefile
./test/rpc/idl/primes/Makefile
./test/rpc/idl/ptrarray/Makefile
./test/rpc/idl/refdels/Makefile
./test/rpc/idl/refptrs/Makefile
./test/rpc/idl/repas1/Makefile
./test/rpc/idl/repas2/Makefile
./test/rpc/idl/represent/Makefile
./test/rpc/idl/represent_ool/Makefile
./test/rpc/idl/sp_union/Makefile
./test/rpc/idl/sparse/Makefile
./test/rpc/idl/string0/Makefile
./test/rpc/idl/string1/Makefile
./test/rpc/idl/string_tree/Makefile
./test/rpc/idl/stringptr/Makefile
./test/rpc/idl/stringts/Makefile
./test/rpc/idl/stringy/Makefile
./test/rpc/idl/struct_ct_union/Makefile
./test/rpc/idl/threads/Makefile
./test/rpc/idl/tree/Makefile
./test/rpc/idl/ue1/Makefile
./test/rpc/idl/ue2/Makefile
./test/rpc/idl/unique1/Makefile
./test/rpc/idl/unique2/Makefile
./test/rpc/idl/xmit/Makefile
./test/rpc/idl/xmitas/Makefile
./test/rpc/idl/xmitas_conf/Makefile
./test/rpc/idl/xmitas_nested/Makefile
./test/rpc/idl/xmitas_repas/Makefile
./test/rpc/idl/xmitas_repas_ool/Makefile
./test/rpc/rpc.mk
./test/rpc/runtime/helper/Makefile
./test/rpc/runtime/kdriver/Makefile
./test/rpc/runtime/kncstest/Makefile
./test/rpc/runtime/ncstest/Makefile
./test/test.mk

[12/29/93 public]
Closed.



CR Number                     : 9647
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : mk
Short Description             : Remove dead common makefiles
Reported Date                 : 12/23/93
Found in Baseline             : 1.1
Found Date                    : 12/23/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : see below
Sensitivity                   : public

[12/23/93 public]
The following common makefiles exist in lbe/mk but are never used.  They
should be defuncted.

osf.osc.mk
osf.osc.passes.mk
osf.ode.mk
osf.ode.passes.mk
osf.genliblns.mk
sys.mk

[1/13/94 public]
Assigning this to Ron Rizzo.

[1/27/94 public]
Assigned this to Mario Moreira (myself)

[3/15/94 public]
Set up separate backing tree based on bl-4, removed the common makefiles in
question, built and installed on all three platforms successfully.

[3/16/94 public]
Nightly build had no errors relating to defuncting these common makefiles



CR Number                     : 9639
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : make
Short Description             : Defunct DCE make
Reported Date                 : 12/21/93
Found in Baseline             : 1.1
Found Date                    : 12/21/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : Makeconf, lbe/Makefile, lbe/bin/*
Sensitivity                   : public

[12/21/93 public]
The DCE make needs to be defuncted.  This involves defuncting:

lbe/Makefile
lbe/bin/*

Also, remove references to DONT_BUILD_DCE_MAKE in src/Makeconf

[1/14/94 public]
Moved to 'bld'.

[1/21/94 public]
This work has been completed (defuncted 72 dce make files, modified Makeconf),
tested and checked in.

[1/24/94 public]
Fix worked successfully in nightly builds on all 3 platforms.



CR Number                     : 9571
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : 
Short Description             : Comment leaders ".acf" and ".sams" are not known
Reported Date                 : 12/2/93
Found in Baseline             : 1.0.3
Found Date                    : 12/2/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : rc_files/dce/sc.conf
Sensitivity                   : public

[12/2/93 public]

ODE's config files for COMMENT_LEADERS's need to know about .acf and .sams
files.  Without it, bcreate guesses "NONE" for the comment leader:

    % bcreate yow.acf
    Comment leader for ./dce/utils/yow.acf   [NONE]   * 
    ./dce/utils/yow.acf,v  <--  /u0/rcs_trees/dce/rcs/#odexm000874/yow.acf
    initial revision: 1.1
    done

Comment leaders for .acf files is the same as for .idl; .sams is
same as Makefile.

[12/2/93 public]
This is true for 1.1i but not for dce1.0.3.  As long as 1.1 inherits the
dce1.0.3 configuration files this should be fine.

[1/13/94 public]

This was fixed when we set up the dce1.1 backing build by Mario Moreira.

The comment leaders added are: (*.acf; * ) (*.sams;# ).



CR Number                     : 9500
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : bld
Subcomponent Name             : 
Short Description             : make does not export all it should
Reported Date                 : 11/17/93
Found in Baseline             : 1.0.3
Found Date                    : 11/17/93
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : lbe/mk/osf.std.mk
Sensitivity                   : public

[11/17/93 public]

"build" does not export the .a, .h, and .idl files.  I'm using ODE 2.3
on a 486.  The directory is ./src/dce/utils.  This is in my sandbox.
I have the env variable MAKEINCLUDECOMPAT set to 1.

As an example, if I touch a .c file in my sandbox and run "build", it does
(output massaged for clarity):

    exec make MAKEFILE_PASS=AUTOGEN  _SUBMAKE_=_IS_SUBMAKE_  build_all
    exec make MAKEFILE_PASS=FIRST  _SUBMAKE_=_IS_SUBMAKE_  build_all
    exec make MAKEFILE_PASS=FIRSTA  _SUBMAKE_=_IS_SUBMAKE_  build_all
    exec make MAKEFILE_PASS=FIRSTB  _SUBMAKE_=_IS_SUBMAKE_  build_all
    exec make MAKEFILE_PASS=THIRD  _SUBMAKE_=_IS_SUBMAKE_  build_all
    exec make MAKEFILE_PASS=BASIC  _SUBMAKE_=_IS_SUBMAKE_  build_all
    /project/dce/build/dce1.0.3/tools/at386/macho/gcc ... lots of args ...
	/users/bowe/sbox/dce/src/dce/utils/dceaclimpl.c
    /project/dce/build/dce1.0.3/tools/at386/macho/ar crl libdceutils.a
	dceaclimpl.o
    /project/dce/build/dce1.0.3/tools/at386/macho/ranlib libdceutils.a

When I was using the build and make in the 1.0.3 tree, it would export
thing things to the right place.  (However, that one dumped core the last
few times I tried it. And I should be using ODE 2.3 make anyway.)

[1/13/94 public]
Ode2.3 make & build related: added second $ to export rules EXPFILES variable:
	${_EXPORT_TARGETS_:Mexport_*}: $${_EXPFILES_}
Tested on all platforms - dce1.1/ode2.3 setup work



CR Number                     : 9492
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : common makefiles
Short Description             : changes for ode2.3 make
Reported Date                 : 11/16/93
Found in Baseline             : 1.0.3
Found Date                    : 11/16/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : src/lbe/mk/osf.std.mk
Sensitivity                   : public

[11/16/93 public]
Damon Poole believes that the following changes must be made in osf.std.mk
to allow the ODE2.3 make build the install pass.  These changes have not
been tested:

Forwarded: Mon, 15 Nov 1993 10:58:43 -0500
Forwarded: "ratdce "
From damon@osf.org Mon Nov 15 10:35:38 1993
To: zeliff
Cc: tom, scholz, gm
Subject: double $$ strikes again
Date: Mon, 15 Nov 1993 10:35:36 -0500
From: Damon Poole <damon@osf.org>


Thanks Tom, for jarring my memory.

The osf.std.mk file needs $$ in front of the {_INSTALL_TARGET} line:

${_INSTALL_TARGETS_:Minstall_*}: $${_INSTALL_TARGET}

instead of

${_INSTALL_TARGETS_:Minstall_*}: ${_INSTALL_TARGET}

Damon@nomaD

[1/13/94 public]

The implementation of ODE2.3 make in  the DCE1.1 project has been completed
by Mario Moreira.



CR Number                     : 9235
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : bld
Subcomponent Name             : kload
Short Description             : kload is corrupted
Reported Date                 : 10/22/93
Found in Baseline             : 1.0.3
Found Date                    : 10/22/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : noship/file/HP800/kload
Sensitivity                   : public

[10/22/93 public]
The kload in the nightly builds (and in the backing tree) appears
to be corrupted.  I get memory faults when I execute.  A working
version can be found locally at OSF at kenmore:/u1/self_host/bin/kload.

[10/22/93 public]
Replaced the kload with the original binary from HP off the afs cell:

/afs/dce/project/dce/hp/dfs_tools/kload

[10/26/93 public]

Closed.

[10/26/93 public]

Unfortunately, have to reopen this one - something in the build or install
process must be corrupting this file.

[10/26/93 public]
It may be RCS.  I don't know that we've tried storing binaries under source
control although our RCS has had this functionality for some time.  I
suggest you get the ODE group involved.

[10/27/93 public]
It was the comment leader "NONE" which appeared to cause the problem.
I changed the comment leader to "BIN" as per the recommendation of Damon
Poole.
Gail used it to install & config a cell on 10-26-93.
I am marking this fixed.

[10/28/93 public]

Closed this defect.



CR Number                     : 8904
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : 
Short Description             : automated dce_config problems
Reported Date                 : 10/4/93
Found in Baseline             : 1.0.3
Found Date                    : 10/4/93
Severity                      : D
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : config/config.cmd
Sensitivity                   : public

[10/4/93 public]


There are some problems with using dce_config with the -c (command file)
and -e (environment file).  

(1) If you specify that a machine is to be both a DFS server and a DFS client, 
dce_config will configure the client before the server.  In the case in
which this is the first machine in the cell, there are numerous errors 
and the configuration can't be completed.  You must configure the server
before the client.  There is no way to specify the order when using the
automated files, in fact the order should be built in to the script.

(2) There should be comments in config.cmd so that 

	(a) one should not specify that the same machine be both a
	    security client and a security server

	(b) one should not specify that the same machine be both 
	    a CDS server and a CDS client.

(3) Configuring a DFS client has some inappropriate operations -- i.e. you
    are asked if you want to initilize LFS.  Also, if the machine is 
    already a DFS server kload all the kernel extensions are unnecessarily
    loaded a second time.

[10/04/93 public]
In response:

1) The systems are configured in the order in which they are given in 
   the command file.  You should config the server first, and then
   the dfs client.

   I should change the example file (and add a comment about the order).

2) Why would you specify that a machine should be both a client and a server?
   It seems obvious that this should not be done.
   I suppose dce_config can prevent you from doing both....

   A novice DCE administrator would be expected to use the menu interface.

3) The configuration of DFS remains unchanged from it original state.
   If it is doing redundant work or asking incorrect questions,
   I assume it has *always* done so.  

   I make no claims to improving DFS config. :-)

[10/14/93 public]
Improved the comments in config/config.cmd to prevent people from shooting
themself in the foot.  Moved DFS config commadn after server config.

The DFS configuration problems should be filed under a different CR#
(and assigned to rsarbo).



CR Number                     : 8696
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : Buildconf
Short Description             : Can't build in the backing build
Reported Date                 : 9/27/93
Found in Baseline             : 1.0.3
Found Date                    : 9/27/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce/Buildconf
Sensitivity                   : public

[9/27/93 public]
Can't build in the backing build.  The following things need to be added to
the dce/Buildconf file:

source_base, object_base, export_base, tools_base need to be directives,
not setenvs.

The following lines need to be added:
setenv SOURCEBASE ${source_base}
setenv OBJECTDIR ../obj/${target_machine}

[9/27/93 public]
Fixed.

[10/12/93 public]
Closed.



CR Number                     : 8678
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : rc_files
Short Description             : defunct obsolete rc_files
Reported Date                 : 9/24/93
Found in Baseline             : 1.0.3
Found Date                    : 9/24/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : src/rc_files/*
Sensitivity                   : public

[9/24/93 public]
The ODE2.1 rc_files should be defuncted from the DCE source tree.  They are
obsolete with the introduction of ODE2.3.  These are the files:

	rc_files/local
	rc_files/local.tmpl
	rc_files/setup
	rc_files/shared
	rc_files/shared.tmpl

[9/24/93 public]
Fixed.

[9/27/93 public]
Closed.



CR Number                     : 8662
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : 
Short Description             : Fix CACHEFILE in parse_ext
Reported Date                 : 9/22/93
Found in Baseline             : 1.0.3
Found Date                    : 9/22/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : lbe/mk/osf.parse_ext.mk
Sensitivity                   : public

[9/22/93 public]
Remove incorrect 'fix' to CACHEFILE value in osf.parse_ext.mk

[9/23/93 public]
Fixed.

[9/24/93 public]
Confirmed in nightly build of 9/23.  Closed.



CR Number                     : 8659
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : 
Short Description             : Incorrect OBJECTDIR value in
Buildconf.exp
Reported Date                 : 9/22/93
Found in Baseline             : 1.0.3
Found Date                    : 9/22/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce/Buildconf.exp
Sensitivity                   : public

[9/22/93 public]
The value of OBJECTDIR in Buildconf.exp incorrectly specifies an absolute
path.  It should be '../obj/${target_machine}'

[9/24/93 public]
Confirmed in nightly build of 9/23.  Closed.



CR Number                     : 8558
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : 
Short Description             : Assembler rules in wrong makefile
Reported Date                 : 9/7/93
Found in Baseline             : 1.0.3
Found Date                    : 9/7/93
Severity                      : D
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : osf.dce.mk, osf.obj.mk
Sensitivity                   : public

[9/7/93 public]
the assembler transslation rule (.s.o) is defined in osf.dce.mk.  This is 
the wrong makefile; it should be in osf.obj.mk..  On a related problem, there
seems to be inconsistent usage of ASFLAGS and ASMFLAGS.

[9/22/93 public]
Fixed and submitted.



CR Number                     : 8552
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : bld
Subcomponent Name             : 
Short Description             : Install HP/UX DFS kernel tools
Reported Date                 : 9/2/93
Found in Baseline             : 1.0.3
Found Date                    : 9/2/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : see below
Sensitivity                   : public

[9/2/93 public]
DFS on the HP/UX needs two files -- an object file and a command -- to be
tracked under source control and installed into the install tree during the
build.  Additionally, they need to be moved to appropriate places by
dce_config during a cell configuration:

File		Locations

kload		src: file/HP800/kload
		install: TBD
		configured: /opt/dcelocal/bin

unwind.o	src: file/HP800/unwind.o
		install: TBD
		configured: /opt/dcelocal/ext

Ron, are there any additional details?

[9/24/93 public]
The changes to dce_config went in long ago - when will this be
fixed?  It's a pain.

[10/5/93 public]
The following files where changed or created for this fix:

src/Makefile
src/noship/Makefile
src/noship/file/Makefile
src/noship/file/HP800/kload
src/noship/file/HP800/unwind.o

During the DATAFILES pass (a.k.a, FIRSTB) these files will be copied from
the source tree to the obj tree (obj/hp800/noship/file/..).  Then during
the install pass they will be copied to:
	<install>/opt/dce1.0/bin/kload
	<install>/opt/dce1.0/ext/unwind.o

[10/7/93 public]
Verified in nightly build of 10/6.



CR Number                     : 8471
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : build install_all
Short Description             : Tests are not installed in dcetest
Reported Date                 : 08/18/93
Found in Baseline             : 1.0.3
Found Date                    : 08/18/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : ./test/test.mk
Sensitivity                   : public

[08/18/93 public]

All functional and system tests are being installed in opt instead of
dcetest.

[08/18/93 public]

Uncommented TOSTAGE in ./test/test.mk.

[08/23/93 public]
Verified on nightly build of 08/20/93.



CR Number                     : 8336
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : bld
Subcomponent Name             : make
Short Description             : lbe/bin/make should not be built
on HP/UX
Reported Date                 : 7/22/93
Found in Baseline             : 1.0.3
Found Date                    : 7/22/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : src/Makefile
Sensitivity                   : public

[7/22/93 public]
The HP DFS code drop removed the conditional compilation of the DCE make.
This should be restored so that the setup pass does not attempt to build
lbe/bin/make.

[8/6/93 public]
Actually, HP simply changed the manner in which the build of 'make' is
conditionally controlled.  This fix changes the conditionality back to a
manner which is consistent with the rest of the makefile.

[8/9/93 public]
Adding a closing note.



CR Number                     : 8276
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : bld
Subcomponent Name             : gds
Short Description             : gdscmxl fails to build on 486
Reported Date                 : 7/14/93
Found in Baseline             : 1.0.3
Found Date                    : 7/14/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : directory/gds/oss/prod/cmxlup.c directory/gds/oss/prod/cmx.c
Sensitivity                   : public

[7/14/93 public]

The MIN macro is not defined when building gdscmxl on the 486 due to 
some hpux changes.

[9/2/93 public]
Cleaning up dead defects.



CR Number                     : 8271
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : bld
Subcomponent Name             : 
Short Description             : input file common_data_caux.c not found
Reported Date                 : 7/13/93
Found in Baseline             : 1.0.3
Found Date                    : 7/13/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : see below
Sensitivity                   : public

[7/13/93 public]

[ /file/config at 08:00 (AM) Tuesday ]
xlc -c       -D_BSD -DAFS_DEBUG -DDCESHARED_PATH=\"/opt/dce\" -DDCELOCAL_PATH=\"/opt/dcelocal\" -D_ALL_SOURCE -DAFS_AIX32_ENV -D_ALL_SOURCE -DAIX32   -I. -I/usr/users/devobj/sb/nb103_rios/src/file/config   -I/usr/users/devobj/sb/nb103_rios/export/rios/usr/include   common_data_saux.c
xlc: 1501-228 input file common_data_saux.c not found
*** Error code 252 (continuing)xlc -c       -D_BSD -DAFS_DEBUG -DDCESHARED_PATH=\"/opt/dce\" -DDCELOCAL_PATH=\"/opt/dcelocal\" -D_ALL_SOURCE -DAFS_AIX32_ENV -D_ALL_SOURCE -DAIX32   -I. -I/usr/users/devobj/sb/nb103_rios/src/file/config   -I/usr/users/devobj/sb/nb103_rios/export/rios/usr/include   common_data_caux.c
xlc: 1501-228 input file common_data_caux.c not found
*** Error code 252 (continuing)
`build_all' not remade because of errors

[8/23/93 public]
The short term fix is to set the environment variable IDL_GEN_AUX_FILES
for backwards compatibility with the old IDL.  The long term fix is
to modify the makefiles to remove dependencies on the aux files.  Lowered
priority, added jaffe to interest list.

[10/01/93 public]

I don't know why this is assigned to me, as I have no idea
what this problem is about.  I'm reassigning it to Ron, who
apparantly knows enought about it to determine whether this
is still a problem or not.

[10/01/93 public]
This is a build issue.  This environment variable needs to be
set in the rc_files or somewhere or the build will fail.
Don't know if this is an issue for the rc_files on the
final tapes.  Re-assigning to marcyw for final judgement.

[11/12/93 public]
I'm not sure what the original problem was but in any case it is fixed now.
IDL_GEN_AUX_FILES is set in the dce/Buildconf file.  If someone wishes to
remove dependencies on aux files then defects should be opened against the
appropriate component.

Defect marked as closed.



CR Number                     : 8162
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : bld
Subcomponent Name             : lbe
Short Description             : Make building of DCE 'make'
conditional
Reported Date                 : 6/16/93
Found in Baseline             : 1.0.3
Found Date                    : 6/16/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : Makeconf, Makefile
Sensitivity                   : public

[6/16/93 public]
The HP/UX port does not yet include the DCE make (lbe/bin/make).  Therefore
we need to make the building of the DCE make during the setup pass
conditional.  I expect that this will be an interim fix until the DCE make
is ported to HP/UX.

Here are the relevent diffs:

*** Makeconf    Wed Jun 16 09:50:09 1993
--- /project/dce/build/dce1.0.3i/src/Makeconf   Fri Jun 11 10:05:46 1993
***************
*** 249,258 ****
  #
  #            NO_THREADS=
  #
- #     Don't build the DCE make during the 'setup' pass
- #
- #          DONT_BUILD_DCE_MAKE=
- #
  # Project Specific Defines 
  # 
  # These are 'make' variable definitions that are used to evaluate
conditionals
--- 246,251 ----
***************
*** 426,432 ****
     NO_COMPAT_NCS15=
     NO_DFS=1
     NO_DISKLESS=
-    DONT_BUILD_DCE_MAKE=
  
  .if defined(REENTRANT_CLIB)
     TARGET_RF=-D_POSIX_REENTRANT_FUNCTIONS -D_REENTRANT
--- 419,424 ----



*** Makefile    Wed Jun 16 09:50:20 1993
--- /project/dce/build/dce1.0.3i/src/Makefile   Thu Jun 10 15:57:32 1993
***************
*** 127,139 ****
  NOSHIP = noship
  .endif
  
- # Defining DONT_BUILD_DCE_MAKE means that the 'lbe' directory is
- # not visited during the setup pass and that the DCE make is not
- # built.
- .if !defined (DONT_BUILD_DCE_MAKE)
- DCE_MAKE = lbe
- .endif
- 
  .ifdef DFS_ONLY
  BUILD_DCE = rpc
  BUILD_LIBDCE = 
--- 121,126 ----
***************
*** 142,148 ****
  BUILD_LIBDCE = libdce
  .endif
  
! SETUP_SUBDIRS= ${DCE_MAKE} time security ${NOSHIP} rpc directory
  
  EXPINC_SUBDIRS=${BUILD_THREADS} ${BUILD_DCE} ${BUILD_DFS} \
                 ${BUILD_DISKLESS}
--- 129,135 ----
  BUILD_LIBDCE = libdce
  .endif
  
! SETUP_SUBDIRS=lbe time security ${NOSHIP} rpc directory
  
  EXPINC_SUBDIRS=${BUILD_THREADS} ${BUILD_DCE} ${BUILD_DFS} \
                 ${BUILD_DISKLESS}

[6/16/93 public]
Fix submitted today.

[6/17/93 public]
It worked.



CR Number                     : 7996
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : osf.parse_ext.mk makefile
Short Description             : missing debug info and missing cleanup
Reported Date                 : 5/13/93
Found in Baseline             : 1.0.2
Found Date                    : 5/13/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : src/lbe/mk/osf.parse_ext.mk
Sensitivity                   : public

[5/13/93 public]
Norbert Marreck noticed the following problems with the osf.parse_ext.mk
file:

     1) in the stanza for the UNIQUELIST generation action, at
        approximately line 505, the redirection meta-symbol '>' should be
        change to '>>' so that the first line of debug info is not
        overwritten.
  
     2) in the same stanza, the following lines should be added after 
        approximately line 531:

        .if   !defined(DEBUG_UNIQUELIST)
            RM_IT != rm -f /tmp/uniquelist${DO_IT}
        .endif  # if !defined(DEBUG_UNIQUELIST) 
    
        In the absence of this change, repeated builds will load the /tmp
        directory with files with names like uniquelist1245.

[5/13/93 public]
Assigned to Chris Doherty.

[11/12/93 public]
Fix submitted to 1.1i.  As a point of information, this only occurs during
clobber_all in (I think) non-leaf subdirectories.  A good place to
reproduce the problem (and prove the solution) is rpc/idl .

[12/23/93 public]
Closed.  Fix is in 1.1.



CR Number                     : 7723
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : pmax
S/W Ref Platform              : osf1
Component Name                : bld
Subcomponent Name             : port_gd
Short Description             : building with NFS on OSF/1
Reported Date                 : 4/15/93
Found in Baseline             : 1.0.2
Found Date                    : 4/15/93
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.0.2
Affected File(s)              : yes
Sensitivity                   : public

[4/15/93 public]

A note from the FAQ about problems building DCE via NFS when
using OSF/1.  Doug I think this goes in the Porting Guide,
but if you think it should go in the RelNotes with the build
info, please change the CR to indicate that.


From: Weidong Wang from OSF <wwang>
To: melman
Subject: ODE: Building DCE with NFS
Date: Fri, 18 Dec 92 14:14:54 -0500


Howard:

	At this morning's SIG meeting, you mentioned that we are working on the
NFS mount DCE build, and the rats people are having some porblem with it in
GDS area.

	I don't know whether they have found the cause of the problem, but I
had some experience buildin gDCE with nfs mounted fs before. I sent out some
infomration back in the summer.

	If the problem is that in the middle of the build, it hangs in gdskiss,
then we are talking the same problem:

	There is a file lock in gdskiss (alos in one of the thread tests, if my
memory still serves, I was having the problem in both areas at that time). The
file lock is implemeted through lockd daemon. If the file is located on a NFS
mounted file system, the lockd will contact lockd and statd on the other
machine. If the other machine is not running lockd and/or statd, the local
lockd will hang forever. You cannot even kill the process since it is still in
the kernel mode.

	I was mounting an AIX partition on the sparc. Once I started lockd
and statd on the rs6000, everything works. Later I needed to mount a partition
from a PMAX running OSF/1, I could not do it since OSF/1 does not have lockd
and/or statd. I sent out a mail to dce-team about this, and got a reply from an
OSF/1 guy saying that he just found the same problem. Naturally I asked how he
solved the problem. The answer was he switched to local disk.


- - -------------------------------------------------------------
Weidong Wang                           wwang@osf.org
Systems Engineering, OSF               uunet!osf.org!wwang

[6/22/93 public]
Changed "Fix By Baseline" from 1.0.3 to 1.1.

[11/12/93 public]
This is in the porting guide -- section 1.3.1 of dce1.0.2 version.



CR Number                     : 7053
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : other
S/W Ref Platform              : other
Component Name                : bld
Subcomponent Name             : libdce/Makefile
Short Description             : rebuilds libdce on install pass
Reported Date                 : 1/28/93
Found in Baseline             : 1.0.2
Found Date                    : 1/28/93
Severity                      : D
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : libdce/Makefile
Sensitivity                   : public

[1/28/93 public]

Currently, the install pass seems to want to rebuild libdce.a even though
it's already built.

The following patch causes this not to happen:

I can submit this fix if you want..

: 1 %; diff -cw Makefile Makefile.~1~
*** Makefile	Thu Dec 10 18:39:45 1992
--- Makefile.~1~	Wed Dec  2 16:59:26 1992
***************
*** 160,166 ****
  # stanzas cleaner.
  #
  
- .if !defined(TOSTAGE)
  CONFIG_MKPATH        = ${MAKETOP}/config
  THREADS_MKPATH       = ${MAKETOP}/threads
  RPC_MKPATH           = ${MAKETOP}/rpc
--- 160,165 ----
***************
*** 650,655 ****
  .MAKE: ${LIBDCE_SUBLIB_SUBDIRS:S/^/subdir_/g}
  .ORDER: ${LIBDCE_SUBLIB_SUBDIRS:S/^/subdir_/g} libdce_1.a libdce_2.a
libdce_3.a libdce_4.a libdce_5.a libdce_6.a
  .ORDER: ${LIBDCE_SUBLIB_SUBDIRS:S/^/subdir_/g} libdce_1.o libdce_2.o
libdce_3.o libdce_4.o
- .endif /* !TOSTAGE */
  
  .include <${RULES_MK}>
--- 649,653 ----

[1/29/93 public]

Deferred to 1.0.3 by agreement with Rich Z.

[2/1/93 public]
Changed status to 'defer'.

[10/15/93 public]

As part of the OT aging process, I increased the priority from 3->1 and
re-assigneed it to me, since Chris has left the group.
This remains deferred to the 1.1 timeframe.

[7/1/94 public]
reassigned to annie

[7/11/94 public]
A word of warning!  This is a small point, but, the syntax that mentioned above

.if !defined(TOSTAGE)

should not be used to determine whether or not the user is running the
install pass.  The variable TOSTAGE is always defined in a sandbox environment.

The syntax (used in osf.rules.mk for the same purpose)
.if empty(.TARGETS:Minstall_*)
might be better.  You should also know that there is a performance hit
for using this type of pattern matching.  How much of a hit really depends on
how often you check for the install pass.

[9/7/94 public]
Closing this bug as it looked like the fix that sommerfeld has outlined
above is already in the src/libdce/Makefile.  I suppose this was probably
around the time when HP did its 'BIG' drop.  In addition, there is no
reference of TOSTAGE at all.  All is well.

thanks
annie



CR Number                     : 5572
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : threads
Short Description             : `genpath -Ixxxx` in CFLAGS.
Reported Date                 : 10/6/92
Found in Baseline             : 1.0.2b2
Found Date                    : 10/6/92
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b01
Affected File(s)              : threads/Makefile
Sensitivity                   : public

[10/6/92 public]

threads/Makefile has the following line:

CFLAGS=${${TARGET_MACHINE}_CFLAGS} -D_CMA_NOWRAPPERS \
	`genpath -I${TARGET_MACHINE}`

It might be faster (i.e., fewer invocations of genpath) and cleaner to
change this to:

CFLAGS=${${TARGET_MACHINE}_CFLAGS} -D_CMA_NOWRAPPERS

and add 

-I${TARGET_MACHINE}

to INCFLAGS

[10/8/92 public]
Good suggestion!  We'll check it out.

[12/11/92 public]
Bill,

   We've added some crude benchmarking ability to the common makefiles
to allow you to measure build times from subsystem to subsystem.
If you set the environment variable BENCHMARK_BUILD to 1, then you will see

[ rpc/kruntime at 10:30 (am) Wednesday ]
            ...
[ rpc/kdes at 10:45 (am) Wednesday ]

instead of

[ rpc/kruntime ]
            ...

[ rpc/kdes ]

   We appreciate the suggestion and unfortunatly have not been able to test
it.  However, we are hoping that this benchmarking (as minimal as it may be)
will help you in measuring other build optimizations you are working on.

[12/22/92 public]
I ran a couple of quick builds of threads (with and without the suggested fix)
and did not see any performance win (it was only a couple of seconds faster).
Thanks for the suggestion, though.

[12/22/92 public]

I'm changing the sense of this enhancement request to a "code cleanup"
request for 1.1 because I find it really disgusting to see the backquoted
genpath in the CFLAGS line in this makefile.

Reopened..

[9/24/93 public]
Changed to defect.  This should really be cleaned up.

[9/24/93 public]

Look again... I snuck the fix for this in rev 1.2.19.2 as part of the HP-UX
ref. platform merge.  Marked as "fix", like I should have three months ago.

[9/27/93 public]
Closed.



CR Number                     : 5095
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 5093
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : build
Short Description             : Export rule never fails, build continues
Reported Date                 : 8/18/92
Found in Baseline             : 1.0.2
Found Date                    : 8/18/92
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : lbe/mk/osf.std.mk
Sensitivity                   : public

[8/18/92 public]
Export rules will not return failure, and builds happily continue
after a failed export.

[12/23/93 public]
How to reproduce problem:
Let's assume we have a test directory called src/rat_test/test which
contains the following makefile:
	INCLUDES = joe.h
	.include <${RULES_MK}>

1.  change the permissions on the export directory to 555:
	chmod 555 <sbx>/export/at386/rat_test/test

2.  attempt to export the header file
	cd rat_test/test; build export_all

You should see this:

gemini src/test$ build export_all
relative path: ./test
cd ../../obj/at386/test
exec make MAKEFILE_PASS=AUTOGEN  _SUBMAKE_=_IS_SUBMAKE_  export_all
Export all targets = 
exec make MAKEFILE_PASS=FIRST  _SUBMAKE_=_IS_SUBMAKE_  export_all
rm -f /u2/zeliff/sb/dce11/export/at386/test/joe.h
makepath /u2/zeliff/sb/dce11/export/at386/test/joe.h
(cd ../../../src/test; tar cfh - joe.h) |  (cd
/u2/zeliff/sb/dce11/export/at386/test; tar xf -)
tar: cannot create joe.h: Permission denied
Export all targets = 
exec make MAKEFILE_PASS=THIRD  _SUBMAKE_=_IS_SUBMAKE_  export_all
Export all targets = 
Export all targets = 

Build does not detect the tar's failure.  This is an artifact of using
'tar' in a subprocess to perform exports -- the error condition tar returns
is lost in the subprocess.  This problem may be solved by moving away from
using tar for exports and switch back to 'cp'. 

Here's the relevant code from osf.std.mk:

.if !empty(_EXPORT_TARGETS_:Mexport_*)
${_EXPORT_TARGETS_:Mexport_*}: $${_EXPFILES_}

${_EXPORT_TARGETS_:Mexport_*:S/^export_//g:@_EXPORT_TARGET@${_EXPFILES_}@}:\
                $${.TARGET:T}
        -${RM} ${_RMFLAGS_} ${.TARGET}
        ${MAKEPATH} ${.TARGET}
.if defined(EXPORT_USING_SYMLINKS) 
        (cd ${.ALLSRC:H}; ${LN} -s `pwd`/${.TARGET:T} ${.TARGET})
.else
#.if defined(EXPORT_USING_TAR)
        (cd ${.ALLSRC:H}; ${TAR} cfh - ${.ALLSRC:T}) | \
        (cd ${.TARGET:H}; ${TAR} xf -)
#.else
#       ${CP} -p -R ${.ALLSRC} ${.TARGET}
#.endif
        ${.ALLSRC:T:@_EXPORT_TARGET@${_MAKE_EXPLINKS_}@}
.endif
.endif


I'm not sure why those code lines are commented out.

[1/6/94 public]
Upped the priority/severity on this.  I ran into a problem running the
export pass in a sandbox which was created on an NFS-mounted partition.
The problem is solved by switching to exports using 'cp'.

The only open issue is finding the correct default cp switches.  I suggest
implementing a CPFLAGS variable and setting it to some defaults.  If
someone is using the DCE build environment on a platform which requires
different switches then they could change the values on the fly.

Also, the above mentioned benefit of seeing export failures recognized by
'build' isn't trivial.

[02/22/94 public]
I added rules so that EXPORT_USING_CP now works.

[2/28/94 public]
Closed the defect after successful nightly builds.



