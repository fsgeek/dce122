CR Number                     : 12727
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 12644
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : gds
Subcomponent Name             : tsi
Short Description             : gds/tsi - Macros name MINand MAX  redefined.
Reported Date                 : 10/26/94
Found in Baseline             : 1.1
Found Date                    : 10/26/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1unintegrated
Fixed In Baseline             : 1.2.1
Affected File(s)              : Undetermined
Sensitivity                   : public

[10/26/94 public]

Error on RIOS(AIX) - warning on other platforms
Macros MIN and MAX redefined.

extract from file build.log.10-25-94 on vertigo in the directory

xlc -c     -DTHREADSAFE   -D_BSD -D_POSIX_SOURCE -DPCMX -DAIX -DNDS_LNK_ACCESS -D_ALL_SOURCE -DAIX32   -I. -I/u1/devobj/sb/nb_unintegrated_rios/src/directory/gds/tsi -I/project/dce/build/unintegrated-snap/src/directory/gds/tsi  -I../h -I/u1/devobj/sb/nb_unintegrated_rios/src/directory/gds/h -I/project/dce/build/unintegrated-snap/src/directory/gds/h -I/u1/devobj/sb/nb_unintegrated_rios/export/rios/usr/include -I/project/dce/build/unintegrated-snap/export/rios/usr/include   /project/dce/build/unintegrated-snap/src/directory/gds/tsi/cmxinet.c
"/project/dce/build/unintegrated-snap/src/directory/gds/tsi/cmxinet.h", line 57.0: 1506-213 (S) Macro name MIN cannot be redefined.
*** Error code 1

xlc -c     -DTHREADSAFE   -D_BSD -D_POSIX_SOURCE -DPCMX -DAIX -DNDS_LNK_ACCESS -D_ALL_SOURCE -DAIX32   -I. -I/u1/devobj/sb/nb_unintegrated_rios/src/directory/gds/tsi -I/project/dce/build/unintegrated-snap/src/directory/gds/tsi  -I../h -I/u1/devobj/sb/nb_unintegrated_rios/src/directory/gds/h -I/project/dce/build/unintegrated-snap/src/directory/gds/h -I/u1/devobj/sb/nb_unintegrated_rios/export/rios/usr/include -I/project/dce/build/unintegrated-snap/export/rios/usr/include   /project/dce/build/unintegrated-snap/src/directory/gds/tsi/cmxxup.c
"/project/dce/build/unintegrated-snap/src/directory/gds/tsi/cmxxso.h", line 54.0: 1506-213 (S) Macro name MIN cannot be redefined.
"/project/dce/build/unintegrated-snap/src/directory/gds/tsi/cmxxso.h", line 55.0: 1506-213 (S) Macro name MAX cannot be redefined.
*** Error code 1

[10/26/94 public]
Changed to UHYP per Maryanne Talpey.

[10/26/94 public]
This defect was caused by the submission for threads OT12644.  

We decided to document the fix here rather that include it in the
unintegrated tree. Here's the information for the fix, courtesy of Jochen
Keutel at SNI: 

The files affected:
./directory/gds/tsi/cmx.c	
./directory/gds/tsi/cmx2k.c	
./directory/gds/tsi/cmx3.c	
./directory/gds/tsi/cmx_tlv.c	
./directory/gds/tsi/cmxinet.c	
./directory/gds/tsi/cmxinet.h	
./directory/gds/tsi/cmxinup.c	
./directory/gds/tsi/cmxl.c	
./directory/gds/tsi/cmxliz.c	
./directory/gds/tsi/cmxlup.c	
./directory/gds/tsi/cmxmap.c	
./directory/gds/tsi/cmxopt.c	
./directory/gds/tsi/cmxsna.c	
./directory/gds/tsi/cmxtrace.c	
./directory/gds/tsi/cmxxad.c	
./directory/gds/tsi/cmxxrd.c	
./directory/gds/tsi/cmxxso.h	
./directory/gds/tsi/cmxxti.c	
./directory/gds/tsi/cmxxti.h	
./directory/gds/tsi/cmxxtr.c	
./directory/gds/tsi/cmxxup.c	
./directory/gds/tsi/emiface.c	


A typical diff is:

***** cmxl.c *****

10a11,13
>  * Revision 1.1.3.2  94/10/26  17:50:23  keutel
>  * 	OT 12727: MIN, MAX, TRUE, FALSE, doublequote problems
>  * 
101c104
< #include "cmx.h"
---
> #include <cmx.h>
103,105c106,108
< #include "cmxtrace.h"
< #include "cmxl.h"
< #include "cxioctl.h"
---
> #include <cmxtrace.h>
> #include <cmxl.h>
> #include <cxioctl.h>
107c110
< #include "cxmon.h"
---
> #include <cxmon.h>
109c112
< #include "sna_def.h"
---
> #include <sna_def.h>
111a115
> #ifndef MIN
112a117
> #endif
121a127
> #ifndef TRUE
122a129,130
> #endif
> #ifndef FALSE
123a132
> #endif

In other words, change:

	#include "a.h"

to

	#include <a.h>

and 

	#define MIN(a,b) ...

to

	#ifndef MIN
	#define MIN(a,b) ...
	#endif

[10/26/94 public]
Added "#if defined(_AIX) && !defined(MIN)" wrappers around the #define of
MIN and MAX in directory/gds/tsi/cmxinet.h and cmxxso.h so that the tree
will build.

[10/27/94 public]

extract from file build.log.10-26-94 on vertigo in the directory
/u1/RAT_tools/1_1unintegratedlogs/nb_unintegrated_rios

xlc -c     -DTHREADSAFE   -DSTDC_HEADERS=1 -DHAVE_STRING_H=1 -DREGEX_MALLOC -D_A
LL_SOURCE -D_ALL_SOURCE -DAIX32   -I. -I/u1/devobj/sb/nb_unintegrated_rios/src/d
irectory/gds/nds -I/project/dce/build/unintegrated-snap/src/directory/gds/nds  -
I../h -I/u1/devobj/sb/nb_unintegrated_rios/src/directory/gds/h -I/project/dce/bu
ild/unintegrated-snap/src/directory/gds/h -IFSF -I/u1/devobj/sb/nb_unintegrated_
rios/src/directory/gds/nds/FSF -I/project/dce/build/unintegrated-snap/src/direct
ory/gds/nds/FSF -I/u1/devobj/sb/nb_unintegrated_rios/export/rios/usr/include -I/
project/dce/build/unintegrated-snap/export/rios/usr/include   gnu_regex.c
"gnu_regex.c", line 253.0: 1506-213 (S) Macro name MAX cannot be redefined.
"gnu_regex.c", line 254.0: 1506-213 (S) Macro name MIN cannot be redefined.
"gnu_regex.c", line 256.0: 1506-213 (S) Macro name false cannot be redefined.
"gnu_regex.c", line 257.0: 1506-213 (S) Macro name true cannot be redefined.
"gnu_regex.c", line 2576.25: 1506-016 (E) Operands must be pointers to compatibl
e types.
"gnu_regex.c", line 2758.154: 1506-016 (E) Operands must be pointers to compatib
le types.
"gnu_regex.c", line 3282.25: 1506-016 (E) Operands must be pointers to compatibl
e types.
"gnu_regex.c", line 3787.255: 1506-016 (E) Operands must be pointers to compatib
le types.
"gnu_regex.c", line 3935.247: 1506-016 (E) Operands must be pointers to compatib
le types.
"gnu_regex.c", line 3988.247: 1506-016 (E) Operands must be pointers to compatib
le types.
"gnu_regex.c", line 4127.247: 1506-016 (E) Operands must be pointers to compatib
le types.
"gnu_regex.c", line 4140.247: 1506-016 (E) Operands must be pointers to compatib
le types.
*** Error code 1

[2/8/96 public]
Closed. GDS builds in 1.2.1 without errors.



CR Number                     : 12548
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486,hppa
S/W Ref Platform              : osf1,hpux
Component Name                : gds
Subcomponent Name             : admin
Short Description             : HYP: Admin scheme tests fail
Reported Date                 : 10/6/94
Found in Baseline             : 1.1
Found Date                    : 10/6/94
Severity                      : B
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b22
Affected File(s)              : gds/dsa/d26dsa.c
Sensitivity                   : public

[10/6/94 public]

The schema tests fail on both 486 and HPUX.  Binaries are from 10/05.

I will put the journal files and the test log in a directory in AFS named
after this OT.  It looks like the problems start when a store of the schema
fails:

**STORE SCHEMA***:
                                                                           
ERROR:
Scheme update failed, local scheme file will be created !
To continue press <CR> !
**EXIT***:

I think the journal file is misleading -- once an unexpected error occurs
the TET_filter tool interpretes all subsequent expected errors as
unexpected.  I *think* the only real error is with store schema.

[10/07/94 public]
Problem found: for multiple routing SVC has introduced a new delimiter:
a semicolon (;). What happens is:

gdsdsa calls dce_svc_routing to get the actual routing.
Then (line 1188, d26dsa.c) it does:

sprintf(cmd_ptr,"-w%s ",table.table[i]);

table.table[i] is (now - because of multiple routing)

FATAL:TEXTFILE.1.100:EXC%d;GOESTO:gds

Finally a system call is done (line 1205) with the command:

gdschdb /opt/dcelocal/var/directory/gds/dsa/dir1 /opt/dcelocal/var/directory/gds/adm/dsa/dir1 -wFATAL:TEXTFILE.1.100:/opt/dcelocal/var/directory/gds/adm/dsa/dir1/EXC%d;GOESTO:gds .....

(gdschdb is a shell script which calls gdsgendb; gdsgendb shall use
the same routing as the gdsdsa; because of that dce_svc_routings is called.)

So first 

gdschdb /opt/dcelocal/var/directory/gds/dsa/dir1 /opt/dcelocal/var/directory/gds/adm/dsa/dir1 -wFATAL:TEXTFILE.1.100:/opt/dcelocal/var/directory/gds/adm/dsa/dir1/EXC%d

is executed - this works fine; after that the shell tries to do

GOESTO:gds

and reports:

sh: GOESTO:gds : not found

The fix is to change from

sprintf(cmd_ptr,"-w%s ",table.table[i]);

to

sprintf(cmd_ptr,"-w\"%s\" ",table.table[i]);

Remark: Why did Rich Salz just take a ";" as delimiter?
Why didn't he take anything else???

[10/07/94 public]
Fix submitted.

[1/7/94 public]
Remark: Why does Jochen want something besides a ";" as delimiter?
Why does't he need more than one???

[10/11/94 public]
Verified via FVT.



CR Number                     : 12507
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gdssetup
Short Description             : HYP: gdssetup doesn't add user password to DSA
Reported Date                 : 10/5/94
Found in Baseline             : 1.1
Found Date                    : 10/5/94
Severity                      : B
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : gds/adm/setup/gsusteps.c
Sensitivity                   : public

[10/5/94 public]

gdssetup doesn't add the attribute "User password" to the DSA
object in the local DSA.

The background is: We have changed (for DIR.X 3.1) the initialization for the 
tetized tests from using gdsditadm batchfiles to using gdssetup
scripts. The described error leads to the fact that the shadow tests
do not run.

[10/05/94 public]
Fix submitted.

[10/12/94 public]
Fix verified on 486 and UX via FVT.



CR Number                     : 12490
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 12431
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : DSA
Short Description             : DSA core dump for acl example file
Reported Date                 : 10/4/94
Found in Baseline             : 1.1
Found Date                    : 10/4/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : gds/dsa/addob.c
Sensitivity                   : public

[10/4/94 public]

When running the gds example programs we found the following:

If you run the acl example the gdsdsa dumps core.
The reason is that a ACL name is not initialized.
The problem is fixed and tested in Munich.

The whole diff is:

<   else
<   {                                 /* enter empty name               */
<     (*pp_dnl)->d26_edname[0] = D2_EOS;
<   }

The problem is: The fix for 12431 isn't submitted yet to OSF because
the final testing has to be done. The acl program in the current
OSF version doesn't work. so it's difficult for OSF to verify
this problem.

[10/05/94 public]
Fix submitted.

[10/12/94 public]
Fix verified by FVT.  Well, not verified, but it didn't cause anything else
to die.  ;-)



CR Number                     : 12481
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 10474
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : svc
Short Description             : changes for multiple routing (SVC)
Reported Date                 : 10/4/94
Found in Baseline             : 1.1
Found Date                    : 10/4/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : gds/.profile.sh, gds/dsa/*.c,gds/bin/gdsstart.sh,gds/util/d27svc.c,gds/util/d27util.c
Sensitivity                   : public

[10/4/94 public]

According to Rich Salz it's possible now to use multiple routing.
(OT 10474). To use this gds would have to change the routing
specification in gds/.profile.sh and to delete
duplicated SVC calls in gds/dsa/*.c.
Rich Zeliff: If you know already that you will not allow
this submission please tell us that soon: Then we don't start
with touching the code. Otherwise the submit can be done on Thursday.

[10/05/94 public]
Fix submitted.

[10/12/94 public]
Closed.



CR Number                     : 12431
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : examples
Short Description             : HYP: errors for examples
Reported Date                 : 9/30/94
Found in Baseline             : 1.1
Found Date                    : 9/30/94
Severity                      : C
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : test/directory/xds/examples/*
Sensitivity                   : public

[9/30/94 public]

tests/directory/xds/examples/acl and acl2 produce different
results (erroneously), and occasionally crash (segv).
There are inconsistencies between souce-code and documentation.

[10/05/94 public]
Changed description. All examples have changed due to a change in
ds_bind (from DCE 1.0.3 to DCE 1.1). Also we made the documentation
and the examples in test/directory/xds/examples consistent.

These changes are tested and work now (before they didn't work).
But, anyway: The build of these examples is not activated
(in test/directory/xds/Makefile), and there is no testcase which
uses these sources.

[10/05/94 public]
Fix submitted. BTW: What means "HYP:" ???

[10/12/94 public]
Closed.  Examples aren't built, anyhow.



CR Number                     : 12407
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 12404
Project Name                  : dce
H/W Ref Platform              : i486,hppa
S/W Ref Platform              : osf1,hpux
Component Name                : gds
Subcomponent Name             : gdscp
Short Description             : gdscp test failures
Reported Date                 : 9/29/94
Found in Baseline             : 1.1
Found Date                    : 9/29/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : xds/h/mhsdef.h
Sensitivity                   : public

[9/29/94 public]
From NB0928 (BL19.1+):
Test case obj_compare_05v               ... failed
Test case obj_compare_06v               ... failed
Test case obj_create_08v                ... failed
Test case obj_create_09v                ... failed
Test case obj_create_10v                ... failed
Test case obj_create_11v                ... failed
Test case obj_list_02v                  ... failed
Test case obj_list_03v                  ... failed
Test case obj_modify_10v                ... failed
Test case obj_search_09v                ... failed
Test case obj_show_06v                  ... failed
Test cases for structured output        ... failed
--> Test cases: FAILED

Output from these testcases will be in a directory in the AFS cell which
will be named after this OT.

[09/29/94 public]
Fixed by submit for 12404. It was the same problem - MHS attributes.

[9/30/94 public]
Fixed verified by FVT.



CR Number                     : 12404
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : xds
Short Description             : mhs FVT fail
Reported Date                 : 9/29/94
Found in Baseline             : 1.1
Found Date                    : 9/29/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : xds/h/mhsdef.h
Sensitivity                   : public

[9/29/94 public]

The following mhs testcases fail since the last XDS drop:

add_entry23v
add_entry24v
add_entry25v
add_entry26v
read34v
read35v

[09/29/94 public]
Fix submitted. This fixes also 12407.

[9/30/94 public]
Fix verified via FVT



CR Number                     : 12360
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486,hppa
S/W Ref Platform              : osf1,hpux
Component Name                : gds
Subcomponent Name             : subtree
Short Description             : subtree admin tests fail
Reported Date                 : 9/27/94
Found in Baseline             : 1.1
Found Date                    : 9/27/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : gds/util/d27svc.c, gds/dsa/d26mutil.c
Sensitivity                   : public

[9/27/94 public]
Results from BL19:

SUBTREE_ADMIN TEST START
Failing cases:
         subt.3chmas
        subt.3sav_app
         subt.4chmas
        subt.4sav_app
         subt.10modall
        subt.1copy
        subt.2copy
        subt.3copy
        subt.4copy
         subt.5delst
         subt.31delst
         subt.32delst
         subt.33delst
         subt.1database
         subt.2database
         subt.3database
         subt.1chnam
         subt.2chnam
         subt.3chnam
         subt.4chnam
         subt.5chnam
         subt.1chmas
        subt.1svap
         subt.2chmas
        subt.2sav_app
Pass: 7
Fail: 25

Here's the journal:

0|1.10 10:11:47 19940927|User: zeliff (0) TCC Start, Command Line: /dcetest/dcelocal/test/tet/bin/tcc -e functional/directory/gds subtree 
20|/dcetest/dcelocal/test/tet/functional/directory/gds/tetexec.cfg 1|Config Start
30||TET_VERSION=1.10
30||TET_OUTPUT_CAPTURE=False
30||TET_RESCODES_FILE=tet_code
30||TET_EXEC_IN_PLACE=True
30||TET_TAPE_DEVICE=/dev/rmt0
40||Config End
70||"Start ALL gdsditadm (Subtree) TESTS"
10|0 /admin/subtree 10:11:47|TC Start, scenario ref 130-1
15|0 1.10 72|TCM Start
520|0 0 7103 1 1|SUBTREE_ADMIN TEST START
400|0 1 1 10:18:48|IC Start
200|0 1 10:18:48|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Save  DIT_5 (Default DSA)
520|0 1 7103 1 3|Command (echo ' n n' | gdssysadm -fs -d5 -M2 -n/tmp/dir_5) gave exit code 0
220|0 1 7 10:19:08|NORESULT
410|0 1 1 10:19:08|IC End
400|0 2 1 10:19:09|IC Start
200|0 1 10:19:09|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Save  DIT_2 (Specific DSA)
520|0 1 7103 1 3|Command (echo ' n n' | gdssysadm -fs -d2 -M2 -n/tmp/dir_2) gave exit code 0
220|0 1 7 10:19:28|NORESULT
410|0 2 1 10:19:28|IC End
400|0 3 1 10:19:28|IC Start
200|0 1 10:19:29|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN: TEST CASE subt.1svapnp
520|0 1 7103 1 3|Command (gdsditadm test_trace < /dcetest/dcelocal/test/tet/functional/directory/gds/ts/lib/subt.1svapnp) gave exit code 0
520|0 1 7103 1 4|TEST PASSED
220|0 1 0 10:21:59|PASS
410|0 3 1 10:21:59|IC End
400|0 4 1 10:21:59|IC Start
200|0 1 10:22:00|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  dir_5 (Default DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d5 -M2 -n/tmp/dir_5) gave exit code 0
220|0 1 7 10:22:18|NORESULT
410|0 4 1 10:22:19|IC End
400|0 5 1 10:22:19|IC Start
200|0 1 10:22:19|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN: TEST CASE subt.2svap
520|0 1 7103 1 3|Command (gdsditadm test_trace < /dcetest/dcelocal/test/tet/functional/directory/gds/ts/lib/subt.2svap) gave exit code 0
520|0 1 7103 1 4|TEST PASSED
220|0 1 0 10:24:44|PASS
410|0 5 1 10:24:44|IC End
400|0 6 1 10:24:45|IC Start
200|0 1 10:24:45|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  dir_5 (Default DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d5 -M2 -n/tmp/dir_5) gave exit code 0
220|0 1 7 10:25:05|NORESULT
410|0 6 1 10:25:05|IC End
400|0 7 1 10:25:05|IC Start
200|0 1 10:25:06|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN: TEST CASE subt.3svap
520|0 1 7103 1 3|Command (gdsditadm test_trace < /dcetest/dcelocal/test/tet/functional/directory/gds/ts/lib/subt.3svap) gave exit code 0
520|0 1 7103 1 4|TEST PASSED
220|0 1 0 10:27:23|PASS
410|0 7 1 10:27:23|IC End
400|0 8 1 10:27:23|IC Start
200|0 1 10:27:24|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  dir_5 (Default DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d5 -M2 -n/tmp/dir_5) gave exit code 0
220|0 1 7 10:27:43|NORESULT
410|0 8 1 10:27:43|IC End
400|0 9 1 10:27:43|IC Start
200|0 1 10:27:44|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN: TEST CASE subt.4svap
520|0 1 7103 1 3|Command (gdsditadm test_trace < /dcetest/dcelocal/test/tet/functional/directory/gds/ts/lib/subt.4svap) gave exit code 0
520|0 1 7103 1 4|TEST PASSED
220|0 1 0 10:30:03|PASS
410|0 9 1 10:30:03|IC End
400|0 10 1 10:30:03|IC Start
200|0 1 10:30:04|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  dir_5 (Default DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d5 -M2 -n/tmp/dir_5) gave exit code 0
220|0 1 7 10:30:23|NORESULT
410|0 10 1 10:30:23|IC End
400|0 11 1 10:30:23|IC Start
200|0 1 10:30:24|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN: TEST CASE subt.1sav_app
520|0 1 7103 1 3|Command (gdsditadm test_trace < /dcetest/dcelocal/test/tet/functional/directory/gds/ts/lib/subt.1sav_app) gave exit code 0
520|0 1 7103 1 4|TEST PASSED
220|0 1 0 10:32:48|PASS
410|0 11 1 10:32:48|IC End
400|0 12 1 10:32:49|IC Start
200|0 1 10:32:49|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  dir_5 (Default DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d5 -M2 -n/tmp/dir_5) gave exit code 0
220|0 1 7 10:34:11|NORESULT
410|0 12 1 10:34:12|IC End
400|0 13 1 10:34:12|IC Start
200|0 1 10:34:12|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN: TEST CASE subt.1svap
520|0 1 7103 1 3|Command (gdsditadm test_trace < /dcetest/dcelocal/test/tet/functional/directory/gds/ts/lib/subt.1svap) gave exit code 0
520|0 1 7103 1 4|RECEIVED ERROR: No connection to DSA/DUA-Cache available !
520|0 1 7103 1 5|TEST FAILED
220|0 1 1 10:34:19|FAIL
410|0 13 1 10:34:19|IC End
400|0 14 1 10:34:20|IC Start
200|0 1 10:34:20|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  dir_5 (Default DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d5 -M2 -n/tmp/dir_5) gave exit code 0
220|0 1 7 10:35:42|NORESULT
410|0 14 1 10:35:42|IC End
400|0 15 1 10:35:42|IC Start
200|0 1 10:35:43|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN: TEST CASE subt.2sav_app
520|0 1 7103 1 3|Command (gdsditadm test_trace < /dcetest/dcelocal/test/tet/functional/directory/gds/ts/lib/subt.2sav_app) gave exit code 0
520|0 1 7103 1 4|RECEIVED ERROR: No connection to DSA/DUA-Cache available !
520|0 1 7103 1 5|TEST FAILED
220|0 1 1 10:35:49|FAIL
410|0 15 1 10:35:49|IC End
400|0 16 1 10:35:49|IC Start
200|0 1 10:35:50|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  dir_5 (Default DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d5 -M2 -n/tmp/dir_5) gave exit code 0
220|0 1 7 10:36:12|NORESULT
410|0 16 1 10:36:12|IC End
400|0 17 1 10:36:13|IC Start
200|0 1 10:36:13|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN: TEST CASE subt.3sav_app
520|0 1 7103 1 3|Command (gdsditadm test_trace < /dcetest/dcelocal/test/tet/functional/directory/gds/ts/lib/subt.3sav_app) gave exit code 0
520|0 1 7103 1 4|RECEIVED ERROR: No connection to DSA/DUA-Cache available !
520|0 1 7103 1 5|TEST FAILED
220|0 1 1 10:36:20|FAIL
410|0 17 1 10:36:20|IC End
400|0 18 1 10:36:21|IC Start
200|0 1 10:36:21|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  dir_5 (Default DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d5 -M2 -n/tmp/dir_5) gave exit code 0
220|0 1 7 10:36:42|NORESULT
410|0 18 1 10:36:42|IC End
400|0 19 1 10:36:43|IC Start
200|0 1 10:36:43|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN: TEST CASE subt.4sav_app
520|0 1 7103 1 3|Command (gdsditadm test_trace < /dcetest/dcelocal/test/tet/functional/directory/gds/ts/lib/subt.4sav_app) gave exit code 0
520|0 1 7103 1 4|RECEIVED ERROR: No connection to DSA/DUA-Cache available !
520|0 1 7103 1 5|TEST FAILED
220|0 1 1 10:36:49|FAIL
410|0 19 1 10:36:50|IC End
400|0 20 1 10:36:51|IC Start
200|0 1 10:36:51|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  dir_5 (Default DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d5 -M2 -n/tmp/dir_5) gave exit code 0
220|0 1 7 10:37:12|NORESULT
410|0 20 1 10:37:12|IC End
400|0 21 1 10:37:13|IC Start
200|0 1 10:37:13|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN: TEST CASE subt.1copy
520|0 1 7103 1 3|Command (gdsditadm test_trace < /dcetest/dcelocal/test/tet/functional/directory/gds/ts/lib/subt.1copy) gave exit code 0
520|0 1 7103 1 4|RECEIVED ERROR: No connection to DSA/DUA-Cache available !
520|0 1 7103 1 5|TEST FAILED
220|0 1 1 10:37:20|FAIL
410|0 21 1 10:37:20|IC End
400|0 22 1 10:37:21|IC Start
200|0 1 10:37:21|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  dir_5 (Default DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d5 -M2 -n/tmp/dir_5) gave exit code 0
220|0 1 7 10:37:40|NORESULT
410|0 22 1 10:37:40|IC End
400|0 23 1 10:37:41|IC Start
200|0 1 10:37:41|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN: TEST CASE subt.2copy
520|0 1 7103 1 3|Command (gdsditadm test_trace < /dcetest/dcelocal/test/tet/functional/directory/gds/ts/lib/subt.2copy) gave exit code 0
520|0 1 7103 1 4|RECEIVED ERROR: No connection to DSA/DUA-Cache available !
520|0 1 7103 1 5|TEST FAILED
220|0 1 1 10:37:47|FAIL
410|0 23 1 10:37:47|IC End
400|0 24 1 10:37:48|IC Start
200|0 1 10:37:48|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  dir_5 (Default DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d5 -M2 -n/tmp/dir_5) gave exit code 0
220|0 1 7 10:38:06|NORESULT
410|0 24 1 10:38:06|IC End
400|0 25 1 10:38:07|IC Start
200|0 1 10:38:07|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN: TEST CASE subt.3copy
520|0 1 7103 1 3|Command (gdsditadm test_trace < /dcetest/dcelocal/test/tet/functional/directory/gds/ts/lib/subt.3copy) gave exit code 0
520|0 1 7103 1 4|RECEIVED ERROR: No connection to DSA/DUA-Cache available !
520|0 1 7103 1 5|TEST FAILED
220|0 1 1 10:38:13|FAIL
410|0 25 1 10:38:13|IC End
400|0 26 1 10:38:14|IC Start
200|0 1 10:38:14|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  dir_5 (Default DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d5 -M2 -n/tmp/dir_5) gave exit code 0
220|0 1 7 10:38:33|NORESULT
410|0 26 1 10:38:33|IC End
400|0 27 1 10:38:34|IC Start
200|0 1 10:38:34|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN: TEST CASE subt.4copy
520|0 1 7103 1 3|Command (gdsditadm test_trace < /dcetest/dcelocal/test/tet/functional/directory/gds/ts/lib/subt.4copy) gave exit code 0
520|0 1 7103 1 4|RECEIVED ERROR: No connection to DSA/DUA-Cache available !
520|0 1 7103 1 5|TEST FAILED
220|0 1 1 10:38:40|FAIL
410|0 27 1 10:38:40|IC End
400|0 28 1 10:38:41|IC Start
200|0 1 10:38:41|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  dir_5 (Default DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d5 -M2 -n/tmp/dir_5) gave exit code 0
220|0 1 7 10:39:03|NORESULT
410|0 28 1 10:39:03|IC End
400|0 29 1 10:39:04|IC Start
200|0 1 10:39:04|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN: TEST CASE  subt.5delst
520|0 1 7103 1 3|Command (gdsditadm test_trace <  /dcetest/dcelocal/test/tet/functional/directory/gds/ts/lib/subt.5delst) gave exit code 0
520|0 1 7103 1 4|RECEIVED ERROR: No connection to DSA/DUA-Cache available !
520|0 1 7103 1 5|TEST FAILED
220|0 1 1 10:39:10|FAIL
410|0 29 1 10:39:10|IC End
400|0 30 1 10:39:11|IC Start
200|0 1 10:39:11|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  dir_5 (Default DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d5 -M2 -n/tmp/dir_5) gave exit code 0
220|0 1 7 10:39:31|NORESULT
410|0 30 1 10:39:32|IC End
400|0 31 1 10:39:32|IC Start
200|0 1 10:39:33|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN: TEST CASE  subt.31delst
520|0 1 7103 1 3|Command (gdsditadm test_trace <  /dcetest/dcelocal/test/tet/functional/directory/gds/ts/lib/subt.31delst) gave exit code 0
520|0 1 7103 1 4|RECEIVED ERROR: No connection to DSA/DUA-Cache available !
520|0 1 7103 1 5|TEST FAILED
220|0 1 1 10:39:39|FAIL
410|0 31 1 10:39:39|IC End
400|0 32 1 10:39:40|IC Start
200|0 1 10:39:40|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN: TEST CASE  subt.bindcache
520|0 1 7103 1 3|Command (gdsditadm test_trace <  /dcetest/dcelocal/test/tet/functional/directory/gds/ts/lib/subt.bindcache) gave exit code 0
520|0 1 7103 1 4|TEST PASSED
220|0 1 0 10:39:47|PASS
410|0 32 1 10:39:47|IC End
400|0 33 1 10:39:48|IC Start
200|0 1 10:39:48|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN: TEST CASE  subt.32delst
520|0 1 7103 1 3|Command (gdsditadm test_trace <  /dcetest/dcelocal/test/tet/functional/directory/gds/ts/lib/subt.32delst) gave exit code 0
520|0 1 7103 1 4|RECEIVED ERROR: Appending of subtree failed !
520|0 1 7103 1 5|RECEIVED ERROR: Saving of subtree failed (SEARCH operation) !
520|0 1 7103 1 6|RECEIVED ERROR: Invalid Directory-ID !
520|0 1 7103 1 7|TEST FAILED
220|0 1 1 10:40:13|FAIL
410|0 33 1 10:40:13|IC End
400|0 34 1 10:40:14|IC Start
200|0 1 10:40:14|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN: TEST CASE  subt.bindcache
520|0 1 7103 1 3|Command (gdsditadm test_trace <  /dcetest/dcelocal/test/tet/functional/directory/gds/ts/lib/subt.bindcache) gave exit code 0
520|0 1 7103 1 4|TEST PASSED
220|0 1 0 10:40:21|PASS
410|0 34 1 10:40:21|IC End
400|0 35 1 10:40:22|IC Start
200|0 1 10:40:22|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN: TEST CASE  subt.33delst
520|0 1 7103 1 3|Command (gdsditadm test_trace <  /dcetest/dcelocal/test/tet/functional/directory/gds/ts/lib/subt.33delst) gave exit code 0
520|0 1 7103 1 4|RECEIVED ERROR: No connection to DSA/DUA-Cache available !
520|0 1 7103 1 5|TEST FAILED
220|0 1 1 10:40:28|FAIL
410|0 35 1 10:40:28|IC End
400|0 36 1 10:40:29|IC Start
200|0 1 10:40:29|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  dir_5 (Default DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d5 -M2 -n/tmp/dir_5) gave exit code 0
220|0 1 7 10:40:51|NORESULT
410|0 36 1 10:40:51|IC End
400|0 37 1 10:40:52|IC Start
200|0 1 10:40:52|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  dir_2 (Specific DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d2 -M2 -n/tmp/dir_2) gave exit code 0
220|0 1 7 10:41:14|NORESULT
410|0 37 1 10:41:15|IC End
400|0 38 1 10:41:15|IC Start
200|0 1 10:41:16|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN: TEST CASE  subt.1database
520|0 1 7103 1 3|Command (gdsditadm test_trace <  /dcetest/dcelocal/test/tet/functional/directory/gds/ts/lib/subt.1database) gave exit code 0
520|0 1 7103 1 4|RECEIVED ERROR: No connection to DSA/DUA-Cache available !
520|0 1 7103 1 5|TEST FAILED
220|0 1 1 10:41:21|FAIL
410|0 38 1 10:41:22|IC End
400|0 39 1 10:41:22|IC Start
200|0 1 10:41:22|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN: TEST CASE  subt.2database
520|0 1 7103 1 3|Command (gdsditadm test_trace <  /dcetest/dcelocal/test/tet/functional/directory/gds/ts/lib/subt.2database) gave exit code 0
520|0 1 7103 1 4|RECEIVED ERROR: No connection to DSA/DUA-Cache available !
520|0 1 7103 1 5|RECEIVED ERROR: No connection to DSA/DUA-Cache available !
520|0 1 7103 1 6|RECEIVED ERROR: No connection to DSA/DUA-Cache available !
520|0 1 7103 1 7|RECEIVED ERROR: No connection to DSA/DUA-Cache available !
520|0 1 7103 1 8|RECEIVED ERROR: No connection to DSA/DUA-Cache available !
520|0 1 7103 1 9|RECEIVED ERROR: No connection to DSA/DUA-Cache available !
520|0 1 7103 1 10|RECEIVED ERROR: Object (or superior object) doesn't exist !
520|0 1 7103 1 11|TEST FAILED
220|0 1 1 10:42:22|FAIL
410|0 39 1 10:42:22|IC End
400|0 40 1 10:42:23|IC Start
200|0 1 10:42:23|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN: TEST CASE  subt.3database
520|0 1 7103 1 3|Command (gdsditadm test_trace <  /dcetest/dcelocal/test/tet/functional/directory/gds/ts/lib/subt.3database) gave exit code 0
520|0 1 7103 1 4|RECEIVED ERROR: No connection to DSA/DUA-Cache available !
520|0 1 7103 1 5|TEST FAILED
220|0 1 1 10:42:30|FAIL
410|0 40 1 10:42:30|IC End
400|0 41 1 10:42:31|IC Start
200|0 1 10:42:32|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Save  DIT_5 (Default DSA)
520|0 1 7103 1 3|Command (echo ' n n' | gdssysadm -fs -d5 -M2 -n/tmp/dir_DIT5) gave exit code 0
220|0 1 7 10:42:52|NORESULT
410|0 41 1 10:42:52|IC End
400|0 42 1 10:42:52|IC Start
200|0 1 10:42:53|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Save  DIT_2 (Specific DSA)
520|0 1 7103 1 3|Command (echo ' n n' | gdssysadm -fs -d2 -M2 -n/tmp/dir_DIT2) gave exit code 0
220|0 1 7 10:43:13|NORESULT
410|0 42 1 10:43:13|IC End
400|0 43 1 10:43:14|IC Start
200|0 1 10:43:14|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN: TEST CASE  subt.1chnam
520|0 1 7103 1 3|Command (gdsditadm test_trace <  /dcetest/dcelocal/test/tet/functional/directory/gds/ts/lib/subt.1chnam) gave exit code 0
520|0 1 7103 1 4|RECEIVED ERROR: No connection to DSA/DUA-Cache available !
520|0 1 7103 1 5|RECEIVED ERROR: No connection to DSA/DUA-Cache available !
520|0 1 7103 1 6|RECEIVED ERROR: Changing of name failed (SEARCH operation) !
520|0 1 7103 1 7|TEST FAILED
220|0 1 1 10:43:47|FAIL
410|0 43 1 10:43:47|IC End
400|0 44 1 10:43:48|IC Start
200|0 1 10:43:48|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  DIT_2 (Specific DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d2 -M2 -n/tmp/dir_DIT2) gave exit code 0
220|0 1 7 10:44:09|NORESULT
410|0 44 1 10:44:10|IC End
400|0 45 1 10:44:10|IC Start
200|0 1 10:44:10|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  DIT_5 (Default DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d5 -M2 -n/tmp/dir_DIT5) gave exit code 0
220|0 1 7 10:44:28|NORESULT
410|0 45 1 10:44:28|IC End
400|0 46 1 10:44:29|IC Start
200|0 1 10:44:29|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN: TEST CASE  subt.2chnam
520|0 1 7103 1 3|Command (gdsditadm test_trace <  /dcetest/dcelocal/test/tet/functional/directory/gds/ts/lib/subt.2chnam) gave exit code 0
520|0 1 7103 1 4|RECEIVED ERROR: No connection to DSA/DUA-Cache available !
520|0 1 7103 1 5|RECEIVED ERROR: No connection to DSA/DUA-Cache available !
520|0 1 7103 1 6|RECEIVED ERROR: No connection to DSA/DUA-Cache available !
520|0 1 7103 1 7|RECEIVED ERROR: Changing of name failed (SEARCH operation) !
520|0 1 7103 1 8|TEST FAILED
220|0 1 1 10:45:06|FAIL
410|0 46 1 10:45:06|IC End
400|0 47 1 10:45:06|IC Start
200|0 1 10:45:07|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  DIT_2 (Specific DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d2 -M2 -n/tmp/dir_DIT2) gave exit code 0
220|0 1 7 10:45:29|NORESULT
410|0 47 1 10:45:29|IC End
400|0 48 1 10:45:30|IC Start
200|0 1 10:45:30|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  DIT_5 (Default DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d5 -M2 -n/tmp/dir_DIT5) gave exit code 0
220|0 1 7 10:45:47|NORESULT
410|0 48 1 10:45:47|IC End
400|0 49 1 10:45:48|IC Start
200|0 1 10:45:48|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN: TEST CASE  subt.3chnam
520|0 1 7103 1 3|Command (gdsditadm test_trace <  /dcetest/dcelocal/test/tet/functional/directory/gds/ts/lib/subt.3chnam) gave exit code 0
520|0 1 7103 1 4|RECEIVED ERROR: No connection to DSA/DUA-Cache available !
520|0 1 7103 1 5|RECEIVED ERROR: No connection to DSA/DUA-Cache available !
520|0 1 7103 1 6|RECEIVED ERROR: Changing of name failed (SEARCH operation) !
520|0 1 7103 1 7|TEST FAILED
220|0 1 1 10:46:20|FAIL
410|0 49 1 10:46:20|IC End
400|0 50 1 10:46:20|IC Start
200|0 1 10:46:21|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  DIT_2 (Specific DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d2 -M2 -n/tmp/dir_DIT2) gave exit code 0
220|0 1 7 10:46:40|NORESULT
410|0 50 1 10:46:41|IC End
400|0 51 1 10:46:41|IC Start
200|0 1 10:46:41|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  DIT_5 (Default DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d5 -M2 -n/tmp/dir_DIT5) gave exit code 0
220|0 1 7 10:47:00|NORESULT
410|0 51 1 10:47:00|IC End
400|0 52 1 10:47:00|IC Start
200|0 1 10:47:01|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN: TEST CASE  subt.4chnam
520|0 1 7103 1 3|Command (gdsditadm test_trace <  /dcetest/dcelocal/test/tet/functional/directory/gds/ts/lib/subt.4chnam) gave exit code 0
520|0 1 7103 1 4|RECEIVED ERROR: No connection to DSA/DUA-Cache available !
520|0 1 7103 1 5|TEST FAILED
220|0 1 1 10:47:07|FAIL
410|0 52 1 10:47:07|IC End
400|0 53 1 10:47:08|IC Start
200|0 1 10:47:08|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  DIT_2 (Specific DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d2 -M2 -n/tmp/dir_DIT2) gave exit code 0
220|0 1 7 10:48:27|NORESULT
410|0 53 1 10:48:27|IC End
400|0 54 1 10:48:28|IC Start
200|0 1 10:48:28|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  DIT_5 (Default DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d5 -M2 -n/tmp/dir_DIT5) gave exit code 0
220|0 1 7 10:48:47|NORESULT
410|0 54 1 10:48:47|IC End
400|0 55 1 10:48:48|IC Start
200|0 1 10:48:48|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN: TEST CASE  subt.5chnam
520|0 1 7103 1 3|Command (gdsditadm test_trace <  /dcetest/dcelocal/test/tet/functional/directory/gds/ts/lib/subt.5chnam) gave exit code 0
520|0 1 7103 1 4|RECEIVED ERROR: No connection to DSA/DUA-Cache available !
520|0 1 7103 1 5|TEST FAILED
220|0 1 1 10:48:55|FAIL
410|0 55 1 10:48:56|IC End
400|0 56 1 10:48:56|IC Start
200|0 1 10:48:56|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  DIT_2 (Specific DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d2 -M2 -n/tmp/dir_DIT2) gave exit code 0
220|0 1 7 10:50:15|NORESULT
410|0 56 1 10:50:15|IC End
400|0 57 1 10:50:16|IC Start
200|0 1 10:50:16|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  DIT_5 (Default DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d5 -M2 -n/tmp/dir_DIT5) gave exit code 0
220|0 1 7 10:50:34|NORESULT
410|0 57 1 10:50:35|IC End
400|0 58 1 10:50:35|IC Start
200|0 1 10:50:36|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN: TEST CASE  subt.1chmas
520|0 1 7103 1 3|Command (gdsditadm test_trace <  /dcetest/dcelocal/test/tet/functional/directory/gds/ts/lib/subt.1chmas) gave exit code 0
520|0 1 7103 1 4|RECEIVED ERROR: No connection to DSA/DUA-Cache available !
520|0 1 7103 1 5|TEST FAILED
220|0 1 1 10:50:42|FAIL
410|0 58 1 10:50:42|IC End
400|0 59 1 10:50:42|IC Start
200|0 1 10:50:43|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  DIT_2 (Specific DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d2 -M2 -n/tmp/dir_DIT2) gave exit code 0
220|0 1 7 10:51:02|NORESULT
410|0 59 1 10:51:02|IC End
400|0 60 1 10:51:03|IC Start
200|0 1 10:51:03|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  DIT_5 (Default DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d5 -M2 -n/tmp/dir_DIT5) gave exit code 0
220|0 1 7 10:51:20|NORESULT
410|0 60 1 10:51:20|IC End
400|0 61 1 10:51:21|IC Start
200|0 1 10:51:21|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN: TEST CASE  subt.2chmas
520|0 1 7103 1 3|Command (gdsditadm test_trace <  /dcetest/dcelocal/test/tet/functional/directory/gds/ts/lib/subt.2chmas) gave exit code 0
520|0 1 7103 1 4|RECEIVED ERROR: No connection to DSA/DUA-Cache available !
520|0 1 7103 1 5|TEST FAILED
220|0 1 1 10:51:28|FAIL
410|0 61 1 10:51:28|IC End
400|0 62 1 10:51:28|IC Start
200|0 1 10:51:29|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  DIT_2 (Specific DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d2 -M2 -n/tmp/dir_DIT2) gave exit code 0
220|0 1 7 10:51:46|NORESULT
410|0 62 1 10:51:46|IC End
400|0 63 1 10:51:47|IC Start
200|0 1 10:51:47|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  DIT_5 (Default DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d5 -M2 -n/tmp/dir_DIT5) gave exit code 0
220|0 1 7 10:52:05|NORESULT
410|0 63 1 10:52:06|IC End
400|0 64 1 10:52:06|IC Start
200|0 1 10:52:06|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN: TEST CASE  subt.3chmas
520|0 1 7103 1 3|Command (gdsditadm test_trace <  /dcetest/dcelocal/test/tet/functional/directory/gds/ts/lib/subt.3chmas) gave exit code 0
520|0 1 7103 1 4|RECEIVED ERROR: No connection to DSA/DUA-Cache available !
520|0 1 7103 1 5|TEST FAILED
220|0 1 1 10:52:12|FAIL
410|0 64 1 10:52:13|IC End
400|0 65 1 10:52:13|IC Start
200|0 1 10:52:13|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  DIT_2 (Specific DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d2 -M2 -n/tmp/dir_DIT2) gave exit code 0
220|0 1 7 10:52:32|NORESULT
410|0 65 1 10:52:32|IC End
400|0 66 1 10:52:33|IC Start
200|0 1 10:52:33|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  DIT_5 (Default DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d5 -M2 -n/tmp/dir_DIT5) gave exit code 0
220|0 1 7 10:52:50|NORESULT
410|0 66 1 10:52:50|IC End
400|0 67 1 10:52:51|IC Start
200|0 1 10:52:51|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN: TEST CASE  subt.4chmas
520|0 1 7103 1 3|Command (gdsditadm test_trace <  /dcetest/dcelocal/test/tet/functional/directory/gds/ts/lib/subt.4chmas) gave exit code 0
520|0 1 7103 1 4|RECEIVED ERROR: No connection to DSA/DUA-Cache available !
520|0 1 7103 1 5|TEST FAILED
220|0 1 1 10:52:58|FAIL
410|0 67 1 10:52:58|IC End
400|0 68 1 10:52:58|IC Start
200|0 1 10:52:59|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  DIT_2 (Specific DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d2 -M2 -n/tmp/dir_DIT2) gave exit code 0
220|0 1 7 10:53:16|NORESULT
410|0 68 1 10:53:17|IC End
400|0 69 1 10:53:17|IC Start
200|0 1 10:53:17|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  DIT_5 (Default DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d5 -M2 -n/tmp/dir_DIT5) gave exit code 0
220|0 1 7 10:53:35|NORESULT
410|0 69 1 10:53:35|IC End
400|0 70 1 10:53:36|IC Start
200|0 1 10:53:36|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN: TEST CASE  subt.10modall
520|0 1 7103 1 3|Command (gdsditadm test_trace <  /dcetest/dcelocal/test/tet/functional/directory/gds/ts/lib/subt.10modall) gave exit code 0
520|0 1 7103 1 4|RECEIVED ERROR: No connection to DSA/DUA-Cache available !
520|0 1 7103 1 5|TEST FAILED
220|0 1 1 10:53:42|FAIL
410|0 70 1 10:53:42|IC End
400|0 71 1 10:53:43|IC Start
200|0 1 10:53:43|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  dir_5 (Default DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d5 -M2 -n/tmp/dir_5) gave exit code 0
220|0 1 7 10:54:02|NORESULT
410|0 71 1 10:54:02|IC End
400|0 72 1 10:54:03|IC Start
200|0 1 10:54:03|TP Start
520|0 1 7103 1 2|SUBTREE_ADMIN:  Restore  dir_2 (Specific DSA)
520|0 1 7103 1 3|Command (echo ' n' | gdssysadm -fr -d2 -M2 -n/tmp/dir_2) gave exit code 0
220|0 1 7 10:54:20|NORESULT
410|0 72 1 10:54:21|IC End
520|0 0 7103 1 1|SUBTREE_ADMIN TEST ENDED
80|0 0 10:54:23|TC End
70||"FINISHED ALL gdsditadm (Subtree) TETS"
900|10:54:23|TCC End

[09/28/94 public]
Rich: Do you have the output of gdsdirinfo?
And: If a gds process (gdscstub, gdssstub, gdsdsa, gdscache, gdsipcchk)
dies it either dumps the core to the directories where you find
the logfiles or it writes some fatal error logging and exits "normally".
Have you checked if there is either a core or a non-empty EXC_* file
in any of the logdirs?
I'll kick of the subtree tests on HP now.

[09/28/94 public]
OK - reproduced. the DSA on dir.id 5 dumped core.
Stack is:

 0 rpc_ss_mem_release@libdce + 0x00000008 (hp-ux export stub)
 1 ptdexc_mutex_lock@libdce + 0x00000034 (0x400b4f18, 0, 0x1, 0x10)
 2 rpc_ss_free@libdce + 0x000000c4 (0, 0, 0x7b034ae4, 0x7afe0190)
 3 d26_m08_set_logging + 0x0000018c (0x7b034908, 0x7b03490c, 0x7b03490c, 0x40001c78)
 4 main + 0x00000d9c (0x8, 0x7b034658, 0, 0)

I guess that rpc_ss_free was called with parameter NULL and doesn't like that.
I'll check that.

[09/29/94 public]
The stack seems to be corrupted. rpc_ss_free doesn't call
ptdexc_mutex_lock. 
I'll debug this now.

[09/29/94 public]
Problem found: subtree tests perform "restore data" between the
tests. Each "restore data" restarts the DSA. For this restart the current
routing is taken (by calling dce_svc_routings) and with this
routing the DSA is restarted. This mechanism doesn't work correctly.
Actually - if you restart data only once it works. But if you
do this 6 times it dumps core. The reason is that every restart loses
one of the 5 severity loggings - so after the 5th restore a NULL
pointer is got from dce_svc_routings and passed to rpc_ss_free.
Will be fixed soon.

[09/30/94 public]
Fix submitted.

[10/3/94 public]
Fix verified by FVT.



CR Number                     : 12278
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gds_sec
Short Description             : The masterbind mechanism does not work with DCE authentication
Reported Date                 : 9/21/94
Found in Baseline             : 1.1
Found Date                    : 9/21/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : gds/gds_sec/gds_sec_rgy.c
					     gds/gds_sec/dsa_sec_int.c
					     gds/gds_sec/dua_sec.c
					     gds/gds_sec/dua_sec_int.c
					     gds/h/gds_sec_int.h
Sensitivity                   : public

[9/21/94 public]

If DCE authentication is in use, the masterbind to a given DSA fails. Reason is
the incorrect handling of the ERA X500_DSA_Admin on both - DUA and DSA - sides.
Changes are required in the file gds/gds_sec/gds_sec_rgy.c



CR Number                     : 12277
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gds_sec
Short Description             : Additional trace is  still active
Reported Date                 : 9/21/94
Found in Baseline             : 1.1
Found Date                    : 9/21/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : gds/h/gds_sec_util.h
Sensitivity                   : public

[9/21/94 public]

The  additional  trace feature in gds_sec is still present .  It causes unnecessary
getenv() calls and therefore impacts performance.
There is only one source file affected : gds/h/gds_sec_util.h



CR Number                     : 12198
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : xds/xom
Short Description             : various XDS/XOM bugs
				             found in interworking testing
Reported Date                 : 9/15/94
Found in Baseline             : 1.1b17
Found Date                    : 9/15/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : see below
Sensitivity                   : public

[9/15/94 public]

The solutions for these bugs have already been found. A brief
description of the error is followed by the file that must change.

om_copy sometimes fails
xom/omCopy.c

null dname not accepted
xds/dsUtils.c

SUBMIT_PERMISSIONS OID not in accordance with XDS API Standard Issue 1
xds/h/xdsmdup.h
xds/h/xdsiapl.h

om_put sometimes fails with INSERT_AT_END
xds/dsPPut.c



CR Number                     : 12176
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : svc
Short Description             : wrong incore tables in several gds components
Reported Date                 : 9/14/94
Found in Baseline             : 1.1
Found Date                    : 9/14/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : see below
Sensitivity                   : public

[9/14/94 public]

There are several problems concerning incore tables:

1.) gdsstep links the incore table just for gdsstep (gstmsg.c).
    But it should link dcegdsmsg.c - to have all messages from gds.
    (gdsstep should be able to process gds binary logfiles even with
    a wrong NLSPATH set.)
2.) gdscp links the incore table just for gdscp (gcpmsg.c) - which means
    a definition:

	dce_msg_table_t gds_msg_table[221]

    But it includes dcegdsmsg.h before gcpmsg.h - dcegdsmsg.h declares

	extern dce_msg_table_t gds_msg_table[502]

    This will cause problems (probably core dumps) in dce_msg_define_msg_table.
3.) The same problem occurs in gdssetup.
4.) All other gds processes don't use incore tables at all.

We would like to make a general fix for all of these problems:

- generate only one common gds incore table - dcegdsmsg.c
- don't generate gcpmsg.c, gcpmsg.h, ... (files for gdscp, gdssetup, gdsstep)
- include just dcegdsmsg.h in the corrosponding c-files
- put dcegdsmsg.c into libd27.a which is part of libdce
- add the call of dce_msg_define_msg_table to d27_001_svc_init
  (gds/util/d27svc.c) which is called by all gds processes
- don't link gcpmsg.c to gdscp, don't link gstmsg.c to gdsstep, don't link 
  gsumsg.c to gdssetup - just link libdce which contains dcegdsmsg.c.

This would mean changes for:

gds/sams/Makefile
gds/step/Makefile
gds/step/gstep.c
gds/adm/setup/Makefile
gds/adm/setup/gsuset.c
gds/gdscp/gci/Makefile
gds/gdscp/gci/gcicmdframe.c
gds/util/Makefile
gds/util/d27svc.c
gds/dua/d21log.c
gds/adm/usradmin/d20distcmd.c

(The last two files don't call d27_001_svc_init - they call dce_svc_register
directly.)



CR Number                     : 12151
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : xds
Short Description             : missing example program
Reported Date                 : 9/13/94
Found in Baseline             : 1.1b17
Found Date                    : 9/13/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : test/directory/xds/examples/Makefile
					     .../examples/acl2.c acl2.h
Sensitivity                   : public

[9/13/94 public]
The example file for the XDS/XOM convenience library was not submitted
to OSF. This missing example file acl2.c together with its header file
acl2.h is discussed in the Application Development Guide.

As the example programs are not compiled during build
(the test/directory/xds/Makefile does not set SUBDIRS = example)
this will not affect the OSF nightly build.

Question for OSF: Should the SUBDIRS = example be activated
in this Makefile ?

[9/14/94 public]
We would prefer at this time to not activate SUBDIRS = example.  We do not
want to take any risks at all with the build given how late we are in the
project.



CR Number                     : 12097
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : database
Short Description             : non-root users can remove gds database
Reported Date                 : 9/8/94
Found in Baseline             : 1.1
Found Date                    : 9/8/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : gds/bin/gdsconf.sh
Sensitivity                   : public

[9/8/94 public]

The gds databases are located in

/opt/dcelocal/var/adm/directory/gds/cache/CACHEDIR<dir-id>

and

/opt/dcelocal/var/directory/gds/dsa/dir<dir-id>

Both directories are created when a dir-id is configured.
This is done by gdsconf.
gdsconf sets the permissions to these directories explicitely to 777.
This means that every user can remove the database.
This is not acceptable.

[09/12/94 public]
Fix submitted.



CR Number                     : 12068
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : 
Short Description             : Unable to find include file 'dce/pthread.h'
Reported Date                 : 9/7/94
Found in Baseline             : 1.1
Found Date                    : 9/7/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : directory/gds/step/gstep.h
Sensitivity                   : public

[9/7/94 public]


HOST= zagreb (HP), vienna (AT486), tailor (RIOS)

Here is the extract from the build log:

[ /directory/gds/step at 21:58 (PM) Tuesday ]
makepath step/. && cd step &&  exec make MAKEFILE_PASS=BASIC     build_all
step: created directory
c89 -c    -D_SHARED_LIBRARIES -DTHREADSAFE    -D__hppa -Dhp9000s800 -Dhp9000s700 -D__hp9000s800 -D__hp9000s700 -DHPUX -D__hpux -Dunix +DA1.0 -D_HPUX_SOURCE    -I. -I/u3/devobj/sb/nb_ux/src/directory/gds/step -I/project/dce/build/dce1.1-snap/src/directory/gds/step  -I../h -I/u3/devobj/sb/nb_ux/src/directory/gds/h -I/project/dce/build/dce1.1-snap/src/directory/gds/h -I../cisam/isam -I/u3/devobj/sb/nb_ux/src/directory/gds/cisam/isam -I/project/dce/build/dce1.1-snap/src/directory/gds/cisam/isam -I/u3/devobj/sb/nb_ux/export/hp800/usr/include -I/project/dce/build/dce1.1-snap/export/hp800/usr/include    /project/dce/build/dce1.1-snap/src/directory/gds/step/gstep.c
gstep.h: 76: Unable to find include file 'dce/pthread.h'.
*** Error code 1
c89 -c    -D_SHARED_LIBRARIES -DTHREADSAFE    -D__hppa -Dhp9000s800 -Dhp9000s700 -D__hp9000s800 -D__hp9000s700 -DHPUX -D__hpux -Dunix +DA1.0 -D_HPUX_SOURCE    -I. -I/u3/devobj/sb/nb_ux/src/directory/gds/step -I/project/dce/build/dce1.1-snap/src/directory/gds/step  -I../h -I/u3/devobj/sb/nb_ux/src/directory/gds/h -I/project/dce/build/dce1.1-snap/src/directory/gds/h -I../cisam/isam -I/u3/devobj/sb/nb_ux/src/directory/gds/cisam/isam -I/project/dce/build/dce1.1-snap/src/directory/gds/cisam/isam -I/u3/devobj/sb/nb_ux/export/hp800/usr/include -I/project/dce/build/dce1.1-snap/export/hp800/usr/include    /project/dce/build/dce1.1-snap/src/directory/gds/step/gstisam.c
gstep.h: 76: Unable to find include file 'dce/pthread.h'.
*** Error code 1

[9/7/94 public]
#include <dce/pthread.h> should have been <pthread.h>.

[09/07/94 public]
thread.h is already included in all c-files in gds/step.
Why have you added this line to gstep.h??

[9/7/94 public]
When I removed the #include <svcimpl.h>, I got a compiler error
about not knowing about pthread_t (the svc prolog needs it).

Ah, just noticed this. Perhaps it has something to do with:
    #ifdef THREADSAFE
    #include <pthread.h>
    #endif
Is THREADSAFE set?

Do whatever is right.  (I won't feel hurt if you rip apart the few thing
I did in there...)



CR Number                     : 12055
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 12049
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gdsstep
Short Description             : changes due to dce_svc_log_get_arg
Reported Date                 : 9/6/94
Found in Baseline             : 1.1
Found Date                    : 9/6/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : gds/step/gstep.c, gds/step/gstutil.c, gds/step/gstep.h, gds/step/Makefile
Sensitivity                   : public

[9/6/94 public]

John Bowe wants to remove dce_svc_log_get_arg from SVC. So
we have to change gdsstep.

[09/06/94 public]
Submitted. Stupid fix, anyway.

[9/6/94 public]
Reworked gds_dce_svc_log_get_arg() to not access the innards of the svc
handle.  Instead, use the prolog and explicitly pass the arg index.
It was only a few lines of code.

The "right" way for all this to fit together is to use the method that
svcdumplog uses to process the args.  dce_svc_get_log() returns the prolog,
which has a vector of the args, which one can access directly and more
efficiently.  The doc also mentions this (hopefully).

[09/07/94 public]
Reopened. There is a problem in gstep.c - just a wrong fix by John Bowe.
He and me agree how to fix that.

[09/07/94 public]
Submitted.



CR Number                     : 12018
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : mavrostest
Short Description             : mavros tests not built
Reported Date                 : 9/2/94
Found in Baseline             : 1.1
Found Date                    : 9/2/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : test/directory/gds/mavrostest/Makefile
Sensitivity                   : public

[9/2/94 public]

[ /test/directory/gds/mavrostest at 03:21 (AM) Friday ]

/project/dce/build/dce1.1-snap/src/test/directory/gds/mavrostest/test_mvr.c:58: test.h: No such file or directory
*** Error code 1

/project/dce/build/dce1.1-snap/src/test/directory/gds/mavrostest/import1.c:38: test.h: No such file or directory
*** Error code 1

[09/02/94 public]
Submitted.



CR Number                     : 11991
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : mavrostest
Short Description             : remove the installation of three files in mavrostest
Reported Date                 : 9/1/94
Found in Baseline             : 1.1
Found Date                    : 9/1/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : test/directory/gds/mavrostest/Makefile
Sensitivity                   : public

[9/1/94 public]

The following files in mavrostest are installed but not used:

import1.h
test.h

They shouldn't be installed.

[09/01/94 public]
Makefile submitted.



CR Number                     : 11988
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : mx300
S/W Ref Platform              : sinix
Component Name                : gds
Subcomponent Name             : gdssetup
Short Description             : gdssetup dumps core on SVR4
Reported Date                 : 9/1/94
Found in Baseline             : 1.1
Found Date                    : 9/1/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : gds/adm/setup/gsusteps.c
Sensitivity                   : public

[9/1/94 public]

gdssetup dumps core on SVR4 because some illegal pointers are freed.
The problem is fixed and tested here in Munich.
We'd like to submit this even if it works on the reference
platforms of DCE1.1 - the code was just wrong.

[09/01/94 public]
Fix submitted.

[9/6/94 public]
Closed.



CR Number                     : 11971
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : 
Short Description             : do not use #line directive
Reported Date                 : 8/31/94
Found in Baseline             : 1.1b16
Found Date                    : 8/31/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : see: comments
Sensitivity                   : public

[8/31/94 public]
Files should not use #line compiler directive.  Many gds files have
"#line 1" after the RCS log, which screws up the line numbering, making it
more difficult to isolate problems: the debugger does not give the "real"
line number of the file.  Same thing with serviceability.

[08/31/94 public]
Many gds files is: 101 files:

gds/adm/delupd/d20atcmp.c
gds/adm/delupd/d20cupcach.c
gds/cache/d22attrmsg.c
gds/cache/d22cachact.c
gds/cache/d22cache.c
gds/cache/d22cadd.c
gds/cache/d22ccomp.c
gds/cache/d22cffkt.c
gds/cache/d22cfilter.c
gds/cache/d22checkp.c
gds/cache/d22cicmp.c
gds/cache/d22clist.c
gds/cache/d22comp.c
gds/cache/d22convdn.c
gds/cache/d22cread.c
gds/cache/d22crmove.c
gds/cache/d22csrch.c
gds/cache/d22delobj.c
gds/cache/d22distcmd.c
gds/cache/d22errhdl.c
gds/cache/d22evapar.c
gds/cache/d22filter.c
gds/cache/d22getoffs.c
gds/cache/d22hash.c
gds/cache/d22iinsobj.c
gds/cache/d22insobj.c
gds/cache/d22mdelobj.c
gds/cache/d22reorg.c
gds/cache/d22srchobj.c
gds/cache/d22tentry.c
gds/cache/d22term.c
gds/cache/d22vrfydn.c
gds/ipc/d23abandon.c
gds/ipc/d23abort.c
gds/ipc/d23bind.c
gds/ipc/d23cattach.c
gds/ipc/d23cdetach.c
gds/ipc/d23dirinfo.c
gds/ipc/d23distcmd.c
gds/ipc/d23event.c
gds/ipc/d23heap.c
gds/ipc/d23invoke.c
gds/ipc/d23ipcchk.c
gds/ipc/d23ipcinfo.c
gds/ipc/d23ipcinit.c
gds/ipc/d23ipcstat.c
gds/ipc/d23regproc.c
gds/ipc/d23result.c
gds/ipc/d23retbuf.c
gds/ipc/d23sattach.c
gds/ipc/d23sdetach.c
gds/ipc/d23spstat.c
gds/ipc/d23svcserv.c
gds/ipc/d23svrinfo.c
gds/ipc/d23unbind.c
gds/ipc/d23usrcred.c
gds/ipc/d23util.c
gds/ipc/d23waitin.c
gds/ipc/d23waitrs.c
gds/nds/AT386/ndsreg.c
gds/nds/AT386/ndsxtimap.c
gds/nds/HP800/ndsreg.c
gds/nds/HP800/ndsxtimap.c
gds/nds/RIOS/ndsreg.c
gds/nds/RIOS/ndsxtimap.c
gds/nds/SVR4/ndsreg.c
gds/nds/SVR4/ndsxtimap.c
gds/nds/ndscheck.c
gds/nds/ndscompil.c
gds/nds/ndscompup.c
gds/nds/ndsgetopt.c
gds/nds/ndslog.c
gds/nds/ndsmatch.c
gds/nds/ndsselect.c
gds/nds/ndsshmatt.c
gds/nds/ndssockmap.c
gds/nds/ndsusrmap.c
gds/osiadr/cmposiaddr.c
gds/osiadr/convert.c
gds/osiadr/decodensap.c
gds/osiadr/decodeoct.c
gds/osiadr/decodepsap.c
gds/osiadr/encodensap.c
gds/osiadr/encodeoct.c
gds/osiadr/encodepsap.c
gds/osiadr/gennsap.c
gds/osiadr/hdladmpsap.c
gds/osiadr/ldformats.c
gds/osiadr/osidat.c
gds/stub/d25aaction.c
gds/stub/d25conv.c
gds/stub/d25cup.c
gds/stub/d25evmgt.c
gds/stub/d25iaction.c
gds/stub/d25ievent.c
gds/stub/d25raction.c
gds/stub/d25revent.c
gds/stub/d25signal.c
gds/stub/d25stub.c
gds/stub/d25uaction.c
gds/util/d27signal.c

The critical lines are:

#if !defined UNDER_DEVELOPMENT
#line 1
#endif

[09/01/94 public]
The reason for using #line 1 is, that some error reports are using the
__LINE__ number to report the place, where the error occured.
As the ODE history and copyright headers are different at SNI, OSF and 
other companies, this does not help our developers, when they get the error 
message, that something went wrong e.g. in line 327. So we set the
line numbering to 1 at a fix base.

We had only 2 alternatives, each of them is not very practible:
	- put the RCS history to the end of the file
or
	- teach ODE to keep the history in the RCS file and not in the checked
	  out source file. Display history on demand with e.g. blog .

(my third alternative: the debugger should interprete #line directives ;-) )

[09/06/94 public]
Fix submitted.



CR Number                     : 11933
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : dua
Short Description             : problems with bind to local DSA
Reported Date                 : 8/29/94
Found in Baseline             : 1.1
Found Date                    : 8/29/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : gds/dua/d21bind.c
Sensitivity                   : public

[8/29/94 public]

If you do the following:

- configure dir. id. as Cleint/Server
- enter a DSA into the cache with DSA-Type "local"
- wait 60 seconds
- use gdsditadm: bind to default DSA, add /C=dd

If you add after this /C=dd/O=a you'll get the message:

Object already exists.

The reason for this is that you haven't entered any default DSA into
the cache but bind to the default DSA.
The DUA reads the default DSA's from the cache; if no
default DSA is there it binds to the local DSA.
But it doesn't put the name of the local DSA into the internal
DUA bind table - it puts "". This gives the following problem:

If you add /C=dd/O=a then first the object /C=dd is read from the bind DSA.
If it is there the DUA compares the master knowledge attribute
of this entry with the name of the DSA in the bind table.
In the case mentioned above the name in the bind table is "",
the master knowledge attribute is the real name of the DSA.
So the DUA thinks that it has to add the object twice: Once to
the bind DSA, once to the DSA from the master knowledge attribute.
Because this is the same DSA it adds the same object twice to 
the same DSA - so you get: Object already exists.

The fix is: If no default DSA is in the cache and a bind to the local DSA
is performed: read the name of the local DSA from cache and put it
into the internal DUA bind table.

[09/06/94 public]
Submitted.



CR Number                     : 11932
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gdsditadm
Short Description             : diplay of OR-Address doesn't work
Reported Date                 : 8/29/94
Found in Baseline             : 1.1
Found Date                    : 8/29/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : gds/adm/admin/d20mhs_msk.c
Sensitivity                   : public

[8/29/94 public]

If you add an object with an OR-Address attribute and 
display it with gdsditadm you get incorrect values.
I.e.: If you choose the "mnenomic type" for an OR-Address
and fill just "Country Name = de,  ADMD Name = dbp":
You get a "Country Name = d, ADMD Name = d".

This seems to be an admin issue because all XDS tests concerning
MHS attributes work fine.

[09/06/94 public]
Submitted.



CR Number                     : 11903
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gdssetup
Short Description             : max_psap doesn't work
Reported Date                 : 8/26/94
Found in Baseline             : 1.1
Found Date                    : 8/26/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : max_psap
Sensitivity                   : public

[8/26/94 public]

Just splitted OT 11797: max_psap is a different problem than 
the sv_domdef_inter* ones.

[08/26/94 public]
Fix submitted: line in max_psap was too long.

[8/30/94 public]
Fix verified by FVT.



CR Number                     : 11882
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : ipc logging
Short Description             : d23_msgrcv traces wrong message
Reported Date                 : 8/25/94
Found in Baseline             : 1.1
Found Date                    : 8/25/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : gds/ipc/d23util.c
Sensitivity                   : public

[8/25/94 public]

d23_msgrcv traces the message into a logfile.
But the wrong message is traced.

[08/25/94 public]
Fix submitted.

[8/29/94 public]
Verified that the fix didn't break anythign.



CR Number                     : 11880
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 12200
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : gdscp
Short Description             : gdscp core dumps during gds_sec
Reported Date                 : 8/25/94
Found in Baseline             : 1.1
Found Date                    : 8/25/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : gds/gds_sec/gds_sec_rgy.c
Sensitivity                   : public

[8/25/94 public]
Information placed in afs cell.  Binaries from NB0823.

[08/25/94 public]
I've installed bl-16 on my HP.
While starting CDS :

Setting ACLs for all new namespace entries...
1994-08-25-17:41:37.437+02:00I----- cdsclerk(15709) ERROR cds general clerk_bind.c 490 0x4003dd20
Routine rpc_binding_set_auth_info(3rpc) failed : status = 336760839.
1994-08-25-17:41:40.938+02:00I----- cdsclerk(15709) ERROR cds general clerk_bind.c 490 0x4003dd20
Routine rpc_binding_set_auth_info(3rpc) failed : status = 336760839.
1994-08-25-17:41:44.389+02:00I----- cdsclerk(15709) ERROR cds general clerk_bind.c 490 0x4003dd20
Routine rpc_binding_set_auth_info(3rpc) failed : status = 336760839.
1994-08-25-17:41:47.774+02:00I----- cdsclerk(15709) ERROR cds general clerk_bind.c 490 0x4003dd20
Routine rpc_binding_set_auth_info(3rpc) failed : status = 336760839.
ERROR: Server not found in Kerberos database (dce / krb)
Unable to bind to object /.:/sec
ERROR:   acl_edit - modifying ACLs on security objects in the name space.
           Message from acl_edit:
           
        Press <RETURN> to continue, CTRL-C to exit: 

dce_login cell_admin -dce- works, but

cdscp

cdscp> show obj /.:/*
1994-08-25-17:52:59.792+02:00I----- cdsclerk(15709) ERROR cds general clerk_bind.c 490 0x4003dd20
Routine rpc_binding_set_auth_info(3rpc) failed : status = 336760839.
1994-08-25-17:53:00.192+02:00I----- cdsclerk(15709) ERROR cds general clerk_bind.c 490 0x4003dd20
Routine rpc_binding_set_auth_info(3rpc) failed : status = 336760839.
1994-08-25-17:53:00.609+02:00I----- cdsclerk(15709) ERROR cds general clerk_bind.c 490 0x4003dd20
Routine rpc_binding_set_auth_info(3rpc) failed : status = 336760839.
1994-08-25-17:53:01.013+02:00I----- cdsclerk(15709) ERROR cds general clerk_bind.c 490 0x4003dd20
Routine rpc_binding_set_auth_info(3rpc) failed : status = 336760839.
cdscp> quit

cdscp> show cell
                        SHOW
                        CELL   /.../c=ie/o=digital
                          AT   1994-08-25-17:53:26
1994-08-25-17:53:27.149+02:00I----- cdsclerk(15709) ERROR cds general clerk_bind.c 490 0x4003dd20
Routine rpc_binding_set_auth_info(3rpc) failed : status = 336760839.
1994-08-25-17:53:27.503+02:00I----- cdsclerk(15709) ERROR cds general clerk_bind.c 490 0x4003dd20
Routine rpc_binding_set_auth_info(3rpc) failed : status = 336760839.
1994-08-25-17:53:27.866+02:00I----- cdsclerk(15709) ERROR cds general clerk_bind.c 490 0x4003dd20
Routine rpc_binding_set_auth_info(3rpc) failed : status = 336760839.
1994-08-25-17:53:28.251+02:00I----- cdsclerk(15709) ERROR cds general clerk_bind.c 490 0x4003dd20
Routine rpc_binding_set_auth_info(3rpc) failed : status = 336760839.
Error on entity: /.../c=ie/o=digital
Server not found in Kerberos databaseFunction: dnsReadAttrValue

cdscp> quit

So I can't test gds_sec. Sorry.
What I can see in your core is the stack:

 0 d21_3_read@libdce + 0x7ed53014 (0, 0x10, 0, 0)
 1 free@libc + 0x00000224 (0, 0, 0xa, 0)

I don't believe that free calls d21_3_read.
I think it's still a security problem - but how to proofe?

[09/01/94 public]
Fix submitted. This fix is - for us - a workaround.
See 11989 for details.

[09/01/94 public]
Reopened. Mike Burati said (in OT 11989) that 
we should do

x500_dn_attr[0].attr_value.tagged_union.printstring = NULL;

instead of

unsigned char           era_buffer[2024];
x500_dn_attr[0].attr_value.tagged_union.printstring = era_buffer;







what we have submitted today.

[09/01/94 public]
Submitted again.

[9/2/94 public]
Still dumps.  Here's the TET output:

  # ./local_TET.admin gds_sec
  
    TET - Test Environment Toolkit for testing GDS/Admin on a local machine
  
    TestSuite = gds_sec
  
  
  Password must be changed!
  journal file name is: /dcetest/dcelocal/test/tet/functional/directory/gds/results/0001e/journal
  /bin/ksh: 20339 Bus error(coredump)
  /bin/ksh: 20351 Bus error(coredump)
  /bin/ksh: 20555 Memory fault(coredump)
  /bin/ksh: 20668 Memory fault(coredump)
  /bin/ksh: 20823 Bus error(coredump)
  /bin/ksh: 20986 Memory fault(coredump)

Here's the backtrace:    

>t
 0 free@libc + 0x00000008 (hp-ux export stub)
 1 cma_lib_free@libdce + 0x00000284 (0x40097bd0, 0x3, 0, 0x100000)
 2 ptdexc_mutex_unlock@libdce + 0x00000034 (0x40097bd0, 0x4, 0x15, 0x7b033a38)
 3 rpc_ss_free@libdce + 0x000000e8 (0x40013148, 0x6463652d, 0x300a1b08, 0x101a10c)
 4 cma_lib_free@libdce + 0x00000148 (0x400c2db8, 0x400bf338, 0x401022c8, 0x7b03f430)
 5 rca_site_resolve_update@libdce + 0x000007b8 (0x7b03f430, 0x400c3018, 0x7b039ecc, 0x7b03aaf8)
 6 sec_rgy_site_bind_update@libdc + 0x00000088 (0x7b039ed0, 0x7b03f430, 0x7b039ecc, 0x7b03aaf8)
 7 sec_rgy_site_open_update@libdc + 0x00000068 (0x7b039ed0, 0x7b039ecc, 0x7b03aaf8, 0x7afd64a0)
 8 gds_sec__conf_target@libdce + 0x00001c4c (0x4016f2e4, 0x7b037d70, 0x7b035ba4, 0x4016f328)
 9 dua_sec__map_target_name@libdc + 0x00000dbc (0x7b030005, 0x7b035c54, 0x7b03000b, 0x4016f2e4)
10 dua_init_sec_ctx@libdce + 0x00000e44 (0x40090005, 0x4016f2e4, 0x7b03000b, 0x4016f328)
11 d21_bh1_exec_bind@libdce + 0x000007ac (0x7b035a60, 0x2e340001, 0x69013835, 0x3003736e)
12 d21_b03_ref_bind@libdce + 0x000000ac (0x7b035158, 0x4016f2e4, 0x7b03598c, 0x7b035404)
13 d21_handle_ref@libdce + 0x00000768 (0x7b035424, 0x7b0358d4, 0x7b0353e8, 0x7b035158)
14 d21_3_read@libdce + 0x00000c1c (0x7b035160, 0x8, 0x7b035180, 0x40097ce8)
15 ds_read@libdce + 0x00000d44 (0x40099114, 0x40097b0c, 0x400fb6f4, 0x400fb668)
16 gc_t__perform_read + 0x00000088 (0x40099114, 0x40097b0c, 0x400fb6f4, 0x400fb668)
17 gc_t_read + 0x00000750 (0x40097a78, 0x3, 0, 0x7b034f01)
18 gc_i__x500obj_show + 0x000000c8 (0, 0x4000efd0, 0x4, 0x7b034ec0)
19 gc_i_x500obj + 0x0000015c (0, 0x4000efd0, 0x4, 0x7b034ec0)
20 Tcl_Eval + 0x000009f0 (0x4000efd0, 0x7b034b5d, 0x10050, 0x2b0000)
21 Tcl_EvalCmd + 0x000001a8 (0, 0x4000efd0, 0x2, 0x7b034c38)
22 Tcl_Eval + 0x000009f0 (0x4000efd0, 0x400964b0, 0x400fb668, 0)
23 InterpProc + 0x00000530 (0x40096448, 0x4000efd0, 0, 0x7b034938)
24 Tcl_Eval + 0x000009f0 (0x4000efd0, 0x7b0345dd, 0, 0x3)
25 Tcl_EvalCmd + 0x000001a8 (0, 0x4000efd0, 0x2, 0x7b0346b8)
26 Tcl_Eval + 0x000009f0 (0x4000efd0, 0x7b03439e, 0x7b0344c0, 0x7b034460)
27 Tcl_CatchCmd + 0x000001a8 (0, 0x4000efd0, 0x3, 0x7b034478)
28 Tcl_Eval + 0x000009f0 (0x4000efd0, 0x400971bc, 0x7b034040, 0)
29 ExprLex + 0x00000744 (0x4000efd0, 0x7b034160, 0x7b034040, 0x7b0341d8)
30 ExprGetValue + 0x00000080 (0x4000efd0, 0x7b034160, 0xffffffff, 0x7b034040)
31 ExprTopLevel + 0x00000158 (0x4000efd0, 0x400971bb, 0x7b034040, 0x7b033a38)
32 Tcl_ExprBoolean + 0x00000040 (0x4000efd0, 0x400971bb, 0x7b033ff8, 0x7b033ee0)
33 Tcl_IfCmd + 0x000001c4 (0, 0x4000efd0, 0x5, 0x7b033ef8)
34 Tcl_Eval + 0x000009f0 (0x4000efd0, 0x400966e0, 0xa6f, 0)
35 Tcl_EvalFile + 0x0000088c (0x4000efd0, 0x7b033006, 0x400012bc, 0x1)
36 gc_i__check_interactive_mode + 0x00000284 (0x4000efd0, 0x40000002, 0x7b0338bc, 0)
37 main + 0x00000144 (0x2, 0x7b0338bc, 0, 0)
>q
Really quit? y

The cell, however, is healthy:

cdscp> show cell
                        SHOW
                        CELL   /.../c=ie/o=digital
                          AT   1994-09-02-10:00:46
              Namespace Uuid = 43cda9c6-c657-11cd-b177-0800092543e8
          Clearinghouse Uuid = 431fd13e-c657-11cd-b177-0800092543e8
          Clearinghouse Name = /.../c=ie/o=digital/prague_ch
                Replica Type =   Master  
                       Tower = ncacn_ip_tcp:130.105.5.41[]
                       Tower = ncadg_ip_udp:130.105.5.41[]

[09/02/94 public]
Rich: do you have time for switching on dua logging and run the gds_sec
tests again?

(export SVC_GDS_DBG="gds:*.7:BINFILE.1.100000:/tmp/log%d")

[9/2/94 public]
Log files are in afs cell under the 'ot11880' directory.  Note that the
test output has changed somewhat now that SVC logging is turned on -- the
bus errors have disappeared.

# ./local_TET.admin gds_sec

  TET - Test Environment Toolkit for testing GDS/Admin on a local machine

  TestSuite = gds_sec


Password must be changed!
journal file name is: /dcetest/dcelocal/test/tet/functional/directory/gds/results/0006e/journal
/bin/ksh: 7678 Memory fault(coredump)
/bin/ksh: 7913 Memory fault(coredump)
/bin/ksh: 8258 Memory fault(coredump)

Invoked tests have been finished ...
Note:   In case of an irregular test run -->
        See /dcetest/dcelocal/test/tet/functional/directory/gds/outdir.prague/gds_start.log also

[09/05/94 public]
dup to 11321: exactly same stack.

[09/12/94 public]
We have found a workaround :
We call sec_rgy_site_open_query instead of sec_rgy_site_open_update.
This seems to work.
We think that there is still a problem in security (sec_rgy_site_open_update)
but it"s no longer relevant for us.

[09/12/94 public]
Described fix submitted.

[09/13/94 public]
Reopened. I did run the build of last night on prague (HP800).
The results:

sec_dap_b2.tcl: gave exit code: 138 (core.last was dumped)
sec_dap_b4.tcl: PASSED
sec_dap_b1.tcl: PASSED
sec_dap_b3.tcl: gave exit code: 138 (core.last was dumped)
sec_dap_b1.tcl (gds_zero): PASSED

sec_dsp_b1.tcl: PASSED
sec_dsp_b2.tcl: gave exit code: 138 (core.last was dumped)
sec_dsp_b3.tcl: gave exit code: 138 (core.last was dumped)

sec_tdt_b1.tcl: PASSED
sec_tdt_b1.tcl (dir12): PASSED
sec_tdt_b2.tcl: gave exit code: 138 (core.last was dumped)
sec_tdt_b3.tcl: PASSED
sec_tdt_b4.tcl: PASSED
sec_tdt_b5.tcl: FAILED

core.last says: core dump in d21_bh8_get_bind_info - called from free.
Very interesting.

If I run it by hand I also get "bus error". If I run it just in xdb I also
get "bus error" - but just the stack "somewhere in libdce".
If I run it in "xdb -s -l ALL" I DON'T get "bus error" - I get
"illegal instruction" (somewhere in pthread_yield) or it works. 

For Helmut Baumgaertner:
The files gds_sec.log and gds_start.log are in /home/keutel/tmp (Munich).
May be we can fix at least sec_tdt_b5.tcl.

[09/14/94 public]
Here another run of the tests:

15|0 1.10 4|TCM Start
520|0 0 5544 1 1|TESTING (DCE_Security) STARTED
400|0 1 1 11:19:10|IC Start
200|0 1 11:19:10|TP Start
520|0 1 5544 1 2|DCE_Security DAP tests with dce_login gds_cl1
520|0 1 5544 1 3|DCE_Security DAP test: sec_dap_b2.tcl
520|0 1 5544 1 4|<dce_login> gave exit code: 138 (core.last was dumped)
520|0 1 5544 1 5|FAILED 
520|0 1 5544 1 6|DCE_Security DAP test: sec_dap_b4.tcl
520|0 1 5544 1 7|PASSED 
520|0 1 5544 1 8|DCE_Security DAP test:  sec_dap_b1.tcl
520|0 1 5544 1 9|PASSED 
520|0 1 5544 1 10|DCE_Security DAP test:  sec_dap_b3.tcl
520|0 1 5544 1 11|PASSED 
220|0 1 7 11:26:56|NORESULT
410|0 1 1 11:26:56|IC End
400|0 2 1 11:26:57|IC Start
200|0 1 11:26:57|TP Start
520|0 1 5544 1 2|DCE_Security DAP test with dce_login gds_zero
520|0 1 5544 1 3|DCE_Security DAP test:  sec_dap_b1.tcl (gds_zero)
520|0 1 5544 1 4|PASSED 
220|0 1 7 11:29:22|NORESULT
410|0 2 1 11:29:22|IC End
400|0 3 1 11:29:22|IC Start
200|0 1 11:29:22|TP Start
520|0 1 5544 1 2|DCE_Security DSP tests with dce_login gds_cl1
520|0 1 5544 1 3|DCE_Security DSP test:  sec_dsp_b1.tcl
520|0 1 5544 1 4|<dce_login> gave exit code: 138 (core.last was dumped)
520|0 1 5544 1 5|FAILED 
520|0 1 5544 1 6|DCE_Security DSP test:  sec_dsp_b2.tcl
520|0 1 5544 1 7|<dce_login> gave exit code: 138 (core.last was dumped)
520|0 1 5544 1 8|FAILED 
520|0 1 5544 1 9|DCE_Security DSP test:  sec_dsp_b3.tcl
520|0 1 5544 1 10|FAILED 
220|0 1 7 11:34:04|NORESULT
410|0 3 1 11:34:04|IC End
400|0 4 1 11:34:05|IC Start
200|0 1 11:34:05|TP Start
520|0 1 5544 1 2|DCE_Security TDT tests with dce_login gds_cl1
520|0 1 5544 1 3|DCE_Security TDT test:  sec_tdt_b1.tcl
520|0 1 5544 1 4|PASSED 
520|0 1 5544 1 5|DCE_Security TDT test:  sec_tdt_b1.tcl (dir12)
520|0 1 5544 1 6|<dce_login> gave exit code: 138 (core.last was dumped)
520|0 1 5544 1 7|FAILED 
520|0 1 5544 1 8|DCE_Security TDT test:  sec_tdt_b2.tcl
520|0 1 5544 1 9|<dce_login> gave exit code: 138 (core.last was dumped)
520|0 1 5544 1 10|FAILED 
520|0 1 5544 1 11|DCE_Security TDT test:  sec_tdt_b3.tcl
520|0 1 5544 1 12|<dce_login> gave exit code: 138 (core.last was dumped)
520|0 1 5544 1 13|FAILED 
520|0 1 5544 1 14|DCE_Security TDT test:  sec_tdt_b4.tcl
520|0 1 5544 1 15|<dce_login> gave exit code: 138 (core.last was dumped)
520|0 1 5544 1 16|FAILED 
520|0 1 5544 1 17|DCE_Security TDT test:  sec_tdt_b5.tcl
520|0 1 5544 1 18|<dce_login> gave exit code: 138 (core.last was dumped)
520|0 1 5544 1 19|FAILED 
220|0 1 7 11:39:34|NORESULT
410|0 4 1 11:39:34|IC End
520|0 0 5544 1 1|TESTING (DCE_Security) FINISHED

It's other testcases than yesterday.
With dua logging switched on all worked fine.
Frustrating.

[09/15/94 public]
OK - for some reason (who knows) we could get a good stack from the core
dump now. We checked this and opened 12200. It seems to be 
an obvious gssapi error (gss_init_sec_context: freeing the address of
an automatic variable) which should be easily to fix.
(We proposed a fix.)
Once this 12200 is fixed we will rerun the gds_sec tests.
I leave the status "open" because it's very possible that we'll
run in the next core dump if gss_init_sec_context is corrected.

[9/29/94 public]
Got the bus error again using BL20.  The core file isn't readible.
Testcase was sec_dap_b1.tcl.

[9/29/94 public]
I've run sec_dap_b1.tcl iteratively and it dumps core 10% of the time.  The
offending command is:

puts "try to bind using DCE auth"
if {[catch {eval "bind -dirid 11 -dsa /c=re/O=sni/ou=buba/cn=dsa/cn=dsa1 \
	-authentication DCE"} message] == 0 } {
	puts "UNEXPECTED : DCE bind succeeded"
	} else {
	puts $message
	puts "EXPECTED : DCE bind failed"
	}

Here's the stack trace:

Record-all is ON, overwriting "xdb.log"
>T
 0 free@libc + 0x00000008 (hp-ux export stub)
 1 cma_lib_free@libdce + 0x00000284 (0x40094830, 0x3, 0, 0x100000)
 2 ptdexc_mutex_unlock@libdce + 0x00000034 (0x40094830, 0x4, 0x14, 0x7b033490)
 3 rpc_ss_free@libdce + 0x000000e8 (0x40010148, 0xb851c136, 0xa2800481, 0x3020101)
 4 cma_lib_free@libdce + 0x00000148 (0x400ff4e0, 0x400fe410, 0x400ff2d8, 0x7b03f1c8)
 5 rca_site_resolve_update@libdce + 0x000007b8 (0x7b03f1c8, 0x400fe310, 0x7b039ccc, 0x7b03a91c)
 6 sec_rgy_site_bind_update@libdc + 0x00000088 (0x7b039cd0, 0x7b03f1c8, 0x7b039ccc, 0x7b03a91c)
 7 sec_rgy_site_open_update@libdc + 0x00000068 (0x7b039cd0, 0x7b039ccc, 0x7b03a91c, 0x7afcd4c4)
 8 gds_sec__conf_target@libdce + 0x000012b4 (0x40097178, 0x7b037bc8, 0x7b03523c, 0)
 9 dua_sec__map_target_name@libdc + 0x00000a1c (0x7b030005, 0x7b0352fc, 0x7b03000b, 0x40097178)
10 dua_init_sec_ctx@libdce + 0x00000a6c (0x40000005, 0x40097178, 0x7b03000b, 0)
11 d21_bh1_exec_bind@libdce + 0x000007ac (0x7b034cb8, 0x7afb0000, 0x1b9, 0x7afbe014)
12 d21_1_bind@libdce + 0x00000bc0 (0x7b034bc0, 0x7afaf770, 0x7afaf780, 0)
13 ds_bind@libdce + 0x00001134 (0x40096fa8, 0x40094960, 0x40009b54, 0)
14 gc_t__perform_bind (directory_id = 11, dsa_name = 0x40095ff0, psap_address =   00000000, user_name =   00000000, user_password =   00000000, auth_type = 0x40095d70, use_cache = 0, local_strings = 1, out_vect = 0x7b034a38)    [/project/dce/build/dce1.1/src/directory/gds/gdscp/gct/gctbind.c: 878]
	user_name_object =   00000000
	dsa_name_object = 0x40096afc
	psap_object =   00000000
	auth_mechanism = 5
	retval_xoi = 2063807632
	in_session = 0x40096fa8
	norm_passwd = 0x400930b1
	line_no   = 2062709380
	ds_status =   00000000
	error_position = 0
	desc_count = 6
	i         = 5
	retval    = 0
	append_str =   00000000
	msg       = 0x00000003
15 gc_t_bind (in_vect = 0x40095ca0, vect_count = 0, local_strings = 1, out_vect = 0x7b034a38)    [/project/dce/build/dce1.1/src/directory/gds/gdscp/gct/gctbind.c: 430]
	directory_id = 11
	retval    = 0
	use_cache = 0
	is_present = 1
	dsa_name  = 0x40095ff0
	psap_address =   00000000
	user_name =   00000000
	user_password =   00000000
	auth_type = 0x40095d70
16 gc_i__x500obj_bind (client_data =   00000000, interp = 0x4000ccc8, argc = 6, argv = 0x40096a90)    [/project/dce/build/dce1.1/src/directory/gds/gdscp/gci/gcix500obj.c: 291]
	out_vect  =   00000000
	new_argc  = 6
	bind_status = 0
	local_strings = 1
	new_argv  = 0x40095c88
	return_code = 0
17 gc_i_x500obj (client_data =   00000000, interp = 0x4000ccc8, argc = 6, argv = 0x40096a90)    [/project/dce/build/dce1.1/src/directory/gds/gdscp/gci/gcix500obj.c: 242]
	op_index  = 0
	status    = 0
	return_code = 0
18 Tcl_Eval + 0x000009f0 (0x4000ccc8, 0x7b0345b5, 0x10050, 0x2b0000)
19 Tcl_EvalCmd + 0x000001a8 (0, 0x4000ccc8, 0x2, 0x7b034690)
20 Tcl_Eval + 0x000009f0 (0x4000ccc8, 0x40093098, 0x40096a88, 0)
21 InterpProc + 0x00000530 (0x40093080, 0x4000ccc8, 0, 0x7b034390)
22 Tcl_Eval + 0x000009f0 (0x4000ccc8, 0x7b034035, 0, 0x3)
23 Tcl_EvalCmd + 0x000001a8 (0, 0x4000ccc8, 0x2, 0x7b034110)
24 Tcl_Eval + 0x000009f0 (0x4000ccc8, 0x7b033df6, 0x7b033f18, 0x7b033eb8)
25 Tcl_CatchCmd + 0x000001a8 (0, 0x4000ccc8, 0x3, 0x7b033ed0)
26 Tcl_Eval + 0x000009f0 (0x4000ccc8, 0x40095d94, 0, 0)
27 ExprLex + 0x00000744 (0x4000ccc8, 0x7b033bb8, 0x7b033a98, 0x100000)
28 ExprGetValue + 0x00000080 (0x4000ccc8, 0x7b033bb8, 0xffffffff, 0x7b033a98)
29 ExprTopLevel + 0x00000158 (0x4000ccc8, 0x40095d93, 0x7b033a98, 0x7b033490)
30 Tcl_ExprBoolean + 0x00000040 (0x4000ccc8, 0x40095d93, 0x7b033a50, 0x7b033938)
31 Tcl_IfCmd + 0x000001c4 (0, 0x4000ccc8, 0x5, 0x7b033950)
32 Tcl_Eval + 0x000009f0 (0x4000ccc8, 0x400936e0, 0x8b8, 0)
33 Tcl_EvalFile + 0x0000088c (0x4000ccc8, 0x7b033008, 0x4000226c, 0x1)
34 gc_i__check_interactive_mode (interp = 0x4000ccc8, argc = 2, argv = 0x7b033370)    [/project/dce/build/dce1.1/src/directory/gds/gdscp/gci/gcicmdframe.c: 575]
	out_vect  =   00000000
	command_specified = 0
	file_specified = 1
	print_usage_message = 0
	i         = 1
	command_string = 0x2f6f7074
	retval_tcl = 795108197
35 main (argc = 2, argv = 0x7b033370)    [/project/dce/build/dce1.1/src/directory/gds/gdscp/gci/gcicmdframe.c: 230]
	status    = 0
	interp    = 0x4000ccc8
>q
Really quit? y

[09/30/94 public]
This stack is interesting - it shows that again sec_rgy_site_open_update is
called. We have changed that some weeks ago - we replaced this
sec_rgy_site_open_update with sec_rgy_site_open_query.
But - the last submit (masterbind) overwrote this by mistake.
RTS is following soon.

[9/30/94 public]
Removed notes I added at 20:51 9/29 -- I meant to make them in a different
defect.

[09/30/94 public]
Submitted. Set it to fix - waiting for reopening ....

[10/3/94 public]
Verified by FVT.



CR Number                     : 11875
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : gds
Subcomponent Name             : ipc
Short Description             : Fatal error during xds_st
Reported Date                 : 8/25/94
Found in Baseline             : 1.1
Found Date                    : 8/25/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : gds/dua/d21ipcev.c
Sensitivity                   : public

[8/25/94 public]
root@gemini xds/tools$ ./local_TET.api -s all

  TET - Test Environment Toolkit for testing GDS/API on a local machine
        Test Suite = all


journal file name is: /dcetest/dcelocal/test/tet/functional/directory/xds/results/0004e/journal
1994-08-25-07:42:52.310-04:00I----- PID#23886 FATAL gds ipc d23unbind.c 88 0xa44d0d6c
IPC-function call not allowed in this state (state = 465)
1994-08-25-07:43:09.609-04:00I----- PID#23886 FATAL gds ipc d23cdetach.c 89 0xa44d0d6c
IPC-function call not allowed in this state (state = 27)

[08/25/94 public]
Not reproducable on my 486: I did run all xds_ST tests.
Rich: can you reproduce it easily - means can you tell me which testcase
causes this FATAL messages?
Anyway: This looks dangerous but it is not. The messages come from 
the end of the processes when it tries to shutdown open IPC connections.
The DUA thinks that there is an open IPC connection - but there is not -
so the FATAL messages come. But this is really done only once per
process - when it exits (declared with atexit).

[9/1/94 public]
I'm trying to reproduce the problem today.  If I can I'll raise the
priority to a '1' again.  If not, I'll cancel.

[9/1/94 public]
Cancelled.  Couldn't reproduce with binaries from NB0829

[09/14/94 public]
Reopened - now we could reproduce what Rich Z has reported.
The reason is that one thread is sending a message - another
thread is receiving the answer. Sometimes the thread scheduler
stops the first thread after the message was sent out - but before
the right status could be set.
The fix is to add a "pthread_yield" call to the seconf thread.

However - it's difficult to reproduce the problem - you can't force the
thread scheduler very easily to switch from thread 1 to thread 2 just
at this critical point. 

And: IPC traces "FATAL" but it's not fatal: just this IPC association
cannot be used any more. So the DUA opens another one and all works
fine until the problem occurs again. Than the next IPC association is opened 
... We have 256 possible IPC associations - I have never seen
a gds application which runs more than some seconds. So this problem
is not very critical - but it can be fixed.

[09/14/94 public]
Bumped priority. I have to correct my sentences about "fatal - not fatal" -
it's fatal sometimes. We have just found that one of the gds_sec tests
was failing because of this IPC problem. 
I'll request for submit soon.

[09/14/94 public]
Fix submitted.



CR Number                     : 11874
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa,i486
S/W Ref Platform              : sinix,hpux
Component Name                : gds
Subcomponent Name             : gdssysadm
Short Description             : display configuration uses wrong cat file format
Reported Date                 : 8/25/94
Found in Baseline             : 1.1
Found Date                    : 8/25/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : gds/conf/HP800/dirparam.dat
						gds/conf/SVR4/dirparam.dat
Sensitivity                   : public

[8/25/94 public]

dirparam sets NLSFILENAME for displaying configuration via gdssysadm.
This NLSFILENAME is set to gdsproc.cat on AT386 and RIOS,
but to gdsproc on HP800 and SVR4. This doesn't work
on HP i.e. for

NLSPATH=/opt/dcelocal/nls/msg/en_US.ASCII/%N

and

LANG=english.

The fix is to set NLSFILENAME=gdsproc.cat on all platforms.

[8/29/94 public]
Verified via hand test.



CR Number                     : 11859
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gds_sec
Short Description             : gssapi authentication error
Reported Date                 : 8/24/94
Found in Baseline             : 1.1
Found Date                    : 8/24/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : 
./directory/gds/gds_sec/dsa_sec.c
./directory/gds/gds_sec/dua_sec.c
./directory/gds/gds_sec/gds_sec_rgy.c
Sensitivity                   : public

[8/24/94 public]
The TET filter reports passes but the gds_sec.log file reports what appear
to be GSSAPI failures.


---> Start of  dap_b1.log

1994-08-24-12:33:48.725-04:00I----- PID#28611 ERROR gss authentication gssapi.c 5181 0xa44d0d6c
No token supplied
TEST : sec_dap_b1

---> Start of  dap_b1_zero.log

1994-08-24-12:36:54.924-04:00I----- PID#29040 ERROR gss authentication gssapi.c 5181 0xa44d0d6c
No token supplied
TEST : sec_dap_b1

[8/24/94 public]
Altered the original description -- what I thought were errors were
negative test cases.  However, the gssapi error is unexplained.

[08/26/94 public]
Fix submitted.



CR Number                     : 11844
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : gds
Subcomponent Name             : xoms
Short Description             : filename for catopen is wrong
Reported Date                 : 8/24/94
Found in Baseline             : 1.1
Found Date                    : 8/24/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : xoms/xos.c
Sensitivity                   : public

[8/24/94 public]

In xoms/xos.c you find:

#if defined (__OSF1__) || defined (_AIX)
#define XOS_NLS_FILE    "xoserr.cat"
#else
#define XOS_NLS_FILE    "xoserr"
#endif


...
xos_nls_desc = catopen(XOS_NLS_FILE, 0);

This is wrong - it should be on all machines:

#define XOS_NLS_FILE    "xoserr"



CR Number                     : 11841
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : gds
Subcomponent Name             : gdsstep
Short Description             : core dumps
Reported Date                 : 8/23/94
Found in Baseline             : 1.1
Found Date                    : 8/23/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : dce/utils/svc/svclog.c
Sensitivity                   : public

[8/23/94 public]
What more is there to say?  It dies.  Here's the stack trace:
(gdb) bt
#0  0xa426a549 in _xti_tli_init_routine ()
#1  0xd7 in ?? (9, -1541936676)
#2  0xa426a78a in _xti_tli_init_routine ()
#3  0xa417ea94 in _xti_tli_init_routine ()
#4  0xa426a7e6 in _xti_tli_init_routine ()
#5  0xa427ee15 in _xti_tli_init_routine ()
#6  0xa4282bb8 in _xti_tli_init_routine ()
#7  0xa427ba28 in _xti_tli_init_routine ()
#8  0xa42a30d9 in _xti_tli_init_routine ()
#9  0xa42a086e in _xti_tli_init_routine ()
#10 0x4005cc in main (4272416, 0, 9, 0, -1073743840)
#11 0x4004cc in main (1, -1073743760, -1073743752, -1073743584)
#12 0x4000cb in __start (Cannot access memory at address 0x2.

[09/14/94 public]
gdsstep works now - due to the SVC fix provided yesterday.



CR Number                     : 11826
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : gds
Subcomponent Name             : admin
Short Description             : Shadow admin FVT fails
Reported Date                 : 8/23/94
Found in Baseline             : 1.1
Found Date                    : 8/23/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : gds/adm/delupd/d20daemon.c
Sensitivity                   : public

[8/23/94 public]
On 486 from BL16 binaries:

SHADOW TEST START
Failing cases:
        shadow.6checkjob (Check wether upda
        shadow.6checkshd (Check wether upda
Pass: 14
Fail: 2

From the log:

** sccsid = @(#)t8.6checkjob 1.1 94/03/03 (SNI AP 11) ****:
**** DSA-Identifikation *****:
**Administration ***:
***Display Objects 4  HT/Siemens/DAP12/Maier******:
***Display Objects 4  HT/Siemens/DAP12/Schmidt******:
                                                                           
ERROR:
Object (or superior object) doesn't exist !
To continue press <CR> !
***Display Objects 4  HT/Siemens/DAP12/Fischer******:
                                                                           
ERROR:
Object (or superior object) doesn't exist !
To continue press <CR> !
***Display Objects 4  HT/Siemens/DAP12/Sanjay,Inida *******:
***Display Objects 4  HT/Siemens/DAP11/Huber EXPECTED ERROR %Object (or superior object) doesn't exist !
% ***:
*** ENDE *****:
***END TEST****:
** sccsid = @(#)t8.6checkshd 1.1 94/03/03 (SNI AP 11) ****:
**** DSA-Identifikation *****:
**Administration ***:
***Display Objects 4  US/Siemens/DAP11/Maier******:
***Display Objects 4  US/Siemens/DAP11/Schmidt******:
                                                                           
ERROR:
Object (or superior object) doesn't exist !
To continue press <CR> !
***Display Objects 4  US/Siemens/DAP11/Fischer******:
                                                                           
ERROR:
Object (or superior object) doesn't exist !
To continue press <CR> !
***Display Objects 4  US/Siemens/DAP11/Sanjay,India *******:
***Display Objects 4  US/Siemens/DAP11/Huber EXPECTED ERROR %Object (or superior object) doesn't exist !
% ***:
*** ENDE *****:
***END TEST****:

[08/25/94 public]
Fix submitted.

[8/29/94 public]
Verified by FVT.



CR Number                     : 11824
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : 
Short Description             : eliminate warnings of gcc
Reported Date                 : 8/23/94
Found in Baseline             : 1.1b15
Found Date                    : 8/23/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : see below
Sensitivity                   : public

[8/23/94 public]
In the following files, warnings of the gcc with STRCT_COMPILER_FLAGS
(e.g.: about missing prototypes, unused variable) has been eliminated:
./directory/gds/rtros/com/rodpat/rodpat1.c
./directory/gds/rtros/com/roincl/rodpat4.h
./directory/gds/rtros/com/roprpm/roppm02.c
./directory/gds/rtros/com/rostep/trstep.c
./directory/gds/rtros/com/routil/routil0.c
./directory/gds/rtros/com/routil/routil8.c
./directory/gds/rtros/com/routil/routil9.c
./directory/gds/rtros/incl/routil0.h
./directory/gds/rtros/ros/roloif/roloif02.c
./directory/gds/rtros/ros/roloif/roloif12.c
./directory/gds/rtros/ros/rosepm/spspm2.c
./directory/gds/tsi/cmxl.c
./directory/xds/dsPGet.c
./directory/xds/dsPPut.c

[8/24/94 public]
Reopened for directory/gds/dsa/d26dsa.c and directory/gds/dsa/d26mutil.c .

[8/29/94 public]



CR Number                     : 11822
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : admin tests
Short Description             : enhancements for local_TET.admin
Reported Date                 : 8/23/94
Found in Baseline             : 1.1
Found Date                    : 8/23/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : test/functional/directory/gds/tet_scen
Sensitivity                   : public

[8/23/94 public]

I'd like to add the following scenarios:

all_no_gds_setup
all_no_gds_sec
all_no_gds_sec_gds_setup
all_no_gds_sec_gds_setup_gdscp
all_no_gds_sec_gdscp

I'd like to alter

all

to run really all tests - including gds_sec and gdscp.

[08/23/94 public]
Fix submitted.

[8/23/94 public]
Verified by inspection.



CR Number                     : 11802
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 11468
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : dsa SVC
Short Description             : DSA should call dce_svc_routings
Reported Date                 : 8/22/94
Found in Baseline             : 1.1
Found Date                    : 8/22/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : 
./directory/gds/dsa/d26dsa.c
./directory/gds/dsa/d26mutil.c
./directory/gds/h/d26dsa.h
./directory/gds/sams/gds.sams
./directory/gds/step/gstapdu.c
./directory/gds/step/gstep.c
./directory/gds/util/d27svc.c
Sensitivity                   : public

[8/22/94 public]

When the DSA restarts or starts gdsgendb (i.e. if the schema has changed)
it should start the processes with it's actual routing.
To get this the gdsdsa has to call dce_svc_routings.
This SVC function was wrong. Now it seems to be OK -
so we want to submit the DSA changes.

[08/24/94 public]
Fix submitted.

[8/29/94 public]
Verified via fvt.



CR Number                     : 11797
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gdssetup
Short Description             : failing testcases
Reported Date                 : 8/22/94
Found in Baseline             : 1.1
Found Date                    : 8/22/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : some gdssetup testcases
Sensitivity                   : public

[8/22/94 public]

The following gdssetup testcases do fail:

lib/valid/sv_domdef1_inter (gave exit code: 126 (expected was: 0))
lib/valid/sv_domdef2_inter (gave exit code: 126 (expected was: 0))
lib/valid/sv_init3_inter.cleanup (gave exit code: 1 (expected was: 0))
lib/valid/sv_init4_inter (gave exit code: 105 (expected was: 0))
lib/valid/sv_nodom1_inter (gave exit code: 139 (core.last was dumped))

(The rest passed:

Total PASSED =  186
Total FAILED =  5
)

[08/23/94 public]
Fix submitted.

[8/25/94 public]
Re-opened.  Here's results from AT386 and HPUX with binaries of 8/24:

486:
GDSSETUP: TEST CASE lib/valid/max_psap -> FAILED 
GDSSETUP: TEST CASE lib/valid/sv_domdef1_inter -> FAILED 
GDSSETUP: TEST CASE lib/valid/sv_domdef2_inter -> FAILED 

HPUX:
GDSSETUP: TEST CASE lib/valid/sv_domdef1_inter -> FAILED 
GDSSETUP: TEST CASE lib/valid/sv_domdef2_inter -> FAILED

[08/26/94 public]
Moved the max_psap problem to an new OT: 11903

Remaining problem: 

sv_domdef1_inter
sv_domdef2_inter

[09/01/94 public]
6 testcases submitted.

[9/2/94 public]
Testcases submitted were:

	src/test/functional/directory/gds/ts/gdssetup/lib/valid:

				default_dsa_enter.cleanup
				local_also_def_no.cleanup
				local_also_default.cleanup
				max_passwd
				sv_nodom4.cleanup
				sv_nodom4_inter.cleanup

[9/6/94 public]
Verified via FVT



CR Number                     : 11769
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gds_sec
Short Description             : DSP: Target DSA is not able to retrieve DN of the intermediate DSA.
Reported Date                 : 8/19/94
Found in Baseline             : 1.1
Found Date                    : 8/19/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : gds/gds_sec/gds_sec_rgy.c, gds/gds_sec/dsa_sec.c, gds/h/gds_sec_int.h
Sensitivity                   : public

[8/19/94 public]

Due to problems with sec_cred_get_extended_attributes (OT 10895 , meanwhile
fixed, but fix not yet available in SNI) this insufficency has not occured
by now.

The workaround that is applied in the gds code now is: The server does
not retrieve the ERA X500_DN from the clients security context, it does
instead use the sec_rgy_lookup* routines  to get the ERA values
belonging to the client principal from the rgy. However this approach
is not acceptable in the final version , as it is producing unneccessary
network traffic.

Once sec_cred_get_extended_attributes (in conjubction with gssapi)
works fine, the DSP will fail for dce authenticated binds, because
the DSA code is lacking the setting of ERAs to the login context.
Therefore the gssapi security context will not contain the X500_DN needed
by the target DSA.



CR Number                     : 11752
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : tet scripts
Short Description             : less TET logging to screen
Reported Date                 : 8/18/94
Found in Baseline             : 1.1
Found Date                    : 8/18/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : 
./test/functional/directory/gds/ts/config/two_dsas.sed 
./test/functional/directory/gds/ts/config/gds_sec_start.sh
./test/functional/directory/gds/ts/config/config_gds-admin_cache.sed
./test/functional/directory/gds/ts/config/gds_sec_clean.sh
Sensitivity                   : public

[8/18/94 public]

Some of the logging of the TET scripts
(i.e.: "Configuring dir. id 11")
should move from the screen to gdsstart.log.

[08/19/94 public]
Fix submitted.

[8/23/94 public]
Verified by fvt



CR Number                     : 11750
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gds_admin_gdref
Short Description             : overview of gds admin tools
needs updating
Reported Date                 : 8/18/94
Found in Baseline             : 1.1doc
Found Date                    : 8/18/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b23
Affected File(s)              : first two pages of chapter 4 of the GDS Administration Guide
Sensitivity                   : public

[8/18/94 public]

The chapter in the GDS Admin Guide that introduces the GDS
admin tools needs to be updated to provide an overview
of the new 1.1 GDS admin tools (e.g., gdscp, gdsfollowup, ...)
and when to use them vs. when to use the admin menus
and "old" GDS admin tools. I believe the sourc filename
for the affected chapter is overview.admintools.gpsml .

[10/17/94 public]
The first two pages of chapter 4 of the GDS Administration Guide were
updated to give a brief explanation of the available GDS administration
programs.



CR Number                     : 11745
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gdscp
Short Description             : gdscp change for I18N of tcl
Reported Date                 : 8/18/94
Found in Baseline             : 1.1
Found Date                    : 8/18/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : directory/gds/gdscp/gci/gcicmdframe.c
Sensitivity                   : public

[8/18/94 public]

Because tcl was internationalized gdscp has to call dce_msg_define_msg_table.
Otherwise the tcl incore table is not generated.
So - if the NLSPATH is not OK you don't get the tcl messages.

[08/19/94 public]
Fix submitted.



CR Number                     : 11744
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gdscp
Short Description             : referral handling failure
Reported Date                 : 8/18/94
Found in Baseline             : 1.1
Found Date                    : 8/18/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : test/functional/directory/gds/ts/gdscp/lib/refe rral/invalid/obj_referral_i.tcl
Sensitivity                   : public

[8/18/94 public]
binaries of 8/16, fails on AT386 and HP.

  Test cases for referral handling failed
  Received result different:
  Output of "diff /dcetest/dcelocal/test/tet/functional/directory/gds/outdir.gemini/obj_referral_i.out /dcetest/dcelocal/test/tet/functional/directory/gds/outdir.gemini/obj_referral_i.exp":
  62d61
  < 
  78,79c77
  < /C=de/O=dbp/OU=dap11/CN=dsa/CN=dsa-m1 {Incomplete operation - Referral returned : /C=de/O=dbp/OU=dap11/CN=dsa/CN=dsa-m2.
  < }
  ---
  > /C=de/O=dbp/OU=dap11/CN=dsa/CN=dsa-m1 {Incomplete operation - Referral returned : /C=de/O=dbp/OU=dap11/CN=dsa/CN=dsa-m2.}
  86,87c84
  < /C=de/O=dbp/OU=dap11/CN=dsa/CN=dsa-m1 {Incomplete operation - Referral returned : /C=de/O=dbp/OU=dap11/CN=dsa/CN=dsa-m2.
  < }
  ---
  > /C=de/O=dbp/OU=dap11/CN=dsa/CN=dsa-m1 {Incomplete operation - Referral returned : /C=de/O=dbp/OU=dap11/CN=dsa/CN=dsa-m2.}

[08/18/94 public]
The reason is that dce_fprintf has changed (\n stuff).

test/functional/directory/gds/ts/gdscp/lib/referral/invalid/obj_referral_i.tcl
will be submitted today.

[08/18/94 public]
Fix submitted.

[08/23/94 public]
Still doesn't work - one "\n" is still missing in obj_referral_i.tcl.

[08/23/94 public]
Fix submitted.

[8/25/94 public]
Passed on 486.

[8/25/94 public]
Verified on HP.  Closed.



CR Number                     : 11649
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : admin
Short Description             : gdssetup not built
Reported Date                 : 8/11/94
Found in Baseline             : 1.1
Found Date                    : 8/11/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : gsuset.c, gsu.h
Sensitivity                   : public

[8/11/94 public]
In directory/gds/adm/setup during compilation of gsuset.c:

/project/dce/build/dce1.1-snap/src/directory/gds/adm/setup/gsuset.c:2475:
`gsu_add_rem_ignor' undeclared (first use this function)

[8/11/94 public]
This is a SVC message which was removed from the sams file yesterday.

start           intable incatalog undocumented
code            gsu_add_rem_ignor
text            "Additional remote DSAs will be ignored in init-mode."
sub-component   GDS_S_SETUP
attributes      svc_c_sev_notice
tables          (gsu)



CR Number                     : 11620
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : rtros
Short Description             : conformance problems and ABANDON fix
Reported Date                 : 8/9/94
Found in Baseline             : 1.1
Found Date                    : 8/9/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : rtros/*, dua/d21ipcev.c
Sensitivity                   : public

[8/9/94 public]

There are conformance bugs in RTROS - you can't bind from dce1.0.3 (ROS 2.5)
to dce1.1 (RTROS). This is fixed now in Munich. Some more tests have
to be done.
The ABANDON problem is also fixed. The fix showed us another small
problem (deadlock) in the DUA (d21ipcev.c) - fixed in Munich.

[08/22/94 public]
Submitted.

[8/23/94 public]
Code submitted and built.



CR Number                     : 11618
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : dsa
Short Description             : alignment problem in DSA bind
Reported Date                 : 8/9/94
Found in Baseline             : 1.1
Found Date                    : 8/9/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : gds/dsa/secutil.c gds/dsa/addob.c
					     gds/dsa/d26logg.c gds/dsa/remutil.c
Sensitivity                   : public

[8/9/94 public]

dsa_accept_simp_anon_sec_ctx defines 

byte             sm_in[D26_BLOCK_LEN];

This is used in d26_u101_search_params:

com_arg = (D23_com_arg *) s_in;
...
com_arg->d23_cmctr.d23_scopt = 0L;

This gives a bus error on HP if sm_in is not a 4-aligned address.
This happems sometimes - randomly.
Actually we get this core dump also on SNI RISC machines.

The solution is to allocate the memory for sm_in with malloc -
then you get always a 4-aligned address.



CR Number                     : 11617
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : delta update
Short Description             : delta update doesn't work
Reported Date                 : 8/9/94
Found in Baseline             : 1.1
Found Date                    : 8/9/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : see below
Sensitivity                   : public

[8/9/94 public]

The following scenario doesn't work:

- configure gds as in the tetized functional shadow tests

- create /us and /us/abc in dsa-m1 (dir. id 5)

- create shadow and shadowing job in dir. id 5 (logon to the default dsa on
	dir. id. 5): 

	obj. and subordinates
	obj: /us/abc
	target dsa: de/dbp/dap11/dsa/dsa-m2
	update, frequency: high, every 5 minutes

- create /us/abc/jochen in dsa-m1 (dir. id 5)

- wait some (10) minutes

- check if /us/abc/jochen exists now in dsa-m2 (default dsa of dir. id. 2)

You will see that it doesn't exist.

So far we know only that there are problems in gdsdaemon related
to a strcmp of a normed and a exact object name.

I will deliver a full test scenario (shell script calling batch files -
or something for the tetized shadow tests additionally) soon.
Our functional tests do not detect that even the basic functionality of
shadowing does not work (!!).

While debugging gdsdaemon we found other problems.
So the following has to be fixed for closing this OT:

1.) if you switch on tracing for gdsdaemon gdsdaemon immediately exits
	(error in d20daemon.c while checking parameters)

2.) functional shadow tests should check if the job really works

3.) the problems in gdsdaemon concerning normed and exact names 
	have to be fixed

[08/11/94 public]
OK - just to document what files have to change:

1.) gds/adm/delupd/d20daemon.c: switch "-P" has to be added
				to enable tracing

2.) gds/bin/gdsconf.sh: create directory
			/opt/dcelocal/var/directory/gds/adm/dsa/dir<id>/update
			- that is the logdir for the gdsdaemon logfiles

3.) gds/bin/gdshdlupd: correct SVC_UPDAT_INFO

4.) gds/dsa/addob.c: DSA didn't write correct object name to SHDLOG file -
			so the daemon couln't work correctly.

5.) gds/adm/delupd/d20updutil.c: not enough memory for read message -
				attribute "principle name" - core dump

6.) gds/gds_sec/dsa_sec.c: useless strcpy in dsa_conf_sec_ctx: core dump

7.) test/functional/directory/gds/ts/config/dsa.dsa*: add auth. mech
			to the list of attributes when adding the
			DSA objects to the databases of the DSA's

Doing this in my sandbox and testing it seems to work!

[08/12/94 public]
OK, it works. Here is the list of the files which have changed
together with some comments:

./directory/gds/adm/delupd/d20daemon.c 
./directory/gds/adm/delupd/d20updutil.c 
					gdsdaemon changes
./directory/gds/bin/gdsconf.sh  
					create logdir for daemon
./directory/gds/bin/gdshdlupd.sh        
					set variable for tracing
./directory/gds/dsa/d26dsp.c    
./directory/gds/dsa/secutil.c   
./directory/gds/gds_sec/dsa_sec.c       
./directory/gds/h/gds_sec.h     
					dsa_conf_sec_ctx interface change

./test/functional/directory/gds/ts/config/dsa.dsa1      
./test/functional/directory/gds/ts/config/dsa.dsa1.sed  
./test/functional/directory/gds/ts/config/dsa.dsa2      
./test/functional/directory/gds/ts/config/dsa.dsa2.sed  
					
					adding Authentication-Mechanism 

./test/functional/directory/gds/ts/lib/Makefile 
./test/functional/directory/gds/ts/lib/shadow.6checkjob 
./test/functional/directory/gds/ts/lib/shadow.6checkshd 
./test/functional/directory/gds/ts/admin/shadow 

					new testcases

The fix in the DSA (gds/dsa/addob.c was already submitted as part
of another OT (11618).

[9/6/94 public]
Both shadow FVT and shadow system tests pass.



CR Number                     : 11595
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 11587
Project Name                  : dce
H/W Ref Platform              : i486,hppa
S/W Ref Platform              : osf1,hpux
Component Name                : gds
Subcomponent Name             : gdssysadm
Short Description             : gdssyadm -fd doesn't work
Reported Date                 : 8/8/94
Found in Baseline             : 1.1b14
Found Date                    : 8/8/94
Severity                      : C
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : gds.sams
Sensitivity                   : public

[8/8/94 public]
I ran into some problems running FVTs and have traced it down to the
gdssysadm -fd not working.  gdssysadm -fd returns code 5 upon completion.

This appears on HP and 486.

Here's a script which can be used to reproduce the problem:

  #!/bin/ksh
  
  ps -edaf | grep gds
  print -n "Deleting dir2 "
  gdssysadm -fc -m2 -d2 -p                       # delete dit 2 
  print $?
  print -n "Deleting dir3 "
  gdssysadm -fc -m2 -d3 -p                       # delete dit 3 
  print $?
  print -n "Deleting dir4 "
  gdssysadm -fc -m2 -d4 -p                       # delete dit 4 
  print $?
  print -n "Deleting dir5 "
  gdssysadm -fc -m2 -d5 -p                       # delete dit 4 
  print $?
  print -n "Configuring dir1 "
  gdssysadm -fc -m4 -d1 -c1 -C16
  print $?
  print -n "Configuring dir2 "
  gdssysadm -fc -m1 -d2 -c2 -s1 -C16 -A2         # configure dit 2 
  print $?
  print -n "Configuring dir3 "
  gdssysadm -fc -m1 -d3 -c2 -s1 -C16 -A2         # configure dit 3 
  print $?
  print -n "Configuring dir4 "
  gdssysadm -fc -m1 -d4 -c2 -s1 -C16 -A2         # configure dit 4 
  print $?
  print -n "Configuring dir5 "
  gdssysadm -fc -m1 -d5 -c2 -s1 -C16 -A2         # configure dit 5 
  print $?
  print -n "Activating "
  gdssysadm -fA                                  # activate GDS
  print $?
  print
  
  ps -edaf | grep gds
  print
  
  print -n "Deactivating "
  gdssysadm -fd -p
  print $?
  print
  
  ps -edaf | grep gds
    
And here's the output from AT386:

  root      6958  6950  2.2 14:31:37 pts/1        0:00.06 grep gds
  Deleting dir2 0
  Deleting dir3 0
  Deleting dir4 0
  Deleting dir5 0
  Configuring dir1 0
  Configuring dir2 0
  Configuring dir3 0
  Configuring dir4 0
  Configuring dir5 0
  Activating 0
  
  root      7776     1  1.1 14:33:06 ??           0:00.08 gdsipcchk -P/opt/dcelocal/var/adm/directory/gds/ad
  root      7782     1  4.2 14:33:07 ??           0:00.20 gdscache -P/opt/dcelocal/var/adm/directory/gds/cac
  root      7783     1  1.0 14:33:08 ??           0:00.06 gdsdsa -d4 -u -ld -s60 -A2 -P/opt/dcelocal/var/dir
  root      7784     1  1.1 14:33:07 ??           0:00.05 gdssstub -d2 -P/opt/dcelocal/var/directory/gds/adm
  root      7786     1  3.5 14:33:07 ??           0:00.14 gdscstub -d1 -P/opt/dcelocal/var/adm/directory/gds
  root      7787     1  1.4 14:33:07 ??           0:00.05 gdsdsa -d2 -u -ld -s60 -A2 -P/opt/dcelocal/var/dir
  root      7790     1  1.5 14:33:08 ??           0:00.04 gdssstub -d4 -P/opt/dcelocal/var/directory/gds/adm
  root      7793     1  1.6 14:33:08 ??           0:00.07 gdssstub -d3 -P/opt/dcelocal/var/directory/gds/adm
  root      7794     1  1.0 14:33:08 ??           0:00.05 gdsdsa -d3 -u -ld -s60 -A2 -P/opt/dcelocal/var/dir
  root      7799     1  1.5 14:33:09 ??           0:00.04 gdssstub -d5 -P/opt/dcelocal/var/directory/gds/adm
  root      7804     1  1.8 14:33:09 ??           0:00.05 gdsdsa -d5 -u -ld -s60 -A2 -P/opt/dcelocal/var/dir
  root      7807  6950  1.8 14:33:09 pts/1        0:00.05 grep gds
  
  Deactivating 5
  
  root      7776     1  0.0 14:33:06 ??           0:00.08 gdsipcchk -P/opt/dcelocal/var/adm/directory/gds/ad
  root      7782     1  0.6 14:33:07 ??           0:00.21 gdscache -P/opt/dcelocal/var/adm/directory/gds/cac
  root      7783     1  0.2 14:33:08 ??           0:00.06 gdsdsa -d4 -u -ld -s60 -A2 -P/opt/dcelocal/var/dir
  root      7784     1  0.0 14:33:07 ??           0:00.05 gdssstub -d2 -P/opt/dcelocal/var/directory/gds/adm
  root      7786     1  0.3 14:33:07 ??           0:00.14 gdscstub -d1 -P/opt/dcelocal/var/adm/directory/gds
  root      7787     1  0.1 14:33:07 ??           0:00.05 gdsdsa -d2 -u -ld -s60 -A2 -P/opt/dcelocal/var/dir
  root      7790     1  0.2 14:33:08 ??           0:00.05 gdssstub -d4 -P/opt/dcelocal/var/directory/gds/adm
  root      7793     1  0.2 14:33:08 ??           0:00.07 gdssstub -d3 -P/opt/dcelocal/var/directory/gds/adm
  root      7794     1  0.1 14:33:08 ??           0:00.05 gdsdsa -d3 -u -ld -s60 -A2 -P/opt/dcelocal/var/dir
  root      7799     1  0.1 14:33:09 ??           0:00.04 gdssstub -d5 -P/opt/dcelocal/var/directory/gds/adm
  root      7804     1  0.2 14:33:09 ??           0:00.05 gdsdsa -d5 -u -ld -s60 -A2 -P/opt/dcelocal/var/dir
  root      7840  6950  0.0 14:33:14 pts/1        0:00.05 grep gds

[8/8/94 public]
Dropped to severity C because I have a workaround -- a script which shoots
all the gds process and issues gdsipcinit -R.  Have replaced invocation
'gdssysadm -fd' with this script in two_dsas.sed.  

However, this is still a priority 0.

[8/9/94 public]
New gds.sams is needed.

[8/11/94 public]
Verified via handtest.



CR Number                     : 11594
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 11587
Project Name                  : dce
H/W Ref Platform              : i486,hppa
S/W Ref Platform              : osf1,hpux
Component Name                : gds
Subcomponent Name             : gdsdirnfo
Short Description             : gdsdirinfo output mangled
Reported Date                 : 8/8/94
Found in Baseline             : 1.1b14
Found Date                    : 8/8/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : gds.sams
Sensitivity                   : public

[8/8/94 public]
As of bl14, gdsdirinfo output looks like:

AT386:root@gemini ts/config$ gdsdirinfo
#       PROCTYPE    PID    DIRID    IPCID    STATE
#       Monitor     1218     -        5        -                DUA-Cache   1222     -        1        -
        C-Stub      1227     -        2        -                DSA         1232     2        32       -
        S-Stub      1230     2        12       -                DSA         1247     5        35       -   
        S-Stub      1245     5        15       -                S-Stub      1235     3        13       -  
        DSA         1237     3        33       -                DSA         1242     4        34       -   
        S-Stub      1240     4        14       -        root@gemini ts/config$ 


On the HP:
#       PROCTYPE    PID    DIRID    IPCID    STATE
#       Monitor     2240     -        5        -                DUA-Cache   2244     -        1        -            C-Stub      2246     -        2        -           S-Stub      2248     2        12       -         DSA         2250     2        32       -            DSA         2265     5        35       -                S-Stub      2263     5        15       -            S-Stub      2253     3        13       -            DSA         2255     3        33       -                S-Stub      2258     4        14       -            DSA         2260     4        34       -        #

[8/9/94 public]
gds.sams must be changed to reflect the dce_printf() bug fix.

[8/11/94 public]
verified via handtest.



CR Number                     : 11587
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : 
Short Description             : update gds.sams because of func. changes in dce_printf()
Reported Date                 : 8/8/94
Found in Baseline             : 1.1b14
Found Date                    : 8/8/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : gds.sams
Sensitivity                   : public

[8/8/94 public]
Add \n in messages of gds.sams, because dce_printf() has been changed 
to behave like printf().

[8/11/94 public]



CR Number                     : 11586
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gdssetup
Short Description             : improvement of test-code-coverage
Reported Date                 : 8/8/94
Found in Baseline             : 1.1b13
Found Date                    : 8/8/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : files in directories gds/ts/gdssetup/lib/valid and invalid
Sensitivity                   : public

[8/8/94 public]

Improvement of test-code-coverage-files



CR Number                     : 11585
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gdssetup
Short Description             : fix errors for interactive mode
Reported Date                 : 8/8/94
Found in Baseline             : 1.1b13
Found Date                    : 8/8/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : gds/adm/setup/gsuset.c
					     gds/h/gsu.h
Sensitivity                   : public

[8/8/94 public]

=> 1. in main() : don't use buffer for stdin
=> 2. in gsu_inter_server_sys() : default value for gsu_local_equal_default 
      was missing
=> 3. in gsu_inter_server_sys() and gsu_inter_readline_admin() : 
      if (isatty(0))
         then
            {
            system(stty -echo)		/* for password */
            /*   system(stty echo) */
            ....
            }
=> 4. in gsu_inter_server_sys() : change 'Y' to gsu_answer_true and 'N' to
      gsu_answer_false
=> 5. in gsu_inter_server_sys() : delete gsu_add_rem_ignor message



CR Number                     : 11563
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : 
Short Description             : Create GDS Admin Guide and Reference
Reported Date                 : 8/4/94
Found in Baseline             : 1.0.3
Found Date                    : 8/4/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1doc
Affected File(s)              : dce_books/gds_admin_gdref/*
Sensitivity                   : public

[8/4/94 public]

Per plans for 1.1, create a DCE GDS Administration Guide and Reference from
the gds section of the DCE Admin Guide Extended Services volume and the
man8gds section of the DCE Command Reference.  When this is done, the 
DCE Administration Guide Extended Services Volume will be obsolete and will
be defuncted.

[8/24/94 public]

Completed by moving the man8gds and admin guide directory/gds files to
a new gds_admin_gdref book and doing related changes.  Built and checked
book.  Verified by me.

[09/01/94 public]
Closed bug.



CR Number                     : 11527
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : fvt
Short Description             : gdssetup fvt return code failures
Reported Date                 : 8/2/94
Found in Baseline             : 1.1
Found Date                    : 8/2/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : test/functional/directory/gds/ts/lib/shfuncs
Sensitivity                   : public

[8/2/94 public]
Test results based upon binaries of 7/25.

The gdssetup journal from the 486 shows the following.  It's not clear what
the problem is because no error messages seem to be generated.  The
valid and invalid log files will be placed in the AFS cell in a directory
named after this OT.


0|1.10 08:31:12 19940802|User: zeliff (0) TCC Start, Command Line: /dcetest/dcelocal/test/tet/bin/tcc -e functional/directory/gds gdssetup 
20|/dcetest/dcelocal/test/tet/functional/directory/gds/tetexec.cfg 1|Config Start
30||TET_VERSION=1.10
30||TET_OUTPUT_CAPTURE=False
30||TET_RESCODES_FILE=tet_code
30||TET_EXEC_IN_PLACE=True
30||TET_TAPE_DEVICE=/dev/rmt0
40||Config End
70||"STARTING all TESTS using <gdssetup>"
10|0 /gdssetup/gdssetup_all 08:31:12|TC Start, scenario ref 49-1
15|0 1.10 2|TCM Start
520|0 0 25410 1 1|GDSSETUP TEST START
400|0 1 1 08:31:24|IC Start
200|0 1 08:31:25|TP Start
520|0 1 25410 1 2|GDSSETUP: TEST CASE begin.setup
520|0 1 25410 1 3|PASSED 
520|0 1 25410 1 4|GDSSETUP: TEST CASE client1
520|0 1 25410 1 5|<gdssetup> gave exit code: 37
520|0 1 25410 1 6|FAILED 
520|0 1 25410 1 7|GDSSETUP: TEST CASE client1.cleanup
520|0 1 25410 1 8|PASSED 
520|0 1 25410 1 9|GDSSETUP: TEST CASE client2
520|0 1 25410 1 10|<gdssetup> gave exit code: 37
520|0 1 25410 1 11|FAILED 
520|0 1 25410 1 12|GDSSETUP: TEST CASE client2.cleanup
520|0 1 25410 1 13|PASSED 
520|0 1 25410 1 14|GDSSETUP: TEST CASE client3
520|0 1 25410 1 15|<gdssetup> gave exit code: 37
520|0 1 25410 1 16|FAILED 
520|0 1 25410 1 17|GDSSETUP: TEST CASE client3.cleanup
520|0 1 25410 1 18|PASSED 
520|0 1 25410 1 19|GDSSETUP: TEST CASE client4
520|0 1 25410 1 20|<gdssetup> gave exit code: 37
520|0 1 25410 1 21|FAILED 
520|0 1 25410 1 22|GDSSETUP: TEST CASE client4.cleanup
520|0 1 25410 1 23|PASSED 
520|0 1 25410 1 24|GDSSETUP: TEST CASE client5
520|0 1 25410 1 25|<gdssetup> gave exit code: 37
520|0 1 25410 1 26|FAILED 
520|0 1 25410 1 27|GDSSETUP: TEST CASE client5.cleanup
520|0 1 25410 1 28|PASSED 
520|0 1 25410 1 29|GDSSETUP: TEST CASE sv_domdef1
520|0 1 25410 1 30|<gdssetup> gave exit code: 37
520|0 1 25410 1 31|FAILED 
520|0 1 25410 1 32|GDSSETUP: TEST CASE sv_domdef1.cleanup
520|0 1 25410 1 33|PASSED 
520|0 1 25410 1 34|GDSSETUP: TEST CASE sv_domdef2
520|0 1 25410 1 35|<gdssetup> gave exit code: 37
520|0 1 25410 1 36|FAILED 
520|0 1 25410 1 37|GDSSETUP: TEST CASE sv_domdef2.cleanup
520|0 1 25410 1 38|PASSED 
520|0 1 25410 1 39|GDSSETUP: TEST CASE sv_domdef3
520|0 1 25410 1 40|<gdssetup> gave exit code: 37
520|0 1 25410 1 41|FAILED 
520|0 1 25410 1 42|GDSSETUP: TEST CASE sv_domdef3.cleanup
520|0 1 25410 1 43|PASSED 
520|0 1 25410 1 44|GDSSETUP: TEST CASE sv_domdef4
520|0 1 25410 1 45|<gdssetup> gave exit code: 37
520|0 1 25410 1 46|FAILED 
520|0 1 25410 1 47|GDSSETUP: TEST CASE sv_domdef4.cleanup
520|0 1 25410 1 48|PASSED 
520|0 1 25410 1 49|GDSSETUP: TEST CASE sv_domdef5
520|0 1 25410 1 50|<gdssetup> gave exit code: 37
520|0 1 25410 1 51|FAILED 
520|0 1 25410 1 52|GDSSETUP: TEST CASE sv_domdef5.cleanup
520|0 1 25410 1 53|PASSED 
520|0 1 25410 1 54|GDSSETUP: TEST CASE sv_domdef6
520|0 1 25410 1 55|<gdssetup> gave exit code: 37
520|0 1 25410 1 56|FAILED 
520|0 1 25410 1 57|GDSSETUP: TEST CASE sv_domdef6.cleanup
520|0 1 25410 1 58|PASSED 
520|0 1 25410 1 59|GDSSETUP: TEST CASE sv_domnodef1
520|0 1 25410 1 60|<gdssetup> gave exit code: 37
520|0 1 25410 1 61|FAILED 
520|0 1 25410 1 62|GDSSETUP: TEST CASE sv_domnodef1.cleanup
520|0 1 25410 1 63|PASSED 
520|0 1 25410 1 64|GDSSETUP: TEST CASE sv_domnodef2
520|0 1 25410 1 65|<gdssetup> gave exit code: 37
520|0 1 25410 1 66|FAILED 
520|0 1 25410 1 67|GDSSETUP: TEST CASE sv_domnodef2.cleanup
520|0 1 25410 1 68|PASSED 
520|0 1 25410 1 69|GDSSETUP: TEST CASE sv_domnodef3
520|0 1 25410 1 70|<gdssetup> gave exit code: 37
520|0 1 25410 1 71|FAILED 
520|0 1 25410 1 72|GDSSETUP: TEST CASE sv_domnodef3.cleanup
520|0 1 25410 1 73|PASSED 
520|0 1 25410 1 74|GDSSETUP: TEST CASE sv_domnodef4
520|0 1 25410 1 75|<gdssetup> gave exit code: 37
520|0 1 25410 1 76|FAILED 
520|0 1 25410 1 77|GDSSETUP: TEST CASE sv_domnodef4.cleanup
520|0 1 25410 1 78|PASSED 
520|0 1 25410 1 79|GDSSETUP: TEST CASE sv_domnodef5
520|0 1 25410 1 80|<gdssetup> gave exit code: 37
520|0 1 25410 1 81|FAILED 
520|0 1 25410 1 82|GDSSETUP: TEST CASE sv_domnodef5.cleanup
520|0 1 25410 1 83|PASSED 
520|0 1 25410 1 84|GDSSETUP: TEST CASE sv_domnodef6
520|0 1 25410 1 85|<gdssetup> gave exit code: 37
520|0 1 25410 1 86|FAILED 
520|0 1 25410 1 87|GDSSETUP: TEST CASE sv_domnodef6.cleanup
520|0 1 25410 1 88|PASSED 
520|0 1 25410 1 89|GDSSETUP: TEST CASE sv_init1
520|0 1 25410 1 90|<gdssetup> gave exit code: 37
520|0 1 25410 1 91|FAILED 
520|0 1 25410 1 92|GDSSETUP: TEST CASE sv_init2
520|0 1 25410 1 93|<gdssetup> gave exit code: 37
520|0 1 25410 1 94|FAILED 
520|0 1 25410 1 95|GDSSETUP: TEST CASE sv_init2.cleanup
520|0 1 25410 1 96|PASSED 
520|0 1 25410 1 97|GDSSETUP: TEST CASE sv_init3
520|0 1 25410 1 98|<gdssetup> gave exit code: 37
520|0 1 25410 1 99|FAILED 
520|0 1 25410 1 100|GDSSETUP: TEST CASE sv_init4
520|0 1 25410 1 101|<gdssetup> gave exit code: 37
520|0 1 25410 1 102|FAILED 
520|0 1 25410 1 103|GDSSETUP: TEST CASE sv_init4.cleanup
520|0 1 25410 1 104|PASSED 
520|0 1 25410 1 105|GDSSETUP: TEST CASE sv_init5
520|0 1 25410 1 106|<gdssetup> gave exit code: 37
520|0 1 25410 1 107|FAILED 
520|0 1 25410 1 108|GDSSETUP: TEST CASE sv_init5.cleanup
520|0 1 25410 1 109|PASSED 
520|0 1 25410 1 110|GDSSETUP: TEST CASE sv_init6
520|0 1 25410 1 111|<gdssetup> gave exit code: 37
520|0 1 25410 1 112|FAILED 
520|0 1 25410 1 113|GDSSETUP: TEST CASE sv_init6.cleanup
520|0 1 25410 1 114|PASSED 
520|0 1 25410 1 115|GDSSETUP: TEST CASE sv_nodom1
520|0 1 25410 1 116|<gdssetup> gave exit code: 37
520|0 1 25410 1 117|FAILED 
520|0 1 25410 1 118|GDSSETUP: TEST CASE sv_nodom1.cleanup
520|0 1 25410 1 119|PASSED 
520|0 1 25410 1 120|GDSSETUP: TEST CASE sv_nodom2
520|0 1 25410 1 121|<gdssetup> gave exit code: 37
520|0 1 25410 1 122|FAILED 
520|0 1 25410 1 123|GDSSETUP: TEST CASE sv_nodom2.cleanup
520|0 1 25410 1 124|PASSED 
520|0 1 25410 1 125|GDSSETUP: TEST CASE sv_nodom3
520|0 1 25410 1 126|<gdssetup> gave exit code: 37
520|0 1 25410 1 127|FAILED 
520|0 1 25410 1 128|GDSSETUP: TEST CASE sv_nodom3.cleanup
520|0 1 25410 1 129|PASSED 
520|0 1 25410 1 130|GDSSETUP: TEST CASE sv_nodom4
520|0 1 25410 1 131|<gdssetup> gave exit code: 37
520|0 1 25410 1 132|FAILED 
520|0 1 25410 1 133|GDSSETUP: TEST CASE sv_nodom4.cleanup
520|0 1 25410 1 134|PASSED 
520|0 1 25410 1 135|GDSSETUP: TEST CASE sv_nodom5
520|0 1 25410 1 136|<gdssetup> gave exit code: 37
520|0 1 25410 1 137|FAILED 
520|0 1 25410 1 138|GDSSETUP: TEST CASE sv_nodom5.cleanup
520|0 1 25410 1 139|PASSED 
520|0 1 25410 1 140|GDSSETUP: TEST CASE sv_nodom6
520|0 1 25410 1 141|<gdssetup> gave exit code: 37
520|0 1 25410 1 142|FAILED 
520|0 1 25410 1 143|GDSSETUP: TEST CASE sv_nodom6.cleanup
520|0 1 25410 1 144|PASSED 
520|0 1 25410 1 145|GDSSETUP: TEST CASE end.setup
520|0 1 25410 1 146|PASSED 
220|0 1 7 10:04:35|NORESULT
410|0 1 1 10:04:36|IC End
400|0 2 1 10:04:37|IC Start
200|0 1 10:04:37|TP Start
520|0 1 25410 1 2|GDSSETUP: TEST CASE client1
520|0 1 25410 1 3|<gdssetup> gave exit code: 44
520|0 1 25410 1 4|FAILED 
520|0 1 25410 1 5|GDSSETUP: TEST CASE client2
520|0 1 25410 1 6|<gdssetup> gave exit code: 44
520|0 1 25410 1 7|FAILED 
520|0 1 25410 1 8|GDSSETUP: TEST CASE client3
520|0 1 25410 1 9|<gdssetup> gave exit code: 67
520|0 1 25410 1 10|FAILED 
520|0 1 25410 1 11|GDSSETUP: TEST CASE client4
520|0 1 25410 1 12|<gdssetup> gave exit code: 65
520|0 1 25410 1 13|FAILED 
520|0 1 25410 1 14|GDSSETUP: TEST CASE client5
520|0 1 25410 1 15|<gdssetup> gave exit code: 126
520|0 1 25410 1 16|FAILED 
520|0 1 25410 1 17|GDSSETUP: TEST CASE client5.cleanup
520|0 1 25410 1 18|PASSED 
520|0 1 25410 1 19|GDSSETUP: TEST CASE server1
520|0 1 25410 1 20|<gdssetup> gave exit code: 41
520|0 1 25410 1 21|FAILED 
520|0 1 25410 1 22|GDSSETUP: TEST CASE server2
520|0 1 25410 1 23|<gdssetup> gave exit code: 44
520|0 1 25410 1 24|FAILED 
520|0 1 25410 1 25|GDSSETUP: TEST CASE server3
520|0 1 25410 1 26|<gdssetup> gave exit code: 30
520|0 1 25410 1 27|FAILED 
520|0 1 25410 1 28|GDSSETUP: TEST CASE server4
520|0 1 25410 1 29|<gdssetup> gave exit code: 31
520|0 1 25410 1 30|FAILED 
520|0 1 25410 1 31|GDSSETUP: TEST CASE server5
520|0 1 25410 1 32|<gdssetup> gave exit code: 7
520|0 1 25410 1 33|FAILED 
520|0 1 25410 1 34|GDSSETUP: TEST CASE sv_domdef1
520|0 1 25410 1 35|<gdssetup> gave exit code: 126
520|0 1 25410 1 36|FAILED 
520|0 1 25410 1 37|GDSSETUP: TEST CASE sv_domdef2
520|0 1 25410 1 38|<gdssetup> gave exit code: 126
520|0 1 25410 1 39|FAILED 
520|0 1 25410 1 40|GDSSETUP: TEST CASE sv_domdef2.cleanup
520|0 1 25410 1 41|PASSED 
520|0 1 25410 1 42|GDSSETUP: TEST CASE sv_domdef3
520|0 1 25410 1 43|<gdssetup> gave exit code: 126
520|0 1 25410 1 44|FAILED 
520|0 1 25410 1 45|GDSSETUP: TEST CASE sv_domdef3.cleanup
520|0 1 25410 1 46|PASSED 
520|0 1 25410 1 47|GDSSETUP: TEST CASE sv_domdef4
520|0 1 25410 1 48|<gdssetup> gave exit code: 126
520|0 1 25410 1 49|FAILED 
520|0 1 25410 1 50|GDSSETUP: TEST CASE sv_domdef4.cleanup
520|0 1 25410 1 51|PASSED 
520|0 1 25410 1 52|GDSSETUP: TEST CASE sv_domdef5
520|0 1 25410 1 53|<gdssetup> gave exit code: 126
520|0 1 25410 1 54|FAILED 
520|0 1 25410 1 55|GDSSETUP: TEST CASE sv_domdef5.cleanup
520|0 1 25410 1 56|PASSED 
520|0 1 25410 1 57|GDSSETUP: TEST CASE sv_domdef6
520|0 1 25410 1 58|<gdssetup> gave exit code: 126
520|0 1 25410 1 59|FAILED 
520|0 1 25410 1 60|GDSSETUP: TEST CASE sv_domdef6.cleanup
520|0 1 25410 1 61|PASSED 
520|0 1 25410 1 62|GDSSETUP: TEST CASE sv_domnodef1
520|0 1 25410 1 63|<gdssetup> gave exit code: 126
520|0 1 25410 1 64|FAILED 
520|0 1 25410 1 65|GDSSETUP: TEST CASE sv_domnodef1.cleanup
520|0 1 25410 1 66|PASSED 
520|0 1 25410 1 67|GDSSETUP: TEST CASE sv_domnodef2
520|0 1 25410 1 68|<gdssetup> gave exit code: 126
520|0 1 25410 1 69|FAILED 
520|0 1 25410 1 70|GDSSETUP: TEST CASE sv_domnodef2.cleanup
520|0 1 25410 1 71|PASSED 
520|0 1 25410 1 72|GDSSETUP: TEST CASE sv_domnodef3
520|0 1 25410 1 73|<gdssetup> gave exit code: 126
520|0 1 25410 1 74|FAILED 
520|0 1 25410 1 75|GDSSETUP: TEST CASE sv_domnodef3.cleanup
520|0 1 25410 1 76|PASSED 
520|0 1 25410 1 77|GDSSETUP: TEST CASE sv_domnodef4
520|0 1 25410 1 78|<gdssetup> gave exit code: 126
520|0 1 25410 1 79|FAILED 
520|0 1 25410 1 80|GDSSETUP: TEST CASE sv_domnodef4.cleanup
520|0 1 25410 1 81|PASSED 
520|0 1 25410 1 82|GDSSETUP: TEST CASE sv_domnodef5
520|0 1 25410 1 83|<gdssetup> gave exit code: 126
520|0 1 25410 1 84|FAILED 
520|0 1 25410 1 85|GDSSETUP: TEST CASE sv_domnodef5.cleanup
520|0 1 25410 1 86|PASSED 
520|0 1 25410 1 87|GDSSETUP: TEST CASE sv_nodom1
520|0 1 25410 1 88|<gdssetup> gave exit code: 126
520|0 1 25410 1 89|FAILED 
520|0 1 25410 1 90|GDSSETUP: TEST CASE sv_nodom1.cleanup
520|0 1 25410 1 91|PASSED 
520|0 1 25410 1 92|GDSSETUP: TEST CASE sv_nodom2
520|0 1 25410 1 93|<gdssetup> gave exit code: 126
520|0 1 25410 1 94|FAILED 
520|0 1 25410 1 95|GDSSETUP: TEST CASE sv_nodom2.cleanup
520|0 1 25410 1 96|PASSED 
520|0 1 25410 1 97|GDSSETUP: TEST CASE sv_nodom3
520|0 1 25410 1 98|<gdssetup> gave exit code: 126
520|0 1 25410 1 99|FAILED 
520|0 1 25410 1 100|GDSSETUP: TEST CASE sv_nodom3.cleanup
520|0 1 25410 1 101|PASSED 
520|0 1 25410 1 102|GDSSETUP: TEST CASE sv_nodom4
520|0 1 25410 1 103|<gdssetup> gave exit code: 126
520|0 1 25410 1 104|FAILED 
520|0 1 25410 1 105|GDSSETUP: TEST CASE sv_nodom4.cleanup
520|0 1 25410 1 106|PASSED 
520|0 1 25410 1 107|GDSSETUP: TEST CASE sv_nodom5
520|0 1 25410 1 108|<gdssetup> gave exit code: 126
520|0 1 25410 1 109|FAILED 
520|0 1 25410 1 110|GDSSETUP: TEST CASE sv_nodom5.cleanup
520|0 1 25410 1 111|PASSED 
220|0 1 7 10:40:07|NORESULT
410|0 2 1 10:40:08|IC End
520|0 0 25410 1 1|GDSSETUP TEST ENDED
80|0 0 10:40:22|TC End
70||"FINISHED all TESTS using <gdssetup>"
900|10:40:22|TCC End

[8/16/94 public]
Fixed with OT11585 (addition of exit(0)).

[8/17/94 public]
Re-opened.  Results from last night's build on an HP:

Results of GDSSETUP Tests:  Wed Aug 17 13:32:59 EDT 1994
---------------------------------------------------

User: zeliff (0) TCC Start, Command Line: /dcetest/dcelocal/test/tet/bin/tcc -e functional/directory/gds gdssetup 
"STARTING all TESTS using <gdssetup>"

TC Start, scenario ref 49-1

<begin.setup> gave exit code: 4 -> FAILED 
<gdssetup> gave exit code: 44 -> FAILED 
<gdssetup> gave exit code: 44 -> FAILED 
<gdssetup> gave exit code: 67 -> FAILED 
<gdssetup> gave exit code: 65 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 41 -> FAILED 
<gdssetup> gave exit code: 44 -> FAILED 
<gdssetup> gave exit code: 30 -> FAILED 
<gdssetup> gave exit code: 31 -> FAILED 
<gdssetup> gave exit code: 7 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
GDSSETUP: TEST CASE sv_domdef5.cleanup -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
GDSSETUP: TEST CASE sv_domdef6.cleanup -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
GDSSETUP: TEST CASE sv_domnodef5.cleanup -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
GDSSETUP: TEST CASE sv_nodom5.cleanup -> FAILED 
"FINISHED all TESTS using <gdssetup>"
TCC End

------------------------------

Total PASSED =  12
Total FAILED =  31

[08/19/94 public]
Fix submitted.

[8/23/94 public]
Fixed via FVT.



CR Number                     : 11526
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : fvt
Short Description             : incorrect ordering of testcase results
Reported Date                 : 8/2/94
Found in Baseline             : 1.1
Found Date                    : 8/2/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : gdssetup_all
Sensitivity                   : public

[8/2/94 public]

The cleanup() routine in the gdssetup_all testsuite collects the results
logs of the individual testcases into one consolidated log.  It uses the
following process to collect the logs:

        for xfile in `ls valid*.log`
        do
           echo "" >> $OUTDIR/gdssetup_valid.log
           echo "---> Start of  $xfile" >> $OUTDIR/gdssetup_valid.log 
           echo "" >> $OUTDIR/gdssetup_valid.log
           cat -s $xfile >> $OUTDIR/gdssetup_valid.log
        done

This, however, results in the <testcase>.cleanup log being copied before
the the actual testcase log.  The logic should be:

	for testcase in `cat lib/valid/TESTCASES`
	do
		xfile="$testcase.log"
		echo "" >> $OUTDIR/gdssetup_valid.log
	        echo "---> Start of  $xfile >> $OUTDIR/gdssetup_valid.log 
                echo "" >> $OUTDIR/gdssetup_valid.log
                cat -s $xfile >> $OUTDIR/gdssetup_valid.log
	done

This will result in the consolidated log file being created in the same
order the testcases were run.

[08/19/94 public]
Fix submitted.

[8/29/94 public]
Verified via FVT.



CR Number                     : 11525
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : fvt filter
Short Description             : gdssetup filter should
identify failing testcase
Reported Date                 : 8/2/94
Found in Baseline             : 1.1
Found Date                    : 8/2/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : test/functional/directory/gds/ts/lib/shfuncs
Sensitivity                   : public

[8/2/94 public]
The journal.log prodcued by TET_filter.gdssetup shows only the following
for failing testcases.  It should identify each testcase that failed.

Results of GDSSETUP Tests:  Tue Aug  2 10:41:05 EDT 1994
---------------------------------------------------

User: zeliff (0) TCC Start, Command Line: /dcetest/dcelocal/test/tet/bin/tcc -e functional/directory/gds gdssetup 
"STARTING all TESTS using <gdssetup>"

TC Start, scenario ref 49-1

<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 44 -> FAILED 
<gdssetup> gave exit code: 44 -> FAILED 
<gdssetup> gave exit code: 67 -> FAILED 
<gdssetup> gave exit code: 65 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 41 -> FAILED 
<gdssetup> gave exit code: 44 -> FAILED 
<gdssetup> gave exit code: 30 -> FAILED 
<gdssetup> gave exit code: 31 -> FAILED 
<gdssetup> gave exit code: 7 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
"FINISHED all TESTS using <gdssetup>"
TCC End

------------------------------

Total PASSED =  45
Total FAILED =  55

[08/19/94 public]
Fix submitted.

[8/23/94 public]
Verified via FVT.



CR Number                     : 11474
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : 
Short Description             : Remove true, false and boolean
Reported Date                 : 7/28/94
Found in Baseline             : 1.1b12
Found Date                    : 7/28/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : directory/gds/ASN1/allocm.c
                                             directory/gds/ASN1/oid.c
Sensitivity                   : public

[7/28/94 public]
Remove local definitions and typedef of true, false and boolean.
Use dce.h instead.

[8/2/94 public]
verified by manual inspection.



CR Number                     : 11471
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : administration - gdssysadm
Short Description             : wrong error message
Reported Date                 : 7/28/94
Found in Baseline             : 1.1b12
Found Date                    : 7/28/94
Severity                      : E
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : adm/usradmin/d20admin.c
Sensitivity                   : public

[7/28/94 public]

When trying to activate an already activated Directory system, error
message is "Error: Cannot change directory" instead of
 "Error: The directory system is active !"

[8/2/94 public]
Can you provide more information on this fix.  The only difference I see in
this file is:

1849c1845
<     if(*process_index != 0)
---
>     if(process_index != 0)

[8/2/94 public]
That's the fix. You can't compare different types.
According to several C Bibles, comparison of 0 instead of
NULL (or vice versa) is a common mistake in C.



CR Number                     : 11467
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : sap
Short Description             : Errors in SAP
Reported Date                 : 7/28/94
Found in Baseline             : 1.1b12
Found Date                    : 7/28/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : see below
Sensitivity                   : public

[7/28/94 public]
The following bugs had been found in the Strong Authentication Package:

1. om_get of CERTIFICATE_PAIR returns descriptor that was not present
   in preceding om_put.
2. add_entry of STRONG_AUTEHTICATION_USER or CERTIFICATION_AUTHORITY
   ignores CERTIFICATE_SUBLISTS after the first one.
3. search for CERTIFICATEs missing attribute values.

Together with the bug fix, new testcases for these bugs are promised.

[8/10/94 public]
Affected files:
./directory/gds/adm/admin/d20spec_msk.c
./directory/gds/asn1/DUA/gdsauth.asn1
./directory/gds/asn1/d2asap.c
./directory/gds/dsa/d26sntx.c
./directory/gds/dua/d21sap.c
./directory/gds/h/d2dir.h
./directory/xds/dsPDelete.c
./directory/xds/dsPGet.c
./directory/xds/dsPPut.c
./directory/xds/dsTrace.c
./directory/xds/h/sapdef.h
./directory/xds/h/xdsalloc.h
./directory/xds/h/xdsiapl.h
./directory/xds/h/xdsp.h
./test/directory/xds/xt_parms.h
./test/directory/xds/xt_rValue.c
./test/directory/xds/xt_test.c
./test/functional/directory/xds/ts/xds/lib/valid/Makefile
./test/functional/directory/xds/ts/xds/lib/valid/add_entry35v
./test/functional/directory/xds/ts/xds/lib/valid/add_entry36v
./test/functional/directory/xds/ts/xds/lib/valid/add_entry37v
./test/functional/directory/xds/ts/xds/lib/valid/add_entry38v
./test/functional/directory/xds/ts/xds/lib/valid/read42v
./test/functional/directory/xds/ts/xds/lib/valid/read43v
./test/functional/directory/xds/ts/xom/lib/valid/Makefile
./test/functional/directory/xds/ts/xom/lib/valid/get12v
./test/functional/directory/xds/ts/xom/lib/valid/get13v
./test/functional/directory/xds/ts/xom/lib/valid/get14v
./test/functional/directory/xds/ts/xom/lib/valid/instance7v
./test/functional/directory/xds/ts/xom/lib/valid/instance8v
./test/functional/directory/xds/ts/xom/lib/valid/instance9v
./test/functional/directory/xds/ts/xom/lib/valid/put10v
./test/functional/directory/xds/ts/xom/lib/valid/put13v
./test/functional/directory/xds/ts/xom/lib/valid/put14v
./test/functional/directory/xds/ts/xom/lib/valid/put9v
  List of defunct files:
./directory/xds/dsDispatch.c    defunct



CR Number                     : 11460
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gdscp
Short Description             : unnecessary script gdscp
Reported Date                 : 7/27/94
Found in Baseline             : 1.1b12
Found Date                    : 7/27/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : test/functional/directory/gds/ts/gdscp/gdscp
Sensitivity                   : public

[7/27/94 public]
test/functional/directory/gds/ts/gdscp/gdscp has to be defuncted.
It is not used any more (has been replaced by gdscp_all).



CR Number                     : 11458
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : administration
Short Description             : DSA names not exact
Reported Date                 : 7/27/94
Found in Baseline             : 1.1b12
Found Date                    : 7/27/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : adm_iapl/d20specdir.c
Sensitivity                   : public

[7/27/94 public]

DSA names are not passed exactly to the DUA, but normed. One of the
consequence is that the DSA name is displayed later with upper-case
characters converted to lower case characters.

[8/2/94 public]
Fix verified by manual inspection



CR Number                     : 11456
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : administration
Short Description             : Certificate attr.date format wrong
Reported Date                 : 7/27/94
Found in Baseline             : 1.1b12
Found Date                    : 7/27/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : d20spec_msk.c
Sensitivity                   : public

[7/27/94 public]

The administration of gds can display Certificates attributes.
Attributes with this syntax contain dates in a format describe by
X.208 standard.

The administration was not using a valid format to read the date.
It tries to read the date in the format

YYMMDDHHmmSSZ

where YY is year, MM month, DD date, HH hour, mm min, SS seconds.

But the correct format is:

YYMMDDHHmmZ

or YYMMDDHHmmSS+/-HHmm
               ^^^^^^^
               timezone

[8/2/94 public]
fix verified by manual inspection.



CR Number                     : 11438
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : test.mk
Short Description             : test.mk contains old gds (ros) stuff
Reported Date                 : 7/26/94
Found in Baseline             : 1.1
Found Date                    : 7/26/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : src/test/test.mk
Sensitivity                   : public

[7/26/94 public]

test.mk contains:

.if ${MAKESUB}=="test/directory/gds/ros/testenv/"
  RIOS_LIBS     ?= -lxti
.endif

I'd like to delete this - ros/testenv doesn't exist.

[08/04/94 public]
Submitted on 1994/07/27.



CR Number                     : 11436
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : build
Short Description             : gds copies some files twice to the install tree
Reported Date                 : 7/26/94
Found in Baseline             : 1.1
Found Date                    : 7/26/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : gds/cacheadm/Makefile
Sensitivity                   : public

[7/26/94 public]

In gds/cacheadm/Makefile you find the lines:

LOCALFILES      = admscheme.dat common.dat newscheme.dat countries.dat
DATAFILES       = ${LOCALFILES:S/.dat//g}
ILIST           = ${LOCALFILES:S/.dat//g}
IDIR            = /share/var/adm/directory/gds/adm/
VPATH           = ../adm

This duplicates what is done in gds/adm/Makefile.

[07/26/94 public]
typo in subject field.

[08/04/94 public]
Submitted on 1994/07/27.



CR Number                     : 11435
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : mx300
S/W Ref Platform              : sinix
Component Name                : gds
Subcomponent Name             : stubs
Short Description             : libsocket is linked twice for SVR4
Reported Date                 : 7/26/94
Found in Baseline             : 1.1b12
Found Date                    : 7/26/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : directory/gds/stub/SVR4/machdep.mk
Sensitivity                   : public

[7/26/94 public]
-lsocket is not needed in machdep.mk, because -lsocket_r is taken from 
the general SVR4 rules.



CR Number                     : 11432
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : xds tet_scen
Short Description             : all_no_switch scenario should be in tet_scen
Reported Date                 : 7/26/94
Found in Baseline             : 1.1
Found Date                    : 7/26/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : tet_scen
Sensitivity                   : public

[7/26/94 public]

The test scenario all_no_switch disappeared from the XDS tet_scen with
the last submit from SNI Munich. It should be reintroduced.

[8/2/94 public]
verified by manual inspection



CR Number                     : 11417
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : gds
Subcomponent Name             : fvt
Short Description             : switch test syntax error
Reported Date                 : 7/25/94
Found in Baseline             : 1.1
Found Date                    : 7/25/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : local_.TET.admin
                                             local_TET.api
Sensitivity                   : public

[7/25/94 public]

While running 'all' XDS tests:

  Run_Switch_Test switch_all_ST
  Configure DCE using cell_name:  c=ie\/o=digital
  Run_Switch_Test[4]: dce_config:  not found.
  
  Message from <local_TET.admin> 
	  dce_config returned with ERROR - STOP
  
'dce_config' should be an absolute path (/etc/dce_config)

[7/26/94 public]
NO!! The person who runs the tests must set the PATH to find the
executables. You are expecting that each machine has the
same structure of the executables.
Please downgrade or cancel.

[8/11/94 public]
I disagree.  There isn't a particular reason why you would expect /etc to
be on root's path -- this tends to be OS dependent. If you don't want to
prefix dce_config with /etc, /opt/dcelocal/bin would be a workable
substitute.

[8/11/94 public]
My mistake, this was, indeed, fixed.  Verified by inspection.



CR Number                     : 11389
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : test
Short Description             : Typo: RCSFile must be RCSfile in version string
Reported Date                 : 7/22/94
Found in Baseline             : 1.1b12
Found Date                    : 7/22/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : gds/ts/config/config.cmd
					     gds/ts/config/config.env.sed
					     xds/ts/switch/switch_DNS
					     in test/functional/directory
Sensitivity                   : public

[7/22/94 public]
The filename is not added by the ODE tools, because the tag name RCSfile
is wrong.



CR Number                     : 11377
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 10942
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : portgd
Short Description             : Need to document existence of
FSF code
Reported Date                 : 7/21/94
Found in Baseline             : 1.1
Found Date                    : 7/21/94
Severity                      : E
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b23
Affected File(s)              : porting and testing guide
Sensitivity                   : public

[7/21/94 public]

Extracted from 10942:

	Our lawyers tell us that any FSF code must be in seperate
	directories from OSF copyrighted code.  This is so licensees who
	choose not to work with FSF code can easily identify it.

	Therefore, the gnu_* files will be moved to directory/gds/nds/FSF/
	and the makefile will be changed accordingly.

This has been done, but the existence of these files should be explicitly
called out in the Porting and Testing Guide (and, perhaps, the release
notes?)

[8/24/98]

Changed owner to Doug Weir (Port Gd owner).  Added dce-relnotes to mail
list so relnotes owner can track any required notes work.

[10/17/94 public]
Done; should be updated by Doug Weir.

[10/25/94 public]
It's there.



CR Number                     : 11357
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : sinix
Component Name                : gds
Subcomponent Name             : tet
Short Description             : `hostname` not found
Reported Date                 : 7/19/94
Found in Baseline             : 1.1
Found Date                    : 7/19/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b15
Affected File(s)              : see list below
Sensitivity                   : public

[7/19/94 public]

Running tetized tests on SVR4 the following happens:

./local_TET.api[132]: hostname:  not found

...


`hostname` is /usr/ucb/hostname on SVR4;

/usr/ucb is not in the normal PATH for root on SVR4.

[8/2/94 public]
What was the fix for this defect?  I can't find any obvious change related
to this in the source code.

[8/2/94 public]
See PATH. It has the new component /usr/ucb .

[8/11/94 public]
instead of hostname, try uname -n.  hostname is BSD.

the HP man page for uname says:

STANDARDS CONFORMANCE
     uname:SVID2,XPG2,XPG3,POSIX.2

[8/12/94 public]
Howard is right. Reopened. hostname is used in the following files:
	src/test/functional/directory/gds/tools/local_TET.admin
	src/test/functional/directory/gds/ts/config/config.env.sed
	src/test/functional/directory/xds/tools/local_TET.api
	src/test/functional/directory/xds/ts/mhs/mhs_st
	src/test/functional/directory/xds/ts/scripts/TEST
	src/test/functional/directory/xds/ts/scripts/_testall
	src/test/functional/directory/xds/ts/scripts/_ttestall
	src/test/functional/directory/xds/ts/scripts/result
	src/test/functional/directory/xds/ts/switch/switch_DNS
	src/test/functional/directory/xds/ts/switch/switch_mt
	src/test/functional/directory/xds/ts/switch/switch_st
	src/test/functional/directory/xds/ts/xds/xds_mt
	src/test/functional/directory/xds/ts/xds/xds_st
	src/test/functional/directory/xds/ts/xom/xom_mt
	src/test/functional/directory/xds/ts/xom/xom_st
	src/test/functional/directory/xds/ts/xoms/xoms_mt
	src/test/functional/directory/xds/ts/xoms/xoms_st
and in most of them I don't see the setting of PATH.
In all these files uname -n should replace hostname.



CR Number                     : 11354
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : 
Short Description             : code cleanup and minor fixes
Reported Date                 : 7/19/94
Found in Baseline             : 1.1b12
Found Date                    : 7/19/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : gds/adm/adm_tree/d21addap.c
					     gds/adm/adm_tree/d21modap.c
					     gds/adm/setup/gsuset.c
					     gds/dsa/d26sntx.c
					     gds/gdscp/gct/gctbind.c
					     gds/step/gstapdu.c
					     gds/step/gstep.c
					     gds/util/d27obid.c
					     gds/util/d27t61.c
					     xds/h/Makefile
Sensitivity                   : public

[7/19/94 public]
Code cleanup, elimination of warnings, a bug fix in the modify
operation and for the ds_version call in SAP Package.

[7/28/94 public]
Closed.



CR Number                     : 11338
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : libxti
Short Description             : make libtsi threadsafe
Reported Date                 : 7/18/94
Found in Baseline             : 1.1
Found Date                    : 7/18/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : gds/tsi/cmxl.c, cmxtrace.h
					     cmxtrace.c, cmxxup.c
Sensitivity                   : public

[7/18/94 public]
Fix for global variable in libtsi to make it threadsafe.

[8/2/94 public]
Verified via manual inspection of code.



CR Number                     : 11322
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : gds_sec
Short Description             : TET reports PASSED even for core dumping testcases
Reported Date                 : 7/15/94
Found in Baseline             : 1.1
Found Date                    : 7/15/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : gds/ts/gdssetup/gdssetup_all
					     gds/ts/gds_sec/gds_sec_all
					     gds/ts/lib/shfuncs
Sensitivity                   : public

[7/15/94 public]


gds_sec tests fail - gdscp core dumps.
But TET reports PASSED.

[07/19/94 public]
Here is that what I have had on the screen:

dcecp dcecp_add.tcl
rgy_add.sh
local_start: Configure GDS

Local CACHE administration (DIR-IDs=11)
Local CACHE administration (DIR-IDs=12)
Waiting 60 sec. for coming up the DSA processes
Adding objects in DSA-11
Adding objects in DSA-12
Now, testing is going on ... 
gds_sec (tp1/1): Waiting 60 sec. for coming up the DSA processes
/bin/ksh: 11155 Bus error(coredump)
gds_sec (tp1/2): Waiting 60 sec. for coming up the DSA processes
/bin/ksh: 11280 Memory fault(coredump)
gds_sec (tp1/3): Waiting 60 sec. for coming up the DSA processes
/bin/ksh: 11396 Memory fault(coredump)
gds_sec (tp2/1): Waiting 60 sec. for coming up the DSA processes
/bin/ksh: 11535 Memory fault(coredump)
gds_sec (tp3/1): Waiting 60 sec. for coming up the DSA processes
/bin/ksh: 11696 Bus error(coredump)
/bin/ksh: 11707 Bus error(coredump)
/bin/ksh: 11714 Bus error(coredump)
gds_sec (tp4/1): Waiting 60 sec. for coming up the DSA processes
/bin/ksh: 11875 Bus error(coredump)
/bin/ksh: 11884 Memory fault(coredump)
/bin/ksh: 11891 Bus error(coredump)
/bin/ksh: 11898 Memory fault(coredump)
/bin/ksh: 11905 Memory fault(coredump)
/bin/ksh: 11915 Memory fault(coredump)

rgy_del.sh
dcecp dcecp_del.tcl
local_clean: Deconfigure GDS


Here is the journal file:

0|1.10 13:39:11 19940719|User: keutel (0) TCC Start, Command Line: /dcetest/dcelocal/test/tet/bin/tcc -e functional/directory/gds gds_sec 
20|/dcetest/dcelocal/test/tet/functional/directory/gds/tetexec.cfg 1|Config Start
30||TET_VERSION=1.10
30||TET_OUTPUT_CAPTURE=False
30||TET_RESCODES_FILE=tet_code
30||TET_EXEC_IN_PLACE=True
30||TET_TAPE_DEVICE=/dev/rmt0
40||Config End
70||"STARTING all TESTS using DCE authentification"
10|0 /gds_sec/gds_sec_all 13:39:12|TC Start, scenario ref 57-1
15|0 1.10 4|TCM Start
520|0 0 10571 1 1|TESTING (DCE_Security) STARTED
400|0 1 1 13:45:50|IC Start
200|0 1 13:45:51|TP Start
520|0 1 10571 1 2|DCE_Security DAP tests with dce_login gds_cl1
520|0 1 10571 1 3|DCE_Security DAP test: sec_dap_b2.tcl
520|0 1 10571 1 4|PASSED 
520|0 1 10571 1 5|DCE_Security DAP test: sec_dap_b4.tcl
520|0 1 10571 1 6|FAILED 
520|0 1 10571 1 7|DCE_Security DAP test:  sec_dap_b1.tcl
520|0 1 10571 1 8|PASSED 
520|0 1 10571 1 9|DCE_Security DAP test:  sec_dap_b3.tcl
520|0 1 10571 1 10|PASSED 
220|0 1 7 13:57:37|NORESULT
410|0 1 1 13:57:37|IC End
400|0 2 1 13:57:38|IC Start
200|0 1 13:57:38|TP Start
520|0 1 10571 1 2|DCE_Security DAP test with dce_login gds_zero
520|0 1 10571 1 3|DCE_Security DAP test:  sec_dap_b1.tcl (gds_zero)
520|0 1 10571 1 4|PASSED 
220|0 1 7 14:01:08|NORESULT
410|0 2 1 14:01:09|IC End
400|0 3 1 14:01:10|IC Start
200|0 1 14:01:10|TP Start
520|0 1 10571 1 2|DCE_Security DSP tests with dce_login gds_cl1
520|0 1 10571 1 3|DCE_Security DSP test:  sec_dsp_b1.tcl
520|0 1 10571 1 4|PASSED 
520|0 1 10571 1 5|DCE_Security DSP test:  sec_dsp_b2.tcl
520|0 1 10571 1 6|PASSED 
520|0 1 10571 1 7|DCE_Security DSP test:  sec_dsp_b3.tcl
520|0 1 10571 1 8|PASSED 
220|0 1 7 14:07:34|NORESULT
410|0 3 1 14:07:34|IC End
400|0 4 1 14:07:35|IC Start
200|0 1 14:07:35|TP Start
520|0 1 10571 1 2|DCE_Security TDT tests with dce_login gds_cl1
520|0 1 10571 1 3|DCE_Security TDT test:  sec_tdt_b1.tcl
520|0 1 10571 1 4|PASSED 
520|0 1 10571 1 5|DCE_Security TDT test:  sec_tdt_b1.tcl (dir12)
520|0 1 10571 1 6|PASSED 
520|0 1 10571 1 7|DCE_Security TDT test:  sec_tdt_b2.tcl
520|0 1 10571 1 8|PASSED 
520|0 1 10571 1 9|DCE_Security TDT test:  sec_tdt_b3.tcl
520|0 1 10571 1 10|PASSED 
520|0 1 10571 1 11|DCE_Security TDT test:  sec_tdt_b4.tcl
520|0 1 10571 1 12|PASSED 
520|0 1 10571 1 13|DCE_Security TDT test:  sec_tdt_b5.tcl
520|0 1 10571 1 14|PASSED 
220|0 1 7 14:14:37|NORESULT
410|0 4 1 14:14:37|IC End
520|0 0 10571 1 1|TESTING (DCE_Security) FINISHED
80|0 0 14:16:41|TC End
70||"FINISHED all TESTS using DCE authentification"
900|14:16:41|TCC End

Running ../../tools/TET_filter.gds_sec journal I get journal.log:

Results of GDS Security Tests:  Tue Jul 19 14:20:10 EDT 1994
-------------------------------------------------------------

User: keutel (0) TCC Start, Command Line: /dcetest/dcelocal/test/tet/bin/tcc -e functional/directory/gds gds_sec 
"STARTING all TESTS using DCE authentification"

TC Start, scenario ref 57-1

DCE_Security DAP test: sec_dap_b4.tcl -> FAILED 
"FINISHED all TESTS using DCE authentification"
TCC End

------------------------------

Total PASSED =  13
Total FAILED =  1


This doesn't seem to be true.

You find in gds/ts/gds_sec a lot of *.log files: all are empty except
dap_b4.log:

TEST : sec_dap_b4
EXPECTED : anonymous bind to DSA2 ok
The requestor does not have permission to perform the operation.
EXPECTED : show protected attr failed
EXPECTED : simple bind to DSA2 ok
 1) /C=re/O=sni/OU=ap2/CN=two
    User-Password : \x73\x65\x63\x72\x65\x74\x32
EXPECTED : show protected attr succeeded
Some part of the directory is currently not available.
UNEXPECTED : DCE bind to DSA2 failed
Perform bind operation first.
UNEXPECTED : show protected attribute failed

The main reason for the "PASSED" in the journal file seems to be 
that gdscp is core dumping before anything is written to <testcase>.log.



CR Number                     : 11320
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : gds_sec
Short Description             : gds_sec_all invokes ksh wrong
Reported Date                 : 7/15/94
Found in Baseline             : 1.1
Found Date                    : 7/15/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : ts/gds_sec/gds_sec_all
Sensitivity                   : public

[7/15/94 public]

When running gds_sec etsts via TET I get:

gds_sec (tp3/1): Waiting 60 sec. for coming up the DSA processes
ksh: gdscp /dcetest/dcelocal/test/tet/functional/directory/gds/ts/gds_sec/lib/sec_dsp_b1.tcl > ./dsp_b1.log 2>&1: cannot open
grep: can't open dsp_b1.log

The reason seems to be that "ksh 'gdscp ...'" is wrong:
it should be "ksh -c 'gdscp ...'".

"ksh 'gdscp ...'" works on AT386 but not on HP800 .

"ksh -c 'gdscp ...'" works on both platforms - so I will submit this.
Hopefully it'll also work on RIOS and SVR4 ...

[07/15/94 public]
Fix submitted.

[8/2/94 public]
Fix verified by fvt



CR Number                     : 11317
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : admscheme
Short Description             : admscheme.dat is OLD
Reported Date                 : 7/15/94
Found in Baseline             : 1.1
Found Date                    : 7/15/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : gds/adm/admscheme.dat
Sensitivity                   : public

[7/15/94 public]

The admscheme.dat file in /project/dce/build/dce1.1/src/directory/gds/adm
is much older than the current version in Munich.
For some reason it wasn't submitted - but it has to be submitted.
Norbert: could you check if your "dcediff" script has forgotten
more files - esp. data files without history?

[07/18/94 public]
I submitted the new admscheme.dat.

[7/28/94 public]
Closed.



CR Number                     : 11316
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : TET tests
Short Description             : TET overwrites XDS_LOG
Reported Date                 : 7/15/94
Found in Baseline             : 1.1
Found Date                    : 7/15/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : 
						gds/ts/admin/cacheadm
						gds/ts/admin/dsa
						gds/ts/admin/scheme
						gds/ts/admin/shadow
						gds/ts/admin/subtree
						gds/ts/gdscp/gdscp
						gds/ts/gdscp/gdscp_all
						gds/ts/gdssetup/gdssetup_all
						gds/ts/gds_sec/gds_sec_all
						xds/ts/mhs/mhs_st
						xds/ts/switch/switch_mt
						xds/ts/switch/switch_st
						xds/ts/xds/xds_mt
						xds/ts/xds/xds_st
						xds/ts/xom/xom_mt
						xds/ts/xom/xom_st
						xds/ts/xoms/xoms_mt
						xds/ts/xoms/xoms_st
Sensitivity                   : public

[7/15/94 public]

The scripts used by TET for gds and xds testing overwrite
D2_LOG and XDS_LOG: if a TET user has set them then TET unsets them.
There is no reason for doing that: 

1.) D2_LOG isn't used in the DUA any more. D2_LOG is used to
specify the SVC routing of the gds processes - but TET can set
what ever it wants - it is overwritten by $CL/.profile
executed by gdssysadm when activating GDS.

2.) TET shouldn't unset XDS_LOG. If a testcase fails and you want
to reproduce it with XDS tracing switched on you should be able to do that.
The TET user setting XDS_LOG should know that he is going to write
many logfiles which could fill the disc partition.

I will remove the lines concerning the unsetting of XDS_LOG and D2_LOG.

[07/15/94 public]
Fix submitted.

[7/28/94 public]



CR Number                     : 11313
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : switch_mt TET testcases
Short Description             : typo in switch_mt (TET)
Reported Date                 : 7/14/94
Found in Baseline             : 1.1
Found Date                    : 7/14/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : xds/ts/switch/switch_mt
Sensitivity                   : public

[7/14/94 public]

typo in xds/ts/switch/switch_mt:

find ${TET_EXECUTE}/switch/lib/threads_as-name *.log .....


--->

find ${TET_EXECUTE}/switch/lib/threads_as -name *.log .....


I wiill do this.

[07/14/94 public]
Submitted.

[7/28/94 public]
Verified by inspection.



CR Number                     : 11312
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : TET scripts
Short Description             : TET scripts sleep too often
Reported Date                 : 7/14/94
Found in Baseline             : 1.1
Found Date                    : 7/14/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : 
./test/functional/directory/gds/ts/config/config_gds-admin_cache.sed
./test/functional/directory/gds/ts/config/config_gds-admin_cache.sh
./test/functional/directory/gds/ts/config/two_dsas.sed
./test/functional/directory/gds/ts/config/two_dsas.sh
Sensitivity                   : public

[7/14/94 public]

TET scripts sleep too often - i.e. after calling local_dsa12_admin.

I will fix this.

[07/14/94 public]
Submitted.



CR Number                     : 11310
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : filter
Short Description             : two TET_filter need a "ksh" in the first line
Reported Date                 : 7/14/94
Found in Baseline             : 1.1
Found Date                    : 7/14/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : TET_filter.gds_sec,TET_filter.gdssetup
Sensitivity                   : public

[7/14/94 public]

TET_filter.gdssetup and TET_filter.gds_sec should have a 

#!/bin/ksh

in the first line.

[07/14/94 public]
Submitted.



CR Number                     : 11299
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : gdssetup tests
Short Description             : gdssetup tests should cleanup in the end
Reported Date                 : 7/14/94
Found in Baseline             : 1.1
Found Date                    : 7/14/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : ts/gdssetup/lib/valid/end.setup
Sensitivity                   : public

[7/14/94 public]

When you run all gdssetup tests via TET then you have in the end
of the tests an activated GDS with 8 configured dir. id's.
This makes it impossible to create a new dir. id -
the new DSA's do not start, and if you try gdsditadm you
get the semaphore (errno 28) error.
gdssetup tests should delete all dir. id's configured by these tests.

[07/19/94 public]
Still the same behaviour: dir.id's 5, 6, 7, 8 are configured when
gdssetup tests are finished.

[07/20/94 public]
Fixed with today's submission.

[8/2/94 public]
fix verified by fvt



CR Number                     : 11295
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : gdsditadm
Short Description             : code cleanup needed for d20_dir_id stuff
Reported Date                 : 7/14/94
Found in Baseline             : 1.1
Found Date                    : 7/14/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : d20logon.c
Sensitivity                   : public

[7/14/94 public]

The gds_sec tests on HP do not run today.
The reason is:

d20getat.c declares

extern int      d20_dir_id;             /* current directory-id in use  */
                                        /* (defined in d20logon.c)      */

- but d20logon.c has :

signed16        d20_dir_id;  /* directory identifier                */

This gives problems when calling in ds0_502_get_attr

d20_search_auth_mech(d20_dir_id, &d20_auth_mech_configured).

In ds0_502_get_attr d20_dir_id is 11 for the batch file used
for the initialization of gds_sec tests,
in d20_search_auth_mech( int my_dir_id, int *my_auth_mech ) you have

my_dir_id = 761234.

(Sometimes this works - yesterday i.e. ...)

I did a temporary fix - gdsditadm works now.
But I let this defect open because the whole handling of d20_dir_id
should be checked.
A `cd /project/dce/build/dce1.1/src/directory/gds/adm;grep d20_dir_id */*'
gives:

adm_dump/d20caiapl.c:extern  short       d20_dir_id;     /* directory identifier                */
adm_dump/d20caiapl.c:plbind.d21_1dir_id = d20_dir_id ;
adm_dump/d20dpfile.c:  D2_STLONG(val[6], (signed32) del_info->d20_dir_id);
adm_dump/d20dpfile.c:  del_info->d20_dir_id     = (signed16) D2_LDLONG(val[6]);
adm_dump/d20hdlsub.c:    parblk->d20_Bdir_id = del_info.d20_dir_id;
adm_dump/d20hdlsub.c:  del_info.d20_dir_id     = parblk->d20_Bdir_id;
adm_iapl/d20bind.c: signed16 d20_dir_id;                /* directory identifier*/
adm_iapl/d20bind.c:parblk.d21_1dir_id    = d20_dir_id;
adm_iapl/d20init.c:signed16        d20_bid, d20_dir_id ;     /* bind-, directory identifier */
adm_iapl/d20init.c:        info.dir_id = d20_dir_id ;
admin/d20getat.c:extern int     d20_dir_id;             /* current directory-idin use   */
admin/d20getat.c:                                   if( d20_search_auth_mech(d20_dir_id,
admin/d20getat.c:                                       if( d20_search_auth_mech(d20_dir_id,
admin/d20logon.c:  signed16        d20_dir_id;  /* directory identifier                */
admin/d20logon.c:plbind.d21_1dir_id = d20_dir_id ;
admin/d20logon.c:               d20_dir_id = (signed16) * ((signed32 *) d20_secifields[DS_SEC_DIR]);
admin/d20logon.c:               plbind.d21_1dir_id = d20_dir_id ;
admin/d20logon.c:               plbind.d21_1bind_id = d20_bid = d20_dir_id;
admin/d20logon.c:               loc_dsa = d20_check_bind_dsa(dsa_name,p_env,d20_dir_id);
admin/d20logon.c:                       plbind->d21_1dir_id = d20_dir_id =
admin/d20logon.c:    plfktE.d20_Edir_id = d20_dir_id;
admin/d20msk21.c:static signed32        d20_dir_id = 1;
admin/d20msk21.c:char *d20_secifields[] = { (char *) &d20_dir_id, (char *) &d20_sec_mech } ;
admin/d20msk21.c:       D20_CGET,  HALBHELL,  4, 70, (char *) &d20_dir_id,             "%-2d", 0, FALSE, FALSE,

This doesn't look very nice.


Norbert: Feel free to reassign it to Jean-Marc if you want.

[07/14/94 public]
Temporary fix submitted. Priority and Severity decreased.
But I'm sure that there are still problems - so I let it open.

[07/20/94 public]
Changed subject field - it's a code cleanup issue, not blocking gdssec tests.



CR Number                     : 11279
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 11530
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gds_sec tetized tests
Short Description             : gds_sec tests need a running C-Stub
Reported Date                 : 7/13/94
Found in Baseline             : 1.1
Found Date                    : 7/13/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : 
	test/functional/directory/gds/tools/local_TET.admin
	test/functional/directory/gds/ts/config/gds_sec_start.sh
	test/functional/directory/xds/tools/local_TET.api
Sensitivity                   : public

[7/13/94 public]

If you reinstall DCE and start with running gds_sec tests via TET
they do fail.
The reason is that the cache of dir. id 1 is not configured at all.
You have to enter the Client address into the cache of dir. id 1.
Then the C-Stub will run, and the initialization of dir.id 11 and dir.id 12
(using save/copy subtree) works fine.

[8/2/94 public]
Fix verified by fvt.

[08/12/94 public]
Reopened. If you run all FVT all works fine because the gds admin tests 
enter the C-Stub address into the cache of dir. id. 1.
If you run gds_sec tests first they will fail - they still 
don't put anything into the cache of dir. id. 1.
That is the reason why 11530 occured.

[8/12/94 public]
Bumped priority.

[08/18/94 public]
Fix submitted.

[8/23/94 public]

Re-opened.  Seeing the same problems again with bl16.  I've run the
following tests in sequence:

	admin (all)
	gdscp
	gdssetup

Now when I run gds_sec the initialization of the test fails.  The first
indication is the error message from gdscp upon the following command:

  Error: A miscellaneous error occurred while interacting with the Directory Service.

x500obj create 43.12.2.1107.1.3.4.10=CLIENT -attribute PSA={TS=Client,NA='TCP/IP!internet=127.0.0.1+port=31010'}

gdsdirinfo shows no C-stub.

[8/29/94 public]
Verified on 486.



CR Number                     : 11278
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gds_sec tests
Short Description             : gds_sec tests expect -dce-  as password for cell_admin
Reported Date                 : 7/13/94
Found in Baseline             : 1.1
Found Date                    : 7/13/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : implicite with OT11233
Sensitivity                   : public

[7/13/94 public]

I did configure my cell with a cell_admin password "dce".
The gdssec tests didn't run via TET because
in dcecp_add.tcl the cell_admin password is expected to be "-dce-".
This should be documented.

[8/2/94 public]
Tests configure their own dce cells now.



CR Number                     : 11276
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : gdsstep
Short Description             : gdsstep dumps core
Reported Date                 : 7/13/94
Found in Baseline             : 1.1
Found Date                    : 7/13/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : gds/step/gstep.c, gds/step/gstasn1.c
Sensitivity                   : public

[7/13/94 public]

gdsstep dumps core.
This is related to two problems:
1.) gdsstep doesn't call dce_svc_init (which calls rpc_sm_enable_allocate) -
	as it should.
2.) gdsstep calls asn1_dump even if there is an empty ASN.1 message.

Both is fixed and tested in my sandbox.

[07/13/94 public]
Submitted.



CR Number                     : 11269
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gdssetup
Short Description             : additional gdssetup testcases
Reported Date                 : 7/13/94
Found in Baseline             : 1.1b10
Found Date                    : 7/13/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : see list below
Sensitivity                   : public

[7/13/94 public]
More testcases for gdssetup in test/functional/directory/gds/ts/gdssetup/lib :
	invalid/client3
	invalid/client3.cleanup
	invalid/client5
	invalid/client5.cleanup
	invalid/sv_domdef2.cleanup
	invalid/sv_domdef3.cleanup
	invalid/sv_domdef4
	invalid/sv_domdef4.cleanup
	invalid/sv_domdef5
	invalid/sv_domdef5.cleanup
	invalid/sv_domdef6
	invalid/sv_domdef6.cleanup
	invalid/sv_domnodef2
	invalid/sv_domnodef2.cleanup
	invalid/sv_domnodef3
	invalid/sv_domnodef3.cleanup
	invalid/sv_domnodef4
	invalid/sv_domnodef4.cleanup
	invalid/sv_domnodef5
	invalid/sv_domnodef5.cleanup
	invalid/sv_nodom1.cleanup
	invalid/sv_nodom2
	invalid/sv_nodom2.cleanup
	invalid/sv_nodom3
	invalid/sv_nodom3.cleanup
	invalid/sv_nodom4
	invalid/sv_nodom4.cleanup
	invalid/sv_nodom5
	invalid/sv_nodom5.cleanup
	valid/client5
	valid/client5.cleanup
	valid/sv_domdef5
	valid/sv_domdef5.cleanup
	valid/sv_domnodef3
	valid/sv_domnodef3.cleanup

[7/19/94 public]
	valid/end.setup
	valid/Makefile
	valid/TESTCASES

[7/28/94 public]
verified by inspection.



CR Number                     : 11267
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gds_sec
Short Description             : gds_sec tests do not run
Reported Date                 : 7/12/94
Found in Baseline             : 1.1
Found Date                    : 7/12/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : functional/directory/gds/ts/config/dcecp_add.tcl
Sensitivity                   : public

[7/12/94 public]

When starting the gds_sec tests via TET I get:

dcecp dcecp_add.tcl
Principal quota exhausted.
rgy_add.sh
local_start: Configure GDS

(On HP cdsclerk reports: 
clerk_bind.c 483:
Routine rpc_binding_set_auth_info(3rpc) failed : status = 336760839.)

Then the following happens: DSA's on dir.id. 11 and 12 do not come up:

User Identification Failure. - Registry object not found ( dce / sec )

-----
I didn't do a dce_login before. Should I ???

If I do 

dce_login cell_admin

and start after that "local_tet.admin gds_sec" I get:

dcecp dcecp_add.tcl
The specified extended attribute does not exist.

...

What did I wrong???

[07/13/94 public]
nothing. The dcecp_add.tcl script is wrong:

The lines

principal modify gds_invalid -change {X500_DN {/C=re/O=sni/CN=invalid}}
principal modify gds_cl1 -change {X500_DN {/C=re/O=sni/OU=buba/CN=one}}
principal modify gds-dsa1 -change {X500_DN {/C=re/O=sni/OU=buba/CN=dsa/CN=dsa1}}principal modify gds_cl2 -change {X500_DN {/C=re/O=sni/OU=ap2/CN=two}}
principal modify gds_cl3 -change {X500_DN {/C=re/O=sni/OU=ap2/CN=three}}
principal modify gds-dsa2 -change {X500_DN {/C=re/O=sni/OU=buba/CN=dsa/CN=dsa2}}

do not work because you can't modify an attribute what doesn't exist.
(Howard Melman helped me to find this out.)

That is that what the message says:

The specified extended attribute does not exist.

I was confused because I interpreted this message wrong: I thought that the
attribute type isn't supported at all. Bit it just says that the specified
object doesn't have this attribute.

I will change all "-change" to "-add" in dcecp_add.tcl.

How could this work in Munich ???

[07/13/94 public]
Submitted.



CR Number                     : 11266
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gds_sec
Short Description             : TET doesn't run: bad trap: cannot trap 18
Reported Date                 : 7/12/94
Found in Baseline             : 1.1
Found Date                    : 7/12/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : ts/gds_sec/gds_sec_all
Sensitivity                   : public

[7/12/94 public]

When running the gds_sec tests via TET I get:

ksh: bad trap: cannot trap 18.

The reason is a missing

#!/bin/ksh

in the beginning of ts/gds_sec/gds_sec_all.
I will submit it as soon as possible.

[07/13/94 public]
Submitted.



CR Number                     : 11265
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : util
Short Description             : gds initializes SVC unnecessarilily
Reported Date                 : 7/12/94
Found in Baseline             : 1.1
Found Date                    : 7/12/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : gds/util/d27svc.c
Sensitivity                   : public

[7/12/94 public]

the gds function d27_001_svc_init calls 

dce_svc_routing((unsigned char *)"*:STDERR:-",st);

in the beginning. This sets the default routing to stderr.
This is done already by the SVC code.
So we will delete this line from d27svc.c.

[07/13/94 public]
Submitted.

[8/2/94 public]



CR Number                     : 11257
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : mx300
S/W Ref Platform              : sinix
Component Name                : gds
Subcomponent Name             : xti,nds
Short Description             : conflict between xti.h and xti_inet.h
Reported Date                 : 7/12/94
Found in Baseline             : 1.1
Found Date                    : 7/12/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : gds/h/xti.h, gds/h/ndscfg.h
Sensitivity                   : public

[7/12/94 public]

Several files do not compile on SVR4 (with Abby's version of SVR4
include files). The reason is that both /usr/include/sys/xti_inet.h
and /project/dce/build/dce1.1/src/directory/gds/h/xti.h are included and
define i.e. struct t_kpalive.
The fix is to include /project/dce/build/dce1.1/src/directory/gds/h/xti.h
only if sys/xti_inet.h have not been included before.

[07/12/94 public]
Submitted.

[7/28/94 public]
Closed.



CR Number                     : 11247
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : mavrostest
Short Description             : test_mvr.sh calls oidt - not ./oidt
Reported Date                 : 7/11/94
Found in Baseline             : 1.1
Found Date                    : 7/11/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : mavrostest/test_mvr.sh
Sensitivity                   : public

[7/11/94 public]

test_mvr.sh contains the line:

oidt <oidt.input >oidt.diff

This failes if PATH doesn't contain "."   .

The fix is to change this line to

./oidt <oidt.input >oidt.diff

[07/11/94 public]
Fixed.

[7/28/94 public]
Closed.



CR Number                     : 11238
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 11212
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : fvt
Short Description             : Need to tetize typeless switch tests
Reported Date                 : 7/11/94
Found in Baseline             : 1.1
Found Date                    : 7/11/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : xds/ts/switch/switch_DNS
					     xds/ts/switch/Makefile
					     xds/tet_scen
Sensitivity                   : public

[7/11/94 public]
Testcases for testing switching to typeless (DCE) cellnames were submitted
this month.  However, these tests do not have a testsuite.  One needs to be
provided.

[7/28/94 public]
Closed.



CR Number                     : 11233
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : fvt
Short Description             : gds fvt should configure dce
cell as part of test startup
Reported Date                 : 7/11/94
Found in Baseline             : 1.1
Found Date                    : 7/11/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : gds/ts/config/config.cmd
					     gds/ts/config/config.env.sed
					     gds/ts/config/Makefile
					     xds/ts/config/Makefile
					     xds/tools/local_TET.api
					     gds/tools/local_TET.admin
Sensitivity                   : public

[7/11/94 public]
The GDS switch and gds_sec tests require that the following DCE cells
be created:

DUA Switch:
	/.../c=ie/o=digital
	/.../snidec.sni.com

gds_sec:
	/.../c=ie/o=digital

These cells should be configured and started as part of the FVT startup
process.

dce_config supports automated operation via command and environment
configuration files.  See the dce_config man page for details, and the DCE
Administration Guide -- Introduction (v1.0.3), Chapter 11 "Customizing the
dce_config Processing."

[7/11/94 public]
Correct typo in name of gds_sec cell.

[8/2/94 public]
Fix verified by fvt



CR Number                     : 11222
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : xds
Short Description             : can't add, modify or retrieve CDS attributes through XDS.
Reported Date                 : 7/8/94
Found in Baseline             : 1.0.3
Found Date                    : 7/8/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : ./directory/gds/dua/d21ipcev.c
					./directory/gds/dua/switch/d21_cdsadd.c
					./directory/gds/dua/switch/d21_cdsmis.c
					./directory/gds/dua/switch/d21_cdsrd.c
					./directory/gds/h/d21_cdssw.h
Sensitivity                   : public

[7/8/94 public]

ds_read(), ds_modify_entry() and ds_add_entry() apparently do not work with
CDS attributes (i.e. the attributes defined in xdscds.h). For example the
following fails:

#include <stdio.h>
#include <xom.h>
#include <xds.h>
#include <xdsbdcp.h>
#include <dce/xdscds.h>

OM_EXPORT ( DSX_A_CDS_Class )
OM_EXPORT ( DSX_A_CDS_ClassVersion )
OM_EXPORT ( DSX_TYPELESS_RDN )
OM_EXPORT ( DS_A_OBJECT_CLASS )
OM_EXPORT ( DS_C_ATTRIBUTE )
OM_EXPORT ( DS_C_ATTRIBUTE_LIST )
OM_EXPORT ( DS_C_AVA )
OM_EXPORT ( DS_C_DS_DN )
OM_EXPORT ( DS_C_DS_RDN )

void main()
{
  OM_workspace               xds_workspace;
  OM_private_object          session;
  DS_status                  ds_status;
  OM_sint                    dummy;

  static OM_descriptor Cell_String_Object[]={
    OM_OID_DESC(OM_CLASS,DS_C_AVA),
    OM_OID_DESC(DS_ATTRIBUTE_TYPE,DSX_TYPELESS_RDN),
    {DS_ATTRIBUTE_VALUES,OM_S_PRINTABLE_STRING,OM_STRING("syseng.cell.osf.org")},
    OM_NULL_DESCRIPTOR
    };

  static OM_descriptor Cell_RDN[]={
    OM_OID_DESC(OM_CLASS,DS_C_DS_RDN),
    {DS_AVAS,OM_S_OBJECT,{0,Cell_String_Object}},
    OM_NULL_DESCRIPTOR
    };

  static OM_descriptor Dir_String_Object[]={
    OM_OID_DESC(OM_CLASS,DS_C_AVA),
    OM_OID_DESC(DS_ATTRIBUTE_TYPE,DSX_TYPELESS_RDN),
    {DS_ATTRIBUTE_VALUES,OM_S_PRINTABLE_STRING,OM_STRING("usr")},
    OM_NULL_DESCRIPTOR
    };

  static OM_descriptor Dir_RDN[]={
    OM_OID_DESC(OM_CLASS,DS_C_DS_RDN),
    {DS_AVAS,OM_S_OBJECT,{0,Dir_String_Object}},
    OM_NULL_DESCRIPTOR
    };

  static OM_descriptor Entry_String_Object[]={
    OM_OID_DESC(OM_CLASS,DS_C_AVA),
    OM_OID_DESC(DS_ATTRIBUTE_TYPE,DSX_TYPELESS_RDN),
    {DS_ATTRIBUTE_VALUES,OM_S_PRINTABLE_STRING,OM_STRING("sample1")},
    OM_NULL_DESCRIPTOR

    };

  static OM_descriptor Entry_RDN[]={
    OM_OID_DESC(OM_CLASS,DS_C_DS_RDN),
    {DS_AVAS,OM_S_OBJECT,{0,Entry_String_Object}},
    OM_NULL_DESCRIPTOR
    };

  static OM_descriptor Full_Entry_Name_Object[]={
    OM_OID_DESC(OM_CLASS,DS_C_DS_DN),
    {DS_RDNS,OM_S_OBJECT,{0,Cell_RDN}},
    {DS_RDNS,OM_S_OBJECT,{0,Dir_RDN}},
    {DS_RDNS,OM_S_OBJECT,{0,Entry_RDN}},
    OM_NULL_DESCRIPTOR
    };

  static OM_descriptor Class_Attribute_Object[] = {
    OM_OID_DESC(OM_CLASS, DS_C_ATTRIBUTE),
    OM_OID_DESC(DS_ATTRIBUTE_TYPE, DSX_A_CDS_Class),
    {DS_ATTRIBUTE_VALUES, OM_S_PRINTABLE_STRING, OM_STRING("foo")},
    OM_NULL_DESCRIPTOR
  };

  static OM_descriptor    ClassVersion_Attribute_Object[] = {
    OM_OID_DESC(OM_CLASS, DS_C_ATTRIBUTE),
    OM_OID_DESC(DS_ATTRIBUTE_TYPE, DSX_A_CDS_ClassVersion),
    {DS_ATTRIBUTE_VALUES, OM_S_PRINTABLE_STRING, OM_STRING("1.0")},
    OM_NULL_DESCRIPTOR
  };

  static OM_descriptor Attribute_List_Object[]={
    OM_OID_DESC(OM_CLASS,DS_C_ATTRIBUTE_LIST),
    {DS_ATTRIBUTES,OM_S_OBJECT,{0,Class_Attribute_Object}},
    {DS_ATTRIBUTES,OM_S_OBJECT,{0,ClassVersion_Attribute_Object}},
    OM_NULL_DESCRIPTOR
    };

  xds_workspace = ds_initialize();

  if (xds_workspace == NULL) {
    fprintf(stderr,"ds_initialize failed\n");
    exit(1);
  }

  ds_status = ds_bind(DS_DEFAULT_SESSION,
                      xds_workspace,
                      &session);

  if (ds_status != DS_SUCCESS){
    fprintf(stderr,"ds_bind failed\n");
    exit(1);
  }

  ds_status = ds_add_entry(session,
                           DS_DEFAULT_CONTEXT,
                           Full_Entry_Name_Object,
                           Attribute_List_Object,
                           &dummy);

  if (ds_status != DS_SUCCESS) {
    fprintf(stderr,"add_entry failed\n");
    exit(1);
  }

  ds_status = ds_unbind(session);

  if (ds_status != DS_SUCCESS) {
    fprintf(stderr,"ds_unbind failed\n");
    exit(1);
  }

  ds_shutdown(xds_workspace);
}

Note that with the Attribute_List_Object defined as follows:

  static OM_descriptor Surname_Object[]={
    OM_OID_DESC(OM_CLASS, DS_C_ATTRIBUTE),
    OM_OID_DESC(DS_ATTRIBUTE_TYPE, DS_A_SURNAME),
    {DS_ATTRIBUTE_VALUES, OM_S_TELETEX_STRING, OM_STRING("Marc Levy")},
    OM_NULL_DESCRIPTOR
  };

  static OM_descriptor Phone_Number_Object[]={
    OM_OID_DESC(OM_CLASS, DS_C_ATTRIBUTE),
    OM_OID_DESC(DS_ATTRIBUTE_TYPE, DS_A_PHONE_NBR),
    {DS_ATTRIBUTE_VALUES, OM_S_PRINTABLE_STRING, OM_STRING("(617) 621-8990")},
    OM_NULL_DESCRIPTOR
  };

  static OM_descriptor Attribute_List_Object[]={
    OM_OID_DESC(OM_CLASS,DS_C_ATTRIBUTE_LIST),
    {DS_ATTRIBUTES,OM_S_OBJECT,{0,Surname_Object}},
    {DS_ATTRIBUTES,OM_S_OBJECT,{0,Phone_Number_Object}},
    OM_NULL_DESCRIPTOR
    };
 
the program successfully adds the entry into CDS.

(By the way there is also a doc problem here: the documentation lacks a
complete table mapping CDS attributes to their OM syntax. For example, there
is no OM syntax description for CDS_LinkTarget).

[07/08/94 public]
Please set

XDS_LOG=1 and D2_LOG_DIR=/tmp (i.e.),

run your test again and put the $D2_LOG_DIR/log_xds.<pid> into this OT.
I'd like to see what the problem is: all what I can see
in your example is that you use DSX_A_CDS_Class and DSX_A_CDS_ClassVersion
with syntax PRINTABLE_STRING.
I have to check if this is OK or not.

[7/11/94 public]

Here is the log of a sample run (on 1.0.3 rios). By the way the syntax
specification for the attributes came straight from the Application Dev.
Guide (section 24.3.2.2 in 1.0.3 docs).  Also, I tried a few other
attributes with the OM Syntax from the table of section 24.6 without
success.

[3]
==========================================================================
[3] Mon Jul 11 10:32:25          PROCESS-ID: 23608          USER-ID: root
[[3]
--------------------------------------------------------------------------
[3] -> ds_initialize()
[3] 
[3]    NOTICE: Switching to the X.500 naming service.
[3]    WARNING: cannot read default DSA name from DUA cache
[3]    NOTICE: workspace 0 has been initialized
[3] 
[3] <- ds_initialize()
[[4]
--------------------------------------------------------------------------
[4] -> ds_bind()
[4] 
[4]    INPUT ARGUMENTS:
[4] 
[4] session = {
[4] ---WARNING: descriptor pointer is 0 ---
[4] }; /* session */
[4] 
[4]    NOTICE: default-session is requested
[4]    NOTICE: no credentials provided
[4]    NOTICE: successful bind to DSA:   using CDS
[4] 
[4] 
[4]    OUTPUT ARGUMENTS:
[4] 
[4] *bound_session_return = {
[4] ---WARNING: converting to public object for display purposes only---
[4]   {   3, OM_S_OBJECT_ID_STRING, DS_C_SESSION },
[4]   { 726, OM_S_INTEGER, -1 },
[4] }; /* *bound_session_return */
[4] 
[4] 
[4] <- ds_bind()
[[5]
--------------------------------------------------------------------------
[5] -> ds_add_entry()
[5] 
[5]    INPUT ARGUMENTS:
[5] 
[5] session = {
[5]   { OM_PRIVATE_OBJECT, OM_S_OBJECT_ID_STRING, DS_C_SESSION } ...
[5] }; /* session */
[5] 
[5] 
[5] context = {
[5] ---WARNING: descriptor pointer is 0 ---
[5] }; /* context */
[5] 
[5] 
[5] name = {
[5]   {   3, OM_S_OBJECT_ID_STRING, DS_C_DS_DN },
[5]   { 755, OM_S_OBJECT, 
[5]     {
[5]       {   3, OM_S_OBJECT_ID_STRING, DS_C_DS_RDN },
[5]       { 715, OM_S_OBJECT, 
[5]         {
[5]           {   3, OM_S_OBJECT_ID_STRING, DS_C_AVA },
[5]           { 711, OM_S_OBJECT_ID_STRING, DSX_TYPELESS_RDN },
[5]           { 713, OM_S_PRINTABLE_STRING, "syseng.cell.osf.org" },
[5]         },
[5]       },
[5]     },
[5]   },
[5]   { 755, OM_S_OBJECT, 
[5]     {
[5]       {   3, OM_S_OBJECT_ID_STRING, DS_C_DS_RDN },
[5]       { 715, OM_S_OBJECT, 
[5]         {
[5]           {   3, OM_S_OBJECT_ID_STRING, DS_C_AVA },
[5]           { 711, OM_S_OBJECT_ID_STRING, DSX_TYPELESS_RDN },
[5]           { 713, OM_S_PRINTABLE_STRING, "usr" },
[5]         },
[5]       },
[5]     },
[5]   },
[5]   { 755, OM_S_OBJECT, 
[5]     {
[5]       {   3, OM_S_OBJECT_ID_STRING, DS_C_DS_RDN },
[5]       { 715, OM_S_OBJECT, 
[5]         {
[5]           {   3, OM_S_OBJECT_ID_STRING, DS_C_AVA },
[5]           { 711, OM_S_OBJECT_ID_STRING, DSX_TYPELESS_RDN },
[5]           { 713, OM_S_PRINTABLE_STRING, "sample1" },
[5]         },
[5]       },
[5]     },
[5]   },
[5] }; /* name */
[5] 
[5] 
[5] entry = {
[5]   {   3, OM_S_OBJECT_ID_STRING, DS_C_ATTRIBUTE_LIST },
[5]   { 709, OM_S_OBJECT, 
[5]     {
[5]       {   3, OM_S_OBJECT_ID_STRING, DS_C_ATTRIBUTE },
[5]       { 711, OM_S_OBJECT_ID_STRING, DSX_A_CDS_Class },
[5]       { 713, OM_S_PRINTABLE_STRING, "foo" },
[5]     },
[5]   },
[5]   { 709, OM_S_OBJECT, 
[5]     {
[5]       {   3, OM_S_OBJECT_ID_STRING, DS_C_ATTRIBUTE },
[5]       { 711, OM_S_OBJECT_ID_STRING, DSX_A_CDS_ClassVersion },
[5]       { 713, OM_S_PRINTABLE_STRING, "1.0" },
[5]     },
[5]   },
[5] }; /* entry */
[5] 
[5]    NOTICE: default-context is requested:
[5]    NOTICE: ChainingProhib DontUseCopy AutoContinuation DontStore UseDSA
[5]    NOTICE: name converted to a private object
[5]    NOTICE: entry converted to a private object
[5]    NOTICE: switching to the cell naming service.
--------------------------------------------------------------------------
[5] -> d21_7_switch()
[5] 
--------------------------------------------------------------------------
[5] -> d21_x500name2cdsname()
[5] 
[5] 
[5] <- d21_x500name2cdsname()
[5] 
--------------------------------------------------------------------------
[5] -> d21_cds_set_flags()
[5] 
[5] 
[5] <- d21_cds_set_flags()
[5] 
--------------------------------------------------------------------------
[5] -> getval_ObjectClass()
[5] 
[5]    WARNING: mandatory attribute objectClass not found
[5] 
[5] <- getval_ObjectClass()
[5]
--------------------------------------------------------------------------
[5] -> d21_cds_dots2hypens()
[5] 
[5] 
[5] <- d21_cds_dots2hypens()
[[5]
--------------------------------------------------------------------------
[5] -> add_obj_attrs()
[5]
--------------------------------------------------------------------------
[5] -> d21_cds_uncompress_oid()
[5] 
[5] 
[5] <- d21_cds_uncompress_oid()
[5] 
--------------------------------------------------------------------------
[5] -> d21_x500val2cdsval()
[5] 
[5] 
[5] <- d21_x500val2cdsval()
[5]
--------------------------------------------------------------------------
[5] -> d21_cds_map_error()
[5] 
[5]    WARNING: unrecognised CDS error encountered
[5] 
[5] <- d21_cds_map_error()
[5] 
--------------------------------------------------------------------------
[5] -> d21_cds_error_info()
[5] 
[5] 
[5] <- d21_cds_error_info()
[5] 
[5] 
[5] <- d21_7_switch()
[5] 
[5]    WARNING: unsuccessful addition of:
43.22.1.2.2syseng.cell.osf.org43.22.1.2.2usr43.22.1.2.2sample1
[5]    ERROR: Service-Error (51) returned
[5] 
[5] 
[5]    ERROR RETURNED:
[5] 
[5] status = {
[5] ---WARNING: converting to public object for display purposes only---
[5]   {   3, OM_S_OBJECT_ID_STRING, DS_C_SERVICE_ERROR },
[5]   { 751, OM_S_ENUMERATION, 51 },
[5] }; /* status */
[5] 
[5] 
[5] <- ds_add_entry()
[[levy 7/11/94 public]

Hello there, apologies for making an annoyance of myself but I'm raising
this to an A1.

[8/9/94 public]
Sorry, but this defect isn't severity A, nor should the priority be
increased to 0.  Your original rating of a 1 is appropriate.

[08/16/94 public]
Sorry that I started so late to work on this - but now I have started.
First: You (Levy - I don't remember your first name) are right.
You can't add CDS_Class or CDS_ClassVersion.
But you can add other CDS attributes - i.e. DSX_A_CDS_Address - I just did it.

(I modified in your example:
static OM_descriptor Class_Attribute_Object[] = {
    OM_OID_DESC(OM_CLASS, DS_C_ATTRIBUTE),
    OM_OID_DESC(DS_ATTRIBUTE_TYPE, DSX_A_CDS_Address),
    {DS_ATTRIBUTE_VALUES, OM_S_OCTET_STRING, OM_STRING("foo")},
    OM_NULL_DESCRIPTOR
  };

and deleted the second attribute from the attribute's list.)

To describe the problem: ds_add_entry is mapped onto CDS in the following way:

1.) cdsCreateObj (resp. cdsCreateGrp or cdsCreateSLink)
2.) in a loop (per attribute value): cdsAddAttrValue

(see gds/dua/switch/d21_cdsadd.c)

The problem is: You have to specify CDS_Class and CDS_ClassVersion in
cdsCreateObj - otherwise they are not there. You can't add or
modify these special CDS attributes later. The same is true for
CDS_CTS and CDS_UTS.
So: what happens is that the dua switch first creates the object without
CDS_Class and CDS_ClassVersion - independent if they are in the
attribute list or not. Then it steps through the attribute list and
calls cdsAddAttrValue for every attribute value. This failes for
CDS_Class and CDS_ClassVersion - CDS returns DNS_WRONGATTRIBUTETYPE
(282108933). 
Unfortunately the old (1.0.3) gds logging didn't trace this error - it just
said 

WARNING: unrecognised CDS error encountered

(There is a very poor mapping table in d21_cdsmis.c to map CDS onto XDS errors.)

So the dua switch has to change in the following way:

1.) scan the list of attributes if CDS_Class and CDS_ClassVersion are there
2.) if yes put them into the cdsCreateObj call and delete them from
	the attribute list
3.) add the other attribute values using cdsAddAttrValue

There are other problems: CDS_ClassVersion is at CDS a 

typedef struct cdsVersion {
   unsigned char                 cdsMajVer;
   unsigned char                 cdsMinVer;
   } cdsVersion_t;

If you look into chapter 3.6 of the appl. dev. guide you find the
following mappings:

CDS_ClassVersion  ----> OM_S_INTEGER

OM_S_INTEGER      ----> dns_long

cds_version       ----> OM_S_INTEGER_STRING

Additionally you find in chapter 3.3.2.2 exactly that what you did in
your example:

  static OM_descriptor    ClassVersion_Attribute_Object[] = {
    OM_OID_DESC(OM_CLASS, DS_C_ATTRIBUTE),
    OM_OID_DESC(DS_ATTRIBUTE_TYPE, DSX_A_CDS_ClassVersion),
    {DS_ATTRIBUTE_VALUES, OM_S_PRINTABLE_STRING, OM_STRING("1.0")},
    OM_NULL_DESCRIPTOR
  };

I have no idea how this could work: you pass a printable string
to CDS - this is converted in the dua switch to dns_char - not to dns_version.
So the example in 3.3.2.2 is wrong.
Also the mapping table is wrong: You give CDS_ClassVersion as an
INTEGER_STRING - the switch will return an error because there
is no mapping OM_S_INTEGER_STRING to CDS.
If you read an (existing) CDS_ClassVersion you get it at XDS
as ONE integer - "dns_major * 10) +dns_minor".

I will do now the temporary fix described above. 
This will not solve the mapping problem: You still can't add
i.e. a CDS_UpgradeTo attribute value (syntax: Version) to CDS
via XDS.
(CDS_ClassVersion will work because: if the OID is 1.3.22.1.3.16
then the printable string (i.e. "1.0") is scanned and
dns_major=1, dns_minor=0 is assigned. But I can't map
all printable string onto dns_version, of course.)

Any proposals for good mappings XDS  ---- CDS concerning
version are appriciated. The problem is that gds can't know
what syntax i.e. DSX_A_CDS_Address (1.3.22.1.3.18) has.

DSX_A_CDS_Address isn't even in /opt/dcelocal/etc/cds_attributes -
but you can add it as an octet string (dns_byte).

[08/17/94 public]
Fixed in my environment. Tested on HP800 and AT386.
I have modified the given example a little bit - my version is

/afs/dce/project/dce/sni/OT11222/example.c

(I changed the cell name and added a ds_read and ds_remove.)
As you see there I used the following attributes:

static OM_descriptor Class_Attribute_Object[] = {
    OM_OID_DESC(OM_CLASS, DS_C_ATTRIBUTE),
    OM_OID_DESC(DS_ATTRIBUTE_TYPE, DSX_A_CDS_Class),
    {DS_ATTRIBUTE_VALUES, OM_S_OCTET_STRING, OM_STRING("foo")},
    OM_NULL_DESCRIPTOR
  };

  static OM_descriptor    ClassVersion_Attribute_Object[] = {
    OM_OID_DESC(OM_CLASS, DS_C_ATTRIBUTE),
    OM_OID_DESC(DS_ATTRIBUTE_TYPE, DSX_A_CDS_ClassVersion),
    {DS_ATTRIBUTE_VALUES, OM_S_PRINTABLE_STRING, OM_STRING("1.0")},
    OM_NULL_DESCRIPTOR
  };

  static OM_descriptor Attribute_List_Object[]={
    OM_OID_DESC(OM_CLASS,DS_C_ATTRIBUTE_LIST),
    {DS_ATTRIBUTES,OM_S_OBJECT,{0,Class_Attribute_Object}},
    {DS_ATTRIBUTES,OM_S_OBJECT,{0,ClassVersion_Attribute_Object}},
    OM_NULL_DESCRIPTOR
    };


The XDS logfile (got with "export XDS_LOG=1") is:

/afs/dce/project/dce/sni/OT11222/log_xds.2897

As you see there the attributes for the ds_add_entry are:

[1] entry = {
[1]   { OM_CLASS, OM_S_OBJECT_ID_STRING, DS_C_ATTRIBUTE_LIST },
[1]   { DS_ATTRIBUTES, OM_S_OBJECT,
[1]     {
[1]       { OM_CLASS, OM_S_OBJECT_ID_STRING, DS_C_ATTRIBUTE },
[1]       { DS_ATTRIBUTE_TYPE, OM_S_OBJECT_ID_STRING, DSX_A_CDS_Class },
[1]       { DS_ATTRIBUTE_VALUES, OM_S_OCTET_STRING, "\x66\x6F\x6F" },
[1]     },
[1]   },
[1]   { DS_ATTRIBUTES, OM_S_OBJECT,
[1]     {
[1]       { OM_CLASS, OM_S_OBJECT_ID_STRING, DS_C_ATTRIBUTE },
[1]       { DS_ATTRIBUTE_TYPE, OM_S_OBJECT_ID_STRING, DSX_A_CDS_ClassVersion },
[1]       { DS_ATTRIBUTE_VALUES, OM_S_PRINTABLE_STRING, "1.0" },
[1]     },
[1]   },
[1] }; /* entry */

The ds_read gave back:

[1]       { DS_ATTRIBUTES, OM_S_OBJECT,
[1]         {
[1]           { OM_CLASS, OM_S_OBJECT_ID_STRING, DS_C_ATTRIBUTE },
[1]           { DS_ATTRIBUTE_TYPE, OM_S_OBJECT_ID_STRING, DSX_A_CDS_CTS },
[1]           { DS_ATTRIBUTE_VALUES, OM_S_OCTET_STRING, "\x08\x00\x09\x41\x9C\x9
9\xFC\x64\x2E\xBD\x00\x98\x31\x49" },
[1]         },
[1]       },
[1]       { DS_ATTRIBUTES, OM_S_OBJECT,
[1]         {
[1]           { OM_CLASS, OM_S_OBJECT_ID_STRING, DS_C_ATTRIBUTE },
[1]           { DS_ATTRIBUTE_TYPE, OM_S_OBJECT_ID_STRING, DSX_A_CDS_UTS },
[1]           { DS_ATTRIBUTE_VALUES, OM_S_OCTET_STRING, "\x08\x00\x09\x41\x9C\x9
9\xFC\x64\x82\x9B\x00\x98\x31\x49" },
[1]         },
[1]       },
[1]       { DS_ATTRIBUTES, OM_S_OBJECT,
[1]         {
[1]           { OM_CLASS, OM_S_OBJECT_ID_STRING, DS_C_ATTRIBUTE },
[1]           { DS_ATTRIBUTE_TYPE, OM_S_OBJECT_ID_STRING, DSX_A_CDS_Class },
[1]           { DS_ATTRIBUTE_VALUES, OM_S_OCTET_STRING, "\x66\x6F\x6F" },
[1]         },
[1]       },
[1]       { DS_ATTRIBUTES, OM_S_OBJECT,
[1]         {
[1]           { OM_CLASS, OM_S_OBJECT_ID_STRING, DS_C_ATTRIBUTE },
[1]           { DS_ATTRIBUTE_TYPE, OM_S_OBJECT_ID_STRING, DSX_A_CDS_ClassVersion
 },
[1]           { DS_ATTRIBUTE_VALUES, OM_S_PRINTABLE_STRING, "1.0" },
[1]         },
[1]       },


what is correct.

For DSX_A_CDS_ClassVersion the documentation has to change - see OT 10340.

[08/17/94 public]
Fix submitted.



CR Number                     : 11212
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 9400
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : gds
Subcomponent Name             : switch
Short Description             : switch ST valid failures
Reported Date                 : 7/8/94
Found in Baseline             : 1.1
Found Date                    : 7/8/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : switch/lib/valid/*tv, switch/lib/valid/Makefile, switch/lib/typeless_valid/*,switch/lib/Makefile
Sensitivity                   : public

[7/8/94 public]

The following switch tests failures were found:

XDS/Switch - valid Testcases
pass 0  	fail 1	.  .  .  .  add_entry1tv
pass 0  	fail 1	.  .  .  .  compare1tv
pass 0  	fail 1	.  .  .  .  list1tv
pass 0  	fail 1	.  .  .  .  mod_entry1tv
pass 0  	fail 1	.  .  .  .  read1tv
pass 0  	fail 1	.  .  .  .  remove1tv
--> Test cases: FAILED

[07/08/94 public]
See 9400. *tv tests need a different cell name - a typeless one.
("normal" switch tests require a cell name "/C=ie/O=digital",
*tv tests require a cell name "snidec.sni.com".
Of course this is not documented, I guess.

[07/11/94 public]
Fixed: moved all *tv tests from switch/lib/valid to switch/lib/typeless_valid.
Note:
These tests are not "tetized" yet.
But

cd ....switch/lib/typeless_valid
xt_test -a

works if you have set up all for "snidec.sni.com" as you do it for
"/C=ie/O=digital".

[8/18/94 public]
Verified by fvt.



CR Number                     : 11209
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : tests
Short Description             : API switch tests and filter
don't report UNINITIATED
Reported Date                 : 7/8/94
Found in Baseline             : 1.1
Found Date                    : 7/8/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : TET_filter.api, switch_mt, switch_st
Sensitivity                   : public

[7/8/94 public]

When attempting to run switch_all, the test detected that DCE was not
activiated, and yet it returned 'PASS.'  The tests should have reported
UNINITIATED and aborted.  Also, TET_filter.api parsed the journal and
reported the tests as passing.

Journal:
--------
0|1.10 08:20:02 19940708|User: zeliff (0) TCC Start, Command Line: /dcetest/dcelocal/test/tet/bin/tcc -e functional/directory/xds switch_all 
20|/dcetest/dcelocal/test/tet/functional/directory/xds/tetexec.cfg 1|Config Start
30||TET_VERSION=1.10
30||TET_OUTPUT_CAPTURE=False
30||TET_RESCODES_FILE=tet_code
30||TET_EXEC_IN_PLACE=True
30||TET_TAPE_DEVICE=/dev/rmt0
40||Config End
70||"STARTING all Switch tests using TEST script"
10|0 /switch/switch_st 08:20:02|TC Start, scenario ref 74-1
15|0 1.10 4|TCM Start
520|0 0 17195 1 1|Verify_CDS - Couldn't execute <cdscp> properly - STOP
80|0 0 08:20:13|TC End
10|1 /switch/switch_mt 08:20:13|TC Start, scenario ref 75-1
15|1 1.10 8|TCM Start
520|1 0 17253 1 1|Verify_CDS - Couldn't execute <cdscp> properly - STOP
80|1 0 08:20:23|TC End
70||"FINISHED all Switch tests"
900|08:20:23|TCC End

Journal.log from TET_filter.api:
-------------------------------

Results of GDS API Tests:  Fri Jul  8 08:20:49 EDT 1994
----------------------------------------------------

User: zeliff (0) TCC Start, Command Line: /dcetest/dcelocal/test/tet/bin/tcc -e functional/directory/xds swi
tch_all 
"STARTING all Switch tests using TEST script"

TC Start, scenario ref 74-1

Verify_CDS - Couldn't execute <cdscp> properly - STOP

TC Start, scenario ref 75-1

Verify_CDS - Couldn't execute <cdscp> properly - STOP
"FINISHED all Switch tests"
TCC End

------------------------------

Total PASSED =  2
Total FAILED =  0

[8/2/94 public]
Verified via manual inspection.



CR Number                     : 11204
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : test drivers
Short Description             : remove 'clear' from all scripts
Reported Date                 : 7/7/94
Found in Baseline             : 1.1
Found Date                    : 7/7/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : local_TET.api
Sensitivity                   : public

[7/7/94 public]
Remove all 'clear' from scripts:  it prevents someone from running the TET
cases from a dialup line through OSF's annex.



CR Number                     : 11195
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : bld
Short Description             : gds tools not installed
Reported Date                 : 7/7/94
Found in Baseline             : 1.1
Found Date                    : 7/7/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : test/functional/directory/gds/tools/Makefile
Sensitivity                   : public

[7/7/94 public]

The GDS test tools were not installed.  In the log of the test install
pass:

make: don't know how to make TET_filter.gdssetup (continuing)

This is because TET_filter.gdssetup does not exist.  Did you forget to
submit something?

[07/07/94 public]
Temporary removed TET_filter.gdssetup from 
test/functional/directory/gds/tools/Makefile.



CR Number                     : 11194
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : bld
Short Description             : gdssetup testcase install errors
Reported Date                 : 7/7/94
Found in Baseline             : 1.1
Found Date                    : 7/7/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : test/functional/directory/gds/ts/gdssetup/lib/invalid/Makefile, test/functional/directory/gds/ts/gdssetup/lib/valid/Makefile
Sensitivity                   : public

[7/7/94 public]

In the test install log:

/test/functional/directory/gds/ts/gdssetup/lib/valid 
  make: don't know how to make client5 (continuing)

/test/functional/directory/gds/ts/gdssetup/lib/invalid 
  make: don't know how to make client3 (continuing)

This means that none of the gdssetup testcases were installed.

[07/07/94 public]
Fixed just now:

/test/functional/directory/gds/ts/gdssetup/lib/valid/Makefile:

removed: client5
	 client5.cleanup
	 sv_domdef5
	 sv_domdef5.cleanup
	 sv_domnodef3
	 sv_domnodef3.cleanup

/test/functional/directory/gds/ts/gdssetup/lib/valid/TESTCASES:

removed: sv_init3.cleanup

/test/functional/directory/gds/ts/gdssetup/lib/invalid/Makefile:

removed: client3
	 client3.cleanup
	 client5
	 client5.cleanup
	 sv_domdef2.cleanup
	 sv_domdef3.cleanup
	 sv_domdef4
	 sv_domdef4.cleanup
	 sv_domdef5
	 sv_domdef5.cleanup
	 sv_domdef6
	 sv_domdef6.cleanup
	 sv_domnodef2
	 sv_domnodef2.cleanup
	 sv_domnodef3
	 sv_domnodef3.cleanup
	 sv_domnodef4
	 sv_domnodef4.cleanup
	 sv_domnodef5
	 sv_domnodef5.cleanup
	 sv_nodom1.cleanup
	 sv_nodom2
	 sv_nodom2.cleanup
	 sv_nodom3
	 sv_nodom3.cleanup
	 sv_nodom4
	 sv_nodom4.cleanup
	 sv_nodom5 
	 sv_nodom5.cleanup
	 
/test/functional/directory/gds/ts/gdssetup/lib/valid/TESTCASES:

added: sv_domnodef1.cleanup

Basicly, I just removed the files from the Makefile which do not exist
and updated the two TESTCASES files in the sense that
"/bin/ls" and "cat TESTCASES" gives exactly the same.

Leo, Eva, Norbert: please check my fixes!



CR Number                     : 11191
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : admin
Short Description             : Undefined symbol
Reported Date                 : 7/7/94
Found in Baseline             : 1.1
Found Date                    : 7/7/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : gds/adm/setup/gsuset.c
Sensitivity                   : public

[7/7/94 public]

cc: "/project/dce/build/dce1.1-snap/src/directory/gds/adm/setup/gsuset.c",
line 1849: error 1588: "gsu_dir_id_ no_exist" undefined.

[07/07/94 public]
The reason for this is that Norbert didn't submit gsuset.c.
(as well as he didn't submit gsusteps.c...)
Why, Norbert??

[07/07/94 public]
Fixed: Norbert has submitted gsuset.c.
Fix verified: works. (means: compiles, gdssetup could be linked)



CR Number                     : 11170
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : 
Short Description             : July code drop
Reported Date                 : 7/4/94
Found in Baseline             : 1.1
Found Date                    : 7/4/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : see below
Sensitivity                   : public

[7/4/94 public]
Opened for July code drop.

[7/7/94 public]
Here are the list of files:

Submission Log *****

  Submitted by Norbert Marrek; User name: marrek
  Date: 7/06/94; Time: 11:05
  Number of files: 297; Defect number: 11170.
  Set name: marrek_cambr; Sandbox: cambr
  List of files and revisions:
./directory/gds/ASN1/asn1.h	1.2.9.4	1.2.9.3
./directory/gds/Makefile	1.1.20.9	1.1.20.8
./directory/gds/adm/adm_iapl/d20calld.c	1.1.8.4	1.1.8.3
./directory/gds/adm/adm_iapl/d20iapl.c	1.1.8.3	1.1.8.2
./directory/gds/adm/adm_sch/d20disp.c	1.1.8.4	1.1.8.3
./directory/gds/adm/adm_sch/d20read.c	1.1.8.4	1.1.8.3
./directory/gds/adm/adm_sch/d20store.c	1.1.8.4	1.1.8.3
./directory/gds/adm/adm_sch/d20update.c	1.1.8.4	1.1.8.3
./directory/gds/adm/admin/cget.c	1.2.10.5	1.2.10.4
./directory/gds/adm/admin/d20getat.c	1.1.721.5	1.1.721.4
./directory/gds/adm/admin/d20spec_msk.c	1.1.727.4	1.1.727.3
./directory/gds/adm/delupd/d20cupcach.c	1.1.2.3	1.1.2.2
./directory/gds/adm/usradmin/d20admin.c	1.1.9.5	1.1.9.4
./directory/gds/asn1/IDS/credext.asn1	1.1.2.3	1.1.2.2
./directory/gds/asn1/d24abind.c	1.1.8.5	1.1.8.4
./directory/gds/asn1/d24asn1.c	1.1.8.5	1.1.8.4
./directory/gds/asn1/d25abind.c	1.1.8.5	1.1.8.4
./directory/gds/asn1/d25asn1.c	1.1.8.5	1.1.8.4
./directory/gds/asn1/d2asap.c	1.1.2.6	1.1.2.5
./directory/gds/bin/gdsconf.sh	1.1.10.5	1.1.10.4
./directory/gds/bin/gdsstart.sh	1.1.8.5	1.1.8.4
./directory/gds/cache/d22cache.c	1.1.8.4	1.1.8.3
./directory/gds/dsa/d261util.c	1.1.8.3	1.1.8.2
./directory/gds/dsa/d26anal.c	1.1.8.5	1.1.8.4
./directory/gds/dsa/d26bind.c	1.1.716.6	1.1.716.5
./directory/gds/dsa/d26dsa.c	1.1.10.5	1.1.10.4
./directory/gds/dsa/d26dsp.c	1.1.8.5	1.1.8.4
./directory/gds/dsa/d26phon.c	1.1.2.2	1.1.2.1
./directory/gds/dsa/d26rdec.c	1.1.6.5	1.1.6.4
./directory/gds/dsa/d26refis.c	1.1.724.5	1.1.724.4
./directory/gds/dsa/d26svcis.c	1.1.2.5	1.1.2.4
./directory/gds/dsa/d26trans.c	1.1.729.5	1.1.729.4
./directory/gds/dsa/d26tutil.c	1.1.10.4	1.1.10.3
./directory/gds/dsa/remutilis.c	1.1.8.4	1.1.8.3
./directory/gds/dua/d21bindh.c	1.1.741.5	1.1.741.4
./directory/gds/dua/d21ipcev.c	1.1.4.4	1.1.4.3
./directory/gds/gds_sec/dsa_sec.c	1.1.2.7	1.1.2.6
./directory/gds/gds_sec/dua_sec.c	1.1.2.6	1.1.2.5
./directory/gds/gds_sec/dua_sec_int.c	1.1.2.6	1.1.2.5
./directory/gds/gds_sec/gds_sec_auth_ctx.c	1.1.2.6	1.1.2.5
./directory/gds/gds_sec/gds_sec_int.c	1.1.2.6	1.1.2.5
./directory/gds/gds_sec/gds_sec_rgy.c	1.1.2.6	1.1.2.5
./directory/gds/h/cmx.h	1.1.747.2	1.1.747.1
./directory/gds/h/d20_adm.h	1.1.8.5	1.1.8.4
./directory/gds/h/d21svc.h	1.1.2.4	1.1.2.3
./directory/gds/h/d26dsa.h	1.1.753.5	1.1.753.4
./directory/gds/h/d27svc.h	1.1.2.5	1.1.2.4
./directory/gds/h/d2adm.h	1.1.754.5	1.1.754.4
./directory/gds/h/gds_sec_int.h	1.1.2.5	1.1.2.4
./directory/gds/h/ndsif.h	1.1.158.3	1.1.158.2
./directory/gds/ipc/d23dirinfo.c	1.1.2.4	1.1.2.3
./directory/gds/ipc/d23ipcchk.c	1.1.8.5	1.1.8.4
./directory/gds/ipc/d23ipcinit.c	1.1.8.5	1.1.8.4
./directory/gds/ipc/d23ipcstat.c	1.1.869.5	1.1.869.4
./directory/gds/ipc/d23util.c	1.1.771.5	1.1.771.4
./directory/gds/msg/En/d20admhelp.msg	1.1.573.5	1.1.573.4
./directory/gds/msg/En/d20admin.msg	1.1.8.5	1.1.8.4
./directory/gds/msg/En/d20adminhelp.msg	1.1.574.3	1.1.574.2
./directory/gds/nds/AT386/machdep.mk	1.1.2.4	1.1.2.3
./directory/gds/nds/AT386/ndsreg.c	1.1.2.4	1.1.2.3
./directory/gds/nds/RIOS/machdep.mk	1.1.2.5	1.1.2.4
./directory/gds/nds/RIOS/ndsreg.c	1.1.2.4	1.1.2.3
./directory/gds/nds/SVR4/machdep.mk	1.1.2.5	1.1.2.4
./directory/gds/nds/SVR4/ndsreg.c	1.1.2.5	1.1.2.4
./directory/gds/nds/SVR4/ndsxtimap.c	1.1.2.5	1.1.2.4
./directory/gds/nds/gnu_regex.c	1.1.4.4	1.1.4.3
./directory/gds/nds/gnu_regex.h	1.1.4.3	1.1.4.2
./directory/gds/nds/ndscompil.c	1.1.2.4	1.1.2.3
./directory/gds/osiadr/gennsap.c	1.1.709.3	1.1.709.2
./directory/gds/osiadr/ldformats.c	1.1.711.3	1.1.711.2
./directory/gds/rtros/com/rostep/trstep.c	1.1.2.4	1.1.2.3
./directory/gds/rtros/ros/roexif/sproif0.c	1.1.2.4	1.1.2.3
./directory/gds/sams/Makefile	1.1.2.8	1.1.2.7
./directory/gds/sams/gds.sams	1.1.2.7	1.1.2.6
./directory/gds/step/Makefile	1.1.2.5	1.1.2.4
./directory/gds/step/gstisam.c	1.1.2.4	1.1.2.3
./directory/gds/stub/d25iaction.c	1.1.9.4	1.1.9.3
./directory/gds/stub/d25stub.c	1.1.10.4	1.1.10.3
./directory/gds/stub/d25uaction.c	1.1.10.3	1.1.10.2
./directory/gds/tsi/cmx.c	1.1.2.3	1.1.2.2
./directory/gds/tsi/cmx2k.c	1.1.2.4	1.1.2.3
./directory/gds/tsi/cmx3.c	1.1.2.3	1.1.2.2
./directory/gds/tsi/cmx_tlv.c	1.1.2.3	1.1.2.2
./directory/gds/tsi/cmxextern.h	1.1.2.3	1.1.2.2
./directory/gds/tsi/cmxinet.c	1.1.2.4	1.1.2.3
./directory/gds/tsi/cmxinup.c	1.1.2.4	1.1.2.3
./directory/gds/tsi/cmxl.c	1.1.2.4	1.1.2.3
./directory/gds/tsi/cmxliz.c	1.1.2.3	1.1.2.2
./directory/gds/tsi/cmxlup.c	1.1.2.4	1.1.2.3
./directory/gds/tsi/cmxmap.c	1.1.2.3	1.1.2.2
./directory/gds/tsi/cmxopt.c	1.1.2.3	1.1.2.2
./directory/gds/tsi/cmxsna.c	1.1.2.3	1.1.2.2
./directory/gds/tsi/cmxtrace.c	1.1.2.4	1.1.2.3
./directory/gds/tsi/cmxxad.c	1.1.2.4	1.1.2.3
./directory/gds/tsi/cmxxrd.c	1.1.2.4	1.1.2.3
./directory/gds/tsi/cmxxti.c	1.1.2.4	1.1.2.3
./directory/gds/tsi/cmxxtr.c	1.1.2.3	1.1.2.2
./directory/gds/tsi/cmxxtr.h	1.1.2.3	1.1.2.2
./directory/gds/tsi/cmxxup.c	1.1.2.4	1.1.2.3
./directory/gds/tsi/emiface.h	1.1.2.3	1.1.2.2
./directory/gds/tsi/prxd.c	1.1.2.3	1.1.2.2
./directory/gds/util/d27charconv.c	1.1.2.3	1.1.2.2
./directory/gds/util/d27close.c	1.1.13.2	1.1.13.1
./directory/gds/util/d27prmsg.c	1.1.8.3	1.1.8.2
./directory/gds/util/d27util.c	1.1.8.4	1.1.8.3
./directory/xds/dsBind.c	1.1.8.4	1.1.8.3
./directory/xds/dsPCreate.c	1.1.4.5	1.1.4.4
./directory/xds/dsPDelete.c	1.1.40.4	1.1.40.3
./directory/xds/dsPGet.c	1.1.41.5	1.1.41.4
./directory/xds/dsPGetBdcp.c	1.1.4.4	1.1.4.3
./directory/xds/dsPMdup.c	1.1.4.4	1.1.4.3
./directory/xds/dsPPut.c	1.1.42.5	1.1.42.4
./directory/xds/dsPWkspace.c	1.1.33.4	1.1.33.3
./directory/xds/dsRemEntry.c	1.1.8.3	1.1.8.2
./directory/xds/dsTrace.c	1.1.76.4	1.1.76.3
./directory/xds/h/dsPDelete.h	1.1.2.3	1.1.2.2
./directory/xds/h/dsPGet.h	1.1.2.3	1.1.2.2
./directory/xds/h/sapdef.h	1.1.2.5	1.1.2.4
./directory/xds/h/xdsiapl.h	1.1.8.6	1.1.8.5
./directory/xds/h/xdsimport.h	1.1.76.4	1.1.76.3
./directory/xds/h/xomdef.h	1.1.20.6	1.1.20.5
./directory/xom/h/alloc.h	1.1.9.2	1.1.9.1
./directory/xom/h/xomip.h	1.1.8.3	1.1.8.2
./directory/xom/omAlloc.c	1.1.79.2	1.1.79.1
./directory/xom/omCreate.c	1.1.8.3	1.1.8.2
./directory/xom/omDelete.c	1.1.8.2	1.1.8.1
./directory/xom/omEntry.c	1.1.6.2	1.1.6.1
./directory/xom/omWkspace.c	1.1.8.3	1.1.8.2
./libdce/SVR4/machdep.mk	1.1.84.10	1.1.84.9
./test/directory/gds/Makefile	1.1.7.4	1.1.7.3
./test/directory/xds/examples/Makefile	1.1.65.3	1.1.65.2
./test/directory/xds/xt.h	1.1.10.4	1.1.10.3
./test/directory/xds/xt_file.c	1.1.9.4	1.1.9.3
./test/directory/xds/xt_omFuncs.c	1.1.10.5	1.1.10.4
./test/directory/xds/xt_parms.h	1.1.11.4	1.1.11.3
./test/directory/xds/xt_rValue.c	1.1.8.5	1.1.8.4
./test/directory/xds/xt_rValue.h	1.1.2.4	1.1.2.3
./test/directory/xds/xt_run.c	1.1.8.4	1.1.8.3
./test/directory/xds/xt_thread.c	1.1.4.4	1.1.4.3
./test/functional/directory/gds/Makefile	1.1.2.5	1.1.2.4
./test/functional/directory/gds/tet_scen	1.1.2.4	1.1.2.3
./test/functional/directory/gds/tools/Makefile	1.1.2.4	1.1.2.3
./test/functional/directory/gds/tools/TET_filter.gds_sec	1.1.2.1	1.1
./test/functional/directory/gds/ts/Makefile	1.1.2.4	1.1.2.3
./test/functional/directory/gds/ts/admin/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/gds/ts/config/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/gds/ts/config/copy_subtree.bat	1.1.2.1	1.1
./test/functional/directory/gds/ts/config/dcecp_add.tcl	1.1.2.1	1.1
./test/functional/directory/gds/ts/config/dcecp_del.tcl	1.1.2.1	1.1
./test/functional/directory/gds/ts/config/dsa11_init.bat	1.1.2.1	1.1
./test/functional/directory/gds/ts/config/dsa11_objects.tcl	1.1.2.1	1.1
./test/functional/directory/gds/ts/config/dsa12_init.bat	1.1.2.1	1.1
./test/functional/directory/gds/ts/config/dsa12_objects.tcl	1.1.2.1	1.1
./test/functional/directory/gds/ts/config/gds_sec_clean.sh	1.1.2.1	1.1
./test/functional/directory/gds/ts/config/gds_sec_start.sh	1.1.2.1	1.1
./test/functional/directory/gds/ts/config/rgy_add.sh	1.1.2.1	1.1
./test/functional/directory/gds/ts/config/rgy_del.sh	1.1.2.1	1.1
./test/functional/directory/gds/ts/gds_sec/Makefile	1.1.2.1	1.1
./test/functional/directory/gds/ts/gds_sec/gds_sec_all	1.1.2.1	1.1
./test/functional/directory/gds/ts/gds_sec/lib/Makefile	1.1.2.1	1.1
./test/functional/directory/gds/ts/gds_sec/lib/sec_dap_b1.tcl	1.1.2.1	1.1
./test/functional/directory/gds/ts/gds_sec/lib/sec_dap_b2.tcl	1.1.2.1	1.1
./test/functional/directory/gds/ts/gds_sec/lib/sec_dap_b3.tcl	1.1.2.1	1.1
./test/functional/directory/gds/ts/gds_sec/lib/sec_dap_b4.tcl	1.1.2.1	1.1
./test/functional/directory/gds/ts/gds_sec/lib/sec_dsp_b1.tcl	1.1.2.1	1.1
./test/functional/directory/gds/ts/gds_sec/lib/sec_dsp_b2.tcl	1.1.2.1	1.1
./test/functional/directory/gds/ts/gds_sec/lib/sec_dsp_b3.tcl	1.1.2.1	1.1
./test/functional/directory/gds/ts/gds_sec/lib/sec_tdt_b1.tcl	1.1.2.1	1.1
./test/functional/directory/gds/ts/gds_sec/lib/sec_tdt_b2.tcl	1.1.2.1	1.1
./test/functional/directory/gds/ts/gds_sec/lib/sec_tdt_b3.tcl	1.1.2.1	1.1
./test/functional/directory/gds/ts/gds_sec/lib/sec_tdt_b4.tcl	1.1.2.1	1.1
./test/functional/directory/gds/ts/gds_sec/lib/sec_tdt_b5.tcl	1.1.2.1	1.1
./test/functional/directory/gds/ts/gdscp/Makefile	1.1.2.4	1.1.2.3
./test/functional/directory/gds/ts/gdscp/lib/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/gds/ts/gdscp/lib/misc/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/gds/ts/gdscp/lib/misc/invalid/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/gds/ts/gdscp/lib/misc/invalid/misc_i.tcl	1.1.2.4	1.1.2.3
./test/functional/directory/gds/ts/gdscp/lib/misc/valid/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/gds/ts/gdscp/lib/referral/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/gds/ts/gdscp/lib/referral/invalid/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/gds/ts/gdscp/lib/referral/invalid/obj_referral_i.tcl	1.1.2.5	1.1.2.4
./test/functional/directory/gds/ts/gdscp/lib/structured/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/gds/ts/gdscp/lib/structured/valid/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/gds/ts/gdscp/lib/x500abbr/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/gds/ts/gdscp/lib/x500abbr/invalid/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/gds/ts/gdscp/lib/x500abbr/invalid/abbr_general_i.tcl	1.1.2.4	1.1.2.3
./test/functional/directory/gds/ts/gdscp/lib/x500abbr/invalid/abbr_help_i.tcl	1.1.2.4	1.1.2.3
./test/functional/directory/gds/ts/gdscp/lib/x500abbr/invalid/abbr_operations_i.tcl	1.1.2.4	1.1.2.3
./test/functional/directory/gds/ts/gdscp/lib/x500abbr/invalid/abbr_show_i.tcl	1.1.2.4	1.1.2.3
./test/functional/directory/gds/ts/gdscp/lib/x500abbr/valid/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/gds/ts/gdscp/lib/x500abbr/valid/abbr_show_v.tcl	1.1.2.4	1.1.2.3
./test/functional/directory/gds/ts/gdscp/lib/x500obj/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/gds/ts/gdscp/lib/x500obj/invalid/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/gds/ts/gdscp/lib/x500obj/invalid/obj_bind_i.tcl	1.1.2.5	1.1.2.4
./test/functional/directory/gds/ts/gdscp/lib/x500obj/invalid/obj_compare_i.tcl	1.1.2.5	1.1.2.4
./test/functional/directory/gds/ts/gdscp/lib/x500obj/invalid/obj_create_i.tcl	1.1.2.5	1.1.2.4
./test/functional/directory/gds/ts/gdscp/lib/x500obj/invalid/obj_cwo_i.tcl	1.1.2.5	1.1.2.4
./test/functional/directory/gds/ts/gdscp/lib/x500obj/invalid/obj_delete_i.tcl	1.1.2.5	1.1.2.4
./test/functional/directory/gds/ts/gdscp/lib/x500obj/invalid/obj_general_i.tcl	1.1.2.4	1.1.2.3
./test/functional/directory/gds/ts/gdscp/lib/x500obj/invalid/obj_help_i.tcl	1.1.2.4	1.1.2.3
./test/functional/directory/gds/ts/gdscp/lib/x500obj/invalid/obj_list_i.tcl	1.1.2.5	1.1.2.4
./test/functional/directory/gds/ts/gdscp/lib/x500obj/invalid/obj_modify_i.tcl	1.1.2.5	1.1.2.4
./test/functional/directory/gds/ts/gdscp/lib/x500obj/invalid/obj_operations_i.tcl	1.1.2.4	1.1.2.3
./test/functional/directory/gds/ts/gdscp/lib/x500obj/invalid/obj_search_i.tcl	1.1.2.5	1.1.2.4
./test/functional/directory/gds/ts/gdscp/lib/x500obj/invalid/obj_show_i.tcl	1.1.2.5	1.1.2.4
./test/functional/directory/gds/ts/gdscp/lib/x500obj/valid/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/gds/ts/gdscp/lib/x500obj/valid/obj_bind_v.tcl	1.1.2.4	1.1.2.3
./test/functional/directory/gds/ts/gdscp/lib/x500obj/valid/obj_compare_v.tcl	1.1.2.4	1.1.2.3
./test/functional/directory/gds/ts/gdscp/lib/x500obj/valid/obj_create_v.tcl	1.1.2.4	1.1.2.3
./test/functional/directory/gds/ts/gdscp/lib/x500obj/valid/obj_cwo_v.tcl	1.1.2.4	1.1.2.3
./test/functional/directory/gds/ts/gdscp/lib/x500obj/valid/obj_delete_v.tcl	1.1.2.4	1.1.2.3
./test/functional/directory/gds/ts/gdscp/lib/x500obj/valid/obj_list_v.tcl	1.1.2.4	1.1.2.3
./test/functional/directory/gds/ts/gdscp/lib/x500obj/valid/obj_modify_v.tcl	1.1.2.4	1.1.2.3
./test/functional/directory/gds/ts/gdscp/lib/x500obj/valid/obj_search_v.tcl	1.1.2.5	1.1.2.4
./test/functional/directory/gds/ts/gdscp/lib/x500obj/valid/obj_show_v.tcl	1.1.2.4	1.1.2.3
./test/functional/directory/gds/ts/gdscp/lib/x500svc/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/gds/ts/gdscp/lib/x500svc/invalid/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/gds/ts/gdscp/lib/x500svc/invalid/svc_general_i.tcl	1.1.2.4	1.1.2.3
./test/functional/directory/gds/ts/gdscp/lib/x500svc/invalid/svc_help_i.tcl	1.1.2.4	1.1.2.3
./test/functional/directory/gds/ts/gdscp/lib/x500svc/invalid/svc_modify_i.tcl	1.1.2.4	1.1.2.3
./test/functional/directory/gds/ts/gdscp/lib/x500svc/invalid/svc_operations_i.tcl	1.1.2.4	1.1.2.3
./test/functional/directory/gds/ts/gdscp/lib/x500svc/invalid/svc_show_i.tcl	1.1.2.4	1.1.2.3
./test/functional/directory/gds/ts/gdscp/lib/x500svc/valid/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/gds/ts/gdscp/test_all.tcl	1.1.2.3	1.1.2.2
./test/functional/directory/gds/ts/gdscp/test_config.tcl	1.1.2.3	1.1.2.2
./test/functional/directory/gds/ts/gdscp/test_config.tcl.sed	1.1.2.3	1.1.2.2
./test/functional/directory/gds/ts/gdscp/test_utils.tcl	1.1.2.4	1.1.2.3
./test/functional/directory/gds/ts/gdssetup/Makefile	1.1.2.2	1.1.2.1
./test/functional/directory/gds/ts/gdssetup/lib/Makefile	1.1.2.2	1.1.2.1
./test/functional/directory/gds/ts/gdssetup/lib/invalid/Makefile	1.1.2.2	1.1.2.1
./test/functional/directory/gds/ts/gdssetup/lib/valid/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/gds/ts/lib/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/gds/ts/lib/shfuncs	1.1.2.7	1.1.2.6
./test/functional/directory/xds/Makefile	1.1.2.5	1.1.2.4
./test/functional/directory/xds/tet_scen	1.1.2.3	1.1.2.2
./test/functional/directory/xds/tools/Makefile	1.1.2.4	1.1.2.3
./test/functional/directory/xds/tools/local_TET.api	1.1.2.4	1.1.2.3
./test/functional/directory/xds/ts/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/config/Makefile	1.1.2.4	1.1.2.3
./test/functional/directory/xds/ts/lib/Makefile	1.1.2.4	1.1.2.3
./test/functional/directory/xds/ts/mhs/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/mhs/lib/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/mhs/lib/invalid/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/mhs/lib/tree/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/mhs/lib/valid/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/scripts/Makefile	1.1.2.5	1.1.2.4
./test/functional/directory/xds/ts/switch/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/switch/lib/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/switch/lib/invalid/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/switch/lib/threads_af/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/switch/lib/threads_as/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/switch/lib/threads_os/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/switch/lib/threads_up/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/switch/lib/tree/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/switch/lib/valid/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xds/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xds/lib/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xds/lib/basic/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xds/lib/invalid/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xds/lib/stress/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xds/lib/threads_af/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xds/lib/threads_as/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xds/lib/threads_os/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xds/lib/threads_stress/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xds/lib/threads_up/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xds/lib/tree/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xds/lib/valid/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xom/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xom/lib/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xom/lib/basic/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xom/lib/invalid/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xom/lib/threads_as/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xom/lib/valid/Makefile	1.1.2.4	1.1.2.3
./test/functional/directory/xds/ts/xom/lib/valid/create4v	1.1.2.2	1.1.2.1
./test/functional/directory/xds/ts/xom/lib/valid/get11v	1.1.2.2	1.1.2.1
./test/functional/directory/xds/ts/xom/lib/valid/geti18n1v	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xom/lib/valid/geti18n2v	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xom/lib/valid/geti18n3v	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xom/lib/valid/instance4v	1.1.2.2	1.1.2.1
./test/functional/directory/xds/ts/xom/lib/valid/instance5v	1.1.2.2	1.1.2.1
./test/functional/directory/xds/ts/xom/lib/valid/instance6v	1.1.2.2	1.1.2.1
./test/functional/directory/xds/ts/xom/lib/valid/put8v	1.1.2.2	1.1.2.1
./test/functional/directory/xds/ts/xoms/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/invalid/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_af/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_as/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/valid/Makefile	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/valid/str_to_attr027v	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/valid/str_to_attr028v	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/valid/str_to_attr029v	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/valid/str_to_filter048v	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/valid/str_to_filter049v	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/valid/str_to_filter050v	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/valid/str_to_name022v	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/valid/str_to_obj002v	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/valid/str_to_rdn007v	1.1.2.3	1.1.2.2


Submission Log *****

  Submitted by Norbert Marrek; User name: marrek
  Date: 7/06/94; Time: 11:53
  Number of files: 117; Defect number: 11170.
  Set name: marrek_cambr; Sandbox: cambr
  List of files and revisions:
./directory/gds/asn1/DUA/dua.mvr	1.1.8.2	1.1.8.1
./directory/gds/asn1/IDS/ids.mvr	1.1.8.3	1.1.8.2
./directory/gds/dsa/AT386/machdep.mk	1.1.2.2	1.1.2.1
./directory/gds/dsa/HP800/machdep.mk	1.1.2.2	1.1.2.1
./directory/gds/dsa/OSF1/osdep.mk	1.1.10.5	1.1.10.4
./directory/gds/dsa/RIOS/machdep.mk	1.1.2.2	1.1.2.1
./directory/gds/dsa/SVR4/machdep.mk	1.1.2.2	1.1.2.1
./directory/gds/dsa/schema_ib	1.1.738.3	1.1.738.2
./directory/gds/nds/OSF1/osdep.mk	1.1.2.3	1.1.2.2
./directory/gds/osiadr/OSF1/osdep.mk	1.1.2.3	1.1.2.2
./test/directory/gds/mavrostest/test_mvr.sh	1.1.8.4	1.1.8.3
./test/directory/xds/examples/run	1.1.4.2	1.1.4.1
./test/functional/directory/gds/tet_code	1.1.2.3	1.1.2.2
./test/functional/directory/gds/tools/TET_filter.admin	1.1.2.4	1.1.2.3
./test/functional/directory/gds/tools/TET_filter.gdscp	1.1.2.4	1.1.2.3
./test/functional/directory/gds/tools/local_TET.admin	1.1.2.4	1.1.2.3
./test/functional/directory/gds/ts/admin/cacheadm	1.1.2.5	1.1.2.4
./test/functional/directory/gds/ts/admin/dsa	1.1.2.6	1.1.2.5
./test/functional/directory/gds/ts/admin/scheme	1.1.2.5	1.1.2.4
./test/functional/directory/gds/ts/admin/shadow	1.1.2.5	1.1.2.4
./test/functional/directory/gds/ts/admin/subtree	1.1.2.5	1.1.2.4
./test/functional/directory/gds/ts/config/config_gds-admin_cache.sed	1.1.2.4	1.1.2.3
./test/functional/directory/gds/ts/config/config_gds-admin_cache.sh	1.1.2.3	1.1.2.2
./test/functional/directory/gds/ts/config/two_dsas.sed	1.1.2.4	1.1.2.3
./test/functional/directory/gds/ts/config/two_dsas.sh	1.1.2.3	1.1.2.2
./test/functional/directory/gds/ts/gdscp/gdscp_all	1.1.2.5	1.1.2.4
./test/functional/directory/gds/ts/gdscp/lib/misc/valid/misc_v.tcl	1.1.2.3	1.1.2.2
./test/functional/directory/gds/ts/gdscp/lib/structured/valid/structured_v.tcl	1.1.2.3	1.1.2.2
./test/functional/directory/gds/ts/gdscp/lib/x500abbr/valid/abbr_operations_v.tcl	1.1.2.3	1.1.2.2
./test/functional/directory/xds/tet_code	1.1.2.3	1.1.2.2
./test/functional/directory/xds/tet_scen	1.1.2.4	1.1.2.3
./test/functional/directory/xds/tools/TET_filter.api	1.1.2.4	1.1.2.3
./test/functional/directory/xds/tools/local_TET.api	1.1.2.5	1.1.2.4
./test/functional/directory/xds/ts/mhs/mhs_st	1.1.2.6	1.1.2.5
./test/functional/directory/xds/ts/scripts/TEST	1.1.2.5	1.1.2.4
./test/functional/directory/xds/ts/scripts/TTEST	1.1.2.5	1.1.2.4
./test/functional/directory/xds/ts/scripts/_testall	1.1.2.5	1.1.2.4
./test/functional/directory/xds/ts/scripts/_ttestall	1.1.2.5	1.1.2.4
./test/functional/directory/xds/ts/scripts/cleantree	1.1.2.5	1.1.2.4
./test/functional/directory/xds/ts/scripts/result	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/switch/lib/invalid/read2i	1.1.2.2	1.1.2.1
./test/functional/directory/xds/ts/switch/switch_mt	1.1.2.7	1.1.2.6
./test/functional/directory/xds/ts/switch/switch_st	1.1.2.6	1.1.2.5
./test/functional/directory/xds/ts/xds/lib/invalid/bind3i	1.1.2.2	1.1.2.1
./test/functional/directory/xds/ts/xds/lib/invalid/list3i	1.1.2.2	1.1.2.1
./test/functional/directory/xds/ts/xds/lib/invalid/read12i	1.1.2.2	1.1.2.1
./test/functional/directory/xds/ts/xds/lib/invalid/read3i	1.1.2.2	1.1.2.1
./test/functional/directory/xds/ts/xds/lib/invalid/rem_entry3i	1.1.2.2	1.1.2.1
./test/functional/directory/xds/ts/xds/lib/stress/bind1s	1.1.2.2	1.1.2.1
./test/functional/directory/xds/ts/xds/lib/valid/bind2v	1.1.2.2	1.1.2.1
./test/functional/directory/xds/ts/xds/lib/valid/bind4v	1.1.2.2	1.1.2.1
./test/functional/directory/xds/ts/xds/lib/valid/bind5v	1.1.2.2	1.1.2.1
./test/functional/directory/xds/ts/xds/xds_mt	1.1.2.8	1.1.2.7
./test/functional/directory/xds/ts/xds/xds_st	1.1.2.6	1.1.2.5
./test/functional/directory/xds/ts/xom/lib/invalid/put2i	1.1.2.2	1.1.2.1
./test/functional/directory/xds/ts/xom/lib/invalid/put3i	1.1.2.2	1.1.2.1
./test/functional/directory/xds/ts/xom/lib/invalid/remove1i	1.1.2.2	1.1.2.1
./test/functional/directory/xds/ts/xom/lib/invalid/remove2i	1.1.2.2	1.1.2.1
./test/functional/directory/xds/ts/xom/lib/valid/read2v	1.1.2.2	1.1.2.1
./test/functional/directory/xds/ts/xom/xom_mt	1.1.2.6	1.1.2.5
./test/functional/directory/xds/ts/xom/xom_st	1.1.2.6	1.1.2.5
./test/functional/directory/xds/ts/xoms/lib/threads_af/SHUTDOWNextract1i	1.1.2.4	1.1.2.3
./test/functional/directory/xds/ts/xoms/lib/threads_af/SHUTDOWNextract_attr1i	1.1.2.4	1.1.2.3
./test/functional/directory/xds/ts/xoms/lib/threads_af/SHUTDOWNobj_to_str002i	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_af/SHUTDOWNstr_to_attr034i	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_af/SHUTDOWNstr_to_attr050i	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_af/SHUTDOWNstr_to_filter003i	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_af/SHUTDOWNstr_to_name004i	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_af/SHUTDOWNstr_to_name029i	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_af/SHUTDOWNstr_to_rdn011i	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_af/STARTextract1i	1.1.2.4	1.1.2.3
./test/functional/directory/xds/ts/xoms/lib/threads_af/STARTextract_attr1i	1.1.2.4	1.1.2.3
./test/functional/directory/xds/ts/xoms/lib/threads_af/STARTobj_to_str002i	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_af/STARTstr_to_attr034i	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_af/STARTstr_to_attr050i	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_af/STARTstr_to_filter003i	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_af/STARTstr_to_name004i	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_af/STARTstr_to_name029i	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_af/STARTstr_to_rdn011i	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_af/T10extract1i	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_af/T10extract_attr1i	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_af/T10obj_to_str002i	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_af/T10str_to_attr034i	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_af/T10str_to_attr050i	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_af/T10str_to_filter003i	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_af/T10str_to_name004i	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_af/T10str_to_name029i	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_af/T10str_to_rdn011i	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_as/SHUTDOWNextract1v	1.1.2.4	1.1.2.3
./test/functional/directory/xds/ts/xoms/lib/threads_as/SHUTDOWNextract_attr1v	1.1.2.4	1.1.2.3
./test/functional/directory/xds/ts/xoms/lib/threads_as/SHUTDOWNobj_to_str009v	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_as/SHUTDOWNstr_to_attr007v	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_as/SHUTDOWNstr_to_filter007v	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_as/SHUTDOWNstr_to_filter033v	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_as/SHUTDOWNstr_to_name003v	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_as/SHUTDOWNstr_to_name016v	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_as/SHUTDOWNstr_to_rdn004v	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_as/STARTextract1v	1.1.2.4	1.1.2.3
./test/functional/directory/xds/ts/xoms/lib/threads_as/STARTextract_attr1v	1.1.2.4	1.1.2.3
./test/functional/directory/xds/ts/xoms/lib/threads_as/STARTobj_to_str009v	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_as/STARTstr_to_attr007v	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_as/STARTstr_to_filter007v	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_as/STARTstr_to_filter033v	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_as/STARTstr_to_name003v	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_as/STARTstr_to_name016v	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_as/STARTstr_to_rdn004v	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_as/T10extract1v	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_as/T10extract_attr1v	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_as/T10obj_to_str009v	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_as/T10str_to_attr007v	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_as/T10str_to_filter007v	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_as/T10str_to_filter033v	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_as/T10str_to_name003v	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_as/T10str_to_name016v	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/lib/threads_as/T10str_to_rdn004v	1.1.2.3	1.1.2.2
./test/functional/directory/xds/ts/xoms/xoms_mt	1.1.2.6	1.1.2.5
./test/functional/directory/xds/ts/xoms/xoms_st	1.1.2.6	1.1.2.5



CR Number                     : 11133
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : ASN1
Short Description             : portability changes to asn1.h
Reported Date                 : 6/29/94
Found in Baseline             : 1.1
Found Date                    : 6/29/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : ASN1/asn1.h
Sensitivity                   : public

[6/29/94 public]

The following is a diff of asn1.h to add support for 64 bit systems:

% diff asn1.h /project/dce/build/dce1.1/src/directory/gds/ASN1
130,134d129
< #else
< #if defined(__alpha)
< #define WORD 8
< #define REALWORD 8
< #endif /* __alpha */
356c351
< #define ASN1_X509             ((unsigned int)1<<31)
---
> #define ASN1_X509             ((unsigned long)1<<31)

The changes are indicated by the < character.

[6/30/94 public]
Instead of
< #define ASN1_X509             ((unsigned int)1<<31)
I'd like to see
< #define ASN1_X509             ((unsigned32)1<<31)
for portability reasons.

[7/01/94 public]
Because we are submitting next week, I integrated the changes
into our file.
I also added #include <dce/dce.h> to get the typedef of unsigned32.

---

[07/07/94 public]
Fixed with yesterdays submission. Please note that we do not use
"unsigned32" as we wanted to do. We have now:

#if defined(__alpha)
#define ASN1_X509               ((unsigned int)1<<31)
#else
#define ASN1_X509               ((unsigned long)1<<31)
#endif /* __alpha */

[7/7/94 public]
Is there a reason that WORD_BIT defined to be in limits.h by POSIX (or
maybe XPG4) can't be used?

[7/8/94 public]
WORD_BIT isn't exactly what is needed here.  WORD is the number of bytes
per word on that platform.  I agree that asn1.h could be made a good deal
more portable but it involves changing more than a few lines, and has
implications for mavros.  Therefore, I'll close this defect and open a
portability enhancement against asn1.h.



CR Number                     : 11107
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 11094
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : gds
Subcomponent Name             : xds
Short Description             : Cache dies during xds_mt
Reported Date                 : 6/28/94
Found in Baseline             : 1.1
Found Date                    : 6/28/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : dce/utils/svc/??
Sensitivity                   : public

[6/28/94 public]
The AS and UP tests pass.  OS, AF, and stress fail.

threads_os:
pass 0          fail 12 .  .  .  .  T10mod_entry1v
pass 0          fail 12 .  .  .  .  T10mod_entry9v
pass 0          fail 12 .  .  .  .  T10mod_rdn6v
pass 0          fail 12 .  .  .  .  T10mod_rdn7v
pass 0          fail 12 .  .  .  .  T10rem_entry16v
pass 0          fail 12 .  .  .  .  T10rem_entry2v

threads_af:
pass 0          fail 12 .  .  .  .  T10add_entry32i
pass 0          fail 12 .  .  .  .  T10compare7i
pass 0          fail 12 .  .  .  .  T10list7i
pass 0          fail 12 .  .  .  .  T10mod_entry14i
pass 0          fail 12 .  .  .  .  T10mod_rdn8i
pass 0          fail 12 .  .  .  .  T10read1i
pass 0          fail 12 .  .  .  .  T10rem_entry8i
pass 0          fail 12 .  .  .  .  T10search10i

XDS - threads_stress/Testcases
--> Test cases: FAILED

[06/28/94 public]
You can see here that no BIND was working. This happens if
some part of gds (stubs, DSA,cache) is not running.
I think we have to change the test environment in the way
that we call gdsdirinfo after each testcase.
That will give us the information which testcase killed gds processes.

[6/30/94 public]
Reran test xds_all_MT on 486.  Tracing was activated.  TET reports:
  
  Local CACHE administration (DIR-IDs=1,2,5)
  Local CACHE administration (DIR-ID=3)
  Local CACHE administration (DIR-ID=4)
  Waiting 60 sec. for coming up the DSA processes
  DSA administration (dsa.chmaster)
  DSA administration (dsa.dsa1)
  DSA administration (dsa.dsa2)
  
  gdsditadm < /dcetest/dcelocal/test/tet/functional/directory/xds/ts/config/dsa.dsa2
		processed with ERROR
  Use  <vi /opt/dcelocal/var/adm/directory/gds/adm/tstfile>  for detailed information

The tstfile shows:

  ** sccsid = @(#)t8.dsa2 7.2 91/07/19 (K Sys Ap 11) ****:
  **** DSA-Identifikation *****:
  ***Subtree Administration ****:
  ***APPEND SUBTREE*******:
  *** Administration ****:
  ***AddObject  de/dbp/dap11/dsa-m2 *******:
									     
  ERROR:
  No connection to DSA/DUA-Cache available !
  To continue press <CR> !
  *** END ****:
  ***END TEST****:

gdsdirinfo shows:

#       PROCTYPE    PID    DIRID    IPCID    STATE
#
        Monitor     11106    -        5        -        
        S-Stub      11122    2        12       -        
        DSA         11118    2        32       -        
        DSA         11133    5        35       -        
        S-Stub      11140    5        15       -        
        S-Stub      11103    3        13       -        
        DSA         11127    3        33       -        
        DSA         11129    4        34       -        
        S-Stub      11132    4        14       -        

There is a core file in var/adm/directory/gds/cache but I can't get a
backtrace out of it.  There is a LOG file (tracing was turned on) but
gdsstep dumps core reading it.  The cstub core dumped as well.

Frustrating, to say the least.

[6/30/94 public]
Found that svcdumplog can read the log.  Here's the output of the cache log
file:

1994-06-30-12:53:43.810+00:00I----- gdscache DEBUG1 gds ipc 0xa44b1bc4
EXIT_d23_result
1994-06-30-12:53:43.880+00:00I----- gdscache DEBUG1 gds ipc 0xa44b1bc4
ENTRY_d23_waitin (wait time = 2)
1994-06-30-12:53:43.880+00:00I----- gdscache DEBUG2 gds ipc 0xa44b1bc4
RCVMSGTYPE: 1 DST-SID: 1 INVOKE-ID: 252 ASSOC-ID: src=0/dst=0
1994-06-30-12:53:43.890+00:00I----- gdscache DEBUG2 gds ipc 0xa44b1bc4
OPR-FLG: 1 CONT-ID: 0x69 USR-ID: 0 MSGSIZE: 128
OPR-ID: 1 CALLING-PID: real=11435/virt.=201
1994-06-30-12:53:43.890+00:00I----- gdscache DEBUG1 gds ipc 0xa44b1bc4
EXIT_d23_waitin (assid = 512, invid = 252, usrid = 0, contid = 0x69,
			oprid = 1, imdat = 1, bref = 0x40002b60, len = 128)
1994-06-30-12:53:43.900+00:00I----- gdscache DEBUG1 gds ipc 0xa44b1bc4
ENTRY_d23_result (assid = 512, invid = 252, usrid = 0, contid = 0x69,
			restype = 254, rmdat = 1, bref = 0x40002b60, len = 164)
1994-06-30-12:53:43.900+00:00I----- gdscache DEBUG2 gds ipc 0xa44b1bc4
SNDMSGTYPE: 3 DST-VPID: 201 INVOKE-ID: 252 ASSOC-ID: src=0/dst=0
1994-06-30-12:53:43.900+00:00I----- gdscache DEBUG2 gds ipc 0xa44b1bc4
OPR-FLG: 1 CONT-ID: 0x69 USR-ID: 0 MSGSIZE: 164
OPR-ID: 254 CALLING-PID: real=11117/virt.=1
1994-06-30-12:53:43.910+00:00I----- gdscache DEBUG2 gds ipc 0xa44b1bc4
Attention byte sent through named FIFO (fd = 11)
1994-06-30-12:53:43.910+00:00I----- gdscache DEBUG1 gds ipc 0xa44b1bc4
EXIT_d23_result
1994-06-30-12:53:43.910+00:00I----- gdscache DEBUG1 gds ipc 0xa44b1bc4
ENTRY_d23_waitin (wait time = 2)
1994-06-30-12:53:43.980+00:00I----- gdscache DEBUG2 gds ipc 0xa44b1bc4
RCVMSGTYPE: 1 DST-SID: 1 INVOKE-ID: 253 ASSOC-ID: src=0/dst=0
1994-06-30-12:53:43.980+00:00I----- gdscache DEBUG2 gds ipc 0xa44b1bc4
OPR-FLG: 1 CONT-ID: 0x69 USR-ID: 0 MSGSIZE: 100
OPR-ID: 1 CALLING-PID: real=11435/virt.=202
1994-06-30-12:53:43.980+00:00I----- gdscache DEBUG1 gds ipc 0xa44b1bc4
EXIT_d23_waitin (assid = 512, invid = 253, usrid = 0, contid = 0x69,
			oprid = 1, imdat = 1, bref = 0x40002b60, len = 100)
1994-06-30-12:53:43.990+00:00I----- gdscache DEBUG1 gds ipc 0xa44b1bc4
ENTRY_d23_result (assid = 512, invid = 253, usrid = 0, contid = 0x69,
			restype = 254, rmdat = 1, bref = 0x40002b60, len = 156)
1994-06-30-12:53:43.990+00:00I----- gdscache DEBUG2 gds ipc 0xa44b1bc4
SNDMSGTYPE: 3 DST-VPID: 202 INVOKE-ID: 253 ASSOC-ID: src=0/dst=0
1994-06-30-12:53:44.000+00:00I----- gdscache DEBUG2 gds ipc 0xa44b1bc4
OPR-FLG: 1 CONT-ID: 0x69 USR-ID: 0 MSGSIZE: 156
OPR-ID: 254 CALLING-PID: real=11117/virt.=1
1994-06-30-12:53:44.000+00:00I----- gdscache DEBUG2 gds ipc 0xa44b1bc4
Attention byte sent through named FIFO (fd = 11)
1994-06-30-12:53:44.000+00:00I----- gdscache DEBUG1 gds ipc 0xa44b1bc4
EXIT_d23_result
1994-06-30-12:53:44.010+00:00I----- gdscache DEBUG1 gds ipc 0xa44b1bc4
ENTRY_d23_waitin (wait time = 2)
1994-06-30-12:53:44.010+00:00I----- gdscache DEBUG2 gds ipc 0xa44b1bc4
RCVMSGTYPE: 1 DST-SID: 1 INVOKE-ID: 254 ASSOC-ID: src=0/dst=0
1994-06-30-12:53:44.020+00:00I----- gdscache DEBUG2 gds ipc 0xa44b1bc4
OPR-FLG: 1 CONT-ID: 0x69 USR-ID: 0 MSGSIZE: 128
OPR-ID: 1 CALLING-PID: real=11435/virt.=203
1994-06-30-12:53:44.020+00:00I----- gdscache DEBUG1 gds ipc 0xa44b1bc4
EXIT_d23_waitin (assid = 512, invid = 254, usrid = 0, contid = 0x69,
			oprid = 1, imdat = 1, bref = 0x40002b60, len = 128)
1994-06-30-12:53:44.020+00:00I----- gdscache DEBUG1 gds ipc 0xa44b1bc4
ENTRY_d23_result (assid = 512, invid = 254, usrid = 0, contid = 0x69,
			restype = 254, rmdat = 1, bref = 0x40002b60, len = 164)
1994-06-30-12:53:44.030+00:00I----- gdscache DEBUG2 gds ipc 0xa44b1bc4
SNDMSGTYPE: 3 DST-VPID: 203 INVOKE-ID: 254 ASSOC-ID: src=0/dst=0
1994-06-30-12:53:44.030+00:00I----- gdscache DEBUG2 gds ipc 0xa44b1bc4
OPR-FLG: 1 CONT-ID: 0x69 USR-ID: 0 MSGSIZE: 164
OPR-ID: 254 CALLING-PID: real=11117/virt.=1
1994-06-30-12:53:44.030+00:00I----- gdscache DEBUG2 gds ipc 0xa44b1bc4
Attention byte sent through named FIFO (fd = 11)
1994-06-30-12:53:44.040+00:00I----- gdscache DEBUG1 gds ipc 0xa44b1bc4
EXIT_d23_result
1994-06-30-12:53:44.080+00:00I----- gdscache DEBUG1 gds ipc 0xa44b1bc4
ENTRY_d23_waitin (wait time = 2)
1994-06-30-12:53:52.590+00:00I----- gdscache DEBUG2 gds ipc 0xa44b1bc4
RCVMSGTYPE: 1 DST-SID: 1 INVOKE-ID: 255 ASSOC-ID: src=0/dst=0
1994-06-30-12:53:52.600+00:00I----- gdscache DEBUG2 gds ipc 0xa44b1bc4
OPR-FLG: 1 CONT-ID: 0x69 USR-ID: 0 MSGSIZE: 100
OPR-ID: 1 CALLING-PID: real=11495/virt.=204
1994-06-30-12:53:52.600+00:00I----- gdscache DEBUG1 gds ipc 0xa44b1bc4
EXIT_d23_waitin (assid = 512, invid = 255, usrid = 0, contid = 0x69,
			oprid = 1, imdat = 1, bref = 0x40002b60, len = 100)
1994-06-30-12:53:52.610+00:00I----- gdscache DEBUG1 gds ipc 0xa44b1bc4
ENTRY_d23_result (assid = 512, invid = 255, usrid = 0, contid = 0x69,
			restype = 254, rmdat = 1, bref = 0x40002b60, len = 156)
1994-06-30-12:53:52.610+00:00I----- gdscache DEBUG2 gds ipc 0xa44b1bc4
SNDMSGTYPE: 3 DST-VPID: 204 INVOKE-ID: 255 ASSOC-ID: src=0/dst=0
1994-06-30-12:53:52.610+00:00I----- gdscache DEBUG2 gds ipc 0xa44b1bc4
OPR-FLG: 1 CONT-ID: 0x69 USR-ID: 0 MSGSIZE: 156
OPR-ID: 254 CALLING-PID: real=11117/virt.=1
1994-06-30-12:53:52.620+00:00I----- gdscache DEBUG2 gds ipc 0xa44b1bc4
Attention byte sent through named FIFO (fd = 1)
1994-06-30-12:53:52.620+00:00I----- gdscache DEBUG1 gds ipc 0xa44b1bc4
EXIT_d23_result
1994-06-30-12:53:52.630+00:00I----- gdscache DEBUG1 gds ipc 0xa44b1bc4
ENTRY_d23_waitin (wait time = 2)
1994-06-30-12:53:52.630+00:00I----- gdscache DEBUG2 gds ipc 0xa44b1bc4
RCVMSGTYPE: 1 DST-SID: 1 INVOKE-ID: 256 ASSOC-ID: src=0/dst=0
1994-06-30-12:53:52.640+00:00I----- gdscache DEBUG2 gds ipc 0xa44b1bc4
OPR-FLG: 1 CONT-ID: 0x69 USR-ID: 0 MSGSIZE: 128
OPR-ID: 1 CALLING-PID: real=11495/virt.=205
1994-06-30-12:53:52.640+00:00I----- gdscache DEBUG1 gds ipc 0xa44b1bc4
EXIT_d23_waitin (assid = 512, invid = 256, usrid = 0, contid = 0x69,
			oprid = 1, imdat = 1, bref = 0x40002b60, len = 128)
1994-06-30-12:53:52.650+00:00I----- gdscache DEBUG1 gds ipc 0xa44b1bc4
ENTRY_d23_result (assid = 512, invid = 256, usrid = 0, contid = 0x69,
			restype = 254, rmdat = 1, bref = 0x40002b60, len = 164)
1994-06-30-12:53:52.650+00:00I----- gdscache DEBUG2 gds ipc 0xa44b1bc4
SNDMSGTYPE: 3 DST-VPID: 205 INVOKE-ID: 256 ASSOC-ID: src=0/dst=0
1994-06-30-12:53:52.650+00:00I----- gdscache DEBUG2 gds ipc 0xa44b1bc4
OPR-FLG: 1 CONT-ID: 0x69 USR-ID: 0 MSGSIZE: 164
OPR-ID: 254 CALLING-PID: real=11117/virt.=1
1994-06-30-12:53:52.660+00:00I----- gdscache DEBUG2 gds ipc 0xa44b1bc4
Attention byte sent through named FIFO (fd = 1)
1994-06-30-12:53:52.660+00:00I----- gdscache DEBUG1 gds ipc 0xa44b1bc4
EXIT_d23_result
1994-06-30-12:53:52.660+00:00I----- gdscache DEBUG1 gds ipc 0xa44b1bc4
ENTRY_d23_waitin (wait time = 2)
1994-06-30-12:53:52.690+00:00I----- gdscache DEBUG2 gds ipc 0xa44b1bc4
RCVMSGTYPE: 1 DST-SID: 1 INVOKE-ID: 257 ASSOC-ID: src=0/dst=0
1994-06-30-12:53:52.690+00:00I----- gdscache DEBUG2 gds ipc 0xa44b1bc4
OPR-FLG: 1 CONT-ID: 0x69 USR-ID: 0 MSGSIZE: 96
OPR-ID: 1 CALLING-PID: real=11495/virt.=206
**** Assertion failure. cma__Queue_insert: Q corruption
     at line 1884 in /project/dce/build/dce1.1-snap/src/threads/cma_dispatch.c pid = 14377

Here's the output from cma_dump.log:

%Internal DCE Threads problem (version CMA BL10+), terminating execution.
% Reason: assertion failure:  cma__Queue_next: Q corruption
	at line 1241 in /project/dce/build/dce1.1-snap/src/threads/cma_debugger.c, pid = 14377
The current thread is 0 (address 0xa44b1bc4)
Current threads:
Thread default thread (a44b1bc4) 0 : ready
  Current vp is 0
  Join: mutex 403648 (21), cv 403698 (2)
  Sync. wait: mutex 4036e8 (22), cv 403738 (3)
  Start function 0 (0)
  Thread's last errno was 0
  Scheduling: priority 12, policy throughput
  Stack: bfedcbcc (default stack) 
  Alerts: none pending, general delivery enabled, asynch delivery disabled
Thread null thread (407030) 2 : ready
  No current vp
  Join: mutex 407320 (23), cv 407370 (4)
  Sync. wait: mutex 4073c0 (24), cv 407410 (5)
  Start function a418ddec (0)
  Thread's last errno was 0
  Scheduling: priority 0, policy idle
  Stack: 41bfec (base = 41c000, guard = 410fff) [<-SP]
  Alerts: none pending, general delivery enabled, asynch delivery disabled
Mutexes:
Mutex default attr's mutex (406fb8) 1, type fast, unlocked
Mutex attr sequence object (403008) 2, type fast, unlocked
Mutex known attr list (403058) 3, type fast, unlocked
Mutex mutex sequence object (4030a8) 4, type fast, unlocked
Mutex known mutex list (4030f8) 5, type fast, un

[07/14/94 public]
The died Cache was related to 11156: SVC managed memory wrong.
This works fine now.

[7/28/94 public]
Verified by running test.



CR Number                     : 11094
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 11107
Project Name                  : dce
H/W Ref Platform              : hppa,i486
S/W Ref Platform              : hpux,osf1
Component Name                : gds
Subcomponent Name             : cstub
Short Description             : Cstub dies
Reported Date                 : 6/27/94
Found in Baseline             : 1.1
Found Date                    : 6/27/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : dce/utils/svc/svclog.c
Sensitivity                   : public

[6/27/94 public]
Cstub dies during xds_all tests.  Here's the gdsdirinfo:

#	PROCTYPE    PID    DIRID    IPCID    STATE
#
	Monitor     15122    -        5        -        
	DUA-Cache   15126    -        1        -        
	S-Stub      15130    2        12       -        
	DSA         15132    2        32       -        
	S-Stub      15135    3        13       -        
	DSA         15137    3        33       -        
	DSA         15147    5        35       -        
	S-Stub      15140    4        14       -        
	DSA         15142    4        34       -        
	Dir-User    15223    -        2        R10      

This causes xt_test to spin in threads_as.  However, 198 tests have failed
throughout xds_st so the problem arose before threads_as was run.

[7/11/94 public]
Encountered on OSF1, as well:


#       PROCTYPE    PID    DIRID    IPCID    STATE
#
        Monitor     2138     -        5        -        
        DUA-Cache   2115     -        1        -        
        DSA         1979     2        32       -        
        S-Stub      2139     2        12       -        
        DSA         1871     5        35       -        
        S-Stub      380      5        15       -        
        S-Stub      1841     3        13       -        
        DSA         1937     3        33       -        
        DSA         30470    4        34       -        
        S-Stub      383      4        14       -        
        Dir-User    2065     -        2        R10

[7/11/94 public]
Unloading the cstub log, on stderr we see:

%Internal DCE Threads problem (version CMA BL10+), terminating execution.
% Reason: assertion failure:  cma__Queue_insert: Q corruption
        at line 1884 in /project/dce/build/dce1.1-snap/src/threads/cma_dispatch.c, pid = 2373
% See 'cma_dump.log' for state information.

Cma_dump.log says:

%Internal DCE Threads problem (version CMA BL10+), terminating execution.
% Reason: assertion failure:  cma__Queue_next: Q corruption
        at line 1241 in /project/dce/build/dce1.1-snap/src/threads/cma_debugger.c, pid = 2281
The current thread is 0 (address 0xa44b1bd4)
Current threads:
Thread default thread (a44b1bd4) 0 : ready
  Current vp is 0
  Join: mutex 403648 (21), cv 403698 (2)
  Sync. wait: mutex 4036e8 (22), cv 403738 (3)
  Start function 0 (0)
  Thread's last errno was 0
  Scheduling: priority 12, policy throughput
  Stack: bfedcbc4 (default stack) 
  Alerts: none pending, general delivery enabled, asynch delivery disabled
Thread null thread (407030) 2 : ready
  No current vp
  Join: mutex 407320 (23), cv 407370 (4)
  Sync. wait: mutex 4073c0 (24), cv 407410 (5)
  Start function a418ddec (0)
  Thread's last errno was 0
  Scheduling: priority 0, policy idle
  Stack: 41bfec (base = 41c000, guard = 410fff) [<-SP]
  Alerts: none pending, general delivery enabled, asynch delivery disabled
Mutexes:
Mutex default attr's mutex (406fb8) 1, type fast, unlocked
Mutex attr sequence object (403008) 2, type fast, unlocked
Mutex known attr list (403058) 3, type fast, unlocked
Mutex mutex sequence object (4030a8) 4, type fast, unlocked
Mutex known mutex list (4030f8) 5, type fast, unl

The log, itself, shows:

1994-07-11-15:01:04.713-04:00I----- gdscstub DEBUG1 gds general d25revent.c 317 0xa44b1bd4
ROS-event: 0 INTERNAL-event: 22 (event count = 1)
ROS-entry: 32 ROS-assid: -1 IPC-entry: 32 IPC-assid: -1
1994-07-11-15:01:04.713-04:00I----- gdscstub DEBUG1 gds general d25evmgt.c 203 0xa44b1bd4
STATE: 1 EVENT: 22 ROS-assid: -1 IPC-assid: -1
1994-07-11-15:01:04.723-04:00I----- gdscstub DEBUG1 gds general d25evmgt.c 243 0xa44b1bd4
ACTION_28 (state entry = 2, action entry = 0)
**** Assertion failure. cma__Queue_insert: Q corruption
     at line 1884 in /project/dce/build/dce1.1-snap/src/threads/cma_dispatch.c pid = 2281


The serviceability problem, again.

[08/18/94 public]
Was a memory leak in SVC. The corrosponding SVC OT is 11156.

[8/29/94 public]
Not reproduced in several iterations of test.  Closed.



CR Number                     : 11092
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gdssetup
Short Description             : gdssetup testsuite: need a
journal filter
Reported Date                 : 6/27/94
Found in Baseline             : 1.1
Found Date                    : 6/27/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : src/test/functional/directory/gds/tools/TET_filter.gdssetup
Sensitivity                   : public

[6/27/94 public]
Since we provide filters for the journals of all other tests, we should
have a filter for the gdssetup testsuite journal.

[7/11/94 public]
Filter submitted a couple of days ago.



CR Number                     : 11088
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : admin
Short Description             : Error message on gdssysadm -fT
Reported Date                 : 6/27/94
Found in Baseline             : 1.1
Found Date                    : 6/27/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : gds/ipc/d23util.c
Sensitivity                   : public

[6/27/94 public]
After activating gds, I issued 'gdssysadm -fT'.  I then received the 'can't
send distributed command' error message.  When checking the status of the
configuration (via gdssysadm menu option 'i') it states that tracing is
activated. 

I will now run a test and see if log files are produced.

[07/07/94 public]
Fixed with yesterday's submission. Basicly: gdsdistcmd didn't work
correctly. If you perform 'gdssysadm -fT' then first 
/opt/dcelocal/var/adm/directory/gds/.profile is edited, then
a distributed command is sent. If this fails (what should never happen)
then .profile is already changed but no logfile is written
until you deactivate and activate again.

[7/8/94 public]
Fix verified by manual testing.

[7/11/94 public]
Forgot to actually close the defect.



CR Number                     : 11054
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gdssetup
Short Description             : valid testcase missing
Reported Date                 : 6/22/94
Found in Baseline             : 1.1
Found Date                    : 6/22/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : test/functional/directory/gds/ts/gdssetup/lib/valid/Makefile
Sensitivity                   : public

[6/22/94 public]
The testcase sv_init1.cleanup is missing from the gdssetup valid testsuite.
This is preventing all the valid testcases from being installed.

[6/23/94 public]
Remove sv_init1.cleanup and sv_init3.cleanup from the ILIST
of test/functional/directory/gds/ts/gdssetup/lib/valid/Makefile.



CR Number                     : 11050
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : stubs
Short Description             : Sstubs die during admin tests
Reported Date                 : 6/22/94
Found in Baseline             : 1.1
Found Date                    : 6/22/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : many
Sensitivity                   : public

[6/22/94 public]
The Sstubs die during the DSA admin test:

Journal results:
  DSA ADMIN TEST START
  Failing cases:
	  dsa.mdl7delval
	  dsa.mdl7modsub
	    dsa.mdl6rematt
	    dsa.adddme.01
	    dsa.dispdme.01
	    dsa.deldme.01
	    dsa.addcert.01
	    dsa.addcertl.02
	    dsa.addcertp.03
	    dsa.dispcert.01
	    dsa.delcert.01
	    dsa.addi18n.01
	    dsa.deli18n.01
	  dsa.mdl7addval
	  dsa.mdl7modval
  Pass: 14
  Fail: 15
    
gdsdirinfo following completion of test:

#	PROCTYPE    PID    DIRID    IPCID    STATE
#
	Monitor     7737     -        5        -        
	DUA-Cache   7741     -        1        -        
	C-Stub      7743     -        2        -        
	S-Stub      7745     3        13       -        
	DSA         7747     3        33       -        
	S-Stub      7750     4        14       -        
	DSA         7752     4        34       -        
	S-Stub      7755     2        12       -        
	DSA         7757     2        32       -        
	DSA         7762     5        35       -        
	DSA         7783     5        35       -

[06/23/94 public]
Your description of the bug is wrong:
In your first output of gdsdirinfo you can see that
the S-Stub of dir.-id 5 is dead.
Your second output of gdsdirinfo shows that all processes are still alive.
(Note: misleading information removed - zeliff)

Note that we have somtimes similar problems on HP when running
all admin tests. TET restores data after certain tests. This forces DSA's
to execv if restoring is done.
If this happens some times we get errors like "no more files", ...
The reason for that is OT 11042: cma_close doesn't work correctly
for processes started by execv.
This happened only on HP. See 11042 for more details and a workaround.
This could explain your second problem, not the first one.
S-Stub should never die. But it does.
Do you have logfiles?

[6/27/94 public]
Similar problems found during gdscp system test.  Here's GDS afterwords:

#	PROCTYPE    PID    DIRID    IPCID    STATE
#
	Monitor     9709     -        5        -        
	DSA         9727     4        34       W3       
	DSA         9730     4        34       W3       
	DUA-Cache   9713     -        1        -        
	C-Stub      9715     -        2        -        
	S-Stub      9733     2        12       -        
	DSA         9735     2        32       -        
	S-Stub      9738     5        15       -

[7/7/94 public]
Problem reproduced with code from July drop.  SStub for dir5 dies once
again during DSA tests.

[8/2/94 public]
Problem could not be reproduced with binaries of 7/25.



CR Number                     : 11045
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gdssysadm
Short Description             : gdssysadm needs usage information
Reported Date                 : 6/22/94
Found in Baseline             : 1.1
Found Date                    : 6/22/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : gds/adm/usradmin/d20admin.c
					     gds/adm/usradmin/d20param.c
					     gds/h/d20_adm.h
					     gds/h/d20proto.h
					     gds/msg/En/Makefile
					     gds/msg/En/d20clhelp.msg
Sensitivity                   : public

[6/22/94 public]

gdssysadm needs some usage information.


root@gemini gds/tools$ gdssysadm -h
FATAL ERROR: illegal function code (-h)



CR Number                     : 11035
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : admin
Short Description             : DSA 'cert' tests fail
Reported Date                 : 6/22/94
Found in Baseline             : 1.1
Found Date                    : 6/22/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : gds/asn1/d2asap.c
Sensitivity                   : public

[6/22/94 public]
Installed binaries were from 1.1beta release.

The DSA admin tests fail:

	dsa.dispcert.01
	dsa.delcert.01

It appears that this may be related to 10670.  Here is the output which
appears in $OUDIR/admin.dsa.log:

***The attributes with syntax Certificate List have one Revoked      ****:
***Certificate each.                                                 ****:
***AddObject /C=US/O=OSF/OU=NM12/CN=Keutel4                          ****:
***It has some attributes of syntax Certificate and Certificate List ****:
***The attributes with syntax Certificate List have Revoked          ****:
***Certificate - one and three - with full fields                    ****:
***end of adding objects****:
****TEST Add a whole tree and objects with Certificate attributes DirId 1****:

BIND                 elapsed time:     1.2280 sec
***Administration ****:
***AddObject /C=US/O=OSF/OU=NM12/CN=MrBeam1   *******:
***Has an attribute with syntax Certificate   *******:
***AddObject /C=US/O=OSF/OU=NM12/CN=MrBeam2                          ****:
***Has an attribute with syntax Certificate Pair includind one Cert. ****:
***AddObject /C=US/O=OSF/OU=NM12/CN=MrBeam3                          ****:
***Mega test with 2 Cert., 2 Cert.List with Rev.Certs, 2 Cert.Pair   ****:
***end of adding objects****:
****TEST DISPLAY SUBTREE of objects with Certificate attribute DirId 1****:

BIND                 elapsed time:     1.2850 sec
***ADMINISTRATION FUNCTIONS ****:
***Display /C=US/O=OSF/OU=NM12/N=Bonnaudet             ****:
***Display /C=US/O=OSF/OU=NM12/N=Keutel1               ****:
***Display /C=US/O=OSF/OU=NM12/N=Keutel2               ****:
***Display /C=US/O=OSF/OU=NM12/N=Keutel3               ****:
***Display /C=US/O=OSF/OU=NM12/N=Keutel4               ****:
***Display /C=US/O=OSF/OU=NM12/N=MrBeam1               ****:
***Display /C=US/O=OSF/OU=NM12/N=MrBeam2               ****:
***Display /C=US/O=OSF/OU=NM12/N=MrBeam3               ****:
                                                                           
ERROR:
No connection to DSA/DUA-Cache available !
To continue press <CR> !
***END TEST ****:
****TEST DELETE SUBTREE of objects with Certificate attribute DirId 1****:
                                                                           
ERROR:
No connection to DSA/DUA-Cache available !
To continue press <CR> !
** sccsid = @(#)t1.1addobj	7.2 91/06/24 (K Sys AP 11) ***:
                                                                           
ERROR:
No connection to DSA/DUA-Cache available !
To continue press <CR> !
** sccsid = @(#)t1.1addobj	7.2 91/06/24 (K Sys AP 11) ***:
                                                                           
ERROR:
No connection to DSA/DUA-Cache available !
To continue press <CR> !

[06/22/94 public]
The output simply says that while displaying MrBeam3
the connection DUA/DSA died. Probably The C-Stub is gone.
(I think that because the next BIND also failed.)

Please try to reproduce it with the newest code (it contains some
fixes for SAP (certificates)).
If it still happens: try it with logging and try to find out
which process did die (gdsdirinfo).
What configuration did you run? Client on HP, Server on AT386?

[6/27/94 public]
Reproduced with binaries from nightly build of 6/26.  The Cstub is, indeed,
gone and the gdscache is spinning.  Tracing, of course, isn't possible
because of ot11055, but here's the stack trace from the cstub core file:

Record-all is ON, overwriting "/u2/share/transit/xdb.op"
>T
 0 free@libc + 0x00000008 (hp-ux export stub)
 1 TMEM@libdce + 0x000b8bac (0x7afee670, 0x7afee670, 0x30, 0x7b034030)
 2 free@libc + 0x00000224 (0x400b0cc8, 0x1, 0x30, 0x7b034030)
 3 TMEM@libdce + 0x0035dbc0 (0x400b0cc8, 0x1, 0x7b0351b0, 0)
 4 duaRCUns_SEQUENCE_OF_SEQUENCE_ + 0x0000005c (0x400b0e38, 0x3, 0x7b035170, 0x7b034030)
 5 duaRCUns_free + 0x00000054 (0x400b0dd0, 0x1, 0x7b034ef8, 0)
 6 duaRevokedCertificates_free + 0x00000030 (0x400b0dd0, 0x1, 0x3231385f, 0x6432615f)
 7 duaCertListUnsigned_free + 0x000000bc (0x7b034fc8, 0x7b034ef8, 0x7b034fc8, 0x400b58d0)
 8 duaCertList_free + 0x00000030 (0x7b034fc8, 0x6432615f, 0x76616c75, 0x6174745f)
 9 dua_att_value1_free + 0x00000758 (0x7b034fc4, 0x7b034ef8, 0x7b034ef8, 0x7b034dc8)
10 d2a106_ids_atval_to_atval + 0x0000132c (0x400b0ac0, 0x3f1, 0x400bb5bc, 0x400bb5be)
11 d2a060_mk_att_apdu + 0x0000031c (0x400af480, 0x7b034dcc, 0x400a62c0, 0x7b034dc8)
12 d2a029_entry_info_to_at_info + 0x00000190 (0x9, 0x400af3f0, 0x7b034dcc, 0x400a62c0)
13 d2a008_ids_read_res_apdu + 0x0000031c (0x7b034ca0, 0x400a62c0, 0x400a62b8, 0x7b034d48)
14 d2a043_asn_read_res_apdu + 0x000001b0 (0x7b034ca0, 0x400a62c0, 0x400a62b8, 0x7b034c20)
15 d2a001_asn1_apdu + 0x000003c0 (0x40010097, 0x400a62c0, 0x400a62b8, 0x7b034c20)
16 d25_asn1toapdu + 0x000000d8 (0x7b034b5c, 0x40003420, 0xf1, 0x40003464)
17 d25_exec_actions + 0x00000378 (0x7b034290, 0x7b0342c8, 0, 0x27fec370)
18 d25_evmgt + 0x0000022c (0x40019cf8, 0x4000123c, 0x188, 0x40001248)
19 main + 0x00000914 (0x9, 0x7b033e70, 0, 0)
>help record
>tr @

[07/04/94 public]
Reproduced in Munich. Fixed today.
(Testing on prague and gemini helped me a lot - it's nice to work
on a machine which is used by nobody else.)
Will be sumitted together with the next
code drop - hopefully Tuesday or Wednesday.

[07/07/94 public]
Fixed - was submitted yesterday.

[7/28/94 public]
Verified by FVT.

[8/2/94 public]
My mistake -- misread the log.  This problem reoccured with binaries from
nightly build of 7/25.

The error reported was: 

520|1 1 11454 1 2|DSA ADMIN: TEST CASE   dsa.dispcert.01
520|1 1 11454 1 3|Command (gdsditadm test_trace < /dcetest/dcelocal/test/tet/functional/directory/gds/ts/lib/dsa.dispcert.01) gave exit code 0
520|1 1 11454 1 4|RECEIVED ERROR: Object (or superior object) doesn't exist !
520|1 1 11454 1 5|TEST FAILED
220|1 1 1 17:20:06|FAIL
410|1 26 1 17:20:06|IC End
400|1 27 1 17:20:07|IC Start
200|1 1 17:20:07|TP Start
520|1 1 11454 1 2|DSA ADMIN: TEST CASE   dsa.delcert.01
520|1 1 11454 1 3|Command (gdsditadm test_trace < /dcetest/dcelocal/test/tet/functional/directory/gds/ts/lib/dsa.delcert.01) gave exit code 0
520|1 1 11454 1 4|RECEIVED ERROR: Object (or superior object) doesn't exist !
520|1 1 11454 1 5|TEST FAILED
220|1 1 1 17:20:55|FAIL

[08/18/94 public]
Not reproducable in Munich on HP.
Rich:Could you retry it? On 10th of August you got the SAP drop -
including changes in dua and DSA - not only XDS.
Cert. tests are the admin SAP tests - so the code for these
tests has changed since your last try (2nd of August).

[8/18/94 public]
I'm no longer able to reproduce this here, either.  Marked as closed.



CR Number                     : 11034
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : mavrostest
Short Description             : Can't link against libasn1.a
Reported Date                 : 6/22/94
Found in Baseline             : 1.1
Found Date                    : 6/22/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : 
test/directory/gds/mavrostest/Makefile
Sensitivity                   : public

[6/22/94 public]
oidt and test_mvr try to link against libasn1.a.  libasn1.a is no longer
produced as an independent library; it is part of libdce.

Fix is to remove -lasn1 from the libs lines.

[6/22/94 public]
Fix submitted.



CR Number                     : 11033
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : adm
Short Description             : libaplv2c.a didn't build
Reported Date                 : 6/22/94
Found in Baseline             : 1.1
Found Date                    : 6/22/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : src/directory/gds/cacheadm/adm_iapl/Makefile
Sensitivity                   : public

[6/22/94 public]
libaplv2c.a didn't build because this makefile lists 'mess.o' as a
dependency but the file was defuncted.

Fix is to remove this object from the objects list.

This prevented gdscacheadm from building.

[6/22/94 public]
Fix submitted.



CR Number                     : 10951
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : 
Short Description             : June 94 code submission
Reported Date                 : 6/15/94
Found in Baseline             : 1.1b9
Found Date                    : 6/15/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : today's submission
Sensitivity                   : public

[6/15/94 public]
Opened for June 94 code submission. It includes Abandon, SAP, gdssetup
and more fixes for I18N.

[06/21/94 public]
Fixed by today's submission.



CR Number                     : 10942
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : nds
Short Description             : GNU software must be in
special directory
Reported Date                 : 6/14/94
Found in Baseline             : 1.1
Found Date                    : 6/14/94
Severity                      : E
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : directory/gds/nds/gnu_*
Sensitivity                   : public

[6/14/94 public]

Our lawyers tell us that any FSF code must be in seperate directories from
OSF copyrighted code.  This is so licensees who choose not to work with FSF
code can easily identify it.

Therefore, the gnu_* files will be moved to directory/gds/nds/FSF/
and the makefile will be changed accordingly.

This must be done before 1.1 GA, but not necessarily beta.

[7/28/94 public]
verified by inspection.



CR Number                     : 10919
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 10016,10918,10821
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gda_child
Short Description             : gda_child can be defuncted
Reported Date                 : 6/9/94
Found in Baseline             : 1.1
Found Date                    : 6/9/94
Severity                      : E
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : gds/gda/*
Sensitivity                   : public

[6/9/94 public]
Once the fix for ot10016 has been proven to work, gda_child can be
defuncted.  When this proof has happened the priority on this defect will
be raised.

[6/23/94 public]
If this defect is not closed then ot10821 must be re-opened.

[7/11/94 public]
upgraded because this should be closed in 1.1

[08/23/94 public]
Fix submitted.

[8/24/94 public]
Verified by nightly build.



CR Number                     : 10893
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : xoms
Short Description             : IDIR in directory/xoms/h/Makefile is incorrect
Reported Date                 : 6/8/94
Found in Baseline             : 1.1
Found Date                    : 6/8/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b10
Affected File(s)              : directory/xoms/h/Makefile
Sensitivity                   : public

[6/8/94 public]

IDIR in directory/xoms/h/Makefile says /include rather
than /share/include.

thanks
annie

[6/8/94 public]
Fix submitted.



CR Number                     : 10863
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : ASN1
Short Description             : a couple lines of code aren't ANSI compliance
Reported Date                 : 6/3/94
Found in Baseline             : 1.0.3
Found Date                    : 6/3/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : directory/gds/ASN1/allocm.c
Sensitivity                   : public

[6/3/94 public]

Module allocm.c comtains 2 lines of code which have nested assignment
statement.  According to ANSI standard, the order of the evaluation
is not defined.  The change is to separate the line into 2 statements.
The diff result are looked like this:

162,163c162
<                       asn1_alloc_collide_tab[i].next_index = i+1;
<                       i++;
---
>                       i = asn1_alloc_collide_tab[i].next_index = i+1;
186,189c185
<               {
<                       asn1_alloc_collide_tab[i].next_index = i+1;
<                       i++;
<               }
---
>                       i = asn1_alloc_collide_tab[i].next_index = i+1;

[06/06/94 public]
I agree with your fix. Will be submitted together with the next gds code drop -
scheduled for 06/10/94.

[06/21/94 public]
Fixed by today's submission.



CR Number                     : 10782
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : libdce/SVR4
Short Description             : SNI Munich needs on SVR4 libdce Makefile modifications
Reported Date                 : 5/26/94
Found in Baseline             : 1.1
Found Date                    : 5/26/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b10
Affected File(s)              : libdce/SVR4/machdep.mk
Sensitivity                   : public

[5/26/94 public]

We don't want to build all libdce stuff here in Munich on SVR4. 
Esp. we have problems with CDS - tainted files, ....
So we have to add to SVR4/machdep.mk some Munich specific stuff -
done with '.if ${SITE} == "SNI-Munich"'.
This is the diff between our version and 
/project/dce/build/dce1.1/src/libdce/SVR4/machdep.mk:

38,43d98
< .if ${SITE} == "SNI-Munich"
< DCE_EXPORTBASE = /project/dce/build/dce1.1-baseline/bl-9/export/svr4
< .else
< DCE_EXPORTBASE = ${EXPORTBASE}
< .endif
<
45c100
< LIBGDS_LIBS   = libXDS.a libXOM.a libdua_r.a libd23.a libd27.a \
---
> LIBXDS_LIBS   = libXDS.a libXOM.a libdua_r.a libd23.a libd27.a \
47c102
< LIBDCE_LIBS   = libcma.a libnck.a libidl.a libsvc.a  libdced.a libcds.a \
---
> LIBDCE_LIBS   = libcma.a libnck.a libidl.a libsvc.a libdced.a libcds.a \
51c106
<                 libsvr4.a
---
>                  ${LIBXDS_LIBS} libsvr4.a
53,54c108
< ALLLIBS_DCE   = ${LIBDCE_LIBS:S;^;${DCE_EXPORTBASE}/usr/lib/;g}
< ALLLIBS_GDS   = ${LIBGDS_LIBS:S;^;${EXPORTBASE}/usr/lib/;g}
---
> ALLLIBS               = ${LIBDCE_LIBS:S;^;${EXPORTBASE}/usr/lib/;g}
61c115
< libdce.so: ${ALLLIBS_DCE} ${ALLLIBS_GDS}
---
> libdce.so: ${ALLLIBS}
64c118
<       for x in ${ALLLIBS_DCE} ${ALLLIBS_GDS}; \
---
>       for x in ${ALLLIBS}; \

[05/27/94 public]
Fixed with today's submission. Abby did preapprove me for this change 
some days ago.

[6/20/94 public]



CR Number                     : 10763
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : xt_test
Short Description             : xt_test should be installed
with API FVTs
Reported Date                 : 5/25/94
Found in Baseline             : 1.1
Found Date                    : 5/25/94
Severity                      : D
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : see below
Sensitivity                   : public

[5/25/94 public]
xt_test is still installed in the old location:

	dcetest/dce1.1/test/directory/xds

It should be installed along with the FVTs in:

	dcetest/dce1.1/test/tet/functional/directory/xds/ts/scripts

(perhaps 'scripts' should be renamed 'bin')

This would involve changes to:

src/test/directory/xds/Makefile
src/test/systest/dcetest_config
src/test/functional/directory/gds/ts/lib/shfuncs
	export_paths()



CR Number                     : 10742
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : api
Short Description             : Make removal of testcase logs
conditional
Reported Date                 : 5/24/94
Found in Baseline             : 1.1
Found Date                    : 5/24/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : various files in test/functional/directory/xds
Sensitivity                   : public

[5/24/94 public]
Each of the testsuites has a cleanup() routine which removes the individual
testcase logs after the test is finished.  Removal of these logs should be
made conditional.  I suggest adding a commandline option to local_TET.api
which sets an environment variable.  The value of this variable controls
whether the logs are removed, or not.

[8/2/94 public]
verified by manual inspection



CR Number                     : 10741
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : api tests
Short Description             : New test scenario for API
Reported Date                 : 5/24/94
Found in Baseline             : 1.1
Found Date                    : 5/24/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : src/test/functional/directory/xds/tet_scen
Sensitivity                   : public

[5/24/94 public]
It would be useful to have a test scenario to run all API tests which do
not require a DCE cell. (I.e., everything but 'switch')  I suggest

	all_no_switch

[07/07/94 public]
Fixed. Yesterday submitted. Works - I have just used it.



CR Number                     : 10740
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gds,xds
Short Description             : Submit test drivers, filters
Reported Date                 : 5/24/94
Found in Baseline             : 1.1
Found Date                    : 5/24/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b10
Affected File(s)              : see below
Sensitivity                   : public

[5/24/94 public]
The following files need to be created in the backing build:

src/test/functional/directory/gds/tools/
	Makefile
	local_TET.admin
	TET_filter.admin
	TET_filter.gdscp

src/test/functional/directory/xds/tools/
	Makefile
	local_TET.api
	TET_filter.api

The following files will be modified for this:
	
src/test/functional/directory/gds/Makefile
src/test/functional/directory/xds/Makefile

[5/24/94 public]
Files submitted.



CR Number                     : 10737
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486,hppa
S/W Ref Platform              : osf1,hpux
Component Name                : gds
Subcomponent Name             : xoms
Short Description             : XOMS extract tests fail
Reported Date                 : 5/24/94
Found in Baseline             : 1.1
Found Date                    : 5/24/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : test/functional/directory/xds/ts/xoms/lib/valid/extr*, test/functional/directory/xds/ts/xoms/lib/invalid/extr*,test/functional/directory/xds/ts/xoms/lib/threads_af/T*extr*, test/functional/directory/xds/ts/xoms/lib/threads_as/T*extr*
Sensitivity                   : public

[5/24/94 public]
The following tests fail:

	basic
		extract1v
		extract_attr1v
	valid
		extract1i
		extract_attr1i
	threads_as
		T10extract1v
		T10extract_attr1v
	threads_af
		T10extract1i
		T10extract_attr1i

I'll provide more details upon re-running the test.

[05/24/94 public]
I have found the reason: extract1v, extract_attr1v, extract1i
and extract_attr1i have the lines:

Include  ../../tests.xds/tree/build_tree2

and

Include  ../../tests.xds/tree/delete_tree2

This was the path of the old testing environment. The TET tree looks
different. Rich: Who will fix this: You or me? (You have the choice.)

[05/24/94 public]
Fixed with submission of 4 files.

[6/20/94 public]
Problem reproduced with binaries from 6/13.

[06/21/94 public]
Fixed by today's submission.

[6/22/94 public]
More background info:  as of 1.1 beta binaries the ST tests passed but the
MT tests failed on both 486 and UX.  Have not yet tested latest submission.

[06/22/94 public]
True: ST passed, MT failed. I forgot to change the pass to the tree
for MT testcases (submit of 06/21/94)
 But: really fixed with the code drop yesterday.

[7/8/94 public]
Tests pass on 486.  Still need to confirm on HP.

[8/11/94 public]
Tests pass on HP.



CR Number                     : 10736
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : xds
Short Description             : threads_as fail
Reported Date                 : 5/24/94
Found in Baseline             : 1.1
Found Date                    : 5/24/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b10
Affected File(s)              : test/functional/directory/gds/ts/lib/shfuncs, test/functional/directory/xds/ts/switch/switch_mt, test/functional/directory/xds/ts/xds/xds_mt
Sensitivity                   : public

[5/24/94 public]
The TET journal reports that threads_as fails:

400|1 2 1 13:23:04|IC Start
200|1 1 13:23:04|TP Start
520|1 1 7069 1 2|XDS - threads_as/Testcases
520|1 1 7069 1 3|pass 12        fail 0  .  .  .  .  T10compare1b
520|1 1 7069 1 4|pass 12        fail 0  .  .  .  .  T10list1b
520|1 1 7069 1 5|pass 12        fail 0  .  .  .  .  T10read1b
520|1 1 7069 1 6|pass 12        fail 0  .  .  .  .  T10search1b
520|1 1 7069 1 7|pass 12        fail 0  .  .  .  .  T10compare12v
520|1 1 7069 1 8|pass 12        fail 0  .  .  .  .  T10list8v
520|1 1 7069 1 9|pass 12        fail 0  .  .  .  .  T10read17v
520|1 1 7069 1 10|pass 12       fail 0  .  .  .  .  T10read25v
520|1 1 7069 1 11|pass 12       fail 0  .  .  .  .  T10read26v
520|1 1 7069 1 12|pass 12       fail 0  .  .  .  .  T10read28v
520|1 1 7069 1 13|pass 12       fail 0  .  .  .  .  T10search17v
520|1 1 7069 1 14|pass 4        fail 0  .  .  .  .  T2bu1_is2_as
520|1 1 7069 1 15|pass 4        fail 0  .  .  .  .  T2is1_2_as
520|1 1 7069 1 16|pass 4        fail 0  .  .  .  .  T2ivbu1_2_as
520|1 1 7069 1 17|pass 4        fail 0  .  .  .  .  T2ivbus1_2_as
520|1 1 7069 1 18|pass 4        fail 0  .  .  .  .  T2shutdown1_2_as
520|1 1 7069 1 19|pass 4        fail 0  .  .  .  .  T2v1_is2_as
220|1 1 1 13:26:12|FAIL
410|1 2 1 13:26:12|IC End

I'm going to rerun to produce a more detailed log.

[5/24/94 public]
I think this is a defect in the testcase rather than the code:  the 'check
error' function in lib/shfuncs.

[05/24/94 public]
I think the same. The output of the tests is OK: all T10* have 12 passing,
0 failing threads, the T2* have 4 passing, 0 failing threads.

[05/31/94 public]
Fix submitted: 05/27/94.

[6/20/94 public]
Fix verified.



CR Number                     : 10732
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : bld
Short Description             : Can't build!
Reported Date                 : 5/23/94
Found in Baseline             : 1.1
Found Date                    : 5/23/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : 
			./config/dce_config
			./directory/gds/conf/Makefile
			./directory/gds/dsa/Makefile
			./directory/gds/dsa/OSF1/osdep.mk
			./directory/gds/nds/AT386/machdep.mk
			./directory/gds/nds/HP800/machdep.mk
			./directory/gds/nds/Makefile
			./directory/gds/nds/OSF1/osdep.mk
			./directory/gds/nds/RIOS/machdep.mk
			./directory/gds/nds/SVR4/machdep.mk
			./directory/gds/osiadr/Makefile
			./directory/gds/osiadr/OSF1/osdep.mk
Sensitivity                   : public

[5/23/94 public]

The problem is that gdsmkiss is built with a static version of libdce, 
so if your build machine is using DCE (that's libdce is different 
than the one being built) the build fails.  I have hacked up a temp
version of the Makefile so that I could build the entire pool previous
to my submission but this has to be fixed!

cd /tmp/DSATMP26669; /tmp_mnt/net/equal/users/mdf/sb/nightly/obj/hp800/directory/gds/dsa/gdsmkiss schema_ib -w*:DISCARD:-
/lib/dld.sl: Unresolved symbol: _fcntl_sys (code)  from /usr/lib/libdce.sl
sh: 26681 abort - core dumped

[5/24/94 public]
This looks, as if your path to find the right shared library (libdce)
is not set correctly. If I'm right, you have to set SHLIB_PATH on HP
(LD_RUN_PATH on SVR4) as environment variables to point first to
your developer version of the shared library and then to the system 
installed version.
If you're using the installed libdce during your development process,
then something must be wrong with the global dce /lbe/*.mk file setup.


[Fairbrother 5/24/94 public]
Hmm, I have never had to set specific environment variable before 
inorder to build.  I am under the impression that executables that
are needed for the build should be built for the HOST (build machine)
not for the TARGET_MACHINE, (doesn't the setup_all phase of the build
do this?).

[05/24/94 public]
Of course you are right: Every developer should simply call "build" without
setting any obscure environment. 
In gds we have the special situation that four processes
(gds/dsa/gdsmkiss, gds/dsa/gdsgendb, gds/osiadr/gdsgennsap, gds/nds/ndscomp)
are built AND used in the build. They are no real tools
(like mavros, i.e.) because they belong to the installation of gds
and depend on other gds stuff.
For OSF/1 we have the solution that in the build the following happens:

inlib my_sb/export/at386/usr/shlib/libdce.so
gdsmkiss ...
rmlib my_sb/export/at386/usr/shlib/libdce.so

For the other platforms nothing is done. So it depends on the built-in
linker rules which libdce is taken when gdsmkiss is called. I.e. on RIOS
the xlc automaticly sets a libpath

my_sb/export/at386/usr/lib:backing_build/export/at386/usr/lib:/usr/lib:/lib

before linking gdsmkiss; so running gdsmkiss works fine in the build.
(But this makes other problems - see OT 9978.)

I don't know exactly the rules on HP. But I think the following happens:

When gdsmkiss is linked a libpath 

/usr/lib:my_sb/export/hp800/usr/lib:backing_build/export/hp800/usr/lib

is put into gdsmkiss. (I think that because the nightly build machine
at OSF has no libdce in /usr/lib but finds a libdce when running gdsmkiss
in the build.)
The right solution for your problem is to write a gds/dsa/HPUX/osdep.mk,
gds/osiadr/HPUX/osdep.mk and gds/nds/HPUX/osdep.mk which are similar
to the OSF1/osdep.mk. "inlib" has to be replaced with setting
the right environment variable (SHLIB_PATH??) on HP.
I will try to do this soon.

[5/24/94 public]

No. The right solution is to build these commands with the archived
libraries. (HP-UX build builds both the shared and archived versions of
libdce in a single build.) Relying on the dynamic loader's search path is
just calling for a trouble.

On HP-UX, the linker puts the hardcoded pathnames of the shared libraries
into the executables, e.g., <EXPORTBASE>/usr/lib/libdce.sl . We supplement
it by adding the +b,${LPATH} linker option (see src/Makeconf) so that when
the executables (and shared libraries) are installed onto the target
machine (test machine) they can be found in the right place. (Assuming, of
course, that there won't be <EXPORTBASE>/usr/lib/libdce.sl on the target
machine.)

Your suggestion of changing +b,${LPATH} to
+b,<SB>/export/hp800/usr/lib:<BB>/export/hp800/usr/lib:${LPATH} will work,
but not a bullet-proof.

[05/25/94 public]
Thanks for your hints. I would like to understand HP linking
and loading. So: first question:

I.e. gdsmkiss is linked with:

c89 +b,/lib:/usr/lib -L<SB>/export/hp800/usr/lib -L<BB>/export/hp800/usr/lib
-o gdsmkiss d26mkiss.o -ldce

Does this mean that if I run this gdsmkiss the dynamic loader looks for
libdce in the following order?
1.) /lib/libdce.sl
2.) /usr/lib/libdce.sl
3.) <SB>/export/hp800/usr/lib/libdce.sl
4.) <BB>/export/hp800/usr/lib/libdce.sl

If yes: Does this mean that setting SHLIB_PATH to <SB>/export/hp800/usr/lib
wouldn't help?
(I guess if I set SHLIB_PATH=<SB>/export/hp800/usr/lib
the following would happen:
The loader looks for libdce in the following order:
1.) /lib/libdce.sl
2.) /usr/lib/libdce.sl
3.) <SB>/export/hp800/usr/lib/libdce.sl

Right?)

Second question: If I link gdsmkiss with the archive libdce.a all will work fine
in the build. But I don't want to install staticly linked gdsmkiss, gdsgendb,
gdsgennsap, ndscomp - it's waste of disc space.
Do you see a better solution for that than to build two versions of gdsmkiss -
one for the build, one for the installation?

[6/10/94 public]

I misunderstood the situation. I thought that gdsmkiss etc. are used only
for the build and not installed. So they are installed and that means you
want them linked against the shared libraries.

A1: Yes. You can use /usr/bin/chatr command to see the shared libray
loading order on HP-UX. (Also, you can change it by using chatr. See the
man page chatr(1).) For instance, dce1.1 rpcd:

$ chatr rpcd
rpcd: 
         shared executable 
         shared library dynamic path search:
             SHLIB_PATH     disabled  second 
             embedded path  enabled   first  /lib:/usr/lib
         shared library list:
             static    rpcd.X
             dynamic   /afs/ch/project/dce/build/HP_RPC/export/hp800/usr/lib/libdce.sl
             dynamic   /lib/libc.sl
         shared library binding:
             immediate nonfatal 

The "embedded path" is what is specified by +b ld option. (Note: SHLIB_PATH is
disabled because of no +s ld option.)

If you like to use SHLIB_PATH to overwrite the embedded path, you'll need
"+s,+b,${LPATH}" ld option. The order of the options is significant (see
ld(1)). It will change the attribute to:

             SHLIB_PATH     enabled   first 
             embedded path  enabled   second /lib:/usr/lib

You can also use /usr/contrib/bin/odump command to get the same info:

$ odump -slliblist -sllibsearch -sllibload rpcd

Shared Library List Table for rpcd:

Index  Ref  IDNR  HighWater  Name 

    0  abs  I.N.          0  rpcd.X
    1   -l  I.N.          0  /afs/ch/project/dce/build/HP_RPC/export/hp800/usr/lib/libdce.sl
    2   -l  I.N.         27  /lib/libc.sl


Shared Library Dynamic Path Search for rpcd:

Search List      SP  Current Value

embedded_path    E1  /lib:/usr/lib
SHLIB_PATH       D2  Not Defined


Shared Library Load List for rpcd:

Order    Name

    0    rpcd
    1     ^ /usr/lib/libdce.sl
    2     ^ /lib/libc.sl

(Since I have /usr/lib/libdce.sl on my node, -sllibload picked it.)

A2: No. Well, you can certainly use SHLIB_PATH, but it's a security hole.

[07/11/94 public]
Fixed: Removed the run of gdsmkiss, gdsgendb, gdsgennsap, ndscomp
from the build and put it into dce_config.

[7/28/94 public]
Fix proved during installation.



CR Number                     : 10728
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : api tests
Short Description             : Correct paths in cleanup()
Reported Date                 : 5/23/94
Found in Baseline             : 1.1
Found Date                    : 5/23/94
Severity                      : C
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : see below
Sensitivity                   : public

[5/23/94 public]
Some of the paths are incorrect for cleaning logs.

[5/23/94 public]
Fixed.



CR Number                     : 10705
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : api tests
Short Description             : API tests fail on TET lock
Reported Date                 : 5/19/94
Found in Baseline             : 1.1
Found Date                    : 5/19/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b10
Affected File(s)              : see below
Sensitivity                   : public

[5/19/94 public]
The API tests will not even run.  They seem to fail when tet complains of
lock_file problems.  This is the output of xds_st run alone:

  Local CACHE administration (DIR-IDs=1,2,5)
  Local CACHE administration (DIR-ID=3)
  Local CACHE administration (DIR-ID=4)
  Waiting 60 sec. for coming up the DSA processes
  DSA administration (dsa.chmaster)
  DSA administration (dsa.dsa1)
  DSA administration (dsa.dsa2)
  Waiting 60 sec. for coming up the DSA processes
  Now, testing is going on ... 
  
  Tcc error, message from source file
  /project/dce/build/dce1.1-snap/src/test/tet/src/posix_c/tcc/tool.c line
  911 :  
  unlock of exe dir exclusive lock file
  
  For results about Code Coverage Measurement see: ./hits
  
The resultant journal looks like this:

  0|1.10 14:27:11 19940519|User: zeliff (0) TCC Start, Command Line:
    /dcetest/dcelocal/test/tet/bin/tcc -e functional/directory/xds
    xds_all_ST 
  20|/dcetest/dcelocal/test/tet/functional/directory/xds/tetexec.cfg
      1|Config Start 
  30||TET_VERSION=1.10
  30||TET_OUTPUT_CAPTURE=False
  30||TET_RESCODES_FILE=tet_code
  30||TET_EXEC_IN_PLACE=True
  30||TET_TAPE_DEVICE=/dev/rmt0
  40||Config End
  70||"STARTING single threaded XDS tests using TEST script"
  10|0 /xds/xds_st 14:27:11|TC Start, scenario ref 53-1
  520|0 0 2425 1 1|TESTING with XT_TEST FINISHED
  50||Message from source file
      /project/dce/build/dce1.1-snap/src/test/tet/src/posix_c/tcc/tool.c
      line 911: unlock of exe dir exclusive lock file  
  80|0 0 14:37:57|TC End
  70||"FINISHED single threaded XDS tests"
  900|14:37:57|TCC End
      
The directory in which the testsuite ran (dir/xds/ts/xds) looks like so:

  total 26
  drwxr-xr-x   3 zeliff   sys         1024 May 19 14:37 .
  drwxr-xr-x  10 zeliff   sys         1024 May 19 07:29 ..
  drwxr-xr-x  12 zeliff   sys         1024 May 18 21:12 lib
  -rw-rw-rw-   1 root     sys           36 May 19 14:27 tet1.2408
  -rw-rw-rw-   1 root     sys            0 May 19 14:37 tet_stderr
  -rw-rw-rw-   1 root     sys           47 May 19 14:37 tet_xres
  -rwxr-xr-x   1 zeliff   sys         3587 May 18 18:10 xds_mt
  -rwxr-xr-x   1 zeliff   sys         3108 May 18 18:10 xds_st

I am using a different test driver (local_TET.api) than SNI provided.  I
will place a copy of it in the AFS cell, in:

	/afs/dce/project/dce/sni/otXXXXX
 
where XXXXX is the number of this defect.

[5/23/94 public]
I caused this.  I uncommented the line in the testsuite cleanup() routines
which deletes all tet_* files.  This is removing the lock.

[5/23/94 public]
Files fixed:
./test/functional/directory/xds/ts/mhs/mhs_st
./test/functional/directory/xds/ts/switch/switch_mt
./test/functional/directory/xds/ts/switch/switch_st
./test/functional/directory/xds/ts/xds/xds_mt
./test/functional/directory/xds/ts/xds/xds_st
./test/functional/directory/xds/ts/xom/xom_mt
./test/functional/directory/xds/ts/xom/xom_st
./test/functional/directory/xds/ts/xoms/xoms_mt
./test/functional/directory/xds/ts/xoms/xoms_st



CR Number                     : 10697
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : api tests
Short Description             : xds_mt - bad path for find in cleanup()
Reported Date                 : 5/18/94
Found in Baseline             : 1.1
Found Date                    : 5/18/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : test/functional/directory/xds/ts/xds/xds_mt
Sensitivity                   : public

[5/18/94 public]
The cleanup() routine has a bad path for the find invocations.  Needs 'lib'
between 'xds' and 'threads_*'.

[5/18/94 public]
Fix submitted.



CR Number                     : 10696
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : api tests
Short Description             : defunct unused test drivers
Reported Date                 : 5/18/94
Found in Baseline             : 1.1
Found Date                    : 5/18/94
Severity                      : D
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : see below
Sensitivity                   : public

[5/18/94 public]
The following files are unused and should be defuncted:

src/test/functional/directory/xds/ts/scripts:
	TESTALL
	TTESTALL
	TTESTALLa
	TTESTa
	_test
	_ttest
	_ttestalla



CR Number                     : 10695
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : api tests
Short Description             : API test suites do not run all cases
Reported Date                 : 5/18/94
Found in Baseline             : 1.1
Found Date                    : 5/18/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : see below
Sensitivity                   : public

[5/18/94 public]
Not all the API test suites run all the testcases, and some test suites try
to run non-existent test.

 Single-threaded
---------------
	XDS - does not run stress testcases 
	XOMS - attempts to run 'basic,' but there are no basic XOMS
		testcases.  (Only valid and invalid.)  
	MHS - attempts to run 'basic,' but there are no basic MHS
		testcases.  (Only valid and invalid.)  
	SWITCH - attempts to run 'basic,' but there are no basic SWITCH
		testcases.  (Only valid and invalid.)  

Multi-threaded
--------------
	XDS - does not run the threads_up testcases.
	SWITCH - does not run the threads_up testcases.cases.

Files modified:
---------------
src/test/functional/directory/xds/ts:

	xds/xds_st
	xds/xds_mt
	xoms/xoms_st
	mhs/mhs_st
	switch/switch_st
	switch/switch_mt

[5/18/94 public]
Fix submitted

[5/24/94 public]
Closed.



CR Number                     : 10684
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : gds
Subcomponent Name             : api tests
Short Description             : GDS monitor does not shutdown
on gdssysadm -fd
Reported Date                 : 5/18/94
Found in Baseline             : 1.1
Found Date                    : 5/18/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : gds/ipc/*
Sensitivity                   : public

[5/18/94 public]
During a run of all the API functional tests, the test scripts hung after
xom_st, apparently on a 'gdssysadm -fd' call.  gdsdirinfo shows the
following information:

#       PROCTYPE    PID    DIRID    IPCID    STATE
#
        Monitor     17675    -        5        -        

Showing that somewhere along the line most of GDS died.

[5/18/94 public]
This only happened on OSF/1.  (Previously statement about survivability on
the HP was incorrect.)

[5/18/94 public]
Found two core files produced by xt_test in xoms/lib/threads_af and
xoms/lib/threads_as.  Here's the backtrace:

gdb) bt
#0  0x408fc0 in xt_status_to_buffer (1, -1073748320)
#1  0x4096c0 in xt_cmp_status (1, 0, 25)
#2  0x41c56b in xt_ds_unbind ()
#3  0x4075e0 in xt_run ()
#4  0x407216 in xt_main (6, -1073746404)
#5  0x423078 in main (6, -1073746404, -1073746376, -1073746008)
#6  0x4000cb in __start (Cannot access memory at address 0x6.

[05/18/94 public]
Rich: could you check if the threaded xoms tests are called with
"xt_test -a T10..." instead of "-t"? If yes: The core dump is a dup
of 10244.
Of course the problem with the deactivation of gds is still there
and has to be investigated.

[5/18/94 public]
You won't believe it.  I accidentally copied xoms_mt on top of xoms_st.  So,
yes, the core dump is a dup of 10244 -- the threaded tests were being run
as single threaded tests.

However, we still have the gdssysadm problem -- which occured in xom, not
xoms, and so is a real defect. 

Here is an analysis of the problem by Jochen Keutel, sent via mail:

What happens is that the deactivation hangs because the Monitor does not
die - as it should be. All other processes were already killed - stubs with
9, rest with 15.  So it's OK that the processes are died - gds was
deactivated.

[06/21/94 public]
Fixed by today's submission.



CR Number                     : 10670
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 10518
Project Name                  : dce
H/W Ref Platform              : hppa,i486
S/W Ref Platform              : hpux,osf1
Component Name                : gds
Subcomponent Name             : admin
Short Description             : Subtree ops cause processes to die
Reported Date                 : 5/17/94
Found in Baseline             : 1.1
Found Date                    : 5/17/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : some files in dsa subdir
Sensitivity                   : public

[5/17/94 public]
DSAs die during subtree operations.  Here's what GDS looks like after the
test finishes:

#	PROCTYPE    PID    DIRID    IPCID    STATE
#
	Monitor     3639     -        5        -        
	DUA-Cache   3641     -        1        -        
	C-Stub      3643     -        2        -        
	S-Stub      3645     2        12       -        
	S-Stub      3660     5        15       -        
	S-Stub      3650     3        13       -        
	DSA         3652     3        33       -        
	S-Stub      3655     4        14       -        
	DSA         3657     4        34       -        

The journal of the of the test will be in the AFS cell in a directory named
as the number of this OT.

[5/18/94 public]
More data:  subtree ops fail on 486, as well.  Unfortunately, I didn't
check to see if the DSAs were still running.  Here are the list of tests
which failed on UX:

         subt.5chnam
        subt.1sav_app
         subt.1chmas
        subt.1svap
         subt.2chmas
        subt.2sav_app
         subt.3chmas
        subt.3sav_app
         subt.4chmas
        subt.4sav_app
         subt.10modall
        subt.1copy
        subt.2copy
        subt.3copy
        subt.4copy
         subt.5delst
         subt.31delst
         subt.32delst
         subt.33delst
         subt.1database
         subt.2database
         subt.3database
         subt.1chnam
         subt.2chnam
         subt.3chnam
        subt.3svap
         subt.4chnam
        subt.4svap

Here are the tests which fail on 486:

        subt.3copy
         subt.5delst
         subt.1chnam
         subt.2chnam
         subt.3chnam
         subt.1chmas
         subt.4chmas
         subt.10modall
        subt.4svap
        subt.2sav_app

Logs from both the 486 and the HP have been placed in
/afs/dce/project/dce/sni/ot10670

[5/19/94 public]
The problem seems to be connected with OT10518 (execv-wrapper). Before
every testcase a restore of the databse is done, where the DSA has to perform
an execv . 
We have done the subtree test on osf1 again, there are only two testcases
failing:
subt.1chnam
subt.2chnam
We are still checking these two.

[6/06/94 public]
Fixed with the fix in OT10518 and some files, that had been submitted
about 3 weeks ago.

[6/20/94 public]
Changed the title because now the Cstubs are dying, not the DSAs.  Binaries
being run are from 6/19/94.  This includes fix for 10518. 

These are the subtree tests which are currently failing:

SUBTREE_ADMIN TEST START
Failing cases:
	 subt.5delst
	 subt.31delst
	 subt.32delst
	 subt.33delst
	 subt.1database
	 subt.2database
	 subt.3database
	 subt.1chnam
	 subt.2chnam
	 subt.3chnam
	 subt.4chnam
	 subt.5chnam
	 subt.1chmas
	 subt.2chmas
	 subt.3chmas
	 subt.4chmas
	 subt.10modall
	subt.3copy
	subt.4copy
Pass: 13
Fail: 19

The stdout repeatedly reports that there is no connection to DUA.

[6/22/94 public]
I reinstalled all of DCE (GDS and DCE core) from the beta release install
tree and re-ran all functional tests.

The problem did not occur on the 486, but did on the HP.

[06/22/94 public]
I hope the new drop is better. So: let's try again ...

[6/27/94 public]
All subtree admin tests pass on 486. (Binaries: 6/26)

[8/2/94 public]
Problem could not be reproduced from binaries of 7/25.



CR Number                     : 10667
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : gds
Subcomponent Name             : admin
Short Description             : DSA admin I18N tests fail
Reported Date                 : 5/17/94
Found in Baseline             : 1.1
Found Date                    : 5/17/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : test/functional/directory/gds/ts/admin/dsa
Sensitivity                   : public

[5/17/94 public]
The DSA admin tests recorded failures in 
	dsa.addi18n.01
	dsa.deli18n.01

Here is the journal transcript:

520|0 1 20445 1 2|DSA ADMIN: TEST CASE   dsa.addi18n.01
520|0 1 20445 1 3|Command (gdsditadm test_trace < /dcetest/dcelocal/test/tet/functional/director
y/gds/ts/lib/dsa.addi18n.01) gave exit code 0
520|0 1 20445 1 4|EXPECTED ERROR: One of the fields could not be converted to the T61 string !
520|0 1 20445 1 5|EXPECTED ERROR: Wrong attribute syntax !
520|0 1 20445 1 6|EXPECTED ERROR: One of the fields could not be converted to the T61 string !
520|0 1 20445 1 7|RECEIVED ERROR: One of the fields could not be converted to the T61 string !
520|0 1 20445 1 8|RECEIVED ERROR: Invalid CDS-Cell value !
520|0 1 20445 1 9|RECEIVED ERROR: Invalid Telex-Number value !
520|0 1 20445 1 10|RECEIVED ERROR: Invalid Directory-ID !
520|0 1 20445 1 11|TEST FAILED
220|0 1 1 16:42:41|FAIL
410|0 28 1 16:42:41|IC End
400|0 29 1 16:42:41|IC Start
200|0 1 16:42:41|TP Start
520|0 1 20445 1 2|DSA ADMIN: TEST CASE   dsa.deli18n.01
520|0 1 20445 1 3|Command (gdsditadm test_trace < /dcetest/dcelocal/test/tet/functional/director
y/gds/ts/lib/dsa.deli18n.01) gave exit code 0
520|0 1 20445 1 4|RECEIVED ERROR: Object (or superior object) doesn't exist !
520|0 1 20445 1 5|RECEIVED ERROR: Object (or superior object) doesn't exist !
520|0 1 20445 1 6|RECEIVED ERROR: Object (or superior object) doesn't exist !
520|0 1 20445 1 7|TEST FAILED
220|0 1 1 16:43:18|FAIL

[5/18/94 public]
Receive a new copy of the test file dsa.addi18n.01 which contained a fix to
a spelling error.  This did not change the test results at all.  Journal
output for these tests are identical to the segment provided above.

[05/18/94 public]
Rich: please try on HP the following:

export LANG=english;
export NLSPATH=/opt/dcelocal/nls/msg/en_US.ASCII/%N;

Then run the i18n admin tests.

If this works I will try to explain why it has worked. 
(I'm sure you will know that yourself ...)

[5/18/94 public]
Nope, didn't work.  gdsditadm didn't even run -- it exited immediately with
a return code of 1.  No output file.

Also, this test fails when run both in an xterm and in an hpterm.

So, what else can be different between your HP and my HP?

[5/19/94 public]
This works on the HP:

	LANG=english
	NLSPATH=/opt/dcelocal/nls/msg/en_US.ASCII/%N.cat

I tried similar settings on the 486 (without the '.cat' on NLSPATH) and
they didn't work.

In any event, the TET script must set this automatically and, after it is
done, reset LANG and NLSPATH to their original values.  Please update the
testsuite accordingly with the changes necessary for the tests to pass on
all platforms.

[5/20/94 public]
By hand-testing, I've confirmed that the testcase do, in fact, work.
However, they consistently fail when run as part of the tet 'dsa'
testsuite.  Clearly, the environment is not being configured correctly. 

Changed this from a 'code' defect to a 'test' defect.

[05/25/94 public]
Fixed by today's submission.

[6/20/94 public]
I18N tests still fail when run via the TET environment.  Was using code
from build of 6/13.

[6/27/94 public]
Tests still fail.  Clearly, the code in the test script is correctly
setting the LANG variable.

[7/7/94 public]
I18N tests still fail on 486 after July code drop.

[07/18/94 public]
With my change in gds/ts/admin/dsa it works on my HP (milo).
It also works on my AT386 (moon)  if I copy /usr/lib/nls/loc/en_US.ISO8859-1
from sniosf2 (in Munich) to moon.
It doesn't work - also not if you run the I18N tests by hand -
if there is no locale file in /usr/lib/nls/loc.
It also doesn't run if I compile /usr/lib/nls/loc/src/en_US.src
with

localedef -c -i /usr/lib/nls/loc/src/en_US.src /usr/lib/nls/loc/en_US.ISO8859-1

- I think localedef needs some more compiler switches.

We have to document that I18N tests only run if the
locale files of the actual language (HP800: english, AT386: en_US.ISO8859-1)
are there.
On sniosf2 we have a en_US.ISO8859-1 - we don't have it on all AT386 machines
I have checked here in Boston.

[8/1/94 public]
Fix verified by FVT on binaries of 7/25.



CR Number                     : 10648
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : admin tests
Short Description             : admin tests all return NORESULT
Reported Date                 : 5/15/94
Found in Baseline             : 1.1
Found Date                    : 5/15/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b10
Affected File(s)              : see below
Sensitivity                   : public

[5/15/94 public]
Results of GDS Admin Tests:  Sun May 15 17:09:59 EDT 1994
----------------------------------------------------

User: zeliff (0) TCC Start, Command Line: /dcetest/dcelocal/test/tet/bin/tcc -e functional/directory/gds shadow 
"STARTING ALL gdsditadm (SHADOW) TESTS"

TC Start, scenario ref 48-1

SHADOW TEST START
SHADOW: Dummy test BIND / UNBIND 
SHADOW: Dummy test BIND / UNBIND 
SHADOW: Dummy test BIND / UNBIND 
SHADOW: TEST CASE shadow.adduser1 (Create shadows and shadowing job)
SHADOW: TEST CASE dsa.1addobj (Create shadows and shadowing job)
SHADOW: TEST CASE shadow.6crshd_job (Create shadows and shadowing job)
SHADOW: TEST CASE shadow.6upd_job1 (Update shadows and shadowing job)
SHADOW: TEST CASE shadow.6chgupd1 (Update shadows and shadowing job)
SHADOW: TEST CASE shadow.6addobj1 (Create shadowing job)
SHADOW: TEST CASE shadow.6cr_job (Create shadowing job)
SHADOW: TEST CASE shadow.6upd_job2 (Update shadowing job)
SHADOW: TEST CASE shadow.6chgupd2 (Update shadowing job)
SHADOW: TEST CASE shadow.6remjob1 (Remove shadows and shadowing job)
SHADOW: TEST CASE shadow.6remjob2 (Remove shadowing job)
SHADOW TEST ENDED
"FINISHED gdsditadm (SHADOW) TESTS"
TCC End

------------------------------

Total PASSED =          0
Total FAILED =          0

All of the admin tests return "NORESULT" rather than PASS.  Here's the
journal.log from the shadow tests:

[5/16/94 public]
This was the result of a problem in the check_ERROR function of shfuncs.
The test_trace file was being written in
/opt/dcelocal/var/adm/directory/gds/adm.  The check_ERROR function expected
to find it in OUTDIR.  In and of itself, this isn't a problem because the
wrapper script set OUTDIR to the appropriate directory.  However, the
functional tests also use this variable to store test logs from gdscp,
leading one to believe that it's value can be changed at will.  Not so.

The solution was to split this variable into two different ones:

ADM is /opt/dcelocal/.... and should not be modified by the user.
OUTDIR is the directory into which all test logs are ultimately written.
This can be changed to any path the user wishes.

Ultimately, the following files were changed:

./test/functional/directory/gds/ts/admin/cacheadm
./test/functional/directory/gds/ts/admin/dsa
./test/functional/directory/gds/ts/admin/scheme
./test/functional/directory/gds/ts/admin/shadow
./test/functional/directory/gds/ts/admin/subtree
./test/functional/directory/gds/ts/gdscp/gdscp_all
./test/functional/directory/gds/ts/lib/shfuncs

[5/18/94 public]
Fix submitted.



CR Number                     : 10647
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : xds tests
Short Description             : xt_test and TEST* scripts
found on path
Reported Date                 : 5/15/94
Found in Baseline             : 1.1
Found Date                    : 5/15/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : see below
Sensitivity                   : public

[5/15/94 public]
The API tests try to find the TEST* scripts and the xt_test command on the
path of the tester.  They should, instead, invoke them via a fully
qualified path from /dcetest/dcelocal.

[5/15/94 public]
The files which must change are:

./test/functional/directory/gds/ts/lib/shfuncs
./test/functional/directory/xds/ts/mhs/mhs_st
./test/functional/directory/xds/ts/scripts/TEST
./test/functional/directory/xds/ts/scripts/TESTALL
./test/functional/directory/xds/ts/scripts/TTEST
./test/functional/directory/xds/ts/scripts/TTESTALL
./test/functional/directory/xds/ts/scripts/TTESTALLa
./test/functional/directory/xds/ts/scripts/TTESTa
./test/functional/directory/xds/ts/scripts/_test
./test/functional/directory/xds/ts/scripts/_testall
./test/functional/directory/xds/ts/scripts/_ttest
./test/functional/directory/xds/ts/scripts/_ttestall
./test/functional/directory/xds/ts/scripts/_ttestalla
./test/functional/directory/xds/ts/scripts/cleantree
./test/functional/directory/xds/ts/switch/switch_mt
./test/functional/directory/xds/ts/switch/switch_st
./test/functional/directory/xds/ts/xds/xds_mt
./test/functional/directory/xds/ts/xds/xds_st
./test/functional/directory/xds/ts/xom/xom_mt
./test/functional/directory/xds/ts/xom/xom_st
./test/functional/directory/xds/ts/xoms/xoms_mt
./test/functional/directory/xds/ts/xoms/xoms_st

These are fixed in my sandbox.

[5/18/94 public]
Fix submitted.



CR Number                     : 10645
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : admin tests
Short Description             : Warning returned on invocation
Reported Date                 : 5/15/94
Found in Baseline             : 1.1
Found Date                    : 5/15/94
Severity                      : D
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : not applicable
Sensitivity                   : public

[5/15/94 public]
Upon invocation of:

	local_TET.admin cadm

The following warning appears:

journal file name is:
/dcetest/dcelocal/test/tet/functional/directory/gds/results/0004e/journal


/u2/dcetest/test/tet/functional/directory/gds/ts/admin/cacheadm: warning:
illegal entry 20 in TET_SIG_IGN ignored

[5/18/94 public]
Fix was to remove TET_SIG_IGN from the TET test drivers.  These drivers are
not yet under source control.



CR Number                     : 10644
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : admin
Short Description             : Improper manipulation of TET_ROOT
Reported Date                 : 5/15/94
Found in Baseline             : 1.1
Found Date                    : 5/15/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b10
Affected File(s)              : see below
Sensitivity                   : public

[5/15/94 public]
The admin tests reset the value of TET_ROOT to TET_ROOT_INST.  This is not
necessary and, in fact, causes the tests to fail.  

TET_ROOT is always:

	/dcetest/dcelocal/test/tet

All references to files should be made via paths relative to this.

[5/15/94 public]
This also occurs in the API tests.

The files which must change for this are:

./test/functional/directory/gds/ts/admin/cacheadm
./test/functional/directory/gds/ts/admin/dsa
./test/functional/directory/gds/ts/admin/scheme
./test/functional/directory/gds/ts/admin/shadow
./test/functional/directory/gds/ts/admin/subtree
./test/functional/directory/xds/ts/switch/switch_mt
./test/functional/directory/xds/ts/switch/switch_st
./test/functional/directory/xds/ts/xds/xds_mt
./test/functional/directory/xds/ts/xds/xds_st
./test/functional/directory/xds/ts/xom/xom_mt
./test/functional/directory/xds/ts/xom/xom_st
./test/functional/directory/xds/ts/xoms/xoms_mt
./test/functional/directory/xds/ts/xoms/xoms_st
./test/functional/directory/xds/ts/mhs/mhs_st

I have the fixes on a branch in my sandbox.

[5/18/94 public]
Fix submitted.

[5/24/94 public]
Closed.



CR Number                     : 10623
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa,i486,rs6000
S/W Ref Platform              : hpux,osf1,aix
Component Name                : gds
Subcomponent Name             : directory/gds/gds_sec
Short Description             : Unable to find include file 'gssapi.h'.
Reported Date                 : 5/12/94
Found in Baseline             : 1.1
Found Date                    : 5/12/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b9
Affected File(s)              : dua_sec.c, gds_sec_int.c,
gds_sec_rgy.c, dua_sec_int.c, gds_sec_auth_ctx.c, dsa_sec_int.c, dsa_sec.c
Sensitivity                   : public

[5/12/94 public]

For the affected files above the complaint was:

	Unable to find include file 'gssapi.h'.

There are gssapi.h files in the export area and security.  It's possible
this problem was cuased by the failure in security which broke libdce,
but it case it wasn't, I'm filing this OT.

[5/12/94 public]
Changed

	 #include <gssapi.h>

to

	 #include <dce/gssapi.h>



CR Number                     : 10605
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa,i486,rs6000
S/W Ref Platform              : hpux,osf1,aix
Component Name                : gds
Subcomponent Name             : test/functional/directory/xds/ts
Short Description             : don't know how to make t.cacheinit125.sed or shfuncs
Reported Date                 : 5/11/94
Found in Baseline             : 1.1
Found Date                    : 5/11/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b9
Affected File(s)              : config/Makefile, lib/Makefile
Sensitivity                   : public

[5/11/94 public]

In the tests installation pass:

[ /test/functional/directory/xds/ts/config at 01:42 (AM) Wednesday ]
makepath config/. && cd config &&  exec make MAKEFILE_PASS=BASIC
install_all
make: don't know how to make t.cacheinit125.sed (continuing)
[ /test/functional/directory/xds/ts/lib at 01:42 (AM) Wednesday ]
makepath lib/. && cd lib &&  exec make MAKEFILE_PASS=BASIC     install_all
make: don't know how to make shfuncs (continuing)

[5/12/94 public]
The Makefiles were using a VPATH directive
that provides the wrong search path - it should
not go all the way back up to src - it should reference it from
the current offset from obj and just specify it relatively from there.

diffs: src/test/functional/directory/gds/ts/config/Makefile
< VPATH         = ../../../gds/ts/config
---
> VPATH         = ../../../../../../../../src/test/functional/directory/gds/ts/config

diffs:src/test/functional/directory/gds/ts/lib/Makefile
< VPATH         = ../../../gds/ts/lib
---
> VPATH         = ../../../../../../../../src/test/functional/directory/gds/ts/lib

[5/13/94 public]



CR Number                     : 10602
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : dsa
Short Description             : tests subt.4chnam and subt.5chnam do not run
Reported Date                 : 5/11/94
Found in Baseline             : 1.1
Found Date                    : 5/11/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b9
Affected File(s)              : gds/gds_sec/gssapi.h, gds/gds_sec/dsa_sec.c, gds/dsa/d26bind.c, gds/dsa/secutil.c
Sensitivity                   : public

[5/11/94 public]

The admin testcases subt.4chnam and subt.5chnam do fail.
It  failes because the integration of the new security enhancements
was not completed.
An old gssapi.h is hold in the gds tree and has to be defuncted.

[05/11/94 public]
fixed with today's submission of the mentioned 4 files.

[6/22/94 public]
Fix verified on 486.  Testcases still fail on HP, but this seems to be
caused by 10670.  If not, this defect will be reopened.



CR Number                     : 10533
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : port_gd
Short Description             : mavros test instructions need
to be updated
Reported Date                 : 5/4/94
Found in Baseline             : 1.1
Found Date                    : 5/4/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b23
Affected File(s)              : porting and testing guide
Sensitivity                   : public

[5/4/94 public]
The mavros tests have changed somewhat and the instructions in the porting
guide must be changed.  They are in section 5.5.6 (MAVROS Compiler Tests)
of the DCE1.0.3 version of the Doc.

Here's a summary of the needed changes.  See me if you need more detail.

- remove the sentence which begins 'Part of the test procedure is executed
during the build ..."

- Delete the paragraph (the 2nd?) which begins "Most files required to
complete and execute the test drivers ..."  Replace this with:

	There are two dependencies upon the files exported during
	the GDS portion of the build: asn1.h and libdce.  libdce contains
	the ASN1 library.  Asn1.h is expected to be found either in the
	directory in which you are running the MAVROS test script, or in
	the export tree of your sandbox.  

- Remove the sentence "There are five steps in test procedure design:"
  Replace with: "Running the MAVROS compiler test consists of executing the
  test_mvr.sh script.  This is what it does:"

- Delete steps 1, 2 and 3.

- Rename step 4 to 1.
	(Change reference to "obj tree" to "install tree")

- Rename step 5 to 2.
	(Change reference to "obj tree" to "install tree")

[5/13/94 public]

Assigned this CR to Doug Weir (OSF Porting Guide writer).

[10/17/94 public]
Done; should be updated by Doug Weir.

[10/25/94 public]
Instructions have been updated.



CR Number                     : 10530
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 10533
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : gds
Subcomponent Name             : mavrostest
Short Description             : invalid lint flag generated
Reported Date                 : 5/4/94
Found in Baseline             : 1.1
Found Date                    : 5/4/94
Severity                      : B
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b8
Affected File(s)              : see below
Sensitivity                   : public

[5/4/94 public]
A '-O' is being supplied to lint, possibly via CFLAGS.  Here is the content
of lint.log:

gemini gds/mavrostest$ more lint.log
lint -o test -wkhplrDoCnud -O test.c  import1.c  attrdec.c 
getopt: illegal option -- O
/usr/bin/lint[118]: test: argument expected
"", line 0: lint error: unknown record directive in file llib-lc.c

[05/05/94 public]
With the next code drop you will see that no lint is called in the
build or from the shell script. Good fix, isn't it?

[06/21/94 public]
Fixed with today's submission - no lint is called any more.
Documentation has to change - see 10533.



CR Number                     : 10519
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : all
Short Description             : SNI code submission
Reported Date                 : 5/4/94
Found in Baseline             : 1.1b6
Found Date                    : 5/4/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b9
Affected File(s)              : nearly everything
Sensitivity                   : public

[5/4/94 public]
Opened for the first code submission of SNI Munich in May.
New functionality: I18N support and Serviceability.
Additional code clean up.



CR Number                     : 10468
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : sams
Short Description             : Fix problems with '<' and '>'
Reported Date                 : 4/27/94
Found in Baseline             : 1.1
Found Date                    : 4/27/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b8
Affected File(s)              : 
src/directory/gds/sams/gds.sams, .../gds/sams/Makefile
Sensitivity                   : public

[4/27/94 public]
When attempting to generate the output file for gds.sams, I get the
following errors:


/project/dce/build/dce1.1/src/directory/gds/sams/gds.sams:2291:Missing | in
<a|b
> construct (near "end")
/project/dce/build/dce1.1/src/directory/gds/sams/gds.sams:2291:Missing | in
<a|b
> construct (near "end")
/project/dce/build/dce1.1/src/directory/gds/sams/gds.sams:2511:Missing | in
<a|b
> construct (near "end")
/project/dce/build/dce1.1/src/directory/gds/sams/gds.sams:2511:Missing | in
<a|b
> construct (near "end")
/project/dce/build/dce1.1/src/directory/gds/sams/gds.sams:2532:Missing | in
<a|b
> construct (near "end")
/project/dce/build/dce1.1/src/directory/gds/sams/gds.sams:2532:Missing | in
<a|b
> construct (near "end")
/project/dce/build/dce1.1/src/directory/gds/sams/gds.sams:2542:Missing | in
<a|b
> construct (near "end")
/project/dce/build/dce1.1/src/directory/gds/sams/gds.sams:2542:Missing | in
<a|b
> construct (near "end")
/project/dce/build/dce1.1/src/directory/gds/sams/gds.sams:2568:Missing | in
<a|b
> construct (near "end")
/project/dce/build/dce1.1/src/directory/gds/sams/gds.sams:2568:Missing | in
<a|b
> construct (near "end")
/project/dce/build/dce1.1/src/directory/gds/sams/gds.sams:3319:Missing | in
<a|b
> construct (near "end")
/project/dce/build/dce1.1/src/directory/gds/sams/gds.sams:3319:Missing | in
<a|b
No output generated.

[4/28/94 public]
Can you elaborate on the problem?  This file works every night in the
nightly build ...

Please check that you have an up-to-date version of the sams compiler.  I
seem to remember RichS submitting some changes related to this about a
month ago ...

[04/28/94 public]
In the text field of a message sams knows this construct:
	text "Can't open <%s|filename> for output"
When generating the message catalog, etc., it uses the "%s" but when
generating documentation, it outputs "filename".  If you want a simple
< in your message text, write it as \<.

As a transition aide until all sams files are converted (CDS and GDS
ran into this) you can use the -f flag.  The GDS Makefiles are doing
this, but Kathy didn't know to do this in the doc preparation.

The proper fix is to use the <a|b> construct right, and/or put \<
where a simple < now exists, and them remove the -f from SAMSFLAGS
in the GDS Makefiles.

[4/28/94 public]
Fix submitted.

[04/28/94 public]
Will the "-f" switch be available also in the final DCE1.1 sams version?
If yes: We would like to let gds.sams as it is and use the "-f" flag.
We don't want to use the <a|b> constructs.

[04/28/94 public]
Yes the -f switch will always be available.  If you don't want to use
the <a|b> stuff, you can just do \< instead of <.  That makes things
easier for our doc people since they do not need a special flag for
this one sams file.  I hope you don't mind Rich's fix:
    text            "\"%s\" : Error Position \<%d>"
    text            "TCL-Error \<%d>"
    text            "GDSCP WARNING: File \<%s> not completely evaluated : %s"
    text            "GDSCP WARNING : cannot open directory \<%s>"
    text            "Usage: gdscp [filename] [-c \<commands>]"
    text            "%s - Error in line number \<%d> of XOM object information schem a file \<%s>"

[04/28/94 public]
Rich fixed it without talking to me before. How could he!
OK: We will write "\<". Next week we will submit a new gds.sams with a lot
of new "<" (means "\<") - hopefully the merge with Rich's version will work.
(Rich = Rich Zeliff)



CR Number                     : 10323
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : admin
Short Description             : gdssysadm -ft/-fT kill DUA cache
Reported Date                 : 4/11/94
Found in Baseline             : 1.1
Found Date                    : 4/11/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b9
Affected File(s)              : gds/util/d27signal.c
Sensitivity                   : public

[4/11/94 public]
Configuration is that described for XDS tests in Porting & Testing Guide:

M1 (UX):	Dir 1
M2 (486)	Dir 1(client), Dir 2

GDS is activated

When attempting to turn tracing on or off via  'gdssysadm -fT' or
'gdssysadm -ft' I get the following message:

Error:  Can't send distributed command to directory system processes !

And then the DUA cache dies.  No core dump produced.

[4/11/94 public]
This was done on M1.

[05/18/94 public]
Fixed with last code drop. Switching tracing on and off while gds is
running was impossible with the old signal handling in gds.

[5/18/94 public]
Verified by hand test.



CR Number                     : 10321
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : stubs
Short Description             : Sstub dies under stress from
remote XDS operation
Reported Date                 : 4/10/94
Found in Baseline             : 1.1
Found Date                    : 4/10/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : tsi/cmx2k.c
Sensitivity                   : public

[4/10/94 public]
Configuration is:

	M1: HP800
	M2: AT386

When running tests.xds/threads_os/T10rem_entry2v (xt_test -t) multiple
times the sstub process dies.  Note that it does not core dump.

The problem was originally found by running the threads_os tests in rapid
succession, i.e.:

  for test in `\ls -1 T*`
  do
	  ../../xt_test -t $test
  done
    
But I found that rapid, sequential executions of T10rem_entry2v caused the
problem.  I.e:

  #!/bin/ksh
  X2_DIR_LOG=/tmp
  integer count=1
  integer limit=10
  while ((count <= limit))
  do
	  print -n "$count "
	  ../../xt_test -t T10rem_entry2v > /dev/null
	  (( count = count + 1 ))
  done
  print

The problem typically occurs on the 7th or 8th iteration.

I'm rerunning the tests with an activated trace system to get interesting
information.  Tracing slows down the process remarkably, so I may not have
results until tomorrow.  ;-)

[4/11/94 public]
Can't reproduce problem when trace system is activated.  Any suggestions on
what information I can give you that would help track down the problem?

[05/18/94 public]
I think the problem is fixed with the last submit. We have found 
a problem in CMX which occured only if tracing was switched off.
But I don't want to set this OT to fix because I haven't done Rich's test.
Rich: Do you have time to try your for-loop again?

[08/18/94 public]
Set it to fix - the CMX (tsi) fix seems to work.



CR Number                     : 10299
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : 
Short Description             : libxti isn't built when NO_GDS set
Reported Date                 : 4/5/94
Found in Baseline             : 1.1
Found Date                    : 4/5/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b7
Affected File(s)              : directory/gds/Makefile
Sensitivity                   : public

[4/5/94 public]
libxti isn't built when NO_GDS is specified.  This is needed by:

directory/cds/gda
	x500_addcell
	gdad

[4/5/94 public]
Fix is to move xti from GDSLIBS_SUBDIRS to SUBDIRS.

[04/06/94 public]
gdad shouldn't need libxti. Rich: Could you try to remove libxti from the
gdad_LIBS? 
Where do I find x500_addcell?

[4/6/94 public]
Fixed.  Unfortunately, after I saw your note.  I'll open a defect to have
CDS remove xti from their LIBS line.

[4/10/94 public]



CR Number                     : 10289
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : unknown
Short Description             : need a manpage for xt_test
Reported Date                 : 4/5/94
Found in Baseline             : 1.1
Found Date                    : 4/5/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b23
Affected File(s)              : porting and testing guide
Sensitivity                   : public

[4/5/94 public]
There really needs to be some documentation on this.

[6/28/94 public]
Latest status is that Brian Keane is waiting for information from Chris
Costello.

[10/17/94 public]
Input for a xt_test man page was provided. OSF decided to integrate the
xt_test description into the GDS chapter of the Porting and Testing Guide.
This was done by Doug Weir.

[10/25/94 public]
It's there.



CR Number                     : 10273
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gdssysadm
Short Description             : Error message on 'restore directory'
Reported Date                 : 4/1/94
Found in Baseline             : 1.1
Found Date                    : 4/1/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b9
Affected File(s)              : SNI code submission
Sensitivity                   : public

[4/1/94 public]
If you select 'restore' you will receive the following error message:

  Error: Can't send distributed command to directory system processes ! 

After hitting return, it would seem that the return finishes correctly.

[6/20/94 public]
Fix verified.



CR Number                     : 10272
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : gds
Subcomponent Name             : admin
Short Description             : Admin test fails after dir is saved
Reported Date                 : 4/1/94
Found in Baseline             : 1.1
Found Date                    : 4/1/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b9
Affected File(s)              : SNI code submission
Sensitivity                   : public

[4/1/94 public]
The admin tests (bind/unbind and object admin) will fail if run immediately
after directory 1 has been saved.  The error message is typically:

  ** sccsid = @(#)t.adduser       7.7 91/07/15 (K Sys AP 11) ***:
  
  BIND                 elapsed time:     0.1400 sec
  ***Administration ****:
  ***AddObject  /C=de *******:
  ***AddObject  /C=de/O=Siemens *******:
									     
  ERROR:
  No connection to DSA/DUA-Cache available !
  To continue press <CR> !
  ***AddObject  /C=de/O=Siemens/OU=DAP11 *******:
									     
  ERROR:
  Object (or superior object) doesn't exist !
  To continue press <CR> !
  ***AddObject  /C=de/O=Siemens/OU=DAP11/CN=Schmid *******:

However, if you configure the directory and initialize the cache in exactly
the saem way, but *don't* attempt to save dir1, then the test will work.

This is a higher priority because it is really painful to run the admin
tests without being able to save the directory!



CR Number                     : 10270
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gdssysadm
Short Description             : Save dir fails on first attempt
Reported Date                 : 4/1/94
Found in Baseline             : 1.1
Found Date                    : 4/1/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b9
Affected File(s)              : SNI code submission
Sensitivity                   : public

[4/1/94 public]
I get the following error message the first time I try to save a directory:

  Error: Can't send distributed command to directory system processes !   

This has been reproduced four times now on both 486 and HPUX.

Configure Dir1 according to instructions in P&TG.  Configure cache with
cacheinit1.  Wait until Wait states are cleared from all processes.  Save
dir1 to disk.  You will get that error message.

Hit return to continue, select save once again.  This time, it will work.

[6/20/94 public]
Fix verified.



CR Number                     : 10248
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : xds
Short Description             : XDS 'invalid' bind2i error
Reported Date                 : 3/29/94
Found in Baseline             : 1.1
Found Date                    : 3/29/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b9
Affected File(s)              : SNI code submission
Sensitivity                   : public

[3/29/94 public]
The following error occured when running the XDS 'invalid' functional
tests.  Tests were run like so:

	cd /dcetest/dcelocal/test/directory/xds/test.xds/invalid
	../../xt_test -a Testcases

In bind2i:

: Function BIND : 
:       session = session3
:       workspace = workspace1
:       call ds_bind()
:       (ERROR) expected and received DS_status from xt_ds_bind differ
:       BIND returned ERROR

: Function SHUTDOWN : 
:       workspace = workspace1
:       call ds_shutdown()
:       xt_cmp_status: received status was:
: "Directory Service is temporarily too busy to perform the operation"
:       (ERROR) expected and received DS_status from xt_ds_shutdown differ
:       SHUTDOWN returned ERROR

The problem also occurs when invoking the testcase individually:

	../../xt_test -i bind2i

[3/30/94 public]
It looks like a similar problem as in 10247 - missing unbinds.
If you run xt_test -a and have too much open binds then also
xt_test -i bind2i doesn't help. I guess it would help
to deactivate, activate and run xt_test -i bind2i.
Rich: can you check this?

[3/30/94 public]
No luck.  Same problem.

[3/30/94 public]
bind2i and read1i fail in the threads_af tests, as well.  Is this related,
or another defect?

[3/31/94 public]
It is related. If bind2i doesn't work than T10bind2i which runs bind2i
ten times in parallel threads cannot run. The same is true for read1i.
Both are testcases which expect security errors if they
bind with wrong credentials or try to read an object with an ACL
that forbids to read it.
I will try to check Chris' version of XDS and xt_test; if it works
I will request for submit this today.

[4/7/94 public]
Reproduced on HP/UX

[5/24/94 public]
Verified



CR Number                     : 10246
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : xds
Short Description             : XDS 'invalid' test failures
Reported Date                 : 3/29/94
Found in Baseline             : 1.1
Found Date                    : 3/29/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b9
Affected File(s)              : SNI code submission
Sensitivity                   : public

[3/29/94 public]
Found the following failures in XDS 'invalid' suite:

: TESTCASE add_entry1i FAILED
: TESTCASE read1i FAILED

Configuration:  M1 - 486, M2 - UX

The full xt_test.log can be found in:

/afs/dce/project/dce/sni/ot<this_ot_number>/invalid.log

Interesting excerpts:

add_entry1i
-----------
: Function BIND : 
:       session = session2
:       workspace = workspace1
:       call ds_bind()
:       expected and received DS_status from xt_ds_bind same
:       (NOTICE) total_number from om_get for received_session = 7
:       (WARNING) more attributes of type 726 received than expected
:       expected and received bound_session same
:       ds_bind() returned OK
 
<and later on:>
: Function REMOVE_ENTRY : 
:       session = bound_session1
:       name = name26
:       call ds_remove_entry()
:       xt_cmp_status: received status was:
: "The specified name does not match the name of any object in the
directory"
:       (ERROR) expected and received DS_status from xt_ds_remove_entry
differ
:       REMOVE_ENTRY returned ERROR

: Function REMOVE_ENTRY : 
:       session = bound_session1
:       name = name48
:       call ds_remove_entry()
:       xt_cmp_status: received status was:
: "The specified name does not match the name of any object in the
directory"
:       (ERROR) expected and received DS_status from xt_ds_remove_entry
differ
:       REMOVE_ENTRY returned ERROR


read1i
------
: Function REMOVE_ENTRY : 
:       session = bound_session1
:       name = name26
:       call ds_remove_entry()
:       xt_cmp_status: received status was:
: "The specified name does not match the name of any object in the
directory"
:       (ERROR) expected and received DS_status from xt_ds_remove_entry
differ
:       REMOVE_ENTRY returned ERROR

: Function REMOVE_ENTRY : 
:       session = bound_session1
:       name = name48
:       call ds_remove_entry()
:       xt_cmp_status: received status was:
: "The specified name does not match the name of any object in the
directory"
:       (ERROR) expected and received DS_status from xt_ds_remove_entry
differ
:       REMOVE_ENTRY returned ERROR

[3/29/94 public]
Removed errors in bind2i and bind3i to seperate defects (10248 and 10247,
respectively) because they seemed to be of other origins.

[3/30/94 public]
The list of failing testcases is consistent with our list in
Munich. We know that testcases using simple credentials fail.
All binds with credentials are handled as anonymous binds
due to a XDS bug and a tester problem.
When we submitted last week I "promised" that theses testcases will not run.
The problems are fixed in Munich - it can be submitted if desired.

[4/7/94 public]
Reproduced on HP/UX

[5/24/94 public]
Verified.



CR Number                     : 10245
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : xds
Short Description             : XDS 'valid' test failures
Reported Date                 : 3/29/94
Found in Baseline             : 1.1
Found Date                    : 3/29/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b9
Affected File(s)              : SNI code submission
Sensitivity                   : public

[3/29/94 public]
Found the following failures in the XDS 'valid' testsuite:

: TESTCASE add_entry17v FAILED
: TESTCASE add_entry21v FAILED
: TESTCASE add_entry22v FAILED
: TESTCASE mod_entry9v FAILED
: TESTCASE rem_entry16v FAILED

Configuration:  M1 - 486, M2 - HP/UX

Interesting excerpts from the xt_test.log are included below.  The full
xt_test.log file will be found in the AFS cell in:

/afs/dce/project/dce/sni/ot<this_ot_number>/xt_test.log

Testcase add_entry17v:
---------------------
: Function BIND : 
:       session = session2
:       workspace = workspace1
:       call ds_bind()
:       expected and received DS_status from xt_ds_bind same
:       (NOTICE) total_number from om_get for received_session = 7
:       (WARNING) more attributes of type 726 received than expected
:       expected and received bound_session same
:       ds_bind() returned OK

: Function ADD_ENTRY : 
:       session = bound_session1
:       name = name48
:       entry = attribute_list28
:       call ds_add_entry()
:       xt_cmp_status: received status was:
: "The value does not conform to the attribute syntax of the attribute
type"
:       (ERROR) expected and received DS_status from xt_ds_add_entry differ
:       ADD_ENTRY returned ERROR

: Function REMOVE_ENTRY : 
:       session = bound_session1
:       name = name48
:       call ds_remove_entry()
:       xt_cmp_status: received status was:
: "The specified name does not match the name of any object in the
directory"
:       (ERROR) expected and received DS_status from xt_ds_remove_entry
differ
:       REMOVE_ENTRY returned ERROR

add_entry21v
------------
: Function BIND : 
:       session = session2
:       workspace = workspace1
:       call ds_bind()
:       expected and received DS_status from xt_ds_bind same
:       (NOTICE) total_number from om_get for received_session = 7
:       (WARNING) more attributes of type 726 received than expected
:       expected and received bound_session same
:       ds_bind() returned OK

: Function ADD_ENTRY : 
:       session = bound_session1
:       name = name48
:       entry = attribute_list28
:       call ds_add_entry()
:       xt_cmp_status: received status was:
: "The value does not conform to the attribute syntax of the attribute
type"
:       (ERROR) expected and received DS_status from xt_ds_add_entry differ
:       ADD_ENTRY returned ERROR

: Function ADD_ENTRY : 
:       session = bound_session1
:       name = name26
:       entry = attribute_list1
:       call ds_add_entry()
:       xt_cmp_status: received status was:
: "The specified name does not match the name of any object in the
directory"
:       (ERROR) expected and received DS_status from xt_ds_add_entry differ
:       ADD_ENTRY returned ERROR

: Function REMOVE_ENTRY : 
:       session = bound_session1
:       name = name26
:       call ds_remove_entry()
:       xt_cmp_status: received status was:
: "The specified name does not match the name of any object in the
directory"
:       (ERROR) expected and received DS_status from xt_ds_remove_entry
differ
:       REMOVE_ENTRY returned ERROR

: Function REMOVE_ENTRY : 
:       session = bound_session1
:       name = name48
:       call ds_remove_entry()
:       xt_cmp_status: received status was:
: "The specified name does not match the name of any object in the
directory"
:       (ERROR) expected and received DS_status from xt_ds_remove_entry
differ
:       REMOVE_ENTRY returned ERROR

add_entry22v
------------
: Function BIND : 
:       session = session2
:       workspace = workspace1
:       call ds_bind()
:       expected and received DS_status from xt_ds_bind same
:       (NOTICE) total_number from om_get for received_session = 7
:       (WARNING) more attributes of type 726 received than expected
:       expected and received bound_session same
:       ds_bind() returned OK

: Function ADD_ENTRY : 
:       session = bound_session1
:       name = name48
:       entry = attribute_list45
:       call ds_add_entry()
:       xt_cmp_status: received status was:
: "The value does not conform to the attribute syntax of the attribute
type"
:       (ERROR) expected and received DS_status from xt_ds_add_entry differ
:       ADD_ENTRY returned ERROR

: Function REMOVE_ENTRY : 
:       session = bound_session1
:       name = name48
:       call ds_remove_entry()
:       xt_cmp_status: received status was:
: "The specified name does not match the name of any object in the
directory"
:       (ERROR) expected and received DS_status from xt_ds_remove_entry
differ
:       REMOVE_ENTRY returned ERROR

mod_entry9v
-----------
: Function MODIFY_ENTRY : 
:       session = bound_session1
:       name = name8
:       changes = entry_modification_list19
:       call ds_modify_entry()
:       xt_cmp_status: received status was:
: "The attribute or attribute value does not conform to the imposed
constraints"
:       (ERROR) expected and received DS_status from xt_ds_modify_entry
differ
:       MODIFY_ENTRY returned ERROR

: Function READ : 
:       session = bound_session1
:       name = name8
:       selection = entry_info_selection1
:       call ds_read()
:       expected and received DS_status from xt_ds_read same
:       (NOTICE) total_number from om_get for received_result = 3
:       (WARNING) more attributes of type 709 received than expected
:       (WARNING) more attributes of type 713 received than expected
:       (WARNING) more attributes of type 713 received than expected
:       (WARNING) more attributes of type 713 received than expected
:       (ERROR) expected & received read-result differ
:       READ returned ERROR

rem_entry16v
------------
: Function BIND : 
:       session = session2
:       workspace = workspace1
:       call ds_bind()
:       expected and received DS_status from xt_ds_bind same
:       (NOTICE) total_number from om_get for received_session = 7
:       (WARNING) more attributes of type 726 received than expected
:       expected and received bound_session same
:       ds_bind() returned OK

: Function ADD_ENTRY : 
:       session = bound_session1
:       name = name48
:       entry = attribute_list28
:       call ds_add_entry()
:       xt_cmp_status: received status was:
: "The value does not conform to the attribute syntax of the attribute
type"
:       (ERROR) expected and received DS_status from xt_ds_add_entry differ
:       ADD_ENTRY returned ERROR

: Function REMOVE_ENTRY : 
:       session = bound_session1
:       name = name48
:       call ds_remove_entry()
:       xt_cmp_status: received status was:
: "The specified name does not match the name of any object in the
directory"
:       (ERROR) expected and received DS_status from xt_ds_remove_entry
differ
:       REMOVE_ENTRY returned ERROR

[3/30/94 public]
The list of failing testcases is consistent with our list in
Munich. We know that testcases using simple credentials fail.
All binds with credentials are handled as anonymous binds
due to a XDS bug and a tester problem.
When we submitted last week I "promised" that theses testcases will not run.
The problems are fixed in Munich - it can be submitted if desired.

[4/7/94 public]
Reproduced problem on HP/UX local test.

[5/24/94 public]
Fix verified.



CR Number                     : 10244
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : gds
Subcomponent Name             : xt_test
Short Description             : xt_test core dumps
Reported Date                 : 3/29/94
Found in Baseline             : 1.1
Found Date                    : 3/29/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : unknown
Sensitivity                   : public

[3/29/94 public]
xt_test core dumped while executing the SHUTDOWNadd_entry32i testcase in
tests.xds/threads_af:

Running testsuite T10add_entry32i, it had successfully completed the bulk
of the suite:

Here's the info from the start of the suite:

  T10add_entry32i
  Directory tester: threads version 4.0t [Mar 27 1994  03:01:33]
	 arguments:  -a  T10add_entry32i 
    
And from where it died:

  [1]: Testcase = BODYadd_entry32i
  
  [1]:  Func xt_cmp_status : not expected
  [1]:  Func xt_ds_add_entry : expected and received DS_status differ
  [1]:  Func xt_run : Function call FAILED
  [1]: ADD_ENTRY returned ERROR
  [1]: Testcase BODYadd_entry32i failed
  
  [1]:  Func xt_main : Testcase BODYadd_entry32i FAILED
  [1]: Testcase = SHUTDOWNadd_entry32i
  
  [1]:  Func xt_cmp_status : error received:
  [1]:    xt_cmp_status: received status was:
  ./runit[106]: 4523 Memory fault(coredump)
    
And the stack trace from the xt_test:

  (gdb) file ../../xt_test
  Reading symbols from ../../xt_test...(no debugging symbols found)...done.
  (gdb) core-file core
  Core was generated by `xt_test'.
  Program terminated with signal 11, Segmentation fault.
  #0  0x408748 in xt_status_to_buffer (1, -1073747128)
  (gdb) bt
  #0  0x408748 in xt_status_to_buffer (1, -1073747128)
  #1  0x408e48 in xt_cmp_status (1, 0, 25)
  #2  0x41bc63 in xt_ds_unbind ()
  #3  0x4076b0 in xt_run ()
  #4  0x406ae9 in xt_main (3, -1073745196)
  #5  0x422540 in main (3, -1073745196, -1073745180, -1073744908)
  #6  0x4000cb in __start (Cannot access memory at address 0x3.
  (gdb)

[3/29/94 public]
Upon further execution of the threads_af suite, it seems to be dumping on
all SHUTDOWN testcases.

[3/30/94 public]
Rich: let's try to reproduce it together.

[3/30/94 public]
The problem seems to be related to the following:
If you run T10add_entry32i at first STARTadd_entry32i is executed.
This STARTadd_entry32i runs build_tree8 and then an INITIALIZE,
VERSION,BIND. After that BODYadd_entry32i is executed which contains
only one ADD. This ADD has to use the BIND and the workspace from
STARTadd_entry32i. It seems that for "-a" (no parallel threads)
BODYadd_entry32i doesn't know anything from that what STARTadd_entry32i
did before. 
But it works for "-t" - so I think it is some stuff in xt_test which
is executed only for "-t" - but it should be executed always.
Because these testcases were written for tests with parallel threads
I propose to run the threaded functional tests only with "-t" and
decrease the priority and severity.
(I can reproduce the problem here. We always test only with "-t" -
thinking that if it runs with "-t" it will of course run with "-a" ...)

[5/5/94 public]
Downgraded to a 3 because the circumstance which creates this is a negative
test.  (I.e., a mistake.)  Also removed from beta list.

[7/11/94 public]
Couldn't reproduce problem on 486.

[07/12/94 public]
It also works fine on HP800. So we should really close it.

[7/13/94 public]
Agreed.  This was fixed at some point in the previous few months.



CR Number                     : 10238
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gdsditadm
Short Description             : Selecting 'simple unprotected'
causes gdsditadm to core dump
Reported Date                 : 3/29/94
Found in Baseline             : 1.1
Found Date                    : 3/29/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b9
Affected File(s)              : SNI code submission
Sensitivity                   : public

[3/29/94 public]
Selecting 'simple unprotected' as the authentication mechanism causes
gdsditadm to core dump.

Added the following line to initXdsM1a:

:Authentication mechanism to be used:Simple Unprotected

So that step 1/4 now looks like this:

  :**** INITIALIZATION BATCHFILE FOR MACHINE #1   (step 1/4)
  *****:
  :directory id:1
  :Authentication mechanism to be used:Simple Unprotected
  :password:
  :Country:
  :Organisation:
  :Organisational unit:
  :common name:
  :options():  '
  
This causes gdsditadm to core dump!

This is reproducable by manually using gdsditadm and selecting the
following options:

	Logon to the DUA Cache
	Logon to the Default DSA 

But not:

	Logon to a specific DSA
	Changing Name Structure

This is true for HP800 as well.

I notice that the t.cache scripts specify 'anonymous' as the authentication
mechanism.  This, however, is not an option on the gdssysadm configuration
screen.

[3/30/94 public]
Rich: have you choosen "simple unprotected" and didn't give name and password
after that?
I have to check the code: it's possible that one part (i.e. DUA)
expects name and password if "simple unprotected" is choosen.
This would explain the core dump - but it's still a bug. Can you try
to choose "simple unprotected" and to give arbitrary name and password?
If this works (means returns a security error or binds to the local DSA 
as anonymous) we should decrease the priority.

[3/30/94 public]
I chose 'simple unprotected' and supplied an arbitrary password (no name is
asked for).  Same result -- core dump.

Didn't get much of a stacktrace:

(gdb) bt
#0  0xa43f0aa3 in d20_E12format ()
#1  0xd7 in ?? (2, 0, -1073748426, -1073748272, -1073748284)
#2  0xa43bf498 in d20_E12format ()
#3  0xa43bd963 in d20_E12format ()
#4  0x400f3e in main (1, -1073743420, -1073743412, -1073743276)
#5  0x4000cb in __start (Cannot access memory at address 0x1.

[3/31/94 public]
It only core dumps if you choose 'simple unprotected' and enter no
user name. The reason for that is in gds/gds_sec/dua_sec.c:
In dua_acquire_cred it uses my_creds->d2_c_name without checking if
it is a NULL pointer or not. Also my_creds itself isn't always checked.
Helmut Baumgaertner (SNI Munich) is resposible.
Helmut: please give me a note if you have fixed it.
Rich: Is it really A/0 ??

[3/31/94 public]
Core dumps are always 'A' severity.  I'm willing to drop the priority to 1,
if you wish.

[04/07/94 public]
changed "interest list": we have decided to check already in gdsditadm
if a name is given for "simple unprotected". 
That means that Helmut Baumgaertner is no longer responsible here in Munich.
It's enough to have me as resp. engeneer.

[6/20/94 public]
Fix verified.



CR Number                     : 10237
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : xds/xom
Short Description             : initXdsM1a no longer works
Reported Date                 : 3/29/94
Found in Baseline             : 1.1
Found Date                    : 3/29/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b7
Affected File(s)              : 
test/directory/gds/tst/initXdsM1a, initXdsM1b, initXdsM2
Sensitivity                   : public

[3/29/94 public]
The syntax of the file seems to be out-of-phase with the gdsditadm program.
When executing
	gdsditadm < initXdsM1a

I find the following message in the 'tstfile':

  *** INITIALIZATION BATCHFILE FOR MACHINE #1   (step 1/4)
  *****:
									     
  ERROR:
  No connection to DSA/DUA-Cache available !
  To continue press <CR> !
    
It seems that the batch files have not been updated to provide the
'authentication' mechanism.

[3/29/94 public]
Added the following line to initXdsM1a:

:Authentication mechanism to be used:Simple Unprotected

So that step 1/4 now looks like this:

  :**** INITIALIZATION BATCHFILE FOR MACHINE #1   (step 1/4)
  *****:
  :directory id:1
  :Authentication mechanism to be used:Simple Unprotected
  :password:
  :Country:
  :Organisation:
  :Organisational unit:
  :common name:
  :options():  '
    
This causes gdsditadm to core dump!

[3/29/94 public]
After some trial and error, this seems to work:

  :**** INITIALIZATION BATCHFILE FOR MACHINE #1   (step 1/4)
  *****:
  :directory id:1
  :Authentication mechanism to be used:anonymous
  :options():  '

Based upon this, the following changes need to be made in the initXdsM*
files:

initXdsM1a:
10,14c10
< :password:
< :Country:
< :Organisation:
< :Organisational unit:
< :common name:
---
> :Authentication mechanism to be used:anonymous

initXdsM2:
11,15c11
< :password:
< :Country:
< :Organisation:
< :Organisational unit:
< :common name:
---
> :Authentication mechanism to be used:anonymous
92,96c88
< :password:
< :Country:
< :Organisation:
< :Organisational unit:
< :common name:
---
> :Authentication mechanism to be used:anonymous    

initXdsM1b:
12,16c12
< :password:
< :Country:
< :Organisation:
< :Organisational unit:
< :common name:
---
> :Authentication mechanism to be used:anonymous
44,48c40
< :password:
< :Country:
< :Organisation:
< :Organisational unit:
< :common name:
---
> :Authentication mechanism to be used:anonymous
157,161c149
< :password:
< :Country:
< :Organisation:
< :Organisational unit:
< :common name:
---
> :Authentication mechanism to be used:anonymous

[3/29/94 public]
Fix submitted.

[3/30/94 public]
We have fixed it also today - we just forgot to change the three init* files.
The difference between Rich's version and our is always:

< :Authentication mechanism to be used:anonymous
---
> :Authentication mechanism to be used:Anonymous

"Anonymous" is correct. If you give "anonymous" nothing happens because
the administration doesn't accept small letters in the beginning of this word.
(You can try it using directly gdsditadm.)
Who shall submit the change from "anonymous" to "Anonymous"? rich or me?

[3/30/94 public]
Sorry - forgotten to reopen it.

[3/30/94 public]
Well 'anonymous' (vs 'Anonymous') worked for me ....

[3/30/94 public]
Ahh...  it worked because if the word does not begin with a capital letter,
then gdsditadm ignores the data an assumes the default ... which, at the
moment, is anonymous. 

Fix re-submitted with a capital A.

[3/31/94 public]
Done



CR Number                     : 10202
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : 
Short Description             : Submit in March (gdscp, RTROS, code clean, ...)
Reported Date                 : 3/22/94
Found in Baseline             : 1.1
Found Date                    : 3/22/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b6
Affected File(s)              : many
Sensitivity                   : public

[3/22/94 public]
The files mentioned in /afs/dce/project/dce/sni/march_submit
want to be submitted by SNI (1267 files). 
Mainly it's gdscp, RTROS, code clean. ABANDON coding is included
but no testcases for ABANDON are there. We don't promise
that the ABANDON will work - it will work with the next submit.

[3/29/94 public]
Closed.  Great job -- built right out of the box.



CR Number                     : 10185
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : gdshdlupd
Short Description             : gdshdlupd: 29427 Memory fault - core dumped
Reported Date                 : 3/18/94
Found in Baseline             : 1.1
Found Date                    : 3/18/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b6
Affected File(s)              : see below
Sensitivity                   : public

[3/18/94 public]

When I execute the dcegdshd system test on HP-UX I start getting the following
error message delivered to root:

From root Fri Mar 18 16:50 EST 1994
Subject: cron

/opt/dcelocal/bin/gdshdlupd: 29427 Memory fault - core dumped


*************************************************
Cron: The previous message is the standard output
      and standard error of one of your crontab commands:

[3/21/94 public]

Since our last submit a lot of things have changed in the gdsdaemon which
is called by gdshdlupd. (gdshdlupd is a shell script with one line:
/opt/dcelocal/bin/gdsdaemon -d$1 -m2)

Also now we have problems with the gdsdaemon - but it doesn't dump core.
We will submit this version (or a better - really working - version)
this week. (if Rich Zeliff allows - of course.)

[03/21/94 public]
Is the gdsdaemon command only used by tests, if not, why is this a test
defect and not a code one?

[3/21/94 public]
Oops, my mistake.  For some reason I read 'dcegdsshd' instead of
'gdshdlupd'.   Changed back to code.

[3/21/94 public]
Rich: It wasn't totally wrong: gds is used ONLY in tests.

[3/29/94 public]
Fix was submitted as part of DCE1.1 GDS2 drop - 3/23.

[4/20/94 public]
Closed.



CR Number                     : 10177
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : gds
Subcomponent Name             : test/directory/xds
Short Description             : Undeclared identifier
Reported Date                 : 3/18/94
Found in Baseline             : 1.1
Found Date                    : 3/18/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b7
Affected File(s)              : test/directory/xds/xt_dump.c
Sensitivity                   : public

[3/18/94 public]

 [ /test/directory/xds/tests.xoms/valid at 09:30 (AM) Friday ]

cc -c -DXOM -DTHREADSAFE -D_ALL_SOURCE -DAIX32 -I. \
  -I/u1/devobj/sb/nb_rios/src/test/directory/xds \
  -I/project/dce/build/dce1.1-snap/src/test/directory/xds \
  -I../../../directory/xds/h -I/u1/devobj/sb/nb_rios/src/directory/xds/h \
  -I/project/dce/build/dce1.1-snap/src/directory/xds/h \
  -I../../../directory/xom/h -I /u1/devobj/sb/nb_rios/src/directory/xom/h \
  -I/project/dce/build/dce1.1-snap/src/directory/xom/h \
  -I../../../directory/gds/h -I/u1/devobj/sb/nb_rios/src/directory/gds/h \
  -I/project/dce/build/dce1.1-snap/src/directory/gds/h \
  -I/u1/devobj/sb/nb_rios/export/rios/usr/include \
  -I/project/dce/build/dce1.1-snap/export/rios/usr/include \
  /project/dce/build/dce1.1-snap/src/test/directory/xds/xt_dump.c
"/project/dce/build/dce1.1-snap/src/test/directory/xds/xt_dump.c", line 61.1: \
  1506-045 (E) Undeclared identifier omP_dump_object.

 [ /test/systest/directory/gds/dcegdshd at 09:57 (AM) Friday ]

cc -c -g -D_BSD -Dunix -DIDL_NO_PROTOTYPES  -D_ALL_SOURCE -DAIX32 -I. \
 -I/u1/devobj/sb/nb_rios/src/test/systest/directory/gds/dcegdshd \
 -I/project/dce/build/dce1.1-snap/src/test/systest/directory/gds/dcegdshd \
 -I../../../tools -I/u1/devobj/sb/nb_rios/src/test/systest/tools \
 -I/project/dce/build/dce1.1-snap/src/test/systest/tools \
 -I../../../../../directory/xds/h -I/u1/devobj/sb/nb_rios/src/directory/xds/h \
 -I/project/dce/build/dce1.1-snap/src/directory/xds/h \
 -I../../../../../directory/xom/h -I/u1/devobj/sb/nb_rios/src/directory/xom/h \
 -I/project/dce/build/dce1.1-snap/src/directory/xom/h \
 -I../../../../../directory/xmh/h -I/u1/devobj/sb/nb_rios/src/directory/xmh/h \
 -I/project/dce/build/dce1.1-snap/src/directory/xmh/h \
 -I../../../../../directory/gds/h -I/u1/devobj/sb/nb_rios/src/directory/gds/h \
 -I/project/dce/build/dce1.1-snap/src/directory/gds/h \
 -I/u1/devobj/sb/nb_rios/export/rios/usr/include \
 -I/project/dce/build/dce1.1-snap/export/rios/usr/include \
 /project/dce/build/dce1.1-snap/src/test/directory/xds/xt_dump.c
"/project/dce/build/dce1.1-snap/src/test/directory/xds/xt_dump.c", line 61.1: \
  1506-045 (E) Undeclared identifier omP_dump_object.

[3/18/94 public]
Well, this certainly isn't an A0 because xt_test built, but it's still a
significant.

[3/21/94 public]

Why does this error occur now? Our submit was one month before. But anyway -
xt_dump.c will be defuncted with our next submit. xt_dump could be used
to dump some XOM objects - but the switch for xt_test was not documented.
And also didn't work correctly. We have decided to remove this option -
it was too difficult to keep XOM and xt_dump consistent.
Rich: Shall I submit the fix for that before? (It's only the Makefile -
remove all xt_dump stuff.)

[3/21/94 public]
Apparently this problem has occured for some time but the Rats just picked
it up now.

You can hold on the fix until your drop.

[03/21/94 public]

When xt_dump is defuncted, are you going to also make sure the system test
/test/systest/directory/gds/dcegdshd still builds correctly?  When dump
was changed to xt_dump in the last drop dcegdshd stopped building.

[03/21/94 public]

Thanks for the hint. I don't feel really responsible for the systest
stuff but it's easy to change. I will remove xt_dump.c in the 
systest/directory/gds/dcegdshd/Makefile and the call of 
"omP_dump_object" in shd_util.c.
I will build systest/directory/gds/dcegdshd to make sure that all will work.
Do you know who is the author  of shd_util.c? Who knows what view_obj
(built in systest/directory/gds/dcegdshd) really does? Where is it
used in the system test?

[04/26/94 public]
Set it to fix - all changes have been submitted in March.
I asked some questions: nobody answered. Does this mean that nobody knows
an answer? Who cares about gds (xds) systests?

[4/27/94 public]
To answer your question:  judging from the comments in the code, it looks
like the auther of shd_util was IBM.  This seems to date from prior to the
1.0 release.  I don't know about the other details of the tests.

QA owns the system tests -- I've mentioned this to you before.

[5/4/94 public]
Closed.



CR Number                     : 10124
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : sams
Short Description             : sams file needs cleanup
Reported Date                 : 3/11/94
Found in Baseline             : 1.1
Found Date                    : 3/11/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : GDS sams file
Sensitivity                   : public

[3/11/94 public]

There are a number of problems with the gds.sams file messages and coding.
A complete listed of suggested changes as well as marked up copy of the
sams output file was gievn to Rudi Wildgruber on 3/10/94.

[03/14/94 public]
The user kraemer does not exist, removed from Resp. Eng. field.  Please
have kraemer make an OT account request or use the full email address.

[3/14/94 public]
Assigned to Jochen.

[5/20/94 public]
Fixed in code submission for dce1.1b9.

[5/27/94 public]
Because of the number of new messages that have been added (over 300) and
need cleanup, and because there are still a few problems with some of the
t_om and t_omx messages, I have moved this back to open.  A new review has
been sent to Rudi Wildgruber noting all suggested revisions.

[6/27/94 public]
Status from Rudi, 6/24:
"I gave Kathy's comments to Ernst Kraemer and he divided the requested
clean-up onto a few engineers. I have to check with Ernst about the status
and if we already submitted a revised gds.sams with the last code drop.
Ernst is out being ill today, so I will check with him next week."

[07/11/94 public]
Munich reports that this is fixed except the following:

Kathy's comments say that we shouldn't use any abbreviation at all.
We don't agree. 
I.e. Kathy wants "DUA cache" to change to "Directory Users Agent Cache".

We think that DUA is a normal abbreviation in GDS,
and it is explained in the porting and testing guide, Appendix B
(DCE Abbreviation List).
So I set this OT to fix - if somebody doesn't agree: feel free to reopen it.



CR Number                     : 10116
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : admin
Short Description             : Translate german to english
Reported Date                 : 3/10/94
Found in Baseline             : 1.1
Found Date                    : 3/10/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : adm/admin/cget.c, h/cget.h
Sensitivity                   : public

[3/10/94 public]
These files have a variety of comments written in german which should be
translated to english.

There are also some functions and data structures which are named in german
which should be translated.  Here is a non-exhaustive list:

	getwahl()			
	*pfeld	 (and all variations)
	*pmaske
	getber[]	?  
		Here's the comment: /* Bereich fuer Exit-Routinen */
	teil
	*pgleich
	wert	( and all variations)
	*ppunkt
	DUNKEL
	HALBHELL
	WAHLERG
	getwerg
	ALTER		(is this a form of the german 'alt' (old) or the
			english 'alter' (to change, modify)? )
	

Of course, a related problem is variables which have acronym names based
upon german phrases.  E.g.:

        getwn      = 0;                 /* Nummer Auswahlfeld           */

But we can live with that.

[06/21/94 public]
Fixed by today's submission.



CR Number                     : 10040
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : mx300
S/W Ref Platform              : sinix
Component Name                : gds
Subcomponent Name             : oss
Short Description             : errno as struct member is redefinedfor pthreads
Reported Date                 : 3/1/94
Found in Baseline             : 1.1
Found Date                    : 3/1/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b5
Affected File(s)              : directory/gds/oss/prod/cmxtrace.h
				cmxl.c, cmxtrace.c, gds/gds.mk
Sensitivity                   : public

[3/1/94 public]
errno is used as a structure member. On SINIX, errno is redefined to a
function, when threads are activated.
errno in the structures must therefore get a different name.

[3/14/94 public]
Closed.



CR Number                     : 10025
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : xoms tests
Short Description             : two Makefiles are wrong - build is broken
Reported Date                 : 2/28/94
Found in Baseline             : 1.1
Found Date                    : 2/28/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b4
Affected File(s)              : tests.xoms/threads_af/Makefile
					     tests.xoms/threads_as/Makefile
Sensitivity                   : public

[2/28/94 public]

The Makefiles tests.xoms/threads_af/Makefile and tests.xoms/threads_as/Makefile
which I have submitted on Friday declare a DATAFILE Testcases. But
a file "Testcases" does not exist for threaded testcases.

[3/14/94 public]
Closed.



CR Number                     : 10018
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : mavrostest
Short Description             : libbsd is linked on all platforms except SVR4
Reported Date                 : 2/25/94
Found in Baseline             : 1.1
Found Date                    : 2/25/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b4
Affected File(s)              : mavrostest/Makefile,mavrostest/test_mvr.c
Sensitivity                   : public

[2/25/94 public]

You will find in the Makefile a "-lbsd" and in the test_mvr.c a call
of "ftime". As a part of the code clean that should be deleted.

[2/28/94 public]
Submitted.

[3/14/94 public]
Closed.



CR Number                     : 10012
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : xoms
Short Description             : XOMS tests not installed
Reported Date                 : 2/24/94
Found in Baseline             : 1.1
Found Date                    : 2/24/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b4
Affected File(s)              : tests.xoms/*
Sensitivity                   : public

[2/24/94 public]
The XOMS tests are not installed.

[2/24/94 public]
submitted 6 Makefiles.

[3/14/94 public]
Closed.



CR Number                     : 10009
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : mx300
S/W Ref Platform              : sinix
Component Name                : gds
Subcomponent Name             : xds,xom
Short Description             : Add SITE dependencies for SNI-Munich
Reported Date                 : 2/24/94
Found in Baseline             : 1.1
Found Date                    : 2/24/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b8
Affected File(s)              : xds,xom/Makefile
					test/directory/xds/Makefile
Sensitivity                   : public

[2/24/94 public]
Due to different SINIX OS version at Burlington and Munich,
we have to add some SITE specific SVR4_FLAGS.

[5/4/94 public]
Closed.



CR Number                     : 10003
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 9995
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : nds
Short Description             : building shared libraries which call functions from libdce
Reported Date                 : 2/23/94
Found in Baseline             : 1.1
Found Date                    : 2/23/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b9
Affected File(s)              : directory/gds/Makefile,
src/Makefile
Sensitivity                   : public

[2/23/94 public]

libNDS is a shared library on RIOS, AT386, HP800 and SVR4.(libNDS.a,
libNDS.so, libNDS.sl and libNDS.so) If you want to link a shared
library it is necessary to resolve all symbols in this shared library.
Because of that you have to give i.e. "-lc" if you link a shared library.

The problem is that libNDS uses the wrappers for the system calls from
pthread.h; so the linker tries to resolve symbols like cma_write when
libNDS is linked. Because of this we added "-ldce".
This works if libdce is there; it doesn't work on RIOS where libdce is built 
after libNDS.

We have found a temporary solution: On RIOS we link "-lcma" instead of
"-ldce". This works because threads are built before gds; but it only works
if libcma is really built. If USE_SHARED_LIBRARIES is set to 1 
(as on HP and AT) libcma is not built.
SVR4 is not yet checked.

So: Even if the build works now on all platforms: It looks random.

It seems to be a general problem: Until now only libdce and libNDS
are shared libraries. But you can imagine that some components
will use other shared libraries in the future. The interdependencies
between these shared libraries have to be managed.

[3/16/94 public]
This just seems to be a build dependency to me.  libNDS is now dependent on
libdce (or, rather, libcma.)  What's the problem with that?

[4/16/94 public]
A few comments for use in ironing out this defect:

  1.  If the concern about linking -lc is a concern about resolving the
      libc referenced in libdce, then it is a non-problem.  When libdce is 
      built, it pulls in what it needs from libc.  

  2.  I believe the concern is actually related to resolving symbols in
      libNDS.  If this is the case, then, as Rich states, you have a build 
      dependency of libNDS on libdce.  There are two potential problems
      here: 
            1. other programs used in the build may need libNDS to work (a'
               la gdsmkiss and libdce) so that changing the point in the
               build when libNDS gets built will necessitate large scale 
               build/Makefile changes.

            2. It has historically not been possible to build only one
               subdirectory of a tree during a pass, so that it would be
               impossible to say "build all GDS libs, but not libNDS".
 
      I think the possible solutions are as follows:
           
            1. If it doesn't matter where in the build libNDS is built,
               then build it after libdce.  This takes advantage of the
               fact that problem 2. above has been solved.  It is possible 
               to specify something like:
      
                 EXPLIB_SUBDIRS = threads ... libdce directory/gds/lib/libNDS
           
               or whatever.  This would mean either taking the libNDS
               subdirectory off of the EXPLIB_SUBDIRS line in the parent
               directory Makefile as well.  This handles the build
               dependency on libdce without much work.

            2. If only binaries are dependent on libNDS, then the above is 
               okay as well.

            3. If small-scale build changes are needed to deal with libNDS
               being build later in the build, make'em

            4. If large scale build/Makefile changes will (for some reason
               I can't come up with) be needed, then consider this: LIBDCE
               CAN ALWAYS BE BUILT FIRST!!  We build it last on the RIOS
               for mostly historic reasons that do not exist since the
               libdce Makefile was "genericised" (permit the butchery of
               the language :-) ).  If you look at the build log section
               for building libdce on the RIOS, you will note that the
               actions are exactly the same as for the other platforms,
               that is "visit each subdir, build objects, then link them
               into libdce".  It just so happens that the objects are
               already built.  If you make libdce the first directory
               visited in the EXPLIB pass, then the effect will be to get
               the  objects built for the build of libdce, so that on the 
               subsequent visit to the directory (to build the XXX.a), the
               only thing left to do is the 'ar' command.  It doesn't
               matter whether the libdce directory is visted as the first
               or last directory in the EXPLIB pass, 'make' will visit the 
               component subdirs and build what it needs.  This change may
               be agood thing in any case.

[4/20/94 public]
Is this defect still an issue?

[04/20/94 public]
Yes, it is. We still build libNDS.a (shared library) on RIOS with
linking "-lcma" - libdce is not yet there. Now we have a new problem:

One module from libNDS.a uses "dcelocal_path" which is defined in libdce.
As a temporary solution we defined it also in this module.

But the best solution is to build libNDS after libdce.

Rich: Can you change the RIOS build? Or shall I try it?

[5/5/94 public]
Fix submitted.  Removed 'nds' from GDSLIB_SUBDIRS in
directory/gds/Makefile, added 'directory/gds/nds' to EXPLIB_SUBDIRS after
libdce in src/Makefile.



CR Number                     : 9997
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : gds
Subcomponent Name             : gds/osiadr, gds/nds
Short Description             : Invoked process caught signal 9
Reported Date                 : 2/23/94
Found in Baseline             : 1.1
Found Date                    : 2/23/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b4
Affected File(s)              : gds/osiadr/Makefile
					     gds/osiadr/OSF1/machdep.mk
					     gds/nds/Makefile
					     gds/nds/OSF1/machdep.mk
Sensitivity                   : public

[2/23/94 public]

Signal 9 on the 486:

/project/dce/build/dce1.1-snap/tools/at386/macho/gcc
-B/project/dce/build/dce1.1-s
nap/tools/at386/macho/  -%ld," -warn_nopic -glue"
-L/u1/devobj/sb/nb_486/
export/at386/usr/shlib
-L/project/dce/build/dce1.1-snap/export/at386/usr/shlib -L/
usr/shlib -L/u1/devobj/sb/nb_486/export/at386/usr/lib
-L/project/dce/build/dce
1.1-snap/export/at386/usr/lib   -o gdsgennsap.X gennsap.o  -losiaddr -ldce
mv gdsgennsap.X gdsgennsap
./gdsgennsap dummy nsapform.cfg
*** Signal 9
`build_all' not remade because of errors.
*** Error code 1


/project/dce/build/dce1.1-snap/tools/at386/macho/gcc
-B/project/dce/build/dce1.1-s
nap/tools/at386/macho/  -%ld," -warn_nopic -glue"
-L/u1/devobj/sb/nb_486/e
xport/at386/usr/lib -L/project/dce/build/dce1.1-snap/export/at386/usr/lib
-L/u1/de
vobj/sb/nb_486/export/at386/usr/shlib
-L/project/dce/build/dce1.1-snap/export/at38
6/usr/shlib -L/usr/shlib -L/u1/devobj/sb/nb_486/export/at386/usr/lib
-L/projec
t/dce/build/dce1.1-snap/export/at386/usr/lib   -o ndscomp.X y.tab.o
lex.yy.o ndsco
mpup.o ndsreg1.o ndslog1.o gnu_regex1.o  -losiaddr -ly -ll -ldce
mv ndscomp.X ndscomp
./ndscomp
/project/dce/build/dce1.1-snap/src/directory/gds/AT386/nds/NDSCONF.dat
*** Signal 9
`build_all' not remade because of errors.
*** Error code 1

[2/23/94 public]
These two commands link against libdce (for wrappers and svc) but libdce
has not yet been loaded into the Known Global Package Table.  The solution
is to 'inlib' libdce in the process symbol table prior to invoking these
commands.

[2/23/94 public]
Fixed with submission from today.

[3/14/94 public]
Closed.



CR Number                     : 9996
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : gds
Subcomponent Name             : dua switch
Short Description             : libdce doesn't have libd21sw.a
build rules
Reported Date                 : 2/23/94
Found in Baseline             : 1.1
Found Date                    : 2/23/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b4
Affected File(s)              : directory/gds/dua/Makefile
Sensitivity                   : public

[2/23/94 public]

The following error message appears during the build of libdce.a:

  make: don't know how to make libd21sw.a

This means that the libdce Makefile does not know how to find the
individual library build rules.  This seems to be caused by not having the
following targets in the libd21sw.a makefile:

  #
  # The following definitions are for shared libraries:
  #   OBJECTS must be defined to pull in the common rules for compilation
  #   LIBS    must be defined to prevent -ldce from appearing on compile
  lines
  #
  OBJECTS =
  LIBS    =

This probably affects all the new GDS libraries which are added to libdce:

	gds/dua/switch/Makefile		- libd21sw.a
	gds/ipc/Makefile		- libd23.a
	gds/util/Makefile		- libd27.a    
	gds/osiadr/Makefil		- libosiaddr.a
	xoms/Makefile			- libxoms.a

[2/23/94 public]

That works for gds/dua/switch/Makefile, gds/util/Makefile. In xoms/Makefile
it is already done. 
For gds/ipc/Makefile and gds/osiadr/Makefile it is more difficult: In
ipc and osiadr also binaries are built which are linked with ${LIBS}.
LIBS is set to "-ldce" in gds/gds.mk.
Is it really necessary to set "LIBS =   "? Why?
I see no problems to set OBJECTS to nothing because OBJECTS is not used
in our Makefiles. If "LIBS =    " is really necessary: We have to change
in gds/ipc/Makefile and gds/osiadr/Makefile from ${LIBS} to "-ldce"
which looks hardcoded. 

The reason for using ${LIBS} when linking the gds binaries was the following:
If we try to ship  a new product of gds that doesn't use DCE it would be
very easy just to change one file: gds.mk.
A better way to do this is the use of GDS__LIBS (or another name that is not
used by ODE make) instead of LIBS. This would affect a lot of gds
Makefiles and cannot be done today. 
If the mentioned Makefiles really break the build we should change today
from ${LIBS} to "-ldce" in gds/ipc/Makefile and gds/osiadr/Makefile.

Rich: Who will change gds/dua/switch/Makefile (if your fix is OK)?
	What do you think about gds/ipc/Makefile and gds/osiadr/Makefile?

[2/23/94 public]
Nope, that wasn't it.  It seems that the fix is to add 'switch' to the
SUBDIRS line in directory/gds/dua/Makefile.

Go figure.

[2/23/94 public]
Fix submitted.

[3/14/94 public]
Closed.



CR Number                     : 9995
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : gds
Subcomponent Name             : nds
Short Description             : libNDS needs to link against libdce
Reported Date                 : 2/23/94
Found in Baseline             : 1.1
Found Date                    : 2/23/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b4
Affected File(s)              : directory/gds/nds/Makefile
Sensitivity                   : public

[2/23/94 public]

The problem is that libNDS needs to link against libdce, but libdce has not
been built yet.  It needs libdce for threads (wrappers) and serviceability. 

  cp /project/dce/build/dce1.1-snap/src/directory/gds/RIOS/nds/ndsshr.dat
  ndsshr.exp
  ld -o ndsshr.o ndscheck.o   ndsxtimap.o  ndslog.o  ndsgetopt.o  ndsmatch.o
  ndsselect.o  ndsshmatt.o  ndssockmap.o ndsusrmap.o ndsreg.o gnu_regex.o
   -L/u1/devobj/sb/nb_rios/export/rios/usr/lib
   -L/project/dce/build/dce1.1-snap/export/rios/usr/lib 
   -bE:ndsshr.exp
   -bM:SRE 
   -losiaddr 
   -lc 
   -lPW
   -T512 
   -H512 
   -ldce
  0706-005 ld: Cannot find file: /lib/libdce.a
	  Check path name and permissions or
	  use local problem reporting procedures.
  *** Error code 255
  `build_all' not remade because of errors.
  *** Error code 1
  `build_all' not remade because of errors.
  *** Error code 1

[2/23/94 public]

I have fixed it with linking libcma instead of libdce on RIOS. It is ugly,
but it should work. I will open a new defect; I hope we will find a common
solution for all platforms.

[3/14/94 public]
Closed.



CR Number                     : 9979
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : xoms
Short Description             : doc and real behaviour of xt_test do not match for xoms tests
Reported Date                 : 2/18/94
Found in Baseline             : 1.1
Found Date                    : 2/18/94
Severity                      : D
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b23
Affected File(s)              : Porting and Testing Guide
Sensitivity                   : public

[2/18/94 public]
If you call xt_test without "-c" in tests.xoms/valid almost all
testcases do fail. If you call it with "-c" all works fine.
The documentation says that it's not necessary to call xt_test in tests.xoms 
with "-xc".

[7/11/94 public]
Upgraded to priority 1 because this should be closed in 1.1.

[8/18/94 public]
Need a change to the manpage for this.

[10/17/94 public]
The GDS chapter of the Porting and Testing Guide now contains a description
of xt_test in section 7.5. It is stated there that the -c flag is
required for the tests.xoms/valid test cases.

[10/25/94 public]
It's there.



CR Number                     : 9898
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : gds
Subcomponent Name             : 
Short Description             : Schema update fails on client/server machine.
Reported Date                 : 2/7/94
Found in Baseline             : 1.0.3
Found Date                    : 2/7/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b4
Affected File(s)              : Feb. code submission
Sensitivity                   : public

[2/7/94 public]

Here is the problem as I observed it on a RIOS running 1.0.3:

On a single machine configured as a client/server schema modifications fail
when the number of dsa processes is configured to 5 (there is probably
nothing magical about 5 but that is the only value I tried). Schema updates
work fine, however with the default value of 2 dsa processes.

Here is the original licensee report(s) along with his fairly extensive
debug logs and comments:

-----
I can't seem to make changes to the schema if I run gdsditadm on the 
same machine as the DSA. i.e. using local IPC.
I get the error message:

ERROR: Scheme update failed, local scheme file will be created !

However, if I run gdsditadm on a client (DUA) machine, I can make changes and
save the new schema.
-----
I've narrowed down the problem that I'm having when saving a schema.
Apparently, CISAM's isopen on the file var/directory/gds/dsa/dir1/chdb/objects0
fails when gdsgendb is executed by gdschdb. gdsgendb fails because the file is
locked. I don't know who has the lock, but I suspect it's gdsditadm since
saving a schema fails only when gdsditadm is running on the same hosts as
the DSA. I'm using the ISAM libraries that came with the 1.0.3 tree.

If I put the following kludge in gdschdb, then saving a schema works:

cp $CHDBDIR/* /tmp/db/
rm $CHDBDIR/*
cp /tmp/db/* $CHDBDIR/

So basically, I got rid of the lock by deleting the file.
-----
Ok, here's more info for you.

When I run gdsditadm on the same machine as the DSA, two dsa's are involved.

The first dsa is used for the gdsditadm login.

When I go into schema administration, the second dsa is used for the connection
to read the schema and for subsequent calls such as running gdschdb.

For some reason that I haven't figured out yet, the first dsa opens the file
/opt/dcelocal/var/directory/gds/dsa/dir1/chdb/objects0 and never closes it
before the second dsa execute the gdschdb command. Thus, gdschdb (gdsgendb)
fails because the file /opt/dcelocal/var/directory/gds/dsa/dir1/chdb/objects0
is busy.

Here's the stack backtrace when the first dsa opens the file
/opt/dcelocal/var/directory/gds/dsa/dir1/chdb/objects0 and never closes it
before the second dsa execute gdschdb:


isopen(filename = "/opt/dcelocal/var/directory/gds/dsa/dir1/chdb/objects0", mode
 = 1026), line 102 in "isopen.c"
d26_i23_open_file(file_nr = 0, oa_flag = 0), line 1988 in "d261utilis.c"
d26_i31_find_object(dninfo = 0x7fffe508, l_rdn = 0x7fffdadc, record = "", lock_m
ode = 0), line 338 in "retutilis.c"
d26_u31_find_break_object(dninfo = 0x7fffe508, assert = 0x7fffeb3c, deref = 0x7f
ffef3c, record = "", lock_mode = 0, fct_tag = 1), line 731 in "retutil.c"
d26_u07_resolve_name(lock_mode = 0, fct_tag = 1, dn_info = 0x7fffe508, al_flag =
 0x7ffff7c4, ob_nr = 0x7ffff830, norm_base_obj = 0x7fffeb3c, e_target_obj = 0x7f
ffe668, deref_obj = 0x7fffef3c, unresolved = 0x7fffe660, eunres = 0x7fffeb34), l
ine 512 in "retutil.c"
d26_u00_search(lock_mode = 0, fct_tag = 1, input = "\223\377^A", output_len = 0x
7ffff86c, output = 0x7ffff860, remlen = 0x7ffff7d8, exact_obj = 0x7ffff394, attr
 = 0x42ace8, ob_cl = 0x7ffff798, acl = 0x7ffff7e0, mk = 0x7ffff7b8, recurring =
0x7ffff7dc, record = 0x7ffff7b0, al_flag = 0x7ffff7c4, ob_nr = 0x7ffff830), line
 2124 in "retutil.c"
d26_3_read(op_id = 1, input = "\223\377^A", input_len = 92, output = 0x7ffff860,
 output_len = 0x7ffff86c), line 281 in "d26read.c"
d26_m07_work(atsvpb = 0x401220, addon_dsa = 0, argc = 5, argv = 0x7ffffa3c), lin
e 1302 in "d26dsa.c"
main(argc = 6, argv = 0x7ffffac8, 0x7ffffae4), line 2081 in "d26dsa.c"
-----
I've followed this through (the stack trace below), and it appears the file
is never close. So, the questions are:
1) why the d26_3_read() path never closes the file it opens?
2) why you can't duplicate the problem?
   - could be that when you run gdsditadm on the same machine as the DSA,
     only one dsa is involved (like when I run gdsditadm on a different 
     machine).
   - I might have a problem with my port of the IPC and it's sending a read
     request to the wrong dsa.

All of the read requests to the file 
/opt/dcelocal/var/directory/gds/dsa/dir1/chdb/objects0 (except for the above
case) are followed immediately by a call to d26_C_modify_entry() in
d26_m07_work(). d26_C_modify_entry() in turn calls d26_i14_unlock() which
closes the file.

So, I think my problem will be solved if you fix question 1.

isopen(filename = "/opt/dcelocal/var/directory/gds/dsa/dir1/chdb/objects0", mode
 = 1026), line 102 in "isopen.c"
d26_i23_open_file(file_nr = 0, oa_flag = 0), line 1988 in "d261utilis.c"
d26_i31_find_object(dninfo = 0x7fffe508, l_rdn = 0x7fffdadc, record = "", lock_m
ode = 0), line 338 in "retutilis.c"
d26_u31_find_break_object(dninfo = 0x7fffe508, assert = 0x7fffeb3c, deref = 0x7f
ffef3c, record = "", lock_mode = 0, fct_tag = 1), line 731 in "retutil.c"
d26_u07_resolve_name(lock_mode = 0, fct_tag = 1, dn_info = 0x7fffe508, al_flag =
 0x7ffff7c4, ob_nr = 0x7ffff830, norm_base_obj = 0x7fffeb3c, e_target_obj = 0x7f
ffe668, deref_obj = 0x7fffef3c, unresolved = 0x7fffe660, eunres = 0x7fffeb34), l
ine 512 in "retutil.c"
d26_u00_search(lock_mode = 0, fct_tag = 1, input = "\223\377^A", output_len = 0x
7ffff86c, output = 0x7ffff860, remlen = 0x7ffff7d8, exact_obj = 0x7ffff394, attr
 = 0x42ace8, ob_cl = 0x7ffff798, acl = 0x7ffff7e0, mk = 0x7ffff7b8, recurring =
0x7ffff7dc, record = 0x7ffff7b0, al_flag = 0x7ffff7c4, ob_nr = 0x7ffff830), line
 2124 in "retutil.c"
d26_3_read(op_id = 1, input = "\223\377^A", input_len = 92, output = 0x7ffff860,
 output_len = 0x7ffff86c), line 281 in "d26read.c"
d26_m07_work(atsvpb = 0x401220, addon_dsa = 0, argc = 5, argv = 0x7ffffa3c), lin
e 1302 in "d26dsa.c"
main(argc = 6, argv = 0x7ffffac8, 0x7ffffae4), line 2081 in "d26dsa.c"
-----
Ok, here's more info. 

One thing that I've noticed when gdsditadm is running on the same machine 
as the DSA is that commands to the DSA is not always to the same dsa.

For example, when gdsditadm is doing the bind operation (a bind and
a read operation are sent to the DSA), DS_BIND is sent to one dsa, and the
DS_READ operation is sent to another dsa. (The same dsa handles both commands
if the bind is from a remote machine).

Now, when you do the save schema operation in gdsditadm, D23_READ and 
D23_MODENTR are sent to the DSA.  The READ is sent to one dsa and the
MODENTR is sent to the other dsa. Now, the dsa that did the READ has
the files /opt/dcelocal/var/directory/gds/dsa/dir1/chdb/object0* opened.
Therefore, when the other dsa trys to execute (gdschdb), it will fail.

Are commands supposed to be distributed to dsa's like that when you go
through local IPC?
-----

[2/9/94 public]
This will be fixed in the next SNI code drop for dce1.1. 
For a quick fix change the file ...gds/dsa/d26read.c :

Insert the line

        d26_i14_unlock();

before

d27_008_trace_err_apdu("EXIT1d26read",ret_value == D2_NO_ERR ?
                       (D23_rserror *)D2_NULL : (D23_rserror *)*output);

                                    /*@ return ret_value              */
return(ret_value);

End                                 /*@ d26_3_read()                  */

(end of file)

[2/24/94 public]
Fixed by Feb. code submission.



CR Number                     : 9893
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : 
Short Description             : dce1.1 source submission
Reported Date                 : 2/7/94
Found in Baseline             : 1.1
Found Date                    : 2/7/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b4
Affected File(s)              : ~3000 files
Sensitivity                   : public

[2/7/94 public]
CR for the SNI source submission for dce1.1.
Because of code cleanup, nearly every file has been changed.

[3/14/94 public]
Closed.



CR Number                     : 9890
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : dua switch
Short Description             : Limit on number of attribute
values should not be hard coded
Reported Date                 : 2/4/94
Found in Baseline             : 1.1
Found Date                    : 2/4/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : src/directory/gds/h/d21_cdsrd.c
Sensitivity                   : public

[2/4/94 public]
This problem was reported by Secom Information Systems (via OSF/Tokyo).  We
need a fix to allocate space dynamically for attribute values.

  Date: 2 Feb 1994 15:10:59 +0900
  From: "Yoshi" <osftokyo!yoshi%mishima@uunet.UU.NET>
  Subject: Question about XDSAPI
  To: "dce-talk" <uunet!osf.org!dce-talk@uunet.UU.NET>
  Cc: jim%mishima@uunet.UU.NET
  
  I have a question about DCE XDSAPI. This is from Secom Information System
  Co.Ltd. Secom is a OSF membership company. 
  
  Machine: RS/6000
  OS:      AIX 3.2.4
  DCE:     AIX DCE 1.2 (based OSF DCE 1.0.2)
  
  -----------------------------------------------------------------------
  Problem
  
  abstract:
   Adding more than 7 attribute entry and then reading them using xdsxom api
  calls, some entries are broken.
  
  description:
   The customer defines a new CDS attribute of type 'char' and put a string to
  that attribute using cdscp command. Using cdscp add object, they made multiple
  attribute entries in the CDS entry.
   The problem occurs with a program made by the customer which is using xdsxom
  api calls. After 7 attribute entries are put, the first entry is broken.
  
  (note that cdscp displays correctly. the entry is broken in the customer
  program, within some xdsxom api call.)
  
  sample:
   1) show the CDS entry
     $ cdscp show object /.:/subsys/dce/xdsxomtest
		    SHOW
		  OBJECT    /.../<cell_name>/subsys/dce/xdsxomtest
		      AT    1993-11-11-19:17:39
		 CDS_CTS =  1993-11-11-10:16:58.000356100/10-00-5a-a8-74-0a
		 CDS_UTS =  1993-11-11-10:17:35.967019100/10-00-5a-a8-74-0a
	     XDSXOM_TEST =  string_01
   2) add 5 more XDSXOM_TEST attribute entries.
     $ cdscp add object /.:/subsys/dce/xdsxomtest XDSXOM_TEST = string_02
     $ cdscp add object /.:/subsys/dce/xdsxomtest XDSXOM_TEST = string_03
     $ cdscp add object /.:/subsys/dce/xdsxomtest XDSXOM_TEST = string_04
     $ cdscp add object /.:/subsys/dce/xdsxomtest XDSXOM_TEST = string_05
     $ cdscp add object /.:/subsys/dce/xdsxomtest XDSXOM_TEST = string_06
   3) now there are 6 entries. make sure.
     $ cdscp show object /.:/subsys/dce/xdsxomtest
		    SHOW
		  OBJECT    /.../<cell_name>/subsys/dce/xdsxomtest
		      AT    1993-11-11-19:17:39
		 CDS_CTS =  1993-11-11-10:16:58.000356100/10-00-5a-a8-74-0a
		 CDS_UTS =  1993-11-11-10:17:35.967019100/10-00-5a-a8-74-0a
	     XDSXOM_TEST =  string_01
	     XDSXOM_TEST =  string_02
	     XDSXOM_TEST =  string_03
	     XDSXOM_TEST =  string_04
	     XDSXOM_TEST =  string_05
	     XDSXOM_TEST =  string_06
    $ rd subsys/dce/xdsxomtest
    object: <cell_name>/subsys/dce/xdsxomtest
    om_get(entry_object) -- 1 entries returned
    om_get(attr_list) -- 1 entries returned
    om_get(attr_value) -- 6 entries returned
    DS_ATTRIBUTE_VALUE/TELEX_STRING, str( 8): "string_0"
    DS_ATTRIBUTE_VALUE/TELEX_STRING, str( 8): "string_0"
    DS_ATTRIBUTE_VALUE/TELEX_STRING, str( 8): "string_0"
    DS_ATTRIBUTE_VALUE/TELEX_STRING, str( 8): "string_0"
    DS_ATTRIBUTE_VALUE/TELEX_STRING, str( 8): "string_0"
    DS_ATTRIBUTE_VALUE/TELEX_STRING, str( 8): "string_0"
  4) add one more entry (7th entry)
    $ cdscp add object /.:/subsys/dce/xdsxomtest XDSXOM_TEST = string_07
  5) display the entries again.
    $ cdscp show object /.:/subsys/dce/xdsxomtest
		    SHOW
		  OBJECT    /.../<cell_name>/subsys/dce/xdsxomtest
		      AT    1993-11-11-19:17:39
		 CDS_CTS =  1993-11-11-10:16:58.000356100/10-00-5a-a8-74-0a
		 CDS_UTS =  1993-11-11-10:17:35.967019100/10-00-5a-a8-74-0a
	     XDSXOM_TEST =  string_01
	     XDSXOM_TEST =  string_02
	     XDSXOM_TEST =  string_03
	     XDSXOM_TEST =  string_04
	     XDSXOM_TEST =  string_05
	     XDSXOM_TEST =  string_06
	     XDSXOM_TEST =  string_07
    $ rd subsys/dce/xdsxomtest
    object: <cell_name>/subsys/dce/xdsxomtest
    om_get(entry_object) -- 1 entries returned
    om_get(attr_list) -- 1 entries returned
    om_get(attr_value) -- 6 entries returned
    DS_ATTRIBUTE_VALUE/TELEX_STRING, str( 8): ""
    DS_ATTRIBUTE_VALUE/TELEX_STRING, str( 8): "string_0"
    DS_ATTRIBUTE_VALUE/TELEX_STRING, str( 8): "string_0"
    DS_ATTRIBUTE_VALUE/TELEX_STRING, str( 8): "string_0"
    DS_ATTRIBUTE_VALUE/TELEX_STRING, str( 8): "string_0"
    DS_ATTRIBUTE_VALUE/TELEX_STRING, str( 8): "string_0"
    DS_ATTRIBUTE_VALUE/TELEX_STRING, str( 8): "string_0"
   The first attribute entry was broken. Continue and put more entries, the 2nd
  entry will be broken after putting 11th entry, the 3rd entry will be broken
  after putting 15th entry.
  
  Description of the testcase
  Usage:
     $ rd cds_entry_name
     where, cds_entry_name doesn't contain cell_name part.
  
     An example is,
       rd subsys/dce/xdsxomtest
  To Compile:
     $ make
  
  In order to use an OID value other than 1.3.22.1.3.55, update both
  cds_attributes file and rd.c source code.
  In rd.c, the value is define like,
      #efine OMP_O_DSX_A_XDSXOM_TEST     "\x2B\x16\x01\x03\x37"
  ...
  ...
  ...
  
  
  ---------------------------------------------------------------------
  
  
  Regards,
  
  Yoshi Nagase
  OSF Pacific Operations
  yoshi@osf.org

[5/5/94 public]
The hard-coded limit will be increased with the next GDS drop.  At that
point, the priority will be dropped to '2'.  I'm still looking for a
dynamic allocation of attributes, however.

[7/11/94 public]
The hard-code limit was increased to 1000 some time ago.  This should still
be dynamically allocated, however.

[08/09/94 public]
Fix submitted.
Dynamically allocated now.

[9/27/94 public]
Closed, on Munich's word that fix is complete.



CR Number                     : 9722
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : spanns different subcomps.
Short Description             : update of files, that didn't make it into dce1.0.3 before code freeze
Reported Date                 : 1/12/94
Found in Baseline             : 1.1b0
Found Date                    : 1/12/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b2
Affected File(s)              : 
	./directory/gds/dsa/retolis.c
	./directory/gds/adm/admin/d20msk21.c
	./directory/gds/msg/En/d20admhelp.msg
	./directory/gds/msg/En/d20adminhelp.msg
	./directory/gds/nds/Makefile
	./directory/gds/osiadr/Makefile
	./directory/gds/util/d27logb.c
	./test/directory/gds/ros/testenv/SVR4/machdep.mk
	./test/directory/xds/Makefile
Sensitivity                   : public

[1/12/94 public]
These are the files, that had been changed during the time of code freeze
and opening of dce1.1 .

The following has changed:

Index with lower level is preferred before dummy index.
Bug fix for error reported by BULL:
./directory/gds/dsa/retolis.c

r_logon not retried on every log call. Fixes problem of full disk, that had
been found by Jochen during his visit at OSF:
./directory/gds/util/d27logb.c

Add ${TARGET_MACHINE} in LOCALFILES path:
./directory/gds/osiadr/Makefile

Modifications in flags for SVR4:
./directory/gds/nds/Makefile
./test/directory/gds/ros/testenv/SVR4/machdep.mk
./test/directory/xds/Makefile

Use enhanced help messages:
./directory/gds/adm/admin/d20msk21.c
./directory/gds/msg/En/d20admhelp.msg
./directory/gds/msg/En/d20adminhelp.msg

[2/18/94 public]
Closed



CR Number                     : 9678
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : gds
Subcomponent Name             : gdsipcinit
Short Description             : gdsipcinit dies when invoked with unknown switch
Reported Date                 : 1/4/94
Found in Baseline             : 1.1b0
Found Date                    : 1/4/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b4
Affected File(s)              : d23ipcinit.c
Sensitivity                   : public

[1/4/94 public]
When gdsipcinit is invoked with '-h' it declares a fatal error because -h
is an unknown switch.  gdsipcinit should handle this circumstance more 
gracefully..  (Like, by printing a usage message listing the valid switches
and then exiting quietly.)

[1/10/94 public]
This user-unfriendly behaviour has been changed (not to a different one ;-) )
in the SNI sources here in Munich. The fix will be delivered as soon as 
possible.

[02/24/94 public]
Fixed by Feb. code submission.

[4/20/94 public]
Well, it's almost fixed, but not quite:

gemini audit/idl$ gdsipcinit -h
/project/dce/build/dce1.1-snap/src/directory/gds/ipc/d23ipcinit.c(194):
FATAL ERROR: unknown option
USAGE: gdsipcinit \
        [-d<# of dist. command entries>]   [-r<# of registration entries>]
        [-s<# of server entries>]          [-c<# of client entries>]
        [-u<# of user credential entries>] [-l<com. buffer size (in kB)>]
        [-h<# of heap entries>]       |    [-R (= remove IPC-resources)]

[04/20/94 public]
"gdsipcinit -h" is not valid : You have to give "gdsipcinit -h4" (i.e.).
Changed back to "fixed".

[4/20/94 public]
Yes, I know '-h' isn't a valid switch ... oh!  That *was* the error message
gdsipcinit displays when parsing an invalid switch.  Ah, I thought I had
found another bug ...

;-)

Okay, closed.



CR Number                     : 9653
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : 
Short Description             : Makefile can't find machdep.mk
Reported Date                 : 12/23/93
Found in Baseline             : 1.1
Found Date                    : 12/23/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b1
Affected File(s)              : src/test/directory/gds/ros/testenv/Makefile
Sensitivity                   : public

[12/23/93 public]

On all 3 platforms "src/test/directory/gds/ros/testenv/Makefile" can't
find "HP800/machdep.mk".

The Makefile reference is:

.include <${TARGET_MACHINE}/machdep.mk>

[12/28/93 public]
This defect was caused because the test makefiles had not been upgraded for
the ODE2.3 make.  I thought this was going to happen before we began
building 1.1?

In any case, I've submitted the fix.

[12/29/93 public]
Verified in nightly build of 12/28.  Defect closed.



CR Number                     : 9567
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : all
Short Description             : "what" strings in too many binaries.
Reported Date                 : 12/1/93
Found in Baseline             : 1.0.3
Found Date                    : 12/1/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b4
Affected File(s)              : all gds files
Sensitivity                   : public

[12/1/93 public]

This is higher priority than it looks on the surface because fixing it
requires touching a large number of files.

With a recent GDS drop, most of the files now contain a

#ifndef lint
static char ..._rcsid[] = "@(#)$Id: c009567,v 1.6 94/03/15 14:56:01 nata Exp $";
#endif

HP has a policy about not putting engineer's names into binaries; we will
have to (mechanically) edit this out of every single source file every time
we pick up a source drop.  we want "what xxxx", where "xxx" is a file we
ship, to produce one, or at most two or three, lines of output, instead of

Building -Dlint is not an option since that may affect other things in
unexpected ways.

may I suggest an alternate:

#if !defined(lint) && defined(GDS_RCS_ID)
	...
#endif

or
#if !defined(lint) && !defined(NO_GDS_RCS_ID)
	...
#endif

.. so that we have a separate "switch" to control this stuff.

Also, under no circumstances should this stuff appear in header files;
there are ~70+ occurrances of the what-string for asn1.h ...

[12/13/93 public]
SNI/Munich decided to wrap all rcsid references in #ifdef GDS_RCS_ID .

[12/13/93 public]
The following is the template for the gds rcs strings:

#if !defined(lint) && defined(GDS_RCS_ID)
static char ..._rcsid[] = "@(#)$RCSfile: c009567,v $ $Revision: 1.6 $ $Date: 94/03/15 14:56:01 $";
#endif


Please notify me, if you have any concerns.
SNI will change the lines during code cleanup for dce1.1 .

[03/03/93 public]
Fixed by last mayor code drop.

[3/14/94 public]
Closed.



CR Number                     : 9554
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : admin_gd
Short Description             : NDS appendix refers to DIR-X instead of GDS
Reported Date                 : 11/24/93
Found in Baseline             : 1.0.3
Found Date                    : 11/24/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1doc
Affected File(s)              : admin_gd/directory/gds/L_app.gds.gpsml
Sensitivity                   : public

[11/24/93 public]

Appendix H, "The Network Directory Service (NDS)," in the Administration
Guide--Extended Services, contains these references to the SNI product
DIR-X:

L_app.gds.gpsml:file 'NDSCONF.dat' which is provided with DIR-X V3.0 contains information about all
L_app.gds.gpsml:part(s) of the PSAP-address administration in DIR-X  
L_app.gds.gpsml:address administration in DIR-X or regular 
L_app.gds.gpsml:            PORT = 21010 ; T_SELECTOR = DIR-X-CLIENT ;
L_app.gds.gpsml:            PORT = 21011 ; T_SELECTOR = DIR-X-SERVER1 ;
L_app.gds.gpsml:            PORT = 21012 ; T_SELECTOR = DIR-X-SERVER2 ;
L_app.gds.gpsml:            PORT = 21013 ; T_SELECTOR = DIR-X-SERVER3 ;

The first three references, in the descriptive text, should be changed from
DIR-X to GDS.  I believe the other references are labeled SNI-specific and
probably should not be changed.

[10/17/94 public]
Should be fixed. Will be verified soon.

[10/23/94 public]
Rich Zeliff reviewed and verified the changes.  I am closing the CR.



CR Number                     : 9509
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : osiadr
Short Description             : obsolete directory on VPATH
Reported Date                 : 11/18/93
Found in Baseline             : 1.0.3
Found Date                    : 11/18/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b9
Affected File(s)              : directory/gds/osiadr/Makefile
Sensitivity                   : public

[11/18/93 public]
The makefile contains a directory on the VPATH which no longer exists.
Because the dependency of one of the targets (LOCALFILES) contains a
relative path from the no-longer-existent directory then the target cannot
be built.

Amusingly enough, this only works because because of a bug in make.

The makefile should be changed accordingly:

< Old makefile
> New Makefile

68c68
< VPATH           = ../${TARGET_MACHINE}/osiadr:../adm/admin:../util
---
> VPATH           = ../${TARGET_MACHINE}/conf:../adm/admin:../util
71c71
< LOCALFILES	= ../conf/nsapform.dat
---
> LOCALFILES	= nsapform.dat

[05/18/94 public]
Fixed with last code drop. Now we have

VPATH           = ../conf/${TARGET_MACHINE}
 
and

LOCALFILES      = nsapform.dat



CR Number                     : 9471
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : 
Short Description             : pragmas and german
Reported Date                 : 11/10/93
Found in Baseline             : 1.0.3
Found Date                    : 11/10/93
Severity                      : B
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : directory/gds/h/cmxaddr.h
Sensitivity                   : public

[11/10/93 public]
Here is some mail from Bill sommerfeld.  Note that removing German from the
code is a code cleanup item.

In directory/gds/h/cmxaddr.h, I find the following code:

/*
 * Struktur fuer den eigenen Namen
 */

#pragma pack(2)

struct cx_myname
{
#ifdef _HETERO
	unsigned char	cxn_selsize[2];	/* = sizeof(union cx_unisel) */
	unsigned char	cxn_abbr[4];	/* Anwendungs-Identifikation, muss
lokal
					   (d.h. rechnerweit) eindeutig
sein */
#else
	unsigned short	cxn_selsize;	/* = sizeof(union cx_unisel) */
	unsigned short	cxn_abbr[2];	/* Anwendungs-Identifikation, muss
lokal
					   (d.h. rechnerweit) eindeutig
sein */
#endif
	union cx_unisel cxn_sel[CXN_SELNUM];
};

#pragma pack()

The HP compiler warns about these as "undefined pragmas".  Lucky for
us we're not using gcc 1.x to build this code (it tries to run rogue
or hack or a 64-level tower-of-hanoi simulation when it encounters a
pragma, since it was apparantly free to do this by one interpretation
of the ANSI standard..).

I suspect that the correct approach is to use the _HETERO ifdef and
dispense with the pragmas, but it's hard to tell since all the
comments are in german..

[12/22/93 public]
Assigned to Norbert.

[06/21/94 public]
Fixed by today's submission.



CR Number                     : 9418
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 9722
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : gdsstub/gdsdsa
Short Description             : Directory service hangs if no space for log writes.
Reported Date                 : 11/9/93
Found in Baseline             : 1.0.3
Found Date                    : 11/9/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b2
Affected File(s)              : gds/util/d27logb.c
Sensitivity                   : public

[11/9/93 public]
While running the gds_xds_str_001 system test, I turned on tracing so that
if any errors occurred, I would have trace logs for analysis.  The logs are
always created in the directory 
   /opt/dcelocal/var/directory/gds/adm/dsa/dir<dir-id>
where dir-id is the directory id in the DSA that was specified in the 
bind request that caased the DSA process to be spawned.  Given the level
of activity of the test, there are many DSA processes being spawned and 
exitting, and ergo MANY logs.  The partition became full, and right about 
the time of the last write to the log in the most recently created log_asn1
file, the xt_tester hung.  The last message in the d2log from the tester
was the message that it was beginning a REMOVE_ENTRY call (it had just
successfully completed a bind).

  The GDS installation is in the following state.
    On HP-UX machine dce11, a "Bind to Default DSA" operation from the 
    gdsditadm interface succeeds.

    On HP-UX machine dce11, a bind via xt_test (which does not use the 
    default session, but specifies a DN and dir-id) fails.  The DUA cache 
    output reports the following (amoung other things)

Bind-ID : 0  ::
         R_USER           11                                      11:43:42
ENTRY: d23_bind
         R_USER           11                                      11:43:42
ABORT(112): code: 2 class: 98 value: 1000
         R_USER           12                                      11:43:42

[6]d21_bh4 EXITa
         R_USER           12                                      11:43:42
Bind-ID : 1  Ret_code = 2  Err_class = 98 Err_value = 1000
         R_USER           12                                      11:43:42

[6]d21_rd04 EXITa
         R_USER           12                                      11:43:42
Bind-ID : -1  Ret_code = 2  Err_class = 9 Err_value = 48
         R_USER           12                                      11:43:42

[6]d21_b_read_cache EXITc
         R_USER           12                                      11:43:42
Bind-ID : -1  Ret_code = 2  Err_class = 9 Err_value = 48
         R_USER           12                                      11:43:42

[6]d21bind ERROR
         R_USER           12                                      11:43:42
Bind-ID : -1  :: can't read named-dsa
         R_USER           12                                      11:43:42

[6]d21bind EXIT2
         R_USER           12                                      11:43:42
Bind-ID : -1  Ret_code = 2  Err_class = 9 Err_value = 48

I will post a location where the full logs can be found after I try to put
them in AFS.

   On a system on which an error did not occur, a bind to the DSA on dce11
   succeeds, which indicates that the S-stub is still operational to some
   extent.

   The DSA which appears to have been servicing the requests from the 
   hung xt_test client services some of the incoming bind requests, which
   indicates that the DSA is still operational to some extent.

   [ MAYBE THIS IS A FINGER POINTING AT THE CSTUB - SOUNDS LIK IT ]
   
   On soldier, the xt_test program hung at about 8:38 am EST. on Nov 9.

   On soldier, any attempt to bind to the default DSA on dce11 hangs in 
   the initial gdsditadm screen.  I will post the locations of logs when
   I know what they are.

   THIS IS VERY STRANGE!! On soldier, each time I attempt to bind to 
   the DSA on dce11 via gdsditadm, the hung xt_test program COMPLETES
   ONE OR TWO MORE OPERATIONS!!!  The xt_test program then hangs again
   unless I kill the hung gdsditadm and retry it.

   It seems like things are not kosher at the server, nor at the client,
   and It looks like the problems are in the C-Stub (big surprise).


   The logs from the RIOS (soldier) where the xt_test got stuck and the
   gdsditadm bind attempts fail are in soldier:/tmp/gdslog, and the 
   contents are as follows:
      CMXMCSTUBlog_with_blocking_xt_test  - the cstub log from when the 
                                            xt_test blocked
      asn1-CSTUBlog_with_blocking_xt_test - asn1_log
      CSTUBlog_with_hung_bind             - cstub .l1 log from hung 
                                            gdsditadm bind
      l2-CSTUBlog_with_blocking_xt_test   - cstub .l2 log from when xt_test
                                            hung.
      DUAlog_hung_gdsditadm_bind          - DUA log from hung gdsditadm
                                            bind attempt

 
   The logs from the HP-UX (dce11) where the DSA was running are in 
   dce11:/u0/gdslogs and the contents are as follows:

      l1-DSALog_for_hung_xt_test    - DSA .l1 log from an operation by the
                                      hung xt_test
      asn1-DSALog_for_hung_xt_test  - asn1 log from DSA serving the hung 
                                      xt_test 
      CMX_1_SSTUB                   - recent CMX sstub log
      CMX_2_SSTUB                   - older CMX sstub log
      l1-SSTUB                      - recent .l1 sstub log
      l2-SSTUB                      - older .l2 sstub log
      DUALog_failed_xt_test_bind    - dua log from attempted xt_test log

[1/13/94 public]
Fixed by submission for CR 9722.

[2/18/94 public]
Closed.



CR Number                     : 9390
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : gds
Subcomponent Name             : admin #2
Short Description             : gdsditadm#2: can't update schema
Reported Date                 : 11/7/93
Found in Baseline             : 1.0.3
Found Date                    : 11/7/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : see below
Sensitivity                   : public

[11/7/93 public]
I've encountered and error during gdsditadm test #2.  Here is a segment of
the last 5 lines of the t.erg file created by the test:

  ERROR:
  Scheme update failed, local scheme file will be created !
  To continue press <CR> !
  **EXIT***:
  **EXIT***:

This did not occur in the HP800 or AT386 tests.

Here are the configurations used:

M1 (RIOS)

DIRECTORY-ID  CONFIGURATION TYPE  SERVER-PROC  CLIENTS  UPDATE   

    1         Clt/Srv-System          2         16      yes      
    3         Clt/Srv-System          2         16      yes      
    4         Clt/Srv-System          2         16      yes      


M2 (HP/UX)

DIRECTORY-ID  CONFIGURATION TYPE  SERVER-PROC  CLIENTS  UPDATE 

    1         Clt/Srv-System          2         16      no

[11/8/93 public]
Fix submitted by Gundola Loose in Munich.  The following files where
submitted: 

./directory/gds/dsa/d26logg.c 
./directory/gds/dsa/d26trans.c

[11/9/93 public]
The submitted code fix one instance of the problem.  The error still occurs
at the very end of gdsditadm test #2.  Here is the configuration on which
the test was run.

Will rerun test with tracing turned on and place logs in AFS cell.

[11/9/93 public]
Can't reproduced the problem ... must have been driver error.  Defect is
closed.



CR Number                     : 9377
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : mx300
S/W Ref Platform              : sinix
Component Name                : gds
Subcomponent Name             : xds
Short Description             : missing -Xc in SVR4_CFLAGS
Reported Date                 : 11/5/93
Found in Baseline             : 1.0.3
Found Date                    : 11/5/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : src/directory/xds/Makefile
Sensitivity                   : public

[11/5/93 public]
I have to add
	.if (${TARGET_MACHINE} == "SVR4")
	SVR4_CFLAGS += -Xc
	.endif
to src/directory/xds/Makefile, to compile libXDS with ANSI flag .

[11/5/93 public]
Changed to priority 2 because this is not a ship-hold defect.

[11/9/93 public]



CR Number                     : 9371
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 9295
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : xom
Short Description             : Xom valid get* tests fail
under certain circumstances
Reported Date                 : 11/4/93
Found in Baseline             : 1.0.3
Found Date                    : 11/4/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b4
Affected File(s)              : Feb code submission
Sensitivity                   : public

[11/4/93 public]
See the discussion under OT9295.

The xom/valid/get* tests fail when:
	- gds is activated
	- testcases are run with xt_test -a option.  

Here is the Testcases file used:
copy1v
copy2v
copy3v
copy_value1v
copy_value2v
create1v
create2v
delete1v
delete2v
get1v
get2v
get3v
get4v
get5v
get6v
get7v
get8v
get9v
instance1v
instance2v
instance3v
put1v
put2v
put3v
put4v
put5v
put6v
read1v
read2v
remove1v
write1v

[02/24/94 public]
Fixed by Feb. code submission.

[4/20/94 public]
Closed.



CR Number                     : 9366
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : gds
Subcomponent Name             : gdscstub
Short Description             : cstub exits if def. DSA bind fails
Reported Date                 : 11/4/93
Found in Baseline             : 1.0.3b9
Found Date                    : 11/4/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : oss/prod/cmx2k.c, cmxinup.c
Sensitivity                   : public

[11/4/93 public]

After setting up the gds_xds_str_001 test we noticed the following,
   if the default DSA for a directory id in the GDS installation on a 486
   is down, then an attempt to bind to the default DSA causes the C-stub
   to exit.  If the default DSA is up, then the bind proceeds normally.

   NOTE: Possibly an Interop issue 486 to HP (see config layout below).

The configuration was as follows:

 Machine     Platform   DSA-Name  Dir-Id  GDS-Type  Default-DSA
Initial-DSA
----------   --------   --------  ------  --------  -----------
-----------
 dce2        HP-UX       dsa-m1     1     cli-srv    dsa-m1      dsa-m1
                                    2     client     dsa-m2

 ironman     486/OSF1    dsa-m2     1     cli-srv    dsa-m1      dsa-m1
                                    2     cli-srv    dsa-m2

 darkman     HP-UX       darkman    1     cli-srv    dsa-m1      dsa-m1
                                    2     client     dsa-m2

 soldier     HP-UX       soldier    1     cli-srv    dsa-m1      dsa-m1
                                    2     client     dsa-m2

[11/4/93 public]
Add ifdef for __OSF__ to the AIX cases, because OSF1 is so similar to
AIX ;-).
Seriously, the code for AIX is also valid for OSF1.

[11/10/93 public]



CR Number                     : 9332
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : 
Short Description             : missing tester scripts
Reported Date                 : 11/3/93
Found in Baseline             : 1.0.3
Found Date                    : 11/3/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : see below
Sensitivity                   : public

[11/3/93 public]
Necessary script files, located in <dce-root-dir>/src/test/directory/script:

    TEST               -- sequential tests in one subdirectory
    TTEST              -- threaded tests in one subdirectory
    TTESTa             -- threaded tests run sequentially in one subdirectory
    TESTALL            -- sequential tests in all subdirectories
    TTESTALL           -- threaded tests in all subdirectories
    TTESTALLa          -- threaded tests run sequentially in all subdirectories
    _test              -- one sequential test (run from subdirectory)
    _ttest             -- one threaded test (run from subdirectory)
    _testall           -- called by TESTALL
    _ttestall          -- called by TTESTALL
    _ttestalla         -- called by TTESTALL
    result             -- utility called by *TEST*
    cleantree          -- utility called by *TEST*

These  script files must be accessible over $PATH.
                                                                                                        ----- o -----
NOTE:

changes from documentation of 25 Oct 93:
        directory is now .../script instead of .../scripts
        names are now _test.. or _ttest instead of test or ttest

[11/8/93 public]



CR Number                     : 9311
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : switch test
Short Description             : Update switch test 'valid'
Testcases
Reported Date                 : 11/1/93
Found in Baseline             : 1.0.3
Found Date                    : 11/1/93
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b10
Affected File(s)              : src/directory/xds/tests.switch/valid/Testcases
Sensitivity                   : public

[11/1/93 public]
The read11v and read12v tests should be removed from Testcases.  They were
defuncted in 2/93.

[11/1/93 public]
Additionally, the following testcases were dropped in 11/92 but were never
added to the 'Testcases' file:

add_entry1tv
compare1tv
list1tv
mod_entry1tv
read1tv
remove1tv

[11/1/93 public]
Fix submitted.

[11/8/93 public]
Oops, the aforementioned *1tv tests don't work under the basic switch test
configuration -- they apparently require a second machine to be configured.
Therefore, they should be removed from Testcases after all.  Will open a
documentation defect against the porting guide.

[11/8/93 public]
Doc bug is OT9400



CR Number                     : 9308
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : tests.switch
Short Description             : Testcases file references
defuncted test
Reported Date                 : 11/1/93
Found in Baseline             : 1.0.3
Found Date                    : 11/1/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b10
Affected File(s)              : 
src/test/directory/xds/tests.switch/invalid/Testcases
Sensitivity                   : public

[11/1/93 public]
The 'Testcases' file contains the test 'read3i', which was defuncted by
Norbert Marrek on 2/4/93.

[11/1/93 public]
Removed read3i from Testcases

[11/8/93 public]



CR Number                     : 9307
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : xt_test
Short Description             : xt_test gets a bus error
during valid switch tests
Reported Date                 : 11/1/93
Found in Baseline             : 1.0.3
Found Date                    : 11/1/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b10
Affected File(s)              : 
./directory/gds/dua/switch/d21_cdslis.c
Sensitivity                   : public

[11/1/93 public]
The xt_test program reports a bus error in function make_result_contiguous
during the valid testcase list3v.

Configured DCE and GDS according to instructions in Porting Guide.  Used
the following script to initialize the DUA cache:

*****:
:directory id:1
:password:
:Country:
:Organisation:
:Organisational unit:
:common name:
:options():Logon to the DUA Cache
:****Administration ****:
:Function:1
:****Add Client Address *******:
:Operation:05
:P-Selector:
:S-Selector:
:T-Selector:Client
:Net-address 1:TCP/IP!internet=130.105.5.41+port=21010__________________
:Net-address 2:
:Net-address 3:
:Net-address 4:
:Net-address 5:
:****AddObject  ie/digital/dce/dsa/dsa-m1 *******:
:Operation:01
:Objekttypnummer:07
:country:ie
:organization:digital
:OrganizationalUnit:dce
:Common-Name:dsa
:Common-Name:dsa-m1
:ObjectClass:DSA
:Auxiliary Object class:NO
:Attribute Name1:Presentation-Address
:Attribute Name2:DSA-Type
:Attribute Name3:
:Attribute Name4:
:Attribute Name5:
:More:
:attributName:DSA-Type
:attributwert:default/local'
:attributwert:
:attributName:
:attributwert:
:attributwert:
:attributName:
:attributwert:
:attributwert:
:P-Selector:
:S-Selector:
:T-Selector:Server
:Net-address 1:TCP/IP!internet=130.105.5.41+port=21011___________________
:Net-address 2:
:Net-address 3:
:Net-address 4:
:Net-address 5:
:******** RETURN ******:
:operation:00
:**** Administration ****:
:Function:0

[11/1/93 public]
Also happens during tests.switch/threads_as/T10list3v

[11/4/93 public]
Fix submitted 11/3.

[11/4/93 public]
Fix verified.



CR Number                     : 9301
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : src/test/systest/directory/gds/dcegdshd
Short Description             : Makefile still refers to defunct
					     files
Reported Date                 : 11/1/93
Found in Baseline             : 1.0.3
Found Date                    : 11/1/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : /systest/directory/gds/dcegdshd/Makefile
Sensitivity                   : public

[11/1/93 public]

In "src/test/systest/directory/gds/dcegdshd" the Makefile still lists
in its "OTHERS" target 6 files that were defuncted, so it complains
during "test" and "test install" phases:
 
install_tests.log.10-30-93:13334:make: don't know how to make gdsSetup
(continuing)
install_tests.log.10-30-93:13335:make: don't know how to make gdsmod
(continuing)
install_tests.log.10-30-93:13336:make: don't know how to make
worldSetup.gds (continuing)
install_tests.log.10-30-93:13337:make: don't know how to make
gdsdirinfo.awk (continuing)
install_tests.log.10-30-93:13338:make: don't know how to make gdskill
(continuing)
install_tests.log.10-30-93:13339:make: don't know how to make setup.i.gds
(continuing)
tests.log.10-30-93:13069:make: don't know how to make gdsSetup (continuing)
tests.log.10-30-93:13070:make: don't know how to make gdsmod (continuing)
tests.log.10-30-93:13071:make: don't know how to make worldSetup.gds
(continuing)
tests.log.10-30-93:13072:make: don't know how to make gdsdirinfo.awk
(continuing)
tests.log.10-30-93:13073:make: don't know how to make gdskill (continuing)
tests.log.10-30-93:13074:make: don't know how to make setup.i.gds (continuing)

[11/01/93 public]
Fix submitted.

[11/08/93 public]
Closed.



CR Number                     : 9300
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : gdsdsa
Short Description             : DSAs core dump when toggling
tracing.
Reported Date                 : 11/1/93
Found in Baseline             : 1.0.3
Found Date                    : 11/1/93
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b10
Affected File(s)              : ./directory/gds/ipc/d23distcmd.c
Sensitivity                   : public

[11/1/93 public]
If, after activing GDS, you try to change the status of tracing (either
turning it off or on) the DSAs will seg fault.  The procedure in which they
die is d23_dread_cmd.

[11/2/93 public]
This only seems to be a problem when you have a new configuration but have
not yet initialized the caches.

[11/4/93 public]
Fix submitted 11/3.

[11/4/93 public]
Fix verified.



CR Number                     : 9295
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : xom tests
Short Description             : get*v tests fail on UX
Reported Date                 : 10/29/93
Found in Baseline             : 1.0.3b8
Found Date                    : 10/29/93
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b10
Affected File(s)              : 
test/directory/xds/tests.xom/valid/Testcases
Sensitivity                   : public

[10/29/93 public]

Every one of the GET*V tests appears to pass, but reports failure, on
HPUX only.  Looks like a test bug to me . . . Here's the output:

 : Function INITIALIZE : 
: 	call ds_initialize ()
: 	ds_initialize did not return NULL
: 	ds_initialize() returned OK

: Function VERSION : 
: 	feature_list = feature_list1
: 	workspace = workspace1
: 	call ds_version()
: 	expected and received DS_status from ds_version same
: 	ds_version() returned OK

: Function CREATE : 
: 	class = DS_C_AVA
: 	initialize = TRUE
: 	workspace = workspace1
: 	call om_create()
: 	om_create return code = 0
: 	expected and received OM_return_code from om_create same
: 	om_create() returned OK

: Function PUT : 
: 	destination = private_object1
: 	modification = OM_REPLACE_ALL
: 	source = country1
: 	included_types = type_list1
: 	initial_value = 0 (integer value = 0)
: 	limiting_value = 0 (integer value = 0)
: 	call om_put()
: 	om_put return code = 0
: 	expected and received OM_return_code from om_put same
: 	om_put() returned OK

: Function GET : 
: 	original = private_object1
: 	exclusions = OM_EXCLUDE_ALL_BUT_THESE_TYPES
: 	included_types = type_list2
: 	local_strings = FALSE
: 	initial_value = 0 (integer value = 0)
: 	limiting_value = 0 (integer value = 0)
: 	call om_get()
: 	om_get return code = 0
: 	expected and received OM_return_code from om_get same
: 	GET returned ERROR

: Function SHUTDOWN : 
: 	workspace = workspace1
: 	call ds_shutdown()
: 	expected and received DS_status from ds_shutdown same
: 	ds_shutdown() returned OK

: TESTCASE get7v FAILED

[11/3/93 public]
Reproduced error.  M1 is HP/UX, M2 is OSF1/486.

[11/3/93 public]
More information:  test pass when gds is not activated, but fail when gds
is activated.

[11/4/93 public]
Here's a summary of the situations in which this defect occurs:

	- Problem only occurs when gds is activated.
	- Problem only occurs when running tests with -a Testcases
		i.e., it is caused by an interaction with one of the tests
		that runs earlier.
	- Problem is not deterministic.  It has not always been reproduced
	although it *has* been reproduced.

If you run the tests individually, or if you move them to the top of the
Testcases file, then they pass.

Therefore, the interim solution for 1.0.3 is to do this:  move the get*
tests to the top of the testcases file and then open another defect to
investigate what the real problem is.

[11/4/93 public]
Fix submitted.

[11/8/93 public]



CR Number                     : 9292
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : util
Short Description             : fatal error logging disabled
Reported Date                 : 10/29/93
Found in Baseline             : 1.0.3
Found Date                    : 10/29/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : gds/util/d27logb.c
Sensitivity                   : public

[10/29/93 public]
If a gds process dies it should perform a fatal error logging even if the
trace system is switched off. That does not work correctly. To fix
that one line in d27logb.c has to change.

[10/29/93 public]
fixed.

[11/8/93 public]



CR Number                     : 9279
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : C-Isam
Short Description             : database locking does not work
Reported Date                 : 10/28/93
Found in Baseline             : 1.0.3
Found Date                    : 10/28/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : gds/cisam/isam/Makefile
Sensitivity                   : public

[10/28/93 public]
If you try to add the same object to the same DSA at the same time
there is a locking mechanism in C-Isam that guaranties that this
object is added only onces. This locking mechanism is activated
with the CFLAG MX300. This line is commented out in the cisam/isam/Makefile.
But MX300 has to be defined. We can discuss if we change this name 
MX300 to anything else. I would prefer just to change the Makefile;
it is less work than to change many C-Files.

[10/28/93 public]
Fixed: We changed the CFLAG to ISAM_LOCK. It is defined now on all machines.

[11/8/93 public]



CR Number                     : 9270
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : mavrostest
Short Description             : test_mvr.sh should not build code.
Reported Date                 : 10/27/93
Found in Baseline             : 1.0.3
Found Date                    : 10/27/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b9
Affected File(s)              : test_mvr.sh, Makefile
Sensitivity                   : public

[10/27/93 public]
Most of the compilation and linkage activities that are done in the
test_mvr.sh script should be done as part of the build.  test_mvr.sh should
then only need to execute the test drivers.

[5/4/94 public]
Fixed.



CR Number                     : 9269
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : mavrostest
Short Description             : test.make is not installed
Reported Date                 : 10/27/93
Found in Baseline             : 1.0.3
Found Date                    : 10/27/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b9
Affected File(s)              : test/directory/gds/mavrostest
Sensitivity                   : public

[10/27/93 public]
The makefile 'test.make' is not installed.  This prevents the operation of
the mavros functional test as specified by the porting guide.

[10/27/93 public]
More general: fixed mavrostests so they would work as documented:

Makefile:  added three files to DATAFILES: test.make, import1.h, test.h

test_mvr.sh: added -e file to make invocation so that it would pick up
environement values of CFLAGS and LDFLAGS.

[10/28/93 public]
Verified in build of 10/27.



CR Number                     : 9261
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : gds
Subcomponent Name             : 
Short Description             : DSA dies during admin
test 2
Reported Date                 : 10/26/93
Found in Baseline             : 1.0.3
Found Date                    : 10/26/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : gds/dsa/*
Sensitivity                   : public

[10/26/93 public]

One of the DSA's died during the operation of gdsditadm test #2.  No core
file was produced.  The configuration was and OSF1 system as machine 1 and
and HPUX system as machine2.  

Tracing was active.

All logs have been collected in
gemini:/usr/sandbox/defect/<this-defect-number>

[10/26/93 public]
More info:  looks like it was one of the DSAs for dir4:

root@gemini dsa/dir3$ gdsdirinfo
#       PROCTYPE    PID    DIRID    IPCID    STATE
#
        Monitor     20580    -        5        -        
        DUA-Cache   20631    -        1        -        
        C-Stub      20625    -        2        -        
        S-Stub      20635    1        11       -        
        DSA         20634    1        31       -        
        DSA         20640    1        31       -        
        DSA         20647    3        33       -        
        DSA         20651    3        33       -        
        S-Stub      20638    3        13       -        
        S-Stub      20653    4        14       -        
        DSA         20649    4        34       -

[10/26/93 public]
More data:  problem reproduced (same machine configuration) on a second run
of the test.  

test finished at 15:52 (as determined by ls of 't.erg'):
-rw-r--r--   1 root     system            12709 Oct 26 15:52 t.erg

However, the DSA for directory 4 didn't disappear until 2 minutes
afterwards.  Here is the output of gdsdirinfo running in the following
loop:

while true
do
	gdsdirinfo
	date
	sleep 15 
done

#       PROCTYPE    PID    DIRID    IPCID    STATE
#
        Monitor     21277    -        5        -        
        DUA-Cache   21287    -        1        -        
        S-Stub      21294    1        11       -        
        C-Stub      21293    -        2        -        
        DSA         21299    1        31       -        
        DSA         21288    1        31       -        
        DSA         21304    3        33       -        
        DSA         21309    3        33       -        
        S-Stub      21298    3        13       -        
        DSA         21305    4        34       -        
        S-Stub      21302    4        14       -        
        DSA         21451    4        34       -        
Tue Oct 26 15:54:41 EDT 1993
#       PROCTYPE    PID    DIRID    IPCID    STATE
#
        Monitor     21277    -        5        -        
        DUA-Cache   21287    -        1        -        
        S-Stub      21294    1        11       -        
        C-Stub      21293    -        2        -        
        DSA         21299    1        31       -        
        DSA         21288    1        31       -        
        DSA         21304    3        33       -        
        DSA         21309    3        33       -        
        S-Stub      21298    3        13       -        
        DSA         21305    4        34       -        
        S-Stub      21302    4        14       -        
Tue Oct 26 15:54:57 EDT 1993

[10/29/93 public]
Fixed by changing the logic in the schema modification in the DSA.

[11/8/93 public]



CR Number                     : 9260
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : admin tests
Short Description             : Discrepency between predicted
and actual error.
Reported Date                 : 10/26/93
Found in Baseline             : 1.0.3
Found Date                    : 10/26/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : test/directory/gds/tst/t.scheme/ch_schema2
Sensitivity                   : public

[10/26/93 public]
Running the gdsditadm test #2 on an OSF1 system I encounter the following
circumstance in which the predicted error does not match the actual error:

**ADD OCT entry (EEE) --->o.k***:
**MODIFY OCT entry (CCC) --->ERROR(This modification generates a loop in
object class hierarchy !)***:
                                                                           
ERROR:
Mandatory attr. appears in one of the superior object classes !
To continue press <CR> !

[10/27/93 public]
fixed with changing the batchfile

[10/28/93 public]
Fix verified.



CR Number                     : 9253
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : gds
Subcomponent Name             : nds
Short Description             : libNDS.so does not build
correctly on AT386
Reported Date                 : 10/25/93
Found in Baseline             : 1.0.3
Found Date                    : 10/25/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b9
Affected File(s)              : directory/gds/nds/Makefile
Sensitivity                   : public

[10/25/93 public]
libNDS.so was not building correctly as a shared library.  Here are the
fixes: 

*** <<<< current dce1.0.3 version
--- <<<< new Makefile version
***************
*** 55,64 ****
  LIBS          = -lgen
  ndscomp_LIBS  = -losiaddr -ly -ll -lgen 
  .elif (${TARGET_MACHINE} == "AT386")
! LIBRARIES     = libNDS.so
  libNDS.so_EXPDIR= /usr/shlib/
  libNDS.so_IDIR  = /usr/shlib/
! libNDS.so_LIBS  = -losiaddr -lc
  LXFLAGS               = -v
  ndscomp_LIBS  = -losiaddr -ly -ll
  .endif
--- 55,65 ----
  LIBS          = -lgen
  ndscomp_LIBS  = -losiaddr -ly -ll -lgen 
  .elif (${TARGET_MACHINE} == "AT386")
! SHARED_LIBRARIES      = libNDS.so
  libNDS.so_EXPDIR= /usr/shlib/
  libNDS.so_IDIR  = /usr/shlib/
! libNDS.so_LIBS  = -losiaddr -lc ${_GCC_EXEC_PREFIX_}gnulib
! libNDS.so_LDFLAGS += -export_default libNDS:
  LXFLAGS               = -v
  ndscomp_LIBS  = -losiaddr -ly -ll
  .endif

[10/26/93 public]
Additional changes:

5,7d4
< # Revision 1.1.173.2  93/10/26  8:11:56  zeliff
< #     OT9253: export and install libNDS.so on at386
< # 
75,77d71
< .ifdef (${TARGET_MACHINE} == "AT386")
< EXPLIB_TARGETS        = ${SHARED_LIBRARIES:S/^/export_/g}
< .else
79d72
< .endif
86,89d78
< .ifdef (${TARGET_MACHINE} == "AT386")
< ILIST         += ${SHARED_LIBRARIES}
< .endif
< 

Changed to fix.

[11/8/93 public]



CR Number                     : 9248
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : tst
Short Description             : Possible error in admin test #2
Reported Date                 : 10/23/93
Found in Baseline             : 1.0.3
Found Date                    : 10/23/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b9
Affected File(s)              : test/directory/gds/tst/t.schema/ch_schema2
Sensitivity                   : public

[10/23/93 public]
When running gdsditadm test #2 I encountered the following text in the
t.erg file:

BIND                 elapsed time:     0.0500 sec
**Administration of the Schema:***:
**ADD AT entry (VVW) --->ok***:
**ADD AT entry (TSS) --->ok***:
**ADD AT entry (KKK) --->ok***:
**ADD AT entry (PJN) ---> ok***:
**ADD AT entry (WWW) --->ok***:
**ADD AT entry (PNO) ---> ok***:
**ADD AT entry (SE) --->ok***:
**ADD AT entry (PJS) --->ERROR(Wrong input for lower/upper bound !)***:
**ADD AT entry (PJS) ---> ok***:
                                                                           
ERROR:
Invalid Directory-ID !
To continue press <CR> !

This was found using two configurations: M1(486) & M2(UX), and M1(UX) &
M2(486).

[10/26/93 public]
Problem reproduced again with binaries from nightly build of 10/25.
Priority bumped.

[10/26/93 public]
Fixed in submission of 10/26.

[11/8/93 public]



CR Number                     : 9237
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : DSA
Short Description             : DSA handles PSAP-Addresses in access points wrong
Reported Date                 : 10/22/93
Found in Baseline             : 1.0.3
Found Date                    : 10/22/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : gds/dsa/d26refis.c
Sensitivity                   : public

[10/22/93 public]
There are problems with the byteordering in the PSAP address in 
access points. To solve that you have to have a machine independent 
handling.
			(Jochen Keutel)

[10/22/93 public]
Fixed : Jochen Keutel

[11/8/93 public]



CR Number                     : 9236
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 9197
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : 
Short Description             : memory leaks in c and s stubs
Reported Date                 : 10/22/93
Found in Baseline             : 1.0.3b7
Found Date                    : 10/22/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : gds/asn1/*, gds/ros/*
Sensitivity                   : public

[10/22/93 public]

See ticket 9197 for test program. When this program is
run form a shell while loop, one can see that the gdscstub process
on the host where the test program runs and the gdsstub process at the
site of the DSA grow at constant rates; indicating memory leaks in both.

[10/22/93 public]
We have found the memory leaks two months ago. We have spent a lot of time
to fix that. All code changes are in the latest SNI code drop. We are
sure that C-Stub and S-Stub will work no without growing.

[11/8/93 public]



CR Number                     : 9234
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : ros
Short Description             : rostest: unresolved symbols
Reported Date                 : 10/22/93
Found in Baseline             : 1.0.3
Found Date                    : 10/22/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : test/directory/gds/ros/testenv/Makefile
Sensitivity                   : public

[10/22/93 public]
In test/directory/gds/ros/testenv/adm:

Unresolved symbols while linking rostest:

c89      
	-z 
	-Wl,
	-Bimmediate,
	-Bnonfatal,
	-a,default,+b,/lib:/usr/lib    
	-L.
	-L/u3/devobj/sb/nb_ux/src/test/directory/gds/ros/testenv
	-L/project/dce/build/dce1.0.3-snap/src/test/directory/gds/ros/testenv
	-L/u3/devobj/sb/nb_ux/export/hp800/usr/shlib 
	-L/project/dce/build/dce1.0.3-snap/export/hp800/usr/shlib
	-L/usr/shlib 
	-L/u3/devobj/sb/nb_ux/export/hp800/usr/lib
	-L/project/dce/build/dce1.0.3-snap/export/hp800/usr/lib   
	-o rostest.X lundtpdu.o nameserv.o  
	-lrom 
	-lroa 
	-lros
	-loss 
	-lxti  
	-ld27 
	-losiaddr 
	-ldce    
/bin/ld: Unsatisfied symbols:
   sigset (code)
   nds_map_addrinfo (code)
*** Error code 1

[10/22/93 public]
Fixed : Jochen Keutel

[10/26/93 public]
Closed.



CR Number                     : 9232
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : tst
Short Description             : Not all t.dsa files are installed
Reported Date                 : 10/21/93
Found in Baseline             : 1.0.3
Found Date                    : 10/21/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : see below
Sensitivity                   : public

[10/21/93 public]

In test/directory/gds/t.dsa

The following files are not installed during the build.  These files are
required by gdsditadm test #1.

t.adddme.01
t.deldme.01
t.dispdme.01
t1.mdl1addobj
t1.mdl5addatt
t1.mdl6rematt
t1.mdl7addval
t1.mdl7delval
t1.mdl7modsub
t1.mdl7modval

The following file isn't installed either but it's not clear whether it's
needed by anything:

script

[10/21/93 public]
Fixed: Jochen Keutel

[11/8/93 public]



CR Number                     : 9206
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : 
Short Description             : some gds processes still link libdce on HP
Reported Date                 : 10/20/93
Found in Baseline             : 1.0.3
Found Date                    : 10/20/93
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b8
Affected File(s)              : adm/delupd/Makefile
					     adm/usradmin/Makefile
					     osiadr/Makefile
					     oss/prod/Makefile
Sensitivity                   : public

[10/20/93 public]

On HP800 the rules define ${TARGET_MACHINE}_LIBS as "-ldce". That means
that all processes that do not have a line <process>_LIBS=... or
LIBS=... link the libdce. gds does not want to link libdce. So the
Makefiles mentioned above have to change.
						(Jochen Keutel)

[10/21/93 public]
Fix submitted 10/20, yet to be verified.

[11/10/93 public]



CR Number                     : 9204
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : gds
Subcomponent Name             : nds
Short Description             : Link failure on ndscomp
Reported Date                 : 10/20/93
Found in Baseline             : 1.0.3
Found Date                    : 10/20/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : stuff
Sensitivity                   : public

[10/20/93 public]
ndscomp fails to link due to unresolved symbol:

/project/dce/build/dce1.0.3-snap/tools/at386/macho/gcc 
	-B/project/dce/build/dce1.0.3
	-snap/tools/at386/macho/  
	-%ld," -warn_nopic -glue"         
	-L/u1/devobj/sb/nb_486/export/at386/usr/lib 
	-L/project/dce/build/dce1.0.3-snap/export/at386/usr/lib 
	-L/u1/devobj/sb/nb_486/export/at386/usr/shlib 
	-L/project/dce/build/dce1.0.3-snap/export/at386/usr/shlib 
	-L/usr/shlib 
	-L/u1/devobj/sb/nb_486/export/at386/usr/lib     
	-L/project/dce/build/dce1.0.3-snap/export/at386/usr/lib   
	-o ndscomp.X y.tab.o lex.yy.o ndscompup.o ndsreg1.o ndslog1.o
		gnu_regex1.o
	-losiaddr 
	-ly 
	-ll
  
y.tab.o: Undefined symbol "_yylineno" referenced

collect: /project/dce/build/dce1.0.3-snap/tools/at386/macho/real-ld
returned 1 exit status

[10/20/93 public]
Fixed.

[10/21/93 public]
Closed.



CR Number                     : 9203
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : gds
Subcomponent Name             : nds
Short Description             : libNDS export to wrong directory
Reported Date                 : 10/20/93
Found in Baseline             : 1.0.3
Found Date                    : 10/20/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : directory/gds/nds/Makefile
Sensitivity                   : public

[10/20/93 public]
libNDS.a is exported to 'shlib' rather than 'lib,' which causes linkage
failures for gdscstub and gdssstub.

[10/21/93 public]
Closed.



CR Number                     : 9202
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : ros
Short Description             : Syntax error in ros Makefile
Reported Date                 : 10/20/93
Found in Baseline             : 1.0.3
Found Date                    : 10/20/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : directory/gds/ros/step/Makefile
Sensitivity                   : public

[10/20/93 public]
	directory/gds/ros/step/Makefile", line 56:
		 Malformed conditional (${TARGET_MACHINE}=="AT386"))

[10/21/93 public]
Closed.



CR Number                     : 9199
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : xds tests
Short Description             : XDS tests build problems
Reported Date                 : 10/19/93
Found in Baseline             : 1.0.3b8
Found Date                    : 10/19/93
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.0.3
Affected File(s)              : stuff
Sensitivity                   : public

[10/19/93 public]

There are several problems with the latest test/directory/xds Makefiles
and/or test scripts:


1.  The new threadsafe tests, 
       test/directory/xds/tests.{xds,xom,switch}/threads_* 
directories are not being moved to the object tree, on any platform.
They should be added to the DATAFILES rules in the Makefiles.

2.  There are no Testcases lists in the threads_* tests, which means they
have to be started by hand.

3.  test/directory/xds/tests.xds/valid/{add_entry34v, read41v} 
                                 invalid/{add_entry15i, add_entry16i}          
appear in 
Testcases:

[1]:  Func xt_opent : error opening input Test Case file - read41v

[1]:  Func xt_rtest : error opening input Test Case file - read41v

[1]:  Func xt_main : error reading testcase

[1]:  Exiting program

but are not moved into the object tree by the Makefile ( and indeed,
they do not appear in DATAFILES = ).  They appear to be new tests,
so they should  be added to DATAFILES.

[11/8/93 public]



CR Number                     : 9197
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : 
Short Description             : C-Stub handles errors poorly (read: exits)
Reported Date                 : 10/19/93
Found in Baseline             : 1.0.3
Found Date                    : 10/19/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b2
Affected File(s)              : src/directory/gds/stub/?
Sensitivity                   : public

[10/19/93 public]

Customer reported this problem at 1.0.2, I have since demonstrated that
problem still exists at 1.0.3b7.

An HP, running DCE 1.0.3b7 DCE core servers was configured as a GDS
client/server machine (Directory 1 only),

A RIOS DCE(1.0.3b7) client of the HP machine was configured as a GDS
client of the GDS client/server system running on the HP system.

The country object "us" was added to the default DSA.

The following program was compiled and repeatedly executed from the
RIOS/GDS client machine as follows:

while :
> do
> ./test
> done

A stream of the following messages (one for each execution of the
test program) were written to the screen.

ds_read() successful

In another window on the same RIOS/GDS client machine, a second
repeated execution of the program was started. In a short while
(10 or less output lines), the gdscstub process on the client machine
died, and errors like the following started to be output by the two
client programs

Error: ds_read() failed
Error: ds_bind() returned error 48

In at least one experiment here at OSF, and according to the initial report
from the customer, the gdssstub(server stub) also died at the GDS server
machine. 

In a subsequent test, a second RIOS was configured as a GDS client
of the HP, and a repeated execution of the test program at the same time
on the two RIOS GDS client machines was shown not to lead to any failures.

Program (gdstest.c) follows:

#include <stdio.h>
#include "xom.h"
#include "xds.h"
#include "xdsbdcp.h"

OM_EXPORT(DS_A_COUNTRY_NAME)

OM_EXPORT(DS_C_AVA)
OM_EXPORT(DS_C_DS_DN)
OM_EXPORT(DS_C_DS_RDN)
OM_EXPORT(DS_C_ENTRY_INFO_SELECTION)

main()
{
        OM_return_code omStatus;
        DS_status dsStatus;
        OM_workspace workspace;
        OM_private_object session;
        OM_private_object result;
        OM_sint invoke_id;

        DS_feature bdcp_package[] = {
                {OM_STRING(OMP_O_DS_BASIC_DIR_CONTENTS_PKG), OM_TRUE},
                {{(OM_uint32) 0, (void *) 0}, OM_FALSE},
        };

        OM_descriptor selection[] = {
                OM_OID_DESC(OM_CLASS, DS_C_ENTRY_INFO_SELECTION),
                {DS_ALL_ATTRIBUTES, OM_S_BOOLEAN, {OM_FALSE, NULL}},
                OM_OID_DESC(DS_ATTRIBUTES_SELECTED, DS_A_COUNTRY_NAME),
                {DS_INFO_TYPE, OM_S_ENUMERATION, {DS_TYPES_AND_VALUES,NULL}},
                OM_NULL_DESCRIPTOR
        };

        OM_descriptor country[] = {
                OM_OID_DESC(OM_CLASS, DS_C_AVA),
                OM_OID_DESC(DS_ATTRIBUTE_TYPE, DS_A_COUNTRY_NAME),
                {DS_ATTRIBUTE_VALUES, OM_S_PRINTABLE_STRING,OM_STRING("us")},
                OM_NULL_DESCRIPTOR
        };

        OM_descriptor rdn1[] = {
                OM_OID_DESC(OM_CLASS, DS_C_DS_RDN),
                {DS_AVAS, OM_S_OBJECT, {0, country}},
                OM_NULL_DESCRIPTOR
        };

        OM_descriptor name[] = {
                OM_OID_DESC(OM_CLASS, DS_C_DS_DN),
                {DS_RDNS, OM_S_OBJECT, {0, rdn1}},
                OM_NULL_DESCRIPTOR
        };

        if ((workspace=ds_initialize()) == NULL) {
                fprintf(stderr, "Error: ds_initialize() failed\n");
                exit(-1);
        }

        if ((dsStatus = ds_version(bdcp_package, workspace)) != DS_SUCCESS)
{
                handleDSError("ds_version()", dsStatus);
                exit(-1);
        }

        if ((dsStatus = ds_bind(DS_DEFAULT_SESSION, workspace, &session))!=                                                                DS_SUCCESS)
{
                handleDSError("ds_bind()", dsStatus);
                exit(-1);
        }

        if (ds_read(session, DS_DEFAULT_CONTEXT, name, selection,
                                        &result, &invoke_id) != DS_SUCCESS)
{
                fprintf(stderr, "Error: ds_read() failed\n");
        } else {
                printf("ds_read() successful\n");
        }

        if ((dsStatus = ds_unbind(session)) != DS_SUCCESS)
                handleDSError("ds_unbind()", dsStatus);

        if ((omStatus = om_delete(session)) != OM_SUCCESS)
                handleOMError(omStatus);

        if ((dsStatus = ds_shutdown(workspace)) != DS_SUCCESS)
                handleDSError("ds_unbind()", dsStatus);
}


handleDSError(header, returnCode)
char *header;
DS_status returnCode;
{
        OM_type includeDSProblem[] = {DS_PROBLEM, 0};
        OM_return_code omStatus;
        OM_public_object problem;
        OM_value_position total;

        omStatus = om_get(returnCode,
                        OM_EXCLUDE_ALL_BUT_THESE_TYPES+OM_EXCLUDE_SUBOBJECTS,
                        includeDSProblem,
                        OM_FALSE,
                        OM_ALL_VALUES,
                        OM_ALL_VALUES,
                        &problem,
                        &total );

        if ((omStatus == OM_SUCCESS) && (total > 0))
                fprintf(stdout, "Error: %s returned error %d\n", header,
                                        problem->value.enumeration);
        else
                fprintf(stdout, "Error: %s failed for unknown reason\n",header);

        if ((omStatus = om_delete((OM_object) returnCode)) != OM_SUCCESS)
                handleOMError(omStatus);
}

handleOMError(return_code)
OM_return_code return_code;
{
        fprintf(stdout, "Error: OM error %d has occurred\n", return_code);
}

Makefile:

#
# Makefile for multiple client test case
#
# Compile on RIOS to run on rios client or client/server gds installation.
#

CC= cc
DFLAGS= -g
IFLAGS= -I/usr/include -I/usr/include/dce

CFLAGS= -c -Dunix -D_ALL_SOURCE -D_CMA_NOWRAPPERS_ -D_ALL_SOURCE -DAIX32 ${DFLAGS} ${IFLAGS}

LIBS= -ldce

OFILES= gdstest.o

default: all

all: test

test: ${OFILES}
        ${CC} ${OFILES} -o test ${LIBS}

[10/20/93 public]
I think this may be fixed.  Ron, please try to reproduce the problem with
any build later than 10/20.  Say, the next weekly, b9.  If the problem
re-occurs please re-assign it to me.

[10/20/93 public]
I'm flattered in your confidence in me, but never before have I been made
responsible for verifying the resolution of a defect. We find them, or 
pass them on from our customers (after checking them out), but basically,
that's as far as we run with them. I'll help where I can, but I think
someone else must be responsible for seeing that this problem is fixed.

[10/22/93 public]
I have tested it with a client-only configuration on a RIOS and
the corrosponding server on a HP. I took the newest code of gds.
I have run the test from three different windows - without any
problems.
So this problem is fixed by the latest SNI code drop.

[10/24/93 public]
Don't shoot the messenger!

I hate to be the one to say it, but this isn't in the books yet.  I didn't
have a RIOS to use, but I set up the XDS functional testing config  on two
HP's -> DSA 1 on machine 1 is an intial DSA , and DSA 1 on machine 2 has 
the root copied from machine 1.  I added the country "us" to the DSA, and
ran the tester to verify that it got a successful read; it did.  Then I 
started the tester in a loop on machine 2, and saw it succeed a number of
times.  I then started another tester in a loop, and within 30 seconds, 
the Cstub was gone.  No core dump, but there was '.l1' file in the 
/opt/dcelocal/var/adm/directory/gds/adm directory.  I then bounced the
administration (ie:d-actvate/activate), and tried again.  This time, 
I watched both tester loops succeed for a few minutes!  I then logged out
to use the phone.  When I logged back in, I started a couple of tester
loops again.  Within a minute, the C-stub was again gone, leaving the 
'.l1' file again (so there might be some relation ship to DSA activity).  I ran gdstep  on the .l1 file. but it said nothing
(to me anyway.)  I am putting the '.l1' file in the AFS cell at 
/afs/dce/project/dce/osf/mhickey/9197_cstub.l1.

[10/25/93 public]
The latest news is as follows:

  The defect has been reproduced by me at about 10:00 this morning, and by 
Jochen Keutal (logged into my systems) a bit later.  At no time has this 
defect occurred when tracing was turned on (we couldn't be THAT lucky).
Jochen is now building a debug version of the Cstub, which he will try to 
use to catch the print to the log that occurs when the C-stub exits. Though
the print contains not useful information, hopefully we can get a stack
trace that will point at the problem.

[11/08/93 public]
The description, priority, severity, responsible engineer/company have been
changed due to the work done on this defect.  It is defenitely NOT the case
that the C-Stub exits if two XDS xclients are run on the same machine.

The following has been done to deal with this defect:
  1. C-Stubs created and used that provided larger trace files.  The C-stub
     still does not generate useful information.

  2. Attempts to quantify the scenario that produces the C-stub exit. While
     we were unable to establish an exact scenario for the failure, the 
     approximate scenario is to run two applications that use XDS on the 
     same system, kill them, then restart them.  It is possible that
     waiting a minute or so (for the IPC monitor to detect and cleanup any
     unresolved state info) may prevent the problem from ocurring, but this
     is unverified.

The problem that this defect now describes is that the C-Stub does not deal
with errors in a robust manner.  If a state problem is detected from the
stub code, it should be handled (barring some absolutely unrecoverable
error); eg: call the IPC monitor and tell it to clean the state tables or
something.

[01/17/94 public]
According to Jochen Keutel, this has been fixed before code freeze
of 1.0.3 .

[2/18/94 public]
Closed.



CR Number                     : 9188
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : 
Short Description             : DME names have to change
Reported Date                 : 10/19/93
Found in Baseline             : 1.0.3
Found Date                    : 10/19/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : xds/h/xdsdme.h, gds/msg/En/d20adm.msg
Sensitivity                   : public

[10/19/93 public]
DME (bill Pope) wants SNI to change the names in the xdsdme.h include file
and to change the first field of the mask for the DME alternate address.

[10/19/93 public]
Fixed : Jochen Keutel

[11/8/93 public]



CR Number                     : 9184
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : xt_test
Short Description             : xt_test lies about results
Reported Date                 : 10/18/93
Found in Baseline             : 1.0.3
Found Date                    : 10/18/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b4
Affected File(s)              : xt_test files
Sensitivity                   : public

[10/18/93 public]
When run in debug mode, the xt_test program reports incorrect numbers of 
threads passed and failed; ie: all threads pass, and the output says they
all failed.

[02/24/93 public]
fixed by code submission at 22.Feb.

[3/14/94 public]
Closed.



CR Number                     : 9148
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : gdscstub
Short Description             : dumps core in Encode_asn1 under stress
Reported Date                 : 10/18/93
Found in Baseline             : 1.0.3b7
Found Date                    : 10/18/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : stuff
Sensitivity                   : public

[10/18/93 public]
I was running the new gds_xds_str_001 system test between two HP-UX systems
as follows:

  testcase gds_xds_str_001_rdsh
           4 threads doing bind - search - unbind
           4 threads doing bind - search - unbind  5 times
           4 threads doing bind - search - unbind  (whole subtree)
           4 threads doing bind - search - unbind  7 times
           3 threads doing bind - read - unbind    10 times
           3 threads doing bind - read - unbind    11 times
           3 threads doing bind - read - unbind    10 times (diff items)
   
This succeeds if run on the system where the DSA being searched/read is 
located, but fails due to C-Stub core-dump if run from a remote system 
accessing the DSA being searched/read.   The stack trace, etc. follows.


r0  00000000 00000002 0004dc43 4000d470 r4  40001420 00000002 7b0332e0
7b0333d0
r8  00000030 00000000 00000000 00000000 r12 40003d38 00000001 00000002
00000000
r16 00000803 40015eb8 00000800 40001000 r20 00000000 00000000 00000000
7b03498c
r24 40019c84 40037c58 00000000 40017230 r28 00000000 40019bd0 7b034490
4001822c
    pc = 00007a64.0004dcb0     priv = 3     psw = jthlnxbCvmrQPDI     sar =
22
        0x0004dc8c   Encode_a+096c   LDH     -54(0,30),20
        0x0004dc90   Encode_a+0970   EXTRS   20,31,16,21
        0x0004dc94   Encode_a+0974   COMIBF,=,N      0,21,Encode_asn1+09a0
        0x0004dc98   Encode_a+0978   LDH     -58(0,30),22
        0x0004dc9c   Encode_a+097c   EXTRS   22,31,16,1
        0x0004dca0   Encode_a+0980   LDW     -68(0,30),31
        0x0004dca4   Encode_a+0984   LDW     4(0,31),20
        0x0004dca8   Encode_a+0988   LDH     -60(0,30),21
        0x0004dcac   Encode_a+098c   EXTRS   21,31,16,22
 >      0x0004dcb0   Encode_a+0990   LDHX,S  22(0,20),31
        0x0004dcb4   Encode_a+0994   EXTRS   31,31,16,20
        0x0004dcb8   Encode_a+0998   COMBT,< 1,20,Encode_asn1+0814
        0x0004dcbc   Encode_a+099c   OR      0,0,0
        0x0004dcc0   Encode_a+09a0   LDW     -164(0,30),21
        0x0004dcc4   Encode_a+09a4   LDW     0(0,21),22
        0x0004dcc8   Encode_a+09a8   COMIBT,=,N      0,22,Encode_asn1+09bc
        0x0004dccc   Encode_a+09ac   LDW     -164(0,30),1
        0x0004dcd0   Encode_a+09b0   LDW     0(0,1),31
 File: unknown    Procedure: Encode_asn1 + 0x00000990    Line: unknown
  
 1 Encode_asn1 + 0x000002a0 (0x7b034354, 0, 0x30, 0x7b0333d0)
 2 r4_4A0_encodeASN1 + 0x00000308 (0x4000d470, 0x40018100, 0x7b034284,
0x7b034288)
 3 r4_405_ppmFormat + 0x00000e14 (0x40039d30, 0x4002d350, 0x40020340,
0x3f9)
 4 r4_215_rosSendEvent + 0x000003f4 (0, 0x7b034180, 0x4001d800, 0x4)
 5 r6_224_dispatcher + 0x000001c0 (0x40039d30, 0, 0x7b033f94, 0x7b03410c)
 6 r4_210_send + 0x00000270 (0x4001654a, 0xcb, 0x40039d30, 0x7b033f94)
 7 r6_100_roexif + 0x00004710 (0x40000001, 0x7b033ea8, 0x400055d4,
0x7b033ecc)
 8 r_rjurq + 0x00000040 (0x7b033ea8, 0x4001c268, 0x4001c260, 0x7b033ecc)
 9 d25_rorjurq + 0x00000098 (0x7b033e1c, 0xb, 0x5, 0x1)
10 d25_exec_actions + 0x00000304 (0x7b033590, 0x7b0335c8, 0x46000000, 0)
11 d25_evmgt + 0x000002e8 (0x400172f0, 0, 0x7b0334dc, 0x400011f4)
        12 main + 0x000008a0 (0x2, 0x7b0332d4, 0, 0)

[10/19/93 public]
Canceled. Use the code from last SNI submission.

[10/19/93 public]

Sorry, Norbert, but we haven't tested that yet.  We can't cancel bugs
because we THINK it's going to work with a new drop.  Re-opened.

[11/10/93 public]



CR Number                     : 9127
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : ./test/directory/gds/ros/testenv
Short Description             : No such file or directory for
libros.a
Reported Date                 : 10/15/93
Found in Baseline             : 1.0.3
Found Date                    : 10/15/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b8
Affected File(s)              : stuff
Sensitivity                   : public

[10/15/93 public]

unable to link to libros.a in the test/directory/gds/ros/testenv
No such file or directory for cgetext.o

/project/dce/build/dce1.0.3-snap/src/test/systest/directory/gds/dcegdshd/view_obj.c:In function `fill_in_strings':
/project/dce/build/dce1.0.3-snap/src/test/systest/directory/gds/dcegdshd/view_obj.c:566:`OM_element_position' undeclared (first use this function)
/project/dce/build/dce1.0.3-snap/src/test/systest/directory/gds/dcegdshd/view_obj.c:566:(Each undeclared identifier is reported only once
/project/dce/build/dce1.0.3-snap/src/test/systest/directory/gds/dcegdshd/view_obj.c:566:for each function it appears in.)
/project/dce/build/dce1.0.3-snap/src/test/systest/directory/gds/dcegdshd/view_obj.c:566:parse error before `length'

install_tests failed:
release: lstat rostest: No such file or directory
/u1/devobj/sb/nb_486/src/../install/at386/dcetest/dce1.0/test/directory/gds/ros/testenv/rostest:aborting installation
make: don't know how to make adrmgr (continuing)

[ /test/systest/directory/gds/dcegdshd at 01:47 (AM) Friday ]
makepath dcegdshd/. && cd dcegdshd &&  exec make MAKEFILE_PASS=BASIC
install_all
make: don't know how to make view_obj (continuing)

[10/15/93 public]

The build error in the dcegdshd system test was caused by a change to
xom.h (See Below).  If we are not supposed to use OM_element_position
please let us know what we should use instead.

pellis@brandy(163) diff xom.h /project/dce/build/dce1.0.3/src/directory/xom/h
10a11,17
>  * Revision 1.1.75.1  1993/10/14  19:24:14  keutel
>  *    October 1993 code drop
>  *    [1993/10/14  19:23:02  keutel]
>  *
>  *    October 1993 code drop
>  *    [1993/10/11  10:24:00  keutel]
>  *
14c21
<  *
---
>  * 
43c50
< static char xom_rcsid[] = "@(#)$Id: c009127,v 1.4 94/03/15 15:24:46 nata Exp $";
---
> static char xom_rcsid[] = "@(#)$Id: c009127,v 1.4 94/03/15 15:24:46 nata Exp $";
106,109d112
< 
< /* Element Position */
< 
< typedef OM_uint32 OM_element_position;

[10/22/93 public]
Closed.



CR Number                     : 9126
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : gds
Subcomponent Name             : /directory/gds/ros/Product/Sources
Short Description             : roexif.c:parse error before `VERNR'
Reported Date                 : 10/15/93
Found in Baseline             : 1.0.3
Found Date                    : 10/15/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : stuff
Sensitivity                   : public

[10/15/93 public]

AT386 nightly build failed with the following errors:

[ /directory/gds/ros/Product/Sources at 21:15 (PM) Thursday ]
makepath Sources/. && cd Sources &&  exec make MAKEFILE_PASS=THIRD
build_all
Sources: created directory
/project/dce/build/dce1.0.3-snap/src/directory/gds/ros/Product/Sources/roexif.c
/project/dce/build/dce1.0.3-snap/src/directory/gds/ros/Product/Sources/roexif.c:133:warning: `FD_SETSIZE' redefined
/usr/include/sys/types.h:348: warning: this is the location of the previous
definition
/project/dce/build/dce1.0.3-snap/src/directory/gds/ros/Product/Sources/roexif.c:114:parse error before `VERNR'
*** Error code 1 (continuing)
/project/dce/build/dce1.0.3-snap/src/directory/gds/ros/Product/Sources/rodpat.c:149:parse error before `VERNR
/project/dce/build/dce1.0.3-snap/src/directory/gds/ros/Product/Sources/rodpat.c:149:parse error before `VERNR'
/project/dce/build/dce1.0.3-snap/src/directory/gds/ros/Product/Sources/rodpat.c:In function `r4_202_provideBuffer':
/project/dce/build/dce1.0.3-snap/src/directory/gds/ros/Product/Sources/rodpat.c:1696:warning: assignment makes pointer from integer without a cast
/project/dce/build/dce1.0.3-snap/src/directory/gds/ros/Product/Sources/rodpat.c:In function `r4_211_receive':
/project/dce/build/dce1.0.3-snap/src/directory/gds/ros/Product/Sources/rodpat.c:2409:warning: assignment makes pointer from integer without a cast
/project/dce/build/dce1.0.3-snap/src/directory/gds/ros/Product/Sources/rodpat.c:In function `r4_212_getEsps':
/project/dce/build/dce1.0.3-snap/src/directory/gds/ros/Product/Sources/rodpat.c:2693:warning: assignment makes pointer from integer without a cast
/project/dce/build/dce1.0.3-snap/src/directory/gds/ros/Product/Sources/rodpat.c:2734:warning: assignment makes pointer fro
m integer without a cast
/project/dce/build/dce1.0.3-snap/src/directory/gds/ros/Product/Sources/rodpat.c:In function `r4_215_rosSendEvent':
/project/dce/build/dce1.0.3-snap/src/directory/gds/ros/Product/Sources/rodpat.c:3086:warning: assignment makes pointer from integer without a cast
*** Error code 1 (continuing)
/directory/gds/ros/Product/Sources/roseif.c:116:parse error before `VERNR'
/directory/gds/ros/Product/Sources/roxppm.c:156:parse error before `VERNR'
/directory/gds/ros/Product/Sources/roende.c:246:parse error before `VERNR'
/directory/gds/ros/Product/Sources/roxmsk.c:103:parse error before `VERNR'
/directory/gds/ros/Product/Sources/roropm.c:103:parse error before `VERNR'
/directory/gds/ros/Product/Sources/routil.c:108:parse error before `VERNR'
/directory/gds/ros/Product/Sources/rozpdu.c:189:parse error before `VERNR'
/directory/gds/ros/Product/Sources/routil2.c:122: parse err\or before `VERNR'

/directory/gds/ros/Product/Sources/roxppm.c:156: parse error before `VERNR'
/directory/gds/ros/Product/Sources/roapma.c:94: parse error before `VERNR'
/directory/gds/ros/Product/Sources/roppm05.c:137:routilex.h: No such file
or directory 
/directory/gds/ros/Product/Sources/roppm05.c:138:roppm10.h: No such file or
directory 
 and so on......

INSTALL:
[ /directory/gds/osiadr at 23:00 (PM) Thursday ]
makepath osiadr/. && cd osiadr &&  exec make MAKEFILE_PASS=BASIC
install_all
release   -o bin -g bin -m 755 -tostage
/u1/devobj/sb/nb_486/install/at386/opt/dce1.0 -fromfile gdsgennsap
/bin/gdsgennsap
/bin/gdsgennsap: copying from gdsgennsap
/bin/gdsgennsap: owner bin, group bin, mode 0755
/bin/gdsgennsap: installing as
/u1/devobj/sb/nb_486/install/at386/opt/dce1.0/bin/gdsgennsap
./gdsgennsap dummy nsapform.cfg
ERROR(954):
        (IDP format Name = 'TELEX_D')
                (DSP format Name = 'RFC1006')
                        (DSP part Flags = '5')
        Flag value ('5') unknown
ERROR(666):
        (IDP format Name = 'TELEX_D')
                (DSP format Name = 'RFC1006')
                        (DSP Part Flags = '5')
        Flags specified in the DSP part field are not allowed
ERROR(450):DSP_PART ABNORMAL EXIT >>>>

BUILD
[ /directory/gds/oss/prod at 21:43 (PM) Thursday ]

/project/dce/build/dce1.0.3-snap/tools/at386/macho/gcc: unrecognized option
`-KPIC'
/project/dce/build/dce1.0.3-snap/src/directory/gds/oss/prod/cmx2k.c:168:
dlfcn.h: No such file or directory
*** Error code 1 (continuing)

In file included from
/project/dce/build/dce1.0.3-snap/src/directory/gds/oss/prod/cmx_tlv.c:39:
/project/dce/build/dce1.0.3-snap/src/directory/gds/oss/prod/cmx_tlv.h:38:
redefinition of `uchar'
/usr/include/sys/types.h:316: `uchar' previously declared here
*** Error code 1 (continuing)

/project/dce/build/dce1.0.3-snap/tools/at386/macho/gcc: unrecognized option \
`-KPIC'
/project/dce/build/dce1.0.3-snap/src/directory/gds/oss/prod/cmxinup.c:100:
sys/filio.h: No such file or directory
*** Error code 1 (continuing)

/project/dce/build/dce1.0.3-snap/tools/at386/macho/gcc: unrecognized option \
`-KPIC'
/project/dce/build/dce1.0.3-snap/src/directory/gds/oss/prod/cmxtrace.c:89:
sys/select.h: No such file or directory
*** Error code 1 (continuing)

/project/dce/build/dce1.0.3-snap/tools/at386/macho/gcc: unrecognized option \
`-KPIC'
/project/dce/build/dce1.0.3-snap/src/directory/gds/oss/prod/cmxxad.c:48:
sys/select.h: No such file or directory
/project/dce/build/dce1.0.3-snap/src/directory/gds/oss/prod/cmxxad.c:51:
dlfcn.h: No such file or directory
*** Error code 1 (continuing)

/project/dce/build/dce1.0.3-snap/tools/at386/macho/gcc: unrecognized option \
`-KPIC'
/project/dce/build/dce1.0.3-snap/src/directory/gds/oss/prod/cmxxrd.c:78:
sys/select.h: No such file or directory
*** Error code 1 (continuing)

/project/dce/build/dce1.0.3-snap/tools/at386/macho/gcc: unrecognized option \
`-KPIC'
/project/dce/build/dce1.0.3-snap/src/directory/gds/oss/prod/cmxxti.c:84:
sys/select.h: No such file or directory
*** Error code 1 (continuing)

/project/dce/build/dce1.0.3-snap/tools/at386/macho/gcc: unrecognized option \
`-KPIC'
/project/dce/build/dce1.0.3-snap/src/directory/gds/oss/prod/cmxxup.c:75:
sys/select.h: No such file or directory
*** Error code 1 (continuing)

/project/dce/build/dce1.0.3-snap/tools/at386/macho/gcc: unrecognized option \
`-KPIC'
/project/dce/build/dce1.0.3-snap/src/directory/gds/oss/prod/cmxl.c:129:
sys/select.h: No such file or directory
*** Error code 1 (continuing)

/project/dce/build/dce1.0.3-snap/tools/at386/macho/gcc: unrecognized option \
`-KPIC'
/project/dce/build/dce1.0.3-snap/src/directory/gds/oss/prod/cmxlup.c:100:
sys/select.h: No such file or directory
*** Error code 1 (continuing)

[ /directory/gds/nds at 21:48 (PM) Thursday ]

/project/dce/build/dce1.0.3-snap/src/directory/gds/AT386/nds/ndsreg.c: In \
function `nds_regcomp':
/project/dce/build/dce1.0.3-snap/src/directory/gds/AT386/nds/ndsreg.c:76:
structure has no member named `__c_re_end'
/project/dce/build/dce1.0.3-snap/src/directory/gds/AT386/nds/ndsreg.c:77:
structure has no member named `__c_re'
/project/dce/build/dce1.0.3-snap/src/directory/gds/AT386/nds/ndsreg.c:80:
structure has no member named `__c_re'
/project/dce/build/dce1.0.3-snap/src/directory/gds/AT386/nds/ndsreg.c:81:
structure has no membucture has no member named `__c_re'
/project/dce/build/dce1.0.3-snap/src/directory/gds/AT386/nds/ndsreg.c:106:
structure has no member named `__c_re_end'
/project/dce/build/dce1.0.3-snap/src/directory/gds/AT386/nds/ndsreg.c:106:
structure has no member named `__c_re'
/project/dce/build/dce1.0.3-snap/src/directory/gds/AT386/nds/ndsreg.c:107:
structure has no member named `__c_buf_end'
/project/dce/build/dce1.0.3-snap/src/directory/gds/AT386/nds/ndsreg.c:107:
structure has no member named `__c_re'
*** Error code 1 (continuing)
`build_all' not remade because of errors.

ndsreg1.c: In function `nds_regcomp':
ndsreg1.c:76: structure has no member named `__c_re_end'
ndsreg1.c:77: structure has no member named `__c_re'
ndsreg1.c:80: structure has no member named `__c_re'
ndsreg1.c:81: structure has no member named `__c_re_end'
ndsreg1.c:82: structure has no member named `__c_buf_end'
ndsreg1.c:83: structure has no member named `__c_buf_end'
ndsreg1.c:83: structure has no member named `__c_re'
ndsreg1.c:84: structure has no member named `__c_re'
ndsreg1.c: In function `nds_regex':
ndsreg1.c:104: structure has no member named `__c_re'
ndsreg1.c:105: structure has no member named `__c_re'
ndsreg1.c:106: structure has no member named `__c_re_end'
ndsreg1.c:106: structure has no member named `__c_re'
ndsreg1.c:107: structure has no member named `__c_buf_end'
ndsreg1.c:107: structure has no member named `__c_re'
*** Error code 1 (continuing)

./ndscomp
/project/dce/build/dce1.0.3-snap/src/directory/gds/AT386/nds/NDSCONF.dat
./ndscomp: not found
*** Error code 1 (continuing)
`build_all' not remade because of errors.

[ /directory/gds/ros/step at 22:14 (PM) Thursday ]

/project/dce/build/dce1.0.3-snap/tools/at386/macho/gcc \
-B/project/dce/build/dce1.0.3-snap/tools/at386/macho/  -%ld," -warn_nopic \
-glue" -L/u1/devobj/sb/nb_486/export/at386/usr/shlib \
-L/project/dce/build/dce1.0.3-snap/export/at386/usr/shlib -L/usr/shlib \
-L/u1/devobj/sb/nb_486/export/at386/usr/lib \
-L/project/dce/build/dce1.0.3-snap/export/at386/usr/lib   -o gdsstep.X\
dmy.o ros_log.o iros_prt.o wrtfnct.o wrtevnt.o  wrtutil.o irs_lgc.o \
ros_pm.o acse_pm.o pres_pm.o d27loga.o  -ldce
/usr/ccs/lib/crt0.o: Undefined symbol "_main" referenced
ros_log.o: Undefined symbol "_rosllevel" referenced
d27loga.o: Undefined symbol "_d22_printmsg" referenced

collect: /project/dce/build/dce1.0.3-snap/tools/at386/macho/real-ld
returned 1 exit status
*** Error code 1 (continuing)
`build_all' not remade because of errors.

[ /directory/gds/stub at 22:15 (PM) Thursday ]

/project/dce/build/dce1.0.3-snap/tools/at386/macho/gcc \
-B/project/dce/build/dce1.0.3-snap/tools/at386/macho/  -%ld," -warn_nopic \
-glue" -L/u1/devobj/sb/nb_486/export/at386/usr/shlib \
-L/project/dce/build/dce1.0.3-snap/export/at386/usr/shlib -L/usr/shlib \
-L/u1/devobj/sb/nb_486/export/at386/usr/lib \
-L/project/dce/build/dce1.0.3-snap/export/at386/usr/lib   -o gdscstub.X \
d24stub.o d24uaction.o d24iaction.o  d24aaction.o d24conv.o d24signal.o \
d25cup.o d25raction.o d25ievent.o d25revent.o d25evmgt.o   -ld23 -ld24asn \
-ld2aasn -lros -lshth -loss -losiaddr -ld27 -lDUA -lids -lasn1 -lm -ldua \
-lxti -lNDS
ld: No such file or directory for libros.a
collect: /project/dce/build/dce1.0.3-snap/tools/at386/macho/real-ld
returned 1 exit status
*** Error code 1 (continuing)

/project/dce/build/dce1.0.3-snap/tools/at386/macho/gcc \
-B/project/dce/build/dce1.0.3-snap/tools/at386/macho/  -%ld," -warn_nopic \
-glue" -L/u1/devobj/sb/nb_486/export/at386/usr/shlib \
-L/project/dce/build/dce1.0.3-snap/export/at386/usr/shlib -L/usr/shlib \
-L/u1/devobj/sb/nb_486/export/at386/usr/lib \
-L/project/dce/build/dce1.0.3-snap/export/at386/usr/lib   -o gdssstub.X \
d25stub.o  d25conv.o d25uaction.o d25iaction.o d25cup.o  d25raction.o \
d25ievent.o d25revent.o d25evmgt.o d25signal.o -ld23 -lros -lshth  -loss \
-losiaddr -ld27 -lDUA -lids -lasn1 -lm -lxti -lNDS
ld: No such file or directory for libros.a
collect: /project/dce/build/dce1.0.3-snap/tools/at386/macho/real-ld
returned 1 exit status
*** Error code 1 (continuing)
`build_all' not remade because of errors.

INSTALL

Similar complaints for:

	directory/gds/oss/prod
	directory/gds/nds
	directory/gds/ros/step
	directory/gds/stub

[10/20/93 public]
Closed.

[10/29/93 public]
Notify me .



CR Number                     : 9122
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : gds
Subcomponent Name             : dce_config
Short Description             : libNDS.so doesn't get installed
Reported Date                 : 10/14/93
Found in Baseline             : 1.0.3
Found Date                    : 10/14/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b8
Affected File(s)              : config/dce_config
Sensitivity                   : public

[10/14/93 public]

Looking at the new dce_config code to install libNDS:

	- The Makefile in directory/gds/nds installs and exports
	  the library to /usr/lib for all platforms.  For OSF/1,
	  at least, it should export it to /usr/shlib.

	- Dce_config installs this library from $DCESHARED/usr/lib
	  It should use the variable provided for this, SHLIB_RDN
	  Please see libdce install (copy_libdce()) for correct method.

	- On OSF/1 dce_config does not add this shared 
	  library to /etc/lib_admin.conf and run /sbin/lib_admin to install it.

[10/15/93 public]
 Thanks to Tom for the heads-up.   libNDS never existed before, and they 
didn't have a 486/OSF1 machine in Munich before this week, so . . .
anyways, assigned to Rich since this is make/config oriented, and 486, and 
. . .

[10/20/93 public]
Fixed.

[10/21/93 public]



CR Number                     : 9117
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : gds
Short Description             : NFS problems interrupted gds drop
Reported Date                 : 10/14/93
Found in Baseline             : 1.0.3
Found Date                    : 10/14/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : many in gds
Sensitivity                   : public

[10/14/93 public]

The large drop of GDS files was interrupted by NFS problems.  A
resubmission should fix the problem.

[10/15/93 public]

Fixed by SNI's resubmission of GDS files.



CR Number                     : 9102
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : xds/dsPPut.c
Short Description             : dsPPut.c will not compile
under an ANSI compiler
Reported Date                 : 10/13/93
Found in Baseline             : 1.0.3
Found Date                    : 10/13/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : xds/dsPPut.c
Sensitivity                   : public

[10/13/93 public]

Licensee reported:

" Many instances of the PUT_VAL and PUT_VAL_NULL_LENGTH expansions will
 not compile under our ANSI C compiler because they attempt to pass the
 4th parameter as 0.  Since most of the target functions have the 4th
 parameter as a struct containing 2 shorts, this is not legal.  (Yes,
 it will work fine on some implementations, but it's not legal.)

 Since these macros are only used in one function, I modified them to
 pass an initialized static struct instead.
"

My experience of porting DCE to sparc/SunOS also tells me that this is
certain a core dump even if "cc" will not complain.

[10/22/92 public]
fixed : Jochen Keutel

[11/10/93 public]



CR Number                     : 9077
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : gdscstub
Short Description             : gdscstub crashes during XDS
test init script
Reported Date                 : 10/8/93
Found in Baseline             : 1.0.3b16
Found Date                    : 10/8/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : none
Sensitivity                   : public

[10/8/93 public]

When running XDS test initialization scripts, Machine 1 a HPUX,
Machine 2 486/osf1, the Cstub crashes during the running of initXdsM1b.

Here's a stack trace, from XDB:

r0  00000000 00000000 0004a8db 00000000 r4  7b033190 00000002 7b033190
7b033270
r8  00000030 00000000 00000000 00000000 r12 40003d38 00000001 00000002
00000000
r16 00000403 40015214 00000400 0000000d r20 00000000 00000005 80000000
7b033f38
r24 7b0345d8 7b0345e0 00000000 40017230 r28 00000000 4002d27d 7b034630
0004a8db
    pc = 000076be.0004a060     priv = 3     psw = jthlnxbCvmrQPDI     sar =
08
        0x0004a04c   Il_oct  +00a8   LDO     -64(30),30
        0x0004a050   Ev_idx          STW     26,-36(0,30)
        0x0004a054   Ev_idx  +0004   STW     25,-40(0,30)
        0x0004a058   Ev_idx  +0008   STW     24,-44(0,30)
        0x0004a05c   Ev_idx  +000c   LDW     -36(0,30),1
 >      0x0004a060   Ev_idx  +0010   LDH     12(0,1),31
        0x0004a064   Ev_idx  +0014   EXTRS   31,31,16,20
        0x0004a068   Ev_idx  +0018   COMIBF,<=,N     0,20,Ev_idx+005c
        0x0004a06c   Ev_idx  +001c   LDW     -36(0,30),21
        0x0004a070   Ev_idx  +0020   LDH     12(0,21),22


Stack trace:

 0 Ev_idx + 0x00000010 (0, 0x7b0345e0, 0x7b0345d8, 0)
 1 Decode_asn1 + 0x00000138 (0x7b0344e0, 0x7b0344fc, 0x7b03443c,
0x7b033270)
 2 Decode_asn1 + 0x00000eb8 (0x7b034424, 0x7b03443c, 0x7b034458, 0)
 3 Decode_asn1 + 0x000002b4 (0x7b034360, 0x7b03437c, 0x7b0342bc, 0x1)
 4 Decode_asn1 + 0x0000082c (0x7b0342a0, 0x7b0342bc, 0x7b0341fc,
0x7b033270)
 5 Decode_asn1 + 0x00000bc8 (0x7b0341e4, 0x7b0341fc, 0x7b034218,
0x7b034270)
 6 Decode_asn1 + 0x000002b4 (0x7b034120, 0x7b03413c, 0x7b03407c, 0x17)
 8 Decode_asn1 + 0x000002b4 (0x7b033ff0, 0x7b033ff4, 0x7b03002c,
0x7b033ec0)
 9 r4_4A1_decodeASN1 + 0x0000022c (0, 0x40018100, 0x7b033f34, 0x7b033f38)
10 r4_406_ppmParse + 0x000005b0 (0x4001fcb0, 0x4002d350, 0x40020340,
0x7b033ea0)

11 r4_211_receive + 0x00000548 (0x4001654a, 0xffffffff, 0x7b033d30,
0x7b033d34)
12 r6_100_roexif + 0x0000142c (0x1, 0x7b033444, 0x4001c1a8, 0x4001c860)
13 r_cwait + 0x00000040 (0x7b033444, 0x15, 0x46000000, 0)
14 d25_evmgt + 0x00000124 (0x400172f0, 0, 0x7b03337c, 0x400011f4)
15 main + 0x000008a0 (0x2, 0x7b033184, 0, 0)
>

I will try to generate some log files over the weekend, and will put them
out in the cell and send mail so you can find them.

[10/13/93 public]
Without changing the scripts, or anything else, but re-installing from
the nightly build, I ran it and it worked.  XDS tests passed, too.
NFS'd again?  Possibly.  I will continue to investigate as time permits,
but I'm closing this one for now.

[10/18/93 public]
Using a gdscstub from 10/13/93 on an HP-UX, running the dcegdshd system 
test to two HP's and a RIOS, the gdscstub dumped core after about 10 hours
with exactly the same stack a and registers as noted above.  Defect
re-opened.

[10/19/93 public]
Canceled. Use latest code drop from SNI for testing.

[10/19/93 public]

Sorry, Norbert, but we haven't tested that yet.  We can't cancel bugs
because we THINK it's going to work with a new drop.  Re-opened.

[10/20/93 public]

[11/8/93 public]
This was probably a timing problem; you must wait up to one minute after
initializing the cache.



CR Number                     : 9074
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : port_gd
Short Description             : Ambiguous directions in
section 5.5.2
Reported Date                 : 10/7/93
Found in Baseline             : 1.0.3
Found Date                    : 10/7/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : port_gd/5_gds.gpsml
Sensitivity                   : public

[10/7/93 public]
In section 5.5.2 of the Porting Guide, 'Setting Up for Administration
Tests.'

It is unclear that the files referred to in step 12 are the products of
step 11.  These files are CACHE-DATABASE3, CACHE-DATABASE4,
CACHE-DATABASE1.

It is also unclear in step 12 that TEST3-DATABASE1, TEST4-DATABASE1, and
TEST4-CHANGEDB1 are files that have to be saved, as well.

(Basically, step 11 explains how to save GDS cache information.  Step 12
assumes that you have called your saved files specific things.)

[10/18/93 public]

Assigned to writer Doug Weir.

[11/7/93 public]

This is fixed. Added the above clarification to Chapter 5. Essentially
this is a dup of OT 8630.

[11/10/93 public]



CR Number                     : 9069
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : 
Short Description             : new OSI stack and bug fixes
Reported Date                 : 10/7/93
Found in Baseline             : 1.0.3
Found Date                    : 10/7/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b7
Affected File(s)              : About 450 of them
Sensitivity                   : public

[10/7/93 public]

SNI wants to submit the new OSI stack together with bug fixes we
found while testing.



[public]
 They submitted.  Ready for testing. Change to fix.

[11/8/93 public]



CR Number                     : 9062
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : 
Short Description             : cget.h not exported
Reported Date                 : 10/7/93
Found in Baseline             : 1.0.3
Found Date                    : 10/7/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : see below
Sensitivity                   : public

[10/7/93 public]
cget.o is not built because cget.h is not found.  This prevents the
creation of:
	libadmv2ec
	gdscacheadm

Affected directories are:
	cacheadm/admin	
	<TARGET_MACHINE>/cacheadm/admin

[10/7/93 public]
The problem was that cget.h was not submitted to the correct directory.  It
should have been in gds/h/cget.h

[10/8/93 public]
Closed.



CR Number                     : 9061
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gdssysadm -fc -m1 -d1 -c2 -C16 -s1 -u1 -p
Short Description             : The gdssysadm -d1 option gives FATAL ERROR
Reported Date                 : 10/6/93
Found in Baseline             : 1.0.3
Found Date                    : 10/6/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : October code drop
Sensitivity                   : public

[10/6/93 public]

The command:

	gdssysadm -fc -m1 -d1 -c2 -C16 -s1 -u1 -p

gives the error message:

	FATAL ERROR: parameter not allowed (-d1)

The documentation states that the valid values are 1 to 20.

[10/15/93 public]
Assigned to Jochen @ sni.

[10/18/93 public]
Fixed by the 1.0.3 October code drop.

[11/10/93 public]



CR Number                     : 9049
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : 
Short Description             : F2 key does not work
Reported Date                 : 10/5/93
Found in Baseline             : 1.0.3
Found Date                    : 10/5/93
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b10
Affected File(s)              : directory/gds/adm/adm_term_cap.dat
Sensitivity                   : public

[10/5/93 public]
When using the gdsditadm program, the F2 key did not work until I
modified the adm_term_cap file. Here are the changes I made:

current values
FKTMENU         ya
FKTSCU          kR
FKTSCD          kF

changed values
FKTMENU         k2
FKTSCU          k4
FKTSCD          k3

NOTE: This was only on the RS6000 platform. I don't have access to any
of the other platforms.

[10/15/93 public]
Assigned to SNI

[10/18/93 public]
Fixed by October 1.0.3 code drop.

[10/27/93 public]
Hmm, I can't see where this has been fixed ... the old values are still in
the adm_term_cap.dat file.

[10/28/93 public]
Right. The fix is not a change in the source file. The file
adm_term_cap.dat is a terminal specific file and has to be changed
after the installation MANUALLY (booo ;-)) . We don't have a better
solution until now, because we cannot put the file into a machine
dependent subdirectory. (You can have the same terminal on different
machines). 
It would be too much, to create a separate file for each terminal type ;-) .
The documentation describes that adm_term_cap has to be changed
according to the terminal, from which administration is done.
It is not expected, that the administrator uses 2 or more different
terminals on a systems.
I think this is not very much administrator friendly, and we are looking
for better solutions (any suggestions?)

[10/28/93 public]
Nope, that doesn't work.   It works fine on HPTerms, but not xterms on
either HP or OSF1.  Sanjay Jain has reproduced problem in Munich.  Assigned
to him.

[11/5/93 public]
Fix submitted by Sanjay today.

[11/8/93 public]
Fix verified.  hpterm is broken but that is probably acceptable.



CR Number                     : 9047
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : xds
Short Description             : xds header files xmhp.h and xmsga.h do not get installed
Reported Date                 : 10/5/93
Found in Baseline             : 1.0.3
Found Date                    : 10/5/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b7
Affected File(s)              : src/directory/Makefile src/directory/xmh/Makefile
Sensitivity                   : public

[10/5/93 public]

The xds xmh header files xmhp.h and xmsga.h do not get installed.
This is due to lack of a proper subdir path from the higher level
directories.  Trivial additions to two makefiles corrects the
problem and correctly installs the headers:

src/directory/Makefile:

old< SUBDIRS=      gds cds xds xom
new> SUBDIRS=      gds cds xds xom xmh

src/directory/xmh/Makefile:

new> SUBDIRS=      h

[10/6/93 public]
xds is owned by gds. So assign to gds accordingly.

[10/15/93 public]
It's fixed.  Closed.



CR Number                     : 9041
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : gds
Subcomponent Name             : src/directory/gds/ros/sh
Short Description             : libdce.a isn't built
Reported Date                 : 10/5/93
Found in Baseline             : 1.0.3
Found Date                    : 10/5/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : libdce/RIOS/machdep.mk
Sensitivity                   : public

[10/5/93 public]

During the build of libdce.a, the Makefile in src/directory/gds/ros/sh,
which explicitly references only libshth.a, complains about libslog.a
and libdua.a, even though these libraries have already been successfully
built:

[ /libdce ]

....
cd /u1/devobj/sb/nb_rios/obj/rios/directory/gds/ros/sh
if [ -f /u1/devobj/sb/nb_rios/src/directory/gds/ros/sh/build.made ]; then \
rm -rf `head -1 /u1/devobj/sb/nb_rios/src/directory/gds/ros/sh/build.made | \
awk -F":" '{print $1}'`;  fi
make: don't know how to make libslog.a (continuing)
make: don't know how to make libdua.a (continuing)
sed -e '1s;^#!;&;' \
 -e t -e \
 's;^\(#.*\)\@SOURCEWARNING\@;\1THIS IS NOT A SOURCE FILE - DO NOT EDIT;' \
 -e t \
 /project/dce/build/dce1.0.3-snap/src/libdce/RIOS/makesyms.sh makesyms.X
chmod +x makesyms.X
mv -f makesyms.X makesyms
`build_all' not remade because of errors.

[10/5/93 public]
There are now reentrant versions of these files which should be used with
libdce.  I simply changed the makefile to reference libslog_r and libdua_r.

[10/6/93 public]
Verified in NB of 10/5.



CR Number                     : 8955
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : gds
Subcomponent Name             : 
Short Description             : Unresolved symbols while
linking commands in gds/dsa
Reported Date                 : 10/5/93
Found in Baseline             : 1.0.3
Found Date                    : 10/5/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : directory/gds/gds.mk,
directory/gds/dsa/Makefile
Sensitivity                   : public

[10/5/93 public]
On the 486, the following commands would not link because of unresolved
symbols:  gdsdsa, gdsgendb, gdstransfer, gdsmkupd, and gdsmkiss.  The
unresolved symbols were:

d27logb.o: Undefined symbol "_r_logwr" referenced
d27logb.o: Undefined symbol "_r_logof" referenced
d27logb.o: Undefined symbol "_r_logon" referenced

This is caused by the omission of -lslog from the various <target>_LIBS
line.  On the RIOS and HP800, '-lslog' is included in LIBS via a
${TARGET_MACHINE}_LIBS in gds.mk.  The nominal solution is to include a
similar AT386_LIBS line in that directory's stanza of gds.mk.  However,
this would leave us with:

RIOS_LIBS       ?= -lslog
HP800_LIBS      ?= -lslog
AT386_LIBS      ?= -lslog

which doesn't seem very machine specific.

Therefore, my proposed solution is to simply add '-lslog' to <target>_LIBS
in gds/adm/delupd/Makefile and remove the reference to
${TARGET_MACHINE}_LIBS.  Also, in gds.mk, remove the RIOS_LIBS and
HP800_LIBS for that directory stanza.

Actually, since most (all?) of the <target>_LIBS lines are identical, I
would further abstract them into a single LIBS line where possible.

[10/5/93 public]
Removed HP800_LIBS and RIOS_LIBS from dsa stanza of gds.mk.
Removed ${TARGET_MACHINE}_LIBS and added -lslog to the following lines:
	gdsdsa_LIBS
	gdsgendb_LIBS
	gdstransfer_LIBS
	gdsmkupd_LIBS
	gdsmkiss_LIBS

Did not "clean up" the <target>_LIBS lines as specified in the last
paragraph.

[10/6/93 public]
Verified in NB of 10/5.



CR Number                     : 8954
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : gds
Subcomponent Name             : 
Short Description             : Unresolved symbols while
linking gdsdaemon
Reported Date                 : 10/5/93
Found in Baseline             : 1.0.3
Found Date                    : 10/5/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : directory/gds/gds.mk, directory/gds/adm/delupd/Makefile
Sensitivity                   : public

[10/5/93 public]
On the at386 in directory/gds/adm/delupd, gdsdaemon fails to link because
of the following unresolved symbols:

d27logb.o: Undefined symbol "_r_logwr" referenced
d27logb.o: Undefined symbol "_r_logof" referenced
d27logb.o: Undefined symbol "_r_logon" referenced

This is caused by the omission of -lslog from the LIBS line.  On the RIOS
and HP800, '-lslog' is included in LIBS via a ${TARGET_MACHINE}_LIBS in
gds.mk.  The nominal solution is to include a similar AT386_LIBS line in
that directory's stanza of gds.mk.  However, this would leave us with:

RIOS_LIBS       ?= -lslog
HP800_LIBS      ?= -lslog
AT386_LIBS	?= -lslog

which doesn't seem very machine specific.

Therefore, my proposed solution is to simply add '-lslog' to gdsdaemon_LIBS
in gds/adm/delupd/Makefile and remove the reference to
${TARGET_MACHINE}_LIBS.  Also, in gds.mk, remove the RIOS_LIBS and
HP800_LIBS for that directory stanza.

[10/5/93 public]
Removed HP800_LIBS and RIOS_LIBS lines from delupd stanza in gds.mk.
Removed ${TARGET_MACHINE}_LIBS from gdsdaemon_LIBS line, and added -lslog.

[10/6/93 public]
Verified in NB of 10/5.



CR Number                     : 8953
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : 
Short Description             : Unresolved symbols in
gdscstub, gdssstub
Reported Date                 : 10/5/93
Found in Baseline             : 1.0.3
Found Date                    : 10/5/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dir/gds/ros/sh/Makefile,
dir/gds/stub/Makefile
Sensitivity                   : public

[10/5/93 public]
On the HP800 and AT386 platforms gdssstub and gdscstub fail to link due to
unresolved symbols.  Here are the symbols:

   sh2_017_free (code)
   sh2_018_seqadd (code)
   sh2_003_bldprim (code)
   sh2_019_setadd (code)
   sh2_013_bitset (code)
   Er_id (code)
   Er_len_2 (code)
   sh2_011_unbbool (code)
   El_length (code)
   Er_primitive (code)
   sh2_005_bldbool (code)
   Ew_id (code)
   sh2_027_unbobjid (code)
   sh2_016_alloc (code)
   sh2_026_bldobjid (code)
   sh2_001_write (code)
   sh2_010_unbint (code)
   sh2_004_bldint (code)
   El_id (code)
   sh2_007_bldcons (code)
   Ew_primitive (code)
   Ew_length (code)

They link, however, on the RIOS because the RIOS specifies -lshth on the
${TARGET_MACHINE}_LIBS for this directory in gds.mk.

libshth is not built on at386 or HP, however.  It is, instead, linked into
libdce.  Therefore, the fix is to add the following lines to the gds/stub
stanza in directory/gds/gds.mk:

HP800_LIBS = -ldce
AT386_LIBS = -ldce

[10/5/93 public]

Wrongo, Batman.  The fix is to build libshth on 486 and UX, and then 
bind it into the stubs.  We gotta keep libdce __far__ away from GDS,
until 1.1 anyway . . . fixed.

[10/6/93 public]
Verfied in NB of 10/5.



CR Number                     : 8880
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gdsditadm
Short Description             : unable to select structure rules in batch mode
Reported Date                 : 9/30/93
Found in Baseline             : 1.0.2
Found Date                    : 9/30/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : October 1.0.3 code drop.
Sensitivity                   : public

[9/30/93 public]

Description:

One of our support customers reported that they were unable in batch mode to
instruct mask 5 of gdsditadm to use a structure rule appearing on a
scrren other than the first (only the first 10 structure rules are
represented on the first screen). In interactive mode, you use a function
key to go to the next screen, and then you enter the number of the desired
structure rule. In batch mode, function key processing is apparently disabled.

In order to reproduce this problem, you will first have to modify the
schema by adding additional structure rules. Having done so, the following
batch file can be used to reproduce the problem.

Another way to state the problem, is that there does not appear to be
a text string which when put in the place of the ? mark in the following
instructions will make it possible to select structure rules > 10 (i.e 11)?

:*****TEST 1 (Add Object) Cache OP=4*1  ****:
:*** sccsid = @(#)t1.1addobj	7.3 91/09/09 (K Sys Ap 11) ****:
:directory id:2
:password:
:Country:
:Organisation:
:Organisational unit:
:common name:
:options():Logon to the Default DSA
:****Administration ***:
:Function:1
:****AddObject *******:
:Operation:01
:****structure Rule *******:
:structure rule:?
:structure rule:11
::

[10/18/93 public]
Fixed in October 1.0.3 code drop.

[11/10/93 public]



CR Number                     : 8876
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : cfg
Short Description             : directory ID 1 is not preconfigured
Reported Date                 : 9/29/93
Found in Baseline             : 1.0.2
Found Date                    : 9/29/93
Severity                      : D
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : dce_config
Sensitivity                   : public

[9/29/93 public]

DCE Administration Guide - Extended Services

Global Directory Service

Section 5.5 Configuring GDS

	The first sentence says "After the installation of GDS, directory
	ID 1 is already preconfigured, ...", this is not true on 1.0.3.

[10/1/93 public]

Assigned to Rich Nollman (SNI GDS writer).

[10/1/93 public]
The documentation is correct. dceconfig must configure directory ID 1.
Rich, please check that this is done.

[11/8/93 public]
Sorry, but I don't agree that this should be done ... and it's certainly
too late to catch it in 1.0.3.  Therefore, this defect must be resolved in
the documentation.

[01/04/94 public]

Rich, why was this defect cancelled??

[1/5/94 public]
For the reason I stated in my last comment:  I disagree that preconfiguring
Dir1 is a desireable thing.  

During the 1.0.3 endgame I sent the doc group corrections for the porting
guide parts that talked about a pre-configured Dir1.

[1/6/94 public]
I agree that preconfiguration of anything is an undesireable thing (Why 
force this on the user?).  But I think it bears noting that there is a
reason for this madness ( :-) );  I beleive the other directory id's cannot
be configured unless directory id 1 is configured previously.  Thus the
only arguement (and I consider it weak) for automatically preconfigging 
dir id 1 is to make sure that configuration of the other dir id's will succeed.

[1/6/94 public]
Jochen and I exchanged mail on this yesterday and reached the same
conclusion.  The user is going to have to configure Dir1 regardless.  If
they're happy with the default setup then they don't have to do anything.
If not, then they can change the configuration.  If we hadn't
pre-configured then they would have had to configure it anyhow.  So,
there's one outcome in which they save time, and there's a second outcome
in which they've had to expend the same amount of time as the mandatory
hand-configuration.

Okay, we can do this.  I'll see about getting it in dce_config.  I'll also
follow up with reversing the changes in the porting guide.

[1/7/94 public]
I hate not to have the last word... :-).  Seriously, though, a pertinent 
related issue is that (the last time I checked) the config for DIR-ID 1 
CANNOT be modified after it is configged.  Is this still the case?  If it
is, this might be an arguement against the pre-configuration.

[1/7/94 public]
No.  You can change the Dir1 configuration.  What you can't do (at least,
through gdsditadm) is delete the configuration.  (Presumably for the reason
Jochen mentioned in his mail; that the CStubs expect to find their address
in the Dir1 cache.)  Jochen?

[7/11/94 public]
Upgraded because this should be closed in 1.1

[07/11/94 public]
Fixed: dir. id. 1 is preconfigured now as a CLient/Server configuration
with 16 clients and 2 servers and auth mech "simple unprotected".
You can change what ever you want via gdssysadm - what you can't do 
is to delete the dir. id. 1.

[7/28/94 public]
Closed.



CR Number                     : 8630
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : port_gd
Short Description             : Need explicit clarification of
some statements
Reported Date                 : 9/17/93
Found in Baseline             : 1.0.2
Found Date                    : 9/17/93
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : port_gd/5_gds.gpsml
Sensitivity                   : public

[9/17/93 public]

Full Description:

	This is to do with Section 5.5.1 of GDS part of the Porting and
Testing Guide.

	Item 11 in section 5.5.1 says to save the data in directories, but
it does not say what files to save to, then in item 12, it makes some
references to CACHE-DATABSE1, CACHE-DATABASE3, and CACHE-DATABSE4.

	Although it is OK for me to understand what it means, some licensees
find it hard to understand what to do. So we would better say clearly in
Item 11 what file names (CACHE-DATABSE1, CACHE-DATABASE3, and
CACHE-DATABSE4) to save the data for each directory on both machines.

	Then it Item 12, there are some statements which are not exactly
true:

	The first sentence of the second paragraph in Item 12 says "Tests 3
and 4 add some more data to the CACHE-DATABASE1". Some licensees find it
impossible to add data to the file directly. What it means really is 
"Tests 3 and 4 add some more data to the directory restored from 
CACHE-DATABSE1".

	Also Item 12 says "save the status XXXXXXX". What it should say is
"save the new data to XXXXXXX".

[09/22/93 public]
Made the changes specified above.

[11/10/93 public]



CR Number                     : 8615
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : gdssysadm
Short Description             : don't know how to make asn1_attr
Reported Date                 : 9/16/93
Found in Baseline             : 1.0.3b3
Found Date                    : 9/16/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b4
Affected File(s)              : directory/gds/conf/Makefile
Sensitivity                   : public

[9/16/93 public]
When trying to activate a directory installation, the follwoing message 
is output by gdscache

 Dua-cachehandler: FATAL ERROR -> Initializing the object identifier table
has failed (0)

and the gdssysadm process reports that the gdscache process can't be
started.

NOTE: This worked last week!!!!

[9/16/93 public]

[9/16/93 public]
There must be a file called asn1_attr in 
/opt/dcelocal/var/adm/directory/gds/conf which is not installed
when this error occur.Have you changed dce_config?
Have a look whether this file exists.

[9/17/93 public]
First of all, it turns out that the root of the problem is that the 
asn1_attr file, though built, is not installed due to a bad VPATH in the
directory/gds/conf Makefile, so I changed the short description in the
defect.

Secondly, this file has been here since August 11, so I suspect that the
build problem may be a result of a change in the value of OBJECTDIR (which 
was being used by the errant Makefile) from ODE 2.1 to ODE 2.3.

Thirdly, whether the change in ODE caused the break does not matter, 
because the solution is to just VPATH to ../dsa, so you don't use 
OBJECTDIR at all.

Fourth, nobody noticed that this important file was not available during
the install because dce_config just does a copy * in this directory.  I
am going to file a seperate bug against dce_config for this.

The fix for this defect is submitted, approved by Dave Treff at 
1:15 pm  09/17/93.

[10/21/93 public]
asn1_attr is now installed on HP/UX.



CR Number                     : 8568
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : admin_gd, admin_ref
Short Description             : revise Admin Gd and Admin Ref
to support 1.0.3 software enhancements to GDS
Reported Date                 : 9/8/93
Found in Baseline             : 1.0.3
Found Date                    : 9/8/93
Severity                      : A
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : admin_gd/directory/gds/*,
admin_ref/man8gds/* (see comments for list of files)
Sensitivity                   : public

[9/8/93 public]

[11/12/93 public]

Assigned this CR to Rich Nollman (GDS writer).

[11/16/93 public]

Verified changes in latest doc build and closed this CR.
Affected files are:

/admin_gd/directory/gds/E_app.gds.gpsml
/admin_gd/directory/gds/F_app.gds.gpsml
/admin_gd/directory/gds/G_app.gds.gpsml
/admin_gd/directory/gds/L_app.gds.gpsml
/admin_gd/directory/gds/gds.components.gpsml
/admin_gd/directory/gds/gds.dev_config_plan.gpsml
/admin_gd/directory/gds/gds.logging_on_dsa.gpsml
/admin_gd/directory/gds/gds.object_admin.gpsml
/admin_gd/directory/gds/gds.overview_admin_tools.gpsml
/admin_gd/directory/gds/gds.schema_admin.gpsml
/admin_gd/directory/gds/gds.x500_overview.gpsml


/admin_ref/man8gds/gdsditadm.8gds
/admin_ref/man8gds/gdsipcstat.8gds
/admin_ref/man8gds/gdsstep.8gds
/admin_ref/man8gds/gdssysadm.8gds



CR Number                     : 8567
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : 
Short Description             : revising Application
Development Guide and Reference Guide to support 1.0.3 GDS software 
enhancements
Reported Date                 : 9/8/93
Found in Baseline             : 1.0.3
Found Date                    : 9/8/93
Severity                      : A
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : app_gd/directory/xds_gds/*,
app_gd/directory/ref/*, app_ref/man3xds/*, app_ref/man4xds/*,
app_ref/man3xom/* (see comments for list of affected files)
Sensitivity                   : public

[9/8/93 public]

[11/12/93 public]

Assigned this CR to Rich Nollman (GDS writer).

[11/16/93 public]

Verified changes in latest doc build and closed this CR.
Affected files are:

/app_gd/directory/xds_gds/1_intro_gds.gpsml
/app_gd/directory/xds_gds/2_xom_concepts.gpsml
/app_gd/directory/xds_gds/3_xds_concepts.gpsml
/app_gd/directory/xds_gds/4_sample_apps.gpsml
/app_gd/directory/xds_gds/5_threads.gpsml

/app_gd/directory/ref/1_de.xds.gpsml
/app_gd/directory/ref/1_sy.xom.gpsml
/app_gd/directory/ref/2_ifc.xds.gpsml
/app_gd/directory/ref/2_se.xom.gpsml
/app_gd/directory/ref/3_err.xds.gpsml
/app_gd/directory/ref/3_om.xom.gpsml
/app_gd/directory/ref/4_bdcp.xds.gpsml
/app_gd/directory/ref/5_mdup.xds.gpsml
/app_gd/directory/ref/6_gds.xds.gpsml
/app_gd/directory/ref/7_dme.xds.gpsml

/app_ref/man3xds/ds_add_entry.3xds
/app_ref/man3xds/ds_bind.3xds
/app_ref/man3xds/ds_compare.3xds
/app_ref/man3xds/ds_list.3xds
/app_ref/man3xds/ds_modify_entry.3xds
/app_ref/man3xds/ds_read.3xds
/app_ref/man3xds/ds_remove_entry.3xds
/app_ref/man3xds/ds_shutdown.3xds
/app_ref/man3xds/ds_unbind.3xds
/app_ref/man3xds/intro.3xds
/app_ref/man3xds/encode_alt_addr.3xds

/app_ref/man4xds/intro.4xds
/app_ref/man4xds/xds.h.4xds
/app_ref/man4xds/xdsbdcp.h.4xds
/app_ref/man4xds/xdscds.h.4xds
/app_ref/man4xds/xdsdme.h.4xds
/app_ref/man4xds/xdsgds.h.4xds
/app_ref/man4xds/xdsmdup.h.4xds

/app_ref/man3xom/intro.3xom



CR Number                     : 8538
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : gds
Subcomponent Name             : admin
Short Description             : gds admin xterm/vt100 terms 
support has disappeared
Reported Date                 : 8/30/93
Found in Baseline             : 1.0.3
Found Date                    : 8/30/93
Severity                      : B
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : gds/adm/admin/cget.c,
gds/adm/admin/cget.h, gds/AT386/adm/admin/cgetext.c
Sensitivity                   : public

[8/30/93 public]

Somehow, after the August drop, GDS can no longer run gdssysadmin or
gdsditadm from xterms and vt100 emulation.  Only hpterms work, and as
we know, hpterms are useless on anything but hpux.  VT100 emulation
allows me to run tests from home, so I mourn the death of this usefull
functionality.

     Symptoms include:  no scrolling of lines, arrow keys not working,
miscellaneaous escape sequences showing up at the end of lines.
I have gone to the code and noticed many new instances of #ifdef __hpux
in gds/adm/admin/cget.c, which gives me an idea that something could have
changed in the code.  PLEASE NOTE THAT WE NEED TO BE ABLE TO RUN GDS ON
XTERMS ON HPUX, (as well as on everything else) -- in fact, an argument 
could be made that HPTERM support on HPUX is unnecessary if XTERM support
exists. . .

[09/08/93 public]
Escape sequences are now eliminated.

[9/13/93 public]

Sorry, but while Xterms and vt100 now "works" on HPUX, _but_ with trailing
'C's and A's when waiting for input, it still does not work on OSF/1.
The termcap for XTERM on OSF/1 looks identical to that on HPUX, and
remember, this used to work back in July!. I will investigate
further on OSF1 and let you know what I find.  Munich is on the hook to
discover why, in the official build, there is this trailing junk at the end
of lines, both in Xterm and vt100.  And, sadly,  I have to reopen this bug.
It's not in the way of testing right now, but it will be in several weeks,
and it MUST be fixed for 1.0.3.

[09/30/93 public]
This defect is now in the way of system testing at OSF on the i486 platform,
is there a workaround for this?

[10/6/93 public]
The current theory is that the following files are involved:
	directory/gds/adm/admin/cget.c
	directory/gds/adm/admin/cget.h
	directory/gds/${TARGET_MACHINE}/adm/admin/cgetext.c

Sanjay Jain is the contact on this issue in Munich.

Since this is beginning to block testing, the defect is raised to a 0
priority.

[10/6/93 public]
Fix submitted.

[10/8/93 public]
Closed.



CR Number                     : 8533
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : gds
Subcomponent Name             : test/directory/xds/tests.xom/valid
Short Description             : can't find various libraries
Reported Date                 : 8/30/93
Found in Baseline             : 1.0.3
Found Date                    : 8/30/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b3
Affected File(s)              : Makefile
Sensitivity                   : public

[8/30/93 public]

[ /test/directory/xds/tests.xom/valid at 03:51 (AM) Monday ]

cc           -L/u1/devobj/sb/nb_rios/export/rios/usr/lib \
-L/project/dce/bui\ld/dce1.0.3-snap/export/rios/usr/lib  -o \
xt_test.Xxt_test.o xt_file.o xt_run.o xt_rValue.o xt_omFuncs.o xt_dsFuncs.o \
xt_tree.o xt_thread.o dump.o  -lXDS_r -\lXOM_r -ldua_r -lslog_r -ldce -lc_r \
-lpthreads
0706-005 ld: Cannot find file: /lib/libXDS_r.a
        Check path name and permissions or
        use local problem reporting procedures.
0706-005 ld: Cannot find file: /lib/libXOM_r.a
        Check path name and permissions or
        use local problem reporting procedures.
0706-005 ld: Cannot find file: /lib/libdua_r.a
        Check path name and permissions or
        use local problem reporting procedures.
0706-005 ld: Cannot find file: /lib/libslog_r.a
        Check path name and permissions or
        use local problem reporting procedures.
0706-005 ld: Cannot find file: /lib/libc_r.a
        Check path name and permissions or
        use local problem reporting procedures.
0706-005 ld: Cannot find file: /lib/libpthreads.a
        Check path name and permissions or
        use local problem reporting procedures.
*** Error code 255 (continuing)
`build_all' not remade because of errors.

[9/17/93 public]
Fixed with Jochen's submission.  Closed.



CR Number                     : 8529
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486,hppa,rs6000
S/W Ref Platform              : aix,hpux,osf1
Component Name                : gds
Subcomponent Name             : directory/gds/ros/step
Short Description             : _cma_fprintf undefined
Reported Date                 : 8/30/93
Found in Baseline             : 1.0.3
Found Date                    : 8/30/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : d27prmsg.o,etc.
Sensitivity                   : public

[8/30/93 public]

On AT486:

[ /directory/gds/ros/step at 17:14 (PM) Sunday ]

/project/dce/build/dce1.0.3-snap/tools/at386/macho/gcc
-B/project/dce/build/dce\1.0.3-snap/tools/at386/macho/  -%ld,"
-wsb/nb_486/export/at386/usr/shlib
-L/project/dce/build/dce1.0.3-snap/export/at38\6/usr/shlib -L/usr/shlib
-L/u1/devobj/sb/nb_486/export/at386/usr/lib
-L/pro\ject/dce/build/dce1.0.3-snap/export/at386/usr/lib   -o gdsstep.X
dmy.o ros_log.\o iros_prt.o wrtfnct.o wrtevnt.o wrtutil.o irs_lgc.o
ros_pm.o acse_pm.o pres_pm\.o d27loga.o  -lstep -loss  -ld27
d27prmsg.o: Undefined symbol "_cma_fprintf" referenced

On HP:

89      -z -Wl,-Bimmediate,-Bnonfatal,-a,default,+b,/lib:/usr/lib
-L/u3/de\vobj/sb/nb_ux/export/hp800/usr/shlib
-L/project/dce/build/dce1.0.3-snap/export/\hp800/usr/shlib -L/usr/shlib
-L/u3/devobj/sb/nb_ux/export/hp800/usr/lib
-L/\project/dce/build/dce1.0.3-snap/export/hp800/usr/lib   -o gdsstep.X
dmy.o ros_l\og.o iros_prt.o wrtfnct.o wrtevnt.o wrtutil.o irs_lgc.o
ros_pm.o acse_pm.o pres\_pm.o d27loga.o  -lstep -loss  -ld27
/bin/ld: Unsatisfied symbols:
   cma_fprintf (code)

On RIOS:

[ /directory/gds/ros/step at 22:46 (PM) Sunday ]
xlc           -L/u1/devobj/sb/nb_rios/export/rios/usr/lib
-L/project/dce/bu\ild/dce1.0.3-snap/export/rios/usr/lib  -o gdsstep.X dmy.o
ros_log.o iros_prt.o \wrtfnct.o wrtevnt.o wrtutil.o irs_lgc.o ros_pm.o
acse_pm.o pres_pm.o d27loga.o \ -lstep -loss  -ld27
0706-317 ERROR: Unresolved or undefined symbols detected:
                 Symbols in error (followed by references) are
                 dumped to the load map.
                 The -bloadmap:<filename> option will create a load map.
.cma_fprintf
*** Error code 8 (continuing)

[9/13/93 public]
Assigned to Norbert, who should be able to dup on HPUX.  See also 8530

[9/24/93 public]

To fix this bug the libd27.a should not be compiled with -DThreadsafe
This means the lines 
.if !defined(GDS_NO_THREADSAFE)
.if (${TARGET_MACHINE}=="SVR4")
CFLAGS          += -DTHREADSAFE -DSNI   # because of signal.h error and
                                        # pthread.h includes signal.h
.else
CFLAGS          += -DTHREADSAFE
.endif
.endif  # GDS_NO_THREADSAFE

should be removed in the Makefile in /directory/gds/util.

[10/6/93 public]
Fixed in code drop of 10/4, verified in build of 10/5.



CR Number                     : 8489
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : gds
Subcomponent Name             : 
Short Description             : src/directory/xom,xds referencing xlc_r
Reported Date                 : 8/20/93
Found in Baseline             : 1.0.3
Found Date                    : 8/20/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b3
Affected File(s)              : xds/Makefile, xom/Makefile
Sensitivity                   : public

[8/20/93 public]

[8/20/93 public]

I fixed the build by getting rid of ANSI_CC = xlc_r in the makefiles
for xom and xds, and it builds correctly on the RIOS.  This, however,
does not fix the whole problem.  xlc_r is a re-entrant compiler and
library combination which (according to Bob Whitehurst) is sold along
with the __product__ version of DCE by IBM.  We don't have it because
we don't have the product version of DCE, nor is this a reasonable 
assumption for our porting and application building, customers.
So, since the gang in Munich obviously did this for a reason, we
can assume that it's possible that threadsafe xds and xom won't run
on the RIOS with the fix I just put it, since they must somehow depend
on the xlc_r compiler-cum-library for something, like maybe something
unwrapped in cma, but wrapped in the xlc_r library?  Can you let us
know what this is, Helmut?  We need to be able to build this stuff with
xlc on the rios.

The fact that the Makefile (indeed, xds.mk and xom.mk!) should read
CCTYPE = xlc_r in this case is beside the point . . .

[9/17/93 public]
Closed



CR Number                     : 8487
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : 
Short Description             : THREADSAFE is not defined in gds/util
Reported Date                 : 8/20/93
Found in Baseline             : 1.0.3
Found Date                    : 8/20/93
Severity                      : A
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b3
Affected File(s)              : gds/util/Makefile
Sensitivity                   : public

[8/20/93 public]
The modules in gds/util are not compiled with -DTHREADSAFE.

[8/27/93 public]
Added THREADSAFE part.

[9/17/93 public]
Closed.



CR Number                     : 8465
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : dua/switch/d21_cdsmis.c
Short Description             : a length of the attribute value is wrong calculated when you go over XDS to CDS
Reported Date                 : 8/18/93
Found in Baseline             : 1.0.3
Found Date                    : 8/18/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : /dua/switch/d21_cdsmis.c
Sensitivity                   : public

[8/18/93 public]
When a attribute value of string syntax is added to CDS over XDS
the length calculation is wrong. This is only visible when the
object were added over cdscp and later read over XDS.
This is already fixed at SNI and will be submitted soon.

[11/10/93 public]



CR Number                     : 8437
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa,i486
S/W Ref Platform              : hpux,aix
Component Name                : gds
Subcomponent Name             : xds
Short Description             : don't know how to make xt_test
Reported Date                 : 8/12/93
Found in Baseline             : 1.0.3
Found Date                    : 8/12/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b3
Affected File(s)              : tests.xom/valid/write1v
Sensitivity                   : public

[8/12/93 public]

For file "test/directory/xds/test.xom/valid/write1v" the installation test
phase of the nightly build complained: "don't know how to make xt_test."

[8/16/93 public]
This error was caused by an intermediate state during submission.
Fixed with end of submission.

[9/17/93 public]
Closed.



CR Number                     : 8436
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa,i486
S/W Ref Platform              : hpux,aix
Component Name                : gds
Subcomponent Name             : xds
Short Description             : in file dump.c, function
dump_class, the struct alloc_desc is undefined.
Reported Date                 : 8/12/93
Found in Baseline             : 1.0.3
Found Date                    : 8/12/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dump.c
Sensitivity                   : public

[8/12/93 public]

In the function "dump_class" in the file "test/directory/xds/dump.c" the
struct "alloc_desc" is undefined.

[8/16/93 public]
This error was caused by an intermediate state during submisssion.
Fixed with end of submission.

[9/17/93 public]
Closed.



CR Number                     : 8433
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : gds
Subcomponent Name             : dua
Short Description             : tries to include sys/select.h on OSF1
Reported Date                 : 8/11/93
Found in Baseline             : 1.0.3
Found Date                    : 8/11/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : directory/gds/dua/d21ipcev.c
Sensitivity                   : public

[8/11/93 public]

The ifdef that prevents sys/select.h from being included refers only to the
HP platform.  It needs to refer to the OSF1 platform as well.

[8/11/93 public]
Made the fix described above.  Submitted.  Should be changed to closed if
the build is okay.

[9/13/93 public]
Closed



CR Number                     : 8400
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : app_gd
Short Description             : Include statements should
delete "dce"
Reported Date                 : 8/2/93
Found in Baseline             : 1.0.2
Found Date                    : 8/2/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.2a
Fixed In Baseline             : 1.0.2a
Affected File(s)              : /directory/xds_gds/4_sample_apps.gpsml
Sensitivity                   : public

[8/2/93 public]

In Chapter 28 of the app_gd, two of the examples need to delete
"dce" from the #include statements. These changes should be made
to Sections 28.2.1 and 28.3.1.

[8/2/93 public]
Made fixes with blessings of SNI's Rich Nollman.

[08/17/93 public]
Closed bug.



CR Number                     : 8339
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : ros
Short Description             : Missing machdep.mk
Reported Date                 : 7/22/93
Found in Baseline             : 1.0.3
Found Date                    : 7/22/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : 
test/directory/gds/ros/testenv/HP800/machdep.mk
Sensitivity                   : public

[7/22/93 public]
A machine dependent makefile for the HP is missing:

[ /test/directory/gds/ros/testenv at 21:23 (PM) Wednesday ]
makepath testenv/. && cd testenv &&  exec make MAKEFILE_PASS=FIRSTA
build_all
testenv: created directory
"../../../../../../../src/test/directory/gds/ros/testenv/Makefile", line
101: Could not find HP800/machdep.mk
Fatal errors encountered -- cannot continue
*** Error code 1

[8/13/93 public]
HP800/machdep.mk was delivered together with the July 1993 code drop.

[9/13/93 public]
Closed



CR Number                     : 8328
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gds,xds,xom
Short Description             : new code drop from SNI
Reported Date                 : 7/21/93
Found in Baseline             : 1.0.2
Found Date                    : 7/21/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : detailed list will be sent to drb
Sensitivity                   : public

[7/21/93 public]
This CR has been opened for the July 1993 code drop from SNI to OSF.
The new features contain:
	- generic XOM
	- threadsafe XDS
	- conformance fixes
	- online help

[8/13/93 public]
Submission ends on Aug. 12, 1993.

[9/13/93 public]
Closed



CR Number                     : 8305
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : 
Short Description             : d26_u34_write_subordinate called with extra param
Reported Date                 : 7/19/93
Found in Baseline             : 1.0.2
Found Date                    : 7/19/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : directory/gds/dsa/d26wrut.c
Sensitivity                   : public

[7/19/93 public]

Full Description:

    The function d26_u34_write_subordinate is defined with 8 parameters
    but is called with 9 parameters.

Proposed Solution:

    It is assumed that the function 'definition' is correct and it is the
    call which should be fixed.

    Note that both definition and call appear in the same file, at it
    apperas that the call can be fixed by removing the last argument,
    "fct_tag".

[8/16/93 public]
Proposed Solution accepted.

[9/13/93 public]
Closed



CR Number                     : 8260
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : admin
Short Description             : Can't find library for -ldua
Reported Date                 : 7/13/93
Found in Baseline             : 1.0.3
Found Date                    : 7/13/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : gds/HP800/adm/admin/Makefile
Sensitivity                   : public

[7/13/93 public]

[ /directory/gds/HP800/adm/admin at 21:57 (PM) Monday ]
c89      -g -z -Wl,-Bimmediate,-Bnonfatal,-a,default,+b,/lib:/usr/lib     -L/u3/devobj/sb/nb_ux/export/hp800/usr/shlib   -L/project/dce/build/dce1.0.3i/export/hp800/usr/shlib   -L/project/dce/build/dce1.0.2a/export/hp800/usr/shlib -L/usr/shlib -L/u3/devobj/sb/nb_ux/export/hp800/usr/lib     -L/project/dce/build/dce1.0.3i/export/hp800/usr/ccs/lib -L/project/dce/build/dce1.0.2a/export/hp800/usr/lib   -o gdsditadm.X cgetext.o  d20frame.o    -lcurses -ladmv2e -ladmsch -ltree -ldupd -ldump  -laplv2 -ldua -lXDS -ld27 -losiaddr -lslog -lgda_util -ltermcap  
/bin/ld: Can't find library for -ldua
*** Error code 1
`build_all' not remade because of errors.

[07/12/93 public]
Here it is:
./directory/gds/HP800/adm/admin/Makefile
#       DCT @ OSF
#       Get rid of LIBS refs to -ldua, -lXDS, -lslog
#       in HP800 LIBS line, since they aren't built with
#       -D__SHARED_LIBRARIES
#       [1993/07/13  21:21:54  treff]

It appears that the HP800 GDS port was not built in a proper HPUX build
environment before testing, and submitting.

[9/13/93 public]
Closed



CR Number                     : 8254
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : 
Short Description             : inconsitent/duplicate d20_121_get_nam_attr
Reported Date                 : 7/9/93
Found in Baseline             : 1.0.2
Found Date                    : 7/9/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : /gds/adm/adm/adm_dump/d20add.c, /adm/adm_tree/d21addap.c
Sensitivity                   : public

[7/9/93 public]

There are two different but similar implemetations of
d20_121_get_nam_attr, one in gds/adm/adm/adm_dump/d20add.c,
and one in gds/adm/adm/adm_tree/d21addap.c. Furthermore the call made
to d27_302_str_oid from the the implementation in d20add.c passes a
second argument by value when the function (d27_302_str_oid) is expecting 
it to be passed by reference.

The implementation in d20add.c, also has the potential to
position dn_ptr one in front of the next attribute value assertion,
since it only increments dn_ptr when it breaks out of the loop
because a relative distinguished name seperator was encountered.

dn_ptr = p_dn + strlen(p_dn) - 1;
for (; dn_ptr >= p_dn; dn_ptr--)
  	if (*dn_ptr == D2_RDN_SEP)
		break;

if (*dn_ptr == D2_RDN_SEP)
	dn_ptr++;

The implementation in d21addap always performs the increment of dn_ptr
after finishing the loop, assuring that the pointer is positioned on the
string (unless there was a D2_RDN_SEP at the end of the string).

[8/13/93 public]
d20add.c is now obsolete. It has been defuncted in the July 1993 code drop.

[9/13/93 public]
Closed



CR Number                     : 8252
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : 
Short Description             : d20_B_handle_subtrees is called wrong
Reported Date                 : 7/9/93
Found in Baseline             : 1.0.2
Found Date                    : 7/9/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : gds/adm/adm_tree/d21svsub.c
Sensitivity                   : public

[7/9/93 public]

The d20_B_handle_subtrees function is defined in
directory/gds/adm/adm_dump/d20hdlsub.c with tow parameters

    EXPORT Short d20_B_handle_subtrees(parblk, dst_dsa_name)
    D20_pB  *parblk;
    D2_name_string	dst_dsa_name;

and called from directory/gds/adm/adm_tree/d21svsub.c
with only one

    if (d20_B_handle_subtrees(&pb)

Proposed solution:

   change the call to agree with the definition.

[8/13/93 public]
Fixed with the July 1993 code drop.

[9/13/93 public]
Closed



CR Number                     : 8243
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gds/adm/adm_iapl/d20smodify.c
Short Description             : d20_insert_modify called with
10 or 11 params
Reported Date                 : 7/8/93
Found in Baseline             : 1.0.2
Found Date                    : 7/8/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : adm_tree/d21addcn.c , adm_tree/d21modcn.c
Sensitivity                   : public

[7/8/93 public]

The licensee reported:

        The Tandem C compiler fails to compile the d20modc module
        in the ADMIN VC database, as the function predeclaration
        defines 10 parameters for the d20_insert_modify function, but
        the function is called with 11 parameters.

        This function is used in 23 places, is called with 10 parameters
        in 16 of the places, and with 11 parameters in 7 places. I
        don't know what the effects will be in adding a new parameter
        or removing a parameter, thus this problem report.

Actually, the function is defined with 11 parameters, but some calls pass
10 paras, some pass 11 params.

Since the last parameter is an address of an address of a char buffer, it
looks dangerous if someone tries to write to buffer pointed by its content.

[8/13/93 public]
The two files had been defuncted in the July 1993 code drop.

[9/13/93 public]
Closed



CR Number                     : 8233
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : gds
Subcomponent Name             : 
/../src/directory/gds/ros/step/wrtfnct.c
Short Description             : 
 In function `wrt_dtach': ./directory/gds/ros/step/wrtfnct.c:282: `tmp1'
 					undeclared (first use this function)
./directory/gds/ros/step/wrtfnct.c:282: (Each undeclared identifier is
					reported only once 
./directory/gds/ros/step/wrtfnct.c:282: for each function it appears in.)
Reported Date                 : 7/6/93
Found in Baseline             : 1.0.3
Found Date                    : 7/6/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : ./directory/gds/ros/step/wrtfnct.c
Sensitivity                   : public

[7/6/93 public]

/../src/directory/gds/ros/step/wrtfnct.c:
 In function `wrt_dtach': `tmp1'undeclared (first use this function)
 :282:(Each undeclared identifier is reported only once
 :282: for each function it appears in.)


./directory/gds/ros/step/wrtutil.c: In function`wrt_sndata':
./directory/gds/ros/step/wrtutil.c:248: parse error before `else'

[07/12/93 public]
Fixed.

[9/13/93 public]
Closed



CR Number                     : 8232
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : gds
Subcomponent Name             : directory/gds/oss/prod/cmxl.c
Short Description             : sys/select.h not found
Reported Date                 : 7/6/93
Found in Baseline             : 1.0.3
Found Date                    : 7/6/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : directory/gds/oss/prod/cmxl.c,
plus others . . .
Sensitivity                   : public

[7/6/93 public]
486 build died during the compilation of
	../src/directory/gds/oss/prod/cmxl.c

due to:
	 sys/select.h: No such file or directory

[07/12/93 public]
Fixed for both __hpux and at386

[9/13/93 public]
Closed



CR Number                     : 8228
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : 
Short Description             : gds changes for HP port
Reported Date                 : 7/2/93
Found in Baseline             : 1.0.2
Found Date                    : 7/2/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : several files in directory/gds
Sensitivity                   : public

[7/2/93 public]
Fixes for the HP port in the gds component.

[9/13/93 public]
Closed



CR Number                     : 8144
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : pmax
S/W Ref Platform              : osf1
Component Name                : gds
Subcomponent Name             : 
Short Description             : The gds doc bugs identified in
the DCE 1.0.2 Release Notes, Section 1.10.5.4, and all its subsections
(1.10.5.4.1 thru 1.10.5.4.4) should be fixed in the DCE Porting Guide.
Reported Date                 : 6/11/93
Found in Baseline             : 1.0.2
Found Date                    : 6/11/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : port_gd/11_systest.gpsml
Sensitivity                   : public

[6/11/93 public]

[6/28/93 public]
I'm changing the fix-by baseline to 1.0.3 (vice 1.0.2a). The reason
for this is that the GDS material referred to involves code that was
put in the "unintegrated" tree for 1.0.2. Since this essentially
doesn't change for 1.0.2a, and since references to transient uninteg-
rated stuff shouldn't be in the books, the GDS text referred to above
shouldn't be moved until the code it describes is integrated into
the DCE tree. The earliest that this will happen is 1.0.3, as I under-
stand.

[11/16/93 public]

This has been done. It involved updating the System Test chapter of
the Porting Guide with new information about the GDS shadow test.

[11/17/93 public]

Verified changes in latest doc build and closed this CR.



CR Number                     : 8128
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : pmax
S/W Ref Platform              : osf1
Component Name                : gds
Subcomponent Name             : admin_ref
Short Description             : The GDS doc bugs identified in
the DCE Release Notes, Section 1.10.4.3, need to be fixed in the DCE
Administration Reference
Reported Date                 : 6/9/93
Found in Baseline             : 1.0.2
Found Date                    : 6/9/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.2a
Fixed In Baseline             : 1.0.2a
Affected File(s)              : gdssysadm.8gds
Sensitivity                   : public

[6/9/93 public]

[6/28/93 public]
Fixed all GDS doc bugs identified in Section 1.10.4.3 of the DCE 1.0.2
Release Notes. All the changes were made to the gdssysadm.8gds reference
page of the DCE Administration Reference. Changes were made to the
"Combining Options in the Command Call" table as well as to the "Examples"
section.

[08/17/93 public]
Closed bug.



CR Number                     : 8125
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : pmax
S/W Ref Platform              : osf1
Component Name                : gds
Subcomponent Name             : admin_gd
Short Description             : GDS doc bugs identified in the DCE
Release Notes, Section 1.10.3.3, should be fixed in the DCE
Administration Guide -- Extended Services.
Reported Date                 : 6/9/93
Found in Baseline             : 1.0.2
Found Date                    : 6/9/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.2a
Fixed In Baseline             : 1.0.2a
Affected File(s)              : gds.x500_overview.gpsml,
gds.components.gpsml, gds.dev_config_plan.gpsml,
gds.overview_admin_tools.gpsml, gds.obj_admin.gpsml,
gds.schema_admin.gpsml, gds.shadow_admin.gpsml, gds.subtree_admin.gpsml,
G_app.gds.gpsml, I_app.gds.gpsml
Sensitivity                   : public

[6/9/93 public]

[6/12/93 public]
Doc bugs fixed by lmk and rnollman.

[08/17/93 public]
Closed bug.  The following files do not explicitly reference CR 8125
but contain the necessary changes:

	gds.x500_overview.gpsml
	gds.overview_admin_tools.gpsml
	G_app.gds.gpsml
	I_app.gds.gpsml



CR Number                     : 8054
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : other
S/W Ref Platform              : other
Component Name                : gds
Subcomponent Name             : src/directory/xom/dsPPut.c
Short Description             : OM_LENGTH_UNSPECIFIED does not
work for RDNs in XOM
Reported Date                 : 5/25/93
Found in Baseline             : 1.0.2
Found Date                    : 5/25/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.2
Affected File(s)              : directory/xom/dsPPut.c
					     directory/xom/h/xomdef.h
Sensitivity                   : public

[5/25/93 public]

Full Description:

If an OM discriptor attribute value string is set up with a string length
of OM_LENGTH_UNSPECIFIED, dsPPut.c returns a OM_WRONG_VALUE_LENGTH error.
Here is an example of an offending descriptor:

static OM_descriptor    name1[] = {
    OM_OID_DESC(OM_CLASS,DS_C_AVA),
    OM_OID_DESC(DS_ATTRIBUTE_TYPE,DSX_TYPELESS_RDN),
    {DS_ATTRIBUTE_VALUES,OM_S_TELETEX_STRING,{OM_LENGTH_UNSPECIFIED, "name1"}},
    OM_NULL_DESCRIPTOR
    };

Repeat By:

Modify one of the entries in the test/directory/xds/xt_parms.h file
to use {OM_LENGTH_UNSPECIFIED, "name1"} instead of the OM_STRING
macro and rerun the tests.

Proposed Solution:

I suspect the problem should be taken care of sooner in the code, but
this fixes the rdn specific problem.  In file directory/xom/dsPPut.c modify the
update_dist_name() function to check to see if the value of "len_src"
is OM_LENGTH_UNSPECIFIED before it is used.  Change it to the strlen()
if it is not.

update_dist_name (
xds_dist_name   dn_ptr,
int             len_src,
void            *str_src,
OM_boolean      convert,
OM_boolean      next_ava
)
        ...
        if (len_src == OM_LENGTH_UNSPECIFIED) len_src = strlen (str_src);
        if (strlen(dn_ptr) + (convert ? 3 *len_src : len_src )+ 1 > D2_DNL_MAX)
                return (OM_WRONG_VALUE_LENGTH);
        ...

[5/26/93 public]
Add test for OM_LENGTH_UNSPECIFIED in update_dist_name() and 
change VALIDATE_LENGTH macro to handle OM_LENGTH_UNSPECIFIED.

[9/13/93 public]
Closed



CR Number                     : 7768
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : ASN1
Short Description             : Mail Attributes wrong decoded
Reported Date                 : 4/21/93
Found in Baseline             : 1.0.2
Found Date                    : 4/21/93
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : asn1/DUA/dua.mvr
Sensitivity                   : public

[4/21/93 public]

In interworking tests of X.500 with some other vendors
we find a bug in coding the MHS Attributes.
This is a bigger problem because the protocol have to change
for the fix.
We have already done this and tested it. If possible it
is very important to put this fix in DCE1.0.2 because
we are at all protocol incompatible to DCE1.0.1 but we don't
want to be incompatible between DCE1.0.2 and DCE1.0.3.
The changes are the follows:

diffs for ../gds/asn1/DUA/dua.mvr (this is a description file for the MAVROS
compiler)


113,115c113,115
<       1: individual [0] IMPLICIT ORName(x.v.individual),
<       2: member_of_dl [1] IMPLICIT ORName(x.v.member_of_dl),
<       3: pattern_match [2] IMPLICIT ORNamePattern(x.v.pattern_match),
---
>       1: individual [0] ORName(x.v.individual),
>       2: member_of_dl [1] ORName(x.v.member_of_dl),
>       3: pattern_match [2] ORNamePattern(x.v.pattern_match),
136c136
<       network_address [0] IMPLICIT dua_Nstring(x.n_addr)
---
>       network_address [0] dua_Nstring(x.n_addr)
138c138
<       terminal_identifier [1] IMPLICIT dua_string(x.t_id)
---
>       terminal_identifier [1] dua_string(x.t_id)
143c143
<       organization_name [3] IMPLICIT dua_string(x.org_name)
---
>       organization_name [3] dua_string(x.org_name)
145c145
<       numeric_user_identifier [4] IMPLICIT dua_Nstring(x.u_id)
---
>       numeric_user_identifier [4] dua_Nstring(x.u_id)
147c147
<       personal_name [5] IMPLICIT PersonalName(x.p_name[0])
---
>       personal_name [5] PersonalName(x.p_name[0])
150c150
<       organizational_unit_names [6] IMPLICIT OrganizationalUnitNames(x.o_u_names[0])
---
>       organizational_unit_names [6] OrganizationalUnitNames(x.o_u_names[0])
163c163
<       surname [0] IMPLICIT dua_string(x.surname)
---
>       surname [0] dua_string(x.surname)
165c165
<       given_name [1] IMPLICIT dua_string(x.given_name)
---
>       given_name [1] dua_string(x.given_name)
167c167
<       initials [2] IMPLICIT dua_string(x.initials)
---
>       initials [2] dua_string(x.initials)
169c169
<       generation_qualifier [3] IMPLICIT dua_string(x.g_qualifier)
---
>       generation_qualifier [3] dua_string(x.g_qualifier)
189c189
<       extension_attribute_type [0] IMPLICIT INTEGER{
---
>       extension_attribute_type [0] INTEGER{
216,217c216,217
<       surname [0] IMPLICIT dua_Tstring(x.surname),
<       given_name [1] IMPLICIT dua_Tstring(x.given_name)
---
>       surname [0] dua_Tstring(x.surname),
>       given_name [1] dua_Tstring(x.given_name)
219c219
<       initials [2] IMPLICIT dua_Tstring(x.initials)
---
>       initials [2] dua_Tstring(x.initials)
221c221
<       generation_qualifier [3] IMPLICIT dua_Tstring(x.g_qualifier)
---
>       generation_qualifier [3] dua_Tstring(x.g_qualifier)
252c252
<       2: psap_address [0] IMPLICIT dua_psap(x.v.psap_address[0])
---
>       2: psap_address [0] dua_psap(x.v.psap_address[0])
263c263
< ORName(VAR x: ORName) ::= [APPLICATION 0] IMPLICIT SEQUENCE {
---
> ORName(VAR x: ORName) ::= [APPLICATION 0] SEQUENCE {
273,274c273,274
<       number [0] IMPLICIT dua_Nstring(x.number),
<       sub_address [1] IMPLICIT dua_Nstring(x.sub_address)
---
>       number [0] dua_Nstring(x.number),
>       sub_address [1] dua_Nstring(x.sub_address)

This means that all tags for the MHS attributes are implicit
and to define this for MAVROS the "IMPLICIT" is introduced in the description
file.

I hope we can submit this file in DCE1.0.2 because it helps us a lot
to get this protocol incompatibility in the 1.0.2 tree.

[8/16/93 public]
Fixed with the July 1993 code drop.

[9/13/93 public]
Closed



CR Number                     : 7673
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gdsditadm
Short Description             : missing arg check can lead to core dump
Reported Date                 : 4/8/93
Found in Baseline             : 1.0.2b22
Found Date                    : 4/8/93
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : src/directory/gds/adm/admin/d20logon.c
Sensitivity                   : public

[4/8/93 public]
When running gdsditadm on a system the I thought had GDS running on it, I
got the message "Cannot read schema from DSA"
                 To continue enter <CR>:

When I hit return, the program generated a core from gdsditadm with the
following stack trace:

#0  0x730540ec in strcmp ()
#1  0x403694   in d20_check_bind_dsa ()
#2  0x401610   in main ()

the strcmp (the only one in the routine is at line 1757 of d20logon.c.  I
guess the bind_dsa param should be checked to see if it is null before 
passing it to strcmp.

[8/17/93 public]
Check fro bind_dsa added before strcmp() is used.

[9/13/93 public]
Closed



CR Number                     : 7451
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : admin_ref
Short Description             : There is no man page for the
commnad gdsipcinit
Reported Date                 : 3/9/93
Found in Baseline             : 1.0.2
Found Date                    : 3/9/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : admin_ref/man8gds/gdsipcinit.8gds
Sensitivity                   : public

[3/9/93 public]

There is no man page for the command gdsipcinit in the Adminstration
Reference, Section 2. Global Directory Service. This command is 
referenced in the Release Notes and the Porting and Testing Guide, among
other DCE books.

If the man page is in another book, please let me know.

[3/9/93 public]

I think it is not necessary to have a man page for gdsipcinit,
because it is an internal which a normal user or administrator never
use. It is something what you will use sometimes by porting when the
system is not complete installed and you have to do a lot
of administration by hand. For that the gdsipcinit is described 
in the porting and testing guide.

[3/23/93 public]
I'm afraid we're going to have to disagree about this one, Helmut.
OUr feeling is that any command referenced in the release notes should
have a man page.  Deferred until 1.0.3

[5/4/93 public]
Opened for 1.0.3

[07/06/93 public]
Reassigned this CR to Rich Nollman.

[11/12/93 public]
Ref page was submitted and reviewed by munich

[11/12/93 public]

Verified new man page in latest doc build and closed this CR.



CR Number                     : 6729
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : other
S/W Ref Platform              : other
Component Name                : gds
Subcomponent Name             : gds/ros/step/{acse_pm.c
pres_pm.c ros_pm.c wrtevnt.c wrtfnct.c wrtutil.c}
Short Description             : gdsstep alignment problem.
Reported Date                 : 1/4/93
Found in Baseline             : 1.0.1
Found Date                    : 1/4/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b2
Affected File(s)              : gds/ros/*
Sensitivity                   : public

[1/4/93 public]

Full Description:

Sparc has strict alignment requirement: bytes should reside on byte boundaries,
16-bit halfwords on halfword boundaries, 32-bit words on word boundaries, and
64-bit double words on doubleowrd boundaries. As such, any casting of pointer
that casts a pointer to a larger size will cause bus error. This includes
casting a pointer to a char or unsigned char into a pointer to a larger
quantity, such as short, init, long, float, double, or struct/union containing
on of them, it also includes passing a char * as an argument to a function
expecting a pointer to a larger quantity. so on so forth.

In gds/ros/step. I have fixed 6 routines, but there may be more.

	What you will notice is that when you run gdsstep to read a log file, 
	you will fail with bus error. My favorite one is a bus error on the
	following line of code:

	    pid_i = att.r_pid;

	where both pid_i and r_pid are integers. What is wrong? Struct att is
	on a halfword boundary. I have also seen struct on byte boundary.

	The problem is: the log file is a binary one, when gdsstep tries to
	read it, it uses char * to reference and assigns pointer to the
	position in the char buf back to another typed pointer, which totally
	violates the alignment requirement.

	The RIGHT way to fix may require redesign of the struct used by gdsstep
	so that alignment requirement is honored.

	My current fix/workaround is to allocate a local copy of the variable
	and use memcpy to copy from the input pointer, then pass the local copy
	elements for later processing.


Repeat By:

	Run gdsstep on a Sparc.

Proposed Solution:

	Here are diffs of my workaround.

*** acse_pm.c	Wed Dec 30 16:18:45 1992
--- acse_pm.c.orig	Fri Jul 31 15:35:05 1992
***************
*** 147,155 ****
  R_t0e1_acse         *acse;
  R_t650_context      *ac_context;
  int                  len;
- R_int		    csht;
- R_t0e1_acse	    cacse;
- R_t650_context	    cac_context;
   
  /* ****************** S T A R T ************************************* */
  /* ******************           ************************************* */
--- 147,152 ----
***************
*** 175,183 ****
          return;
          }
      LG_CHECK (len, sizeof (R_t650_context), 39);
-     memcpy((char *)&cac_context, (char *)ac_context, sizeof(R_t650_context));
      wrt(OFFSET1, "ACPM context");
!     switch (cac_context.r_v650_state) {
          case R_C651_STA0:
              wrt_tystr(OFFSET2, "STA0", "Current state", EMPTY); break;
          case R_C652_STA1:
--- 172,179 ----
          return;
          }
      LG_CHECK (len, sizeof (R_t650_context), 39);
      wrt(OFFSET1, "ACPM context");
!     switch (ac_context -> r_v650_state) {
          case R_C651_STA0:
              wrt_tystr(OFFSET2, "STA0", "Current state", EMPTY); break;
          case R_C652_STA1:
***************
*** 195,206 ****
          case R_C658_STA7:
              wrt_tystr(OFFSET2, "STA7", "Current state", EMPTY); break;
          default:
!             wrt_tystr(OFFSET2, itoa(cac_context.r_v650_state),
                                "Current state", EMPTY); break;
          }
!     wrt_tysign(OFFSET2, cac_context.r_v651_sesProtVers,
                          "Session version", EMPTY);
!     wrt_tystr(OFFSET2, TorF(cac_context.r_v652_assocInitFlag),
                         "AssocInit flag", EMPTY);
   
  /* ****************** 3. protocol automaton event ******************* */
--- 191,202 ----
          case R_C658_STA7:
              wrt_tystr(OFFSET2, "STA7", "Current state", EMPTY); break;
          default:
!             wrt_tystr(OFFSET2, itoa(ac_context->r_v650_state),
                                "Current state", EMPTY); break;
          }
!     wrt_tysign(OFFSET2, ac_context->r_v651_sesProtVers,
                          "Session version", EMPTY);
!     wrt_tystr(OFFSET2, TorF(ac_context->r_v652_assocInitFlag),
                         "AssocInit flag", EMPTY);
   
  /* ****************** 3. protocol automaton event ******************* */
***************
*** 211,218 ****
          return;
          }
      LG_CHECK (len, sizeof(R_int), 40);
!     memcpy((char *)&csht, (char *)sht, sizeof(R_int));
!     switch (csht + R_C0e0_ACSEbasic) {
          case R_C0e1_A_ASSOCIATEreq:
              wrt_tystr(OFFSET1, "A-ASSOCIATE-REQ", "Incoming event to AC-PM",
                                 EMPTY);
--- 207,213 ----
          return;
          }
      LG_CHECK (len, sizeof(R_int), 40);
!     switch (*sht + R_C0e0_ACSEbasic) {
          case R_C0e1_A_ASSOCIATEreq:
              wrt_tystr(OFFSET1, "A-ASSOCIATE-REQ", "Incoming event to AC-PM",
                                 EMPTY);
***************
*** 258,264 ****
                                 EMPTY);
              break;
          default:
!             switch (csht) {
              case R_C0ed_aarqAcsePdu:
                  wrt_tystr(OFFSET1, "AARQ", "Incoming event to AC-PM",
                                     EMPTY);
--- 253,259 ----
                                 EMPTY);
              break;
          default:
!             switch (*sht) {
              case R_C0ed_aarqAcsePdu:
                  wrt_tystr(OFFSET1, "AARQ", "Incoming event to AC-PM",
                                     EMPTY);
***************
*** 280,286 ****
                                     EMPTY);
                  break;
              default:
!                 wrt_tystr(OFFSET1, itoa(csht), "Incoming event to AC-PM",
                                     EMPTY);
                  break;
              }
--- 275,281 ----
                                     EMPTY);
                  break;
              default:
!                 wrt_tystr(OFFSET1, itoa(*sht), "Incoming event to AC-PM",
                                     EMPTY);
                  break;
              }
***************
*** 295,303 ****
          return;
          }
      LG_CHECK (len, sizeof(R_t0e1_acse), 41);
-     memcpy((char *)&cacse, (char *)acse, sizeof(R_t0e1_acse));
      wrt(OFFSET1,"AC-PM protocol parameter stack");
!     switch (cacse.r_v0e2_pduType) {
          case R_C0ed_aarqAcsePdu:
              wrt_tystr(OFFSET2, "AARQ", "PDU type", EMPTY);
              break;
--- 290,297 ----
          return;
          }
      LG_CHECK (len, sizeof(R_t0e1_acse), 41);
      wrt(OFFSET1,"AC-PM protocol parameter stack");
!     switch (acse->r_v0e2_pduType) {
          case R_C0ed_aarqAcsePdu:
              wrt_tystr(OFFSET2, "AARQ", "PDU type", EMPTY);
              break;
***************
*** 314,339 ****
              wrt_tystr(OFFSET2, "ABRT", "PDU type", EMPTY);
              break;
          default:
!             wrt_tystr(OFFSET2, atoi(cacse.r_v0e2_pduType),
                                 "PDU type", EMPTY);
              break;
          }
!     wrt_tyusign(OFFSET2, cacse.r_v0e3_protVersion,
                           "Protocol version", EMPTY);
      wrt_u_elem(OFFSET2, "Application context name",
!                         &cacse.r_v0e4_appliContName[1],
!                          cacse.r_v0e4_appliContName[0]);
      wrt_u_elem(OFFSET2, "Calling Res title",
!                         &cacse.r_v0e5_calingResTitle[1],
!                          cacse.r_v0e5_calingResTitle[0]);
      wrt_u_elem(OFFSET2, "Called own title",
!                         &cacse.r_v0e6_calledOwnTitle[1],
!                          cacse.r_v0e6_calledOwnTitle[0]);
!     wrt_tysign(OFFSET2, cacse.r_v0e7_resultReason,
                          "Result reason"   , EMPTY);
!     wrt_tysign(OFFSET2, cacse.r_v0e8_aboResSource,
                          "Abort Res source", EMPTY);
!     wrt_tysign(OFFSET2, cacse.r_v0e9_diagnostic  ,
                          "Diagnostic"      , EMPTY);
   
  /* ******************     end     *********************************** */
--- 308,333 ----
              wrt_tystr(OFFSET2, "ABRT", "PDU type", EMPTY);
              break;
          default:
!             wrt_tystr(OFFSET2, atoi(acse->r_v0e2_pduType),
                                 "PDU type", EMPTY);
              break;
          }
!     wrt_tyusign(OFFSET2, acse->r_v0e3_protVersion,
                           "Protocol version", EMPTY);
      wrt_u_elem(OFFSET2, "Application context name",
!                         &acse->r_v0e4_appliContName[1],
!                          acse->r_v0e4_appliContName[0]);
      wrt_u_elem(OFFSET2, "Calling Res title",
!                         &acse->r_v0e5_calingResTitle[1],
!                          acse->r_v0e5_calingResTitle[0]);
      wrt_u_elem(OFFSET2, "Called own title",
!                         &acse->r_v0e6_calledOwnTitle[1],
!                          acse->r_v0e6_calledOwnTitle[0]);
!     wrt_tysign(OFFSET2, acse->r_v0e7_resultReason,
                          "Result reason"   , EMPTY);
!     wrt_tysign(OFFSET2, acse->r_v0e8_aboResSource,
                          "Abort Res source", EMPTY);
!     wrt_tysign(OFFSET2, acse->r_v0e9_diagnostic  ,
                          "Diagnostic"      , EMPTY);
   
  /* ******************     end     *********************************** */
*** pres_pm.c	Wed Dec 30 16:25:54 1992
--- pres_pm.c.orig	Fri Jul 31 15:35:06 1992
***************
*** 152,161 ****
  R_t450_context      *pr_context;
  R_int               *ev;
  R_t0d1_p2           *pres;
- R_idtype	    csht;
- R_t450_context	    cpr_context;
- R_int		    cev;
- R_t0d1_p2	    cpres;
  int                  len, len1, len2, i;
  char                *ptr1, *ptr2;
  char                 buf1[2*256];
--- 152,157 ----
***************
*** 174,181 ****
        return;
        }
     LG_CHECK (len, sizeof(R_idtype), 42); 
!    memcpy((char *)&csht, (char *)sht, sizeof(R_idtype));
!    wrt_tysign(OFFSET1, csht, "Association-id", EMPTY);
   
  /* ****************** 2. +  3.  PPM context ************************* */
  /* ******************                       ************************* */
--- 170,176 ----
        return;
        }
     LG_CHECK (len, sizeof(R_idtype), 42); 
!    wrt_tysign(OFFSET1, *sht, "Association-id", EMPTY);
   
  /* ****************** 2. +  3.  PPM context ************************* */
  /* ******************                       ************************* */
***************
*** 193,201 ****
     memcpy (buf1       , ptr1, len1);
     memcpy (buf1 + len1, ptr2, len2);
     pr_context = (R_t450_context *) buf1;
!    memcpy((char *)&cpr_context, (char *)pr_context, sizeof(R_t450_context)); 
     wrt(OFFSET1, "PPM context");
!    switch (cpr_context.r_v450_state) {
        case R_C451_STAI0:
           wrt_tystr(OFFSET2, "STAI0", "P-PM state", EMPTY);
           break;
--- 188,196 ----
     memcpy (buf1       , ptr1, len1);
     memcpy (buf1 + len1, ptr2, len2);
     pr_context = (R_t450_context *) buf1;
!  
     wrt(OFFSET1, "PPM context");
!    switch (pr_context->r_v450_state) {
        case R_C451_STAI0:
           wrt_tystr(OFFSET2, "STAI0", "P-PM state", EMPTY);
           break;
***************
*** 209,245 ****
           wrt_tystr(OFFSET2, "STAt0", "P-PM state", EMPTY);
           break;
        default:
!          wrt_tystr(OFFSET2, itoa(cpr_context.r_v450_state), 
                              "P-PM state", EMPTY);
           break;
        }
   
!    wrt_tystr (OFFSET2, TorF(cpr_context.r_v451_rl), "Release flag", EMPTY);
!    wrt_tystr (OFFSET2, TorF(cpr_context.r_v452_er),
                         "Release collision flag", EMPTY);
!    wrt_s_elem(OFFSET2, "agreed DCS", cpr_context.r_v453_agreedDCS,
                                        R_C449_maxAbsId);
  /*
   * wrt(OFFSET2, "Transfer Syn");
   * for (i=0; i < (R_C449_maxAbsId + 1); i++) {
   *    wrt_s_elem(OFFSET3, "TransSynId ",
!  *                &cpr_context.r_v458_TransSyn[i].r_v468_TransSynID, 1);
   *    wrt_u_elem(OFFSET3, "TransObjId ",
!  *                &cpr_context.r_v458_TransSyn[i].r_v466_TransSynObjID[1],
!  *                 cpr_context.r_v458_TransSyn[i].r_v466_TransSynObjID[0]);
   *    wrt_u_elem(OFFSET3, "TransMaskId",
!  *                &cpr_context.r_v458_TransSyn[i].r_v465_maskId, 1);
   *    }
   */
!    wrt_s_elem(OFFSET2, "proposed context", cpr_context.r_v454_absIds,
                        R_G008_maxRecurs);
     wrt_s_elem(OFFSET2, "context definition list", 
!                       cpr_context.r_v455_pContextReason,
                        R_G008_maxRecurs);
!    wrt_tysign(OFFSET2, cpr_context.r_v456_sesProtVers, "Session version",
                                                         EMPTY);
     wrt_s_elem(OFFSET2, "Internal abs-id", 
!                       cpr_context.r_v457_internalAbsId,
                        R_C0a1_maxAutomata);
   
  /* ****************** 4. incoming event to automaton **************** */
--- 204,240 ----
           wrt_tystr(OFFSET2, "STAt0", "P-PM state", EMPTY);
           break;
        default:
!          wrt_tystr(OFFSET2, itoa(pr_context->r_v450_state), 
                              "P-PM state", EMPTY);
           break;
        }
   
!    wrt_tystr (OFFSET2, TorF(pr_context->r_v451_rl), "Release flag", EMPTY);
!    wrt_tystr (OFFSET2, TorF(pr_context->r_v452_er),
                         "Release collision flag", EMPTY);
!    wrt_s_elem(OFFSET2, "agreed DCS", pr_context->r_v453_agreedDCS,
                                        R_C449_maxAbsId);
  /*
   * wrt(OFFSET2, "Transfer Syn");
   * for (i=0; i < (R_C449_maxAbsId + 1); i++) {
   *    wrt_s_elem(OFFSET3, "TransSynId ",
!  *                &pr_context->r_v458_TransSyn[i].r_v468_TransSynID, 1);
   *    wrt_u_elem(OFFSET3, "TransObjId ",
!  *                &pr_context->r_v458_TransSyn[i].r_v466_TransSynObjID[1],
!  *                 pr_context->r_v458_TransSyn[i].r_v466_TransSynObjID[0]);
   *    wrt_u_elem(OFFSET3, "TransMaskId",
!  *                &pr_context->r_v458_TransSyn[i].r_v465_maskId, 1);
   *    }
   */
!    wrt_s_elem(OFFSET2, "proposed context", pr_context->r_v454_absIds,
                        R_G008_maxRecurs);
     wrt_s_elem(OFFSET2, "context definition list", 
!                       pr_context->r_v455_pContextReason,
                        R_G008_maxRecurs);
!    wrt_tysign(OFFSET2, pr_context->r_v456_sesProtVers, "Session version",
                                                         EMPTY);
     wrt_s_elem(OFFSET2, "Internal abs-id", 
!                       pr_context->r_v457_internalAbsId,
                        R_C0a1_maxAutomata);
   
  /* ****************** 4. incoming event to automaton **************** */
***************
*** 250,257 ****
        return;
        }
     LG_CHECK (len, sizeof(R_int), 44); 
!    memcpy((char *)&cev, (char *)ev, sizeof(R_int));
!    switch (cev) {
        case R_C0d1_PConnectRequest:
           wrt_tysign(OFFSET1, "P-CONNECT REQ", "P-PM event", EMPTY);
           break;
--- 245,251 ----
        return;
        }
     LG_CHECK (len, sizeof(R_int), 44); 
!    switch (*ev) {
        case R_C0d1_PConnectRequest:
           wrt_tysign(OFFSET1, "P-CONNECT REQ", "P-PM event", EMPTY);
           break;
***************
*** 292,298 ****
           wrt_tysign(OFFSET1, "P-DATA-IND", "P-PM event", EMPTY);
           break;
        default:
!          wrt_tysign(OFFSET1, itoa(cev), "P-PM event", EMPTY);
           break;
        }
   
--- 286,292 ----
           wrt_tysign(OFFSET1, "P-DATA-IND", "P-PM event", EMPTY);
           break;
        default:
!          wrt_tysign(OFFSET1, itoa(*ev), "P-PM event", EMPTY);
           break;
        }
   
***************
*** 304,342 ****
        return;
        }
     LG_CHECK (len, sizeof (R_t0d1_p2), 45); 
-    memcpy((char *)&cpres, (char *)pres, sizeof(R_t0d1_p2));
     wrt(OFFSET1, "P-PM protocol parameter stack");
!    wrt_tysign(OFFSET2, cpres.r_v0d2_modeSelector, "mode selector", EMPTY);
!    wrt_tysign(OFFSET2, cpres.r_v0d3_protocolVersion,
                         "protocol version", EMPTY);
!    wrt_s_elem(OFFSET2, "agreed DCS", cpres.r_v0d4_agreedDCS,
                 (R_G003_maxAppliContexts * R_G002_maxAbstractSyntaxes + 1) );
!    wrt_s_elem(OFFSET2, "Context Reason", cpres.r_v0d5_pContextReason,
                         R_G008_maxRecurs);
!    wrt_s_elem(OFFSET2, "absIds", cpres.r_v0d6_absIds,
                         R_G008_maxRecurs);
!    wrt_tysign(OFFSET2, cpres.r_v0d7_defaultContextResult,
                         "default context res", EMPTY); 
!    wrt_tysign(OFFSET2, cpres.r_v0d8_resultProviderReason,
                         "tres provider reason",  EMPTY);
!    wrt_tysign(OFFSET2, cpres.r_v0d9_presentationRequirements,
                         "Pres requirements", EMPTY);
!    wrt_tysign(OFFSET2, cpres.r_v0da_userSessRequire,
                         "Sess requirements", EMPTY);
!    wrt_tysign(OFFSET2, cpres.r_v0db_EventIdentifier,
                         "Event idd", EMPTY); 
!    wrt_xd    (OFFSET2, "Calling selector", cpres.r_v0dc_callingSelector, 
!                        cpres.r_v0dd_callingSelectorLength);
     wrt_xd    (OFFSET2, "Called responding selector", 
!                        cpres.r_v0de_calledRespSelector, 
!                        cpres.r_v0df_calledRespSelectorLength);
!    wrt_tystr (OFFSET2, TorF(cpres.r_v0dw_PciPres), "PciPres", EMPTY);
!    wrt_s_elem(OFFSET2, "interAbsId", cpres.r_v0dx_interAbsId,
                         R_C0a1_maxAutomata);
  /*
!  *  wrt_extr_list (OFFSET2, "extern ref", &(cpres.r_v0dy_externRef) );
   */
!    wrt_tystr (OFFSET2, TorF(cpres.r_v0dz_udataFlag), "udata flag", EMPTY);
   
  /* ******************    end      *********************************** */
  /* ******************             *********************************** */
--- 298,335 ----
        return;
        }
     LG_CHECK (len, sizeof (R_t0d1_p2), 45); 
     wrt(OFFSET1, "P-PM protocol parameter stack");
!    wrt_tysign(OFFSET2, pres->r_v0d2_modeSelector, "mode selector", EMPTY);
!    wrt_tysign(OFFSET2, pres->r_v0d3_protocolVersion,
                         "protocol version", EMPTY);
!    wrt_s_elem(OFFSET2, "agreed DCS", pres->r_v0d4_agreedDCS,
                 (R_G003_maxAppliContexts * R_G002_maxAbstractSyntaxes + 1) );
!    wrt_s_elem(OFFSET2, "Context Reason", pres->r_v0d5_pContextReason,
                         R_G008_maxRecurs);
!    wrt_s_elem(OFFSET2, "absIds", pres->r_v0d6_absIds,
                         R_G008_maxRecurs);
!    wrt_tysign(OFFSET2, pres->r_v0d7_defaultContextResult,
                         "default context res", EMPTY); 
!    wrt_tysign(OFFSET2, pres->r_v0d8_resultProviderReason,
                         "tres provider reason",  EMPTY);
!    wrt_tysign(OFFSET2, pres->r_v0d9_presentationRequirements,
                         "Pres requirements", EMPTY);
!    wrt_tysign(OFFSET2, pres->r_v0da_userSessRequire,
                         "Sess requirements", EMPTY);
!    wrt_tysign(OFFSET2, pres->r_v0db_EventIdentifier,
                         "Event idd", EMPTY); 
!    wrt_xd    (OFFSET2, "Calling selector", pres->r_v0dc_callingSelector, 
!                        pres->r_v0dd_callingSelectorLength);
     wrt_xd    (OFFSET2, "Called responding selector", 
!                        pres->r_v0de_calledRespSelector, 
!                        pres->r_v0df_calledRespSelectorLength);
!    wrt_tystr (OFFSET2, TorF(pres->r_v0dw_PciPres), "PciPres", EMPTY);
!    wrt_s_elem(OFFSET2, "interAbsId", pres->r_v0dx_interAbsId,
                         R_C0a1_maxAutomata);
  /*
!  *  wrt_extr_list (OFFSET2, "extern ref", &(pres->r_v0dy_externRef) );
   */
!    wrt_tystr (OFFSET2, TorF(pres->r_v0dz_udataFlag), "udata flag", EMPTY);
   
  /* ******************    end      *********************************** */
  /* ******************             *********************************** */
*** ros_pm.c	Wed Dec 30 15:59:05 1992
--- ros_pm.c.orig	Fri Jul 31 15:35:08 1992
***************
*** 148,157 ****
  R_int                   *ev;
  R_t0f1_rose             *rose; 
  int                      len;
- R_idtype		csht;
- R_t750_ropmContext	ccontext;
- R_int			cev;
- R_t0f1_rose		crose;
   
  /* ****************** S T A R T ************************************* */
  /* ******************           ************************************* */
--- 148,153 ----
***************
*** 167,174 ****
        return;
        }
     LG_CHECK (len, sizeof (R_idtype), 34); 
!    memcpy((char *)&csht, (char *)sht, sizeof(R_idtype));
!    wrt_tysign(OFFSET0, csht, "Association-id", EMPTY);
   
  /* ****************** 2. protocol machine context ******************* */
  /* ******************                             ******************* */
--- 163,169 ----
        return;
        }
     LG_CHECK (len, sizeof (R_idtype), 34); 
!    wrt_tysign(OFFSET0, *sht, "Association-id", EMPTY);
   
  /* ****************** 2. protocol machine context ******************* */
  /* ******************                             ******************* */
***************
*** 178,185 ****
        return;
        }
     LG_CHECK (len, sizeof (R_t750_ropmContext), 35); 
!    memcpy((char *)&ccontext, (char *)context, sizeof(R_t750_ropmContext));
!    switch (ccontext.r_v751_ropmTrState) {
        case R_C761_STA100:
           wrt_tystr(OFFSET2, "STA100", "ROPM-Tr state", EMPTY);
           break;
--- 173,179 ----
        return;
        }
     LG_CHECK (len, sizeof (R_t750_ropmContext), 35); 
!    switch (context->r_v751_ropmTrState) {
        case R_C761_STA100:
           wrt_tystr(OFFSET2, "STA100", "ROPM-Tr state", EMPTY);
           break;
***************
*** 187,198 ****
           wrt_tystr(OFFSET2, "STA200", "ROPM-Tr state", EMPTY);
           break;
        default:
!          wrt_tystr(OFFSET2, itoa(ccontext.r_v751_ropmTrState), 
                              "ROPM-Tr state", EMPTY);
           break;
        }
   
!    switch (ccontext.r_v750_ropmState) {
        case R_C751_STA01:
           wrt_tystr(OFFSET2, "STA01", "ROPM state", EMPTY);
           break;
--- 181,192 ----
           wrt_tystr(OFFSET2, "STA200", "ROPM-Tr state", EMPTY);
           break;
        default:
!          wrt_tystr(OFFSET2, itoa(context->r_v751_ropmTrState), 
                              "ROPM-Tr state", EMPTY);
           break;
        }
   
!    switch (context->r_v750_ropmState) {
        case R_C751_STA01:
           wrt_tystr(OFFSET2, "STA01", "ROPM state", EMPTY);
           break;
***************
*** 200,219 ****
           wrt_tystr(OFFSET2, "STA02", "ROPM state", EMPTY);
           break;
        default:
!          wrt_tystr(OFFSET2, itoa(ccontext.r_v750_ropmState),
                              "ROPM state", EMPTY);
           break;
        }
   
!    wrt_tystr (OFFSET2, TorF(ccontext.r_v752_assocFlag), 
                         "Assoc flag", EMPTY);
!    wrt_tystr (OFFSET2, TorF(ccontext.r_v754_synchFlag), 
                         "Synch flag", EMPTY);
!    wrt_tysign(OFFSET2, ccontext.r_v755_invokeId, 
                         "Invoke-id", EMPTY);
!    wrt_tysign(OFFSET2, ccontext.r_v756_rejectCounter, 
                         "Reject counter", EMPTY);
!    wrt_tystr (OFFSET2, TorF(ccontext.r_v757_relPending),
                         "Release pending", EMPTY);
   
  /* ****************** 3. protocol automaton event ******************* */
--- 194,213 ----
           wrt_tystr(OFFSET2, "STA02", "ROPM state", EMPTY);
           break;
        default:
!          wrt_tystr(OFFSET2, itoa(context -> r_v750_ropmState),
                              "ROPM state", EMPTY);
           break;
        }
   
!    wrt_tystr (OFFSET2, TorF(context->r_v752_assocFlag), 
                         "Assoc flag", EMPTY);
!    wrt_tystr (OFFSET2, TorF(context->r_v754_synchFlag), 
                         "Synch flag", EMPTY);
!    wrt_tysign(OFFSET2, context->r_v755_invokeId, 
                         "Invoke-id", EMPTY);
!    wrt_tysign(OFFSET2, context->r_v756_rejectCounter, 
                         "Reject counter", EMPTY);
!    wrt_tystr (OFFSET2, TorF(context->r_v757_relPending),
                         "Release pending", EMPTY);
   
  /* ****************** 3. protocol automaton event ******************* */
***************
*** 224,231 ****
        return;
        }
     LG_CHECK (len, sizeof (R_int), 36); 
!    memcpy((char *)&cev, (char *)ev, sizeof(R_int));
!    switch (cev) {
        case R_C0f1_RO_BINDreq:
           wrt_tystr(OFFSET1, "RO-BINDreq", "Incoming event to RO-PM", EMPTY);
           break;
--- 218,224 ----
        return;
        }
     LG_CHECK (len, sizeof (R_int), 36); 
!    switch (*ev) {
        case R_C0f1_RO_BINDreq:
           wrt_tystr(OFFSET1, "RO-BINDreq", "Incoming event to RO-PM", EMPTY);
           break;
***************
*** 314,320 ****
           wrt_tystr(OFFSET1, "TRANSind", "Incoming event to RO-PM", EMPTY);
           break;
        default:
!          wrt_tystr(OFFSET1, itoa(cev), "Incoming event to RO-PM", EMPTY);
           break;
        }
   
--- 307,313 ----
           wrt_tystr(OFFSET1, "TRANSind", "Incoming event to RO-PM", EMPTY);
           break;
        default:
!          wrt_tystr(OFFSET1, itoa(*ev), "Incoming event to RO-PM", EMPTY);
           break;
        }
   
***************
*** 326,334 ****
        return;
        }
     LG_CHECK (len, sizeof(R_t0f1_rose), 37); 
-    memcpy((char *)&crose, (char *)rose, sizeof(R_t0f1_rose));
     wrt(OFFSET1,"RO-PM protocol parameter stack:");
!    switch (crose.r_v0f2_pduType) {
        case R_C0fm_RoivRosePdu:
           wrt_tystr(OFFSET2, "RO-INVOKE-REQ", "PDU type", EMPTY);
           break;
--- 319,326 ----
        return;
        }
     LG_CHECK (len, sizeof(R_t0f1_rose), 37); 
     wrt(OFFSET1,"RO-PM protocol parameter stack:");
!    switch (rose->r_v0f2_pduType) {
        case R_C0fm_RoivRosePdu:
           wrt_tystr(OFFSET2, "RO-INVOKE-REQ", "PDU type", EMPTY);
           break;
***************
*** 342,363 ****
  	 wrt_tystr(OFFSET2, "RO-REJECT", "PDU type", EMPTY);
           break;
        default:
!          wrt_tystr(OFFSET2, itoa(crose.r_v0f2_pduType), "PDU type", EMPTY);
           break;
        }
   
!    wrt_tysign(OFFSET2, crose.r_v0f3_assocClass, "Assoc-class", EMPTY);
!    wrt_tysign(OFFSET2, crose.r_v0f4_operaClass, "Oper-class", EMPTY);
!    wrt_tysign(OFFSET2, crose.r_v0f5_noInvokeId, "noInvokeId", EMPTY);
!    wrt_tysign(OFFSET2, crose.r_v0f6_invokeId, "Invoke Id", EMPTY);
!    wrt_tystr (OFFSET2, TorF(crose.r_v0f7_lnkvalId), "Link Val ID", EMPTY);
!    wrt_tysign(OFFSET2, crose.r_v0f8_linkedId, "Linked Id", EMPTY);
!    wrt_tysign(OFFSET2, crose.r_v0fc_RejectReason, "Reject Reason", EMPTY);
!    wrt_tysign(OFFSET2, crose.r_v0fd_choiceValue, "Choice Value", EMPTY);
!    wrt_tysign(OFFSET2, crose.r_v0fy_argResErr, "Arg res Err", EMPTY);
!    wrt_tystr (OFFSET2, TorF(crose.r_v0fz_udataFlag), "Udata flag", EMPTY);
!    wrt_tysign(OFFSET2, crose.r_v0fa_locOpErrVal, "Local ErrVal", EMPTY);
!    wrt_s_elem(OFFSET2, "Global ErrVal", crose.r_v0fb_glbOpErrVal, 1);
   
  /* ******************    end                ************************* */
  /* ******************                       ************************* */
--- 334,355 ----
  	 wrt_tystr(OFFSET2, "RO-REJECT", "PDU type", EMPTY);
           break;
        default:
!          wrt_tystr(OFFSET2, itoa(rose->r_v0f2_pduType), "PDU type", EMPTY);
           break;
        }
   
!    wrt_tysign(OFFSET2, rose->r_v0f3_assocClass, "Assoc-class", EMPTY);
!    wrt_tysign(OFFSET2, rose->r_v0f4_operaClass, "Oper-class", EMPTY);
!    wrt_tysign(OFFSET2, rose->r_v0f5_noInvokeId, "noInvokeId", EMPTY);
!    wrt_tysign(OFFSET2, rose->r_v0f6_invokeId, "Invoke Id", EMPTY);
!    wrt_tystr (OFFSET2, TorF(rose->r_v0f7_lnkvalId), "Link Val ID", EMPTY);
!    wrt_tysign(OFFSET2, rose->r_v0f8_linkedId, "Linked Id", EMPTY);
!    wrt_tysign(OFFSET2, rose->r_v0fc_RejectReason, "Reject Reason", EMPTY);
!    wrt_tysign(OFFSET2, rose->r_v0fd_choiceValue, "Choice Value", EMPTY);
!    wrt_tysign(OFFSET2, rose->r_v0fy_argResErr, "Arg res Err", EMPTY);
!    wrt_tystr (OFFSET2, TorF(rose->r_v0fz_udataFlag), "Udata flag", EMPTY);
!    wrt_tysign(OFFSET2, rose->r_v0fa_locOpErrVal, "Local ErrVal", EMPTY);
!    wrt_s_elem(OFFSET2, "Global ErrVal", rose->r_v0fb_glbOpErrVal, 1);
   
  /* ******************    end                ************************* */
  /* ******************                       ************************* */
*** wrtevnt.c	Wed Dec 30 16:31:54 1992
--- wrtevnt.c.orig	Fri Jul 31 15:35:09 1992
***************
*** 82,99 ****
  void wrt_abinev(evtpb)
  R_evtpb FAR         *evtpb;
  {
- R_evtpb evt;
- 
- memcpy((char *)&evt, (char *)evtpb, sizeof(R_evtpb));
- 
     wrt_head("ABINEV");
   
!    wrt_tysign(OFFSET2, evt.r_evnthd.r_evtype, "EVTYPE", EMPTY); /* short        */
!    wrt_tysign(OFFSET2, evt.r_abinev.r_result, "RESULT", EMPTY); /* short        */
!    wrt_tysign(OFFSET2, evt.r_abinev.r_adinfo, "ADINFO", EMPTY); /* short        */
!    wrt_tysign(OFFSET2, evt.r_abinev.r_assid , "ASSID ", EMPTY); /* short        */
   
!    wrt_evdata(&evt.r_abinev.r_evdata, "EVDATA");
   
     wrt_tail("ABINEV");
  }
--- 82,95 ----
  void wrt_abinev(evtpb)
  R_evtpb FAR         *evtpb;
  {
     wrt_head("ABINEV");
   
!    wrt_tysign(OFFSET2, evtpb->r_evnthd.r_evtype, "EVTYPE", EMPTY); /* short        */
!    wrt_tysign(OFFSET2, evtpb->r_abinev.r_result, "RESULT", EMPTY); /* short        */
!    wrt_tysign(OFFSET2, evtpb->r_abinev.r_adinfo, "ADINFO", EMPTY); /* short        */
!    wrt_tysign(OFFSET2, evtpb->r_abinev.r_assid , "ASSID ", EMPTY); /* short        */
   
!    wrt_evdata(&evtpb->r_abinev.r_evdata, "EVDATA");
   
     wrt_tail("ABINEV");
  }
***************
*** 108,126 ****
  void wrt_bncnev(evtpb)
  R_evtpb FAR         *evtpb;
  {
- R_evtpb evt;
- 
- memcpy((char *)&evt, (char *)evtpb, sizeof(R_evtpb));
- 
     wrt_head("BNCNEV");
   
!    wrt_tysign(OFFSET2, evt.r_evnthd.r_evtype, "EVTYPE", EMPTY); /* short        */
!    wrt_tysign(OFFSET2, evt.r_bncnev.r_assid , "ASSID ", EMPTY); /* short        */
!    wrt_tysign(OFFSET2, (int) evt.r_bncnev.r_result, "RESULT", EMPTY); /* short        */
   
!    wrt_objid(&evt.r_bncnev.r_aetitl, "AETITL");
   
!    wrt_evdata(&evt.r_bncnev.r_evdata, "EVDATA");
   
     wrt_tail("BNCNEV");
  }
--- 104,118 ----
  void wrt_bncnev(evtpb)
  R_evtpb FAR         *evtpb;
  {
     wrt_head("BNCNEV");
   
!    wrt_tysign(OFFSET2, evtpb->r_evnthd.r_evtype, "EVTYPE", EMPTY); /* short        */
!    wrt_tysign(OFFSET2, evtpb->r_bncnev.r_assid , "ASSID ", EMPTY); /* short        */
!    wrt_tysign(OFFSET2, (int) evtpb->r_bncnev.r_result, "RESULT", EMPTY); /* short        */
   
!    wrt_objid(&evtpb->r_bncnev.r_aetitl, "AETITL");
   
!    wrt_evdata(&evtpb->r_bncnev.r_evdata, "EVDATA");
   
     wrt_tail("BNCNEV");
  }
***************
*** 135,154 ****
  void wrt_bninev(evtpb)
  R_evtpb FAR         *evtpb;
  {
- R_evtpb evt;
- 
- memcpy((char *)&evt, (char *)evtpb, sizeof(R_evtpb));
- 
     wrt_head("BNINEV");
   
!    wrt_tysign(OFFSET2, evt.r_evnthd.r_evtype, "EVTYPE", EMPTY); /* short        */
!    wrt_tysign(OFFSET2, evt.r_bninev.r_assid , "ASSID ", EMPTY); /* short        */
!    wrt_tysign(OFFSET2, evt.r_bninev.r_aplid , "APPLID", EMPTY); /* short        */
!    wrt_tysign(OFFSET2, evt.r_bninev.r_pid   , "PID   ", EMPTY); /* short        */
                 
!    wrt_objid(&evt.r_bninev.r_ptcon, "PTCON");
   
!    wrt_evdata(&evt.r_bninev.r_evdata, "EVDATA");
   
     wrt_tail("BNINEV");
  }
--- 127,142 ----
  void wrt_bninev(evtpb)
  R_evtpb FAR         *evtpb;
  {
     wrt_head("BNINEV");
   
!    wrt_tysign(OFFSET2, evtpb->r_evnthd.r_evtype, "EVTYPE", EMPTY); /* short        */
!    wrt_tysign(OFFSET2, evtpb->r_bninev.r_assid , "ASSID ", EMPTY); /* short        */
!    wrt_tysign(OFFSET2, evtpb->r_bninev.r_aplid , "APPLID", EMPTY); /* short        */
!    wrt_tysign(OFFSET2, evtpb->r_bninev.r_pid   , "PID   ", EMPTY); /* short        */
                 
!    wrt_objid(&evtpb->r_bninev.r_ptcon, "PTCON");
   
!    wrt_evdata(&evtpb->r_bninev.r_evdata, "EVDATA");
   
     wrt_tail("BNINEV");
  }
***************
*** 163,182 ****
  void wrt_erinev(evtpb)
  R_evtpb FAR         *evtpb;
  {
- R_evtpb evt;
- 
- memcpy((char *)&evt, (char *)evtpb, sizeof(R_evtpb));
- 
     wrt_head("ERINEV");
   
!    wrt_tysign(OFFSET2, evt.r_evnthd.r_evtype, "EVTYPE", EMPTY); /* short        */
   
!    wrt_opval(&evt.r_erinev.r_erval, "ERVAL");
   
!    wrt_tysign(OFFSET2, evt.r_erinev.r_assid, "ASSID ", EMPTY); /* short        */
!    wrt_tysign(OFFSET2, evt.r_erinev.r_invid, "INVID ", EMPTY); /* short        */
   
!    wrt_evdata(&evt.r_erinev.r_evdata, "EVDATA");
   
     wrt_tail("ERINEV");
  }
--- 151,166 ----
  void wrt_erinev(evtpb)
  R_evtpb FAR         *evtpb;
  {
     wrt_head("ERINEV");
   
!    wrt_tysign(OFFSET2, evtpb->r_evnthd.r_evtype, "EVTYPE", EMPTY); /* short        */
   
!    wrt_opval(&evtpb->r_erinev.r_erval, "ERVAL");
   
!    wrt_tysign(OFFSET2, evtpb->r_erinev.r_assid, "ASSID ", EMPTY); [treff 01/12/92 public]
ASsigned to Norbert.

[03/23/93 public]
Thanks for the fix, Weidong.  Since this is basically a code cleanup
task, we defer until 1.1

[01/17/94 public]
This has been fixed in the dce1.0.3 delivery.

[1/18/94 public]
closed.



CR Number                     : 6684
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : other
S/W Ref Platform              : other
Component Name                : gds
Subcomponent Name             : gds/stub/d25revent.c
Short Description             : Alignment problem in d25_rosevent() (d25revent.c)
Reported Date                 : 12/29/92
Found in Baseline             : 1.0.1
Found Date                    : 12/29/92
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b2
Affected File(s)              : gds/ros/*
Sensitivity                   : public

[12/29/92 public]

Full Description:

	[this still exists in 1.0.2 code]

	When receiving some data, d25_rosevent() tries to copy to another
structure:

                ipcptr->d25_iudat = *((D25_usrdat *) rcvdatref->r_bufref) ;

where rcvdatref->r_bufref is of type char *, and ipcptr->d25_iudat is a
structure which contains int elements.

	On machines where variables can reside on any boundary, this is not
a problem. But for machines where different typed variables reside on
different boundaries, this can cause alignment error, which in turn gives 
bus error.

	Sparc is such a machine. You cannot cast of pointer which points to
a small sized variable to a larger one.

	This also brings up another problem with stub process. Stub process
does not handle signals gracefully. As such, when a bus error occurrs, it
simples dumps core. No warning is prompted to the user trough any channel.
As a result, it is hard to people to even know that the stub process has died.

Repeat By:

	Try to do sth on sparc. Once communication is started, the stub
process will die because of bus error.

Proposed Solution:

	Use memcpy() to do the copy. Here is a diff:

*** d25revent.c Tue Dec 29 13:46:30 1992
--- d25revent.c.orig    Fri Jul 31 15:35:14 1992
***************
*** 238,250 ****
                    return (D25_ERROR) ;
                }
                rosptr->d25_rabsid = rcvdatref->r_absid ;
- 
-               /* The following assignment is error prone. It may cause
-                  alignment error (Bus error)
                ipcptr->d25_iudat = *((D25_usrdat *) rcvdatref->r_bufref) ;
-               */
-               memcpy((char *)&(ipcptr->d25_iudat), rcvdatref->r_bufref,
-                       sizeof(D25_usrdat));
            }
        }
      }
--- 238,244 ----

[01/12/93 public]
Uhh, ok, assigned to Norbert.  For any of these sparc-generated bugs, I'm
going to ask Weidong to verify them when they're fixed, since he's
the only one who can do it.

[03/23/93 public]
Looks like code cleanup task to me.  Deferred till 1.1

[01/17/94 public]
This bug has been fixed in the 1.0.3 delivery.

[1/18/94 public]
We don't have any way to verify this fix, so ... closed.



CR Number                     : 6675
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : gds
Subcomponent Name             : directory/xom/omRead.c
Short Description             : OM_READ() DOES NOT RETURN
CORRECT VALUE FOR NEXT_POSITION
Reported Date                 : 12/29/92
Found in Baseline             : 1.0.1
Found Date                    : 12/29/92
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : xom/omRead.c
Sensitivity                   : public

[12/29/92 public]

Full Description:

   During an om_read operation, when a Starting Position is supplied that
   exceeds the length of the purported string in 'subject', a Next Position
   of 0 should be returned, but is not.

[01/12/93 public]
Assigned to Norbert.

[03/23/93 public]
Downgraded to 4

[06/08/93 public]
Changed "Fix By Baseline" field from 1.0.2 to 1.0.3.

[08/17/93 public]
Fixed in the July 1993 code drop.

[9/13/93 public]
Closed



CR Number                     : 6657
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : gds
Subcomponent Name             : gds/dsa/retolis.c
Short Description             : The aliased object is not found by the search
Reported Date                 : 12/28/92
Found in Baseline             : 1.0.1
Found Date                    : 12/28/92
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : retorlis.c
Sensitivity                   : public

[12/28/92 public]

Full Description:

         DSA search operation does not dereference alias objects.
         The scenario is,
         one of the subordinates of the base object is an alias and one of the
         filter items refer to the object pointed to by the alias. The search
         stops  at the alias object.

Repeat By:
Proposed Solution:

         We have not found a solution, although we have some pointers on where
         the problem lies.

        Source: retolis.c

        We think that once an alias object is found, it should be dereferenced
        and a the function "d26_i44_write_set" should be called to continue
        the search on the dereferenced object.

[06/08/93 public]
Changed "Fix By Baseline" field from 1.0.2 to 1.0.3.

[08/16/93 public]
Already fixed in 1.0.2. Checked that it is also in 1.0.3 code drop
from July 1993.

[9/13/93 public]
Closed



CR Number                     : 6599
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gdssysadm
Short Description             : gdssysadm: Insufficient error message,"The selected function can't be executed"
Reported Date                 : 12/22/92
Found in Baseline             : 1.0.1
Found Date                    : 12/22/92
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b6
Affected File(s)              : admin files, message catalogs
Sensitivity                   : public

[12/22/92 public]

When an error is detected, gdssysadm does not provide, via it's screen
interface, adequate causal information in it's errro message. This makes it
very tedious for the admistrator to determine the cause of the problem.
Typically, the admistrator must turn on the gdssysadm tracing system
(D2_TRACE=on; export D2_TRACE) and then look in the log file in
/opt/dcelocal/var/adm/directory/gds/adm to obtain more detailed information
about what went wrong. Our suggestion is that the all-pupose gdssysadm
error message 'Error: The selected function can't be executed !' be
replaced by a collection of specific messages and that gdssysadm choose
form this collection a message which more precisely indicates the cause of
the problem.

[01/29/93 public]

This will not been fixed in DCE1.0.2. This is an enhancement which
will come with the admin enhancements in DCE1.1.

[3/22/93 public]
Deferred until 1.0.3.

[5/4/94 public]
Closed.



CR Number                     : 6585
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : gds
Subcomponent Name             : dsa
Short Description             : Modification operations do not return referrals
Reported Date                 : 12/22/92
Found in Baseline             : 1.0.1
Found Date                    : 12/22/92
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dsa/mod*.c
Sensitivity                   : public

[12/22/92 public]

Full Description:

        Scenario: When trying to perform a modification operation on a remote
            object, but with the context parameter set so that there is no
            chaining or referral, the remote object is still modified. Instead
            a referral should be returned.  (This happens on modify_entry
            and modify_rdn.  In fact, by reviewing the code it looks like
            add_entry and remove_entry do not handle referrals either).
        Effects: When trying to modify an object, some bits of the context
            parameter are not being considered (ie. chaining_prohibited and
            automatic_continuation is false).

Repeat By:

        Perform a modify operation on a remote object with chaining prohibited
        and automaitc continuation off (no referral).

Proposed Solution:

        The context parameters should be checked in the DSA to see whether
	or not an operation should be chained, continued, or return a
	referral error to the application.

[4/23/93 public]
I have been so far unable to verify this fix.  Deferred into 1.0.3,
with me on the hook to verify it.

[08/18/93 public]
Fixed by July 1993 code drop.

[11/10/93 public]



CR Number                     : 6574
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000,pmax
S/W Ref Platform              : aix,osf1
Component Name                : gds
Subcomponent Name             : gdsipcchk
Short Description             : IPC-check error when starting gds processes.
Reported Date                 : 12/22/92
Found in Baseline             : 1.0.1
Found Date                    : 12/22/92
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.0.3
Affected File(s)              : src/directory/gds/h/d23ipc.h
Sensitivity                   : public

[12/22/92 public]

    When attempting to start GDS using 'gdssysadm', IPC-Check returns
with an ERROR.  What GDS processes are started is indeterminate.  The
reason for this is that the IPC-Check process verifies that the PIDs
of other GDS processes (ie. gdscache, gdscstub, gdssstub, etc.)
are within the range 0 - 65535 (Hex 'FFFF').  This check is made
to ensure that when the IPC-message (queue) header is built, the
IPC destination ID of the message type fits into a 16 bit field. See the
D23_ipcmsg structure in d23ipc.h which contains a message type
(d23_mtype) whose lowest 16 bits represents the IPC-destination-ID.

     On AIX and OSF1, process IDs have a limit of 2 gigs (Hex 'FFFFFFFF'),
which exceeds the 16 bits IPC-Check assumes.  When GDS processes are
created whose PIDs are greater than 65535, we get an IPC-check returns an
error which can only be corrected by rebooting the machine, thereby
resetting the assigment of pids to low numbers.

Repeat By:

        Start the GDS system when the PIDs on the system will be greater
than 65565.

Proposed Solution:

        Make the IPC-destination-ID a 32-bit field instead of a 16-bit field.

[2/10/93 public]

There is no problem to make the IPC destination-ID a 32-bit field,
but the the PID is used in the MSG-ID for messagequeues and this is a
long and I have only 16 bit for the PID because some other information
must be stored also in tis MSG-ID.

I never get on my RS6000 a process-ID > 16-bit field (65000)

[2/10/93 public]

AIX can allocate PIDs greater than 16 bit pids. You can verify this
on your RS6000 as follows.

chdev -l sys0 -a maxuproc=100000

then compile and execute the following program

#include <errno.h>
int main()
{
  int i,j = 0;
  do 
  {
    j++;

    if ((i = fork()) == 0) exit(0);

    else if (i > 65535)
     printf("a PID (%d) which will not fit in 16 bits was just allocated\n",i);

    else if (i < 0)
      printf("%dth fork failed. errno = %d\n",j,errno);

  } while ((i > 0) && (i <= 65535));
}

Note that maxuproc=100000 is not a necessary condition for AIX to allocate
large pids, Nor does it modify the limit of AIX generated pid numbers. This
change simply serves as a convienent means to demonstrate this behavior
from a single process.

[2/23/93 public]
Assigned to Norbert.

[3/23/93 public]
Deferred until 1.0.3 . . .

[10/7/93 public]
Defect aging time-out.  Bumped up to priority 1.

[10/15/93 public]

Defered until 1.0.3, amid further discussion.

[10/18/93 public]
Fixed in October 1.0.3 code drop.

[11/10/93 public]



CR Number                     : 6569
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 293
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gdsditadm
Short Description             : Adding an alias under a copy should not be permitted and it is.
Reported Date                 : 12/22/92
Found in Baseline             : 1.0.1
Found Date                    : 12/22/92
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : directory/gds/dsa/addob.c
Sensitivity                   : public

[12/22/92 public]

Full Description:

     When trying to add a remote alias, and the parent object exists
as a shadow on the local DSA, the alias is added both to the local and
remote DSA.  This should not occur.  An error should be returned as you
are not supposed to be able to add remote aliases, and an alias cannot
exist as a copy as it has no master knowledge attribute.  The master
knowledge ofthe parent should be checked against the local DSA name to
ensure that they are the same before adding the alias.

        Effects:

        The alias gets created on two DSAs, and must be removed from each DSA
        locally.  The remote alias is also not stored correctly... a
        a flag in the CISAM file is not set.

Repeat By:

        Add an alias which should exist on a remote dsa.

Proposed Solution:

        When the object is to be added, if it is an alias the master
knowledge of the parent should be checked against the local DSA name, to ensure
that they both reside on the same DSA.  If they do not, the operation should
return an error.

[4/23/93 public]
Unable to verify, due to time constraints.  Deferred into 1.0.3,
with me responsible for verifying the fix.

[08/18/93 public]
Fixed in July 1993 code drop.

[11/10/93 public]



CR Number                     : 6464
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : other
S/W Ref Platform              : other
Component Name                : gds
Subcomponent Name             : gds/ipc/d23ipcinit.c
Short Description             : The last parameter for semctl should be a union typed var
Reported Date                 : 12/15/92
Found in Baseline             : 1.0.1
Found Date                    : 12/15/92
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : gds/ipc/d23ipcinit.c
Sensitivity                   : public

[12/15/92 public]

Full Description:

        gds/ipc/d23ipcinit.c creates shared memory, semaphore, and message
        queue. Then it calls semctl() to set the initial value (1) for the
        semaphore:

    if (semctl (semid, D23_MXSEMA, SETALL, seminit) == -1) {

        seminit is an array of ushort.

        The man page of semctl() on OSF/1 and SunOS say that the last
parameter
        should be of type :

        union semun {
                int val;
                struct semid_ds *buf;
                ushort *array;
        }

        Although both AIX and OSF/1 do not have assignment problem when an
        element of a union is passed instead of the union itself, other
	machines will panic. Sparc does. I got bad address error.

        This is similar to OT5203 which I filed a while ago (closed).


Proposed Solution:

        Declare a var of the type of union, and assign the seminit to the 
        arrary element. Then pass the union var to semctl().

[01/29/93 public]

On SVR4 and on our RIOS I don't have this union in the include file
sys/sem.h.

[2/23/93 public]
Assigned to Norbert.

[3/23/93 public]

Folks: XPG4 has it as

int semctl (int semid, int semnum, int cmd, ...)

Please note the lack of a fourth arg.  Arrgh.
So:  it's a code cleanup thang.  Deferred until 1.1

[5/18/94 public]
We don't understand this error message. The union semun contains elements,
that should be aligned to a 4-byte address.
        union semun {
                int val;
                struct semid_ds *buf;
                ushort *array;
        }

and that is all, what is entered in the call of semctl(). Though seminit is
an array of ushort's, seminit itself is aligned and points to the start
address of ushort's, that can be 2-byte aligned.
We are estimating that the SUN needs also the address, seminit points to,
on a 4-byte address. But this should be solved, when seminit is declared.

Has somebody an idea, why semun must be used? If this is an internal 
error on SUN, this error should be cancelled. Using semun does not
align the address, the pointers are pointing to.

[5/18/94 public]
First of all, it is not just SunOS (not sure about Solaris) that declares 
the 4th arg as union semun. OSF/1 uses the union too. No, this is not an
internal error of Sun.

Secondly, using a union DOES align the address, particularly if the underlying
architecture requires it. Obviously rs/6k, 386/486 have no such alignment
requirement. But for Sparc, ushort is 2-byte aligned, integer is 4-byte
aligned. Using a union of ushort and int will make everything 4-byte aligned.

Pointers are a little different. They have to be aligned too. Besides, pointers
and integers don't mix. Pointers for ushort and pointers for struct don't mix.
This is the requirement of Sparc arch. Pls refer to Sparc arch manual for
details.

This is why if a function parameter is declared as union, you cannot simply
pass in an element of the union.

Going back to your question, why semun is a must? To solve the poential
alignment problem. As I said long ago, if we only care about running on the
ref platforms, go ahead and cancel this OT. But the problem is there. I got
core dump when porting this code to Sparc. other people will get the same
problem whne porting to a strict alignment arch.

[06/21/94 public]
Fixed by today's submission.



CR Number                     : 6427
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : other
S/W Ref Platform              : other
Component Name                : gds
Subcomponent Name             : gds/h/d20_adm.h, gds/h/d2adm.h
Short Description             : Message catalog file should be specified with ".cat"
Reported Date                 : 12/11/92
Found in Baseline             : 1.0.1
Found Date                    : 12/11/92
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : gds/h/d2adm.h, gds/h/d20adm.h
Sensitivity                   : public

[12/11/92 public]

Full Description:

	When d20_adm.h specifies D20_ADMIN_NLSFILE (and D20_ADMINHELP_NLSFILE
	in 1.0.2), it has a "#if defined". If it is for OSF/1 and AIX, then
	they are specified with ".cat". Otherwise, ".cat" is not added.

	This imposes a problem for porting to other platforms, since either
	catopen or catgets will fail. True, people can set NLSPATH to %N.cat,
	but that contrdicts with DCE's other catalog proctice where it is
	always assumed that NLSPATH ends with %N. 

	Same thing for d2adm.h for D20_ADM_NLSFILE.

Repeat By:

	code review

Proposed Solution:

	for d20_adm.h, change:

#if defined (DCELOCAL_PATH)
#   if defined (__OSF1__) || defined (_AIX)
#define D20_ADMIN_NLSFILE   "gdssysadm.cat"
#   else
#define D20_ADMIN_NLSFILE   "gdssysadm"
#   endif
#else
#define D20_ADMIN_NLSFILE   "d20admin"
#endif

to:

#if defined (DCELOCAL_PATH)
#define D20_ADMIN_NLSFILE   "gdssysadm.cat"
#else
#define D20_ADMIN_NLSFILE   "d20admin.cat"
#endif

	for d2adm.h, change:

#if defined (DCELOCAL_PATH)
#   if defined (__OSF1__) || defined (_AIX)
#define D20_ADM_NLSFILE "gdsditadm.cat"
#   else
#define D20_ADM_NLSFILE "gdsditadm"
#   endif
#else
#define D20_ADM_NLSFILE "d20adm"
#endif

to:

#if defined (DCELOCAL_PATH)
#define D20_ADM_NLSFILE "gdsditadm.cat"
#else
#define D20_ADM_NLSFILE "d20adm.cat"
#endif

[01/29/93 public]
on SVR4 the .cat is set in the NLSPATH so you should not
give it by the catopen.

[2/23/93 public]
Assigned to Norbert.

[3/23/93 public]
Clearly a code cleanup issue.  Deferred until 1.1

[07/07/94 public]
Fixed. Submitted yesterday. We have now just

#define D20_ADM_NLSFILE "gdsditadm.cat"
#define D20_ADMHELP_NLSFILE "gdsdithelp.cat"

#define D20_ADMIN_NLSFILE     "gdssysadm.cat"
#define D20_ADMINHELP_NLSFILE "gdssyshelp.cat"

and no #ifdef at all.

[7/11/94 public]
Closed.  Verified by manual inspection.



CR Number                     : 5032
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : other
S/W Ref Platform              : other
Component Name                : gds
Subcomponent Name             : gds/gda/Makefile
Short Description             : -lbsd is not always present
Reported Date                 : 8/12/92
Found in Baseline             : 1.0.1
Found Date                    : 8/12/92
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b3
Affected File(s)              : gds/gda/Makefile
Sensitivity                   : public

[8/12/92 public]

        gda_child_LIBS says that it will search for -lbsd for all platforms
        except svr4. Sun does not not -lbsd either.

[12/08/92 public]
I don't think that  it is still necessary to link -lbsd,
but who is responible for this?

[2/23/93 public]
Assigned to Norbert.

[3/23/93 public]
Deferred until 1.1, per code cleanup task.

[2/16/94 public]
Closed.  This isn't true as of DCE1.1 so this must have been fixed sometime
in the past.  Probably for dce1.0.3



CR Number                     : 4869
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : other
S/W Ref Platform              : other
Component Name                : gds
Subcomponent Name             : gds/oss/prod/{cmx2k.c cmxinet.c cmxinup.c cmxtrace.c  emiface.c} gds/stub/d25evmgt.c
Short Description             : Not every system has <sys/select.h>
Reported Date                 : 7/29/92
Found in Baseline             : 1.0.1
Found Date                    : 7/29/92
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : see subcomponent
Sensitivity                   : public

[7/29/92 public]

        The above files include <sys/select.h> when __OSF__ and MIPSEL are
        not defined. But not every system has this system include file.
        Sun does not have it. It is included for the definitions of
        FD_?????? commands, which are defined in <sys/types.h> for Sun.

Proposed Solution:

        I filed a similar report against thread test code's using of
        <sys/select.h> (ot 4005). It is fixed by adding a check for whether
        FD_SET is defined. My current fix for these files is similar:
        adding a check for if FD_SET or FD_ZERO is defined.

[12/08/92 public]
This works on AIX ,PMAX, and SVR4. Idon't want to change this now.
We can decide for Code cleanup what should be changed.

[8/6/92 public]

One more file: directory/gds/oss/prod/cmxl.c
Yet another: directory/gds/oss/prod/cmxlup.c

[2/23/93 public]
Assigned to Norbert.

[3/23/93 public]
Deferred till 1.1, per code-cleanup.

[06/21/94 public]
Fixed by today's submission.



CR Number                     : 4328
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : shadow administration
Short Description             : informative error messages...NOT!
Reported Date                 : 6/18/92
Found in Baseline             : 1.0.1b20
Found Date                    : 6/18/92
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b9
Affected File(s)              : gds/msg/En/d20adm.msg
Sensitivity                   : public

[6/18/92 public]
When I was trying to create a shadow and shadowing job, I got the message

  ERROR! Can't create shadow job! 

or something close to that.  My problem was that I did not turn on 
updates when configuring the directory service.  I think that GDS should 
be able to figure out that I didn't turn on updates, and let tell me that
instead of this vague error message.  I know that as you read this you are
thinking  "what a bonehead, of course you can't create a shadow if you 
didn't turn on updates...you got what you deserved!", but I still think
the message should be more intelligent.  :-)

[12/9/92 public]
This is not a real bug. It's an enhancement.
This could be done a little bit better, but many things
could be better. This should be deferred for this Version.

[01/14/92 public]
Yup, I agree. Sorry, Mark.  Enhancement, deferred until 1.0.3

[06/07/94 public]
Fixed with the code submission for the beta release of dce1.1:
you can't reach the menu point, if updates are not turned on. 
In the next version, the creation of shadow jobs is always possible.

[6/20/94 public]
Fix verified.



CR Number                     : 3100
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : pmax
S/W Ref Platform              : osf1
Component Name                : gds
Subcomponent Name             : 
Short Description             : remove all -DSYS5ATT from cc lines
Reported Date                 : 4/28/92
Found in Baseline             : 1.0.1b13
Found Date                    : 4/28/92
Severity                      : E
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : October 1.0.3 code drop
Sensitivity                   : public

[4/28/92 public]
Remove the -DSYS5ATT from all the cc lines that have it.  In some cases
this is just cosmetic (but should be done), but in other (particularly all
the times cget.c is compiled) this is a real bug that prevents compilation.

Here are the command lines and directories they appear in:

 [ /directory/gds/cacheadm/adm_iapl ]
/u1/lbe/build/dce_lbe/tools/pmax/macho/gcc -B/u1/lbe/build/dce_lbe/tools/pmax/macho/  -c   -D_SHARED_LIBRARIES   -DSYS5ATT     -I. -I/u1/lbe/build/dce_lbe/src/directory/gds/cacheadm/adm_iapl  -I../../h -I/u1/lbe/build/dce_lbe/src/directory/gds/h -I/u1/lbe/build/dce_lbe/export/pmax/usr/include -pic-lib   -L/u1/lbe/build/dce_lbe/export/pmax/usr/shlib -L/usr/shlib -L/u1/lbe/build/dce_lbe/export/pmax/usr/lib  -ldce   ../../../../../../src/directory/gds/adm/adm_iapl/mess.c

 [ /directory/gds/adm/adm_iapl ]
/u1/lbe/build/dce_lbe/tools/pmax/macho/gcc -B/u1/lbe/build/dce_lbe/tools/pmax/macho/  -c   -D_SHARED_LIBRARIES   -DSYS5ATT     -I. -I/u1/lbe/build/dce_lbe/src/directory/gds/adm/adm_iapl  -I../../h -I/u1/lbe/build/dce_lbe/src/directory/gds/h -I/u1/lbe/build/dce_lbe/export/pmax/usr/include -pic-lib   -L/u1/lbe/build/dce_lbe/export/pmax/usr/shlib -L/usr/shlib -L/u1/lbe/build/dce_lbe/export/pmax/usr/lib  -ldce   ../../../../../../src/directory/gds/adm/adm_iapl/mess.c

 [ /directory/gds/adm/delupd ]
/u1/lbe/build/dce_lbe/tools/pmax/macho/gcc -B/u1/lbe/build/dce_lbe/tools/pmax/macho/  -c   -D_SHARED_LIBRARIES   -DSYS5ATT     -I. -I/u1/lbe/build/dce_lbe/src/directory/gds/adm/delupd  -I../../h -I/u1/lbe/build/dce_lbe/src/directory/gds/h -I/u1/lbe/build/dce_lbe/export/pmax/usr/include -pic-lib   -L/u1/lbe/build/dce_lbe/export/pmax/usr/shlib -L/usr/shlib -L/u1/lbe/build/dce_lbe/export/pmax/usr/lib  -ldce   ../../../../../../src/directory/gds/adm/delupd/d20errfile.c

 [ /directory/gds/dsa ]
/u1/lbe/build/dce_lbe/tools/pmax/macho/gcc -B/u1/lbe/build/dce_lbe/tools/pmax/macho/  -c   -D_SHARED_LIBRARIES   -DSYS5ATT -DDAEMON     -I. -I/u1/lbe/build/dce_lbe/src/directory/gds/dsa  -I../h -I/u1/lbe/build/dce_lbe/src/directory/gds/h -I../cisam/isam -I/u1/lbe/build/dce_lbe/src/directory/gds/cisam/isam -I/u1/lbe/build/dce_lbe/export/pmax/usr/include -pic-lib   -L/u1/lbe/build/dce_lbe/export/pmax/usr/shlib -L/usr/shlib -L/u1/lbe/build/dce_lbe/export/pmax/usr/lib  -ldce   d26loggd.c

 [ /directory/gds/dsa ]
/u1/lbe/build/dce_lbe/tools/pmax/macho/gcc -B/u1/lbe/build/dce_lbe/tools/pmax/macho/  -c   -D_SHARED_LIBRARIES   -DSYS5ATT     -I. -I/u1/lbe/build/dce_lbe/src/directory/gds/dsa  -I../h -I/u1/lbe/build/dce_lbe/src/directory/gds/h -I../cisam/isam -I/u1/lbe/build/dce_lbe/src/directory/gds/cisam/isam -I/u1/lbe/build/dce_lbe/export/pmax/usr/include -pic-lib   -L/u1/lbe/build/dce_lbe/export/pmax/usr/shlib -L/usr/shlib -L/u1/lbe/build/dce_lbe/export/pmax/usr/lib  -ldce   ../../../../../src/directory/gds/dsa/retutil.c

 [ /directory/gds/dsa ]
/u1/lbe/build/dce_lbe/tools/pmax/macho/gcc -B/u1/lbe/build/dce_lbe/tools/pmax/macho/  -c   -D_SHARED_LIBRARIES   -DSYS5ATT     -I. -I/u1/lbe/build/dce_lbe/src/directory/gds/dsa  -I../h -I/u1/lbe/build/dce_lbe/src/directory/gds/h -I../cisam/isam -I/u1/lbe/build/dce_lbe/src/directory/gds/cisam/isam -I/u1/lbe/build/dce_lbe/export/pmax/usr/include -pic-lib   -L/u1/lbe/build/dce_lbe/export/pmax/usr/shlib -L/usr/shlib -L/u1/lbe/build/dce_lbe/export/pmax/usr/lib  -ldce   ../../../../../src/directory/gds/dsa/d26init.c

 [ /directory/gds/dsa ]
/u1/lbe/build/dce_lbe/tools/pmax/macho/gcc -B/u1/lbe/build/dce_lbe/tools/pmax/macho/  -c   -D_SHARED_LIBRARIES   -DSYS5ATT     -I. -I/u1/lbe/build/dce_lbe/src/directory/gds/dsa  -I../h -I/u1/lbe/build/dce_lbe/src/directory/gds/h -I../cisam/isam -I/u1/lbe/build/dce_lbe/src/directory/gds/cisam/isam -I/u1/lbe/build/dce_lbe/export/pmax/usr/include -pic-lib   -L/u1/lbe/build/dce_lbe/export/pmax/usr/shlib -L/usr/shlib -L/u1/lbe/build/dce_lbe/export/pmax/usr/lib  -ldce   ../../../../../src/directory/gds/dsa/d26logg.c

 [ /directory/gds/adm/usradmin ]
/u1/lbe/build/dce_lbe/tools/pmax/macho/gcc -B/u1/lbe/build/dce_lbe/tools/pmax/macho/  -c   -D_SHARED_LIBRARIES   -DSYS5ATT     -I. -I/u1/lbe/build/dce_lbe/src/directory/gds/adm/usradmin  -I../../h -I/u1/lbe/build/dce_lbe/src/directory/gds/h -I/u1/lbe/build/dce_lbe/export/pmax/usr/include -pic-lib   -L/u1/lbe/build/dce_lbe/export/pmax/usr/shlib -L/usr/shlib -L/u1/lbe/build/dce_lbe/export/pmax/usr/lib  -ldce   ../../../../../../src/directory/gds/PMAX/adm/admin/cgetext.c

[4/28/92 public]
I removed the two cget.c's from the above list, they were fixed as part of
CR 3098.  I am therefore lowering the severity and priority of this bug.

[12/08/92 public]
This will be fix in DCE1.1 (Code cleanup)

[01/14/92 public]
Downgraded, deferred until 1.0.3.

[10/7/93 public]
Defect aging time-out.  Priority bumped to 1.

[10/18/93 public]
Fixed by Jochen in October 1.0.3 code drop.

[11/10/93 public]



CR Number                     : 283
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : other
S/W Ref Platform              : other
Component Name                : gds
Subcomponent Name             : 
Short Description             : typedef declarations duplicated across include files.  Potentia
Reported Date                 : 10/17/91
Found in Baseline             : .63e
Found Date                    : 
Severity                      : E
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b4
Affected File(s)              : all include files in gds, xds, xom, ...
Sensitivity                   : public

[01/29/92 public]

Orbit reference number 3280
reference     
phaseFound    development

History:
lastUpdate    91/11/12 15:33:22
endDate                                
assignDate    91/10/17 21:42:16   





    addDate              action          userLogin (userName)
    -------------------- --------------- ----------------------------------
    91/10/17 21:42:16    create          page (Scott Page)
    91/10/23 17:23:09    modify          drb (Defect Review Board)
    91/11/04 17:26:34    modify          misra (M. Misra)
    91/11/08 12:25:15    note            misra (M. Misra)
    91/11/08 12:35:46    modify          drb (Defect Review Board)
    91/11/12 15:33:22    modify          drb (Defect Review Board)

[10/17/91 public]
typedef declarations duplicated across include files.  Potential maintenance
and porting problem. 


One example:

../h/d27util.h:64:typedef       short                   Short;  /* -32768 ... +3
2767          */
../h/d2dir.h:199:typedef short                   Short;  /* -32768 ... +32767   
       */
../h/dirv2.h:64:typedef short                   Short;  /* -32768 ... +32767    
     */
../h/gdsext.h:55:typedef short                   Short;

admin/d20logon.c:56:#include <dce/d2dir.h>
admin/d20logon.c:60:#include <dce/d27util.h>
admin/d20logon.c:61:#include <gdsext.h>

[11/08/91 public]
Comment from Helmut by telephone:
We shall do this type of work later. DRB is requested to defer this defect.

[11/12/91 public]
This defect has been marked 'deferred' (do not fix in 1.0) by the DRBoard.  Reason:
The danger of the multiple definitions was judged to be low enough to wait.

[12/9/92 public]
This should be deferred and we will do this with the
Code cleanup for DCE1.1

[3/21/93 public]
Deferred to 1.1

[s/25/94 public]
It is fixed with the February 1994 code submission: data types like "Short"
do not exist any more.

[3/14/94 public]
Closed.



