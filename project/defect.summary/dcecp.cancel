CR Number                     : 13652
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : libdcecp
Short Description             : libdcecp has references to code that is not avaiable in libdce
Reported Date                 : 10/7/96
Found in Baseline             : 1.2.2
Found Date                    : 10/7/96
Severity                      : B
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[10/7/96 public]

1.2 has a libdcecp.a. I take it that the puspose of it is for people to 
extend dcecp without needing to have the dcecp source code.

I am doing a project that I need to add new functions to dcecp. I took
the approach of getting some code from OSF code base (main.c, commands.c,
rpccp.c), and linking them with my new code and libdcecp. I don't know
why I have to compile rpccp.c, but if I don't do it, I got lots of unresolved
functions from rpccp.o.

Anyway, I got the following unresovled functions:

.cdsImport_FullName
.cdsImport_SimpleName
.RPTowerUnpack
.cadump

They are used in cdscp_cache.c. Since I did not compile this code, it must be
in the libdcecp, but these code are not the libdce.a (they were in 
libcdscache.a and libcdsutil.a).

Without getting rid of these symbols, or having a library that can resolve
them, libdcecp is useless.

[10/7/96 public]
libdcecp contains the dcecp control code in a library. To create dcecp (the
control program), several other libraries are required, namely:

AT386_LIBS		= -lmach
HP800_LIBS      	= -lM
RIOS_LIBS		= -lkrb5 -lcfg -lodm -lm
SVR4_LIBS		= -lelf_r
dcecp_LIBS		= -ldcecp -lcdscache -lcdsutil -laudit -ltcl
-ldcedpvt -ldce ${${TARGET_MACHINE}_LIBS}

libdcecp isn't useless. It's just not everything you need to create a
functioning dcecp.

[10/7/96 public]

Maybe I was not clear. I was talking about using libdcecp as a dce user
(who does not have the complete dce source code and sandbox to access
unexported libraries and headers).

Last time I checked, libcdscache andlibcdsutil are not exported. Someone
with just a dce installation will not have access to them.

[10/22/96 public]

> 1.2 has a libdcecp.a. I take it that the puspose of it is for people to
> extend dcecp without needing to have the dcecp source code.

   No.  The reason HP split dcecp into a binary and a library was so we
   could *internally* compile the dcecp code into a number of admin tools
   that were under development at the time.  For example, the (or should
   I say HP's) cdsbrowser links with libdcecp and uses the dcpAppInit()
   function to initialize and set up the things the way main() does for
   dcecp.

   Never did we create libdcecp for the purpose of giving an HP *user*
   of dcecp the ability to extend dcecp in that way.  If you, as a user,
   wish to extend dcecp, write tcl scripts and stick them in a tclindex
   file.  That is the publicized and supported way to extend dcecp.



CR Number                     : 13557
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : registry designate doesn't reserve new_master/self
Reported Date                 : 7/1/96
Found in Baseline             : 1.1
Found Date                    : 7/1/96
Severity                      : C
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.2.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[7/1/96 public]
The dcecp registry designate command does not take the old_master/self 
principal and mark it unreserved nor does it mark the new_master/self
as reserved. This makes it difficult to remove the old master from the
cell and provides no protection against deletion of the new_master/self
principal.

[7/3/96 public]
Changed CR in Code, Doc, or Test? from `doc' to `code' 
Changed Subcomponent Name from `tech_supp' to `'

[7/16/96 public]
Reassigned to Jim Truitt at HP per his advice.

[10/22/96 public]

>    Could you give me some status on this OT?  My customer is
>  querying me .....

   When I started to investigate this problem using hp dce, I found
   that in our implementation, the 'self' principal is never marked
   reserved in the first place, so the bug doesn't exist.  I asked
   our security people about it and received this reply:

      Ok, the wrap-up on this is that pre-OSFDCE1.1, you couldn't do a
      "registry designate" at all because the self principal was marked
      reserved.  So someone else fixed that problem by making it not
      reserved, locally.  IBM wouldn't have received that fix until
      OSFDCE1.2.1.

   So the fix for this problem is to not make the 'self' principal
   reserved in the first place, which effectively cancels this bug.



CR Number                     : 13545
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 13244
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : command_ref
Short Description             : wrong style in dts.8dce
Reported Date                 : 6/21/96
Found in Baseline             : 1.2.1
Found Date                    : 6/21/96
Severity                      : B
Priority                      : 1
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.2.2
Fixed In Baseline             : 
Affected File(s)              : man8dce/dts.8dce
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[7/18/96 public]
This was fixed by either OSF or HP edits.  The fix is 
editorial in nature, so I have canceled this bug instead of going 
back and checking out the file to add a change bar.

[6/21/96 public]

The following comes from the original comments to CR 13244, which
was duped to 13377 (marked "fix"). The particular defect described
below seems still to be present. The original description comes
from Maria Wadlow at Transarc; it is followed by my own (bracketed
and indented) comments, made after 13244 was duped to 13377.



[CR 13244, duped --> 13377] NOT DONE
0164		form	ComRef	1-125	man8dce/dts.8dce
				1-126	man8dce/dts.8dce

	"...but it was not in the dts security group."
	"DTS" should be uppercase.

             [This has not been changed. Actually, I think
              "dts" should be not in uppercase, but in bold,
              since it seems to be the name of a group here,
              not the name of the component.]



CR Number                     : 13544
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 13243
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : command_ref
Short Description             : bad organization in directory.8dce
Reported Date                 : 6/21/96
Found in Baseline             : 1.2.1
Found Date                    : 6/21/96
Severity                      : B
Priority                      : 1
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.2.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[6/21/96 public]

The following comes from the original comments to CR 13243, which
was duped to 13377 (marked "fix"). The particular defect described
below seems still to be present. The original description comes
from Maria Wadlow at Transarc; it is followed by my own (bracketed
and indented) comments, made after 13243 was duped to 13377.



[CR 13243, duped --> 13377] NOT DONE
0157		tech	ComRef	1-117	man8dce/directory.8dce

	The last paragraph in the description of the "directory
	remove" command would be better placed at the beginning.
	The initial description is very sparse and the reader
	won't know what the command really does until they read
	the last paragraph, so it might be better to provide
	that information earlier.

            [Not enough context is given here for me to be sure, but it
             looks like the text has not been changed. The initial descrip-
             tion is still very sparse, and the final paragraph still gives
             what appears to be the main use for the operation.]

[6/21/96 public]

   There is nothing wrong with the text or the order of the
   information in the 'directory remove' command.  Note there
   is no bug or complaint about the order of information in
   the 'directory add' command, which is in the same order as
   the information presented here.

   Cancelled.



CR Number                     : 13542
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 13243
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : command_ref
Short Description             : arguments not defined in directory.8dce
Reported Date                 : 6/21/96
Found in Baseline             : 1.2.1
Found Date                    : 6/21/96
Severity                      : B
Priority                      : 1
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.2.2
Fixed In Baseline             : 
Affected File(s)              : man8dce/directory.8dce
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[6/21/96 public]

The following comes from the original comments to CR 13243, which
was duped to 13377 (marked "fix"). The particular defect described
below seems still to be present. The original description comes
from Maria Wadlow at Transarc; it is followed by my own (bracketed
and indented) comments, made after 13243 was duped to 13377.



[CR 13243, duped --> 13377] NOT DONE
0141		tech	ComRef	1-109	man8dce/directory.8dce

	Some of the possible arguments are not defined, for example,
	clearinghouse_name and child_pointer_list.

            [The clearinghouse_name, child_pointer_list, attribute_list,
             destination_directory_name, and clearinghouse_name_list
             arguments all appear in the main synopsis at the top of the
             page, but are not explained in the "ARGUMENTS" section immedi-
             ately following. But three other arguments are explained there.
             However, the omitted arguments are explained in the relevant
             operations' separate sections later on.]

[6/21/96 public]

   The ARGUMENTS section is meant only to define those attributes
   that are direct arguments to the command, NOT attributes that
   are passed to the command via options.  So, a look at the
   'directory' command shows only three true arguments.  They
   are directory_name_list, operation and source_directory_name.

   All three of these are properly defined in the ARGUMENTS section.

   The rest of the attributes are all passed in via options, so are
   defined in the OPTIONS section within each command.

   Cancelled.



CR Number                     : 13540
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 13239
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : command_ref
Short Description             : inaccurate statement in cell.8dce
Reported Date                 : 6/21/96
Found in Baseline             : 1.2.1
Found Date                    : 6/21/96
Severity                      : B
Priority                      : 1
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.2.2
Fixed In Baseline             : 
Affected File(s)              : man8dce/cell.8dce
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[6/21/96 public]

The following comes from the original comments to CR 13239, which
was duped to 13377 (marked "fix"). The particular defect described
below seems still to be present. The original description comes
from Maria Wadlow at Transarc; it is followed by my own (bracketed
and indented) comments, made after 13239 was duped to 13377.


[CR 13239, duped --> 13377] NOT DONE
0091            tech    ComRef  1-60    man8dce/cell.8dce

        "It also requires the user to be authenticated to the dce
        security service as the cell administrator."
        There is no requirement that a cell have a cell administrator
        account.  This might be better worded, "It also requires that
        the administrator possess the privileges typically associated
        with the cell_admin account."

             [This statement is still present.]

[6/21/96 public]

   The current sentence "...authenticated to the dce security
   service as the cell administrator." is not incorrect, and is
   not necessarily better as suggested in this bug.  This sentence
   does not directly say that cell_admin, as an account, has to
   exist, only that a user must have cell administrator capabilities
   to run the command.

   This wording, 'must be the cell administrator' is sprinkled
   thoughout dce documentation, not just in the dcecp manpages, and
   is clear enough.

   Cancelled.



CR Number                     : 13538
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 13237
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : command_ref
Short Description             : missing info in cdsalias.8dce
Reported Date                 : 6/21/96
Found in Baseline             : 1.2.1
Found Date                    : 6/21/96
Severity                      : B
Priority                      : 1
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.2.2
Fixed In Baseline             : 
Affected File(s)              : man8dce/cdsalias.8dce
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[6/21/96 public]

The following comes from the original comments to CR 13237, which
was duped to 13377 (marked "fix"). The particular defect described
below seems still to be present. The original description comes
from Maria Wadlow at Transarc; it is followed by my own (bracketed
and indented) comments, made after 13237 was duped to 13377.


[CR 13237, duped --> 13377] NOT DONE
0073            tech    ComRef  1-52    man8dce/cdsalias.8dce

        The description of the "cdsalias create" command should note
        that the CDS_DirectoryVersion must be 4.0 or greater to use
        this command.

            [This information is still not present.]

[6/21/96 public]

   Yes it is.  In the 'DESCRIPTION' part of the cdsalias command itself
   is the following text:

      To manipulate alias and preferred names, the CDS_DirectoryVersion
      attribute must be set to 4.0 or greater.  See the ATTRIBUTES section
      of the directory command for more information.

   Cancelled.



CR Number                     : 13537
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 13231
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : command_ref
Short Description             : incorrect option in acl.8dce
Reported Date                 : 6/21/96
Found in Baseline             : 1.2.1
Found Date                    : 6/21/96
Severity                      : B
Priority                      : 1
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.2.2
Fixed In Baseline             : 
Affected File(s)              : man8dce/acl.8dce
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[6/21/96 public]

The following comes from the original comments to CR 13231, which
was duped to 13377 (marked "fix"). The particular defect described
below seems still to be present. The original description comes
from Maria Wadlow at Transarc; it is followed by my own (bracketed
and indented) comments, made after 13231 was duped to 13377.



[CR 13231, duped --> 13377] NOT DONE
0056            tech    ComRef  1-31    man8dce/acl.8dce

        "-managers      Returns a list of ACL managers..."
        The option is really "-manager" with no "s" at the end.

             [Still "-managers" in all instances.]

[6/21/96 public]

   No.  '-managers' is the correct option.  From the code:

    dcp_ArgvInfo arg_table[] = {
        {"-cell", DCP_ARGV_CONSTANT, (char *)1, (char *)NULL,
            dcp_t_acl_show_cell_help},
        {"-entry", DCP_ARGV_CONSTANT, (char *)1, (char *)NULL,
            dcp_t_acl_namespace_entry_help},
        {"-ic", DCP_ARGV_CONSTANT, (char *)1, (char *)NULL,
            dcp_t_acl_init_container_help},
        {"-io", DCP_ARGV_CONSTANT, (char *)1, (char *)NULL,
            dcp_t_acl_init_object_help},
        {"-local", DCP_ARGV_CONSTANT, (char *)1, (char *)NULL,
            dcp_t_acl_local_help},
        {"-managers", DCP_ARGV_CONSTANT, (char *)1, (char *)NULL,
            dcp_t_acl_show_mgrs_help},
        {"-type", DCP_ARGV_STRING, (char *)NULL, (char *)NULL,
            dcp_t_acl_mgr_type_help},
        {(char *)NULL, DCP_ARGV_END, (char *)NULL, (char *)NULL, 0}
    };

   Cancelled.



CR Number                     : 13536
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 13230
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : command_ref
Short Description             : incorrect synopsis in account.8dce
Reported Date                 : 6/21/96
Found in Baseline             : 1.2.1
Found Date                    : 6/21/96
Severity                      : B
Priority                      : 1
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.2.2
Fixed In Baseline             : 
Affected File(s)              : man8dce/account.8dce
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[6/21/96 public]

The following comes from the original comments to CR 13230, which
was duped to 13377 (marked "fix"). The particular defect described
below seems still to be present. The original description comes
from Maria Wadlow at Transarc; it is followed by my own (bracketed
and indented) comments, made after 13230 was duped to 13377.


[CR 13230, duped --> 13377] NOT DONE
0128            style   ComRef  1-91    man8dce/dcecp.8dce
					and elsewhere

        There seem to be multiple styles used for describing the
        syntax of commands.

        I've seen all of the following used to describe optional,
        mutually exclusive options:
                1.  command [-a | -b]

                2.  command -a

                    command -b

                3.  command [[-a] | [-b]]

        I've seen required options listed with and without curly
        braces:
                1.  command {-a | -b}

                2.  command -a | -b

        And I have no idea what this is supposed to mean:
                1.  command arg_1 {[-a arg_a | arg_b]
                    [-c arg_c] [-d arg_d]}
        although I think, knowing the command (principal modify), that
	the author might have meant this instead:
                1a. command arg_1 {[-a {arg_a | arg_b}] |
                    [-c arg_c] | [-d arg_d]}

        It would be helpful to have a standard format for describing
        command syntax, a BNF or something equally unambiguous.


             [The -attribute flag for account create is missing an
              open bracket, apparently.]

[6/21/96 public]

   The synopsis section for all commands has been normalized.
   There is no bracket missing from the 'account create' synopsis,
   or from any other 'account' commands, for that matter.  The
   synopsis:

   account create account_name_list
   -mypwd password
   -password password
   -group group_name
   -organization organization_name
   [-attribute attribute_list |
   -attribute value]

   is correct as written.

   Cancelled.



CR Number                     : 13535
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 13230
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : command_ref
Short Description             : unimplemented attributes in account.8dce
Reported Date                 : 6/21/96
Found in Baseline             : 1.2.1
Found Date                    : 6/21/96
Severity                      : B
Priority                      : 1
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.2.2
Fixed In Baseline             : 
Affected File(s)              : man8dce/account.8dce
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[6/21/96 public]

The following comes from the original comments to CR 13230, which
was duped to 13377 (marked "fix"). The particular defect described
below seems still to be present. The original description comes
from Maria Wadlow at Transarc; it is followed by my own (bracketed
and indented) comments, made after 13230 was duped to 13377.

-----------------------------------------------------------------------------
[CR 13230, duped --> 13377] ATTR STILL PRESENT
0021            tech    ComRef  1-12    man8dce/account.8dce

        The "postdatedtkt" attribute is not implemented.
        The "proxiabletkt" attribute is not implemented.
        The "renewabletkt" attribute is not implemented.
        The "maxtktrenew" attribute is not implemented.

             [These attributes are all still present. This
              may be in fact correct, but I have no way of
              knowing whether it is or not.]

[6/21/96 public]

   In the current version of the manpages, the 'dupkey',
   'postdatedtkt', 'proxiabletkt' and 'renewabletkt' attributes
   all have the following text:

      In DCE this attribute is currently only advisory.  However,
      Kerberos clients and servers will make use of it when they
      interact with a DCE Security server.

   The 'maxtktrenew' text is correct as written.

   All these attributes are fully functional in dcecp.  What exactly
   security does with them may be in question, but that is for security,
   or the admin guide to handle.

   Cancelled.



CR Number                     : 13522
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 13247
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : command_ref
Short Description             : incorrect statements in host.8dce
Reported Date                 : 6/18/96
Found in Baseline             : 1.2.1
Found Date                    : 6/18/96
Severity                      : B
Priority                      : 1
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.2.2
Fixed In Baseline             : 
Affected File(s)              : man8dce/host.8dce
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[6/18/96 public]

The following comes from the original comments to CR 13247, which
was duped to 13377 (marked "fix"). The particular defect described
below seems still to be present. The original description comes
from Maria Wadlow at Transarc; it is followed by my own (bracketed
and indented) comments, made after 13247 was duped to 13377.


[13247, duped --> 13377]
0196		tech	ComRef	1-150	man8dce/host.8dce

	"You must have  permission to the /.:/hosts directory in CDS."
	First, no permissions are listed in this sentence as it
	appears.  Second, no special permissions are required to
	perform the "host catalog" command.

               [This seems to be two separate complaints. I can't find
                the passage quoted at the beginning (which seems to
                be what the first complaint is about). The "Privileges
                Required" section for "host catalog" does claim that
                you need r (read) permission on /.:/hosts to success-
                fully execute the operation, and I take that to be the
                target of the second complaint. The change hasn't been
                made there.]

[6/20/96 public]

Funny how seemingly unrelated bugs connect...

OT13485 was recently opened to reflect the fact that 'directory list'
does not correctly identify the user, thus allows unrestricted access,
when it should make a call to do_sec_login() before the actual work is
done.  This, among other things, is being fixed in the HP drop to 1.2.2.

Once this fix is in place, the 'directory list' command will need the
permission that is listed in it's manpage (read access to the directory).

Because 'host catalog' uses 'directory list', the user will need read access
to '/.:/hosts' (the directory being listed) for the command to succeeed.



CR Number                     : 13518
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 13242
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : command_ref
Short Description             : faulty synopsis in dcecp.8dce
Reported Date                 : 6/18/96
Found in Baseline             : 1.2.1
Found Date                    : 6/18/96
Severity                      : B
Priority                      : 1
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.2.2
Fixed In Baseline             : 
Affected File(s)              : man8dce/dcecp.8dce
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[6/18/96 public]

The following comes from the original comments to CR 13242, which
was duped to 13377 (marked "fix"). The particular defect described
below seems still to be present. The original description comes
from Maria Wadlow at Transarc; it is followed by my own (bracketed
and indented) comments, made after 13242 was duped to 13377.


[13242, duped --> 13377]
0129            tech    ComRef  1-91    man8dce/dcecp.8dce

        "dcecp [-s] script_name"
        The options cannot be used in this order, the command
        currently can only be issued in this order:
        "dcecp script_name [-s]"

              [This change hasn't been made. I'm not sure if this is
               because what was evidently a dcecp bug was fixed, since
               the synopsis line referred to here has been enclosed in
               "13377" change markers with the notation "clarified
               syntax", so obviously the passage did receive some
               specific attention;--nevertheless, since nothing was
               said either way when 13242 was duped, I'm entering the
               bug.]

[6/20/96 public]

This is a code bug, not a doc bug.  OT13325 was opened to cover
the problem, and it has not been fixed.  When the code change is
made, the synopsis will be correct.



CR Number                     : 13516
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 13242
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : command_ref
Short Description             : missing info in dcecp.8dce
Reported Date                 : 6/18/96
Found in Baseline             : 1.2.1
Found Date                    : 6/18/96
Severity                      : B
Priority                      : 1
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.2.2
Fixed In Baseline             : 
Affected File(s)              : man8dce/dcecp.8dce
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[6/18/96 public]

The following comes from the original comments to CR 13242, which
was duped to 13377 (marked "fix"). The particular defect described
below seems still to be present. The original description comes
from Maria Wadlow at Transarc; it is followed by my own (bracketed
and indented) comments, made after 13242 was duped to 13377.


[13242, duped --> 13377]
0118            tech    ComRef  1-92    man8dce/dcecp.8dce

        Is the "[info library]" reference ever described anywhere?
        This should be "dceshared/tcl."

              [Change hasn't been made.]

[6/20/96 public]

   No.  The 'info library' command is from tcl, and we don't get into
describing tcl commands in detail anywhere in the dcecp manpages.  Also,
the output from this command is site-dependent...

      dcecp> info library
      /opt/dcelocal/tcl
      dcecp>

So hard-coding the output from this command is wrong.



CR Number                     : 13407
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cell show subcommand
Short Description             : The way "cell show" finds dtsserver is not right
Reported Date                 : 3/26/96
Found in Baseline             : 1.1
Found Date                    : 3/26/96
Severity                      : B
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 
Affected File(s)              : cell.dcp
Sensitivity                   : public

[3/26/96 public]

In a cell where there are dts servers and clerks, "cell show" will give
you a long list of dtsservers, including all the clerks.

The reason is: "cell show" finds the dtsservers by finding all cds entries
that end with "dts-entity". It does not further check if ther are really
dts servers, insteadof clerks.

"cell ping" does a better job by further doing a "dts show" on each of the
entries and then checking the type field. This works fine with all 1.1
environment.

In a mixed env (1.1 and 1.0.3), I have seen :"cell ping" fails becasue
some 1.0.3 dts clerk does not respond to dts show command. The reason is
(this is for DEC's 1.0.3 dce, I could not find an OSF 1.0.3 machien to test
yet): DEC's 1.0.3 dts clerk only exports acl interface to the dts-entity
entry. So the command "dts show /.:/hosts/$hostname/dts-entity" will return
"no more bindings" instead of something meaningful.

[3/26/96 public]

CANCELLED.

I have already asked that any "bug" found at OSF in pre-1.2 code be
checked to see if has ALREADY BEEN FIXED in the 1.2 code that HP dropped
to OSF in October '95.  It wastes your time to file them and my time to
reply.

This is already fixed, and you have the code.  But just to stress the point
the 1.1 stuff looked like this...

    _dcp_cell_debug "Show dts servers"
    set dtsservers [_dcp_list_find $namespace *dts-entity]
    if { [llength $dtsservers] > 0 } {
        set _dcp_cell_info "$_dcp_cell_info\{dtsservers "
        set host_name ""
        foreach element $dtsservers {
                      :
                      :

while the 1.2 stuff does this...

    _dcp_cell_debug "Show dts servers"

    _dcp_cell_debug "Looking up lan-profiles in cell-profile"
    set lan_profs [rpcprofile show $cell_name/cell-profile \
            -interface {6f264242-b9f8-11c9-ad31-08002b0dc035 1.0}]

    _dcp_cell_debug "lan_profs is $lan_profs"

    set got_dts_server 0
    set result "\{dtsservers "
    foreach lp $lan_profs {
        _dcp_cell_debug "Working on $lp..."
        foreach line [rpcprofile show [lindex $lp 1] \
                      :
                      :



CR Number                     : 13403
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : clearinghouse subcommand
Short Description             : The -attribute option of the clearinghouse show command does not work
Reported Date                 : 3/22/96
Found in Baseline             : 1.1
Found Date                    : 3/22/96
Severity                      : C
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[3/22/96 public]

Customer reported:

"         Although the R1.1 Command Reference for the clearinghouse show
  command does not describe the -attribute option, but the help message
  for the command does as follows:
  
         dcecp> clearinghouse help show
                -all           Returns both attributes and counters.
                -attribute     Returns only attribute information.
                -counters      Returns only the clearinghouse counters.
                -schema        Returns if attributes are single or multi-valued.
         dcecp> 
  
  According to the manual, the -attribute option should display only the
  designated attribute value, however it makes an error return if an actual
  attribute value is set as follows:
  
       dcecp> clearinghouse show /.:/dcecx_ch -attribute CDS_ReplicaVersion
       Error: Unrecognized argument 'CDS_ReplicaVersion'.
       dcecp> 
  
  We request that the -attribute option display only the designated
  attribute as follows:
  
       dcecp> clearinghouse show /.:/dcecx_ch -attribute CDS_ReplicaVersion
       {CDS_ReplicaVersion 3.0}
       dcecp>
  
  We suspect that the -attribute option was created to show a specific
  attribute value as shown below (which is extracted from the Chapter 17.3 
  of "Administration Guide - Core Components"):
  
       dcecp> clearinghouse show  /.:/Chicago2_CH CDS_CHDirectories  -clear
  
  However, the above example makes an error return as follows:
  
       dcecp> clearinghouse show  /.:/Chicago2_CH CDS_CHDirectories  -clear
       Error: Unrecognized argument 'CDS_CHDirectories'.
       dcecp> 
  
  The attrlist command can get a specific value from the command output
  attribute list.  However, the "cdscp show clearinghouse" command, which
  is a counterpart of the "clearinghouse show" command, can display a
  designated attribute value, the "clearinghouse show" command also should
  support the -attribute option to do the same thing.
  
"

[3/22/96 public]
This bug should be cancelled and it seems a doc bug opened against
parts of the admin guide.  The online help is correct:

  dcecp> clearinghouse help show
         -all           Returns both attributes and counters.
         -attribute     Returns only attribute information.
         -counters      Returns only the clearinghouse counters.
         -schema        Returns if attributes are single or multi-valued.
  dcecp> 

With the -attribute option ALL attributes are returned, but not
counters or schema info.  There is no way to have the command return
just one attribute as was available in cdscp.  If you want to see just
one value, e.g., if you are writing a script use the "attrlist
getvalue" command.

Here's how do it in a script:

  set tmp [clearinghouse show /.:/Chicago2_CH]
  attrlist getvalue $tmp -type CDS_CHDirectories

How do this online?

  dcecp> clearinghouse show /.:/Chicago2_CH
  ...output here...

  # and since the output is saved in the _r variable, and using abbreviations:

  dcecp> attr get $_r -type CDS_CHDirectories
  ...value of the one attribute output...

And, no there should not be an enhancement request for dcecp to be able
to return one attribute.  Use the Tcl language to script it as above.

I could believe that the admin guide made some mistakes in translating
the examples from cdscp to dcecp.  These should be check, the CR above
doesn't give a specific reference.

[3/22/96 public]

Rats, Howard, you beat me to it.  There are many places in dcecp
where the 'new' command that replaced the old control program command
does not allow individual control over an attribute directly, where
the old control program command may have.  But dcecp supports this
functionality for all commands using 'attrlist'.

The '-attribute' option wasn't meant for individual attribute control,
but to indicate that the clearinghouse attributes should be returned.

So, as far as a code defect/enhancement goes, this bug is cancelled.

However, please identify the places in the admin guide where the
'clearinghouse show' command is used incorrectly and open another
doc/admin_guide bug for them.



CR Number                     : 13396
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cdsclient object
Short Description             : cdsclient misnamed?
Reported Date                 : 3/19/96
Found in Baseline             : 1.2.1
Found Date                    : 3/19/96
Severity                      : B
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[3/19/96 public]

The dcecp cdsclient object operates on the CDS-clerk process. The
documentation distinguishes between CDS clerks and clients - CDS clients
are applications that request binding information from the CDS clerk on
the local host.

Should this dcecp object be renamed to "cdsclerk" ?

[3/19/96 public]

No.  Before the 'cds' and 'cdsclient' objects were added, we
thrashed it out with the CDS engineers here, and with other
interested dcecp parties.  The distinction dcecp is trying
to make is between a CDS server and a CDS client.  That's
all we recognize (and the updated cdsadv no longer works
with clerk processes anyway).  The only thing that is still
unfortunate is that CDS still calls the client process
'cds-clerk' in the namespace, which it should not.  That's
the real bug.



CR Number                     : 13081
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : command_ref
Short Description             : registry manpage needs info
Reported Date                 : 8/30/95
Found in Baseline             : 1.1
Found Date                    : 8/30/95
Severity                      : C
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : registry.8dce
Sensitivity                   : public

[8/30/95 public]

The dcecp specification (RFC42.3) list of changes (Section 1.1) lists the
following item which is not contained in the OSF DCE Command Reference:

       (dm) Added a `-xattrs' option to `principal', `group',
            `organization' and `registry show' operations.  Some also get a
            `-all'.

The '-xattrs' option has not been added to the registry object. It HAS been
added to all of the other objects listed above.

[1/19/96 public]

As far as I could determine, the items mentioned above were not
included in the November dcecp drop from HP, so no changes were
made in connection with this CR to registry.8dce.

I reassigned responsibility to Pam Millett, who is about to do
some further work on manpages.

[1/19/96 public]

There is no -xattrs option in any registry command.
It was not implemented.

[1/19/96 public]

I was asked and was wrong at first so I'll comment here.
Jim is correct.  -xattrs was added to principal, group, and organization.
The dcecp I'm running (HP Aug 95 code) has them.

There is no -xattrs on the registry show command.  RFC 42.3 incorrectly
says that there is.  I believe the reason was that rgy-wide ERAs (that 
were I think to be stored on the policy object) were never implemented.
If they ever are, then the registry show command should have a -xattrs
option added.



CR Number                     : 13076
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : command_ref
Short Description             : server manpage needs info
Reported Date                 : 8/30/95
Found in Baseline             : 1.1
Found Date                    : 8/30/95
Severity                      : C
Priority                      : 3
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : server.8dce
Sensitivity                   : public

[8/30/95 public]

The dcecp specification (RFC42.3) list of changes (Section 1.1) lists the
following item which is not contained in the OSF DCE Command Reference:

       (de) Added the `operations' attribute to the `server' object.  It is
            only available for input, it is not output.

[1/19/96 public]

As far as I could determine, this was not fixed in the November dcecp
manpage drop from HP. I have reassigned responsibility to Pam Millett,
who is about to do some further work on manpages for 1.2.1.

[1/19/96 public]

There is no 'operations' attribute on the server object.  There
is an 'operations' action, and that is documented.



CR Number                     : 13060
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : command_ref
Short Description             : server manpage missing info
Reported Date                 : 8/29/95
Found in Baseline             : 1.1
Found Date                    : 8/29/95
Severity                      : C
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : server.8dce
Sensitivity                   : public

[8/29/95 public]

The dcecp specification (RFC42.3) list of changes (Section 1.1) lists the
following item which is not contained in the OSF DCE Command Reference:

       (ak) A `-binary' option was added to the `create', `modify' and
            `show' operations of the `server' object.  The description of
            the `data' attribute was updated.

[1/19/96 public]

As far as I could tell, this was not fixed in the November dcecp
manpage drop from HP. I have reasigned reponsibility to Pam Millett,
who is about to do some further work on manpages at HP.

[1/19/96 public]

There is no '-binary' option on any 'server' command.  There is
also no 'data' attribute.  Both these exist on the 'hostdata'
command, and are fully described in the hostdata manpage.



CR Number                     : 12961
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : "dir list" output not in TCL list form
Reported Date                 : 7/20/95
Found in Baseline             : 1.1
Found Date                    : 7/20/95
Severity                      : C
Priority                      : 1
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[7/20/95 public]

The output of the "dir list" command is not in Tcl list form.  For the
reason explained in 12958 it is probably a good idea to recommend to 1.1
licensees to fix this problem in their product. It would also be a good
idea to check dcecp systematically for this problem. (Sorry but I don't
have time to this right now ;-) ).

[7/20/95 public]

The output of all dcecp commands are valid Tcl lists. Braces "{}" are
required when multiple lists or sublists need to be displayed. The output
of the "dir list" command is a single valid list of directories.

Try the following:

dcecp> set x [dir list /.:]
dcecp> llength $x

Tcl is quite happy with this as a list. An extra set of braces around the
list would be redundant and wrong.

Cancelled.

[7/20/95 public]

Oops! Shows you how much I know about Tcl! Apologies.



CR Number                     : 12906
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dced dcdre1003 test and creating security replications only fails on IBM platform with all of DCE 1.1 including WP.  the command is:  dcecp /tet/dced/ts/dcdre1003/dcdre1003_acl.tcl /.:/hosts/ibm13/tmp/dcdrelacl.i .  Tests runs fine on local test sources on the igm in a cell with another IBM.  Since the dcecp is takingf the sam tcl via an rshsp just as before, I don't see how this could be a test problem
Reported Date                 : 06/06/96
Found in Baseline             : 1.1
Found Date                    : 06/06/96
Severity                      : B
Priority                      : 1
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[01/01/93 public]
[Shirley Conley 6/7/95 public]

[2/2/96 public]

   From the submitter:

        Hi Jim, Shirley:

        The security replication testing succeeded on the last run - with the Mothra
        merge in of security, dcecp, etc.

        So, this should be closed.

        -D

   Once the full software set was installed, the tests passed.



CR Number                     : 12798
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dcedoc
Short Description             : change -linkto to -to
Reported Date                 : 2/17/95
Found in Baseline             : 1.1
Found Date                    : 2/17/95
Severity                      : C
Priority                      : 3
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : dcecp
Sensitivity                   : public

[2/17/95 public]
On Wed Oct 26, 1994, Kris Wilson             8-0126 wrote:

> In both RFC 42.3 and the DCE Commands book, -linkto is documented for 
> the link create command.  However, the DCECP tests and the code use -to.  
> We thought we should bring this to your attention so the publications
> can be corrected.  

The code and tests are correct.

I'll fix the rfc and will file a doc bug.  
Too late to fix it.

[12/18/95 public]

As far as I can see, the link manpage has the -to form of the
option now, not -linkto. I'm not sure when this was fixed (it
was apparently not done during the recent pass over the dcecp
pages, since it doesn't show up in my set of old files), but
in any case it's done now. Just to make sure I'm not confused--
the request is to change "-linkto" to "-to", correct? Unless
Howard thinks I've misunderstood something, I'll cancel this
bug (tomorrow, weather permitting).

[1/9/96 public]

No one has objected, so I am cancelling this bug for the reasons
described in the paragraph above.



CR Number                     : 12696
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 12061
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp server test fails
Reported Date                 : 10/21/94
Found in Baseline             : 1.1b22, 1.2
Found Date                    : 10/21/94
Severity                      : C
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.2.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[10/21/94 public]

The following errors were found in the journal file:

...
520|0 1 14481 1 55|server_disable_7_N: Check that wrong interface id are returne
d as not found.
520|0 1 14481 1 56|==== Contents of test case:
520|0 1 14481 1 57|{         list [catch {server disable tserver -interface {002
972f0-44f7-1de6-817f-0000c0ba4944,1.0}} msg] $msg     }
520|0 1 14481 1 58|Test completed successfully.
520|0 1 14481 1 59|== Test output was:
520|0 1 14481 1 60|{1 {Cannot find a matching object.}}
520|0 1 14481 1 61|== Expected output was:
520|0 1 14481 1 62|{1 {not found interface id}}
520|0 1 14481 1 63|Test Failed.
220|0 1 1 18:38:33|FAIL
...
520|0 1 9715 1 55|server_enable_7_N: Check that wrong interface id are returned
as not found.
520|0 1 9715 1 56|==== Contents of test case:
520|0 1 9715 1 57|{     list [catch {server enable tserver -interface {002972f0-
44f7-1de6-817f-0000c0ba4944,1.0}} msg] $msg     }
520|0 1 9715 1 58|Test completed successfully.
520|0 1 9715 1 59|== Test output was:
520|0 1 9715 1 60|{1 {Cannot find a matching object.}}
520|0 1 9715 1 61|== Expected output was:
520|0 1 9715 1 62|{1 {not found interface id}}
520|0 1 9715 1 63|Test Failed.
220|0 1 1 18:39:54|FAIL
...
520|0 1 14534 1 1|server_disable_8_P: Check to see that we can disable server in
terfacces.
520|0 1 14534 1 2|==== Contents of test case:
520|0 1 14534 1 3|{     list [catch {server disable tserver -interface {008bebed
-c7c1-1ddc-9cb3-0000c0ba4944,1.0}} msg] $msg     }
520|0 1 14534 1 4|Test completed successfully.
520|0 1 14534 1 5|== Test output was:
520|0 1 14534 1 6|{0 {}}
520|0 1 14534 1 7|== Expected output was:
520|0 1 14534 1 8|{0 {}}
520|0 1 14534 1 9|Test Passed.
520|0 1 14534 1 10|==== Contents of test case:
520|0 1 14534 1 11|{    list [catch {server ping $DCP_SR_ENTRYNAME} msg] $msg
  }
520|0 1 14534 1 12|Test completed successfully.
520|0 1 14534 1 13|== Test output was:
520|0 1 14534 1 14|{0 1}
520|0 1 14534 1 15|== Expected output was:
520|0 1 14534 1 16|{0 0}
520|0 1 14534 1 17|Test Failed.
220|0 1 1 18:44:33|FAIL
...
520|0 1 9726 1 1|server_enable_8_P: Check to see that we can enable server inter
facces.
520|0 1 9726 1 2|==== Contents of test case:
520|0 1 9726 1 3|{         list [catch {server ping $DCP_SR_ENTRYNAME} msg] $msg
     }
520|0 1 9726 1 4|Test completed successfully.
520|0 1 9726 1 5|== Test output was:
520|0 1 9726 1 6|{0 1}
520|0 1 9726 1 7|== Expected output was:
520|0 1 9726 1 8|{0 0}
520|0 1 9726 1 9|Test Failed.
520|0 1 9726 1 10|==== Contents of test case:
520|0 1 9726 1 11|{     list [catch {server enable tserver -interface {008bebed-
c7c1-1ddc-9cb3-0000c0ba4944,1.0}} msg] $msg     }
520|0 1 9726 1 12|Test completed successfully.
520|0 1 9726 1 13|== Test output was:
520|0 1 9726 1 14|{0 {}}
520|0 1 9726 1 15|== Expected output was:
520|0 1 9726 1 16|{0 {}}
520|0 1 9726 1 17|Test Passed.
520|0 1 9726 1 18|==== Contents of test case:
520|0 1 9726 1 19|{         list [catch {server ping $DCP_SR_ENTRYNAME} msg] $ms
g     }
520|0 1 9726 1 20|Test completed successfully.
520|0 1 9726 1 21|== Test output was:
520|0 1 9726 1 22|{0 1}
520|0 1 9726 1 23|== Expected output was:
520|0 1 9726 1 24|{0 1}
520|0 1 9726 1 25|Test Passed.
220|0 1 1 18:44:57|FAIL
...
520|0 1 14466 1 28|server_ping_8_P: Check to see that we cannot ping a server wh
o is not listening by its string binding.
520|0 1 14466 1 29|==== Contents of test case:
520|0 1 14466 1 30|{    list [catch "server ping 0073f23a-2e1a-1ddd-b73a-0000c0b
a4944@$DCP_SR_PROTSEQ:$DCP_SR_IP_ADDR" msg] $msg     }
520|0 1 14466 1 31|Test completed successfully.
520|0 1 14466 1 32|== Test output was:
520|0 1 14466 1 33|{0 1}
520|0 1 14466 1 34|== Expected output was:
520|0 1 14466 1 35|{0 0}
520|0 1 14466 1 36|Test Failed.
220|0 1 1 18:46:10|FAIL
...
520|0 1 18248 1 1|server_stop_7_P: Check to see that we can stop server by metho
d rpc
520|0 1 18248 1 2|==== Contents of test case:
520|0 1 18248 1 3|{     list [catch {server stop tserver -method rpc} msg] $msg
    }
520|0 1 18248 1 4|Test completed successfully.
520|0 1 18248 1 5|== Test output was:
520|0 1 18248 1 6|{0 {}}
520|0 1 18248 1 7|== Expected output was:
520|0 1 18248 1 8|{0 {}}
520|0 1 18248 1 9|Test Passed.
520|0 1 18248 1 10|==== Contents of test case:
520|0 1 18248 1 11|{    list [catch {server ping 0073f23a-2e1a-1ddd-b73a-0000c0b
a4944@$DCP_SR_PROTSEQ:$DCP_SR_IP_ADDR} msg] $msg     }
520|0 1 18248 1 12|Test completed successfully.
520|0 1 18248 1 13|== Test output was:
520|0 1 18248 1 14|{0 1}
520|0 1 18248 1 15|== Expected output was:
520|0 1 18248 1 16|{0 0}
520|0 1 18248 1 17|Test Failed.
220|0 1 1 18:47:33|FAIL

[10/21/94 public]
Okay, all these failures are known and expected. The blocking ot 
is CR12061.

[04/26/95 public]
The problem of getting "Cannot find a matching object." instead of
"not found interface id" has nothing to do with CR12061.  In fact, there
is no error message with the text "not found interface id" in dhd.sams,
or in ANY sams file in the source tree.  dced (in sxops.c) explicitly returns
dced_s_not_found when it fails to find the specified interface.
	So, this is either a problem with just the test (for expecting
"not found interface id") or a problem with both the code (dhd.sams) and the
documentation (Problem Determination Guide) for not providing and documenting
the more appropriate error message (personally, I would prefer the message
"Cannot find a matching interface", which would make this a problem with
all three).

[04/26/95 public]

The failure of server_stop_7_P is due to incompletenesses in the tests and
in tserver.c.  To wit; tserver must log in before the security code on the
server side will honor an rpc_mgmt_stop_server_listening() RPC call; and
tserver.c does not log in.  Of course, the Tcl scripts must also change --
in order for tserver to log in, the Tcl scripts have to create the principal,
add it to the none group and org, create the account, and add a keytab entry
for it -- and of course to remove all these things when cleaning up.  Diffs
for tserver.c and server_stop_P.tcl follow; these other Tcl files are also
affected, because once tserver.c has the login code, the account creation
etc. must be done by ANY Tcl script that tries to start tserver;

        server_enable_N.tcl
	server_start_P.tcl
	server_enable_P.tcl
	server_stop_N.tcl
	server_catalog_P.tcl
	server_ping_P.tcl
	server_disable_N.tcl
	server_show_P.tcl
	server_disable_P.tcl
	server_start_N.tcl

--------------------- Begin Diffs for tserver.c -----------------------------

40a41,42
> #include <dce/sec_login.h>
> #include <dce/keymgmt.h>
60a63,71
> boolean32    our_auth_fn(
>               rpc_binding_handle_t client_binding,           /* in  */
>               unsigned32           requested_mgmt_operation, /* in  */
>               unsigned32           *status                   /* out */
> ) {
>       *status = rpc_s_ok;
>       return( TRUE );         /* allow anyone to call any mgmt function */
> }
>
70a82,85
>       sec_login_handle_t              context;
>       sec_passwd_rec_t                *mypasswd;
>       boolean32                       expired;
>       sec_login_auth_src_t            auth_src;
116a132,192
>        * Set up our security context.
>        */
>       sec_login_setup_identity(
>           SERVER_PRINC_NAME,
>           sec_login_no_flags,
>           &context,
>           &status
>       );
>       if (status != rpc_s_ok) {
>               print_error("sec_login_setup_identity()", status);
>               exit(1);
>       }
>
>       sec_key_mgmt_get_key(
>           rpc_c_authn_dce_secret,
>           NULL,
>           SERVER_PRINC_NAME,
>           sec_c_key_version_none,
>           &mypasswd,
>           &status
>       );
>       if (status != rpc_s_ok) {
>               print_error("sec_key_mgmt_get_key()", status);
>               exit(1);
>       }
>
>       sec_login_validate_identity(
>           context,
>           mypasswd,
>           &expired,
>           &auth_src,
>           &status
>       );
>       if (status != rpc_s_ok) {
>               print_error("sec_login_validate_identity()", status);
>               exit(1);
>       }
>       if (expired) {
>               print_error("password expired", status);
>               exit(1);
>       }
>
>       sec_login_certify_identity(
>           context,
>           &status
>       );
>       if (status != rpc_s_ok) {
>               print_error("sec_login_certify_identity()", status);
>               exit(1);
>       }
>
>       sec_login_set_context(
>           context,
>           &status
>       );
>       if (status != rpc_s_ok) {
>               print_error("sec_login_set_context()", status);
>               exit(1);
>       }
>
>       /*
117a194
>        */
127d203
<        */
141a218,219
>       /* We don't need to export binding info -- dced has done it for us! */
>
143c221,228
<        * Export binding info to the namespace
---
>        * Set up authorizing function so that dced may use
>        * rpc_mgmt_stop_server_listening() to stop this server
>        * (see rpc_mgmt_set_authorization_fn(3rpc) and
>        * rpc_mgmt_stop_server_listening(3rpc) -- note that
>        * a server MUST call rpc_mgmt_set_authorization_fn()
>        * to get behaviour other than the default, and that the
>        * default behaviour is to disallow rpc_mgmt_stop_server_listen()
>        * from ANY client).
145,150c230,233
<       rpc_ns_binding_export(rpc_c_ns_syntax_dce,
<                             (unsigned_char_t *) argv[1],
<                             tserver_v1_0_s_ifspec,
<                             bind_vector_p,
<                             (uuid_vector_t *) &obj_uuid_vec,
<                             &status);
---
>       rpc_mgmt_set_authorization_fn(
>           our_auth_fn,
>           &status
>       );
152c235
<               print_error("rpc_ns_binding_export()", status);
---
>               print_error("rpc_mgmt_set_authorization_fn()", status);

--------------------- End   Diffs for tserver.c -----------------------------

--------------------- Begin Diffs for server_stop_P.tcl ---------------------

49c49
<            DCP_SR_PROTSEQ DCP_SR_IP_ADDR
---
>            DCP_SR_PROTSEQ DCP_SR_IP_ADDR DCP_HOSTNAME_ONE
52a53,57
>     if {[dcp_wrap {principal create tserver}] != 0} {return;}
>     if {[dcp_wrap {group add none -member tserver}] != 0} {return;}
>     if {[dcp_wrap {organization add none -member tserver}] != 0} {return;}
>     if {[dcp_wrap "account create tserver -group none -organization none -mypw
d $DCP_CLIENT_PW -password foobar"] != 0} {return;}
>     if {[dcp_wrap "keytab add /.:/hosts/$DCP_HOSTNAME_ONE/config/keytab/self -
member tserver -version 1 -key foobar"] != 0} {return;}
57a63,64
>     global DCP_HOSTNAME_ONE
>
58a66,70
>     if {[dcp_wrap "keytab remove /.:/hosts/$DCP_HOSTNAME_ONE/config/keytab/sel
f -member tserver"] != 0} {return;}
>     if {[dcp_wrap "account delete tserver"] != 0} {return;}
>     if {[dcp_wrap {organization remove none -member tserver}] != 0} {return;}
>     if {[dcp_wrap {group remove none -member tserver}] != 0} {return;}
>     if {[dcp_wrap {principal delete tserver}] != 0} {return;}
71a84
>     exec sleep 20
83c96
<     if {[dcp_wrap {server stop tserver -method hard}] != 0} {return;}
---
>     catch {server stop tserver -method hard} dontcare

--------------------- End   Diffs for server_stop_P.tcl ---------------------

	Note that .../config/keytab/self can be used because tserver is run
non-SUID as a child of dced, which runs as root, and hence tserver can read
the system default keytable.  Also note the last change to server_stop_P.tcl;
since (if it works) the test has already stopped tserver via rpc, the
server stop in the cleanup code should be allowed to fail.

[04/26/95 public]

Oops.  I guess tserver does have to export its bindings to the namespace
after all -- I had thought that dced would do this for it.  The register
and export have to be done BEFORE the login, while the server is still running
as root; after the login, it won't have permission for namespace operations.
So here are some diffs on top of the last set; the line numbers are a little
off, but close enough.

--------------------- Begin Diffs for tserver.c -----------------------------

139a140,166
>        * Register binding info with endpoint map
>        */
>       rpc_ep_register(tserver_v1_0_s_ifspec,
>                       bind_vector_p,
>                       (uuid_vector_t *) &obj_uuid_vec,
>                       (unsigned_char_t *) "test  server of dcecp server obj",
>                       &status);
>       if (status != rpc_s_ok) {
>               print_error("rpc_ep_register()", status);
>               exit(1);
>       }
>
>       /*
>        * Export binding info to the namespace.
>        */
>       rpc_ns_binding_export(rpc_c_ns_syntax_dce,
>                             (unsigned_char_t *) argv[1],
>                             tserver_v1_0_s_ifspec,
>                             bind_vector_p,
>                             (uuid_vector_t *) &obj_uuid_vec,
>                             &status);
>       if (status != rpc_s_ok) {
>               print_error("rpc_ns_binding_export()", status);
>               exit(1);
>       }
>
>       /*
214,228d240
<        * Register binding info with endpoint map
<        */
<       rpc_ep_register(tserver_v1_0_s_ifspec,
<                       bind_vector_p,
<                       (uuid_vector_t *) &obj_uuid_vec,
<                       (unsigned_char_t *) "test  server of dcecp server obj",
<                       &status);
<       if (status != rpc_s_ok) {
<               print_error("rpc_ep_register()", status);
<               exit(1);
<       }
<
<       /* We don't need to export binding info -- dced has done it for us! */
<
<       /*
317d328
<

--------------------- End   Diffs for tserver.c -----------------------------

[2/2/96 public]

   Re-open for another look.  The changes in dced
for localization, partial service mode, etc, made
the starting of a server difficult, so this should
be checked again.



CR Number                     : 12664
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp schema test hangs
Reported Date                 : 10/19/94
Found in Baseline             : 1.1b22
Found Date                    : 10/19/94
Severity                      : B
Priority                      : 1
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[10/19/94 public]

This test hangs on every test that is listed in the tet_scen file.
Sometimes it starts the test and nothing is ever put in the tet_xres
file and other tests will run for some period of time and then hang.
The only way to kill the test is with "kill -9".

[10/19/94 public]
I also had the principal_era test hang in group_modify_era_N.
This is the end of the tet_xres file and dcecp has been executing this
file for over 30 minutes:

...
520|0 1 15394 1 280|principal_modify_era_32_N: No value passed for change of tes
t_binding
520|0 1 15394 1 281|==== Contents of test case:
520|0 1 15394 1 282|{         list [catch {principal modify gumby -change {test_
binding}} msg] $msg     }
520|0 1 15394 1 283|Test completed successfully.
520|0 1 15394 1 284|== Test output was:
520|0 1 15394 1 285|{1 {Incorrect number of values for attribute type.}}
520|0 1 15394 1 286|== Expected output wa


I attached to dcecp and it appears this is the traceback I got after
interrupting the process several times:

cma_sendmsg(0x9c, 0xdeadbeef, 0xdeadbeef) at 0xd038ce00
rpc__cn_assoc_send_frag(0x9c, 0xdeadbeef, 0xdeadbeef, 0xdeadbeef) at 0xd043efb8
rpc__cn_transmit_buffers(0x9c, 0xdeadbeef) at 0xd0455964
send_last_frag_action_rtn(0x9c, 0xdeadbeef, 0xdeadbeef) at 0xd043ba70
rpc__cn_sm_eval_event(0x9c, 0xdeadbeef, 0xdeadbeef, 0xdeadbeef) at 0xd0446a7c
rpc__cn_call_transceive(0x9c, 0xdeadbeef, 0xdeadbeef, 0xdeadbeef, 0xdeadbeef) at
 0xd039d360
rpc_call_transceive(0x9c, 0xdeadbeef, 0xdeadbeef, 0xdeadbeef, 0xdeadbeef) at 0xd
0363394
conv_cstub.op3_csr(0x2025fe58, 0x2ff77934, 0x20378698, 0x2ff778f8, 0xf, 0x2ff778
cc, 0x203786f8, 0x2ff77f00) at 0xd043abf0
ep_get_endpoint(0x9c, 0xdeadbeef, 0xdeadbeef) at 0xd0439bec
rpc_ep_resolve_binding(0x9c, 0xdeadbeef, 0xdeadbeef) at 0xd0439858
rpc__cn_call_start(0x9c, 0xdeadbeef, 0xdeadbeef, 0xdeadbeef, 0xdeadbeef, 0xdeadb
eef) at 0xd039bef0
rpc_call_start(0x9c, 0xdeadbeef, 0xdeadbeef, 0xdeadbeef, 0xdeadbeef, 0xdeadbeef,
 0xdeadbeef) at 0xd0363284
rkeytab_cstub.op0_csr(h = 0x2007d3f0, items = (nil), st = 0x2ff78710, 0x2ff7825c
, 0x2ff782c0, 0x2ff78274, 0x2ff787a0) at 0xd047d7cc
rca_site_resolve_update(0x2ff787b0, 0x201e32e8, 0x2ff787a4, 0x2ff787a0, 0x47, 0x
177e0000, 0x200a5c88, 0x200a5c88) at 0xd033ce04
sec_rgy_site_bind_update(0x9c, 0xdeadbeef, 0xdeadbeef, 0xdeadbeef) at 0xd0338964

open_site_by_access(interp = 0x20162f28, site = "./doyen.test.cell", access = 0x
2ff78828), line 902 in "rgy_utils.c"
open_rgy_site(interp = 0x20162f28, name = "", access = site_update), line 790 in
 "rgy_utils.c"
principal_modify(clientData = (nil), interp = 0x20162f28, argc = 2, argv = 0x2ff
7c774), line 1141 in "rgy.c"
dcp_principal(clientData = (nil), interp = 0x20162f28, argc = 4, argv = 0x2ff7c7
74), line 1203 in "commands.c"
Tcl_Eval(0x9c, 0xdeadbeef) at 0x100020a4
Tcl_CatchCmd(0x9c, 0xdeadbeef, 0xdeadbeef, 0xdeadbeef) at 0x1000df44
Tcl_Eval(0x9c, 0xdeadbeef) at 0x100020a4
TclParseNestedCmd(0x9c, 0xdeadbeef, 0xdeadbeef, 0xdeadbeef, 0xdeadbeef) at 0x100
09594
TclParseWords(0x9c, 0xdeadbeef, 0xdeadbeef, 0xdeadbeef, 0xdeadbeef, 0xdeadbeef, 
0xdeadbeef, 0xdeadbeef) at 0x10009c00
Tcl_Eval(0x9c, 0xdeadbeef) at 0x10001e84
Tcl_UplevelCmd(0x9c, 0xdeadbeef, 0xdeadbeef, 0xdeadbeef) at 0x1000d274
Tcl_Eval(0x9c, 0xdeadbeef) at 0x100020a4
Tcl_CatchCmd(0x9c, 0xdeadbeef, 0xdeadbeef, 0xdeadbeef) at 0x1000df44
Tcl_Eval(0x9c, 0xdeadbeef) at 0x100020a4
TclParseNestedCmd(0x9c, 0xdeadbeef, 0xdeadbeef, 0xdeadbeef, 0xdeadbeef) at 0x100
09594
TclParseWords(0x9c, 0xdeadbeef, 0xdeadbeef, 0xdeadbeef, 0xdeadbeef, 0xdeadbeef, 
0xdeadbeef, 0xdeadbeef) at 0x10009c00
Tcl_Eval(0x9c, 0xdeadbeef) at 0x10001e84
InterpProc(0x9c, 0xdeadbeef, 0xdeadbeef, 0xdeadbeef) at 0x1000d5f0
Tcl_Eval(0x9c, 0xdeadbeef) at 0x100020a4
InterpProc(0x9c, 0xdeadbeef, 0xdeadbeef, 0xdeadbeef) at 0x1000d5f0
Tcl_Eval(0x9c, 0xdeadbeef) at 0x100020a4
Tcl_IfCmd(0x9c, 0xdeadbeef, 0xdeadbeef, 0xdeadbeef) at 0x100189a8
Tcl_Eval(0x9c, 0xdeadbeef) at 0x100020a4
Tcl_ForeachCmd(0x9c, 0xdeadbeef, 0xdeadbeef, 0xdeadbeef) at 0x1000ea88
Tcl_Eval(0x9c, 0xdeadbeef) at 0x100020a4
Tcl_ForeachCmd(0x9c, 0xdeadbeef, 0xdeadbeef, 0xdeadbeef) at 0x1000ea88
Tcl_Eval(0x9c, 0xdeadbeef) at 0x100020a4
Tcl_EvalFile(0x9c, 0xdeadbeef) at 0x10025040
Tcl_SourceCmd(0x9c, 0xdeadbeef, 0xdeadbeef, 0xdeadbeef) at 0x10023678
Tcl_Eval(0x9c, 0xdeadbeef) at 0x100020a4
Tcl_EvalFile(0x9c, 0xdeadbeef) at 0x10025040
main(argc = 0, argv = (nil)), line 366 in "main.c"

The parameters being passed to Tcl_EvalFile from main are changing
but nothing appears to be happening.

[10/21/94 public]
I was able to succesfully run these tests. I believe the problem was
in the namespace.



CR Number                     : 12597
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp registry func test fails
Reported Date                 : 10/12/94
Found in Baseline             : 1.1b21
Found Date                    : 10/12/94
Severity                      : C
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[10/12/94 public]

The following error were found in the journal file:

...
520|0 1 19274 1 73|registry_delete_009_N: Check for authentication to perform th
is operation.
520|0 1 19274 1 74|==== Contents of test case:
520|0 1 19274 1 75|{         list [catch {registry delete $DCP_RGY_SA_REP_NAME_S
LAVE1} msg] $msg     }
520|0 1 19274 1 76|Test completed successfully.
520|0 1 19274 1 77|== Test output was:
520|0 1 19274 1 78|{1 {User is not authorized to update record}}
520|0 1 19274 1 79|== Expected output was:
520|0 1 19274 1 80|{1 {Registry object not found}}
520|0 1 19274 1 81|Test Failed.
220|0 1 1 10:39:47|FAIL
...
520|0 1 19392 1 37|registry_disable_005_N: Check for authentication to perform t
his operation.
520|0 1 19392 1 38|==== Contents of test case:
520|0 1 19392 1 39|{         list [catch {registry disable $DCP_RGY_SA_REP_NAME_
MASTER} msg] $msg     }
520|0 1 19392 1 40|Test completed successfully.
520|0 1 19392 1 41|== Test output was:
520|0 1 19392 1 42|{1 {User is not authorized to update record}}
520|0 1 19392 1 43|== Expected output was:
520|0 1 19392 1 44|{1 {Registry object not found}}
520|0 1 19392 1 45|Test Failed.
220|0 1 1 10:40:14|FAIL
...
520|0 1 19302 1 37|registry_enable_005_N: Check for authentication to perform th
is operation.
520|0 1 19302 1 38|==== Contents of test case:
520|0 1 19302 1 39|{         list [catch {registry enable $DCP_RGY_SA_REP_NAME_M
ASTER} msg] $msg     }
520|0 1 19302 1 40|Test completed successfully.
520|0 1 19302 1 41|== Test output was:
520|0 1 19302 1 42|{1 {User is not authorized to update record}}
520|0 1 19302 1 43|== Expected output was:
520|0 1 19302 1 44|{1 {Registry object not found}}
520|0 1 19302 1 45|Test Failed.
220|0 1 1 10:41:07|FAIL
...
520|0 1 19405 1 73|registry_stop_009_N: Check for authentication to perform this
 operation.
520|0 1 19405 1 74|==== Contents of test case:
520|0 1 19405 1 75|{         list [catch {registry stop $DCP_RGY_SA_REP_NAME_SLA
VE1} msg] $msg     }
520|0 1 19405 1 76|Test completed successfully.
520|0 1 19405 1 77|== Test output was:
520|0 1 19405 1 78|{1 {User is not authorized to update record}}
520|0 1 19405 1 79|== Expected output was:
520|0 1 19405 1 80|{1 {Registry object not found}}
520|0 1 19405 1 81|Test Failed.
220|0 1 1 10:41:44|FAIL
...
520|0 1 15952 1 73|registry_synchronize_009_N: Check for authentication to perfo
rm this operation.
520|0 1 15952 1 74|==== Contents of test case:
520|0 1 15952 1 75|{         list [catch {registry synchronize $DCP_RGY_SA_REP_N
AME_SLAVE1} msg] $msg     }
520|0 1 15952 1 76|Test completed successfully.
520|0 1 15952 1 77|== Test output was:
520|0 1 15952 1 78|{1 {User is not authorized to update record}}
520|0 1 15952 1 79|== Expected output was:
520|0 1 15952 1 80|{1 {Registry object not found}}
520|0 1 15952 1 81|Test Failed.
220|0 1 1 10:42:22|FAIL
...
520|0 1 8650 1 75|registry_modify_009_N: Check for authentication to perform thi
s operation.
520|0 1 8650 1 76|==== Contents of test case:
520|0 1 8650 1 77|{         list [catch {registry modify $DCP_RGY_SA_REP_NAME_MA
STER -key} msg] $msg     }
520|0 1 8650 1 78|Test completed successfully.
520|0 1 8650 1 79|== Test output was:
520|0 1 8650 1 80|{1 {User is not authorized to update record}}
520|0 1 8650 1 81|== Expected output was:
520|0 1 8650 1 82|{1 {Registry object not found}}
520|0 1 8650 1 83|Test Failed.
220|0 1 1 10:43:03|FAIL
...
520|0 1 8550 1 73|registry_set_009_N: Check for authentication to perform this o
peration.
520|0 1 8550 1 74|==== Contents of test case:
520|0 1 8550 1 75|{         list [catch {registry set $DCP_RGY_SA_REP_NAME_SLAVE
1} msg] $msg     }
520|0 1 8550 1 76|Test completed successfully.
520|0 1 8550 1 77|== Test output was:
520|0 1 8550 1 78|{1 {User is not authorized to update record}}
520|0 1 8550 1 79|== Expected output was:
520|0 1 8550 1 80|{1 {Registry object not found}}
520|0 1 8550 1 81|Test Failed.
220|0 1 1 10:44:34|FAIL

[10/26/94 public]
I'm cancelling this since I think it's just a matter of running the tests
not as root and without being dce_login'ed.  This has occurred with other
tests.  If this is not the case it can be reopened.



CR Number                     : 12591
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : acl test failures
Reported Date                 : 10/12/94
Found in Baseline             : 1.1b21
Found Date                    : 10/12/94
Severity                      : C
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[10/12/94 public]

The following failures were found in the dcecp functional acl test:

...
520|0 1 12536 1 140|acl_delete_015_N: Check that the user must be authenticated
to
520|0 1 12536 1 141|acl_delete_015_N: delete an object's ACL.
520|0 1 12536 1 142|==== Contents of test case:
520|0 1 12536 1 143|{         list [catch {acl delete /.:/hosts} msg] $msg     }
520|0 1 12536 1 144|Test completed successfully.
520|0 1 12536 1 145|== Test output was:
520|0 1 12536 1 146|{1 {at least one control permission bit required on acl}}
520|0 1 12536 1 147|== Expected output was:
520|0 1 12536 1 148|{1 {operation on acl not authorized}}
520|0 1 12536 1 149|Test Failed.
220|0 1 1 15:57:18|FAIL
...
520|0 1 12440 1 385|acl_modify_042_N: Check that the user needs to be authentica
ted
520|0 1 12440 1 386|acl_modify_042_N: to modify the object's ACL.
520|0 1 12440 1 387|==== Contents of test case:
520|0 1 12440 1 388|{         list [catch {acl modify /.:/hosts -r "user:$DCP_CL
IENT"} msg] $msg     }
520|0 1 12440 1 389|Test completed successfully.
520|0 1 12440 1 390|== Test output was:
520|0 1 12440 1 391|{0 {}}
520|0 1 12440 1 392|== Expected output was:
520|0 1 12440 1 393|{1 {operation on acl not authorized}}
520|0 1 12440 1 394|Test Failed.
220|0 1 1 15:59:56|FAIL
...
520|0 1 17813 1 213|acl_replace_023_N: Check that the user must be authenticated
 to
520|0 1 17813 1 214|acl_replace_023_N: replace an object's ACL.
520|0 1 17813 1 215|==== Contents of test case:
520|0 1 17813 1 216|{         list [catch {acl replace /.:/hosts -acl "user:$DCP
_CLIENT:rc"} msg] $msg     }
520|0 1 17813 1 217|Test completed successfully.
520|0 1 17813 1 218|== Test output was:
520|0 1 17813 1 219|{0 {}}
520|0 1 17813 1 220|== Expected output was:
520|0 1 17813 1 221|{1 {operation on acl not authorized}}
520|0 1 17813 1 222|Test Failed.
220|0 1 1 16:02:17|FAIL
...
520|0 1 12322 1 248|acl_check_023_P: Display ACL permissions of invoker for 1 AC
L object with
520|0 1 12322 1 249|acl_check_023_P: no authentication.
520|0 1 12322 1 250|==== Contents of test case:
520|0 1 12322 1 251|{ acl check /.:/hosts          dcp_acl_find_multi_entries "/
.:/hosts" {} {} [list "unauthenticated [acl check /.:/hosts]"]    }
520|0 1 12322 1 252|== Test generated error.
520|0 1 12322 1 253|== Test output was:
520|0 1 12322 1 254|{invalid acl handle}
220|0 1 1 16:04:36|FAIL
...
520|0 1 17670 1 97|acl_permissions_027_P: Display ACL permissions associated wit
h 1 ACL object with
520|0 1 17670 1 98|acl_permissions_027_P: no authentication.
520|0 1 17670 1 99|Command: {acl permissions /.:/hosts}
520|0 1 17670 1 100|Command Result: {invalid acl handle}
520|0 1 17670 1 101|Test Failed.
220|0 1 1 16:30:21|FAIL

[10/12/94 public]

It looks like you have a login context before running the dcecp ACL FVT
test suite.

The tests will take care of logging in and out appropriately.

[10/12/94 public]
When running the test I did NOT have a login context.
I ran the tests as root.

[10/12/94 public]

Sorry.. When logged in as root you have the login context of 
/.:/hosts/{machine_name}/self . So in effect you are logged in.
Do a 'klist' look at your credentials.

[10/12/94 public]
I reran the test on BL22 without any failures.



CR Number                     : 12537
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : don't build with -g by default
Reported Date                 : 10/6/94
Found in Baseline             : 1.1b20
Found Date                    : 10/6/94
Severity                      : E
Priority                      : 0
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : src/admin/dcecp/Makefile
Sensitivity                   : public

[10/6/94 public]
Remove the -g from CFLAGS and LDFLAGS so that we build without it by
default.  People who want to build should be able to set OPT_LEVEL to -g
and get everything they need.

[10/6/94 public]
Nevermind.  Why change compiler options at this point.  Other things are
shipping with -g by default.



CR Number                     : 12475
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : dcecp -c prin modify -remove core dumps
Reported Date                 : 10/3/94
Found in Baseline             : 1.1b20
Found Date                    : 10/3/94
Severity                      : A
Priority                      : 0
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[10/3/94 public]

While I remembered part-way through this that you're supposed
to use the non-abbreviated object (eg. principal vs. prin) it
still doesn't seem like coredumping is the appropriate behavior
since it's VERY easy to use the shorthand and sometimes it works
for some operations

root@yosemite> dcecp -c xattr show /.:/sec/xattrschema/mytestattr
{aclmgr
 {{principal {{query r} {update rfu} {test r} {delete rDm}}}
  {group {{query r} {update rm} {test rt} {delete rDm}}}
  {organization {{query r} {update rm} {test rt} {delete rDm}}}}}
{annotation {}}
{applydefs no}
{encoding printstring}
{intercell reject}
{multivalued yes}
{reserved no}
{scope {}}
{trigbind {none {}}}
{trigtype none}
{unique no}
{uuid 0c9a0288-deda-11cd-99d0-0000c0dade56}
root@yosemite> dcecp -c prin modify foo -add {mytestattr val1}

root@yosemite> dcecp -c prin show foo -xattr
{mytestattr val1}
root@yosemite> dcecp -c prin modify foo -remove mytestattr
Memory fault(coredump)
root@yosemite> dcecp -c acl show /.:/sec/xattrschema
{unauthenticated r----}
{user 00000000-0000-0000-0000-000000000000 rcidm}
{other_obj r----}
{any_other r----}


 0 strlen@libc + 0x00000008 (hp-ux export stub)
 1 rpc_ss_build_bounds_list@libdc + 0x000004e8 (0x7b0388ec, 0x2d6f626a, 0, 0)
 2 rpc_ss_pointee_desc_from_data@ + 0x00000550 (0x7af98b40, 0x2d6f626a, 0, 0)
 3 rpc_ss_ndr_marsh_union_ptees@l + 0x000005b0 (0x7af987ac, 0x3, 0x7b0367bc, 0x7b037f88)
 4 rpc_ss_ndr_m_enc_union_or_ptee + 0x00000190 (0x7b0367b8, 0x828, 0x1, 0x7b037f88)
 5 rpc_ss_ndr_m_struct_pointees@l + 0x000012cc (0x7b03800f, 0x804, 0x7b0367a8, 0x7b037f88)
 6 rpc_ss_ndr_m_f_or_c_arr_ptees@ + 0x0000028c (0x7b0367a8, 0x1, 0x40116ba8, 0x7af98470)
 7 rpc_ss_ndr_m_dfc_arr_ptees@lib + 0x00000140 (0x4df, 0x7b0367a8, 0, 0)
 8 rpc_ss_ndr_marsh_interp@libdce + 0x00002108 (0x1, 0x158, 0x7b0381f8, 0x7b037f88)
 9 op1_csr@libdce + 0x00000260 (0x40116420, 0x7b037944, 0x401121f0, 0x1)
10 sec_rgy_attr_lookup_by_id@libd + 0x00000250 (0x400c4610, 0, 0x7b0360f4, 0x7b037598)
11 check_era_info (interp = 0x400be6b8, domain = 0, name = 0x7b0360f4, in_attrs = 0x7b0367a8, attr_info = 0x7b036770, out_attrs = 0x7b036a78, del_attrs = 0x7b036d48)    [/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c: 1812]
12 principal_modify (clientData =   00000000, interp = 0x400be6b8, argc = 2, argv = 0x7b035708)    [/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy.c: 1210]
13 dcp_principal (clientData =   00000000, interp = 0x400be6b8, argc = 4, argv = 0x7b035798)    [/project/dce/build/dce1.1-snap/src/admin/dcecp/commands.c: 1164]
14 Tcl_Eval + 0x000009f0 (0x400be6b8, 0x7b0353b0, 0x7b035588, 0x7b035548)
15 Tcl_UplevelCmd + 0x0000023c (0, 0x400be6b8, 0x1, 0x7b03548c)
16 Tcl_Eval + 0x000009f0 (0x400be6b8, 0x7b034f0e, 0, 0x40)
17 TclParseNestedCmd + 0x0000005c (0x400be6b8, 0x7b034f0e, 0, 0x7b035250)
18 TclParseWords + 0x000002ac (0x400be6b8, 0x7b034f06, 0, 0x8)
19 Tcl_Eval + 0x000003a4 (0x400be6b8, 0x7b034f00, 0x7b0350c8, 0x7b034fb0)
20 Tcl_IfCmd + 0x000003d8 (0, 0x400be6b8, 0x3, 0x7b034fc8)
21 Tcl_Eval + 0x000009f0 (0x400be6b8, 0x4010c6ec, 0x7b034e88, 0x7b034d70)
22 Tcl_IfCmd + 0x000003d8 (0, 0x400be6b8, 0x3, 0x7b034d88)
23 Tcl_Eval + 0x000009f0 (0x400be6b8, 0x400c33e0, 0x4010c1b0, 0)
24 InterpProc + 0x00000530 (0x400c33c8, 0x400be6b8, 0, 0x7b034a88)
25 Tcl_Eval + 0x000009f0 (0x400be6b8, 0x40107680, 0x40002664, 0x40002664)
26 Tcl_AppInit (interp = 0x400be6b8)    [/project/dce/build/dce1.1-snap/src/admin/dcecp/main.c: 673]
27 main (argc = 7, argv = 0x7b0337a0)    [/project/dce/build/dce1.1-snap/src/admin/dcecp/main.c: 351]

[10/3/94 public]
In an attempt to get cell_admin back on /.:/sec/xattrschema, I 
thought I'd make my own admin and then adjust the acl - didn't
need the last step...  is this normal??

dcecp> acl show /.../bl20_sec_cell.osf.org/sec/xattrschema
{unauthenticated r----}
{user 00000000-0000-0000-0000-000000000000 rcidm}
{other_obj r----}
{any_other r----}
dcecp> help prin create
-alias              Add principal named as an alias of specified uid
-attribute          Attribute list to be assigned to the principal to be added
-fullname           Fullname of the principal to be added
-quota              Quota of the principal to be added
-uid                User Identifier of the principal to be added
-uuid               Orphaned UUID to be adopted by the specified principal
dcecp> prin create myadmin -uuid 00000000-0000-0000-0000-000000000000
dcecp> acl show /.../bl20_sec_cell.osf.org/sec/xattrschema
{unauthenticated r----}
{user cell_admin rcidm}
{other_obj r----}
{any_other r----}

[10/3/94 public]
More strangeness between 'principal' and 'prin' and ACLs...:
dcecp> acl show /.../bl20_sec_cell.osf.org/sec/xattrschema
{unauthenticated r----}
{user 00000000-0000-0000-0000-000000000000 rcidm}
{other_obj r----}
{any_other r----}
dcecp> prin create aaadmin  -uuid 00000000-0000-0000-0000-000000000000
dcecp> acl show /.../bl20_sec_cell.osf.org/sec/xattrschema
{unauthenticated r----}
{user 00000000-0000-0000-0000-000000000000 rcidm}
{other_obj r----}
{any_other r----}
dcecp> principal create bbadmin -uuid 00000000-0000-0000-0000-000000000000
dcecp> acl show /.../bl20_sec_cell.osf.org/sec/xattrschema
{unauthenticated r----}
{user cell_admin rcidm}
{other_obj r----}
{any_other r----}
dcecp> prin show bbadmin -all
{fullname {}}
{uid 1735}
{uuid 000006c7-deec-21cd-9900-0000c0dade56}
{alias no}
{quota unlimited}

[10/3/94 public]
Many (not all) of the problems Martha is seeing have been fixed in a 
later dcecp. I have given her a bleeding edge copy (built 10/3 @ 1500).
Hand tests show that the handling of principal mod -remove works fine.

She will be using the new dcecp for her tests for now.

The sypmtoms of the acl not being updated with the new principal information
are consistent with writing to the master (princ create) and reading from
a replica (acl show). Due to the fact that acl show handles its own 
binding, there is no way for dcecp to cache a handle to the master. The
workaround for this is to 

a) set _s(sec) subsys/dce/sec/master

... This will force all reads and writes to go to the master.

b) wait for registry propogation from master to replica.


There are other problems in dealing with using the nil uuid. This seems
to be a bug. I'm investigating.

[10/4/94 public]
Nope. The nil UUID action is expected. I believe that we have covered all 
of the issues raised here with a new binary. Cancelled.



CR Number                     : 12412
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : loops don't print result
Reported Date                 : 9/29/94
Found in Baseline             : 1.1b19
Found Date                    : 9/29/94
Severity                      : A
Priority                      : 0
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[9/29/94 public]
We broke something recently....

The following command produces no output
dcecp> foreach i [group list subsys/dce/dts-servers] {
> princ show $i
> }

But this does.
dcecp> foreach i [group list subsys/dce/dts-servers] {
> puts $i
> }
/.../dcecp_cell.osf.org/hosts/frick/self
/.../dcecp_cell.osf.org/hosts/ice/self

This looks bad.

[9/29/94 public]
After some thought, this is not a bug. The foreach command is the one 
that is setting the result (to nothing). This is the correct behavior.



CR Number                     : 12350
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : acl
Short Description             : acl bind's don't require res. name
Reported Date                 : 9/27/94
Found in Baseline             : 1.1b18
Found Date                    : 9/27/94
Severity                      : B
Priority                      : 1
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[9/27/94 public]
I'm not sure about this one, maybe I'm crazy.  On absolut I did:

  dcecp> acl show  {14083b2e-d936-11cd-ab43-080009251352 ncacn_ip_tcp \
  > 130.105.5.93 principal/melman}
  {unauthenticated r-------g}
  {user_obj r---f--ug}
  {user cell_admin rcDnfmaug}
  {group acct-admin rcDnfmaug}
  {other_obj r-------g}
  {any_other r--------}
  dcecp> acl show  {14083b2e-d936-11cd-ab43-080009251352 ncacn_ip_tcp \
  > 130.105.5.45 principal/melman} 
  Error: Not registered in endpoint map

  dcecp> acl show {019ee420-682d-11c9-a607-08002b0dea7a ncacn_ip_tcp \
  > 130.105.5.45 principal/jas}
  {unauthenticated r--}
  {user 000030a7-d948-21cd-bf00-0800092734a4 rwc}
  {group 00000067-d946-21cd-bf01-0800092734a4 rwc}
  {any_other r--}
  dcecp>  acl show {019ee420-682d-11c9-a607-08002b0dea7a ncacn_ip_tcp \
  > 130.105.5.45 principal/melman}
  {unauthenticated r--}
  {user 000030a7-d948-21cd-bf00-0800092734a4 rwc}
  {group 00000067-d946-21cd-bf01-0800092734a4 rwc}
  {any_other r--}

The first one works great.  Then I changed the ip address to ice and got
an error, great.  I took a command line from CR 11635 and tried that and it
worked.   It also points to ice.  Then I tried the same binding but changed
the name to melman and still saw the same information.  But there is no
melman in the registry on ice.  To be clear, I did this all on absolut
which was a single machine cell and had not established intercell with
anyone, particularly ice.

[9/29/94 public]
You're not crazy. But it drove me crazy for a few minutes.

On absolut, we have:
{{object 019ee420-682d-11c9-a607-08002b0dea7a}
 {interface {000cf72e-0688-1acb-97ad-08002b12b8f8 1.0}}
 {binding {ncacn_ip_tcp 130.105.5.93 3605}}
 {annotation {Time SVC}}}

{{object 3442e97a-db84-11cd-b811-080009251352}
 {interface {b62dc198-dfd4-11ca-948f-08001e02594c 2.0}}
 {binding {ncacn_ip_tcp 130.105.5.93 3357}}
 {annotation {DCE user registry}}}

On ice, we have:
{{object 019ee420-682d-11c9-a607-08002b0dea7a}
 {interface {000cf72e-0688-1acb-97ad-08002b12b8f8 1.0}}
 {binding {ncacn_ip_tcp 130.105.5.45 2282}}
 {annotation {Time SVC}}}

{{object 693f2c16-db8d-11cd-82a1-0800092734a4}
 {interface {4c878280-5000-0000-0d00-028714000000 1.0}}
 {binding {ncacn_ip_tcp 130.105.5.45 2314}}
 {annotation {DCE user registry}}}

Notice that the Object UUID for the dts server is the same on both
machines.  In CR11635, I meant to use the OBJECT UUID of the 
security server and not the dts server.

So when you did:
dcecp> acl show {019ee420-682d-11c9-a607-08002b0dea7a ncacn_ip_tcp 130.105.5.45 principal/jas}
{unauthenticated r--}
{user 000030a8-db93-21cd-a300-0800092734a4 rwc}
{group 00000067-db8d-21cd-a301-0800092734a4 rwc}
{any_other r--}

In the above case, you are actually getting the dts server ACL object 
from ice. And since ice is the default cell on this ACL and there is 
no intercell connection to ice and ice is not in the 
/.../absolut_cell.osf.org, the keys for users and groups are displayed 
as UUIDs.

dcecp> acl sh {019ee420-682d-11c9-a607-08002b0dea7a ncacn_ip_tcp 130.105.5.93 x}
{unauthenticated r--}
{user hosts/absolut/self rwc}
{group subsys/dce/dts-admin rwc}
{any_other r--}

In the above, you are actually getting the dts server ACL
object from absolut.

*******
Also note that "acl_edit" and "dcecp acl" both expect a residual
name when performing ACL operations using string bindings. If a 
particular ACL manager does not require a residual name, then the
residual name is ignored. As is the case above. Notice:

dcecp> acl sh {019ee420-682d-11c9-a607-08002b0dea7a ncacn_ip_tcp 130.105.5.93}
Error: invalid acl handle

Should this be documented somewhere, Howard?  If not, I'll cancel
this defect.
*******

Here are some examples obtaining ACL objects from the registry:

dcecp> acl sh {3442e97a-db84-11cd-b811-080009251352 ncacn_ip_tcp 130.105.5.93 group/none}
{unauthenticated r-t-----}
{user cell_admin rctDnfmM}
{group_obj r-t-----}
{group acct-admin rctDnfmM}
{other_obj r-t-----}
{any_other r-t-----}
dcecp> acl sh {3442e97a-db84-11cd-b811-080009251352 ncacn_ip_tcp 130.105.5.93 org/none}
{unauthenticated r-t-----}
{user cell_admin rctDnfmM}
{group acct-admin rctDnfmM}
{other_obj r-t-----}
{any_other r-t-----}
dcecp> acl sh {3442e97a-db84-11cd-b811-080009251352 ncacn_ip_tcp 130.105.5.93 principal/cell_admin}
{unauthenticated r--------}
{user_obj rcDnfmaug}
{user cell_admin rcDnfmaug}
{other_obj r-------g}
{any_other r--------}

[3/28/95 public]
I'm trying to understand what the work item is here. Is this a doc change,
or should the code be changed to require residual names in certain instances?



CR Number                     : 12348
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp login bus error
Reported Date                 : 9/26/94
Found in Baseline             : 1.1b18
Found Date                    : 9/26/94
Severity                      : B
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[9/26/94 public]

I setup a cellalias using the "dcecp cellalias" command on node
A, then entered the alias into DNS and restarted gdad on node B
(both nodes are in separate cells). I tried to login from node
B to /.../<alias name of A>/cell_admin, which failed with 
"User Identification Failure. - Registry object not found."

The I started dcecp on node B and called a procedure which
simply executed "login cell_admin -password -dce-". Before
returning or outputting any message this crashed with the
output "Bus error(coredump)". 

The backtrace under xdb simply shows the stack as 
>t
 0 free@libc + 0x00000008 (hp-ux export stub)


I tried running dcecp again with the same result. 

This is using last night's build.

[9/26/94 public]
Kevin, you seem like the right person to start (and maybe finish :-) this
one...

[9/29/94 public]
The only part of this CR is a bus error that occurs on an HP.  The other
login problems mentioned here are handled by other CR's.  John has had
problems reproducing the bus error.  Will try again.

[9/29/94 public]
Maybe memory overwrites found in other OT's will fix...

[9/30/94 public]
I think that the memory fixes from yesterday worked. I have set up an
HP single machine cell (merckx.cell.osf.org) and a 486 single machine 
cell (rescue.cell.osf.org). I have aliased rescue.cell.osf.org to
search.cell.osf.org . I then register all of the above (merckx, rescue
and search) in DNS. Finally I aliased the krbtgt from rescue.cell.osf.org
to search.cell.osf.org on merckx. When trying to log into 
/.../search.cell.osf.org/cell_admin, it fails with "registry server 
unavailable" (as expected... there is a bug on this). From then on, this 
is where I saw the bug on Rick's machine. After about an hour of testing,
I can't reporduce the problem. Downgrading. Hope to cancel next week.

[10/3/94 public]
Cancel. Unable to reproduce.



CR Number                     : 12335
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp principal show does not show ERAs
Reported Date                 : 9/26/94
Found in Baseline             : 1.1b18
Found Date                    : 9/26/94
Severity                      : B
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[9/26/94 public]

With bl-18.2 I tried to modify some principals after setting up the test environment
by hand. Running under root and dce_logged in as cell_admin I did:
 # dcecp
dcecp> princ show gds_invalid
{fullname {}}
{uid 354}
{uuid 00000162-d6b2-21cd-ae00-080009419c99}
{alias no}
{quota unlimited}
{groups gds_sec_grp}
dcecp> principal modify gds_invalid -add {X500_DSA_Admin {testvalue} \
  {/C=re/O=sni/OU=buba/CN=dsa/CN=dsa1}}
dcecp> show principal gds_invalid
{fullname {}}
{uid 354}
{uuid 00000162-d6b2-21cd-ae00-080009419c99}
{alias no}
{quota unlimited}
{groups gds_sec_grp}
dcecp> q

Testprograms verify, that the ERA value actually is present in the rgy
and assigned to that principal.

[9/26/94 public]
As of somewhere in bl18, there were two new switches added
to the pgo show command.  The '-all' switch is used to show
both regular and extended attribute data, so the command is...

dcecp> principal show -all gds_invalid
{fullname {}}
{uid 354}
{uuid 00000162-d6b2-21cd-ae00-080009419c99}
{alias no}
{quota unlimited}
{groups gds_sec_grp}
{X500_DSA_Admin {value}}
dcecp>

And the '-xattrs' switch is used to just show extended
attributes, so the command is...

dcecp> principal show -xattrs gds_invalid
{X500_DSA_Admin {value}}
dcecp>

And no switch shows just regular attribute, so the command is...

dcecp> principal show gds_invalid
{fullname {}}
{uid 354}
{uuid 00000162-d6b2-21cd-ae00-080009419c99}
{alias no}
{quota unlimited}
{groups gds_sec_grp}
dcecp>



CR Number                     : 12302
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 10703
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : audit
Short Description             : Add command to allow audit trail file size to be changed
Reported Date                 : 9/22/94
Found in Baseline             : 1.1b18, 1.2
Found Date                    : 9/22/94
Severity                      : C
Priority                      : 3
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.2.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[9/22/94 public]
When CR 10703 was fixed, the ability to create an audit trail with
a given limit (auditrailfilesize) was added.  An api for this was
created at that time as well as an environment variable.

It would be nice if auditd and dcecp were enhanced to allow the trailfilesize
of the central audit trail to be changed.

[9/25/95 public]
Currently, DCE Administrator can use -s option, i.e auditd -s <trail_file_limit>to change the size. Do you really want dcecp to support the same option, too???

[9/28/95 public]
After reviewed the Audit Spec, I think this may be a good idea.  Once, the size
is set from either environment variable DCEAUDITTRAILSIZE or from -s option,
we should let DCE user change it by using dcecp.  My suggestion would be:

   dcecp -c aud change -size <newtrailsize>

The <newtrailsize> will be passed to dce_aud_set_trail_size_limit() to set the
new size for the trail file.

[10/31/95 public]
I'm not convinced that this would be very useful. I would like to vote for
cancelling this. I think there are enough avenues to change the trail size
without resorting to another. This would only allow changing the central
trail file and not any random trail file. If I lose this vote, than the
dcecp syntax should be:

dcecp> aud modify {trailsize <new_size>}
and
dcecp> aud modify -trailsize <new_size>

There is no need to create a new aud operation for this.

Just to reiterate, this should be cancelled.

[10/22/96 public]
Cancel, for the reasons John mentions above.



CR Number                     : 12269
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : general
Short Description             : dcp_id_parse_name should be in general location
Reported Date                 : 9/20/94
Found in Baseline             : 1.1
Found Date                    : 9/20/94
Severity                      : C
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : util_general.c util_general.h rgy.h rgy_utils.c
Sensitivity                   : public

[9/20/94 public]

The function dcp_id_parse_name should be in a general location.

[9/21/94 public]

Basicly not worth the trouble. At best the prototype should be moved to 
a general location.



CR Number                     : 12266
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dts
Short Description             : dts show produces Memory fault.
Reported Date                 : 9/20/94
Found in Baseline             : 1.1
Found Date                    : 9/20/94
Severity                      : B
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[9/20/94 public]

Executing a 'dts show' produces a memory fault. 
Here is the sequence I used.

dcecp> lca
Password must be changed!
dcecp> dts mod -minserver 1
dcecp> dts show
Memory fault


gdb did not give me much:

Starting program: /bin/dcecp 
dcecp> dts show

Program received signal 11, Segmentation fault
0xa400db88 in _doprnt ()
-> bt
#0  0xa400db88 in _doprnt ()
#1  0xa403f4b4 in vsprintf ()
Cannot access memory at address 0x2.

[9/20/94 public]
I can't reproduce this on any machine, including yours. I'll leave this
open for a while in case one of us can come up with more info.

[9/22/94 public]
Downgraded in preparation for a cancel.



CR Number                     : 12178
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : intercell login failure
Reported Date                 : 9/14/94
Found in Baseline             : 1.1b17
Found Date                    : 9/14/94
Severity                      : B
Priority                      : 3
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[9/14/94 public]

I have an intercell configuration with cells /.../dcecp_cell.osf.org and
/.../rescue_cell.osf.org. Use the following script, INTERCELL_SCRIPT,
to reproduce this problem since it's intermittent.

-----CUT HERE----------

proc intercell_prin {} {
    
    set DCP_CLIENT cell_admin
    set DCP_CLIENT_PW dcecp
    set DCP_CELLNAME_TWO /.../rescue_cell.osf.org
    set i 0


    for {set i 0} {$i < 50} {incr i} {
        login $DCP_CELLNAME_TWO/$DCP_CLIENT -password $DCP_CLIENT_PW
	set rc [catch "principal create $DCP_CELLNAME_TWO/prin$i" create_result]
        logout
	puts $create_result
        login $DCP_CELLNAME_TWO/$DCP_CLIENT -password $DCP_CLIENT_PW
	set rc [catch "principal delete $DCP_CELLNAME_TWO/prin$i" delete_result]
        logout
	puts $delete_result
    }

}

-----CUT HERE----------

Under gdb:
dcecp> source INTERCELL_SCRIPT
dcecp> intercell_prin

Program received signal 11, Segmentation fault
0xa4003548 in malloc ()
(gdb) bt
#0  0xa4003548 in malloc ()
#1  0xa40034a8 in malloc ()
#2  0xa41cdd95 in rpc__mem_alloc (12, 63, 0)
#3  0xa41e23fe in rpc__tower_ref_alloc
    (7703236, 5, 1, -1073758680, -1073755928)
#4  0xa41dbd84 in rpc__naf_tower_flrs_to_addr
    (7703236, -1073758640, -1073755928)
#5  0xa41e158b in rpc_tower_to_binding (7703236, 7598632, -1073755928)
#6  0xa431874d in rca_rebind_tower (7598616, -1073755928)
#7  0xa431a726 in rca_site_bind_from_tower_vec
    (8360704, 7445336, 7444504, -1073755956, -1073755960, -1073755928)
#8  0xa431b875 in rca_site_resolve_update
    (-1073755956, 7941856, -1073755960, -1073755928)
#9  0xa42f7bbc in sec_rgy_site_bind_update
    (5307456, -1073755956, -1073755960, -1073755928)
#10 0x41411c in open_site_by_access (site=0x50fc40 "/.../rescue_cell.osf.org", 
    access=0xbfffcd30)
    at /project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c:831
#11 0x413d64 in open_rgy_site (interp=0x5830b0, 
    name=0xbfffd9c0 "/.../rescue_cell.osf.org", access=site_update)
    at /project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c:720
#12 0x410c4a in principal_create (clientData=0x0, interp=0x5830b0, argc=2, 
    argv=0xbfffe3fc)
    at /project/dce/build/dce1.1-snap/src/admin/dcecp/rgy.c:650
#13 0x4028d5 in dcp_principal (clientData=0x0, interp=0x5830b0, argc=2, 
    argv=0xbfffe3fc)
    at /project/dce/build/dce1.1-snap/src/admin/dcecp/commands.c:1113
#14 0x4b6c79 in Tcl_Eval (5779632, -1073748330)
#15 0x4b7b11 in Tcl_CatchCmd (0, 5779632, 3, -1073748400)
#16 0x4b6c79 in Tcl_Eval (5779632, 6510914)
#17 0x4cbbd0 in TclParseNestedCmd
    (5779632, 6510914, 0, -1073747672, -1073747592)
#18 0x4cc0c5 in TclParseWords
    (5779632, 6510906, 0, 8, -1073747672, -1073747692, -1073747636, -1073747592)
#19 0x4b664c in Tcl_Eval (5779632, 6510835)
#20 0x4b83b1 in Tcl_ForCmd (0, 5779632, 5, -1073746916)
#21 0x4b6c79 in Tcl_Eval (5779632, 6520584)
#22 0x4cdd2b in InterpProc (6537352, 5779632, 0, -1073745988)
#23 0x4b6c79 in Tcl_Eval (5779632, -1073744088)
#24 0x4c925b in Tcl_RecordAndEval (5779632, -1073744088, 0)
#25 0x4007ff in main (argc=1, argv=0xbffff824)
    at /project/dce/build/dce1.1-snap/src/admin/dcecp/main.c:445


Also, note that the following FVT intercell cells tests are core
dumping:
acl_modify_051_P
acl_modify_054_P
acl_modify_061_P
acl_modify_071_P
acl_modify_091_P
acl_modify_101_P
acl_modify_134_P

[9/14/94 public]

/.../dcecp_cell.osf.org has the master security replica on a HP-UX
platform.  /.../rescue_cell.osf.org has the master security replica 
on an OSF/1 platform.

I've modified the above script to narrow down the problem. It's
still intermittent. But it seems to be a problem with logging into
a foreign cell.

----CUT HERE----------------------------

proc intercell_login {} {
    
    set DCP_CLIENT cell_admin
    set DCP_CLIENT_PW dcecp
    set DCP_CELLNAME_TWO /.../rescue_cell.osf.org
    set i 0


    for {set i 0} {$i < 50} {incr i} {
	set rc [catch "login $DCP_CELLNAME_TWO/$DCP_CLIENT -password $DCP_CLIENT_PW" create_result]
	puts $create_result
	set rc [catch "logout" delete_result]
	puts $delete_result
    }

}

----CUT HERE----------------------------


Under gdb:
dcecp> source INTERCELL_SCRIPT2
dcecp> intercell_login

Program received signal 11, Segmentation fault
0xa4003548 in malloc ()
(gdb) bt
#0  0xa4003548 in malloc ()
#1  0xa40034a8 in malloc ()
#2  0xa438b55f in asn1_alloc_malloc (20, 0)
#3  0xa447382d in krb5_timestamp2asn1_field (-1073760544, 8740400)
#4  0xa44716bb in krb5_authenticator2Authenticator (-1073760556, 8740368)
#5  0xa446ff6e in krb5_encode_generic
    (-1073760556, -1073760560, -1538904040, 52, -1538904248,
    -1538845096, -1538905288)
#6  0xa447f799 in krb5_mk_req_extended
    (0, -1073760388, 0, 0, 0, 0, -1073760040, 0, -1073760400)
#7  0xa44835b9 in krb5_send_tgs
    (0, 8713212, 1, 2, 8761160, 8710944, 0, 0, 0, -1073760040,
    -1073760224)
#8  0xa447cb65 in krb5_get_cred_via_tgt (-1073760040, 0, 1, 2,
    8713192)
#9  0xa447c9d2 in krb5_get_cred_from_kdc (8770328, 8713192,
    -1073759868)
#10 0xa447d48c in krb5_get_credentials (16, 8770328, 8713192)
#11 0xa4346f6a in sec_krb_get_cred
    (8787392, 8673656, 5, 1, 8735324, -1073759756)
#12 0xa423d760 in rpc__krb_get_tkt (8735240)
#13 0xa423ddf7 in rpc__krb_bnd_set_auth
    (8740624, 5, 8787392, 1, 8738568, -1073759656, -1073749868)
#14 0xa41d20f1 in rpc_binding_set_auth_info
    (8738568, 8740624, 5, 1, 8787392, 1, -1073749868)
#15 0xa431850a in rca_setup_handle (8738312, -1073749868)
#16 0xa4319a45 in rca_site_bind_nsi_cell_if
    (8738312, 8741584, -1538564748, -1073749868)
#17 0xa4319c31 in rca_site_bind_nsi_cell (8738312, 8741584,
    -1073749868)
#18 0xa4317cd7 in rca_nsi_binding_import (8738312, -1073749868)
#19 0xa431acb4 in rca_site_bind
    (-1073756836, -1073755764, 2, -1538547864, -1540001130, 8787392,
    -1073750048, -1073749868)
#20 0xa4357327 in bind_to_rgy
    (8787392, 1, 1, 8787392, -1073750048, -1073749868,
    -1073755184)
#21 0xa4359fe9 in sec_login_pvt_get_login_info
    (0, 8787392, -1073750012, -1073749868)
#22 0xa43507af in sec_login_validate_identity
    (8787392, -1073749856, -1073749308, -1073749316, -1073749868)
#23 0x405d09 in dcp_login (clientData=0x0, interp=0x5830b0, argc=2, 
    argv=0xbfffe3fc)
    at /project/dce/build/dce1.1-snap/src/admin/dcecp/commands.c:3036
#24 0x4b6c79 in Tcl_Eval (5779632, -1073748330)
#25 0x4b7b11 in Tcl_CatchCmd (0, 5779632, 3, -1073748400)
#26 0x4b6c79 in Tcl_Eval (5779632, 7366405)
#27 0x4cbbd0 in TclParseNestedCmd
    (5779632, 7366405, 0, -1073747672, -1073747592)
#28 0x4cc0c5 in TclParseWords
    (5779632, 7366397, 0, 8, -1073747672, -1073747692,
    -1073747636, -1073747592)
#29 0x4b664c in Tcl_Eval (5779632, 7366395)
#30 0x4b83b1 in Tcl_ForCmd (0, 5779632, 5, -1073746916)
#31 0x4b6c79 in Tcl_Eval (5779632, 7364832)
#32 0x4cdd2b in InterpProc (6683360, 5779632, 0, -1073745988)
#33 0x4b6c79 in Tcl_Eval (5779632, -1073744088)
#34 0x4c925b in Tcl_RecordAndEval (5779632, -1073744088, 0)
#35 0x4007ff in main (argc=1, argv=0xbffff824)
    at /project/dce/build/dce1.1-snap/src/admin/dcecp/main.c:445


Now, I'll attempt to recreate this using "dce_login" and update this CR.

[9/15/94 public]

FYI, I modified the above script to do local cell logins and
everything works fine.  Something like:

----CUT HERE----------------------------

proc local_login {} {
    
    set DCP_CLIENT cell_admin
    set DCP_CLIENT_PW dcecp
    set i 0


    for {set i 0} {$i < 50} {incr i} {
	set rc [catch "login $DCP_CLIENT -password $DCP_CLIENT_PW" create_result]
	puts $create_result
	set rc [catch "logout" delete_result]
	puts $delete_result
    }

}

----CUT HERE----------------------------

[9/19/94 public]
FYI, a fix to sec_login_..._pvt when into the build right after bl18.  This
could be fix already, it needs to be tested to see if it's recreatable.

[ sekhar 9/20/94 public ]

Julie, can you please see if this problem is still reproducable 
with the latest build ?

[9/20/94 public]

I have bl18 right now. I'm installing and re-configuring our intercell
configuration with last night's build. I will try to re-create this 
defect - keep you posted.

[ sekhar 9/20/94 public ]

I could not reproduce this problem locally here using a HP-HP 
intercell , with bl-17 + internal_binding.c (with my SVC changes)
using either of the scripts i.e. intercell_login() or intercell_princ()

[9/14/94 public]

I have re-installed with bl18.2 and configured the same intercell 
configuration with cells /.../dcecp_cell.osf.org and /.../rescue_cell.osf.org. 
/.../dcecp_cell.osf.org has the master security replica on a HP-UX platform.  
/.../rescue_cell.osf.org has the master security replica on an OSF/1 platform.

Using the same procedure above, intercell_login, there is still an
intermittent problem with logging into a foreign cell.

Program received signal 11, Segmentation fault
0xa4003548 in malloc ()
(gdb) bt
#0  0xa4003548 in malloc ()
#1  0xa40034a8 in malloc ()
#2  0xa438b2e7 in asn1_alloc_malloc (19, 0)
#3  0xa447afbe in krb5_data2asn1_field (7329112, 7341940)
#4  0xa447b26f in krb5_principal2PrincipalRealm (7254056, 7341948, 7341940)
#5  0xa447942f in krb5_ticket2Ticket (7254056, 7341936)
#6  0xa447782e in krb5_encode_generic
    (7254056, -1073753248, -1538880648, 40, -1538880856, -1538812920, -153888133
#7  0xa4485929 in krb5_cache_as_reply (7342256, 7293708, 7329752)
#8  0xa435ffa7 in sec_login_pvt_get_and_process_krb_tgt
    (7359176, -1073750864, 0, -1073750940)
#9  0xa435056e in sec_login_validate_identity
    (7359176, -1073750864, -1073750948, -1073750952, -1073750940)
#10 0x404f32 in dcp_login (clientData=0x0, interp=0x5630b0, argc=2, argv=0xbfffdff0)
    at /project/dce/build/dce1.1/src/admin/dcecp/commands.c:3067
#11 0x497549 in Tcl_Eval (5648560, -1073749366)
#12 0x4983e1 in Tcl_CatchCmd (0, 5648560, 3, -1073749436)
#13 0x497549 in Tcl_Eval (5648560, 6379773)
#14 0x4ac4a0 in TclParseNestedCmd
    (5648560, 6379773, 0, -1073748708, -1073748628)
#15 0x4ac995 in TclParseWords
    (5648560, 6379765, 0, 8, -1073748708, -1073748728, -1073748672, -1073748628)
#16 0x496f1c in Tcl_Eval (5648560, 6379763)
#17 0x498c81 in Tcl_ForCmd (0, 5648560, 5, -1073747952)
#18 0x497549 in Tcl_Eval (5648560, 6456472)
#19 0x4ae5fb in InterpProc (6406280, 5648560, 0, -1073747024)
#20 0x497549 in Tcl_Eval (5648560, -1073744092)
#21 0x4a9b2b in Tcl_RecordAndEval (5648560, -1073744092, 0)
#22 0x4007db in main (argc=5648560, argv=0xbffff81c)
    at /project/dce/build/dce1.1/src/admin/dcecp/main.c:498

[9/27/94 public]

I have re-installed with bl19 and configured the same intercell 
configuration with cells /.../dcecp_cell.osf.org and 
/.../rescue_cell.osf.org. 
/.../dcecp_cell.osf.org is a 3 machine cell and has the master security replica on a HP-UX platform.  
/.../rescue_cell.osf.org is a 1 machine cell and has the master security replica on an OSF/1 platform.

Other notes:
Using DNS, gdad is running on the master security server in each
cell.

Using the same procedure above, intercell_login, there is still an
intermittent problem with logging into a foreign cell.

Program received signal 11, Segmentation fault
0xa4003548 in malloc ()
(gdb) bt
#0  0xa4003548 in malloc ()
#1  0xa40003f4 in calloc ()
#2  0xa448048a in krb5_copy_principal (8158016, 8011532)
#3  0xa44828c1 in krb5_get_cred_via_tgt (-1073759764, 0, 1, 2, 8011528)
#4  0xa4482362 in krb5_get_cred_from_kdc (8146848, 8011528, -1073759592)
#5  0xa4482e1c in krb5_get_credentials (16, 8146848, 8011528)
#6  0xa43490d2 in sec_krb_get_cred (8206008, 8156384, 5, 1, 7971700, 
    -1073759480)
#7  0xa423d950 in rpc__krb_get_tkt (7971616)
#8  0xa423dfe7 in rpc__krb_bnd_set_auth (8016080, 5, 8206008, 1, 
    6807864, -1073759380, -1073749592)
#9  0xa41d20f1 in rpc_binding_set_auth_info (6807864, 8016080, 5, 1, 
    8206008, 1, -1073749592)
#10 0xa431a282 in rca_setup_handle (8045472, -1073749592)
#11 0xa431b7bd in rca_site_bind_nsi_cell_if
    (8045472, 8105056, -1538539708, -1073749592)
#12 0xa431b9a9 in rca_site_bind_nsi_cell (8045472, 8105056, -1073749592)
#13 0xa4319a4f in rca_nsi_binding_import (8045472, -1073749592)
#14 0xa431ca2c in rca_site_bind (-1073756560, -1073755488, 2, 
    -1538522716, -1539992402, 8206008, -1073749772, -1073749592)
#15 0xa435953f in bind_to_rgy (8206008, 1, 1, 8206008, -1073749772, 
    -1073749592, -1073754908)
#16 0xa435c221 in sec_login_pvt_get_login_info (0, 8206008, 
    -1073749736, -1073749592)
#17 0xa43529c7 in sec_login_validate_identity (8206008, -1073749580, 
    -1073749032, -1073749040, -1073749592)
#18 0x405f11 in dcp_login (clientData=0x0, interp=0x58c0b0, argc=2, 
    argv=0xbfffe510)
    at /project/dce/build/dce1.1-snap/src/admin/dcecp/commands.c:3067
#19 0x4bf9d9 in Tcl_Eval (5816496, -1073747909)
#20 0x4c10f1 in Tcl_ForCmd (0, 5816496, 5, -1073748000)
#21 0x4bf9d9 in Tcl_Eval (5816496, 6547672)
#22 0x4d6a2b in InterpProc (6735696, 5816496, 0, -1073747072)
#23 0x4bf9d9 in Tcl_Eval (5816496, -1073744116)
#24 0x4d1f5b in Tcl_RecordAndEval (5816496, -1073744116, 0)
#25 0x40094f in main (argc=1, argv=0xbffff808)
    at /project/dce/build/dce1.1-snap/src/admin/dcecp/main.c:498

[9/30/94 public]
In doing 12150 work & encountering a similar traceback/memory problem, using
Sentinel points out some instances of unchecked allocations in the sec server:

rs/rpriv_util.c:	krb5_copy_principal(req_info->authent->ticket->server,
rs/rs_rep_auth.c:	krb5_copy_principal(creds->client, &creds->server);
rs/rs_rep_auth.c:	krb5_copy_keyblock_contents(tkt->enc_part2->session,
rsdb/kdb_rsdb.c:	krb5_copy_principal(princ, &entry->principal);

The latter is being tripped over due to a bogus-length principal string;
it may not be directly relevant to this problem, but all are worth fixing...

[10/2/94 public]
This CR is being assigned to dcecp. On Friday the tests were ran by Julie
and John and there was no core dump as in the previous test runs. Also in
parallel set-up Sekhar and Sean also ran Julie's test script and got
successful results. John Rousseau mentioned that there were few memory
related fixes submitted in the dcecp since last time this tests were
executed. At this point it is assigned to dcecp for further testing and
if no errors are found again this CR should be cancelled.

Thanks to Sekhar, Sean, Julie and John for providing the needed support
to isolate and analyze the problem.

[10/3/94 public]
Downgraded. This problem is no longer reproducable. Julie is retesting now,
if the problem still doesn't present itself. This will be canceled.

[10/3/94 public]
Julie just ran a loop of 100 intercell login and logouts without
failure. Cencel.



CR Number                     : 12171
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : keytab
Short Description             : dcecp> key show /krb5/v5srvtab -local dumps core
Reported Date                 : 9/13/94
Found in Baseline             : 1.1b17
Found Date                    : 9/13/94
Severity                      : B
Priority                      : 1
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[9/13/94 public]

This is bad:
dcecp> key show /krb5/v5srvtab -local

(gdb) where
#0  0xa42b128d in dced_binding_set_auth_info (h=0x0, protect_level=6, 
    authn_svc=4294967295, authn_identity=0x62b2f0, authz_svc=2, st=0xbfffdbcc)
    at /project/dce/build/dce1.1-snap/src/admin/dced/api/dced_binding.c:346
#1  0x487cb3 in dcp_kt_show (clientData=0x0, interp=0x5830b0, argc=2, 
    argv=0xbfffde24)
    at /project/dce/build/dce1.1-snap/src/admin/dcecp/dhd_keytab.c:1446
#2  0x403895 in dcp_keytab (clientData=0x0, interp=0x5830b0, argc=3, 
    argv=0xbfffde24)
    at /project/dce/build/dce1.1-snap/src/admin/dcecp/commands.c:1660
#3  0x4b6c79 in Tcl_Eval (5779632, -1073749748)
#4  0x4cd726 in Tcl_UplevelCmd (0, 5779632, 1, -1073749816)
#5  0x4b6c79 in Tcl_Eval (5779632, -1073748350)
#6  0x4cbbd0 in TclParseNestedCmd
    (5779632, -1073748350, 0, -1073749092, -1073749012)
#7  0x4cc0c5 in TclParseWords
    (5779632, -1073748358, 0, 8, -1073749092, -1073749112, -1073749056, -1073749012)
#8  0x4b664c in Tcl_Eval (5779632, -1073748364)
#9  0x4b951f in Tcl_IfCmd (0, 5779632, 3, -1073748452)
#10 0x4b6c79 in Tcl_Eval (5779632, 6723580)
#11 0x4b951f in Tcl_IfCmd (0, 5779632, 3, -1073747848)
#12 0x4b6c79 in Tcl_Eval (5779632, 5867840)
#13 0x4cdd2b in InterpProc (6460296, 5779632, 0, -1073746920)
#14 0x4b6c79 in Tcl_Eval (5779632, -1073745020)
#15 0x4c925b in Tcl_RecordAndEval (5779632, -1073745020, 0)
#16 0x4007ff in main (argc=1, argv=0xbffff480)
    at /project/dce/build/dce1.1-snap/src/admin/dcecp/main.c:445

[9/13/94 public]
The problem was introduced around bl-17 in dced_binding.c and was
fixed [by accident] in latest build. Please try the NB's dcecp and 
cancel this OT if it works, Thanks.

"key show /krb5/v5srvtab -local" will not work, "key show self"
is right one. "-local" is a special option which allows you to
bypass dced but everything is kept in core only. You may want to
see OT#11280 for the details.



CR Number                     : 12170
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : keytab
Short Description             : keytab cata -local dumps core
Reported Date                 : 9/13/94
Found in Baseline             : 1.1b17
Found Date                    : 9/13/94
Severity                      : B
Priority                      : 1
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[9/13/94 public]

This is bad:
dcecp> keytab cata -local
Segmentation fault (core dumped)


Running straight b17.

Back trace:
(gdb) bt
#0  0xa41d302f in rpc_binding_free (4199856, -1073747504)
#1  0xa42b146e in dced_binding_free (h=0x4015a8, st=0xbfffe9d0)
    at /project/dce/build/dce1.1-snap/src/admin/dced/api/dced_binding.c:443
#2  0x48521a in dcp_kt_catalog (clientData=0x0, interp=0x5830b0, argc=1, 
    argv=0xbfffec18)
    at /project/dce/build/dce1.1-snap/src/admin/dcecp/dhd_keytab.c:309
#3  0x403895 in dcp_keytab (clientData=0x0, interp=0x5830b0, argc=2, 
    argv=0xbfffec18)
    at /project/dce/build/dce1.1-snap/src/admin/dcecp/commands.c:1660
#4  0x4b6c79 in Tcl_Eval (5779632, -1073745020)
#5  0x4c925b in Tcl_RecordAndEval (5779632, -1073745020, 0)
#6  0x4007ff in main (argc=1, argv=0xbffff480)
    at /project/dce/build/dce1.1-snap/src/admin/dcecp/main.c:445

[9/13/94 public]
The problem was introduced around bl-17 in dced_binding.c and was
fixed [by accident] in latest build. Please try the NB's dcecp and 
cancel this OT if it works, Thanks.

[9/19/94 public]
Yep, fixed:

  root@absolut /$ dcecp -s                                                
  dcecp> key cat -local
  dcecp>



CR Number                     : 12156
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : xattrschema
Short Description             : dcecp xattrschema does't verify the input xattrschema object
Reported Date                 : 9/13/94
Found in Baseline             : 1.1b17
Found Date                    : 9/13/94
Severity                      : B
Priority                      : 1
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[9/13/94 public]

xattrschema should verify the attr schema object name which should
contain "xattrschema" as leading part, and if it's not presented,
xattrschema object should attach it to the object name,  otherwise 
the rpc_ns_entry_expand_name gives you wrong fullnames. For example, 
/.:/sec, after parsed, the schema server name is "/.:/sec", and schema 
object name is NULL, if you don't attach "xattrschema" to the schema
object name, the one of output from "xattrschema  cata /.:/sec" will
be "/.../foster_cell/sec/pre_auth_req", the correct one should be
"/.../foster_cell/sec/xattrschema/pre_auth_req". 

Currently the schema object name is ignored on both sec schema and 
dced schema implementations because they assume only one schema object
is being used (i.e. xattrschema). I'm also going to add some logic into 
generic schema i/f to check "xattrschema" and reject if a wrong schema object
name is found. But I know that dcecp xattrschema doesn't use the generic 
schema i/f for security (i.e /.:/sec), the check logic need also to be 
implemented in dcecp as well.

dcecp> xattrschema  cata /.:/sec
/.../foster_cell/sec/pre_auth_req
/.../foster_cell/sec/pwd_val_type
/.../foster_cell/sec/pwd_mgmt_binding
/.../foster_cell/sec/X500_DN
/.../foster_cell/sec/X500_DSA_Admin
/.../foster_cell/sec/disable_time_interval
/.../foster_cell/sec/max_invalid_attempts
/.../foster_cell/sec/test_any
/.../foster_cell/sec/test_void
/.../foster_cell/sec/test_printstring
/.../foster_cell/sec/test_printstring_array
/.../foster_cell/sec/test_integer
/.../foster_cell/sec/test_bytes
/.../foster_cell/sec/test_confidential_bytes
/.../foster_cell/sec/test_i18n_data
/.../foster_cell/sec/test_uuid
/.../foster_cell/sec/test_attr_set
/.../foster_cell/sec/test_binding
/.../foster_cell/sec/authzp
dcecp> xattrschema  cata /.:/sec/xxxx
/.../foster_cell/sec/xxxx/pre_auth_req
/.../foster_cell/sec/xxxx/pwd_val_type
/.../foster_cell/sec/xxxx/pwd_mgmt_binding
/.../foster_cell/sec/xxxx/X500_DN
/.../foster_cell/sec/xxxx/X500_DSA_Admin
/.../foster_cell/sec/xxxx/disable_time_interval
/.../foster_cell/sec/xxxx/max_invalid_attempts
/.../foster_cell/sec/xxxx/test_any
/.../foster_cell/sec/xxxx/test_void
/.../foster_cell/sec/xxxx/test_printstring
/.../foster_cell/sec/xxxx/test_printstring_array
/.../foster_cell/sec/xxxx/test_integer
/.../foster_cell/sec/xxxx/test_bytes
/.../foster_cell/sec/xxxx/test_confidential_bytes
/.../foster_cell/sec/xxxx/test_i18n_data
/.../foster_cell/sec/xxxx/test_uuid
/.../foster_cell/sec/xxxx/test_attr_set
/.../foster_cell/sec/xxxx/test_binding
/.../foster_cell/sec/xxxx/authzp
dcecp> xattrschema  cata /.:/hosts/foster/config
/.../foster_cell/hosts/foster/config/hostdata/data
/.../foster_cell/hosts/foster/config/testint1
/.../foster_cell/hosts/foster/config/hostdata/bindata
/.../foster_cell/hosts/foster/config/xattrschema/dtsconfig
/.../foster_cell/hosts/foster/config/xattrschema/additional_environ
dcecp> xattrschema  cata /.:/hosts/foster/config/xattrschema/hostdata
/.../foster_cell/hosts/foster/config/xattrschema/hostdata/hostdata/data
/.../foster_cell/hosts/foster/config/xattrschema/hostdata/testint1
/.../foster_cell/hosts/foster/config/xattrschema/hostdata/hostdata/bindata
/.../foster_cell/hosts/foster/config/xattrschema/hostdata/xattrschema/dtsconfig
/.../foster_cell/hosts/foster/config/xattrschema/hostdata/xattrschema/additional_environ

[9/14/94 public]

The dcecp code currently makes a call to 
dce_attr_sch_bind(), with the user supplied
schema name. This function currently returns
an 'ok' status for invalid schema names, for
e.g. /.:/sec/junk,  causing
dcecp to proceed without generating an error.
The relevant dcecp code is in 
schema_ops.c:set_attr_schema_binding().
I think the checks for invalid schema names
should be done in the lib calls above and
not the dcecp code.

[9/19/94 public]

The dcecp code uses the sec_rgy_attr_sch_* calls
if and only if the supplied schema name matches 
"/.:/sec/xattrschema". So schema names like 
"/.:/sec/xattrschema/junk" and "/.:/sec/junk" do
end up getting passed to dce_attr_sch_bind().
After Ping's fix to dce_attr_sch_bind(), dcecp should
exhibit the correct behavior.

[9/21/94 public]

You're right. This problem is going away after I fixed the
lib functions.



CR Number                     : 12142
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : user
Short Description             : user show output needs work
Reported Date                 : 9/12/94
Found in Baseline             : 1.1b17
Found Date                    : 9/12/94
Severity                      : B
Priority                      : 1
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[9/12/94 public]
dcecp> user show cell_admin
{ {}}
{ 100}
{ 00000064-cbe6-21cd-bc00-0800092734a4}
{ }
{ }
{ none acct-admin subsys/dce/sec-admin subsys/dce/cds-admin subsys/dce/dts-admin subsys/dce/audit-admin}
{ }
{ }
{ /.../dcecp_cell.osf.org/cell_admin 1994-09-09-11:00:59.000-04:00I-----}
{ {}}
{ }
{ {}}
{ }
{ 1994-09-09-11:00:59.000-04:00I-----}
{ none}
{ /}
{ /.../dcecp_cell.osf.org/cell_admin 1994-09-12-13:32:09.000-04:00I-----}
{ none}
{ }
{ }
{ }
{ }
{ }
{ {}}
{ }

[9/12/94 public]

I can only reporduce this on ninja with SVC_NOXPGCAT set to 1. When 
SVC_NOXPGCAT is set to 0 the problem goes away. This does not occur on 
other machines. I do not know why this is.

[9/12/94 public]
It's because, when you set SVC_NOXPGCAT to 1, all message catalog lookups
fail. Only messages compiled in can be seen. I don't know why these
dcecp messages don't show up, but it's not dcecp's problem.



CR Number                     : 12138
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : acl
Short Description             : no error message returned
Reported Date                 : 9/12/94
Found in Baseline             : 1.1b17
Found Date                    : 9/12/94
Severity                      : C
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[9/12/94 public]
The following command returns no error message in our currently
broken cell...

dcecp> acl show -e /.:
Error: 
dcecp>

There are several cases where dcp_acl_bind_named_object() 
(used in this case at acl_tclif.c:1350) does not set an error message
in the result upon failure. Either dcp_acl_show must be changed to
add an error if there isn't one, or dce_acl_bind_named_object() must
be changed to always return an error message upon failure.

[9/12/94 public]

dce_acl_bind_named_object() sets error messages upon failure. Once
back in acl_tclif.c, the code just returns TCL_OK or TCL_ERROR.

I invoked the following commands on our intercell configuration, is
there something else I need to know because it works below?

On rescue:
[rescue]:/am/ice/usr/users/salamone> dce_login cell_admin dcecp
[rescue]:/am/ice/usr/users/salamone> dcecp
dcecp> acl show -e /.:
Error: invalid acl handle
dcecp> acl show /.: -e
Error: invalid acl handle

On fricK:
dcecp> acl show -e /.:
Error: invalid acl handle
dcecp> acl show /.: -e
Error: invalid acl handle

[9/12/94 public]
dcp_acl_bind_named_object() does not always set an error message upon
failure.

This is on ninja (a 486)

(gdb) r
dcecp> acl show -e /.:
[of stepping deleted]
(in dcp_acl_bind_named_object())
dcp_acl_bind_named_object (interp=0x55f0b0, dcp_acl_info_p=0x4e40b0, bind_to_entry=1)
    at /project/dce/build/dce1.1/src/admin/dcecp/acl_edit.c:293
293         char                        *residual_name = (char *)NULL;
(gdb) n
296         CLEAR_STATUS(&status);
(gdb) 
302         if (Tcl_SplitList(interp, dcp_acl_info_p->sec_acl_named_object,
(gdb) 
306         if (name_argc > 1) {
(gdb) 
326         free((char *) name_argv);
(gdb) 
331         CLEAR_STATUS(&status);
(gdb) 
332         if (residual_name == NULL) {
(gdb) 
333             sec_acl_bind((unsigned char *)dcp_acl_info_p->sec_acl_named_object, 
(gdb) 
337         } else {
(gdb) 
348         if (STATUS_EQUAL(&status, rpc_s_not_rpc_entry)) {
(gdb) 
357         rc = dcp__acl_get_all_managers(try_nmgrs, 
(gdb) 
360         if ((rc == TCL_OK) && (dcp_acl_info_p->num_acl_mgrs > try_nmgrs)) {
(gdb) 
385         return(rc);
(gdb) p rc
$1 = 1
(gdb) p interp->result
$2 = 0x61a478 ""
(gdb) c
Continuing.
Error:

[9/16/94 public]

Environment variable, SVC_NOXPGCAT, was set to 1 to force "dcecp" to
access messages from the in-core table.  As a result, messages that
come from DCE core(calling APIs within dcecp) are null.



CR Number                     : 12118
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : secval status
Short Description             : secval status fvt failed
Reported Date                 : 9/8/94
Found in Baseline             : 1.1b16
Found Date                    : 9/8/94
Severity                      : C
Priority                      : 1
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : ts/secval/Makefile
Sensitivity                   : public

[9/8/94 public]

70||"Starting positive secval status tests"
10|8 /ts/secval/secval_status_P.tcl 16:59:47|TC Start, scenario ref 921-1
15|0 1.10 5|TCM Start
400|0 1 1 17:00:08|IC Start
200|0 1 17:00:09|TP Start
520|0 1 16326 1 1|secval_status_3_P: check to see that we can check status of secval.
520|0 1 16326 1 2|==== Contents of test case:
520|0 1 16326 1 3|{     	list [catch {secval status} msg] $msg     }
520|0 1 16326 1 4|Test completed successfully.
520|0 1 16326 1 5|== Test output was:
520|0 1 16326 1 6|{1 {}}
520|0 1 16326 1 7|== Expected output was:
520|0 1 16326 1 8|{0 1}
520|0 1 16326 1 9|Test Failed.
220|0 1 1 17:00:10|FAIL
410|0 1 1 17:00:10|IC End
400|0 2 1 17:00:11|IC Start
200|0 1 17:00:12|TP Start
520|0 1 16326 1 10|secval_status_4_P: check to see that we can check status of secval by hostname.
520|0 1 16326 1 11|==== Contents of test case:
520|0 1 16326 1 12|{     	list [catch {secval status $DCP_HOSTNAME_THREE} msg] $msg     }
520|0 1 16326 1 13|Test completed successfully.
520|0 1 16326 1 14|== Test output was:
520|0 1 16326 1 15|{1 {Entry not found}}
520|0 1 16326 1 16|== Expected output was:
520|0 1 16326 1 17|{0 1}
520|0 1 16326 1 18|Test Failed.
220|0 1 1 17:00:12|FAIL
410|0 2 1 17:00:12|IC End
400|0 3 1 17:00:13|IC Start
200|0 1 17:00:13|TP Start
520|0 1 16326 1 19|secval_status_5_P: check to see that we can check status of secval by string binding.
520|0 1 16326 1 20|==== Contents of test case:
520|0 1 16326 1 21|{     	list [catch {secval status $DCP_SR_PROTSEQ:$DCP_SR_IP_ADDR} msg] $msg     }
520|0 1 16326 1 22|Test completed successfully.
520|0 1 16326 1 23|== Test output was:
520|0 1 16326 1 24|{1 {}}
520|0 1 16326 1 25|== Expected output was:
520|0 1 16326 1 26|{0 1}
520|0 1 16326 1 27|Test Failed.
220|0 1 1 17:00:14|FAIL
410|0 3 1 17:00:15|IC End
400|0 4 1 17:00:16|IC Start
200|0 1 17:00:16|TP Start
520|0 1 16326 1 28|secval_status_6_P: check to see that we can check status of secval by tcl binding.
520|0 1 16326 1 29|==== Contents of test case:
520|0 1 16326 1 30|{     	list [catch {secval status {$DCP_SR_PROTSEQ $DCP_SR_IP_ADDR}} msg] $msg     }
520|0 1 16326 1 31|Test completed successfully.
520|0 1 16326 1 32|== Test output was:
520|0 1 16326 1 33|{1 {Bad or wrong arguments}}
520|0 1 16326 1 34|== Expected output was:
520|0 1 16326 1 35|{0 1}
520|0 1 16326 1 36|Test Failed.
220|0 1 1 17:00:17|FAIL
410|0 4 1 17:00:18|IC End
400|0 5 1 17:00:18|IC Start
200|0 1 17:00:18|TP Start
520|0 1 16326 1 37|secval_status_7_P: check to see that secval status return 0 if the secval is not up.
520|0 1 16326 1 38|==== Contents of test case:
520|0 1 16326 1 39|{     	list [catch {secval status} msg] $msg     }
520|0 1 16326 1 40|Test completed successfully.
520|0 1 16326 1 41|== Test output was:
520|0 1 16326 1 42|{1 {}}
520|0 1 16326 1 43|== Expected output was:
520|0 1 16326 1 44|{0 0}
520|0 1 16326 1 45|Test Failed.
220|0 1 1 17:00:19|FAIL
410|0 5 1 17:00:20|IC End
80|8 0 17:00:22|TC End
70||"Finished positive secval status tests"

[9/15/94 public]
Ran secval tests against NB from 9/15/94.  100% pass (excepting the
negative tests that expect to fail due to ACL's.  The dced ACL's are
still open to all for development purposes).  Cancelled OT.

Found bug in install phase of secval Makefile, will submit change under
this OT #.



CR Number                     : 12078
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : tcl
Short Description             : regexp stuff not threadsafe
Reported Date                 : 9/7/94
Found in Baseline             : 1.1b16, 1.2
Found Date                    : 9/7/94
Severity                      : B
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.2.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[9/7/94 public]
The regexp stuff in Tcl uses global data and is not threadsafe.  This isn't
really a problem in dcecp for 1.1 since we can only have one thread that
would ever invoke the Tcl regexp commands (we only have one thread for the
interpreter). 

This should be fixed in 1.2, particularly if anyone wants to implement a
"background" command that would spawn a thread and run something in the
background, something like "&" means to the shell.

[6/5/96 public]
Cancelled.  No thread safety work is being done directly for
dcecp.  Will rely on new tcl to provide what we need.



CR Number                     : 12024
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : signal processing
Short Description             : <CTL> C turns off "echo" of tty characters.
Reported Date                 : 9/2/94
Found in Baseline             : 1.1b16
Found Date                    : 9/2/94
Severity                      : C
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[9/2/94 public]

Try this:

dcecp> <CTL> C
dcecp> quit
Must invoke "stty sane" to turn on "echo" again.

Note that under "tcsh" this does not occur.

[9/2/94 public]

I'm having trouble reproducing this (possibly because my shell is tcsh
by default). Can you give me a more complete scenario (what shell,
what does "stty -a" say before and after)?

[9/2/94 public]

Invoke "ksh" or "csh". Then invoke "stty all" before and after 
dcecp, <CTL>C, quit. Notice that "echo" has been turned off:
"-echo".

ksh
$ stty all
speed 9600 baud; 25 rows; 80 columns; 
erase = ^H; werase = ^W; kill = ^U; intr = ^C; quit = ^\; susp = ^Z
dsusp = ^Y; eof = ^D; eol <undef>; eol2 <undef>; stop = ^S; start = ^Q
lnext = ^V; discard = ^O; reprint = ^R; status <undef>; time = 0
min = 1
parenb -parodd cs7 -cstopb -hupcl -cread -clocal -crtscts 
-ignbrk brkint ignpar -parmrk -inpck -istrip -inlcr -igncr icrnl -iuclc 
ixon -ixany ixoff imaxbel 
isig icanon -xcase echo echoe echok -echonl -noflsh -mdmbuf -nohang 
-tostop echoctl -echoprt echoke -altwerase iexten -nokerninfo 
opost -olcuc onlcr -ocrnl -onocr -onlret -ofill -ofdel tabs -onoeot
$ dcecp
dcecp> <CTL> C
dcecp> quit
$
speed 9600 baud; 25 rows; 80 columns; 
erase = ^H; werase = ^W; kill = ^U; intr = ^C; quit = ^\; susp = ^Z
dsusp = ^Y; eof = ^D; eol <undef>; eol2 <undef>; stop = ^S; start = ^Q
lnext = ^V; discard = ^O; reprint = ^R; status <undef>; time = 0
min = 1
parenb -parodd cs7 -cstopb -hupcl -cread -clocal -crtscts 
-ignbrk brkint ignpar -parmrk -inpck -istrip -inlcr -igncr icrnl -iuclc 
ixon -ixany ixoff imaxbel 
isig icanon -xcase -echo echoe echok -echonl -noflsh -mdmbuf -nohang 
-tostop echoctl -echoprt echoke -altwerase iexten -nokerninfo 
opost -olcuc onlcr -ocrnl -onocr -onlret -ofill -ofdel tabs -onoeot

[9/2/94 public]
Mea culpa.
I re-installed "utils" library and everything works fine.



CR Number                     : 12021
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 11850
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp needs kitchen_sink object
Reported Date                 : 9/2/94
Found in Baseline             : 1.1
Found Date                    : 9/2/94
Severity                      : E
Priority                      : 4
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[9/2/94 public]

I've found what I believe to be a significant lack in dcecp:  the absence
of the kitchen_sink object.

I believe the operations should be:

create              Create the kitchen sink
delete              Delete the kitchen sink
modify              Add, remove or change things in the kitchen sink
show                Show the things in the kitchen sink
help                Print summary of command-line options and abort.
operations          Return valid operations for command.

[9/2/94 public]
Ahhhh! I finally understand what Howard's mumblings about container
objects mean!

Now are the dishes multi-valued or multi-instanced?????

[9/2/94 public]
It is way too late in the cycle to think of adding new functionality.  The
DRB overhead alone would push us past our bit freeze.  See CR 11850.



CR Number                     : 12015
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : couldn't remove CDS_UpgradeTo
Reported Date                 : 9/1/94
Found in Baseline             : 1.1b16
Found Date                    : 9/1/94
Severity                      : B
Priority                      : 1
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[9/1/94 public]
I could add an attribute of tyep CDS_UpgradeTo, but I could not remove it
afterwards.  Note that it is should be a single valued attribute.

dcecp> dir mod /.: -add {CDS_UpgradeTo 3.1}      
dcecp> dir mod /.: -r {CDS_UpgradeTo}  
Error: The attribute list syntax is invalid.
dcecp> dir mod /.: -r {CDS_UpgradeTo 3.1}
Error: The attribute '1.3.22.1.3.25' should be a multi-valued attribute type.
dcecp> dir he mod
-add                Add an attribute to the named directory
-change             Change an attribute in the named link
-remove             Remove an attribute if possible from the named 
-single             Add a single valued attribute to a directory.
-types              Remove a single value from a multi-valued attribute list.
dcecp> dir mod /.: -r {CDS_UpgradeTo 3.1} -si 
Error: The '-single' option can only be used with the '-add' option.
dcecp> dir mod /.: -r {CDS_UpgradeTo} -si     
Error: The '-single' option can only be used with the '-add' option.

[9/2/94 public]

The messages in the 'dir he mod' are wrong I will fix them. But the 
spec is correct the correct command to remove an entire attribute 
is 

dcecp> dir mod /.: -r {CDS_UpgradeTo}  -types

I am canceling this and opening yet another ot for the messages.



CR Number                     : 12014
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : serverexec
Short Description             : server show -exec fails
Reported Date                 : 9/1/94
Found in Baseline             : 1.1b16
Found Date                    : 9/1/94
Severity                      : B
Priority                      : 1
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[9/1/94 public]
dcecp> server create audit-server -arguments "-a" -program "/opt/dcelocal/bin/auditd" -directory "/opt/dcelocal/var/audit"
dcecp> server start audit-server
dcecp> server show audit-server -exec
Error: Cannot find a matching object.

I can create the serverconf entry and start it, but it doesn't show
up in server show -exec

[9/1/94 public]
Yes, both serv create and serv start are srvrconf operations. However
everthing with -exec means srvrexec operation. In this case, I bet you
would see nothing if you did "server cata -exec". I'll try this with
tomorrow dced and see if the dced operation is completed. In terms of 
dcecp server object commands, the codes are same for srvrconf and 
srvrexec.

[9/2/94 public]
I don't know if Ping has tried this yet, but I'm trying similar
operations using last night's build, and I get this:

dcecp> server cr /.:/hosts/speed/config/srvrconf/dummy -pro /usr/users/coren/tmp/dummy -arg /.:/hosts/speed/foo -uid 0 -gid 0 -starton explicit
dcecp> server start dummy
458a45d0-c67f-11cd-b2ca-0000c08de054
dcecp> server cat -ex
/.../speed_cell/hosts/speed/config/srvrexec/dummy
dcecp> server show dummy -exec
Error: permission not valid for this acl
dcecp> server stop dummy
Error: permission not valid for this acl

I can't tell what acl; I had supposed it was the one on
/.../speed_cell/hosts/speed/config/srvrexec/dummy, but I can't find
out:

dcecp> acl show /.:/hosts/speed/config/srvrexec/dummy 
Error: Key not found in database

John: are you sure your server started? I notice you didn't give it a
value for the "starton" attribute.

[9/2/94 public]
There is not acl yet. Please refer to OT12027. At this point (without
acl), you cannot do show, enable and disable operations. (OT12027
rated as A1)

[9/7/94 public]
"server show -exec" works fine now (after OT12027 fixed the acl problem).



CR Number                     : 11958
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : Missing EXPDIR from admin/tcl_dce/Makefile
Reported Date                 : 8/30/94
Found in Baseline             : 1.1
Found Date                    : 8/30/94
Severity                      : B
Priority                      : 1
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[8/30/94 public]

Howard,

   The file admin/tcl_dce/Makefile is trying to export a library, yet
it does not have the variable EXPDIR set.  The result is that this library
is placed in an area that is inaccessable to your build.  Please look into
this ASAP.

[ /admin/tcl_dce ]
*** makefile error: Can't export tcl.h because EXPDIR is not defined in the Makefile.
*** makefile error: Can't export dcetclmsg.h because EXPDIR is not defined in the Makefile.
*** makefile error: Can't export libtcl.a because EXPDIR is not defined in the Makefile.

[8/30/94 public]
I don't understand.  It seems to build in the nightly builds so I assume
that the warnings were from running build in some kind of lint mode?

The Makefile says:

  LIBRARIES        = libtcl.a
  INCLUDES         = tcl.h dcetclmsg.h
  libtcl.a_EXPDIR  = /usr/lib/
  tcl.h_EXPDIR     = /usr/include/dce/
  dcetclmsg.h_EXPDIR     = /usr/include/dce/

So there are EXPDIR's for each of the things we export, and looking at the
builds, things really do make it into the export tree.  I suppose it would
shorter to code:

  LIBRARIES        = libtcl.a
  INCLUDES         = tcl.h dcetclmsg.h
  EXPDIR           = /usr/include/dce/
  libtcl.a_EXPDIR  = /usr/lib/

But this is prone to adding new things to be exported and having them go
into /usr/include/dce by default, which might not be what we want.

[8/31/94 public]
Cancelled, a problem with the warning generating tool, not the code.



CR Number                     : 11898
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : better 'not found' message
Reported Date                 : 8/25/94
Found in Baseline             : 1.1b15
Found Date                    : 8/25/94
Severity                      : E
Priority                      : 3
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[8/25/94 public]
dcecp> x show /.:/sec/xattrschema/foo
Error: Key not found in database

I guess that this is the error message returned by the API.  dcecp should
trap the error code and produce something like: "Schema object 'foo' not found"

[9/19/94 public]

Schema names other than "/.:/sec/xattrschema" are passed
to dce_attr_sch_bind(). So, this should get fixed with
OT 12156.



CR Number                     : 11850
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp is not a complete replacement for cdscp
Reported Date                 : 8/24/94
Found in Baseline             : 1.1b16
Found Date                    : 8/24/94
Severity                      : A
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[8/24/94 public]

Dcecp is not a complete replacement for cdscp.
In particular, according to the specification,
there are no dcecp equivalents for eight cdscp
commands:

   set directory to new epoch
   disable clerk
   disable server
   show cell
   show clerk
   show server
   set cdscp confidence
   show cdscp confidence

If dcecp commands for this functionality are not
added, vendors may have to ship both dcecp and
cdscp, even though cdscp is no longer fully supported
with respect to new functionality and bug fixes.
Or, if vendors choose to independently implement
this functionality, dcecp will have incompatible
syntax and semantics among vendors for these commands.
This problem apparently also applies to the other
component control programs, several of which have
a few commands with no dcecp equivalents.

Failing an osf implementation of this functionality
in the short time remaining for dce1.1, these commands
should at least be syntactically and semantically
specified in the dcecp rfc so that independent
implementations by vendor have a chance of being
compatible.

[8/24/94 public]
Sorry you mentioned a sore point.  
What follows is admittedly a rant:

Please see RFC 30.0 January 1993 goals (c) and (e):

                     DCE 1.1 ADMINISTRATIVE IMPROVEMENTS:
                          REQUIREMENTS FOR DCE SHELL

      The following are goals and guidelines for the DCE shell.

        (c) Emphasis in scheduling development resources must be placed on
            common everyday administrative duties rather than more esoteric
            configuration management.  Administrators will get more use
            from a simpler way to add a new user or to modify a CDS entry
            and its ACL, rather than a new way to create a registry or to
            initialize a new CDS namespace.

        (e) The DCE shell will augment use of existing control programs, it
            will not replace them.  Existing control programs will continue
            to be installed with DCE, and their use will probably remain
            required for some administrative operations.

Due to resource constraints that were anticipated at the start of the
project, it has never been the goal of dcecp to completely replace any of
the control programs.  As it turns out dcecp functionality more than met
it's goals.  It does completely replace: rpccp, dtscp, acl_edit, and now
sec_admin.  It also handles ALL the admin requirements for all new
components: auditing, serviceability, and dced.  I'll note also that it
managed to incorporate many of the late breaking new functionality in 1.1
such as password generation and ERA, do mostly to the hard work from folks
at HP.

As a note: the latest version of dcecp does implement two of the commands
you mentioned:

   set cdscp confidence
   show cdscp confidence

And RFC 42.3 when published (as well as the DCE 1.1 documentation) will
described them.

I'm particularly proud of all the work that everyone involved on dcecp has
done so far as most of the providers had little or no interest in dcecp
until about 6 months ago.

The fact that dcecp far exceeded its design goals is hardly a defect.  It
should be an enhancement since it is asking for more functionality than the
specifications call for.  I'm cancelling this as opposed to deferring it to
1.2 since I know that the PSC is already considering completing dcecp and
deprecating the other control programs, so this issue will be tracked in
another venue.



CR Number                     : 11787
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dts
Short Description             : test dts attr abbrev & remote
Reported Date                 : 8/19/94
Found in Baseline             : 1.1b15, 1.2
Found Date                    : 8/19/94
Severity                      : C
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.2.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[8/19/94 public]
Update functional tests to test attribute name and value abbreviation. Also
test remote control.

[6/5/96 public]
Cancel.  Current HP test cases already cover as much attribute
abbreviation and remote operation as possible.



CR Number                     : 11786
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : aud
Short Description             : test aud attr abbrev & remote
Reported Date                 : 8/19/94
Found in Baseline             : 1.1b15, 1.2
Found Date                    : 8/19/94
Severity                      : C
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.2.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[8/19/94 public]
Update functional tests to test attribute name and value abbreviation. Also
test remote control.

[6/5/96 public]
Cancel.  Current HP test cases already cover as much attribute
abbreviation and remote operation as possible.



CR Number                     : 11777
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : core dump during gds_sec fvt
Reported Date                 : 8/19/94
Found in Baseline             : 1.1
Found Date                    : 8/19/94
Severity                      : A
Priority                      : 1
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[8/19/94 public]
dcecp dumped core during the gds_sec functional test.  Here's the stack:

#0  0xa43419d2 in dcp_svc_handle ()
#1  0x4250cb in check_era_info (attr_info=0x410690, domain=-1073753332, in_attrs=0x424dfc, 
    interp=0xbfffd5dc, name=0xbfffc9e4 "\225L", out_attrs=0x0)
    at /project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c:2887
#2  0x4250cb in check_era_info (attr_info=0xbfffd8b8, domain=0, in_attrs=0xbfffd5dc, interp=0x5670b0, 
    name=0xbfffdb4c "gds_invalid", out_attrs=0xbfffd30c)
    at /project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c:2887
#3  0x410fe7 in principal_modify (clientData=0x0, interp=0x5670b0, argc=2, argv=0xbfffe950)
    at /project/dce/build/dce1.1-snap/src/admin/dcecp/rgy.c:931
#4  0x402665 in dcp_principal (clientData=0x0, interp=0x5670b0, argc=4, argv=0xbfffe950)
    at /project/dce/build/dce1.1-snap/src/admin/dcecp/commands.c:1065
#5  0x4a5ded in Tcl_Eval (5664944, 6031160)
#6  0x4c4375 in Tcl_EvalFile (5664944, -1073744858)
#7  0x4003d8 in main (argc=1, argv=0xbffff2ec) at /project/dce/build/dce1.1-snap/src/admin/dcecp/main.c:314

dcecp was processing the file

	src/test/functional/directory/gds/ts/config/dcecp_add.tcl

binaries are from nightly build of 8/16.

[8/19/94 public]
ERA code is you Jim.  Ping I know that you are looking at this routine,
feel free to jump in.  :-)

[8/19/94 public]
I fixed some problems, so I hope it can be tested against the new code
see if the problem is still there. My changes are in 
snoopy:/u3/users/notuser/pwang/dcecp/{rgy.h, rgy_utils.c}

[8/19/94 public]
Just reproduced the problem by hand.  The command was:

principal modify gds_invalid -add {X500_DN {/C=re/O=sni/CN=invalid}}

[8/19/94 public]
The dce installed on my machine is called bl-14.3, and the binaries
and libraries are dated 8/15, around 22:00, so they were built and
put into the install tree last monday night.  I think this is the
version that does not have the bug fix for the sec_attr_util_alloc_copy()
function.  Therefore, if I do

   principal modify gds_invalid -add {X500_DN {/C=re/O=sni/CN=invalid}}

I get a core dump (seg violation in sec_attr_util_alloc_copy)
Even if I do this

   principal modify foo -add {test_integer 101}

I get the same core dump.  With the version of secd/libdce.sl I have
installed, any time I touch sec_attr_util_alloc_copy(), dcecp dumps core.

This bug is reported on the nightly build of 8/16.  I don't know what's in
that build.  Can somebody verify that the needed bug fix is there?

[8/22/94 public]
Rich Z was using a build from 8/16.  We believed this was fixed in the secd
from 8/18's nightly build.  Rich will retry tomorrow.

[8/24/94 public]
Using an install of bl16, I cannot reproduce the problem.  All
pgo modify commands seem to work as expected.  When someone else
can verify the tests work at OSF, we can mark the bug accordingly.

[8/26/94 public]
Spoke with Rich, he can't reproduce either.  Cancelled, probably fixed via
one of the sec fixes.



CR Number                     : 11768
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : _h not read-only
Reported Date                 : 8/18/94
Found in Baseline             : 1.1b14
Found Date                    : 8/18/94
Severity                      : D
Priority                      : 3
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[8/18/94 public]
The _h convenience variable should be read-only as the others are:

  dcecp> echo $_h
  hosts/absolut
  dcecp> set $_h foo
  foo
  dcecp> set _u foo
  Error: can't set "_u": dcecp convenience variable is read-only
  dcecp>

[8/19/94 public]
Not to beat you into a pulp, but you have it coming :-)

dcecp> set _h
hosts/frick
dcecp> set _h foo
Error: can't set "_h": dcecp convenience variable is read-only

You created your own nifty variable $_h. 

dcecp> set $_h foo
foo
dcecp> set $_h
foo
dcecp> set _h
hosts/frick

Cancelled.



CR Number                     : 11681
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : odd error message
Reported Date                 : 8/12/94
Found in Baseline             : 1.1b14
Found Date                    : 8/12/94
Severity                      : E
Priority                      : 4
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[8/12/94 public]
When issuing 'principal create', without first authenticating as
cell_admin, dcecp responds with:

	Principal quota exhausted

Which is a tad confusing.

After dce_logging in, principal create worked correctly.

[8/12/94 public]
Sorry to cancel, but here's why.  That's the message that's returned by the
sec API.  There is no way for dcecp to know if your quota is exhausted or
if you are not logged in sec will return the same error.  And to some
extent it is correct.  Why can't an unauth user create a princ, the user
doesn't have a quota to decrement.

If you want to continue this, open an enh against security to change the
error message to be fixed in 1.2.  There might be backward compat problems
with clients getting back a different error message, but probably not.



CR Number                     : 11675
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp "logout" problem
Reported Date                 : 8/12/94
Found in Baseline             : 1.1
Found Date                    : 8/12/94
Severity                      : B
Priority                      : 3
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[8/12/94 public]

	It happened with 1.1 BL 12. I don't have the screen output anymore.

	I was root when I entered dcecp. "klist" inside dcecp shows the right
	information about the machine principal. I then did a "login" as
	someone else. I left it there for over night. The next day when I came
	in, I typed "klist". It showed my principal name but could not show the
	group names since the credential has expired. So far so good. I then
	did a "logout". This should get my context back to the machine
	principal. I did a "klist", it showed the machine principal name,
	but it could not resolve the group names either, even though the 
	"Identity expiration" field showed the time in the future. I then got
	out of dcecp, then did a "klist". Everything showed fine.

[8/22/94 public]
I ran a dcecp session over the weekend. The output of klist was the same on
Friday as it was this morning. I was lokked in a root, and this morning I
still could perform operations as the machine principal.

Weidong, I can't seem to reproduce this. HP says that it should work, and
it does for me. If you can't make this happen again, please cancel this.

[8/26/94 public]
Couldn't reproduce.  Haven't heard in a week.  Cancelled.  If re-occurs can
always be re-opened.



CR Number                     : 11643
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : pgo show
Short Description             : multiple uuids for attr_set not created/shown properly
Reported Date                 : 8/10/94
Found in Baseline             : 1.1b14
Found Date                    : 8/10/94
Severity                      : C
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[8/10/94 public]

When multiple uuid strings are specified as arguments to an era of type
attr_set, the corresponding show command shows the last uuid wrong. It is
either a problem in create or show. 

The following test shows the problem:
520|0 1 4127 1 37|principal_create_era_attr_set_5_P: An attr_set attribute accepts a multiple Tcl listed UUIDs
520|0 1 4127 1 38|==== Contents of test case:
520|0 1 4127 1 39|{principal create foob -attribute {test_attr_set {291e5274-7887-11cd-98a5-0800092464af} {291e5274-7887-11cd-98a5
-0800092464ag} }      dcp_attrlist getval [principal show foob] test_attr_set }
520|0 1 4127 1 40|Test completed successfully.
520|0 1 4127 1 41|== Test output was:
520|0 1 4127 1 42|{291e5274-7887-11cd-98a5-0800092464af  291e5274-7887-11cd-98a5-08000924640a}
520|0 1 4127 1 43|== Expected output was:
520|0 1 4127 1 44|{291e5274-7887-11cd-98a5-0800092464af 291e5274-7887-11cd-98a5-0800092464ag}
520|0 1 4127 1 45|Test Failed.
220|0 1 1 16:51:41|FAIL

Another way to reproduce the problem:

dcecp> principal create foob -attribute {test_attr_set "291e5274-7887-11cd-98a5-0800092464af" "291e5274-7887-11cd-98a5-0800092464a g"}
dcecp> principal show foob
{fullname {}}
{uid 397}
{uuid 0000018d-b485-21cd-9400-08000927ee90}
{alias no}
{quota unlimited}
{test_attr_set
 291e5274-7887-11cd-98a5-0800092464af
 291e5274-7887-11cd-98a5-08000924640a}
dcecp>

It seems there is a problem in either showing or creating the last two characters of the last uuid.

[8/16/94 public]

The era code processes uuid's the same way as the rest of the dcecp code.
The incomming uuid is read and stored with uuid_from_string(), and the
existing uuid is displayed with string_to_uuid().

The problem above is the uuid string itself, not the position of the
uuid string, nor the era code.  The uuid "291e5274-7887-11cd-98a5-0800092464ag"
contains an illegal or incorrect character, the last one -> "g".

I don't know if the above uuid is technically invalid or not.  If so, then
there is a bug in uuid_from_string(), which should catch the illegal
character.  If it's ok, then there is no bug and the above behavior is
expected.  Either way, the era code is ok, so this bug is being cancelled.
I will change the test to pass a correct uuid string.



CR Number                     : 11607
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : tcl
Short Description             : VARARGS not set to ANSI value
Reported Date                 : 8/8/94
Found in Baseline             : 1.1b14
Found Date                    : 8/8/94
Severity                      : E
Priority                      : 4
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[8/8/94 public]
When compiling on the 486:

/project/dce/build/dce1.1/export/at386/usr/include/dce/tcl.h:515: warning: function declaration isn't a prototype
/project/dce/build/dce1.1/export/at386/usr/include/dce/tcl.h:630: warning: function declaration isn't a prototype
/project/dce/build/dce1.1/export/at386/usr/include/dce/tcl.h:666: warning: function declaration isn't a prototype

This looks to come from src/admin/tcl_dce/tcl.h:

  #   if defined(__cplusplus)
  #       define VARARGS ...
  #   else
  #       define VARARGS 	/* as nothing */
  #   endif

Seems like it should be 

  #   if defined(__STDC__) || defined(__cplusplus)

(Note: This is Tcl code and the DCE coding style guide doesn't 
 *necessarily* apply.)

[8/24/94 public]
Changed to E4.  This is Tcl's use of VARARGS instead of std args.
Technically a bad thing to do via the coding style guide, but Tcl is exempt
from the coding style guide (as is kerberos code) and the code works.  The
changes aren't hard, but aren't trivial either.

[9/19/94 public]
Deferred to 1.2.  There will probably be a new version of Tcl by then
anyway.

[2/14/96 public]
Cancel and hang on for new tcl.



CR Number                     : 11505
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : rgy_utils.c  and cdscp_utils.c need to include dce_utils.h
Reported Date                 : 8/1/94
Found in Baseline             : 1.1
Found Date                    : 8/1/94
Severity                      : B
Priority                      : 1
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[8/1/94 public]

cdscp_utils.c and rgy_utils.c need to include dce_utils.h to get the
function prototype for dce_strdup().

[8/1/94 public]

OT 11500 11501 - done and submitted this morning.



CR Number                     : 11485
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp: communication failure on non-centrail trail
Reported Date                 : 7/29/94
Found in Baseline             : 1.1b13
Found Date                    : 7/29/94
Severity                      : B
Priority                      : 1
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[7/29/94 public]

I created a non-central trail on clam with the audit API.
Then I wanted to view the trail with the dcecp,
However I am getting a communications failure.

# dcecp -c audtrail show /tmp/auditd_trail
Error: communications failure

The audit trail is correct because if I try an auditcp
from bl-8 the trail prints out fine.

The trail is on clam in /tmp/auditd_trail

[8/2/94 public]
A communications failure message comes from the RPC runtime stating
that it could not contact the server. This would not be a dcecp bug
in itself. I beleive that if you retried the command it would
succeed. 

dcecp should be more robust in the case of network problems or
servers going away. Downgraded to a D3. dcecp should try to
rebind to a server if an RPC fails.

[8/2/94 public]

I retried the command  (dcecp -c audtrail show /tmp/auditd_trail)
and it failed again.  I don't think it is acceptable to downgrade the bug.
Put the bug back as a B1.
One of our system tests fail because of this bug (audrel001).
This test was working for many weeks with dcecp before
and now it is failing.

[8/2/94 public]
This problem is only reproducable on clam. The version of DCE running
has several known problems with cds. 

The problem is not limited to auditrail show, all audit commands fail.
dcecp is unable to contact auditd.

I cannot reproduce this on my machine. Try upgrading to the bl-12.6 lgb.

It works fine. I'll leave this CR open until you get a chance to use
more recent code.

[8/2/94 public]
This problem IS reproducable on other machines.
I just reproduced it on dce1 (an HP) running bl-13.

Do the following on dce1 (or clam for that matter).

1) As cell_admin, start auditd with auditd -a -t /tmp/auditd_trail
2) If you try dcecp -c audtrail show /tmp/auditd_trail it
   will fail with a communications error
3) If you cd /project/dce/build/dce1.1-baseline/bl-8/install/hp800/opt/dce1.1/bin and run dcecp -c audtrail show /tmp/auditd_trail it will print out the trail.

This demonstrates that I could print out the trail with dcecp on bl-8
but I cannot print out the trail now.

[8/2/94 public]
Can you do any other aud commands? Like 'aud show' or 'audevents cat'?
Do any of the server's if respond, ie. 'acl show /.:/hosts/clam/audit-server'?

[8/2/94 public]

With any baseline prior to bl-13  'aud show' or 'audevents cat' work.
However with bl-13, I am getting communications failure.
Why did this work prior to bl-13 and not work now?
This is the reason the test is failing.

root@dce1> pwd
/project/dce/build/dce1.1-baseline/bl-12/install/hp800/opt/dce1.1/bin
root@dce1> dcecp 
dcecp> audevents cat
dce_audit_filter_modify
dce_audit_filter_query
dce_dts_mgt_modify
dce_dts_mgt_query
dce_dts_synch
dce_dts_time_provider
systest
dcecp> aud show
{state enabled}
{stostrategy stop}

[8/2/94 public]
After talking to Bruce, we agree that this is not an audit or dcecp
problem. It seems to be one of the CDS problems we were seeing last week.
Bruce is upgrading to the lgb (12.6) and will retry.

[8/2/94 public]

Still fails on stcroix (486 machine) with lgb (12.6)
John is investigating.

[8/3/94 public]
This sounds like it *could* be a symptom of the endpoint map problems we've
been having with dced.  Bruce:

 * Are you using dced?
 * What build?
 * Does the problem still occur if you use rpcd as the endpoint map?

Just started catching up on bugs today and made possible connection with
other problems people are having.

[8/5/94 public]

Didn't get a chance to try this till today.

 * Are you using dced?

Yes 

 * What build?

Fails with any build bl-13 or greater
Works with any build (using dcecp or auditcp) before bl-13

 * Does the problem still occur if you use rpcd as the endpoint map?

Yes, I used rpcd as the endpoint map and the problem still occurs.

[8/10/94 public]

This problem still happens on bl-14 as well.
I have written a small testcase which reproduces the problem,
the testcase is on my machine clam in the directory ~bhaim/audit/audtry.
There is a README which goes along with the testcase.

[8/10/94 public]
This is an endpoint problem. auditd does not seem to be cleaning up
it's endpoints even when it is nicely stopped. Running rpcd (and
waiting a few minutes between restarts) clears up the problem. The
communications failures and connection request rejected messages are
caused by dcecp looking up old endpoints in the endpoint map. I'll
dup this to the correct dced bug when I get a chance to look it up, 
and open up a bug against the audit daemon when I can prove that it 
really isn't cleaning up correctly.

[8/12/94 public]
This problem is cancelled because the symptoms are covered by other
CR's. CR 11642 fixes the auditd problem.



CR Number                     : 11477
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dced
Short Description             : server create/delete allows unauthenticated operation
Reported Date                 : 7/28/94
Found in Baseline             : 1.1
Found Date                    : 7/28/94
Severity                      : C
Priority                      : 3
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[7/28/94 public]

The "server create/delete" commands allow an unauthenticated user to 
create and delete server entries at will. 

For "server delete" the user should have 'd' acl permission on
/.:/hosts/machine_name/config/srvrconf . This does not appear to be 
enforced.

[7/28/94 public]
The enforcement is not on the dced cmd rather than on the acl(s).
Yes, the initial acl(s) permits everything to unauthenticated user
and any_other. It's up to administrator to do whatever [s]he wants.
If you prefer other than this, please talk to Rich. I'm cancelling 
this one.



CR Number                     : 11380
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : tcl
Short Description             : tetexec.cfg vars are not defined
Reported Date                 : 7/21/94
Found in Baseline             : 1.1b13
Found Date                    : 7/21/94
Severity                      : B
Priority                      : 0
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[7/21/94 public]
Variables set in tetexec.cfg are no longer available in the tests.
A recent change must have broke this.

Is it Friday yet?

In the tests, in order to access global variables, you need to
put a

global VAR_NAME

statment at the top of the proc.



CR Number                     : 11324
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : undefined symbols in build
Reported Date                 : 7/15/94
Found in Baseline             : 1.1b11
Found Date                    : 7/15/94
Severity                      : B
Priority                      : 0
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[7/15/94 public]
I haven't been able to build dcecp since this morning. The recent 
security drop seems to have caused this. What new code am I missing?

rgy_utils.o: Undefined symbol "_SA_SCH_FLAG_SET_USE_DEFAULTS" referenced
rgy_utils.o: Undefined symbol "_SA_SCH_FLAG_UNSET_USE_DEFAULTS" referenced
rgy_utils.o: Undefined symbol "_SA_SCH_FLAG_SET_RESERVED" referenced
rgy_utils.o: Undefined symbol "_SA_SCH_FLAG_UNSET_RESERVED" referenced
rgy_utils.o: Undefined symbol "_SA_SCH_FLAG_UNSET_MULTI_INST" referenced
rgy_utils.o: Undefined symbol "_SA_SCH_FLAG_SET_MULTI_INST" referenced
rgy_utils.o: Undefined symbol "_SA_SCH_FLAG_SET_UNIQUE" referenced
rgy_utils.o: Undefined symbol "_SA_SCH_FLAG_UNSET_UNIQUE" referenced
rgy_utils.o: Undefined symbol "_SA_SCH_FLAG_IS_SET_USE_DEFAULTS" referenced
rgy_utils.o: Undefined symbol "_SA_SCH_FLAG_IS_SET_RESERVED" referenced
rgy_utils.o: Undefined symbol "_SA_SCH_FLAG_IS_SET_MULTI_INST" referenced
rgy_utils.o: Undefined symbol "_SA_SCH_FLAG_IS_SET_UNIQUE" referenced

[7/15/94 public]
The symbols are defined in security/h/sec_attr_tools.h . I'm trying to 
figure out who should be including this file.

[7/15/94 public]
Cancelled. export area in the backing tree was out of date.



CR Number                     : 11289
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : dcecp cannot create cds name with space(s) in it
Reported Date                 : 7/14/94
Found in Baseline             : 1.1
Found Date                    : 7/14/94
Severity                      : B
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[7/14/94 public]

	CDS allows spaces in a simple name. Section 6.3 (page 6-4) of 1.0.3
	DCE Admin Guide says that you can use single quote, or double quote, or
	back slash to escape the space.

	The above mentioned way works in cdscp. But it does not work in dcecp.

$cdscp
cdscp> crea obj /.:/' ab'
cdscp> del obj /.:/\ ab
cdscp>  

$dcecp
dcecp> obj create /.:/"a b"
Error: Unrecognized argument 'b"'.
dcecp> object create /.:/a\ b
Error: Invalid name
dcecp> obj create /.:/'a b'
Error: Unrecognized argument 'b''.
dcecp>

[7/14/94 public]
You need to follow dcecp (Tcl) quoting rules.  Please try:

  dcecp> obj create "/.:/a b"
  dcecp> obj create {/.:/a b}
  dcecp> obj create /.:/a\ b

I know you said you tried the third and that disturbs me.

The 1.0.3 admin guide you site necessarily describes cdscp and not
dcecp.  dcecp doc and updated admin guides are I believe submitted to
the doc tree.

[7/14/94 public]

Howard is a little bit off. A typical tcl list for creating a bunch of 
objects is {/.:/a /.:/b} so his examples are not exactly correct since
it will try to create two objects /.:/a and b. Try this: 

  dcecp> obj create {"/.:/a b"}
  dcecp> obj create {{/.:/a b}}

[7/14/94 public]
But Kevin is dead on!  Cancelled.  Ward has been notified about the doc
issues.  He can open a CR if he feels it's necessary to track it that way.



CR Number                     : 11264
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : server
Short Description             : server ping returns 1 too often
Reported Date                 : 7/12/94
Found in Baseline             : 1.1b11
Found Date                    : 7/12/94
Severity                      : C
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[7/12/94 public]
dcecp> server ping /.:/lan-profile
1
dcecp> server ping /.:/hosts
1
dcecp> server ping /.:/frick_ch
1

I think all of these cases should return an error (or at least a '0').

[7/12/94 public]
All these entries have binding associated with, for example,
/.:/hosts has to have a cds server or clerk server associated
with in order to keep its replica/clearhouse updated. dcecp server 
object can not distinguish if the entry has a hid server or not. 
What it does at this case is that taking a entry and inq a binding 
from the entry and ping the server on the binding.



CR Number                     : 11237
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : need a suspend command
Reported Date                 : 7/11/94
Found in Baseline             : 1.1b11, 1.2
Found Date                    : 7/11/94
Severity                      : C
Priority                      : 3
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.2.2
Fixed In Baseline             : 
Affected File(s)              : 
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[7/11/94 public]
There should be a way to suspend dcecp without control-Z.  (You can
suspend it on HP, where you can on osf/1.)  A builtin "suspend" command
would do it.

[6/5/96 public]
Moved from 'defer' to 'open'.



CR Number                     : 11236
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : spurious mesage with -s option
Reported Date                 : 7/11/94
Found in Baseline             : 1.1b11
Found Date                    : 7/11/94
Severity                      : B
Priority                      : 1
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[7/11/94 public]

; dcecp -s
invalid command name "-----------------------------------------------------------"
dcecp>

[7/11/94 public]
I can't reproduce this. I've tried this on my 486, my HP and your HP sulphur,
with no problems. Any help on getting this to recur?

[07/12/94 public]
errors in my .dcecprc file.  mea culpa.
Does it make sense for dcecp to print the input filename on error?

[7/1/94 public]
Well, it's Tcl generating the error.  And there is always errorInfo:

  dcecp>  cat > foo
  -----------------
  dcecp> source foo
  Error: invalid command name "-----------------"
  dcecp> echo $errorInfo
  {invalid command name "-----------------"
      while executing
  "-----------------"
      (file "foo" line 1)
      invoked from within
  "source foo"}
  dcecp>



CR Number                     : 11202
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : acl
Short Description             : acl show on nonexistant obj cores
Reported Date                 : 7/7/94
Found in Baseline             : 1.1b10
Found Date                    : 7/7/94
Severity                      : B
Priority                      : 1
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[7/7/94 public]
When running on the 486, logged in as root, I received the following:

(gdb) r
Starting program: /bin/dcecp 
dcecp> acl show /.:/hosts/resuce/aud-acl

Program received signal 11, Segmentation fault
0xa40033e4 in dcp_svc_handle ()
(gdb) where
#0  0xa40033e4 in dcp_svc_handle ()
#1  0xa40032fc in dcp_svc_handle ()
#2  0xa40baa94 in dcp_svc_handle ()
#3  0xa4108a29 in dcp_svc_handle ()
#4  0xa411ca2a in dcp_svc_handle ()
#5  0xa41164d0 in dcp_svc_handle ()
#6  0xa411bbb7 in dcp_svc_handle ()
#7  0xa4183a14 in dcp_svc_handle ()
#8  0xa4182385 in dcp_svc_handle ()
#9  0xa4181d7c in dcp_svc_handle ()
#10 0xa417fa28 in dcp_svc_handle ()
#11 0xa4242a88 in dcp_svc_handle ()
#12 0xa424200a in dcp_svc_handle ()
#13 0x42e79e in dcp_acl_bind_named_object (interp=0x4d0008, dcp_acl_info_p=0x4cb078, 
    bind_to_entry=0) at /project/dce/build/dce1.1-snap/src/admin/dcecp/acl_edit.c:264
#14 0x42e574 in dcp_acl_show (clientData=0x0, interp=0x4d0008, argc=2, argv=0xbffff328)
    at /project/dce/build/dce1.1-snap/src/admin/dcecp/acl_tclif.c:1199
#15 0x4035c5 in dcp_acl (clientData=0x0, interp=0x4d0008, argc=2, argv=0xbffff328)
    at /project/dce/build/dce1.1-snap/src/admin/dcecp/commands.c:1616
#16 0x48c5a9 in Tcl_Eval (5046280, -1073743520)
#17 0x49c01f in Tcl_RecordAndEval (5046280, -1073743520, 0)
#18 0x4006ff in main (argc=1, argv=0xbffffa5c)
    at /project/dce/build/dce1.1-snap/src/admin/dcecp/main.c:396


Notice that the name given to aud show was invalid (typo).

[7/7/94 public]
It seems that every dcecp command dumped core. Must have been bit
rot or a configuration problem. The problem has gone away, and I
can't reproduce it again. Cancelled.



CR Number                     : 11199
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : utils
Short Description             : isllist() returns incorrect value.
Reported Date                 : 7/7/94
Found in Baseline             : 1.1b10
Found Date                    : 7/7/94
Severity                      : C
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[7/7/94 public]

The following command adds three era's to an existing principal.

dcecp> principal modify bar -add {{test_integer 101} {test_void} {test_bytes "a"}}

This command works fine, as it should.  However, if you try and add the same three
era's, but in a different order, you get an error.  The following
command does not work:

dcecp> principal modify bar -add {{test_void} {test_integer 101} {test_bytes "a"}}

The failure is in parse_attribute_list() where a determination is made
whetner or not the passed-in attribute list is a list of lists.  This is
done by the function isllist().  The isllist() function only looks at the
first element in the argument list passed to it.  If the first element is
a "tcl list", then TRUE is returned.  If the first element is not, then
FALSE is returned.

In the above example, when {test_integer 101} is the first element in
the list, isllist() returns TRUE.  When {test_void} is the first
element in the list, isllist() returns FALSE.  The return of FALSE
causes problems later during the processing of the three elements.

Somehow, isllist() must be modified to support void-type attributes.

[7/7/94 public]

It could be better to loop thr all elements of the list and return
true if one of elements has a size larger than 1. (i.e change
cmd_string to "llength [ lindex {%s} %d ]")

[kevins 7/8/94 public] 

The original intent of this function was two-fold. 
a.) verify entry was list of lists. 
b.) rough check on contents. 

I think for the most part the second intent is irrelevant. This check should 
be done for each attribute during the processing of each attribute. I have
come up with a fix that will verify list of lists regardless of the 
number of entries within each list element. So... Here are the 
expected results if I make this change. 

list                return value   reasoning
{a b c d}             0            all elements of list single 
{{a} {a b} {a b}}     1            2 elements are lists
{{a b} {a} {a b}}     1            2 elements are lists
{{a} {b} {c} {a c d}} 1            1 element is a list

If anybody has any other conditions they would like let me know.

[kevins 8/3/94 public] 

I have canceled this since changing the procedure by which isllist 
works will break a variety of things. Modifying the algorithm
according to my table above would break the following list:

{name {value with spaces}}

Clearly such a break is unacceptable. We have come up with a
workaround that is: Void type attributes are not allowed in the first 
position of an attribute list. This will documented.



CR Number                     : 11196
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : attribute "quota" doesn't seem to work right.
Reported Date                 : 7/7/94
Found in Baseline             : 1.1b11
Found Date                    : 7/7/94
Severity                      : C
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : rgy_utils.c
Sensitivity                   : public

[7/7/94 public]

Not long ago I used to be able to do this:

   dcecp> principal modify bar -change {quota 101}

and it would work just fine.  Now when I do this, I
get the error message

   Error: The attribute name is not a recognized attribute.

It seems the function rgy_attribute(), when passed the
attribute name "quota", returns 0 instead of whatever it used
to return.  And when 0 is returned, the encode_rgy_pgo_item_attr()
function treads the attribute name as if it were either
an extended attribute or an unknown attribute, thus the above
error message.  This happens with "fullname" as well.

Note that

   dcecp> principal modify bar -quota 101

works fine.

[7/7/94 public]

I cannot reproduce this. What is the versioon of the installation that 
you have? You may want to try reinstalling /opt/dcelocal/dcecp/* and then
running (as root) 

auto_mkindex $dcecp_library *.dcp

[kevins 7/11/94 public] 

Not reproducable.



CR Number                     : 11169
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : aud
Short Description             : needs paging or some other way to
manage the screen output
Reported Date                 : 7/1/94
Found in Baseline             : 1.1
Found Date                    : 7/1/94
Severity                      : C
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[7/1/94 public]

The audit trails quickly grow very large.  The existing audtrail show
command is not very useful in viewing this data.  When sending to the
screen, it would be useful to have the data displayed a screen full at
a time (like "more" or better yet like "less", so that you can navigate
the text).

Another nice improvement would be to have the ability to write to a
file completely from a command line - ie.

/opt/dcelocal/bin/auditcp audtrail show <audit trail filename>  

and the ability to redirect this to a file.

At least for security, with CR 11166 makes both audit file viewing options
unusable.  When sending to a file, we get core dumps and when sending to the
screen there is so much data it quickly exceeds the ability to scroll the
window to view it.

[7/6/94 public]
Use:

 dcecp> audtrail show <audit trail filename> -to <output filename>



CR Number                     : 11120
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : annoying message
Reported Date                 : 6/28/94
Found in Baseline             : 1.1
Found Date                    : 6/28/94
Severity                      : E
Priority                      : 4
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[6/28/94 public]
When you invoke dcecp and you do not have HOME set in your environment, you
get:

'couldn't find HOME environment variable to expand "~/.dcecprc"'

Is it really necessary to print this?  This isn't a error; it's merely a
notice -- dcecp works find without a .dcecprc file.  Why not let it just
continue quietly and if I don't get my .dcecprc, so be it.

(The scenario in which this occured is audit FVT, which now use dcecp
instead of auditcp.  There are tens of dcecp invocations so the stdout log
file is filled with this message.  (Strangely, it seems to appear twice.
Is this printed to stdout and stderr?)

[8/16/94 public]
A few things:
 * This is reporting that $HOME is not set, not that the file was not
   found.  This environment variable is supposed to be set by login so it
   is reporting this strange occurance.
 * This is supposed to only occur if dcecp is invoked interactively.  If
   you invoke it with a filename it does not occur:
      absolut admin/dcecp$ echo $HOME
      
      absolut admin/dcecp$ dcecp ~melman/.dcecprc
      absolut admin/dcecp$ 
   So I'm curious about how the audit tests are structured.
 * The error is printed to stderr but I don't see it printed to stdout.

I'm cancelling this bug.  If it is still occuring in the audit FVT's and
this is still annoying feel free to re-open and let me know.



CR Number                     : 10965
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : Inefficient tracking of schema attributes
Reported Date                 : 6/15/94
Found in Baseline             : 1.1
Found Date                    : 6/15/94
Severity                      : D
Priority                      : 3
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : rgy_utils.c
Sensitivity                   : public

[6/15/94 public]
During the display of extended attributes, the attributes for an object
are found by doing a lookup by id.  A schema lookup is done for each
attribute to get its name.  We should keep a local table of known
attribute_id:attribute_name pairs so an attribute id can be quickly
and easily lookup up without having to do the schema lookup.  If the
attribute id is not found in the local table, then do the schema lookup,
and if found, add the new pair to the local table.

This is found in the show_era() function.

[6/27/94 public]
The same problem can be found in the check_era_info() function, and
must be fixed here as well.

[9/26/94 public]
Deferred till 1.2.  This work really is just a performance improvement.  I
kept it a def and not an enh to give it a greater chance to actually get
done.

[09/13/95 public]
With the addition of trigger support within ERA's, it is no
longer desirable to hold static ERA information.  The name
and type information must be read on demand.  The code is
ok as is.



CR Number                     : 10944
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : help
Short Description             : help log produces error
Reported Date                 : 6/14/94
Found in Baseline             : 1.1
Found Date                    : 6/14/94
Severity                      : B
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[6/14/94 public]

This is a problem:
dcecp> help log
Error: Object "log" is not unique: logout login log

It used to work.  (say a week or so ago).

[6/14/94 public]
I take that back, this was user error.  Should have typed 'log help'.



CR Number                     : 10921
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dts
Short Description             : show output needs blank link for multiple lists
Reported Date                 : 6/9/94
Found in Baseline             : 1.1b9
Found Date                    : 6/9/94
Severity                      : D
Priority                      : 3
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[6/9/94 public]
dts and clock show should output a blank line when showing lists
from multiple servers.

[6/22/94 public]
According to the functional spec, the dts commands only accept a single
server to contact, not a list. Therefore generating lists from multiple 
servers is impossible. Cancelled.



CR Number                     : 10815
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rpc
Short Description             : rpcgroup add should complain when adding existing entries
Reported Date                 : 5/31/94
Found in Baseline             : 1.1b9
Found Date                    : 5/31/94
Severity                      : C
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[5/31/94 public]
dcecp> rpcgroup add /.:/rpcg_add_7_P_1 -member {/.:/foo /.:/bar}
dcecp> rpcgroup add /.:/rpcg_add_7_P_1 -member {/.:/foo /.:/bar}

This commands adds the same members to the same group, is the NSI
does not flag this as an error, the spec should be changed.

[8/15/94 public]
The word "is" in the above sentence could be interpreted as either
"if" or "as", I suppose. :-) Anyway, it's clear that the NSI
(rpc_ns_group_mbr_add, specifically) does *not* flag it as an error,
or it would not, in fact, work; the dcecp code basically does nothing
but parse arguments to pass on to RPC. So I guess the spec should be
changed.

[8/15/94 public]
The word "is" should be "if".  The spec has been changed.



CR Number                     : 10812
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : svc
Short Description             : dcesvc replaced by dcecp
Reported Date                 : 5/31/94
Found in Baseline             : 1.1
Found Date                    : 5/31/94
Severity                      : E
Priority                      : 3
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[5/31/94 public]
If we are convinced that dcecp's log command completely replaces the
dcesvc program then we should remove dcesvc from the tree or at least
move it to nosupport.

[05/31/94 public]
I don't think dcesvc is even built any more; the svc/Makefile could be
cleaned up a bit.  Should dcecp should dumping of binary log files?
Right now we've got svcdumplog (under 200 lines of code) and if that could go
away it would be A Good Thing.

[6/1/94 public]
We could implement a "log dump" command.  We already have a "cdscache
dump" command that does what "cadump" did.  Dump info suitible for
debugging.

[6/1/94 public]

Howard, what do you mean by "Dump info suitable for debugging" ? 
Dumping of binary files is required for more than just debugging.
I will elaborate if required.

[6/3/94 public]
Yes, we are all convinced.   The src is in utils/svc/svcdumplog.c,
and is < 200 lines.

Currently, the program "svcdumplog" makes it to the install tree, but
is not installed in /usr/bin by dce_config.

[6/3/94 public]
Understood.  There will be a new dcecp command (probably "logfile show")
that will do this.  Cancelling this CR and will capture the new command
in dcecp fucntional spec.



CR Number                     : 10789
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rpc
Short Description             : Incorrect error messages from rpcentry
Reported Date                 : 5/26/94
Found in Baseline             : 1.1
Found Date                    : 5/26/94
Severity                      : C
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[5/26/94 public]

I changed my mind in the middle of entering this, but failed to
prevent its creation. Sorry.



CR Number                     : 10773
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rpc
Short Description             : rpcentry import gives incorrect error message
Reported Date                 : 5/25/94
Found in Baseline             : 1.1b9
Found Date                    : 5/25/94
Severity                      : C
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[5/25/94 public]

dcecp> rpcentry import /.:/foo -obj ea65d898-6c2b-11cd-b7ca-080009251352
Error: Must use -interface or -default
>

But "rpcentry import" doesn't accept -default, nor should it.

[5/26/94 public]

"export" also produces this message if the -interface option is
omitted. "unexport" produces a slightly different message that also
implies the use of -default.

[5/26/94 public]
This was the result of message catalog version skew. Cancelled.



CR Number                     : 10768
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : login
Short Description             : dcecp login fails when dced is running instead of sec_clientd
Reported Date                 : 5/25/94
Found in Baseline             : 1.1
Found Date                    : 5/25/94
Severity                      : A
Priority                      : 1
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[5/25/94 public]
During the dced secval functional test, dcecp login fails at
sec_login_certify_identity(). However, if we stop dced and restart
sec_clientd, the dcecp login succeeds.

[5/25/94 public]
Do you have any more info than this?  The returned error status would
be helpful.

Note the dced's implementation of rsec_login_validate_cert_auth() is
identical to sec_clientd's: both just set the error status to OK, then return.

[5/25/94 public]
It's easy to reproduce. kill sec_clientd and start dced, and then run dcecp
as following,
pwang@foster317 >dcecp
dcecp> login cell_admin -p -dce-
Error: connection request rejected

The error code is  0x16c9a042
pwang@foster231 >statuscode 0x16c9a042
Tech = 1 = 01 = 0x1 = dce
Comp = 27802 = 066232 = 0x6c9a = rpc
Mesg = 66 = 0102 = 0x42 = connection request rejected

start           incatalog intable
  code          rpc_s_connect_rejected
  text          "connection request rejected"
  engineer      "Wei Hu"
  explanation   "The server rejected the connection request from the client.
		This can be because the server has reached its maximum
		allowable connect requests."
   action       "Check the network connection and then retry the operation.
		If the network connection is ok, the server may be receiving
		too many simultaneous client requests. The client can retry
		the server or try contacting a different server."
end

[5/25/94 public]
Well, By the end, this problem is not anyone's problem, is a non-real-bug.
The dcecp login does a little more than dce_login to certify the sec server,
however the dced has its certification service(secval) off by default so
that everytime dcecp login failed on certifying the identity. Somehow, either
dced need to have it on by default or late dce_config need to start dced
with secval service on, or dcecp login doesn't certify the identity, one
of these need to be done. I modified my test code accordingly and activated
the secval service before running my test, all ICs passed on both 486 and HP
(although HP had dced server core dumped during acl_edit, I'll file another
bug on this core dump). Cancelled this bug by now.

[05/26/94 public]
dcecp login calls sec_login_certify?  It should not.  You should only
call certify if you are going to do Unix setuid kinds of things.
Turned this into a dcecp bug.

[6/6/94 public]
dcecp needs to call sec_login_certify_identity. In order to call 
sec_login_inquire_net_info for the principal and cell names, you
must have a certified context. Everyone is going to have to call
certify with the new pre-authn changes anyway, correct? Cancelled.



CR Number                     : 10661
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dts
Short Description             : Change dts includes
Reported Date                 : 5/16/94
Found in Baseline             : 1.1b8
Found Date                    : 5/16/94
Severity                      : D
Priority                      : 3
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[5/16/94 public]
When CR 10660 is fixed, the dts pieces of dcecp should include 
dtss_ctrl.h and possibly another header which defines constants
needed for interpreting what the dts control rpc's return.

dts_proto.h can be defuncted once this occurs, and have commands.c
include dcp_dts.h

[8/3/94 public]
changed to an enhancement as 10660 was.  The code works today, the only
reason to change is for the purists.

[9/14/96 public]
Cancelled, with the blessing of the responsible engineer. :-)



CR Number                     : 10567
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : security
Short Description             : trying to add an account
prints Error: Data integrity error
Reported Date                 : 5/6/94
Found in Baseline             : 1.1
Found Date                    : 5/6/94
Severity                      : A
Priority                      : 1
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[5/6/94 public]

Tested on OSF/1 using BL-8
Tested on HP using the Wed's NB.

The dcecp account create command returns with a "data integrity error"

Example :

dcecp> principal create rose
dcecp> group create red  
dcecp> org create flower
dcecp> group add red -member rose
dcecp> account create rose -attribute {{group red} {organization flower}
{password -dce-} {mypwd unknown}}
Error: Data integrity error
dcecp> account create rose -group red -org flower -password -dce- -mypwd help
Error: Data integrity error
dcecp>


---------------------------------------

I am cancelling this CR because it was an operator error (mine). 
The data integrity error was telling me that it could not validate
my password. I had exchanged the value of -password and -mypwd

-password  [the principal password]

-mypwd [the password of the principal adding the account]

Here are the steps to add and account using dcecp:

1. create a principal
dcecp> principal create rose

2. create a group
dcecp> group create red

3. create an org
dcecp> org create flower

4. add the principal as a member of a group
dcecp> group add red -member rose

5. add the principal as a member of an org
dcecp> org add flower -member rose

6. then add the account 
dcecp> account create rose -attribute {{group red} {organization flower}
{password rose-pwd} {mypwd -dce-}}

or

dcecp> account create rose -group red -org flower -password rose-pwd -mypwd -dce-



CR Number                     : 10539
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : aud
Short Description             : dcecp core dumps on short filters
Reported Date                 : 5/4/94
Found in Baseline             : 1.1b8
Found Date                    : 5/4/94
Severity                      : B
Priority                      : 1
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[5/4/94 public]
The following command causes dcecp to core.

dcecp> audf cre world -at {success log}

This is because dcp_check_multi_guides() can't handle this condition. This
function needs to me modified to check all the way up the list.

[5/5/94 public]
Blown pointer fixed in other audit submission



CR Number                     : 10491
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : parseargv
Short Description             : Commands with 1 option execute successfully with ambiguous argument '-'
Reported Date                 : 4/29/94
Found in Baseline             : 1.1
Found Date                    : 4/29/94
Severity                      : C
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[4/29/94 public]

If the dcecp command only has one option and the user specifies just "-", then
the command successfully completes as if the user specified the option
properly.
An error message should be returned.

Examples:

"acl check" has 1 option: -entry
dcecp> acl check /.:/hosts -
rwdtc

"log show" has 1 option: -debug
dcecp> log show /.:/hosts/ice/dts-entity -
{dts {{states 4} {events 5}} TEXTFILE /tmp/svc}

"acl permissions" has 3 options: -entry -ic -io
dcecp> acl permissions /.:/hosts -
Error: Ambiguous argument '-': -entry -ic -io

[5/2/94 public]
Ping's submission today to parseargv.c should have fixed this. 
Julie, try calling dcp_ParseArgv with the DCP_ARGV_NO_OPT_LEFTOVERS
flag.

[5/5/94 public]

I tested on 1.1b8 with the above suggestion and this defect still exists.

[8/24/94 public]
Any concievable fix for this problem that involves parseargv will also
have the side effect of preventing a '-' from being used as a valid 
argument.

The behavior is consistent with other commands, just a little strange
to the user. Because there is only one option in the arg_table for
these commands, parseargv is validly allowing abbreviations down
to the shortest unique string, '-'. This bug is cancelled. The current
behavior is arguably correct, and any fix will cause worse problems 
later on.



CR Number                     : 10451
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : admin/dcecp/scripts
Short Description             : compilation errors
and bad file permissions
Reported Date                 : 4/25/94
Found in Baseline             : 1.1
Found Date                    : 4/25/94
Severity                      : A
Priority                      : 0
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : commands.c, dhd_util.c,
dhd_server.c, dhd_hostdata.c, dhd_keytab.c, cprpc_clerk_cstub.c,  
cprpc_server_cstub.c, dtss_ctrl_cstub.c
Sensitivity                   : public

[4/25/94 public]

[ /admin/dcecp/scripts at 07:07 (AM) Sunday ]

xlc -c       -g -Dunix -D_BSD -D_ALL_SOURCE -DAIX32   -I. \
 -I/u1/devobj/sb/nb_rios/src/admin/dcecp \
 -I/project/dce/build/dce1.1-snap/src/admin/dcecp \
 -I../../time/common -I/u1/devobj/sb/nb_rios/src/time/common \
 -I/project/dce/build/dce1.1-snap/src/time/common \
 -I/u1/devobj/sb/nb_rios/export/rios/usr/include \
 -I/project/dce/build/dce1.1-snap/export/rios/usr/include \
 /project/dce/build/dce1.1-snap/src/admin/dcecp/commands.c 1501-106: \
 (S) Include file dhd.h not found.
....
"/project/dce/build/dce1.1-snap/src/admin/dcecp/commands.c", line 2097.31: \
 1506-045 (S) Undeclared identifier dcp_sv_show. 
"/project/dce/build/dce1.1-snap/src/admin/dcecp/commands.c", line 2099.32: \
 1506-045 (S) Undeclared identifier dcp_sv_start.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/commands.c", line 2101.31: \
 1506-045 (S) Undeclared identifier dcp_sv_stop.
*** Error code 1

"audit_control_cstub.c", line 597.19: 1506-193 (E) Function call argument \
 cannot be assigned to corresponding parameter.

xlc: 1501-233 Input file \
 /project/dce/build/dce1.1-snap/src/admin/dcecp/dhd_util.c does not have \
 correct permissions
*** Error code 252
xlc: 1501-233 Input file \
 /project/dce/build/dce1.1-snap/src/admin/dcecp/dhd_server.c does not have \
 correct permissions
*** Error code 252
xlc: 1501-233 Input file \
/project/dce/build/dce1.1-snap/src/admin/dcecp/dhd_server.c does not have \
 correct permissions
*** Error code 252
xlc: 1501-233 Input file \
/project/dce/build/dce1.1-snap/src/admin/dcecp/dhd_hostdata.c does not have \
 correct permissions
*** Error code 252
xlc: 1501-233 Input file \
/project/dce/build/dce1.1-snap/src/admin/dcecp/dhd_keytab.c does not have \
correct permissions
*** Error code 252

"cprpc_clerk_cstub.c", line 1050.19: 1506-193 (E) Function call argument \
 cannot be assigned to corresponding parameter.
"cprpc_server_cstub.c", line 987.19: 1506-193 (E) Function call argument \
 cannot be assigned to corresponding parameter.

"dtss_ctrl_cstub.c", line 1168.19: 1506-193 (E) Function call argument \
 cannot be assigned to corresponding parameter.
"dtss_ctrl_cstub.c", line 1244.19: 1506-193 (E) Function call argument \
 cannot be assigned to corresponding parameter.

[4/25/94 public]

Corrected platform fields to "all": assumed would break 486 as well.

[4/25/94 public]

Corrected permission on dhd* files in the RCS tree to 444.

Changed platform fields to rs6000 as the HPUX platform built these files
without errors according to the build log. The -DAIX flag indicates the
RIOS platform.

It's best to wait to see what the outcome of the 486 build is first before
opening a defect. :-)

[5/2/94 public]
seems to have been fixed.



CR Number                     : 10361
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 10360
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dir create can't set CDS_ObjUUID
Reported Date                 : 4/14/94
Found in Baseline             : 1.0
Found Date                    : 4/14/94
Severity                      : B
Priority                      : 1
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[4/14/94 public]

'dir create /.:/foo -attr {CDS_ObjectUUID <uuid>}' fails complaining
that the attribute is not writable. This is because directory_create,
unlike object_create, doesn't special-case the CDS_ObjectUUID
attribute so as to include it in the create call, but tries to add it
as an attribute afterwards. (See, however, CR 10360: there's a bug in
object_create's handling of this that results in it not being able to
set multiple attributes.)

[4/15/94 public]

I am informed that CDS_ObjectUUID is not intended to be writable for a
directory. Cancelled.



CR Number                     : 10330
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : login
Short Description             : Login randomly returns "Context has not been validated".
Reported Date                 : 4/12/94
Found in Baseline             : 1.1
Found Date                    : 4/12/94
Severity                      : B
Priority                      : 1
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[4/12/94 public]

Note on OSF platform these tests execute successfully.

Some output from acl_delete_P.tcl test suite:

200|0 1 10:05:57|TP Start
520|0 1 28481 1 24|acl_delete_018_P: Delete all ACL entries except the user_obj
entry if it
520|0 1 28481 1 25|acl_delete_018_P: exists for more than 1 ACL object, which ar
e individually
520|0 1 28481 1 26|acl_delete_018_P: enclosed in braces.
520|0 1 28481 1 27|Command failed: {login $DCP_CLIENT -password $DCP_CLIENT_PW}
520|0 1 28481 1 28|Command returned: {Context has not been validated}
520|0 1 28481 1 29|Test aborted.
220|0 1 2 10:06:01|UNRESOLVED
410|0 4 1 10:06:02|IC End
400|0 5 1 10:06:02|IC Start
200|0 1 10:06:03|TP Start
520|0 1 28481 1 30|acl_delete_019_P: Delete all ACL entries except the user_obj
entry if it
520|0 1 28481 1 31|acl_delete_019_P: exists for 1 ACL object.
520|0 1 28481 1 32|acl_delete_019_P: This test operates on the namespace entry A
CL of the
520|0 1 28481 1 33|acl_delete_019_P: specified object.
520|0 1 28481 1 34|Command failed: {login $DCP_CLIENT -password $DCP_CLIENT_PW}
520|0 1 28481 1 35|Command returned: {Context has not been validated}
520|0 1 28481 1 36|Test aborted.
220|0 1 2 10:06:07|UNRESOLVED
410|0 5 1 10:06:07|IC End

[4/12/94 public]
The problem turns out to be that one of the interal routines that get the
principal and cell named from the registry service was not returning a
TCL_OK upon successful completion. This led to spurious results in the
login code.

[5/19/94 public]
The above change did not fix the problem. The HP security drop of 
Friday 3/13/94 did. The problem can not be reproduced now. Cancelled.

[5/19/94 public]
It wasn't the HP drop of 3/13 necessarily.  I have not reinstalled DCE
since the 5/4/94 nightly build.  I have rebuilt dcecp with the latest
code (late 5/18) and I can no longer reproduce the problem.

[5/19/94 public]
Well, It does not work for me. My dce was installed from the 5/17/94 nightly
build. The following is the journal file I just ran a few of mins ago. The
error msg is not same as this one you cancelled thr. Please let me know if
you want me to open a separated OT. Thanks.

--------------

0|1.10 10:34:01 19940519|User: pwang (1294) TCC Start, Command Line: tcc -e admin/dcecp secval 
20|/work/sandboxes/dce11sb/install/at386/dcetest/dce1.1/test/admin/dcecp/tetexec.cfg 1|Config Start
30||TET_VERSION=1.10
30||TET_OUTPUT_CAPTURE=False
30||TET_RESCODES_FILE=tet_code
30||TET_EXEC_IN_PLACE=TRUE
30||TET_SIG_IGN=26
30||DCP_CLIENT=cell_admin
30||DCP_CLIENT_PW=-dce-
30||DCP_CELLNAME_ONE=/.../absolut_cell.osf.org
30||DCP_NOTROOT=notroot
30||DCP_NOTROOT_PW=-notroot-
30||DCP_CELLNAME_TWO=/.../ninja_cell.osf.org
30||DCP_HOSTNAME_ONE=absolut
30||DCP_HOSTNAME_TWO=ninja
30||DCP_HOSTNAME_THREE=hosts/foster
30||DCP_INTERCELL_AVAIL=0
30||DCP_DFS_AVAIL=0
30||OBJECT_UUID=8a2352c8-5b9e-11cd-aa03-080009251352
30||PROTSEQ=ncacn_ip_tcp
30||NETADDR=130.105.5.93
30||ENDPOINT=1701
30||VERBOSE=1
30||DCP_ACL_OBJ_MASK1=/.:/hosts/$DCP_HOSTNAME_ONE/dts-entity
30||DCP_ACL_OBJ_DELEGATION=XXX
30||DCP_ACL_OBJ_EXTENDED=XXX
30||EXTENDED_UUID=XXX
30||EXTENDED_NDR_F1=XXX
30||EXTENDED_NDR_F2=XXX
30||EXTENDED_NDR_F3=XXX
30||EXTENDED_NDR_F4=XXX
30||EXTENDED_NBR_BYTES=4
30||EXTENDED_DATA=0a0b0c0d
30||DCP_LOG_SRVR_ONE=/.:/hosts/$DCP_HOSTNAME_ONE/dts-entity
30||DCP_LOG_SRVR_TWO=/.:/hosts/$DCP_HOSTNAME_ONE/cds-clerk
30||DCP_LOG_COMP_ONE=dts
30||DCP_LOG_COMP_TWO=cds
30||DCP_AUD_CELLNAME=/.../ninja_cell.osf.org
30||DCP_AUD_TRAIL_FILE_1=/tmp/trail1
30||DCP_AUD_TRAIL_FILE_2=/tmp/trail2
30||DCP_AUD_TRAIL_OUTFILE=/tmp/trail.out
40||Config End
70||"Starting secval test suite"
70||"Starting negative secval tests"
70||"Starting negative secval activate tests"
10|0 /ts/secval/secval_activate_N.tcl 10:34:01|TC Start, scenario ref 479-1
15|0 1.10 4|TCM Start
400|0 1 1 10:34:35|IC Start
200|0 1 10:34:35|TP Start
520|0 1 11896 1 1|secval_activate_1_N: check that extra/invalid options are trapped as errors.
520|0 1 11896 1 2|==== Contents of test case:
520|0 1 11896 1 3|{         list [catch {secval activate -foo} msg] $msg     }
520|0 1 11896 1 4|Test completed successfully.
520|0 1 11896 1 5|Test Passed.
220|0 1 0 10:34:36|PASS
410|0 1 1 10:34:36|IC End
400|0 2 1 10:34:36|IC Start
200|0 1 10:34:36|TP Start
520|0 1 11896 1 6|secval_activate_2_N: check that a wrong host are returned as errors.
520|0 1 11896 1 7|==== Contents of test case:
520|0 1 11896 1 8|{         list [catch {secval activate foo} msg] $msg     }
520|0 1 11896 1 9|Test completed successfully.
520|0 1 11896 1 10|Test Passed.
220|0 1 0 10:34:37|PASS
410|0 2 1 10:34:37|IC End
400|0 3 1 10:34:38|IC Start
200|0 1 10:34:38|TP Start
520|0 1 11896 1 11|secval_activate_3_N: check that non-privileged users are handled correctly.
520|0 1 11896 1 12|Command failed: {login $DCP_NOTROOT -password $DCP_NOTROOT_PW}
520|0 1 11896 1 13|Command returned: {unknown interface}
520|0 1 11896 1 14|Test aborted.
220|0 1 2 10:34:42|UNRESOLVED
410|0 3 1 10:34:43|IC End
400|0 4 1 10:34:43|IC Start
200|0 1 10:34:43|TP Start
520|0 1 11896 1 15|secval_activate_4_N: check activate secval which is already active returning a error.
520|0 1 11896 1 16|Command failed: {login $DCP_CLIENT -password $DCP_CLIENT_PW}
520|0 1 11896 1 17|Command returned: {unknown interface}
520|0 1 11896 1 18|Test aborted.
220|0 1 2 10:34:46|UNRESOLVED
410|0 4 1 10:34:46|IC End
80|0 0 10:34:53|TC End
70||"Finished negative secval activate tests"
70||"Starting negative secval deactivate tests"
10|1 /ts/secval/secval_deactivate_N.tcl 10:34:53|TC Start, scenario ref 482-1
15|0 1.10 4|TCM Start
400|0 1 1 10:35:11|IC Start
200|0 1 10:35:11|TP Start
520|0 1 12048 1 1|secval_deactivate_1_N: check that extra/invalid options are trapped as errors.
520|0 1 12048 1 2|==== Contents of test case:
520|0 1 12048 1 3|{         list [catch {secval deactivate -foo} msg] $msg     }
520|0 1 12048 1 4|Test completed successfully.
520|0 1 12048 1 5|Test Passed.
220|0 1 0 10:35:12|PASS
410|0 1 1 10:35:12|IC End
400|0 2 1 10:35:12|IC Start
200|0 1 10:35:12|TP Start
520|0 1 12048 1 6|secval_deactivate_2_N: check that a wrong host are returned as invalid arg.
520|0 1 12048 1 7|==== Contents of test case:
520|0 1 12048 1 8|{         list [catch {secval deactivate foo} msg] $msg     }
520|0 1 12048 1 9|Test completed successfully.
520|0 1 12048 1 10|Test Passed.
220|0 1 0 10:35:13|PASS
410|0 2 1 10:35:13|IC End
400|0 3 1 10:35:13|IC Start
200|0 1 10:35:13|TP Start
520|0 1 12048 1 11|secval_deactivate_3_N: check that unauthenticated users are handled correctly.
520|0 1 12048 1 12|Command failed: {login $DCP_NOTROOT -password $DCP_NOTROOT_PW}
520|0 1 12048 1 13|Command returned: {unknown interface}
520|0 1 12048 1 14|Test aborted.
220|0 1 2 10:35:17|UNRESOLVED
410|0 3 1 10:35:17|IC End
400|0 4 1 10:35:17|IC Start
200|0 1 10:35:17|TP Start
520|0 1 12048 1 15|secval_deactivate_4_N: check that deactivate secval which is not active returning a error.
520|0 1 12048 1 16|Command failed: {login $DCP_CLIENT -password $DCP_CLIENT_PW}
520|0 1 12048 1 17|Command returned: {unknown interface}
520|0 1 12048 1 18|Test aborted.
220|0 1 2 10:35:20|UNRESOLVED
410|0 4 1 10:35:20|IC End
80|1 0 10:35:26|TC End
70||"Finished negative secval deactivate tests"
70||"Starting negative secval ping tests"
10|2 /ts/secval/secval_ping_N.tcl 10:35:26|TC Start, scenario ref 485-1
15|0 1.10 3|TCM Start
400|0 1 1 10:35:35|IC Start
200|0 1 10:35:35|TP Start
520|0 1 12184 1 1|secval_ping_1_N: check that extra/invalid options are trapped as errors.
520|0 1 12184 1 2|==== Contents of test case:
520|0 1 12184 1 3|{         list [catch {secval ping -foo} msg] $msg     }
520|0 1 12184 1 4|Test completed successfully.
520|0 1 12184 1 5|Test Passed.
220|0 1 0 10:35:36|PASS
410|0 1 1 10:35:36|IC End
400|0 2 1 10:35:37|IC Start
200|0 1 10:35:37|TP Start
520|0 1 12184 1 6|secval_ping_2_N: check that a wrong host are returned as errors.
520|0 1 12184 1 7|==== Contents of test case:
520|0 1 12184 1 8|{         list [catch {secval ping foo} msg] $msg     }
520|0 1 12184 1 9|Test completed successfully.
520|0 1 12184 1 10|Test Passed.
220|0 1 0 10:35:37|PASS
410|0 2 1 10:35:37|IC End
400|0 3 1 10:35:38|IC Start
200|0 1 10:35:38|TP Start
520|0 1 12184 1 11|secval_ping_3_N: check that a non login context's user get 0 as the result.
520|0 1 12184 1 12|==== Contents of test case:
520|0 1 12184 1 13|{     	list [catch {secval ping} msg] $msg     }
520|0 1 12184 1 14|Test completed successfully.
520|0 1 12184 1 15|Test Passed.
220|0 1 0 10:35:39|PASS
410|0 3 1 10:35:39|IC End
80|2 0 10:35:40|TC End
70||"Finished negative secval ping tests"
70||"Starting positive secval tests"
70||"Starting positive secval activate tests"
10|3 /ts/secval/secval_activate_P.tcl 10:35:40|TC Start, scenario ref 489-1
15|0 1.10 2|TCM Start
400|0 1 1 10:35:53|IC Start
200|0 1 10:35:53|TP Start
520|0 1 11842 1 1|secval_activate_5_P: check to see that we can activate secval.
520|0 1 11842 1 2|Command failed: {login $DCP_CLIENT -password $DCP_CLIENT_PW}
520|0 1 11842 1 3|Command returned: {unknown interface}
520|0 1 11842 1 4|Test aborted.
220|0 1 2 10:35:56|UNRESOLVED
410|0 1 1 10:35:57|IC End
400|0 2 1 10:35:57|IC Start
200|0 1 10:35:57|TP Start
520|0 1 11842 1 5|secval_activate_6_P: check to see that we can activate secval by hostname.
520|0 1 11842 1 6|Command failed: {login $DCP_CLIENT -password $DCP_CLIENT_PW}
520|0 1 11842 1 7|Command returned: {unknown interface}
520|0 1 11842 1 8|Test aborted.
220|0 1 2 10:36:01|UNRESOLVED
410|0 2 1 10:36:01|IC End
80|3 0 10:36:07|TC End
70||"Finished  positive secval activate tests"
70||"Starting positive secval deactivate tests"
10|4 /ts/secval/secval_deactivate_P.tcl 10:36:07|TC Start, scenario ref 492-1
15|0 1.10 2|TCM Start
400|0 1 1 10:36:19|IC Start
200|0 1 10:36:19|TP Start
520|0 1 12620 1 1|secval_deactivate_5_P: check to see that we can deactivate secval.
520|0 1 12620 1 2|Command failed: {login $DCP_CLIENT -password $DCP_CLIENT_PW}
520|0 1 12620 1 3|Command returned: {unknown interface}
520|0 1 12620 1 4|Test aborted.
220|0 1 2 10:36:23|UNRESOLVED
410|0 1 1 10:36:23|IC End
400|0 2 1 10:36:23|IC Start
200|0 1 10:36:23|TP Start
520|0 1 12620 1 5|secval_deactivate_6_P: check to see that we can deactivate secval by hostname.
520|0 1 12620 1 6|Command failed: {login $DCP_CLIENT -password $DCP_CLIENT_PW}
520|0 1 12620 1 7|Command returned: {unknown interface}
520|0 1 12620 1 8|Test aborted.
220|0 1 2 10:36:26|UNRESOLVED
410|0 2 1 10:36:26|IC End
80|4 0 10:36:33|TC End
70||"Finished  positive secval deactivate tests"
70||"Starting positive secval ping tests"
10|5 /ts/secval/secval_ping_P.tcl 10:36:33|TC Start, scenario ref 495-1
15|0 1.10 2|TCM Start
400|0 1 1 10:36:41|IC Start
200|0 1 10:36:41|TP Start
520|0 1 12773 1 1|secval_ping_4_P: check to see that we can ping secval.
520|0 1 12773 1 2|Command failed: {login $DCP_NOTROOT -password $DCP_NOTROOT_PW}
520|0 1 12773 1 3|Command returned: {unknown interface}
520|0 1 12773 1 4|Test aborted.
220|0 1 2 10:36:46|UNRESOLVED
410|0 1 1 10:36:47|IC End
400|0 2 1 10:36:47|IC Start
200|0 1 10:36:47|TP Start
520|0 1 12773 1 5|secval_ping_5_P: check to see that we can ping secval by hostname.
520|0 1 12773 1 6|Command failed: {login $DCP_NOTROOT -password $DCP_NOTROOT_PW}
520|0 1 12773 1 7|Command returned: {unknown interface}
520|0 1 12773 1 8|Test aborted.
220|0 1 2 10:36:50|UNRESOLVED
410|0 2 1 10:36:50|IC End
80|5 0 10:36:51|TC End
70||"Finished  positive secval ping  tests"
70||"Finished  positive secval  tests"
70||"Finished secval test suite"
900|10:36:51|TCC End
-------------------------------



CR Number                     : 10265
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : dir show cores on unknown cell.
Reported Date                 : 3/31/94
Found in Baseline             : 1.1
Found Date                    : 3/31/94
Severity                      : B
Priority                      : 1
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[3/31/94 public]
The dir show command core dumps on cell names that aren't recognized.

dcecp> dir show /.../ice_cell.osf.org

Program received signal 11, Segmentation fault
0xa405ca38 in memcpy (5572018, -1073754760)
(gdb) where
#0  0xa405ca38 in memcpy (5572018, -1073754760)
#1  0x428b3c in read_attr_value (dir_name=0xbfffdcf4, 
    name=0x736c6500<Address 0x736c6500 out of bounds>, value=0xbfffd720, 
    attrvalue=0xbfffd71c, type=cdsDir, clr_name=0x0)
    at /project/dce/build/dce1.1/src/admin/dcecp/cdscp_utils.c:2624
#2  0x424671 in directory_show (clientData=0xa405ca24, interp=0x476008,
argc=2, 
    argv=0xbfffe23c) at
/project/dce/build/dce1.1/src/admin/dcecp/cdscp.c:1149
#3  0x402383 in dcp_directory (clientData=0x0, interp=0x476008, argc=2,
argv=0xbfffe23c)
    at /project/dce/build/dce1.1/src/admin/dcecp/commands.c:1166
#4  0x444d53 in Tcl_Eval (4677640, -1073748928)
#5  0x4531b9 in Tcl_UplevelCmd (0, 4677640, 2, -1073748996)
#6  0x444d53 in Tcl_Eval (4677640, -1073748066)
#7  0x451ff3 in TclParseNestedCmd (4677640, -1073748066, 0, -1073748548,
-1073748504)
#8  0x4523cd in TclParseWords
    (4677640, -1073748074, 0, 8, -1073748548, -1073748552, -1073748544,
-1073748504)
#9  0x444ab7 in Tcl_Eval ()
#10 0x44692e in Tcl_IfCmd (0, 4677640, 3, -1073748164)
#11 0x444d53 in Tcl_Eval ()
#12 0x44692e in Tcl_IfCmd (0, 4677640, 3, -1073747784)
#13 0x444d53 in Tcl_Eval (4677640, 5200152)
#14 0x453560 in InterpProc (5186600, 4677640, 3, -1073747220)
#15 0x444d53 in Tcl_Eval ()
#16 0x450616 in Tcl_RecordAndEval (4677640, -1073745660, 0)
#17 0x400575 in main (argc=0, argv=0xbffff1fc)
    at /project/dce/build/dce1.1/src/admin/dcecp/main.c:338

[4/8/94 public]
I have been unable to duplicate this problem. I think this may be a
situation of code skew.

[4/19/94 public]
I can't reproduce either.  If you can't John, please cancel this bug.

[4/22/94 public]
This only happened when Intercell was broken. I can't reproduce it anymore.
Cancelled.



CR Number                     : 10242
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : missing file on cmd line gives bad message
Reported Date                 : 3/29/94
Found in Baseline             : 1.1b5
Found Date                    : 3/29/94
Severity                      : D
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[3/29/94 public]
You get a bad message when you specify a bogus file to execute from the
command line:

    % dcecp bogus-file
    1322151 SEC_RepUUID 1.3.22.1.5.1couldn't read file "bogus-file": \
    No such file or directory

(FYI, "dcecp /dev/null" is happy.)

[4/20/94 public]
canceled, seems to be fixed now.  Re-open if it appears.



CR Number                     : 10222
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : aud
Short Description             : auditcp checks for
authentication. Should be left to the server.
Reported Date                 : 3/24/94
Found in Baseline             : 1.1
Found Date                    : 3/24/94
Severity                      : C
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[3/24/94 public]
auditcp checks to see if the user is authenticated. The cp should be
changed to let the unauthneticaed calls pass to the server. The server
should be modifed to handle unauthenticated users correctly.

[7/6/94 public]
auditcp is defuncted, so changed component to dcecp.

[7/7/94 public]
Seeing that I opened this in the first place, I made sure that 
dcecp did the right thing. Cancelled.



CR Number                     : 10189
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa, i486
S/W Ref Platform              : hpux, osf1
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : the "directory show
<dir-name>" core dumps when the <dir-name> does not exit.
Reported Date                 : 3/20/94
Found in Baseline             : 1.1
Found Date                    : 3/20/94
Severity                      : A
Priority                      : 0
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[3/20/94 public]

Using NB from 03/17/94

The dcecp command "directory show /.:/sales" core dumps if the 
directory /.:/sales does not exist.

Example:

On the 486: ( directory /.:/sales does not exits)

dcecp>  directory show /.:/sales
Memory fault(coredump)
root@barbados>

On HP:

dcecp> directory show /.:/oscar
Memory fault(coredump)
bronze dassarma$

dcecp> object show  /.:/sales/*    (directory /.:/sales does not exist)
Memory fault(coredump)

[3/23/94 public]
This is essentially a bogus failure. That is, all error conditions
encountered within the cds portion of dcecp caused indeterminate 
failures. This is because the DEC drop of the cds cleanup/I18N 
code caused the error returns from the cdspi to be broken. DEC has 
fixed the error return problem and the dcecp failures have 
been eliminated as a result.



CR Number                     : 10175
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa,rs6000
S/W Ref Platform              : hpux,aix
Component Name                : dcecp
Subcomponent Name             : admin/dcecp/scripts
Short Description             : build_all not made
Reported Date                 : 3/18/94
Found in Baseline             : 1.1
Found Date                    : 3/18/94
Severity                      : A
Priority                      : 0
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : dcecp
Sensitivity                   : public

[3/18/94 public]

Although the onlyerror message is about "build_all" failing, since
we are cleaning up to cut a baseline and other bugs that may've
caused this error as a side effect have been fixed, I'm filing an
OT now.

Here are samples of the warnings and the error message itself:

[ /admin/dcecp/scripts at 00:52 (AM) Friday ]

cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/parseargv.c", line 250: \
  warning 530: Casting from loose to strict alignment. 

cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rpccp.c", line 148: \
  warning 700: ANSI migration: large unsuffixed integer constants will not \
  be of type long in ANSI mode.

cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy.c", line 200: warning \
  509: If clause always executed.

cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 1015: \
  warning 508: Statement not reached.

cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/aud_ops.c", line 856: \
  warning 604: Pointers are not assignment-compatible.

....

/usr/shlib -L/project/dce/build/dce1.1-snap/export/hp800/usr/shlib \
 -L/usr/shlib -L/u3/devobj/sb/nb_ux/export/hp800/usr/lib \
 -L/project/dce/build/dce1.1-snap export/hp800/usr/lib   -o \
 dcecp.X main.o commands.o parseargv.o dcedcpsvc.o dcedcpmsg.o  rpccp.o \
 rgy.o rgy_utils.o  acl_tclif.o acl_edit.o aud_ops.o aud_util.o \
 audit_control_cstub.o  util_general.o util_help.o util_login.o \
 util_signal.o util_var.o cdscp.o cdscp_object.o cdscp_link.o cdscp_utils.o \
 cdscp_clearinghouse.o cdscp_cache.o cprpc_clerk_cstub.o cprpc_server_cstub.o \
 dts_ops.o dts_util.o clock.o dts_arith.o dtss_ctrl_cstub.o -lcdscache \
 -laudit -ldce -ltcl -lm  -ldbm -lM
mv dcecp.X dcecp
`build_all' not remade because of errors.
*** Error code 1
`build_all' not remade because of errors.

[3/18/94 public]
These are not errors in libtcl.  Note that the messages are "warnings" not
"errors" and that dcecp was built.  I'm sure the 

   `build_all' not remade because of errors.

Is a summary message from other errors in this pass (BASIC) from other
directories and that this is a summary message printed at the end of the
pass, which is admin/dcecp/scripts.  Look for other errors in the build.

[3/18/94 public]
cancelled.  this was a summary error from the rpc errors.



CR Number                     : 10174
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa,rs6000
S/W Ref Platform              : hpux,aix
Component Name                : dcecp
Subcomponent Name             : admin/tcl_dce
Short Description             : `build_all' not remade because of errors.
Reported Date                 : 3/18/94
Found in Baseline             : 1.1
Found Date                    : 3/18/94
Severity                      : A
Priority                      : 0
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : libtcl.a
Sensitivity                   : public

[3/18/94 public]

Since we wqant to clean up the releae and cut a baseline, and since
this error no longer seems linked to bugs that have been fixed, I am
logging it with an OT.  Aside from woarnings, the only complaint is:

[ /admin/tcl_dce ]

ar crl libtcl.a panic.o regexp.o tclAsync.o tclBasic.o tclCkalloc.o \ 
 tclCmdAH.o tclCmdIL.o tclCmdMZ.o tclEnv.o tclExpr.o tclGet.o tclGlob.o \
 tclHash.o tclHistory.o tclLink.o tclMain.o tclMtherr.o tclParse.o tclProc.o \
 tclUnixAZ.o tclUnixStr.o tclUnixUtil.o tclUtil.o tclVar.o \
rm -rf /u3/devobj/sb/nb_ux/export/hp800/usr/lib/libtcl.a
makepath /u3/devobj/sb/nb_ux/export/hp800/usr/lib/libtcl.a
(cd .; tar cfh - libtcl.a) |  (cd /u3/devobj/sb/nb_ux/export/hp800/usr/lib; \
  tar xf -)
`build_all' not remade because of errors.

The warnings are of 3 kinds, nonzero loop conditions, casting and ANSI
migration.  Examples:

cc: "/project/dce/build/dce1.1-snap/src/admin/tcl7.3/tclUnixUtil.c", line \
  1331: warning 538: While loop condition is always non-zero.

cc: "/project/dce/build/dce1.1-snap/src/admin/tcl7.3/tclUtil.c", line 1082: \
  warning 530: Casting from loose to strict alignment

cc: "/project/dce/build/dce1.1-snap/src/admin/tcl7.3/tclUtil.c", line 1336: \
  warning 700: ANSI migration: large unsuffixed integer constants will not \
  be of type long in ANSI mode.

[3/18/94 public]

Corrected "responsible engineer" assignment.

[3/18/94 public]

Added RIOS to platforms affected.

[3/18/94 public]
Note that all the "errors" are in fact "warnings" and that the tcl library
was infact built.  I bet the 

  `build_all' not remade because of errors.

line refers to other errors in the pass in previous directories.  They just
should up here as a summary since tcl_dce is last directory visited in the
EXPLIB pass.

Look for other errors that were generated.

[3/18/94 public]

Corrected "subcomponent name" field.

[3/18/94 public]

Corrected "component" field by reassigning to "dcecp".

[3/18/94 public]
cancelled.  summary error from rpc errors.



CR Number                     : 10127
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : principal commands returned "Registry object not found" on existing principal
Reported Date                 : 3/11/94
Found in Baseline             : 1.1
Found Date                    : 3/11/94
Severity                      : C
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[3/11/94 public]


dcecp> acl sh  /.:/sec/principal/acl_modify_005_N
{unauthenticated r-------g}
{user_obj r---f--ug}
{user cell_admin rcDnfmaug}
{group acct-admin rcDnfmaug}
{other_obj r-------g}
{any_other r--------}
dcecp> prin sh /.:/sec/principal/acl_modify_005_N
Error: Registry object not found
dcecp> prin create /.:/sec/principal/acl_modify_005_N
Error: Name already exists
dcecp> prin delete  /.:/sec/principal/acl_modify_005_N
Error: Registry object not found
dcecp> rgy_edit
Current site is: registry server at /.../ice_cell.osf.org/subsys/dce/sec/master 
rgy_edit=> do p
Domain changed to: principal
rgy_edit=> v
acl_modify_005_N                           12338
rgy_edit=> del acl_modify_005_N
Please confirm delete of name "acl_modify_005_N" [y/n]? (n) y
rgy_edit=> q

[3/11/94 public]
My mistake.  I should enter the command as follows:
dcecp> prin show acl_modify_005_N
dcecp> prin delete acl_modify_005_N

[3/11/94 public]
You should still be able to delete a principal with a path. This is needed
in the intercell case.

[3/11/94 public]
I canceled this for two reasons. In one respect it is simply a duplicate 
of OT#10033. However, the principal name
/.:/sec/principal/acl_modify_005_N
is an illegal principal name.

[3/11/94 public]
I agree with the cancel, but not quite with illegal.  If you have a
principal name called /.:/sec/principal/foo, you would modify its ACL by
the name /.:/sec/principal/sec/principal/foo.



CR Number                     : 10010
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : Lists of lists parsing problem.
Reported Date                 : 2/24/94
Found in Baseline             : 1.1
Found Date                    : 2/24/94
Severity                      : C
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[2/24/94 public]

According to Functional spec, unnecessary braces should be ignored.
This should work, but doesn't:

dcecp> dir sh /.:/jastest4
{CDS_Convergence medium}
dcecp> dir mod $n -change {{{CDS_Convergence low}}}
Error: The attribute list must contain pairs of entries {attribute value}

________________________________
This works:

dcecp> dir mod $n -change {CDS_Convergence low}
dcecp> dir sh $n
{CDS_Convergence low}

[2/24/94 public]

This will require changes to dcp_parseArgv so that extraneous braces
are stripped off. This will allow the individual command code to 
be designed to just handle significant levels of braces making
parsing much easier.

[3/19/94 public]
It was decided that mucking with the user's input was a bad idea. This CR
has been cancelled, and the function spec has been changed. Creating a list
with extra levels of braces is invalid.



CR Number                     : 9988
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa,rs6000
S/W Ref Platform              : hpux,aix
Component Name                : dcecp
Subcomponent Name             : admin/dcecp/scripts
Short Description             : function call argument cannot
be assigned to corrsponding parameter.
Reported Date                 : 2/22/94
Found in Baseline             : 1.1
Found Date                    : 2/22/94
Severity                      : A
Priority                      : 0
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : audit_control_cstub.c,dtss_ctrl_cstub.c
Sensitivity                   : public

[2/22/94 public]

Are these errors related to OT 9987 (bug in rpc/idl/klib)?

Complaint in "admin/dcecp/scripts" is:

	Function call argument cannot be assigned to corresponding parameter.

[2/22/94 public]
Huh?  Can you cut and paste the log.  There is nothing in this directory
that gets built aside from one file and it is a script that just gets
copied to the obj tree and then installed.  Here is the whole Makefile:

   IDIR            = /dcecp/
   
   SCRIPTS         = attr_eval.tcl
   
   ILIST           = ${SCRIPTS}
   
   .include <${RULES_MK}>

Was a build done with NPROC > 1?  That would explain an error showing up in
an unrelated place in the build log.

[2/22/94 public]
Cancelled.  This was just a summary error due to a failure when building
libidl.  libtcl just happens to be the last library built in this pass, so
the summary error looks like it failed in this library.  But there are no
errors in libtcl and it built fine on both HP and RIOS.



CR Number                     : 9950
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : Error messages need cleanup
Reported Date                 : 2/14/94
Found in Baseline             : 1.1
Found Date                    : 2/14/94
Severity                      : C
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[2/14/94 public]

There are a number of problems with the dcp.sams file messages.  In some
cases the errors require further elaboration.  In other cases, sml coding
needs to be added in the explanation and action fields.  A complete list of
the suggested changes has been given to Howard Melman.

[3/9/94 public]
Will be addressed with individual CR's for each area:

   acl: CR 10111
   dts: CR 10112
   cds: CR 10113
   rgy: CR 10114



CR Number                     : 9891
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : tcl_dce
Short Description             : dcecp does not understand
command abbreviations on the rios.
Reported Date                 : 2/4/94
Found in Baseline             : 1.1
Found Date                    : 2/4/94
Severity                      : B
Priority                      : 2
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[2/4/94 public]

On the RIOS, command abbreviations are not not understood.

dcecp> dir list /.:
Error: invalid command name: "dir"
dcecp> directory list /.:
/.:/hosts /.:/subsys /.:/cell-profile /.:/fs /.:/lan-profile /.:/sec
/.:/sec-v1 /.:/sif_ch

This is most likely a problem in tcl. I'm looking into it.

[2/4/94 public]

This problem was caused by tcl not being installed on mudslide. The unknown
proc is the one that allows command abbreviations. The unknown proc is
found in the init.tcl file, which was not installed.



CR Number                     : 9863
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cdscp
Short Description             : cdscp.c needs "dce/" prefix
for dnsclerk.h, dnsmessage.h and cprpc.h .
Reported Date                 : 1/31/94
Found in Baseline             : 1.1
Found Date                    : 1/31/94
Severity                      : B
Priority                      : 1
Status                        : cancel
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 
Affected File(s)              : 
Sensitivity                   : public

[1/31/94 public]

In order to get dcecp to build in the nightly build, cdscp.c must be
changed to reference dnsmessage.h, dnsclerk.h and cprpc.h with a "/dce"
prepended to them.

[2/3/94 public]

This turns out not to be required to get dcecp to build. Cancelled.



