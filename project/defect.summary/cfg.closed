CR Number                     : 13267
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce_shutdown
Short Description             : Problem when dce_shutdown attempts to kill secd
Reported Date                 : 12/28/95
Found in Baseline             : 1.2.1
Found Date                    : 12/28/95
Severity                      : B
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : dce_shutdown
Sensitivity                   : public

[12/28/95 public]

dce_config has a problem 'stopping' secd and requires a kill -9
to achieve the desired result.  There are several system tests
(notably svccfg* series) which react to the error generated by this
return.  A kill -9 should be handled by dce_shutdown.

[2/2/96 public]
There were many fixes done to dce_config and related files. I have 
been able to shutdown secd in a single machine cell environment without
any problems. Since, exact scenarios of this problem is not clear
I am considering this defect closed.



CR Number                     : 12417
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 12159
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : Remove workaround from dce_config once 12159 is fixed.
Reported Date                 : 9/29/94
Found in Baseline             : 1.1b19
Found Date                    : 9/29/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.2.1
Affected File(s)              : dce_config
Sensitivity                   : public

[9/29/94 public]

Once Sec OT 12159 is fixed and submitted, remove the acl_edits put into 
dce_config routine dts_rgyinit() to workaround problem.

[12/20/95 public]
Since 12159 has been fixed and should be in DCE 1.2.1
this is being closed.



CR Number                     : 12402
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 12267
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : (rgy_edit) Unable to add principal - bad state
Reported Date                 : 9/29/94
Found in Baseline             : 1.1
Found Date                    : 9/29/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : dce_config
Sensitivity                   : public

[9/29/94 public]

platform - HPUX
test machine - budapest

Multi-machine smoketest failed.

extract from /u1/RAT_tools/do_test.dfs.log

S:****** Configuring additional CDS Server...
S:****** Checking for active sec_client service...
S:****** Starting cdsd...
ERROR:   rgy_edit - adding CDS Server principals.
           Message from rgy_edit:
           Current site is: registry server at
         /.../sif_cell/subsys/dce/sec/master
         Domain changed to: principal
         ?(rgy_edit) Unable to add principal  "hosts/budapest/cds-server" - bad
         state (dce / sec)
         Domain changed to: account
         ?(rgy_edit) Unable to add account "hosts/budapest/cds-server" -
         Principal does not exist (Registry Edit Kernel) (dce / sad)
         bye.

[9/29/94 public]

Here's a guess.

The master secd is busy initializing a security slave, and therefore
is in a read-only state when the attempt to add the new cds server
principal to the database occurs.  I believe the same error would be
returned if you happened to cacth the master checkpointing its 
database, but that doesn't happen until 2 hours after server boot,
so I doubt that would be the problem here.

If my hypothesis is correct, then I guess we need some dcecp
magic in dce_config to either force a wait until the master security
server is back in service, or tell the administrator to try again
later.  Any dcecp experts out there wanna take a crack at this one?

[9/29/94 public]
When I tried to reproduce to12267, I hit this bug three times, which means
it happened randomly comparing  to "unable to add key".  I forgot to mention
this in OT12267 fix to remind Tom to watch this one out.  I also don't know
what really "dcecp -c registry verify" does for you and whether it does
the right thing or not.  In my fix, "sleep 60" does fix the problem.  I also
understand "sleep 60" is too long for some fast machine.  Now we need to get
replica and dcecp experts involved to figure this one out. 

Assign this one to me for now to supply more information.  I might make this
one as dup of ot12267 later on.

[9/29/94 public]
Greg's (also mine) hypothesis is correct.  I double checked with Liza:
When master is initializing a slave (coping its db to slave), it will reject
any update.  But it will accept update when it's propagating the update to
salves.  So the key to solve this problem is to make dcecp do the right thing
(make dce_config wait longer).

Assign this to dup of 12267.

[9/29/94 public]
I'm willing to help on this.  To provide info: the "registry verify"
command is just a script that looks at each replica in the cell and looks
at the lastupdtime to make sure that the replicas are up-to-date with the
master.  It does not block, but you can write (in pseudo):
  while !registry verify 
    sleep

[9/29/94 public]
This isn't a dup, since there is *another* timing issue here
which my fix for 12267 doesn't address.

The error is occurring before we do a registry verify, when
the cds replica config is adding the server principal.
Adding the sleep Sue talks about would be after this rgy_edit command.

So we can do one of two things (both similar):

	- When configuring a replica registry, don't exit
	  the config routine till registry verify says its OK

	- Before doing the rgy_edits to add the cds principal,
	  make sure we do another registry verify.

I am leaning toward the first solution, since it makes sure there
wont be any problems with whatever else you might configure right
after a security replica, not just CDS.

[9/29/94 public]

I'd lean toward the second solution, and do it before configuring
any additional non-security servers.  Why?  Because you might be
simultaneously configuring a secd replica on machine A, and some
some other core service on machine B.  The configuration of the
secd replica om machine A might take the security master temporarily
out of service, and blocking the dce_config on machine A won't
help you on machine B.

[9/29/94 public]
I remember my fix for ot12267 is that before add cds-server principal
it sleeps 60 to wait for replica to be initialized, then before do ktadd,
it checks to see if the propagation is back.  I think the second solution
is more in line with my fix which works.

[9/29/94 public]
There a many places where we do rgy_edits in configuration, and
doing a registry verify is a big lose if you didn't just config
a security replica, not to mention might get you in trouble if
one of you registries was down.

Anyway, at this late stage I decided to verify the registry
right after creating a replica.  This will prevent the timing
problems we are seeing in the smoketests, and most other.
It wont prevent someone from seeing strange problems if they
are configuring other machines at the same time as a replica.
Oh well, dce_config was never *that* bullet proof!

Fix submitted.

[10/18/94 public]
Everything seems to work now.
Closed.



CR Number                     : 12351
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : 
Short Description             : merge lines in dce_config
Reported Date                 : 9/27/94
Found in Baseline             : 1.1b19
Found Date                    : 9/27/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : config/dce_config
Sensitivity                   : public

[9/27/94 public]
There are merge lines in dce_config that need to be taken out:


echo "*****************************************************************" >>$logfile
<<<<<<< 1.2.56.28
echo "dce_config V$Revision: 1.4 $($Date: 94/10/18 14:39:38 $) executed: `date`" >>$logfile 
======
echo "dce_config V$Revision: 1.4 $($Date: 94/10/18 14:39:38 $) executed: `date`" >>$logfile 
>>>>>>> 1.2.60.2
echo "*****************************************************************" >>$logfile

[9/27/94 public]
This bug was noticed in the core tests in the RAT build as well.
We are picking Melman's fix and testing again.

[9/27/94 public]
Submitted the above fix.

[10/18/94 public]
Fixed and Closed.



CR Number                     : 12267
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000,i486
S/W Ref Platform              : aix,osf1
Component Name                : cfg
Subcomponent Name             : 
Short Description             : Unable to add key
Reported Date                 : 9/20/94
Found in Baseline             : 1.1
Found Date                    : 9/20/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : dce_config
Sensitivity                   : public

[9/20/94 public]

The multimachine smoke test failed on mudslide(RIOS).  It had passed on
budapest(HPUX) which is the dfs server.

The extract from do_test.dfs.log ( on mudslide in the directory
/u1/RAT_tools) follows:

S:****** Starting cdsadv...
        Modifying acls on /.:/sec/replist ...
        Modifying acls on /.:/subsys/dce/sec ...
        Modifying acls on /.:/sec ...
        Modifying acls on /.: ...
        Modifying acls on /.:/cell-profile ...
                start slave security server (secd) ...


S:****** Configuring additional CDS Server...
S:****** Checking for active sec_client service...
S:****** Starting cdsd...
ERROR:   rgy_edit - adding CDS Server principals.
  Message from rgy_edit:
  Current site is: registry server at /.../sif_cell/subsys/dce/sec/master
Domain changed to: principal
Domain changed to: account
?(rgy_edit) Unable to add key - Registry object not found (dce / sec)
?(rgy_edit) Unable to add key - Requested key is unavailable (dce / sec)
bye.
        Press <RETURN> to continue, CTRL-C to exit: S:****** Initializing the na
me space for additional CDS server...
        Modifying acls on /.:/hosts/mudslide/cds-server
        Modifying acls on /.:/hosts/mudslide/cds-gda

[9/20/94 public]
Here is some more information on machine configuration.
sif (486) - sec and cds master.
budapest (HP) - sec replica, cds replica.
mudslide (RIOS) - sec replica configured ok, trying to configure cds replica.

The principal and account were created successfully for
hosts/mudslide/cds-server according to rgy database.
rgy_edit=> do a
Domain changed to: account
rgy_edit=> v
nobody [nogroup none]:*:-2:-2::/::
root [system none]:*:0:0::/::
daemon [daemon none]:*:1:1::/::
uucp [uucp none]:*:4:2::/usr/spool/uucppublic:/usr/lib/uucp/uucico:
bin [bin none]:*:3:3::/bin::
dce-ptgt [none none]:*:20:12::/::
dce-rgy [none none]:*:21:12::/::
krbtgt/sif_cell [none none]:*:22688:12::/::
cell_admin [none none]:*:100:12::/::
hosts/sif/self [none none]:*:22689:12::/::
hosts/sif/cds-server [subsys/dce/cds-server none]:*:22690:2104::/::
hosts/budapest/self [none none]:*:22694:12::/::
hosts/budapest/cds-server [subsys/dce/cds-server none]:*:22695:2104::/::
hosts/budapest/dfs-server [subsys/dce/dfs-admin none]:*:22696:2108::/::
hosts/mudslide/self [none none]:*:22697:12::/::
hosts/mudslide/cds-server [subsys/dce/cds-server none]:*:22698:2104::/::

During ktadd -p hosts/mudslide/cds-server -pw <not shown>, the rgy_edit
failed.

root@mudslide> rgy_edit
Current site is: registry server at /.../sif_cell/subsys/dce/sec/mudslide
(read-only)
rgy_edit=> ktlist
/.../sif_cell/hosts/mudslide/self               1
/.../sif_cell/hosts/mudslide/self               2

root@mudslide> sec_admin
Default replica:  /.../sif_cell/subsys/dce/sec/mudslide
Default cell:     /.../sif_cell
sec_admin> lrep -all
Default replica:  /.../sif_cell/subsys/dce/sec/mudslide
Default cell:     /.../sif_cell
WARNING: The default replica is not the master registry.
         Propagation information will not be displayed


subsys/dce/sec/budapest
          Instance id:             824dd966-d474-11cd-beac-080009253315
          Addresses:               ncacn_ip_tcp:130.105.5.88[]
                                   ncadg_ip_udp:130.105.5.88[]
          State:                   in service - slave
          Last update received at: Tue Sep 20 08:54:42 1994
          Last update's seqno:     0.241

subsys/dce/sec/master (master)
          Instance id:             95b22bf2-d455-11cd-aae2-0000c0c74944
          Addresses:               ncacn_ip_tcp:130.105.5.25[]
                                   ncadg_ip_udp:130.105.5.25[]
          State:                   in service - master
          Last update received at: Tue Sep 20 08:54:42 1994
          Last update's seqno:     0.241

subsys/dce/sec/mudslide
          Instance id:             e3e6a784-d479-11cd-bef3-02608c2ff62e
          Addresses:               ncacn_ip_tcp:130.105.5.85[]
                                   ncadg_ip_udp:130.105.5.85[]
          State:                   in service - slave
          Last update received at: Tue Sep 20 08:54:42 1994
          Last update's seqno:     0.241
sec_admin> quit

[9/20/94 public]
Reassigned to IBM.

[9/21/94 public]
This problem was observed again today.

[9/21/94 public]

(Should this CR still be assigned to IBM?)

I do not believe this problem is strictly a RIOS one. 
Using the NB, I had the same problem configuring an 
"Additional CDS Server" on an OSF1 machine. However, 
the same operation was successful on an HP-UX. The 
CDS server, on both cases, had been configured on a 
RIOS.

To complement the information given in the first entry
of this CR, I am adding the pertinent lines from dce_config.log.

S:****** Starting cdsd...
V:         Adding CDS Server principals to this node.
D:         Executing: rgy_edit> domain principal
D:         Executing: rgy_edit> add hosts/barbados/cds-server
D:         Executing: rgy_edit> domain account
D:         Executing: rgy_edit> add hosts/barbados/cds-server -g
subsys/dce/cds-server -o none -pw <not shown> -mp <not shown>
D:         Executing: rgy_edit> ktadd -p hosts/barbados/cds-server -pw <not
shown>
D:         Executing: rgy_edit> ktadd -p hosts/barbados/cds-server -a -r
D:         Executing: rgy_edit> quit
DEBUG:     Executing: chk_rgy_edit(rgy_edit - adding CDS Server
principals.)
DEBUG:     Executing: err_exit(rgy_edit - adding CDS Server principals.
  Message from rgy_edit:
  Current site is: registry server at
/.../almostbl19_cell/subsys/dce/sec/master 
Domain changed to: principal
Domain changed to: account
?(rgy_edit) Unable to add key - Registry object not found (dce / sec)
?(rgy_edit) Unable to add key - Requested key is unavailable (dce / sec)
bye.)
ERROR:   rgy_edit - adding CDS Server principals.
  Message from rgy_edit:
  Current site is: registry server at
/.../almostbl19_cell/subsys/dce/sec/master 
Domain changed to: principal
Domain changed to: account
?(rgy_edit) Unable to add key - Registry object not found (dce / sec)
?(rgy_edit) Unable to add key - Requested key is unavailable (dce / sec)
bye.

[9/21/94 public]
Since this problem happened on 486 also (during additional CDS server
configuration) as above info indicates, this is not a RIOS-only bug.
This CR is re-assigned to HP.

[9/26/94 public]
NOTE: The multi-machine smoke tests passed on HPUX and 486 for last night's
build, so should we assume that this isn't a problem on the 486 anymore and
only happens on the RIOS?

[9/26/94 public]
After many tries, I was finally able to reproduce it here.  Thanks for Greg's 
help, from reading the code, we found out that the secd ktadd talking to is the
local one.  The problem is that when ktadd issued, cds_server account hadn't been
propagated back to the slave yet. The fix is either do some sleep after
account added or use rgy_edit to check if cds-server account is propagated back
to local site.  I am still experimenting the choices.

Assigned to dce_config.

Another choice is have dcecp use sec_rgy_wait_until_consistent() to
check the consistency of sceds.

[melman 9/26/94 public] 
Actually there is a dcecp command "registry verify" that does essentially
what sec_rgy_wait_until_consistent() does.  It's a dcecp script that loops
through all the replicas and checks the last update time.  It returns the
names of all replicas that are out-of-date or cannot be contacted.  The
dcecp "registry synchronize" command can be used to causes the specified
replica to reinitialize itself with an up-to-date copy of the database.

[9/27/94 public]
Since dce_config still using rgy_edit, sec_rgy_wait_until_consistent() won't
solve the current problem.  I modify dec_config to wait for cds-server
account showing up in the slave's sec DB, then do ktadd. 
Change owner to osf.

 diff -C1 ~/bin/dce_config /project/dce/build/dce1.1/src/config/dce_config
*** /net/color/d2/cuti/bin/dce_config Tue Sep 27 10:40:09 1994
--- /project/dce/build/dce1.1/src/config/dce_config  Tue Sep 27 08:33:12 1994
***************
*** 7138,7166 ****
  add hosts/$HOSTNAME/cds-server -g $SUBSYSDIR/cds-server -o none -pw $cellpw -mp $cellpw
- EOF
- 
-         rgy_edit_status=$?
-         chk_rgy_edit "rgy_edit - adding CDS Server principals."
- 
-         # Wait for replica to start up. Or use sec_admin to check replica.
-         sleep 60
-         
-         # wait for hosts/$HOSTNAME/cds-server to appear in the replica site.
-         AGAIN=0
-         while [ $AGAIN -eq 0 ]
-         do
-             rgy_edit >/tmp/rgy_edit_out 2>&1 <<EOF
-site /.:/subsys/dce/sec/$sec_replica_name
-do a
-v
-EOF
- 
-             grep "$HOSTNAME/cds-server" /tmp/rgy_edit_out > /dev/null
-             if [ $? -eq 0 ]
-             then
-                 AGAIN=1
-             fi
-             echo AGAIN
- 
-         done
- 
-         rgy_edit >/tmp/rgy_edit_out$$ 2>&1 <<EOF
  ktadd -p hosts/$HOSTNAME/cds-server -pw $cellpw
--- 7138,7139 ----

[9/27/94 public]
For the record.  From my many different combinations' tests, my experience is:

1.  If all of the nodes (three) in the same network (lan), I won't get this bug
    at all, either on the same platform or different platforms (osf1 and hpux).

2.  In the early morning when not too many people in the network, I would'nt
    get this bug even if three machines on three different platforms and 
    different networks.

3.  As the day progresses, it took longer time to get propagation to replicas.

So why it's slow.  It depends a lot on how busy the traffic is in my experiment.

I had the workaround as described in the previous update.  I know it's not
the ideal one, is only an example. Since OSF is the expert on dce_config,  
I assigned it to them.

[9/27/94 public]
Took Sues idea and used the dcecp registry verify command/script:

        chk_rgy_edit "rgy_edit - adding CDS Server principals."

        # If there are security replicas, we must wait till they are
        # up to date before doing keytab update.
        log_msg SUMMARY "Waiting for registry propogation..."
        log_msg DETAIL "Executing: dcecp -c registry verify"
        not_uptodate=`dcecp -c registry verify`
        while [ ! -z "$not_uptodate" ]
        do
                sleep 5
                log_msg DETAIL "Executing: dcecp -c registry verify"
                not_uptodate=`dcecp -c registry verify`
        done

        log_msg DETAIL "Executing: rgy_edit> ktadd -p hosts/$HOSTNAME/cds-server
 -pw <not shown>"
        log_msg DETAIL "Executing: rgy_edit> ktadd -p hosts/$HOSTNAME/cds-server
 -a -r"
        rgy_edit -update >/tmp/rgy_edit_out$$ 2>&1 <<EOF
ktadd -p hosts/$HOSTNAME/cds-server -pw $cellpw
ktadd -p hosts/$HOSTNAME/cds-server -a -r
quit
EOF
        rgy_edit_status=$?
        chk_rgy_edit "rgy_edit - Adding CDS server keytab."

QUESTION TO SECURITY: why does the rgy_edit -update force *all*
operations, including the ktadd, to use the master registry server?
I believe it should.

[9/28/94 public]
ktadd does two operations:  lookup secd to get the key version and add key to
the local key table.  The operation to lookup secd uses default secd, which
means local secd or any available secd by random choice.  Since it's only
doing a read, the API doesn't bother to have you specify the site name, which
is ok for most of the situations but not ok for this.  Fortunately, there is
simple fix for this bug.  Therefore I don't think we are going to address this
in further API change.

[10/18/94 public]
The config changes, at least, are working.
closed.



CR Number                     : 11960
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : gda config should add gda-server principal.
Reported Date                 : 8/30/94
Found in Baseline             : 1.1b16
Found Date                    : 8/30/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : dce_config, dce.unconfig
Sensitivity                   : public

[8/30/94 public]

I removed the cds-server principal and the gda principal for
clients, but we need to create the gda principal when configuring
a gda server.

The dce.unconfig should check for both the cds-server and gda
principals and remove them if they exist.

[8/31/94 public]
I am thinking of making this a doc bug and changing the config chapter
to say that you should configure GDA on your CDS server machine.

As it stands now, dce_config does not correctly configure a gdad
on a client machine.  It might take a bit of work to fix this...
I guess this is why the principals were create for both server and client.

[9/15/94 public]
I have isolated all gda configuration (including the cds.conf line)
to config_gda().  This makes it simple to configure a gdad on
any machine in the cell.



CR Number                     : 11959
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : 
Short Description             : dce_config checks for presence of sec_clientd before starting gdad
Reported Date                 : 8/30/94
Found in Baseline             : 1.1b16
Found Date                    : 8/30/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b17
Affected File(s)              : dce_config
Sensitivity                   : public

[8/30/94 public]

Using bl16.2, I setup a core server node with SEC_CLIENT defined
as "dced" so that sec_clientd would not be brought up. When
I use dce_config to configure gdad, I get the error 

 ERROR:   Node must be configured as a client before installing a GDA server.  
	  Continuing will return to the Additional Server Configuration Menu.

dce_config is checking for a process containing the string "sec_clie"
on line 5979.



CR Number                     : 11945
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : security audit ec files
Short Description             : security audit ec files are not being installed
Reported Date                 : 8/29/94
Found in Baseline             : 1.1b16
Found Date                    : 8/29/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : dce_config
Sensitivity                   : public

[8/29/94 public]

The security ec files are not being installed to the /opt/dcelocal/etc/audit/ec
directory.

[9/23/94 public]
Copied the entire directory of ec files.

[10/18/94 public]
In and working.
Closed.



CR Number                     : 11917
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : admin_gd
Short Description             : dce_config unconfigure client
is broken
Reported Date                 : 8/26/94
Found in Baseline             : 1.1b16
Found Date                    : 8/26/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1doc
Affected File(s)              : admin_gd/overview/overview/8.1_managing.gpsml
Sensitivity                   : public

[8/26/94 public]

This is not a bug but somewhere (release Notes?) it needs 
to be documented that the 1.0.3 dce_config option to unconfigure
a client fails if the client is running DCE 1.1

Here is the example output:

        Enter hostname of node to be unconfigured: (thread) needle


        Unconfiguring a node will remove the node's ability
        to operate in the cell.  A reconfiguration of the
        node will be required.
        Do you wish to continue (y/n)? (n) y
S:****** dce.unconfig: Deleting client registry entries.
S:****** dce.unconfig: Deleting client CDS entries.
ERROR:   dce.unconfig: cdscp error while deleting client CDS entries.
           Message from cdscp:
           delete object /.:/hosts/needle/profile
         delete object /.:/hosts/needle/cds-clerk
         delete object /.:/hosts/needle/dts-entity
         delete object /.:/hosts/needle/self
         delete directory /.:/hosts/needle
         Error on entity: /.../comp1_cell/hosts/needle
         Directory must be empty to be deleted (dce / cds)
         Function: dnsDelDir
         
         set directory /.:/hosts to skulk
        Press <RETURN> to continue, CTRL-C to exit: 
ERROR:   Failed to unconfigure host node needle from cell.

If this is not important to mention, feel free to cancel this
CR.

[8/26/94 public]
I just got these same messages when trying to unconfigure
my nodes from my 1.1 bl-16 cell.  So I don't think it's related
to 1.0.3/1.1 interoperability.

[8/26/94 public]

Corrected the description line and upgraded the priority since
we use this option a lot.

[8/26/94 public]
The latest (8/26) version of dce.unconfig correctly removes the
hosts/<hostname>/config entry, which is put there by dced.
This should prevent unconfig errors in 1.1.

You should always use 1.1 tools when dealing with a 1.1 machine.
No harm telling people that in the docs, which is why I lower the
priority and set this to be a doc bug.

[08/30/94 public]
Assigned to writer Susan Teto (dce_config doc owner).

[10/11/94 public]
Added a paragraph to beginning of the file saying to use DCE R1.1 admin.
programs only.

[10/27/94 public]
Closed bug.



CR Number                     : 11891
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : rc.dce
Short Description             : rc.dce not getting properly
updated for sec_clientd on config
Reported Date                 : 8/25/94
Found in Baseline             : 1.1b16
Found Date                    : 8/25/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : dce_config
Sensitivity                   : public

[8/25/94 public]

rc.dce not getting updated for sec_clientd properly.  Works on server,
not on client.  I caused it by submission yesterday.  Assigned to myself.



CR Number                     : 11871
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : svcdumplog should be installed
Reported Date                 : 8/24/94
Found in Baseline             : 1.1b16
Found Date                    : 8/24/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : config/dce_config
Sensitivity                   : public

[8/24/94 public]
The "svcdumplog" program should be installed with the other programs.
Currently, it's built, but not installed.

[8/24/94 public]
Hold on.  In the spirit of not adding any new control programs to DCE, we
could make this a command in dcecp.  It would be just like the "audtrail
show" command.  The code is certainly short enough (~200 lines).  We're
trying to think of an object name.  (How about "binlog show"?)  Talk to you
tomorrow.

[8/25/94 public]
svcdumplog isn't a control program.

[08/31/94 public]
I don't know why this didn't work before (if it didn't) but I just
checked at svcdumplog is in the install/bin tree.  It looks like it
was installed by this change:
	# Revision 1.1.4.13  1994/05/26  18:51:34  bowe
	#       Added references to svcbin, svcdumplog.
	#       [1994/05/26  18:10:43  bowe]
Closing this.

[08/31/94 public]
Oops, thanks to jbowe for explaining this.  The real bug is that dce_config
doesn't install it.  "svcumplog" should be added to LIST_utils2 around
line 2955 of dce_config.

[9/6/94 public]
Did that.



CR Number                     : 11854
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : should only create cds server principals on cds server.
Reported Date                 : 8/24/94
Found in Baseline             : 1.0
Found Date                    : 8/24/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : dce_config
Sensitivity                   : public

[8/24/94 public]

dce_config creates "hosts/foo/cds-server" and "hosts/foo/gda" accounts on
all clients, and adds them to the group subsys/dce/cds-server.

These principals are only needed on CDS servers.

The presence of these accounts on random clients is a security hole waiting
to happen, since membership in subsys/dce/cds-server is all you need for a
principal to be trusted as a CDS server.  I suspect that this means that
the compromise of any client equals a compromise of the entire CDS.

We should:
 1) not do this any more (the cds-server principals should be created
on demand when creating a cds server; ditto for the gda principals).

 2) advise current installations to un-do this except on cds servers.
	(the latter is a doc or release-notes kind of thing..)

[8/24/94 public]
So I just removed all the registry commands from config_cdsclient()
Sound right?

[8/24/94 public]

Now that I look at it, yes.

It looks like config_cdsclient was created by blind cut & paste from
config_basecds..

[8/25/94 public]
Yea, we fixed this once in the 1.0.3 timeframe. Looks like it creeped back
and we should take care of it.

[8/25/94 public]
Removed the rgy code from config_cdsclient.
Also removed the deletion of this principal from dce.unconfig.



CR Number                     : 11830
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : Password Management server
(pwd_strengthd) is not installed with the Security Server executables.
Reported Date                 : 8/23/94
Found in Baseline             : 1.1
Found Date                    : 8/23/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : dce_config
Sensitivity                   : public

[8/23/94 public]

In the latest dce_config script the Password Management server is not installed
with the other Security Server executables. Talking with Sean it appears
that HP's changes are not all there in the dce_config script. Please make
sure that the osf 1.1 source base has all the changes that are missed during
last submission.

[8/24/94 public]
Please advise on what things need to be installed.
Should they be installed only on security servers or on all security clients?

[8/24/94 public]
The pwd_strengthd is the only thing missing from the hp submission. Please
install this executables when Security server is installed using
dce_config. No need to install the pwd_strengthd on security clients. Tom,
thanks for doing this work.

[8/25/94 public]
pwd_strengthd is now installed for secuirty servers and replicas.



CR Number                     : 11761
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : dce_config looks for old uuid formats
Reported Date                 : 8/18/94
Found in Baseline             : 1.1
Found Date                    : 8/18/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : dce_config
Sensitivity                   : public

[8/18/94 public]

dce_config looks for an old format uuid and with the fix for 10052
which prevents dce from printing *any* uuid in the old format,
this breaks the config.

Changes:

====== config/dce_config
9a10
> # Remove old uuid formats.
1142,1143c1143
< 			if (interface == "4c8782805000.0d.00.02.87.14.00.00.00,1.0") {
< # if (interface == "4C8782805000.0D.00.02.87.14.00.00.00,1.0") {
---
> 			if (interface == "4c878280-5000-0000-0d00-028714000000,1.0") {
4360c4360
< 	log_msg DETAIL "Executing: rpccp add element -i 4d37f2dded43.02.c0.37.cf.2e.00.00.01,4.0 \
---
> 	log_msg DETAIL "Executing: rpccp add element -i 4d37f2dd-ed43-0000-02c0-37cf2e000001,4.0 \
4362c4362
< 	echo "add element -i 4d37f2dded43.02.c0.37.cf.2e.00.00.01,4.0 \
---
> 	echo "add element -i 4d37f2dd-ed43-0000-02c0-37cf2e000001,4.0 \

[8/18/94 public]
Changed the uuids and submitted.



CR Number                     : 11729
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce.rm
Short Description             : Audit-server acl file not removed.
Reported Date                 : 8/17/94
Found in Baseline             : 1.1b14
Found Date                    : 8/17/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : dce.rm
Sensitivity                   : public

[8/17/94 public]
When doing a remove followed by a configure using dce_config, I discovered
that the audit server acl file was not being removed.  This can cause 
subsequent starts of the audit server to use the original acl file which
will contain an old cell uuid.

[8/24/94 public]
Jerry submitted the fix for this a while ago.
Closed.



CR Number                     : 11613
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 11591
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : sec_salvage_db
Short Description             : Any reference to sec_salvage_db should be removed from the install/config scripts
Reported Date                 : 8/9/94
Found in Baseline             : 1.1b14
Found Date                    : 8/9/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : dce_config
Sensitivity                   : public

[8/9/94 public]

The SEC binary sec_salvage_db is being removed from the source tree and
placed in the nosupport directory.  Refreences to this program need to
be removed from teh dce_config scripts.

OT 11591 is the SEC bug describing teh removal of sec_salvage_db.

[8/22/94 public]
When the security people move the code, they should fix dce_config
at the same time.

[8/22/94 public]
On orders from management, I removed sec_salvage_db from dce_config.



CR Number                     : 11493
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : 
Short Description             : remove unnec. "error" ref in chk_* arg
Reported Date                 : 7/29/94
Found in Baseline             : 1.1b13
Found Date                    : 7/29/94
Severity                      : E
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b14
Affected File(s)              : dce_config,dfs_config
Sensitivity                   : public

[7/29/94 public]

The chk_* routines (chk_cdscp, chk_acl_edit, chk_rpccp, chk_rgy_edit)
take a descriptive string as an argument (to be used in reporting what
was attempted IF an error occurs). The strings being passed to these routines
in dce_config and dfs_config contained the unnecessary word "Error/error"
which was being output to the /tmp/dce_config.log when running
in DEBUG mode. This change is a cosmetic change such that the word "ERROR"
appears in the log only if there is one.

[8/5/94 public]

Submitted changes last Friday - no problems (relating to these
changes :-) have been experienced - moving to "fix" state.

[8/11/94 public]
It's a keeper - closing.



CR Number                     : 11479
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce_config - unconfig
Short Description             : unconfig doesn't handle add'l srvrs
Reported Date                 : 7/28/94
Found in Baseline             : 1.1b13
Found Date                    : 7/28/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : dce_config, dce.unconfig
Sensitivity                   : public

[7/28/94 public]

The "unconfig" option of dce_config only handles client cell
entries - not machines that have been configured as sec or
cds replicas. It wouldn't be TOO hard to add and it would help
the RATs whose multi-machine smoketest includes sec and cds
replicas.

[9/15/94 public]
Unconfig now unconfigures cds servers and security replicas.
Also unconfigs gda servers.
There are a few notes:
- Have to have security server running to unconfig
- Have to unconfig cds server locally or manually
  delete the clearinghouse before unconfigure.



CR Number                     : 11434
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : gds
Short Description             : install_gds has to run after client()
Reported Date                 : 7/26/94
Found in Baseline             : 1.1
Found Date                    : 7/26/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : config/dce_config
Sensitivity                   : public

[7/26/94 public]

When you install GDS first you will get an error because install_gds
runs gdsmkiss which expects libdce to be installed.
The solution is to change from

install_gds; client;;

to 

client; install_gds;;

in dce_config (line 538, Revision 1.2.56.6).

[07/26/94 public]
Fix submitted.



CR Number                     : 11433
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 11224,9314
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : install_gds
Short Description             : install_gds doesn't work if GDS is already installed and configured
Reported Date                 : 7/26/94
Found in Baseline             : 1.1
Found Date                    : 7/26/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : config/dce_config
Sensitivity                   : public

[7/26/94 public]

install_gds failes if GDS is already installed and configured.
The reason is that gdsmkiss and the configuration of dir. id. 1 fails
if dir. id. 1 is already configured.
The solution should be: 

- if /opt/dcelocal/etc/gdsconfig exists: ask if the old configuration
should be removed
- if the answer is "no": don't do the last steps (gdsmkiss, ...) in 
install_gds
- if the answer is "yes": remove /opt/dcelocal/etc/gdsconfig,
/opt/dcelocal/var/adm/directory/gds/cache/*, 	(cache data and logfiles)
/opt/dcelocal/var/directory/gds/dsa/dir*, 	(dsa database)
/opt/dcelocal/var/directory/gds/adm/dsa/*,	(dsa logfiles)
/opt/dcelocal/var/directory/gds/adm/sstub/* 	(sstub logfiles)

The fix for this will include the fix for 11224 (dce.rm shouldn't remove
gdsconfig if you reconfigure your cell) and 9314 (typo in dce.rm -
these lines will be removed anyway).

[07/26/94 public]
Little modification: dce.rm has to remove old configuration because 
it is used also for deinstalling DCE; there is no real need to
remove old logfiles - they will be removed anyway if you activate GDS
after installation. But the directories where DSA logfiles are cerated
have to be removed - they are recreated when a dir.id. is configured.
For more information see: Request for submit (config, gds): 11434,11433,
11224,9314.

[07/26/94 public]
Fix submitted.



CR Number                     : 11412
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : passwd mgmt server
Short Description             : dce_config enhanced to config passwd mgmt server
Reported Date                 : 7/25/94
Found in Baseline             : 1.1
Found Date                    : 7/25/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : dce_config, dce_com_env
Sensitivity                   : public

[7/25/94 public]

This is a placeholder for the enhancements to dce_config to configure
the password management server (DCE 1.1 Extended Login
functionality).

[8/24/94 public]
This functionality is in.
Closed.



CR Number                     : 11395
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : remove dtsdate link if it exists
Reported Date                 : 7/22/94
Found in Baseline             : 1.1b12
Found Date                    : 7/22/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : dce_config
Sensitivity                   : public

[7/22/94 public]

dce_config doesn't check for the existence of the dtsdate link in
/usr/bin before attempt to create the link. An error message is
generated when this happens, although the configuration process
continues. This is annoying, and should be fixed.

[8/8/94 public]
Fixed.



CR Number                     : 11375
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : single spaces in output
Reported Date                 : 7/21/94
Found in Baseline             : 1.1b12
Found Date                    : 7/21/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : dce_config
Sensitivity                   : public

[7/21/94 public]
dcecp> hostdata show /.../dcecp_cell.osf.org/hosts/ninja/config/hostdata/dce_cf.db
{uuid 002c7cdf-4301-1d77-af44-0000c09ce054}
{annotation  {DCE name config file}}
{storage /opt/dcelocal/dce_cf.db}
{hostdata/filecontents
 {cellname  /.../dcecp_cell.osf.org}
 {hostname  hosts/ninja}}

This output should have single spaces between attribute names and values.

[8/24/94 public]
hostdata shows every lines in the dce_cf.db file. There is two whitespace
in that file. If you don't like this output, the dce_config is one who
writes this outlook.

[8/24/94 public]
Pings right.  The extra spaces are put in by dce_config in create_dcecfdb.
Can we change to only be one space between the key (cellname and hostname)
and the value?  Note this is an E4 for a reason.  :-)

[8/24/94 public]
Huh?  Why is this an issue?  As Ping said, hostdata shows the lines of the
file as they are.  They are not Tcl lists - they are lines of a file.
The dce_cf_xxx() functions want the keyword and value separated by any
amount of whitespace.  Who cares how it looks when dcecp prints it?  Also,
the hostdata postprocessor may do other things to that file, including
adding comments and blank lines.  I think this should be canceled.

[8/24/94 public]
> Who cares how it looks when dcecp prints it?

Ummm, the end users?  But I did say E4 for a reason.  It's two characters
to be deleted (4 if you count the log_msg's) from dce_config.  An issue?
Hardly.  I won't object to cancelling this though.

[8/24/94 public]
It won't matter what dce_config sets them to if the hd postprocessor
goes and rearranges/reformats things.  (And if we're talking end-users,
then why not format it so it looks nice if they cat the file?  When the
key "cellaliases" goes in there, it'll screw up the columns...)

Gee, one might think we don't have more important things to comment on... :-)

[8/24/94 public]
That's OK Howard. I only put in single spaces when I create the file with
host configure :-)

[8/25/94 public]
Fixed... 
Geez you guys, what a stupid thing to file a bug (and argue!) about...
Get a life!



CR Number                     : 11274
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : gds
Short Description             : gdsmkiss broke dce_config
Reported Date                 : 7/13/94
Found in Baseline             : 1.1
Found Date                    : 7/13/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b12
Affected File(s)              : config/dce_config
Sensitivity                   : public

[7/13/94 public]

The changes for gdsmkiss in dce_config broke other installations.
We were trying to install dfs after installing gds.  The problem
is that gds has some 'cd' in dce_config.  Those should be changed
to '(cd ...)'.  This way, the current location is never moved.
Because when the script proceed to install dfs, it cannot find
dfs_config because gds has cd to somewhere else.

We have a fix now and am running this.  DO you want to fix this
Rich?

[7/13/94 public]
Of course we want to fix it.  Assigned to Jochen for the fix.

[07/13/94 public]
Submitted. I did what Annie proposed.



CR Number                     : 11224
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 11434,11433,9314
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : rm.dce
Short Description             : gdsconfig is removed by dce_config
Reported Date                 : 7/8/94
Found in Baseline             : 1.1
Found Date                    : 7/8/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : config/dce.rm, config/dce_config
Sensitivity                   : public

[7/8/94 public]
If you reconfigure via dce_config (i.e. rename your cell)
you will be prompted 

Do you wish to first remove all remnants of
        previous DCE configurations for all components (y/n)?
        You should do so only if you plan on re-configuring
        as a client of a different cell: (n)

If you answer "yes" then esp. /opt/dcelocal/etc/gdsconfig
is removed. But the whole gds database is still there.

I don't see any need of removing gdsconfig if you reconfigure your
cell. Anyway you have to enter your new cell attributes into GDS
by hand - if you want to do intercell via GDS.

But if there is any need to re-configure gds as well
so it's wrong to delete just gdsconfig - you bring gds in
a real bad status.

I propose just to delete the lines 

log_msg DETAIL "dce.rm: Executing: rm -rf $DCELOCAL/etc/gdsconfig"
rm -rf $DCELOCAL/etc/gdsconfig

from dce.rm.

[07/26/94 public]
Fix submitted.



CR Number                     : 11193
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : cfg
Subcomponent Name             : gds
Short Description             : subsequent installation of
libdsal.so not handled correctly
Reported Date                 : 7/7/94
Found in Baseline             : 1.1
Found Date                    : 7/7/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : config/dce_config
Sensitivity                   : public

[7/7/94 public]

When installing the DCE via the scripted process, during the installation
of client binaries, dce_config will run lib_admin.  There will be an entry
for libdsal.so but it has not yet been installed.  Hence, lib_admin will
fail.

The work around during an interactive configuration is to say 'no' to 'do
you want to run lib_admin?'

(You will be prompted for this again later when installing GDS.)

[7/7/94 public]
Fix submitted.

[7/11/94 public]
Fix verified by installation.



CR Number                     : 11192
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : audit
Short Description             : Auditcp should not be installed
Reported Date                 : 7/7/94
Found in Baseline             : 1.1
Found Date                    : 7/7/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : config/dce_config
Sensitivity                   : public

[7/7/94 public]
auditcp has been moved to nosupport and should be removed from the install
list.

[7/7/94 public]
Fix submitted.

[7/11/94 public]
Fix verified by installation.



CR Number                     : 11053
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce_config ?
Short Description             : dce_config failes during DCE
configuration on HP and OSF1 (using dced or rpcd)
Reported Date                 : 6/22/94
Found in Baseline             : 1.1
Found Date                    : 6/22/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : dce_shutdown, dce_config, dce_config_env
Sensitivity                   : public

[6/22/94 public]


Cell Configuration:

RIOS - dced, CDS server, SEC server
HPUX - DCE client
OSF1 - DCE client

NB from June 21/94


Here is what I got:

I. On the server machine (RIOS):

During configuration, dced printed the following messages 
(regardeless, the servers configured successfully):


S:****** Initializing dced...
warning -- Could not create host name file: No such file or directory
warning -- Could not create cell name file: No such file or directory
warning -- Could not create cell aliases file: No such file or directory
warning -- Could not create post-processor file: No such file or directory
No currently established network identity for which context exists
DCED listening...
        Enter keyseed for initial database master key: 

II. On the client machines (HP and OSF1):

The configurations failed with the following message

S:****** Initializing dced...
No currently established network identity for which context exists
DCED listening...
        What is the name of the Security Server for this cell?  mudslide
S:****** Time on bronze is within specified tolerance (120 sec) of time on 
         mudslide.
WARNING: Ensure the /opt/dcelocal/etc/security/pe_site file matches that on
the
         server...
        Press <RETURN> to continue, CTRL-C to exit: 

        Enter Cell Administrator's principal name: (cell_admin) 
        Enter password: 

./dce_config: dce_login_noexec: not found
ERROR:   KRB5CCNAME was not generated by dce_login, although no other
errors were detected.
        Press <RETURN> to continue, CTRL-C to exit: 
ERROR:   rgy_edit error while creating ktab entry in registry database.
           Message from rgy_edit:
           ?(rgy_edit) Warning - binding is not authenticated - Cant
establish 
         authentication to registry (Registry Edit Kernel) (dce / sad)
         Domain changed to: principal
         ?(rgy_edit) Unable to add principal  "hosts/bronze/self" -
Principal 
         not exist (Registry Edit Kernel) (dce / sad)
         ?(rgy_edit) Unable to add key - Registry object not found (dce /
sec)
         ?(rgy_edit) Unable to add key - Registry object not found (dce /
sec)
         bye.

[06/22/94 public]

dced_config fails on HPUX and OSF1 in initial configuration...

First I made /opt/dcelocal/var/adm/dced. Then, I invoked dce_config
and got the following errors:

ON HPUX:

S:****** Initializing dced...
No currently established network identity for which context exists
DCED listening...
        Enter keyseed for initial database master key: 


        Enter desired principal name for the Cell Administrator:
(cell_admin) 
        Enter desired password for the Cell Administrator: 
        Re-enter desired password: 

S:****** The current highest UNIX ID for persons on this node is 12329.
        Enter the starting point to be used for UNIX ID's that
        are automatically generated by the Security Service
        when a principal is added using "rgy_edit": (12429) 
S:****** The current highest UNIX ID for groups is 5000.
        Enter the starting point to be used for UNIX ID's that
        are automatically generated by the Security Service
        when a group is added using "rgy_edit": (5100) 
S:****** Starting secd...
S:****** Starting sec_clientd...
S:****** Waiting for node self-identity to be established...
/etc/dce_config: dce_login_noexec: not found
ERROR:   KRB5CCNAME was not generated by dce_login, although no other
errors 
         were detected.
        Press <RETURN> to continue, CTRL-C to exit: 
S:****** Initializing the registry database...
klist: Credential cache name malformed (dce / krb) while getting default
ccache
ERROR:   rgy_edit error while adding principals to the registry database
           Message from rgy_edit:
           ?(rgy_edit) Warning - binding is not authenticated - Cant
establish 
         authentication to registry (Registry Edit Kernel) (dce / sad)
         Domain changed to: group
         ?(rgy_edit) Unable to add group  "acct-admin" - Principal quota 
         exhausted (dce / sec)
         ?(rgy_edit) Unable to add group  "subsys/dce/sec-admin" -
Principal 
         quota exhausted (dce / sec)
         ?(rgy_edit) Unable to add group  "subsys/dce/cds-admin" -
Principal 
         quota exhausted (dce / sec)


On OSF1:

S:****** Initializing dced...
No currently established network identity for which context exists
DCED listening...
        Enter keyseed for initial database master key: 


        Enter desired principal name for the Cell Administrator:
(cell_admin) 
        Enter desired password for the Cell Administrator: 
        Re-enter desired password: 

S:****** The current highest UNIX ID for persons on this node is 9449.
        Enter the starting point to be used for UNIX ID's that
        are automatically generated by the Security Service
        when a principal is added using "rgy_edit": (9549) 
S:****** The current highest UNIX ID for groups is 2016.
        Enter the starting point to be used for UNIX ID's that
        are automatically generated by the Security Service
        when a group is added using "rgy_edit": (2116) 
S:****** Starting secd...
S:****** Starting sec_clientd...
S:****** Waiting for node self-identity to be established...
WARNING: Possible problem logging in to DCE:
  message from login:
  dcelogin[451]: dce_login_noexec:  not found.
        Press <RETURN> to continue, CTRL-C to exit: 
ERROR:   KRB5CCNAME was not generated by dce_login, although no other
errors were detected.
        Press <RETURN> to continue, CTRL-C to exit: 
S:****** Initializing the registry database...
klist: Credential cache name malformed (dce / krb) while getting default
ccache
ERROR:   rgy_edit error while adding principals to the registry database
  Message from rgy_edit:
  ?(rgy_edit) Warning - binding is not authenticated - Cant establish
authentication to registry (Registry Edit Kernel) (dce / sad)
Domain changed to: group
?(rgy_edit) Unable to add group  "acct-admin" - Principal quota exhausted
(dce / sec)
?(rgy_edit) Unable to add group  "subsys/dce/sec-admin" - Principal quota
exhausted (dce / sec)
?(rgy_edit) Unable to add group  "subsys/dce/cds-admin" - Principal quota
exhausted (dce / sec)
?(rgy_edit) Unable to add group  "subsys/dce/dts-admin" - Principal quota
exhausted (dce / sec)
?(rgy_edit) Unable to add group  "subsys/dce/cds-server" - Principal quota
exhausted (dce / sec)
?(rgy_edit) Unable to add group  "subsys/dce/dts-servers" - Principal quota
exhausted (dce / sec)
?(rgy_edit) "-a" - Required option argument is missing (Registry Editor/TTY
Interface) (

[06/23/94 public]
It looks to me like everything fell apart when dce_login_noexec wasn't
found.  I think this is a dce_config error, not a dced error.

[06/23/94 public]

It happens again today... 

Using the NB, dce_config fails on HP and OSF with the messages reported
above. (I am not using configuration files)

ON HP:

./dce_config: dce_login_noexec: not found
ERROR:   KRB5CCNAME was not generated by dce_login, although no other
errors 
         were detected.
        Press <RETURN> to continue, CTRL-C to exit: 

ON OSF1:

S:****** Waiting for node self-identity to be established...
WARNING: Possible problem logging in to DCE:
  message from login:
  dcelogin[451]: dce_login_noexec:  not found.

[6/23/94 public]
dce_shutdown is removing the dce_login_noexec link when it shouldn't.
I had to work hard to get this to happen.  If you install and
then configure (without leaving dce_config) this wont happen.

It only happens when you have DCE running, and do a re-config.

I will fix.

[6/23/94 public]
Files submitted.



CR Number                     : 10982
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : other
S/W Ref Platform              : other
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : Compatibility between svr4 dce_config and osf dce_config with DFS entries
Reported Date                 : 6/16/94
Found in Baseline             : 1.0.3
Found Date                    : 6/16/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2.1
Fixed In Baseline             : 1.2.1
Affected File(s)              : dce_config
Sensitivity                   : public

[6/16/94 public]

SVR4 customer reported the following problem in a split server configuration
(secutiry server on FTX, a SNI 1.0.3 early access, and CDS on AIX with OSF
DCE): acl_edit on dfs entries failed. The reason is that SVR4 version of
dce_config does not add DFS entries to the registry (and the CDS name
space) becasue SVR4 base dose not have DFS in it. But OSF version of dce_config
will create and attempt to do acl_edit on those entries

While one could argue that this is SNI dce_config's problem, it is also
possible that we (OSF) re-arrange dce_config so that anything to do with DFS
will defer until DFS is actually being configured.

[2/6/96 public]
Already fixed in 1.2.1. Closed.



CR Number                     : 10980
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dfs_config
Short Description             : inaccurate message in dfs_config
Reported Date                 : 6/16/94
Found in Baseline             : 1.1
Found Date                    : 6/16/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : dfs_config
Sensitivity                   : public

[6/16/94 public]
If Episode is chosen as filesystem type, user should not be
prompted to "ensure this is a valid, mounted filesystem partition"
since it need not be mounted.

>         Enter the name of the system control machine:  singsing
>         Enter the fileset name (root.dfs): 
>         Enter the filesystem type for root.dfs:
>         1. Native File System (e.g. UFS, JFS)
>         2. Episode File System (LFS)
> selection:  2
>         Enter the device name (e.g. /dev/lvXX)/dev/lv00
>         Ensure this is a valid, mounted filesystem partition.
>         Press <RETURN> to continue, CTRL-C to exit: 
> 
>

[8/25/94 public]
Made the prompt conditional on not selecting '2'.



CR Number                     : 10954
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 2996
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : Installing GDS and DFS clients when installing DCE clients
Reported Date                 : 6/15/94
Found in Baseline             : 1.0.3
Found Date                    : 6/15/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : config/dce_config
Sensitivity                   : public

[6/15/94 public]

When installing "DCE client" with dce_config, GDS client is not installed.
Nor does DFS clients get installed.

There was an OT 2996 filed by melman for DCE 1.0.1. It was cancelled at 
that time. I can understand that at THAT time, gds and dfs were far from
reliable and useable to install.

But now both DGS and DFS are more andmore mature, we may want to reconsider
installing them as part of the DCE installation.

[6/15/94 public]
I am opposed to this, since the current method gives installers
much more flexibility.  DFS and GDS are large subsystems that
many machines will not run, thus you shouldn't always have to
install them.

Since this is an enhancement, I'll leave it open, but we wont be
making this type of change in configuration for 1.1.

[6/15/94 public]
Currently, if you want GDS, you get everything. You cannot say if you 
only want GDS client.

I think there should be an option to just install the GDS client. Currently
there is an option for installing DFS client. Maybe we can move it under 
"DCE Client" menu and add "GDS client" option there.

[07/19/94 public]
Assigned to me. It's not very difficult for us to introduce a
"GDS client" installation - but does anybody really want this?
If we get a serious "YES" from some serious, important persons -
we'll do it. I think we would like to do this.

[07/20/94 public]
I talked to Rich Zeliff - he thinks that t's a good idea to have the option
to install just a GDS client. So I will do this soon.

[8/24/94 public]
Jochen did make these changes to dce_config.
Closed.



CR Number                     : 10949
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : 
Short Description             : dce.unconfig doesn't rm replicas
Reported Date                 : 6/14/94
Found in Baseline             : 1.1
Found Date                    : 6/14/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : dce_config, dce.unconfig
Sensitivity                   : public

[6/14/94 public]


I wanted to configure a security replica server,
so I choose          8. Replica Security Server
on the DCE Additional Server Configuration menu on dce_config

However, I thought I might have made a mistake so
I wanted to repeat the replica server configuration.

So first I ran dce.unconfig from the master server to 
unconfigure stthomas where the replica server resides.
Then I ram dce_config REMOVE on stthomas.

However when I tried to repeat the replica server configuration.
dce_config gave me errors:

        selection:  8
S:****** Configuring Security Replication


        Enter the security replica name (without subsys/dce/sec) : (stthomas)
        Modifying acls on /.:/sec/replist ...
        Modifying acls on /.:/subsys/dce/sec ...
        Modifying acls on /.:/sec ...
        Modifying acls on /.: ...
        Modifying acls on /.:/cell-profile ...
        Enter keyseed for initial database master key: 

Registry: Error - Cannot add new replica to master registry - 0x171220bc - Another replica with the same name or id exists (dce / sec)
Registry: Fatal Error - Failed to create database
 at line 479 of file /project/dce/build/dce1.1-snap/src/security/server/bin/rgy_create.c - 0x171220bc - Another replica with the same name or id exists (dce / sec)
config_secreplica[89]: 4887 Resources lost
ERROR:   sec_create_db may have failed to create security slave


There is apparently no way to uncofigure a replica security server
via dce.unconfig.  I am currently blocked because of this bug.

Do you know how I might be able to manually remove stthomas
as a security replica server?

[6/14/94 public]

I also tried manually removing the security replica by doing the following:
[On the master server]:

sec_admin> lr
Default replica:  /.../clam_cell.osf.org/subsys/dce/sec/master
Default cell:     /.../clam_cell.osf.org


subsys/dce/sec/master (master)

subsys/dce/sec/stthomas
sec_admin> delr subsys/dce/sec/stthomas
Do you wish to continue (y[es]) or abort this operation (n[o])? y
sec_admin> quit
bye.

[6/15/94 public]
So I will assume that the manual removal was successfull.

Dce_config has never supported *complete* unconfiguration (see DFS),
and I would think it reasonable to expect an admin to
remove something like a security replica by hand.

It would be nice if dce_config could do everything, but....

Probably wont make a change like this for 1.1,
moving to an enhancement.

[9/15/94 public]
Wonders never cease.  
This will now work with the note that
the security replica must be up and running in order for
dce.unconfig to find out its name and delete it.



CR Number                     : 10939
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : install_gds
Short Description             : dce_config has to be modified for GDS
Reported Date                 : 6/14/94
Found in Baseline             : 1.1
Found Date                    : 6/14/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : config/dce_config
Sensitivity                   : public

[6/14/94 public]

The following modifications have to me made in dce_config together
with the next gds code drop (scheduled for 06/15, but after BETA is ready):

- typo in line 2148 in dce_config (revision 1.2.50.25): DIRLIBBDS ---> DIRLIBNDS
- installation of a new shared library : libdsal
	(used only by gdsdsa, no interdependency to libdce)
- installation of gdssetup, init.client and init.server (all gdssetup stuff)
- corrected install list of gds processes
	(gdsstep occured twice, one has to be gdsrosstep,
	 gdsgennsap was missing)

See the exact diff in my mail to dce-drb.

[06/24/94 public]
Fixed with submission on 06/21.



CR Number                     : 10938
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dfs warning messages
Short Description             : improve messages
Reported Date                 : 6/13/94
Found in Baseline             : 1.1
Found Date                    : 6/13/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : dce_config
Sensitivity                   : public

[6/13/94 public]

 

Improve the warning messages so errors there will not
be confused with real errorswill

[8/24/94 public]
I believe Gail (gmd) has removed the 'Error' strings that would
get printed to the log file.

I think thats what you wanted.

Closed in any case.



CR Number                     : 10923
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : admin_gd
Short Description             : typo in section 11.1.3
Reported Date                 : 6/9/94
Found in Baseline             : 1.1
Found Date                    : 6/9/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1doc
Affected File(s)              : admin_gd/overview/overview/8.2_custominzing.gpsml
Sensitivity                   : public

[6/9/94 public]
The section "Sample Command File" identifies the command file as
'config.com'  The name is actually 'config.cmd'

[6/9/94 public]

Assigned this CR to Susan Teto (OSF dce_config writer).

[10/11/94 public]
Corrected the filename.

[10/27/94 public]
Closed bug.



CR Number                     : 10918
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 10016, 10919
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : gda_child
Short Description             : gda_child no longer needed
Reported Date                 : 6/9/94
Found in Baseline             : 1.1
Found Date                    : 6/9/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : src/config/dce_config
Sensitivity                   : public

[6/9/94 public]
Once the fix for ot10016 has been proven to work gda_child is no longer
needed.

[8/24/94 public]
Fix submitted 8/23.



CR Number                     : 10862
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce.rm
Short Description             : dce.rm doesn't delete /opt/dcelocal/var/adm/time/dtsd.acl
Reported Date                 : 6/3/94
Found in Baseline             : 1.1
Found Date                    : 6/3/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dce.rm
Sensitivity                   : public

[6/3/94 public]

The /etc/dce.rm script does not delete /opt/dcelocal/var/adm/time/dtsd.acl,
this causes the "dtscp sync" to get "error executing command: must have
write permission to the DTS entity (dce / dts)" messages.

[6/7/94 public]
Fixed dce.rm to remove everything in var/adm/time directory.



CR Number                     : 10809
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : cfg
Subcomponent Name             : dce.rm
Short Description             : Need to remove audit
configuration info
Reported Date                 : 5/31/94
Found in Baseline             : 1.1
Found Date                    : 5/31/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : config/dce.rm
Sensitivity                   : public

[5/31/94 public]

When invoking acl_edit to list audit daemon's ACL, I get an error
on HP while everything is fine on RIOS.
This started happening only in baseline9, everything was working
ok on baseline8 and previous baselines.
Following is the trace of the session on HP, with the error,
and a comparative session on RIOS, which has no errors.

=====================================================
on HP:

acl_edit /.:/hosts/cmvcbeta/aud-acl
Unknown default cell from ACL - ERROR: Cell UUID is not a valid cell name (dce / sec)
INFO: Local cell will be used for operations requiring default cell info.
sec_acl_edit> l
# SEC_ACL for /.:/hosts/cmvcbeta/aud-acl:
# Default cell = afdf82d8-7b1b-11cd-a69d-080009215337
unauthenticated:-r--
user:00000263-7b1b-21cd-a600-080009215337:crw-
any_other:-r--
sec_acl_edit> exit
ERROR: permission not valid for this acl (dce / sec)
-----------------------------------------------------
output from klist (on HP), for reference:

DCE Identity Information:
        Global Principal: /.../torolab.ibm.com/hosts/cmvcbeta/self
        Cell:      ee4f9d12-7bb8-11cd-be3d-080009215337 /.../torolab.ibm.com
        Principal: 00000263-7bb8-21cd-be00-080009215337 hosts/cmvcbeta/self
        Group:     0000000c-7bb8-21cd-be01-080009215337 none
        Local Groups:
                0000000c-7bb8-21cd-be01-080009215337 none

Identity Info Expires: 94/05/31:20:31:01
Account Expires:       never
Passwd Expires:        never

Kerberos Ticket Information:
Ticket cache: /opt/dcelocal/var/security/creds/dcecred_ffffffff
Default principal: hosts/cmvcbeta/self@torolab.ibm.com
Server: krbtgt/torolab.ibm.com@torolab.ibm.com
        valid 94/05/31:10:31:01 to 94/05/31:20:31:01
Server: dce-rgy@torolab.ibm.com
        valid 94/05/31:10:31:01 to 94/05/31:20:31:01
Server: hosts/cmvcbeta/self@torolab.ibm.com
        valid 94/05/31:10:33:00 to 94/05/31:20:31:01
Server: dce-ptgt@torolab.ibm.com
        valid 94/05/31:10:53:50 to 94/05/31:12:53:50
Client: dce-ptgt@torolab.ibm.com        Server: krbtgt/torolab.ibm.com@torolab.ibm.com
        valid 94/05/31:10:53:50 to 94/05/31:12:53:50
Client: dce-ptgt@torolab.ibm.com        Server: dce-rgy@torolab.ibm.com
        valid 94/05/31:10:53:51 to 94/05/31:12:53:50
=====================================================
on RIOS:

acl_edit /.:/hosts/kazoo/aud-acl
sec_acl_edit> l
# SEC_ACL for /.:/hosts/kazoo/aud-acl:
# Default cell = /.../torolab.ibm.com
unauthenticated:-r--
user:hosts/kazoo/self:crw-
any_other:-r--
sec_acl_edit> exit
-----------------------------------------------------
output from klist (on RIOS), for reference:

DCE Identity Information:
        Global Principal: /.../torolab.ibm.com/hosts/kazoo/self
        Cell:      007a45e0-59b9-1de3-a411-10005a4f578b /.../torolab.ibm.com
        Principal: 0000014e-59ba-2de3-a400-10005a4f578b hosts/kazoo/self
        Group:     0000000c-59ba-2de3-a401-10005a4f578b none
        Local Groups:
                0000000c-59ba-2de3-a401-10005a4f578b none

Identity Info Expires: 94/05/31:17:13:49
Account Expires:       never
Passwd Expires:        never

Kerberos Ticket Information:
Ticket cache: /opt/dcelocal/var/security/creds/dcecred_ffffffff
Default principal: hosts/kazoo/self@torolab.ibm.com
Server: krbtgt/torolab.ibm.com@torolab.ibm.com
        valid 94/05/31:07:13:49 to 94/05/31:17:13:49
Server: dce-rgy@torolab.ibm.com
        valid 94/05/31:07:13:50 to 94/05/31:17:13:49
Server: hosts/kazoo/self@torolab.ibm.com
        valid 94/05/31:07:14:15 to 94/05/31:17:13:49
Server: dce-ptgt@torolab.ibm.com
        valid 94/05/31:10:04:07 to 94/05/31:12:04:07
Client: dce-ptgt@torolab.ibm.com        Server: krbtgt/torolab.ibm.com@torolab.ibm.com
        valid 94/05/31:10:04:07 to 94/05/31:12:04:07
Client: dce-ptgt@torolab.ibm.com        Server: dce-rgy@torolab.ibm.com
        valid 94/05/31:10:04:08 to 94/05/31:12:04:07
Client: dce-ptgt@torolab.ibm.com        Server: hosts/kazoo/cds-server@torolab.ibm.com
        valid 94/05/31:10:04:09 to 94/05/31:12:04:07
Client: dce-ptgt@torolab.ibm.com        Server: hosts/kazoo/self@torolab.ibm.com
        valid 94/05/31:10:04:43 to 94/05/31:12:04:07
========================================================

[5/31/94 public]
Because of the way this was described to me I thought it may be related to
the cell rename code so I suggested logging this against cds, at least to 
start. I looked at it a bit and don;t thik its coming from cds. Error
message maps to sec_id_e_bad_call_uuid which gets set by the registry
service on failure of either rsdb_pgo_uid_to_name or
rsdb_name_util_convert_to_cell both located in server/rs/rs_secidmp.c
The later is due to a what is in hand not being equal to "krbtgt/". I 
couldn;t track the first one. Assigned to security.

[6/15/94 public]
The problem is the uuid in default_realm in sec_acl_list retruned
from rdacl_lookup() is corrupted.  So the following call to 
sec_id_gen_name() returned bad status, hence the message "Unknown
default cell from ACL ...." printed out.  This error happened in
deif_get_cache_data().

[6/17/94 public]
Problem disappeared, cannot reproduce on either RIOS, HP or i486.

[6/27/94 public]
/opt/dcelocal/var/audit/adm/acl need to be removed everytime you reconfigure
your cell.

The problem is that /opt/dcelocal/var/audit/adm/acl has old data which has
old cell uuid or old timestamp.  By removing /opt/dcelocal/var/audit/adm/acl,
new auditd will create a new one which will be corresponding to the current
cell.

[6/27/94 public]
The removal of the acl information needs to be placed in src/config/dce.rm.
This should be created as a stanza in the 'else' paragraph of the 'if [
"$rm_param" = "install" ]' statement.

[8/24/94 public]
Jerry Kazin fixed this on 8/17.
Closed.



CR Number                     : 10770
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : need to create var/audit/client
Reported Date                 : 5/25/94
Found in Baseline             : 1.1
Found Date                    : 5/25/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b10
Affected File(s)              : src/config/dce_config
Sensitivity                   : public

[5/25/94 public]
Short desc says it all.

[5/25/94 public]
Fix submitted.  Was creating etc/audit/client, instead.



CR Number                     : 10760
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : dtsd -s not configured on HP-UX
Reported Date                 : 5/24/94
Found in Baseline             : 1.1
Found Date                    : 5/24/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1
Affected File(s)              : dce_config
Sensitivity                   : public

[5/24/94 public]

/etc/dce_config does not configure a DTS local server correctly on HP-UX.
If I change /etc/dce_config to a ksh it works ok.  For some reason the
$1 argument gets corrupted in start_dtsd when dce_config is executed as
a bsh, it gets set = SUMMARY.  Perhaps log_msg is screwing things up?

[5/25/94 public]
Bug in the HP-UX shell which trashes function arguments if you call another
function.  Move call to log_msg below reference to $1 in start_dtsd.
Also remove start_daemon() function and all calls to it since it
doesn't work and was confusing.

[05/27/94 public]
Closed, verified using NB0527.



CR Number                     : 10749
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : 
Short Description             : DCED is not installed or
started by dce_config
Reported Date                 : 5/24/94
Found in Baseline             : 1.1
Found Date                    : 5/24/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : dce_config
Sensitivity                   : public

[5/24/94 public]

DCED is not installed nor started by dce_config, it should be.

[8/24/94 public]
Well, it is now.
closed.



CR Number                     : 10628
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 10627
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dts config
Short Description             : dce_config shold use new dtsd switches
Reported Date                 : 5/12/94
Found in Baseline             : 1.1
Found Date                    : 5/12/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : ./config/dce.rm
./config/dce_com_env
./config/dce_com_utils
./config/dce_config
./config/rc.dce
Sensitivity                   : public

[5/12/94 public]

To show off the spiffy new features of dtsd, dce_config should configure
dtsd using the new command line switches (-c: clerk, -s:server).

Due to a timing problem in rc.dce, the time providers should place
themselves in the backround (see OT 10627) like all the other DCE
daemons do.

This will also have the side affect of getting rid of the 'little file'
/etc/rc.dts.

[5/18/94 public]
Fixed everything up to support the new dtsd switches and remove rc.dts:

  dce.rm: no longer removes /etc/rc.dts
  dce_com_env: no longer defines RC_DTS variable
  dce_com_utils: remove chk_dtscp function since we dont call dtscp anymore.
  dce_config: start dtsd with correct switches instead of using dtscp
  rc.dce: don't run $RC_DTS

Also added support for dts time providers which put themselves into
the background automatically.



CR Number                     : 10609
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa,i486,rs6000
S/W Ref Platform              : osf1,hpux,aix
Component Name                : cfg
Subcomponent Name             : gds
Short Description             : gdssvcstep renamed to gdsstep
Reported Date                 : 5/11/94
Found in Baseline             : 1.1
Found Date                    : 5/11/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b9
Affected File(s)              : config/dce_config
Sensitivity                   : public

[5/11/94 public]

The dfs smoketest on the HP failed with the message:

cp: cannot access /opt/dce/bin/gdsscvstep: no such file or directory
can't create file /opt/dce/local/bin/gdsscvstep

The script dce_config still has an entry for gdsscvstep, but it appears
that file is no longer built.

[5/12/94 public]
Problem arises because 'gdssvcstep' was apparently renamed to 'gdsstep'
with the last drop.  dce_config was not updated to reflect this.

[5/12/94 public]
Fix submitted.



CR Number                     : 10531
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : 
Short Description             : install dcecp/tcl fails 
when components already exist.
Reported Date                 : 5/4/94
Found in Baseline             : 1.1
Found Date                    : 5/4/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b9
Affected File(s)              : dce_config
Sensitivity                   : public

[5/4/94 public]

Installation of dcecp and tcl fail when the components already exist. 
The install_common routine is unable to verify that the dcecp and tcl
directories are writable.

[5/5/94 public]

A variable that was needed during installation need to be set. This
variable is needed when installing dce over a previous installation. 
Also I modified the lib_admin functions. That is the DO_LIB_ADMIN 
env variable is now checked more thoroughly.



CR Number                     : 10335
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce.clean
Short Description             : dce.clean always complains about killing cdsclerks.
Reported Date                 : 4/12/94
Found in Baseline             : 1.1b6
Found Date                    : 4/12/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dce.clean
Sensitivity                   : public

[4/12/94 public]

dce.clean has recently start complaining about 'missing' the
cdsclerks it tries to shoot down.

The cleks seem to be exiting when the cdsadv gets killed.
Solution is to re-run ps before trying to kill the clerks.

[04/12/94 public]
Fixed and submitted.



CR Number                     : 10200
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dfs
Short Description             : Unnecessary prompt in dfs_config
Reported Date                 : 3/22/94
Found in Baseline             : 1.1a
Found Date                    : 3/22/94
Severity                      : D
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : src/config/dfs_config
Sensitivity                   : public

[3/22/94 public]
The config_dfsfs() routine contains:
  echo "\tIf you wish to export additional aggregates, do so after"
  echo "\tcompleting this script by using the appropriate DFS"
  echo "\tadministration commands described in the DFS Admin Guide."
  x_exit

which prompts for input even if DO_CHECKS=n.

These statements should be embedded in an if DO_CHECKS == y clause
so that they do not interrupt non-interactive configs.

[04/05/94 public]
Submitted.



CR Number                     : 10131
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : secd should be started through start_daemon
Reported Date                 : 3/14/94
Found in Baseline             : 1.0.3
Found Date                    : 3/14/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : config/dce_config
Sensitivity                   : public

[3/14/94 public]
In config_secreplica, secd should be started with start_daemon:

*** /tmp/dce_config	Mon Mar 14 16:33:32 1994
--- dce_config	Tue Nov  9 18:14:26 1993
***************
*** 5741,5747 ****
  	then
  		err_exit "secd is already running."
  	fi
! 	start_daemon secd
  	modify_rcfile secd
  }
  
--- 5741,5747 ----
  	then
  		err_exit "secd is already running."
  	fi
! 	secd
  	modify_rcfile secd
  }

[03/30/94 public]
MAde the above change.
Verified and closed.



CR Number                     : 9954
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : date syntax incorrect for syncing time
Reported Date                 : 2/15/94
Found in Baseline             : 1.1b3
Found Date                    : 2/15/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b4
Affected File(s)              : dce_config
Sensitivity                   : public

[2/15/94 public]


While configuring a RIOS core client, dce_config attempted
to sync the time of the client to the server.  However the
syntax dce_config is using for the date command on the RIOS
generates a usage error.  Furthermore, dce_config apparently
does not check that the date command was successful or that
it has successfully sync'd the clocks on the two machines
involved.


        Press <RETURN> to continue, CTRL-C to exit:
        What is the name of the Security Server for this cell?  singsing
S:****** Time on alcatraz is forward by
              0 years  0 months  0 days  0 hours 45 minutes  2 seconds
           compared with time on singsing.
S:****** Time on alcatraz is not within specified tolerance (120 sec) of time on singsing
.
        Do you want to synchronize alcatraz's system time to singsing (y/n)? (n) y

waiting 8 seconds for minute boundary ...
date: 0551-404 Specified value of date/time is out of range.
Usage: date [-n][-u] [mmddHHMM[.SSyy]] [+"Field Descriptors"]
Usage: date [-n][-u] [yymmddHHMM[.SS]] [+"Field Descriptors"]
Usage: date [-n][-u] [ddmmHHMMyy[.SS]] [+"Field Descriptors"]
S:****** System time on node alcatraz is
             Tue Feb 15 10:54:05 1994
S:****** System time on node singsing is
             Tue Feb 15 10:09:04 1994
WARNING: Ensure the /opt/dcelocal/etc/security/pe_site file matches that on the server...

        Press <RETURN> to continue, CTRL-C to exit:

        Enter Cell Administrator's principal name: (cell_admin)
        Enter password:

login failure.
  message from login:

  Sorry. Password Validation Failure. - Clock skew too great (dce / krb)
Failed to log in to DCE.  Continuing will return to the Main Menu.
        Press <RETURN> to continue, CTRL-C to exit: ^C


----------------------------

Here's the dce_config log which shows what argument dce_config
was giving to the date command:


DEBUG:     Executing: sync_time()
V:         User query: Do you want to synchronize alcatraz's system time to singsing (y/n
)? (n)
V:         User entry: y
DEBUG:     Executing: get_server_time()
DEBUG:     Executing: get_server_time()
DEBUG:     Executing: convert_time()
D:         Executing: echo "yes" \| date 0215100994 > /dev/null
DEBUG:     Executing: get_server_time()
S:****** System time on node alcatraz is
             Tue Feb 15 10:54:05 1994
S:****** System time on node singsing is
             Tue Feb 15 10:09:04 1994
V:         Creating /opt/dcelocal/etc/security/pe_site file.



CR Number                     : 9953
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : 
Short Description             : Bad check for null time response.
Reported Date                 : 2/15/94
Found in Baseline             : 1.1
Found Date                    : 2/15/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dce_config
Sensitivity                   : public

[2/15/94 public]

I was trying to configure a machine (COMET) as a DCE client and I got the
following error messages:

        What is the name of the Security Server for this cell?  chlorine
get_server_time[5]: test: argument expected
get_time_diff[17]: test: argument expected
S:****** Time on comet is forward by 
              0 years  2 months 14 days 17 hours  5 minutes 13 seconds
           compared with time on chlorine.
S:****** Time on comet is not within specified tolerance (120 sec) of time
on chlorine.
        Do you want to synchronize comet's system time to chlorine (y/n)? (n) 
root@comet-KSH> 

I took a look at the DCE_CONFIG code and found the following, neither of
which is correct when given a null argument:

get_server_time[5]:
	if [ -z $timestr ]; then

get_time_diff[17]:
	if test $mytimei -lt $svrtimei

Ultimately, the latter are derived from the former (timestr), and they are
all derived from a TELNET <sec server> DAYTIME command, namely:

root@comet-KSH> x=`telnet chlorine daytime`
root@comet-KSH> echo $x
daytime: bad port number
root@comet-KSH> 

The telnet command can be fixed on this machine easily enough, but its bad
response turned up a bug, a bug which goes to a very misleading error
message and giving the user an option which is potentially damaging.  This
needs to be corrected.

[03/30/94 public]
Added quotes around variables that may be null.
Added a chack for the daytime/tcp entry in /etc/services.
Verified and Closed.



CR Number                     : 9910
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : cfg
Subcomponent Name             : install
Short Description             : two libdce's installed on HPUX
Reported Date                 : 2/8/94
Found in Baseline             : 1.1
Found Date                    : 2/8/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b4
Affected File(s)              : dce_config
Sensitivity                   : public

[2/8/94 public]


When performing and installation of the dce core on the
on the HPUX platoform, dce_config will install two
versions of libdce: libdce.a (static) and libdce.sl
(shared).  The libdce.a should not be installed by
default during the core installation;  installation of 
libdce.a should be optional and/or only install when the 
application development environement option is selected.

[02/08/94 public]
I disagree with this.  
libdce (all of them) should be installed whenever the libraries are installed.

Changing to a (low priority) enhancement.

[2/9/94 public]

I disagree with you. It should be optional to
have both installed. At the minimum dce_config
should ask whether the user wants both or not.
Having both of these installed takes up too much
space, and the static version which is installed
during core installation takes over 10 meg of
valuable disk space;  I should not have to 
keep deleting the unwanted static version
after  everytime I perform a core installation because
dce_config is installing things that I don't want
and are not necessary to run dce.  

The way I understand things, is that the static version
is necessary only when building dce applications and
thus it should only be installed when the application
development environement is requested.

And furthermore the workaround of having to delete
optional and unwanted things that dce_config installs
everytime I do an installation is not acceptable.

[2/10/94 public]

I'd rather fix this once and get it over with than
have to continuously clean this up after every install.



CR Number                     : 9903
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dfs client
Short Description             : dfs client config should not ask to load the episode extension.
Reported Date                 : 2/7/94
Found in Baseline             : 1.1
Found Date                    : 2/7/94
Severity                      : D
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1a
Affected File(s)              : src/config/dfs_config
Sensitivity                   : public

[2/7/94 public]


When configuring the dfs client, dfs_config always prompts for
the episode extension to be loaded.  This is unnecessary for
a client machine and the question should be asked only when
configuring a dfs file server


        DCE Configuration Menu ( on alcatraz )


         1. Initial Cell Configuration
         2. Additional Server Configuration
         3. DCE Client
         4. DFS Client


        98. Return to previous menu
        99. Exit



        selection:  4
S:****** Configuring DFS client...

        Enter Cell Administrator's principal name: (cell_admin)
        Enter password:

S:****** Loading kernel extensions...
/opt/dcelocal/ext/cfgdfs: dfscore_kmid already loaded
/opt/dcelocal/ext/cfgdfs: dfscmfx_kmid already loaded
        Should the LFS Kernel Extension be loaded (n)?

[4/28/94 public]
To verify fix configure a DFS client.  Verify the lfs extension
was not loaded (review /tmp/dce_config.log).



CR Number                     : 9873
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : gds
Short Description             : Some XDS headers are targetted
for the wrong installation location
Reported Date                 : 2/2/94
Found in Baseline             : 1.1
Found Date                    : 2/2/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : src/config/dce_config
Sensitivity                   : public

[2/2/94 public]
dce_config attempts to install the XDS header files xdscds.h, xdsgds.h, and
xdsdme.h in the wrong location -- /usr/include/dce, rather than
/usr/include.  This installation process is actually a matter of
creating a link from /usr/include/dce/<whatever> to
/opt/dcelocal/share/include/dce/<whatever>.  However, since these header
files are not in share/include/dce (but are in share/include) the link
fails and it appears that they are not installed.

The fix lies in the install_appdev() function.  It consist of removing:

	xdscds.h	from LIST26
	xdsgds.h	from LIST27
	xdsdme.h	from LIST29

And adding them to INCLUDES.

[03/28/94 public]
Looks like Rich has already fixed this:
# Revision 1.2.50.2  1994/02/02  20:34:51  zeliff
#       Minor changes
#       [1994/02/02  19:55:24  zeliff]
#
#       OT9873: fix installation of XDS headers
#       [1994/02/02  16:42:58  zeliff]
#

Closed.



CR Number                     : 9839
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dts
Short Description             : install dts audit event class files
Reported Date                 : 1/28/94
Found in Baseline             : 1.1
Found Date                    : 1/28/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b5
Affected File(s)              : src/config/dce_config
Sensitivity                   : public

[1/28/94 public]
Reminder.  dce_config needs to install the dts audit event class files
whenever dts is installed.  Installed location is <dcelocal>/etc/aud/ec .

[3/16/94 public]
Submitted.  Install location is <dcelocal>/etc/audit/ec/.

[5/4/94 public]
Closed.



CR Number                     : 9838
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : sec
Short Description             : Install security audit event
classes file
Reported Date                 : 1/28/94
Found in Baseline             : 1.1
Found Date                    : 1/28/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dce_config
Sensitivity                   : public

[1/28/94 public]
Reminder.   dce_config needs to install the security event class files for
audit.  Install location is <dcelocal>/etc/aud/ec.

[03/28/94 public]
Rich has already made these changes to dce_config.
Closed.



CR Number                     : 9833
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : incorrect message
Reported Date                 : 1/27/94
Found in Baseline             : 1.1b1
Found Date                    : 1/27/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : src/config/dce_config
Sensitivity                   : public

[1/27/94 public]
The message that tells you that pthread_exc.h is already installed on your
system tells to to copy /opt/dcelocal/share/include/dce/pthread.h to
                                                        ^^^^^^^^
/usr/include/pthread_exc.h.

[03/30/94 public]
Fixed up message and also stopped config from conplaining if the file
in /usr/include is already a symbolic link.
Verified and Closed.



CR Number                     : 9771
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : add installation for dcecp
Reported Date                 : 1/19/94
Found in Baseline             : 1.1
Found Date                    : 1/19/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b7
Affected File(s)              : dce_config
Sensitivity                   : public

[1/19/94 public]
In order to make dcecp available to the dce development community 
the capability to install it must available.

[1/31/94 public]
This needs to happen before the internal release.

dce_config must put dcecp, dcedcp.cat, and attr_eval.tcl in the
/opt/dcelocal tree in the right places.

[3/7/94 public]
Also install in /opt/dcelocal/tcl the following files:

  init.tcl   parray.tcl  tclIndex

Also, init.dcecp and verb-object.dcecp will need to be installed in
/opt/dcelocal/dcecp.

[7/19/94 public]
Enhanced and submitted in March.



CR Number                     : 9743
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : 
Short Description             : headers are installed wrong
Reported Date                 : 1/14/94
Found in Baseline             : 1.1
Found Date                    : 1/14/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b2
Affected File(s)              : dce/utils/dcecf/Makefile
Sensitivity                   : public

[1/14/94 public]

There are header being installed in "usr/include/dce" not
"share/include/dce".  (see aud).

The headers under dce/utils are not being installed during the
"install" phase of the build (for example dce_cf.h ).  

The are two header files dce_cf_sts.h cfgsts.h are not longer  built,
are there replacement headers for these files.

[1/14/94 public]
Opened defect 9744 to cover the mis-installation of audit header files.
Changed component from 'bld' to 'cfg' to cover the other two issues.

[01/14/94 public]
dce_cf_sts.h and cfgsts.h are gone.  They are internal header files
(folks were only supposed to use dce_cf.h) whose day has come and gone.
I mentioned this in my DRB mail about 9663 and 9692, perhaps not explicitly
enough.

[2/1/94 public]
The proper header - dce_cf.h - is installed in share/include/dce.
The other 2 mentioned are no longer installed.



CR Number                     : 9682
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : cfg
Subcomponent Name             : dce.clean
Short Description             : incorrect 'if' syntax for stopping GDS
Reported Date                 : 1/4/94
Found in Baseline             : 1.1b0
Found Date                    : 1/4/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : src/config/dce.clean
Sensitivity                   : public

[1/4/94 public]

The following test is used to control GDS shutdown:

if [ -f $DCELOCAL/bin/gdssysadm -a $DCELOCAL/bin/gdsdeact ]

This should be:

if [ -f $DCELOCAL/bin/gdssysadm -a -f $DCELOCAL/bin/gdsdeact ]

[04/12/94 public]
Fix this while I was in dce.clean.
Verified and closed.



CR Number                     : 9680
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dfs.clean
Short Description             : dfs clean does not need to dce_login to shutdown dfs
Reported Date                 : 1/4/94
Found in Baseline             : 1.0.3a
Found Date                    : 1/4/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1a
Affected File(s)              : src/config/dfs.clean
Sensitivity                   : public

[1/4/94 public]


dfs.clean does not need to dce_login to perform dfs shutdown.
You can use the -localauth switch with the bos commands to
allow the root user to shutdown the local dfs daemons which
are under the control of the bosserver.

[14/28/94 public]

To verify fix Configure a DFS server.  Run /etc/dfs.clean without
authentication.  DFS should still be properly shutdown using -localauth



CR Number                     : 9669
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dfs_config
Short Description             : dfs_config rgy_edit commands need -update switch
Reported Date                 : 12/30/93
Found in Baseline             : 1.0.3a
Found Date                    : 12/30/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3a
Fixed In Baseline             : 1.0.3a
Affected File(s)              : ./config/dfs_config
Sensitivity                   : public

[12/30/93 public]
In configuring the large cell (Config G) for system test, I got the
error:
S:****** Modifying the registry database for DFS operation...
ERROR:   rgy_edit error while adding DFS principals to the registry database
  Message from rgy_edit:
  Current site is: registry server at /.../large_cell.qadce.osf.org/subsys/dce/sec/dce3   (read-only)
Domain changed to: group
?(rgy_edit) Unable to add group  "subsys/dce/dfs-admin" - Replica is not the master (dce / sec)

because, without the "-update" switch, the rgy_edit command bound to a
read-only replica. Workaround is to edit dfs_config to contain -update switches
before attempting to config dfs machines in a cell with security replicas.

[1/10/94 public]

Added -update to the three rgy_edit commands that create new items in the
registry.  The remaining commands that only querry the registry were left
as is.

[2/4/94 public]
Closed.



CR Number                     : 9664
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : getcellname
Short Description             : calls dce_cf_get_cell_name wrong
Reported Date                 : 12/29/93
Found in Baseline             : 1.1
Found Date                    : 12/29/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : src/config/util/getcellname.c
Sensitivity                   : public

[12/29/93 public]
The getcellname program calls dce_cf_get_cell_name with an int*,
rather than an error_status_t* as its second parameter.  I will fix
this and rewrite the little sucker to make it ANSI, etc.

[12/29/93 public]
New version submitted.

[01/06/94 public]
Made it through a build and smoketest.  Closed.



CR Number                     : 9662
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : change echo's
Reported Date                 : 12/28/93
Found in Baseline             : 1.0.3
Found Date                    : 12/28/93
Severity                      : E
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dce_config
Sensitivity                   : public

[12/28/93 public]

In dce_config, when configuring an NTP time provider, the
function uses 

echo "\tStarting config_ntp_provider...",

this line should be changed to be the same as the line being
used in configuring the NULL time provider, where log_msg is
used instead of echo.

[03/30/94 public]
Changed line to a log_msg call.
Verified and Closed.



CR Number                     : 9643
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : mx300
S/W Ref Platform              : sinix
Component Name                : cfg
Subcomponent Name             : 
Short Description             : svr4 version of 1.1 fails
Reported Date                 : 12/22/93
Found in Baseline             : 1.1
Found Date                    : 12/22/93
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : many
Sensitivity                   : public

[12/22/93 public]

[5/24/94 public]

This is a place holder for the SVR4 port mods.

[8/24/94 public]
We will assume that SVR4 now works.
Bug closed.



CR Number                     : 9641
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 10343
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : 
Short Description             : Install tree paths should be changed
Reported Date                 : 12/21/93
Found in Baseline             : 1.1
Found Date                    : 12/21/93
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : dce_com_env
Sensitivity                   : public

[12/21/93 public]
Currently, the install tree for DCE and tests are:

	install/<target-machine>/opt/dce1.0
	install/<target-machine/dcetest/dce1.0

these should probably be changed to dce1.1.

This probably only affects the Buildconf files in the code and at least one
Makefile in DFS, but has some larger impacts on documentation.

dce_config also needs to change because it currently manipulates links on
/opt/dce1.0.

[01/04/94 public]
The config file which needs to change is 'dce_com_env'
which sets the variable 'DCEINSTDIR':

	${DCEINSTDIR:="$DCEROOT/dce1.0"}

[4/13/94 public]
This defect needs to be fixed in conjunction with BLD defect 10343.

Also, dcetest_config needs to change DCEINSTDIR, as well.

[8/24/94 public]
This was fixed long ago..
Closed.



CR Number                     : 9625
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : Have dce_config install audit
Reported Date                 : 12/16/93
Found in Baseline             : 1.1
Found Date                    : 12/16/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b5
Affected File(s)              : see below
Sensitivity                   : public

[12/16/93 public]
Place holder for work integrating 'audit' into dce_config.

[1/14/94 public]
Directories to create:
	/opt/dcelocal/etc/audit
	/opt/dcelocal/etc/audit/update_notify
	/opt/dcelocal/var/audit/
	/opt/dcelocal/var/audit/adm	- auditd running directory
		owned: root  mod: 700

[3/15/94 public]
Files submitted:

	config.cmd
	dce.clean
	dce_config
	rc.dce

[3/16/94 public]
Closed,



CR Number                     : 9621
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : cfg
Subcomponent Name             : config
Short Description             : bad message
Reported Date                 : 12/15/93
Found in Baseline             : 1.0.3
Found Date                    : 12/15/93
Severity                      : E
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dce_config
Sensitivity                   : public

[12/15/93 public]

When asking users if they are using Multiple LAN's in the cell, the
message is quite confusing.

Proposed change from :

echo "\n\tIs this cell using multiple LANs?"
>               echo "\tSpecifically, are clients and servers divided into profile"
>               echo "\tgroups to facilitate performance? Most cells will not require"
>               echo "\tthis feature."

TO :

echo "\tCreate LAN profile so clients and servers can be devided"
<               echon "\tinto profile groups for higher performance in a multi-lan cell ? (n) "

[03/30/94 public]
Rewrote message using the text provided for clarity.
Verified and Closed.



CR Number                     : 9611
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : cfg
Subcomponent Name             : config
Short Description             : follow links
Reported Date                 : 12/13/93
Found in Baseline             : 1.0.3
Found Date                    : 12/13/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.2.1
Affected File(s)              : dce.rm, rc.dce, dce_shutdown
Sensitivity                   : public

[12/13/93 public]

In files dce.clean, dce.rm, and rc.dce, removing of credential files
does not work if they are links.

The following code should be used instead :

if [ -d $DCELOCAL/var/security/creds ] ||
   [ -h $DCELOCAL/var/security/creds ]; then
        log_msg DEBUG "dce.clean: Removing $DCELOCAL/var/security/creds/*"
        find $DCELOCAL/var/security/creds -follow -type f -print | xargs rm -f
fi

[03/29/94 public]
So you are saying that the credentials file themselves are links?
How or why would this happen?

Even if it did, do we want to blindly follow symlinks to who knows where?

[03/30/94 public]
Is -follow Posix?  I know that it is not in all versions of find (e.g.,
Ultrix).  Irregardless, I think this is a better fix:
    if [ -d $DCELOCAL/var/security/creds/. ] ; then
        log_msg DEBUG "dce.clean: Removing $DCELOCAL/var/security/creds/*"
        find $DCELOCAL/var/security/creds/. -type f -print | xargs rm -f
    fi

[02/6/96 public]
Fixed as Rich said. Closed.



CR Number                     : 9610
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : cfg
Subcomponent Name             : config
Short Description             : /dev/lan0
Reported Date                 : 12/13/93
Found in Baseline             : 1.0.3
Found Date                    : 12/13/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dce_config
Sensitivity                   : public

[12/13/93 public]

The line in dce_config that performs :

	chmod ugo+rw /dev/lan0, should be changed to
        chmod ugo+r /dev/lan0
A write permission is not required as it is a security breach.
Also uuidgen does not require the file to be rw anymore.

[03/30/94 public]
Changed the chmod in dce_config for HP-UX to give only read permissions.
Verified that uuidgen worked as an unpriveledged user.
Closed.



CR Number                     : 9606
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce.rm
Short Description             : dce.rm misses krb5kdc_rcache file
Reported Date                 : 12/10/93
Found in Baseline             : 1.0.3a
Found Date                    : 12/10/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dce.rm
Sensitivity                   : public

[12/10/93 public]
Discovered that dce.rm does not remove /opt/dcelocal/dce_cf.db OR
/opt/dcelocal/var/security/rcache/krb5kdc_rcache. There may be 
others that are missed - I found out about these 2 because I was
forced to steal an install tree from an installed machine rather
than the install tree. I thought doing a dce.rm before config'ing
would be sufficient but it wasn't - I had to remove these 2 files
as well. Symptoms were:
	- attempted to add a hosts/<hostname>/self principal where
	hostname matched what was in dce_cf.db but NOT the hostname
	of the machine I was configuring
	- with above problem fixed, the cdscp define cached server
	command failed with:

	S:****** orange cdsadv daemon has not received any responses to its broadcast for CDS servers.  Executing a "cdscp define cached server" command...
ERROR:   cdscp error during "define cached server" command.
  Message from cdscp:
  Failure in routine: cp_define_cached_server
decrypt integrity check failed (dce / rpc)
        Press <RETURN> to continue, CTRL-C to exit: 

	Apparently due to the left over rcache file since removing
	it solved the problem.

Not the most scientific approach but thought I'd log this for future
reference nonetheless.

[12/13/93 public]
surf>grep dce_cf /etc/dce.rm
        # Remove dce_cf.db
        log_msg DETAIL "dce.rm: Executing: rm -f $DCELOCAL/dce_cf.db"
        rm -f $DCELOCAL/dce_cf.db
surf>fgrep rcache /etc/dce.rm 
log_msg DETAIL "dce.rm: Executing: rm -f /usr/tmp/krb5kdc_rcache"
rm -f /usr/tmp/krb5kdc_rcache

So, it *does remove the dce_cf.db file.  Something must have gone
wrong on your machine.

The security file was moved and /etc/dce.rm was not updated at the
same time (Bad bad bad), so perhaps Rajendra can track down the person
who did that and assign them this bug.

Assigned to Rajendra.

[12/16/93 public]
The dfs 1.0.3a team does NOT need this fixed by 1.0.3a - deferring to core 1.1 release.

[5/25/94 public]
Fixing this - removing /opt/dcelocal/var/security/rcache/krb5kdc_rcache
in dce.rm.

[5/25/94 public]
Submitted.



CR Number                     : 9570
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : cfg
Subcomponent Name             : config
Short Description             : slay()'s message
Reported Date                 : 12/2/93
Found in Baseline             : 1.0.3
Found Date                    : 12/2/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dce_com_utils
Sensitivity                   : public

[12/2/93 public]

Change the message given by the slay() routine in dce_com_utils.
Do not display Darn! missed!

[03/30/94 public]
Got rid of the explitives in the saly message.
Verified and Closed.



CR Number                     : 9557
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : cfg
Subcomponent Name             : config
Short Description             : config()
Reported Date                 : 11/29/93
Found in Baseline             : 1.0.3
Found Date                    : 11/29/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dce_config
Sensitivity                   : public

[11/29/93 public]

In config(), the option when configuring a security replica
server should have settimezone,auth_login, verify_auth preceeding
the call to config_secreplica

[03/30/94 public]
Added calls to the above routines before config_secreplica, config_audit,
and config_morecds.
Verified and Closed.



CR Number                     : 9556
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : cfg
Subcomponent Name             : config
Short Description             : remove menu 2 call
Reported Date                 : 11/29/93
Found in Baseline             : 1.0.3
Found Date                    : 11/29/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dce_config
Sensitivity                   : public

[11/29/93 public]

At the end of config_morecds() routine there is a call
to menu2.  This completely breaks down the non-interactive mode.
Solution: remove it.

[03/30/94 public]
Removed all explicit calls to menu routines.  Even though some places
it might be slightly more helpfull to the user, I think consistantly
returning to when you came from it better.
Verified and Closed.



CR Number                     : 9527
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : cfg
Subcomponent Name             : config
Short Description             : FIRST_BOOT variable
Reported Date                 : 11/22/93
Found in Baseline             : 1.0.3
Found Date                    : 11/22/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : rc.dce, dce_com_env
Sensitivity                   : public

[11/22/93 public]

The problem is that the security credential files in
/opt/dcelocal/var/security/creds aren't being deleted
when you start DCE via dce_config option (START).

The problem occurs when we do a reboot after the cell is up
and running.

At the lowest level, the problem is that the FIRST_BOOT env 
variable is comming up "0" when rc.dce runs.

Now, FIRST_BOOT is supposed to be set to 1 in dce_com_env
the first time that a machine is booted. 

What happend is the following :

You run dce_config ( after rebooting a machine that already was configured
                       in a cell)

  this calls ". dce_config_utils"
  this calls ". dce_config_env"
  this calls ". dce_com_env"   { since  SOURCE_COM_ENV is not defined }
     which sets SOURCE_COM_ENV = 1 { to make sure it is not called again }
     which sets FIRST_BOOT to 1 { 1st time since we've booted }

 Now we delect option (START ) from dce_config :

   dce_config calls rc.dce
     Note tat since it  didn't "." it, rc.dce is run in a separete
  process and all local variables are lost ... including SOURCE_COM_ENV
  which dce_com_env never exported.

   rc.dce calls ". dce_com_utils" which since SOURCE_COM_ENV was lost,
   calls ". dce_com_env" again which sets SOURCE_COM_ENV =1 again
   which sets FIRST_BOOT = 0 { not first time since boot }

  Hence we do not delete the credential files.


The solution is to move the following lines from dce_com_env 
to rc.dce :

: ${BOOT_TIME:="$DCELOCAL/etc/boot_time"}
touch $BOOT_TIME
boot_time=`who -b | cut -c25-36`
if [ "$boot_time" != "`cat $BOOT_TIME`" ]
then
        FIRST_BOOT=1
        echo $boot_time > $BOOT_TIME
else
        FIRST_BOOT=0
fi
export FIRST_BOOT

[03/30/94 public]
Moved the FIRST_BOOT code to rc.dce.
Closed.



CR Number                     : 9504
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : cfg
Subcomponent Name             : config
Short Description             : new variable
Reported Date                 : 11/17/93
Found in Baseline             : 1.0.3
Found Date                    : 11/17/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dce_config_env
Sensitivity                   : public

[11/17/93 public]

The following variable is added to provide NON-interactive
support when configuring additional CDS servers.

In file dce_config_env add the following entries :

...
DCE_VAR_LIST="EXIT_ON_ERROR     DO_CHECKS       REMOVE_PREV_INSTALL
        REMOVE_PREV_CONFIG      SEC_SERVER      SEC_SERVER_IP
        UNCONFIG_HOST_PRESET    CELL_NAME       CACHE_CDS_SERVER
        CACHE_CDS_SERVER_IP     HOSTNAME_IP     REP_CLEARINGHOUSE
        NTP_HOST                MULTIPLE_LAN    LAN_NAME
        CELL_ADMIN              TOLERANCE_SEC   TP_DEV
        check_time              DEFAULT_MAX_ID  UID_GAP
        LOW_UID                 GID_GAP         LOW_GID
        SYNC_CLOCKS             HPDCE_DEBUG     FILESYSTEM
        MEDIA                   DTS_CONFIG      CP_OR_SYMLINK
        USE_DEF_MSG_PATH        SEC_REPLICA     DIR_REPLICATE"
                                                -------------
                                                  ^
                                                  |------------- new variable
...
export DIR_REPLICATE
# DIR_REPLICATE: "n" if user does not wish to replicate more
# directories in an additional CDS server at configuration time
...

In file dce_config add the following entries at the very end of function
cds_replicate(), instead of previous stuff:

	dir_replicate=${DIR_REPLICATE:="NULL"}
        until [ ${dir_replicate:="NULL"} != "NULL" ];do
                log_msg VERBOSE "User query: Should more directories be replica
ted? (n)  "
                echon "\tShould more directories be replicated? (n)  "
                read dir_replicate
                dir_replicate=${dir_replicate:-"n"}
                log_msg VERBOSE "User entry: $dir_replicate"
        done
        case $dir_replicate in
                y) replicate_more;;
                yes) replicate_more;;
                *) ;;
        esac

[03/30/94 public]
Added the new variable and the code to support it.
Verified and Closed.



CR Number                     : 9503
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : cfg
Subcomponent Name             : config
Short Description             : resizing of windows
Reported Date                 : 11/17/93
Found in Baseline             : 1.0.3
Found Date                    : 11/17/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dce_com_utils
Sensitivity                   : public

[11/17/93 public]

Everytime that a window is resized when running dce_config, the
program exits.

The following is the fix to the file dce_com_utils

In function get_option ...

get_option()
{
        trap "" 23    <----- Add this line
        read opt
        if [ $? = 1 ]
...

[03/30/94 public]
Added the trap command.
Verified and Closed.



CR Number                     : 9502
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : cfg
Subcomponent Name             : config
Short Description             : dce.rm to remove /krb5/krb.conf
Reported Date                 : 11/17/93
Found in Baseline             : 1.0.3
Found Date                    : 11/17/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dce.rm
Sensitivity                   : public

[11/17/93 public]

The following is the fix to the file dce.rm;  Please add the following
lines :

log_msg DETAIL "dce.rm: Executing: rm -f $HOME/.rgy_editrc"
rm -f $HOME/.rgy_editrc
log_msg DETAIL "dce.rm: Executing: rm -f $KRB5/krb.conf" <--add this line
rm -f $KRB5/krb.conf                                     <--add this line

[5/25/94 public]
Added new code.
Submitted.



CR Number                     : 9412
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : admin_gd
Short Description             : add info on changing IP address
Reported Date                 : 11/9/93
Found in Baseline             : 1.0.3
Found Date                    : 11/9/93
Severity                      : B
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : admin_gd/overview/overview/9_tasks.gpsml
Sensitivity                   : public

[11/9/93 public]

Dave Weisman has written a short desription of how to change a
DCE machine's IP address, which should be added to the Admin Guide.

[11/12/93 public]

Changed "fixby" to 1.1 from 1.0.3.

[11/12/93 public]

This is my fault. This has been fixed in both the Admin Guide (see
the file above; it's Chapter 6 of the Intro book; this information
makes a new section 6.2) and in the Release Notes. I just forgot to
update this report. Sorry.

[11/12/93 public]

Verified by Dave Weisman and John Dugas.

[11/15/93 public]

Verified changes in latest doc build and
closed this CR.



CR Number                     : 9403
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : gda_child doesn;t get installed
Reported Date                 : 11/8/93
Found in Baseline             : 1.0.3
Found Date                    : 11/8/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : src/config/dce_config
Sensitivity                   : public

[11/8/93 public]
gda_child doesn;t get installed. Intercell through GDS doesn;t work without it.

[11/8/93 public]
Fixed.

[11/9/93 public]
Verified by installation of NB of 11/8 on RIOS, HPUX, and AT386.



CR Number                     : 9382
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 9322
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : installing libNDS.so... printed twice during install on OSF/1
Reported Date                 : 11/5/93
Found in Baseline             : 1.0.3
Found Date                    : 11/5/93
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b4
Affected File(s)              : config/dce_config
Sensitivity                   : public

[11/5/93 public]

The message "installing libNDS.so..." is printed twice when installing GDS
on OSF/1:

         DCE Installation Menu ( on tahiti )

         1. Security Server
         2. CDS Server
         3. DTS Server
         4. GDS Server
         5. DFS Server

         6. DCE Client
         7. Application Development Environment
         8. Optional Utilities
         9. Replica Security Server
        10. DFS Client

        98. Return to previous menu
        99. Exit

        selection:  4
                installing gdscache gdscacheupd gdschdb gdscmxl gdsconf ...
                installing gdscrontab gdscstub gdsdaemon gdsdbread ...
                installing gdsdbwrite gdsdeact gdsditadm gdsdsa gdsexec ...
                installing gdsgendb gdshdlcache gdshdlupd gdsinfo gdsipcchk ...
                installing gdsipcinit gdsipcstat gdslog gdsmkiss gdsmkupd ...
                installing gdssstub gdsstart gdsstep gdssysadm gdstransfer ...
                installing gdsdirinfo gdsutil gdslanguage gdsdistcmd  ...
                installing gdscacheadm ndscomp ...
=====>          installing libNDS.so ...
=====>          installing libNDS.so...
                Run /sbin/lib_admin? (y)  
                default client binaries already installed ...

[2/18/94 public]
Fixed with fix for defect 9322.

[3/9/94 public]
Closed.



CR Number                     : 9323
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : port_gd
Short Description             : update Porting Guide for 1.0.3
Reported Date                 : 11/2/93
Found in Baseline             : 1.0.2
Found Date                    : 11/2/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : port_gd/*
Sensitivity                   : public

[11/2/93 public]

I just realized there was no general bug open for this work.

[11/3/93 public]

Assigned this bug to Doug Weir.

[11/29/93 public]

The DCE 1.0.3 work on the Porting Guide is now finished.

[12/21/93 public]
Closed.



CR Number                     : 9322
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : libNDS.so installation problem
Reported Date                 : 11/2/93
Found in Baseline             : 1.0.3
Found Date                    : 11/2/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b4
Affected File(s)              : src/config/dce_config
Sensitivity                   : public

[11/2/93 public]
In the case where:
	- a user has previously installed GDS and, consequently, gotten
libNDS.so 
	- has deleted libNDS.so (usually by physically removing
opt/dcelocal)
	- and is reinstalling the DCE core but has not yet re-installed GDS

Then the user will see the following error:

S:****** Successfully removed all remnants of previous DCE installations
for all components.
                installing sec_create_db sec_salvage_db secd ...
                installing rpcd cdsadv cdsclerk dtsd sec_clientd...
                installing dts_null_provider dts_ntp_provider...
                installing rpccp uuidgen cdscp getcellname getip...
                installing acl_edit dce_login rgy_edit dtscp...
                installing sec_admin passwd_import passwd_export...
                installing kinit klist kdestroy...
                copying libdce.so to /usr/shlib...
                installing libdce.so...
                Run /sbin/lib_admin? (y)                               
error installing library: No such file or directory
installing library /usr/shlib/libNDS.so
ERROR:   /sbin/lib_admin /etc/lib_admin.conf failed
        Press <RETURN> to continue, CTRL-C to exit:   
                installing message catalogs...


This is because the there is still an entry for libNDS.so in the
/etc/lib_admin.conf file but it has not yet been installed.

Workarounds are:
	- go on to install GDS.  It will ask you again whether you want to
run lib_admin again.

or

	- remove the libNDS entry from /etc/lib_admin.conf and rerun
lib_admin by hand.

[2/18/94 public]
Fix submitted.  The fix was in install_common():  re-install libNDS
whenever and entry for it is /etc/lib_admin.conf.

[2/23/94 public]
Closed.



CR Number                     : 9314
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 11434,11433,11224
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce.rm
Short Description             : DCE does not remove entire GDS
configuration information
Reported Date                 : 11/2/93
Found in Baseline             : 1.0.3
Found Date                    : 11/2/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : src/config/dce.rm
Sensitivity                   : public

[11/2/93 public]
dce.rm removes gdsconfig but does not remove the directory and cache
information from the dcelocal directory.

[07/20/94 public]
dce.rm history says that this was fixed by Howard Melman on 1992/06/30 -
it's before this defect was opened. Anyway - there is still a bug
in dce.rm:

log_msg DETAIL "dce.rm: Executing: rm -rf $DCELOCAL/var/directory/gds/cache/*"
rm -rf $DCELOCAL/var/directory/gds/cache/*

should change to

log_msg DETAIL "dce.rm: Executing: rm -rf $DCELOCAL/var/adm/directory/gds/cache/*"
rm -rf $DCELOCAL/var/adm/directory/gds/cache/*

I'll fix this soon.

[07/26/94 public]
Fix submitted.



CR Number                     : 9287
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : cfg
Subcomponent Name             : admin_ref
Short Description             : update dce_config man page 
to reflect enhanced functionality.
Reported Date                 : 10/28/93
Found in Baseline             : 1.0.3
Found Date                    : 10/28/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config.8dce
Sensitivity                   : public
Inter-dpendent CRs            : 

[10/28/93 public]
The dce_config man page (which I just noticed 
existed!) needs to be updated to reflect new 
invocation options.

[11/3/93 public]
Fixed and verified.  Verified by Tom Jordhal.

[11/12/93 public]

Verified changes in latest doc build and closed this bug.



CR Number                     : 9277
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : cfg
Subcomponent Name             : 
Short Description             : bdf as non-root cannot get at agfs mt points.
Reported Date                 : 10/27/93
Found in Baseline             : 1.0.2a
Found Date                    : 10/27/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.2.1
Affected File(s)              : dfs_config
Sensitivity                   : public
Transarc Deltas               : 
Transarc Herder               : jaffe@transarc.com
Transarc Status               : open

[10/27/93 public]
dfs_config sets the mode of /opt/dcelocal/var/dfs to 0701.  The bdf utility
tries to look up the agfs mount points, which are in
/opt/dcelocal/var/dfs/aggrs, and if you are not logged in as root but
are in the "wrong" group, it fails.  It would work if the mode were 0711
(I've tried it).
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `jaffe@transarc.com' 
Added field Transarc Status with value `open'

[8/24/94 public]
Maybe Ron will fix this....

[2/6/96 public]
Closed. Fixed in 1.2.1.



CR Number                     : 9229
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : timop
Short Description             : defunct obsolete Makefiles and cma_stdio.c
Reported Date                 : 10/21/93
Found in Baseline             : 1.0.2
Found Date                    : 10/21/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : test/sample/Makefile.*, cma_stdio.c
Sensitivity                   : public

[10/21/93 public]

The following Makefiles, currently in the timop subtree, should be
defuncted:

Makefile.osf1_shared_libdce  -- no longer necessary
Makefile.samp                -- apparently a holdover from the Developer's
                                Kit

cma_stdio.c                  -- also apparently used in the Developer's Kit
                                to include the Threads wrappers

[10/21/93 public]

I forgot one more Makefile:

Makefile.timop               -- this was the original "basic" Makefile to
                                build on the reference platform, now super-
                                seded by Makefile, or Makefile.486 or Makefile.AIX,
                                depending on the platform.

[11/2/93 public]

This is all done now. There are now only two Makefiles in test/sample: Makefile
(to install the files), and Makefile_timop (supplied by Tom Jordahl), for building
timop on any platform.

[11/12/93 public]

Tested on the HP, 486, and AIX platforms. After checking with Tom Jordahl, I'm
closing this bug.



CR Number                     : 9215
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : cfg
Subcomponent Name             : timop
Short Description             : port timop to HP platform
Reported Date                 : 10/20/93
Found in Baseline             : 1.0.2
Found Date                    : 10/20/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : test/sample/timop*
Sensitivity                   : public

[10/20/93 public]

timop has to be ported to the HP reference platform for 1.0.3.

[11/2/93 public]

This has been done. timop now builds and runs on the HP, and on the 486
and AIX platforms too.

[11/12/93 public]

Tested on the HP, 486, and AIX platforms. After checking with Tom Jordahl,
I'm closing this bug.



CR Number                     : 9147
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : app_ref
Short Description             : intro(3dce) section missing dce_cf_profile_entry_from_host()
Reported Date                 : 10/18/93
Found in Baseline             : 1.0.2
Found Date                    : 10/18/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : app_ref/man3dce/intro.3dce
Sensitivity                   : public

[10/18/93 public]
The intro(3dce) of the Application Reference (Volume 2) lists the
routines described in that section and omit the routine:
	dce_cf_profile_entry_from_host().

There is a man page for this function in the section.

[10/21/93 public]

Assigned this CR to myself.

[10/25/93 public]

Added dce_cf_profile_entry_from_host to the list of
DCE configuration routines and the related info section
on the dce intro man page. Fixed and verified (by me).

[11/11/93 public]

Verified change in latest doc build and closed this CR.



CR Number                     : 9146
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 7582
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : app_ref
Short Description             : dce_cf* routines should use error_status_t for status params
Reported Date                 : 10/18/93
Found in Baseline             : 1.0.3
Found Date                    : 10/18/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : app_ref/man3dce
Sensitivity                   : public

[10/18/93 public]
The routines dce_cf_* which have a status parameter declared as unsigned long
should change it to error_status_t.

The routines are:
dce_cf_get_host_name
dce_cf_get_cell_name
dce_cf_find_name_by_key
dce_cf_prin_name_from_host
dce_cf_profile_entry_from_host
dce_cf_binding_entry_from_host

This defect should be fixed if and when code defect 7582 is fixed.

[10/19/93 public]
Defect 7582 has been fixed in 1.0.3, so this defect needs to be fixed as well.

[10/21/93 public]

Assigned this CR to myself.

[10/24/93 public]

In the synopses of the following man pages, changed
the status parameter declaration from unsigned long
to error_status_t:

/app_ref/man3dce/dce_cf_get_host_name.3dce
/app_ref/man3dce/dce_cf_get_cell_name.3dce
/app_ref/man3dce/dce_cf_find_name_by_key.3dce
/app_ref/man3dce/dce_cf_prin_name_from_host.3dce
/app_ref/man3dce/dce_cf_profile_entry_from_host.3dce
/app_ref/man3dce/dce_cf_binding_entry_from_host.3dce

Fixed and verified (by me).

[11/11/93 public]

Verified changes in latest doc build and closed this CR.



CR Number                     : 9136
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 8646,7692,7460,7459
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : app_gd
Short Description             : description of timop must be updated
Reported Date                 : 10/15/93
Found in Baseline             : 1.0.2
Found Date                    : 10/15/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : app_gd/overview/chap3.gpsml
Sensitivity                   : public

[10/15/93 public]

The description of timop in Chapter 3 of the Application has to be revised
and updated. In particular, a detailed list of the steps necessary for installing
timop should be added to the introductory text section of this chapter.

[11/2/93 public]

This is all done. I updated the build procedure, and added a new section
with the installation steps supplied by Nick Dokos. I also updated the
README that accompanies the timop sources. Tested on the HP, 486, and AIX
platforms.

[11/11/93 public]

Verified the changes in the latest doc build and closed this CR.



CR Number                     : 9118
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : cfg
Subcomponent Name             : src/dce/config
Short Description             : syntax error breaks dce_config
Reported Date                 : 10/14/93
Found in Baseline             : 1.0.3
Found Date                    : 10/14/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config
Sensitivity                   : public

[10/14/93 public]

Smoketests of DCE core on the 3 platforms failed with the following
error message which occurs when one invokes "dce_config":

./dce_config: syntax error at line 2202: `}' unexpected

[10/14/93 public]
IT is bad that this wasn't caught by a simple execution of dce_config...
I will fix this.

[10/14/93 public]
Revamped the install of libNDS to use shared library siffix variable 
(SHLIB_SUF).  It still doesn't run lib_admin on OSF/1.  See Bug 9122.



CR Number                     : 9103
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : cellname not set
Reported Date                 : 10/13/93
Found in Baseline             : 1.0.3
Found Date                    : 10/13/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config
Sensitivity                   : public

[10/13/93 public]
When using command files the 'cellname' and 'shortcellname' varaibles
don't get set in the following scenario:

config security in one session
config cds in another session.

The problem is the the routine set_cell_name (which is normally called
at the top of menu0()) doesn't get called when you config CDS.

A simple solution is to call set_cell_name() in main() before you
execute the users command script.

[10/14/93 public]
Added the call to set_cell_name.
Verified by Bob at HP.
Closed.



CR Number                     : 9097
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : cfg
Subcomponent Name             : config
Short Description             : Change err_exit
Reported Date                 : 10/13/93
Found in Baseline             : 1.0.3
Found Date                    : 10/13/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config
Sensitivity                   : public

[10/13/93 public]

The call to err_exit in menu_hp1 in dce_config should be changed
to x_exit.  This fix by Paul Smythe at CSSL

GAMERA :
	#x_exit "\tnode $UNCONFIG_HOST before reconfiguring it."
	if [ "$do_checks" = "y" ]; then
		log_msg WARNING "A dce_config REMOVE will need to be performed from node \
$UNCONFIG_HOST before reconfiguring it."
		x_exit

OSF dce1.0.3 KK :
	#err_exit "\tnode $UNCONFIG_HOST before reconfiguring it."
	if [ "$do_checks" = "y" ]; then
		log_msg WARNING "A dce_config REMOVE will need to be performed from node \
$UNCONFIG_HOST before reconfiguring it."
		err_exit

The dce1.0.3 and kk err_exit should be replaced by the GAMERA x_exit

[10/13/93 public]
Why should we replace err_exit with the old x_exit?

[10/13/93 public]
Oh, I get it, x_exit doesn't exit if EXIT_ON_ERROR is set, and since
this message is only a warning....

[10/14/93 public]
Made the change.
Closed.



CR Number                     : 9068
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : ln: /usr/lib/libdce.a exists message during install
Reported Date                 : 10/7/93
Found in Baseline             : 1.0.3
Found Date                    : 10/7/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config
Sensitivity                   : public

[10/7/93 public]

The following message appears during the installation of DCE on an HP
machine:

	ln: /usr/lib/libdce.a exists

Line ~2377 in /etc/dce_config:

	ln -s $DCELOCAL/usr/lib/libdce.a /usr/lib/libdce.a

should be changed to:

	ln -s $DCELOCAL/usr/lib/libdce.a /usr/lib/libdce.a 2>/dev/null

[10/08/93 public]
I'll fix...

[10/08/93 public]
Fixed, tested and submitted.



CR Number                     : 9067
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce.clean and rc.dce
Short Description             : dce.clean stops GDS, BUT, rc.dce doesn't restart it
Reported Date                 : 10/7/93
Found in Baseline             : 1.0.3
Found Date                    : 10/7/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b1
Affected File(s)              : src/config/rc.dce
Sensitivity                   : public

[10/7/93 public]

/etc/dce.clean stops GDS, but /etc/rc.dce doesn't restart it.  We should
either make /etc/rc.dce start GDS or stop /etc/dce.clean from killing it.
Also, since GDS doesn't need DCE running, you may want to stop or start DCE
but not GDS.  Maybe the killing and starting of GDS should be optional in
dce.clean and rc.dce.

[10/08/93 public]
This has always been the case.  I would say that the GDS shutdown should
be removed from dce.clean if your going to 'complain' about dce.clean
do you a service.

Until dce_config will configure GDS, I think this is fine as is.
I will leave it up to Rich Zeliff to decide how much GDS support
should be in the scripts.

[10/20/93 public]
Defering this until 1.1.  I'd point out that this is part of the gdscp
problem space.

[1/5/94 public]
Submitted today.

[3/16/94 public]
Closed.



CR Number                     : 9059
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dfs.clean
Short Description             : removes noexec link unconditionally
Reported Date                 : 10/6/93
Found in Baseline             : 1.0.3
Found Date                    : 10/6/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : src/config/dfs.clean
Sensitivity                   : public

[10/6/93 public]
Clem (?) at HP Fort Collins found this.  dfs.clean unconditionally 
removes the dce_login_noexec link.  It needs to check if it exists 
when it starts and don't remove it if that's the case.

[10/14/93 public]
Fixed a few days ago.

[11/10/93 public]
Closed.



CR Number                     : 9042
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 8894
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : cfg
Subcomponent Name             : dfs_config
Short Description             : kload is questionably installed
Reported Date                 : 10/5/93
Found in Baseline             : 1.0.3
Found Date                    : 10/5/93
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : src/config/dfs_config, src/config/rc.dfs, src/noship/file/Makefile
Sensitivity                   : public
Transarc Deltas               : 
Transarc Herder               : jaffe@transarc.com
Transarc Status               : open

[10/5/93 public]
The dfs_config script expects to find the kload binary in ext/kload, and
then installs it into ext/kload.  The problem is that the rest of the script
uses bin/kload.  The rc.dfs script also uses bin/kload as the binary path.
I would suggest either changing the installation portion to put the kload
binary in bin, or to executer the kload binary out of ext (my preference).
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `jaffe@transarc.com' 
Added field Transarc Status with value `open'

[10/5/93 public]
Just a note that this is related to 8894 -- same problem except in
dce_config.

[10/14/93 public]
Fixed.  Modify kload Makefile to install it in ext, modify dfs_config
and rc.dfs to look for it in ext.

[11/10/93 public]
Closed.



CR Number                     : 8895
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486,rs6000
S/W Ref Platform              : osf1,aix
Component Name                : cfg
Subcomponent Name             : src/config
Short Description             : dce.rm invokes dfs.rm, ditto clean
Reported Date                 : 10/4/93
Found in Baseline             : 1.0.3
Found Date                    : 10/4/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config, dce.clean, dce,rm
Sensitivity                   : public

[10/4/93 public]

When running dce_config, eg, to install and configure a DCE core test cell
for smoketest, dce.rm and dce.clean respectively call dfs.rm and dfs.clean
which each attempt a cell administrator login which is harmless but irrelevant
to this stage of a core cell installation & configuration.

[10/04/93 public]
Actually, it is only dce.clean/dfs.clean which has the dce_login problem.
dfs.clean should be run before killing the core daemons.

[10/04/93 public]
Fixed.

[11/10/93 public]
Closed.



CR Number                     : 8881
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : cfg
Subcomponent Name             : config
Short Description             : dce_config using wrong clearinghouse name
Reported Date                 : 9/30/93
Found in Baseline             : 1.0.3
Found Date                    : 9/30/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_com_env
Sensitivity                   : public

[9/30/93 public]

dce_config uses HOSTNAME and appends _ch as the clearinghouse to
modify acls on.  CDS takes hostname and strings everything after
the first dot.  So unless HOSTNAME is the simple name, configuring
CDS server fails.

This change fixed it here.

 clearinghouse=`echo ${HOSTNAME}|sed -e 's/\..*$/_ch/'`

[09/30/93 public]
HOSTNAME is defined in dce_com_env to not have a domain name.
How are you getting it with a domain name in ns_init?
HOSTNAME is set with the command 'uname -n'.

[09/30/93 public]
uname -n on my OSF/1 pc486 produces dnsvax.lkg.dec.com
I diffed what I was using with 1.0.3 and it is the same

I do not believe this is a bug in the OSF 1.0.3 version of dce_config.

[10/01/93 public]
I'll add a cut command to remove any domain name.

You should should set your hostname to the name without the domain.
(Use the 'hostname' command as root).

[10/01/93 public]
Fixed and submitted to 1.0.3.



CR Number                     : 8875
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : Removing previously installed
dce causing dfs not being able to be installed again.
Reported Date                 : 9/29/93
Found in Baseline             : 1.0.3
Found Date                    : 9/29/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config
Sensitivity                   : public

[9/29/93 public]

Full Description:

	dce_config asks if you want to remove the previously installed DCE
the first time you install sth. If the answer is yes, dce_config will call
dce.rm. And if dfs was installed before, it will also call dfs.rm. Part of 
dfs.rm is to remove /etc/dfs_config.

	dce_config determines whether to execute the dfs install
option by first checking whether /etc/dfs_config is present. If not, it
prints out the following message:

	DFS is not available for installation and cannot be configured.

and exits.

	So if you answered 'y' to the question to remove the previously
installed dce, you are not going to be able to install dfs again.

To test, go to a machine where dce (with dfs) has been installed before.
Then use dce_config to install a new version of dce. Answer y to the
question if you want to remove the previously installed dce. Then try to
install DFS Server.

[10/01/93 public]
Oh boy, this is a problem....
I'll look in to it.

[10/14/93 public]
installed dfs_config at the same time we do dce_config (in client())
Invoke client() before trying to run dfs_config.
Closed.



CR Number                     : 8702
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : dce config gets confused when client and server are in different time zones.
Reported Date                 : 9/28/93
Found in Baseline             : 1.0.3
Found Date                    : 9/28/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : dce_config, config.env, dce_config_env
Sensitivity                   : public

[9/28/93 public]

The dce core server in our cell happens to be set on CDT while
the rest of the machines are running EDT (don't ask why, that's 
just how it is).  Anyway, when I try to configure one of the EDT
clients, dce_config complains that this client is 1 hour forward from
that of the server, when In reality it's not.



        Enter the name of your cell (without /.../): headache.qadce.osf.org
S:****** Starting rpcd...
WARNING: If "rpcd" was recently running, and was using the TCP protocol
         sequence to listen for calls to the server, then a TCP shutdown period
         of up to 4 minutes is required before restarting "rpcd" in order to
         avoid "cannot bind socket" errors.
        Press <RETURN> to continue, CTRL-C to exit:
        What is the name of the Security Server for this cell?
alcatrazWhat is the name of the Security Server for this cell?  ba
S:****** Time on shotz is forward by
                       0 years  0 months  0 days  1 hours  0 minutes  6 seconds
                    compared with time on alcatraz.
S:****** Time on shotz is not within specified tolerance (120 sec) of time on
         alcatraz.
        Do you want to synchronize shotz's system time to alcatraz (y/n)? (n) n



# rsh shotz date
Tue Sep 28 11:57:03 EDT 1993
# date
Tue Sep 28 10:57:05 CDT 1993
# hostname
alcatraz
#

[09/28/93 public]
There doesn't seem to be any way around this problem because the
method used to get the time from the remote host (telnet <host> daytime)
does not include the timezone.

The work around is to set the environment variable CHECK_TIME to 'n'.
This will prevent dce_config from trying to sync the time on the client
with that on the security server.

[8/25/94 public]
Use the dtsdate (new for 1.1) to query the security server host
using DTS.  This program (a hardlink to dtsd) will take care of setting
the clock correctly.



CR Number                     : 8695
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : message catalogs incorrectly installed
Reported Date                 : 9/27/93
Found in Baseline             : 1.0.3
Found Date                    : 9/27/93
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config
Sensitivity                   : public

[9/27/93 public]
In modifying dce_config client installation to be more specific,
I change the message catalog installation to only copy files
which began with dce* in to the message catalog directory.

This is a mistake, since it leaves out all all the gds catalogs
and idl.cat and uuidgen.cat.

[09/27/93 public]
Changed to copy all files and remove dfs (for the core install).
VErified and Closed.



CR Number                     : 8687
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : 
Short Description             : cannot execute shell scripts from dfs
Reported Date                 : 9/24/93
Found in Baseline             : 1.0.2
Found Date                    : 9/24/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : relnotes/1_overview.gpsml
Sensitivity                   : public
Transarc Deltas               : 
Transarc Herder               : 
Transarc Status               : 

[9/24/93 public]
 
When using the ksh shell you cannot execute shell scripts from DFS.
 
To recreate the problem:
 
cd /.:/fs
create shell script as follows
 
------------------------cut here----------------------------------
#!/bin/ksh
 
echo "It worked"
------------------------cut here----------------------------------
 
execute ksh foo and it works
chmod a+x foo
execute ./foo and you get "ksh: /././foo: cannot open"
 
This appears to be another problem with using the ":" character in your
path name.  It has also broken make from working without symbolic links.

[9/27/93 public]
Is there really any reason for this to be considered a DFS bug?
Looks like DCE to me.
Filled in Interest List CC with `cfe' 
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `' 
Added field Transarc Status with value `'

[10/14/93 public]
Changing to doc bug to document this restriction.  Changing area
to dce.

[10/13/93 public]
Walt and I would like a little more description here.  For example, does
the same thing occur in sh or csh?  Can you describe the make problems more
fully, and example would help.
 
We know that you can't put a /.: in your $PATH, but I'm not sure that this
is what this bug is about.  If it's something else, it could be a new
restriction that we hadn't thought of.

[10/13/93 public]
The problem as stated looks like a ksh problem; do we have any access to
problem-reporting channels for ksh?
Replacing ``ksh'' with ``sh'' or ``csh'' makes the problem go away.
With the original ksh script, when I use /: instead of /.: I get:
	# cd /:
	# ./foo
	/bin/ksh: //./foo: cannot open
	# echo $cwd
	/:
	# pwd
	/.../thunk.dce.transarc.com/fs
	# cd `pwd`
	# ./foo
	It worked
 
It appears that ksh (not sh or csh) has a problem with ':' in the $PWD
environment variable when it starts up.  Perhaps it's trying to canonicalize
the path to the program being executed, truncates the name in $PWD at its
first colon, then appends the named executable to it:
	(colon-truncate("/:") -> "/") CAT "/" CAT "./foo" = "//./foo"
	(colon-truncate("/.:/fs") -> "/") CAT "/" CAT "./foo" = "/././foo"
 
As to the Make problems, I have no idea.

[10/13/93 public]

When I was the Tech Lead for the AIX Reference Platform during DCE 1.0.1
integration we attempted to build DCE from DFS where the backing tree was
in one fileset and the sandbox was in another fileset.  We tried to use
ODE but make kept failing because the ODE version of make uses a ":" as
a field seperator for it's VPATH variable.  We finally had to create a
symbolic link to the /.:/fs directory before we could build.  

This is not the only case where this is a problem.  The "ksh" problem 
just came up lately with a customer that is attempting to use DFS.  We
tried to prevent the use of ":" in the DCE namespace during the earlier
naming discussions but were overridden by the OSF.

Now my customer wants to know why we use ":" in the DCE paths when it
causes these types of problems and restrictions.

Jim

[10/13/93 public]

I gather that by re-assigning this as a doc bug to document a restriction
then we are to tell the customer that they should not use the recommended
path's to the DFS namespace if they are going to use either "ksh" or "make"
from the DFS namespace.  

These programs seem to be more widely used than DCE is at the moment and
I think it would be harder to change the architecture of ksh and make
than it would be to change the DCE architecture.

Jim

[10/13/93 public]
changed to code bug.  Let's solve the code problem before figuring out what
we have to document.

[10/15/93 public]
Changed back to a doc bug for 1.0.3.  We are not going to change the 1.0.3
code as the freeze is today.  The 1.0.3 Release Notes (?) should mention
that we have seen some problems with ksh and make when run in DFS, and
suggest work-arounds (if we have them).  I'll open a separate 1.1 bug to
look into if we need to change something in the code to address these
problems.   Doug, if you need more information than is in this CR I suggest
you talk to Jim Wade directly for an explanantion of the problem.

[11/16/93 public]
This information has been added to the State of DFS section in Chapter
1 of the DCE 1.0.3 Release Notes. Ron Arbo looked at it.

[11/16/93 public]

Verified change in latest doc build and closed this CR.



CR Number                     : 8686
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : spurious complaint about missing client install
Reported Date                 : 9/24/93
Found in Baseline             : 1.0.3
Found Date                    : 9/24/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config
Sensitivity                   : public

[9/24/93 public]
On attempt to config a DFS fldb, dce_config complains that
the DCE client (sic) needs to be installed first even if
it is already installed and running.  I believe it is looking
in the wrong place for an installed libdce.

[9/24/93 public]
The error looks like:
S:****** Configuring DFS Fileset Location Database Server...
ERROR:   The DCE Client installation must be run prior to client configuration.

[09/27/93 public]
Checking the wrong paths for libdce.
Fix, tested, and submitted.



CR Number                     : 8684
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : cp: cannot access /opt/dce/lib/libdce.a: No such file or directory
Reported Date                 : 9/24/93
Found in Baseline             : 1.0.3
Found Date                    : 9/24/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config
Sensitivity                   : public

[9/24/93 public]

I get the following error message during an install on an HP machine:

cp: cannot access /opt/dce/lib/libdce.a: No such file or directory

[09/27/93 public]
Mistake in the pathname of libdce.a

[09/27/93 public]
Fixed, tested and submitted.



CR Number                     : 8660
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : aix
Component Name                : cfg
Subcomponent Name             : config
Short Description             : rc.dfs uses daemonrunning on epidaemon
Reported Date                 : 9/22/93
Found in Baseline             : 1.0.3
Found Date                    : 9/22/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : src/config/rc.dfs
Sensitivity                   : public
Transarc Deltas               : 
Transarc Herder               : jaffe@transarc.com
Transarc Status               : open

[9/22/93 public]
/etc/rc.dfs uses daemonrunning to start and verify the existence of
epidaemon.  On the aix platform, epidaemon becomes a kproc and, thus,
doesn't show up in the ps listing.  This causes a spurious failure 
message to be printed.
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `jaffe@transarc.com' 
Added field Transarc Status with value `open'

[10/5/93 public]
Fixed.  Removed ps check for existence of epidaemon.  If there's
another way to check that it started properly, we should do that.

[11/10/93 public]
Closed.



CR Number                     : 8654
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : Misleading install dir prompt
Reported Date                 : 9/22/93
Found in Baseline             : 1.0.3
Found Date                    : 9/22/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dce_config
Sensitivity                   : public

[9/22/93 public]

While doing dce_config installing from filesystem:
    Enter the full path to the DCE binary install tree.
    This will be the directory that contains the
    .../opt/dce1.0 directory: 
Well, /project/dce/build/dce1.0.3-weekly/install/hp800 contains the
referenced directory, so I entered that.  Wrong!  It wants the full
path of the opt directory.  Perhaps s/contains the/end with/ ?

[03/30/94 public]
Fixed up the message to say:
	"This will be the path that ends with the
	 .../opt/dce1.0 directory:"

Verified and Closed.



CR Number                     : 8646
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : cfg
Subcomponent Name             : timop
Short Description             : timop doesn't build on 486
Reported Date                 : 9/21/93
Found in Baseline             : 1.0.3
Found Date                    : 9/21/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : test/sample/Makefile_timop
Sensitivity                   : public

[9/21/93 public]
timop doesn't build on the 486 platform. The problem is in the
Makefile, apparently in the IDL command line.

[11/2/93 public]
Fixed. The timop sources now have a single Makefile (written by
Tom Jordahl) that can be used to build it on the HP, 486, or AIX.

[11/12/93 public]
Tested on the HP, 486, and AIX platforms. After talking with Tom
Jordahl, I'm closing this bug.



CR Number                     : 8629
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : config
Short Description             : Config needs to be automated
Reported Date                 : 9/17/93
Found in Baseline             : 1.0.3
Found Date                    : 9/17/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : config/*
Sensitivity                   : public

[9/17/93 public]

This OT will cover a lot of internal changes.

In order to support a more automated and extensive smoketesting
of builds, and to provide developers with a much needed ability,
dce_config (and dfs_config) need to be enhanced to read
configuration scripts.

This involves command line switches to dce_config and
requires that all user prompts can use environment variables
to get input.  This capability was provided by HP, but several
DFS procedures were missing it.

In addition, two new functions : config and install will be added
which can be called from user written scripts.

Also covered under this enhancement is a new menu item, DFS Client,
which will be added to the Configuration Menu (item 4).
This will replace the question at the end of DCE Client config
and after you have configured a DFS server.

This should make it clearer to an admin how to configure DFS.

[10/14/93 public]
These changes are in to the source tree.
Verified and closed.



CR Number                     : 8625
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : relnotes
Short Description             : information on upgrading DCE must be included
Reported Date                 : 9/17/93
Found in Baseline             : 1.0.2
Found Date                    : 9/17/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : relnotes/1_overview.gpsml
Sensitivity                   : public

[9/17/93 public]

Information on the procedures necessary for upgrading from an
operating version of DCE to a newer version of DCE must be included
in the Release Notes on a regular basis from now on. 

From a note from Howard Melman:

 It might be as simple as bringing down DCE, copying in the
 new executables and libdce (and any other libraries) and
 restarting the cell.

 Even if it's that simple, we should document it.

 There should be a note that going from any one version to
 another might require extra steps like upgrading a database,
 see release notes for the version you are dealing with.

[11/2/93 public]

This is done. I inserted a section "Updating a DCE Cell" at the end
of Chapter 2 of the Release Notes, incorporating the substance of a
message from Tom Jordahl. Tom checked the new section.

[11/11/93 public]

Verified change in latest doc build and closed this CR.



CR Number                     : 8596
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : mx300
S/W Ref Platform              : sinix
Component Name                : cfg
Subcomponent Name             : 
Short Description             : SVR4 reference port
Reported Date                 : 9/14/93
Found in Baseline             : 1.0.3
Found Date                    : 9/14/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : Too many files to be listed here.
Sensitivity                   : public

[9/14/93 public]

dce1.0.3 doesn't build on the SVR4 reference platform.

[10/20/93 public]
Closed.



CR Number                     : 8595
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : admin_gd
Short Description             : Revise chapters in admin_gd for 
readability and new dce_config enhancements
Reported Date                 : 9/14/93
Found in Baseline             : 1.0.3
Found Date                    : 9/14/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : defuncted 6_config.gpsml, 
7_cellconfig.gpsml, and 8_servconfig.gpsml.  Created 
6config_over.gpsml, 7_install_gpsml, 8_config.gpsml, 8.1_managing.gpsml, 
and 8.2_customizing.gpsml
Sensitivity                   : public

[9/14/93 public]
Revise admin_gd chapters on using dce_config, specifically 
"Overivew of DCE Installation and Configuration Script," 
"Phase One: Initial Cell Configuration," and 
"Phase Two: Configuring DCE Clients and Additional DCE Services."
Actually this is more than revising.  There are now 5 new chapters 
to replace the existing ones (1. Overview of dce_config Script, 
2. Installing DCE, 3. Configuring DCE Servers, 4. Managing DCE 
Configurations, and 5. Customizing the dce_config Script).  These 
new chapters reflect the dce_config revisions initiated by HP.

[9/24/93 public]
Fixed.  Will move to verified after format OSF review.

[11/8/93 public]
Verified by Tom Jordhal.

[11/12/93 public]

Verified new chapters in latest doc build and closed this CR.



CR Number                     : 8584
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : HP doesn't support backslash-t for tab in echo
Reported Date                 : 9/10/93
Found in Baseline             : 1.0.3
Found Date                    : 9/10/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config_utils
Sensitivity                   : public

[9/10/93 public]
The function log_env_values() uses '\t' to get tabs, but the HP
shell doesn't make tabs out of them....

[09/13/93 public]
Removed the '\t'.
Closed.



CR Number                     : 8583
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : dce_config doesn't ask about multiple lans in client config
Reported Date                 : 9/10/93
Found in Baseline             : 1.0.3
Found Date                    : 9/10/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config
Sensitivity                   : public

[9/10/93 public]
dce_config doesn't ask you if you want you machine in a particular
LAN when configing the CDS client.

ask_multiple_lans() should be called in ns_client_init()

[09/13/93 public]
Added the call to multiple_lans().
Closed.



CR Number                     : 8582
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : dce_config has machine dependent variables
Reported Date                 : 9/10/93
Found in Baseline             : 1.0.3
Found Date                    : 9/10/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config dce_com_env
Sensitivity                   : public

[9/10/93 public]

There are variable set in dce_config which should be set in the
machine dependant section of dce_com_env:


CPOPT=-p                      # argument to preserve file attributes

SECCRED_FILE=dcecred_ffffffff         #OSF1
SECCRED_DATAFILE=dcecred_ffffffff.data        #OSF1

CDS_GLOBALNAMES=cds_globalnames       # OSF1

# Set up filenames, commands, etc that are different for SVR4 systems
case $UNAME in
      SINIX*)
              SECCRED_FILE=dc_ffffffff
              SECCRED_DATAFILE=dc_ffffffff.dt
              CDS_GLOBALNAMES=cdsglobalnames
              UNAME=SVR4
              PSARGS=-ef
              ;;
esac

[09/13/93 public]
Moved from dce_config to dce_com_env.
Closed.



CR Number                     : 8566
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : Time sync on RIOS fails
Reported Date                 : 9/8/93
Found in Baseline             : 1.0.3
Found Date                    : 9/8/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config
Sensitivity                   : public

[9/8/93 public]

The /etc/dce_config time synchronization check fails on a RIOS because
of a "telnet hostname daytime" format difference.

Need to change:

get_server_time()
{
	log_msg DEBUG "Executing: get_server_time()"
	timestr=`$cmd 2>/dev/null | tail -1`
	# check for all patterns expected by subsequent conversion functions
	# as well as for "Connected to <host>"
	echo $timestr | egrep "( +[A-Za-z]+)+( +[0-9]+)+(:[0-9]+)+ +[0-9]+" >/dev/null 2>&1
	if [ $? != 0 ]; then
		svrtime=""
		time_err=1
		return 1
	fi
	...
	...
	...

To:

get_server_time()
{
	log_msg DEBUG "Executing: get_server_time()"
	timestr=`$cmd | egrep "( +[A-Za-z]+)+( +[0-9]+)+(:[0-9]+)+ +[0-9]+"`
	# check for all patterns expected by subsequent conversion functions
	# as well as for "Connected to <host>"
	if [ -z $timestr ] ; then
		svrtime=""
		time_err=1
		return 1
	fi
	...
	...
	...

[09/08/93 public]
Changed as suggested, but needed to redirect stderr to /dev/null.
Closed.



CR Number                     : 8556
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : Floating point User Id
Reported Date                 : 9/3/93
Found in Baseline             : 1.0.3
Found Date                    : 9/3/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config
Sensitivity                   : public

[9/3/93 public]

In the process of trying to configure DCE Security on a 486 I got the
following:

S:****** The current highest UNIX ID for persons on this node is
4294967294.
config_sec[205]: 4.29497e+09: Syntax error
        Enter the starting point to be used for UNIX ID's that
        are automatically generated by the Security Service
        when a principal is added using "rgy_edit": (4.29497e+09) 
config_sec[252]: 4.29497e+09: Syntax error

and needless to say taking the default didn't work.  This came from some
rediculously large number in the /etc/passwd entry noname, ie

root@dce3 53> grep nobody /etc/passwd
nobody:*Nologin:4294967294:4294967294:anonymous NFS user:/:
root@dce3 54>

[09/03/93 public]
This is the fault of the system's /etc/passwd file.

It has the nobody user-id in it, change your password file to
contain '-2' as the user and group id of nobody and this problem
will go away.

This change to dce_config will fix the problem:

awk -F ":" -v GAP="$uid_gap" 'BEGIN {HIGHEST=0}
{if ( $3 > HIGHEST && $1 != "nobody") HIGHEST = $3}
END {print HIGHEST " " HIGHEST+GAP}'

[09/07/93 public]
Added check for 'nobody' and 'nogroup'.
Closed.



CR Number                     : 8548
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : cfg
Subcomponent Name             : 
Short Description             : bad permissions on dce_config install
Reported Date                 : 9/1/93
Found in Baseline             : 1.0.3
Found Date                    : 9/1/93
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config
Sensitivity                   : public

[9/1/93 public]
If I configure a DCE machine with a umask of 077, I cannot
subsequently get at many of the necessary binaries under 
/opt/dcelocal as a non-root user (i.e. klist, dce_login etc.)

[09/01/93 public]
Why should this work?

Don't do this!  dce_config depends on cp -p working correctly
and cp will take the umask in to consideration.

I guess I could add a 'umask 0' command to dce_config...

[09/02/93 public]
Added a umask 000 command to dce_config.
Closed.



CR Number                     : 8514
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : 
Short Description             : dce_config prints ps output to the user.
Reported Date                 : 8/26/93
Found in Baseline             : 1.0.3
Found Date                    : 8/26/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config
Sensitivity                   : public

[8/26/93 public]

dce_config can print out the output from a ps command when it shouldn't.
This happens in the check_app_prereqs() function after checking if you are
running secd.  It then checks to see if you are running sec_client, but the
grep uses -v instead of -q.  Thus, the test is wrong and it also lets the
ps output through and prints it to standard out.  Here is what needs to be
changed:

	# Is this a security server?
	ps ${PSARGS} | grep -q secd
	if [ $? != 0 ]; then
		# This configuration is needed because this machine is
		# not running the secd daemon, so isn't a sec server
		# Is this machine already a security client?
!		ps ${PSARGS} | grep -v sec_clie
		if [ $? != 0 ]; then
			config_secclient
			log_msg SUMMARY "This node is now a security client."
		fi
	fi

to:

	# Is this a security server?
	ps ${PSARGS} | grep -q secd
	if [ $? != 0 ]; then
		# This configuration is needed because this machine is
		# not running the secd daemon, so isn't a sec server
		# Is this machine already a security client?
!		ps ${PSARGS} | grep -q sec_clie
		if [ $? != 0 ]; then
			config_secclient
			log_msg SUMMARY "This node is now a security client."
		fi
	fi

[08/26/93 public]
Changed the -v to -q.



CR Number                     : 8509
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : 
Short Description             : dfs_config broken for Episode
Reported Date                 : 8/24/93
Found in Baseline             : 1.0.3
Found Date                    : 8/24/93
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dfs_config
Sensitivity                   : public

[8/24/93 public]
The following case statement in dfs_config is incorrect:

>        echo  "\tIt may have already had an Episode or UFS filesystem on it."
>        echo  "\tWould you like to force initialization"
>        echon "\tand possibly lose data [n]?  "
>        get_string
>        string=${string:-"n"}
>        log_msg VERBOSE "User entry: $string"
>      done
>
>      case $string in
>              n|no) ;;
>              *)  err_exit "Partition $partname was NOT initialized.  \
>Continuing may cause subsequent failures."
>                  return
>                 ;;
>      esac
>      # otherwise ...

It should be:

>        echo  "\tIt may have already had an Episode or UFS filesystem on it."
>        echo  "\tWould you like to force initialization"
>        echon "\tand possibly lose data [n]?  "
>        get_string
>        string=${string:-"n"}
>        log_msg VERBOSE "User entry: $string"
>      done
>
>      case $string in
>              y|yes) ;;
>              *)  err_exit "Partition $partname was NOT initialized.  \
>Continuing may cause subsequent failures."
>                  return
>                 ;;
>      esac
>      # otherwise ...

[11/12/93 public]
Fix2close.



CR Number                     : 8497
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce.rm
Short Description             : dce.rm does not check if DCE is up
before starting to delete everything
Reported Date                 : 8/23/93
Found in Baseline             : 1.0.3
Found Date                    : 8/23/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce.rm
Sensitivity                   : public

[8/23/93 public]

If you execute "dce.rm" and DCE is running, none of the DCE binaries get
deleted because they are in use.  The problem is, now you can't stop DCE
because dce.rm has deleted dce.clean.  You can stop DCE by hand but now
dce.rm and all the other dce.* files have also been deleted so you have
to remove the remains of DCE by hand.  This is a regression from DCE 1.0.2
which has a fix to make dce.rm check for DCE before executing.


From DCE 1.0.2a dce.rm:

# Revision 1.1.4.7  1993/01/13  15:52:19  rsarbo
#       restore start up files (rc.dce and rc.dfs) to un-configged state
#       [1993/01/11  19:16:39  rsarbo]
#
#       Prompt to stop all DCE daemons before de-configging.
#       [1993/01/11  17:32:55  rsarbo]


#
# Terminate the servers before de-configging
#
echo "\n\tStop all DCE daemons first? (y): \c"
read string
export string
case $string in
        n) ;;
        no) ;;
        N) ;;
        NO) ;;
        *) terminate_servers ;;
esac

terminate_servers()
{
        if [ -f /etc/dce.clean ]
        then
                sh /etc/dce.clean
        else
                x_exit "\n\tWarning: Unable to terminate servers; no script"
        fi
}

[08/23/93 public]
Yes but dce.rm asking you that question all the time was *annoying*.

I believe its perfectly reasonable to expect the before you run
dce.rm, you run dce.clean.  Either that, or use dce_config to
do this dirty work (which it will before you config or install).
There should be little reason to run these scripts by hand now that
dce_config will run them for you (at all the correct places).

[08/23/93 public]

Why can't dce.rm only prompt you for a response when DCE is found to be
running??  If I am removing DCE from this machine to return it to another
group that will not be running DCE I would like to be able to remove DCE
completely before giving it back to them.  I don't think having to run
dce_config install first and then dce.rm install again is very user
friendly when I could just run dce.rm install once if DCE got stopped
first.

[08/23/93 public]
Just use menu item #6:
         6. REMOVE      -stop DCE daemons and remove data files
                         created by DCE daemons

OR if this is too much for you [:-)] try this:
	/etc/dce.clean; /etc/dce.rm install

Better you having to type than millions of people having to wait
for dce.rm to kill things that aren't running.

'dce.rm install' is not documented for the user as far as I know.
It's for dce_config.

Remeber, 'dce_config install' is only for the *first* time you run
dce_config without having its aux scripts installed in /etc.  It is
not for installing dce_config.

[08/23/93 public]

Menu item #6 (REMOVE) does not delete DCE, it just stops and unconfigures it,
I want to delete it.  If there was a check in dce.rm to see if DCE was running
noone would have to wait for dce.rm to kill things that aren't running except
for me, who I guess is the only one who tries to run dce.rm without stopping
DCE first.  I can handle the workarounds if I have to, if you really don't
want to change dce.rm then you can cancel this defect.

[09/13/93 public]
Not going to get 'fixed' for 1.0.3.  Perhaps when we get a new dce_config
owner (besides me) Paul can convince them that this should be done.
For now, lowering the priority to C3.

[09/17/93 public]
Well, I guess I got a few more complaints and the fix isn't that hard....

> pid=`get_pid rpcd`
> if [ "$pid" -ne "-2" ]
> then
>       ${ETC}/dce.clean
> fi

Fixed and submitted.



CR Number                     : 8488
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dfs_config
Short Description             : memory cache option for dfs client can't find CacheInfo file
Reported Date                 : 8/20/93
Found in Baseline             : 1.0.3
Found Date                    : 8/20/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : src/config/dfs_config
Sensitivity                   : public

[8/20/93 public]

I chose the memory cache option for the dfs client and selected all
the defaults, and got an error during configuration:


:****** Loading kernel extensions...
        Should the LFS Kernel Extension be loaded (n)?  n
        Is the cache :
        1. in memory
        2. on the local disk
selection:  1
S:****** Starting dfsbind...
        Enter the RAM size of the cache (1000):
S:****** Starting dfsd...
dfsd: can't read cache info file '/opt/dcelocal/etc/CacheInfo' (code 2)
dfsd: failed to open cacheinfo file

[8/20/93 public]
This fix must have been lost with the new HP dfs_config.
Anyway, I've submitted the fix in the 1.0.3 version.  The fix
is to create a CacheInfo file with an arbitrary cache
directory field since dfsd will ignore that field with the 
-memcache option anyway.

[11/10/93 public]
Closed.



CR Number                     : 8482
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : cfg
Subcomponent Name             : config
Short Description             : FIRST_BOOT var not exported
Reported Date                 : 8/19/93
Found in Baseline             : 1.0.3
Found Date                    : 8/19/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_com_env
Sensitivity                   : public

[8/19/93 public]
dce_com_env does not export FIRST_BOOT
this causes startup of fxd to fail and dce_login to have problems
the /opt/dcelocal/var/security/creds files do not get cleaned out
as they should
workaround is to clean out creds files on reboot manually before
starting dce/dfs

[08/26/93 public]
Add the export line to dce_com_env.



CR Number                     : 8464
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : cfg
Subcomponent Name             : dfs_config
Short Description             : dfs_rgyinit's final acl_edit
command is incorrect within dfs_config
Reported Date                 : 8/17/93
Found in Baseline             : 1.0.3
Found Date                    : 8/17/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dfs_config
Sensitivity                   : public

[8/17/93 public]

It was noticed that on very rare circumstances, the following error would
appear when configuring DFS to run:

n:  6
S:****** Configuring DFS Fileset Location Database Server...

        Enter Cell Administrator's principal name: (cell_admin) cell_admin
                Enter password:

                S:****** Modifying the registry database for DFS
operation...
                S:****** Loading kernel extensions...
                Warning: size changed from 0x0005a810 to 0x0005a8d8
                rpc_config: installed krpc device at major number 71
                Warning: size changed from 0x00065b38 to 0x00065b68
                S:****** Modifying the registry database for DFS server
operation...
                ERROR: acl object not found (dce / sec)
                Unable to bind to object
/.:/sec/principal/hosts/fleep/dfs-server

                >>> group member added

It turns out that the final acl_edit command in dfs_rgyinit is incorrect:

        log_msg VERBOSE "Modify ACL for /hosts/$HOSTNAME/dfs-server"
        log_msg DETAIL "Executing: acl_edit -addr $BINDING
principal/hosts/$HOSTNAME/dfs
-server -m group:$SUBSYSDIR/dfs-admin:rcDnfmag"
        acl_edit -e /.:/sec/principal/hosts/$HOSTNAME/dfs-server \
        -m group:$SUBSYSDIR/dfs-admin:rcDnfmag

The acl_edit command should have the -e removed from its command line.
Very often this will run with no seeming problems, however it is incorrect
and should be corrected.

Also the log_msg should be modified to reflect what the command really is.

[11/10/93 public]
Closed.



CR Number                     : 8450
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : rc.dfs
Short Description             : rc.dfs installed without x perm
Reported Date                 : 8/13/93
Found in Baseline             : 1.0.3
Found Date                    : 8/13/93
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dfs_config
Sensitivity                   : public

[8/13/93 public]
title says it all.

[11/10/93 public]
Closed.



CR Number                     : 8442
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dfs.unconfig
Short Description             : use exit, not return in dfs.unconfig
Reported Date                 : 8/12/93
Found in Baseline             : 1.0.3
Found Date                    : 8/12/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : src/config/dfs.unconfig
Sensitivity                   : public

[8/12/93 public]
A no-brainer.  Use exit, not return when not in 
a function.

[11/10/93 public]
Closed.



CR Number                     : 8438
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : cfg
Subcomponent Name             : 
Short Description             : msg catalog paths incorrect
Reported Date                 : 8/12/93
Found in Baseline             : 1.0.3
Found Date                    : 8/12/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config dce_com_env dce_com_utils
Sensitivity                   : public

[8/12/93 public]
There're a couple of problems with the way message catalogs are
handled in the new dce_config:

1) The default path to store catalogs is wrong for the RIOS
(as defined in dce_com_env).

2) There are two parse_nls() routines, one in dce_config, and
one in dce_com_utils.  They are different.  DFS ends up using
the one in dce_com_utils which is broken.  It hard-codes the
catalog directory to /usr/lib/nls/C, which is incorrect (I think).

I'm going to let the message catalog expert sort this one out.
At the least, the two parse_nls routines should be consolidated
to one routine in dce_com_utils with the correct functionality.

[08/19/93 public]
Change default RIOS message catalog directory to /usr/lib/nls/msg/En_US.

Moved parse_nls() from dce_config to dce_com_utils, removed old version 
from dce_com_utils.

Closed.



CR Number                     : 8427
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dfs_config
Short Description             : DFS client installation has redundant prompt
Reported Date                 : 8/10/93
Found in Baseline             : 1.0.3
Found Date                    : 8/10/93
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config, dfs_config
Sensitivity                   : public

[8/10/93 public]

When choosing option 10 - install DFS client, the first thing this
option does is to ask me whether I want to install the dfs client
binaries.  Of course I do, that's why I chose option 10


         DCE Installation Menu ( on laugh )


         1. Security Server
         2. CDS Server
         3. DTS Server
         4. GDS Server
         5. DFS Server


         6. DCE Client
         7. Application Development Environment
         8. Optional Utilities
         9. Replica Security Server
        10. DFS Client


        98. Return to previous menu
        99. Exit


        selection:  10
        Should DFS client binaries be installed? (n)

[09/20/93 public]
This was fixed by the automation changes.  dfs_config  no longer asks 
this question.
Closed.



CR Number                     : 8426
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : cfg
Subcomponent Name             : 
Short Description             : prototype in dce_cf.h break RIOS
Reported Date                 : 8/10/93
Found in Baseline             : 1.0.3
Found Date                    : 8/10/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_cf.h
Sensitivity                   : public

[8/10/93 public]
New prototype in dce_cf.h breaks at least the RIOS build.

> void dce_cf_profile_entry_from_host (
> #ifndef __STDC__
>     char *hostname;
>     char **prof_name;
>     unsigned long *status;
> #endif
> );

should be 

> void dce_cf_profile_entry_from_host (
> #ifndef __STDC__
>     char *hostname,
>     char **prof_name,
>     unsigned long *status
> #endif
> );

[8/10/93 public]
Corrected the above ifndef to ifdef. Rebuilt by Ron successfully.

[8/10/93 public]
I didn't think the problem was the #ifndef, but using semi-colons within
the parenthesis to separate the parameters.  Is this fixed or just hidden?



CR Number                     : 8414
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : repclient shouldn't be installed
Reported Date                 : 8/5/93
Found in Baseline             : 1.0.3
Found Date                    : 8/5/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config
Sensitivity                   : public

[8/5/93 public]
dce_config shouldn't install repclient.  According to Craig
E. at Transarc, it is a trivial developer's tool for
exercising the repserver RPC interface.

[8/6/93 public]
Removed repclient install from the install_opt_util() routine.



CR Number                     : 8408
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : The new dce_config does not
allow the user to enter the Security Replica name.
Reported Date                 : 8/4/93
Found in Baseline             : 1.0.3
Found Date                    : 8/4/93
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config, dce_config_env
Sensitivity                   : public

[8/4/93 public]

The new dce_config does not allow the user to enter a name of the replica
when configuring a Replicated Security Server. It uses the hostname as the
default for the replica name (subsys/dce/sec/hostname). This is different 
from the old dce_config.

[08/26/93 public]
Removed the setting of the SEC_REPLICA variable to hostname, and put
it on the list of things you can set in the environment.



CR Number                     : 8389
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : dce_config install dfs config files when no dfs is configured
Reported Date                 : 7/30/93
Found in Baseline             : 1.0.3
Found Date                    : 7/30/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config
Sensitivity                   : public

[7/30/93 public]

When running /etc/dce.clean (and /etc/rc.dce) they check for the
existance of /etc/dfs.clean and run it.  This takes a while
as there are many dfs daemons to try and kill and when you
don't have DFS configured, its stupid.

The easiest way to prevent this is to not install the dfs links
in /etc until the user has installed (or configured) DFS.

[09/20/93 public]
This was fixed during the automation changes.

Since dfs_config already installed the dfs /etc files, I removed
the code from dce_config which installed them.

This gets rid of several errors from dfs_config.

In additon, I fixed up dfs_config to install these files like dce_config does.
Closed.



CR Number                     : 8387
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : dce_config tried to install /usr/include/reentrant on HP
Reported Date                 : 7/30/93
Found in Baseline             : 1.0.3
Found Date                    : 7/30/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config
Sensitivity                   : public

[7/30/93 public]

Only on an HP when installing Appilcation Dev stuff:
                mkdir -p /usr/include/reentrant
                /opt/dcelocal/share/include/dirent.h is missing
                /opt/dcelocal/share/include/grp.h is missing
                /opt/dcelocal/share/include/ndir.h is missing
                /opt/dcelocal/share/include/netdb.h is missing
                /opt/dcelocal/share/include/stdio.h is missing
                /opt/dcelocal/share/include/locale.h is missing
                /opt/dcelocal/share/include/pwd.h is missing
                /opt/dcelocal/share/include/stdlib.h is missing
                /opt/dcelocal/share/include/string.h is missing
                /opt/dcelocal/share/include/time.h is missing
                /opt/dcelocal/share/include/unistd.h is missing

The HP product has these files, but OSF doesn't.
This code should be removed from our source base.

[08/05/93 public]
Removed the offending REENTRANT_LIST files from the install_appdev() 
routine.



CR Number                     : 8384
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : dce_config doesn't put kload
or unwind.o in the proper directories and RAT smoketest fails
Reported Date                 : 7/29/93
Found in Baseline             : 1.0.3
Found Date                    : 7/29/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : src/config/dfs_config
Sensitivity                   : public

[7/29/93 public]

We need to have kload & unwind.o (from the HP kernel build which we don't
do here at OSF) in order to correctly install & config DFS.

The dce_config assumes (?) these are available in the install tree.
NOT.

The GROSS workaround is to keep a copy of each on your machine.
I picked up copies off fire:/etc/kload & /etc/unwind.o.
Dce_config looks for /opt/dceloca/bin/kload and /opt/dceloacl/ext/unwind.o.

[7/30/93 public]
dfs_config is now modified to install both kload and unwind.o from
the install tree. Since we don't have source, the normal build
process is not the way to get these binaries into the install
tree.  I proposed modifying the build scripts to copy these
into the install tree for now.  This is a RAT responsibility.

[11/10/93 public]
Closed.



CR Number                     : 8382
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce.unconfig
Short Description             : unconfig scripts don't handle arguments correctly
Reported Date                 : 7/28/93
Found in Baseline             : 1.0.3
Found Date                    : 7/28/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce.unconfig dfs.unconfig
Sensitivity                   : public

[7/28/93 public]
When you try and unconfigure a host, the unconfig scripts don't save
their argument (the hostname) before sourcing another script.

Thus you get errors trying to delete 'hosts/109041/self' from the
namespace.

[07/29/93 public]
Save the host name before invoking dce_com_utils.
Closed.



CR Number                     : 8372
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 7333
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : dce_config :rgy_edit doesn't have -update
Reported Date                 : 7/27/93
Found in Baseline             : 1.0.3
Found Date                    : 7/27/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config
Sensitivity                   : public

[7/27/93 public]
Under bug 7333 all the rgy_edit commands in dce_config had
the '-update' flag added to the argument list.

This change wasn't propigated in the HP dce_config!!!!

grrrrrrr.

[07/28/93 public]
Added "-update" to all the rgy_edit commands.
Closed.



CR Number                     : 8364
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : cfg
Subcomponent Name             : dfs
Short Description             : configuring dfs file server gets ACL edit failure - unable to bind
Reported Date                 : 7/26/93
Found in Baseline             : 1.0.3
Found Date                    : 7/26/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : src/config/dfs_config
Sensitivity                   : public

[7/26/93 public]
\
While configuring a dfs fileserver (5), we consistently get
ACL edit failure while trying to edit an ACL on
hosts/<machinename/dfs-server.  In the following log, it is
the ACL edit command which is failing (the failure message shows
up on the screen but not in the log file).




DEBUG:     Executing: dfs_rgyinit(fs) (the argument is ignored)
S:****** Modifying the registry database for DFS server operation...
D:         Executing: rgy_edit -p hosts/shotz/dfs-server -v | grep 
           "^hosts/shotz/dfs-server" >/dev/null
V:         Creating the dfs-server principal for shotz
D:         Executing: rgy_edit> domain principal
D:         Executing: rgy_edit> add hosts/shotz/dfs-server
D:         Executing: rgy_edit> quit
DEBUG:     Executing: chk_rgy_edit(rgy_edit error while adding principals to 
           the registry database for DFS.)
D:         Executing: rgy_edit -a hosts/shotz/dfs-server -v | grep 
           "^hosts/shotz/dfs-server" >/dev/null
V:         Creating the dfs-server account for shotz
D:         Executing: rgy_edit> domain account
D:         Executing: rgy_edit> add hosts/shotz/dfs-server -g 
           subsys/dce/dfs-admin -o none -pw <not shown> -mp <not shown>
D:         Executing: rgy_edit> ktadd -p hosts/shotz/dfs-server -pw <not shown>
D:         Executing: rgy_edit> ktadd -p hosts/shotz/dfs-server -a -r
D:         Executing: rgy_edit> quit
DEBUG:     Executing: chk_rgy_edit(rgy_edit error while adding accounts to the 
           registry database for DFS.)
V:         Modify ACL for /hosts/shotz/dfs-server
D:         Executing: acl_edit -addr  principal/hosts/shotz/dfs-server -m 
           group:subsys/dce/dfs-admin:rcDnfmag
DEBUG:     Executing: dfs_nsinit(fs)
DEBUG:     Executing: enable_in_dfs_rc(dfsexport)
V:         Successfully modified rcfile /etc/rc.dfs for "dfsexport"
DEBUG:     Executing: start_bosserver()


Dave W. had a look and it seems that the BINDING variable in the dce_config
script for dfs is not set when this command is issued

[7/30/93 public]
Fixed.

[11/10/93 public]
Closed.



CR Number                     : 8352
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : dce_config revision hostory is long and useless
Reported Date                 : 7/22/93
Found in Baseline             : 1.0.3
Found Date                    : 7/22/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : config/dce_config
Sensitivity                   : public

[7/22/93 public]
The revision history is over 600 lines long in dce_config, and is basically
useless now that HP has submitted their new version.

It takes time to read these comments in (not much, but we need all the help
we can get with this 6000 line script).

They should be deleted.



CR Number                     : 8351
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : dce_config for core client does not install libdce.sl
Reported Date                 : 7/22/93
Found in Baseline             : 1.0.3
Found Date                    : 7/22/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : config/dce_config_env
Sensitivity                   : public

[7/22/93 public]

Configuring a core client plus dfs client fails because kload
cannot find libdce.sl - apparently this is not getting installed
by dce_config for the core client option

[07/22/93 public]
Working on it right now...

[07/22/93 public]
Don't set SHLIB_SUF in dce_config_env, it gets set in dce_com_env along
with the other machine dependant stuff.
Closed.



CR Number                     : 8348
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : rc.dfs
Short Description             : rc.dfs does not find dce_config_env because the $ETC variable is not set
Reported Date                 : 7/22/93
Found in Baseline             : 1.0.3
Found Date                    : 7/22/93
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : config/rc.dfs
Sensitivity                   : public

[7/22/93 public]

This is what happens when we try to restart dfs via rc.dfs:

 
# sh /etc/rc.dfs
/etc/rc.dfs: /dce_config_env: not found
#

this gets called from rc.dfs via /etc/dce_config_utils
which is looking for ${ETC}/dce_config_env; however
ETC doesn't seem to be set.

[07/22/93 public]
Common problem.  I know the fix.

[07/22/93 public]
Set the default path for $ETC in rc.dfs.



CR Number                     : 8298
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : cfg
Subcomponent Name             : /etc/dce.clean
Short Description             : dts_ntp_provider not killed by /etc/dce.clean
Reported Date                 : 07/16/93
Found in Baseline             : 1.0.3
Found Date                    : 07/16/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : /etc/dce_config
Sensitivity                   : public

[07/16/93 public]

The script /etc/dce.clean does not kill dts_ntp_provider because ps -e
on HP-UX truncates the command name to:

 29239 ttys1    0:00 dts_ntp_provid

which does not match dts_ntp_provider.

[07/16/93 public]
This will be fixed in the new 1.0.3 dce_config, which will look
for the truncated name.

[07/23/93 public]
Closed, verified in DCE 1.0.3i build available 07/23/93.



CR Number                     : 8295
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : config
Short Description             : Missing prototypes from dce_cf.h
Reported Date                 : 7/16/93
Found in Baseline             : 1.0.2
Found Date                    : 7/16/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : src/config/dce_cf.h
Sensitivity                   : public

[7/16/93 public]
Prototypes for the following functions are missing from src/config/dce_cf.h:

	dce_cf_profile_entry_from_host
	dce_cf_binding_entry_from_host

[8/9/93 public]
Added the prototypes to src/config/dce_cf.h.



CR Number                     : 8225
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : Error with DTS Initial and DCE/DTS Client configuring
Reported Date                 : 07/01/93
Found in Baseline             : 1.0.2a
Found Date                    : 07/01/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config
Sensitivity                   : public

[07/01/93 public]

When configuring a DCE Client you are asked what type of DTS service you
want the machine to have.  It says "Default is DTS Clerk", but it appears
as though a return response will not default to a DTS Clerk.  Shouldn't
there be a "*) config_dtsclerk;;" included in the end of the case?

        if [ $? -ne 0 ]
        then
                # Set a flag so the config routine returns to
                # this routine instead of invoking a menu.
                FLAG=99
                echon "\tShould this machine be configured as a "
                echo "DTS Clerk, DTS Local Server, "
                echon "\tor DTS Global Server? (Default is DTS Clerk) "
                echon "(c, ls, gs): "
                read answer
                case $answer in
                        ls) config_dtslocal;;
                        gs) config_dtsglobal;;
                        c) config_dtsclerk;;
                esac

        fi


Also, when configuring an "Initial DTS Server" from the "Initial Cell
Configuration" menu, dce_config should make sure that the machine is
already configured with security and cds.  If you choose "Initial DTS
Server" first, is fails very badly.

[08/05/93 public]
I looked at the latest dce_config logic and retested it as described above.
I think it should be closed. This needs to be verified by Paul.

[11/10/93 public]
A null answer to the question will configure a clerk.
Closed.



CR Number                     : 8199
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : mx300
S/W Ref Platform              : sinix
Component Name                : cfg
Subcomponent Name             : 
Short Description             : SNI SVR4 changes
Reported Date                 : 6/24/93
Found in Baseline             : 1.0.3
Found Date                    : 6/24/93
Severity                      : E
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : see below
Sensitivity                   : public

[6/24/93 public]

OT for submission of SNI SVR4 changes which are going in to 1.0.3.
Files submitted are:

SVR4/machdep.mk
directory/cds/adver/adver_clerk_event.c
directory/cds/cache/SVR4/casysinfo.c
directory/cds/cds.mk
directory/cds/child/clerk_listener.c
directory/cds/control/op_list.c
directory/cds/control/parser_aid_2.c
directory/cds/library/deb_event_mgr.c
directory/cds/server/server_main.c
directory/cds/server/ta_lookup.c
lbe/mk/svr4.cambridge.mk
lbe/mk/svr4.mk
lbe/mk/svr4.sinix.mk
lbe/mk/svr4.v3.mk
libdce/SVR4/machdep.mk
rpc/idl/idl_compiler/Makefile
rpc/idl/idl_compiler/sysdep.h
rpc/kernel/SVR4/kern_uniqaddr.c
rpc/kernel/SVR4/machdep.mk
rpc/rpcd/rpcd.c
rpc/runtime/SVR4/comsoc_sys.h
rpc/runtime/SVR4/get_unique_addr.c
rpc/runtime/SVR4/sysconf.h
rpc/runtime/krbclt.c
rpc/runtime/krbcn.c
rpc/runtime/krbdgcom.c
security/h/rs_reserved.h
security/krb5/lib/os/localaddr.c
security/server/rsdb/rsdb_compat.c
security/server/sec_salvage_db/sec_svg_db.c
security/server/sec_salvage_db/sec_svg_rec.c
test/directory/cds/cdstest.sh
test/directory/cds/cp_test.sh
test/rpc/idl/sparse/Makefile
test/rpc/rtandidl/control/run_client
test/rpc/rtandidl/moretests/comtest_client_xfr.c
test/rpc/rtandidl/moretests/mgmt_set_authz_fn.c
test/sample/Makefile.svr4
test/sample/timop_server.c
test/threads/SVR4/machdep.mk
test/threads/euvb_exc_nbi_002.c
threads/SVR4/SINIX/cma_host.h
threads/SVR4/SINIX/cma_io_redefs_4.h
threads/SVR4/SINIX/cma_ux_redefs.h
threads/SVR4/SVR4V3/cma_host.h
threads/SVR4/SVR4V3/cma_io_redefs_4.h
threads/SVR4/SVR4V3/cma_ux_redefs.h
threads/SVR4/cma_int.c
threads/cma_config.h
threads/cma_defs.h
threads/cma_dispatch.c
threads/cma_errors.c
threads/cma_init.c
threads/cma_message.c
threads/cma_px.h
threads/cma_signal.c
threads/cma_stack_int.h
threads/cma_stdio.c
threads/cma_tcb.c
threads/cma_tcb_defs.h
threads/cma_thdio_2.c
threads/cma_thdio_3.c
threads/cma_thdio_4.c
threads/cma_thdio_defs.h
threads/cma_thread_io.c
threads/cma_thread_io.h
threads/cma_util.c
threads/cma_ux.c
threads/exc_handling.c
threads/threads.mk
time/kernel/SVR4/machdep.mk
time/libutc/kernel/SVR4/utc_adjtime.c
time/libutc/kernel/SVR4/utc_gettime.c
time/time.mk



CR Number                     : 8192
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : 
Short Description             : dce.clean is a horrid name
Reported Date                 : 6/23/93
Found in Baseline             : 1.0.2
Found Date                    : 6/23/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dce.clean, dce_shutdown, dce_config
Sensitivity                   : public

[6/23/93 public]
I think the name "dce.clean" is absolutely horrible:  it doesn't clean
anything and it confuses me with dce.rm.  Rename it to dce.stop or something.

[03/28/94 public]
This probably isn't going to happen, but I will leave it open
just in case it does.

[6/21/94 public]
Changed the name of dce.clean to dce_shutdown 
with a symbolic link to dce.clean Defuncted dce.clean.

The new script will use the control programs to shut down DCE where possible.
dce_shutdown -f will force the old (kill the process) behavior.



CR Number                     : 8138
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dfs.lock system test
Short Description             : needs better synchronization, etc.
Reported Date                 : 6/10/93
Found in Baseline             : 1.0.2a
Found Date                    : 6/10/93
Severity                      : B
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.2ab5
Affected File(s)              : filewnr.c, Makefile, dfs.lock, lock.data
Sensitivity                   : public

[6/10/93 public]
The dfs.lock system test needs better synchronization between the filewnr 
program and the dfs.lock driver, as well as some general reorganization.

Fixed on 6/10/93.

Files changed -  in src/test/systest/file
   filewnr.c
   Makefile
   dfs.lock
   lock.data

[11/12/93 public]
Verified via use - Defect Closed.

[11/12/93 public]
Actually MARKED as closed.



CR Number                     : 8074
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : app_gd
Short Description             : Incorrect API call
Reported Date                 : 5/28/93
Found in Baseline             : 1.0.2
Found Date                    : 5/28/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : 1
Sensitivity                   : public

[5/28/93 public]

 In section 2.3.5 (pg. 2-47) of the Application Development Guide,
 the last example at the bottom of the page has an incorrect api call.
 The call should be to sec_key_mgmt_set_key() and not
 sec_key_mgmt_change_key() as documented.   The sec_key_mgmt_change_key()
 does not create a local key file as described, but the sec_key_mgmt_set_
 key() call does.

[06/03/93 public]
Assigned this CR to myself.

[06/03/93 public]
Changed to "verified".  Changed the reference from set_key_mgmt_change_key
to set_key_mgmt_set_key in the App Dev Guide chapter overview/chap2.gpsml.  
According to the App Dev Ref page for these two calls, only 
set_key_mgmt_set_key can create a local key file.

[08/17/93 public]
Closed bug.



CR Number                     : 7943
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : pmax
S/W Ref Platform              : osf1
Component Name                : cfg
Subcomponent Name             : rc.dfs
Short Description             : rc.dfs doesn't handle failed recovery
Reported Date                 : 5/6/93
Found in Baseline             : 1.0.2a
Found Date                    : 5/6/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.2a
Fixed In Baseline             : 1.0.2a
Affected File(s)              : src/config/rc.dfs
Sensitivity                   : public

[5/6/93 public]
rc.dfs pauses if recovery fails on an Episode aggregate.  If the
user fixes the problem with the aggregate and continues with rc.dfs,
the script forgets to dfsexport the aggregate.

here's the fix:

# diff -c /etc/rc.dfs /tmp/rc.dfs
*** /etc/rc.dfs Thu May  6 13:04:33 1993
--- /tmp/rc.dfs Thu May  6 13:03:58 1993
***************
*** 94,100 ****
                      EXPORTABLE_AGGRS="$EXPORTABLE_AGGRS $lfsaggr"
                  else
                      x_exit "\tWARNING: PROBLEM RECOVERING $lfsaggr"
-                     EXPORTABLE_AGGRS="$EXPORTABLE_AGGRS $lfsaggr"
                  fi
              else
                  cat /tmp/rc.dfs.$$.err
--- 94,99 ----

[6/7/93 public]
Fixed.

[11/10/93 public]
Closed.



CR Number                     : 7849
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : pmax
S/W Ref Platform              : osf1
Component Name                : cfg
Subcomponent Name             : cds
Short Description             : CDS core config fails intermittently
Reported Date                 : 4/30/93
Found in Baseline             : 1.0.2a
Found Date                    : 4/30/93
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config
Sensitivity                   : public

[4/30/93 public]
Various folk here including myself have intermittently seen 
"cdscp show dir /.: failing -- CDS not usable" come from dce_config 
during CDS core config.  Dugas says he knows the fix.

[6/8/93 public]
This happens very infrequently.  According to jd, the fix now
appears more complicated than it's worth for 1.0.2a.  Changing 
fixby to 1.0.3.

[8/9/93 public]
The timout and number of tries has been increased in the latest HP 
dce_config.  I recommend closing this one, reopening a new one for 
the latest config. code and platforms once the problem reoccurs.

[11/12/93 public]
fix->closed



CR Number                     : 7801
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : dce_config should restart repservers as well as flservers on changing the fl config
Reported Date                 : 4/26/93
Found in Baseline             : 1.0.2
Found Date                    : 4/26/93
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3a
Fixed In Baseline             : 1.0.2a
Affected File(s)              : src/config/dfs_config
Sensitivity                   : public
Transarc Deltas               : 
Transarc Herder               : jaffe@transarc.com
Transarc Status               : open

[4/26/93 public]
When dce_config changes the flserver configuration for a cell, it currently
restarts the flservers in the cell to let them all know about each other.
It also needs to restart all the existing repservers in the cell, since they
have to know about any machine that might be a sync site so that they can
update the FLDB (by reserving new fileset IDs).  If one isn't restarted
but the FLDB sync site isn't a machine that a repserver knows about, it can
be stuck not doing replica updates since it cannot acquire a new fileset
ID without talking to the sync site.
 
I'd suggest that dce_config should restart the repservers on all members
of subsys/dce/dfs-admin whose principal names end in ``/dfs-server''.
Code that evaluates this list can be found in src/test/file/rep/statusCheck.
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `jaffe@transarc.com' 
Added field Transarc Status with value `open'

[4/26/93 public]
The code to do this is already in 1.0.3 dfs_config (and in fact is 
in 1.0.2a as well).  Apparently, someone made this fix and did not 
update the OT report.  Changing state to fix.

[11/10/93 public]
Closed.



CR Number                     : 7760
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : pmax
S/W Ref Platform              : osf1
Component Name                : cfg
Subcomponent Name             : dce_config / security
Short Description             : sec_salvage_db is not installed by /etc/dce_config
Reported Date                 : 04/20/93
Found in Baseline             : 1.0.2
Found Date                    : 04/20/93
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config
Sensitivity                   : public

[04/20/93 public]

The security command sec_salvage_db command is not installed by
/etc/dce_config on security masters or security slaves.

[04/20/93 public]

Changed from C1 to C2 since there is a simple workaround which is to
copy sec_salvage_db from the install tree.

[08/05/93 public]
Added sec_salvage_db to the server and replica installations.



CR Number                     : 7726
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : pmax
S/W Ref Platform              : osf1
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : make dts config more user friendly
Reported Date                 : 4/15/93
Found in Baseline             : 1.0.2
Found Date                    : 4/15/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.2a
Fixed In Baseline             : 1.0.2a
Affected File(s)              : src/config/dce_config
Sensitivity                   : public

[4/15/93 public]
Before configuring a DFS FLDB machine, DTS should be used to
forcibly sync the clock with any pre-existing FLDB machine.
This should remove an obstacle to flservers acheiving ubik
quorum.

[4/16/93 public]
Be careful--if the machine is a CDS server and the time is set backwards, cdsd
will dump core and cannot be restarted until the new time catches up with the
time before you changed it...

[4/26/93 public]
Decided to make dts config more user friendly, and nothing more (i.e.
didn't force a sync of system clock at front of FLDB config).  As 
cited above, the effects of such a sync could be fatal.  DTS config
made more friendly in the following ways:

(1) Add Initial DTS Server option to Initial Cell Configuration Menu
(2) Prompt user for DTS config type rather than defaulting to
DTS client in DCE client config and in DFS FLDB config.

[11/10/93 public]
Closed.



CR Number                     : 7692
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 9136
Project Name                  : dce
H/W Ref Platform              : pmax
S/W Ref Platform              : osf1
Component Name                : cfg
Subcomponent Name             : app_gd
Short Description             : how to run timop
Reported Date                 : 4/13/93
Found in Baseline             : 1.0.2
Found Date                    : 4/13/93
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : app_gd/overview/chap3.gpsml
Sensitivity                   : public

[4/13/93 public]
This note from the FAQ should be incorporated in the App Dev Gd
if it hasn't already been.


From: Nick Dokos <nick@osf.org>
To: Ray_Johnson@iegate.mitre.org (Ray Johnson)
Cc: dce-talk
Subject: DCE: Help running timop 
Date: Tue, 01 Dec 92 15:50:19 -0500

Here is a short blurb I put together some time ago.


Nick Dokos	nick@osf.org	
OSF Systems Engineering

------------------------------------------------------------------------------
Assumptions:

1) Cell running with SEC, CDS, DTS.
2) There is a cell_admin account with the default password "-dce-" that
dce_config establishes. Obvious changes need to be made in what follows
to use a different password.
3) The names of the principals running the server and the client
are tserver and tclient resp. These names are specified in
timop_aux.h as follows:

#define CLIENT_PRINC_NAME	(unsigned_char_t *)"/.../pierrot.osf.org/tclient"
#define SERVER_PRINC_NAME	(unsigned_char_t *)"/.../pierrot.osf.org/tserver"

where "pierrot.osf.org" is the name of the cell.
4) The name of the keyfile as specified in timop_server.h is "/tmp/tkeyfile".
If you change it there, change it in the ktadd below.


Executive summary:
1) Compile the timop programs.
2) Add principals and accounts for tserver and tclient.
3) Add the password of tserver in the keytable.
4) Create an RPC entry object in the name space and
change its ACL so that the server can export its bindings.
5) Run the server and the client.


Procedure:
1) Change timop_aux.h as described above.
2) Compile:

	make -f Makefile.timop

3) Add principals, accounts and keytab entry:

	$ dce_login cell_admin -dce-
	$ rgy_edit
	> domain principal
	> add tserver
	> add tclient
	> domain account
	> add tserver -g none -o none -pw qwerty -mp -dce-
	> add tclient -g none -o none -pw xyzzy -mp -dce-
	> ktadd -p tserver -pw qwerty -f /tmp/tkeyfile
	> quit

Note that the same password should be used in the tserver account
and in the ktadd command.

4) Add RPC entry and change its acl:

	$ rpccp add entry /.:/foo
	$ acl_edit -e /.:/foo -m user:tserver:rwdtc

5) Run the server:

	$ dce_login tserver qwerty
	$ ./timop_server /.:/foo

Wait for the message "Server /:/foo ready."

6) Run the client (in another window):

	$ dce_login tclient xyzzy
	$ ./timop_client /.:/foo

[10/18/93 public]

Changed priority to 1 per Hal Lichtin/Bob Hathaway.

[10/22/93 public]

This is fixed. Incorporated all of the above, plus other information on
building and installing from my personal experience.

[11/11/93 public]

Verified these changes in the latest doc build. These
changes are included with the install/run changes made
in response to CR9136 (there are no separate change
bars that delineate the changes described in this CR).
Consequently, I added CR9136 as a related CR. I am
closing this CR.



CR Number                     : 7600
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : other
S/W Ref Platform              : sinix
Component Name                : cfg
Subcomponent Name             : 
Short Description             : dce_config failed with upper
case cell name with SVR4  dce.
Reported Date                 : 3/26/93
Found in Baseline             : 1.0.2b10
Found Date                    : 3/26/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config
Sensitivity                   : public

[3/26/93 public]

Note: This is a SVR4 DCE problem. I (wwang) tried with OSF/DCE. We can dce
config cells with either upper or lower case or even combined case cell
names without any problem. We can also use combined case cell name in
cdscp, rpccp and acl_edit commands. One thing to note: internally dce only
uses lower case cell name.

The following is from the original reporter from NCR:

----------------------------------------------------------------------------
I have run into a nasty problem about the naming of machines. I have a machine
named 'l501' (lowercase 'L') starting up DCE using 'dce_config' all works
brilliant - one thing I noticed though was that using the '-v' option makes
dce_config print out the line:

Current site is: registry server at /.../l501

which is fine. However, if I rename my machine to 'L501' (uppercase 'L')
starting up DCE using 'dce_config' fails, it stops after the following
printout:

-------------------------------------------------------------------------------
Starting configuration of DCE security client...
-------------------------------------------------------------------------------
                Creating pe_site file...

                Using dce_login to obtain principal DCE credentials...
        Warning:
dce_login did not succeed.
Please fix problem and restart configuration.
:1
        Press <ENTER> to continue

this is of course not _fine_ (:-( - One important thing that I noticed though
was that the '-v' option makes dce_config print out the line:

Current site is: registry server at /.../l501

NOTE lowercase 'L' - why ????

Have you tried using uppercase letters in your machine names, if not please
try and report back about the results. From my end I will continue debugging
where/why the conversion takes place.
-----------------------------------------------------------------------------
and later ...

-----------------------------------------------------------------------------
now I think that I have tried almost any possible combination, which as I can
see all leads to that the cell name (in SVR4) needs to be lower case only
here is a summary of what is tried:

        Machine name    Cell name               Worked
        ------------    ---------               ------
        L501            /.../L501               No
        l501            /.../l501               Yes
        L501            /.../L501.ncr.com       No
        L501            /.../test               Yes
        L501            /.../test.ncr.com       Yes
        l501            /.../TEST.ncr.com       No

So as you can see I DID change my machine name a number of times not just the
cell name. On the other hand you can also deduce from the above that the
machine name is NOT the problem - the problem is the cell name that cannot
contain upper case (in the SVR4 version). So I would say that USL and we have
the problem and you (OSF DCE) doesn't - therefore I suggest that you can
consider the incident for closed, and don't bother changing your machine name.

Thanks for your help tracking the problem down - and at least we discovered
that the problem is in the SVR4 world and not the OSF world!
------------------------------------------------------------------------------

[9/27/93 public]
I ran dce_config today with upper case cell name and it worked just fine. 
I think the problem got fixed sometime in the last six months. This bug
should be closed.

[9/27/93 public]
I'm going out on a limb here, but this is how I remember things.  The DCE
String Syntax says that case-sensitivity is relative to the namespace that
the RDN is in.  The CDS namespace is case sensitive.  In the GDS namespace
it is upto the particular attribute syntax, some attributes are case
sensistive some are not.  The DNS space (which ALL of the names above were)
is case insensitive.  All name output should be in the canonical form,
which if the RDN is case insensitive, should be lowercase.

Walt is probably the one to check this.

[10/07/93]
Sanjay isn't here, so I'm updating this. This problem was fixed in SNI's
last drop to USL (early Sept.). I reinstalled the packages from that
load and configured successfully. Please note that because SNI uses its
 own version of dce_config, the contents of the affected files field isn't
dce_config, the contents of the affected files field isn't particularly
meaningful. But I had to set it to something to finish  this.



CR Number                     : 7582
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : pmax
S/W Ref Platform              : osf1
Component Name                : cfg
Subcomponent Name             : 
Short Description             : wrong status param for dce_cf*()
Reported Date                 : 3/24/93
Found in Baseline             : 1.0.2
Found Date                    : 3/24/93
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : config/dce_cf.h config/dce_cf_db.c
Sensitivity                   : public

[3/24/93 public]

The dce_cf routines document the output status as unsigned long,
but the include file declares them as error_status_t.  This causes
compile warnings on machines where the 2 are not the same.

Please correct the documentation and release not it for 1.0.2

janet

[05/27/93 public]
Assigned to myself.

[6/1/93 public]
Hmmm, looking at the 1.0.2 code all the dce_cf routine I find in both the
.c and .h files use unsigned long as the type of the status param.  They
all seem consistent.  What files were inconsistent?

However, they are wrong, these should all be error_status_t.

Sorry my mistake.  The problem is callers have assumed that unsigned long
int and error_status_t are the same.   So, are you going to change dce_cf*
routines or should all the callers change.  This is important for 64 bit 
implemenations.

[06/04/93 public]
Assigned to me so it wont get lost, but perhaps Howard should fix this
since he has looked in to it.....

[10/14/93 public]
This problem could have serious compatability effects.
Defering to 1.1.

[10/18/93 public]
The proper fix is to declare things as error_status_t.
The only place this breaks (dce_cf_xxx are local routines) is on machines
where sizeof (int)!= sizeof (long).  This is safe to fix now, but I can see
that people may not believe my assurance this late in the 1.0.3 game.

[10/19/93 public]
OK, I am fixing it in 1.0.3.  Since DEC already made the change on their
64 bit platform and its a no-op on 32 platforms.

The documentation also needs to be changed, and I have filed a separate
doc defect for this.

The files have been submitted to 1.0.3.

[11/10/93 public]
Passed builds with no ill effects.
Closed.



CR Number                     : 7507
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : Use find | xargs trick to remove DFS cache files
Reported Date                 : 3/16/93
Found in Baseline             : 1.0.2b18
Found Date                    : 3/16/93
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.2a
Affected File(s)              : src/config/dce_config
Sensitivity                   : public

[3/16/93 public]
We were configuring 20MB caches and saw the "parameter list is too
long" message come from one of the 'rm -f $CACHE/Vx*' lines in 
config_dfs_client().  'find $CACHE -type f -print | xargs rm -f'
should be used instead.

[6/7/93 public]
Fixed.

[11/10/93 public]
Closed.



CR Number                     : 7501
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : admin_gd
Short Description             : reorg of volume 1
Reported Date                 : 3/15/93
Found in Baseline             : 1.0.2
Found Date                    : 3/15/93
Severity                      : D
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1doc
Affected File(s)              : admin_gd/book.intro,
intro (To DCE manual)
Sensitivity                   : public

[3/15/93 public]
Comment from Howard: consider consolidating information in
Section 2.1 and 4.1 into one place - both talk about programs that
run for each technology component. (Section 2.1 describes each component,
Section 4.1 describes programs that run on the client; Section 4.2
describes programs that run on the servers.)

[06/10/93 public]
Changed "Responsible Engineer" to "osf".  Writer TBD.

[07/06/93 public]
Assigned this CR to myself.

[3/29/94 public]

Reassigned this CR to myself from Julie Buckler. Moving some
of information specified in 4.1, 4.2, 2.1 out of Admin Guide
Volume 1 and into Intro to DCE to decrease redundancy between
books (same text repeated in both books).

[4/5/94 public]

Moved two architectural figures (one for CDS, one for GDS)
and some conceptual text about typed and untyped names
from 2_comp.gpsml and 4_serv.gpsml to /intro/intro/3d_directory.gpsml
(conceptual info about typed, untyped names), /intro/intro/3e_cds.gpsml
(CDS architectural figure), and /intro/intro/3f_gds.gpsml (GDS
architectural figure).

Sections 2.1 and 4.1 are impacted by dcecp and dced. Consequently,
I am resassigning this enhancement CR to Ward Rosenberry (dcecp writer and
Admin Guide - Introduction book owner) so that he can consider it when
revising these sections to include dcecp and dced. I also
reassigned the Severity/Priority of this CR to D4 per Hal Lichtin.

[8/29/94 public]

Setting this CR to verified. First, Chapter 2 and information from sections
4.1 and 4.2 in the admin gd intro was removed since it repeats information
from the Intro to DCE. 

More relevant CRs cover the intro material needed for dced and dcecp in the
Introduction to DCE. They are 10014 for dcecp and 08545 for dced.


This bug is superceded by two more relevant CRs

[10/20/94 public]
Closed bug.



CR Number                     : 7459
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 7460
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : timop
Short Description             : timop example doesn't set comm status
Reported Date                 : 3/9/93
Found in Baseline             : 1.0.2b18
Found Date                    : 3/9/93
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : src/test/example/timop_manager.c
Sensitivity                   : public

[3/9/93 public]
After finding a bug in a test I had written based on Walt's timop example,
I went back and checked Walt's code.  Sure enough, he violated the rules
for using the comm status variable the same way that I did, but wrote his
program in such a way that he didn't get caught.  

  Specifically, the timop .idl and .acf files both declare the comm_Status
and fault_status variable.  In this case, according to the ACF doc, the 
manager code in the server must set the comm_status and fault_status 
variable(s) to rpc_s_ok in no error is encountered.  If the manager code
does not handle this, and no error occurs, then the value of the comm or
fault status variable(s) will be whatever they were when the call was 
started.  Walt does not set the comm_status value in the timop manager 
code, but since he make all of his RPC's from a routine that 
initializes the comm_status variable, makes on RPC and returns, he 
doesn't get burned.  I got singed when I tried follwoing his example
in a program that looped making RPC's (and I am not the only one!  
Someone got this error into print as part of a tutorial printed in
a major industry rag!!).

  The REAL right thing to do is to make the comm_status variable 
appear in only the .acf file.  In this case, the RPC runtime will initialize
it to rpc_s_ok,so if the call is okay, you know it.   However, since 
doing the REAL right thing also means adding a duplicate .idl file, and a
bunch of extra crap to the Makefile, building the client and server in
seperate directories, the most feasible thing to do for the short term is
to make the manager code set the comm_status variable to rpc_s_ok.

[03/09/93 public]
Updated  the inter-related defect field to show the doc defect open to 
get the code changed in the doc as well as the tree, perhaps with a
bit of accompanying explainatory text.

[9/23/93 public]
Changed area to doc and re-assigned to Doug Weir as per aggreement with
him.

[11/2/93 public]
This is fixed. I did "the most feasible thing" as described by Mark
above and inserted the assignment in timop_manager.c

[11/12/93 public]

This has been tested on the HP, 486, and AIX platforms. After checking
with Tom Jordahl I'm closing this bug.



CR Number                     : 7454
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce.rm
Short Description             : Files in cdsclerk & cdsadv home
directories are not deleted
Reported Date                 : 3/9/93
Found in Baseline             : 1.0.2
Found Date                    : 3/9/93
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce.rm
Sensitivity                   : public
Transarc Deltas               : 
Transarc Herder               : 
Transarc Status               : 

[3/9/93 public]
The following 2 lines should be added to dce.rm to delete files left
around by the CDS clerk and advertiser daemons:
rm -f $DCELOCAL/var/adm/directory/cds/cdsclerk/*
rm -f $DCELOCAL/var/adm/directory/cds/cdsadv/*

[3/11/93 public]
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `' 
Added field Transarc Status with value `'

[08/05/93 public]
Added the above lines as requested.



CR Number                     : 7423
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : pmax
S/W Ref Platform              : osf1
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : Cannot Configure CDS client.
Reported Date                 : 3/4/93
Found in Baseline             : 1.0.2
Found Date                    : 3/4/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config
Sensitivity                   : public

[3/4/93 public]

Using nightly build of 3/3/93 (available on 3/4/93 AM), configured a
Master security and cds server on a RIOS machine. Trying to configure
a PMAX client got the following:

        Enter name of primary CDS server:  barge
        Can venus broadcast to barge?
        A no answer will execute a define cache server command. (y) 
ncdscp show dir /.: failing -- CDS not usable
        Press <ENTER> to continue or CTRL-C to exit

Cleaning-up and re-configuring again on the client machine, this problem
goes away. This problem has been seen by at least three people at osf.

[03/09/93 public]
This condition isn't readily reproducable and redoing the client
configuration has always made the problem disappear. We want to keep
this open as a depository for for more information as it becomes
available but will drop this to B2.

[3/9/92 public]
The verify_cds() function inside of dce_config waits a maximum of 30 seconds
before giving up. The advertiser on a newly configured client system waits for
15 seconds + or - 25% before sending out a solicit request. Until it receives
an advertisement from a server in response to this the clerk is sitting on
an empty cache and the cdscp command will return an error on the "sho dir"
request. My hunch is that 30 seconds is not long enough to wait for a pmax.
Try doubling it -- do 20 iterations with a 3 second pause -- and see if
this fixes the race condition I am positing.

[3/26/93 public]
Forgot to redirect to dce - dce_config problem.

[8/9/93 public]
The HP dce_config has a check of cdsadv broadcast results before doing the
"cdscp define cached server" command. Following these changes the verification
step of CDS takes 60 seconds now before declaring failure, in short this is
probably fixed or at least the Tom's advice has been followed.

[11/10/93 public]
The HP mods to the config seem to work.
Closed.



CR Number                     : 7374
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : dts_*_provider files are not installed on DTS servers
Reported Date                 : 02/26/93
Found in Baseline             : 1.0.2b17
Found Date                    : 02/26/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : /etc/dce_config
Sensitivity                   : public

[02/26/93 public]

The following files should be installed on DTS servers:

	dts_acts_provider
	dts_hopf_provider
	dts_ntp_provider
	dts_null_provider
	dts_spectracom_provider
	dts_traconex_provider

The associated ln -s /opt/dcelocal/bin/dts_*_provider /usr/bin/dts_*_provider
should also be done.

[07/23/93 public]
Closed, dts_ntp_provider and dts_null_provider are now installed.



CR Number                     : 7300
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : 
Short Description             : rc.dce is incorrect security replica
Reported Date                 : 2/19/93
Found in Baseline             : 1.0.2b16
Found Date                    : 2/19/93
Severity                      : D
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config and rc.dce
Sensitivity                   : public

[2/19/93 public]
When running rc.dce to restart a machine that is running a security replica
the following occurs:

Starting DCE daemons:  
        /opt/dcelocal/bin/rpcd
        /opt/dcelocal/bin/secd
Registry: Fatal Error - Slave cannot get host identity
 at line 396 of file ../../../../../src/security/server/rs/rs_main.c - 0x171220e
c - No currently established network identity for which context exists (dce / se
c)
Registry: Fatal Error - DT exiting with an exception
 at line 483 of file ../../../../../src/security/server/rs/rs_main.c - 0x171220e
c - No currently established network identity for which context exists (dce / se
c)
Registry: Fatal error in main thread; exiting
        /opt/dcelocal/bin/sec_clientd
        /opt/dcelocal/bin/cdsadv


I believe that secd should be started after sec_clientd for a replica.
When these lines are revered the following occurs running rc.dce:

Starting DCE daemons:  
        /opt/dcelocal/bin/rpcd
        /opt/dcelocal/bin/sec_clientd
        /opt/dcelocal/bin/secd
        /opt/dcelocal/bin/cdsadv

[08/04/93 public]
This is fixed in the HP drop of dce_config and rc.dce.



CR Number                     : 6211
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : pmax
S/W Ref Platform              : osf1
Component Name                : cfg
Subcomponent Name             : admin_ref
Short Description             : inconsistent synopses
Reported Date                 : 11/24/92
Found in Baseline             : 1.0.1
Found Date                    : 11/24/92
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : 23
Sensitivity                   : public

[11/24/92 public]

Unfortunately I won't list everything here, but looking through the man
pages in the admin ref, the format of the synopses are inconsistent.  Some
give a full path to a command, some give no path, and some give /usr/bin
which is a softlink.  Some examples (hopefully the man page will be
obvious)

dceshared/bin/passwd_export
dceshared/bin/passwd_import
dceshared/bin/rgy_edit
secd
dtsd
/usr/bin/dtscp
gdad
cdsd
cdscp
rpccp

In addition, the man pages for the individual commands within the control
programs usually just list the command in the synopsis.  For the rpccp
commands however the synopsis lists "rpccp <command>".  (I really wish I
could show italics in bug reports! :-)

[5/27/93 public]
Assigned to myself.

[6/25/93 public]
Fixed.  Solution verified by Howard Melman.

Added "dtscp" control program name to SYNOPSIS 
of appropriate man8dts reference pages (15).

Removed full pathnames from SYNOPSIS of 
appropriate man8sec reference pages (6).

Removed full pathnames (and entire SYNOPSIS section) 
from appropriate man5sec reference pages (2).

[08/17/93 public]
Closed bug.



CR Number                     : 6124
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : pmax
S/W Ref Platform              : osf1
Component Name                : cfg
Subcomponent Name             : admin_gd
Short Description             : PH-edit and coding conventions
Reported Date                 : 11/17/92
Found in Baseline             : 1.0.1
Found Date                    : 11/17/92
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.0.2
Affected File(s)              : admin_gd/overview/*
Sensitivity                   : public

[11/17/92 public]
The first module of the Admin Guide needs some editing for consistency
with other books edited for Prentice-Hall.  It also needs some coding
to be changed to conform to the DCE coding conventions.

[01/07/93 public]
changed to enh to better reflect nature of CR.

[06/03/93 public]
Closed this CR.  The Prentice-Hall editorial review of the Intro
book of the Admin Guide is now complete.  Jennifer confirmed that
she has also corrected the SML coding conventions mentioned above.



CR Number                     : 4805
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : timop
Short Description             : timop uses hard-coded absolute principal names
Reported Date                 : 7/22/92
Found in Baseline             : 1.0.1b19
Found Date                    : 7/22/92
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.0.3
Affected File(s)              : timop_aux.h
Sensitivity                   : public

[7/22/92 public]

The timop example uses hard-coded absolute principal names; the principal
names should either be (a) cell relative, or (b) passed in on the command
line.

(a) should be easy.. just change:

#define CLIENT_PRINC_NAME	(unsigned_char_t *)"/.../mycell/tclient"

to 

#define CLIENT_PRINC_NAME	(unsigned_char_t *)"tclient"

and likewise for SERVER_PRINC_NAME

[09/21/93 public]
Reassigned to myself after discussion with Tom Jordahl.

[11/2/93 public]
This has now been done. Code had also to be added to timop_refmon.c to
get the cellname and prepend it to the simple principal name. Tested on
HP, 486, and AIX.



CR Number                     : 4804
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : pmax
S/W Ref Platform              : osf1
Component Name                : cfg
Subcomponent Name             : timop
Short Description             : timop error messages bitbucket status codes
Reported Date                 : 7/22/92
Found in Baseline             : 1.0.1b19
Found Date                    : 7/22/92
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.0.3
Affected File(s)              : test/sample/timop*
Sensitivity                   : public

[7/22/92 public]

The error messages in timop_server.c (and probably in other files; I
haven't checked) don't print out the status codes responsible for failure.
This makes diagnosing configuration problems hard.

[09/21/93 public]
Reassigned to myself after discussion with Tom Jordahl.

[11/2/93 public]
Replaced the "fprintf( ... "FAULT")" calls with calls to a subroutine that
uses dce_error_inq_text to get the real status string attached to the error
code and print that. Tested on HP, 486, and AIX.



CR Number                     : 4699
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : In dce_config add test permission to any_other ACLs in /.:/sec/group and /.:/sec/org
Reported Date                 : 7/11/92
Found in Baseline             : 1.0.1
Found Date                    : 7/11/92
Severity                      : D
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : config/dce_config
Sensitivity                   : public

[7/11/92 public]
While doing intercell testing here, someone had created a new group and found
that an authenticated member of a foreign cell could not use sec_rgy_pgo_is_member()
to check membership within that group.  

The reason was that the /.:/sec/group (and /.:/sec/org) objects all had ACLs 
similar to the following:

# Initial SEC_ACL for /.:/sec/group/newgroup:
# Default cell = /.../noname.cell.austin.ibm.com
unauthenticated:r-t-----
user:cell_admin:rctDnfmM
group_obj:r-t-----
group:acct-admin:rctDnfmM
other_obj:r-t-----
any_other:r-------

The Security team here recommends that the 'any_other' ACL include 'test' permission
just as the 'unauthenticated' ACL does.  (After all, the 'read' permission for
'any_other' allows authenticated foreign users to execute sec_rgy_pgo_get_members()
so they can emulate test permission anyway.)  (Besides, should authenticated members
from a foreign cell be considered less trustworthy than unauthenticated members
from the local cell?  Moral question of the day...)

Diffs for the suggested changes (all contained within set_security_acls() in
dce_config) attached below.


*** 2836,2842 ****
        #acl_edit /.:/sec/group -io
        acl_edit -addr $BINDING group -io \
        -m group:acct-admin:rctDnfmM \
!       -m any_other:r

        #acl_edit /.:/sec/group
        acl_edit -addr $BINDING group \
--- 2836,2842 ----
        #acl_edit /.:/sec/group -io
        acl_edit -addr $BINDING group -io \
        -m group:acct-admin:rctDnfmM \
!       -m any_other:rt

        #acl_edit /.:/sec/group
        acl_edit -addr $BINDING group \
***************
*** 2846,2852 ****
        echo "\tgroup/acct-admin"
        #acl_edit /.:/sec/group/acct-admin
        acl_edit -addr $BINDING group/acct-admin \
!       -m group_obj:rctDnfmM

        echo "\tgroup/subsys"
        #acl_edit /.:/sec/group/subsys
--- 2846,2853 ----
        echo "\tgroup/acct-admin"
        #acl_edit /.:/sec/group/acct-admin
        acl_edit -addr $BINDING group/acct-admin \
!       -m group_obj:rctDnfmM \
!       -m any_other:rt

        echo "\tgroup/subsys"
        #acl_edit /.:/sec/group/subsys
***************
*** 2855,2861 ****

        #acl_edit /.:/sec/group/subsys -io
        acl_edit -addr $BINDING group/subsys -io \
!       -m group:acct-admin:rctDnfmM

        #acl_edit /.:/sec/group/subsys -ic
        acl_edit -addr $BINDING group/subsys -ic \
--- 2856,2863 ----

        #acl_edit /.:/sec/group/subsys -io
        acl_edit -addr $BINDING group/subsys -io \
!       -m group:acct-admin:rctDnfmM \
!       -m any_other:rt

        #acl_edit /.:/sec/group/subsys -ic
        acl_edit -addr $BINDING group/subsys -ic \
***************
*** 2868,2874 ****

        #acl_edit /.:/sec/group/$SUBSYSDIR -io -s
        acl_edit -addr $BINDING group/$SUBSYSDIR -io \
!       -m group:acct-admin:rctDnfmM

        #acl_edit /.:/sec/group/$SUBSYSDIR -ic
        acl_edit -addr $BINDING group/$SUBSYSDIR -ic \
--- 2870,2877 ----

        #acl_edit /.:/sec/group/$SUBSYSDIR -io -s
        acl_edit -addr $BINDING group/$SUBSYSDIR -io \
!       -m group:acct-admin:rctDnfmM \
!       -m any_other:rt

        #acl_edit /.:/sec/group/$SUBSYSDIR -ic
        acl_edit -addr $BINDING group/$SUBSYSDIR -ic \
***************
*** 2877,2916 ****
        echo "\tgroup/subsys/dce/sec-admin"
        #acl_edit /.:/sec/group/$SUBSYSDIR/sec-admin
        acl_edit -addr $BINDING group/$SUBSYSDIR/sec-admin \
!       -m group:acct-admin:rctDnfmM

        echo "\tgroup/subsys/dce/dts-admin"
        #acl_edit /.:/sec/group/$SUBSYSDIR/dts-admin
        acl_edit -addr $BINDING group/$SUBSYSDIR/dts-admin \
!       -m group:acct-admin:rctDnfmM

        echo "\tgroup/subsys/dce/dts-servers"
        #acl_edit /.:/sec/group/$SUBSYSDIR/dts-servers
        acl_edit -addr $BINDING group/$SUBSYSDIR/dts-servers  \
        -m group:acct-admin:rctDnfmM \
!       -m group:$SUBSYSDIR/dts-admin:rctDnfmM

        echo "\tgroup/subsys/dce/dfs-admin"
        #acl_edit /.:/sec/group/$SUBSYSDIR/dfs-admin
        acl_edit -addr $BINDING group/$SUBSYSDIR/dfs-admin \
!       -m group:acct-admin:rctDnfmM

        echo "\tgroup/subsys/dce/dfs-fs-servers"
        #acl_edit /.:/sec/group/$SUBSYSDIR/dfs-fs-servers
        acl_edit -addr $BINDING group/$SUBSYSDIR/dfs-fs-servers \
        -m group:acct-admin:rctDnfmM \
!       -m group:$SUBSYSDIR/dfs-admin:rctDnfmM

        echo "\tgroup/subsys/dce/dfs-bak-servers"
        #acl_edit /.:/sec/group/$SUBSYSDIR/dfs-bak-servers
        acl_edit -addr $BINDING group/$SUBSYSDIR/dfs-bak-servers \
        -m group:acct-admin:rcDnfmM \
!       -m group:$SUBSYSDIR/dfs-admin:rcDnfmM

        echo "\tgroup/subsys/dce/cds-admin"
        #acl_edit /.:/sec/group/$SUBSYSDIR/cds-admin
        acl_edit -addr $BINDING group/$SUBSYSDIR/cds-admin \
!       -m group:acct-admin:rctDnfmM

        echo "\tgroup/subsys/dce/cds-server"
        #acl_edit /.:/sec/group/$SUBSYSDIR/cds-server
--- 2880,2926 ----
        echo "\tgroup/subsys/dce/sec-admin"
        #acl_edit /.:/sec/group/$SUBSYSDIR/sec-admin
        acl_edit -addr $BINDING group/$SUBSYSDIR/sec-admin \
!       -m group:acct-admin:rctDnfmM \
!       -m any_other:rt

        echo "\tgroup/subsys/dce/dts-admin"
        #acl_edit /.:/sec/group/$SUBSYSDIR/dts-admin
        acl_edit -addr $BINDING group/$SUBSYSDIR/dts-admin \
!       -m group:acct-admin:rctDnfmM \
!       -m any_other:rt

        echo "\tgroup/subsys/dce/dts-servers"
        #acl_edit /.:/sec/group/$SUBSYSDIR/dts-servers
        acl_edit -addr $BINDING group/$SUBSYSDIR/dts-servers  \
        -m group:acct-admin:rctDnfmM \
!       -m group:$SUBSYSDIR/dts-admin:rctDnfmM \
!       -m any_other:rt

        echo "\tgroup/subsys/dce/dfs-admin"
        #acl_edit /.:/sec/group/$SUBSYSDIR/dfs-admin
        acl_edit -addr $BINDING group/$SUBSYSDIR/dfs-admin \
!       -m group:acct-admin:rctDnfmM \
!       -m any_other:rt

        echo "\tgroup/subsys/dce/dfs-fs-servers"
        #acl_edit /.:/sec/group/$SUBSYSDIR/dfs-fs-servers
        acl_edit -addr $BINDING group/$SUBSYSDIR/dfs-fs-servers \
        -m group:acct-admin:rctDnfmM \
!       -m group:$SUBSYSDIR/dfs-admin:rctDnfmM \
!       -m any_other:rt

        echo "\tgroup/subsys/dce/dfs-bak-servers"
        #acl_edit /.:/sec/group/$SUBSYSDIR/dfs-bak-servers
        acl_edit -addr $BINDING group/$SUBSYSDIR/dfs-bak-servers \
        -m group:acct-admin:rcDnfmM \
!       -m group:$SUBSYSDIR/dfs-admin:rcDnfmM \
!       -m any_other:rt

        echo "\tgroup/subsys/dce/cds-admin"
        #acl_edit /.:/sec/group/$SUBSYSDIR/cds-admin
        acl_edit -addr $BINDING group/$SUBSYSDIR/cds-admin \
!       -m group:acct-admin:rctDnfmM \
!       -m any_other:rt

        echo "\tgroup/subsys/dce/cds-server"
        #acl_edit /.:/sec/group/$SUBSYSDIR/cds-server
***************
*** 2917,2923 ****
        acl_edit -addr $BINDING group/$SUBSYSDIR/cds-server \
        -m group:acct-admin:rctDnfmM \
        -m group:$SUBSYSDIR/cds-admin:rctDnfmM \
!       -m group:$SUBSYSDIR/cds-server:rctDnfmM

        echo "\torg"
        #acl_edit /.:/sec/org
--- 2927,2934 ----
        acl_edit -addr $BINDING group/$SUBSYSDIR/cds-server \
        -m group:acct-admin:rctDnfmM \
        -m group:$SUBSYSDIR/cds-admin:rctDnfmM \
!       -m group:$SUBSYSDIR/cds-server:rctDnfmM \
!       -m any_other:rt

        echo "\torg"
        #acl_edit /.:/sec/org
***************
*** 2924,2930 ****
        acl_edit -addr $BINDING org -m group:acct-admin:rcidDn

        #acl_edit /.:/sec/org -io \
!       acl_edit -addr $BINDING org -io -m group:acct-admin:rctDnfmM

        #acl_edit /.:/sec/org -ic
        acl_edit -addr $BINDING org -ic -m group:acct-admin:rcidDn
--- 2935,2942 ----
        acl_edit -addr $BINDING org -m group:acct-admin:rcidDn

        #acl_edit /.:/sec/org -io \
!       acl_edit -addr $BINDING org -io -m group:acct-admin:rctDnfmM \
!       -m any_other:rt

        #acl_edit /.:/sec/org -ic
        acl_edit -addr $BINDING org -ic -m group:acct-admin:rcidDn

[11/23/92 public]

Assigned this to myself since I have just become responsible for this.

[3/2/93 public]
Updated this to make sure we (HP sec dev) get a copy of it, so we can decide
if it's the right thing to do...

[07/30/93 public]
This was closed by the HP dce_config drop.



CR Number                     : 4380
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : Allow reconfiguration of sec_clientd
Reported Date                 : 6/22/92
Found in Baseline             : 1.0.1b20
Found Date                    : 6/22/92
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config
Sensitivity                   : public

[6/22/92 public]
I know, I know, dce_config doesn't support reconfiguration.  But since the official,
sanctioned method for reconfiguring ('dce.rm; dce_config') doesn't work in this case,
maybe this could be considered?

Problem:  When you screw up the configuration of a client machine, remove the configuration,
and try again, dce.rm deletes /krb5/v5srvtab.  But the machine's account still exists
in the Registry.  Now the account still exists but you have no idea what the password is
and dce_config fails when it first tries to use the machine's credentials for something.

Workaround:  Between 'dce.rm' and 'dce_config', remove the account by hand.

Proposed solution:  Have config_secclient() first attempt to remove the account (maybe
only attempt if it actually exists), then add it.

[7/8/92 public]
Changed to enhancement.

[07/30/93 public]
This one is closed by the HP drop dce_config.



CR Number                     : 4313
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : pmax
S/W Ref Platform              : osf1
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : BIND_PE_SITE setting clean up
Reported Date                 : 6/17/92
Found in Baseline             : 1.0.1
Found Date                    : 6/17/92
Severity                      : D
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config
Sensitivity                   : public

[6/17/92 public]
BIND_PE_SITE is turned on at the top of dce_config and then turned off in
a few small places to start servers.  It should be the other way around.
It should only be turned on for those that need it (initial cell config
stuff and only secd at that, and a dce_login_noexec before CDS is up.)  

This needs to be thought out really well before anything is done.

[11/23/92 public]
Changed to enhancnement.

[08/04/93 public]
This one is fixed by HP drop of dce_config.



CR Number                     : 3694
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : pmax
S/W Ref Platform              : osf1
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : If possible, dce_config should determine if a client can broadcast to its CDS server
Reported Date                 : 5/20/92
Found in Baseline             : 1.0.1b16
Found Date                    : 5/20/92
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config
Sensitivity                   : public

[5/20/92 public]
It would be nice if dce_config determined if a client could or could not
broadcast to its CDS server.  I have mistakenly input the wrong answer a
couple of times and it caused alot of problems during the DCE configuring.

[06/03/93 public]
This could be easy to do with the 'new' getip program which can get the
IP addreses of both the server and the client and compare the class B
addresses (the first 3 octets).

[08/04/93 public]
This is closed by the HP drop of dce_config.



CR Number                     : 3329
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : pmax
S/W Ref Platform              : osf1
Component Name                : cfg
Subcomponent Name             : dce_config script
Short Description             : dce_config script may use softlink
for executables, libraries during installation
Reported Date                 : 5/7/92
Found in Baseline             : 1.0
Found Date                    : 5/7/92
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config
Sensitivity                   : public

[5/7/92 public]

We have a suggestion on the installation process throgh
dce_config. Currently, it copies DCE libraries and executables
to local disks. That is ok in the absence of a distributed file system
but here we at transarc can share those libraries and executables among
machines. In our case, a softlink would do instead of an actual
copy in the local disk.
  Thus I suggest that dce_config instead of using 'cp' in a
command, use a shell variable, say, COPY-OR-LINK that can be
set to 'cp' or 'ln -s' depending on the situation. This will
help the installation process here since we don't have to modify
dce_config everytime we receive a new dce_config script.

[5/20/92 public]
changed to enhancement

[08/04/93 public]
The Administrator is now prompted during installation for copy/links
of DCE executables. This is closed by HP dce_config.

[08/04/93 public]
You're right Tom. The implementation just isn't there.

[08/05/93 public]
OK, the implementation is there. The modified routines install(), install_appdev(), and copy_libdce() optionally perform symbolic links the install tree.
This should be tested by SNI because of changes to the SVR4 library 
installation that I did not test. Only tested on HP_UX and 486 platforms.

[11/10/93 public]
CP_OR_LINK no does the right thing, verified many times.
Closed.



CR Number                     : 2794
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : pmax
S/W Ref Platform              : osf1
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : dce_config scary message
Reported Date                 : 4/15/92
Found in Baseline             : 1.0.1b11
Found Date                    : 4/15/92
Severity                      : E
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config
Sensitivity                   : public

[4/15/92 public]
When running dce_config, the word 'bye.' shows up at the end of
several security operations while configuring a client.  This is
presumably from whatever program dce_config runs to perform those
security operations.  The message is scary for a naive (hi!) cell
administrator, and should be removed.

---------------------- dce_config log begin ------------------------

         DCE Configuration Menu


         1. Initial Cell Configuration
         2. Additional Server Configuration
         3. DCE Client


        98. Return to previous menu
        99. Exit



        selection:  3
... clear ...


        Enter the name of your cell: darkman_cell.osf.org
        What is the name of the Security Server for this cell?
darkman.osf.org
        Ensure the /opt/dcelocal/etc/security/pe_site file
        matches that on the server...
        Press <ENTER> to continue

                creating /krb5/krb.conf file...
                adding kerberos entry to /etc/services ...
Current site is: registry server at /.../darkman_cell.osf.org
Domain changed to: principal
Domain changed to: account
bye.
                starting sec_clientd
        This machine is now a security client...
        Press <ENTER> to continue

... clear ...
Current site is: registry server at /.../darkman_cell.osf.org
Domain changed to: principal
Domain changed to: account
bye.

---------------------- dce_config log end ------------------------

[4/16/92 public]
Changed to enhancement and adjusted severity

[08/20/93 public]
Fixed by the 1.0.3 dce_config from HP.
Closed.



CR Number                     : 2753
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : osf1
Component Name                : cfg
Subcomponent Name             : 
Short Description             : zoneinfo files not installed causes test_zonecvt failure
Reported Date                 : 4/14/92
Found in Baseline             : 1.0.1b11
Found Date                    : 4/14/92
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config
Sensitivity                   : public

[4/14/92 public]
test_zonecvt yields the following:

    absolut common$ test_zonecvt < zonecvt.dat
    EST5 1991-07-01-14:37:22+01:00I22.3             # Force standard time
    1991-07-01-08:37:22.000-05:00I22.300 (EST) Standard Time
    1991-07-01-14:37:22.000+01:00I22.300 (GMT+1:00)
    :US/Eastern 1991-07-01-14:37:22+01:00I22.3      # Check DST
    utc_localzone results did not compare
    1991-07-01-13:37:22.000+00:00I22.300 (:US/Eastern) Standard Time
    1991-07-01-14:37:22.000+01:00I22.300 (GMT+1:00)
    Failure detected!!
    Timezone: :US/Eastern, Time: 1991-07-01-14:37:22+01:00I22.3

[4/27/92 public]
changed to rsalz

[5/5/92 public]

 The basic problem is that this test assumes that the entire /etc/zoneinfo
 database is installed. This is a dce_config/installation problem, and should
 be reassigned.

[06/17/92 public]
Changed from priority 1 to 2.

[10/19/92 public]
Changed priority = 1 for all bugs > 6 months old.

[10/22/92 public]
Fixing this defect is dependent on the code relocation needed to close defect
5765.

[04/08/93 public]
The entire zoneinfo directories need to be installed.
The best way to do this is to link 
	/etc/zoneinfo --> /opt/dcelocal/etc/zoneinfo

and copy the entire zoneinfo tree to dcelocal.
This routine install_dts() in dce_config needs to be rewritten to
accomplish this.

If an OS already has a directory /etc/zoneinfo the user should be prompted
to replace it with a link to the DCE area similar to what it does with
existing header files (pthread.h et. al).

Also, we should think about installing the zoneinfo stuff in
/usr/share/lib/zoneinfo, similar to /usr/share/lib/terminfo.

[06/10/93 public]
This is not a dts problem, it is a install problem.
dce_config needs to install all the zoneinfo files as described
above.  This will probably be fixed in 1.0.3 with the improved
dce_config from HP.

In any event, I am lowering this to a B3 and moving it over to
the dce component.

[07/30/93 public]
The install_dts was rewritten by Tom to install the zoneinfo datafiles
into DCELOCAL/etc/zoneinfo and warns (prompts) the administrator that a 
symbolic link is suggested for /etc/zoneinfo.

[08/02/93 public]
The zoneinfo files are not correctly installed. If a previous cell config. was
done the zoneinfo files get copied into a second copy of the zoneinfo directory
one level down (previous zoneinfo directory already exists, not removed by dce.rm). The present dce_config will only work on machines that have not had previouscell configurations installed.

[08/02/93 public]
OK, It's closed in all cases now.



CR Number                     : 2511
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : CacheInfo not being created
Reported Date                 : 4/2/92
Found in Baseline             : 1.0.1b9
Found Date                    : 4/2/92
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.0.2a
Affected File(s)              : src/config/dce_config
Sensitivity                   : public

[4/2/92 public]

After installing all DCE componets (from dce_config) and after Initial Cell
Configuration I selected the

  CONFIGURE
  Additional Server Configuration
  DFS File Server

menu, I selected 'in memory' in response to the question asking me where I
wanted my cache rather than 'on the local disk'.  Just after supplying how many
blocks to use I got the message:

   dfsd: can't read cache info file '/opt/dcelocal/etc/CacheInfo' (code 2)
   dfsd: failed to open cacheinfo file

From looking at the dce_config script it appears as though the CacheInfo file
is being created only if you select 'on the local disk'.  Even though you want
to use memory for your cache dfsd still wants the CacheInfo file.  I attempted
making a dummy CacheInfo file thinking all it wanted was to see the file but it
tried to create some log files in the directory specified in the file.  Perhaps
there is another parameter to dfsd for 'in memory' cache??

[6/4/92 public]
It's going to take a lot more than fixing this bug before we have a 
working diskless platform.  This bug is deferred until such time as 
we have a diskless platform on which a fix for this can be 
tested.

[6/15/92 public]
Changed to open enh since we aren't using defer

[6/7/93 public]
Fixed.  Finally.

[11/10/93 public]
Closed.



CR Number                     : 2416
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : pmax
S/W Ref Platform              : osf1
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : dce_config can't deconfig.
Reported Date                 : 3/26/92
Found in Baseline             : 1.0.1b5
Found Date                    : 3/26/92
Severity                      : E
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config
Sensitivity                   : public

[3/26/92 public]
There is no way through dce_config or some other "clean" mechanism to remove a
host from a cell. At this time, the only way to remove a host is to remove all
namespace entries by hand. This has proven to be a time consuming process. I've
given this a relatively high priority since it has such a negative impact on
all of us on the DCE team.

[4/7/92 public]
I've moved down the priority since this probably won't get done in the near
future.  Other bugs which address performance problems with dce_config will
help the time consuming nature of this.  Also, if anyone doing this
operation (and therefore knows how) would take the time to log such a
session, I will create a script.

[4/15/92 public]
Changed to enhancement.

[08/04/93 public]
There is now a menu item to unconfigure a host. Closed by HP drop of dce_config.



CR Number                     : 2115
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : Having trouble sleeping.
Reported Date                 : 2/19/92
Found in Baseline             : 1.0.1b3
Found Date                    : 2/19/92
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config
Sensitivity                   : public

[2/19/92 public]

There are a number of sleeps in dce_config which try to wait until 
something has completed before continuing.  This implementation is very
machine and load dependent.

Some of the sleep values have been shown to be insufficient on our
AIX and PMAX test platforms.  They should be increased.

A much better solution would be to implement some generic synchronization
tool.

[4/13/92 public]

Reassigned to Melman.  Some of the sleeps following CDS may now be removed.
See Mark Fox for more info.

[08/20/93 public]
All sleeps in the 1.0.3 dce_config (from HP) are correct.
Anything that is timing related are in repeat loops.

Closed.



CR Number                     : 2084
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : pmax
S/W Ref Platform              : osf1
Component Name                : cfg
Subcomponent Name             : dce_config
Short Description             : scripts should be linked in /etc
Reported Date                 : 2/12/92
Found in Baseline             : 1.0.1
Found Date                    : 2/12/92
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config
Sensitivity                   : public

[2/12/92 public]
dce_config currently copies scripts into /etc as well as into
/opt/dcelocal/etc.  They should only be in one place and links should be in
/etc the way they are with /usr/bin.  The only real problem here is that on
some systems the / partition is too full to copy all of dce_config to.

[08/04/93 public]
The dce_config and associated scripts are linked during bootstrap from /etc
to the installation tree/directories. Closed by HP dce_config drop.



CR Number                     : 582
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : other
S/W Ref Platform              : other
Component Name                : cfg
Subcomponent Name             : config
Short Description             : dce_config should write to a log file.  When errors occur they
Reported Date                 : 01/06/92
Found in Baseline             : .75c
Found Date                    : 
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config
Sensitivity                   : public

[01/29/92 public]

Orbit reference number 4423
reference     
product
phaseFound    development

History:
lastUpdate    92/01/06 09:03:37
endDate                                
assignDate    92/01/06 09:03:37   





    addDate              action          userLogin (userName)
    -------------------- --------------- ----------------------------------
    92/01/06 09:03:37    create          page (Scott Page)

[01/06/92 public]
dce_config should write to a log file.  When errors occur they are frequently
cleared from the screen by the script and lost forever.

[07/30/93 public]
This enhancement was closed by the HP dce_config drop. Dce_config now records
errors and activity in the dce_config.log log file.



CR Number                     : 576
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : cfg
Subcomponent Name             : 
Short Description             : cdsd won't start if cell_admin pw is changed
Reported Date                 : 12/12/91
Found in Baseline             : .71b
Found Date                    : 
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.0.3
Affected File(s)              : dce_config
Sensitivity                   : public

[01/29/92 public]

Orbit reference number 4131
reference     
product
phaseFound    development

History:
lastUpdate    91/12/12 17:26:45
endDate                                
assignDate    91/12/12 17:24:37   





    addDate              action          userLogin (userName)
    -------------------- --------------- ----------------------------------
    91/12/12 14:37:12    create          hirsch (Phil Hirsch)
    91/12/12 16:20:08    modify          drb (Defect Review Board)
    91/12/12 17:24:37    assign          leban (Dick Leban)
    91/12/12 17:25:07    accept          skeen (D. Skeen)
    91/12/12 17:26:45    return          skeen (D. Skeen)
    92/02/04 11:30       modify          keegan (P.Keegan)

[12/12/91 public]

I am submitting this for Beth Bottos (bab@transarc.com):

Using the dce_config big bang script, we find that cdsd won't start
up if the cell_admin password is changed. It looks like this forces
all DCE cells to have the same password for cell_admin!

[12/12/91 public]
on dce.73c
==============
This is a bug in dce_config. It doesn't expect the cell_admin password
to be changed before configuring the CDS server. As a result, the cds-server
account is not created and the CDS server cannot do a secure login.
-Peter

[keegan 2/4/92 public]:
===============

[3/17/92 public]
Changed to category: dce.
Reassigned to Melman.

[5/1/92 public]
Lowered to a C, the workaround is to not change the cell_admin password
before configuring the CDS server for the first time.  I don't think this
is a major restriction.

[5/5/92 public]
The problem and restriction are more extensive than this:  once the
cell_admin account's password is changed, dce_config no longer works
for anything (including configuring new client machines).

However, the password is stored in an environment variable (cellpw) near
the top of the file so another simple workaround is to change this in
dce_config when you change the actual password.  (The security
implications are another matter...)

[6/8/92 public]
Changed to enhancement.

[07/22/92 public]
Added note to Module 1 of Admin Gd, section 6.4 (Customizing the Script)
where it talks about changing the cell_admin and cellpw variables.
Noted that if cell_admin's password is changed in registry that it
has to be changed in the cellpw variable of dce_config in order for
dce_config to work right.

[07/30/93 public]
This one was closed by the HP dce_config drop.



