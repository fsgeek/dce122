CR Number                     : 13485
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : directory list does not use authentication.
Reported Date                 : 5/30/96
Found in Baseline             : 1.1, 1.2
Found Date                    : 5/30/96
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2.2
Fixed In Baseline             : 1.2.2
Affected File(s)              : admin/dcecp/cdscp.c
Diff supplied by              : user
Diff release                  : 1.1
Sensitivity                   : public

[5/30/96 public]

dcecp directory list may not use authetication even if the user is autheticated
and if the ACLs on the entry are not open for unauth. access it fails. 

Fix:
File: admin/dcecp/cdscp.c
*** 12.6        1995/05/15 22:26:05
--- 12.10       1996/05/13 20:27:13
***************
*** 2,7 ****
--- 2,13 ----
   * @TRANSARC_COPYRIGHT@
   *
   * $TALog: cdscp.c,v $
+  * Revision 12.10  1996/05/13  20:27:13  aswini
+  * Ensure that directory_list() uses authentication if available.
+  *
+  * See above.
+  * [from r12.6 by delta aswini-17873-admin-dcecp-cds-dir-list, r1.1]
+  *
   * Revision 12.6  1995/05/15  22:26:05  aswini
   * [merge of changes from 12.3 to 12.5 into 12.4]
   *
***************
*** 25,31 ****
   */
  
  #if !defined(_NOIDENT) && !defined(lint)
! static char *TARCSId = "$Id: c013485,v 1.3 96/10/22 14:13:45 root Exp $";  #endif
  
  
--- 31,37 ----
   */
  
  #if !defined(_NOIDENT) && !defined(lint)
! static char *TARCSId = "$Id: c013485,v 1.3 96/10/22 14:13:45 root Exp $";
  #endif
  
  
***************
*** 1013,1018 ****
--- 1019,1026 ----
       */
      if (Tcl_SplitList(interp, argv[1], &largc, &largv) != TCL_OK)
          return TCL_ERROR;
+ 
+     do_sec_login();
  
      for (dir_number = 0; dir_number < largc; dir_number++) {
          strcpy((char *)dir_name.uc, (char *)largv[dir_number]);

[10/22/96 public]
Fix submitted to 1.2.2, bug closed.



CR Number                     : 13354
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : ENDGAME: Fix VPATH to find tclTest.o
Reported Date                 : 2/23/96
Found in Baseline             : 1.2.1
Found Date                    : 2/23/96
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : ./test/functional/admin/tcl_dce/Makefile
Sensitivity                   : public

[2/23/96 public]
ENDGAME: Fix VPATH to find tclTest.o

[2/23/96 public]
DIFF:
*** /u2/sandboxes/nb/link/src/test/functional/admin/tcl_dce/Makefile    Mon Dec 
11 09:21:18 1995
--- Makefile    Fri Feb 23 10:21:21 1996
***************
*** 7,25 ****
  # 
  # HISTORY
  # $Log:	c013354,v $
# Revision 1.4  96/02/28  17:25:33  root
# changed fields:  new/changed/deleted note(s) [psn 2/28/96 public]
# 
# Revision 1.3  96/02/23  11:53:41  root
# changed fields: Interest List CC  
# 
# Revision 1.2  96/02/23  11:41:19  root
# changed fields: CR in Code, Doc, or Test?  Reported by  Interest List CC  Reported by Company  Status  Fixed In Baseline   new/changed/deleted note(s) [psn 2/23/96 public]
# 
  # Revision 1.1.8.2  1995/12/11  15:21:17  root
  #     Submit
! #
  #     HP revision /main/HPDCE02/2  1995/06/07  13:48 UTC  root
  #     build tcltest
! #
  #     HP revision /main/HPDCE02/2  1995/06/07  13:48 UTC  mothra
  #     build tcltest
! #
  #     HP revision /main/HPDCE02/1  1995/05/11  12:43 UTC  root
  #     fix IDIR
  #     [1995/12/11  14:34:16  root]
! #
  # Revision 1.1.4.1  1994/10/26  21:03:13  mori_m
  #     CR 11259:  Added multi-bytes functional tests.
  #     [1994/10/26  20:51:56  mori_m]
--- 7,29 ----
  # 
  # HISTORY
  # $Log:	c013354,v $
# Revision 1.4  96/02/28  17:25:33  root
# changed fields:  new/changed/deleted note(s) [psn 2/28/96 public]
# 
# Revision 1.3  96/02/23  11:53:41  root
# changed fields: Interest List CC  
# 
# Revision 1.2  96/02/23  11:41:19  root
# changed fields: CR in Code, Doc, or Test?  Reported by  Interest List CC  Reported by Company  Status  Fixed In Baseline   new/changed/deleted note(s) [psn 2/23/96 public]
# 
+ # Revision 1.1.8.3  1996/02/23  16:40:58  root
+ #     ENDGAME: Fix VPATH to find tclTest.o
+ #     [1996/02/23  16:32:54  root]
+ #
  # Revision 1.1.8.2  1995/12/11  15:21:17  root
  #     Submit
! # 
  #     HP revision /main/HPDCE02/2  1995/06/07  13:48 UTC  root
  #     build tcltest
! # 
  #     HP revision /main/HPDCE02/2  1995/06/07  13:48 UTC  mothra
  #     build tcltest
! # 
  #     HP revision /main/HPDCE02/1  1995/05/11  12:43 UTC  root
  #     fix IDIR
  #     [1995/12/11  14:34:16  root]
! # 
  # Revision 1.1.4.1  1994/10/26  21:03:13  mori_m
  #     CR 11259:  Added multi-bytes functional tests.
  #     [1994/10/26  20:51:56  mori_m]
***************
*** 38,44 ****
  # 
  # $EndLog$
  
! TCL_DIR                = ${SOURCEBASE}/admin/tcl_dce
  #TCL_TEST_DIR  = ${TCL_DIR}/tests
  
  VPATH          = ${TCL_DIR}
--- 42,48 ----
  # 
  # $EndLog$
  
! TCL_DIR                = ${SOURCEBASE}/admin/tcl_dce:../../../../admin/tcl_dce
  #TCL_TEST_DIR  = ${TCL_DIR}/tests
  
  VPATH          = ${TCL_DIR}

[2/28/96 public]
Slight correction: TCL_DIR should be the same as before, that is,
TCL_DIR                = ${SOURCEBASE}/admin/tcl_dce

and change VPATH to
VPATH          = ${TCL_DIR}:../../../../admin/tcl_dce



CR Number                     : 13337
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : command_ref
Short Description             : dcecp ref page does not mention xattrschema
Reported Date                 : 2/19/96
Found in Baseline             : 1.1
Found Date                    : 2/19/96
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2.1
Fixed In Baseline             : 1.2
Affected File(s)              : command_ref/man8dce/dcecp.8dce
Sensitivity                   : public
Transarc Deltas               : 
Transarc Status               : open

[2/19/96 public]
The dcecp ref page lists all of the dcecp administration objects.  But
it incorrectly lists "schema" instead of "xattrschema" as one of the
objects.
Added field Transarc Deltas with value `' 
Added field Transarc Status with value `open'

[2/20/96 public]
Fixed in the 1.2 version already.



CR Number                     : 13329
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : command_ref
Short Description             : clearinghouse verify is a local command
Reported Date                 : 2/16/96
Found in Baseline             : 1.1
Found Date                    : 2/16/96
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2.1
Fixed In Baseline             : 1.2
Affected File(s)              : command_ref/man8dce/dcecp_clearinghouse.8dce
Sensitivity                   : public
Transarc Deltas               : 16739
Transarc Status               : open

[2/16/96 public]
The clearinghouse ref page should make it clear that the verify
subcommand can only be executed against the local clearinghouse, not a
remote clearinghouse.  You have to actually telnet to each node with a
replica on it to use "clearinghouse verify" on that replica.
Added field Transarc Deltas with value `16739' 
Added field Transarc Status with value `open'

[2/20/96 public]

There is a very clear note in the 1.2 version which describes that the
'verify' (and others) command must be run on the machine that the
clearinghouse is residing on.



CR Number                     : 13323
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : doc
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : command_ref
Short Description             : ticket lifetimes inconsistently described
Reported Date                 : 2/16/96
Found in Baseline             : 1.1
Found Date                    : 2/16/96
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2.1
Fixed In Baseline             : 1.2
Affected File(s)              : command_ref/man8dce/dcecp_registry.8dce
Sensitivity                   : public
Transarc Deltas               : 15667
Transarc Status               : open

[2/16/96 public]
The registry attributes that describe lifetimes (e.g., deftktlife,
maxtktlife, etc) use the term "hours" to denote the type of value
expected.  Using the term "hours" leads readers to believe that they
can use an integer value (despite the clarification in the attribute
description).  However, if you specify an integer rather than the DTS
relative time format, the time is interpreted in seconds, not hours.
For example:
EX: dcecp> registry modify -maxtktlife 96 -deftktlife 96
rgy_edit=> prop
  Properties:
    Properties for Registry at:               /.../support.dce.transarc.com
    Registry is NOT read-only
    Certificates to this server may be generated at any site.
    Encrypted passwords are hidden
    Unix IDs ARE embedded in PGO UUIDs
    Low UID for principal creation:           100
    Low UID for group creation:               100
    Low UID for org creation:                 100
    Maximum possible UID:                     300000
    Minimum certificate lifetime              1m
    Default certificate lifetime              1m36s  <----<<
This should be clarified to reduce misconceptions about how the values
are interpreted.
Added field Transarc Deltas with value `15667' 
Added field Transarc Status with value `open'

[2/20/96 public]

Two things.  First, shame on you for putting a 'rgy_edit' example in
a dcecp bug :-)

Second, this was taken care of in the HP manpage code drop for 1.2.
All 'time' related attributes are no longer specified as 'hours',
but rather 'relative_time', talking about DTS relative time format,
including the syntax.  As of 1.2, there is no confusion with these
attributes.



CR Number                     : 13317
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cell ping
Short Description             : The way to find the master sec server is wrong
Reported Date                 : 2/7/96
Found in Baseline             : 1.1
Found Date                    : 2/7/96
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2
Affected File(s)              : cell.dcp
Sensitivity                   : public

[2/7/96 public]

Note: this has been fixed in the 1.2.1 code base. I am opening this one
for the sake of 1.1 maint project.

1.1 dcecp "cell ping" command assumes that /.:/subsys/dce/sec/master always
means the master security server. This is not true. After switching the
role with a slave, /.:/subsys/dce/sec/master will be a slave.

The correct way is to use dcecp "registry show $NAME -replica" command and
check the "type" field.

So the following code segment:

        foreach element $_dcp_registry_catalog {
            if {[string match */master $element] == 1} {
                _dcp_cell_debug "Ping security master $element"
                catch {server ping $element} msg
                break
            }
        }

should be replaced with:

        foreach element $_dcp_registry_catalog {
            set attrib [registry show $element -replica]
            set this_server [attrlist getvalues $attrib -type type]
            if {$this_server == "master"} {
                _dcp_cell_debug "Ping security master $element"
                catch {server ping $element} msg
                break
            }
        }

[2/7/96 public]

Hmmm.  Even though the netscape browser says 'dcemaint'
is a valid project, when I tried to forward this bug
to 'dcemaint', ot gave an error.  Fine.  This bug is
closed in dce1.2



CR Number                     : 13316
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : slave replist info not displayed by 'registry show'
Reported Date                 : 2/8/96
Found in Baseline             : 1.1, 1.2
Found Date                    : 2/8/96
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2.2
Fixed In Baseline             : 1.2.2
Affected File(s)              : rgy_sa_replist.c, rgy_sa_tclif.c
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[2/8/96 public]

   I have finally had it beaten into me by a security
engineer here skilled with security replicas that there
is some functionality currently in sec_admin that is not
in dcecp.  I'll try to describe this the best I can.

   In sec_admin, there are two commands used to view
information about security replicas, 'info' and 'lrep'.
'info' was intended to return information about a replicas
idea of itself.  'lrep' was intended to return the
information that a specific replica contained on its copy
of the replica list.

   This distinction is very important.  Both bind to a
specific replica, and both return information about that
replica, but the first command returns information the
replica stores about itself, the second command returns
information the replica has stored on it's copy of the
replica list.  There are some parameters that exists in
both places, and could differ when there are problems in
the cell.

   The 'info' command calls sec_rgy_rep_admin_info_full()
to populate a structure of type rs_replica_info_t.  The
information returned is from the specified security replica.
On output, all attributes of the structure are displayed by
the 'info -full' command.

   The 'lrep' command calls sec_rgy_replist_read_full() to
populate a structure of type rs_replica_item_full_t if the
specified replica is a "master", OR sec_rgy_replist_read()
to populate a structure of type rs_replica_item_t if the
specified replica is a "slave".  The main difference between
these two structures is the propagation information fields
specific to a master do not exist in the smaller structure.
On output, all attributes of one or the other structure are
displayed by the 'lrep -all' command, again depending on
the type of replica (master or slave).  NOTE: If the specified
replica is a slave, there is a warning printed on output
telling the user that no propagation information can be
displayed, since the replica is not the master, but the rest
of the replist information is displayed.

   Ok, within dcecp, there is one command that is used to
view replica information, and it contains a number of options,
'registry show'.

   The '-replica' option binds to the specified replica and
calls sec_rgy_replist_read() to populate the rs_replica_item_t
structure.  Then sec_rgy_rep_admin_info_vers() (which is a
'better' version of the sec_rgy_rep_admin_info_full() call that
sec_admin uses) is called to populate the rs_replica_info_t
structure.  On output, all attributes of the rs_replica_info_t
structure are displayed during 'registry show -replica', nothing
from the rs_replica_item_t structure.

   The '-master' option binds to the specified replica and
calls sec_rgy_replist_read() to populate the rs_replica_item_t
structure also.  Then if the specified replica is the master,
sec_rgy_replist_read_full() is called and the data put into
the rs_replica_item_full_t structure, which is displayed by the
'registry show -master' command.  If the replica is not the
master an error is displayed.  NOTE: This is where the problem
is.  In sec_admin, the data in rs_replica_item_t would be
returned.

To summarize...

                       contacting a
use the command        replica of type    get data from
--------------         ---------------  --------------------

info -full                slave        sec_rgy_rep_admin_info_full()

info -full                master       sec_rgy_rep_admin_info_full()

lrep -all                 slave        sec_rgy_replist_read()

lrep -all                 master       sec_rgy_replist_read_full()


registry show -replica    slave        sec_rgy_rep_admin_info_vers()

registry show -replica    master       sec_rgy_rep_admin_info_vers()

registry show -master     slave        Error message

registry show -master     master       sec_rgy_replist_read_full()

   Given that sec_rgy_rep_admin_info_vers() is superior to
sec_rgy_rep_admin_info_full(), the 'info' capability of
sec_admin is covered by 'registry show -replica'.

   However, sec_admin allows the display of replist information
about a replica other than the master (sec_rgy_replist_read()),
and dcecp does not.  While not a critical problem, it is very
useful to have this functionality, especially when there are
problems with the security servers in the cell.

   Now, how does this get fixed?  The easiest way is to make
modifications within the 'registry show -master' command to,
instead of returning an error when the specified replica is
not the master, have it continue and display it's information
from the sec_rgy_replist_read() structure.  This would require
no additional operations or options, and matches 'lrep' fairly
well.  The drawback is 'registry show -master' being applied to
a slave replica isn't common sense, especially since the return
data is not master-specific, but slave-specific.

   Another way would be to keep 'registry show -master' as is and
add a new '-replist' option, which would do the right thing on
non-master replicas.  This makes semantic sense, but having two
options do the same thing is odd.  But still...

   Another solution would be to get rid of the '-master' option
and replace it with the '-replist' option.  If the replica
specified is a master, then it displays the right output.  If
the replica is a slave, it displays the right output.  Getting
rid of an existing option, though, may not be an, uh, option.

   Suggestions?

[2/12/96 public]

Duh.  Had '-replica' in the last two paragraphs above where
'-replist' should be.

C'mon people.  I got beat upside the head when I added stuff
into dcecp without asking; so now I'm asking.  You ibm people
who complained so much last time, jump in now.  My vote is
to replace '-master' with '-replist', and suffer the consequences
of removing an option.  A close second is adding '-replist'
and leaving '-master' alone.  Having '-master' work for all
makes no sense, so forget that one.

A little help here, please.

[02/12/96 public]

I am going to change my mind again.  My first vote is going
to be leave -master the way it is and add -replist, and have
-replist work whether the specified replica is a master or
a slave.  Reason...

The output for -master comes from sec_rgy_replist_read_full(),
while -replist will come from sec_rgy_replist_read().  I'd bet
the data returned by each of these, when the target is the
master security server, comes from the same place, but it
still might be useful to be able to output the info in both
structures.

I'd like to have some opinions and ideas by friday (2/16) so
I can start coding.  Remember, the fate of a full replacement
of sec_admin is on the line.  :-)

[2/12/96 public]
Okay, what fun :-)

Thanks for the clear explanation above, I now understand this stuff.
Remember some of the goals here.  We want dcecp to try to present
similar replication info between services even when the services
implement it differently.  Bleech.  Another important goal, the
commands must have expected formated output so that things can be
scriptable. 

   registry show <foo> -replica 

shows replication info from replica foo.

   registry show -master

shows extra replication info that the master keeps.  You can give
-master a value or not, but it must be the name of a master, since
only masters would have the extra "master" info.  In fact this is
true, the master does have more info from the
sec_rgy_replist_read_full() call.

In keeping with the first goal, I'd like to avoid exposing the user to
the replist concept.  Exposing internal data structures if there is no
need is a bad idea.  We just have to make sure there is no
need.  Admins have to be able to do EVEYRTHING they might possible
need to.

What info are we looking to add?  Info from each replica that isn't
currently displayed.  How about adding a -verbose option to the
-replica option?  So we would have:

   registry show <foo> -replica 

   registry show <foo> -replica -verbose

   registry show -master

This has advantages:

 * no -replist concept to explain, just replica and master which they
   should already be familar with
 * the output format is the same based on the options given to the
   command and not dependent on the values of the options.
 * the concepts seem to work.  -replica says to give replica specific
   info, -master says to give master specific info, and -verbose add
   to -replica gives more replica specific info.

I think it avoids all the disadvantages Jim cites above:
 * no strange semantics
 * no duplication
 * no removal of existing options.

[2/12/96 public]
Outside of the 'help' system, there is not much precident for '-verbose'.
There are a lot more places that use 'show -all', although they usually use
it in a different context. It is usually (always?) used for commands that
have multiple options that each show a disjoint set of attributes, and
'-all' just shows the whole set of attributes. I think I like '-all' better
than '-verbose' regardless. It still satisfies all of Jim's & Howard's
requirements.

[2/12/96 public]
Good point, comments:
 * since it's in the help system there is some precidence
 * typical dcecp usage is display everything and let the user filter 
   what they don't want
 * -all is I believe *always* used to mean the union of all options 
   on a show command

So since all of those are contradictory :-), I'd say:
 * maybe -verbose isn't a great name, but -all is worse
 * maybe a better name exists, I can't think of one right now
 * since the semantics of -verbose are already defined by the help
   system, this seems to match it's use
 * maybe it would be better to change the output of the command to always 
   be in a verbose state so people could filter, but I think there is a
   backward compat issue there and I think that the two sets of data are
   different.

Still my current vote (if Jim's taking votes :-) is -verbose.

[2/13/96 public]

Howard, you are right about not exposing the users to internal data
structures.  I looked at this stuff for so long without understanding
that the only way I could finally figure out what was missing was to
use the internal structures.  So yes, other than using them here for
reference, we'll ignore 'em.

Careful, though, when you talk about not exposing the user to the concept
of replica lists.  They seem to be a very important part of the way
security servers operate, and the knowledge and understanding of the
information each security replica keeps is very important.  Then again,
maybe I've just been living with these security people for so long that
hearing public keys, replication, and schemas seems a true part of the
language.  God, I'm brainwashed. :-)

I understand I'm preaching to the converted here, but I think some
extra information would be useful.

The concept you mention of

>    registry show <foo> -replica 
> 
> shows replication info from replica foo.
> 
>    registry show -master
> 
> shows extra replication info that the master keeps.

is the hardest thing I had to overcome, and is incorrect.
Anything we do in documentation or futher enhancements to
dcecp should *not* push this idea.

The command

   registry show <blah> -replica

can take any <blah> and will show the *administrative* information that
<blah> holds about itself.  Whether <blah> is a master or slave, the
same parameters are returned (addresses, types, etc, with one 'version'
field exception).  Only info about <blah> is returned.

The command

   registry show <blah> -master

can only take <blah> as a master and shows the information on the master
replica list, including address and propagation data for *all replicas
on the list* (and this 'on the list' is important, because there could
be slave replicas who think they are 'on the list' but aren't, or slave
replicas who think they aren't 'on the list', but are, etc).  There are
parameters displayed by '-master' that overlap those of '-replica', but
are not the same.  It is wrong to think of '-master' as '-replica' plus
prop info.  The administrative information the master thinks about itself
isn't even retrieved using this command, just the replist info.

The (new) command

   registry show <blah> -<whatever>

can take <blah> either as a replica or master and will show information
on the <blah>'s replica list.  As we've said, an important distinction
from the master replica list, and an important distiction from the data
available from '-replica'.  This shows a slave's idea of the world, not
of itself, so thinking of it as '-replica with prop info' or '-replica
-whatver' just confuses the issue.

I feel bad pushing an incorrect model, just to fit dcecp.  We don't
allow the '-attribute' and -'policy' options together in 'registry show',
and this is close to the same thing.  To avoid pushing 'replist', maybe
something else will do... '-world'? '-global'? '-yourmomma'?  I don't
know.  John, you've always been good at coming up with new names...

[2/13/96 public]
Jim wrote above:

> I looked at this stuff for so long without understanding
> that the only way I could finally figure out what was missing was to
> use the internal structures.  So yes, other than using them here for
> reference, we'll ignore 'em.

Agreed.  Yes it's the best way for it to make sense.

> Careful, though, when you talk about not exposing the user to the concept
> of replica lists.  

I'd like to hide the concept from the user most of the time, but
provide them access to it when they need it.  In the same way that in
normal operations they don't care what replica they might talk to to
get a principals info and they don't have to with the principal show
command.  But if they are having replication problems they can
specific which replica to use to get the info.

>  God, I'm brainwashed. :-)

we all are. :-)

> The concept you mention of
> 
> >    registry show <foo> -replica 
> > 
> > shows replication info from replica foo.
> > 
> >    registry show -master
> > 
> > shows extra replication info that the master keeps.
> 
> is the hardest thing I had to overcome, and is incorrect.
> Anything we do in documentation or futher enhancements to
> dcecp should *not* push this idea.

I should have written "other" instead of "extra" above.
I think I understand all the differences you mention above.  
Again I propose:

                                 contacting a
use the command                  replica of type    get data from
--------------                   ---------------  --------------------
          
registry show -replica              slave        sec_rgy_rep_admin_info_vers()
registry show -replica              master       sec_rgy_rep_admin_info_vers()
registry show -replica -verbose     slave        sec_rgy_replist_read()
registry show -replica -verbose     master       error or same as w/o -verbose?
registry show -master               master       sec_rgy_replist_read_full()
registry show -master               slave        error

This changes no existing behavior.  It provides the missing
functionality.  The thing I like about it is that -replica by itself
returns the same info whether contacting a slave or master.  -master
by itself returns replist info that only the master has.  Seems good.
Each combinate of options produces output in an expected and different
format.

The additional info we need to present to the user is replica specific
(the replist info that each replica has, which yes does contain info
about other replicas) and therefore using a varient of -replica seems
to make sense.

Also, I would think when debuging a replication problem you would
first consult the sec_rgy_rep_admin_info_vers() info and only if that
didn't help would you go look at the sec_rgy_replist_read*() info.
(Is this correct?)  This then matches my "hide the concept form the
user unless they need to know it" model.

Here's an alternative:

registry show -replica              slave        sec_rgy_rep_admin_info_vers()
registry show -replica              master       sec_rgy_rep_admin_info_vers()
registry show -replist              slave        sec_rgy_replist_read()
registry show -replist              master       sec_rgy_replist_read_full()
registry show -replist -master      master       will bind to master

An issue is the similarity between -replic and -replist, it fails the
options should be unique in 2 characters test.  Also it removes
-master alone but that could be kept for backward compat.  Also it
means the output format of -replist is dependent on the server bound
to, I don't like it which is why I propose the -master varient above.
I still like my first idea above better.

[2/14/96 public]

Getting closer. :-)  Your first suggestion is better than the
alternative, with just a couple points.

> Also, I would think when debuging a replication problem you would
> first consult the sec_rgy_rep_admin_info_vers() info and only if that
> didn't help would you go look at the sec_rgy_replist_read*() info.
> (Is this correct?)  This then matches my "hide the concept form the
> user unless they need to know it" model.

   Both really; depends on the type of replication problem.  If something
bad happens to a replica, outside dce, the master will have an idea of
the replist that will still include the bogus replica.  Same for the
other slave replicas in the cell - their replists will not reflect the
state of the cell.  This causes untold numbers of binding problems,
among other things.  Knowing the idea of the replist on each machine
is a very powerful tool for debugging replica problems.

   Also, '-replica' will tell you what a replica thinks of itself, but
if you are going through a move of masters and slaves, the replist is
the only way to know who each replica *thinks* is the master and who are
the slaves.

   The 'delete -force' command can put the replist into an inconsistent
state, because it removes a replica from everybody's replist, without
telling the replica it removed.

   Anyway, there is need for all this info, which we all agree on.
The how to get it is all that's left.

>                                  contacting a
> use the command                  replica of type    get data from
> --------------                   ---------------  --------------------
>           
> registry show -replica              slave        sec_rgy_rep_admin_info_vers()
> registry show -replica              master       sec_rgy_rep_admin_info_vers()
> registry show -replica -verbose     slave        sec_rgy_replist_read()
> registry show -replica -verbose     master       error or same as w/o -verbose?
> registry show -master               master       sec_rgy_replist_read_full()
> registry show -master               slave        error

   For

> registry show -replica -verbose     slave        sec_rgy_replist_read()
> registry show -replica -verbose     master       error or same as w/o -verbose?

   a call to sec_rgy_replist_read() is just as valid to a slave as a master,
so an error isn't appropriate, and 'same as without -verbose' is bad.  We can
just call sec_rgy_replist_read() in this case and return the data.

   Really the only issue I have left is what to call it.  We've seen
'-replist', '-replica -verbose', and '-replica -all' presented.  I still
feel that '-replist' is the most natural option, and the most correct,
from an internals standpoint, but I agree that if not exposing the user
to these internals is important, then we should come up with something
better.

   The '-replica -all' option implies you get the same info from -replica
and this additional stuff, which isn't the case.

   And the main problem I have with '-replica -verbose' is the so-far
use of '-verbose' only in the help world.

   But, It doesn't bother me *that* much.  So, unless any violent objections
come in, we'll do the following, although if we could come up with some
snappy option instead of '-verbose' to use with '-replica', that would be
great.

                                  contacting a
 use the command                  replica of type    get data from
 --------------                   ---------------  --------------------
           
 registry show -replica              slave        sec_rgy_rep_admin_info_vers()
 registry show -replica              master       sec_rgy_rep_admin_info_vers()
 registry show -replica -verbose     slave        sec_rgy_replist_read()
 registry show -replica -verbose     master       sec_rgy_replist_read()
 registry show -master               master       sec_rgy_replist_read_full()
 registry show -master               slave        error

[2/14/96 public]
works for me.

[2/15/96 public]
Did I say "by friday"?  Oops.  I meant thursday...
Fixed at HP.

dcecp> registry catalog
/.../mgm_test_config/subsys/dce/sec/blech
/.../mgm_test_config/subsys/dce/sec/bagomon
dcecp>
dcecp> registry show /.../mgm_test_config/subsys/dce/sec/blech -replica
{name /.../mgm_test_config/subsys/dce/sec/blech}
{type slave}
{cell /.../mgm_test_config}
{uuid 7ac49b98-6795-11cf-b950-08000985b5a6}
{status enabled}
{lastupdtime 1996-02-15-08:48:34.000-05:00I-----}
{lastupdseq 0.203}
{addresses
 {ncadg_ip_udp 15.22.50.213}
 {ncacn_ip_tcp 15.22.50.213}}
{masteraddrs
 {ncadg_ip_udp 15.22.51.68}
 {ncacn_ip_tcp 15.22.51.68}}
{masterseqnum 0.100}
{masteruuid b6aad32c-6793-11cf-b28b-0800097da8e0}
{supportedversions
 secd.dce.1.0.2
 secd.dce.1.1}
dcecp>
dcecp> registry show /.../mgm_test_config/subsys/dce/sec/blech -replica -verbose
{name /.../mgm_test_config/subsys/dce/sec/blech}
{uuid 7ac49b98-6795-11cf-b950-08000985b5a6}
{type slave}
{addresses
 {ncadg_ip_udp 15.22.50.213}
 {ncacn_ip_tcp 15.22.50.213}}

{name /.../mgm_test_config/subsys/dce/sec/bagomon}
{uuid b6aad32c-6793-11cf-b28b-0800097da8e0}
{type master}
{addresses
 {ncadg_ip_udp 15.22.51.68}
 {ncacn_ip_tcp 15.22.51.68}}
dcecp>
dcecp> registry show /.../mgm_test_config/subsys/dce/sec/blech -master
Error: Registry replica specified is not the master.
dcecp>
dcecp>
dcecp>
dcecp> registry show /.../mgm_test_config/subsys/dce/sec/bagomon -replica
{name /.../mgm_test_config/subsys/dce/sec/bagomon}
{type master}
{cell /.../mgm_test_config}
{uuid b6aad32c-6793-11cf-b28b-0800097da8e0}
{status enabled}
{lastupdtime 1996-02-15-08:48:34.000-05:00I-----}
{lastupdseq 0.203}
{addresses
 {ncadg_ip_udp 15.22.51.68}
 {ncacn_ip_tcp 15.22.51.68}}
{masteraddrs
 {ncadg_ip_udp 15.22.51.68}
 {ncacn_ip_tcp 15.22.51.68}}
{masterseqnum 0.100}
{masteruuid b6aad32c-6793-11cf-b28b-0800097da8e0}
{supportedversions
 secd.dce.1.0.2
 secd.dce.1.1}
{updseqqueue {0.203 0.203}}
dcecp>
dcecp> registry show /.../mgm_test_config/subsys/dce/sec/bagomon -replica -verbose
{name /.../mgm_test_config/subsys/dce/sec/blech}
{uuid 7ac49b98-6795-11cf-b950-08000985b5a6}
{type slave}
{addresses
 {ncadg_ip_udp 15.22.50.213}
 {ncacn_ip_tcp 15.22.50.213}}

{name /.../mgm_test_config/subsys/dce/sec/bagomon}
{uuid b6aad32c-6793-11cf-b28b-0800097da8e0}
{type master}
{addresses
 {ncadg_ip_udp 15.22.51.68}
 {ncacn_ip_tcp 15.22.51.68}}
dcecp>
dcecp> registry show /.../mgm_test_config/subsys/dce/sec/bagomon -master
{name /.../mgm_test_config/subsys/dce/sec/blech}
{uuid 7ac49b98-6795-11cf-b950-08000985b5a6}
{type slave}
{addresses
 {ncadg_ip_udp 15.22.50.213}
 {ncacn_ip_tcp 15.22.50.213}}
{propstatus update}
{lastupdtime 1996-02-15-08:48:34.000-05:00I-----}
{lastupdseqsent 0.203}
{numupdtogo 0}
{commstate ok}
{lastcommstatus {Successful completion}}

{name /.../mgm_test_config/subsys/dce/sec/bagomon}
{uuid b6aad32c-6793-11cf-b28b-0800097da8e0}
{type master}
{addresses
 {ncadg_ip_udp 15.22.51.68}
 {ncacn_ip_tcp 15.22.51.68}}
dcecp>

diffs:

*** /vob/dce/src/admin/dcecp/rgy_sa_replist.c@@/main/HPDCE02/5  Mon Sep 11 10:20:00 1995
--- /vob/dce/src/admin/dcecp/rgy_sa_replist.c   Mon Feb 12 11:20:07 1996
***************
*** 524,530 ****
   * dcp_rgy_sa_do_show_replica_info()
   *
   * OVERVIEW:
!  * This routine returns the propagation information that is kept
   * by the replica specified in the argument or in _s(sec).
   *
   * INPUTS:
--- 524,530 ----
   * dcp_rgy_sa_do_show_replica_info()
   *
   * OVERVIEW:
!  * This routine returns the replica information that is kept
   * by the replica specified in the argument or in _s(sec).
   *
   * INPUTS:
***************
*** 901,908 ****
   *
   * OVERVIEW:
   * This routine returns the propagation information that the
!  * master keeps for each slave. If the argument is present,
!  * it must be the master.
   *
   * INPUTS:
   * itemP:
--- 901,908 ----
   *
   * OVERVIEW:
   * This routine returns the propagation information that the
!  * master keeps for itself and each slave. If the argument is
!  * present, it must be the master.
   *
   * INPUTS:
   * itemP:
***************
*** 1097,1102 ****
--- 1097,1202 ----
                  free(msg_p);
                  Tcl_AppendResult(interp, output_string, (char *)NULL);
              }
+         }
+     }
+
+     return TCL_OK;
+ }
+
+ ^L
+ /*
+  * FUNCTION:
+  * dcp_rgy_sa_do_show_replist_info()
+  *
+  * OVERVIEW:
+  * This routine returns the propagation information that the
+  * specified replica keeps for itself and the other replicas.
+  * The argument can be a master or a slave replica.
+  *
+  * INPUTS:
+  * itemP:
+  *         Contains replica information including the replica's UUID
+  *
+  * INPUT/OUTPUTS:
+  * interp    Structure associated with the interpreter. This will hold
+  *           the error message (if any) generated from the command. This
+  *           is also the location of any convenience variables.
+  *
+  * OUTPUTS:
+  * None
+  *
+  * RETURNS:
+  * TCL_OK    if no error occurs.
+  * TCL_ERROR if error occurs.
+  */
+ int dcp_rgy_sa_do_show_replist_info(Tcl_Interp *interp)
+ {
+     char               output_string[BUFSIZ];
+     char               *type_svc;
+     char               *unknown_svc;
+     unsigned_char_p_t  name1;
+     int                i;
+     error_status_t     status;
+
+     /*
+      * Initialization.
+      */
+     CLEAR_STATUS(&status);
+
+     /*
+      * Cycle through all replicas in the replica list.
+      */
+     for (i = 0; ((i < num_reps) && (replist != NULL)); i++) {
+         if (i > 0) {
+             Tcl_AppendResult(interp, "\n\n", (char *)NULL);
+         }
+
+         /*
+          * Display fully qualified CDS name of replica.
+          */
+         sprintf(output_string,
+                 "{%s %s/%s}",
+                 DCP_C_RGY_SA_NAME,
+                 (char *)site_cache[realtime_cache].cell_name,
+                 (char *)replist[i].rep_name);
+         Tcl_AppendResult(interp, output_string, (char *)NULL);
+
+         /*
+          * Display UUID of the replica.
+          */
+         uuid_to_string(&replist[i].rep_id, &name1, &status);
+         sprintf(output_string, "\n{%s %s}", DCP_C_RGY_SA_UUID, (char *)name1);
+         Tcl_AppendResult(interp, output_string, (char *)NULL);
+
+         /*
+          * Display type if replica is a "master" or "slave".
+          */
+         if (replist[i].master) {
+             type_svc = (char *)dce_sprintf(dcp_t_rgy_master);
+         }
+         else {
+             type_svc = (char *)dce_sprintf(dcp_t_rgy_slave);
+         }
+         if (type_svc == NULL) {
+             DCP_SET_MISC_ERROR(dcp_s_no_memory);
+         }
+         sprintf(output_string, "\n{%s %s}", DCP_C_RGY_SA_TYPE, type_svc);
+         Tcl_AppendResult(interp, output_string, (char *)NULL);
+         free(type_svc);
+
+         /*
+          * List of network addresses of the replica.
+          */
+         if (replist[i].rep_twrs) {
+             dcp__rgy_sa_print_towers(interp, DCP_C_RGY_SA_ADDRS, replist[i].rep_twrs);
+         } else {
+             unknown_svc = (char *)dce_sprintf(dcp_t_rgy_unknown);
+             if (unknown_svc == NULL) {
+                 DCP_SET_MISC_ERROR(dcp_s_no_memory);
+             }
+             sprintf(output_string, "\n{%s %s}", DCP_C_RGY_SA_ADDRS, unknown_svc);
+             Tcl_AppendResult(interp, output_string, (char *)NULL);
+             free(unknown_svc);
          }
      }


*** /vob/dce/src/admin/dcecp/rgy_sa_replist.h@@/main/HPDCE02/1  Mon Sep 11 10:16:44 1995
--- /vob/dce/src/admin/dcecp/rgy_sa_replist.h   Mon Feb 12 09:31:06 1996
***************
*** 93,100 ****
   */
  void dcp_rgy_sa_do_catalog(Tcl_Interp *, boolean32);
  int dcp_rgy_sa_do_modify_key(Tcl_Interp *, char *);
- int dcp_rgy_sa_do_show_replica_info(Tcl_Interp *);
  int dcp_rgy_sa_do_show_master_info(Tcl_Interp *);
  int dcp_rgy_sa_check_last_upd_seqno(Tcl_Interp *);
  int dcp_rgy_sa_list_replicas(Tcl_Interp *, char *, int *, char ***);
  int dcp_rgy_sa_bind_named_object(Tcl_Interp *, char *, site_access_t);
--- 93,101 ----
   */
  void dcp_rgy_sa_do_catalog(Tcl_Interp *, boolean32);
  int dcp_rgy_sa_do_modify_key(Tcl_Interp *, char *);
  int dcp_rgy_sa_do_show_master_info(Tcl_Interp *);
+ int dcp_rgy_sa_do_show_replist_info(Tcl_Interp *);
+ int dcp_rgy_sa_do_show_replica_info(Tcl_Interp *);
  int dcp_rgy_sa_check_last_upd_seqno(Tcl_Interp *);
  int dcp_rgy_sa_list_replicas(Tcl_Interp *, char *, int *, char ***);
  int dcp_rgy_sa_bind_named_object(Tcl_Interp *, char *, site_access_t);


*** /vob/dce/src/admin/dcecp/rgy_sa_tclif.c@@/main/HPDCE02/16   Mon Feb  5 10:57:43 1996
--- /vob/dce/src/admin/dcecp/rgy_sa_tclif.c     Wed Feb 14 16:10:39 1996
***************
*** 1655,1669 ****
   * If called with the '-policies' option, returns an attribute list of
   * all the registry-wide policies.
   *
!  * If called with the '-replica' option, returns the propagation
!  * information that is kept by the replica specified in the
!  * argument or in _s(sec).
   *
   * If called with the '-master' option, the master is contacted and
   * the propagation information that the master keeps for each
!  * slave is returned. In this case, the argument if present must
!  * be a master or an error is returned.
   *
   * All the options to this command are mutually exclusive.
   *
   * INPUTS:
--- 1655,1676 ----
   * If called with the '-policies' option, returns an attribute list of
   * all the registry-wide policies.
   *
!  * If called with the '-replica' option, returns replica data
!  * that is kept by the replica specified in the argument or in
!  * _s(sec).  Returns data from the 'rep_admin_info_full()' call.
   *
   * If called with the '-master' option, the master is contacted and
   * the propagation information that the master keeps for each
!  * slave is returned.  In this case the argument, if present, must
!  * be the master, or an error is returned.  Returns data from the
!  * 'replist_read_full()' call.
   *
+  * If called with the '-replica' and '-verbose' options, the specified
+  * replica is contacted and propagation information that the replica
+  * keeps for itself and the other replicas is returned.  The argument
+  * can be the master or a slave.  Returns data from the 'replist_read()'
+  * call.
+  *
   * All the options to this command are mutually exclusive.
   *
   * INPUTS:
***************
*** 1699,1704 ****
--- 1706,1712 ----
      boolean32                  policies = FALSE;
      boolean32                  master_option = FALSE;
      boolean32                  replica_option = FALSE;
+     boolean32                  verbose_option = FALSE;
      int                        rc = TCL_OK;
      int                        largc;
      char                       **largv;
***************
*** 1721,1734 ****
               dcp_t_rgy_show_policies_help},
          {"-replica", DCP_ARGV_CONSTANT, (char *)1, (char *)NULL,
               dcp_t_rgy_sa_show_replica_help},
          {(char *)NULL, DCP_ARGV_END, (char *)NULL, (char *)NULL, 0}
      };
!
      arg_table[0].dst = (char *)&attributes;
      arg_table[1].dst = (char *)&master_option;
      arg_table[2].dst = (char *)&policies;
      arg_table[3].dst = (char *)&replica_option;
!
      /*
       * Check to see if the user just wants help.
       */
--- 1729,1745 ----
               dcp_t_rgy_show_policies_help},
          {"-replica", DCP_ARGV_CONSTANT, (char *)1, (char *)NULL,
               dcp_t_rgy_sa_show_replica_help},
+         {"-verbose", DCP_ARGV_CONSTANT, (char *)1, (char *)NULL,
+              dcp_t_rgy_sa_show_verbose_help},
          {(char *)NULL, DCP_ARGV_END, (char *)NULL, (char *)NULL, 0}
      };
!
      arg_table[0].dst = (char *)&attributes;
      arg_table[1].dst = (char *)&master_option;
      arg_table[2].dst = (char *)&policies;
      arg_table[3].dst = (char *)&replica_option;
!     arg_table[4].dst = (char *)&verbose_option;
!
      /*
       * Check to see if the user just wants help.
       */
***************
*** 1743,1748 ****
--- 1754,1777 ----
       */
      DCP_CHECK_EXTRA_ARGS();

+     /*
+      * Check that 'verbose' isn't being used with anything
+      * but 'replica'.
+      */
+     if (verbose_option && (attributes || policies || master_option)) {
+         DCP_SET_MISC_ERROR(dcp_s_rgy_bad_use_of_verbose);
+     }
+
+     /*
+      * Check that if 'verbose' is present, 'replica' is also present.
+      */
+     if (verbose_option && !replica_option) {
+         DCP_SET_MISC_ERROR(dcp_s_rgy_verbose_missing_replica);
+     }
+
+     /*
+      * Check other mutually exclusive options.
+      */
      if (attributes) {
          option_cnt++;
      }
***************
*** 1815,1824 ****

      /*
       * Display registry or replica information, depending
!      * on the command line option specified.
       */
      if (master_option) {
          rc = dcp_rgy_sa_do_show_master_info(interp);
      }
      else if (replica_option) {
          rc = dcp_rgy_sa_do_show_replica_info(interp);
--- 1844,1856 ----

      /*
       * Display registry or replica information, depending
!      * on the command line options specified.
       */
      if (master_option) {
          rc = dcp_rgy_sa_do_show_master_info(interp);
+     }
+     else if (replica_option && verbose_option) {
+         rc = dcp_rgy_sa_do_show_replist_info(interp);
      }
      else if (replica_option) {
          rc = dcp_rgy_sa_do_show_replica_info(interp);

[10/22/96 public]
Submitted to 1.2.2, closing the bug.



CR Number                     : 13301
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : other
S/W Ref Platform              : other
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : inprojlist should default to yes
Reported Date                 : 2/6/96
Found in Baseline             : 1.1, 1.2
Found Date                    : 2/6/96
Severity                      : D
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2.2
Fixed In Baseline             : 1.1maint, 1.2.2
Affected File(s)              : admin/dcecp/rgy_pgo_group.c
Diff supplied by              : provider
Diff release                  : 1.2.2
Sensitivity                   : public

[2/6/96 public]
Email that Jonathan and I exchanged...

  On Tue Jan 30, 1996, Jonathan Chinitz wrote:
  
  > rgy_edit in creating a group sets the above attribute to
  > YES, meaning that any principal loggin in that belongs to
  > this group will have thi sgroup uuid show up in their
  > PAC. dcecp, however, sets this attribute by default to NO.
  > 
  > I am currently at a customer site that has been wracking
  > their brain how to use principals, aliases and groups
  > effectively, thinking that no matter how many groups a
  > principal belongs to -- when they login they only get the
  > primary group in their PAC, becuase all the others one are
  > set to {inprojlist no}.
  > 
  > 1) [Dave:] Is this a Transarc default for dcecp? (I doubt not).
  
  RFC 42.3 Under "group create" says that it should default to
  yes.  (page 54 of the .ps version)  The code wasn't all that
  clear for a quick check.
  
  > 2) [All:] Assuming answer to (1) is NO, should this be
  >    changed to match rgy_edit? 
  
  Yes.  Follow the spec :-)

So to be clear.  This CR is to make sure that dcecp sets 
inprojlist to yes by default when adding a group.

[2/7/96 public]

Good timing.  Fixed this one a few days ago...

*** /vob/dce/src/admin/dcecp/rgy_pgo_group.c@@/main/HPDCE02/8   Fri Jun 16 14:14:32 1995
--- /vob/dce/src/admin/dcecp/rgy_pgo_group.c    Thu Feb  1 08:34:06 1996
***************
*** 289,297 ****
      }

      /*
!      * Quota for a group is always -1.
       */
      pgo_item.quota = -1;

      /*
       * Check the argument list to verify the group create conditions
--- 289,300 ----
      }

      /*
!      * Quota for a group is always -1.  The default for
!      * 'inprojlist' should be 'yes'.
       */
      pgo_item.quota = -1;
+     pgo_item.flags = 0;
+     pgo_item.flags |= sec_rgy_pgo_projlist_ok;

      /*
       * Check the argument list to verify the group create conditions

Also added a couple test casess to group_create_P.tcl

[10/22/96 public]
Submitted fix to 1.2.2.  Closing bug.



CR Number                     : 13289
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : "acl show" command will not handle a list of more than 6 elements.
Reported Date                 : 1/24/96
Found in Baseline             : 1.1, 1.2
Found Date                    : 1/24/96
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2.2
Fixed In Baseline             : 1.1maint, 1.2.2
Affected File(s)              : admin/dcecp/util_binding.c
Diff supplied by              : provider
Diff release                  : 1.2.2
Sensitivity                   : public

[1/24/96 public]

Try "acl show [hostdata catalog]" with dcecp, you will get 6 ACLs.
Doing "hostdata catalog" inside dcecp will get you 7 entries. The
last one is missed in the acl show.

When taking a list of entries for the arg, "acl show" works fine up to
5 elements. Then it will drop the last one.

Reason: dcp_acl_show() (acl_tclif.c) calls dcp_acl_list_objects() to list
objects in the TCL list argument, which in turn calls 
dcp_binding_tcl_to_string() (acl_edit.c) to see how to expand the element,
since some may represent a string binding. It assumes that the list
represents a string binding elements first, if it cannot construct a string
binding, a status will show it. But in the case where more than 5 elements
are passed in, NULL is returned without setting the proper status. So the
later code does not put the last entry back to the list.

BTW, current 1.2 code has the same problem.

Here is a fix:

*** /project/dce/build/dce1.1/src/admin/dcecp/util_binding.c	Wed Aug 24 15:20:41 1994
--- util_binding.c	Wed Jan 24 15:34:05 1996
***************
*** 155,160 ****
--- 155,162 ----
          endpoint = argv[3];
          break;
        default:
+ 	/* set the rpc_status */
+ 	*rpc_status = rpc_s_invalid_binding;
          return NULL;
      }

[1/26/96 public]
Fix (as above) submitted to 1.1maint tree.

[2/6/96 public]

Applied the fix at HP... Thanks Weidong.  Also lowering severity
and priority because a workaround, sloppy as this one is, does
exist...

dcecp> foreach element [hostdata catalog] {
> set goober [acl show $element]
> puts $goober
> puts " " }

[10/22/96 public]
Fixed in 1.2.2.  Closing bug.

*** /vob/dce/src/admin/dcecp/util_binding.c@@/main/5    Tue Apr  2 19:16:06 1996
--- /vob/dce/src/admin/dcecp/util_binding.c@@/main/DCE_1.2.2/2  Mon Jul  8 12:29:27 1996
***************
*** 135,142 ****
   * OVERVIEW:  Turns a binding in tcl syntax into a string binding.
   *            Accepts an argc, argv as returned by Tcl_SplitList()
   *            as the tcl syntax, and returns a string binding as a char *.
!  *            if not 2 <= argc <= 4 then rpc_status is unchanged and
!  *            NULL returned.
   *            Use rpc_string_free() to free the allocated memory.
   *            On error rpc_status is set and returns NULL.
   *            Ignores network options.
--- 152,159 ----
   * OVERVIEW:  Turns a binding in tcl syntax into a string binding.
   *            Accepts an argc, argv as returned by Tcl_SplitList()
   *            as the tcl syntax, and returns a string binding as a char *.
!  *            if not 2 <= argc <= 4 then rpc_status is set to reflect
!  *            the problem and NULL is returned.
   *            Use rpc_string_free() to free the allocated memory.
   *            On error rpc_status is set and returns NULL.
   *            Ignores network options.
***************
*** 187,191 ****
!       default:
!         return NULL;
      }

      rpc_string_binding_compose((unsigned char *)objuuid,
--- 204,209 ----
!         default:
!             *rpc_status = rpc_s_invalid_binding;
!             return NULL;
      }

      rpc_string_binding_compose((unsigned char *)objuuid,



CR Number                     : 13271
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp regy checkpoint test fails
Reported Date                 : 12/29/95
Found in Baseline             : 1.2.1
Found Date                    : 12/29/95
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : src/admin/dcecp/rgy_utils.c
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[12/29/95 public]

This problem was found while running functional tests on DCE 1.2.1 on
an AIX 3.2 system.

FAILED, test : dcecp> registry checkpoint /.../ibm_l4_1122/subsys/dce/sec/ibm_l4 -cpi 10 (at Fri Dec  1 12:16:28 EST 1995)
FAILED, test : dcecp> registry checkpoint /.../ibm_l4_1122/subsys/dce/sec/ibm_l4 -cpi 2h (at Fri Dec  1 12:18:56 EST 1995)

FAILED : configurable checkpoint test (2 FAILED)

[01/12/96 public]

The dcp_rgy_checkpt_parse_cpi_time
function was returning TCL_ERROR when errors occured, but not explicitly
returning any value when it was successful, therefore success or failure
depended on the garbage value returned.  On HP it must have been 
returning NULL, but on AIX it was not, so it was interpreted as error.

Fixed by returning TCL_OK when no error occurs.  This fix has been 
tested and verified on AIX, but has not yet been submitted to the OSF
source tree.

[01/22/96 public]

This has been fixed in DCE 1.2.1
Closed

[01/23/96 public]

Russ, please hold off on closing anything.
Back to 'fix'.



CR Number                     : 13226
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : tcl_dce
Short Description             : Garbage at the end of the error message string
Reported Date                 : 12/18/95
Found in Baseline             : 1.2.1
Found Date                    : 12/18/95
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.2
Affected File(s)              : admin/tcl_dce/tclBasic.c
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[12/18/95 public]

Terminate the error message string during copy operation. This resolves the
tcl_dce test failures.

[12/18/95 public]

Context diff:

*** /vob/dce/src/admin/tcl_dce/tclBasic.c@@/main/HPDCE02/jrr_1.2_mothra/1      Tue Dec 12 17:43:16 1995
--- /vob/dce/src/admin/tcl_dce/tclBasic.c@@/main/HPDCE02/jrr_1.2_mothra/2      Mon Dec 18 14:41:10 1995
***************
*** 9,14 ****
--- 9,17 ----
  /*
   * HISTORY
   * $Log:	c013226,v $
# Revision 1.3  96/10/22  10:54:56  root
# changed fields: Status  
# 
# Revision 1.2  95/12/18  14:55:04  root
# changed fields: Status  Fixed In Baseline  Affected File(s)  Responsible Engr.  Resp. Engrs Company   new/changed/deleted note(s) [dat 12/18/95 public]
# 
+  * Revision /main/HPDCE02/jrr_1.2_mothra/2  1995/12/18  19:40 UTC  dat
+  *    Make sure i18n_msg_buf copied from i18n_msg_format is null terminated
+  * 
   * Revision /main/HPDCE02/jrr_1.2_mothra/1  1995/12/12  22:43 UTC  dat
   *    Don't mix sprintf named and implicit parameter selection on AIX
   * 
***************
*** 1216,1221 ****
--- 1219,1226 ----
                    *bufPtr++ = *formatPtr;
                }
            }
+           *bufPtr = '\0';
+ 
            sprintf(copyStorage, (char *)i18n_msg_buf, cmdStart, ellipsis);
            ckfree(i18n_msg_buf);
            free(i18n_msg_format);
***************
*** 1232,1237 ****
--- 1237,1244 ----
                    *bufPtr++ = *formatPtr;
                }
            }
+           *bufPtr = '\0';
+ 
            sprintf(copyStorage, 
                        (char *)i18n_msg_buf, cmdStart, ellipsis);
            ckfree(i18n_msg_buf);
***************
*** 2134,2139 ****
--- 2141,2148 ----
                    *bufPtr++ = *formatPtr;
                }
            }
+           *bufPtr = '\0';
+ 
            sprintf(copyStorage, 
                    (char *)i18n_msg_buf, cmdStart, ellipsis);
            ckfree(i18n_msg_buf);
***************
*** 2155,2160 ****
--- 2164,2171 ----
                    *bufPtr++ = *formatPtr;
                }
            }
+           *bufPtr = '\0';
+ 
            sprintf(copyStorage, (char *)i18n_msg_buf, cmdStart, ellipsis);
            ckfree(i18n_msg_buf);
            free(i18n_msg_format);



CR Number                     : 13162
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp test failures
Reported Date                 : 10/25/95
Found in Baseline             : 1.2
Found Date                    : 09/29/95
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : dcecp
Sensitivity                   : public

[10/25/95 public]

functional dcecp test failures:  many of these are because of a missing "."
in dcecp output which cause tests to fail. Example follows: 

520|0 1 9999 1 22|Test completed successfully.
520|0 1 9999 1 23|== Test output was:
520|0 1 9999 1 24|{1 {Interface id not entered}}
520|0 1 9999 1 25|== Expected output was:
520|0 1 9999 1 26|{1 {Interface id not entered.}}
520|0 1 9999 1 27|Test Failed.

Some failures are likely to be due missing dcecp functionality that 
will be found in the 1.2.1 final drop, log example as follows:
520|0 1 10070 1 11|==== Contents of test case:
520|0 1 10070 1 12|{         list [catch {endpoint show -foo -interface $INTERFACE1} msg] $msg     }
520|0 1 10070 1 13|Test completed successfully.
520|0 1 10070 1 14|== Test output was:
520|0 1 10070 1 15|{1 {Invalid RPC protocol sequence}}
520|0 1 10070 1 16|== Expected output was:
520|0 1 10070 1 17|{1 {The value '-foo' is not a valid endpoint map binding.}}
520|0 1 10070 1 18|Test Failed.
220|0 1 1 16:22:49|FAIL

[12/22/95 public]

These failures in the dcecp functional tests are no longer seen on final 
DCE 1.2.1 version. 
closed.



CR Number                     : 13120
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 13119
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : auditd commands set auth
info to packet privacy which may not be available
Reported Date                 : 9/12/95
Found in Baseline             : 1.1
Found Date                    : 9/12/95
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1, 1.1maint
Affected File(s)              : admin/dcecp/aud_util.c
	security/audit/auditd/dmn_rpc_manager.c
	security/audit/libaudit/trl_ops.c
	security/audit/libaudit/aud.sams
Sensitivity                   : public

[9/12/95 public]

Full Description:

If you build the rpc runtime with NOENCRYPTION, which you
must do to export DCE, you cannot control auditd with dcecp.
This is because both dcecp sets auth info to packet privacy, and
has no provision to back off if packet privacy is unavailable.

Proposed Solution:

Allow packet intergrety to be used also.

*** /dce/build/dce1.1/src/admin/dcecp/aud_util.c        Thu Dec 15 14:23:56 1994
--- admin/dcecp/aud_util.c      Wed Aug 16 17:00:22 1995
***************
*** 410,415 ****
--- 415,433 ----
                                    NULL,
                                    rpc_c_authz_dce,
                                    &st);
+       /*
+        * For the export version, we have to back off
+        * from packet privacy.
+        */
+       if (st == rpc_s_unsupported_authn_level) {
+             rpc_binding_set_auth_info(dcp_aud_binding_h,
+                                       aud_princ_name,
+                                       rpc_c_authn_level_pkt_integrity,
+                                       rpc_c_authn_default,
+                                       NULL,
+                                       rpc_c_authz_dce,
+                                       &st);
+       }
      }
      else {
          rpc_binding_set_auth_info(dcp_aud_binding_h,

[12/20/95 public]
Fixed in DCE 1.2.1
Closed

[1/19/96 public]

As far as I can tell, HP did not use the above suggested fix. Fixes are in
the following files (all without reference to this OT):

admin/dcecp/aud_util.c
security/audit/auditd/dmn_rpc_manager.c
security/audit/libaudit/trl_ops.c

I also think that the following fix is needed for 
security/audit/libaudit/aud.sams:

*** /project/dce/build/dce1.1-maint/src/security/audit/libaudit/aud.sams	Fri Sep 30 08:05:03 1994
--- libaudit/aud.sams	Fri Jan 19 11:41:33 1996
***************
*** 530,541 ****
  action		"The Security daemon must be running in order to use the Registry server.  Start the Security daemon and retry the operation."
  end
  
  start
  code		aud_s_wrong_protection_level
  sub-component 	aud_s_general
  attributes 	"svc_c_sev_error"
  text		"RPC client used wrong protection level"
! explanation	"Returned the information from the \*Lrpc_binding_inq_auth()\*O together with \*Lauthr_level=rpc_c_protect_level_pkt_privacy\*O and \*Lauthz_svc=rpc_c_authz_dce\*O."
  action		"Check communication between the client and the application server.  Then, adjust the protection level."
  end
  
--- 530,544 ----
  action		"The Security daemon must be running in order to use the Registry server.  Start the Security daemon and retry the operation."
  end
  
+ # For international (ie. non-DES) releases, check for a less strict (instead
+ # of privacy) non-encrypted protection level in rpc_binding_inq_auth_client():
+ 
  start
  code		aud_s_wrong_protection_level
  sub-component 	aud_s_general
  attributes 	"svc_c_sev_error"
  text		"RPC client used wrong protection level"
! explanation	"Returned the information from the \*Lrpc_binding_inq_auth()\*O together with \*Lauthr_level=rpc_c_protect_level_pkt_integrity\*O and \*Lauthz_svc=rpc_c_authz_dce\*O."
  action		"Check communication between the client and the application server.  Then, adjust the protection level."
  end

[1/27/96 public]

 
The complete diff for this OT follows:



Comparing the file in your sandbox with revision 1.1.12.1.
10a11,12
>  *    Auditd commands set auth info to packet privacy which may not
>  *    be available if the runtime is built with NOENCRYPTION. OT CR 13120.
12,14d13
<  * Revision 1.1.12.1  1996/01/11  20:45:34  dlynch
<  * *** Initial Branch Revision ***
<  *
413c412
<                                   rpc_c_authn_level_pkt_privacy,
---
>                                   rpc_c_authn_level_pkt_integrity,

Comparing the file in your sandbox with revision 1.1.9.1.
10a11,12
>  *	CR OT 13120 - changed auth info from pkt privacy to
>  *	pkt integrity.
12,14d13
<  * Revision 1.1.9.1  1996/01/27  15:53:51  dlynch
<  * *** Initial Branch Revision ***
<  *
538a538,543
> 
>         /*
>          * For international (ie. non-DES) releases, use a less strict,
>          * non-encrypted protection level in rpc_binding_set_auth_info():
>          */
> 
540c545
< 				  rpc_c_authn_level_pkt_privacy,
---
> 				  rpc_c_authn_level_pkt_integrity,
./security/audit/libaudit/aud.sams
Comparing the file in your sandbox with revision 1.1.8.1.
7a8,9
> #	CR OT 13120 - changed auth info to pkt integrity 
> #	from pkt privacy.
9,11d10
< # Revision 1.1.8.1  1996/01/27  15:53:55  dlynch
< # *** Initial Branch Revision ***
< #
539a539,541
> # For international (ie. non-DES) releases, check for a less strict (instead
> # of privacy) non-encrypted protection level in rpc_binding_inq_auth_client():
> 
545c547
< explanation	"Returned the information from the \*Lrpc_binding_inq_auth()\*O together with \*Lauthr_level=rpc_c_protect_level_pkt_privacy\*O and \*Lauthz_svc=rpc_c_authz_dce\*O."
---
> explanation	"Returned the information from the \*Lrpc_binding_inq_auth()\*O together with \*Lauthr_level=rpc_c_protect_level_pkt_integrity\*O and \*Lauthz_svc=rpc_c_authz_dce\*O."
./security/audit/auditd/dmn_rpc_manager.c
Comparing the file in your sandbox with revision 1.1.8.1.
10a11,12
>  *	Fix CR OT 13120.  Changed auth info to pkt integrity from
>  *	pkt privacy.
12,14d13
<  * Revision 1.1.8.1  1996/01/27  15:47:43  dlynch
<  * *** Initial Branch Revision ***
<  *
151a151,155
> /*
>  * For international (ie. non-DES) releases, check for a less strict,
>  * non-encrypted protection level in rpc_binding_inq_auth_client():
>  */
> 
156c160
<       if ((authn_level != rpc_c_protect_level_pkt_privacy) || \
---
>       if ((authn_level != rpc_c_protect_level_pkt_integ) || \
1040c1044,1050
< 	if ((authn_level == rpc_c_protect_level_pkt_privacy) &
---
> 
>       /*
>        * For international (ie. non-DES) releases, check for a less strict,
>        * non-encrypted protection level in rpc_binding_inq_auth_client():
>        */
> 
> 	if ((authn_level == rpc_c_protect_level_pkt_integ) &



CR Number                     : 13103
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp cell backup doesn't work
Reported Date                 : 9/1/95
Found in Baseline             : 1.1, 1.2
Found Date                    : 8/30/95
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2.2
Fixed In Baseline             : 1.2.2
Affected File(s)              : cell.dcp, bckp_cds.dcp, bckp_sec.dcp
 bckp_cds.dcp
Diff supplied by              : provider
Diff release                  : 1.2.2
Sensitivity                   : public

[9/6/95 public]

The "cell backup" command of dcecp does not work.  
When the command is invoked, the following error is returned:

dcecp> cell backup
Error: Invalid RPC protocol sequence

The control program itself has an error when parsing the CDS_Towers
information.  In the format_tower() function in file:

	src/admin/dcecp/cdscp_utils.c

it looks like the correct tower strings are retrieved and the function
returns 0, but the calling function is looking for CDS_SUCCESS (which is
not 0).

PROPOSED SOLUTION:

In format_tower() in cdscp_utils.c, return status after it is set
to CDS_SUCCESS.

Also, in bckp_sec.dcp and bckp_cds.dcp
	change:  principal show $host_princ
	to    :  principal show $host_princ -xattrs

[12/20/95 public]
Fixed in DCE 1.2.1
Closed

[10/1/96 public]
I am reopening this one.

In the cell backup script, the function _dcp_list_find needs a return
after the while loop:

***************
*** 451,456 ****
--- 451,457 ----
      lappend found_items [lindex $search_list $index] 
      set search_list [lreplace $search_list $index $index]
    }
+   return $found_items
  }
  
  #

In the bckp_{sec, cds}.dcp scripts, if the "exec tar" fails, the registry
is not enabled (or the cds server is not restarted).

Finally, with the ACL tightening on dced, the srvrconf objects cannot
be created with uid=gid=0. One possibility is to make the bckp_sec.dcp
and bckp_cds.dcp scripts setuid, owned by root (or perhaps, setgid with
appropriate permissions changes on the rgy data files and the CDS files)
and create the srvrconf objects under another uid/gid. This may be a
security hole however.

[10/2/96 public]
One more: in bckp_cds.dcp, cdsd has to be stopped before the file
names for the transaction log and the checkpoint file are calculated.

[10/22/96 public]
Please don't re-open an old DTS when a new problem is discovered.  The
original DTS was fixed with regard to the original problem.

As for the new problems you report in 'cell backup', there are four:

1. _dcp_list_find() needs a return after the 'while' loop.

   Done.

2. If 'exec tar' fails, the registry is not enabled and the cds server
   is not restarted.

   Fix is to put a 'catch' statement around the two 'exec tar' lines so
   any error message is caught and the tcl script will continue.  Done.

3. Acl tightening on dced...

   There are updated instructions in the 1.2.2 version of the 'cell' manpage
   which tells you how to get around this.  It is a combination of starting
   dced with the '-r' option and doing a few things in 'local' mode.  See
   the latest manpage for more information.

4. cdsd has to be stopped before the file names are available.

   This is done using 'cds disable'.

Closing the bug.  Diff for newest files (1.2.2) is below:

*** /vob/dce/src/admin/dcecp/scripts/cell.dcp@@/main/10 Tue Apr  2 19:11:45 1996
--- /vob/dce/src/admin/dcecp/scripts/cell.dcp@@/main/DCE_1.2.2/3        Thu Oct  3 11:28:35 1996
***************
*** 137,160 ****
  #
  # $EndLog$

- #
- # cell: dcecp "cell" object. Takes an arbitrary cell name and shows whether
- # all dce services are available or pings all servers/clients.
- #
-
  # Globals
! if { [ info globals CELL_DEBUG ] == ""  } {
      set CELL_DEBUG 0
  }

! proc cell { args } {
      set arg_table {
          {backup command function_call _dcp_backup_cell
!             "Backs up master security database and master clearinghouses."}
          {ping command function_call _dcp_ping_cell
!             "Shows the current server status of the cell."}
          {show command function_call _dcp_show_cell
!             "Shows attributes describing the configuration of a cell."}
          {help help help_list
              "Prints a summary of command-line options."}
          {operations operations operation_list
--- 168,196 ----
  #
  # $EndLog$

  # Globals
! if {[info globals CELL_DEBUG] == ""} {
      set CELL_DEBUG 0
  }

! #
! # cell:
! #    Takes an optional cell name and returns cell server and host
! #    information and shows whether all dce services are available
! #    by contacting all servers/clients/replicas/hosts based on the
! #    options specified.  Also allows backing up of master security
! #    database and all known cds clearinghouses.
! #
! proc cell {args} {
      set arg_table {
          {backup command function_call _dcp_backup_cell
!             "Backs up master security database and known clearinghouses."}
!         {catalog command function_call _dcp_catalog_cell
!             "Returns the names of the cells known to a cell."}
          {ping command function_call _dcp_ping_cell
!             "Shows the current server status of a cell."}
          {show command function_call _dcp_show_cell
!             "Returns attributes describing the configuration of a cell."}
          {help help help_list
              "Prints a summary of command-line options."}
          {operations operations operation_list
***************
*** 164,198 ****
      set local_args $args

      set verbose_prose \
! "This object allows finding cell information or backup of databases
! that define the makeup of the cell.  The argument is either an empty
! set or a fully qualified cell name.  If no argument is provided,
! operations are performed on the local cell.  Access to most operations
! relies solely on the ACL of the principal."

      parseargs $arg_table local_args -found_one
-
-     if { [info local help_prose ] > 0 } { return $help_prose }

!     if { [info local function_call ] > 0 } {
          _dcp_cell_debug "Calling $function_call"
          return [$function_call local_args]
      } else {
!         error "\"cell\" object requires a verb to form a command."
      }
  }


  #
! # _dcp_backup_cell: Backs up the master security service database and the
! #                   master cds clearinghouses. The scripts that are ultimately
! #                   called receive the backup destination from an ERA associated
! #                   with the:
! #                    a.) security server - /{cell_name}/dce-rgy
! #                    b.) cds clearinghouse - /{cell_name/hosts/{machine_name}/cds-server
  #
! #                   The ERA name is "bckp_dest" it is an encoding type stringarray.
! #                   The acl manager is principal.
  #
  proc _dcp_backup_cell {local_args} {
      global dcelocal_path
--- 200,234 ----
      set local_args $args

      set verbose_prose \
! "This object allows the discovery of cell information using the CDS namespace
! and security registry, or the backup of the security and CDS databases that
! define the makeup of the cell.  The optional argument is the fully-qualified
! name of a cell to operate on.  If no argument is provided, operations are
! performed on the local cell."

      parseargs $arg_table local_args -found_one

!     if {[info local help_prose] > 0} {return $help_prose}
!
!     if {[info local function_call] > 0} {
          _dcp_cell_debug "Calling $function_call"
          return [$function_call local_args]
      } else {
!         error "The \"cell\" object requires an operation to form a command."
      }
  }


  #
! # _dcp_backup_cell:
! #    Backs up the master security service database and the known cds
! #    clearinghouses. The scripts that are ultimately called receive
! #    the backup destination from an ERA associated with the...
! #        a) security server - /{cell_name}/dce-rgy
! #        b) cds clearinghouse - /{cell_name/hosts/{machine_name}/cds-server
  #
! #    The ERA name is "bckp_dest" it is an encoding type stringarray.
! #    The acl manager is principal.
  #
  proc _dcp_backup_cell {local_args} {
      global dcelocal_path
***************
*** 202,230 ****

      parseargs "" local_args -no_leftovers

!     if { [info local help_prose ] > 0 } { return }

!     if { [llength $local_args] > 1 } {
!         error "Unrecognized argument [lindex $local_args 1]."
!     } elseif { [llength $local_args] == 0 } {
!         set cell_name [lindex [name parse /.:] 0]
      } else {
!         set cell_name [lindex [name parse $local_args] 0]
      }

      #
!     # Get the cds pathname of the security master server.
!     # Find a binding handle to that server and aquire the
!     # hostname.
      #
!     set master_server [attrlist getvalues [registry show -master] -type name]
!
      set sec_server_bind [_dcp_find_obj_binding $master_server]
-
      set sec_server_host [name get $sec_server_bind]

      #
!     # Set up the server information to back up the security server.
      # Set the server configuration name and create the server entry
      # with the correct attributes.
      #
--- 238,265 ----

      parseargs "" local_args -no_leftovers

!     if {[info local help_prose] > 0} {return}

!     if {[llength $local_args] > 1} {
!         error "Unrecognized argument [lindex $local_args 1]."
!     } elseif {[llength $local_args] == 0} {
!         set cell_name [name expand /.:]
      } else {
!         set cell_name $local_args
      }

      #
!     # Get the cds pathname of the security master server.  Find
!     # a binding handle to that server and aquire the hostname.
      #
!     _dcp_cell_debug "Figure out the name of the master security server"
!     set master_server [registry catalog $cell_name -master]
      set sec_server_bind [_dcp_find_obj_binding $master_server]
      set sec_server_host [name get $sec_server_bind]
+     _dcp_cell_debug "The master security server is $sec_server_host"

      #
!     # Set up the server information to back-up the security server.
      # Set the server configuration name and create the server entry
      # with the correct attributes.
      #
***************
*** 243,262 ****

      #
      # Add the appropriate acl entry into the replist acl object so the
!     # database backup script can perform the disable/enable for the
!     # registry.
      #
      foreach el [acl show $cell_name/sec/replist -e] {
          if {[string compare [lindex $el 1] $sec_server_host/self] == 0} {
              _dcp_cell_debug "Modify Acls on $el"
              set acl_entry [format "%sA" [lindex $el 2]]
!             acl modify $cell_name/sec/replist -change \
!                        "user $sec_server_host/self $acl_entry"
          }
      }

      #
!     # Start the remote backup server.
      #
      _dcp_cell_debug "Start security backup server"
      server start $sec_bckp_server
--- 278,295 ----

      #
      # Add the appropriate acl entry into the replist acl object so the
!     # database backup script can disable/enable the registry as required.
      #
      foreach el [acl show $cell_name/sec/replist -e] {
          if {[string compare [lindex $el 1] $sec_server_host/self] == 0} {
              _dcp_cell_debug "Modify Acls on $el"
              set acl_entry [format "%sA" [lindex $el 2]]
!             acl modify $cell_name/sec/replist -change "user $sec_server_host/self $acl_entry"
          }
      }

      #
!     # Start the remote security backup server.
      #
      _dcp_cell_debug "Start security backup server"
      server start $sec_bckp_server
***************
*** 264,276 ****
      #
      # Get a list of the cds servers.
      #
      set cds_server_list [_dcp_find_cds_servers $cell_name -replicas]
      set cds_bckp_attr {{program bckp_cds.dcp} {starton explicit}}
      lappend cds_bckp_attr [concat directory $dcelocal_path/dcecp]

      #
      # Find a binding handle to each cds server found and get
!     # the hostnames.  Start a server for each server.
      #
      foreach element $cds_server_list {
          set cds_bind [_dcp_find_obj_binding $element]
--- 297,312 ----
      #
      # Get a list of the cds servers.
      #
+     _dcp_cell_debug "Figure out the names of the cds server hosts"
      set cds_server_list [_dcp_find_cds_servers $cell_name -replicas]
+     _dcp_cell_debug "The cds server hosts are $cds_server_list"
+
      set cds_bckp_attr {{program bckp_cds.dcp} {starton explicit}}
      lappend cds_bckp_attr [concat directory $dcelocal_path/dcecp]

      #
      # Find a binding handle to each cds server found and get
!     # the hostnames.  Start a server for each cds server.
      #
      foreach element $cds_server_list {
          set cds_bind [_dcp_find_obj_binding $element]
***************
*** 286,317 ****
          server start $cds_bckp_server
      }

!     return "DCE Cell $cell_name backup up"
  }


  #
! # _dcp_ping_cell:  Returns "DCE services available" if all respond.
  #
! #     cell ping [-clients] [-replicas] cell_name
  #
! #     cell_name is optional this will default to local cell.
! #     -clients - ping each client. Returns "DCE clients available"
! #                if all clients respond. Else it returns the names
! #                of all clients that did not respond.
  #
! #     -replicas - pings all cds and security masters and replicas and
! #               returns "DCE servers available" if all respond.
! #                 otherwise it returns the name of the servers not
! #                 responding.
  #
  proc _dcp_ping_cell {local_args} {
-
      set arg_table {
!         {-clients boolean clients
!             "Ping every machine in the cell."}
!         {-replicas boolean replicas
!             "Ping each security and cds replica in the cell."}
      }

      upvar 1 local_args cargs
--- 322,361 ----
          server start $cds_bckp_server
      }

!     return "DCE Cell $cell_name backup complete"
  }


  #
! # _dcp_ping_cell:
! #    Returns "DCE services available" if all respond.
  #
! #    cell ping [cell_name] [-clients] [-replicas]
  #
! #    cell_name is optional, and if not present will default
! #    to the local cell.  The different options...
  #
! #    (default) - ping the master security server, the cds server that
! #                has write-control over the /.: directory, and each DTS
! #                server.  Returns the message "DCE services available"
! #                if all the servers respond.  Otherwise, it returns the
! #                names of the servers not responding.
  #
+ #    -clients -  ping each client. Returns "DCE clients available" if all
+ #                clients respond.  Otherwise it returns the names of the
+ #                clients not responding.
+ #
+ #    -replicas - pings each security master and replica, each cds server
+ #                and each DTS server.  Returns "DCE servers available" if
+ #                all masters, replicas and DTS servers respond.  Otherwise
+ #                it returns the names of the objects not responding.
+ #
  proc _dcp_ping_cell {local_args} {
      set arg_table {
!         {-clients boolean clients
!             "Ping every host in the cell."}
!         {-replicas boolean replicas
!             "Ping all security, CDS and DTS servers and replicas."}
      }

      upvar 1 local_args cargs
***************
*** 326,355 ****

      parseargs $arg_table local_args -no_leftovers

!     if { [info local help_prose ] > 0 } { return }

!     if { [llength $local_args] > 1 } {
!         error "Unrecognized argument [lindex $local_args 1]."
!     } elseif { [llength $local_args] == 0 } {
!         set cell_name [lindex [name parse /.:] 0]
      } else {
!         set cell_name [lindex [name parse $local_args] 0]
      }

!     if { [info local clients] > 0 } {
          set _dcp_host_entries [format "%s/hosts" $cell_name]
          set host_list [directory list $_dcp_host_entries]
          foreach element $host_list {
              _dcp_cell_debug "Ping host $element"
              catch {host ping $element} msg
!             if { $msg != 1 } {
!                 set tmp_msg [format "%s does not respond to host ping." $element]
                  set err_message [_dcp_format_msg $err_message $tmp_msg]
              } else {
                  foreach srv "cds-clerk dts-entity" {
                      catch {server ping $element/$srv} msg
                      if {$msg != 1} {
!                         set tmp_msg [format "%s does not respond to server ping." $element/$srv]
                          set err_message [_dcp_format_msg $err_message $tmp_msg]
                          break
                      }
--- 370,402 ----

      parseargs $arg_table local_args -no_leftovers

!     if {[info local help_prose] > 0} {return}

!     if {[llength $local_args] > 1} {
!         error "Unrecognized argument [lindex $local_args 1]."
!     } elseif {[llength $local_args] == 0} {
!         set cell_name [name expand /.:]
      } else {
!         set cell_name $local_args
      }

!     if {[info local clients] > 0} {
!         #
!         # Ping each host in the cell.
!         #
          set _dcp_host_entries [format "%s/hosts" $cell_name]
          set host_list [directory list $_dcp_host_entries]
          foreach element $host_list {
              _dcp_cell_debug "Ping host $element"
              catch {host ping $element} msg
!             if {$msg != 1} {
!                 set tmp_msg "\"$element\" did not respond to host ping."
                  set err_message [_dcp_format_msg $err_message $tmp_msg]
              } else {
                  foreach srv "cds-clerk dts-entity" {
                      catch {server ping $element/$srv} msg
                      if {$msg != 1} {
!                         set tmp_msg "\"$element/$srv\" did not respond to server ping."
                          set err_message [_dcp_format_msg $err_message $tmp_msg]
                          break
                      }
***************
*** 357,391 ****
              }
          }
          set not_clients 0
!         if { [string length $err_message] > 0 } {
              error $err_message
          }
      } else {
          set not_clients 1
      }
!     if { $not_clients == 0 } {
          set return_msg [_dcp_format_msg $return_msg "DCE clients available"]
      }

!     if { [info local replicas] > 0 } {
          set _dcp_available "DCE servers available"
          set cds_server_list [_dcp_find_cds_servers $cell_name -replicas]
          foreach element $cds_server_list {
              _dcp_cell_debug "Ping cds server $element"
              catch {server ping $element} msg
!             if {$msg != 1 } {
!                 set tmp_msg "\"$element\" did not respond."
                  set err_message [_dcp_format_msg $err_message $tmp_msg]
                  set cds_server_answered 0
              }
          }
!         set _s(sec) $cell_name
!         set sec_server_list [registry catalog]
          foreach element $sec_server_list {
              _dcp_cell_debug "Ping security server $element"
              catch {server ping $element} msg
!             if {$msg != 1 } {
!                 set tmp_msg "\"$element\" did not respond."
                  set err_message [_dcp_format_msg $err_message $tmp_msg]
                  set sec_server_answered 0
              }
--- 404,440 ----
              }
          }
          set not_clients 0
!         if {[string length $err_message] > 0} {
              error $err_message
          }
      } else {
          set not_clients 1
      }
!     if {$not_clients == 0} {
          set return_msg [_dcp_format_msg $return_msg "DCE clients available"]
      }

!     if {[info local replicas] > 0} {
!         #
!         # Ping all the security and cds replicas in the cell.
!         #
          set _dcp_available "DCE servers available"
          set cds_server_list [_dcp_find_cds_servers $cell_name -replicas]
          foreach element $cds_server_list {
              _dcp_cell_debug "Ping cds server $element"
              catch {server ping $element} msg
!             if {$msg != 1} {
!                 set tmp_msg "\"$element\" did not respond to server ping."
                  set err_message [_dcp_format_msg $err_message $tmp_msg]
                  set cds_server_answered 0
              }
          }
!         set sec_server_list [registry catalog $cell_name]
          foreach element $sec_server_list {
              _dcp_cell_debug "Ping security server $element"
              catch {server ping $element} msg
!             if {$msg != 1} {
!                 set tmp_msg "\"$element\" did not respond to server ping."
                  set err_message [_dcp_format_msg $err_message $tmp_msg]
                  set sec_server_answered 0
              }
***************
*** 395,422 ****
          set not_replicas 1
      }

!     if { $not_clients == 1 && $not_replicas == 1} {
!         set _dcp_registry_catalog [registry catalog]
          set msg 0
!         foreach element $_dcp_registry_catalog {
!             set attrib [registry show $element -replica]
!             set this_server [attrlist getvalues $attrib -type type]
!             if {$this_server == "master"} {
!                 _dcp_cell_debug "Ping security master $element"
!                 catch {server ping $element} msg
!                 break
!             }
!         }
!         if { $msg != 1 } {
              set sec_server_answered 0
-             set err_message [_dcp_format_msg $err_message "Sec master did not respond."]
          }
          set cds_server_list [_dcp_find_cds_servers $cell_name]
          foreach element $cds_server_list {
              _dcp_cell_debug "Ping cds server $element"
              catch {server ping $element} msg
!             if {$msg != 1 } {
!                 set tmp_msg "\"$element\" did not respond."
                  set err_message [_dcp_format_msg $err_message $tmp_msg]
                  set cds_server_answered 0
              }
--- 444,470 ----
          set not_replicas 1
      }

!     if {$not_clients == 1 && $not_replicas == 1} {
!         #
!         # Ping only the master security server and the cds clearinghouse
!         # which has write-permission on the root (/.:) directory.
!         #
          set msg 0
!         set sec_master_server [registry catalog $cell_name -master]
!         _dcp_cell_debug "Ping security master $sec_master_server"
!         catch {server ping $sec_master_server} msg
!         if {$msg != 1} {
!             set tmp_msg "\"$sec_master_server\" did not respond to server ping."
!             set err_message [_dcp_format_msg $err_message $tmp_msg]
              set sec_server_answered 0
          }
+
          set cds_server_list [_dcp_find_cds_servers $cell_name]
          foreach element $cds_server_list {
              _dcp_cell_debug "Ping cds server $element"
              catch {server ping $element} msg
!             if {$msg != 1} {
!                 set tmp_msg "\"$element\" did not respond to server ping."
                  set err_message [_dcp_format_msg $err_message $tmp_msg]
                  set cds_server_answered 0
              }
***************
*** 423,455 ****
          }
      }

!     if { $not_clients == 1 && $not_replicas == 1 } {
!         set name_space [_dcp_enumerate_namespace $cell_name/hosts]
!         set dts_entity_list [_dcp_list_find $name_space *dts-entity]
!         foreach element $dts_entity_list {
!             if {[catch {dts show $element} msg] != 0 } {
!                 set tmp_msg "\"$element\" could not be pinged. $msg"
answered == 1 && \
!           $cds_server_answered == 1 && \
!           $dts_server_answered == 1 } {
              set return_msg [_dcp_format_msg $return_msg $_dcp_available]
          } else {
              error $err_message
--- 471,496 ----
          }
      }

!     if {$not_clients == 1 || ($not_clients == 0 && $not_replicas == 0)} {
!         #
!         # Ping the dts server entities
!         #
!         set dts_server_list [dts catalog $cell_name]
!         foreach element $dts_server_list {
!             _dcp_cell_debug "Ping dts server $element"
!             catch {server ping $element} msg
!             if {$msg != 1} {
!                 set tmp_msg "\"$element\" did not respond to server ping."
                  set err_message [_dcp_format_msg $err_message $tmp_msg]
                  set dts_server_answered 0
              }
          }
      }

!     if {$not_clients == 1 || $not_replicas == 0} {
          if {$sec_server_answered == 1 && \
!             $cds_server_answered == 1 && \
!             $dts_server_answered == 1 } {
              set return_msg [_dcp_format_msg $return_msg $_dcp_available]
          } else {
              error $err_message
***************
*** 460,473 ****


  #
! # Show the different services available in the cell.  Shows the security
! # servers, cds server host names, dts server host names and client names.
  #
  proc _dcp_show_cell {local_args} {
!
!     set arg_table {
!         {-simplename boolean simple
!             "List all server entries in simple format."}
          }

      upvar 1 local_args cargs
--- 501,515 ----


  #
! # _dcp_show_cell:
! #     Show the different services available in the cell.  Shows the
! #     security servers, cds server host names, dts server host names
! #     and client names.
  #
  proc _dcp_show_cell {local_args} {
!     set arg_table {
!         {-simplename boolean simple
!             "List all server and host entries in simple format."}
          }

      upvar 1 local_args cargs
***************
*** 476,486 ****

      parseargs $arg_table local_args -no_leftovers

!     if { [info local help_prose ] > 0 } { return }

!     if { [llength $local_args] > 1 } {
          error "Unrecognized argument [lindex $local_args 1]."
!     } elseif { [llength $local_args] == 0 } {
          set cell_name [name expand /.:]
      } else {
          set cell_name $local_args
--- 518,528 ----

      parseargs $arg_table local_args -no_leftovers

!     if {[info local help_prose] > 0} {return}

!     if {[llength $local_args] > 1} {
          error "Unrecognized argument [lindex $local_args 1]."
!     } elseif {[llength $local_args] == 0} {
          set cell_name [name expand /.:]
      } else {
          set cell_name $local_args
***************
*** 488,499 ****

      set _dcp_cell_info ""

      _dcp_cell_debug "Show security servers"
-     set _s(sec) $cell_name
      set _dcp_cell_info "\{secservers"
      foreach element [registry catalog $cell_name] {
!         if { $simple == 1} {
!             set element [string range $element [string first subsys $element] end ]
          }
          set _dcp_cell_info "$_dcp_cell_info\n"
          set _dcp_cell_info "$_dcp_cell_info $element"
--- 530,543 ----

      set _dcp_cell_info ""

+     #
+     # security servers
+     #
      _dcp_cell_debug "Show security servers"
      set _dcp_cell_info "\{secservers"
      foreach element [registry catalog $cell_name] {
!         if {$simple == 1} {
!             set element [string range $element [string first subsys $element] end]
          }
          set _dcp_cell_info "$_dcp_cell_info\n"
          set _dcp_cell_info "$_dcp_cell_info $element"
***************
*** 500,508 ****
      }
      set _dcp_cell_info [format "%s\}\n" $_dcp_cell_info]

      _dcp_cell_debug "Show cds servers"
      set cds_server_list ""
!     set cdsservers [clearinghouse catalog]
      _dcp_cell_debug "cdsservers is $cdsservers"
      foreach element $cdsservers {
          _dcp_cell_debug "Working on $element"
--- 544,555 ----
      }
      set _dcp_cell_info [format "%s\}\n" $_dcp_cell_info]

+     #
+     # cds servers
+     #
      _dcp_cell_debug "Show cds servers"
      set cds_server_list ""
!     set cdsservers [clearinghouse catalog $cell_name]
      _dcp_cell_debug "cdsservers is $cdsservers"
      foreach element $cdsservers {
          _dcp_cell_debug "Working on $element"
***************
*** 521,527 ****
              set cds_server_list "$cds_server_list\n $cds_server"
              _dcp_cell_debug "Wrote $cds_server"
          } else {
!             set cds_server_list "$cds_server_list\n [name expand /.:/$cds_server]"
              _dcp_cell_debug "Wrote $cds_server"
          }
      }
--- 568,578 ----
              set cds_server_list "$cds_server_list\n $cds_server"
              _dcp_cell_debug "Wrote $cds_server"
          } else {
!             if {$cell_name == "" || $cell_name == "/.:"} {
!                 set cds_server_list "$cds_server_list\n [name expand /.:/$cds_server]"
!             } else {
!                 set cds_server_list "$cds_server_list\n [concat $cell_name/$cds_server]"
!             }
              _dcp_cell_debug "Wrote $cds_server"
          }
      }
***************
*** 528,558 ****

      set _dcp_cell_info "$_dcp_cell_info\{cdsservers$cds_server_list\}\n"

!
      _dcp_cell_debug "Show dts servers"

!     _dcp_cell_debug "Looking up lan-profiles in cell-profile"
!     set lan_profs [rpcprofile show $cell_name/cell-profile \
!             -interface {6f264242-b9f8-11c9-ad31-08002b0dc035 1.0}]
!
!     _dcp_cell_debug "lan_profs is $lan_profs"
!
      set got_dts_server 0
!     set result "\{dtsservers "
!     foreach lp $lan_profs {
!         _dcp_cell_debug "Working on $lp..."
          foreach line [rpcprofile show [lindex $lp 1] \
!                 -interface {019ee420-682d-11c9-a607-08002b0dea7a 1.0}] {
              set got_dts_server 1
!           if {$simple == 1} {
!                 _dcp_cell_debug "Adding line '$line'"
                  set result "$result\n [lindex [name parse [lindex $line 1]] 1]"
!           } else {
!                 _dcp_cell_debug "Adding line '$line'"
                  set result "$result\n [lindex $line 1]"
!           }
!       }
      }
      if {$got_dts_server == 1} {
          set _dcp_cell_info "$_dcp_cell_info$result\}\n"
      } else {
--- 579,664 ----

      set _dcp_cell_info "$_dcp_cell_info\{cdsservers$cds_server_list\}\n"

!     #
!     # dts servers
!     #
      _dcp_cell_debug "Show dts servers"
+     _dcp_cell_debug "Get list of lan-profiles in cell-profile"
+     set known_lan_profs [rpcprofile show $cell_name/cell-profile \
+                          -interface {6f264242-b9f8-11c9-ad31-08002b0dc035 1.0}]
+     _dcp_cell_debug "lan-profiles from cell-profile is $known_lan_profs"

!     set already_found ""
      set got_dts_server 0
!     set result "\{dtsservers"
!     foreach lp $known_lan_profs {
!         _dcp_cell_debug "Working on lan $lp..."
          foreach line [rpcprofile show [lindex $lp 1] \
!                       -interface {019ee420-682d-11c9-a607-08002b0dea7a 1.0}] {
              set got_dts_server 1
!             _dcp_cell_debug "Adding line '$line'"
!             if {$simple == 1} {
                  set result "$result\n [lindex [name parse [lindex $line 1]] 1]"
!             } else {
                  set result "$result\n [lindex $line 1]"
!             }
!             lappend already_found [lindex $line 1]
!         }
      }
+
+     #
+     # Look through the cell root directory for any other profile
+     # objects that may contain dts servers.  When configuring a
+     # client, additional lan's, if any, are created in the root
+     # directory.
+     #
+     _dcp_cell_debug "Looking through the root directory for more profiles"
+     set object_list [directory list $cell_name -objects]
+     _dcp_cell_debug "Objects to look through are $object_list"
+     set new_lan_profs ""
+     foreach element $object_list {
+         _dcp_cell_debug "Working on object $element..."
+         set pr_val [attrlist getvalues [object show $element] -type CDS_Class]
+         set pr_name [lindex [name parse $element] 1]
+         if {$pr_val == "RPC_Profile"} {
+             if {$pr_name != "cell-profile" && $pr_name != "lan-profile"} {
+                 _dcp_cell_debug "Found another RPC profile $element"
+                 lappend new_lan_profs $element
+             }
+         }
+     }
+
+     _dcp_cell_debug "Final list of new lan profiles is $new_lan_profs"
+
+     foreach lp $new_lan_profs {
+         _dcp_cell_debug "Working on lan $lp..."
+         if {[catch {set lan_entries [rpcprofile show $lp \
+                     -interface {019ee420-682d-11c9-a607-08002b0dea7a 1.0}]} msg] != 0} {
+             set lan_entries ""
+         }
+         foreach line $lan_entries {
+             set got_dts_server 1
+             set found_entry 0
+             set tmpres "[lindex $line 1]"
+             _dcp_cell_debug "Checking new entry $tmpres..."
+             foreach tmp $already_found {
+                 _dcp_cell_debug "Checking against existing entry $tmp"
+                 if {$tmp == $tmpres} {
+                     set found_entry 1
+                 }
+             }
+             if {$found_entry == 0} {
+                 _dcp_cell_debug "Adding line '$line'"
+                 if {$simple == 1} {
+                     set result "$result\n [lindex [name parse [lindex $line 1]] 1]"
+                 } else {
+                     set result "$result\n [lindex $line 1]"
+                 }
+                 lappend already_found $tmpres
+             }
+         }
+     }
+
      if {$got_dts_server == 1} {
          set _dcp_cell_info "$_dcp_cell_info$result\}\n"
      } else {
***************
*** 559,575 ****
          set _dcp_cell_info "$_dcp_cell_info\{dtsservers\}\n"
      }

      set host_name_path $cell_name/hosts
!     if { $simple == 1 } {
          set host_name [directory list $host_name_path -simplename]
      } else {
          set host_name [directory list $host_name_path]
      }

-     _dcp_cell_debug "Show dce hosts"
      set _dcp_cell_info "$_dcp_cell_info\{hosts"
      foreach element $host_name {
!         if { $simple == 1 } { set element hosts/$element }
          set _dcp_cell_info "$_dcp_cell_info\n"
          set _dcp_cell_info "$_dcp_cell_info $element"
      }
--- 665,686 ----
          set _dcp_cell_info "$_dcp_cell_info\{dtsservers\}\n"
      }

+     #
+     # hosts
+     #
+     _dcp_cell_debug "Show dce hosts"
      set host_name_path $cell_name/hosts
!     if {$simple == 1} {
          set host_name [directory list $host_name_path -simplename]
      } else {
          set host_name [directory list $host_name_path]
      }

      set _dcp_cell_info "$_dcp_cell_info\{hosts"
      foreach element $host_name {
!         if {$simple == 1} {
!             set element hosts/$element
!         }
          set _dcp_cell_info "$_dcp_cell_info\n"
          set _dcp_cell_info "$_dcp_cell_info $element"
      }
***************
*** 579,643 ****


  #
! # Search through a list for specific entries.
  #
! proc _dcp_list_find {search_list pattern} {

!     set found_items ""
!     set size [llength $search_list]

!     while { $size > 0 } {
!         set size [expr $si

CR Number                     : 13053
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : make a separate libdcecp
Reported Date                 : 8/24/95
Found in Baseline             : 1.1
Found Date                    : 8/24/95
Severity                      : E
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.2.1
Affected File(s)              : dcecp
Sensitivity                   : public

[8/24/95 public]
At the Developers conference many people stated that they would be
very interested in having a libdcecp that they could link into their
mgmt application.  This is very easily done (and has been by HP) and
should be in the standard OSF distribution.  dcecp was always intended
to be extensibile both by Tcl and by C code, this makes the later much
more feasible.  Work items:
 * Change the Makefile to build libdcecp and link main.c with it
   (or something approximating this)
 * Document in the App Dev Guide how to write a mgmt app that calls
   libdcecp (is it just call the interpretor?)
 * Document any exposed APIs in the App Dev Ref.

[12/20/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 13030
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : server ping, host ping
Short Description             : host ping returns ambiguous info
Reported Date                 : 8/8/95
Found in Baseline             : 1.1
Found Date                    : 8/8/95
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : dcecp
Sensitivity                   : public

[8/8/95 public]

The problem occurs only in a multi-host cell.  Suppose the cds server is on
one host, and hydra is a different host.  The directory entry for
                 /.:/hosts/hydra
doesn't reference hydra's ip address.  However, the directory entry for
                 /.:/hosts/hydra/self
does reference the machine hydra.

So "host ping /.:/hosts/hydra" actually pings a machine which isn't
"hydra".

Another way to understand what happens is to look at the ip addresses in
     "rpcentry show /.:/hosts/hydra"
and  "rpcentry show /.:/hosts/hydra/self"

We found this misleading behavior when a "host ping" was done
to a machine which in UNIX terms was up, but in DCE terms was down,
i.e., there was no DCE daemon (dced or rpcd) listening on port 135.

[12/20/95 public]
Fixed in Dce 1.2.1
Closed



CR Number                     : 13022
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : Bad default action for CDS attribute formatting.
Reported Date                 : 8/4/95
Found in Baseline             : 1.1, 1.2
Found Date                    : 8/4/95
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2.2
Fixed In Baseline             : 1.1maint, 1.2.2
Affected File(s)              : admin/dcecp/cdscp_utils.c
Diff supplied by              : provider
Diff release                  : 1.2.2
Sensitivity                   : public

[8/4/95 public]

format_all_attr() in cdscp_utils.c uses a bad strategy to handle
unrecognized attributes -- it treats them as F_char.  The problem is
that attribute values are not always length/pointer pairs; and when
an unrecognized attribute (say, "1.3.22.1.3.47" from previous versions
of DCE) is not a length/pointer pair, the F_char formatting will grab
something that isn't a pointer and try to use it as a pointer, causing
dcecp to dump core.
	A better default behaviour would be to print the attribute
identifier and a diagnostic string stating that the attribute is not
recognized.

[8/4/95 public]

One possible fix;

src/admin/dcecp/cdscp_utils.c:
3706c3706
<             F_char(value,&buffer);
---
>           buffer = (char *) dce_sprintf(dcp_s_cds_bad_attribute_name);

[8/7/95 public]

Another option...

*** cdscp_utils.c@@/main/HPDCE02/11	Fri Jul 14 14:24:48 1995
--- cdscp_utils.c@@/main/HPDCE02/rose_l_CHFts15801/1	Fri Jul 28 12:22:42
1995
***************
*** 8,13 ****
--- 8,16 ----
  /*
   * HISTORY
   * $Log:	c013022,v $
# Revision 1.8  96/10/22  13:10:12  root
# changed fields: Subcomponent Name  Found in Baseline  Status  Fix By Baseline  Fixed In Baseline  Affected File(s)  Diff supplied by  Diff release   new/changed/deleted note(s) [truitt 10/22/96 public]
# 
# Revision 1.7  96/10/01  11:15:40  root
# changed fields: Fixed In Baseline   new/changed/deleted note(s) [dlynch 8/15/96 public] [dlynch 8/15/96 public]
# 
# Revision 1.6  96/08/15  11:27:35  root
# changed fields: Severity  Status  Fixed In Baseline   new/changed/deleted note(s) [dlynch 8/15/96 public]
# 
# Revision 1.5  95/12/20  09:10:37  root
# changed fields: Status  Fixed In Baseline  Responsible Engr.  Resp. Engrs Company   new/changed/deleted note(s) [white_r 12/20/95 public]
# 
# Revision 1.4  95/08/11  11:50:52  root
# changed fields:  new/changed/deleted note(s) [karlz 8/11/95 public]
# 
# Revision 1.3  95/08/07  09:56:56  root
# changed fields:  new/changed/deleted note(s) [jrr 8/7/95 public]
# 
+  * Revision /main/HPDCE02/rose_l_CHFts15801/1  1995/07/28  16:22 UTC
rose_l
+  * 	fixing clearinghouse show core dump (CHFts15801)...
+  * 
   * Revision /main/HPDCE02/11  1995/07/14  18:24 UTC  truitt
   * 	Merge function name changes.
   * 
***************
*** 3564,3569 ****
--- 3567,3573 ----
  
      for (i = 0; i < list->cur_value; i++) {
          attrname = list->value[i]->attr_name;
+ 
          if (list->value[i]->cur_attr == 0 &&  list->value[i]->action !=
ShowAttrType) {
              attrvalue = malloc(strlen(attrname) + 6);
              sprintf(attrvalue, "{%s {}}", attrname);
***************
*** 3584,3589 ****
--- 3588,3594 ----
          else
              attrsyntax = atoi((const char *)attr_interp->result);
  
+ 
          /*
           * Ascertain how the formating should be performed. For instance,
           * if the attribute type is cdsSingle we can decode it normally. 
***************
*** 3612,3619 ****
--- 3617,3631 ----
              }
              else {
                  value = list->value[i]->attribute[j];
+ 		/*
+ 		 * If we aren't able to drag up a valid attribute name
+ 		 * try to figure out the type by the val_syntax.
+ 		 */
+ 		if (attrsyntax == -1)
+ 		    attrsyntax = map_val_syntax(value->val_syntax);
              }
              buffer = NULL;
+ 
              switch(attrsyntax) {
                  case CDS_Class:
                      size = CDS_STR_SNAME_MAX +
(value->val_u.val_byte.length * 2);
***************
*** 3766,3771 ****
--- 3778,3824 ----
  
    return TCL_OK;
  }
+ 
+ 
+ /*
+  * FUNCTION: map_val_syntax
+  *
+  * OVERVIEW: This function is used to map cds attr syntax values to
+  *	     the complex syntax values used by the dcecp attr format
+  *	     routines.
+  *
+  * INPUTS:
+  *  int val_syntax - the attribute syntax from the cds attr
+  *
+  * INPUT/OUTPUTS:
+  *  None
+  *
+  * OUTPUTS:
+  *  
+  *
+  * RETURNS:
+  *  a mapped syntax used by dcecp (or -1)
+  *
+  */
+ int map_val_syntax (int val_syntax)
+ {
+     int syntax_map_table [] = {
+     	0,			cdsbyte,	cdsbyte,
cdssmall,
+     	cdsuuid,		cdsTimestamp,	cdsTimeout,
cdsVersion,
+     	cdschar,		cdsbyte,	cdsReplicaPointer,
cdsGroupMember,
+     	cdsParentPointer,	cdsFullName,    cdsCHDirectory,
cdsbyte,
+     	0,			0,		cdsgdaPointer
+     };
+     
+     /*
+      * pull the dcecp attr syntax from the mapping table
+      * based on the cds attr syntax (if it exists)...
+      */
+     if (val_syntax <= (sizeof(syntax_map_table)/sizeof(int)))
+ 	return (syntax_map_table[val_syntax]);
+ 
+     return (-1);
+ } 
  
  
  /*

[8/11/95 public]

That's good.  Two additions; if map_val_syntax() returns -1, we still need
to not make assumptions about structure of the attribute value, so we should
combine both fixes; and the 0's in syntax_map_table should be -1's; 0 is
the same as cdsFullName for some compilers (cds_attribute_syntax_t is an
enumerated type beginning with cdsFullName).

[12/20/95 public]
Fixed in DCE 1.2.1
Closed

[8/15/96 public]

NOTE:  OT BEING REOPENED

From email exchanged between John Rousseau and me, we decided that this
OT should be reopened at a lower priority since only part of the fix made it
into the 1.2.1 source base.  John's changes made it into the OT but karlz's
did not.   

(from John's email)
 
Reopen the OT and state that both fixes should be put into the 1.2.2
stream.

I agree with mapping the zeros in the table to -1's. He's also right that we
should still not default to calling F_char.  This is currently a
hypothetical exercise because with the current change we handle all
known and historical CDS types.
I'm not sure what the right answer is wrt to the default for an unknown
type. Probably just print out "{unknown CDS data type}". Again, this
supposedly "can't happen".

[public 10/1/96]

Added both changes above to the 1.1 maintenance tree.

[10/22/96 public]
The latest suggested fix from karlz was implemented by jrr and
submitted into 1.2.2.  The updated diff is below.  This bug is
now closed.

*** /vob/dce/src/admin/dcecp/cdscp_utils.c@@/main/26    Tue Apr  2 18:57:45 1996
--- /vob/dce/src/admin/dcecp/cdscp_utils.c@@/main/DCE_1.2.2/1   Tue Aug 27 16:47:45 1996
***************
*** 8,13 ****
--- 8,17 ----
  /*
   * HISTORY
   * $Log:	c013022,v $
# Revision 1.8  96/10/22  13:10:12  root
# changed fields: Subcomponent Name  Found in Baseline  Status  Fix By Baseline  Fixed In Baseline  Affected File(s)  Diff supplied by  Diff release   new/changed/deleted note(s) [truitt 10/22/96 public]
# 
+  * Revision /main/DCE_1.2.2/1  1996/08/27  20:47 UTC  jrr
+  *    Bulletproof the fix for OT13022.
+  *    [1996/08/23  20:32 UTC  jrr  /main/jrr_122_2/1]
+  *
   * Revision 1.1.8.3  1996/02/18  19:12:52  marty
   *    Update OSF copyright years
   *    [1996/02/18  17:59:45  marty]
***************
*** 3749,3755 ****
                          buffer = (char *)dce_sprintf(dcp_t_cds_multi_attribute);
                      break;
                  default:
!                     F_char(value, &buffer);
                      break;
              }

--- 3753,3759 ----
                          buffer = (char *)dce_sprintf(dcp_t_cds_multi_attribute);
                      break;
                  default:
!                     buffer = (char *)dce_sprintf(dcp_s_cds_unknown_data_type);
                      break;
              }

***************
*** 3833,3843 ****
  int map_val_syntax (int val_syntax)
  {
      int syntax_map_table [] = {
!       0,                      cdsbyte,        cdsbyte,            cdssmall,
        cdsuuid,                cdsTimestamp,   cdsTimeout,         cdsVersion,
        cdschar,                cdsbyte,        cdsReplicaPointer,  cdsGroupMember,
        cdsParentPointer,       cdsFullName,    cdsCHDirectory,     cdsbyte,
!       0,                      0,              cdsgdaPointer
      };

      /*
--- 3837,3847 ----
  int map_val_syntax (int val_syntax)
  {
      int syntax_map_table [] = {
!       -1,                     cdsbyte,        cdsbyte,            cdssmall,
        cdsuuid,                cdsTimestamp,   cdsTimeout,         cdsVersion,
        cdschar,                cdsbyte,        cdsReplicaPointer,  cdsGroupMember,
        cdsParentPointer,       cdsFullName,    cdsCHDirectory,     cdsbyte,
!       -1,                     -1,             cdsgdaPointer
      };

      /*



CR Number                     : 12964
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : strange errors, lack of perm for cdsalias
Reported Date                 : 7/20/95
Found in Baseline             : 1.1
Found Date                    : 06/08/95
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : dcecp
Sensitivity                   : public

[7/20/95 public]
When a user without sufficient permissions tries cdsalias create, cdsalias 
set, or cdsalias delete, the message, "An error occured calling a CDS API
function."

When a user without sufficient permissions tries cellalias create, "Cannot
connect" is returned.
Correction:  I would expect an "Insufficient rights to perform requested
operation" message.  
I would expect and "Insufficient rights to perform requested oeration" message.jj

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12958
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : acl
Short Description             : acl permissions output needs to be a list
Reported Date                 : 7/18/95
Found in Baseline             : 1.1
Found Date                    : 7/18/95
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.1maint
Affected File(s)              : admin/dcecp/acl_edit.c
Sensitivity                   : public

[7/18/95 public]

The output of the dcecp "acl permissions" and "acl show -managers" commands
need to be in the form of a Tcl list. Currently the text output with these
commands is not surrounded by braces. This breaks the dcecp model of having
all output in the form of a Tcl list.

Is is strongly recommended that all interested parties make this change to
their DCE1.1 based products. The trivial diff is supplied below.

*** acl_edit.c@@/main/HPDCE02/LATEST	Mon Jun  5 14:40:33 1995
--- acl_edit.c	Wed Jul 12 16:24:54 1995
***************
*** 1463,1469 ****
  
      for (i = 0; i < DCP_C_ACL_MGR.sec_acl_num_printstrings; i++){
  	sprintf(output_string,
! 		"{%s %s}",
  	        DCP_C_ACL_MGR.sec_acl_printstrings[i].printstring,
  	        DCP_C_ACL_MGR.sec_acl_printstrings[i].helpstring);
          Tcl_AppendResult(interp, output_string, (char *)NULL);
--- 1463,1469 ----
  
      for (i = 0; i < DCP_C_ACL_MGR.sec_acl_num_printstrings; i++){
  	sprintf(output_string,
! 		"{%s {%s}}",
  	        DCP_C_ACL_MGR.sec_acl_printstrings[i].printstring,
  	        DCP_C_ACL_MGR.sec_acl_printstrings[i].helpstring);
          Tcl_AppendResult(interp, output_string, (char *)NULL);
***************
*** 1621,1627 ****
  
      for (i = 0; i < dcp_acl_info_p->num_acl_mgrs; i++){
          sprintf(output_string,
!                 "{%-16s %s}",
                  dcp_acl_info_p->mgr_type_tbl[i].manager_info.printstring,
                  dcp_acl_info_p->mgr_type_tbl[i].manager_info.helpstring);
          Tcl_AppendResult(interp, output_string, (char *)NULL);
--- 1621,1627 ----

[8/16/95 public]

Submitted to 1.1 maint tree.  
      for (i = 0; i < dcp_acl_info_p->num_acl_mgrs; i++){
          sprintf(output_string,
!                 "{%-16s {%s}}",
                  dcp_acl_info_p->mgr_type_tbl[i].manager_info.printstring,
                  dcp_acl_info_p->mgr_type_tbl[i].manager_info.helpstring);
          Tcl_AppendResult(interp, output_string, (char *)NULL);

[12/19/95 public]
Included in DCE 1.2.1
Closed



CR Number                     : 12949
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : help text
Short Description             : many small changes to the help
text needed
Reported Date                 : 7/12/95
Found in Baseline             : 1.1
Found Date                    : 7/12/95
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : dcecp
Sensitivity                   : public

[7/12/95 public]

The ticket came in with description and a full diff of fixes touching
the files dcp.sams, rgy.c, rgy_pgo_account.c .   


Problem Description:
-------------------------------------------------------------------
 1. help text for 'org help modify' for -add and -remove options should
    be changed.
 
 2.  ditto for 'principal help modify'.
 
 3. rpcentry show help text should indicate -interface takes list of
 	interface ids
 
 4. rpcgroup import: text for -max needs mod
 
 5. also need to add period to messages here and there

-------------------------------------------------------------------



 
Related-file::Added 950526 by wright:: /build/hiosfm/RCS/dce1.1/src/admin/dcecp/./dcp.sams,v 8.2
 /build/hiosfm/RCS/dce1.1/src/admin/dcecp/./dcp.sams,v 8.2
 wright 1995/05/26 20:35:48 +22 -22
 Reason:  OSDqa10839 dcecp help text needs help
 Fixed "rpcentry help show" text to indicate that -interface takes
 a list of interface ids, not just one.
 
     *** /tmp/ci.11123..dcp.sams.11158.1	Fri May 26 16:35:54 1995
     --- /tmp/dcp.sams.11158.2	Fri May 26 16:35:55 1995
     ***************
     *** 614,624 ****
       end
       
       start           intable incatalog
       code            dcp_s_too_many_args
       text            "Too many arguments specified in command."
     ! explanation     "The command received too many arguments"
       action          "Retype the command with correct number of arguments."
       end
       
       start           intable incatalog
       code            dcp_s_need_arg
     --- 614,624 ----
       end
       
       start           intable incatalog
       code            dcp_s_too_many_args
       text            "Too many arguments specified in command."
     ! explanation     "The command received too many arguments."
       action          "Retype the command with correct number of arguments."
       end
       
       start           intable incatalog
       code            dcp_s_need_arg
     ***************
     *** 738,748 ****
       end
       
       start           intable incatalog
       code            dcp_s_mutex_lock_fail
       text            "Mutex lock failed."
     ! explanation     "An attempt to lock a mutext failed."
       action          "Check system resources."
       end
       
       start           intable incatalog
       code            dcp_s_mutex_unlock_fail
     --- 738,748 ----
       end
       
       start           intable incatalog
       code            dcp_s_mutex_lock_fail
       text            "Mutex lock failed."
     ! explanation     "An attempt to lock a mutex failed."
       action          "Check system resources."
       end
       
       start           intable incatalog
       code            dcp_s_mutex_unlock_fail
     ***************
     *** 837,847 ****
       
       start           intable incatalog
       code            dcp_s_object_needs_verb
       text            "This object requires a verb to form a command."
       explanation     "The user specified an object name only on the command line."
     ! action          "Retype the command with a correct object verb pair"
       end
       
       start           intable incatalog
       code            dcp_s_initial_context_fail
       text            "Error in getting initial login context."
     --- 837,847 ----
       
       start           intable incatalog
       code            dcp_s_object_needs_verb
       text            "This object requires a verb to form a command."
       explanation     "The user specified an object name only on the command line."
     ! action          "Retype the command with a correct object verb pair."
       end
       
       start           intable incatalog
       code            dcp_s_initial_context_fail
       text            "Error in getting initial login context."
     ***************
     *** 948,958 ****
       end
       
       start           intable incatalog
       code            dcp_s_signal_posix_unavailable
       text            "POSIX signals are unavailable on this system."
     ! explanation     "This system does not support POSIX signals"
       action          "Use only BSD signals."
       end
       
       start           intable incatalog
       code            dcp_s_signal_trap_req_cmd
     --- 948,958 ----
       end
       
       start           intable incatalog
       code            dcp_s_signal_posix_unavailable
       text            "POSIX signals are unavailable on this system."
     ! explanation     "This system does not support POSIX signals."
       action          "Use only BSD signals."
       end
       
       start           intable incatalog
       code            dcp_s_signal_trap_req_cmd
     ***************
     *** 1248,1263 ****
       text            "Returns the canonical form of a name."
       end
       
       start           intable incatalog undocumented
       code            dcp_t_rpc_compare_name_help
     ! text            "Compares two names syntacticly."
       end
       
       start           intable incatalog undocumented
       code            dcp_t_rpc_interface_help
     ! text            "Specify a single Interface ID."
       end
       
       
       start           intable incatalog undocumented
       code            dcp_t_rpc_object_help
     --- 1248,1263 ----
       text            "Returns the canonical form of a name."
       end
       
       start           intable incatalog undocumented
       code            dcp_t_rpc_compare_name_help
     ! text            "Compares two names syntactically."
       end
       
       start           intable incatalog undocumented
       code            dcp_t_rpc_interface_help
     ! text            "Specify a list of Interface IDs."
       end
       
       
       start           intable incatalog undocumented
       code            dcp_t_rpc_object_help
     ***************
     *** 4259,4269 ****
                       specifier."
       end
       
       start           intable incatalog
       code            dcp_s_maxuid_out_of_range
     ! text            "The 'maxuid' attribute must be less that %d."
       explanation     "The \*Lmaxuid\*O attribute must be a positive integer less
                       than the maximum for a 32 bit integer."
       action          "Reenter the command and provide a positive \*Lmaxuid\*O
                       integer, less than the maximum for a 32 bit integer, as an
                        attribute value."
     --- 4259,4269 ----
                       specifier."
       end
       
       start           intable incatalog
       code            dcp_s_maxuid_out_of_range
     ! text            "The 'maxuid' attribute must be less than %d."
       explanation     "The \*Lmaxuid\*O attribute must be a positive integer less
                       than the maximum for a 32 bit integer."
       action          "Reenter the command and provide a positive \*Lmaxuid\*O
                       integer, less than the maximum for a 32 bit integer, as an
                        attribute value."
     ***************
     *** 4913,4932 ****
                       attribute list."
       end
       
       start           intable incatalog
       code            dcp_s_rgy_acct_passwd_long
     ! text            "Account password to long. Maximum password length is %d."
     ! explanation     "The password is to long. It currently exceeds the limit 
                       allowed by the registry."
       action          "Reissue the command and provide a shorter \*Lpassword\*O"
       end
       
       start           intable incatalog
       code            dcp_s_rgy_acct_desc_long
     ! text            "Account description to long. Maximum description length is %d."
     ! explanation     "The description is to long. It currently exceeds the limit 
                       allowed by the registry."
       action          "Reissue the command and provide a shorter \*Ldescription\*O"
       end
       
       start           intable incatalog
     --- 4913,4932 ----
                       attribute list."
       end
       
       start           intable incatalog
       code            dcp_s_rgy_acct_passwd_long
     ! text            "Account password too long. Maximum password length is %d."
     ! explanation     "The password is too long. It currently exceeds the limit 
                       allowed by the registry."
       action          "Reissue the command and provide a shorter \*Lpassword\*O"
       end
       
       start           intable incatalog
       code            dcp_s_rgy_acct_desc_long
     ! text            "Account description too long. Maximum description length is %d."
     ! explanation     "The description is too long. It currently exceeds the limit 
                       allowed by the registry."
       action          "Reissue the command and provide a shorter \*Ldescription\*O"
       end
       
       start           intable incatalog
     ***************
     *** 4937,4948 ****
       action          "Reissue the command and provide a shorter \*Lhome\*O"
       end
       
       start           intable incatalog
       code            dcp_s_rgy_acct_shell_long
     ! text            "Account shell name to long. Maximum shell name length is %d."
     ! explanation     "The shell is to long. It currently exceeds the limit 
                       allowed by the registry."
       action          "Reissue the command and provide a shorter \*Lshell\*O"
       end
       
       start           intable incatalog
     --- 4937,4948 ----
       action          "Reissue the command and provide a shorter \*Lhome\*O"
       end
       
       start           intable incatalog
       code            dcp_s_rgy_acct_shell_long
     ! text            "Account shell name too long. Maximum shell name length is %d."
     ! explanation     "The shell is too long. It currently exceeds the limit 
                       allowed by the registry."
       action          "Reissue the command and provide a shorter \*Lshell\*O"
       end
       
       start           intable incatalog
     ***************
     *** 5426,5436 ****
       end
       
       start           intable incatalog
       code            dcp_s_clock_time_conversion_fail
       text            "Invalid absolute DTS style time string."
     ! explanation     "An invalid time string was entered"
       action          "Reenter the command with a valid DTS style absolute
                       timestamp in the following format:
                       \*LCCYY-MM-DD-hh:mm:ss.fff[+|-]hh:mmIsss.fff\*O"
       end
       
     --- 5426,5436 ----
       end
       
       start           intable incatalog
       code            dcp_s_clock_time_conversion_fail
       text            "Invalid absolute DTS style time string."
     ! explanation     "An invalid time string was entered."
       action          "Reenter the command with a valid DTS style absolute
                       timestamp in the following format:
                       \*LCCYY-MM-DD-hh:mm:ss.fff[+|-]hh:mmIsss.fff\*O"
       end
       
     ***************
     *** 6263,6280 ****
       
       start           intable incatalog
       code            dcp_s_sr_bad_if_attr
       text            "The interface list must contain pairs of entries 
                        {uuid_string major_version.minor_version}"
     ! explanation     "User entered incorrect interface syntax"
       action          "reenter command with correct interface attribute"
       end
       
       start           intable incatalog
       code            dcp_s_sr_uuid_mul_used 
       text            "The uuid is being used more than once"
     ! explanation     "The uuid can only be used for one server instance"
       action          "reenter command with one server a time"
       end
       
       
       ### hostdata sub-component
     --- 6263,6280 ----
       
       start           intable incatalog
       code            dcp_s_sr_bad_if_attr
       text            "The interface list must contain pairs of entries 
                        {uuid_string major_version.minor_version}"
     ! explanation     "User entered incorrect interface syntax."
       action          "reenter command with correct interface attribute"
       end
       
       start           intable incatalog
       code            dcp_s_sr_uuid_mul_used 
       text            "The uuid is being used more than once"
     ! explanation     "The uuid can only be used for one server instance."
       action          "reenter command with one server a time"
       end
       
       
       ### hostdata sub-component
     ***************
     *** 6397,6407 ****
       end
       
       start           intable incatalog
       code            dcp_s_kt_missing_key_version
       text            "Required key version not entered."
     ! explanation     "To add (non-random) key, the key version is not optional"
       action          "Retype the command with key version or just request a random key."
       end
       
       start           intable incatalog
       code            dcp_s_kt_bad_key_type 
     --- 6397,6407 ----
       end
       
       start           intable incatalog
       code            dcp_s_kt_missing_key_version
       text            "Required key version not entered."
     ! explanation     "To add (non-random) key, the key version is not optional."
       action          "Retype the command with key version or just request a random key."
       end
       
       start           intable incatalog
       code            dcp_s_kt_bad_key_type 
     ***************
     *** 6521,6547 ****
       end
       
       start           intable incatalog
       code            dcp_s_dhd_bad_attribute_list
       text            "The attribute list must contain pairs of entries {attribute value}"
     ! explanation     "User entered incorrect attribute list syntax"
       action          "reenter command with correct attribute list"
       end
       
       start           intable incatalog
       code            dcp_s_dhd_bad_key_data
       text            "The key data should contain principal, keytype, version number 
                        and passwd {princ keytype version passwd}"
     ! explanation     "User entered incorrect key syntax"
       action          "Please refer to documentation and reenter command with 
                        correct key data"
       end
       
       start           intable incatalog
       code            dcp_s_dhd_too_many_opts
       text            "There are too many options in command line"
     ! explanation     "User entered incorrect command syntax"
       action          "reenter command"
       end
       
       start           intable incatalog
       code            dcp_s_dhd_mod_invalid_attr
     --- 6521,6547 ----
       end
       
       start           intable incatalog
       code            dcp_s_dhd_bad_attribute_list
       text            "The attribute list must contain pairs of entries {attribute value}"
     ! explanation     "User entered incorrect attribute list syntax."
       action          "reenter command with correct attribute list"
       end
       
       start           intable incatalog
       code            dcp_s_dhd_bad_key_data
       text            "The key data should contain principal, keytype, version number 
                        and passwd {princ keytype version passwd}"
     ! explanation     "User entered incorrect key syntax."
       action          "Please refer to documentation and reenter command with 
                        correct key data"
       end
       
       start           intable incatalog
       code            dcp_s_dhd_too_many_opts
       text            "There are too many options in command line"
     ! explanation     "User entered incorrect command syntax."
       action          "reenter command"
       end
       
       start           intable incatalog
       code            dcp_s_dhd_mod_invalid_attr
 
Related-file::Added 950526 by wright:: /build/hiosfm/RCS/dce1.1/src/admin/dcecp/./rgy.c,v 8.2
 /build/hiosfm/RCS/dce1.1/src/admin/dcecp/./rgy.c,v 8.2
 wright 1995/05/26 21:00:39 +4 -4
 Reason:  OSDqa10839 dcecp help text needs help
 Specify "add" and "remove" text for org help modify / principal help modify
 options.
 
     *** /tmp/ci.11264..rgy.c.11313.1	Fri May 26 17:00:42 1995
     --- /tmp/rgy.c.11313.2	Fri May 26 17:00:42 1995
     ***************
     *** 990,1010 ****
           /*
            * Set up the parser argument table and initialize the variables.
            */
           dcp_ArgvInfo arg_table[] = { 
               {"-add",DCP_ARGV_STRING,NULL,NULL,
     !              dcp_t_rgy_princ_mod_change_help},
               {"-alias",DCP_ARGV_STRING,NULL,NULL,
                    dcp_t_rgy_princ_mod_alias_help},
               {"-change",DCP_ARGV_STRING,NULL,NULL,
                    dcp_t_rgy_princ_mod_change_help},
               {"-fullname",DCP_ARGV_STRING,NULL,NULL,
                    dcp_t_rgy_princ_mod_fullname_help},
               {"-quota",DCP_ARGV_STRING,NULL,NULL,
                    dcp_t_rgy_princ_mod_quota_help},
               {"-remove",DCP_ARGV_STRING,NULL,NULL,
     !              dcp_t_rgy_princ_mod_change_help},
               {"-types",DCP_ARGV_CONSTANT,(char *)1,NULL,
                    dcp_t_rgy_princ_mod_types_help},
               {NULL,DCP_ARGV_END,NULL,NULL,0} 
           };
       
     --- 990,1010 ----
           /*
            * Set up the parser argument table and initialize the variables.
            */
           dcp_ArgvInfo arg_table[] = { 
               {"-add",DCP_ARGV_STRING,NULL,NULL,
     !              dcp_t_rgy_princ_mod_add_help},
               {"-alias",DCP_ARGV_STRING,NULL,NULL,
                    dcp_t_rgy_princ_mod_alias_help},
               {"-change",DCP_ARGV_STRING,NULL,NULL,
                    dcp_t_rgy_princ_mod_change_help},
               {"-fullname",DCP_ARGV_STRING,NULL,NULL,
                    dcp_t_rgy_princ_mod_fullname_help},
               {"-quota",DCP_ARGV_STRING,NULL,NULL,
                    dcp_t_rgy_princ_mod_quota_help},
               {"-remove",DCP_ARGV_STRING,NULL,NULL,
     !              dcp_t_rgy_princ_mod_remove_help},
               {"-types",DCP_ARGV_CONSTANT,(char *)1,NULL,
                    dcp_t_rgy_princ_mod_types_help},
               {NULL,DCP_ARGV_END,NULL,NULL,0} 
           };
       
 
Related-file::Added 950526 by wright:: /build/hiosfm/RCS/dce1.1/src/admin/dcecp/./rgy_pgo_account.c,v 8.4
 /build/hiosfm/RCS/dce1.1/src/admin/dcecp/./rgy_pgo_account.c,v 8.4
 wright 1995/05/26 21:00:49 +4 -4
 Reason:  OSDqa10839 dcecp help text needs help
 Specify "add" and "remove" text for org help modify / principal help modify
 options.
 
     *** /tmp/ci.11264..rgy_pgo_account.c.11339.1	Fri May 26 17:00:51 1995
     --- /tmp/rgy_pgo_account.c.11339.2	Fri May 26 17:00:52 1995
     ***************
     *** 988,998 ****
            */
           dcp_ArgvInfo arg_table[] = { 
               {"-acctlife",DCP_ARGV_STRING,NULL,NULL,
                    dcp_t_rgy_org_pol_acctlife_help},
               {"-add", DCP_ARGV_STRING, NULL, NULL,
     !              dcp_t_rgy_org_mod_change_help},
               {"-change", DCP_ARGV_STRING, NULL, NULL,
                    dcp_t_rgy_org_mod_change_help},
               {"-fullname", DCP_ARGV_STRING, NULL, NULL,
                    dcp_t_rgy_org_mod_fullname_help},
               {"-pwdalpha",DCP_ARGV_STRING,NULL,NULL,
     --- 988,998 ----
            */
           dcp_ArgvInfo arg_table[] = { 
               {"-acctlife",DCP_ARGV_STRING,NULL,NULL,
                    dcp_t_rgy_org_pol_acctlife_help},
               {"-add", DCP_ARGV_STRING, NULL, NULL,
     !              dcp_t_rgy_org_mod_add_help},
               {"-change", DCP_ARGV_STRING, NULL, NULL,
                    dcp_t_rgy_org_mod_change_help},
               {"-fullname", DCP_ARGV_STRING, NULL, NULL,
                    dcp_t_rgy_org_mod_fullname_help},
               {"-pwdalpha",DCP_ARGV_STRING,NULL,NULL,
     ***************
     *** 1004,1014 ****
               {"-pwdminlen",DCP_ARGV_STRING,NULL,NULL,
                    dcp_t_rgy_org_pol_pwdminln_help},
               {"-pwdspaces",DCP_ARGV_STRING,NULL,NULL,
                    dcp_t_rgy_org_pol_pwdspace_help},
               {"-remove", DCP_ARGV_STRING, NULL, NULL,
     !              dcp_t_rgy_org_mod_change_help},
               {"-types",DCP_ARGV_CONSTANT,(char *)1,NULL,
                    dcp_t_rgy_org_mod_types_help},
               {NULL,DCP_ARGV_END,NULL,NULL,0}     
           };
           
     --- 1004,1014 ----
               {"-pwdminlen",DCP_ARGV_STRING,NULL,NULL,
                    dcp_t_rgy_org_pol_pwdminln_help},
               {"-pwdspaces",DCP_ARGV_STRING,NULL,NULL,
                    dcp_t_rgy_org_pol_pwdspace_help},
               {"-remove", DCP_ARGV_STRING, NULL, NULL,
     !              dcp_t_rgy_org_mod_remove_help},
               {"-types",DCP_ARGV_CONSTANT,(char *)1,NULL,
                    dcp_t_rgy_org_mod_types_help},
               {NULL,DCP_ARGV_END,NULL,NULL,0}     
           };
           
 
Related-file:::: Resolution 
 DESCRIPTION OF BUG FIX:  In the two .c files, they had slots to point
 to appropriate messages for add and remove, but those slots pointed
 at the message for "change."  In dcp.sams, modified the text for the
 rpcentry help show to say that it takes a list of interfaces.   The
 Warranty Patch had already fixed the rpcgroup help import text.

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12943
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : other
S/W Ref Platform              : other
Component Name                : dcecp
Subcomponent Name             : tcl_dce
Short Description             : tcl_dce from unintegrated creates build problems on SVR4
Reported Date                 : 7/6/95
Found in Baseline             : 1.1
Found Date                    : 7/6/95
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : dcecp
Sensitivity                   : public

[7/6/95 public]

I know that this was a problem on SVR4 platform when we tried to build
1.1 GA + unintegrated. This OT is a reminder for fixing it on SVR4:

From customer:
In building the Warranty Patch, there appears to be a conflict
between dcecp and its use of libtcl.a . libtcl.a contains symbols
from admin/tcl_dce/tclMain.o -- namely, it contains the global function
"main". dcecp's link line includes admin/dcecp/main.o, whcih of
course also defines a "main". The two "main" functions are not
the same at source level, and the two objects differ slightly in
other ways (in the globals they export). Simply choosing one
or the other of the two "main" functions results in a dcecp that
is unaware of documented features such as ".dcecprc" and that
has a command buffer that does not conform to the DCP.. size.

Can you please confirm that this is a problem in the code as shipped,
and suggest a workaround that leaves us with an OSF-approved
behavior of dcecp? I have double-checked our build
and this does NOT appear to be a merge error on our part.

From SysEng:
The tcl_dce has been problem on SVR4 platform well before Warranty Patch.
The way to work around is to use tcl_dce from DCE GA tree and only those
file from unintegrated that were not in GA. With this set of changes we
were able to build DCE on SVR4.

[7/12/95 public]

From customer again:
> We've added
> 
> #pragma weak tclmain = main
> 
> to tclMain.c and renamed its version of main() to become
> tclmain() . This and a dummy definition of _Tcl_WAppInit()
> in dcecp/main.c got us a compilable version of testsh, tclsh,
> and dcecp.

Still the main concern is to remove the such use of pragma and not be
dependent upon platform specific behavior of linker.

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12911
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 12910
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rpccp
Short Description             : rpc{entry,group,profile}
import command should not take a -version option
Reported Date                 : 04/13/95
Found in Baseline             : 1.1
Found Date                    : 04/13/95
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : rpccp.c
Sensitivity                   : public

[6/7/95 public]

Charlie Rusman at Hitachi reported that several dcecp rpc
subcommands (e.g. rpcentry) are documented as supporting
the -version option, but there is no provision for this
functionality in the API.  

John Rousseau reported:

The rpc* export does not (and should not) take a -version
option. 

rpcentry unexport does take a -version option, and handles
it correctly. 

It seems that rpc* import is the only routine that is in
error. 

The rpc{entry,group,profile} import should not take a -version 
option.

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12902
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : acl modifications
Short Description             : broken mask_obj calculation
Reported Date                 : 6/2/95
Found in Baseline             : 1.1
Found Date                    : 6/2/95
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.2, 1.1maint
Affected File(s)              : src/admin/dcecp/acl_edit.c
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[6/2/95 public]

dcecp acl manipulation suffers from the following problems:

The mask_obj recalculation is broken whenever a new entry or multiple new
entries are added.

The mask_obj recalculation is broken whenever multiple existing entries are
modified.

The diffs follow:

[src] cml patch rajesh-15438-fix-mask_obj_calc-by-dcecp
Checked-out CML/delta/rajesh-15438-fix-mask_obj_calc-by-dcecp, revision 1.2 
Delta: rajesh-15438-fix-mask_obj_calc-by-dcecp
Change: admin/dcecp/acl_edit.c from 12.2 to 12.3
===================================================================
RCS file: /afs/tr/proj/dce/rcs/admin/dcecp/RCS/acl_edit.c,v
retrieving revision 12.2
retrieving revision 12.3
diff -Ladmin/dcecp/acl_edit.c -c -r12.2 -r12.3
*** admin/dcecp/acl_edit.c
--- 12.3        1995/06/02 00:07:08
***************
*** 2,7 ****
--- 2,17 ----
   * @TRANSARC_COPYRIGHT@
   *
   * $TALog: acl_edit.c,v $
+  * Revision 12.3  1995/06/02  00:07:08  rajesh
+  * Dcecp acl manipulation suffers from at least the following problems:
+  *
+  * The mask_obj recalculation is broken whenever a new entry or multiple
+  * new entries are added.
+  *
+  * The mask_obj recalculation is broken whenever an existing entry or
+  * multiple exi\ sting entries are modified.
+  * [from r12.2 by delta rajesh-15438-fix-mask_obj_calc-by-dcecp, r1.1]
+  *
   * Revision 12.2  1995/04/07  18:58:39  aswini
   * Do a better job of handling errors from sec_acl_bind().
   *
***************
*** 12,18 ****
   */
  
  #if !defined(_NOIDENT) && !defined(lint)
! static char *TARCSId = "$Id: c012902,v 1.4 96/10/22 10:13:26 root Exp $";
  #endif
  
  /*
--- 22,28 ----
   */
  
  #if !defined(_NOIDENT) && !defined(lint)
! static char *TARCSId = "$Id: c012902,v 1.4 96/10/22 10:13:26 root Exp $";
  #endif
  
  /*
***************
*** 1937,1947 ****
       */
      if ((GOOD_STATUS(&status) && 
          (change_entries_tcllist != NULL))){
        for (i = 0; (i < change_entry_argc && (GOOD_STATUS(&status))); i++) {
            status = dcp__acl_do_change_entries(&(change_acl_entries[i]),
                                                 INCREASE_MOD,
                                                 dcp_acl_info_p,
!                                                &granted_perms_from_chg);
        } /* End of loop thru entries to change */
      } /* End of change acl entries to increase perms */
  
--- 1947,1961 ----
       */
      if ((GOOD_STATUS(&status) && 
          (change_entries_tcllist != NULL))){
+ 
+       sec_acl_permset_t changed_perms; 
+ 
        for (i = 0; (i < change_entry_argc && (GOOD_STATUS(&status))); i++) {
            status = dcp__acl_do_change_entries(&(change_acl_entries[i]),
                                                 INCREASE_MOD,
                                                 dcp_acl_info_p,
!                                                &changed_perms);
!           granted_perms_from_chg |= changed_perms;
        } /* End of loop thru entries to change */
      } /* End of change acl entries to increase perms */
  
***************
*** 1951,1961 ****
       */
      if ((GOOD_STATUS(&status) && 
          (add_entries_tcllist != NULL))){
        for (i = 0; (i < add_entry_argc && (GOOD_STATUS(&status))); i++) {
            status = dcp__acl_do_add_entries(&(add_acl_entries[i]),
                                             INCREASE_MOD,
                                             dcp_acl_info_p,
!                                            &granted_perms_from_add);
        } /* End of loop thru entries to add */
      } /* End of add acl entries processing */
  
--- 1965,1979 ----
       */
      if ((GOOD_STATUS(&status) && 
          (add_entries_tcllist != NULL))){
+ 
+       sec_acl_permset_t added_perms; 
+ 
        for (i = 0; (i < add_entry_argc && (GOOD_STATUS(&status))); i++) {
            status = dcp__acl_do_add_entries(&(add_acl_entries[i]),
                                             INCREASE_MOD,
                                             dcp_acl_info_p,
!                                            &added_perms);
!           granted_perms_from_add |= added_perms;
        } /* End of loop thru entries to add */
      } /* End of add acl entries processing */
  
***************
*** 3718,3725 ****
       * Return the "newly" granted permissions for the entry in
       * the file group class.
       */
!     if (dcp__acl_is_file_group_class(&DCP_C_ACL_MGR.sec_acl_p->sec_acl_entries[DCP_C_ACL_MGR.sec_acl_p->num_entries])){
!         *perms_changed_p = DCP_C_ACL_MGR.sec_acl_p->sec_acl_entries[DCP_C_ACL_MGR.sec_acl_p->num_entries].perms;
      } 
  
      return(status);
--- 3736,3743 ----
       * Return the "newly" granted permissions for the entry in
       * the file group class.
       */
!     if (dcp__acl_is_file_group_class(sec_acl_entry_p)) {
!         *perms_changed_p = sec_acl_entry_p->perms;
      } 
  
      return(status);
Delta: rajesh-15438-fix-mask_obj_calc-by-dcecp
Change: admin/dcecp/acl_edit.c from 12.3 to 12.4
===================================================================
RCS file: /afs/tr/proj/dce/rcs/admin/dcecp/RCS/acl_edit.c,v
retrieving revision 12.3
retrieving revision 12.4
diff -Ladmin/dcecp/acl_edit.c -c -r12.3 -r12.4
*** admin/dcecp/acl_edit.c
--- 12.4        1995/06/02 15:06:50
***************
*** 2,7 ****
--- 2,12 ----
   * @TRANSARC_COPYRIGHT@
   *
   * $TALog: acl_edit.c,v $
+  * Revision 12.4  1995/06/02  15:06:50  rajesh
+  * Add comments clarifing whose responsibility is it to initialize
+  * the perms_changed_p parameter to dcp__acl_do_change_entries()
+  * [from r12.3 by delta rajesh-15438-fix-mask_obj_calc-by-dcecp, r1.2]
+  *
   * Revision 12.3  1995/06/02  00:07:08  rajesh
   * Dcecp acl manipulation suffers from at least the following problems:
   *
***************
*** 22,28 ****
   */
  
  #if !defined(_NOIDENT) && !defined(lint)
! static char *TARCSId = "$Id: c012902,v 1.4 96/10/22 10:13:26 root Exp $";
  #endif
  
  /*
--- 27,33 ----
   */
  
  #if !defined(_NOIDENT) && !defined(lint)
! static char *TARCSId = "$Id: c012902,v 1.4 96/10/22 10:13:26 root Exp $";
  #endif
  
  /*
***************
*** 1951,1956 ****
--- 1956,1962 ----
        sec_acl_permset_t changed_perms; 
  
        for (i = 0; (i < change_entry_argc && (GOOD_STATUS(&status))); i++) {
+           /* Callee's responsiblity to initialize changed_perms correctly */ 
            status = dcp__acl_do_change_entries(&(change_acl_entries[i]),
                                                 INCREASE_MOD,
                                                 dcp_acl_info_p,
***************
*** 1969,1974 ****
--- 1975,1981 ----
        sec_acl_permset_t added_perms; 
  
        for (i = 0; (i < add_entry_argc && (GOOD_STATUS(&status))); i++) {
+           /* Callee's responsiblity to initialize added_perms correctly */ 
            status = dcp__acl_do_add_entries(&(add_acl_entries[i]),
                                             INCREASE_MOD,
                                             dcp_acl_info_p,
***************
*** 3787,3792 ****
--- 3794,3802 ----
   *           For modification types NORMAL_MOD and DECREASE_MOD,
   *           this field is ignored.
   *
+  *         IT IS THIS FUNCTION'S RESPONSIBLITY TO ALWAYS INITIALIZE 
+  *         *perms_changed_p TO ZERO AT THE BEGINNING.
+  *
   * RETURNS:
   * status:   A pointer to the completion status. On successful completion, 
   *         the routine returns error_status_ok. Otherwise, it returns 
***************
*** 3803,3808 ****
--- 3813,3822 ----
      boolean32 entry_found = FALSE;
  
      CLEAR_STATUS(&status);
+     /*
+      * IT IS THIS FUNCTION'S RESPONSIBLITY TO ALWAYS 
+      * INITIALIZE *perms_changed_p TO ZERO AT THE BEGINNING.
+      */
      *perms_changed_p = (sec_acl_permset_t) 0;
  
      /*



CR Number                     : 12893
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : DCP_SET_RESULT macro should use freeProc of TCL_VOLATILE
Reported Date                 : 5/30/95
Found in Baseline             : 1.1
Found Date                    : 5/30/95
Severity                      : B
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.2.1,1.1maint
Affected File(s)              : admin/dcecp/dcecp.h
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[5/30/95 public]

The macro DCP_SET_RESULT is currently defined as follows in dcecp.h:

> #define DCP_SET_RESULT(string)                                          \
>     Tcl_SetResult(interp, string, TCL_DYNAMIC); 

This implies that "string" has been malloc'ed and will be freed by a
call to "free".  However, DCP_SET_RESULT is at various times applied 
to the result element in a different interp struct (directory_delete
and directory_merge in cdscp.c, dcp_rgy_sa_dump and dcp_rgy_sa_verify 
in rgy_sa_tclif.c), to a character constant (dcp_sv_ping and 
dcp_sv_status in dhd_secval.c and dcp_sr_ping in dhd_server.c), to a 
char array of local scope (name_get in rgy.c) and to a string 
representation of a uuid which subsequently gets freed by a call to 
rpc_string_free (rpc_uuid_create in rpccp.c).  Given this varied
usage, perhaps DCP_SET_RESULT should be redefined as:

> #define DCP_SET_RESULT(string)                                          \
>     Tcl_SetResult(interp, string, TCL_VOLATILE); 

Result strings with a freeProc of TCL_VOLATILE will be copied (and
thus preserved) in case their value changes before Tcl_SetResult
has completed, and the memory associated with these strings will be
freed by the processes which created them and not by the Tcl
interpreter.

[5/31/95 public]
If I'm remembering correctly, I think all the uses you site are bugs
and should be fixed (they are all stuff that happened late in the
project).  Don't change the definition of DCP_SET_RESULT.  There are
many more places that call it properly that don't want the performance
penalty of a strcpy.

[5/31/95 public]

Actually, these really are all the occurrences of DCP_SET_RESULT.
There are two similar macros which are used extensively:

> #define DCP_SET_RESULT_CODE(code)                                       \
>     Tcl_SetResult(interp, (char *)dce_sprintf(code), TCL_DYNAMIC); 
>
> #define DCP_SET_RESULT_CODE_ONE_ARG(code, arg1)                         \
>     Tcl_SetResult(interp, (char *)dce_sprintf(code, arg1), TCL_DYNAMIC);

However, both of these use dce_sprintf, the return value of which points 
to memory that has indeed been malloc'ed (well, actually, realloc'ed).

The correct solution here is probably to rewrite the functions which call
DCP_SET_RESULT so they can safely utilize one of the other two macros
instead.  As an interim workaround, though, redefining DCP_SET_RESULT
should be safe as long as no new code is written which uses it.

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12832
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : Potenital core dump in all cds commands
Reported Date                 : 3/30/95
Found in Baseline             : 1.1
Found Date                    : 3/30/95
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.2.1
Affected File(s)              : admin/dcecp/cds*
Sensitivity                   : public

[3/30/95 public]
Throughout the dcecp cds commands, blind strcpy's are made of user input
into cds_full_name_t structures, specifically the .uc member.
cds_full_name_t.uc is a CDS_FNAME_MAX (1024) size buffer. 

A check needs to be made before each of these copies to see if the size of
the input to the copy will overfill the buffer, and return an error if this
is the case.

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12822
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp group/org list not scalable
Reported Date                 : 3/21/95
Found in Baseline             : 1.1
Found Date                    : 3/21/95
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.2.1, 1.1maint
Affected File(s)              : dcecp
Diff supplied by              : 
Diff release                  : 
Sensitivity                   : public

[3/21/95 public]

The dcecp "group list" and "org list" commands 
 	1. are very greedy in using 1MB stack space
 	2. do not scale : they will report only the first
 		1K matching items
 
The following is a suggested fix from the customer:
	1. malloc member_list[] to avoid stack overflow
	2. get all of the data requested by the user, rather than some
	   static upper bound.
 
     *** /tmp/ci.27986..rgy_pgo_account.c.28020.1	Fri Mar 10 13:46:16 1995
     --- /tmp/rgy_pgo_account.c.28020.2	Fri Mar 10 13:46:16 1995
     ***************
     *** 791,801 ****
     --- 791,806 ----
           int                  i = 0;
           int                  j = 0;
           signed32             members_supplied = 0;
           signed32             members_avail = 0;
           signed32             max_members = 1024;
     + #ifdef hitm
     +     signed32             total_supplied;
     +     sec_rgy_member_t     *member_list;
     + #else
           sec_rgy_member_t     member_list[1024];
     + #endif
           boolean32            simplename = FALSE;
           boolean32            is_simple;
           size_t               org_name_size = 0;
       
           dcp_ArgvInfo arg_table[] = { 
     ***************
     *** 824,865 ****
           /* process all orgs supplied in command */
           if((is_simple = is_simple_name(largc,largv)) == -1){
               free(largv);
               DCP_SET_MISC_ERROR(dcp_s_rgy_full_or_simple);
           }
           for(; i < largc ; i++){
               strcpy((char *)global_name,largv[i]);
               if(dcp_id_parse_name(interp,global_name,cell_name,org_name) != TCL_OK) {
                   free(largv);
                   return TCL_ERROR;
               }
               if(is_simple)
                   global_name[0] = '\0';
               else
                   strcpy((char *)global_name,(char *)cell_name);
               if(open_rgy_site(interp, global_name, site_update) != TCL_OK) {
                   free(largv);
                   return TCL_ERROR;
               }
               sec_rgy_pgo_get_members(rgy_context,
                                       sec_rgy_domain_org,
                                       org_name,
                                       &item_cursor,
                                       max_members,member_list,
                                       &members_supplied,
                                       &members_avail,
                                       &result);
               if (result != sec_rgy_status_ok)
                   free(largv);
               DCP_CHECK_SEC_ERROR(result);
     ! 
               if(strlen(interp->result))
                   Tcl_AppendResult(interp,"\n",NULL);
       
               org_name_size = strlen((char *)cell_name) + sec_rgy_pname_t_size + 1;
               output = (char *)malloc(org_name_size);
     ! 
               /* for each org member */
               for(j = 0 ; j <  members_supplied; j++){
                   if(!simplename)
                       sprintf(output,"%s/%s",cell_name,member_list[j]);
                   else
     --- 829,902 ----
           /* process all orgs supplied in command */
           if((is_simple = is_simple_name(largc,largv)) == -1){
               free(largv);
               DCP_SET_MISC_ERROR(dcp_s_rgy_full_or_simple);
           }
     + #ifdef hitm
     +     member_list = (sec_rgy_member_t *)malloc(sizeof(sec_rgy_member_t) *
     + 						max_members);
     +     if(member_list == NULL) {
     + 	    DCP_SET_RESULT_CODE(dcp_s_no_memory);
     + 	    return TCL_ERROR;
     +     }
     + #endif
           for(; i < largc ; i++){
               strcpy((char *)global_name,largv[i]);
               if(dcp_id_parse_name(interp,global_name,cell_name,org_name) != TCL_OK) {
                   free(largv);
     + #ifdef hitm
     + 	    free(member_list);
     + #endif
                   return TCL_ERROR;
               }
               if(is_simple)
                   global_name[0] = '\0';
               else
                   strcpy((char *)global_name,(char *)cell_name);
               if(open_rgy_site(interp, global_name, site_update) != TCL_OK) {
                   free(largv);
     + #ifdef hitm
     + 	    free(member_list);
     + #endif
                   return TCL_ERROR;
               }
     + 
     + #if hitm
     + 	sec_rgy_cursor_reset(&item_cursor);
     + 	total_supplied = 0;
     + 	do {
     + #endif
               sec_rgy_pgo_get_members(rgy_context,
                                       sec_rgy_domain_org,
                                       org_name,
                                       &item_cursor,
                                       max_members,member_list,
                                       &members_supplied,
                                       &members_avail,
                                       &result);
               if (result != sec_rgy_status_ok)
     + #ifdef hitm
     + 	{
     + #endif
                   free(largv);
     + #ifdef hitm
     + 	    free(member_list);
     + 	}
     + #endif
               DCP_CHECK_SEC_ERROR(result);
     ! #ifdef hitm
     !         if(strlen(interp->result) && total_supplied == 0)
     ! #else
               if(strlen(interp->result))
     + #endif
                   Tcl_AppendResult(interp,"\n",NULL);
       
               org_name_size = strlen((char *)cell_name) + sec_rgy_pname_t_size + 1;
               output = (char *)malloc(org_name_size);
     ! #ifdef hitm
     ! 	total_supplied += members_supplied;
     ! #endif
               /* for each org member */
               for(j = 0 ; j <  members_supplied; j++){
                   if(!simplename)
                       sprintf(output,"%s/%s",cell_name,member_list[j]);
                   else
     ***************
     *** 867,878 ****
     --- 904,921 ----
                   if(strlen(interp->result))
                       Tcl_AppendResult(interp,"\n",NULL);
                   Tcl_AppendResult(interp,output,NULL);
               } /* end for () all entries in org. */
               free(output);
     + #ifdef hitm
     + 	} while ( members_avail > total_supplied );
     + #endif
           } /* end for ( i < largc) all entries (orgs) supplied in command */
           free(largv);
     + #ifdef hitm
     +     free(member_list);
     + #endif
           return TCL_OK;
       } /* end rgy_org_list */
       
       /*
        * FUNCTION: rgy_org_modify()
 
 
     *** /tmp/ci.27986..rgy_pgo_group.c.28055.1	Fri Mar 10 13:46:28 1995
     --- /tmp/rgy_pgo_group.c.28055.2	Fri Mar 10 13:46:28 1995
     ***************
     *** 1378,1388 ****
     --- 1378,1393 ----
           int                  i = 0;
           int                  j = 0;
           signed32             members_supplied = 0;
           signed32             members_avail = 0;
           signed32             max_members = 1024;
     + #ifdef hitm
     +     signed32		 total_supplied;
     +     sec_rgy_member_t     *member_list;
     + #else
           sec_rgy_member_t     member_list[1024];
     + #endif
           boolean32            simplename = FALSE;
           size_t               group_name_size = 0;
           boolean32            is_simple;
           
           dcp_ArgvInfo arg_table[] = { 
     ***************
     *** 1408,1431 ****
     --- 1413,1455 ----
           /* process all groups supplied in command */
           if((is_simple = is_simple_name(largc,largv)) == -1){
               free(largv);
               DCP_SET_MISC_ERROR(dcp_s_rgy_full_or_simple);
           }
     + #ifdef hitm
     +     member_list = (sec_rgy_member_t *)malloc(sizeof(sec_rgy_member_t) *
     + 					max_members);
     +     if(member_list == NULL) {
     +         DCP_SET_RESULT_CODE(dcp_s_no_memory);
     +         return TCL_ERROR;
     +     }
     + #endif
           for(; i < largc ; i++){
               strcpy((char *)global_name,largv[i]);
               if(dcp_id_parse_name(interp,global_name,cell_name,group_name) != TCL_OK) {
                   free(largv);
     + #ifdef hitm
     + 	    free(member_list);
     + #endif
                   return TCL_ERROR;
               }
               if(is_simple)
                   global_name[0] = '\0';
               else
                   strcpy((char *)global_name,(char *)cell_name);
               if(open_rgy_site(interp, global_name, site_query) != TCL_OK) {
                   free(largv);
     + #ifdef hitm
     + 	    free(member_list);
     + #endif
                   return TCL_ERROR;
               }
     + #if hitm
     + 	sec_rgy_cursor_reset(&item_cursor);
     + 	total_supplied = 0;
     + 	do {
     + #endif
               sec_rgy_pgo_get_members(rgy_context,
                                       sec_rgy_domain_group,
                                       group_name,
                                       &item_cursor,
                                       max_members,
     ***************
     *** 1432,1450 ****
                                       member_list,
                                       &members_supplied,
                                       &members_avail,
                                       &result);
               if (result != sec_rgy_status_ok)
                   free(largv);
               DCP_CHECK_SEC_ERROR(result);
     ! 
               if(strlen(interp->result))
                   Tcl_AppendResult(interp,"\n",NULL);
       
               group_name_size = strlen((char *)cell_name) + sec_rgy_pname_t_size + 1;
               output = (char *)malloc(group_name_size);
     ! 
               /* for each group member */
               for(j = 0 ; j <  members_supplied; j++){
                   if(strlen(interp->result))
                       Tcl_AppendResult(interp,"\n",NULL);
                   if(!simplename)
     --- 1456,1486 ----
                                       member_list,
                                       &members_supplied,
                                       &members_avail,
                                       &result);
               if (result != sec_rgy_status_ok)
     + #ifdef hitm
     + 	{
     + 	    free(member_list);
     + #endif
                   free(largv);
     + #ifdef hitm
     + 	}
     + #endif
               DCP_CHECK_SEC_ERROR(result);
     ! #ifdef hitm
     !         if(strlen(interp->result) && total_supplied == 0)
     ! #else
               if(strlen(interp->result))
     + #endif
                   Tcl_AppendResult(interp,"\n",NULL);
       
               group_name_size = strlen((char *)cell_name) + sec_rgy_pname_t_size + 1;
               output = (char *)malloc(group_name_size);
     ! #ifdef hitm
     ! 	total_supplied += members_supplied;
     ! #endif
               /* for each group member */
               for(j = 0 ; j <  members_supplied; j++){
                   if(strlen(interp->result))
                       Tcl_AppendResult(interp,"\n",NULL);
                   if(!simplename)
     ***************
     *** 1452,1463 ****
     --- 1488,1505 ----
                   else
                       sprintf(output,"%s",member_list[j]);
                   Tcl_AppendResult(interp,output,NULL);
               } /* end for () all entries in group. */
               free(output);
     + #if hitm
     + 	} while ( members_avail > total_supplied );
     + #endif
           } /* end for ( i < largc) all entries (groups) supplied in command */
           free(largv);
     + #ifdef hitm
     +     free(member_list);
     + #endif
           return TCL_OK;
       } /* end rgy_group_list */
       
       
       /*

[3/27/95 public]
We've tested this fix here at HP and it works well. One nit, the two checks
for NULL after the malloc of the sec_rgy_member_t structure fail to
free(largv) if the malloc fails.

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12821
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 12613
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : secval
Short Description             : secval_status_6_P uses incorrect
dcecp command language syntax.
Reported Date                 : 3/16/95
Found in Baseline             : 1.1
Found Date                    : 3/16/95
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.2.1
Affected File(s)              : src/test/functional/admin/dcecp/ts/secval/secval_status_P.tcl
Sensitivity                   : public

[3/16/95 public]

As reported in OT CR 12613, secval_status_6_P fails, yielding
{1 {Bad or wrong arguments}} when the test expects {0 1}; but
this was not addressed in the resolution of 12613.

The contents of the test case are

	list [catch {secval status {$DCP_SR_PROTSEQ $DCP_SR_IP_ADDR}} msg] $msg

This fails because (as noted in the OSF DCE Admin Guide to Core Components'
chapter on dcecp command language) curly brackets disable $ variable
substitution.  This can be verified by invoking dcecp and trying the
following commands;

dcecp> set foobar grundge
dcecp> list $foobar
	-- yields "grundge"
dcecp> list {$foobar}
	-- yields "{$foobar}"

Therefore, no variable substitution is occurring for $DCP_SR_PROTSEQ and
$DCP_SR_IP_ADDR in secval_status_6_P.

My current workaround is to edit secval_status_P.tcl to substitute
the test system's protseq and IP-addr for these variables in the
broken line of secval_status_6_P; but this needs to be fixed in a
more portable way.

[3/22/95 public]

The solution is to create the desired string before the test; to wit:

    # Setup steps
    set temp1 [list $DCP_SR_PROTSEQ $DCP_SR_IP_ADDR]

    # Run the test
    test {
        list [catch {secval status $temp1} msg] $msg
    } compare_strings {0 1}

This works.

[3/16/95 public]

A better solution : use "" instead of {} to delimit the arguments of catch;

    # Setup steps

    # Run the test
    test {
        list [catch "secval status {$DCP_SR_PROTSEQ $DCP_SR_IP_ADDR}" msg] $msg
    } compare_strings {0 1}

This is also consistent with the other tests...

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12817
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : test needs a bit more cleanup...
Reported Date                 : 3/14/95
Found in Baseline             : 1.1
Found Date                    : 3/14/95
Severity                      : E
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.2.1
Affected File(s)              : src/test/functional/admin/dcecp/ts/rgy/schema_create_P.tcl
Sensitivity                   : public

[3/14/95 public]

schema_create_49_P and schema_create_50_P create extended attribute schemas
with the "reserved" flag set.  The cleanup step for these cases is

    if {[dcp_wrap {xattrschema delete /.:/sec/xattrschema/schema_create_50_P}] != 0} {return;}

which fails because it is not legal to delete an extended attribute schema
with the reserved bit set.  These two cases need an additional cleanup step
prior to the delete, namely

    if {[dcp_wrap {xattrschema modify /.:/sec/xattrschema/schema_create_50_P -reserved no}] != 0} {return;}

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12814
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : src/admin/dcecp/rgy_utils.c
Short Description             : free() of uninitialized pointer
Reported Date                 : 3/7/95
Found in Baseline             : 1.1
Found Date                    : 3/7/95
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.2.1
Affected File(s)              : rgy_utils.c
Sensitivity                   : public

[3/7/95 public]

get_attr_values() has a path by which the field
auth_info_p->tagged_union.dce_info.svr_princ_name may be left uninitialized
before the call to get_hex_bytes at line 3436 (or so); if get_hex_bytes fails
(e.g. during group_create_era_binding_6_N of group_create_era_N.tcl, in the
group_era case of test/functional/admin/dcecp), then an attempt is made to
free an uninitialized pointer.
	It is impossible for the code at that point to know a priori whether
memory has been allocated for this field or not; so I suggest initializing
this field to NULL after allocating attr->tagged_union.binding, and checking
the field for NULL prior to freeing it.  This may be a problem wherever this
field is freed.

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12809
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : osf1
Component Name                : dcecp
Subcomponent Name             : sec
Short Description             : bad TET format in scenario file
Reported Date                 : 2/28/95
Found in Baseline             : 1.1
Found Date                    : 2/28/95
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.2.1
Affected File(s)              : test/functional/admin/dcecp/tet_scen
Sensitivity                   : public

[2/28/95 public]

test/functional/admin/dcecp/tet_scen contains the lines (under the "registry"
test case definition);
	/ts/rgy/registry_set_N.tcl 1-12
	/ts/rgy/registry_set_N.tcl 13
TET does not like this syntax, and fails to execute the indicated tests.
The proper syntax is
	/ts/rgy/registry_set_N.tcl{1-12}
	/ts/rgy/registry_set_N.tcl{13}

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12790
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : aud
Short Description             : Incorrect expected output in audfilter_modify_24_P
Reported Date                 : 2/7/95
Found in Baseline             : 1.1
Found Date                    : 2/7/95
Severity                      : E
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : src/test/functional/admin/dcecp/ts/aud/audfilter_modify_P.tcl
Sensitivity                   : public

[2/7/95 public]

proc audfilter_modify_24_P() expects an incorrect output from the test.

The expected output is
    {dce_audit_filter_query {success failure} alarm}
    {{dce_dts_mgt_modify dce_audit_filter_query} denial log}
    {dce_dts_time_provider success log}
    {dce_dts_time_provider failure all}
    {dce_dts_time_provider denial alarm}
    {dce_audit_filter_query {success failure} alarm}
    {{dce_dts_mgt_modify dce_audit_filter_query} denial log}

The output should be

    {dce_audit_filter_query {success failure} alarm}
    {{dce_dts_mgt_modify dce_audit_filter_query} denial log}
    {dce_dts_time_provider success log}
    {dce_dts_time_provider failure all}
    {dce_dts_time_provider denial alarm}
    {dce_audit_filter_query {success failure} alarm}
    {{dce_dts_mgt_modify dce_audit_filter_query} denial log}
    {dce_dts_mgt_query failure all}
    {dce_dts_time_provider failure all}
    {dce_audit_filter_query {success failure} alarm}
    {{dce_dts_mgt_modify dce_audit_filter_query} denial log}

The output expected by the test fails to list the filters "world" and
"world_overridable".

[12/9/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12734
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 11259
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : i18n
Short Description             : I18Ned Tcl does not work on HP
Reported Date                 : 10/26/94
Found in Baseline             : 1.1b22
Found Date                    : 10/26/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : dcecp
Sensitivity                   : public

[10/26/94 public]

  I18Ned Tcl does not work well on HP-UX platform.  Any command input results
core dump in free() function.  The same command input, as well as the
functional test execution succeeded on 486.

  Followings are xdb output with the core.

SJIS 'source' command

SJIS source

        0x800b28f4   free    +0124   LDW     0(0,31),23
        0x800b28f8   free    +0128   COMCLR,<>       23,8,0
        0x800b28fc   free    +012c   STW     5,0(0,31)
        0x800b2900   free    +0130   BL      _open@libc+0274,2
        0x800b2904   free    +0134   LDWS    0(0,9),26
 >      0x800b2908   free    +0138   LDW     -32(0,30),19
        0x800b290c   free    +013c   LDWS    0(0,9),25
        0x800b2910   free    +0140   OR      5,0,31
        0x800b2914   free    +0144   DEPI    -1,31,1,31

 0 free@libc + 0x00000138 (0x7b034ecc, 0xd0, 0x40006110, 0x7b033ae8)
 1 free@libc + 0x00000224 (0, 0x4008f618, 0x3, 0x7b035198)
 2 _Tcl_WEval (interp = 0x4008f618, wcmd = 0x40095718)    [/project/dce/build/un
integrated/src/admin/tcl_dce/tclBasic.c: 1985]
 3 _Tcl_WEvalFile (interp = 0x4008f618, fileName = 0x40094710)    [/project/dce/
build/unintegrated/src/admin/tcl_dce/tclUnixUtil.c: 1795]
 4 _Tcl_WSourceCmd (dummy =   00000000, interp = 0x4008f618, argc = 2, wargv = 0
x7b034998)    [/project/dce/build/unintegrated/src/admin/tcl_dce/tclUnixAZ.c: 48
68]
 5 _Tcl_WEval (interp = 0x4008f618, wcmd = 0x40095120)    [/project/dce/build/un
integrated/src/admin/tcl_dce/tclBasic.c: 1985]
 6 _Tcl_WRecordAndEval (interp = 0x4008f618, cmd = 0x40009f84, flags = 0)    [/p
roject/dce/build/unintegrated/src/admin/tcl_dce/tclHistory.c: 1469]
 7 _i18n_main (interp = 0x4008f618, argc = 1, argv = 0x7b03397c)    [/project/dc
e/build/unintegrated/src/admin/tcl_dce/tclMain.c: 611]
 8 main (argc = 1, argv = 0x7b03397c)    [/project/dce/build/unintegrated/src/ad
min/tcl_dce/tclMain.c: 149]



SJIS 'ls' command

        0x800b27ac   malloc  +0528   LDW     -188(0,30),4
        0x800b27b0   malloc  +052c   BV      0(2)
        0x800b27b4   malloc  +0530   LDWM    -192(0,30),3
        0x800b27b8   free            BL      free@libc,2
        0x800b27bc   free    +0004   OR      0,0,0
 >      0x800b27c0   free    +0008   LDW     -24(0,30),2
        0x800b27c4   free    +000c   LDSID   (0,2),1
        0x800b27c8   free    +0010   MTSP    1,0
        0x800b27cc   free    +0014   BE,N    0(0,2)
        0x800b27d0   free            STW     2,-20(0,30)


>t
 0 free@libc + 0x00000008 (hp-ux export stub)
 1 RebuildTable (tablePtr = 0x4008f618)    [/project/dce/build/dce1.1/src/admin/
tcl_dce/tclHash.c: 953]
 2 Tcl_AppendResult (va_alist = 1074329112)    [/project/dce/build/unintegrated/
src/admin/tcl_dce/tclUtil.c: 1142]
 3 _Tcl_WEval (interp = 0x4008f618, wcmd = 0x40094710)    [/project/dce/build/un
integrated/src/admin/tcl_dce/tclBasic.c: 1931]
 4 _Tcl_WRecordAndEval (interp = 0x4008f618, cmd = 0x40009f84, flags = 0)    [/project/dce/build/unintegrated/src/admin/tcl_dce/tclHistory.c: 1469]
 5 _i18n_main (interp = 0x4008f618, argc = 1, argv = 0x7b03397c)    [/project/dc
e/build/unintegrated/src/admin/tcl_dce/tclMain.c: 611]
 6 main (argc = 1, argv = 0x7b03397c)    [/project/dce/build/unintegrated/src/ad
min/tcl_dce/tclMain.c: 149]

[10/27/94 public]
Core dumps are severity A.  Deferred till 1.2.

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12720
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : tests cause test failures
Reported Date                 : 10/25/94
Found in Baseline             : 1.1b22
Found Date                    : 10/25/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2
Affected File(s)              : tet_scen, rgy_*_*.tcl
Sensitivity                   : public

[10/25/94 public]
There are several problems with running the entire dcecp test suite at 
once. Primarily, registry tests early in the suite often put the replica
in a state where it no longer receives updates. This causes subsequent 
tests in the suite to fail because the replica is not receiveing updates.

The test suite should be modified so that the registry tests do not cause 
this condition, or reset the replica to a functioning state after the
registry tests complete.

[09/13/95 public]
Modified the 'all' test suite, as well as a bunch of the registry tests
so they are not destructive.  This was fixed as part of the HP 1.1 Warranty
Patch submission.



CR Number                     : 12719
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : /admin/tcl_dce
Short Description             : UHYP:Function _TclWParseQuotes cannot be redeclared
Reported Date                 : 10/25/94
Found in Baseline             : 1.1
Found Date                    : 10/25/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1unintegrated
Affected File(s)              : admin/tcl_dce/tclWParse.c
Sensitivity                   : public

[10/25/94 public]

[ /admin/tcl_dce at 03:35 (AM) Tuesday ]

xlc -c       -DHAVE_UNISTD_H=1 -DNO_UNION_WAIT=1 -DNEED_MATHERR=1  -DTCL_LIBRARY=\"/opt/dcelocal/tcl\" -D_ALL_SOURCE -DAIX32   -I. -I/u1/devobj/sb/nb_unintegrated_rios/src/admin/tcl_dce -I/project/dce/build/unintegrated-snap/src/admin/tcl_dce  -I. -I/u1/devobj/sb/nb_unintegrated_rios/src/admin/tcl_dce -I/project/dce/build/unintegrated-snap/src/admin/tcl_dce -I../tcl7.3 -I/u1/devobj/sb/nb_unintegrated_rios/src/admin/tcl7.3 -I/project/dce/build/unintegrated-snap/src/admin/tcl7.3 -I/u1/devobj/sb/nb_unintegrated_rios/export/rios/usr/include -I/project/dce/build/unintegrated-snap/export/rios/usr/include   /project/dce/build/unintegrated-snap/src/admin/tcl_dce/tclWParse.c
"/project/dce/build/unintegrated-snap/src/admin/tcl_dce/tclWParse.c", line 210.1: 1506-132 (S) Function _TclWParseQuotes cannot be redeclared.
"/project/dce/build/unintegrated-snap/src/admin/tcl_dce/tclWParse.c", line 1165.1: 1506-132 (S) Function _WQuoteEnd cannot be redeclared.
"/project/dce/build/unintegrated-snap/src/admin/tcl_dce/tclWParse.c", line 1588.1: 1506-132 (S) Function _Tcl_WCtype cannot be redeclared.
*** Error code 1

[10/25/94 public]
The problem is with mismatched old-style and new-style declarations and
definitions.  In all the functions an _ANSI_ARGS_ macro is used in the
prototype but all the functions are defined using old style function
definitions.  This is bad and should be changed.  We really should change
all of Tcl to be ANSI only.

Anyway, the reason only these 3 functions cause problems is that they are
the only ones that have an argument subject to integral promotion, in this
case a wchar_t argument.  An old-style and new-style definition are only
different in the handling of arguments that get promoted.  The quick fix is
to redefine these functions based on whether _ANSI_ARGS_ is defined.

Testing now.

[10/25/94 public]
Quick fix it is. Submitted.



CR Number                     : 12710
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : No longer useful macro in us.
Reported Date                 : 10/24/94
Found in Baseline             : 1.1
Found Date                    : 10/24/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2
Affected File(s)              : cdscp.c, cdscp_cache.c,
cdscp_cellalias.c, cdscp_clearinghouse.c, cdscp_link,c, cdscp_object.c,
cdscp_utils.c
Sensitivity                   : public
OK                            : 

[10/24/94 public]

The macro BROKEN_CMA_EXC_HANDLING is no longer useful and should
be removed from dcecp code. Specificly the cds related code.

[09/13/95 public]
Code removed.  Part of HP 1.1 Warranty Patch submission.



CR Number                     : 12694
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp audtrail test fails
Reported Date                 : 10/20/94
Found in Baseline             : 1.1b22
Found Date                    : 10/20/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2
Affected File(s)              : trail1, trail1.md_index, trial2, trail2.md_index
Sensitivity                   : public

[10/20/94 public]

The followingfailures were found in the journal file:

...
520|0 1 13657 1 1|audtrail_show_4_P: Check that we can show an audit trail file.
520|0 1 13657 1 2|Test returned {Buffer not usable by IDL Encoding Services}
520|0 1 13657 1 3|Test Failed.
220|0 1 1 13:25:13|FAIL
410|0 1 1 13:25:14|IC End
400|0 2 1 13:25:14|IC Start
200|0 1 13:25:14|TP Start
520|0 1 13657 1 4|audtrail_show_5_P: Check that we can show an audit trail file
without list braces.
520|0 1 13657 1 5|Test returned {Buffer not usable by IDL Encoding Services}
520|0 1 13657 1 6|Test Failed.
220|0 1 1 13:25:14|FAIL
410|0 2 1 13:25:14|IC End
400|0 3 1 13:25:15|IC Start
200|0 1 13:25:15|TP Start
520|0 1 13657 1 7|audtrail_show_6_P: Check that we can show a list of audit trai
l files.
520|0 1 13657 1 8|Test returned {Buffer not usable by IDL Encoding Services}
520|0 1 13657 1 9|Test Failed.
220|0 1 1 13:25:15|FAIL
410|0 3 1 13:25:15|IC End
400|0 4 1 13:25:16|IC Start
200|0 1 13:25:16|TP Start
520|0 1 13657 1 10|audtrail_show_7_P: Check that we can dump an audit trail to a
 file using -to.
520|0 1 13657 1 11|Test returned {Could not open '/tmp/trail.out' for output.}
520|0 1 13657 1 12|Test Failed.
220|0 1 1 13:25:16|FAIL

[09/13/95 public]
Put in correct audtrail files.  Fixed in HP 1.1 Warranty Patch submission.
Z



CR Number                     : 12693
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp audevents test fails
Reported Date                 : 10/20/94
Found in Baseline             : 1.1b22
Found Date                    : 10/20/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2
Affected File(s)              : audevents_show_P.tcl
Sensitivity                   : public

[10/20/94 public]

The following error conditions were found in the jounal file:

...
520|0 1 13787 1 1|audevents_show_3_P: Check that we can show a single event clas
s.
520|0 1 13787 1 2|==== Contents of test case:
520|0 1 13787 1 3|{     audevents show {dce_audit_filter_modify}     }
520|0 1 13787 1 4|Test completed successfully.
520|0 1 13787 1 5|== Test output was:
520|0 1 13787 1 6|{{dce_audit_filter_modify 0x300 0x303 0x304}}
520|0 1 13787 1 7|== Expected output was:
520|0 1 13787 1 8|{{dce_audit_filter_modify 0x100 0x103 0x104}}
520|0 1 13787 1 9|Test Failed.
220|0 1 1 13:24:44|FAIL
410|0 1 1 13:24:44|IC End
400|0 2 1 13:24:44|IC Start
200|0 1 13:24:44|TP Start
520|0 1 13787 1 10|audevents_show_4_P: Check that we can show a list of event cl
asses.
520|0 1 13787 1 11|==== Contents of test case:
520|0 1 13787 1 12|{    audevents show [audevents cat]     }
520|0 1 13787 1 13|Test completed successfully.
520|0 1 13787 1 14|== Test output was:
520|0 1 13787 1 15|{{dce_audit_admin_modify 0x305 0x306 0x307 0x308} {dce_audit_
admin_query 0x309 0x30a} {dce_audit_filter_modify 0x300 0x303 0x304} {dce_audit_
filter_query 0x301 0x302} {dce_dts_mgt_modify 0x200 0x201 0x202 0x203 0x207 0x20
8 0x209 0x20a} {dce_dts_mgt_query 0x20b 0x20c 0x20d 0x20e 0x20f 0x210} {dce_dts_
synch 0x204 0x205 0x206} {dce_dts_time_provider 0x211 0x212} {dce_sec_authent 0x
101 0x102 0x103 0x104 0x10c 0x125} {dce_sec_control 0x105 0x106 0x107 0x108 0x10
9 0x10a 0x10b 0x10c 0x10d 0x10
520|0 1 13787 1 16|== Expected output was:
520|0 1 13787 1 17|{{dce_audit_admin_modify 0x105 0x106 0x107 0x108} {dce_audit_
admin_query 0x109 0x10a} {dce_audit_filter_modify 0x100 0x103 0x104} {dce_audit_
filter_query 0x101 0x102} {dce_dts_mgt_modify 0x200 0x201 0x202 0x203 0x207 0x20
8 0x209 0x20a} {dce_dts_mgt_query 0x20b 0x20c 0x20d 0x20e 0x20f 0x210} {dce_dts_
synch 0x204 0x205 0x206} {dce_dts_time_provider 0x211 0x212} {dce_sec_authent 0x
101 0x102 0x103 0x104 0x10c 0x125} {dce_sec_control 0x105 0x106 0x107 0x108 0x10
9 0x10a 0x10b 0x10c 0x10d 0x10
520|0 1 13787 1 18|Test Failed.
220|0 1 1 13:24:45|FAIL

[09/13/95 public]
Fixed the test.  Part of HP 1.1 Warranty Patch submission.



CR Number                     : 12675
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : server
Short Description             : bad ptr in server help message
Reported Date                 : 10/19/94
Found in Baseline             : 1.1b23
Found Date                    : 10/19/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2
Affected File(s)              : util_help.c
Sensitivity                   : public

[10/19/94 public]
dcecp> server help s   
Unrecognized argument 'zzzz{4{4@{4{5'.
-executing          Operates on dced srvrexec object.
dcecp> 

This only seems to be a problem with server when the operation given as an
argument is a valid but ambiguous string:

dcecp> server help nothing
Error: Unrecognized argument 'nothing'.
dcecp> xatt he c           
Unrecognized argument ''.
dcecp>

[09/13/95 public]
Fixed code so that an ambiguous argument will give the correct message.
Part of HP 1.1 Warranty Patch submission.



CR Number                     : 12667
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : clock
Short Description             : bad order in clock operations
Reported Date                 : 10/19/94
Found in Baseline             : 1.1b22
Found Date                    : 10/19/94
Severity                      : E
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2
Affected File(s)              : commands.c
Sensitivity                   : public

[10/19/94 public]
The clock operations are not in the correct (alphabetical) order:

dcecp> clock help
set                 Set the system clock to the specified time.
show                Returns the current time as a DTS sytle timestamp.
synchronize         Synchronize the local 'dtsd' with DTS servers.
compare             Returns the difference between the local clock and a server.
help                Print summary of command-line options and abort.
operations          Returns the valid operations for command.
dcecp> 

compare should be first.

[09/13/95 public]
Fixed the ordering of the clock operations.  Part of HP 1.1 Warranty
Patch submission.



CR Number                     : 12665
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : audfilter
Short Description             : UHYP: audf create cores
Reported Date                 : 10/19/94
Found in Baseline             : 1.1b22
Found Date                    : 10/19/94
Severity                      : B
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1unintegrated
Affected File(s)              : admin/dcecp/aud_ops.c aud_util.c
Sensitivity                   : public

[10/19/94 public]
I'm freeing data in the wrong place in two routines in aud_util.c

This is blocking functional test work for the audit folks.

[10/19/94 public]
I also found several off-by-one problems in filter type checking
(well, several occurances of the same problem) code. Submitted.



CR Number                     : 12661
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds build
Short Description             : include of cprpc_hcell.h inconsistent
Reported Date                 : 10/19/94
Found in Baseline             : 1.1b21
Found Date                    : 10/19/94
Severity                      : E
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2
Affected File(s)              : cdscp_cellalias.c, Makefile
Sensitivity                   : public

[10/19/94 public]

The file cdscp_cellalias.c includes the file cprpc_hcell.h like this:
   #include <dce/cprpc_hcell.h>

while the file cdscp_clearinghouse.c includes it this way:
   #include <cprcp_hcell.h>

These should be consistent.  Also, we should probably add
cprcp_hcell.h as a dependency on the cds files at the bottom
of the Makefile.

[09/13/95 public]
Fixed the way cprpc_hcell is included.  Added a Makefile dependency
on the file.  Part of HP 1.1 Warranty Patch submission.



CR Number                     : 12660
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cellalias
Short Description             : UHYP:cellalias incorrectly modifies dce_cf.db
Reported Date                 : 10/19/94
Found in Baseline             : 1.1
Found Date                    : 10/19/94
Severity                      : B
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1unintegrated
Affected File(s)              : cellalias.dcp
Sensitivity                   : public

[10/19/94 public]

dcecp> cellalias set /.../alias_name 

Will modify the /opt/dcelocal/dce_cf.db hostdata field 'cellaliases'  
with both the alias and primary cell name. This is in fact incorrect.
Only the new alias, which was the old primary name should be in that 
field.

[10/19/94 public]

Go for it in unintegrated, Kevin.

[10/19/94 public]
fixed and submitted to unintegrated.



CR Number                     : 12639
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : UHYP:typos in .sams file
Reported Date                 : 10/17/94
Found in Baseline             : 1.1b22
Found Date                    : 10/17/94
Severity                      : E
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1unintegrated
Affected File(s)              : dcp.sams
Sensitivity                   : public

[10/17/94 public]
Thanks to rps@apollo.hp.com for this idea:
"spell dcp.sams | human filter" reveals:

Forgein
forgein
*Reener
*UUUD
*accounts's
*andpassword
*annot  # wasn't a problem
aquire
*attribtes
*childpointers
*compnent # only in comments
*compre
*containter
*convertable
*desgined
*elemenet
*exparation
*hexidecimal
indeterminstic
inhereted  # fixed one but not both
*inteface
*intial
missingentries
occured
*passord
*permisions
*preceeding
*preform
*realtive
*recievied
requres
*requst
*seperate
*seperated
*specifing
*sytle
*ther
*timstamp

[10/18/94 public]
Fixed all the stared ones above.  The others weren't fixed since they are
in error messages and might affect functional tests.  To be clear, the
following typos still exist:

Forgein
forgein
aquire
indeterminstic
inhereted
missingentries
occured
requres

[10/18/94 public]
A search of all of the test files in the dcecp functional test suite reveals
no matches for the above 9 words. If other functional tests perchance used
these incorrect messages, I would assume that they would have been caught
by the test writers.

I strongly suggest that these be fixed as well.

[10/20/94 public]
Following John's strong suggestion, we've fixed the others as well.  All
but missingentries were fixed.  missingentries is an attribute name and
should not be changed.  Everything is submitted to unintegrated.



CR Number                     : 12624
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp utc test fails
Reported Date                 : 10/13/94
Found in Baseline             : 1.1b21
Found Date                    : 10/13/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : dcecp
Sensitivity                   : public

[10/13/94 public]

The following error was found in the journal file:

...
520|0 1 17364 1 1|utc_convert_5_P: Verify that we can convert a timestamp into l
ocal time.
520|0 1 17364 1 2|==== Contents of test case:
520|0 1 17364 1 3|{     utc convert 1994-07-01-17:51:56.101-09:00I90.232     }
520|0 1 17364 1 4|Test completed successfully.
520|0 1 17364 1 5|== Test output was:
520|0 1 17364 1 6|1994-07-01-21:51:56.101-05:00I90.232
520|0 1 17364 1 7|== Expected output was:
520|0 1 17364 1 8|1994-07-01-22:51:56.101-04:00I90.232
520|0 1 17364 1 9|Test Failed.
220|0 1 1 16:45:20|FAIL

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12615
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp misc test fails
Reported Date                 : 10/13/94
Found in Baseline             : 1.1b21
Found Date                    : 10/13/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : dcecp
Sensitivity                   : public

[10/13/94 public]

The following error was found in the journal file:

520|0 1 18237 1 1|uuid_compare_5_P: To check that two uuids that are not equal a
re checked properly
520|0 1 18237 1 2|==== Contents of test case:
520|0 1 18237 1 3|{uuid compare [uuid create] [uuid create] }
520|0 1 18237 1 4|Test completed successfully.
520|0 1 18237 1 5|== Test output was:
520|0 1 18237 1 6|1
520|0 1 18237 1 7|== Expected output was:
520|0 1 18237 1 8|0
520|0 1 18237 1 9|Test Failed.
220|0 1 1 10:14:37|FAIL

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12614
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp ktb test fails
Reported Date                 : 10/13/94
Found in Baseline             : 1.1b21
Found Date                    : 10/13/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2
Affected File(s)              : ktb_setup.tcl, ktb_cleanup.tcl
Sensitivity                   : public

[10/13/94 public]

The following errors were found in the journal file:

...
520|0 1 15358 1 1|{Keytab FVT Setup Problem:}
520|0 1 15358 1 2|{Could not acl modify /.:/hosts/agony/config/keytab -io -chang
e any_other:acdepr}
520|0 1 15358 1 3|{couldn't find "/opt/test/tet/tools/tet_setup" to execute}
520|0 1 15358 1 4|{If this ACL is not set, or equivalent priviledges are not pro
vided through}
520|0 1 15358 1 5|{other means, most or all dcecp KEYTAB FVT's will fail}
220|0 1 0 09:25:42|PASS
...
520|0 1 11928 1 1|keytab_remove_11_P: Check to see that we can delete a particul
ar version key.
520|0 1 11928 1 2|{Could not remove KEYTAB key!}
520|0 1 11928 1 3|{Actual Result:}
520|0 1 11928 1 4|{No currently established network identity for which context e
xists}
520|0 1 11928 1 5|Test Command is:
520|0 1 11928 1 6|{keytab remove /.../doyen.test.cell/hosts/agony/config/keytab/
ktb2 -member test_princ2 -version 0}
520|0 1 11928 1 7|{Actual Result:}
520|0 1 11928 1 8|{/.../doyen.test.cell/test_princ1 /.../doyen.test.cell/test_pr
inc2}
520|0 1 11928 1 9|{Expected Result:}
520|0 1 11928 1 10|/.../doyen.test.cell/test_princ1
520|0 1 11928 1 11|Test Failed.
220|0 1 1 09:36:17|FAIL
...
520|0 1 11928 1 12|keytab_remove_12_P: Check to see that we can delete all versi
ons of a key.
520|0 1 11928 1 13|{Could not remove KEYTAB key!}
520|0 1 11928 1 14|{Actual Result:}
520|0 1 11928 1 15|{No currently established network identity for which context
exists}
520|0 1 11928 1 16|Test Command is:
520|0 1 11928 1 17|{keytab remove /.../doyen.test.cell/hosts/agony/config/keytab
/ktb2 -member test_princ2}
520|0 1 11928 1 18|{Actual Result:}
520|0 1 11928 1 19|{/.../doyen.test.cell/test_princ1 /.../doyen.test.cell/test_p
rinc2}
520|0 1 11928 1 20|{Expected Result:}
520|0 1 11928 1 21|/.../doyen.test.cell/test_princ1
520|0 1 11928 1 22|Test Failed.
220|0 1 1 09:37:31|FAIL
520|0 1 11928 1 23|keytab_remove_13_P: Check to see that we can delete a plain t
ype key.
520|0 1 11928 1 24|{Could not remove KEYTAB key!}
520|0 1 11928 1 25|{Actual Result:}
520|0 1 11928 1 26|{No currently established network identity for which context
exists}
520|0 1 11928 1 27|Test Command is:
520|0 1 11928 1 28|{keytab remove /.../doyen.test.cell/hosts/agony/config/keytab
/ktb2 -member test_princ2 -type plain}
520|0 1 11928 1 29|{Actual Result:}
520|0 1 11928 1 30|{/.../doyen.test.cell/test_princ1 /.../doyen.test.cell/test_p
rinc2}
520|0 1 11928 1 31|{Expected Result:}
520|0 1 11928 1 32|/.../doyen.test.cell/test_princ1
520|0 1 11928 1 33|Test Failed.
220|0 1 1 09:39:06|FAIL
410|0 3 1 09:39:07|IC End
400|0 4 1 09:39:09|IC Start
200|0 1 09:39:09|TP Start
520|0 1 11928 1 34|keytab_remove_14_P: Check to see that we can delete a des typ
e key.
520|0 1 11928 1 35|{Could not remove KEYTAB key!}
520|0 1 11928 1 36|{Actual Result:}
520|0 1 11928 1 37|{No currently established network identity for which context
exists}
520|0 1 11928 1 38|Test Command is:
520|0 1 11928 1 39|{keytab remove /.../doyen.test.cell/hosts/agony/config/keytab
/ktb2 -member test_princ2 -type des}
520|0 1 11928 1 40|{Actual Result:}
520|0 1 11928 1 41|{/.../doyen.test.cell/test_princ1 /.../doyen.test.cell/test_p
rinc2 /.../doyen.test.cell/test_princ2}
520|0 1 11928 1 42|{Expected Result:}
520|0 1 11928 1 43|/.../doyen.test.cell/test_princ1
520|0 1 11928 1 44|Test Failed.
220|0 1 1 09:41:12|FAIL


I couldn't find the file tet_setup anywhere in the build tree.

[10/13/94 public]
Looks like missing tet_setup is the cause of all the problems based on the
inability to ACL edit the keytab entries such that the tests can manipulate
them as neccesary.

Do a build;build install_all in SB_BASE/test/tools to get tet_setup in
place.

[10/13/94 public]
tet_setup is in the install tree. The problem is dcetest_config does
not install it as part of the install process. I am going to put tet_setup
in the proper location and rerun the test.

[10/20/94 public]
Reran the tests on BL22 with tet_setup suid in place and ran tests as
a regular user. Same failures occured.

[10/29/04 public]
If the same failures occurred then there is some problem with the login
context.  The tests attempt to login into a principal which is defined
in the tetexec.cfg file as DCP_CLIENT/DCP_CLIENT_PW, make sure these
are properly set to your cell_admin principal/pwd.

Also, is 'tet_setup' owned by root with the setuid bit on?

  chown root tet_setup
  chmod 4777 tet_setup

I'm not sure what to suggest beyond that.  I reran the dcecp ktb tests at 
OSF with lgb.  100% PASS.  I ran logged in as myself (not root) and no 
DCE login context.  As mentioned previously, the easiest way to ensure 
this is to:

   unsetenv KRB5CCNAME.

Do a klist to make sure you get a message similar to:
  
  No DCE identity available: No currently established network identity for
  which context exists (dce / sec)
  
  Kerberos Ticket Information:
  klist: No credentials cache file found (dce / krb) while setting cache
  flags (ticket cache /tmp/krb5cc_10228)

[10/21/94 public]
If there is nothing else to suggest than this problem needs
to be looked into. I do not have a login context when running the test,
I am running as myself not root, tet_setup is suid, DCP_CLIENT=cell_admin,
DCP_CLIENT_PW=-dce-. What else is there? I am going to email you the
journal file.

[09/13/95 public]
Made changes to the setup and cleanup.  Made sure test files
were installed and acl'ed correctly, and the tests run in the
proper environment.  Part of HP 1.1 Warranty Patch submission.



CR Number                     : 12613
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp secval test fails
Reported Date                 : 10/13/94
Found in Baseline             : 1.1b21
Found Date                    : 10/13/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2
Affected File(s)              : secval_setup.tcl, secval_cleanup.tcl, secval_status_P.tcl
Sensitivity                   : public

[10/13/94 public]

The following errors were found in the journal file:

...
520|0 1 13554 1 19|secval_activate_3_N: check that non-privileged users are hand
led correctly.
520|0 1 13554 1 20|==== Contents of test case:
520|0 1 13554 1 21|{         list [catch {secval activate} msg] $msg     }
520|0 1 13554 1 22|Test completed successfully.
520|0 1 13554 1 23|== Test output was:
520|0 1 13554 1 24|{1 {secval service already enabled}}
520|0 1 13554 1 25|== Expected output was:
520|0 1 13554 1 26|{1 {permission not valid for this acl}}
520|0 1 13554 1 27|Test Failed.
220|0 1 1 08:53:09|FAIL
...
520|0 1 7538 1 19|secval_deactivate_3_N: check that unauthenticated users are ha
ndled correctly.
520|0 1 7538 1 20|==== Contents of test case:
520|0 1 7538 1 21|{         list [catch {secval deactivate} msg] $msg     }
520|0 1 7538 1 22|Test completed successfully.
520|0 1 7538 1 23|== Test output was:
520|0 1 7538 1 24|{0 {}}
520|0 1 7538 1 25|== Expected output was:
520|0 1 7538 1 26|{1 {permission not valid for this acl}}
520|0 1 7538 1 27|Test Failed.
220|0 1 1 08:54:20|FAIL
...
520|0 1 19177 1 19|secval_ping_3_N: check that a non login context's user get 0
as the result.
520|0 1 19177 1 20|==== Contents of test case:
520|0 1 19177 1 21|{            list [catch {secval ping} msg] $msg     }
520|0 1 19177 1 22|Test completed successfully.
520|0 1 19177 1 23|== Test output was:
520|0 1 19177 1 24|{0 1}
520|0 1 19177 1 25|== Expected output was:
520|0 1 19177 1 26|{0 0}
520|0 1 19177 1 27|Test Failed.
220|0 1 1 08:56:01|FAIL
...
520|0 1 11159 1 28|secval_status_6_P: check to see that we can check status of s
ecval by tcl binding.
520|0 1 11159 1 29|==== Contents of test case:
520|0 1 11159 1 30|{            list [catch {secval status {$DCP_SR_PROTSEQ $DCP
_SR_IP_ADDR}} msg] $msg     }
520|0 1 11159 1 31|Test completed successfully.
520|0 1 11159 1 32|== Test output was:
520|0 1 11159 1 33|{1 {Bad or wrong arguments}}
520|0 1 11159 1 34|== Expected output was:
520|0 1 11159 1 35|{0 1}
520|0 1 11159 1 36|Test Failed.
220|0 1 1 09:08:23|FAIL

[10/13/94 public]
The first 3 problems are most likely caused by being DCE logged in before
the tests.  Since Th tests should be running as root, this is easily overlooked
as root get sthe self principal by default.  An easy way to clobber this is
to setenv KRB5CCNAME some_garbage. and then run the tests.

Why the status command is failing with TCL binding I don;t know, are the
variables in tetxece.cfg (DCP_SR_IP_ADDR, etc) set properly for your
machine?)

[10/13/94 public]
I have rerun this test but I still get the following error:

10|0 /ts/secval/secval_setup.tcl 14:14:14|TC Start, scenario ref 966-1
15|0 1.10 1|TCM Start
400|0 1 1 14:14:24|IC Start
200|0 1 14:14:24|TP Start
520|0 1 9469 1 1|Command failed: exec tet_setup secval_setup.sh hosts/agony
520|0 1 9469 1 2|Command returned: {No currently established network identity fo
r which context exists}
520|0 1 9469 1 3|Test aborted.
220|0 1 2 14:14:25|UNRESOLVED

The other reported errors also occured.

[10/13/94 public]
Do you have the uid bit set on the tet_setup program? and it also
need to be owned by root. e.g.,

-rwsr-xr-x   1 root     adm        15459 Oct 13 04:00 tet_setup

However the test do NOT need to be run as root.

[10/20/94 public]
I reran the test on BL22 with tet_setup suid and as a regular user.
One failure was detected, which was secval_status_6_P.

DCP_SR_IP_ADDR is set to the ip address of the security server, which
is the machine that is running the test.

[10/20/94 public]
Can you please include your tetexec.cfg and the failed log file here,
much thanks.

[10/21/94 public]
Here is the tetexec.cfg file I am using:

... lines deleted
# Set the maximum number of signals
TET_NSIG=63
TET_SIG_IGN=34

TET_EXEC_IN_PLACE=TRUE

# For extended journal output
VERBOSE=1

DCP_CLIENT=cell_admin
DCP_CLIENT_PW=-dce-
DCP_CELLNAME_ONE=/.../doyen.test.cell
DCP_CELLNAME_TWO=/.../zeugma.test.cell
DCP_HOSTNAME_ONE=agony
DCP_HOSTNAME_TWO=richmond
DCP_ROOT_CH=yale_ch
DCP_INTERCELL_AVAIL=0
DCP_DFS_AVAIL=0

DCP_NOTROOT=notroot
DCP_NOTROOT_PW=-notroot-
DCP_CELLNAME_THREE=$DCP_CELLNAME_ONE
DCP_HOSTNAME_THREE=hosts/$DCP_HOSTNAME_ONE
DCP_SR_ENTRYNAME=/.:/hosts/$DCP_HOSTNAME_ONE/test_server


DCP_SR_PROTSEQ=ncacn_ip_tcp
DCP_SR_IP_ADDR=129.35.68.187
DCP_SR_STR_BINDING=ncacn_ip_tcp:129.35.68.187


#
# dcecp acl command support
#
DCP_ACL_OBJ_MASK1=/.:/hosts/$DCP_HOSTNAME_ONE/dts-entity
DCP_ACL_OBJ_DELEGATION=/.:/hosts/$DCP_HOSTNAME_ONE/dts-entity

DCP_ACL_OBJ_EXTENDED=XXX
EXTENDED_UUID=XXX
EXTENDED_NDR_F1=XXX
EXTENDED_NDR_F2=XXX
EXTENDED_NDR_F3=XXX
EXTENDED_NDR_F4=XXX
EXTENDED_NBR_BYTES=4
EXTENDED_DATA=0a0b0c0d

#
# dcecp log command support
#
DCP_LOG_DCE_DEBUG=0
DCP_LOG_SRVR_ONE=/.:/hosts/$DCP_HOSTNAME_ONE/dts-entity
DCP_LOG_SRVR_TWO=/.:/hosts/$DCP_HOSTNAME_ONE/cds-clerk
DCP_LOG_COMP_ONE=dts
DCP_LOG_COMP_TWO=cds

#
# dcecp registry command support
#
DCP_RGY_SA_REP_NAME_SLAVE1=subsys/dce/sec/yale
DCP_RGY_SA_REP_NAME_MASTER=subsys/dce/sec/master
DCP_RGY_SA_PROTSEQ_MASTER=ncacn_ip_tcp
DCP_RGY_SA_NETADDR_MASTER=129.35.68.187
DCP_RGY_SA_PROTSEQ_SLAVE1=ncacn_ip_tcp
DCP_RGY_SA_NETADDR_SLAVE1=129.35.67.232

#
# dcecp aud command support
#
DCP_AUD_CELLNAME=$DCP_CELLNAME_ONE
DCP_AUD_TRAIL_FILE_1=functional/admin/dcecp/ts/aud/trail1
DCP_AUD_TRAIL_FILE_2=functional/admin/dcecp/ts/aud/trail2
DCP_AUD_TRAIL_OUTFILE=/tmp/trail.out

#
# dcecp rpc command support
#
RPCENTRY1=/.:/rpctest1
RPCENTRY2=/.:/rpctest2
RPCENTRY3=/.:/rpctest3
INTERFACE1={afbcceec-6c33-11cd-b7ca-080009251352 1.0}
INTERFACEV={afbcceec-6c33-11cd-b7ca-080009251352 1.1}
INTERFACE2={006983fe-1e3e-1de2-83b0-0000c08de054 1.1}

# these interfaces in string syntax are temporary for use with "show"
# pending the fix of CR 10328

INTERFACE1S=afbcceec-6c33-11cd-b7ca-080009251352,1.0
INTERFACE2S=006983fe-1e3e-1de2-83b0-0000c08de054,1.1
OBJECT1=ea65d898-6c2b-11cd-b7ca-080009251352
OBJECT2=eed17b08-6c2b-11cd-b7ca-080009251352
BINDING1={ncadg_ip_udp 127.0.0.0}
BINDING2={ncacn_ip_tcp 127.0.0.0}
SECMASTER=/.:/subsys/dce/sec/master

#
# For hostdata and keytab FVT's
#
DCP_HOSTDATA_CELL=$DCP_CELLNAME_ONE
DCP_HOSTDATA_HOST=$DCP_HOSTNAME_ONE
DCP_KEYTAB_CELL=$DCP_CELLNAME_ONE
DCP_KEYTAB_HOST=$DCP_HOSTNAME_ONE

Here is the failed log file:

0|1.10 13:36:22 19941020|User: bmw (200) TCC Start, Command Line: tcc -e functio
nal/admin/dcecp secval 
20|/dcetest/dcelocal/test/tet/functional/admin/dcecp/tetexec.cfg 1|Config Start
30||TET_VERSION=1.10
30||TET_OUTPUT_CAPTURE=False
30||TET_RESCODES_FILE=tet_code
30||TET_EXEC_IN_PLACE=TRUE
30||TET_NSIG=63
30||TET_SIG_IGN=34
30||VERBOSE=1
30||DCP_CLIENT=cell_admin
30||DCP_CLIENT_PW=-dce-
30||DCP_CELLNAME_ONE=/.../doyen.test.cell
30||DCP_CELLNAME_TWO=/.../zeugma.test.cell
30||DCP_HOSTNAME_ONE=agony
30||DCP_HOSTNAME_TWO=richmond
30||DCP_ROOT_CH=yale_ch
30||DCP_INTERCELL_AVAIL=0
30||DCP_DFS_AVAIL=0
30||DCP_NOTROOT=notroot
30||DCP_NOTROOT_PW=-notroot-
30||DCP_CELLNAME_THREE=$DCP_CELLNAME_ONE
30||DCP_HOSTNAME_THREE=hosts/$DCP_HOSTNAME_ONE
30||DCP_SR_ENTRYNAME=/.:/hosts/$DCP_HOSTNAME_ONE/test_server
30||DCP_SR_PROTSEQ=ncacn_ip_tcp
30||DCP_SR_IP_ADDR=129.35.68.187
30||DCP_SR_STR_BINDING=ncacn_ip_tcp:129.35.68.187
30||DCP_ACL_OBJ_MASK1=/.:/hosts/$DCP_HOSTNAME_ONE/dts-entity
30||DCP_ACL_OBJ_DELEGATION=/.:/hosts/$DCP_HOSTNAME_ONE/dts-entity
30||DCP_ACL_OBJ_EXTENDED=XXX
30||EXTENDED_UUID=XXX
30||EXTENDED_NDR_F1=XXX
30||EXTENDED_NDR_F2=XXX
30||EXTENDED_NDR_F3=XXX
30||EXTENDED_NDR_F4=XXX
30||EXTENDED_NBR_BYTES=4
30||EXTENDED_DATA=0a0b0c0d
30||DCP_LOG_DCE_DEBUG=0
30||DCP_LOG_SRVR_ONE=/.:/hosts/$DCP_HOSTNAME_ONE/dts-entity
30||DCP_LOG_SRVR_TWO=/.:/hosts/$DCP_HOSTNAME_ONE/cds-clerk
30||DCP_LOG_COMP_ONE=dts
30||DCP_LOG_COMP_TWO=cds
30||DCP_RGY_SA_REP_NAME_SLAVE1=subsys/dce/sec/yale
30||DCP_RGY_SA_REP_NAME_MASTER=subsys/dce/sec/master
30||DCP_RGY_SA_PROTSEQ_MASTER=ncacn_ip_tcp
30||DCP_RGY_SA_NETADDR_MASTER=129.35.68.187
30||DCP_RGY_SA_PROTSEQ_SLAVE1=ncacn_ip_tcp
30||DCP_RGY_SA_NETADDR_SLAVE1=129.35.67.232
30||DCP_AUD_CELLNAME=$DCP_CELLNAME_ONE
30||DCP_AUD_TRAIL_FILE_1=functional/admin/dcecp/ts/aud/trail1
30||DCP_AUD_TRAIL_FILE_2=functional/admin/dcecp/ts/aud/trail2
30||DCP_AUD_TRAIL_OUTFILE=/tmp/trail.out
30||RPCENTRY1=/.:/rpctest1
30||RPCENTRY2=/.:/rpctest2
30||RPCENTRY3=/.:/rpctest3
30||INTERFACE1={afbcceec-6c33-11cd-b7ca-080009251352 1.0}
30||INTERFACEV={afbcceec-6c33-11cd-b7ca-080009251352 1.1}
30||INTERFACE2={006983fe-1e3e-1de2-83b0-0000c08de054 1.1}
30||INTERFACE1S=afbcceec-6c33-11cd-b7ca-080009251352,1.0
30||INTERFACE2S=006983fe-1e3e-1de2-83b0-0000c08de054,1.1
30||OBJECT1=ea65d898-6c2b-11cd-b7ca-080009251352
30||OBJECT2=eed17b08-6c2b-11cd-b7ca-080009251352
30||BINDING1={ncadg_ip_udp 127.0.0.0}
30||BINDING2={ncacn_ip_tcp 127.0.0.0}
30||SECMASTER=/.:/subsys/dce/sec/master
30||DCP_HOSTDATA_CELL=$DCP_CELLNAME_ONE
30||DCP_HOSTDATA_HOST=$DCP_HOSTNAME_ONE
30||DCP_KEYTAB_CELL=$DCP_CELLNAME_ONE
30||DCP_KEYTAB_HOST=$DCP_HOSTNAME_ONE
40||Config End
70||"Starting secval test suite"
70||"Starting secval setup"
10|0 /ts/secval/secval_setup.tcl 13:36:22|TC Start, scenario ref 966-1
15|0 1.10 1|TCM Start
400|0 1 1 13:36:29|IC Start
200|0 1 13:36:29|TP Start
520|0 1 13751 1 1|Test Setup Passed.
220|0 1 0 13:36:43|PASS
410|0 1 1 13:36:43|IC End
80|0 0 13:36:45|TC End
70||"Finished secval setup"
70||"Starting negative secval tests"
70||"Starting negative secval activate tests"
10|1 /ts/secval/secval_activate_N.tcl 13:36:45|TC Start, scenario ref 970-1
15|0 1.10 4|TCM Start
400|0 1 1 13:36:53|IC Start
200|0 1 13:36:53|TP Start
520|0 1 13812 1 1|secval_activate_1_N: check that extra/invalid options are trap
ped as errors.
520|0 1 13812 1 2|==== Contents of test case:
520|0 1 13812 1 3|{         list [catch {secval activate -foo} msg] $msg     }
520|0 1 13812 1 4|Test completed successfully.
520|0 1 13812 1 5|== Test output was:
520|0 1 13812 1 6|{1 {Unrecognized option '-foo'.}}
520|0 1 13812 1 7|== Expected output was:
520|0 1 13812 1 8|{1 {Unrecognized option '-foo'.}}
520|0 1 13812 1 9|Test Passed.
220|0 1 0 13:36:53|PASS
410|0 1 1 13:36:54|IC End
400|0 2 1 13:36:54|IC Start
200|0 1 13:36:54|TP Start
520|0 1 13812 1 10|secval_activate_2_N: check that a wrong host are returned as 
errors.
520|0 1 13812 1 11|==== Contents of test case:
520|0 1 13812 1 12|{         list [catch {secval activate foo} msg] $msg     }
520|0 1 13812 1 13|Test completed successfully.
520|0 1 13812 1 14|== Test output was:
520|0 1 13812 1 15|{1 {Bad or wrong arguments}}
520|0 1 13812 1 16|== Expected output was:
520|0 1 13812 1 17|{1 {Bad or wrong arguments}}
520|0 1 13812 1 18|Test Passed.
220|0 1 0 13:36:54|PASS
410|0 2 1 13:36:55|IC End
400|0 3 1 13:36:55|IC Start
200|0 1 13:36:55|TP Start
520|0 1 13812 1 19|secval_activate_3_N: check that non-privileged users are hand
led correctly.
520|0 1 13812 1 20|==== Contents of test case:
520|0 1 13812 1 21|{         list [catch {secval activate} msg] $msg     }
520|0 1 13812 1 22|Test completed successfully.
520|0 1 13812 1 23|== Test output was:
520|0 1 13812 1 24|{1 {permission not valid for this acl}}
520|0 1 13812 1 25|== Expected output was:
520|0 1 13812 1 26|{1 {permission not valid for this acl}}
520|0 1 13812 1 27|Test Passed.
220|0 1 0 13:36:56|PASS
410|0 3 1 13:36:56|IC End
400|0 4 1 13:36:56|IC Start
200|0 1 13:36:57|TP Start
520|0 1 13812 1 28|secval_activate_4_N: check activate secval which is already a
ctive returning a error.
520|0 1 13812 1 29|==== Contents of test case:
520|0 1 13812 1 30|{        list [catch {secval activate} msg] $msg     }
520|0 1 13812 1 31|Test completed successfully.
520|0 1 13812 1 32|== Test output was:
520|0 1 13812 1 33|{1 {secval service already enabled}}
520|0 1 13812 1 34|== Expected output was:
520|0 1 13812 1 35|{1 {secval service already enabled}}
520|0 1 13812 1 36|Test Passed.
220|0 1 0 13:37:07|PASS
410|0 4 1 13:37:07|IC End
80|1 0 13:37:08|TC End
70||"Finished negative secval activate tests"
70||"Starting negative secval deactivate tests"
10|2 /ts/secval/secval_deactivate_N.tcl 13:37:08|TC Start, scenario ref 973-1
15|0 1.10 4|TCM Start
400|0 1 1 13:37:17|IC Start
200|0 1 13:37:17|TP Start
520|0 1 13632 1 1|secval_deactivate_1_N: check that extra/invalid options are tr
apped as errors.
520|0 1 13632 1 2|==== Contents of test case:
520|0 1 13632 1 3|{         list [catch {secval deactivate -foo} msg] $msg     }

520|0 1 13632 1 4|Test completed successfully.
520|0 1 13632 1 5|== Test output was:
520|0 1 13632 1 6|{1 {Unrecognized option '-foo'.}}
520|0 1 13632 1 7|== Expected output was:
520|0 1 13632 1 8|{1 {Unrecognized option '-foo'.}}
520|0 1 13632 1 9|Test Passed.
220|0 1 0 13:37:17|PASS
410|0 1 1 13:37:17|IC End
400|0 2 1 13:37:18|IC Start
200|0 1 13:37:18|TP Start
520|0 1 13632 1 10|secval_deactivate_2_N: check that a wrong host are returned a
s invalid arg.
520|0 1 13632 1 11|==== Contents of test case:
520|0 1 13632 1 12|{         list [catch {secval deactivate foo} msg] $msg     }

520|0 1 13632 1 13|Test completed successfully.
520|0 1 13632 1 14|== Test output was:
520|0 1 13632 1 15|{1 {Bad or wrong arguments}}
520|0 1 13632 1 16|== Expected output was:
520|0 1 13632 1 17|{1 {Bad or wrong arguments}}
520|0 1 13632 1 18|Test Passed.
220|0 1 0 13:37:18|PASS
410|0 2 1 13:37:18|IC End
400|0 3 1 13:37:19|IC Start
200|0 1 13:37:19|TP Start
520|0 1 13632 1 19|secval_deactivate_3_N: check that unauthenticated users are h
andled correctly.
520|0 1 13632 1 20|==== Contents of test case:
520|0 1 13632 1 21|{         list [catch {secval deactivate} msg] $msg     }
520|0 1 13632 1 22|Test completed successfully.
520|0 1 13632 1 23|== Test output was:
520|0 1 13632 1 24|{1 {permission not valid for this acl}}
520|0 1 13632 1 25|== Expected output was:
520|0 1 13632 1 26|{1 {permission not valid for this acl}}
520|0 1 13632 1 27|Test Passed.
220|0 1 0 13:37:19|PASS
410|0 3 1 13:37:19|IC End
400|0 4 1 13:37:20|IC Start
200|0 1 13:37:20|TP Start
520|0 1 13632 1 28|secval_deactivate_4_N: check that deactivate secval which is 
not active returning a error.
520|0 1 13632 1 29|==== Contents of test case:
520|0 1 13632 1 30|{        list [catch {secval deactivate} msg] $msg     }
520|0 1 13632 1 31|Test completed successfully.
520|0 1 13632 1 32|== Test output was:
520|0 1 13632 1 33|{1 {secval service is not enabled}}
520|0 1 13632 1 34|== Expected output was:
520|0 1 13632 1 35|{1 {secval service is not enabled}}
520|0 1 13632 1 36|Test Passed.
220|0 1 0 13:37:33|PASS
410|0 4 1 13:37:33|IC End
80|2 0 13:37:35|TC End
70||"Finished negative secval deactivate tests"
70||"Starting negative secval ping tests"
10|3 /ts/secval/secval_ping_N.tcl 13:37:35|TC Start, scenario ref 976-1
15|0 1.10 3|TCM Start
400|0 1 1 13:37:44|IC Start
200|0 1 13:37:44|TP Start
520|0 1 13708 1 1|secval_ping_1_N: check that extra/invalid options are trapped 
as errors.
520|0 1 13708 1 2|==== Contents of test case:
520|0 1 13708 1 3|{         list [catch {secval ping -foo} msg] $msg     }
520|0 1 13708 1 4|Test completed successfully.
520|0 1 13708 1 5|== Test output was:
520|0 1 13708 1 6|{1 {Unrecognized option '-foo'.}}
520|0 1 13708 1 7|== Expected output was:
520|0 1 13708 1 8|{1 {Unrecognized option '-foo'.}}
520|0 1 13708 1 9|Test Passed.
220|0 1 0 13:37:45|PASS
410|0 1 1 13:37:45|IC End
400|0 2 1 13:37:45|IC Start
200|0 1 13:37:45|TP Start
520|0 1 13708 1 10|secval_ping_2_N: check that a wrong host are returned as erro
rs.
520|0 1 13708 1 11|==== Contents of test case:
520|0 1 13708 1 12|{         list [catch {secval ping foo} msg] $msg     }
520|0 1 13708 1 13|Test completed successfully.
520|0 1 13708 1 14|== Test output was:
520|0 1 13708 1 15|{1 {Bad or wrong arguments}}
520|0 1 13708 1 16|== Expected output was:
520|0 1 13708 1 17|{1 {Bad or wrong arguments}}
520|0 1 13708 1 18|Test Passed.
220|0 1 0 13:37:46|PASS
410|0 2 1 13:37:46|IC End
400|0 3 1 13:37:46|IC Start
200|0 1 13:37:46|TP Start
520|0 1 13708 1 19|secval_ping_3_N: check that a non login context's user get 0 
520|0 1 13708 1 20|==== Contents of test case:
520|0 1 13708 1 21|{            list [catch {secval ping} msg] $msg     }
520|0 1 13708 1 22|Test completed successfully.
520|0 1 13708 1 23|== Test output was:
520|0 1 13708 1 24|{0 0}
520|0 1 13708 1 25|== Expected output was:
520|0 1 13708 1 26|{0 0}
520|0 1 13708 1 27|Test Passed.
220|0 1 0 13:37:47|PASS
410|0 3 1 13:37:47|IC End
80|3 0 13:37:48|TC End
70||"Finished negative secval ping tests"
70||"Starting negative secval status tests"
10|4 /ts/secval/secval_status_N.tcl 13:37:48|TC Start, scenario ref 979-1
15|0 1.10 2|TCM Start
400|0 1 1 13:37:56|IC Start
200|0 1 13:37:56|TP Start
520|0 1 10449 1 1|secval_status_1_N: check that extra/invalid options are trappe
d as errors.
520|0 1 10449 1 2|==== Contents of test case:
520|0 1 10449 1 3|{         list [catch {secval status -foo} msg] $msg     }
520|0 1 10449 1 4|Test completed successfully.
520|0 1 10449 1 5|== Test output was:
520|0 1 10449 1 6|{1 {Unrecognized option '-foo'.}}
520|0 1 10449 1 7|== Expected output was:
520|0 1 10449 1 8|{1 {Unrecognized option '-foo'.}}
520|0 1 10449 1 9|Test Passed.
220|0 1 0 13:37:56|PASS
410|0 1 1 13:37:56|IC End
400|0 2 1 13:37:57|IC Start
200|0 1 13:37:57|TP Start
520|0 1 10449 1 10|secval_status_2_N: check that a wrong host are returned as er
520|0 1 10449 1 11|==== Contents of test case:
520|0 1 10449 1 12|{         list [catch {secval status foo} msg] $msg     }
520|0 1 10449 1 13|Test completed successfully.
520|0 1 10449 1 14|== Test output was:
520|0 1 10449 1 15|{1 {Bad or wrong arguments}}
520|0 1 10449 1 16|== Expected output was:
520|0 1 10449 1 17|{1 {Bad or wrong arguments}}
520|0 1 10449 1 18|Test Passed.
220|0 1 0 13:37:57|PASS
410|0 2 1 13:37:57|IC End
80|4 0 13:37:59|TC End
70||"Finished negative secval status tests"
70||"Finished negative secval tests"
70||"Starting positive secval tests"
70||"Starting positive secval activate tests"
10|5 /ts/secval/secval_activate_P.tcl 13:37:59|TC Start, scenario ref 984-1
15|0 1.10 2|TCM Start
400|0 1 1 13:38:06|IC Start
200|0 1 13:38:07|TP Start
520|0 1 10255 1 1|secval_activate_5_P: check to see that we can activate secval.

520|0 1 10255 1 2|==== Contents of test case:
520|0 1 10255 1 3|{             list [catch {secval activate} msg] $msg     }
520|0 1 10255 1 4|Test completed successfully.
520|0 1 10255 1 5|== Test output was:
520|0 1 10255 1 6|{0 {}}
520|0 1 10255 1 7|== Expected output was:
520|0 1 10255 1 8|{0 {}}
520|0 1 10255 1 9|Test Passed.
220|0 1 0 13:38:19|PASS
410|0 1 1 13:38:19|IC End
400|0 2 1 13:38:20|IC Start
200|0 1 13:38:20|TP Start
520|0 1 10255 1 10|secval_activate_6_P: check to see that we can activate secval
 by hostname.
520|0 1 10255 1 11|==== Contents of test case:
520|0 1 10255 1 12|{            list [catch {secval activate $DCP_HOSTNAME_THREE
} msg] $msg     }
520|0 1 10255 1 13|Test completed successfully.
520|0 1 10255 1 14|== Test output was:
520|0 1 10255 1 15|{0 {}}
520|0 1 10255 1 16|== Expected output was:
520|0 1 10255 1 17|{0 {}}
520|0 1 10255 1 18|Test Passed.
220|0 1 0 13:38:33|PASS
410|0 2 1 13:38:34|IC End
80|5 0 13:38:36|TC End
70||"Finished  positive secval activate tests"
70||"Starting positive secval deactivate tests"
10|6 /ts/secval/secval_deactivate_P.tcl 13:38:36|TC Start, scenario ref 987-1
15|0 1.10 2|TCM Start
400|0 1 1 13:38:45|IC Start
200|0 1 13:38:45|TP Start
520|0 1 10317 1 1|secval_deactivate_5_P: check to see that we can deactivate sec
val.
520|0 1 10317 1 2|==== Contents of test case:
520|0 1 10317 1 3|{             list [catch {secval deactivate} msg] $msg     }
520|0 1 10317 1 4|Test completed successfully.
520|0 1 10317 1 5|== Test output was:
520|0 1 10317 1 6|{0 {}}
520|0 1 10317 1 7|== Expected output was:
520|0 1 10317 1 8|{0 {}}
520|0 1 10317 1 9|Test Passed.
220|0 1 0 13:38:57|PASS
410|0 1 1 13:38:57|IC End
400|0 2 1 13:38:57|IC Start
200|0 1 13:38:58|TP Start
520|0 1 10317 1 10|secval_deactivate_6_P: check to see that we can deactivate se
cval by hostname.
520|0 1 10317 1 11|==== Contents of test case:
520|0 1 10317 1 12|{            list [catch {secval deactivate $DCP_HOSTNAME_THR
EE} msg] $msg     }
520|0 1 10317 1 13|Test completed successfully.
520|0 1 10317 1 14|== Test output was:
520|0 1 10317 1 15|{0 {}}
520|0 1 10317 1 16|== Expected output was:
520|0 1 10317 1 17|{0 {}}
520|0 1 10317 1 18|Test Passed.
220|0 1 0 13:39:12|PASS
410|0 2 1 13:39:13|IC End
80|6 0 13:39:15|TC End
70||"Finished  positive secval deactivate tests"
70||"Starting positive secval ping tests"
10|7 /ts/secval/secval_ping_P.tcl 13:39:15|TC Start, scenario ref 990-1
15|0 1.10 2|TCM Start
400|0 1 1 13:39:33|IC Start
200|0 1 13:39:33|TP Start
520|0 1 10379 1 1|secval_ping_4_P: check to see that we can ping secval.
520|0 1 10379 1 2|==== Contents of test case:
520|0 1 10379 1 3|{             list [catch {secval ping} msg] $msg     }
520|0 1 10379 1 4|Test completed successfully.
520|0 1 10379 1 5|== Test output was:
520|0 1 10379 1 6|{0 1}
520|0 1 10379 1 7|== Expected output was:
520|0 1 10379 1 8|{0 1}
520|0 1 10379 1 9|Test Passed.
220|0 1 0 13:39:34|PASS
410|0 1 1 13:39:34|IC End
400|0 2 1 13:39:34|IC Start
200|0 1 13:39:34|TP Start
520|0 1 10379 1 10|secval_ping_5_P: check to see that we can ping secval by host
name.
520|0 1 10379 1 11|==== Contents of test case:
520|0 1 10379 1 12|{            list [catch {secval ping $DCP_HOSTNAME_THREE} ms
g] $msg     }
520|0 1 10379 1 13|Test completed successfully.
520|0 1 10379 1 14|== Test output was:
520|0 1 10379 1 15|{0 1}
520|0 1 10379 1 16|== Expected output was:
520|0 1 10379 1 17|{0 1}
520|0 1 10379 1 18|Test Passed.
220|0 1 0 13:39:35|PASS
410|0 2 1 13:39:35|IC End
80|7 0 13:39:37|TC End
70||"Finished positive secval ping  tests"
70||"Starting positive secval status tests"
10|8 /ts/secval/secval_status_P.tcl 13:39:37|TC Start, scenario ref 993-1
15|0 1.10 5|TCM Start
400|0 1 1 13:39:54|IC Start
200|0 1 13:39:55|TP Start
520|0 1 10441 1 1|secval_status_3_P: check to see that we can check status of se
cval.
520|0 1 10441 1 2|==== Contents of test case:
520|0 1 10441 1 3|{             list [catch {secval status} msg] $msg     }
520|0 1 10441 1 4|Test completed successfully.
520|0 1 10441 1 5|== Test output was:
520|0 1 10441 1 6|{0 1}
520|0 1 10441 1 7|== Expected output was:
520|0 1 10441 1 8|{0 1}
520|0 1 10441 1 9|Test Passed.
220|0 1 0 13:39:55|PASS
410|0 1 1 13:39:55|IC End
400|0 2 1 13:39:56|IC Start
200|0 1 13:39:56|TP Start
520|0 1 10441 1 10|secval_status_4_P: check to see that we can check status of s
ecval by hostname.
520|0 1 10441 1 11|==== Contents of test case:
520|0 1 10441 1 12|{            list [catch {secval status $DCP_HOSTNAME_THREE} 
msg] $msg     }
520|0 1 10441 1 13|Test completed successfully.
520|0 1 10441 1 14|== Test output was:
520|0 1 10441 1 15|{0 1}
520|0 1 10441 1 16|== Expected output was:
520|0 1 10441 1 17|{0 1}
520|0 1 10441 1 18|Test Passed.
220|0 1 0 13:39:56|PASS
410|0 2 1 13:39:56|IC End
400|0 3 1 13:39:57|IC Start
200|0 1 13:39:57|TP Start
520|0 1 10441 1 19|secval_status_5_P: check to see that we can check status of s
ecval by string binding.
520|0 1 10441 1 20|==== Contents of test case:
520|0 1 10441 1 21|{            list [catch {secval status $DCP_SR_PROTSEQ:$DCP_
SR_IP_ADDR} msg] $msg     }
520|0 1 10441 1 22|Test completed successfully.
520|0 1 10441 1 23|== Test output was:
520|0 1 10441 1 24|{0 1}
520|0 1 10441 1 25|== Expected output was:
520|0 1 10441 1 26|{0 1}
520|0 1 10441 1 27|Test Passed.
220|0 1 0 13:39:57|PASS
410|0 3 1 13:39:57|IC End
400|0 4 1 13:39:58|IC Start
200|0 1 13:39:58|TP Start
520|0 1 10441 1 28|secval_status_6_P: check to see that we can check status of s
ecval by tcl binding.
520|0 1 10441 1 29|==== Contents of test case:
520|0 1 10441 1 30|{            list [catch {secval status {$DCP_SR_PROTSEQ $DCP
_SR_IP_ADDR}} msg] $msg     }
520|0 1 10441 1 31|Test completed successfully.
520|0 1 10441 1 32|== Test output was:
520|0 1 10441 1 33|{1 {Bad or wrong arguments}}
520|0 1 10441 1 34|== Expected output was:
520|0 1 10441 1 35|{0 1}
520|0 1 10441 1 36|Test Failed.
220|0 1 1 13:39:58|FAIL
410|0 4 1 13:39:58|IC End
400|0 5 1 13:39:59|IC Start
200|0 1 13:39:59|TP Start
520|0 1 10441 1 37|secval_status_7_P: check to see that secval status return 0 i
f the secval is not up.
520|0 1 10441 1 38|==== Contents of test case:
520|0 1 10441 1 39|{            list [catch {secval status} msg] $msg     }
520|0 1 10441 1 40|Test completed successfully.
520|0 1 10441 1 41|== Test output was:
520|0 1 10441 1 42|{0 0}
520|0 1 10441 1 43|== Expected output was:
520|0 1 10441 1 44|{0 0}
520|0 1 10441 1 45|Test Passed.
220|0 1 0 13:40:00|PASS
410|0 5 1 13:40:00|IC End
80|8 0 13:40:01|TC End
70||"Finished positive secval status tests"
70||"Finished positive secval  tests"
70||"Starting secval cleanup"
10|9 /ts/secval/secval_cleanup.tcl 13:40:01|TC Start, scenario ref 997-1
15|0 1.10 1|TCM Start
400|0 1 1 13:40:09|IC Start
200|0 1 13:40:09|TP Start
520|0 1 13596 1 1|Command failed: exec tet_setup secval_cleanup.sh hosts/agony
520|0 1 13596 1 2|Command returned: {No currently established network identity f
or which context exists}
520|0 1 13596 1 3|Test aborted.
220|0 1 2 13:40:10|UNRESOLVED
410|0 1 1 13:40:10|IC End
80|9 0 13:40:11|TC End
70||"Finished secval cleanup"
70||"Finished secval test suite"
900|13:40:11|TCC End

[10/21/94 public]
I have no idea why the following IC failed. Can you please try it interactively,
i.e. do,

dcecp> list [catch {secval status {ncacn_ip_tcp 129.35.68.187}} msg] $msg

to see if it works (returns "0 1"). (It works for me)

--------
30||DCP_SR_PROTSEQ=ncacn_ip_tcp
30||DCP_SR_IP_ADDR=129.35.68.187

400|0 4 1 13:39:58|IC Start
200|0 1 13:39:58|TP Start
520|0 1 10441 1 28|secval_status_6_P: check to see that we can check status of s
ecval by tcl binding.
520|0 1 10441 1 29|==== Contents of test case:
520|0 1 10441 1 30|{            list [catch {secval status {$DCP_SR_PROTSEQ $DCP
_SR_IP_ADDR}} msg] $msg     }
520|0 1 10441 1 31|Test completed successfully.
520|0 1 10441 1 32|== Test output was:
520|0 1 10441 1 33|{1 {Bad or wrong arguments}}
520|0 1 10441 1 34|== Expected output was:
520|0 1 10441 1 35|{0 1}
520|0 1 10441 1 36|Test Failed.
220|0 1 1 13:39:58|FAIL
410|0 4 1 13:39:58|IC End

[03/16/95 public]

I've opened OT 12821 for the secval_status_6_P problem -- curly brackets
disable $variable substitution.

On a more general note, I've found I get the best results running the
functional/admin/dcecp tests as NON-root.  Nearly all the tests that require
priveleges do a login as $DCP_CLIENT, which I set to cell_admin.  The remaining
tasks that appear to require root priveleges are done via tet_setup,
which I make SUID root.  The only privelege-related problem I have is
the cleanup for secval_status_P.tcl...

[09/13/95 public]
Made changes to setup and cleanup files.  Fix status test.  Part of
HP 1.1 Warranty Patch submission.



CR Number                     : 12612
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp log test fails
Reported Date                 : 10/13/94
Found in Baseline             : 1.1b21
Found Date                    : 10/13/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2
Affected File(s)              : log_list_P.tcl
Sensitivity                   : public

[10/13/94 public]

The following failures were found in the journal file:

...
520|0 1 10902 1 174|log_modify_020_N: Check that an unauthenticated user can not
 modify any
520|0 1 10902 1 175|log_modify_020_N: routing specifications.
520|0 1 10902 1 176|==== Contents of test case:
520|0 1 10902 1 177|{         list [catch {log modify $DCP_LOG_SRVR_ONE -ch FATA
L:BINFILE:/tmp/svc} msg] $msg     }
520|0 1 10902 1 178|Test completed successfully.
520|0 1 10902 1 179|== Test output was:
520|0 1 10902 1 180|{0 {}}
520|0 1 10902 1 181|== Expected output was:
520|0 1 10902 1 182|{1 {Must have write permission for the DTS entity}}
520|0 1 10902 1 183|Test Failed.
220|0 1 1 08:17:40|FAIL
...
520|0 1 10834 1 1|log_list_011_P: Display all components for 1 server, which
520|0 1 10834 1 2|log_list_011_P: is not enclosed in braces.
520|0 1 10834 1 3|==== Contents of test case:
520|0 1 10834 1 4|{ log list $DCP_LOG_SRVR_ONE    }
520|0 1 10834 1 5|Test completed successfully.
520|0 1 10834 1 6|== Test output was:
520|0 1 10834 1 7|{dts rpc cds aud}
520|0 1 10834 1 8|== Expected output was:
520|0 1 10834 1 9|{dts aud rpc cds}
520|0 1 10834 1 10|Test Failed.
220|0 1 1 08:18:12|FAIL
...
520|0 1 10834 1 11|log_list_012_P: Display all components for 1 server, which
520|0 1 10834 1 12|log_list_012_P: is enclosed in braces.
520|0 1 10834 1 13|==== Contents of test case:
520|0 1 10834 1 14|{ log list "$DCP_LOG_SRVR_ONE"         }
520|0 1 10834 1 15|Test completed successfully.
520|0 1 10834 1 16|== Test output was:
520|0 1 10834 1 17|{dts rpc cds aud}
520|0 1 10834 1 18|== Expected output was:
520|0 1 10834 1 19|{dts aud rpc cds}
520|0 1 10834 1 20|Test Failed.
220|0 1 1 08:18:14|FAIL
...
520|0 1 10834 1 91|log_list_024_P: Display all components for 1 server for an
520|0 1 10834 1 92|log_list_024_P: unauthenticated user.
520|0 1 10834 1 93|==== Contents of test case:
520|0 1 10834 1 94|{ log list $DCP_LOG_SRVR_ONE           }
520|0 1 10834 1 95|Test completed successfully.
520|0 1 10834 1 96|== Test output was:
520|0 1 10834 1 97|{dts rpc cds aud}
520|0 1 10834 1 98|== Expected output was:
520|0 1 10834 1 99|{dts aud rpc cds}
520|0 1 10834 1 100|Test Failed.
220|0 1 1 08:18:30|FAIL

[10/13/94 public]

Test log_modify_020_N looks like another authentication test so don't
run the tests as root or have a login context.

For tests: log_list_011_P, log_list_012_P, log_list_024_P, modify the
tests to "lsort" the output.

[10/20/94 public]
I ran the test again, not as the superuser, and log_modify_020_N passed.
The other still failed as expected.

[09/13/95 public]
Sort the output from the log_list tests so the output is in the correct
order.  Part of HP 1.1 Warranty Patch submission.



CR Number                     : 12601
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : registry
Short Description             : Allow registry dump and verify to accept an argument.
Reported Date                 : 10/12/94
Found in Baseline             : 1.1b20
Found Date                    : 10/12/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : src/admin/dcecp/scripts/registry.dcp
Sensitivity                   : public

[10/12/94 public]

Both these commands invoke "registry catalog" to obtain a list of replicas
in the cell.  "registry catalog" accepts a cellname or string binding so
"registry dump" and "registry verify" should do the same.

Currently, the _s(sec) convenience variable can be set to another cell,
server, or string binding.  And these commands will bind properly.

[12/19/95 public]
Fixed ib DCE 1.2.1
Closed



CR Number                     : 12596
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp link func test fails
Reported Date                 : 10/12/94
Found in Baseline             : 1.1b21
Found Date                    : 10/12/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : dcecp
Sensitivity                   : public

[10/12/94 public]

The following error was found in the journal file:

520|0 1 18256 1 10|link_modify_11_P: Check that we are able to modify a list of
attributes on a
520|0 1 18256 1 11|link_modify_11_P: softlink within the cds namespace
520|0 1 18256 1 12|==== Contents of test case:
520|0 1 18256 1 13|{        link modify /.:/linkmd -change {{CDS_LinkTimeout  {e
xpiration 1993-11-11-11:10:30.000} {extension 10-10:10:10}} {CDS_LinkTarget /.:/
subsys}}       attrlist getvalues [link show /.:/linkmd] -type CDS_LinkTimeout
      }
520|0 1 18256 1 14|Test completed successfully.
520|0 1 18256 1 15|== Test output was:
520|0 1 18256 1 16|{{expiration 1993-11-11-05:10:30.000}  {extension +10-10:10:1
0.000I-----}}
520|0 1 18256 1 17|== Expected output was:
520|0 1 18256 1 18|{{expiration 1993-11-11-06:10:30.000}  {extension +10-10:10:1
0.000I-----}}
520|0 1 18256 1 19|Test Failed.
220|0 1 1 14:21:53|FAIL


This appears to be a date problem. My TZ variable is set to CST6CDT.

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12595
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp func clearinghouse test fails
Reported Date                 : 10/12/94
Found in Baseline             : 1.1b21
Found Date                    : 10/12/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2
Affected File(s)              : clearinghouse_disable_P.tcl
Sensitivity                   : public

[10/12/94 public]

The following error were found in the journal file:

...
520|0 1 17991 1 19|clearinghouse_create_3_N: Check that unauthenticated users ar
e handled correctly.
520|0 1 17991 1 20|==== Contents of test case:
520|0 1 17991 1 21|{         list [catch {clearinghouse create /.:/foo_ch} msg]
$msg     }
520|0 1 17991 1 22|Test completed successfully.
520|0 1 17991 1 23|== Test output was:
520|0 1 17991 1 24|{1 {Insufficient rights to perform requested operation}}
520|0 1 17991 1 25|== Expected output was:
520|0 1 17991 1 26|{1 {No currently established network identity for which conte
xt exists}}
520|0 1 17991 1 27|Test Failed.
220|0 1 1 15:42:22|FAIL
...
520|0 1 15758 1 19|clearinghouse_delete_3_N: Check that unauthenticated users ar
e handled correctly.
520|0 1 15758 1 20|==== Contents of test case:
520|0 1 15758 1 21|{         list [catch {clearinghouse delete /.:/foo_ch} msg]
$msg     }
520|0 1 15758 1 22|Test completed successfully.
520|0 1 15758 1 23|== Test output was:
520|0 1 15758 1 24|{1 {Specified clearinghouse does not exist}}
520|0 1 15758 1 25|== Expected output was:
520|0 1 15758 1 26|{1 {No currently established network identity for which conte
xt exists}}
520|0 1 15758 1 27|Test Failed.
220|0 1 1 15:42:35|FAIL
...
520|0 1 18131 1 19|clearinghouse_disable_3_N: Check that unauthenticated users a
re handled correctly.
520|0 1 18131 1 20|==== Contents of test case:
520|0 1 18131 1 21|{         list [catch {clearinghouse disable /.:/foo_ch} msg]
 $msg     }
520|0 1 18131 1 22|Test completed successfully.
520|0 1 18131 1 23|== Test output was:
520|0 1 18131 1 24|{1 {Specified clearinghouse does not exist}}
520|0 1 18131 1 25|== Expected output was:
520|0 1 18131 1 26|{1 {No currently established network identity for which conte
xt exists}}
520|0 1 18131 1 27|Test Failed.
220|0 1 1 15:42:48|FAIL
...
520|0 1 15837 1 1|clearinghouse_disable_4_P: Check that we can successfully disa
ble a cds clearinghouse
520|0 1 15837 1 2|==== Contents of test case:
520|0 1 15837 1 3|{ clearinghouse disable /.:/clrdi_ch           clearinghouse d
elete /.:/clrdi_ch          }
520|0 1 15837 1 4|== Test generated error.
520|0 1 15837 1 5|== Test output was:
520|0 1 15837 1 6|{Specified clearinghouse does not exist}
220|0 1 1 15:46:39|FAIL
...
520|0 1 15837 1 7|clearinghouse_disable_5_P: Check that we can successfully disa
ble a list of cds
520|0 1 15837 1 8|clearinghouse_disable_5_P: clearinghouses
520|0 1 15837 1 9|==== Contents of test case:
520|0 1 15837 1 10|{ clearinghouse disable {/.:/clrdi_ch /.:/clrdi1_ch}
 clearinghouse delete  {/.:/clrdi_ch /.:/clrdi1_ch}          }
520|0 1 15837 1 11|== Test generated error.
520|0 1 15837 1 12|== Test output was:
520|0 1 15837 1 13|{Specified clearinghouse does not exist}
220|0 1 1 15:47:35|FAIL

[10/13/94 public]

All of the negative test case failures are the result of an invalid login 
context being present at the execution of the test.

[10/21/94 public]
I reran the test on BL22 with the following failures:

...
520|0 1 17185 1 1|clearinghouse_disable_4_P: Check that we can successfully disa
ble a cds clearinghouse
520|0 1 17185 1 2|==== Contents of test case:
520|0 1 17185 1 3|{ clearinghouse disable /.:/clrdi_ch           clearinghouse d
elete /.:/clrdi_ch          }
520|0 1 17185 1 4|== Test generated error.
520|0 1 17185 1 5|== Test output was:
520|0 1 17185 1 6|{Specified clearinghouse does not exist}
220|0 1 1 10:03:27|FAIL
410|0 1 1 10:03:27|IC End
400|0 2 1 10:03:27|IC Start
200|0 1 10:03:27|TP Start
520|0 1 17185 1 7|clearinghouse_disable_5_P: Check that we can successfully disa
ble a list of cds
520|0 1 17185 1 8|clearinghouse_disable_5_P: clearinghouses
520|0 1 17185 1 9|==== Contents of test case:
520|0 1 17185 1 10|{ clearinghouse disable {/.:/clrdi_ch /.:/clrdi1_ch}         
 clearinghouse delete  {/.:/clrdi_ch /.:/clrdi1_ch}          }
520|0 1 17185 1 11|== Test generated error.
520|0 1 17185 1 12|== Test output was:
520|0 1 17185 1 13|{Specified clearinghouse does not exist}
220|0 1 1 10:05:22|FAIL

[09/13/95 public]
Use correct and distinct  clearinghouse names in each test.
Part of HP 1.1 Warranty Patch submission.



CR Number                     : 12593
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp account functional test fails
Reported Date                 : 10/12/94
Found in Baseline             : 1.1b21
Found Date                    : 10/12/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2
Affected File(s)              : account_generate_N.tcl
Sensitivity                   : public

[10/12/94 public]

The following errors were found in the journal file:

...
520|0 1 10898 1 19|account_create_3_N: Check that unauthenticated users are hand
led correctly.
520|0 1 10898 1 20|==== Contents of test case:
520|0 1 10898 1 21|{         list [catch {account create kevin -group none -orga
nization none -password mine -mypwd $DCP_CLIENT_PW} msg] $msg     }
520|0 1 10898 1 22|Test completed successfully.
520|0 1 10898 1 23|== Test output was:
520|0 1 10898 1 24|{1 {Registry object not found}}
520|0 1 10898 1 25|== Expected output was:
520|0 1 10898 1 26|{1 {Cant establish authentication to security server}}
520|0 1 10898 1 27|Test Failed.
220|0 1 1 10:10:57|FAIL
...
520|0 1 16961 1 46|account_generate_6_N: Check to see that account cannot be
520|0 1 16961 1 47|account_generate_6_N: generated when password generation is r
equired.
520|0 1 16961 1 48|==== Contents of test case:
520|0 1 16961 1 49|{         list [catch {account create $PRINCIPAL -group none
-org none -password foo -mypwd $DCP_CLIENT_PW} msg] $msg     }
520|0 1 16961 1 50|Test completed successfully.
520|0 1 16961 1 51|== Test output was:
520|0 1 16961 1 52|{1 {Entry not found}}
520|0 1 16961 1 53|== Expected output was:
520|0 1 16961 1 54|{1 {password failed password strength server checking policy}
}
520|0 1 16961 1 55|Test Failed.
220|0 1 1 10:12:38|FAIL
...
520|0 1 17019 1 38|account_create_49_P: Check that we can create an account with
 a list of attributes.
520|0 1 17019 1 39|==== Contents of test case:
520|0 1 17019 1 40|{  account create $PRINCIPAL -attribute $LIST        dcp_attr
list getval [account show $PRINCIPAL] expdate   }
520|0 1 17019 1 41|Test completed successfully.
520|0 1 17019 1 42|== Test output was:
520|0 1 17019 1 43|1999-04-12-19:00:00.000-05:00I-----
520|0 1 17019 1 44|== Expected output was:
520|0 1 17019 1 45|1999-04-12-20:00:00.000-04:00I-----
520|0 1 17019 1 46|Test Failed.
220|0 1 1 10:14:29|FAIL
...
520|0 1 17019 1 56|account_create_51_P: Check that we can create an account with
 a list of attributes.
520|0 1 17019 1 57|==== Contents of test case:
520|0 1 17019 1 58|{  account create $PRINCIPAL -attribute $LIST        dcp_attr
list getval [account show $PRINCIPAL] goodsince         }
520|0 1 17019 1 59|Test completed successfully.
520|0 1 17019 1 60|== Test output was:
520|0 1 17019 1 61|1999-04-12-19:00:00.000-05:00I-----
520|0 1 17019 1 62|== Expected output was:
520|0 1 17019 1 63|1999-04-12-20:00:00.000-04:00I-----
520|0 1 17019 1 64|Test Failed.
220|0 1 1 10:14:39|FAIL
...
520|0 1 17037 1 1|account_generate_7_P: Check to see that account passwords are
generated.
520|0 1 17037 1 2|==== Contents of test case:
520|0 1 17037 1 3|{ if { [catch {account generate $PRINCIPAL} msg] == 0} {
          if {[string length $msg] != 0} {                    account create $PR
INCIPAL -group none -org none  -password $msg -mypwd $DCP_CLIENT_PW
        if {[lsearch [account catalog -simple] $PRINCIPAL] != -1 } {
             list success } else {list fail}                } else {list fail} }
 else {list fail}}
520|0 1 17037 1 4|Test completed successfully.
520|0 1 17037 1 5|== Test output was:
520|0 1 17037 1 6|fail
520|0 1 17037 1 7|== Expected output was:
520|0 1 17037 1 8|success
520|0 1 17037 1 9|Test Failed.
220|0 1 1 10:16:42|FAIL
...
520|0 1 17037 1 10|account_generate_8_P: Check to see that account passwords are
 generated.
520|0 1 17037 1 11|==== Contents of test case:
520|0 1 17037 1 12|{ if { [catch {account generate $PRINCIPAL} msg] == 0} {
           if {[string length $msg] != 0} {                    account create $P
RINCIPAL -group none -org none  -password $msg -mypwd $DCP_CLIENT_PW
         if {[lsearch [account catalog -simple] $PRINCIPAL] != -1 } {
              list success } else {list fail}                } else {list fail}
} else {list fail}}
520|0 1 17037 1 13|Test completed successfully.
520|0 1 17037 1 14|== Test output was:
520|0 1 17037 1 15|fail
520|0 1 17037 1 16|== Expected output was:
520|0 1 17037 1 17|success
520|0 1 17037 1 18|Test Failed.
220|0 1 1 10:16:45|FAIL
...
520|0 1 17037 1 19|account_generate_9_P: Check to see that account passwords are
 generated.
520|0 1 17037 1 20|==== Contents of test case:
520|0 1 17037 1 21|{ principal modify $PRINCIPAL -add {{pwd_val_type 3}  {pwd_mg
mt_binding {{dce  /.:/pwd_strength pktprivacy  secret name} {/.:/pwd_mgmt/pwd_st
rength}}}}           if { [catch {account generate $PRINCIPAL} msg] == 0} {
         if {[string length $msg] != 0} {                 account modify $PRINCI
PAL -password $msg -mypwd $DCP_CLIENT_PW                  if {[lsearch [account
catalog -simple] $PRINCIPAL] != -1 } {                       list success } else
 {list fail}            } else
520|0 1 17037 1 22|Test completed successfully.
520|0 1 17037 1 23|== Test output was:
520|0 1 17037 1 24|fail
520|0 1 17037 1 25|== Expected output was:
520|0 1 17037 1 26|success
520|0 1 17037 1 27|Test Failed.
220|0 1 1 10:16:48|FAIL
...
520|0 1 17037 1 28|account_generate_10_P: Check to see that account passwords ar
e generated.
520|0 1 17037 1 29|==== Contents of test case:
520|0 1 17037 1 30|{ if { [catch {account generate $PRINCIPAL} msg] == 0} {
           if {[string length $msg] != 0} {                    list success
           } else {list fail}            } else {list fail} }
520|0 1 17037 1 31|Test completed successfully.
520|0 1 17037 1 32|== Test output was:
520|0 1 17037 1 33|fail
520|0 1 17037 1 34|== Expected output was:
520|0 1 17037 1 35|success
520|0 1 17037 1 36|Test Failed.
220|0 1 1 10:16:51|FAIL
...
520|0 1 17113 1 37|account_modify__8_P: Check that we can create an account with
 a list of attributes.
520|0 1 17113 1 38|==== Contents of test case:
520|0 1 17113 1 39|{ account modify $PRINCIPAL -expdate 1995-01-01      dcp_attr
list getval [account show $PRINCIPAL] expdate         }
520|0 1 17113 1 40|Test completed successfully.
520|0 1 17113 1 41|== Test output was:
520|0 1 17113 1 42|1994-12-31-18:00:00.000-06:00I-----
520|0 1 17113 1 43|== Expected output was:
520|0 1 17113 1 44|1994-12-31-19:00:00.000-05:00I-----
520|0 1 17113 1 45|Test Failed.
220|0 1 1 10:17:53|FAIL
...
520|0 1 17113 1 55|account_modify_10_P: Check that we can create an account with
 a list of attributes.
520|0 1 17113 1 56|==== Contents of test case:
520|0 1 17113 1 57|{ account modify $PRINCIPAL -goodsince 1995-01-01    dcp_attr
list getval [account show $PRINCIPAL] goodsince          }
520|0 1 17113 1 58|Test completed successfully.
520|0 1 17113 1 59|== Test output was:
520|0 1 17113 1 60|1994-12-31-18:00:00.000-06:00I-----
520|0 1 17113 1 61|== Expected output was:
520|0 1 17113 1 62|1994-12-31-19:00:00.000-05:00I-----
520|0 1 17113 1 63|Test Failed.
220|0 1 1 10:18:12|FAIL

[09/13/95 public]
The tests pass when run in the correct environment.  We did some
minor cleanup in one of the files.  Part of HP 1.1 Warranty Patch
submission.



CR Number                     : 12590
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : rpcprofile test failure
Reported Date                 : 10/12/94
Found in Baseline             : 1.1b21
Found Date                    : 10/12/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : dcecp
Sensitivity                   : public

[10/12/94 public]

The rpcprofile test failed with the following in the journal file:

520|0 1 15760 1 28|rpcprofile_show_4_N: Check that a bad value for -version fail
s.
520|0 1 15760 1 29|==== Contents of test case:
520|0 1 15760 1 30|{         list [catch {rpcprofile show /.:/rpcp_show_4_N -int
erface [list [uuid create] 1.0] -version bad} msg] $msg     }
520|0 1 15760 1 31|Test completed successfully.
520|0 1 15760 1 32|== Test output was:
520|0 1 15760 1 33|{1 {Invalid string UUID}}
520|0 1 15760 1 34|== Expected output was:
520|0 1 15760 1 35|{1 {The value 'bad' is not a valid version identifier.}}
520|0 1 15760 1 36|Test Failed.
220|0 1 1 16:20:42|FAIL

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12585
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cellalias
Short Description             : UHYP: cellalias cr error !reported
Reported Date                 : 10/12/94
Found in Baseline             : 1.1b20
Found Date                    : 10/12/94
Severity                      : C
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1unintegrated
Affected File(s)              : cellalias.dcp
Sensitivity                   : public

[10/12/94 public]

When performing a cellalias create command the cdsalias create command 
fails.

Currently if the cdsalias create command fails there is no indication from 
the cellalias create command.  That is, if the cdsalias create fails the 
principal krbtgt/$alias_name is deleted but the script continues. What is 
additionaly needed is an error indication and the script should terminate 
execution.

[10/13/94 public]

I added an error generation clause to the cdsalias create catch 
segment.



CR Number                     : 12582
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : test case failures using hostname
Reported Date                 : 10/11/94
Found in Baseline             : 1.1b21
Found Date                    : 10/11/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : dcecp
Sensitivity                   : public

[10/11/94 public]

There are several places in the dcecp tests where the hostname is
resolved using [exec hostname]. There are problem with this because
at times a comparison is made with entries in the namespace or
elsewhere that have deleted the domain from the name. An example of
this is in the dts test. Here is the output from the journal file:

520|0 1 12417 1 28|dts_modify_4_N: Check the handling of the -globaltimeout opti
on with invalid data.
520|0 1 12417 1 29|==== Contents of test case:
520|0 1 12417 1 30|{         list [catch {dts modify -globaltimeout foo /.:/host
s/[exec hostname]/dts-entity} msg] $msg     }
520|0 1 12417 1 31|Test completed successfully.
520|0 1 12417 1 32|== Test output was:
520|0 1 12417 1 33|{1 {Entry not found}}
520|0 1 12417 1 34|== Expected output was:
520|0 1 12417 1 35|{1 {Invalid DTS style timestamp.}}
520|0 1 12417 1 36|Test Failed.
220|0 1 1 16:53:51|FAIL

"hostname" may return a value that contains the domain and the domain
is stripped when this entry is made in the namespace.

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12579
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : UHYP:invalid format for return value
Reported Date                 : 10/11/94
Found in Baseline             : 1.1
Found Date                    : 10/11/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1unintegrated
Affected File(s)              : rgy_pgo_account.c
Sensitivity                   : public

[10/11/94 public]

There is an incorrect format for the pwdminlen value. That is when the 
registry wide pwdminlen value is different and more restrictive than the 
organizational policy the command 'org show foo -p' will core. 

The function is attempting to print out a string value instead of an 
integer value.

[10/13/94 public]

Modified the formatting process so that it actually formats for an integer.



CR Number                     : 12574
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : functional tests return UNRESOLVED
Reported Date                 : 10/10/94
Found in Baseline             : 1.1b21
Found Date                    : 10/10/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : dcecp
Sensitivity                   : public

[10/10/94 public]

A few of the dcecp functional tests indicate that the test passed
but it appears that tet_result is never being called.

For example the rpcgroup test has the following in the journal file:

520|0 1 17915 1 4|rpcgroup_add_1_N: Check that no supplied arguments is trapped
as an error.
520|0 1 17915 1 5|==== Contents of test case:
520|0 1 17915 1 6|{         list [catch {rpcgroup add} msg] $msg     }
520|0 1 17915 1 7|Test completed successfully.
520|0 1 17915 1 8|== Test output was:
520|0 1 17915 1 9|{1 {No RPC Group name given}}
520|0 1 17915 1 10|== Expected output was:
520|0 1 17915 1 11|{1 {No RPC Group name given}}
520|0 1 17915 1 12|Test Passed.
220|0 1 2 14:01:40|UNRESOLVED

No the question is did the test pass or fail?

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12559
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : leading/trailing tab in single-token string should print with {}
Reported Date                 : 10/7/94
Found in Baseline             : 1.1b21
Found Date                    : 10/7/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2
Affected File(s)              : rgy_utils.c
Sensitivity                   : public

[10/7/94 public]
If a string has leading or trailing tabs and a single-token, it should be
enclosed in curly braces when printed.  (Found with "hostdata show".  I'm
not sure what cases this should apply to.)
For example, if a file is (tab before xxx):
-------
abc def
	xxx
zzz
-------
"hostdata show" shows"
{hostdata/data
 {abc def \}
	xxx
 zzz}

It does the right thing with leading spaces.  (found while trying
"stupid dced tricks".)

[10/7/94 public]
Just provide information for a possible fix to this Ot,

In rgy_utils.c:print_attrs(): replace the logic of checking for ' ' in 
the printstring and printing surround braces if the check succeeds with
Tcl_AppendElement().

[09/13/95 public]
Fix as above.  Part of HP 1.1 Warranty Patch submission.



CR Number                     : 12555
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cell task object
Short Description             : cell ping help different from code
Reported Date                 : 10/7/94
Found in Baseline             : 1.1b21
Found Date                    : 10/7/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : dcecp
Sensitivity                   : public

[10/7/94 public]

For cell ping:

1. When I use the -replicas and -clients options together, 
   the returned message says DCE clients available 
   regardless of the order.  I think the messages should
   be cummulative. 

2. The help says -clients will list all clients which 
   respond to a ping. It returns only the "DCE clients 
   available" message.  I think the code should follow
   the help text. 

The following shows what's happening now:

	dcecp> cell ping -replicas -clients
	DCE clients available
	dcecp> cell ping -replicas
	DCE servers available
	dcecp> cell ping -clients -replicas
	DCE clients available
	dcecp> cell help ping              
	-clients        List all clients which respond to a ping. 
	-replicas       Ping each security and cds replica in the cell.
	dcecp>

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12550
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cdscache
Short Description             : cdscache create is flaky
Reported Date                 : 10/6/94
Found in Baseline             : 1.1b20
Found Date                    : 10/6/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : dcecp
Sensitivity                   : public

[10/6/94 public]

I was trying to use cdscache create to set defined servers in two
cells I am seting up for inter-cell.  This is what I got: (besides the
fact I didn't know the correct form of a string binding...)

dcecp> cdscache  create booboo -binding {ncacn_ip_tcp 130.105.4.35}         
Error: Invalid RPC protocol sequence
dcecp> cdscache  create booboo -binding {ncacn_ip_tcp 130.105.4.35} -server
Error: Unrecognized option '-server'.
<paused for about 10 minutes>
dcecp> cdscache  create booboo -binding {ncacn_ip_tcp 130.105.4.35}        
Error: Invalid network address
dcecp> cdscache  create booboo -binding {ncacn_ip_tcp 130.105.4.35}
dcecp> cdscache  show booboo -ser                                   
{CH_Name /.../ranger/booboo_ch}
{Tower {ncacn_ip_tcp 130.105.4.35}}
{Tower {ncadg_ip_udp 130.105.4.35}}
dcecp> cdscache  create booboo -binding {ncacn_ip_tcp 130.105.4.35}
Error: Cached Server tag already exists
dcecp> 

It worked, but it took several tries....so I tried to reproduce again
on second machine:  (I waited about a minute between each attempt).


dcecp> cdscache  create shotz -binding {ncacn_ip_tcp 130.105.4.203}
Error: Invalid RPC protocol sequence
dcecp> cdscache  create shotz -binding {ncacn_ip_tcp 130.105.4.203}
Error: Invalid RPC protocol sequence
dcecp> cdscache  create shotz -binding {ncacn_ip_tcp 130.105.4.203}
Error: Invalid RPC protocol sequence
dcecp> cdscache  create shotz -binding {ncacn_ip_tcp 130.105.4.203}
Error: Invalid RPC protocol sequence
dcecp> cdscache  create shotz -binding {ncacn_ip_tcp 130.105.4.203}
Error: Invalid RPC protocol sequence
dcecp> cdscache  create shotz -binding {ncacn_ip_tcp 130.105.4.203} -server
Error: Unrecognized option '-server'.
dcecp> cdscache  create shotz -binding {ncacn_ip_tcp 130.105.4.203}        
Error: Invalid RPC protocol sequence
dcecp> cdscache  create shotz -binding {ncacn_ip_tcp 130.105.4.203}
Error: Invalid RPC protocol sequence
dcecp> cdscache  create shotz -binding {ncacn_ip_tcp 130.105.4.203}
Error: Invalid RPC protocol sequence
dcecp> cdscache  create shotz -binding {ncacn_ip_tcp 130.105.4.203}
Error: Invalid RPC protocol sequence
dcecp> cdscache  create shotz -binding {ncacn_ip_tcp 130.105.4.203}
Error: Invalid RPC protocol sequence
dcecp> cdscache  create shotz -binding {ncacn_ip_tcp 130.105.4.203}
Error: Invalid RPC protocol sequence
dcecp> cdscache  create shotz -binding {ncacn_ip_tcp 130.105.4.203}
Error: Invalid RPC protocol sequence
dcecp> cdscache  create shotz -binding {ncacn_ip_tcp 130.105.4.203}
dcecp> cdscache  show shotz -ser
{CH_Name /.../shotz_cell/shotz_ch}
{Tower {ncacn_ip_tcp 130.105.4.203}}
{Tower {ncadg_ip_udp 130.105.4.203}}
dcecp> 

again it eventualy worked, but it took many tries....

[kevins 10/6/94 public] 
I don't know why the command sequence:
dcecp> cdscache  create booboo -binding {ncacn_ip_tcp 130.105.4.35} -server

paused for 10 minutes. I just executed the same sequence and it worked fine.
That is it responded immediately with:

Error: Unrecognized option '-server'.
dcecp>

The other errors you are seeing though are from the CDS component. If you 
retry and it continues with this error message try a few times with 
cdscp. If you see the same errors this is a CDS bug. BTW the command worked 
fine on my system the first time. I am certain I have seen this problem 
before in CDS though a few months ago. June/July

dcecp> cdscach show booboo -ser
{CH_Name /.../ranger/booboo_ch}
{Tower {ncacn_ip_tcp 130.105.4.35}}
{Tower {ncadg_ip_udp 130.105.4.35}}

[10/7/94 public]
Sorry.  I should ahve been more specific.  The
<paused for about 10 minutes> was me pausing.  I got distracted by
something else before getting back to re-try the command.  This pause
was the only difference between the two command sequences above.

[10/7/94 public]
At one time, CR10837, cdscp had this exact problem. It was fixed by changes
to cds.cdt and cprpc_clerk.c. I and the security folk have  used 'cdscp define cached server' extensively over the last few weeks while working intercell bugs
and I have not seen this. Before the fix for 10837 I and others saw it 
frequently. I'm putting this back in dcecp.

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12549
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : acl does not grok tcl syntax for entry without key
Reported Date                 : 10/6/94
Found in Baseline             : 1.1b20
Found Date                    : 10/6/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : src/admin/dcecp/acl_edit.c
Sensitivity                   : public

[10/6/94 public]
The acl obj does not accept TCL syntax for entries without a key.
This works:
    dcecp> acl mod /.:/subsys/fake/fake -add {user bowe rt}

but this does not:
    dcecp> acl mod /.:/subsys/fake/fake -add {unauthenticated rt}
    Error: Invalid ACL entry.

and this does, with an extra set of braces:
    dcecp> acl mod /.:/subsys/fake/fake -add {{unauthenticated rt}}

The acl_edit syntax (whatever the correct term is), (ie, with colons
instead of spaces), is OK.

(No, I was not saving this for right before things froze.)

[10/6/94 public]

It's a simple fix. I'm building now.  Would you like to see it in
today?

[10/6/94 public]
Adding or changing 1 ACL entry without a key in TCL syntax did
not work.

[10/25/94 public]
closed.



CR Number                     : 12544
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : parseargv
Short Description             : "tmp" is used but not initialized
Reported Date                 : 10/6/94
Found in Baseline             : 1.1b20
Found Date                    : 10/6/94
Severity                      : E
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.2
Affected File(s)              : parseargv.c
Sensitivity                   : public

[10/6/94 public]
For some reason, the HP compiler shows error messages running with
'-O' (or maybe NOT running with '-g') that are not ussually seen.

In dcp_ParseArgv, the variable tmp is being used without being set.
I'm investigating now.

[10/6/94 public]
Deferred, this is formerly used code at the bottom of dcp_ParseArgv that
should get yanked at some point.  To be clear, yank this (near line 272):

		 if (matchPtr != NULL) {
		     Tcl_SetResult(interp, tmp, TCL_DYNAMIC);
		     return TCL_ERROR;
		 }

[09/13/95 public]
Fixed as above.  Part of HP 1.1 Warranty Patch submission.



CR Number                     : 12543
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : tweeks in help messages
Reported Date                 : 10/6/94
Found in Baseline             : 1.1b20
Found Date                    : 10/6/94
Severity                      : E
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : dcp.sams
Sensitivity                   : public

[10/6/94 public]
   The group help string for modify lists 'principal' instead
   of 'group'.  In dcp.sams, it is dcp_t_rgy_modify_group_help.

dcecp> group help
add                 Adds a member to the named group.
catalog             Returns a list of all the names of groups in the registry.
create              Creates a group.
delete              Deletes a group.
list                Returns all of the members of a group.
modify              Change the information about a principal.
remove              Removes a specified member from the named group.
rename              Renames the specified group.
show                Returns the attributes of a group.
help                Print summary of command-line options and abort.
operations          Returns the valid operations for command.
dcecp>


   The verbose help string for xattrschema, principal, org, etc
   look great, but this comes up for group (might have something
   to do with my system... do you see this also?):

dcecp> group help -verbose
This object allows remote manipulation of group
 information stored inthe DCE registry.  Groups are
 collections of principal names. Theargument is a
 list of either relative or fully-qualified groupnames.
 Specify fixed attributes using attribute options or attribute
lists.  Specify any extended attributes using attribute lists.
 Groupoperations connect to a registry that can service
 the request.Specify a particular registry by setting the
 _s(sec) conveniencevariable to be a cell-relative or global
 replica name, or the bindingof the host where the replica
 exists. The completed operation sets_b(sec) to the name of
 the registry contacted.  Access to mostoperations relies
 solely on the ACL of the principal.  To creategroups, you
 need i permission to the parent directory.  To delete
groups, you need D permission to the group as well as
 d permission onthe parent directory.
dcecp>

[10/6/94 public]
submitted.

[10/25/94 public]
closed.



CR Number                     : 12539
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : principal
Short Description             : "status" used but not initialized
Reported Date                 : 10/6/94
Found in Baseline             : 1.1b20
Found Date                    : 10/6/94
Severity                      : C
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : admin/dcecp/rgy.c
Sensitivity                   : public

[10/6/94 public]
The code in principal_create defined the varibale status, and uses it
in an error macro. This variable is never set, and entering this error 
branch will produce a random error. There is no risk to this fix.

Remove the definition of status, and use the appropriate variable 
"result" in the macro.

[10/6/94 public]
Submitted.

[10/25/94 public]
closed.



CR Number                     : 12505
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dir
Short Description             : show output is formatted wrong
Reported Date                 : 10/5/94
Found in Baseline             : 1.1b20
Found Date                    : 10/5/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : admin/dcecp/cdscp_utils.c
Sensitivity                   : public

[10/5/94 public]
If you get really bored....

The show output for dir show is wron when you get a gda timeout.
[...]
{CDS_GDAPointers
 { {Timeout
   {expiration 1994-10-05-15:03:02.104}
   {extension +1-00:00:00.000I0.000}}
[[rousseau 10/6/94 public]
I got bored first.

Submitted.

[10/25/94 public]
closed.



CR Number                     : 12502
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : audfilter
Short Description             : HYP: multi guide logic has holes
Reported Date                 : 10/4/94
Found in Baseline             : 1.1b20
Found Date                    : 10/4/94
Severity                      : C
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : admin/dcecp/aud_util.c
Sensitivity                   : public

[10/4/94 public]
Currently a list of filters of the form {{ec c a} {ec c a}} will 
cause dcp_aud_check_multi_guides to return a false instead of true.
There may be other cases where it can fail.

[10/5/94 public]
The problem was a little more subtle than originally thought. Because the
token 'all' is both a valid condition and action, if the action was non-"all"
and the condition was "all" in the second list of the above example, the code 
made the wrong decision.

The entire process of determining if a supplied list was a guide or list of 
guides has been rewritten. Submission to follow.

[10/5/94 public]
Submitted.

[10/25/94 public]
closed.



CR Number                     : 12500
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : different messages output for similar acl access failures
Reported Date                 : 10/4/94
Found in Baseline             : 1.1b20
Found Date                    : 10/4/94
Severity                      : D
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : dcecp
Sensitivity                   : public

[10/4/94 public]

When testing access to different rgy objects to manipulate ERAs
different messages are received in seemingly same circumstances:
both when insufficient permissions exist on the object:

dcecp> prin modify addattrstome -remove {testattr testval}
Error: unauthorized to perform this operation

dcecp> prin modify addattrstome -remove {testattr testval}
Error: User is not authorized to update record

[10/5/94 public]
The tests have been changed to accept both (hence Sev D).  The problem is
that the messages are pretty random and they probably come back from the
server that way.  Was tempted to cancel but should be looked at by future
generations. 

To reproduce, try the above commands repeatedly when you have insufficient
permissions to perform the modify.

[10/5/94 public]
Or, to reproduce run the eraobj001 test (era.functions has change to
accept either message).

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12492
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : remove of non-existent attr on org core dumps
Reported Date                 : 10/4/94
Found in Baseline             : 1.1b20
Found Date                    : 10/4/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : rgy.c, rgy_pgo_account.c,
                                             rgy_pgo_group.c, rgy_pgo_utils.c
Sensitivity                   : public

[10/4/94 public]

Using the dcecp binary from yesterday's nb.
Since my test is having trouble adding attributes to an organization
due to an ACL mess, it subsequently tries to remove the attribute
that never got added - and core dumps.  Here's a by-hand example
that illustrates it:

as cell admin:
dcecp> xattr show /.../mhl_bl20_cell.osf.org/sec/xattrschema/mytestattr
{aclmgr
 {{principal {{query r} {update rfu} {test r} {delete rDm}}}
  {group {{query r} {update rm} {test rt} {delete rDm}}}
  {organization {{query r} {update rm} {test rt} {delete rDm}}}}}
{annotation {}}
{applydefs no}
{encoding printstring}
{intercell reject}
{multivalued yes}
{reserved no}
{scope {}}
{trigbind {none {}}}
{trigtype none}
{unique no}
{uuid 93bbf64a-decb-11cd-a2f5-0000c0b7df56}

dcecp> acl show /.:/sec/org/testorg
{unauthenticated r-t-----}
{user cell_admin rctDnfmM}
{user testerprin r--D--m-}
{group acct-admin rctDnfmM}
{other_obj r-t-----}
{any_other r-t-----}

dcecp> org show testorg -all
{fullname {}}
{orgid 105}
{uuid 00000069-decb-21cd-a202-0000c0b7df56}
nopolicy

pomerol /> dce_login testerprin testpw
pomerol /> dcecp -c "organization modify testorg -remove mytestattr" 
Segmentation fault (core dumped)

Core was generated by `dcecp'.
Program terminated with signal 11, Segmentation fault.
#0  0xa40036d4 in Authenticat ()
(gdb) where
#0  0xa40036d4 in Authenticat ()
Cannot access memory at address 0xc60f5d44.
(gdb)

[10/4/94 public]

Upgraded to a 0 since this happens when attr does exist.  Initially
made it a p1 'cause I thought it was a negative test case.

pomerol /usr/users/hester DCE> dcecp -c "organization show testorg -all" 
{fullname {}}
{orgid 105}
{uuid 00000069-decb-21cd-a202-0000c0b7df56}
nopolicy
pomerol /usr/users/hester DCE> dcecp -c "organization modify testorg -add {mytestattr myorgval}" 

pomerol /usr/users/hester DCE> dcecp -c "organization show testorg -all" 
{fullname {}}
{orgid 105}
{uuid 00000069-decb-21cd-a202-0000c0b7df56}
{mytestattr myorgval}
nopolicy
pomerol /usr/users/hester DCE> dcecp -c "organization modify testorg -remove mytestattr"
Segmentation fault (core dumped)

[10/4/94 public]
Are you sure that you are using the dcecp from last nights NB? The /bin/dcecp
on pomerol points to /opt/dcelocal/bin/dcecp which is a 9/29 version. The
latest dcecp that you should have grabbed from yesterdays NB does not exhibit
the core dump (it actually removes the era to boot!). Try using 
/users/rousseau/dcecp.at386 . If this version works for you, please cancel 
this CR.

[10/4/94 public]
You're right.  I had copied over my dcecp to save the old one but never copied
in the new one.  Using the post-bl20 version doesn't give the core dump.
Cancelling.

[10/5/94 public]
While playing around in the code trying to figure this one out, we
found that the functions which call check_era_info(), upon failure
of that call, clean up the 'out_attrs' and 'del_attrs' structures.
The calling functions should not be doing this.  The check_era_info()
function, when it fails, either has not allocated anything into those
structures, or if it had, cleans them up itself.  Having the calling
function call the FREE_ATTR_PTRS macro is creating the case where
stuff is being free'd that was never allocated.

Also, in the case where a list of attributes are being removed from
an object (remove by type), and none of them exist on the object,
the sec_attr_t 'attr_value' field is not being correctly set to NULL.
This has the effect, again, of causing the same core dump as above,
where something is being free'd because the value was never set to
NULL.

We have fixes for this ready.

[10/5/94 public]
Submitted.

[10/25/94 public]
closed.



CR Number                     : 12480
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : acl
Short Description             : Intercell tests creating directory in wrong cell.
Reported Date                 : 10/3/94
Found in Baseline             : 1.1b20
Found Date                    : 10/3/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b21
Affected File(s)              : src/test/functional/admin/dcecp/ts/acl/acl_modify_P.tcl,src/test/functional/admin/dcecp/ts/acl/acl_replace_P.tcl
Sensitivity                   : public

[10/3/94 public]

acl_modify_134_P
acl_replace_025_P
acl_replace_029_P
acl_replace_032_P
acl_replace_034_P
acl_replace_036_P
acl_replace_038_P
acl_replace_040_P
acl_replace_042_P

[10/25/94 public]
closed.



CR Number                     : 12479
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : log
Short Description             : HYP: Due to CR12457, change test comparison.
Reported Date                 : 10/3/94
Found in Baseline             : 1.1b20
Found Date                    : 10/3/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b21
Affected File(s)              : src/test/functional/admin/dcecp/ts/log/log_list_P.tcl, src/test/functional/admin/dcecp/ts/log/log_modify_P.tcl
Sensitivity                   : public

[10/3/94 public]

Change tests:
log_modify_049_P 
log_modify_050_P
log_modify_051_P
log_modify_052_P 
log_modify_053_P
log_modify_054_P

[10/5/94 public]

Here are the results for dcecp log FVT:

Test Name                              PASS  FAIL UNRES UNINI UNSUP   Unk
=========================================================================
/ts/log/log_list_N.tcl                   10     0     0     0     0     0
/ts/log/log_show_N.tcl                    7     0     0     1     0     0
/ts/log/log_modify_N.tcl                 19     0     0     1     0     0
/ts/log/log_list_P.tcl                   14     0     0     0     0     0
/ts/log/log_show_P.tcl                   14     0     0     0     0     0
/ts/log/log_modify_P.tcl                 72     0     0     0     0     0
=========================================================================
Totals                                  136     0     0     2     0     0

[10/25/94 public]
closed.



CR Number                     : 12478
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 12451
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : ping
Short Description             : HYP:ping should return fewer errors
Reported Date                 : 10/3/94
Found in Baseline             : 1.1b20
Found Date                    : 10/3/94
Severity                      : B
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : dhd_server.c
Sensitivity                   : public

[10/3/94 public]
The server ping command is spec'ed to return a 1 if the server is listening
and a 0 if not.  A list of servers can be given in the arg and the command
returns a list of 0's and 1's.

There are cases where an error can be generated (i.e., the C code returns
Tcl error, the effect on the user is that the command is aborted and an
error returne, that is catchable with "catch").  E.g. what if you enter an
invalid string binding.

The rule is this, if you enter enough valid info to find a port, the ping
code should ignore all other errors and return only a 0 or 1.  If not
enough info is entered, an error should be generated.

[10/3/94 public]
Rationale for a P0:
 * The code should do this and doesn't
 * The fix is easy, check the status code returned in a couple of places
   and generate an error on only a few.
 * It's visible to the user and should be a simple binary answer: yes it's
   up, no it's down.
 * Rick F. has system tests dependent on some of this functionality though
   he might still want to wrap his calls in a catch, it depends how he has
   it structured.
 * Once the fix is done, it's easily testable.

[10/3/94 public]
Howard convinced me this is hypercritical.

[10/4/94 public]
Treat all runtime exceptional errors as server unreachable and
Submitted.

[10/25/94 public]
closed.



CR Number                     : 12468
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dhd
Short Description             : Hostdata failed to parsed binary data right
Reported Date                 : 10/3/94
Found in Baseline             : 1.1
Found Date                    : 10/3/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : dhd_hostdata.c dhd_util.c
Sensitivity                   : public

[10/3/94 public]
The binary data should be inside of braces "{}" to have it parsed right.

[10/3/94 public]
Submitted.

[10/25/94 public]
closed.



CR Number                     : 12464
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : registry connect gives 'Invalid Password' failure.
Reported Date                 : 10/3/94
Found in Baseline             : 1.b21
Found Date                    : 10/3/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : rgy_utils.c rgy_sa_tclif.c
Sensitivity                   : public

[10/3/94 public]
I was doing a registry connect when Julie tried to login over that
line (sorry, poor interperson communication). rgy conn cored. Now
rgy connect cores every time. I will try to delete any account that
were created and retry.

You are 'cell_admin' logged into '/.../blue.cell.osf.org'. 
dcecp> sconnect /.../dcecp.cell.osf.org dcecp

Program received signal 11, Segmentation fault
0xa435b683 in sec_login_pvt_check_handle (774778415, 3, -1073760836)
(gdb) where
#0  0xa435b683 in sec_login_pvt_check_handle (774778415, 3, -1073760836)
#1  0xa4354ad1 in sec_login_purge_context (6778984, -1073760836)
#2  0x41ed7b in dcp_rgy_sa_connect (clientData=0x0, interp=0x56c130, argc=2, 
    argv=0x64dfb0) at /project/dce/build/dce1.1/src/admin/dcecp/rgy_sa_tclif.c:571
#3  0x402cfc in dcp_registry (clientData=0x0, interp=0x56c130, argc=16, argv=0x64dfb0)
    at /project/dce/build/dce1.1/src/admin/dcecp/commands.c:1514
#4  0x49fdb1 in Tcl_Eval (5685552, 5683752)
#5  0x4b6e03 in InterpProc (6509528, 5685552, 0, -1073748304)
#6  0x49fdb1 in Tcl_Eval (5685552, -1073745372)
#7  0x4b2333 in Tcl_RecordAndEval (5685552, -1073745372, 0)
#8  0x4007eb in main (argc=-1073748600, argv=0xbffff31c)
    at /project/dce/build/dce1.1/src/admin/dcecp/main.c:506

[10/3/94 public]
The remote side account was created, the local account (and principal)
were not created. Deleteing the created pricipal and account from the
remote machine made the problem go away.

[10/5/94 public]

Several things here. 

A call to sec_login_purge_context was not being passed a pointer to the
login context. This was happening in the negative case. That problem has
been solved. 

However, the registry connect was not handling the negative case well 
at all. If a connect had already occured an one principal/account
portion of that connect had been deleted the connect command was not
recreating the deleted principal/account and updating the existing
principal/account password. That has been corrected. Also if two 
registry connect commands are issued sequentially both account
passwords are being updated. 

Problems still exist though. If a connect has occured and both
principal/accounts have been deleted an error is returned if a new
connect is attempted. The error is 'Invalid Password'. This error is
coming from sec_login_validate_context. Then neither registry connect or
rgy_edit cell commands work. This problem can be alleviated by
performing a 'secval deactivate; secval activate' within dcecp command
on both cells.

This same situation occurs if only one principal/account has been
deleted and a new connect command is issued. The error can be alleviated
in the same mannor but when the connect has completed a login still
fails from one cell to another. That is:

dcecp> login /.../<foreign_cell_name>/<principal_name> -pass <password>
Error: Invalid Password

So there is still a problem with the way things are happening. I think
this second situation is that the krbtgt/<cell_name> accounts have 
different version passwords or different passwords. The work around is
to completely recreate the connection.

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12463
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : registry site not consistent
Reported Date                 : 10/3/94
Found in Baseline             : 1.1
Found Date                    : 10/3/94
Severity                      : B
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : rgy_utils.c
Sensitivity                   : public

[10/3/94 public]

If a registry command is executed with no registry name as an argument 
the site may not be consistent from command to command. This is because
the registry binding process is more stringent than the pgo and account
process. This is a simple fix.

[10/3/94 public]
Submitted.

[10/25/94 public]
closed.



CR Number                     : 12462
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : registry
Short Description             : fix spelling in msg
Reported Date                 : 10/3/94
Found in Baseline             : 1.1b20
Found Date                    : 10/3/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b21
Affected File(s)              : dcp.sams
Sensitivity                   : public

[10/3/94 public]


dcecp> regi connect /.../dcecp.cell.osf.org -forg none -fgroup none -org none  -group none -mypwd dcecp
Error: The forgein users password must be supplied.

[10/3/94 public]
fixed.

[10/3/94 public]
A note after the fact to denote this bug was approved as hypercritical.

[10/25/94 public]
closed.



CR Number                     : 12461
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : aud
Short Description             : core dump using _s(aud)
Reported Date                 : 10/2/94
Found in Baseline             : 1.1b20
Found Date                    : 10/2/94
Severity                      : B
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : admin/dcecp/aud_util.c
Sensitivity                   : public

[10/2/94 public]
Setting _s(aud) to point to a server and then calling an audit command 
without a command line argument causes a core dump. Remove the extra free
to cure this problem.

[10/2/94 public]
Submitted.

[10/25/94 public]
closed.



CR Number                     : 12460
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : audevents
Short Description             : cmds do not need to bind to server
Reported Date                 : 9/30/94
Found in Baseline             : 1.1b20
Found Date                    : 9/30/94
Severity                      : D
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : admin/dcecp/aud_ops.c
Sensitivity                   : public

[9/30/94 public]
audevents show and audevents cat do not need to bind to the audit daemon.
They only look at the files on the local system.

[10/3/94 public]
Remove aud_bind_to_server() calls. Add in the ec and svc initialization
that is done in aud_bind_to_server().

[10/25/94 public]
closed.



CR Number                     : 12459
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : tests
Short Description             : Various test cleanup
Reported Date                 : 9/30/94
Found in Baseline             : 1.1b19
Found Date                    : 9/30/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : many in src/test/functional
Sensitivity                   : public

[9/30/94 public]
The following tests (and datafiles for tests) need to be updated.
Acl and log tests are updated to generate string bindings on the fly.
test_common.tcl has the new routines for the acl and log test string
binding generation. tetexec.cfg has the acl and log string binding 
variables ripped out.

The aud* tests were changed to support new event classes and handle
new functionality in the audit daemon.

The dts test was changed to work around CR 'cuz they were broke.

./tetexec.cfg
./ts/acl/acl_modify_N.tcl
./ts/acl/acl_replace_P.tcl
./ts/acl/acl_check_N.tcl
./ts/acl/acl_modify_P.tcl
./ts/acl/acl_show_N.tcl
./ts/acl/acl_check_P.tcl
./ts/acl/acl_permissions_N.tcl
./ts/acl/acl_show_P.tcl
./ts/acl/acl_delete_N.tcl
./ts/acl/acl_permissions_P.tcl
./ts/acl/acl_delete_P.tcl
./ts/acl/acl_replace_N.tcl
./ts/dts/dts_modify_N.tcl
./ts/aud/aud_modify_P.tcl
./ts/aud/aud_disable_P.tcl
./ts/aud/audfilter_modify_P.tcl
./ts/aud/audevents_show_P.tcl
./ts/aud/AT386/trail1.md_index
./ts/aud/AT386/trail1
./ts/aud/AT386/trail2
./ts/aud/AT386/trail2.md_index
./ts/aud/audfilter_show_P.tcl
./ts/log/log_list_P.tcl
./ts/log/log_modify_P.tcl
./ts/log/log_show_P.tcl
./ts/log/log_list_N.tcl
./ts/log/log_modify_N.tcl
./ts/log/log_show_N.tcl
./lib/test_common.tcl

[10/3/94 public]
Submitted.

[10/25/94 public]
closed.



CR Number                     : 12456
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : account
Short Description             : help for -mypwd wrong
Reported Date                 : 9/30/94
Found in Baseline             : 1.1b20
Found Date                    : 9/30/94
Severity                      : E
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : admin/dcecp/rgy_pgo_account.c
Sensitivity                   : public

[9/30/94 public]
The help message for the -mypwd option is the same as the -password option
for account modify and create.  They should not be.

[9/30/94 public]
submitted.

[10/6/94 public]
closed.



CR Number                     : 12454
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : task scripts
Short Description             : user task script does not handle 
no verb error case
Reported Date                 : 9/30/94
Found in Baseline             : 1.1
Found Date                    : 9/30/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : user.dcp
Sensitivity                   : public

[9/30/94 public]

dcecp> user 
Error: can't read "function_call": no such variable

[9/30/94 public]

Works now...

dcecp> user
Error: "user" object requires a verb to form a command.

[10/6/94 public]
closed.



CR Number                     : 12447
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : sec
Short Description             : HYP: set _b(sec) to fullname
Reported Date                 : 9/30/94
Found in Baseline             : 1.1b20
Found Date                    : 9/30/94
Severity                      : C
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : rgy.h,rgy.c,rgy_sa_replist.h,rgy_sa_replist.c
Sensitivity                   : public

[9/30/94 public]
Currently _b(sec) is set to the return of sec_rgy_site_get() which just
uses the name that was passed to the routine that created the handle.  If
this name was just a cellname then _b(sec) is set to a cellname.  It should
be set to the fully-qualified name of the replica.  It can be done,
sec_admin does it (so the code is probably already in dcecp :-)
Something like sec_rgy_rep_admin_info() seems likely...

[10/5/94 public]
We can reproduce this defect only when an intercell configuration
was established with entries in the pe_site file as opposed to
establishing the intercell configuration using DNS and gdad.

dcecp> set _s(sec) {ncacn_ip_tcp 130.105.5.16}
ncacn_ip_tcp 130.105.5.16
dcecp> prin cat /.../citron
... blah
dcecp> set _b(sec)
/.../citron

As a result, sec_rgy_site_get() only returns a fully-qualified
name of a replica if the intercell configuration was established
using DNS and gdad. However, sec_rgy_site_get() returns what ever
you passed to it (for example, just a cell name.) if only using 
pe_site file entries.

Also note that if a user sets _s(sec) to a string binding, _b(sec)
will be set to that string binding if no argument was used in a 
registry-related dcecp command.

[10/5/94 public]
Maryanne defined as hypercritical.

[10/25/94 public]
closed.



CR Number                     : 12444
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : host
Short Description             : "host show" doesn't work with fully-qualified host name
Reported Date                 : 9/30/94
Found in Baseline             : 1.1b20
Found Date                    : 9/30/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : host.dcp
Sensitivity                   : public

[9/30/94 public]

'host show' expects a relative DCE hostname, i.e., "hosts/<host>", and
doesn't behave correctly if given a fully-qualified name
(/.:/hosts/<host>). This is because when I originally implemented it,
"server catalog" mistakenly failed with fully-qualified names. This
has been fixed, but I never did the work to make the host script
distinguish.

By sheer good luck, "host start" and "host stop" already work with
either relative or fully-qualified names.

[9/30/94 public]
Submitted.

[10/6/94 public]
closed.



CR Number                     : 12442
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : sc/sx
Short Description             : restarting failed servers doesn't
Reported Date                 : 9/30/94
Found in Baseline             : 1.1b20
Found Date                    : 9/30/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : dhd_util.c
Sensitivity                   : public

[9/30/94 public]

Restarting failed servers doesn't work because the "id" of hte srvrexec
object is now the instance uuid.  Added a "sc_uuid' to the srvrexec
"running_data" field.  Updated dced; Ping needs to change dcecp code
to display this sc_uuid.

[09/30/94 public]
The dced work is done, so this is now a dcecp defect.  Ping needs to
change server show operation so that it displays the sc_uuid in
the running_data field, not the id of the running_data field.

[10/3/94 public]
Submitted dcecp parted.

[10/25/94 public]
closed.



CR Number                     : 12441
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : resolve
Short Description             : no help for resolve
Reported Date                 : 9/30/94
Found in Baseline             : 1.1b20
Found Date                    : 9/30/94
Severity                      : C
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : admin/dcecp/commands.c, util_help.h
Sensitivity                   : public

[9/30/94 public]
The check for help in dcp_resolve is wrong.

dcecp> resolve help
Error: The 'resolve' command requires a binding as an argument.

The macro won't work in this case.

[10/3/94 public]
Created a new macro for this case. DCP_CHECK_MISC_HELP(). Also modified the
'login' command to call this macro.

[10/25/94 public]
closed.



CR Number                     : 12435
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : test
Short Description             : misc commands fail various tests.
Reported Date                 : 9/30/94
Found in Baseline             : 1.1
Found Date                    : 9/30/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : uuid_compare_N.tcl login_P.tcl
Sensitivity                   : public

[9/30/94 public]

The uuid_compare_N.tcl test incorrectly tests invalid uuid message.

The login_P.tcl has a test that is not implemented nor should it be.

[kevins 9/30/94 public] 

made the fix..

[10/6/94 public]
closed.



CR Number                     : 12434
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : A couple more mallocs to change
Reported Date                 : 9/30/94
Found in Baseline             : 1.1b20
Found Date                    : 9/30/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : rgy_utils.c, schema_ops.c
Sensitivity                   : public

[9/30/94 public]

There are a couple more malloc's to change in the rgy
and schema code.

[9/30/94 public]
Submitted.

[10/6/94 public]
closed.



CR Number                     : 12433
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : statu of show_era() not checked
Reported Date                 : 9/30/94
Found in Baseline             : 1.1b18
Found Date                    : 9/30/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : rgy.c rgy_pgo_group.c rgy_pgo_account.c
Sensitivity                   : public

[9/30/94 public]

The status of the show_era() function is not checked by the
three functions (principal_show, group_show, and org_show)
that use it.  This can cause an error message to appear, but
to still have a status code of success.  I have a fix and
will put in a submit request shortly.

[9/30/94 public]
Submitted.

[10/6/94 public]
closed.



CR Number                     : 12429
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : login
Short Description             : missing a \n in error msg
Reported Date                 : 9/30/94
Found in Baseline             : 1.1b20
Found Date                    : 9/30/94
Severity                      : E
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : admin/dcecp/main.c
Sensitivity                   : public

[9/30/94 public]
Need a newline after the error message produced if you were dce_login'ed
and you context expired.  (At least I think that's what caused the error).

  absolut admin/dcecp$ ./dcecp
  Error in getting initial login context.dcecp>

[9/24/94 public]
Submitted.

[10/6/94 public]
closed.



CR Number                     : 12425
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : acl
Short Description             : cores after acl check -type bozo
Reported Date                 : 9/29/94
Found in Baseline             : 1.1b20
Found Date                    : 9/29/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : src/admin/dcecp/acl_edit.c
Sensitivity                   : public

[9/29/94 public]
Run these two commands and dcecp will core dump on the second command.
It's probably something not getting cleaned up after you give a bogus
manager type, such as "bozo"

  acl check /.:/hosts -type bozo
  acl check "3442e97a-db84-11cd-b811-080009251352@ncadg_ip_udp:130.105.5.93 principal/foobar" -entry

[9/30/94 public]
Freeing ACL manager table properly, but not setting the pointer
back to NULL.

[10/6/94 public]
closed.



CR Number                     : 12424
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : keytab
Short Description             : des value should be in tcl syntax
Reported Date                 : 9/29/94
Found in Baseline             : 1.1b19
Found Date                    : 9/29/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : dhd_util.c
Sensitivity                   : public

[9/29/94 public]

Des key value should be inputed/outputed as tcl syntax 
{xx xx xx xx xx xx xx xx}

[9/29/94 public]
submitted.

[10/6/94 public]
closed.



CR Number                     : 12423
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : rpccp
Short Description             : warning in rpccp.c
Reported Date                 : 9/29/94
Found in Baseline             : 1.1b20
Found Date                    : 9/29/94
Severity                      : E
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : src/admin/dcecp/rpccp.c
Sensitivity                   : public

[9/29/94 public]
c89 -c    -D_SHARED_LIBRARIES   -g  +w1 -D_DCECP_TEST -D__hppa -Dhp9000s800 -Dhp9000s700 -D__hp9000s800 -D__hp9000s700 -DHPUX -D__hpux -Dunix +DA1.0 -D_HPUX_SOURCE    -I. -I/sandbox/melman/sb1/src/admin/dcecp -I/project/dce/build/dce1.1/src/admin/dcecp   -I/sandbox/melman/sb1/export/hp800/usr/include -I/project/dce/build/dce1.1/export/hp800/usr/include    /project/dce/build/dce1.1/src/admin/dcecp/rpccp.c
cc: "/project/dce/build/dce1.1/src/admin/dcecp/rpccp.c", line 3037: warning 538: While loop condition is always non-zero.

[10/6/94 public]
closed.



CR Number                     : 12422
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : resolve
Short Description             : add -object option to resolve
Reported Date                 : 9/29/94
Found in Baseline             : 1.1b20
Found Date                    : 9/29/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : src/admin/dcecp/commands.c
Sensitivity                   : public

[9/29/94 public]
Add an optional -object option to resolve command to limit matches to those
matching the object.  The argument is one and only one (not a list of)
UUID.

Also the resolve_binding() routine mentioned in rpccp.c and rpccp.h is old
and useless and needs to be removed.

[9/29/94 public]
added option to commands.c and removed old dead useless code from rpccp.{ch}

[10/6/94 public]
closed.



CR Number                     : 12421
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : MAX_ATTR should be defined dynamicly
Reported Date                 : 9/29/94
Found in Baseline             : 1.1
Found Date                    : 9/29/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : dcecp
Sensitivity                   : public

[9/29/94 public]

The MAX_ATTR value, currently defined at 64, should be generated 
dynamicly. This limits the number of eras that can be modified or 
added to an object. Anne Hopkins has some ideas her mail is included 
below.

How to determine the number of sec_attr_t structures that will be 
needed when calling sec_rgy_attr_lookup_by_id().
    
This isn't a basic question.  This is a hard question.
After thinking about it for a while, I came up with
the following suggestions; although these are not, by any
means, the only way of accomplishing what you want.

>         the best way to malloc space on
>      the fly for a large sec_attr_t structure.
>   
>         The problem is this...  To call sec_rgy_attr_lookup_by_id(),
>      I have pre-defined the output sec_attr_t structure to
>      be
>         sec_attr_t tmp_attrs[MAX_ATTR];
>   
>         This means that each call to lookup_by_id returns a
>      structure with MAX_ATTR attributes in it.  What I want
>      to do is copy that tmp_attrs information into a more
>      permanent structure, thus the next time the lookup comes
>      around, if there are more attributes, tmp_attrs will be
>      filled up again with the new data.  This data can then
>      be appended to the permanent structure.  When no_more_entries
>      is set, then we are done, and have a large, permanent structure
>      filled with the attributes.
>   
>         What I want to do at the beginning of the function is define
>            sec_attr_t  tmp_attrs[MAX_ATTR];
>            sec_attr_t  permanent_attrs[];
>   
>      and then each time tmp_attrs gets filled, copy the attributes from
>      one to the other, then check for more tmp_attrs...
>   
>            sec_attr_util_alloc_copy(&tmp_attrs[i], &permanent_attrs[count++], &st);
>   
>      does a good job allocating the space I need internally for each attribute,

Define permanent_attrs as a pointer to a sec_attr_t.  This is
functionally equivalent to an array of sec_attr_ts, yet it
doesn't require you to specify the size of the array at
declaration time.  Here's what I mean:

	sec_attr_t	*perm_attrs = NULL;
	unsigned32	num_perm_attrs;

	/* use some means to determine num_perm_attrs.
         * I discuss this later in this message.
         * For now assume num_perm_attrs is equal to
         * the final total number of attributes you
         * intend to return to the caller.
         */
	num_per_attrs = something;
	perm_attrs = malloc(num_perm_attrs * sizeof(sec_attr_t));
	if(!perm_attrs) {
	    /* set status to "can't allocate memory" and 
	     * process error
             */
	}

	/* We're here if the malloc succeeded */
	/* You can still reference perm_attrs as an array,
         * for example:
         * sec_attr_util_alloc_copy(&tmp_attrs[i], &perm_attrs[count++], &st);
         */


>   
>            permanent_attrs[count] = malloc(sizeof(sec_attr_t));

The hard part is that you have to either declare the full size
of the array or malloc the entire thing at once.  You can't malloc
additional elements of the array like the above line attempts
to do because you're trying to reference permanent_attrs[count]
before it exists.

Here's my recommendation.  It eliminates looping on
sec_rgy_attr_lookup_by_id and copying every returned
attribute between the temp and perm arrays:

Call sec_rgy_attr_lookup_by_id as you do now passing tmp_attrs
as the output attr array.
If num_left > 0, meaning additional lookup calls are required,
/* Calculate size of final attrs array by summing the
 * number returned with the number not yet returned and
 * adding a few extra for good measure (in case a few get 
 * added between now and the next call.
 */
num_perm_attrs = num_returned + num_left + 5;
perm_attrs = malloc(num_perm_attrs * sizeof(sec_attr_t));
if(!perm_attrs) {
    /* set status to "can't allocate memory" and 
     * process error
     */
}
Now, call sec_rgy_attr_lookup_by_id again passing perm_attrs
as the output attr_array and num_perm_attrs as "space_avail."
You'll have to free the tmp_attrs from the initial call.
If you make this second sec_rgy_attr_lookup_by_id call, 
ignore num_left.  If num_left isn't 0, it means someone
just added more than 5 attrs to this principal.  Since
the database is changing, we can't be responsible for
returning completely up-to-date info.  The caller can
make another dcecp ERA lookup to get the final list
of attrs after the database has stabilized, if he cares.
Note that you can just return perm_attrs here.  You don't
need to do a sec_attr_util_alloc_copy for every returned
attribute, which should eliminate a lot of overhead.

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12415
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : Other suspected bad mallocs in dcecp
Reported Date                 : 9/29/94
Found in Baseline             : 1.1b19
Found Date                    : 9/29/94
Severity                      : B
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : 
        ./admin/dcecp/cdscp_cache.c
        ./admin/dcecp/cdscp_utils.c
        ./admin/dcecp/rgy_utils.c
        ./admin/dcecp/schema_ops.c
        ./admin/dcecp/util_general.c
Sensitivity                   : public

[9/29/94 public]

Based on the fix for 12395, took a brief look for other non +1
mallocs(strlen()), have not yet looked at these modules or used other
more sohpisticated greps (multi-line).

Maybe task should be assigned to ferret out this particular construct, or more 
generically, run dcecp thru memory sieve tool (libdbmalloc?, Sentinel?):

--> grep malloc *.c | grep strlen | grep -v +
cdscp_cache.c:    tmp_tower = malloc(strlen(tower));
cdscp_cache.c:            tmp_argv = malloc(strlen(argv[i]));
cdscp_utils.c:    class = (ClassName_t *)malloc(strlen(buffer));
cdscp_utils.c:    out_buffer = malloc(strlen(attr_interp->result));
schema_ops.c:   schema_entry.attr_name = malloc(sizeof(char) * strlen(to));

[9/29/94 public]
Laking time to buy/install sentinal, my visual inspection of the 268
occurances of the string "malloc" in dcecp/*.c resulted in the following
questionable finds:

cdscp_cache.c:280:    server_name = malloc(strlen(argv[1] +1));
cdscp_cache.c:354:    server_name = malloc(strlen(argv[1] +1));
cdscp_cache.c:593:    command = malloc(strlen(conical_command) + strlen(clearinghouse_list) + 1);
cdscp_cache.c:605:        command = malloc(strlen(clr_name) + strlen(conical_list)
cdscp_cache.c:850:        tower_string_valp = (cds_OpenChar_t *)malloc(sizeof(cds_OpenChar_t) +
cdscp_cache.c:986:    tmp_tower = malloc(strlen(tower));
cdscp_cache.c:993:            tmp_argv = malloc(strlen(argv[i]));
cdscp_utils.c:2386:    class = (ClassName_t *)malloc(strlen(buffer));
cdscp_utils.c:2462:    value->val_u.val_char.char_p =  malloc(length);
cdscp_utils.c:4141:    command = malloc(strlen(join_format) + strlen(buffer));
cdscp_utils.c:4144:    out_buffer = malloc(strlen(attr_interp->result));
cdscp_utils.c:4157:    command = malloc(strlen(set_format) + strlen(buffer));
rgy_utils.c:3126: <sorry lost the line>
rgy_utils.c:3136:            attr->tagged_union.bytes = (sec_attr_enc_bytes_t *) malloc(
rgy_utils.c:3156:         attr->tagged_union.idata = (sec_attr_i18n_data_t *) malloc(
schema_ops.c:1292:   schema_entry.attr_name = malloc(sizeof(char) * strlen(to));
util_general.c:152:  command = (char *)malloc(strlen(cmd_string) + strlen(list));

Kevin since all but two are in cds or rgy code, please do them all.

[9/29/94 public]

Yeah, Yeah, Yeah... +1 to you to. I modified most of them a couple were ok. 
Submitted.



CR Number                     : 12414
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 10967
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : Update pgo tests to reflect new show functionality
Reported Date                 : 9/29/94
Found in Baseline             : 1.1b19
Found Date                    : 9/29/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : see list below
Sensitivity                   : public

[9/29/94 public]

With the changes made to pgo show and multiple values
per attribute, some of the pgo tests need to be updated.
These tests are
   group_show_era_N.tcl
   group_show_era_P.tcl
   org_show_era_N.tcl
   org_show_era_P.tcl
   principal_show_era_N.tcl
   principal_show_era_P.tcl
   group_create_era_P.tcl
   org_create_era_P.tcl
   principal_create_era_P.tcl
   group_modify_era_P.tcl
   org_modify_era_P.tcl
   principal_modify_era_P.tcl

[9/30/94 public]
Changes that were made to the generic schema recently
are causing the schema_modify_generic_P.tcl test to
have failures.  The test needs to be changed before
this OT can be closed.

[9/30/94 public]
Submitted.

[10/6/94 public]
closed.



CR Number                     : 12413
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cellalias
Short Description             : mult. aliases aren't added to dce_cf.db
Reported Date                 : 9/29/94
Found in Baseline             : 1.1b19
Found Date                    : 9/29/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : admin/dcecp/scripts/cellalias.dcp
Sensitivity                   : public

[9/29/94 public]
Creating multiple aliases for a cell with cellalias create doesn't 
update thedce_cf.db file correctly, the old aliase is pleaced with 
the new one. cds, sec and the pe_site file are updated correctly.

[9/29/94 public]
fixed.  Was commented out for debugging.  John, please try again.

[10/6/94 public]
closed.



CR Number                     : 12411
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : pgo era modify tests core dump
Reported Date                 : 9/29/94
Found in Baseline             : 1.1b19
Found Date                    : 9/29/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : rgy_pgo_utils.c
Sensitivity                   : public

[9/29/94 public]

The pgo era modify positive tests are core dumping
on some of the printstring test cases.  Has to do
with a bogus free and not initializing an attribute
value field to NULL for this encoding type in one
of the encode functions.  Have a fix, will submit
shortly.

[9/29/94 public]
It is necessary to correctly set the attribute value
part of the attribute structure to "NULL" before
any processing or free'ing is done.  Submitted.

[10/6/94 public]
closed.



CR Number                     : 12409
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : task scripts
Short Description             : parsargs does not support <noun> help -verbose
Reported Date                 : 9/29/94
Found in Baseline             : 1.1
Found Date                    : 9/29/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : parseargs.dcp
Sensitivity                   : public

[9/29/94 public]

The task scripts need to be able to support -verbose help. That 
requires changes to the parseargs proc.

[9/29/94 public]

Added the capability for the tcl-parser to handle the construct
<noun> help -verbose.



CR Number                     : 12408
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : help
Short Description             : remove verbose help processing
Reported Date                 : 9/29/94
Found in Baseline             : 1.1b19
Found Date                    : 9/29/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : util_help.c dcp.sams
Sensitivity                   : public

[9/29/94 public]
We will be putting each verbose help message in one sams message. I 
need to rip out the multi message processing code.

[9/29/94 public]

Removed the code.

[10/6/94 public]
closed.



CR Number                     : 12403
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : don't know how to make cdsalias_catalog_N.tcl
Reported Date                 : 9/29/94
Found in Baseline             : 1.1
Found Date                    : 9/29/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : test/admin/*
Sensitivity                   : public

[9/29/94 public]

platform - HPUX, AT486 (and possibly RIOS - RIOS build is in progress)
machine  - zagreb, vienna

extract from zagreb:/u3/devobj/sb/nb_ux/logs/tests.log.09-28-94

[ /test/admin/dcecp/ts/aud at 00:01 (AM) Thursday ]
makepath aud/. && cd aud &&  exec make MAKEFILE_PASS=BASIC     build_all
aud: created directory
[ /test/admin/dcecp/ts/cds at 00:01 (AM) Thursday ]
makepath cds/. && cd cds &&  exec make MAKEFILE_PASS=BASIC     build_all
cds: created directory
make: don't know how to make cdsalias_catalog_N.tcl (continuing)

[9/29/94 public]
These are in the old area, all these tests got moved to
src/test/functional/admin/dcecp last night.  Everything built fine there.
These are getting defuncted today.  It was probably a Makefile synch with
the tests problem.

[kevins 9/29/94 public] 

There was a glich of some sort at snap-time and the file was not 
transfered to the snap-tree.

[9/29/94 public]
the files have been defuncted.

[10/6/94 public]
closed.



CR Number                     : 12401
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cdsalias connect
Short Description             : no arg to cdsalias connect
Reported Date                 : 9/28/94
Found in Baseline             : 1.1
Found Date                    : 9/28/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.2.1
Affected File(s)              : dcecp
Sensitivity                   : public

[9/28/94 public]

The dcecp cdsalias connect command is being changed to not take an
argument.  It will use the primary alias as the connect name.  Code
in dcecp and the cds server might want to be cleaned up in the
connect case (adding an alias AsChild) since the current code expects
a name to be passed across the cp_AddCellname rpc interface.  The
current workaround is for dcecp to stuff a "/.:" in the name and the
cds server side ignores the argument.  This is because we wanted to
change as little code as possible at this late stage of 1.1.

[9/29/94 public]
Made the short description one line, this was the short description if
anyone cares for posterity :-)

In a dcecp cdsalias connect command, a dummy argument is
being (will be passed - see OT 12345) passed across an
rpc interface that is (will be) ignored on the cds server side.
While not very clean, it has the quickest turnaround time,
which is the determining factor at this late date in 1.1
development.

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12397
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : "registry connect" from node with hierarchical name works incorrectly
Reported Date                 : 9/28/94
Found in Baseline             : 1.1b19
Found Date                    : 9/28/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : rgy_sa_tclif.c
Sensitivity                   : public

[9/28/94 public]

A proposed approach for creating a hierarchical cell is to
configure a cell with a name of the form /.../<cell1>, and a
second cell with a name of the form /.../<cell1>/<cell2>, and
then connect them. Execution of the dcecp command "registry
connect" from the cell /.../<cell1>/<cell2>, (where DNS has been
updated to include an entry for /.../<cell1>), results in an 
erroneous setup. 

The two cells were called /.../oceans.qadce.osf.org and 
/.../oceans.qadce.osf.org/streams. Looking at the principals
catalogued in each, we find that /.../oceans.qadce.osf.org
contains:

    /.../oceans.qadce.osf.org/nobody
    /.../oceans.qadce.osf.org/root
    /.../oceans.qadce.osf.org/daemon
    /.../oceans.qadce.osf.org/sys
    /.../oceans.qadce.osf.org/bin
    /.../oceans.qadce.osf.org/uucp
    /.../oceans.qadce.osf.org/who
    /.../oceans.qadce.osf.org/mail
    /.../oceans.qadce.osf.org/tcb
    /.../oceans.qadce.osf.org/dce-ptgt
    /.../oceans.qadce.osf.org/dce-rgy
    /.../oceans.qadce.osf.org/cell_admin
    /.../oceans.qadce.osf.org/krbtgt/oceans.qadce.osf.org
    /.../oceans.qadce.osf.org/hosts/dce2/self
    /.../oceans.qadce.osf.org/hosts/dce2/cds-server
    /.../oceans.qadce.osf.org/hosts/dce2/gda
    /.../oceans.qadce.osf.org/krbtgt/streams

It appears that the principal 

    /.../oceans.qadce.osf.org/krbtgt/streams

got created rather than the principal

    /.../oceans.qadce.osf.org/krbtgt/oceans.qadce.osf.org/streams.

while /.../oceans.qadce.osf.org/streams contains:

    /.../oceans.qadce.osf.org/streams/nobody
    /.../oceans.qadce.osf.org/streams/root
    /.../oceans.qadce.osf.org/streams/daemon
    /.../oceans.qadce.osf.org/streams/sys
    /.../oceans.qadce.osf.org/streams/bin
    /.../oceans.qadce.osf.org/streams/uucp
    /.../oceans.qadce.osf.org/streams/who
    /.../oceans.qadce.osf.org/streams/mail
    /.../oceans.qadce.osf.org/streams/tcb
    /.../oceans.qadce.osf.org/streams/dce-ptgt
    /.../oceans.qadce.osf.org/streams/dce-rgy
    /.../oceans.qadce.osf.org/streams/cell_admin
    /.../oceans.qadce.osf.org/streams/krbtgt/oceans.qadce.osf.org
    /.../oceans.qadce.osf.org/streams/krbtgt/oceans.qadce.osf.org/streams
    /.../oceans.qadce.osf.org/streams/hosts/frack/self
    /.../oceans.qadce.osf.org/streams/hosts/frack/cds-server
    /.../oceans.qadce.osf.org/streams/hosts/frack/gda


An attempt to login from /.../oceans.qadce.osf.org to 
/.../oceans.qadce.osf.org/streams/cell_admin gives the error 

	"Registry object not found". 

An attempt to login from /.../oceans.qadce.osf.org/streams to 
/.../oceans.qadce.osf.org/cell_admin gives the error

	"Password Validation Failure. - Invalid password (dce / sec)"

[9/29/94 public]

The 'registry connect' will now perform the connection properly
with cellnames that contain more than one RDN. There is, however, 
still the intercell problem that attempting to log into a foreign
cell with multiple RDNs fails with 'Invalid password'.



CR Number                     : 12395
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : secval status cmd
Short Description             : dcecp core dumps in RPC runtime during secval status cmd.
Reported Date                 : 9/28/94
Found in Baseline             : 1.1b19
Found Date                    : 9/28/94
Severity                      : B
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : util_login.c
Sensitivity                   : public

[9/28/94 public]

dcecp -c secval status with a string binding FAILS during configuration 
occassionally, no message returned from dcecp.  

Happens more often on particular machine, rescue.  This is a 386, could
timing be an issue here.  Don;t see why.  Am instrumenting dce_config/dced 
and dcecp to provide more info on failure.

[9/27/94 oublic]

dcecp is core dumping in the RPC runtime fiddling with a tower it just
got back from the dced ept, looks like someone is memory walking.  I will
leave assigned to dcecp for now.  Here is the stack:

(gdb) where
#0  0xa40033e4 in malloc (12)
#1  0xa40bb1c0 in cma_lib_malloc (12)
#2  0xa4109d95 in rpc__mem_alloc (size=12, type=63, flags=0)
    at /project/dce/build/dce1.1/src/rpc/runtime/rpcmem.c:82
#3  0xa411e3fe in rpc__tower_ref_alloc ()
#4  0xa4117d84 in rpc__naf_tower_flrs_to_addr ()
#5  0xa411c63a in ep_get_endpoint (if_r=0xa43e6bc0, binding_r=0x666b30, 
    st=0xbfffdf4c) at
/project/dce/build/dce1.1/src/rpc/runtime/comep.c:2316
#6  0xa411bf79 in ep_get_endpoint (if_r=0x666b30, binding_r=0xa43e6bc0, 
    st=0xbfffdf4c) at
/project/dce/build/dce1.1/src/rpc/runtime/comep.c:1915
#7  0xa412d213 in rpc__cn_call_start (binding_r=0x666b30, call_options=0, 
    ifspec_r=0xa43e6bc0, opnum=2, transfer_syntax=0xbfffdfac,
st=0xbfffdf4c)
    at /project/dce/build/dce1.1/src/rpc/runtime/cncall.c:490
#8  0xa411157c in rpc_call_receive ()
#9  0xa41fa2db in op3_csr (h=0x666b30, st=0xbfffe00c) at secval_cstub.c:463
#10 0xa41f08a4 in ifhandle2service (h=0x571398, ifhandle=0xbfffe00c, 
    st=0xbfffe018)
    at /project/dce/build/dce1.1-snap/src/admin/dced/api/register.c:80
#11 0x472212 in dcp_sv_status (clientData=0x0, interp=0x5690b0, argc=2, 
    argv=0xa4109d80) at ../../../../src/admin/dcecp/dhd_secval.c:398
#12 0x40489c in dcp_secval (clientData=0x0, interp=0x5690b0, argc=2, 
    argv=0xbfffe30c) at ../../../../src/admin/dcecp/commands.c:2783
#13 0x49ceb9 in Tcl_Eval (5673136, 6511280)
#14 0x400df5 in Tcl_AppInit (interp=0x5690b0)
    at ../../../../src/admin/dcecp/main.c:673
#15 0x40038a in main (argc=-1073747024, argv=0xbffff4b4)
    at ../../../../src/admin/dcecp/main.c:351

I just got a debuggable RPC runtime, will re-create.

[9/29/94 public]
I've seen this three times in a row while running the following configuration

  1. configure security maseter on 486
  2. configure initial cdsd on hp
  3. configure secondary on same 486 as 1.

I get 

         Additional Server Configuration ( on balder )


         1. Additional CDS Server(s)
         2. DTS
         3. DFS System Control Machine
         4. DFS Private File Server
         5. DFS File Server
         6. DFS Fileset Location Database Server
         7. GDA Server
         8. Replica Security Server
         9. Auditing
         10. Password Management Server
         11. Unconfigure Password Management Server


        98. Return to previous menu
        99. Exit



        selection:  1
S:****** Configuring additional CDS Server...
S:****** Checking for active sec_client service...
dcecp -c secval status {ncacn_ip_tcp:130.105.5.12[135]} FAILS: 
ERROR:   Continuing will return to the Additional Server Configuration menu.
        Press <RETURN> to continue, CTRL-C to exit: 

I'm attempting to check out A0 12222. Since I can;t seem to get to the 
requited configuration due to this I'm blocked. I'm raising this to the
same priority as 12222 P0.

[9/29/94 public]
Likely fix submitted.

[09/30/94 public]
I saw that the fix was to add +1 to malloc(strlen(xxx)).  Sigh -- should
have used dce_strdup from the beginning, as in
	*pinc = dce_strdup(local_princ);

[10/6/94 public]
closed.



CR Number                     : 12392
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : various errors in dcecp test
Reported Date                 : 9/28/94
Found in Baseline             : 1.1b19
Found Date                    : 9/28/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : dcecp
Sensitivity                   : public

[9/28/94 public]

Some of the dcecp test values are hard coded. These need to be chamged.
Here is a summary of the errors, when the dcecp tests were run:

rpcgroup test

520|0 1 16104 1 1|rpcgroup_add_6_P: Verify that we can add a member to a group.
520|0 1 16104 1 2|==== Contents of test case:
520|0 1 16104 1 3|{         rpcgroup add /.:/rpcg_add_6_P -member /.:/foo
rpcgroup list /.:/rpcg_add_6_P     }
520|0 1 16104 1 4|Test completed successfully.
520|0 1 16104 1 5|== Test output was:
520|0 1 16104 1 6|/.../doyen/foo
520|0 1 16104 1 7|== Expected output was:
520|0 1 16104 1 8|/.../dcecp_cell.osf.org/foo
520|0 1 16104 1 9|Test Failed.
220|0 1 1 10:05:53|FAIL

...

520|0 1 16104 1 1|rpcgroup_add_6_P: Verify that we can add a member to a group.
520|0 1 16104 1 2|==== Contents of test case:
520|0 1 16104 1 3|{         rpcgroup add /.:/rpcg_add_6_P -member /.:/foo
rpcgroup list /.:/rpcg_add_6_P     }
520|0 1 16104 1 4|Test completed successfully.
520|0 1 16104 1 5|== Test output was:
520|0 1 16104 1 6|/.../doyen/foo
520|0 1 16104 1 7|== Expected output was:
520|0 1 16104 1 8|/.../dcecp_cell.osf.org/foo
520|0 1 16104 1 9|Test Failed.
220|0 1 1 10:05:53|FAIL

...

520|0 1 16104 1 10|rpcgroup_add_7_P: Verify that we can add a list of members
to a list of groups.
520|0 1 16104 1 11|==== Contents of test case:
520|0 1 16104 1 12|{         rpcgroup add {/.:/rpcg_add_7_P_1 /.:/rpcg_add_7_P_
2} -member {/.:/foo /.:/bar}     rpcgroup list {/.:/rpcg_add_7_P_1 /.:/rpcg_add
_7_P_2}     }
520|0 1 16104 1 13|Test completed successfully.
520|0 1 16104 1 14|== Test output was:
520|0 1 16104 1 15|{/.../doyen/foo /.../doyen/bar  /.../doyen/foo /.../doyen/ba
r}
520|0 1 16104 1 16|== Expected output was:
520|0 1 16104 1 17|{/.../dcecp_cell.osf.org/foo /.../dcecp_cell.osf.org/bar /..
./dcecp_cell.osf.org/foo /.../dcecp_cell.osf.org/bar}
520|0 1 16104 1 18|Test Failed.
220|0 1 1 10:05:59|FAIL

...

520|0 1 13941 1 1|rpcgroup_list_4_P: Verify that we can list the members in an 
rpc group.
520|0 1 13941 1 2|==== Contents of test case:
520|0 1 13941 1 3|{         rpcgroup list /.:/rpcg_list_4_P     }
520|0 1 13941 1 4|Test completed successfully.
520|0 1 13941 1 5|== Test output was:
520|0 1 13941 1 6|/.../doyen/foo
520|0 1 13941 1 7|== Expected output was:
520|0 1 13941 1 8|/.../dcecp_cell.osf.org/foo
520|0 1 13941 1 9|Test Failed.
220|0 1 1 10:07:00|FAIL

...

520|0 1 13941 1 10|rpcgroup_list_5_P: Verify that we can list the members in a 
list of rpc groups.
520|0 1 13941 1 11|==== Contents of test case:
520|0 1 13941 1 12|{         rpcgroup list {/.:/rpcg_list_5_P_1 /.:/rpcg_list_5 _P_2}     }
520|0 1 13941 1 13|Test completed successfully.
520|0 1 13941 1 14|== Test output was:
520|0 1 13941 1 15|{/.../doyen/foo /.../doyen/bar  /.../doyen/foo /.../doyen/ba
r}
520|0 1 13941 1 16|== Expected output was:
520|0 1 13941 1 17|{/.../dcecp_cell.osf.org/foo /.../dcecp_cell.osf.org/bar /..
./dcecp_cell.osf.org/foo /.../dcecp_cell.osf.org/bar}
520|0 1 13941 1 18|Test Failed.
220|0 1 1 10:07:05|FAIL

...

520|0 1 14006 1 1|rpcgroup_remove_6_P: Verify that we can remove a member from 
a group.
520|0 1 14006 1 2|==== Contents of test case:
520|0 1 14006 1 3|{         rpcgroup remove /.:/rpcg_rem_6_P -member /.:/bar
rpcgroup list /.:/rpcg_rem_6_P     }
520|0 1 14006 1 4|Test completed successfully.
520|0 1 14006 1 5|== Test output was:
520|0 1 14006 1 6|/.../doyen/foo
520|0 1 14006 1 7|== Expected output was:
520|0 1 14006 1 8|/.../dcecp_cell.osf.org/foo
520|0 1 14006 1 9|Test Failed.
220|0 1 1 10:07:36|FAIL

...

520|0 1 14006 1 10|rpcgroup_remove_7_P: Verify that we can remove a list of mem
bers from a list of groups.
520|0 1 14006 1 11|==== Contents of test case:
520|0 1 14006 1 12|{         rpcgroup remove {/.:/rpcg_rem_7_P_1 /.:/rpcg_rem_7
_P_2} -member {/.:/bar /.:/biz}  rpcgroup list {/.:/rpcg_rem_7_P_1 /.:/rpcg_rem
_7_P_1}     }
520|0 1 14006 1 13|Test completed successfully.
520|0 1 14006 1 14|== Test output was:
520|0 1 14006 1 15|{/.../doyen/foo /.../doyen/bang  /.../doyen/foo /.../doyen/b
ang}
520|0 1 14006 1 16|== Expected output was:
520|0 1 14006 1 17|{/.../dcecp_cell.osf.org/foo /.../dcecp_cell.osf.org/bang /.
../dcecp_cell.osf.org/foo /.../dcecp_cell.osf.org/bang}
520|0 1 14006 1 18|Test Failed.
220|0 1 1 10:07:45|FAIL


rpcprofile tests

520|0 1 25066 1 28|rpcprofile_show_4_N: Check that a bad value for -version fai
ls.
520|0 1 25066 1 29|==== Contents of test case:
520|0 1 25066 1 30|{         list [catch {rpcprofile show /.:/rpcp_show_4_N -in
terface [list [uuid create] 1.0] -version bad} msg] $msg     }
520|0 1 25066 1 31|Test completed successfully.
520|0 1 25066 1 32|== Test output was:
520|0 1 25066 1 33|{1 {Invalid string UUID}}
520|0 1 25066 1 34|== Expected output was:
520|0 1 25066 1 35|{1 {The value 'bad' is not a valid version identifier.}}
520|0 1 25066 1 36|Test Failed.
220|0 1 1 10:10:51|FAIL

...

520|0 1 25917 1 1|rpcprofile_add_10_P: Verify that we can add a member to an rp
c profile with -default.
520|0 1 25917 1 2|==== Contents of test case:
520|0 1 25917 1 3|{     rpcprofile add /.:/rpcp_add_10_P -member /.:/foo -defau
lt       rpcprofile show /.:/rpcp_add_10_P     }
520|0 1 25917 1 4|Test completed successfully.
520|0 1 25917 1 5|== Test output was:
520|0 1 25917 1 6|{{{00000000-0000-0000-0000-000000000000 0.0} /.../doyen/foo 0
}}
520|0 1 25917 1 7|== Expected output was:
520|0 1 25917 1 8|{{{00000000-0000-0000-0000-000000000000 0.0} /.../dcecp_cell.
osf.org/foo 0 }}
520|0 1 25917 1 9|Test Failed.

...

520|0 1 25917 1 10|rpcprofile_add_11_P: Verify that we can add a member to an r
pc profile with -interface.
520|0 1 25917 1 11|==== Contents of test case:
520|0 1 25917 1 12|{    rpcprofile add /.:/rpcp_add_11_P -member /.:/foo -inter
face {00205383-5fa0-1de2-a683-0000c03adf56 1.0}  rpcprofile show /.:/rpcp_add_1
1_P     }
520|0 1 25917 1 13|Test completed successfully.
520|0 1 25917 1 14|== Test output was:
520|0 1 25917 1 15|{{{00205383-5fa0-1de2-a683-0000c03adf56 1.0} /.../doyen/foo 
0}}
520|0 1 25917 1 16|== Expected output was:
520|0 1 25917 1 17|{{{00205383-5fa0-1de2-a683-0000c03adf56 1.0} /.../dcecp_cell
.osf.org/foo 0 }}
520|0 1 25917 1 18|Test Failed.

...

520|0 1 25917 1 19|rpcprofile_add_12_P: Verify that we can add a member to an r
pc profile with -interface,
520|0 1 25917 1 20|rpcprofile_add_12_P: -priority and -annotation.
520|0 1 25917 1 21|==== Contents of test case:
520|0 1 25917 1 22|{    rpcprofile add /.:/rpcp_add_12_P -member /.:/foo -inter
face {00205383-5fa0-1de2-a683-0000c03adf56 1.0} -priority 2 -annotation {Test e
ntry}     rpcprofile show /.:/rpcp_add_12_P     }
520|0 1 25917 1 23|Test completed successfully.
520|0 1 25917 1 24|== Test output was:
520|0 1 25917 1 25|{{{00205383-5fa0-1de2-a683-0000c03adf56 1.0} /.../doyen/foo 
2 {Test entry}}}
520|0 1 25917 1 26|== Expected output was:
520|0 1 25917 1 27|{{{00205383-5fa0-1de2-a683-0000c03adf56 1.0} /.../dcecp_cell
.osf.org/foo 2 {Test entry}}}
520|0 1 25917 1 28|Test Failed.

...

520|0 1 25917 1 29|rpcprofile_add_13_P: Verify that we can add a member to a li
st of rpc profiles with
520|0 1 25917 1 30|rpcprofile_add_13_P: -interface, -priority and -annotation.
520|0 1 25917 1 31|==== Contents of test case:
520|0 1 25917 1 32|{    rpcprofile add {/.:/rpcp_add_13_P_1 /.:/rpcp_add_13_P_2
} -member /.:/foo -interface {00205383-5fa0-1de2-a683-0000c03adf56 1.0} -priori
ty2 -annotation {Test entry}     rpcprofile show {/.:/rpcp_add_13_P_1 /.:/rpcp_
add_13_P_2}     }
520|0 1 25917 1 33|Test completed successfully.
520|0 1 25917 1 34|== Test output was:
520|0 1 25917 1 35|{{{00205383-5fa0-1de2-a683-0000c03adf56 1.0} /.../doyen/foo 
2 {Test entry}}  {{00205383-5fa0-1de2-a683-0000c03adf56 1.0} /.../doyen/foo 2 {
Test entry}}}
520|0 1 25917 1 36|== Expected output was:
520|0 1 25917 1 37|{{{00205383-5fa0-1de2-a683-0000c03adf56 1.0} /.../dcecp_cell
.osf.org/foo 2 {Test entry}} {{00205383-5fa0-1de2-a683-0000c03adf56 1.0} /.../d
cecp_cell.osf.org/foo 2 {Test entry}}}
520|0 1 25917 1 38|Test Failed.

...

520|0 1 26055 1 1|rpcprofile_list_4_P: Verify that we can list the members in a
n rpc profile.
520|0 1 26055 1 2|==== Contents of test case:
520|0 1 26055 1 3|{     rpcprofile list /.:/rpcp_list_4_P     }
520|0 1 26055 1 4|Test completed successfully.
520|0 1 26055 1 5|== Test output was:
520|0 1 26055 1 6|{/.../doyen/foo /.../doyen/bar}
520|0 1 26055 1 7|== Expected output was:
520|0 1 26055 1 8|{/.../dcecp_cell.osf.org/foo /.../dcecp_cell.osf.org/bar}
520|0 1 26055 1 9|Test Failed.

...

520|0 1 26055 1 10|rpcprofile_list_5_P: Verify that we can list the members in 
a list of rpc profiles.
520|0 1 26055 1 11|==== Contents of test case:
520|0 1 26055 1 12|{    rpcprofile list {/.:/rpcp_list_5_P_1 /.:/rpcp_list_5_P_
2}     }
520|0 1 26055 1 13|Test completed successfully.
520|0 1 26055 1 14|== Test output was:
520|0 1 26055 1 15|{/.../doyen/foo /.../doyen/bar  /.../doyen/grape}
520|0 1 26055 1 16|== Expected output was:
520|0 1 26055 1 17|{/.../dcecp_cell.osf.org/foo /.../dcecp_cell.osf.org/bar /..
./dcecp_cell.osf.org/grape}
520|0 1 26055 1 18|Test Failed.
220|0 1 1 10:12:31|FAIL

...

520|0 1 25861 1 29|rpcprofile_remove_13_P: Verify that we can remove a member f
rom a profile with -annotation.
520|0 1 25861 1 30|==== Contents of test case:
520|0 1 25861 1 31|{    rpcprofile remove /.:/rpcp_remove_13_P -annotation {Sec
ond case}        rpcprofile show /.:/rpcp_remove_13_P     }
520|0 1 25861 1 32|Test completed successfully.
520|0 1 25861 1 33|== Test output was:
520|0 1 25861 1 34|{{{004dbc1e-5c69-1de3-9add-0000c03adf56 1.0} /.../doyen/foo 
0 {First case}}}
520|0 1 25861 1 35|== Expected output was:
520|0 1 25861 1 36|{{{004dbc1e-5c69-1de3-9add-0000c03adf56 1.0} /.../dcecp_cell
.osf.org/foo 0 {First case}}}
520|0 1 25861 1 37|Test Failed.

...

520|0 1 13911 1 1|rpcprofile_show_6_P: Verify that we can show an rpc profile.
520|0 1 13911 1 2|==== Contents of test case:
520|0 1 13911 1 3|{     rpcprofile show /.:/rpcp_show_6_P     }
520|0 1 13911 1 4|Test completed successfully.
520|0 1 13911 1 5|== Test output was:
520|0 1 13911 1 6|{{{004dbc1e-5c69-1de3-9add-0000c03adf56 1.0} /.../doyen/foo 1
}}
520|0 1 13911 1 7|== Expected output was:
520|0 1 13911 1 8|{{{004dbc1e-5c69-1de3-9add-0000c03adf56 1.0} /.../dcecp_cell.
osf.org/foo 1 }}
520|0 1 13911 1 9|Test Failed.


account tests

520|0 1 23153 1 19|account_create_3_N: Check that unauthenticated users are han
dled correctly.
520|0 1 23153 1 20|==== Contents of test case:
520|0 1 23153 1 21|{         list [catch {account create kevin -group none -org
anization none -password mine -mypwd $DCP_CLIENT_PW} msg] $msg     }
520|0 1 23153 1 22|Test completed successfully.
520|0 1 23153 1 23|== Test output was:
520|0 1 23153 1 24|{1 {Registry object not found}}
520|0 1 23153 1 25|== Expected output was:
520|0 1 23153 1 26|{1 {Cant establish authentication to security server}}
520|0 1 23153 1 27|Test Failed.

...

520|0 1 17197 1 38|account_create_49_P: Check that we can create an account wit
h a list of attributes.
520|0 1 17197 1 39|==== Contents of test case:
520|0 1 17197 1 40|{  account create $PRINCIPAL -attribute $LIST        dcp_att
rlist getval [account show $PRINCIPAL] expdate   }
520|0 1 17197 1 41|Test completed successfully.
520|0 1 17197 1 42|== Test output was:
520|0 1 17197 1 43|1999-04-12-19:00:00.000-05:00I-----
520|0 1 17197 1 44|== Expected output was:
520|0 1 17197 1 45|1999-04-12-20:00:00.000-04:00I-----
520|0 1 17197 1 46|Test Failed.

...

520|0 1 17197 1 47|account_create_51_P: Check that we can create an account wit
h a list of attributes.
520|0 1 17197 1 57|==== Contents of test case:
520|0 1 17197 1 58|{  account create $PRINCIPAL -attribute $LIST        dcp_att
rlist getval [account show $PRINCIPAL] goodsince         }
520|0 1 17197 1 59|Test completed successfully.
520|0 1 17197 1 60|== Test output was:
520|0 1 17197 1 61|1999-04-12-19:00:00.000-05:00I-----
520|0 1 17197 1 62|== Expected output was:
520|0 1 17197 1 63|1999-04-12-20:00:00.000-04:00I-----
520|0 1 17197 1 64|Test Failed.

...

520|0 1 26407 1 37|account_modify__8_P: Check that we can create an account wit
h a list of attributes.
520|0 1 26407 1 38|==== Contents of test case:
520|0 1 26407 1 39|{ account modify $PRINCIPAL -expdate 1995-01-01      dcp_att
rlist getval [account show $PRINCIPAL] expdate         }
520|0 1 26407 1 40|Test completed successfully.
520|0 1 26407 1 41|== Test output was:
520|0 1 26407 1 42|1994-12-31-18:00:00.000-06:00I-----
520|0 1 26407 1 43|== Expected output was:
520|0 1 26407 1 44|1994-12-31-19:00:00.000-05:00I-----
520|0 1 26407 1 45|Test Failed.

...

520|0 1 26407 1 55|account_modify_10_P: Check that we can create an account wit
h a list of attributes.
520|0 1 26407 1 56|==== Contents of test case:
520|0 1 26407 1 57|{ account modify $PRINCIPAL -goodsince 1995-01-01    dcp_att
rlist getval [account show $PRINCIPAL] goodsince          }
520|0 1 26407 1 58|Test completed successfully.
520|0 1 26407 1 59|== Test output was:
520|0 1 26407 1 60|1994-12-31-18:00:00.000-06:00I-----
520|0 1 26407 1 61|== Expected output was:
520|0 1 26407 1 62|1994-12-31-19:00:00.000-05:00I-----
520|0 1 26407 1 63|Test Failed.


registry tests

520|0 1 15404 1 73|registry_delete_009_N: Check for authentication to perform t
his operation.
520|0 1 15404 1 74|==== Contents of test case:
520|0 1 15404 1 75|{         list [catch {registry delete $DCP_RGY_SA_REP_NAME_
SLAVE1} msg] $msg     }
520|0 1 15404 1 76|Test completed successfully.
520|0 1 15404 1 77|== Test output was:
520|0 1 15404 1 78|{1 {Registry server unavailable}}
520|0 1 15404 1 79|== Expected output was:
520|0 1 15404 1 80|{1 {Cant establish authentication to security server}}
520|0 1 15404 1 81|Test Failed.

...

520|0 1 16042 1 37|registry_disable_005_N: Check for authentication to perform 
this operation.
520|0 1 16042 1 38|==== Contents of test case:
520|0 1 16042 1 39|{         list [catch {registry disable $DCP_RGY_SA_REP_NAME
_MASTER} msg] $msg     }
520|0 1 16042 1 40|Test completed successfully.
520|0 1 16042 1 41|== Test output was:
520|0 1 16042 1 42|{1 {User is not authorized to update record}}
520|0 1 16042 1 43|== Expected output was:
520|0 1 16042 1 44|{1 {Cant establish authentication to security server}}
520|0 1 16042 1 45|Test Failed.

...

520|0 1 16042 1 55|registry_disable_007_N: Check for slave replica specificatio
n.
520|0 1 16042 1 56|==== Contents of test case:
520|0 1 16042 1 57|{         list [catch {registry disable $DCP_RGY_SA_REP_NAME
_SLAVE1} msg] $msg     }
520|0 1 16042 1 58|Test completed successfully.
520|0 1 16042 1 59|== Test output was:
520|0 1 16042 1 60|{1 {Registry server unavailable}}
520|0 1 16042 1 61|== Expected output was:
520|0 1 16042 1 62|{1 {Registry replica specified is not the master.}}
520|0 1 16042 1 63|Test Failed.

...

520|0 1 23144 1 37|registry_enable_005_N: Check for authentication to perform t
his operation.
520|0 1 23144 1 38|==== Contents of test case:
520|0 1 23144 1 39|{         list [catch {registry enable $DCP_RGY_SA_REP_NAME_
MASTER} msg] $msg     }
520|0 1 23144 1 40|Test completed successfully.
520|0 1 23144 1 41|== Test output was:
520|0 1 23144 1 42|{0 {}}
520|0 1 23144 1 43|== Expected output was:
520|0 1 23144 1 44|{1 {Cant establish authentication to security server}}
520|0 1 23144 1 45|Test Failed.

...

520|0 1 23144 1 55|registry_enable_007_N: Check for slave replica specification
.
520|0 1 23144 1 56|==== Contents of test case:
520|0 1 23144 1 57|{         list [catch {registry enable $DCP_RGY_SA_REP_NAME_
SLAVE1} msg] $msg     }
520|0 1 23144 1 58|Test completed successfully.
520|0 1 23144 1 59|== Test output was:
520|0 1 23144 1 60|{1 {Registry server unavailable}}
520|0 1 23144 1 61|== Expected output was:
520|0 1 23144 1 62|{1 {Registry replica specified is not the master.}}
520|0 1 23144 1 63|Test Failed.

...

520|0 1 20177 1 73|registry_stop_009_N: Check for authentication to perform thi
s operation.
520|0 1 20177 1 74|==== Contents of test case:
520|0 1 20177 1 75|{         list [catch {registry stop $DCP_RGY_SA_REP_NAME_SL
AVE1} msg] $msg     }
520|0 1 20177 1 76|Test completed successfully.
520|0 1 20177 1 77|== Test output was:
520|0 1 20177 1 78|{1 {Registry server unavailable}}
520|0 1 20177 1 79|== Expected output was:
520|0 1 20177 1 80|{1 {No currently established network identity for which cont
ext exists}}
520|0 1 20177 1 81|Test Failed.

...

520|0 1 15936 1 73|registry_synchronize_009_N: Check for authentication to perf
orm this operation.
520|0 1 15936 1 74|==== Contents of test case:
520|0 1 15936 1 75|{         list [catch {registry synchronize $DCP_RGY_SA_REP_
NAME_SLAVE1} msg] $msg     }
520|0 1 15936 1 76|Test completed successfully.
520|0 1 15936 1 77|== Test output was:
520|0 1 15936 1 78|{1 {Registry server unavailable}}
520|0 1 15936 1 79|== Expected output was:
520|0 1 15936 1 80|{1 {Cant establish authentication to security server}}
520|0 1 15936 1 81|Test Failed.

...

520|0 1 16054 1 75|registry_modify_009_N: Check for authentication to perform t
his operation.
520|0 1 16054 1 76|==== Contents of test case:
520|0 1 16054 1 77|{         list [catch {registry modify $DCP_RGY_SA_REP_NAME_
MASTER -key} msg] $msg     }
520|0 1 16054 1 78|Test completed successfully.
520|0 1 16054 1 79|== Test output was:
520|0 1 16054 1 80|{1 {User is not authorized to update record}}
520|0 1 16054 1 81|== Expected output was:
520|0 1 16054 1 82|{1 {No currently established network identity for which cont
ext exists}}
520|0 1 16054 1 83|Test Failed.

...

520|0 1 16054 1 248|registry_modify_028_N: Check that unauthorized uses are tra
pped as errors.
520|0 1 16054 1 249|==== Contents of test case:
520|0 1 16054 1 250|{         list [catch {registry modify -minuid 5100} msg] $
msg     }
520|0 1 16054 1 251|Test completed successfully.
520|0 1 16054 1 252|== Test output was:
520|0 1 16054 1 253|{1 {User is not authorized to update record}}
520|0 1 16054 1 254|== Expected output was:
520|0 1 16054 1 255|{1 {Cant establish authentication to security server}}
520|0 1 16054 1 256|Test Failed.

...

520|0 1 23127 1 73|registry_set_009_N: Check for authentication to perform this
operation.
520|0 1 23127 1 74|==== Contents of test case:
520|0 1 23127 1 75|{         list [catch {registry set $DCP_RGY_SA_REP_NAME_SLA
VE1} msg] $msg     }
520|0 1 23127 1 76|Test completed successfully.
520|0 1 23127 1 77|== Test output was:
520|0 1 23127 1 78|{1 {Registry server unavailable}}
520|0 1 23127 1 79|== Expected output was:
520|0 1 23127 1 80|{1 {Registry object not found}}
520|0 1 23127 1 81|Test Failed.

...

520|0 1 23127 1 112|registry_set_013_N: Check that the specified replica is alr
eady a
520|0 1 23127 1 113|registry_set_013_N: slave replica.
520|0 1 23127 1 114|==== Contents of test case:
520|0 1 23127 1 115|{         list [catch {registry set $DCP_RGY_SA_REP_NAME_SL
AVE1 -slave} msg] $msg     }
520|0 1 23127 1 116|Test completed successfully.
520|0 1 23127 1 117|== Test output was:
520|0 1 23127 1 118|{1 {Registry server unavailable}}
520|0 1 23127 1 119|== Expected output was:
520|0 1 23127 1 120|{1 {Replica is not the master}}
520|0 1 23127 1 121|Test Failed.

[9/28/94 public]
90% of these error have been fixed over the last week. We have been doing
extensive test cleanup recently.

Please update the 'foundinbaseline' value to the value of the baseline that
you are using. 1.1 is not a baseline.

Note that there are several outstanding errors in dcecp tests. Please 
refer to the TestSummary file for a list of all open test related CR's.

[9/29/94 public]
I've reassigned this to IBM.  Here's the reason:
 * We do think that these have been fixed in the last week.
 * From the TestSummary file the NB of 9/25 was used in the tests, we have
   done the fixes since then (OT's were filed and fixed).
 * Please rerun the:
     rpcgroup
     rpcprofile
     account
   tests, these were the ones that failed that we think are now fixed.
   We've seen failures for the registry tests, I'm not sure about those.
   We'll check here, but it should be easy to rerun those.

I'm just using OT to communicate here.
Feel free to express opinions on the above if I've got something wrong.

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12387
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : No error for object
Reported Date                 : 9/28/94
Found in Baseline             : 1.1b19
Found Date                    : 9/28/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : admin/dcecp/commands.c
Sensitivity                   : public

[9/28/94 public]
I don't know how this was never caught, but...

dcecp> dts 
Error: 

Most of the commands in commands.c just return TCL_ERROR w/o a 
message here.

Only a few commands handle this correctly

dcecp> princ
Error: This object requres a verb to form a command.

[9/29/94 public]
All objects now behave correctly. Submitted.

[10/6/94 public]
closed.



CR Number                     : 12386
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : help
Short Description             : help operations returns blank error
Reported Date                 : 9/28/94
Found in Baseline             : 1.1b19
Found Date                    : 9/28/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : admin/dcecp/util_help.c
Sensitivity                   : public

[9/28/94 public]
  dcecp> account help operations
  Error: 
  dcecp> 

It should just return an empty string since there are no options:

  dcecp> account help operations
  dcecp>

[9/28/94 public]
Special cased the operations command in the help code.

[10/6/94 public]
closed.



CR Number                     : 12379
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : dcecp
Subcomponent Name             : schema
Short Description             : schema_modify_N tests 22 and 23 core dump on 486 only.
Reported Date                 : 9/27/94
Found in Baseline             : 1.1b19
Found Date                    : 9/27/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b20
Affected File(s)              : schema_utils.c
Sensitivity                   : public

[9/27/94 public]

Works fine on HP. Ran these tests individually and not with the 
rest of the test suite.

(gdb) run schema_modify_N.tcl 22
Starting program: /usr/bin/dcecp schema_modify_N.tcl 22

Program received signal 11, Segmentation fault
0xa40408b5 in strcmp ()
(gdb) bt
#0  0xa40408b5 in strcmp ()
#1  0x6ffe08 in Authenticat ()
#2  0x4324c7 in encode_modify_schema_attr (interp=0x5680b0, 
    attr_info=0x6ee450, num_val=0xbfffb6ac, schema_entry=0xbfffb904,
    modify_parts=0xbfffb710, status=0xbfffb70c)
    at /project/dce/build/dce1.1/src/admin/dcecp/schema_utils.c:2881
#3  0x432c89 in parse_modify_schema_attr_list (interp=0x5680b0, attr_string=0x0,
    schema_entry=0xbfffb904, modify_parts=0xbfffb710, result=0xbfffb70c)
    at /project/dce/build/dce1.1/src/admin/dcecp/schema_utils.c:3150
#4  0x42cdc5 in schema_modify (clientData=0x0, interp=0x5680b0, argc=2, 
    argv=0xbfffc734)
    at /project/dce/build/dce1.1/src/admin/dcecp/schema_ops.c:984
#5  0x402d4c in dcp_xattrschema (clientData=0x0, interp=0x5680b0, argc=4, 
    argv=0xbfffc734)
    at /project/dce/build/dce1.1/src/admin/dcecp/commands.c:1532
.
.
.


(gdb) run schema_modify_N.tcl 23
Starting program: /usr/bin/dcecp schema_modify_N.tcl 23

Program received signal 11, Segmentation fault
0xa40408b5 in strcmp ()
(gdb) bt
#0  0xa40408b5 in strcmp ()
#1  0x698df8 in Authenticat ()
#2  0x432516 in encode_modify_schema_attr (interp=0x5680b0, 
    attr_info=0x689160, num_val=0xbfffb6ac, schema_entry=0xbfffb904,
    modify_parts=0xbfffb710, status=0xbfffb70c)
    at /project/dce/build/dce1.1/src/admin/dcecp/schema_utils.c:2897
#3  0x432c89 in parse_modify_schema_attr_list (interp=0x5680b0, 
    attr_string=0x0, schema_entry=0xbfffb904, modify_parts=0xbfffb710, 
    result=0xbfffb70c)
    at /project/dce/build/dce1.1/src/admin/dcecp/schema_utils.c:3150
#4  0x42cdc5 in schema_modify (clientData=0x0, interp=0x5680b0, argc=2, 
    argv=0xbfffc734)
    at /project/dce/build/dce1.1/src/admin/dcecp/schema_ops.c:984
#5  0x402d4c in dcp_xattrschema (clientData=0x0, interp=0x5680b0, argc=4, 
    argv=0xbfffc734)
    at /project/dce/build/dce1.1/src/admin/dcecp/commands.c:1532
.
.
.

[09/28/94 public]
The problem seems to be not kicking out a NULL value soon
enough.  We added checks in the 'create' code to look for
NULL values before they got passed to the "is_yes" function,
but the same checks did not get added to the 'modify' code,
depending on attribute type.  When these checks were added,
the core dumps went away.

[10/6/94 public]
closed.



CR Number                     : 12378
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : cdsalias needs functional tests.
Reported Date                 : 9/27/94
Found in Baseline             : 1.1
Found Date                    : 9/27/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : tet_scen Makefile
        cdsalias_catalog_N.tcl cdsalias_catalog_P.tcl 
        cdsalias_create_N.tcl cdsalias_create_P.tcl 
        cdsalias_delete_N.tcl cdsalias_delete_P.tcl 
        cdsalias_set_N.tcl
Sensitivity                   : public

[9/27/94 public]

self explanitory

[9/28/94 public]

created functional tests.



CR Number                     : 12377
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cdsalias
Short Description             : cdsalias create takes a list when it should not.
Reported Date                 : 9/27/94
Found in Baseline             : 1.1
Found Date                    : 9/27/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : cdscp_cellalias.c
Sensitivity                   : public

[9/27/94 public]

The cdsalias create command accepts a tcl list of alias names to create
it should only accept a single fully qualified argument. This fails the 
tests that will be written

dcecp> cdsalias create {/.:/foo /.:/foo_bar} 

works and it should not.

[9/28/94 public]

Removed list processing from both the create and catalog commands.

[kevins 9/28/94 public] 

Sigh... Does not give the appropriate error message.

[kevins 9/30/94 public] 

now gives the correct error message.

[10/6/94 public]
closed.



CR Number                     : 12376
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : registry
Short Description             : dcecp return "Error: Registry
server unavailable" when is not the case
Reported Date                 : 9/27/94
Found in Baseline             : 1.1b19
Found Date                    : 9/27/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : 
        ./admin/dcecp/rgy_sa_replist.c
        ./admin/dcecp/rgy_sa_tclif.c	
        ./admin/dcecp/rgy_utils.c	
        ./test/admin/dcecp/ts/rgy/group_catalog_N.tcl	
        ./test/admin/dcecp/ts/rgy/organization_catalog_N.tcl
        ./test/admin/dcecp/ts/rgy/principal_catalog_N.tcl	
        ./test/admin/dcecp/ts/rgy/registry_catalog_N.tcl	
        ./test/admin/dcecp/ts/rgy/registry_delete_N.tcl	
        ./test/admin/dcecp/ts/rgy/registry_modify_N.tcl	
        ./test/admin/dcecp/ts/rgy/registry_set_N.tcl	
        ./test/admin/dcecp/ts/rgy/registry_show_N.tcl	
        ./test/admin/dcecp/ts/rgy/registry_stop_N.tcl	
        ./test/admin/dcecp/ts/rgy/registry_synchronize_N.tcl
Sensitivity                   : public

[9/27/94 public]

Build" BL-19

When I type:

dcecp> registry show policies (or attributes / master / replica)
Error: Registry server unavailable
dcecp> 

This error is incorrect, the problem is the command syntax. 
I forgot to type the - in front of "policies", as in:

dcecp> registry show -policies
{acctlife unlimited}
{maxtktlife +1-00:00:00.000I-----}
{maxtktrenew +28-00:00:00.000I-----}
{pwdalpha yes}
{pwdexpdate none}
{pwdlife unlimited}
{pwdminlen 0}
{pwdspaces yes}
dcecp>

[9/27/94 public]
sorry martha, it's thinking that "policies" is the name of a registry to
contact for a show command.  The registry object takes an argument which
can be a name or a string binding.  The fact that the name would be a valid
option if it had a - on it is a little much for us to check for at this
point and would end up being inconsistent with other commands.  Imagine
creating a principal called "fullname":

  principal create fullname

should that work or return an error that you were missing the - before the
fullname option?

[9/27/94 public]

I have no problem you cancelling this CR. But I have to say that
the error message being displayed now gives no clue as to what 
one did wrong; and truer if one is a naive user. You do this all the 
time, so you know how it works. The error should mention that the registry 
named "policies" is not available. The error message should help the 
user figure out what it did wrong, not confuse him more. The way it 
is now, this message jis a bad user error message.

Furthermore, I think this bug should not be cancelled.

[9/27/94 public]
Make up your mind.  First you say:
   I have no problem you cancelling this CR. 
then you say:
   Furthermore, I think this bug should not be cancelled.

Well, okay, I'm re-opening it :-)
We'll trap the error and return something friendly like
  Registry server 'policies' unavailable.
Would that explain it clearly enough for the naive user?  (real question
there, no sarcasm).

Rationalization of a C1:  We have a real user here who is really
complaining about this and it's an easy fix.

[9/27/94 public]
I think this CR should be cancelled for the reasons Howard stated
above. 

It's not such an easy fix. At this late in the game, we have to modify
several FVT test messages. Also, there are comparisons being made in
the dcecp registry code with the argument specified and a replica name in
the replist and this error is returned. This would have to change.

Another note is that the security API returns a very misleading message 
when the user is unauthenticated and performs an authenticated operation:

dcecp> set _u
dcecp> regi stop /.../dcecp_cell.osf.org/subsys/dce/sec/ice
Error: Registry object not found

But we shouldn't trap this error to display a message that the user is
not authorized since the specified object may not really exist in
other instances.

[09/27/94 public]

For similar syntax errors, sec_admin seems to handle the error 
messages in a different way.

Perhaps what has to be done is to defer this CR as an enhancement.
Those working on 1.2 will have a chance to evaluate how important
is to have helpful error messages.

[9/27/94 public]
Yeah, sec_admin requires a network identity but dcecp registry
(sec_admin related) commands do not.  Note also that for all commands
except a few dced ones, dcp_is_logged_in() is called to determine
if authenticated.

It's probably not that bad to fix, but I was just noting that there
are other misleading error messages which may have to be handled in
1.2. It's up to Kevin, now.

[kevins 9/28/94 public] 
Modified the error message so that it now is:

dcecp> princ cat /.../foo_bar
Error: Registry server '/.../foo_bar' is unavailable.
dcecp> set _s(sec) /.../yet_another_foo_bar
/.../yet_another_foo_bar
dcecp> princ cat
Error: Registry server '/.../yet_another_foo_bar' is unavailable.
dcecp> registry show
Error: Registry server '/.../yet_another_foo_bar' is unavailable.
dcecp> registry cat foo/me
Error: Registry server 'foo/me' is unavailable.


And just for Martha:

dcecp> registry show policies
Error: Registry server 'policies' is unavailable.

[kevins 9/30/94 public] 

Missed the registry connect entry...

Sigh....

[9/30/94 public]

fixed registry connect.

[10/6/94 public]
closed.



CR Number                     : 12375
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : dts
Short Description             : dcecp> dts show all core dumps
Reported Date                 : 9/27/94
Found in Baseline             : 1.1b19
Found Date                    : 9/27/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : admin/dcecp/dts_util.c
Sensitivity                   : public

[9/27/94 public]

Build: BL-19

On an HPUX, I typed:

dcecp> dts show all  (or dts show counters / dts show attr / dts show xx)
Bus error(coredump)
root@thread> 

Same command on OSF1:

dcecp> dts show all
Error: Incomplete name
dcecp> 


"dtscp dts show -all", which is what I ment to type, works.

[9/27/94 public]
Core dump is an A, but this is on bad input so it's a negative case.  There
is a work around: don't do that.  I could reproduce no problem, here's the
trace: 

>t
 0 free@libc + 0x00000008 (hp-ux export stub)
 1 TMEM@libdce + 0x0009aca0 (0x4010baf0, 0x34, 0x7b035a28, 0)
 2 TMEM@libdce + 0x00106860 (0x4010baf0, 0x4, 0x14, 0x7b033aa0)
 3 TMEM@libdce + 0x001b0e74 (0x7b034709, 0x7b034709, 0x4001da50, 0)
 4 dcp_dts_bind_to_server (interp = 0x400be608, user_site = 0x7b034709)    [/project/dce/build/dce1.1-snap/src/admin/dcecp/dts_util.c: 303]
 5 dts_show (clientData =   00000000, interp = 0x400be608, argc = 2, argv = 0x7b0347e0)    [/project/dce/build/dce1.1-snap/src/admin/dcecp/dts_ops.c: 1097]
 6 dcp_dts (clientData =   00000000, interp = 0x400be608, argc = 2, argv = 0x7b034870)    [/project/dce/build/dce1.1-snap/src/admin/dcecp/commands.c: 2240]
 7 Tcl_Eval + 0x000009f0 (0x400be608, 0x7b033af0, 0x7b0346a8, 0x1)
 8 Tcl_RecordAndEval + 0x0000026c (0x400be608, 0x7b033af0, 0, 0x1)
 9 main (argc = 1, argv = 0x7b033ab8)    [/project/dce/build/dce1.1-snap/src/admin/dcecp/main.c: 498]

[9/27/94 public]
I found and fixed this problem. For some reason it never made it to the
tree. A local copy of user_site (in dcp_dts_bind_to_server) should be made
in all cases. There was one assignment that needed a dce_strdup.

[10/6/94 public]
closed.



CR Number                     : 12372
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : typo in error message
Reported Date                 : 9/27/94
Found in Baseline             : 1.1
Found Date                    : 9/27/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : admin/dcecp/dcp.sams
Sensitivity                   : public

[9/27/94 public]

dcecp> registry connect /.../c=ie/o=guinness/ou=dublin -expdate none -facct cell_admin -facctpwd dce -fgroup none -forg none -mypwd dce -org none
Error: Local group no specified

'no' should be 'not'

[9/27/94 public]
I'm sure I'll incur someones wrath for fixing an E4, but hey...

Submitted.

[10/6/94 public]
closed.



CR Number                     : 12370
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : Negative KTB FVT messages
Short Description             : Tests must be changed to expect new negative messages
Reported Date                 : 9/27/94
Found in Baseline             : 1.1b18
Found Date                    : 9/27/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : ktb*
Sensitivity                   : public

[9/27/94 public]

Negative messages from dcecp have changed again.  Tests must change to
reflect.

[9/29/94 public]
Submitted.

[10/6/94 public]
closed.



CR Number                     : 12365
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : server
Short Description             : Makefile doesn't have DATAFILES
Reported Date                 : 9/27/94
Found in Baseline             : 1.1b18
Found Date                    : 9/27/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : test/admin/dcecp/ts/server/Makefile
Sensitivity                   : public

[9/27/94 public]
The src/test/admin/dcecp/ts/server/Makefile needs a DATAFILES line
for all the scripts.

[9/27/94 public]
Submitted.

[10/6/94 public]
closed.



CR Number                     : 12362
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : log FVT
Short Description             : Need configurable for 2 LOG FVT tests.
Reported Date                 : 9/27/94
Found in Baseline             : 1.1b18
Found Date                    : 9/27/94
Severity                      : E
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b18
Affected File(s)              : src/test/admin/dcecp/ts/log/log_modify_N.tcl, src/test/admin/dcecp/ts/log/log_show_N.tcl, src/test/admin/dcecp/tetexec.cfg
Sensitivity                   : public

[9/27/94 public]

These tests need to return "UNINITIATED" if DCP_LOG_DCE_DEBUG is 0.

log_show_009_N
log_modify_019_N

[10/6/94 public]
closed.



CR Number                     : 12361
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : registry mod FVT
Short Description             : Only 2 registry modify tests need to be updated.
Reported Date                 : 9/27/94
Found in Baseline             : 1.1b18
Found Date                    : 9/27/94
Severity                      : E
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b20
Affected File(s)              : rgy_utils.c registry_modify_P.tcl
Sensitivity                   : public

[9/27/94 public]

registry_modify_062_P
registry_modify_076_P

[9/27/94 public]

Modified the method for storing deftktlife and modified the 
value for pwdexpdate in the positive test.



CR Number                     : 12359
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : acl modify FVT
Short Description             : Return "UNSUPPORTED" for 6 FVT tests.
Reported Date                 : 9/27/94
Found in Baseline             : 1.1b18
Found Date                    : 9/27/94
Severity                      : E
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b19
Affected File(s)              : src/test/admin/dcecp/ts/acl/acl_modify_P.tcl
Sensitivity                   : public

[9/27/94 public]

The following tests need to return "UNSUPPORTED":

acl_modify_059_P
acl_modify_062_P
acl_modify_139_P
acl_modify_142_P
acl_modify_237_P
acl_modify_238_P

Tests acl_modify_237_P and acl_modify_238_P refer to extended ACL
entry types.  There are currently no ACL managers that support this.
In the future, there may be.

Tests acl_modify_059_P, acl_modify_062_P, acl_modify_139_P, and
acl_modify_142_P refer no initial container ACL supporting
user_obj" and "group_obj" ACL entry types. In the future, there may
be.

[10/6/94 public]
closed.



CR Number                     : 12356
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : test
Short Description             : resolve negative messages incorrect.
Reported Date                 : 9/27/94
Found in Baseline             : 1.1
Found Date                    : 9/27/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : resolve_N.tcl
Sensitivity                   : public

[9/27/94 public]

The resolve negative test case messages are incorrect.

[9/27/94 public]

Modified negative messages expected.



CR Number                     : 12354
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dts
Short Description             : dts_configure_P tests fail
Reported Date                 : 9/27/94
Found in Baseline             : 1.1b19
Found Date                    : 9/27/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : dts_configure_P.tcl
Sensitivity                   : public

[9/27/94 public]
dts_configure_7_P and dts_configure_8_P tests fail.

Error messages:
7: No permission for name service operation
8: Not a global time server

[9/27/94 public]
Worked around. This problem was caused by a dtsd problem.

[10/25/94 public]
closed.



CR Number                     : 12353
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : audevents
Short Description             : audevents_catalog_3_P fails
Reported Date                 : 9/27/94
Found in Baseline             : 1.1b19
Found Date                    : 9/27/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : test/admin/dcecp/ts/aud/audevents_catalog_P.tcl
Sensitivity                   : public

[9/27/94 public]

audevents_catalog_3_P

The list of installed event classes has changed. This test needs to be
updated to reflect this.

[9/27/94 public]
Submitted.

[10/6/94 public]
closed.



CR Number                     : 12349
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : no errors for bad commands
Reported Date                 : 9/26/94
Found in Baseline             : 1.1b19
Found Date                    : 9/26/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : admin/dcecp/main.c
Sensitivity                   : public

[9/26/94 public]
You can call objects with bad verb names and they just return without
generating an error:

  dcecp> cle repear /.:/absolut_ch -tim 
  dcecp> prin shown
  dcecp> prin shown mleman
  dcecp> acc crev
  dcecp> acl ship
  dcecp> 

sounds like something in parseargs or the way we call it...

[9/26/94 public]
Okay, it's related to dcecp_verbose_errors.  Setting this variable to 0
(or probably anything other than 1) means you get no errors.  unsetting it
means you get the proper 1 line error.  So it's all in main.c, I'll get it
tomorrow.

[9/28/94 public]
Removed an else if that free'ed the return from Tcl_GetVar (a bad thing to
do) and didn't print anything.  Submitted.

[10/6/94 public]
closed.



CR Number                     : 12341
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : schema
Short Description             : schema_create_N.tcl 51
core dumps.
Reported Date                 : 9/26/94
Found in Baseline             : 1.1b18
Found Date                    : 9/26/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b20
Affected File(s)              : schema_ops.c, schema_utils.c
Sensitivity                   : public

[9/26/94 public]

Look at schema_utils.c:1535
FVT schema_create_N.tcl 51 :

(gdb) run schema_create_N.tcl 51
Starting program: /usr/bin/dcecp schema_create_N.tcl 51

Program received signal 11, Segmentation fault
0xa4347927 in free_attr_ptrs (-1543489848, -1073760780)
(gdb) bt
#0  0xa4347927 in free_attr_ptrs (-1543489848, -1073760780)
#1  0xa4348353 in sec_attr_util_inst_free_ptrs (-1073760780)
#2  0x430236 in encode_schema_attr (interp=0x5680b0, attr_info=0x66c480, 
    num_val=0xbfffb654, schema_entry=0xbfffb904, status=0xbfffb6b4)
	at ../../../../src/admin/dcecp/schema_utils.c:1535
#3  0x4308f5 in parse_schema_attr_list (interp=0x5680b0,
	attr_string=0x0, 
	    schema_entry=0xbfffb904, result=0xbfffb6b4)
		at ../../../../src/admin/dcecp/schema_utils.c:1748
#4  0x42bc65 in schema_create (clientData=0x0,
		interp=0x5680b0, argc=2, argv=0xbfffc734) at ../../../../src/admin/dcecp/schema_ops.c:492
#5  0x402d4c in dcp_xattrschema (clientData=0x0, interp=0x5680b0, argc=4, 
			argv=0xbfffc734)
at /project/dce/build/dce1.1/src/admin/dcecp/commands.c:1532

[9/27/94 public]
Some 'free_ptrs' calls were used where they shouldn't have
been.  The lines were removed.

[10/6/94 public]
closed.



CR Number                     : 12339
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : schema
Short Description             : schema_create_N FVT core dumps.
Reported Date                 : 9/26/94
Found in Baseline             : 1.1b18
Found Date                    : 9/26/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b19
Affected File(s)              : schema_ops.c, schema_utils.c
Sensitivity                   : public

[9/26/94 public]

Just installed nightly build of 9/25, ran "schema_create_N.tcl":
Look at schema_utils.c:2204.

Program received signal 11, Segmentation fault
0xa40036d4 in free ()
(gdb) bt
#0  0xa40036d4 in free ()
#1  0xa40036c8 in free ()
#2  0xa4348353 in sec_attr_util_inst_free_ptrs ()
#3  0x4313ec in parse_schema_switch_list (interp=0x5680b0, 
    attr_id=0xf1840000<Address 0xf1840000 out of bounds>,
    attr_encoding=0x0, 
acl_mgr_set=0x0, unique=0x0, multi_valued=0x0, reserved=0x0,
apply_defaults=0x0, intercell_action=0x0, trig_types=0x0,
trig_binding=0xbfffc79f "blech", scope=0x0, comment=0x0,
schema_entry=0xbfffb90c, result=0xbfffb6bc)
at
../../../../src/admin/dcecp/schema_utils.c:2204
#4  0x42bc22 in schema_create (clientData=0x0,
interp=0x5680b0, argc=2, 
argv=0xbfffc73c) at
../../../../src/admin/dcecp/schema_ops.c:484
#5  0x402d4c in dcp_xattrschema (clientData=0x0, interp=0x5680b0, argc=4, argv=0xbfffc73c)
at
/project/dce/build/dce1.1/src/admin/dcecp/commands.c:1532
#6  0x49c505 in Tcl_Eval (5669040, -1073755690) 
#7  0x49d39d in Tcl_CatchCmd (0, 5669040, 3, -1073755760)
#8  0x49c505 in Tcl_Eval (5669040, -1073754237)
#9  0x4b13fc in TclParseNestedCmd (5669040, -1073754237, 0, -1073755032, -1073754952)
#10 0x4b18f1 in TclParseWords
    (5669040, -1073754243, 0, 8, -1073755032, -1073755052,
    -1073754996, -1073754952)
#11 0x49bed8 in Tcl_Eval (5669040, -1073754252)
...

[9/26/94 public]

Fails on test case schema_create_N.tcl 29

[9/27/94 public]
Some 'free_ptrs' calls were used where they shouldn't
have been.  The lines were removed.

[10/6/94 public]
closed.



CR Number                     : 12338
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dts
Short Description             : dts stop fails if dtsd disabled
Reported Date                 : 9/26/94
Found in Baseline             : 1.1
Found Date                    : 9/26/94
Severity                      : B
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : admin/dcecp/dts_ops.c
Sensitivity                   : public

[9/26/94 public]

Using the weekend nightly build (9/25-26).

The dts stop command fail to shutdown dtsd if you 'deactivate' dts first.

The dce_shutdown script does this: 
	dcecp -c "dts deactivate ; dts stop"
 which fails:

dcecp> dts deactivate
dcecp> dts stop
Error: Time service in wrong state

The errors seen from dtsd on shutdown:
(which dtsd shouldn't really print, but thats another matter)

root@surf#  /etc/dce_shutdown 
1994-09-26-11:47:30.275-04:00I----- dtsd WARNING dts dtserror transport_rpc.c 1771 0xa44db9a8
Failed to unexport Control interface from the namespace: Name service unavailable (dce / rpc)
1994-09-26-11:47:30.825-04:00I----- dtsd ERROR dts dtserror transport_rpc.c 1825 0xa44db9a8
Failed to unexport Service interface from the namespace: Name service unavailable (dce / rpc)
1994-09-26-11:47:30.905-04:00I----- dtsd ERROR dts dtserror transport_rpc.c 1849 0xa44db9a8
Failed to remove Service interface from the profile /.../surf_cell/lan-profile: Name service unavailable (dce / rpc)

[9/26/94 public]
This is a side-effect of the RPC retry code submitted on Friday. I'm 
testing the fix in my sandbox now.

[9/26/94 public]
Submitted.

[10/6/94 public]
closed.



CR Number                     : 12337
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : write help -verbose messages
Reported Date                 : 9/26/94
Found in Baseline             : 1.1b18
Found Date                    : 9/26/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : dcp.sams
Sensitivity                   : public

[9/26/94 public]
The help -verbose messages need to be written for all objects (including
tasks).  Everyone check off with an * when done:

  kevins         rousseau       salamone       coren          melman
==========================================================================
  *account			 *acl          *attrlist       *host       
  *cdsalias			 *log          *endpoint       *hostdata   
  *cdscache			 *registry     *rpcentry       *keytab     
  *cell	  		         *audfilter    *rpcgroup       *name       
  *clearinghouse			       *rpcprofile     *secval     
  *directory						       *server     
  *group						       *uuid       
  *link						 	       *xattrschema
  *object         					       *aud        
  *organization						       *audevents 
  *principal						       *utc 
  *user							       *audtrail  
							       *clock     
                                                               *dts
                                                               *name

Here is example text:

  dcecp> principal help -verbose 			       
  This object allows remote manipulation of principal
  information stored in the DCE registry.  The argument is a
  list of either relative or fully-qualified principal names,
  but not both.  Specify fixed attributes using attribute
  options or attribute lists.  Specify any extended attributes
  using attribute lists.  These operations connect to a registry
  that can service the request.  Specify a particular registry
  by setting the _s(sec) convenience variable to be a
  cell-relative or global replica name, or the binding of the
  host where the replica exists. The completed operation sets
  _b(sec) to the name of the registry contacted.  Access to most
  operations relies solely on the ACL of the principal.  To
  create principals, you need i permission to the parent
  directory.  To delete principals, you need D permission to the
  principal as well as d permission on the parent directory.

PLEASE follow the style above very closely
 * Specify...
 * The order of the info...
 * using the letters for permissions..

Here is outline info for the text:

  help -verbose paragraph
    1 or 2 sentence description of what object is:
    is container or not
    local or remote
    
    argument
      list or not
      name or binding
      shorthand forms, etc.
    
    convenience var 
      read by command
      set by command
    
    permissions required  ?? 
      per command could be hard.
      maybe describe acl types?
    
    I do not think it should have:
      examples of usage
      abbreviation description as these can change

[9/29/94 public]
cell user done....
principal group organization account done....

[9/30/94 public]
Thanks John for being so helpful :-)

[10/6/94 public]
closed.



CR Number                     : 12334
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : cdsalias set -child -> connect
Reported Date                 : 9/26/94
Found in Baseline             : 1.1b18
Found Date                    : 9/26/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : commands.c cdscp.h 
                                cdscp_cellalias.c
Sensitivity                   : public

[9/26/94 public]
The cdsalias set -child command was renamed to be cdsalias connect.
However, the code was never changed.  It needs to be.

[9/26/94 public]
Changed the code to reflect the spec.



CR Number                     : 12332
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : audtrail
Short Description             : dce_aud_close called twice
Reported Date                 : 9/25/94
Found in Baseline             : 1.1b18
Found Date                    : 9/25/94
Severity                      : B
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : admin/dcecp/aud_ops.c
Sensitivity                   : public

[9/25/94 public]
in audtrail_show()...

Inspection of the code revealed 2 problems, one is that dce_aud_close()
is being called twice. Secondly, since the audtrail show operation only
works with a local file through the audit library, the call to bind to the
server is unnecessary.

[9/27/94 public]
Made above changes, and cleaned up error checking while I was there.
Submitted.

[10/6/94 public]
closed.



CR Number                     : 12330
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : host
Short Description             : UHYP: finish host config -client
Reported Date                 : 9/23/94
Found in Baseline             : 1.1b18
Found Date                    : 9/23/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : dcecp
Sensitivity                   : public

[9/23/94 public]
host.dcp isn't finished. Finish it.

[9/27/94 public]
Partial fix submitted: start, stop, and show completed. configure
-client still isn't finished. I'll keep this one for now until we see
whether John or I gets to it first. (I'm hoping he will. :-))

[10/12/94 public]
Please note, if host configure isn't implemented, section 7.6 "Configuring
a DCE Host in a Cell" should be modified or removed.

[10/26/94 public]
host configure -client is better than it was, but it's still not fully
functional. The major missing piece is the initialization of the CDS
namespace, as performed by the ns_client_init() function of
dce_config. Without this, the names needed for proper functioning of
secval and server commands do not get exported into the CDS namespace.

Other things that should probably be added: the script should check
whether the registry entries already exist before trying to create
them. It might be a good idea to check for, and silently remove, a
/.../ prefix on the name specified with the -cell option. "host
unconfigure" should do a "secval deactivate" (and possibly some other,
not-yet-revealed things) so that the sequence below will work:

dcecp> host unconfigure /.:/hosts/myhost
dcecp> host configure hosts/myhost -client ...

[6/14/95 public]

Some more update from a customer. How far are we on fixing this?

Offering and Version:   DCE 1.1
Component (Module):     dcecp
Client Hardware:        IBM RT 
Client Software:        AIX 
Server Hardware:        N/A 
Server Software:        N/A 
Compiler:               N/A 

Problem Description
- -------------------

Severity Level: Critical 

Date of First Occurrence: 2 May 95 

One Line Description:

        dcecp's "host configure" command doesn't work. 

Full Description:

        dcecp's "host configure" command doesn't work.  That means that
        dcecp's 'host unconfigure', 'host show', and 'server show' commands are
        largely useless, because they rely on CDS entries set up by 
        'host configure'.

Repeat By:

	First, I had to add a clause to the _dcp_server_running() routine
	in /opt/dcelocal/dcecp/host.dcp, which is strange, because I 
	*thought* AIX was one of OSF's reference platforms.

	Here's the clause I added to the swith statement in 
        _dcp_server_running():

        AIX {
           set PS_ARGS "-e"
        }


	Then I did a "/etc/dce_config UNCONFIGURE", followed by a
	"/etc/dce_config CONFIGURE".   After that,  I attempted to
	configure the AIX machine as a client to an existing 1.1 cell
	and here are the results:

# dcecp
dcecp> host configure hosts/halrios -cell hookcell -client -secmaster hook-bb -cds hook-bb -password -dce-
DEBUG: host: args is 'configure hosts/halrios -cell hookcell -client -secmaster hook-bb -cds hook-bb -password -dce-'
DEBUG: host: Calling '_dcp_host_configure' with 'hosts/halrios -cell hookcell -client -secmaster hook-bb -cds hook-bb -password -dce-'
DEBUG: _dcp_host_configure: In configure with args: hosts/halrios -cell hookcell -client -secmaster hook-bb -cds hook-bb -password -dce-
DEBUG: _dcp_host_configure: Calling client with `hosts/halrios -cell hookcell -secmaster hook-bb -cds hook-bb -password -dce-'
DEBUG: _dcp_host_configure_client: In configure client with args: 'hosts/halrios -cell hookcell -secmaster hook-bb -cds hook-bb -password -dce-'
DEBUG: _dcp_host_configure_client: setting dce_hostname, local_args = hosts/halrios
DEBUG: _dcp_host_configure_client: admin_name is cell_admin
DEBUG: _dcp_create_cf_db: Writing dce_cf.db file
DEBUG: _dcp_host_configure_client: Initializing dced (dced -i)
DEBUG: _dcp_host_configure_client: Starting dced
DEBUG: _dcp_server_running: Did not find server 'dced' running.
DEBUG: _dcp_host_configure_client: Creating pe_site file
DEBUG: _dcp_create_pe_site: sec_host is hook-bb
DEBUG: _dcp_create_pe_site: hook-bb's IP address is 148.57.163.6
DEBUG: _dcp_create_pe_site: Endpoints are:
{{object ad00ca3e-8661-11ce-897c-0800200df78d}
 {interface {4c878280-5000-0000-0d00-028714000000 1.0}}
 {binding {ncadg_ip_udp 148.57.163.6 50910}}
 {annotation {DCE user registry}}}
 
{{object ad00ca3e-8661-11ce-897c-0800200df78d}
 {interface {4c878280-5000-0000-0d00-028714000000 1.0}}
 {binding {ncadg_ip_udp 148.57.180.12 50910}}
 {annotation {DCE user registry}}}
DEBUG: _dcp_create_pe_site: obj_uuid is ad00ca3e-8661-11ce-897c-0800200df78d
DEBUG: _dcp_create_pe_site: protseq is ncacn_ip_tcp
DEBUG: _dcp_create_pe_site: Wrote
/.../hookcell ad00ca3e-8661-11ce-897c-0800200df78d@ncacn_ip_tcp:148.57.163.6[]
to pe_site file
DEBUG: _dcp_create_pe_site: obj_uuid is ad00ca3e-8661-11ce-897c-0800200df78d
DEBUG: _dcp_create_pe_site: protseq is ncacn_ip_tcp
DEBUG: _dcp_create_pe_site: Wrote
/.../hookcell ad00ca3e-8661-11ce-897c-0800200df78d@ncacn_ip_tcp:148.57.163.6[]
to pe_site file
DEBUG: _dcp_create_pe_site: obj_uuid is ad00ca3e-8661-11ce-897c-0800200df78d
DEBUG: _dcp_create_pe_site: protseq is ncadg_ip_udp
DEBUG: _dcp_create_pe_site: Wrote
/.../hookcell ad00ca3e-8661-11ce-897c-0800200df78d@ncadg_ip_udp:148.57.163.6[]
to pe_site file
DEBUG: _dcp_create_pe_site: obj_uuid is ad00ca3e-8661-11ce-897c-0800200df78d
DEBUG: _dcp_create_pe_site: protseq is ncadg_ip_udp
DEBUG: _dcp_create_pe_site: Wrote
/.../hookcell ad00ca3e-8661-11ce-897c-0800200df78d@ncadg_ip_udp:148.57.163.6[]
to pe_site file
DEBUG: _dcp_host_configure_client: Performing login
DEBUG: _dcp_host_configure_client: Creating /krb5/krb.conf
DEBUG: _dcp_host_configure_client: Creating registry entries
DEBUG: _dcp_host_configure_client: Creating keytab using rgy_edit
DEBUG: _dcp_host_configure_client: Adding kerberos5 to /etc/services
DEBUG: _dcp_host_configure_client: Starting cdsadv
DEBUG: _dcp_server_running: Did not find server 'cdsadv' running.
DEBUG: _dcp_host_configure_client: Creating hosts/halrios directory
...a long pause here...
Error: Unable to create directory hosts/halrios: Error with socket
dcecp>

    I also tried doing a 'dcecp host unconfigure /.:/hosts/halrios' followed
    by the 'dcecp host configure' command above.  Same result.  Also I 
    logged onto my CDS server and confirmed all my servers were up and 
    healthy.  BTW, we routinely configure this AIX machine into 1.1 cells
    using /etc/dce_config CONFIGURE.

[6/14/95 public]

Changing status from defer to open. What about other deferred CR's?

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12329
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : cellalias.dcp broken
Reported Date                 : 9/23/94
Found in Baseline             : 1.1b17
Found Date                    : 9/23/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : admin/dcecp/scripts/cellalias.dcp
Sensitivity                   : public

[9/23/94 public]
The cellalias script was never finished.  Finish it.

[9/23/94 public]
Finished it.  The set command still untested based on CR 12150.

[9/26/94 public]
closed.



CR Number                     : 12319
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : hostdata
Short Description             : hostdata show fails
Reported Date                 : 9/23/94
Found in Baseline             : 1.1b18
Found Date                    : 9/23/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : dhd_util.c
Sensitivity                   : public

[9/23/94 public]
The command "hostdata show cell_name" in the dcecp smoketest is 
failing with the message "Bad or invalid dce attr schema object name(s)".
This is preventing a successful run of the dcecp smoketest.

[9/23/94 public]
Submitted.

[9/26/94 public]
closed.



CR Number                     : 12312
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : aud
Short Description             : CR 10703 causes dcecp not to build
Reported Date                 : 9/22/94
Found in Baseline             : 1.1b18
Found Date                    : 9/22/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : admin/dcecp/aud_ops.c
Sensitivity                   : public

[9/22/94 public]
Changes from CR 10703 caused dcecp not to build. admin/dcecp/aud_ops.c
needs some trivial changes.

[9/22/94 public]
Submitted. Rats have been asked to rebuild dcecp in place to fix NB.

[9/23/94 public]

The dcecp smoketest still fails on the RIOS; it also fails on the 486
(though there is another smoketest bug on this platform so the dcecp
failure cause isn't as clear).  The HP core smoketest hasn't finished yet.

[9/23/94 public]
The smoketest failure is caused by an unrelated problem. Please refer
to CR 12319.

[9/26/94 public]
closed.



CR Number                     : 12296
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : task scripts
Short Description             : Several scripts have debug info in them.
Reported Date                 : 9/22/94
Found in Baseline             : 1.1
Found Date                    : 9/22/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : cell.dcp user.dcp parseargs.dcp
Sensitivity                   : public

[9/22/94 public]

The user cell task scripts have debug calls that do not correctly 
correspond to how documentation thinks they should.

[9/22/94 public]
Modified user task scripts to handle the help macro properly.

[9/26/94 public]
closed.



CR Number                     : 12288
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : clearinghouse help cores
Reported Date                 : 9/21/94
Found in Baseline             : 1.1
Found Date                    : 9/21/94
Severity                      : B
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : commands.c
Sensitivity                   : public

[9/21/94 public]

Subject says it all.....

[kevins 9/21/94 public] 

The help argument of the arg_table was indexed incorrectly.

[9/26/94 public]
closed.



CR Number                     : 12286
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : registry
Short Description             : dcp_rgy_sa_list_replicas returns pointer to local storage
Reported Date                 : 9/21/94
Found in Baseline             : 1.1b18
Found Date                    : 9/21/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : src/admin/dcecp/util_general.c,
src/admin/dcecp/rgy_sa_replist.c
Sensitivity                   : public

[9/21/94 public]

dcp_rgy_sa_list_replicas contains the following call:

	rc = dcp_general_allocate_argv_for_one(interp, 
				               (char *)global_name, 
				               name_argc, 
				               name_argv);

dcp_general_allocate_argv_for_one allocates an array of 2 (char **)
elements, stores a pointer to its second argument (here global_name)
in the first element, and a pointer to the array in its 4th argument
(here name_argv, which is an output argument to
dcp_rgy_sa_list_replicas).

The problem is that "global_name", despite its name :-), is a local
variable in dcp_rgy_sa_list_replicas, and so its stack location is
fair game as soon as its caller calls anything else. For instance,
when it is returned to largv[0] in dcp_rgy_sa_catalog, the contents of
largv[0] change the next time dcp_rgy_sa_catalog makes a call. In
consequence, "registry catalog" can fail randomly.

[9/21/94 public]

I tried the following in my sandbox, and it seems to be OK. I can
submit it if you'd like, unless you want to fix it some other way.

(rgy_sa_replist.c)
1499c1499
<     sec_rgy_name_t global_name;
---
>     char *global_name;
1508c1508
< 	strcpy((char *)global_name, "");
---
> 	global_name = dce_strdup("");

[9/21/94 public]

Yeah, it works but kevin and I were talking and we would really like
to fix the problem with freeing largv[0]. That would mean changes to
the function dcp_general_allocate_argv_for_one() also.

We'll keep you posted.

[9/26/94 public]
closed.



CR Number                     : 12285
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : xattr
Short Description             : xattr doesn't function right for the second invocation
Reported Date                 : 9/21/94
Found in Baseline             : 1.1
Found Date                    : 9/21/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : schema_ops.c, schema_utils.c
Sensitivity                   : public

[9/21/94 public]

See this,
dcecp> x cat /.:/hosts/foster/config/xattrschema
/.../foster_cell/hosts/foster/config/xattrschema/hostdata/data
/.../foster_cell/hosts/foster/config/xattrschema/hostdata/bindata
/.../foster_cell/hosts/foster/config/xattrschema/srvrconf/dtsconfig
/.../foster_cell/hosts/foster/config/xattrschema/srvrconf/additional_environ
dcecp> x cat /.:/sec
/.../foster_cell/sec/hostdata/data
/.../foster_cell/sec/hostdata/bindata
/.../foster_cell/sec/srvrconf/dtsconfig
/.../foster_cell/sec/srvrconf/additional_environ

[9/21/94 public]

While I was fixing another CR, I noticed that functions schema_show()
and schema_catalog() do not invoke open_rgy_site() to obtain a valid
registry context. They should.

[9/21/94 public]
Jim: reassign if necessary...

[9/22/94 public]

Once we determine that a generic schema call is necessary, the first
thing done is a call to set_attr_schema_binding() in order to get the
binding handle of the schema name provided by the user.

The set_attr_schema_binding() function has a check at the beginning
which says if the attr_schema binding handle is already set, then,
instead of going through the trouble of getting the binding handle
again, just use the one that's already there.

This is incorrect, as shown above.  If the second time through, the
user tries a different generic schema name, the set_attr_schema_binding()
function sees that the binding is already set, and just returns it.
So the calling function (in this case schema_catalog) uses the binding
handle of the first schema name, but the schema name string of the
second schema name.

The fix in set_attr_schema_binding() is to check not only if the binding
handle is set, but to make sure the schema name being used matches
the one represented by the current binding handle.  If not, a new
binding handle is retrieved.  In the case above, the attempt to get
a binding handle for "/:/sec" will return an error status, so the
second catalog attempt will not succeed.

Also, while in the code, added the requested open_rgy_site() calls
to the schema_show() and schema_catalog() functions.

[9/23/94 public]
Submitted code to fix the binding handle problem with the generic
schema and added the calls to open_rgy_site() in the show and
catalog functions.

[9/26/94 public]
I'm not sure if there is another CR on this or not, but here's what happen
when I try with the build of 9/25/94:

dcecp> x cat /.:/hosts/absolut/config/xattrschema
/.../absolut_cell/hosts/absolut/config/xattrschema/hostdata/data
/.../absolut_cell/hosts/absolut/config/xattrschema/xattrschema/cde_ses
/.../absolut_cell/hosts/absolut/config/xattrschema/hostdata/bindata
/.../absolut_cell/hosts/absolut/config/xattrschema/srvrconf/dtsconfig
/.../absolut_cell/hosts/absolut/config/xattrschema/srvrconf/additional_environ
dcecp> x cat /.:/sec                              
Error: Bad or invalid dce attr schema object name(s)

[9/26/94 public]
You need do,
dcecp> x cat /.:/sec/xattrschema

[9/26/94 public]
Thanks, I must be getting too tired...

  dcecp> x ca /.:/sec/xattrschema                     
  /.../absolut_cell/sec/xattrschema/pre_auth_req
  /.../absolut_cell/sec/xattrschema/pwd_val_type
  /.../absolut_cell/sec/xattrschema/pwd_mgmt_binding
  /.../absolut_cell/sec/xattrschema/X500_DN
  /.../absolut_cell/sec/xattrschema/X500_DSA_Admin
  /.../absolut_cell/sec/xattrschema/disable_time_interval
  /.../absolut_cell/sec/xattrschema/max_invalid_attempts
  /.../absolut_cell/sec/xattrschema/passwd_override
  /.../absolut_cell/sec/xattrschema/test_any
  /.../absolut_cell/sec/xattrschema/test_void
  /.../absolut_cell/sec/xattrschema/test_printstring
  /.../absolut_cell/sec/xattrschema/test_printstring_array
  /.../absolut_cell/sec/xattrschema/test_integer
  /.../absolut_cell/sec/xattrschema/test_bytes
  /.../absolut_cell/sec/xattrschema/test_confidential_bytes
  /.../absolut_cell/sec/xattrschema/test_i18n_data
  /.../absolut_cell/sec/xattrschema/test_uuid
  /.../absolut_cell/sec/xattrschema/test_attr_set
  /.../absolut_cell/sec/xattrschema/test_binding



CR Number                     : 12282
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dts
Short Description             : dts show fails after restart of dtsd
Reported Date                 : 9/21/94
Found in Baseline             : 1.1b18
Found Date                    : 9/21/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : dts_ops.c, dts_util.c, clock.c, dcp_dts.h
Sensitivity                   : public

[9/21/94 public]

While playing with the server object, I started and stopped
dts.  I had successfully done a 'dts show'.
The following fails when it shouldn't:

dcecp> dts stop
dcecp> server cat -exec
dcecp> dts show
Error: Connection request rejected
dcecp> ps -ef | grep dts
    root 28019     1  0 10:08:16 ?        0:00 dtstimed
     tom 28238 28234  1 11:02:33 ttyp0    0:00 grep dts
    root 28068     1  0 10:08:28 ?        0:00 dts_ntp_provider -h server4 -p 600 -i 30
dcecp> server start dtsd
158f5f34-d555-11cd-ab6f-08000932c186
dcecp> ps -ef | grep dts 
    root 28019     1  0 10:08:16 ?        0:00 dtstimed
     tom 28242 28234  3 11:02:57 ttyp0    0:00 grep dts
    root 28239 26841  0 11:02:47 ?        0:01 /opt/dcelocal/bin/dtsd -s
    root 28068     1  1 10:08:28 ?        0:00 dts_ntp_provider -h server4 -p 600 -i 30
dcecp> dts show
Error: Connection request rejected


I would guess that dcecp isn't refreshing its binding after
a failed attempt to contact dtsd.

[9/21/94 public]
If you are running latest bits (bl18). dcecp will rebind AFTER a failure.
(ie. a dts show after the failed dts show will work). I currently don't
have code that will try to rebind around a failed RPC. Let me know how
important that would be. With recent changes that I have made, it wouldn't
be too hard to do.

[9/23/94 public]
Well, I had been putting this off for about 8 months, but it was time.
dcecp will now rebind upon comm errors. You should hopefully never
see a communications problem again. The current scheme it to try and 
rebind once. A compiled in #define DCP_DTS_MAX_RETRIES can be changed
from it's current value of 1 in case you decide to abuse DCE with more 
retries per RPC. Submitted.

[10/6/94 public]
closed.



CR Number                     : 12276
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : server
Short Description             : server doesn't parse /.:/hosts/name/config/srvrexec/obj right
Reported Date                 : 9/20/94
Found in Baseline             : 1.1
Found Date                    : 9/20/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : dhd_util.c
Sensitivity                   : public

[9/20/94 public]
server sho /.:/hosts/foster/config/srvrexec/try failed.

[9/21/94 public]
Submitted.

[9/26/94 public]
closed.



CR Number                     : 12275
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : schema
Short Description             : Allow abbreviations for schema attributes.
Reported Date                 : 9/20/94
Found in Baseline             : 1.1b18
Found Date                    : 9/20/94
Severity                      : D
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : schema_utils.c rgy_pgo_utils.c dcp.sams
Sensitivity                   : public

[9/20/94 public]


For example, try this:

dcecp> xattr create <object> -encoding int -aclmgr {prin r r r r}


Note that encoding data types and acl mgrs names cannot be abbreviated.
This also applies to all internal tables of schema attributes.

[9/21/94 public]
Jim: reassign if necessary...

[9/28/94 public]

fixed.

[10/6/94 public]
closed.



CR Number                     : 12268
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : log/acl
Short Description             : generate string bindings
Reported Date                 : 9/20/94
Found in Baseline             : 1.1b18
Found Date                    : 9/20/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : test/admin/dcecp/lib/test_common.tcl
Sensitivity                   : public

[9/20/94 public]
For acl/log and other string bindings. Create a function that generates
string bindings on the fly.

[9/22/94 pubic]
A new proc, dcp_get_binding_info, has been added to test_common.tcl . It
returns a list of the object uuid, protseq, ip addr and enpoint. The
tests need to be updated to use this instead of hard coded info in
the tetexec.cfg file.

dcecp> dcp_get_binding_info /.:/hosts/ninja/dts-entity
019ee420-682d-11c9-a607-08002b0dea7a ncadg_ip_udp 130.105.5.92 1910

[9/27/94 public]
In order to get the correct endpoint, an interface needs to be passed 
in as well as the namespace entry. Changes made. Submitted.

[10/6/94 public]
closed.



CR Number                     : 12262
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp should prohibit certain commands with -c
Reported Date                 : 9/20/94
Found in Baseline             : 1.1
Found Date                    : 9/20/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : main.c commands.c rgy_pgo_account.c
                                rgy_sa_tclif.c
Sensitivity                   : public

[9/20/94 public]

When using the -c option to execute a command dcecp should prohibit commands
that would expose passwords. Currently those commands are:

  login
  account create 
  account modify 
  registry connect

These commands will fail if executed with the password options.

[kevins 9/20/94 public] 

The commands now fail when called with command and a password option.

[9/26/94 public]
closed.



CR Number                     : 12257
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : registry site wandering
Reported Date                 : 9/20/94
Found in Baseline             : 1.1
Found Date                    : 9/20/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : rgy_utils.c
Sensitivity                   : public

[9/20/94 public]

When the cell contains a master and slave replica the site to which dcecp
is bound has a tendency to wander. That is if a principal is created then
a show is done on the principal there is no need to rebind to a new 
registry site, however, that is happening and the slave replica often 
does not have an updated copy of the master replica data. The fix is to
not force the process to rebind.

[9/20/94 public]

The check between current site and requested site no is more lenient when
the requested site access type is less restrictive than the current 
type. Submitted.



CR Number                     : 12256
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : help
Short Description             : no help for help verb
Reported Date                 : 9/19/94
Found in Baseline             : 1.1b17
Found Date                    : 9/19/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : util_help.c
Sensitivity                   : public

[9/19/94 public]
You can't get any help for the verb "help".  We should be able to tell user
about the wonderful -verbose option:

dcecp> princ help help
Error: Unrecognized argument 'help'.
    while executing
"principal help help"
    ("uplevel" body line 1)
    invoked from within
"uplevel [lreplace $args 0 0 $cmds]"
    invoked from within
"return [uplevel [lreplace $args 0 0 $cmds]]..."
    invoked from within
"if {[llength $cmds] == 1} {
            return [uplevel [lreplace $args 0 0 $cmds]]
        }"
    invoked from within
"if {([info level] == 1) && ([info script] == "") && $tcl_interactive} {
        if ![info exists auto_noexec] {
            if [auto_execok $name] {
                return [uplev ..."
    (procedure "unknown" line 29)
    invoked from within
"princ help help"
dcecp> princ help show 
-all                Returns an attribute and xattrs list of the specified principal.
-xattrs             Returns an xattrs list of the specified principal.

Assigned to kevins since John is busy.  Also this is P2 since it's worth
looking at.  If it isn't really easy to fix, we can defer.  The rationale
is that "help" alone will tell you about help -verbose.

[kevins 9/21/94 public] 

Added the capability within dcp_object_help to support the help 'option'.
When this option is specified the function prints only 

dcecp> object help help
-verbose            Show a detailed help message about the component.

submitted.

[9/26/94 public]
closed.



CR Number                     : 12254
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : hostdata
Short Description             : update negative tests
Reported Date                 : 9/19/94
Found in Baseline             : 1.1b18
Found Date                    : 9/19/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : hostdata_*_N.tcl
Sensitivity                   : public

[9/19/94 public]
The negative messages are wrong in:

hostdata_create_N.tcl
hostdata_delete_N.tcl
hostdata_modify_N.tcl
hostdata_show_N.tcl

[9/20/94 public]
Submitted.

[9/26/94 public]
closed.



CR Number                     : 12253
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : hostdata
Short Description             : Not in ts's Makefile
Reported Date                 : 9/19/94
Found in Baseline             : 1.1b18
Found Date                    : 9/19/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : test/admin/dcecp/ts/Makefile
Sensitivity                   : public

[9/19/94 public]
hostdata is not listed in the test/admin/dcecp/ts Makefile.

[9/19/94 public]
Submitted.

[9/26/94 public]
closed.



CR Number                     : 12247
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : Check that sec_attr_t structures are free'd correctly.
Reported Date                 : 9/19/94
Found in Baseline             : 1.1b17
Found Date                    : 9/19/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : rgy.c rgy.h rgy_pgo_account.c rgy_pgo_group.c schema_ops.c schema_utils.c
Sensitivity                   : public

[9/19/94 public]

Quite a few functions in dcecp use the sec_attr_t structure to
hold data before processing.  This is especially true of any
function which calls get_attr_values().  These sec_attr_t
structures are in some cases not being free'd correctly at the
end of processing, resulting in a memory leak.

The security api provides three possible functions to use to
help free the internally allocated memory in the sec_attr_t
structure.  They are
   sec_attr_util_free()
   sec_attr_util_inst_free()
   sec_attr_util_inst_free_ptrs()

The dcecp era code needs to be checked to insure that all
sec_attr_t structures are properly free'd (using one of the
above api calls) after usage.

[9/23/94 public]

Fixed several memory leaks in the
principal*, group*, org*, account*,
xattrschema* commands. Memory acquired
from get_attr_values(), encode_schema_attr(),
parse_schema_switch_list(), 
parse_modify_schema_switch_list(),
encode_modify_schema_attr(), and
Tcl_SplitList() was not being released
in various functions.

[10/6/94 public]
closed.



CR Number                     : 12242
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rpc
Short Description             : Cell names are hard coded.
Reported Date                 : 9/19/94
Found in Baseline             : 1.1
Found Date                    : 9/19/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : test/admin/dcecp/ts/rpc/*
Sensitivity                   : public

[9/19/94 public]

In several of the rpc group functional tests the cell name is hard 
coded. This is of course very, very, very bad...

[9/19/94 public]
Duh. Submitted.

[9/26/94 public]
closed.



CR Number                     : 12240
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : server
Short Description             : server ping cmd should accept tcl binding
Reported Date                 : 9/19/94
Found in Baseline             : 1.1b18
Found Date                    : 9/19/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : dhd_server.c
Sensitivity                   : public

[9/19/94 public]
Server ping cmd should be able to accept tcl syntax binding string.

[9/22/94 public]
Submitted.

[9/26/94 public]
closed.



CR Number                     : 12233
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : aud
Short Description             : audtrail show doesn't close trail
Reported Date                 : 9/16/94
Found in Baseline             : 1.1b17
Found Date                    : 9/16/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : admin/dcecp/aud_ops.c
Sensitivity                   : public

[9/16/94 public]
audtrail show should close each trail after it is read.

[9/19/94 public]
Submitted.

[9/26/94 public]
closed.



CR Number                     : 12226
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : secval
Short Description             : secval status core'd
Reported Date                 : 9/16/94
Found in Baseline             : 1.1b17
Found Date                    : 9/16/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : dhd_secval.c
Sensitivity                   : public

[9/16/94 public]

dcp_sv_status needs to check the return value of binding_from_rpc_binding.
It failed and I got a coredump

[9/16/94 public]
I noticed this today also while adding the proper code to handle TCL
bindings, assigned to me, will submit RTS today....

[9/19/94 public]
Fix submitted.

[9/26/94 public]
closed.



CR Number                     : 12220
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : cdsalias command problems
Reported Date                 : 9/16/94
Found in Baseline             : 1.1
Found Date                    : 9/16/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : cdscp_cellalias.c dcp.sams
Sensitivity                   : public

[9/16/94 public]

The command options for cdsalias create are not in the right order
they are:
dcecp> cdsalias help
create              Create the named cdsalias for the local cell.
delete              Delete the existing cdsalias for the local cell.
set                 Set the named cdsalias as the primary cdsalias for the local cell.
catalog             Show the cdsaliases for the named cell.
help                Print summary of command-line options and abort.
operations          Return valid operations for command.

They should be:

dcecp> cdsalias help
catalog             Show the cdsaliases for the named cell.
create              Create the named cdsalias for the local cell.
delete              Delete the existing cdsalias for the local cell.
help                Print summary of command-line options and abort.
set                 Set the named cdsalias as the primary cdsalias for the local cell.
operations          Return valid operations for command.

The error message when an alias name is left off the command is wrong.
It currently is:

Error: No clearinghouse name.

It shoudl be:

Error: No cell alias name.

When creating an alias if the name passed in is:

dcecp> cdsalias create /.:/foo 

The name that is created is in fact '/.:/foo' The cellname should be expanded 
before it is passed into the cds api.

[9/16/94 public]

Made all approptiate fixes.

[9/26/94 public]
Okay, my fault.  "set" and "help" should be reversed.  "help" and
"operations" should be the last ones, just like all the other commands.  I
did: 

dcecp> cdsalias help
catalog             Show the cdsaliases for the named cell.
create              Create the named cdsalias for the local cell.
delete              Delete the existing cdsalias for the local cell.
help                Print summary of command-line options and abort.
set                 Set the named cdsalias as the primary cdsalias for the local cell.
operations          Return valid operations for command.

[9/27/94 public]

Modified the arg_table to order the help messages.
dcecp> cdsalias help
catalog             Show the cdsaliases for the named cell.
connect             Establish a hierarchical relationship between two cells.
create              Create the named cdsalias for the local cell.
delete              Delete the existing cdsalias for the local cell.
set                 Set the named cdsalias as the primary cdsalias for the local cell.
help                Print summary of command-line options and abort.
operations          Return valid operations for command.



CR Number                     : 12218
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : main
Short Description             : improve output speed
Reported Date                 : 9/15/94
Found in Baseline             : 1.1b17
Found Date                    : 9/15/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : dcecp
Sensitivity                   : public

[9/15/94 public]
To increase output performance, replace the two putchar() loops in
main.c with fwrite that outputs in reasonable size blocks.

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12214
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : name
Short Description             : securely getting name of auditd
Reported Date                 : 9/15/94
Found in Baseline             : 1.1
Found Date                    : 9/15/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : aud_util.c, aud.h, dcp.sams
Sensitivity                   : public

[9/15/94 public]
This may be a dcecp issue, I'm not sure.

dcecp does authenticated rpc to auditd (makes sense since it is part of
the TCB).  In order to do authenticated RPC it does rpc_mgmt_inq_princ_name
(or whatever the API call is).  It makes this call using a binding handle
obtained from RPC NSI routines, which go through CDS.

Boom:  CDS is not part of the TCB.  so it must be possible to detemrine
auditd's name some other way, perhaps algorithmically from the hostname.
Comments?

[9/16/94]
From Shyh-Wei Luan:

Yes, the function is simple, given now that DCE 1.1 auditd is per host, and
it uses the machine principal's identity.

auditd_identity(hostname) = hosts/hostname/self

BTW, it is wrong to get auditd's identity though rpc_mgmt_inq_princ_name()
even if CDS is trusted (but not storing the principal name).  CDS only
gives
a binding, and the communication for getting the principal name
(rpc_mgmt_inq_princ_name() call) from server could be spoofed even if the
binding info is correct.

[9/16/94 public]
I don't have time to think about this right now, but instead of it getting
lost or delayed, I'll pose it here.  Remember that DCE hostnames are not
architected to be hosts/<hostname>/.  What am I given to construct the name
from?

[09/16/94 public]
Of course, Shyh-Wei didn't literraly mean "hosts/hostname" but he
meant "the output of dce_cf_prin_name_from_host" :-)

[9/16/94 public]
Ok. I have a handle on what I need to do. Rich S. and Walt have blessed
this, but just to recap...

I will determine the prinipal name that the audit daemon is running under
via out-of-band means. I can use CDS to lookup the binding info for
the audit daemon, and by using my 'trusted' principal name, I can
do a rpc_binding_set_auth_info() call which will fail if the principal
I have is wrong.

Does this work for everybody?

[9/16/94 public]
Turned out to be slightly more tricky, now does:

If the user is talking to the local daemon, then look at the local 
identity file for the principal that the daemon is using. If the user 
passes in a namespace entry, build the principal name from it and get 
the bindings from CDS. If the user passes in a string binding, call 
rpc_mgmt_inq_server_princ_name().

Submitted.

[9/26/94 public]
closed.



CR Number                     : 12213
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dts and aud
Short Description             : cache binding handle to server
Reported Date                 : 9/15/94
Found in Baseline             : 1.1b17
Found Date                    : 9/15/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : admin/dcecp/dts_util.c aud_util.c
Sensitivity                   : public

[9/15/94 public]
The binding handles to the dts servers and audit server should be cached.

[9/15/94 public]
Submitted.

[9/26/94 public]
closed.



CR Number                     : 12212
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : Using "-xattrs" in prin/group/org show prints extra blank line in output
Reported Date                 : 9/15/94
Found in Baseline             : 1.1b17
Found Date                    : 9/15/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : admin/dcecp/rgy.c admin/dcecp/rgy_pgo_account.c admin/dcecp/rgy_pgo_group.c admin/dcecp/rgy_utils.c
Sensitivity                   : public

[9/15/94 public]

Using "-xattrs" in a prin/group/org show command
produces an extra leading blank line in output.
print_attrs() unconditionally prints a leading
newline char in the output.

[9/26/94 public]
closed.



CR Number                     : 12199
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : 'account generate' needs functional tests.
Reported Date                 : 9/15/94
Found in Baseline             : 1.1
Found Date                    : 9/15/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : account_generate_N.tcl
                                             account_generate_P.tcl
Sensitivity                   : public

[9/15/94 public]

The account generate command needs functional tests.

[9/16/94 public]

Generated functional tests.

[9/26/94 public]
closed.



CR Number                     : 12197
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : group
Short Description             : group list lost cell name
Reported Date                 : 9/14/94
Found in Baseline             : 1.1b17
Found Date                    : 9/14/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : rgy_pgo_group.c rgy_pgo_account.c
Sensitivity                   : public

[9/14/94 public]
The cell name seems to have been lost (or munged here).

dcecp> group list subsys/dce/dts-servers   
/hosts/frick/self
/hosts/ninja/self
/hosts/ice/self
dcecp> group list subsys/dce/cds-server 
/hosts/frick/cds-server
/hosts/frick/gda
dcecp> group list subsys/dce/dts-servers -s
hosts/frick/self
hosts/ninja/self
hosts/ice/self
dcecp> echo $_b(sec)
/.../dcecp_cell.osf.org/subsys/dce/sec/master

[9/15/94 public]

The cell_name was getting munged when simplename was being requested.

[9/26/94 public]
closed.



CR Number                     : 12194
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : CDS_CellAliases format wrong
Reported Date                 : 9/14/94
Found in Baseline             : 1.1b17
Found Date                    : 9/14/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : cdscp_utils.c
Sensitivity                   : public

[9/14/94 public]
Assigned to kevin since Roger is out (also I'm not sure who's code it is).
I had created an alias and they were shown:

  dcecp> dir show /.:
  {RPC_ClassVersion {01 00}}
  {CDS_CTS 1994-09-14-14:19:17.066926100/08-00-09-25-13-52}
  {CDS_UTS 1994-09-14-23:37:48.557632100/08-00-09-25-13-52}
  {CDS_ObjectUUID d8c5ef54-cfce-11cd-864b-080009251352}
  {CDS_Replicas
   {{CH_UUID d7fd337a-cfce-11cd-864b-080009251352}
    {CH_Name /.../absolut_cell/absolut_ch}
    {Replica_Type Master}  
    {Tower {ncacn_ip_tcp 130.105.5.93}}
    {Tower {ncadg_ip_udp 130.105.5.93}}}}
  {CDS_AllUpTo 1994-09-14-23:38:41.377074100/08-00-09-25-13-52}
  {CDS_Convergence medium}
  {CDS_InCHName new_dir}
  {CDS_DirectoryVersion 4.0}
  {CDS_ReplicaState on}
  {CDS_ReplicaType Master}
  {CDS_LastSkulk 1994-09-14-23:38:41.377074100/08-00-09-25-13-52}
  {CDS_LastUpdate 1994-09-14-23:37:48.557632100/08-00-09-25-13-52}
  {CDS_Epoch d8c5eacc-cfce-11cd-864b-080009251352}
  {CDS_ReplicaVersion 4.0}
  {CDS_CellAliases 
   {Member /.../absolut_alias}
   {Group /.../absolut_cell}}

I then deleted the alias and looked at it:

  dcecp> cdsalias delete /.../absolut_alias
  dcecp> dir show /.:
  {RPC_ClassVersion {01 00}}
  {CDS_CTS 1994-09-14-14:19:17.066926100/08-00-09-25-13-52}
  {CDS_UTS 1994-09-14-23:37:48.557632100/08-00-09-25-13-52}
  {CDS_ObjectUUID d8c5ef54-cfce-11cd-864b-080009251352}
  {CDS_Replicas
   {{CH_UUID d7fd337a-cfce-11cd-864b-080009251352}
    {CH_Name /.../absolut_cell/absolut_ch}
    {Replica_Type Master}  
    {Tower {ncacn_ip_tcp 130.105.5.93}}
    {Tower {ncadg_ip_udp 130.105.5.93}}}}
  {CDS_AllUpTo 1994-09-14-23:38:41.377074100/08-00-09-25-13-52}
  {CDS_Convergence medium}
  {CDS_InCHName new_dir}
  {CDS_DirectoryVersion 4.0}
  {CDS_ReplicaState on}
  {CDS_ReplicaType Master}
  {CDS_LastSkulk 1994-09-14-23:38:41.377074100/08-00-09-25-13-52}
  {CDS_LastUpdate 1994-09-14-23:37:48.557632100/08-00-09-25-13-52}
  {CDS_Epoch d8c5eacc-cfce-11cd-864b-080009251352}
  {CDS_ReplicaVersion 4.0}
  {CDS_CellAliases Group /.../absolut_cell}
  dcecp>

The format of CDS_CellAliases is wrong, it should be:

  {CDS_CellAliases {Group /.../absolut_cell}}

I don't care if there is a newline or not

[kevins 9/15/94 public] 

Trivial fix. How do I test it? I cannot create an alias. 

dcecp> cdsalias create /.../kevins_cell
Error: For cellname commands, the CDS_DirectoryVersion attribute is required to be 3.1 or greater.
dcecp> dir mod /.: -change {CDS_DirectoryVersion 3.1}
Error: Specified attribute cannot be modified

[9/16/94 public]

Modified so that if there is a single entry in the CDS_CellAliases
it looks like:

  {CDS_CellAliases {Group /.../absolut_cell}}



CR Number                     : 12192
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : Here doc problems
Reported Date                 : 9/14/94
Found in Baseline             : 1.1b17
Found Date                    : 9/14/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : admin/dcecp/main.c
Sensitivity                   : public

[9/14/94 public]
This looks strange:

root@surf# dcecp << EOF
if ![ catch { principal show hosts/tsunami/gda} ] {
        principal delete hosts/tsunami/gda
}
if ![ catch {principal show hosts/tsunami/cds-server} ] {
        principal delete hosts/tsunami/cds-server
}
if ![ catch {registry show /.:/subsys/dce/sec/tsunami} ] {
        registry delete /.:/subsys/dce/sec/tsunami
}
EOF
/opt/dcelocal/dcecp /opt/dcelocal/tclif ![ catch { principal show hosts/tsunami/gda} ] {
/opt/dcelocal/dcecp /opt/dcelocal/tcl        principal delete hosts/tsunami/gda
/opt/dcelocal/dcecp /opt/dcelocal/tcl}
if ![ catch {principal show hosts/tsunami/cds-server} ] {
        principal delete hosts/tsunami/cds-server
}
if ![ catch {registry show /.:/subsys/dce/sec/tsunami} ] {
        registry delete /.:/subsys/dce/sec/tsunami
}

[9/15/94 public]
Rewrote the main() loop so that dcecp doesn't scribble on the output when
not running interactively.

[9/26/94 public]
closed.



CR Number                     : 12191
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : xattr
Short Description             : can't view hostdata/data schema
Reported Date                 : 9/14/94
Found in Baseline             : 1.1b17
Found Date                    : 9/14/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : schema_utils.c
Sensitivity                   : public

[9/14/94 public]
dcecp> x s /.:/hosts/absolut/config/hostdata/data
Error: Key not found in database
    while executing
"xattrschema s /.:/hosts/absolut/config/hostdata/data"
    ("uplevel" body line 1)
    invoked from within
"uplevel [lreplace $args 0 0 $cmds]"
    invoked from within
"return [uplevel [lreplace $args 0 0 $cmds]]..."
    invoked from within
"if {[llength $cmds] == 1} {
            return [uplevel [lreplace $args 0 0 $cmds]]
        }"
    invoked from within
"if {([info level] == 1) && ([info script] == "") && $tcl_interactive} {
        if ![info exists auto_noexec] {
            if [auto_execok $name] {
                return [uplev ..."
    (procedure "unknown" line 29)
    invoked from within
"x s /.:/hosts/absolut/config/hostdata/data"
dcecp> x ca /.:/hosts/absolut/config                
/.../absolut_cell/hosts/absolut/config/hostdata/data
/.../absolut_cell/hosts/absolut/config/hostdata/bindata
/.../absolut_cell/hosts/absolut/config/xattrschema/dtsconfig
/.../absolut_cell/hosts/absolut/config/xattrschema/additional_environ

[9/14/94 public]
The name is wrong, there is OT for it. What it should have been is,
dcecp> x ca /.:/hosts/absolut/config/xattrschema
/.../absolut_cell/hosts/absolut/config/xattrschema/hostdata/data
dcecp> x sh /.:/hosts/absolut/config/xattrschema/hostdata/data

if it doesn't work, then need to check dcecp xattrschema code to
see if it passes "hostdata/data" as attr_name to dce_attr_sch_lookup_by_name(),
if it does, this is DCED xattr bug, if it does not, this is dcecp xattrschema 
bug.

[9/19/94 public]
So now it does this:
dcecp> x cat /.:/hosts/surf/config 
Error: Unknown interface

Which is blocking me.
Forgot to mention that this is on Bl-18.

[9/19/94 public]
Ooops. this works:
dcecp> xattr cat /.:/hosts/surf/config/xattrschema        
/.../surf_cell/hosts/surf/config/xattrschema/hostdata/data
/.../surf_cell/hosts/surf/config/xattrschema/hostdata/bindata
/.../surf_cell/hosts/surf/config/xattrschema/xattrschema/dtsconfig
/.../surf_cell/hosts/surf/config/xattrschema/xattrschema/additional_environ

[9/19/94 public]
The problem is in split_schema_name() which assumes the part of input name 
after the last '/' is schema_attr_name. This doesn't work with dced because 
dced has schema attr name "hostdata/data" which contains '/'. Please see 
schema_utils.c: line 346-352.

Howard, sorry I'm not sure who's responsible for the routine, so I hand 
back to you.

[9/20/94 public]
It's in schema_utils.c so I give it to Jim...

[9/21/94 public]

Changed the parsing code in split_schema_name() to accept
schema objects that contained a '/' character.  Submitted.

[9/26/94 public]
closed.



CR Number                     : 12188
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : server
Short Description             : server cat takes only accepts host/<name>
Reported Date                 : 9/14/94
Found in Baseline             : 1.1b17
Found Date                    : 9/14/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : dced/api/dced_binding.c dcecp/dhd_util.c
Sensitivity                   : public

[9/14/94 public]

"server catalog" takes an optional host name as its argument. I would
expect a fully-qualified host name such as /.:/hosts/speed to work. (I
would also expect the simple name "speed" to work, but maybe it's not
supposed to.) 

However, the only thing that *does* work is "hosts/speed". The fully
qualified name is rejected:

dcecp> server cat /.:/hosts/speed
Error: Bad or wrong arguments
dcecp> server cat hosts/speed     
/.../speeed_cell/hosts/speed/config/srvrconf/ep-compat
/.../speeed_cell/hosts/speed/config/srvrconf/dummy
/.../speeed_cell/hosts/speed/config/srvrconf/test
/.../speeed_cell/hosts/speed/config/srvrconf/noterm
dcecp>

[9/14/94 public]
a fully qualified name should work.

"hosts/speed" should work

"speed" should not work.  Sorry it's DCE conventions that I didn't do.  :-(

[9/14/94 public]
Please, the "catalog" commands are implemented by design and specification
too. If you have read the RFC it states that "catalog" takes optional
a list of hostnames. The "hostname" in DCE is hosts/unix-hostname. The
/.:/hosts/speed is a CDS/NSI entryname, and speed is unix-hostname. The
code works right.

[9/14/94 public]
Yes it says that it is a "hostname".  Maybe that isn't clear enough.  Yes
hostnames in DCE are by convention hosts/absolut.  But you can prepend a
cellname on it to be a fully qualified name.  How would you identify a host
in another cell, which you should be able to do in a "single global
namespace".

[9/21/94 public]
Submitted.

[9/26/94 public]
closed.



CR Number                     : 12185
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : regi
Short Description             : regi del -force doesn't work when the server is down.
Reported Date                 : 9/14/94
Found in Baseline             : 1.1b17
Found Date                    : 9/14/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : src/admin/dcecp/rgy_sa_tclif.c
Sensitivity                   : public

[9/14/94 public]

The dcecp command registry delete -force tries to contact
the registry you are trying to delete.
This is counter to the purpose of -force, which you use
when the registry you are deleting is down.

[9/14/94 public]

This is related to CR11073.  I'm going to try to change dcecp
functionality so that we don't have to wait for
"sec_rgy_bind_update()" to handle this. Keep you posted.

[9/16/94 public]

If the registry is down during a -force operation, use the 
sec_id_parse_name() API to obtain the cell name to bind to the 
master in the cell. Note that a string binding specification to a
remote cell will not work here.

[10/6/94 public]
closed.



CR Number                     : 12183
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : host task
Short Description             : host unconfigure does not remove host principal
Reported Date                 : 9/14/94
Found in Baseline             : 1.1
Found Date                    : 9/14/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : admin/dcecp/scripts/host.dcp
Sensitivity                   : public

[9/14/94 public]

When performing an unconfigure of a host with the command

host unconf /.:/hosts/citron

the principal:

/.:/hosts/citron/self 

is not removed from the registry. It should be.

[9/22/94 public]
You were running old code. The new code had a syntax error in using
_p. It has been fixed and submitted.

[9/26/94 public]
closed.



CR Number                     : 12177
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dts
Short Description             : typo in clock help
Reported Date                 : 9/14/94
Found in Baseline             : 1.1b17
Found Date                    : 9/14/94
Severity                      : E
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : dcp.sams
Sensitivity                   : public

[9/14/94 public]
 dcecp> clock help
 set                 Set the system clock to the specified time.
 show                Show the current time as a DTS sytle timestamp.
 synchronize         Synchronize the local 'dtsd' with DTS servers.
 compare             Return the differnece between the local clock and a server.
!                               difference
 help                Print summary of command-line options and abort.
 operations          Return valid operations for command.
 dcecp>

[9/14/94 public]
Submitted.



CR Number                     : 12175
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : account catalog terminates to quickly
Reported Date                 : 9/14/94
Found in Baseline             : 1.1
Found Date                    : 9/14/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : rgy.c rgy_pgo_group.c 
                        rgy_pgo_account.c
Sensitivity                   : public

[9/14/94 public]

The account catalog command terminates processing when the first 
end of catalog is returned from the registry. This will cause the
output from many registrys to only display the first.

[kevins 9/14/94 public] 
   The code now continues onto the next registry instead
   of returning. Also the result code is reset prior to
   accessing the registry in account and pgo catalog
   commands. The new method for allocating the output
   buffer needed one more byte. The output buffer is
   allocated based on the size of the cell_name and
   the maximum size of the name allowed by the registry.
   It needed one more byte though to accommodate the
   '/' that goes between them. I also included an
   empty line between multiple registry outputs.

[9/26/94 public]
closed.



CR Number                     : 12174
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp exit codes need to be right
Reported Date                 : 9/13/94
Found in Baseline             : 1.1b17
Found Date                    : 9/13/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : src/admin/dcecp/main.c
Sensitivity                   : public

[9/13/94 public]
dcecp should return 0 if the last command succeeded and 1 if not.  We do
this if we are invoked with a filename, but I don't think so for any other
invocation method (interactive or -c).  In particular, here scripts need to
work: 

  #!/bin/sh
  dcecp <<EOF
  principal delete foo
  EOF
  if "$? -ne 0" ...

[9/13/94 public]
It would be cooler if there was any failure
that the exit status be non-zero:
dcecp <<EOF
delete a
delete b
delete c
EOF

But perhaps this isn't a concern since the script will exit 
if anything fails...

[9/15/94 public]
dcecp now returns the status of the last executing command to the shell.
Submitted.

[9/26/94 public]
closed.



CR Number                     : 12169
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : registry
Short Description             : If last communication status is bad, display error msg in braces.
Reported Date                 : 9/13/94
Found in Baseline             : 1.1b17
Found Date                    : 9/13/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b18
Affected File(s)              : src/admin/dcecp/rgy_sa_replist.c
Sensitivity                   : public

[9/13/94 public]

Self-explanatory.

[9/26/94 public]
closed.



CR Number                     : 12160
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : cdsalias catalog core dumps
Reported Date                 : 9/13/94
Found in Baseline             : 1.1b17
Found Date                    : 9/13/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : cdscp_cellalias.c
Sensitivity                   : public

[9/13/94 public]
The cdsalias catalog command core dumps dcecp.  I'm sure it does it if
there is an alias defined, I *think* it does it even if there isn't an
alias defined.  It did this on an hp, I think jd and mccann did it on a
486.   The trace back is lame:

 0 free@libc + 0x00000008 (hp-ux export stub)
 1 DMEM@libdce + 0xc5190040 (0x11, 0x400bc000, 0, 0)
 2 DMEM@libdce + 0xc5193538 (Address not found (UE302)

Assigned to kevin since Roger Zee is out till Monday.  This is his code.

[9/13/94 public]

There was a pointer being freed that was never allocated.
I also cleaned up some argument checking and processing.
Submitted



CR Number                     : 12152
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : registry
Short Description             : Remove all references to global variable, "site".
Reported Date                 : 9/13/94
Found in Baseline             : 1.1b17
Found Date                    : 9/13/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b18
Affected File(s)              : rgy.h rgy_utils.c rgy_sa_replist.c
Sensitivity                   : public

[9/13/94 public]

Defined in rgy.h, the global variable "site" is no longer needed for
binding purposes.

[9/13/94 public]

Removed the offending variable. Submitted.

[9/26/94 public]
closed.



CR Number                     : 12141
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cell
Short Description             : cell ping output needs work
Reported Date                 : 9/12/94
Found in Baseline             : 1.1b17
Found Date                    : 9/12/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : cell.dcp
Sensitivity                   : public

[9/12/94 public]
dcecp> cell ping
Error: Sec master did not respond./n"/.../dcecp_cell.osf.org/hosts/ninja/dts-entity" did not respond. 0

Both the sec master and ninja's dts server are running.

[kevins 9/19/94 public] 

The output from registry catalog was not being parsed correctly. 
Submitted.

[9/26/94 public]
closed.



CR Number                     : 12139
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cell
Short Description             : cell show output needs work
Reported Date                 : 9/12/94
Found in Baseline             : 1.1b17
Found Date                    : 9/12/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : cell.dcp
Sensitivity                   : public

[9/12/94 public]
Why does the secservers line wrap and the dts servers doesn't?

dcecp> cell show
{secservers /.../dcecp_cell.osf.org/subsys/dce/sec/master
/.../dcecp_cell.osf.org/subsys/dce/sec/ice}
{cdsserver frick}
{dtsservers /.../dcecp_cell.osf.org/hosts/frick/dts-entity /.../dcecp_cell.osf.org/hosts/ice/dts-entity /.../dcecp_cell.osf.org/hosts/ninja/dts-entity}
{hosts frick ice ninja}

Could you make it looks like this...?

dcecp> cell show
{secservers /.../dcecp_cell.osf.org/subsys/dce/sec/master
            /.../dcecp_cell.osf.org/subsys/dce/sec/ice}
{cdsserver frick}
{dtsservers /.../dcecp_cell.osf.org/hosts/frick/dts-entity 
            /.../dcecp_cell.osf.org/hosts/ice/dts-entity 
            /.../dcecp_cell.osf.org/hosts/ninja/dts-entity}
{hosts frick 
       ice 
       ninja}

Should hosts be represented like they are, or as 'hosts/HOSTNAME'?
Shouldn't the 'cdsserver' attribute be 'cdsservers' in case you have
other servers? Are you able to find other cds servers?

[kevins 9/19/94 public] 

Modified the ouput of cell shoe. Also added a -simplename command switch.
Output is now:

dcecp> cell show
{secservers
 /.../drkstr/subsys/dce/sec/citron
 /.../drkstr/subsys/dce/sec/master}
{cdsservers 
 /.../drkstr/hosts/citron
 /.../drkstr/hosts/drkstr}
{dtsservers 
 /.../drkstr/hosts/drkstr}
{hosts
 /.../drkstr/hosts/citron
 /.../drkstr/hosts/drkstr}
dcecp> cell show -simplename
{secservers
 subsys/dce/sec/citron
 subsys/dce/sec/master}
{cdsservers 
 hosts/citron
 hosts/drkstr}
{dtsservers 
 hosts/drkstr}
{hosts
 hosts/citron
 hosts/drkstr}

Submitted.

[9/26/94 public]
closed.



CR Number                     : 12133
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : Positive functional tests check output incorrectly
Reported Date                 : 9/12/94
Found in Baseline             : 1.1
Found Date                    : 9/12/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : registry_show_P.tcl
Sensitivity                   : public

[9/12/94 public]

A registry positive test checks for attribute output instead of policy 
output.

[9/12/94 public]

 The positive test now checks for policy output.

[9/26/94 public]
closed.



CR Number                     : 12126
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : secval status
Short Description             : Proper error text not reported
on error.
Reported Date                 : 9/11/94
Found in Baseline             : 1.1b16
Found Date                    : 9/11/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : dhd_secval.c
Sensitivity                   : public

[9/11/94 public]
The dcecp secval status routine is not properly setting the return status
value so that errors are not displaying the correct catalog message.

[9/12/94 public]
Submitted.

[9/26/94 public]
closed.



CR Number                     : 12122
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rpc
Short Description             : Need a couple of additional endpoint FVTs
Reported Date                 : 9/9/94
Found in Baseline             : 1.1b17
Found Date                    : 9/9/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : endpoint_show_P.tcl, endpoint_show_N.tcl
Sensitivity                   : public

[9/9/94 public]

With the addition of the -uuid option to "endpoint show", there need
to be additional FVTs to make sure that it works, and a negative test
for the combination of -uuid with other options.

Also, there are no tests for the "remote" option (these can be done by
specifying a binding for the local host as an argument).

[9/26/94 public]
closed.



CR Number                     : 12119
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : secval ping
Short Description             : secval ping fvt need setup and cleanup proc
Reported Date                 : 9/8/94
Found in Baseline             : 1.1b16
Found Date                    : 9/8/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : secval_ping_P.tcl
Sensitivity                   : public

[9/8/94 public]
secval ping fvt need setup and cleanup proc.

[9/9/4 public]
Submitted.

[9/26/94 public]
closed.



CR Number                     : 12116
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rpc
Short Description             : Some calls to Tcl_AppendResult have incorrect last argument
Reported Date                 : 9/8/94
Found in Baseline             : 1.1b16
Found Date                    : 9/8/94
Severity                      : D
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : rpccp.c
Sensitivity                   : public

[9/8/94 public]

A number of calls to Tcl_AppendResult in rpccp.c have TCL_STATIC as
their last argument, instead of NULL. This is presumably the result of
incorrectly copying calls to Tcl_SetResult. It's not clear that this
is doing any harm, but it's wrong. (I thought it might be causing the
incomplete output indicated by CR12094, but fixing this didn't make
that any better.)

I have rpccp.c open anyway, so I'll fix it.

[9/9/94 public]
Fix submitted.

[9/26/94 public]
closed.



CR Number                     : 12113
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : compiler warnings
Reported Date                 : 9/8/94
Found in Baseline             : 1.1
Found Date                    : 9/8/94
Severity                      : D
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : rgy.c rgy_utils.c rgy_pgo_utils.c 
        rgy_pgo_group.c rgy_pgo_account.c
Sensitivity                   : public

[9/8/94 public]

There is a pile of compiler warnings in the rgy. I will take care of them.

[9/13/94 public]

Added casts and initializations etc... 
Submitted.

[9/26/94 public]
closed.



CR Number                     : 12110
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : HYP: improve help messages
Reported Date                 : 9/8/94
Found in Baseline             : 1.1b16
Found Date                    : 9/8/94
Severity                      : C
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : dcp.sams
Sensitivity                   : public

[9/8/94 public]
The help texts for options and operations need to be reviewed and improved.
In particular the texts for options should describe which options are
required and which depend on other options.

[9/8/94 public]
We need to come up with a standard way of representing that information.

I suggest suffixing the message with "(required)" for required options.

I have no clue as to how we are to show interdependancies.

[10/5/94 public]
Made messages consistent and under 80 characters (english).
Still don't have required concepts in.  Will open an enh.

[10/25/94 public]
closed.



CR Number                     : 12109
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rpc
Short Description             : add -uuid to endpoint show
Reported Date                 : 9/8/94
Found in Baseline             : 1.1b16
Found Date                    : 9/8/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : rpccp.c, dcp.sams
Sensitivity                   : public

[9/8/94 public]
Rich S. would like this.  Each endpoint map gets a UUID on creation (when
dced starts).  It then exports the UUID as an object UUID.  It's possible
that old object UUID's remain in the RPC entry.  How do you know which ones
to remove?  Answer, you use this new command to find the UUID of the
current endpoint map and remove all others.  We're doing this as a -uuid
option to "endpoint show".  Here is the text from the spec (2nd paragraph
is new):

  .LI
  \*(lBendpoint show\*(lE
  .P
  Returns a list of information about endpoints.  With no options returns all
  the endpoint mappings.  The \*(lB-interface\*(lE, \*(lB-version\*(lE, and
  \*(lB-object\*(lE options can be used so that only those endpoint mappings
  matching the values of the options are returned.  The \*(lB-object\*(lE
  option accepts a list as a value; the others do not.  This command takes no
  arguments.
  .P
  May also be called with the \*(lB-uuid\*(lE option which returns the UUID
  of the endpoint map database.  Each database gets its own UUID on creation
  (e.g., whenever \*(lBdced\*(lE is started).  This UUID is exported as an
  object UUID to the namespace.  Knowing what the current UUID is, allows an
  administrator to delete any other (stale) UUID's which may be in the RPC
  entry.  If the \*(lB-uuid\*(lE option is used, all other options are
  illegal.

It can be implemented by calling the following routine from ep.idl:

  /*
   * E P T _ I N Q _ O B J E C T
   *
   * Inquire Endpoint Map's object id.
   */
  
  [idempotent]
  void ept_inq_object(
      [in]            handle_t            h,
      [out]           uuid_t              *ept_object,
      [out]           error_status_t      *status
  );

[9/8/94 public]
Just to make sure: is the handle that's passed to this IF the RPC
binding handle for the host whose endpoint map is of interest (NULL
for local, etc.)?

[9/8/94 public]
Yep, it's a binding handle to the endpoint map.

[9/9/94 public]
Submitted. FVTs to follow (CR 12122).

[9/26/94 public]
closed.



CR Number                     : 12108
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : pgo era tests don't work right
Reported Date                 : 9/8/94
Found in Baseline             : 1.1b16
Found Date                    : 9/8/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : pgo_era test files
Sensitivity                   : public

[9/8/94 public]

As with the schema tests, there are some strange things going on
with some of the pgo tests.  For example, group_create_era_N
causes secd to core dump (due to the schema create commands in
the startup function).  The org_create_era_N test does the same
thing.

The pgo era tests are currently being reviewed for completeness
and correctness.

[9/19/94 public]

All eighteen pgo era tests, positive and negative, are now up
to date, and all pass as expected.

[9/26/94 public]
closed.



CR Number                     : 12107
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : schema tests don't work right
Reported Date                 : 9/8/94
Found in Baseline             : 1.1b16
Found Date                    : 9/8/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : schema tests
Sensitivity                   : public

[9/8/94 public]

The schema_* functional tests are not working correctly.
Some fail on a regular basis with a secd core dump (reported
in a separate OT), so will probably begin working correctly
when the core dump is fixed.

Here's the current status of the schema tests:

   schema_catalog_N - PASS
   schema_catalog_P - PASS

   schema_show_N - PASS
   schema_show_P - sometimes PASS, sometimes secd core dump

   schema_delete_N - PASS
   schema_delete_P - PASS

   schema_create_N - PASS
   schema_create_P - sometimes secd core dump, sometimes dcecp core dump

   schema_rename_N         - PASS
   schema_rename_P         - FAIL (test is valid, api is not implemented)
   schema_rename_generic_P - PASS

   schema_modify_N         - PASS
   schema_modify_P         - sometimes secd core dump, sometimes dcecp core dump
                             (without core dump will FAIL, api is not implemented)
   schema_modify_generic_P - sometimes secd core dump, sometimes dcecp core dump
                             (without core dump will FAIL, api is not implemented)

   The dcecp core dump that appears looks like this
      0 TMEM@libc
      1 TMEM@libc
      2 sec_attr_util_sch_ent_free_ptr
      3 schema_create
      4 dcp_xattrschema
          :

   We are checking to make sure the schema entries are created correctly
   before they are free'd by sec_attr_util_sch_ent_free_ptr().  If they
   are, an OT against security will be opened.  It's possible that this
   is related to the secd core dump mentioned above.

[9/21/94 public]

   With a fix going in shortly for the secd core dump (ot12106) that
was holding up testing, we can finally verify these tests.  The following
list of tests now PASS for all test cases:

   schema_catalog_N.tcl
   schema_catalog_P.tcl
   schema_create_N.tcl
   schema_create_P.tcl
   schema_delete_N.tcl
   schema_delete_P.tcl
   schema_modify_N.tcl
   schema_rename_N.tcl
   schema_show_N.tcl
   schema_show_P.tcl

The following tests all FAIL because the underlying api calls to
support modification and renaming are not implemented yet.  The
tests were written as real tests, so expect real results.

   schema_modify_P.tcl
   schema_modify_generic_P.tcl
   schema_rename_P.tcl
   schema_rename_generic_P.tcl

[9/26/94 public]
closed.



CR Number                     : 12105
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : dcecp
Subcomponent Name             : dcecp
Short Description             : Core dcecp Smoketest coredumps
Reported Date                 : 9/8/94
Found in Baseline             : 1.1
Found Date                    : 9/8/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : cdscp_utils.c
Sensitivity                   : public

[9/8/94 public]

HOST:		sif
CONFIGURATION:	core dcecp smoketest
CORE FILES:	/u1/RAT_tools/core


output from sif:/u1/RAT_tools/run_commands.log

invoking dcecp smoke test
/u1/RAT_tools/run_commands[20]: 897 Memory fault(coredump)
dcecp returned value is: 
DONE

output from sif:/u1/RAT_tools/dcecp.out

RPC
CDS
Memory fault

[9/8/94 public]
I'll take the first crack at this.

[9/8/94 public]
The command that is failing is:

dcecp> directory show $dir1 -schema             (where $dir1 is /.:/dcecp).

This only seems to fail after doing a:

dcecp> directory show $dir1

(gdb) where
#0  0xa4007e92 in time ()
#1  0xa431cf7f in sec_login_pvt_check_exp (6763704, -1073749276)
#2  0xa4311c60 in sec_login_export_context
    (6763704, 0, 0, -1073749268, -1073749272, -1073749276)
#3  0xa42b43aa in prm_login_context (-1073749208, -1073748004, 0, 0)
#4  0xa42a0279 in cdsEnumAttr
    (-1073749192, 6602752, 1, -1073747900, 0, -1073747616, -1073747876, -1073748004)
#5  0x45c237 in enum_all_attr (interp=0x5830b0, name=0xbfffef50, clr_name=0x0, 
    type=cdsDir, action=ShowAttrType, return_list=0xbfffeb20)
    at /project/dce/build/dce1.1-snap/src/admin/dcecp/cdscp_utils.c:3395
#6  0x453e6d in directory_show (clientData=0x0, interp=0x5830b0, argc=2, argv=0xbffff580)
    at /project/dce/build/dce1.1-snap/src/admin/dcecp/cdscp.c:1423
#7  0x403ec5 in dcp_directory (clientData=0x0, interp=0x5830b0, argc=3, argv=0xbffff580)
    at /project/dce/build/dce1.1-snap/src/admin/dcecp/commands.c:1904
#8  0x4b6d59 in Tcl_Eval (5779632, -1073742612)
#9  0x4c933b in Tcl_RecordAndEval (5779632, -1073742612, 0)
#10 0x4007ff in main (argc=1, argv=0xbffffde8)
    at /project/dce/build/dce1.1-snap/src/admin/dcecp/main.c:445

Reassigned to truitt@apollo.hp.com .

[kevins 9/8/94 public] 

In the function F_timestamp the undeclared symbol, time, was being 
used as a string array. The symbol 'time' is actually a function call. 
Writing into this symbol, of course, had undesirable effects. The 
actual string array is now used.

[9/26/94 public]
closed.



CR Number                     : 12104
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dhd
Short Description             : remove -era from server create
Reported Date                 : 9/8/94
Found in Baseline             : 1.1b16
Found Date                    : 9/8/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : dcp.sams dhd_server.c
Sensitivity                   : public

[9/8/94 public]
There is a "hidden" -era option on the server create command that made it
into the code.  It should be removed.  It was meant as an "Attribute
Option" for ERA's but the -attribute option can already be used this way
(mostly).

[9/9/94 public]
Submitted.

[9/26/94 public]
closed.



CR Number                     : 12095
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : clearinghouse required options
Reported Date                 : 9/7/94
Found in Baseline             : 1.1b16
Found Date                    : 9/7/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : dcp.sams, cdscp_clearinghouse.c
Sensitivity                   : public

[9/7/94 public]
There are two required options to clearinghouse commands that I don't
believe the code enforces as required:

  clearinghouse repair -timestamps
  clearinghouse initiate -checkpoint
 
Assigned to kevins since Roger Z is on vacation.

[9/12/94 public]

Made the options required.

[9/26/94 public]
closed.



CR Number                     : 12094
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : Sometimes output is lost when displaying endpoints.
Reported Date                 : 9/7/94
Found in Baseline             : 1.1b16
Found Date                    : 9/7/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : admin/dcecp/main.c
Sensitivity                   : public

[9/7/94 public]

Notice that not all output is displayed. Output is stopped in the
middle of a line. If you view _r, all info is there.

dcecp> endpoint show
blah, blah
{{object cf6be6b0-ca7a-11cd-8553-0800092734a4}
 {interface {4c878280-3000-0000-0d00-02871400000dcecp> 
dcecp> echo $_r


Note that Martha was having the same difficulty with "prin cat" on
a registry with 250 principals. Only 130 principals were displayed.

[9/7/94 public]

I created 10,000 entries in the registry database. I can only
print up to 236 or so using dcecp. I can print all using rgy_edit.

[9/13/94 public]
I'm working on this.

[9/13/94 public]
This turned out to be two problems. 

First: The endpoint show commands were calling Tcl_AppendResult with 
TCL_STATIC as the last arg instead of NULL. This was bad. This was
fixed.

Second: When printing 10000 principals, the user only saw ~250. The
problem is that printf (at least on OSF/1) has a limit of about 24k 
bytes that it can print at once. Changing the output code in main.c
to putchar() in a loop solves this. Created 10k principals, showed
them all with princ cat on both hp800 and at386.

While looking through principal_catalog() I made some performance
changes that speeded things up remarkably. princ cat of 10613
principals now takes 4 minutes, 23 seconds on an HP720 (sec master).

Submit to follow.

[9/13/94 public]
Submitted. Includes perf changes to group cat, account cat and org cat.

[9/26/94 public]
closed.



CR Number                     : 12093
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : help
Short Description             : point to dcecp man page for misc commands
Reported Date                 : 9/7/94
Found in Baseline             : 1.1b16
Found Date                    : 9/7/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : admin/dcecp/scripts/help.dcp
Sensitivity                   : public

[9/7/94 public]
dcecp help should point the user to the dcecep man page for the
misc commands.

[9/9/94 public]
Submitted change.

[9/26/94 public]
closed.



CR Number                     : 12083
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : audrel001 failing intermittently on dcecp
Reported Date                 : 9/7/94
Found in Baseline             : 1.1b16
Found Date                    : 9/7/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : audrel001.c
Sensitivity                   : public

[9/7/94 public]

If I run the audrel001 system tests for more than 12 hours,
approximately 2/3 of the runs pass however, on approximately
1/3 of the runs fail on printing out the trail from dcecp.

root@dce1> dcecp
dcecp> audtrail show /tmp/auditd_trail
Error: The audit condition is invalid.
The audit condition is invalid.dcecp> 

Haven't determined the exact cause yet, so I have assigned this
to me for further investigation.

If anyone on the dcecp team has any clues
they are appreciated.

[9/7/94 public]

Problem is with audrel001 not audstr001

[9/8/94 public]
Do you still have the trail file around? How big is it? This problem only
happens after 12 or so hours, or can you make it happen sooner? If you 
repeatedly do an audtrail show on the file, will it sometimes fail and
sometimes succeed? Will it ever succeed after it starts to fail?

[9/8/94 public]

Yes, it's on clam in /tmp/auditd_trail
I think it will happen in under 12 hours but I have to try again.

>repeatedly do an audtrail show on the file, will it sometimes fail and
>sometimes succeed?

It will always fail.


>Will it ever succeed after it starts to fail?

On some iterations the the test will pass (can print out the trail)
and on others it will fail. (Approximately 2/3 pass and 1/3 fail).

I will not get a chance to rerun the test immediately,
however, you just need to run audrel001 for a few hours (on an HP)
to get the failure.

[9/8/94 public]

I have reconfigured my cell (on dce1) and am able to get a consistent failure.

I just rerun the "audtry" program in 
 ~bhaim/sb/dce/install/hp800/dcetest/dce1.1/test/tet/system/audtry
on the machine dce1.

And then I do a dcecp, 

root@dce1> dcecp
dcecp> audtrail show /tmp/auditd_trail 
Error: trail file  is corrupted
trail file /tmp/auditd_trail is corrupteddcecp> 
dcecp> 

Note, auditing is running on this node and 
"aud show" and "audevents cat" work.

I am running bl-16.3.

[9/8/94 public]

The audtry program is located in the directory
 ~bhaim/sb/dce/install/hp800/dcetest/dce1.1/test/tet/system/audtry

on the machine dce1.

[9/9/94 public]

The audrel001 test was not clearing NAME.md_index on each loop.
Once I fixed this, I was able to run the test for 12 hours
without failure.

I'll changed the status to fix once I submit this change.

[9/9/94 public]

Fixed and confirmed fixed against bl-17.
Moving to closed.



CR Number                     : 12076
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : Accessing era data while unauth causes failure.
Reported Date                 : 9/7/94
Found in Baseline             : 1.1
Found Date                    : 9/7/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : dcp.sams rgy.c rgy_pgo_account.c 
                                        rgy_pgo_group.c
Sensitivity                   : public

[9/7/94 public]

Accessing era data while unauthenticated causes a failure. One way aroung 
this is to only view the era data when requested. Therefore a new switch
in the show routines, for pgo and account, will attempt to show the era
data. The switch is '-era'.

[9/7/94 public]
actually it should be on:

  principal
  group
  organization
  registry

You can't put ERA's on accounts.  The option should be '-eras' and there
should be a '-all'  By default don't output ERA's unless there is an -eras
option and if so only output them.

[9/12/94 public]
Added -all and -xattrs switches to pgo commands.

[9/26/94 public]
closed.



CR Number                     : 12064
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : clearinghouse
Short Description             : clearing repair prints notices
Reported Date                 : 9/6/94
Found in Baseline             : 1.1b16
Found Date                    : 9/6/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : cdscp_clearinghouse.c
Sensitivity                   : public

[9/6/94 public]
clearinghouse repair prints notice information while it's working.  It
should not:

  dcecp> clearinghouse repair <ch-name>
  Disabling clearinghouse ...
  Analyzing and repairing bad timestamps ...
  Checkpointing clearinghouse ...
  Enabling clearinghouse ...
  Done.
  dcecp>

Assigned to Kevin since Roger is out for two weeks.

[kevins 9/7/94 public] 

Removed dce_printf statements.

[9/26/94 public]
closed.



CR Number                     : 12057
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : Attribute name value uuid defined twice
Reported Date                 : 9/6/94
Found in Baseline             : 1.1
Found Date                    : 9/6/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : rgy.h schema_utils.c
Sensitivity                   : public

[9/6/94 public]

The attribute name value for "uuid" is defined twice in rgy.h.

[9/7/94 public]

Removed the offending reference. Replaced all references with 
rgy_pgo_uuid.

[9/26/94 public]
closed.



CR Number                     : 12050
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : account generate aquires login_context directly
Reported Date                 : 9/6/94
Found in Baseline             : 1.1
Found Date                    : 9/6/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : rgy_pgo_account.c
Sensitivity                   : public

[9/6/94 public]

The account generate command aquires the login context directly 
using sec_login_get_current_context instead of using the global 
login context cache.

[9/6/94 public]

The account generate command now uses the login cache for the login
context.

[9/26/94 public]
closed.



CR Number                     : 12044
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : clearinghouse commands do not check  arguments correctly
Reported Date                 : 9/6/94
Found in Baseline             : 1.1
Found Date                    : 9/6/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : dcp.sams cdscp_clearinghouse.c
Sensitivity                   : public

[9/6/94 public]

The clearinghouse commands do not check arguments correctly.

For instance:

dcecp> clearinghouse create /.:/foo bar

should return the error:

Error: Unrecognized argument 'bar'.

But it returns the error.

Error: Too many arguments specified in command.

[kevins 9/6/94 public] 

Modified messages in dcp.sams and the argument checking order in 
cdscp_clearinghouse.c.

[9/26/94 public]
closed.



CR Number                     : 12039
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : implement cellalias
Reported Date                 : 9/2/94
Found in Baseline             : 1.1b16
Found Date                    : 9/2/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : admin/dcecp/scripts/cellalias.dcp
Sensitivity                   : public

[9/2/94 public]
The cellalias task script needs to be implemented.

[9/26/94 public]
closed.



CR Number                     : 12035
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : utc
Short Description             : bad freeing of result
Reported Date                 : 9/2/94
Found in Baseline             : 1.1b16
Found Date                    : 9/2/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : utc_ops.c
Sensitivity                   : public

[9/2/94 public]
A potential problem was found by inspection. Static results from
utc commands were passed to DCP_SET_RESULT which uses TCL_DYNAMIC
to tell the interperter to free the memory. Static data was being
free'ed.

[9/2/94 public]
Submitted.

[9/26/94 public]
closed.



CR Number                     : 12034
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : aud
Short Description             : typos in sams file
Reported Date                 : 9/2/94
Found in Baseline             : 1.1b17
Found Date                    : 9/2/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : dcp.sams
Sensitivity                   : public

[9/2/94 public]
Recent quoting changes to the sams file introduced some typos.

[9/2/94 public]
Submitted.

[9/26/94 public]
closed.



CR Number                     : 12033
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : aud
Short Description             : core dump in audf create
Reported Date                 : 9/2/94
Found in Baseline             : 1.1b16
Found Date                    : 9/2/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : aud_ops.c
Sensitivity                   : public

[9/2/94 public]
Found a rare core dump. If you create a filter (valid filter name) with
an invalid guide, an error will be reported correctly. If you re-run
this command, dcecp will core dump. An uninitialized pointer is the
culprit.

[9/2/94 public]
Submitted.

[9/26/94 public]
closed.



CR Number                     : 12023
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : link command error messages wrong.
Reported Date                 : 9/2/94
Found in Baseline             : 1.1
Found Date                    : 9/2/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : dcp.sams
Sensitivity                   : public

[9/2/94 public]

The command 'link delete' gives the wrong error message is:

Link name not specified.

it should be:

No link name.

[kevins 9/6/94 public] 

Modified sams file. message is now:

No link name.

[9/26/94 public]
closed.



CR Number                     : 12022
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 12004
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : directory merge functional tests fail
Reported Date                 : 9/2/94
Found in Baseline             : 1.1
Found Date                    : 9/2/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : dir_ops.dcecp
Sensitivity                   : public

[9/2/94 public]


The directory_merge_N.tcl and directory_merge_P.tcl functional tests
fail.

  directory_merge_1_N (IC 1): PASS
  directory_merge_3_N (IC 2): FAIL
  directory_merge_8_N (IC 3): PASS
  directory_merge_9_N (IC 4): PASS
  directory_merge_10_N (IC 5): FAIL
  directory_merge_11_N (IC 6): FAIL
  directory_merge_12_N (IC 7): FAIL
  directory_merge_13_N (IC 8): FAIL

Results for:           
  Tests passing:       3
  Tests failing:       5
  Tests unresolved:    0
  Unknown results:     0


  directory_merge_2_P (IC 1): FAIL
  directory_merge_4_P (IC 2): FAIL
  directory_merge_5_P (IC 3): FAIL
  directory_merge_6_P (IC 4): FAIL
  directory_merge_7_P (IC 5): FAIL
  directory_merge_14_P (IC 6): FAIL

Results for:           
  Tests passing:       0
  Tests failing:       6
  Tests unresolved:    0
  Unknown results:     0

[9/2/94 public]

This looke like it's probably the same problem as described in
CR12020, namely that the script is looking for Clearinghouse_Name
rather than CH_Name.

[9/2/94 public]

Well, although that was true, there's another problem, which is that
all the tests generate extra "No permission to add directories"
messages. I don't know why (yet).

[9/2/94 public]

What I've discovered is that "acl check" is returning ------- for all
directories, despite what's actually on the ACL ("acl show" says
cell_admin has rwdtcia). acl_edit's "get_access" behaves the same way.
I'll attempt to find out if there's already a sec CR against this,
otherwise I'll enter one.

[9/2/94 public]

CR 12026 entered against sec_acl_get_access. And then dup'd to CR
12013, oh well.

[9/7/94 public]

12013 has been fixed, and all the FVTs pass now except for
directory_merge_14_P, which triggers CR12004.

[9/7/94 public]
Submitted the change for the CH_Name attribute. Will mark fixed when
tests all run (probably 9/8, since fix for 12004 is also being
submitted today).

[9/8/94 public]
Tests all pass now. Fixed.

[9/26/94 public]
closed.



CR Number                     : 12020
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cell task script
Short Description             : searching for attr Clearinghouse_Name
Reported Date                 : 9/2/94
Found in Baseline             : 1.1
Found Date                    : 9/2/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : cell.dcp
Sensitivity                   : public

[9/2/94 public]

The cell task script is searching for Clearinghouse_Name instead of
CH_Name. The CDS_Replicas sub-attr clearinghouse name was changed some
time back this did not make it.

[kevins 9/6/94 public] 

The cell task script now looks for CH_Name instead of Clearinghouse_Name.

[9/26/94 public]
closed.



CR Number                     : 12016
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : Messages for directory modify help are misleading
Reported Date                 : 9/2/94
Found in Baseline             : 1.1
Found Date                    : 9/2/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : dcp.sams
Sensitivity                   : public

[9/2/94 public]

The messages for help on the directory mod command are misleading

dcecp> dir help mod
-add                Add an attribute to the named directory
-change             Change an attribute in the named link
-remove             Remove an attribute if possible from the named 
-single             Add a single valued attribute to a directory.
-types              Remove a single value from a multi-valued attribute list.

This should probably be:

dcecp> dir help mod
-add                Add an attribute to the named directory
-change             Change an attribute in the named link
-remove             Remove a value from the named attribute.
-single             Add a single valued attribute to a directory.
-types              Remove an entire attribute type.

[9/2/94 public]

The new messages are:

dcecp> dir help mod
-add                Add an attribute to the named directory.
-change             Change an attribute in the named directory.
-remove             Remove a specific value from the named attribute.
-single             Add a single valued attribute to a directory.
-types              Remove an entire attribute type.

[9/26/94 public]
closed.



CR Number                     : 12010
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rpc
Short Description             : endpoint and rpc test errors
Reported Date                 : 9/1/94
Found in Baseline             : 1.1b16
Found Date                    : 9/1/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : rpcentry_delete_P.tcl
Sensitivity                   : public

[9/1/94 public]
rpcentry_delete_4_P is a negative test. The error string is wrong too.

520|0 1 29121 1 2|==== Contents of test case:
520|0 1 29121 1 3|{ rpcentry delete $RPCENTRY1          list [catch {rpcentry show $RPCENTR
Y1} msg] $msg     }
520|0 1 29121 1 4|Test completed successfully.
520|0 1 29121 1 5|== Test output was:
520|0 1 29121 1 6|{1 {Entry not found}}
520|0 1 29121 1 7|== Expected output was:
520|0 1 29121 1 8|{1 {entry not found}}


rpcentry_delete_5_P has the same problem as 4.

rpcprofile_add_9_N is a negative test, but completes successfully.

This CR covers all the current errors in ts/rpc .

[9/1/94 public]
rpcentry_delete_4_P and _5_P are *not* negative tests. They are
testing to make sure the delete operation works, by proving that the
deleted entry isn't there any more. They say "entry not found" on my
machine; somebody must have updated the RPC error message in the last
week or so. I'll update thet test (sometime after my next install).

rpcprofile_add_9_N completes successfully because that's what the code
does. The bug is in the code (not detecting this combination as an
error), not the test. I'll fix it.

[9/1/94 public]
Submitted the fix for rpcprofile_add.

[9/2/94 public]
Submitted the fix for rpcentry_delete_P.tcl. All done now.

[9/26/94 public]
closed.



CR Number                     : 12002
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : directory add does not report errors correctly.
Reported Date                 : 9/1/94
Found in Baseline             : 1.1
Found Date                    : 9/1/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : cdscp.c
Sensitivity                   : public

[9/1/94 public]


The command 

dcecp> dir add foo bar

does not report the error of an extra argument correctly.

[9/2/94 public]

Modified the order or argument checking and changed stale code 
into macros.

[9/26/94 public]
closed.



CR Number                     : 12000
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : xattrschema should not require authenticated
Reported Date                 : 9/1/94
Found in Baseline             : 1.1b16
Found Date                    : 9/1/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : src/admin/dcecp/schema_ops.c src/admin/dcecp/dhd.h
Sensitivity                   : public

[9/1/94 public]
xattrschema commands want you be authenticated.  They should not. eg:
    dcecp> xattr cat /.:/sec               
    Error: No currently established network identity for which context exists
Works once you dce_login, tho.

[9/26/94 public]
closed.



CR Number                     : 11997
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : Impossible to assign ERA of type X500_DSA_Admin
Reported Date                 : 9/1/94
Found in Baseline             : 1.1
Found Date                    : 9/1/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : rgy_utils.c
Sensitivity                   : public

[9/1/94 public]

Although it is known in the rgy schema, it is not possible to assign ERA values
for the ERA type "X500_DSA_Admin" to principals.  In the following sample dcecp session
the last command does not return at all, nor does it cause the ERA value to be 
stored in the rgy.
All relevant processes (secd ... ) are continuing to run ( on the same host ).

dcecp> princ show helmut
{fullname {}}
{uid 367}
{uuid 0000016f-c57d-21cd-bc00-08002b0f59bb}
{alias no}
{quota unlimited}
{groups gds_sec_grp}
{X500_DN /C=re/O=sni/OU=buba/CN=one}
dcecp>  principal modify helmut -add {X500_NOT_EXIST { foo } }
Error: schema entry not found
dcecp>  principal modify helmut -add {X500_DSA_Admin { {eins} {zwei}}}

[9/1/94 public]

Using a bl16 install, with the latest and greatest version
of dcecp, I cannot duplicate this problem.  I can use
X500_DSA_Admin as easily as any of the other attributes.

dcecp> principal create jimbo
dcecp> principal modify jimbo -add {X500_DN YourMotherWasAHamster}
dcecp> principal show jimbo
{fullname {}}
{uid 106}
{uuid 0000006a-c5bd-21cd-8b00-080009247461}
{alias no}
{quota unlimited}
{X500_DN YourMotherWasAHamster}
dcecp>
dcecp> principal modify jimbo -add {X500_BLECH "and your father" "smelt" "of elderberries"}
Error: schema entry not found
dcecp>
dcecp> principal modify jimbo -add {X500_DSA_Admin "and your father" "smelt" "of elderberries"}
dcecp> principal show jimbo
{fullname {}}
{uid 106}
{uuid 0000006a-c5bd-21cd-8b00-080009247461}
{alias no}
{quota unlimited}
{X500_DN YourMotherWasAHamster}
{X500_DSA_Admin
 {and your father}
 {smelt}
 {of elderberries}}
dcecp>

But, back during the builds of 8/22 and/or 8/23, there was
a 'break' statement missing in the modify_era_info() routine
which caused an endless loop.  It was fixed quickly, so the
build of 8/24, I believe, should have been ok.

If this error is based on a dcecp version from around that
time in August, then that would explain it.  If it is from
a very recent dcecp build, then I'll have to go back and
address it.

Could somebody there please confirm which build this error
occured on, and if anybody can duplicate it?

[09/08/94 public]
This problem was fixed during a build at the end of August.

[9/26/94 public]
closed.



CR Number                     : 11994
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dcp.sams
Short Description             : check for unused codes
Reported Date                 : 9/1/94
Found in Baseline             : 1.1b16
Found Date                    : 9/1/94
Severity                      : E
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : dcp.sams
Sensitivity                   : public

[9/1/94 public]
okay, how about writting a perl script that scans the
dcp.sams file for codes that cannot be found in source code
that lives in /project/dce/build/dce1.1/src/admin/dcecp/*.[ch].

Would help to make the file smaller.

[9/13/94 public]
A list of 89 codes have been set out to dcecp-team-ext. They will be
deleted tomorrow if they are not needed.

[9/20/94 public]
The following twelve entries from the original list of 89 are still needed.
The reason they did not appear to be used is because they are automaticly 
generated durring preprocessing.

  dcp_s_cds_no_cache_name
  dcp_s_cds_no_dir_name
  dcp_s_cds_no_link_name
  dcp_s_cds_no_obj_name
  dcp_s_rgy_no_acct_name
  dcp_s_rgy_no_group_name
  dcp_s_rgy_no_org_name
  dcp_s_rgy_no_princ_name
  dcp_s_rgy_no_schema_name
  dcp_s_rpc_no_entry_name
  dcp_s_rpc_no_group_name
  dcp_s_rpc_no_profile_name

The following entries have been removed. The code was recompiled and 
all negative tests were run and a wide variety of positive tests were run.

  dcp_s_acl_inv_entry_perms
  dcp_s_acl_no_default_cell
  dcp_s_aud_bad_bindings_in_file
  dcp_s_aud_binding_fail
  dcp_s_aud_cannot_open_daemon_identity_file
  dcp_s_bad_object
  dcp_s_bad_shell
  dcp_s_cds_attr_list
  dcp_s_cds_undef_attr
  dcp_s_dhd_bad_bindata 
  dcp_s_dhd_bad_hostname 
  dcp_s_dhd_unknown_authz_svc
  dcp_s_dhd_unsuported_attr 
  dcp_s_dts_bad_attribute
  dcp_s_invalid_option
  dcp_s_invalid_verb
  dcp_s_no_aud_endpoint
  dcp_s_no_dts_endpoint
  dcp_s_not_an_option
  dcp_s_notfound
  dcp_s_opt_requires_two_args
  dcp_s_rgy_era_attribute_exists
  dcp_s_rgy_era_unsupported
  dcp_s_rgy_pwdlen_not_int
  dcp_s_rgy_pwdlife_not_int
  dcp_s_rgy_random_password
  dcp_s_rgy_random_password_err
  dcp_s_rgy_sa_no_server
  dcp_s_rgy_sa_replica_not_found
  dcp_s_too_few_args
  dcp_s_too_few_values
  dcp_s_warn_unauthenticated
  dcp_t_aud_actions
  dcp_t_cds_allupto
  dcp_t_cds_child_add_help
  dcp_t_cds_chlastaddress
  dcp_t_cds_chname
  dcp_t_cds_chuppointers
  dcp_t_cds_class
  dcp_t_cds_classversion
  dcp_t_cds_classversion
  dcp_t_cds_create_linkto_help
  dcp_t_cds_cts
  dcp_t_cds_dir_mod_single_help
  dcp_t_cds_directoryversion
  dcp_t_cds_grouprevode
  dcp_t_cds_inchname
  dcp_t_cds_link_mod_single_help
  dcp_t_cds_linktimeout
  dcp_t_cds_member_add_help
  dcp_t_cds_members
  dcp_t_cds_nscellname
  dcp_t_cds_parentpointer
  dcp_t_cds_prntuuid
  dcp_t_cds_replicas      
  dcp_t_cds_towers
  dcp_t_cds_upgradeto
  dcp_t_cds_uts
  dcp_t_dhd_unknown_authn_svc
  dcp_t_dhd_unknown_prot_level
  dcp_t_dts_modify_actcourierrole_help
  dcp_t_dts_modify_epoch_help
  dcp_t_dts_modify_serverprincipal_help
  dcp_t_generic_opts
  dcp_t_rgy_acct_md_cr_attr_help
  dcp_t_rgy_group_mod_gid_help
  dcp_t_rgy_group_mod_name_help
  dcp_t_rgy_name
  dcp_t_rgy_org_mod_alias_help
  dcp_t_rgy_org_mod_name_help
  dcp_t_rgy_org_mod_orgid_help
  dcp_t_rgy_password
  dcp_t_rgy_princ_mod_name_help
  dcp_t_rgy_sa_connect_to_help
  dcp_t_rgy_temp_message

[9/20/94 public]
Submitted..

[9/26/94 public]
closed.



CR Number                     : 11987
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : Makefile should build -ansi on the at386
Reported Date                 : 8/31/94
Found in Baseline             : 1.1b16
Found Date                    : 8/31/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : admin/dcecp/Makefile
Sensitivity                   : public

[8/31/94 public]
The Makefile needs to be changed to have an AT396_CFLAGS line which
specifies -ansi.

[9/1/94 public]
Submitted.

[9/26/94 public]
closed.



CR Number                     : 11986
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : Bogus free() in main.c
Reported Date                 : 8/31/94
Found in Baseline             : 1.1b16
Found Date                    : 8/31/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : admin/dcecp/main.c
Sensitivity                   : public

[8/31/94 public]
The free call (free(&one_command)) in main.c is bogus. It should
be free(one_command).

[9/1/94 public]
Submitted.

[9/26/94 public]
closed.



CR Number                     : 11985
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : registry
Short Description             : rgy_context not changed if cache is valid, same access_type, & same cell name.
Reported Date                 : 8/31/94
Found in Baseline             : 1.1b16
Found Date                    : 8/31/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : rgy_utils.c, rgy_sa_tclif.c
Sensitivity                   : public

[8/31/94 public]

In module rgy_utils.c routine open_site_by_access(), the 
following check needs to be reworked:

if(site_cache[cache_entry].valid &&
    (site_cache[cache_entry].access_type == *access)){
    dce_cf_same_cell_name((char *)site,
			  (char *)site_cache[cache_entry].cell_name,
                          &is_same_cell,
                          &status);
    if(!strcmp((char *)site,(char *)site_cache[cache_entry].site) ||
       is_same_cell)
        return error_status_ok;
}

In the example below, "regi cat" has an access_type of
"site_query" just like "regi sh -rep" and the
site_cache[cache_entry] is valid.  Also, "site" has the same
cell name as "site_cache[cache_entry].site".
As a result, the "rgy_context" is not changed and the function
exits here.
But I wanted a new "rgy_context" for the master.


This affects dcecp registry FVT test registry_show_022_P: 
registry_show_P.tcl 15

Or try:
dcecp> regi cat
/.../dcecp_cell.osf.org/subsys/dce/sec/master
/.../dcecp_cell.osf.org/subsys/dce/sec/ice
dcecp> set _s(sec)
/.../dcecp_cell.osf.org/subsys/dce/sec/ice
dcecp> set _s(sec) /.../dcecp_cell.osf.org/subsys/dce/sec/master
/.../dcecp_cell.osf.org/subsys/dce/sec/master
dcecp> regi sh -rep
{name /.../dcecp_cell.osf.org/subsys/dce/sec/ice}
{type slave}
{cell /.../dcecp_cell.osf.org}
{uuid b1fcad69-c506-11cd-be39-0000c0239a70}
{status enabled}
{lastupdtime 1994-08-31-18:13:30.000-04:00I-----}
{lastupdseq 0.361}
{addresses
 {ncacn_ip_tcp 130.105.5.45}
 {ncadg_ip_udp 130.105.5.45}}
{masteraddrs
 {ncacn_ip_tcp 130.105.5.121}
 {ncadg_ip_udp 130.105.5.121}}
{masterseqnum 0.100}
{masteruuid 19879514-c503-11cd-8574-0800092734a4}
{version secd.dce.1.1}

Note that "regi sh -rep" should be getting info on the master
since _s(sec) was set to the master.

[9/6/94 public]

Modified the process for validating the current site. If the user specifies
that the access is site_specific then the site takes precedence over the 
cell.

[9/16/94 public]

This is still not ideal. The site should always take precedence over
the cell no matter what access type. 

In module rgy_utils.c routine open_site_by_access(), the 
following check should be:

if ((site_cache[cache_entry].valid) &&
    (site_cache[cache_entry].access_type == *access)
    (!strcmp((char *)site,(char *)site_cache[cache_entry].site))) {
	     return error_status_ok;
}

Here's another scenario:
dcecp> regi delete /.../dcecp_cell.osf.org/subsys/dce/sec/ice -force
dcecp> set _s(sec) /.../dcecp_cell.osf.org/subsys/dce/sec/ice
dcecp> regi cat
/.../dcecp_cell.osf.org/subsys/dce/sec/master
/.../dcecp_cell.osf.org/subsys/dce/sec/ice
dcecp> set _s(sec) /.../dcecp_cell.osf.org/subsys/dce/sec/master
dcecp> regi cat
/.../dcecp_cell.osf.org/subsys/dce/sec/master
/.../dcecp_cell.osf.org/subsys/dce/sec/ice


However, the master registry knows that there is only one replica
in the replica list. The output should be:

dcecp> set _s(sec) /.../dcecp_cell.osf.org/subsys/dce/sec/master
dcecp> regi cat
/.../dcecp_cell.osf.org/subsys/dce/sec/master
       
Kevin, if you agree, I have the fix in my sandbox.

[9/16/94 public]

I cannot agree. This change would mean that every pgo, account and
schema command would rebind the registry since all binding is done
via the cell name and never matches the rgy site. Why not use
site_specific? If that still causes problems we can discuss it with 
Howard.

[9/16/94 public]

That's OK with me. I'll change the "registry catalog" command to
bind with an access type of "site_specific".

All sec_admin-related registry commands now only use the
"site_specific" and "site_update" access types.

[9/16/94 public]
Ran FVT tests for dcecp registry catalog and everything works fine.
And tested the original scenario:

dcecp> regi delete /.../dcecp_cell.osf.org/subsys/dce/sec/ice -force
dcecp> set _s(sec) /.../dcecp_cell.osf.org/subsys/dce/sec/ice
dcecp> regi cat
/.../dcecp_cell.osf.org/subsys/dce/sec/master
/.../dcecp_cell.osf.org/subsys/dce/sec/ice
dcecp> set _s(sec) /.../dcecp_cell.osf.org/subsys/dce/sec/master
dcecp> regi cat
/.../dcecp_cell.osf.org/subsys/dce/sec/master

[9/26/94 public]
closed.



CR Number                     : 11983
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp slow in printing 10000
principal accounts
Reported Date                 : 8/31/94
Found in Baseline             : 1.1b16
Found Date                    : 8/31/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : rgy.c, rgy_pgo_*.c
Sensitivity                   : public

[8/31/94 public]

In the process of creating 10,000 principal accounts, I used 
dcecp to monitor the progress of the registry update. I used 
the "principal catalog" command to display that names of the 
principals thus far entered. What is found was that I had to 
wait a very long time before I got back  the burst of output. 

To print ~6271 accounts took 42 minutes. 

I will be getting more accurate times when I am done testing.

The behavior of rgy_edit is different. rgy_edit starts to 
print right away, one principal at a time.

Neither program allows me to selectively pick principals names
or ids to list, unless I write a script to do it. This is way 
too much to ask.

[9/15/94 public]
Performance changes now allow 10613 principals to be cataloged in
4 minutes 23 seconds. dcecp will still generate all principals
before showing any of them (you have to sit and wait for about
four minutes).

Currently the security API does not allow the client to select
which principals to return. dcecp would have to retrieve all
princiapls and then just display the ones you want.

Howard, should the be marked fix, or should we leave it open 
for later work on selecting output?

[9/15/94 public]
Nice performance improvement (what an understatement :-)

If everything is submitted please mark this fixed.
Sorry Martha there isn't much we can do now about wildcarding of principal
names.  The API doesn't allow it.  Besides, you're smart, you can write a
script.  :-)

I'll open an enh for 1.2 to handling wildcarding wherever a name is
accepted.  The important point is that it be consistent between services,
like CDS and SEC.

[9/15/94 public]
Submitted.

[9/26/94 public]
closed.



CR Number                     : 11973
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : unable to add or modify account policy information
Reported Date                 : 8/31/94
Found in Baseline             : 1.1
Found Date                    : 8/31/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : rgy.c
Sensitivity                   : public

[8/31/94 public]

I am currently unable to add or modify account policy information. 

For instance, this command does nothing.

dcecp> account mod kevins -change "maxtktrenew 1:0:0"

[8/31/94 public]

The status of sec_rgy_auth_plcy_get_info was being checked properly. 
If no specific policy existed for an account this call would return 
sec_rgy_object_not_found. This is a valid return, however, it was not 
being trapped as such.

[kevins 9/01/94 public] 

Sigh this is still a problem with creating an account. Reopened.

[9/1/94 public]

When creating an account with a maxtktrenew the code was not checking for 
existence of maxtktrenew.

Submitted.

[9/26/94 public]
closed.



CR Number                     : 11972
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : user authorization checked before arguments are verified.
Reported Date                 : 8/31/94
Found in Baseline             : 1.1
Found Date                    : 8/31/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : rgy_utils.c
Sensitivity                   : public

[8/31/94 public]

The user authentication is checked before arguments are verified. 
This is because sec_id_parse_name attempts to use a NULL registry 
binding handle.

[8/31/94 public]

The function parse_account_switches now calls dcp_id_parse_name to 
aquire the residual names for the org and group.

[9/26/94 public]
closed.



CR Number                     : 11970
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dhd
Short Description             : dhd_server.c has bogus variables
Reported Date                 : 8/31/94
Found in Baseline             : 1.1b16
Found Date                    : 8/31/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : dhd_server.c dcp.sams dhd.h dhd_util.c rgy_utils.c
Sensitivity                   : public

[8/31/94 public]

In order to submit the changes to support pgo modify -remove
functionalify, the prototype for modify_era_info() changed.
Three new variables were added.  The file dhd_server.c is the
only other dcecp file outside the era world that uses the
modify_era_info() function.  Fake variables were added to
the modify_era_info() call in dhd_server.c just to ensure
dhd_server.c would build.  In no way are those variables
defined or used correctly.

[9/1/94 public]
Submitted

[9/26/94 public]
closed.



CR Number                     : 11968
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : setting auth on binding handles
Reported Date                 : 8/30/94
Found in Baseline             : 1.1b16
Found Date                    : 8/30/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : too many to list.
Sensitivity                   : public

[8/30/94 public]
This is one bug for everyone to update.  When you get a binding handle you
should do the following to set the authentication level to use:

       #include <util_login.c>

     if (dcp_is_logged_in())
        rpc_binding_set_auth_info(binding,
                                  princ_name,
                                  rpc_c_protect_level_default,
				  rpc_c_authn_default, 
				  login_context,
				  rpc_c_authz_dce,
				  &st);
     else 
        rpc_binding_set_auth_info(binding,
                                  princ_name,
                                  rpc_c_protect_level_none,
				  rpc_c_authn_none, 
				  NULL,
				  rpc_c_authz_none,
				  &st);

Check off here when done:

* account   
* acl        
* aud           
* audevents     
* audfilter     
* audtrail      
* cdscache     
* cdsalias      
* clearinghouse 
* clock         
* directory  
* dts           
* endpoint  
* group     
  hostdata   
  keytab     
* link       
* log           
* object     
* org       
* principal 
* registry  
* rpcentry
* rpcgroup
* rpcprofile
  secval        
  server        
* uuid      
* xattrschema
* misc

[8/31/94 public]
Two questions...

First, is there a difference between calling set_auth_info() with the
none values, and not calling set_auth_info at all?

Secondly, for the auth'ed case, why the choice of rpc_c_protect_level_default
and rpc_c_authn_default over rpc_c_authn_level_pkt_privacy and 
rpc_c_authn_dce_secret?

[8/31/94 public]
Two answers...

First, no but think of the case where you have a binding handle from a
previous call and now (due to a logout or something) you want to make an
unauth'ed call.

Secondly, because they are the defaults :-)

Oh, and a third, the important item in the examples above was using the new
dcp_is_logged_in() call and doing such a check for all bindings.  In the
CDS case you set a flag to pass to the CDSPI instead of calling
rpc_binding_set_auth_info, in the decd cases you call
dced_bind_set_auth_info().

[9/1/94 public]
In case it's not obvious, you need to include <util_login.h> not <util_login.c>
Submitted dcp_is_logged_in() and dts and aud changes.

[9/1/94 public]
The NSI doesn't give you access to the binding handle to annotate.  No work
there :-)

[9/8/94 public]
Made the necessary modifications for "acl" and "log" support.

[kevins 9/12/94 public] 

Made changes for pgo, account, dir, link, obj, clearinghouse, cdsalias
and cdscache.

[9/12/94 public]
endpoint doesn't need to be done for the same reason as the rpc stuff.
uuid never needed to be done.  :-)

Only things left are dced objects, so reassigning to Ping.

[9/12/94 public]
The dced_bind_set_auth_info req. a current login_context. The
dcp_is_logged_in doesn't return current one in queue and a 
sec_login_get_current_context will still be needed. This makes
sense to keep current code. Per Howard permission, close this
bug.



CR Number                     : 11953
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : organization create/modify cause seg faults.
Reported Date                 : 8/30/94
Found in Baseline             : 1.1
Found Date                    : 8/30/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : rgy_utils.c, dcp.sams
Sensitivity                   : public

[8/30/94 public]

The command 

dcecp> organization create foo -attribute {pwdminlen}

causes a seg fault.

[8/31/94 public]


Code now verifies that an attribute value is supplied as required. 
Submitted.

[9/26/94 public]
closed.



CR Number                     : 11950
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : dcecp
Subcomponent Name             : aud
Short Description             : dcecp cores on large aud trail
Reported Date                 : 8/30/94
Found in Baseline             : 1.1b16
Found Date                    : 8/30/94
Severity                      : A
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : dcecp
Sensitivity                   : public

[8/30/94 public]

dcecp core dumps on a medium to large size audit trail (> 3 Meg)
The way I created my audit trail was to run audstr001 system test
for 3 to 4 hours. And then I tried to print out the trail with dcecp.

root@inman> ls -l /opt/dcelocal/var/security/sec_audit_trail
-rw-rw-rw-   1 root     bin             3146600 Aug 29 18:41 /opt/dcelocal/var/security/sec_audit_trail


(gdb) run
Starting program: /opt/dcelocal/bin/dcecp 
dcecp> audtrail show /opt/dcelocal/var/security/sec_audit_trail


Program received signal 11, Segmentation fault
0xa404089c in strcpy ()
(gdb) where
#0  0xa404089c in strcpy ()
#1  0xbfffef40 in cma__g_delay_cv ()
#2  0x4d4085 in Tcl_AppendResult (5755056, 4475240, 5900384, 0)
#3  0x449156 in audtrail_show (clientData=0x0, interp=0x57d0b0, argc=2, 
    argv=0xbffff1d0)
    at /project/dce/build/dce1.1-snap/src/admin/dcecp/aud_ops.c:2200
#4  0x404e75 in dcp_audtrail (clientData=0x0, interp=0x57d0b0, argc=2, 
    argv=0xbffff1d0)
    at /project/dce/build/dce1.1-snap/src/admin/dcecp/commands.c:2548
#5  0x4b2001 in Tcl_Eval (5755056, -1073743856)
#6  0x4c45e3 in Tcl_RecordAndEval (5755056, -1073743856, 0)
#7  0x40079f in main (argc=1, argv=0xbffff90c)
    at /project/dce/build/dce1.1-snap/src/admin/dcecp/main.c:421

[9/8/94 public]
I've spent two full days trying to track this down. Something in 
the dce_aud_next/dce_aud_print/dce_aud_discard loop is corrupting
memory.

With the trail that Bruce supplied, it currently takes 8612 iterations
of the loop before the seg fault occurs. 

There is a memory leak in dce_aud_print that I have in my sandbox. Robert, 
let me know if you want it submitted. The registry was never getting 
closed correctly.

[ninja]:/usr/sandbox/dcecp/src/security/audit/libaudit> bdiff -b evt_read.c
./security/audit/libaudit/evt_read.c
Comparing the file in your sandbox with revision 1.1.2.16.
877c877
<     if (output_uuids) {
---
>     if (!output_uuids) {

[9/9/94 public]
Above noted change to evt_read.c has been submitted.

[02/26/94 public]
Downgraded because this is not a P0 nor does it cause a test to fail.

[9/26/94 public]
I disagree with this bug being downgraded - since it is known that sec audit
trails grow large very quickly, and since the dcecp audit trail read is the
only provided way to read an audit trail - if this isn't fixed it doesn't 
make sense to even turn on auditing for security.  Since the problem is also
found in any program that a user writes to read the audit trail, the file is
essentially unreadable.  Putting this back to a 1.

[09/27/94 public]
I agree that this is very important.  That's why I tried to reproduce:
I did produce a 3.1 Mb trail, which then I read with dcecp,
producing a 5.2 Mb ascii dump of the trail, which then I could view.
So, if there is a problem, it is not related to size of the trail.
As it is, this CR should be canceled unless it can be reproduced,
and then we should look at the circumstances of the test.

[09/28/94 public]

I ran 'aud disable' and 'aud stop' before I dcecp the trail file.
I still get a core dump.
This time the audit trail prints out for about 5 minutes information
and then it core dumps. 

3 event specific info items
item 1: long int 1
item 2: char string hosts/clam/cds-server
item 3: char string subsys/dce/cds-server
--- End of an event record --- 

Memory fault(coredump)

To recreate this bug you can run audstr001 for 4 hours and then
try and print out the audit trail.

[9/28/94 public]
to try and save the 4 hours, could you try to get a backtrace from the core
file you got and include it in this CR.

[9/28/94 public]

Here's the traceback from the core dump:

Program received signal 11, Segmentation fault
0xa404089c in strcpy ()
(gdb) where
#0  0xa404089c in strcpy ()
#1  0xa4040890 in strcpy ()
#2  0x4bff27 in Tcl_SetVar (5673136, -1073746216, 10899456, 1)
#3  0x47cc79 in dcp_general_set_var (interp=0x5690b0, varname=0x4001f9 "_r", 
    varname_index=0x0, 
    new_element=0xa65000 "\n--- Dumping an event record --- Event Number: 272\nClient: /.../clam_cell.qadce.osf.org/cell_admin\nNumber of groups: 0\nEvent Outcome: failure \nAuthorization Status: Authorized with a pac\nLocal Time: 1"..., 
    setvar_flags=1) at /project/dce/build/dce1.1/src/admin/dcecp/util_var.c:443
#4  0x400905 in main (argc=13238720, argv=0xbffffa2c)
    at /project/dce/build/dce1.1/src/admin/dcecp/main.c:536

[09/29/94 public]
Because this problem only occurs with large files on an OSF/1 i486 system
due to process memory limitation and because there are two good
workarounds

  1) You can now set DCEAUDITRAILFILESIZE to 1000000 or
  2) Use the -to option to cause dcecp to write to a file instead of
     to a screen

I have reduced the priority to 3 (still an A though cause it is still
will cause a crash if you don't use one of these workarounds), deferred
this to 1.2, and changed the component to dcecp.

possible to not use these workarounds and

[09/30/94 public]

" There is a memory leak in dce_aud_free_header().  This might be the cause of
 the dcecp core dump in scanning a large trail file.

 It should call free(header) before returning!

 Shyh-Wei "

[12/19/95]
Fixed in DCE 1.2.1
Closed



CR Number                     : 11938
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : secval
Short Description             : TCL binding parsing in secval
commands is incorrect.
Reported Date                 : 8/29/94
Found in Baseline             : 1.1b16
Found Date                    : 8/29/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : dhd_secval.c
Sensitivity                   : public
ixed                          : 

[8/29/94 public]

The check for " " logic in determining whether we are dealing with a 
TCL binding or not is not sufficient.  The splitlist() done previously
will take a single TCL binding into 2 seperate elements with no spaces.
Look to the code in dcp_general_split_list.c for the big answer.

[9/19/94 public]
Fix submitted.

[9/26/94 public]
closed.



CR Number                     : 11928
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : server
Short Description             : server obj doesn't accecpt Tcl
syntax binding
Reported Date                 : 8/26/94
Found in Baseline             : 1.1b16
Found Date                    : 8/26/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : dhd_util.c
Sensitivity                   : public

[8/26/94 public]
Server object parse routine need to be changed to accept Tcl
syntax binding, e.g {ncadg_ip_udp 130.105.5.50}. Now it only
accepts string binding.

[8/30/94 public]
Submitted.

[9/26/94 public]
closed.



CR Number                     : 11927
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : aud
Short Description             : dcecp should let the endpoint mapper do its job
Reported Date                 : 8/26/94
Found in Baseline             : 1.1b16
Found Date                    : 8/26/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : admin/dcecp/aud_util.c
Sensitivity                   : public

[8/26/94 public]
Auditing and DTS currently look up the endpoint in the endpoint map when 
binding to their respective servers. It always picks the first endpoint in 
the map (which can be stale). 

dcecp should let rpc_mgmt_inq_princ_name() figure out the endpoint itself.

The code that grovels through the endpoint map should be removed.

[08/27/94 public]
rpc_mgmt_inq_princ_name can't figure out the endpoint -- you must have
a resolved endpoint first.  One way to do this is to invoke a low-cost
"no action" server-specific interface.  Another way is to grovel through
the endpoint database.  Note that if grovelling gives you stale EP's,
having dced resolve it could also give you stale EP's.  There is an
open OT CR about stale EP's. :-)

Cancel?

[8/27/94 public]
But rpc_mgmt_inq_princ_name() CAN figure out the endpoint. The entry coming
back from the namespace has an object uuid in it. The code currently works
without the namespace groveling. 

If I do get a stale EP, what is the best way to catch this,
rpc_mgmt_is_server_listening()? Other ideas?

[08/28/94 public]
I think auditd can (should) help a little bit in this issue: since there is
only one auditd per machine, auditd could export to namespace a hardcoded
obect uuid (as opposed to dynamicaly generated one, which is what 
currently happens.)  In this case, each time auditd registers to ep, or 
exports to namespace, it will overwrite the previous entry, instead of
accumulating new ones.  In this case, there will be at most one stale 
entry, in case auditd is killed, and no grovelling will be necessary.

An alternative, would be for auditd, on bringup, to inquire CDS its own
binding before exporting a new one, ie if one is found, auditd could
reuse same object uuid that was previously exported, and reregister it
with the ep, thus overwriting the previous entry, so again shouldn't
be more than one stale entry in ep, so no grovelling.

I am no rpc guru, but I was thinking more along the lines that when
you get the binding vector, and actually perform an audit operation,
and it fails, then you would try with the other bindings from the
vector, one at a time, untill exhausted all and still not successful,
then you know there is no auditd alive.  Do you want to use rpc_is_
server_listening once, upfront, or put retry logic at every operation?

[9/1/94 public]
I have removed the endpoint code from the binding handle routine in
dcecp. 

I think that having auditd query the namespace for any old entries 
is a good idea, but the RPC folks  may have better ideas.

Because dcecp caches binding handles, the retry logic should be around
every RPC.

I am going to close this RPC, and open two enhancements. One to fix
auditd to be more careful about exporting to the namespace, and another
to have dcecp retry RPC's when they fail.

[9/26/94 public]
closed.



CR Number                     : 11926
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 10963
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : dhd
Short Description             : hostdata show cores on long files
Reported Date                 : 8/26/94
Found in Baseline             : 1.1b16
Found Date                    : 8/26/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : dhd_util.c, rgy_utils.c
Sensitivity                   : public

[8/26/94 public]
dcecp> hostdata cr termcap -ann {termcap file} -stor /etc/termcap -en
dcecp> hostdata s $_n
Memory fault(coredump)
absolut admin/dcecp$ 

Seems to do this on large files.  Try a copy of /etc/termcap on the HP

[8/26/94 public]
Well, I can fix this by allocating a large buffer before calling 
print_attrs(), But the right fix should be that print_attrs() 
in rgy_utils.c allocates memory dynamically because it's ONLY one 
knows how larger the buffer is needed and then caller can just free 
the buffer.

[8/26/94 public]
Check out the DString's package in Tcl.  It's in Outsterhout's book or in
the Tcl man pages.

[8/26/94 public]
This CR is dependent on CR#10963 which is to fix print_attrs() and
I made the severity/priority same as CR#10963's.

[9/26/94 public]
The print_attrs() function has been changed to not use a character
buffer to output it's data.  The function in dhd_util.c which calls
print_attrs() has also been changed to make the call correctly, and
to also not rely on a character buffer.

The command listed above which causes the core dump now
works on an HP, using the new code.  When this is verified
at OSF, this bug can be marked as fixed.

[10/6/94 public]
closed.



CR Number                     : 11924
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : help
Short Description             : help defined twice
Reported Date                 : 8/26/94
Found in Baseline             : 1.1b16
Found Date                    : 8/26/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : admin/dcecp/scripts/{help,verb-object}.dcp
Sensitivity                   : public

[8/26/94 public]
The help command is defined twice.  Once in help.dcp and once in
verb-object.dcp.  It should only be in help.dcp and it should call the
verb-object stuff if called with a non -verbose argument.

[8/30/94 public]
Submitted.

[9/26/94 public]
closed.



CR Number                     : 11922
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : generic era show
Short Description             : schema show for generic era seems wrong
Reported Date                 : 8/26/94
Found in Baseline             : 1.1b16
Found Date                    : 8/26/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b17
Affected File(s)              : rgy_utils.c
Sensitivity                   : public

[8/26/94 public]
The schema show command behaves differently in case of the generic schema. 
The outputs are different and it causes the tests to fail. 
dcecp> xattrschema create /.:/hosts/sanatan/config/xattrschema/testint -encoding integer -aclmgr {org r r r r}
dcecp> xattrschema show /.:/hosts/sanatan/config/xattrschema/testint
{aclmgr {org {{query r} {update r} {test r} {delete r}}}}
{annotation {{applydefs no}
{encoding integer}
{intercell reject}
{multivalued yes}
{reserved no}
{scope {{trigbind {}}
{trigtype none}
{unique no}
{uuid 00000000-0000-0000-0000-000000000000}
dcecp> xattrschema create /.:/sec/xattrschema/testint -encoding integer -aclmgr {org r r r r}
dcecp> xattrschema show /.:/sec/xattrschema/testint
{aclmgr {org {{query r} {update r} {test r} {delete r}}}}
{annotation {}}
{applydefs no}
{encoding integer}
{intercell reject}
{multivalued yes}
{reserved no}
{scope {}}
{trigbind {none {}}}
{trigtype none}
{unique no}
{uuid 1ba34ad2-c10c-11cd-b325-08000927ee90}

Why are annotation and scope fields are displayed differently when they are null?

[8/26/94 public]
Jim, looks like your code.  Let me know if I'm mistaken.

[9/1/94 public]
Yup, my code.  Funny though, the *same* code is used to display a
schema_entry structure, regardless of whether is comes from the
security schema or the generic schema.  When a schema_entry
is created by the call to the security schema, it must treat
empty fields differently than the call that creates attributes
in the generic schema.  Hmm.  Anyway, put in a check for NULL
before the print, so everything works as expected now.

[9/26/94 public]
closed.



CR Number                     : 11921
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : compilation
Short Description             : Compile Warnings on HP
Reported Date                 : 8/26/94
Found in Baseline             : 1.1b16
Found Date                    : 8/26/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : dhd_server.c dhd_secval.c
Sensitivity                   : public

[8/26/94 public]

Fix these:

cc: "/project/dce/build/dce1.1/src/admin/dcecp/dhd_server.c", line 1654:
warnin
g 604: Pointers are not assignment-compatible.
cc: "/project/dce/build/dce1.1/src/admin/dcecp/dhd_server.c", line 1654:
warnin
g 563: Argument #1 is not the correct type.
cc: "/project/dce/build/dce1.1/src/admin/dcecp/dhd_server.c", line 1704:
warnin
g 604: Pointers are not assignment-compatible.
cc: "/project/dce/build/dce1.1/src/admin/dcecp/dhd_server.c", line 1704:
warnin
g 563: Argument #1 is not the correct type.
cc: "/project/dce/build/dce1.1/src/admin/dcecp/dhd_secval.c", line 318:
warning
 604: Pointers are not assignment-compatible.
cc: "/project/dce/build/dce1.1/src/admin/dcecp/dhd_secval.c", line 518:
warning
 604: Pointers are not assignment-compatible.
cc: "/project/dce/build/dce1.1/src/admin/dcecp/dhd_secval.c", line 711:
warning
 604: Pointers are not assignment-compatible.

[9/7/94 public]
The warnings don't show up anymore in the build.

[9/26/94 public]
closed.



CR Number                     : 11916
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : sec
Short Description             : add _b(sec)
Reported Date                 : 8/26/94
Found in Baseline             : 1.1b16
Found Date                    : 8/26/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : src/admin/dcecp/dcecp.h,src/admin/dcecp/util_var.h,src/admin/dcecp/util_var.c,src/admin/dcecp/rgy_utils.c,src/admin/dcecp/rgy_sa_replist.c,src/admin/dcecp/rgy_sa_tclif.c
Sensitivity                   : public

[8/26/94 public]
Support for the new convenience variable _b(sec) needs to be added.  This
replaces the write portions of _s(sec) variable to avoid an annoying use
model for admins.  _b should be read-only for users.  Written up in new
versions of RFC 42.3.

[9/26/94 public]
closed.



CR Number                     : 11911
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : pwd
Short Description             : account generate/-randompwd
Reported Date                 : 8/26/94
Found in Baseline             : 1.1b16
Found Date                    : 8/26/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : src/admin/dcecp/rgy.c src/admin/dcecp/rgy.h src/admin/dcecp/rgy_utils.c src/admin/dcecp/commands.c src/admin/dcecp/dcp.sams
Sensitivity                   : public

[8/26/94 public]
The -randompwd option should be removed from the account modify and account
generate create.  A new account generate command needs to replace it.

(d) `account generate'

    This operation contacts the password generation server to have
    a new password randomly generated and returned to the user.
    DCE 1.1 adds a password generation feature.  Principals may
    have a `pwd_val_type' ERA attached to them.  This defines if
    passwords may or must be generated for the principal they are
    attached too.  If the ERA has the appropriate value, the
    `account generate' command will return a generated password
    that can be used in an `account modify' command Here are
    examples based on the three possible values for the
    `pwd_val_type' ERA:

      (i) `mustgen' -- Password must be generated.

          dcecp> set p [account generate melman]
          newpwdfoo
          dcecp> account modify melman -password $p -mypwd -dce-
          dcecp> account modify melman -password foo -mypwd -dce-
          Error: Password must be randomly generated.
          dcecp>

     (ii) `cangen' -- Password may be generated.

          dcecp> set p [account generate melman]
          newpwdfoo
          dcecp> account modify melman -password $p -mypwd -dce-
          dcecp> account modify melman -password foo -mypwd -dce-
          dcecp>

    (iii) `nogen' -- Password may not be generated.

          dcecp> set p [account generate melman]
          Error: Password may not be generated.
          dcecp> account modify melman -password foo -mypwd -dce-
          dcecp>

    Note that the following should never be done since password
    will be changed in the account but the user will not know the
    value of the new password:

          dcecp> acct mod melman -password [acc gen melman] -mypwd -dce-

[9/26/94 public]
closed.



CR Number                     : 11904
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : link create with bad timeout causes core
Reported Date                 : 8/26/94
Found in Baseline             : 1.1
Found Date                    : 8/26/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : cdscp_link.c
Sensitivity                   : public

[8/26/94 public]


link create /.:/link -to /.:/hosts -timeout abc

causes core dump. However, 

link create /.:/link -attribute {{CDS_LinkTimeout abc}  {CDS_LinkTarget /.:/hosts}}

produces the correct output.

[8/26/94 public]

There was a structure not being initialized. This is fixed.

[9/26/94 public]
closed.



CR Number                     : 11902
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dhd
Short Description             : server show cmd shows some extra whitespaces
Reported Date                 : 8/25/94
Found in Baseline             : 1.1b16
Found Date                    : 8/25/94
Severity                      : E
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : dhd_util.c
Sensitivity                   : public

[8/25/94 public]
Server show cmd shows some extra whitspaces,
dcecp> server show try_tserver
{uuid 003b24d2-a196-1df3-915f-0000c0ba4944}
{program tserver}
{arguments /.:/hosts/foster/test_server}
{prerequisites {}}
{keytabs {}}
{entryname /.:/hosts/foster/test_server}
{services
 {{ifname  {test server}}
         ^^
  {annotation  {dcecp server test program}}
             ^^
  {interface {008bebed-c7c1-1ddc-9cb3-0000c0ba4944 1.0}}
  {bindings   {ncadg_ip_udp 130.105.5.50}}
           ^^^
  {objects 0073f23a-2e1a-1ddd-b73a-0000c0ba4944}
  {flags {}}
  {entryname /.:/hosts/foster/test_server}}}
{principals /.../foster_cell/tserver}
{starton boot auto explicit failure}
{uid 0}
{gid 0}
{dir /project/dce/build/nb_486/install/at386/dcetest/dce1.1/test/tet/functional/admin/dcecp/ts/server}

[8/26/94 public]
Submitted.

[9/26/94 public]
closed.



CR Number                     : 11897
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : list options in alphabetical order
Reported Date                 : 8/25/94
Found in Baseline             : 1.1b15
Found Date                    : 8/25/94
Severity                      : E
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : rgy.c
Sensitivity                   : public

[8/25/94 public]
The options should be in alphabetical order in the arg_table:

dcecp> x hel create 
-attribute          Attribute list to be assigned to the schema to be added
-uuid               Attribute uuid of the schema to be added
-encoding           Attribute encoding type of the schema to be added
-aclmgr             The acl manager set information of the schema to be added
-unique             Unique flag of the schema to be added
-multivalued        Multi-valued flag of the schema to be added
-reserved           Reserved flag of the schema to be added
-applydefs          Apply defaults flag of the schema to be added
-intercell          Intercell action type of the schema to be added
-trigtype           Trig types of the schema to be added
-trigbind           Trig binding information of the schema to be added
-scope              Scope information of the schema to be added
-annotation         Comment information of the schema to be added

[8/30/94 public]
submitted.  rearranged some of the arg_tables.

[9/26/94 public]
closed.



CR Number                     : 11889
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : _s(sec) should not be set by commands
Reported Date                 : 8/25/94
Found in Baseline             : 1.1b17
Found Date                    : 8/25/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : none
Sensitivity                   : public

[8/25/94 public]
#define ASBESTOS_UNDIES

Put youself in the shoes of Joe Administrator...

Gee, let's set up this new cell today. Lets look at what princiapls
are in my old cell...

dcecp> princ cat /.../cool_cell.abc.com
{blah}

Ok, I need to create several of those princiapls over here...

dcecp> princ create {a b c d}
Error: Princiapl already exists (or somthing like that).


Because _s(sec) was set behind the administrators back, the obvious next 
command in the sequence did the wrong thing. This example could be made a 
lot more interesting with principal delete.

I really think that the commands should NOT set _s(sec), they should only
reference it. The user should be the only one to modify _s(*).

#endif

[8/26/94 public]
I'm convinced.  The spec is being changed.  

 _s(*)    to be set by users when they want to specify a server
          never set by dcecp

 _b(sec)  sec only for now.  Written on output.

Another CR will be opened for the code work.



CR Number                     : 11888
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : obsolete constants used
Reported Date                 : 8/25/94
Found in Baseline             : 1.1
Found Date                    : 8/25/94
Severity                      : E
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : rgy_sa_tclif.c
        aud_util.c cdscp_clearinghouse.c dts_util.c log_edit.c
Sensitivity                   : public

[8/25/94 public]

The constants 

rpc_c_authn_level_pkt_integrity
rpc_c_authn_dce_private

are obsolete and need to be replaced with 

rpc_c_protect_level_pkt_integ
rpc_c_authn_dce_secret

[8/25/94 public]

Are you going to fix it thru out dcecp?

src/admin/dcecp> grep -e "rpc_c_authn_level_pkt_integrity" *
rgy_sa_tclif.c:                rpc_c_authn_level_pkt_integrity;

src/admin/dcecp> grep -e "rpc_c_authn_dce_private" *
aud_util.c:                                   rpc_c_authn_dce_private,
cdscp_clearinghouse.c: rpc_c_authn_dce_private,
cdscp_clearinghouse.c: rpc_c_authn_dce_private,
dts_util.c:                                   rpc_c_authn_dce_private,
log_edit.c:                               rpc_c_authn_dce_private,
rgy_sa_tclif.c:                rpc_c_authn_dce_private;
rgy_sa_tclif.c:    sec_key_mgmt_gen_rand_key(rpc_c_authn_dce_private,

[8/26/94 public]

Replaced indicated constants in indicated files.

[9/26/94 public]
closed.



CR Number                     : 11887
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : Build problem with rgy.c.  Merge statements in source.
Reported Date                 : 8/25/94
Found in Baseline             : 1.1b16
Found Date                    : 8/25/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b17
Affected File(s)              : rgy.c
Sensitivity                   : public

[8/25/94 public]

/project/dce/build/dce1.1/src/admin/dcecp/rgy.c: In function
`schema_create':
/project/dce/build/dce1.1/src/admin/dcecp/rgy.c:5842: parse error
before `<'
/project/dce/build/dce1.1/src/admin/dcecp/rgy.c:5842: malformed
floating constant
/project/dce/build/dce1.1/src/admin/dcecp/rgy.c:5846: malformed
floating constant


At line 5842:
/*
 * Initialize the schema attribute name parameter correctly.
*/
<<<<<<< 1.1.4.50
schema_entry.attr_name = malloc(sizeof(char) * (strlen(schema_attr_name) + 1));
	======
schema_entry.attr_name = calloc(strlen(schema_attr_name), sizeof(char));
>>>>>>> 1.1.9.2 
strcpy((char*)schema_entry.attr_name, (char *)schema_attr_name);



CR Number                     : 11876
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : admin/tcl_dce/tclCmdIL.c
Short Description             : tcl_s_cmdil_proc_no_argment" undefined
Reported Date                 : 8/25/94
Found in Baseline             : 1.1
Found Date                    : 8/25/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : tclCmdIL.c
Sensitivity                   : public

[8/25/94 public]

c89 -c    -D_SHARED_LIBRARIES  +z  +w1  -DNO_GETWD=1 -DHAVE_UNISTD_H=1 -DNO_UNION_WAIT=1  -DNEED_MATHERR=1 -DTCL_LIBRARY=\"/opt/dcelocal/tcl\" -D__hppa -Dhp9000s800 -Dhp9000s700 -D__hp9000s800 -D__hp9000s700 -DHPUX -D__hpux -Dunix +DA1.0 -D_HPUX_SOURCE    -I. -I/u3/devobj/sb/nb_ux/src/admin/tcl_dce -I/project/dce/build/dce1.1-snap/src/admin/tcl_dce  -I. -I/u3/devobj/sb/nb_ux/src/admin/tcl_dce -I/project/dce/build/dce1.1-snap/src/admin/tcl_dce -I../tcl7.3 -I/u3/devobj/sb/nb_ux/src/admin/tcl7.3 -I/project/dce/build/dce1.1-snap/src/admin/tcl7.3 -I/u3/devobj/sb/nb_ux/export/hp800/usr/include -I/project/dce/build/dce1.1-snap/export/hp800/usr/include    /project/dce/build/dce1.1-snap/src/admin/tcl_dce/tclCmdIL.c
cc: "/project/dce/build/dce1.1-snap/src/admin/tcl_dce/tclCmdIL.c", line 505: error 1588: "tcl_s_cmdil_proc_no_argment" undefined.
cc: "/project/dce/build/dce1.1-snap/src/admin/tcl_dce/tclCmdIL.c", line 505: warning 563: Argument #1 is not the correct type.
cc: "/project/dce/build/dce1.1-snap/src/admin/tcl_dce/tclCmdIL.c", line 707: warning 508: Statement not reached.
*** Error code 1

[8/25/94 public]
dcecp, not dced.  "Statement not reached" is just a warning.
The "error" makes it A0...

[8/25/94 public]
Evidently tcl_s_cmdil_proc_no_argment got removed in the tcl.sams
submission of yesterday, it's in the previous version of the file
(1.1.2.1).  Mariko could you take a look at this?

[8/25/94 public]
I found and fixed the typo in tcl.sams, but I didn't submit the C file,
which should have done with the submission.  Fixed affected C file.

[8/26/94 public]
closed.



CR Number                     : 11869
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : -linkto should be -to
Reported Date                 : 8/24/94
Found in Baseline             : 1.1b16
Found Date                    : 8/24/94
Severity                      : E
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : cdscp_utils.c
        link_create_P.tcl link_create_N.tcl
Sensitivity                   : public

[8/24/94 public]
The "-linkto" option on link create should just be "-to".
This matches other dcecp commands.

[8/26/94 public]

Also functional tests need to be updated to reflect this change. 
The changes have been made and the tests have been updated.

[9/26/94 public]
closed.



CR Number                     : 11866
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : Should we be using _POSIX_PATH_MAX
Reported Date                 : 8/24/94
Found in Baseline             : 1.1b16
Found Date                    : 8/24/94
Severity                      : D
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : admin/dcecp/{aud_util.c,dts_util.c,dcecp.h}
Sensitivity                   : public

[8/24/94 public]

A while back HP tried building dcecp in a clearcase environment
and the only problem was with the _POSIX_PATH_MAX variable.  We
(Howard, John, me) had a short discussion and thought it would
be ok to change _POSIX_PATH_MAX to PATH_MAX.  This is found in
aud_util.c and dts_util.c

[8/24/94 public]
Yep, PATH_MAX should be used.  In fact it violates the coding style guide
not to use it.  :-)

[8/24/94 public]
I actually tried this a while ago and either the 486 or the HP didn't
define it in any place I could find. I'll go look again.

[8/24/94 public]
The user gets this defined by including /usr/include/limits.h.

[8/24/94 public]
On the HP, PATH_MAX is #ifdef'ed under _XPG2 . Should we define this?
It currently isn't, which is the problem I ran into before.

[8/24/94 public]
I just notcied that the #ifdef _XPG2 is surrounded by 
#ifdef _INCLUDE_XOPEN_SOURCE, so both of them need to be defined (and at 
least one isn't).

[8/25/94 public]
_INCLUDE_XOPEN_SOURCE gets defined by _HPUX_SOURCE.  See some file in
/usr/include/sys I forget which one.  But here is the comment before
PATH_MAX in /usr/include/limits.h on HP:

/*
 * The following limits are not actually invariant, but can vary by file
 * system or device.  the correct values can be determined using the 
 * pathconf() function.  The default values are provided here because the
 * constants are specified by several publications including XPG Issue 2
 * and SVID Issue 2.
 */

How about pahtconf().

[8/25/94 public]
That's what I love about standards, there are so many to choose from :-(

After some discussion, we'll use DCECP_PATH_MAX (1024). Submission to 
follow.

[8/25/94 public]
Submitted.

[9/26/94 public]
closed.



CR Number                     : 11865
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : pgo
Short Description             : principal modify -change command core dumps
Reported Date                 : 8/24/94
Found in Baseline             : 1.1b16
Found Date                    : 8/24/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : rgy_utils.c dcp.sams
Sensitivity                   : public

[8/24/94 public]

The following command core dumps.

   dcecp> principal create gumby
   dcecp> principal modify gumby -change {fullname}
   Memory fault (coredump)

The high points from the core file...

   segmentation violation
   >trace
   0 strcpy@libc
   1 encode_rgy_pgo_item_attr        (rgy_utils.c:4553)
   2 parse_attribute_list            (rgy_utils.c:4784)
   3 principal_modify                (rgy.c:961)

[8/24/94 public]
core dumps are sev A.

[8/25/94 public]

The function encode_rgy_pgo_item_attr now verifies that 2 arguments 
have been passed in, one is the attribute name and the other must be the 
attribute value. If more than two have been passed in an error 
is generated. Submitted.

[9/26/94 public]
closed.



CR Number                     : 11848
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : account manipulation routines incorrectly aquire login_context.
Reported Date                 : 8/24/94
Found in Baseline             : 1.1
Found Date                    : 8/24/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : admin/dcecp/rgy.c
Sensitivity                   : public

[8/24/94 public]

The account modify and account create commands incorrectly aquire the 
login context of the current user. They should aquire the login context 
from the global cache that is maintained by the login control.

[8/26/94 public]
Fixed. Changed all sec_login_get_current_context() calls to use internal
context cache.

[9/26/94 public]
closed.



CR Number                     : 11842
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : task scripts
Short Description             : cell show doesn't display foreign cell information correctly.
Reported Date                 : 8/24/94
Found in Baseline             : 1.1
Found Date                    : 8/24/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : cell.dcp
Sensitivity                   : public

[8/24/94 public]

When communicating with a foreign cell and then communicating with the local 
cell the output of cell show is somewhat munged.


dcecp> cell show
{secservers /.../drkstr/subsys/dce/sec/master}
{cdsserver drkstr}
{dtsservers}
{hosts drkstr}
dcecp> princ cat /.../terrapin_cell.osf.org
/.../terrapin_cell.osf.org/nobody
/.../terrapin_cell.osf.org/root
/.../terrapin_cell.osf.org/daemon
/.../terrapin_cell.osf.org/sys
/.../terrapin_cell.osf.org/bin
/.../terrapin_cell.osf.org/uucp
/.../terrapin_cell.osf.org/who
/.../terrapin_cell.osf.org/mail
/.../terrapin_cell.osf.org/tcb
/.../terrapin_cell.osf.org/dce-ptgt
/.../terrapin_cell.osf.org/dce-rgy
/.../terrapin_cell.osf.org/cell_admin
/.../terrapin_cell.osf.org/krbtgt/terrapin_cell.osf.org
/.../terrapin_cell.osf.org/hosts/merckx/self
/.../terrapin_cell.osf.org/hosts/merckx/cds-server
/.../terrapin_cell.osf.org/hosts/merckx/gda
/.../terrapin_cell.osf.org/hosts/citron/self
/.../terrapin_cell.osf.org/hosts/citron/cds-server
/.../terrapin_cell.osf.org/hosts/citron/gda
/.../terrapin_cell.osf.org/krbtgt/drkstr

dcecp> cell show
{secservers /.../terrapin_cell.osf.org/subsys/dce/sec/master
/.../terrapin_cell.osf.org/subsys/dce/sec/citron}
{cdsserver drkstr}
{dtsservers}
{hosts drkstr}

dcecp> cell show /.:
{secservers /.../terrapin_cell.osf.org/subsys/dce/sec/master
/.../terrapin_cell.osf.org/subsys/dce/sec/citron}
{cdsserver drkstr}
{dtsservers}
{hosts drkstr}

[kevins 8/24/94 public] 

The cell show task script also aquires the name of clients incorrectly.
It currently parses the path name from the namespace. This is incorrect.
Also the task script cell ping uses the ping command it should use the 
dcecp "host ping" command.

I have made these changes and corrected the cell show foreign cell 
inconsistencies.

dcecp> cell show /.:
{secservers /.../drkstr/subsys/dce/sec/master}
{cdsserver drkstr}
{dtsservers}
{hosts drkstr}

dcecp> cell show /.../terrapin_cell.osf.org
{secservers /.../terrapin_cell.osf.org/subsys/dce/sec/master
/.../terrapin_cell.osf.org/subsys/dce/sec/citron}
{cdsserver merckx}
{dtsservers /.../terrapin_cell.osf.org/hosts/citron/dts-entity}
{hosts citron merckx}

dcecp> cell show 
{secservers /.../drkstr/subsys/dce/sec/master}
{cdsserver drkstr}
{dtsservers}
{hosts drkstr}

[9/26/94 public]
closed.



CR Number                     : 11838
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : registry
Short Description             : implement registry set
Reported Date                 : 8/23/94
Found in Baseline             : 1.1b15
Found Date                    : 8/23/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : rgy_sa_tclif.h, rgy_sa_replist.h, rgy_sa_tclif.c, rgy_sa_replist.c, commands.c, dcp.sams, registry.dcp
Sensitivity                   : public

[8/23/94 public]
The sec_admin become and change_master commands can be easily implemented
as a "registry set" command.  This is the last piece of functionality in
sec_admin that is not in dcecp.

[8/24/94 public]

Also, removed all instances of sec_rgy_site_binding_get_info() since
cell and site info is in the site_cache[realtime_cache].

Here's the documentation for the new command:

        NEW                                OLD
    registry set <replica_name>          change_master -to <replica_name>   
    registry set <replica_name> -slave   become -slave 
    registry set <replica_name> -master  become -master 

Registry set command support:

dcecp> regi cat
/.../dcecp_cell.osf.org/subsys/dce/sec/ice      (slave)
/.../dcecp_cell.osf.org/subsys/dce/sec/master   (master)

dcecp> regi set subsys/dce/sec/master 
Error: Replica is the master
dcecp> regi set subsys/dce/sec/ice -slave
Error: Replica is not the master
dcecp> regi set subsys/dce/sec/master -master
Error: Replica is the master

________________________________________
#1) Bind to master, change master to subsys/dce/sec/ice:
dcecp> regi set subsys/dce/sec/ice

dcecp> regi dump
{name /.../dcecp_cell.osf.org/subsys/dce/sec/master}
{type slave}
{cell /.../dcecp_cell.osf.org}
{uuid 08c199b6-b836-11cd-94b4-0800092734a4}
{status enabled}
{lastupdtime 1994-08-22-13:54:07.000-04:00I-----}
{lastupdseq 0.1100}
{addresses 
 {ncacn_ip_tcp 130.105.5.121}
 {ncadg_ip_udp 130.105.5.121}}
{masteraddrs 
 {ncacn_ip_tcp 130.105.5.45}
 {ncadg_ip_udp 130.105.5.45}}
{masterseqnum 0.1101}
{masteruuid 2e7ac32b-b846-11cd-a8cf-0000c0239a70}
{version secd.dce.1.1}

{name /.../dcecp_cell.osf.org/subsys/dce/sec/ice}
{type master}
{cell /.../dcecp_cell.osf.org}
{uuid 2e7ac32b-b846-11cd-a8cf-0000c0239a70}
{status enabled}
{lastupdtime 1994-08-22-14:10:25.000-04:00I-----}
{lastupdseq 0.1101}
{addresses 
 {ncacn_ip_tcp 130.105.5.45}
 {ncadg_ip_udp 130.105.5.45}}
{masteraddrs 
 {ncacn_ip_tcp 130.105.5.45}
 {ncadg_ip_udp 130.105.5.45}}
{masterseqnum 0.1101}
{masteruuid 2e7ac32b-b846-11cd-a8cf-0000c0239a70}
{version secd.dce.1.1}
{updseqqueue {0.1099 0.1101}}

________________________________________
#2) Change replica to a slave replica:
dcecp> regi set subsys/dce/sec/master -slave

dcecp> regi dump
{name /.../dcecp_cell.osf.org/subsys/dce/sec/ice}
{type slave}
{cell /.../dcecp_cell.osf.org}
{uuid 2e7ac32b-b846-11cd-a8cf-0000c0239a70}
{status enabled}
{lastupdtime 1994-08-22-12:26:39.000-04:00I-----}
{lastupdseq 0.1091}
{addresses 
 {ncacn_ip_tcp 130.105.5.45}
 {ncadg_ip_udp 130.105.5.45}}
{masteraddrs 
 {ncacn_ip_tcp 130.105.5.121}
 {ncadg_ip_udp 130.105.5.121}}
{masterseqnum 0.1091}
{masteruuid 08c199b6-b836-11cd-94b4-0800092734a4}
{version secd.dce.1.1}

{name /.../dcecp_cell.osf.org/subsys/dce/sec/master}
{type slave}
{cell /.../dcecp_cell.osf.org}
{uuid 08c199b6-b836-11cd-94b4-0800092734a4}
{status enabled}
{lastupdtime 1994-08-22-12:26:39.000-04:00I-----}
{lastupdseq 0.1091}
{addresses 
 {ncacn_ip_tcp 130.105.5.121}
 {ncadg_ip_udp 130.105.5.121}}
{masteraddrs unknown}
{version secd.dce.1.1}

________________________________________
#3) Change replica to a master replica:
dcecp> regi set subsys/dce/sec/ice -master

dcecp> regi dump
{name /.../dcecp_cell.osf.org/subsys/dce/sec/ice}
{type master}
{cell /.../dcecp_cell.osf.org}
{uuid 2e7ac32b-b846-11cd-a8cf-0000c0239a70}
{status enabled}
{lastupdtime 1994-08-22-14:26:45.000-04:00I-----}
{lastupdseq 0.1104}
{addresses 
 {ncacn_ip_tcp 130.105.5.45}
 {ncadg_ip_udp 130.105.5.45}}
{masteraddrs 
 {ncacn_ip_tcp 130.105.5.45}
 {ncadg_ip_udp 130.105.5.45}}
{masterseqnum 0.1104}
{masteruuid 2e7ac32b-b846-11cd-a8cf-0000c0239a70}
{version secd.dce.1.1}
{updseqqueue {0.1103 0.1104}}

{name /.../dcecp_cell.osf.org/subsys/dce/sec/master}
{type slave}
{cell /.../dcecp_cell.osf.org}
{uuid 08c199b6-b836-11cd-94b4-0800092734a4}
{status enabled}
{lastupdtime 1994-08-22-14:26:45.000-04:00I-----}
{lastupdseq 0.1104}
{addresses 
 {ncacn_ip_tcp 130.105.5.121}
 {ncadg_ip_udp 130.105.5.121}}
{masteraddrs 
 {ncacn_ip_tcp 130.105.5.45}
 {ncadg_ip_udp 130.105.5.45}}
{masterseqnum 0.1104}
{masteruuid 2e7ac32b-b846-11cd-a8cf-0000c0239a70}
{version secd.dce.1.1}

[8/26/94 public]
closed.



CR Number                     : 11835
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : aud
Short Description             : audit commands that do not call parsargv may fail w/ null arg.
Reported Date                 : 8/23/94
Found in Baseline             : 1.1b15
Found Date                    : 8/23/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : admin/dcecp/aud_ops.c
Sensitivity                   : public

[8/23/94 public]
audf cat {} core dumps. For specific commands, the arg length must
be checked.

[8/24/94 public]
Checked in 5 places in aud_ops.c . Submitted.

[9/26/94 public]
closed.



CR Number                     : 11828
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : string to byte conversion returns incorrect type.
Reported Date                 : 8/23/94
Found in Baseline             : 1.1b14
Found Date                    : 8/23/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : cdscp_utils.c
Sensitivity                   : public

[8/23/94 public]

Return types in strByte are mixed between error codes and TCL_ERROR.
This should return error codes or TCL_OK.

[8/24/94 public]
       
This now returns error codes or TCL_OK

[8/26/94 public]
closed.



CR Number                     : 11823
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : signal
Short Description             : Recent signal code cleanup broke signal command
Reported Date                 : 8/23/94
Found in Baseline             : 1.1b15
Found Date                    : 8/23/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : commands.c, util_signal.c, Makefile
Sensitivity                   : public

[8/23/94 public]
Recent changes to the signal code seems to have broken it as shown by
"signal trap {args...}" returning "Invalid argument".

[8/23/94 public]
Backed out util_signal.c to previous version. Problem is that sigaction()
is returning in error. We were not using sigaction previously. 

Downgraded now that the fire is out.

[9/14/94 public]
It was decided that the signal code shouldn't be exposed at all -- it
can't easily be made thread-safe. It is needed by TET, however. So
we've invented a compile-time flag _DCECP_TEST; if this is not
#defined, util_signal.c (and the call to Tcl_InitSignalHandling() in
commands.c) will not be compiled. The Release Notes will be updated to
recommend that the flag be turned off.

[9/26/94 public]
closed.



CR Number                     : 11820
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : intercell communications not consistent
Reported Date                 : 8/23/94
Found in Baseline             : 1.1
Found Date                    : 8/23/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : rpc.c
Sensitivity                   : public

[8/23/94 public]

Currently when performing inter-cell operations dcecp can be confusing 
about which registry it is bound to. This occurs when the _s(sec)
variable is set to a foreign cell and a simple pgo or account name is
provided as an argument for an operation. 

dcecp> set _s(sec)
/.../drkstr
dcecp> princ show cell_admin
{fullname {}}
{uid 100}
{uuid 00000064-ad63-21cd-9400-080009355d0e}
{alias no}
{quota unlimited}
{groups none acct-admin subsys/dce/sec-admin subsys/dce/cds-admin subsys/dce/dts-admin}
dcecp> set _s(sec)           
/.../terrapin_cell.osf.org/subsys/dce/sec/master

The current parsing scheme uses the local registry to find the name
of the cell that is being acted on. This is done with
sec_id_parse_name. If, however, a simple name is passed in the cell
name will always default to the local cell.

[8/25/94 public]

I have changed the simple/fullname algorithm so that when a simplename is
encountered the registry binding will stay the same as it was for the
previous call. If no registry was bound in the previous call the local
registry is opened.

[9/26/94 public]
closed.



CR Number                     : 11816
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rpc
Short Description             : import of list fails if first item doesn't have any matching bindings
Reported Date                 : 8/22/94
Found in Baseline             : 1.1b15
Found Date                    : 8/22/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : rpccp.c
Sensitivity                   : public

[8/22/94 public]

The rpc* import commands, if provided a list of (entries, profiles,
groups) of which the first one has no matching bindings, will fail
with "No matching binding information found." Thus:

dcecp> rpce show {/.:/foo /.:/bar}
{ea65d898-6c2b-11cd-b7ca-080009251352
eed17b08-6c2b-11cd-b7ca-080009251352}

{afbcceec-6c33-11cd-b7ca-080009251352 1.0
  {ncacn_ip_tcp 130.105.4.33 5678}}
{ea65d898-6c2b-11cd-b7ca-080009251352}
dcecp> rpce import {/.:/foo /.:/bar} -i {afbcceec-6c33-11cd-b7ca-080009251352 1.0}
Error: No matching binding information found.
dcecp> rpce import {/.:/bar /.:/foo} -i {afbcceec-6c33-11cd-b7ca-080009251352 1.0}
{ncacn_ip_tcp 130.105.4.33 5678}
dcecp> 

The problem is that the test to see if anything matched is inside the
loop for each argument. I found this while testing the fix for 11015.

[8/22/94 public]
Fixed so that error is only reported if there are no matching bindings
for any of the specified entries.

[9/26/94 public]
closed.



CR Number                     : 11814
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : timestamps wrong
Reported Date                 : 8/22/94
Found in Baseline             : 1.1b14
Found Date                    : 8/22/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : cdscp.h cdscp_utils.c
Sensitivity                   : public

[melman 8/22/94 public] 
This is using the nighly of 8/18.  Note that all the timestamps (CTS, UTS,
AllUpTo, LastSkulk, LastUpdate) have bad values.

  dcecp> dir crea /.:/foo
  dcecp> dir show /.:/foo
  {RPC_ClassVersion {01 00}}
  {CDS_CTS -18034-04-14-18:00:06.756-05:00I0.000/08-00-09-25-13-52}
  {CDS_UTS -17714-11-10-01:24:59.610-05:00I0.000/08-00-09-25-13-52}
  {CDS_ObjectUUID aa1957e8-bdec-11cd-9b32-080009251352}
  {CDS_Replicas
   {{CH_UUID de3401e6-bb98-11cd-aac5-080009251352}
    {CH_Name /.../absolut_cell/absolut_ch}
    {Replica_Type Master}  
    {Tower {ncacn_ip_tcp 130.105.5.93}}
    {Tower {ncadg_ip_udp 130.105.5.93}}}}
  {CDS_AllUpTo -17704-03-18-22:39:31.668-05:00I0.000/08-00-09-25-13-52}
  {CDS_Convergence medium}
  {CDS_ParentPointer
   {{Parent_UUID df13b228-bb98-11cd-aac5-080009251352}
    {Timeout
     {expiration 1994-08-22-16:07:22.738}
     {extension +1-00:00:00.000I0.000}}
    {myname /.../absolut_cell/foo}}}
  {CDS_DirectoryVersion 3.0}
  {CDS_ReplicaState on}
  {CDS_ReplicaType Master}
  {CDS_LastSkulk -17704-03-18-22:39:31.668-05:00I0.000/08-00-09-25-13-52}
  {CDS_LastUpdate -17714-11-10-01:24:59.610-05:00I0.000/08-00-09-25-13-52}
  {CDS_Epoch aadaee3a-bdec-11cd-9b32-080009251352}
  {CDS_ReplicaVersion 3.0}
  dcecp> clock show
  1994-08-22-16:08:03.278-04:00I-----

[8/22/94 public]
John checked a few things:
 * cdscp shows the same bad timestamps
 * the error does NOT occur with lastgoodbuild (bl14.3)

[8/25/94 public]
I extracted the CDS code that builds CDS timestamps.  It doesn't work and
as far as I can tell nothing has changed so I suspect
a DTSS change may be involved.  Here is a program that shows
what we do and it displays garbage.  by the way this works on my 64 bit platform.

#include <time.h>
#include <sys/types.h>
#include <unistd.h>
#include <sys/ioctl.h>
#include <dce/sys_time.h>
#include <dce/utc.h>


#define NSEC_PER_TICK   100L
#define TICKS_PER_SEC   (10L*1000*1000)

static int ticks_per_sec = TICKS_PER_SEC;
static time_quad_t unix_base_quad = {1273708544, 8164711};

/*
 *  DTSS UTC base time is October 15, 1582 (Gregorian).
 *  DNS base time is November 17, 1858 (Smithsonian).
 */
#define BASE_TIME_DIFF_LO   0xC7960000
#define BASE_TIME_DIFF_HI   0x0135886A
static time_quad_t base = {BASE_TIME_DIFF_LO, BASE_TIME_DIFF_HI};
                                                                          
static time_quad_t nulltime = {0,0};

^L
/* Routine proved by dtss - KO - to get cts displayed so that no
 * bits of inaccuracy are lost.  Without this cannot use this display
 * to test equality
 */
static int
dns_asclocaltime (char   *cp,
                  int    stringlen,
                  utc_t  *utcTime)
{
    utc_t utcTimeInt1, utcTimeInt2;
    long tdf;
    int status;

    if (NULL == utcTime)
    {
        if (utc_gettime(&utcTimeInt1))
            return(-1);
    }
    else        
	utcTimeInt1 = *utcTime;

    if (utc_localzone ((char *)0, 0, &tdf, (int *)0, &utcTimeInt1))
        return(-1);

    if (utc_settdf(&utcTimeInt2, &utcTimeInt1, 0))
        return(-1);

    status = dns_ascanytime(cp,stringlen,&utcTimeInt2);
    return(status);

}
#define K_100NS_PER_SEC 10000000
#define MAXISTR 50
#define MAXTSTR 50
static int
dns_ascanytime (char   *cp,
                int    stringlen,
                utc_t  *utcTime)
{
    struct tm tmTime;
    struct tm tmInacc;
    long tns;
    long ins;
    long tdf;
    char timestr[MAXTSTR];


    /*
     * print a local string
     */
    if (utc_anytime(&tmTime,
                    &tns,
                    &tmInacc,
                    &ins,
                    &tdf,
                    utcTime))

        return(-1);

    (void) sprintf(timestr,
                   "%04d-%02d-%02d-%02d:%02d:%02d.%09d",
                   tmTime.tm_year+1900,
                   ++tmTime.tm_mon,
                   tmTime.tm_mday,
                   tmTime.tm_hour,
                   tmTime.tm_min,
                   tmTime.tm_sec,
                   tns);

    if (strlen(timestr) > stringlen)
        return(-1);

    strcpy(cp, timestr);

    return (0);
}

main()
{
  utc_t now;
  time_quad_t newnow;
  time_quad_t temp;
  timespec_t time,inacc;
  long tdf;
  int secs;
  char timebuf[100];

  utc_gettime(&now);
  utc_bintime(&time, &inacc, &tdf, &now);

  /* CVT to CDS base */
  secs = time.tv_sec;
  dns_emul(&ticks_per_sec, &secs, &newnow);
  temp.tq_lo = time.tv_nsec / NSEC_PER_TICK;
  temp.tq_hi = 0;
  dns_qadd(&temp, &newnow, &newnow);
  dns_qadd(&newnow, &unix_base_quad, &newnow);

  /* Convert back and print */
  ADD_time_quad(&newnow, &base, &newnow);

  utc_mkcomptime(&now, &newnow, &nulltime, 0);

  dns_asclocaltime(timebuf, sizeof(timebuf), &now);
  printf("CTS: %s\n", timebuf);
}

[8/25/94 public]

The values returned from utc_gettime() and utc_bintime() are correct.
The problem lies in the call to utc_mkcomptime(), in the 2nd and 3rd
arguments. These are defined as time_quad_t (YARO64BV - yet another 
representation of 64 bit values), whose essential definition is 
struct {
  unsigned int tq_lo;
  unsigned int tq_hi;
}

The function is defined in time/common/utcapi.c as taking UTCValue * .
A UTCValue is typedefed to be an unsigned64, which has the form 
struct { 
 unsigned long hi;
 unsigned long lo ;
}

When we define the following macro 
QUAD_2_UTC(d,s) (d).lo = (s).tq_lo, (d).hi = (s).tq_hi

and add the following 
typedef unsigned64 UTCValue ;
UTCValue v1, v2 ;

...

QUAD_2_UTC(v1,newnow);
QUAD_2_UTC(v2, nulltime);
utc_mkcomptime(&now, &v1, &v2, 0) ;

dns_asclocaltime() prints out a more reasonable value. 

Not a dts problem. Re-assigning to cds.

[8/25/94 public]
Well for 1.0.3 UTCValue was defined the same as CDS.  I don't see how you
can change an API signature and not cause a problem.
The real problem is that unsigned64 should be defined the other way to
match hyper.  I have already OT's that, but this is a dtss problem.
  How many other routines are involved.??

[9/6/94 public]
I've requested permission to submit Janet's fix for this for the cds.  
Modification to dcecp to support it is still required.  dcecp 
should use our format_ts routine in libdce.so or fix their own
F_timestamp structure accordingly.  Reassigning to dcecp.

[melman 9/6/94 public] 
Kevin can you figure out what the fix is and see
what it takes to apply it to dcecp?  Thanks.

[9/7/94 public]

dcecp now uses format_ts to translate the cds format timestamps into
ascii time.

[9/26/94 public]
closed.



CR Number                     : 11803
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : admin/dcecp/rgy_utils.c
Short Description             : operation not allowed
Reported Date                 : 8/22/94
Found in Baseline             : 1.1
Found Date                    : 8/22/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : rgy_utils.c
Sensitivity                   : public

[8/22/94 public]

xlc -c       -g -Dunix -D_BSD  -D_ALL_SOURCE -DAIX32   -I. -I/u1/devobj/sb/nb_rios/src/admin/dcecp -I/project/dce/build/dce1.1-snap/src/admin/dcecp   -I/u1/devobj/sb/nb_rios/export/rios/usr/include -I/project/dce/build/dce1.1-snap/export/rios/usr/include   /project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3903.43: 1506-068 (S) Operation between types long integer and pointer to void is not allowed.
*** Error code 1

[ /test/admin/dced/ts/api at 23:58 (PM) Sunday ]
makepath api/. && cd api &&  exec make MAKEFILE_PASS=BASIC     install_all
make: don't know how to make secval_start (continuing)

[8/22/94 public]
changed a NULL to 0

[8/23/94 public]
closed.



CR Number                     : 11796
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : registry connect fails attempting to generate a foreign account
Reported Date                 : 8/22/94
Found in Baseline             : 1.1
Found Date                    : 8/22/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : rgy_utils.c dcp.sams rgy_sa_tclif.c
Sensitivity                   : public

[8/22/94 public]

When attempting to generate an account in a foreign cell the
command fails with the error message 'DES key has bad
parity'.

The command being used is:

registry connect /.../terrapin_cell.osf.org -facct cell_admin \
                -facctpwd -dce- -forg none -fgroup none -org none -group none \
                -mypwd -dce-

[8/23/94 public]

Changed the key generation and account generation for registry connect.
Added failuure mode cleanup and added error messages for error conditions.
Tested on both HP and 486 machines. I was able to generate intercell 
connections in both directions.

[8/26/94 public]
closed.



CR Number                     : 11794
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : various compiler warnings
Reported Date                 : 8/21/94
Found in Baseline             : 1.1b15
Found Date                    : 8/21/94
Severity                      : E
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : acl_edit.c, cdscp_object.c, cdscp_utils.c, commands.c, dts_ops.c, dts_util.c, util_general.c, util_help.c
Sensitivity                   : public

[8/21/94 public]
fix various compiler warnings on HP and 486

[8/26/94 public]
closed.



CR Number                     : 11792
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : util_signal.c calls tcl's panic()
Reported Date                 : 8/21/94
Found in Baseline             : 1.1b15
Found Date                    : 8/21/94
Severity                      : E
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : admin/dcecp/util_signal.c
Sensitivity                   : public

[8/21/94 public]
util_signal.c calls Tcl's INTERNAL panic() routine in two places.  It
shouldn't.  If nothing else we don't have an ANSI prototype for it :-)

Instead it should directory call:
   fprintf(stderr, (char *)dce_sprintf...)
   abort()

Neither of the two places panic is called should dcecp ever get to.
One is handling deletion of an interp another should be ifdef'ed out.

[8/22/94 public]
Fixed. Submitted.

[8/26/94 public]
closed.



CR Number                     : 11781
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : can't add CDS_UpgradeTo
Reported Date                 : 8/19/94
Found in Baseline             : 1.1b14
Found Date                    : 8/19/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : cdscp_tuils.c
Sensitivity                   : public

[8/19/94 public]
I can't add an attribute of type CDS_UpgradeTo to /.:
Am I doing something stupid?

  dcecp> dir mod /.: -add {CDS_UpgradeTo 3.1}
  Error: Specified attribute type is incorrect
  dcecp> dir show /.: 
  {RPC_ClassVersion {01 00}}
  {CDS_CTS 1994-08-12-09:32:36.654-04:00I0.000/08-00-09-25-13-52}
  {CDS_UTS 1994-08-12-09:33:13.037-04:00I0.000/08-00-09-25-13-52}
  {CDS_ObjectUUID dbf72ac6-b5d9-11cd-a58c-080009251352}
  {CDS_Replicas
   {{CH_UUID db012b80-b5d9-11cd-a58c-080009251352}
    {CH_Name /.../absolut_cell/absolut_ch}
    {Replica_Type Master}  
    {Tower {ncacn_ip_tcp 130.105.5.93}}
    {Tower {ncadg_ip_udp 130.105.5.93}}}}
  {CDS_AllUpTo 1994-08-19-07:24:55.326-04:00I0.000/08-00-09-25-13-52}
  {CDS_Convergence medium}
  {CDS_InCHName new_dir}
  {CDS_DirectoryVersion 3.0}
  {CDS_ReplicaState on}
  {CDS_ReplicaType Master}
  {CDS_LastSkulk 1994-08-19-07:24:55.326-04:00I0.000/08-00-09-25-13-52}
  {CDS_LastUpdate 1994-08-17-13:39:29.094-04:00I0.000/08-00-09-25-13-52}
  {CDS_RingPointer db012b80-b5d9-11cd-a58c-080009251352}
  {CDS_Epoch dbf726ca-b5d9-11cd-a58c-080009251352}
  {CDS_ReplicaVersion 3.0}
  dcecp> fgrep Upgrade /opt/dcelocal/etc/cds_attributes
  1.3.22.1.3.25   CDS_UpgradeTo           Version
  dcecp> dir mod /.:/hosts -add {1.3.22.1.3.25 3.1}      
  Error: Specified attribute type is incorrect

I was able to add it with cdscp:

  dcecp> cdscp set directory /.: CDS_UpgradeTo = 3.1
  dcecp> dir show /.:
  {RPC_ClassVersion {01 00}}
  {CDS_CTS 1994-08-12-09:32:36.654-04:00I0.000/08-00-09-25-13-52}
  {CDS_UTS 1994-08-19-15:38:31.130-04:00I0.000/08-00-09-25-13-52}
  {CDS_ObjectUUID dbf72ac6-b5d9-11cd-a58c-080009251352}
  {CDS_Replicas
   {{CH_UUID db012b80-b5d9-11cd-a58c-080009251352}
    {CH_Name /.../absolut_cell/absolut_ch}
    {Replica_Type Master}  
    {Tower {ncacn_ip_tcp 130.105.5.93}}
    {Tower {ncadg_ip_udp 130.105.5.93}}}}
  {CDS_AllUpTo 1994-08-19-07:24:55.326-04:00I0.000/08-00-09-25-13-52}
  {CDS_Convergence medium}
  {CDS_InCHName new_dir}
  {CDS_DirectoryVersion 3.0}
  {CDS_UpgradeTo 3.1}
  {CDS_ReplicaState on}
  {CDS_ReplicaType Master}
  {CDS_LastSkulk 1994-08-19-07:24:55.326-04:00I0.000/08-00-09-25-13-52}
  {CDS_LastUpdate 1994-08-19-15:38:31.130-04:00I0.000/08-00-09-25-13-52}
  {CDS_RingPointer db012b80-b5d9-11cd-a58c-080009251352}
  {CDS_Epoch dbf726ca-b5d9-11cd-a58c-080009251352}
  {CDS_ReplicaVersion 3.0}

[8/23/94 public]

I was setting the attribute type to cdsSet when in fact it should be 
cdsSingle. I made the proper changes.

[9/26/94 public]
closed.



CR Number                     : 11780
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dts
Short Description             : rewrite "dts catalog" and "clock compare" scripts in C code.
Reported Date                 : 8/19/94
Found in Baseline             : 1.1b14
Found Date                    : 8/19/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : dcp.sams clock.c dts_ops.c
Sensitivity                   : public

[8/19/94 public]
The "dts catalog" and "clock compare" scripts need to be rewritten in
C code because of argument parsing restrictions.

[9/26/94 public]
To be clear, the issue was in the help area to get "dts help catalog" and
"clock help compare" to work.  The is a problem about passing the
clientData argument from Tcl to C code.  It's easily solved by duplicating
the arg_table in the Tcl script but that creates duplicate code (since it
still needs to be in the C code).  But we're at the end of the project and
reimplementing these in C isn't quite trivial.

Solution:
 Dup the arg_table in the Tcl scripts
 Add doc note saying why and that it should be reimplemented in C

Something to note:  It really is easier to write in Tcl than in C.  We
                    did something right.  :-)

[kevins 9/26/94 public] 
What he said. Did exactly as Howard outlined.



CR Number                     : 11778
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : Need support for input of twr bindings
Reported Date                 : 8/19/94
Found in Baseline             : 1.1b14
Found Date                    : 8/19/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : src/admin/dcecp/rgy_utils.c
Sensitivity                   : public

[8/19/94 public]

The support for display of twr bindings has been done, but the
dcecp era functions still do not support input of twr bindings.
The functions encode_schema_attr(), parse_schema_switch_list(),
parse_modify_schema_switch_list(), and encode_modify_schema_attr()
all need to be fixed.  Currently, if a binding type of
sec_attr_bind_type_twrs is detected on input, an "unsupported"
message is displayed.

[9/26/94 public]
closed.



CR Number                     : 11776
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : account
Short Description             : account create/modify don't release acquired memory.
Reported Date                 : 8/19/94
Found in Baseline             : 1.1b14
Found Date                    : 8/19/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : src/admin/dcecp/rgy.c src/admin/dcecp/rgy.h src/admin/dcecp/rgy_utils.c
Sensitivity                   : public

[8/19/94 public]

Memory acquired in rgy_account_create() and rgy_account_modify(),
by calling parse_account_attributes(), is not released upon
function exit.

[8/19/94 public]

Memory leaks fixed in rgy_account_create/modify().

[8/21/94 public]
closed.



CR Number                     : 11767
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : log
Short Description             : remove unnecessary {}'s on output
Reported Date                 : 8/18/94
Found in Baseline             : 1.1
Found Date                    : 8/18/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : dcecp
Sensitivity                   : public

[8/18/94 public]
Routing specifiers and debug routing specifiers work great on input.  But
on output they add unnecessary braces around one word items in the tcl
syntax.  E.g.,

    dcecp> log mod /.:/hosts/ice/dts-entity \
    > -ch {ERROR {STDERR STDOUT {FILE /tmp/jas}}}
    dcecp> log sh $_n
    {ERROR {{STDERR} {STDOUT} {FILE /tmp/jas}}}

    dcecp> log mod /.:/hosts/ice/dts-entity \
    >-ch {FATAL {{FILE /tmp/jas private} STDERR}}
    dcecp> log sh $_n
    {FATAL {{FILE /tmp/jas private} {STDERR}}}

    dcecp> log mod /.:/hosts/ice/dts-entity \
    > -ch {cds {general 7} {{FILE /tmp/jas} STDOUT STDERR}}
    dcecp> log sh $_n
    {cds {general 7} {{FILE /tmp/jas} {STDOUT} {STDERR}}}

    dcecp> log mod /.:/hosts/ice/dts-entity \
    >-ch {dts {{msgs 2} {general 7}} {STDERR STDOUT {FILE /tmp/jas}}}
    dcecp> log sh $_n
    {dts {{msgs 2} {general 7}} {{STDERR} {STDOUT} {FILE /tmp/jas}}}

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 11733
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rpc
Short Description             : RPC/endpoint tests have invalid argument formats
Reported Date                 : 8/17/94
Found in Baseline             : 1.1b14
Found Date                    : 8/17/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : endpoint_create_P.tcl, endpoint_create_N.tcl, endpoint_delete_P.tcl, endpoint_delete_N.tcl, endpoint_show_P.tcl, rpcentry_export_P.tcl, rpcentry_import_P.tcl, rpcentry_import_N.tcl, rpcentry_unexport_P.tcl, rpcentry_unexport_N.tcl, rpcentry_show_P.tcl
Sensitivity                   : public

[8/17/94 public]

The various rpc* and endpoint FVTs don't properly enclose their
TCL-syntax arguments as lists. This had been masked by CRs 10814 and
10328.

Also, the text of some error messages in dcp.sams appears to have
changed, and the negative tests are checking for the wrong thing.

[8/18/94 public]
Closer examination suggested that only the rpcentry and endpoint tests
had these problems. I have fixed and submitted them.

[8/21/94 public]
closed.



CR Number                     : 11732
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rpc
Short Description             : rpcgroup and rpcprofile tests not present in tet_scen
Reported Date                 : 8/17/94
Found in Baseline             : 1.1b14
Found Date                    : 8/17/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : src/test/admin/dcecp/tet_scen
Sensitivity                   : public

[8/17/94 public]

Somehow or other, the rpcgroup and rpcprofile tests never made it into
the tet_scen file.

[8/17/94 public]
I have the appropriate changes to the tet_scen file in my sandbox from
the last time I worked on this. I'll submit later today, don't waste
any effort on this.

[8/18/94 public]
For some definition of "today". :-) Changed the responsible engineer.

[8/18/94 public]
I don't see the problem, it's still "today" :-).

I was holding off on the submit so I could finish my work on getting
all FVT's to run together. Let me know if submitting now would help
you out.

[9/12/94 public]
Submitted on 9/9/94.

[9/26/94 public]
closed.



CR Number                     : 11731
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa,i486
S/W Ref Platform              : osf1,hpux
Component Name                : dcecp
Subcomponent Name             : admin/dcecp/dhd_server.c
Short Description             : Arg #3 is not the correct type
Reported Date                 : 8/17/94
Found in Baseline             : 1.1
Found Date                    : 8/17/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : admin/dcecp/dhd_server.c
Sensitivity                   : public

[8/17/94 public]
c89 -c    -D_SHARED_LIBRARIES   -g  +w1 -D__hppa -Dhp9000s800 -Dhp9000s700 -D__hp9000s800 -D_\
_hp9000s700 -DHPUX -D__hpux -Dunix +DA1.0 -D_HPUX_SOURCE    -I. -I/u3/devobj/sb/nb_ux/src/adm\
in/dcecp -I/project/dce/build/dce1.1-snap/src/admin/dcecp   -I/u3/devobj/sb/nb_ux/export/hp80\
0/usr/include -I/project/dce/build/dce1.1-snap/export/hp800/usr/include    /project/dce/build\
/dce1.1-snap/src/admin/dcecp/dhd_server.c
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/dhd_server.c", line 1616: error 1621: Too\
 few arguments for "sec_attr_util_alloc_copy".
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/dhd_server.c", line 1617: warning 604: Po\
inters are not assignment-compatible.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/dhd_server.c", line 1617: warning 563: Ar\
gument #1 is not the correct type.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/dhd_server.c", line 1617: warning 604: Po\
inters are not assignment-compatible.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/dhd_server.c", line 1617: warning 563: Ar\
gument #3 is not the correct type.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/dhd_server.c", line 1634: error 1621: Too\
 few arguments for "sec_attr_util_alloc_copy".
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/dhd_server.c", line 1635: warning 604: Po\
inters are not assignment-compatible.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/dhd_server.c", line 1635: warning 563: Ar\
gument #1 is not the correct type.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/dhd_server.c", line 1635: warning 604: Po\
inters are not assignment-compatible.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/dhd_server.c", line 1635: warning 563: Ar\
gument #3 is not the correct type.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/dhd_server.c", line 1726: error 1621: Too\
 few arguments for "sec_attr_util_alloc_copy".
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/dhd_server.c", line 1728: warning 604: Po\
inters are not assignment-compatible.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/dhd_server.c", line 1728: warning 563: Ar\
gument #1 is not the correct type.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/dhd_server.c", line 1728: warning 604: Po\
inters are not assignment-compatible.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/dhd_server.c", line 1728: warning 563: Ar\
gument #3 is not the correct type.
*** Error code 1

[8/17/94 public]
Uncommented NULL 1st arg to sec_attr_util_alloc_copy() calls.

[8/18/94 public]
closed.



CR Number                     : 11730
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa,i486
S/W Ref Platform              : osf1,hpux
Component Name                : dcecp
Subcomponent Name             : admin/dcecp/rgy_utils.c
Short Description             : Statement not reached
Reported Date                 : 8/17/94
Found in Baseline             : 1.1
Found Date                    : 8/17/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : admin/dcecp/rgy_utils.c
Sensitivity                   : public
c89 -c    -D_SHARED_LIBRARIES   -g  +w1 -D__hppa -Dhp9000s800 -Dhp9000s700 -D__\
hp9000s800 -D__hp9000s700 -DHPUX -D__hpux -Dunix +DA1.0 -D_HPUX_SOURCE    -I. -\
I/u3/devobj/sb/nb_ux/src/admin/dcecp -I/project/dce/build/dce1.1-snap/src/admin\
/dcecp   -I/u3/devobj/sb/nb_ux/export/hp800/usr/include -I/project/dce/build/dc\
e1.1-snap/export/hp800/usr/include    /project/dce/build/dce1.1-snap/src/admin/\
dcecp/rgy_utils.c
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 477: war\
ning 705: ANSI migration: aggregates whose initializers contain partially-elide\
d braces will parse differently in ANSI mode.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 747: war\
ning 508: Statement not reached.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 2873: er\
ror 1621: Too few arguments for "sec_attr_util_alloc_copy".
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 2873: wa\
rning 604: Pointers are not assignment-compatible.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 2873: wa\
rning 563: Argument #1 is not the correct type.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 2873: wa\
rning 604: Pointers are not assignment-compatible.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 2873: wa\
rning 563: Argument #3 is not the correct type.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3491: er\ror 1621: Too few arguments for "sec_attr_util_alloc_copy".
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3491: wa\
rning 604: Pointers are not assignment-compatible.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3491: wa\
rning 563: Argument #1 is not the correct type.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3491: wa\
rning 604: Pointers are not assignment-compatible.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3491: wa\
rning 563: Argument #3 is not the correct type.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3496: er\
ror 1621: Too few arguments for "sec_attr_util_alloc_copy".
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3496: wa\rning 604: Pointers are not assignment-compatible.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3496: wa\
rning 563: Argument #1 is not the correct type.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3496: wa\
rning 604: Pointers are not assignment-compatible.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3496: wa\
rning 563: Argument #3 is not the correct type.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3504: er\
ror 1621: Too few arguments for "sec_attr_util_alloc_copy".
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3504: wa\
rning 604: Pointers are not assignment-compatible.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3504: wa\ror 1621: Too few arguments for "sec_attr_util_alloc_copy".
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3504: wa\
rning 604: Pointers are not assignment-compatible.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3504: wa\
rning 563: Argument #1 is not the correct type.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3504: wa\
rning 604: Pointers are not assignment-compatible.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3504: wa\
rning 563: Argument #3 is not the correct type.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3521: er\
ror 1621: Too few arguments for "sec_attr_util_alloc_copy".
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3521: wa\
rning 604: Pointers are not assignment-compatible.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3521: wa\
rning 563: Argument #1 is not the correct type.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3521: wa\rning 604: Pointers are not assignment-compatible.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3521: wa\
rning 563: Argument #3 is not the correct type.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3552: er\
ror 1621: Too few arguments for "sec_attr_util_alloc_copy".
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3552: wa\
rning 604: Pointers are not assignment-compatible.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3552: wa\
rning 563: Argument #1 is not the correct type.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3552: wa\
rning 604: Pointers are not assignment-compatible.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3552: wa\rning 563: Argument #3 is not the correct type.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3552: er\
ror 1621: Too few arguments for "sec_attr_util_alloc_copy".
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3552: wa\
rning 604: Pointers are not assignment-compatible.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3552: wa\
rning 563: Argument #1 is not the correct type.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3552: wa\
rning 604: Pointers are not assignment-compatible.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3552: wa\
rning 563: Argument #3 is not the correct type.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3595: er\
ror 1621: Too few arguments for "sec_attr_util_alloc_copy".
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3595: wa\
rning 604: Pointers are not assignment-compatible.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3595: wa\
rning 563: Argument #1 is not the correct type.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3595: wa\
rning 604: Pointers are not assignment-compatible.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3595: wa\
rning 563: Argument #3 is not the correct type.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3633: er\ror 1621: Too few arguments for "sec_attr_util_alloc_copy".
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3633: wa\
rning 604: Pointers are not assignment-compatible.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3633: wa\
rning 563: Argument #1 is not the correct type.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3633: wa\
rning 604: Pointers are not assignment-compatible.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 3633: wa\
rning 563: Argument #3 is not the correct type.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 7123: wa\
rning 508: Statement not reached.
cc: "/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 7757: wa\rning 508: Statement not reached.
*** Error code 1
+0HISTORY Wed Aug 17 09:16:41 1994 holmes	Created

[8/17/94 public]
Added 4th arg to sec_attr_util_alloc_copy() calls.
Fixed 3 statement not reached's.

[8/18/94 public]
closed.



CR Number                     : 11723
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : registry
Short Description             : Not all replicas are shown for registry show -master
Reported Date                 : 8/16/94
Found in Baseline             : 1.1b14
Found Date                    : 8/16/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b15
Affected File(s)              : src/admin/dcecp/rgy_sa_replist.c
Sensitivity                   : public

[8/16/94 public]

If list of replicas obtained does not place the master last, then loop 
is broken and the rest of the replicas are not processed.

[8/21/94 public]
closed.



CR Number                     : 11713
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : warnings in rgy_sa_tclif.c
Reported Date                 : 8/15/94
Found in Baseline             : 1.1b14
Found Date                    : 8/15/94
Severity                      : E
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : src/admin/dcecp/rgy_sa_tclif.c
Sensitivity                   : public

[8/15/94 public]
Various warnings when compiling rgy_sa_tclif.c including:

cd /u1/melman/sb/sb1/src/admin/dcecp/
build rgy_sa_tclif.o
relative path: ./admin/dcecp
cd ../../../obj/hp800/admin/dcecp
c89 -c    -D_SHARED_LIBRARIES   -g  +w1 -D__hppa -Dhp9000s800 -Dhp9000s700 -D__hp9000s800 -D__hp9000s700 -DHPUX -D__hpux -Dunix +DA1.0 -D_HPUX_SOURCE    -I. -I/sandbox/melman/sb1/src/admin/dcecp -I/project/dce/build/dce1.1/src/admin/dcecp   -I/sandbox/melman/sb1/export/hp800/usr/include -I/project/dce/build/dce1.1/export/hp800/usr/include    ../../../../src/admin/dcecp/rgy_sa_tclif.c
cc: "../../../../src/admin/dcecp/rgy_sa_tclif.c", line 413: warning 604: Pointers are not assignment-compatible.
cc: "../../../../src/admin/dcecp/rgy_sa_tclif.c", line 413: warning 563: Argument #1 is not the correct type.
cc: "../../../../src/admin/dcecp/rgy_sa_tclif.c", line 432: warning 604: Pointers are not assignment-compatible.
cc: "../../../../src/admin/dcecp/rgy_sa_tclif.c", line 432: warning 563: Argument #1 is not the correct type.
cc: "../../../../src/admin/dcecp/rgy_sa_tclif.c", line 483: warning 604: Pointers are not assignment-compatible.
cc: "../../../../src/admin/dcecp/rgy_sa_tclif.c", line 491: warning 604: Pointers are not assignment-compatible.

Compilation finished at Mon Aug 15 19:31:59

[8/15/94 public]
Added various casts.

[8/17/94 public]
closed.



CR Number                     : 11710
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dhd
Short Description             : specify required options in error
Reported Date                 : 8/15/94
Found in Baseline             : 1.1b14
Found Date                    : 8/15/94
Severity                      : E
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : dcp.sams dhd_hostdata.c dhd_server.c dhd_keytab.c
Sensitivity                   : public

[8/15/94 public]
dcecp> h cr $n/pe_site -storage /opt/dcelocal/etc/pe_site           
Error: Required options not entered.

The error message should say which options are required.  For example:

  dcecp> rpcgroup import /.:/foo       
  Error: Interface id not entered

[8/25/94 public]
Submitted.

[9/26/94 public]
closed.



CR Number                     : 11709
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : new format for void ERA's
Reported Date                 : 8/15/94
Found in Baseline             : 1.1b14
Found Date                    : 8/15/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : rgy.c rgy_utils.c
Sensitivity                   : public

[8/15/94 public]
The new specification is as follows.  The code needs to be changed to
implement this.

   (x) `void'

       The ERA has no value.  It is simply a marker that is
       either present or absent.  ERA's of this encoding type
       are displayed as having a value `present'.  This is so
       they are easier to deal with in an attribute list format.
       If the ERA is not present on an object then it is not
       displayed at all, as opposed to being displayed with a
       value `notpresent'.

       The value `present' should be used when adding the ERA
       via either the `create -attribute' or the `modify -add'
       constructs.  It may be used for the `modify -remove'
       construct but is not necessary.  If the value is not used
       it means to remove the entire attribute, if it is used it
       means remove the value from the attribute, but since it
       is in some sense the last value of the attribute, the
       attribute is removed.  The `modify -change` construct is
       unimportant since the ERA has no value and cannot be
       changed.  Pseudo examples follow:

             dcecp> pgo create -attribute {void_era present}
             dcecp> pgo modify -add {void_era present}
             dcecp> pgo modify -remove {void_era}
             dcecp> pgo modify -remove {void_era present}
             dcecp> pgo show  # if ERA is not present
             dcecp> pgo show  # if ERA is present
             {void_era present}

[8/24/94 public]

Code finished to support the new specification for attributes of
type void.  Only the "-remove {void_era}" is currently incomplete,
but that falls under OT11095, which outlines the basic removal
problem.  Tests were also updated to support the above spec.

[9/26/94 public]
closed.



CR Number                     : 11703
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : aud
Short Description             : dcecp seg faults when printing out non-central audit trail
Reported Date                 : 8/15/94
Found in Baseline             : 1.1
Found Date                    : 8/15/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : admin/dcecp/aud_ops.c
Sensitivity                   : public

[8/15/94 public]


I have a small program in ~bhaim/audit/audtry on my machine (clam)
which prints out a non-central audit trail.
When I use dcecp to print out the non-central trail, dcecp seg faults.


ot@clam {1} ==> dcecp
dcecp> audtrail show /tmp/auditd_trail
Segmentation fault (core dumped)

[8/18/94 public]
This problem is only happening when running authenticated, it works
fine when unauthenticated. Tracing down the code in dce_aud_print()
showed a problem that we had in dcecp's login code a while ago.
The problem is that sec_login_inquire_net_info() can return a
sec_login_s_not_certified as a warning, the returned data is still 
valid. dcecp isn't handling this correctly. 

I'll fix dcecp to handle the warning coming back, and I've opened
CR 11764 to cover audit implications.

[8/18/94 public]
Submitted.

[9/26/94 public]
closed.



CR Number                     : 11698
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : account
Short Description             : account modify produces puzzling error
Reported Date                 : 8/15/94
Found in Baseline             : 1.1b14
Found Date                    : 8/15/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : rgy.c
Sensitivity                   : public

[8/15/94 public]

Up until very recently, I had the habit of entering the following
after configuring in order to ensure that I would never see the
annoying "Password must be changed!" message:

  dcecp> acc mod cell_admin -ch {pwdvalid yes}

Today, that gives me:

  Error: cannot log in with zero-length password

I can still do it using rgy_edit, so I assume it's some glitch in
dcecp's "account" command.

[8/15/94 public]
But wait, there's more!

dcecp> account create /.:/kevins -group yours -org mine -pass help -mypwd $adminpwd  
dcecp> account modify /.:/kevins -shell /bin/sh
Error: cannot log in with zero-length password

I've assigned this to ajay as just a first guess that this is related to
the password generation code.

[8/16/94 public]

Problem still exists

output from run_commands.log

invoking dcecp smoke test
cannot log in with zero-length password
dcecp returned value is: PGO
DONE

output from  sif,mudslide,budapest:/u1/RAT_tools/dcecp.out

RPC
CDS
PGO

[8/16/94 public]

Commented out the following line on all platforms (budapest,sif,mudaslide).
#account modify /.:/kevins -shell /bin/sh

[8/16/94 public]

I think I know what the problem is. But before I can test
and submit the fix I need to debug a secd crash problem.
This should be fixed by tomorrow.

[8/21/94 public]
closed.



CR Number                     : 11694
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : registry
Short Description             : Break up rgy.c and rgy_utils.c by functionality.
Reported Date                 : 8/15/94
Found in Baseline             : 1.1b14
Found Date                    : 8/15/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b19
Affected File(s)              : schema_ops.c schema_utils.c
Sensitivity                   : public

[8/15/94 public]


rgy.c and rgy_utils.c currently have pgo, schema, and the name command 
functionality.

For maintainability, these 3 functions should be in their own modules.

[8/15/94 public]
go wild.  :-)

[8/19/94 public]
There is currently too many modifications in progress. Wait till 
defect activity has slowed down.

[9/6/94 public]
The schema stuff was pulled out of rgy.c and rgy_utils.c and
put in schema_ops.c and schema_utils.c late last week.

[9/27/94 public]
this got done a few days ago and nightly builds worked.



CR Number                     : 11693
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : schema -> xattrschema
Reported Date                 : 8/15/94
Found in Baseline             : 1.1b14
Found Date                    : 8/15/94
Severity                      : D
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : commands.c
Sensitivity                   : public

[8/15/94 public]
The schema command should be renamed xattrschema.  The tests need to be
updated as well.

[8/17/94 public]
Code changed to rename the schema command xattrschema.  Most tests
updated to reflect this change as well.  Remainder of tests will
be done asap.

[8/18/94 public]
closed.



CR Number                     : 11692
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : schema show ordering and name
Reported Date                 : 8/15/94
Found in Baseline             : 1.1b14
Found Date                    : 8/15/94
Severity                      : E
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : dcp.sams, rgy_utils.c
Sensitivity                   : public

[8/15/94 public]
dcecp> schema show /.:/sec/xattrschema/authzp
{name authzp}
{uuid af83da0c-1f02-11cd-9c0f-08000919ebb5}
{encoding byte}
{aclmgr {principal {{query r} {update m} {test r} {delete m}}}}
{unique no}
{multivalued no}
{reserved yes}
{applydefs yes}
{intercell reject}
{trigtype query}
{trigbind
 {{dce odss-authpd pktprivacy secret name}
  /.:/subsys/HP/ODSS/odss-authpd}}
{scope {}}
{annotation {ODSS Authorization Processor}}
dcecp> 

The name attribute should NOT be displayed.  dcecp in general does not
display names as attributes of things.  You have to know the name to get
the output so it is redundant.  

The attributes should be displayed in lexical order.  

  dcecp> schema show /.:/sec/xattrschema/authzp
  {aclmgr {principal {{query r} {update m} {test r} {delete m}}}}
  {annotation {ODSS Authorization Processor}}
  {applydefs yes}
  {encoding byte}
  {intercell reject}
  {multivalued no}
  {reserved yes}
  {scope {}}
  {trigbind
   {{dce odss-authpd pktprivacy secret name}
    /.:/subsys/HP/ODSS/odss-authpd}}
  {trigtype query}
  {unique no}
  {uuid af83da0c-1f02-11cd-9c0f-08000919ebb5}
  dcecp>

[8/16/94 public]

The "schema" object name has changed to "xattrschema". See RFC42.3 Section
1.1 list item bx and Section 8.11.15.

[8/16/94 public]

OK - CR11693 is "schema -> xattrschema".

[8/17/94 public]
The show behavior was corrected.

[8/18/94 public]
closed.



CR Number                     : 11691
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : schema cat output broken
Reported Date                 : 8/15/94
Found in Baseline             : 1.1b14
Found Date                    : 8/15/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : rgy.c, rgy_utils.c, dcp.sams, rgy.h
Sensitivity                   : public

[8/15/94 public]
schema catalog should return fully qualified names by default and return
simplenames only if given the -simplename option.  Todays behavior:

  dcecp> schema cat /.:/sec/xattrschema   
  pre_auth_req
  pwd_val_type
  pwd_mgmt_binding
  X500_DN
  X500_DSA_Admin
  disable_time_interval
  max_invalid_attempts
  test_any
  test_void
  test_printstring
  test_printstring_array
  test_integer
  test_bytes
  test_confidential_bytes
  test_i18n_data
  test_uuid
  test_attr_set
  test_binding
  authzp
  
  dcecp> 

 * The extra newline at the end should be removed.
 * The above should be the result of using -simplename which is currently
   not allowed. 
 * Without -simplename the output should be:

  dcecp> schema cat /.:/sec/xattrschema   
  /.../absolut_cell.osf.org/sec/xattrschema/pre_auth_req
  /.../absolut_cell.osf.org/sec/xattrschema/pwd_val_type
  /.../absolut_cell.osf.org/sec/xattrschema/pwd_mgmt_binding
  /.../absolut_cell.osf.org/sec/xattrschema/X500_DN
  /.../absolut_cell.osf.org/sec/xattrschema/X500_DSA_Admin
  /.../absolut_cell.osf.org/sec/xattrschema/disable_time_interval
  /.../absolut_cell.osf.org/sec/xattrschema/max_invalid_attempts
  /.../absolut_cell.osf.org/sec/xattrschema/test_any
  /.../absolut_cell.osf.org/sec/xattrschema/test_void
  /.../absolut_cell.osf.org/sec/xattrschema/test_printstring
  /.../absolut_cell.osf.org/sec/xattrschema/test_printstring_array
  /.../absolut_cell.osf.org/sec/xattrschema/test_integer
  /.../absolut_cell.osf.org/sec/xattrschema/test_bytes
  /.../absolut_cell.osf.org/sec/xattrschema/test_confidential_bytes
  /.../absolut_cell.osf.org/sec/xattrschema/test_i18n_data
  /.../absolut_cell.osf.org/sec/xattrschema/test_uuid
  /.../absolut_cell.osf.org/sec/xattrschema/test_attr_set
  /.../absolut_cell.osf.org/sec/xattrschema/test_binding
  /.../absolut_cell.osf.org/sec/xattrschema/authzp
  dcecp> 

Note that /.: should be expanded in the output.  The reason is that by
default the output should be usable by other commands.  This means fully
qualified names.  Yes this isn't always very readable, but that's why
-simplename exists.

[8/17/94 public]
The -simplename switch was added and the catalog behavior corrected.

[8/18/94 public]
closed.



CR Number                     : 11682
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : HP core dump in encode_rgy_pgo_item_attr()
Reported Date                 : 8/12/94
Found in Baseline             : 1.1b13
Found Date                    : 8/12/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : rgy_utils.c, schema_ops.c
Sensitivity                   : public

[8/12/94 public]
This trace was wrestled from xdb on the HP. This is encountered
running the principal create era functional tests. It is somewhat
challenging to reproduce. It seems like a timing problem because
running it with other tests seems to make the problem recur more
frequently. The line numbers here are already out of date due to a
recent submission. This problem results in a seg fault.

The exact test that causes this problem is listed below:

>t
 0 TMEM@libc + 0x000ad318 (0x616d6520, 0, 0x7b037174, 0x2)
 1 TMEM@libdce + 0x002fcd58 (0x7b0379d0, 0xa, 0x7b037a40, 0x7b037164)
 2 encode_rgy_pgo_item_attr (interp = 0x400ba3c0, attr = 0x40225308, num_val = 0x7b037934, pgo_item = 0x7b037044, attr_info = 0x7b0363f8, attrs = 0x7b037164, status = 0x7b03793c)    [/project/dce/build/dce1.1/src/admin/dcecp/rgy_utils.c: 4403]
 3 parse_attribute_list (interp = 0x400ba3c0, attr_list = 0x7b036141, bad_pgo_item = 0x7b037044, policy =   00000000, attr_info = 0x7b0363f8, attrs = 0x7b037164)    [/project/dce/build/dce1.1/src/admin/dcecp/rgy_utils.c: 4467]
 4 principal_create (clientData =   00000000, interp = 0x400ba3c0, argc = 2, argv = 0x7b036200)    [/project/dce/build/dce1.1/src/admin/dcecp/rgy.c: 480]
 5 dcp_principal (clientData =   00000000, interp = 0x400ba3c0, argc = 4, argv = 0x7b036290)    [../../../../src/admin/dcecp/commands.c: 1065]
 6 Tcl_Eval + 0x000009f0 (0x400ba3c0, 0x7b035ea8, 0x7b036080, 0x36044)
 7 Tcl_UplevelCmd + 0x0000023c (0, 0x400ba3c0, 0x1, 0x7b035f84)
 8 Tcl_Eval + 0x000009f0 (0x400ba3c0, 0x7b035c66, 0x7b035d88, 0x7b035d28)
 9 Tcl_CatchCmd + 0x000001a8 (0, 0x400ba3c0, 0x3, 0x7b035d40)
10 Tcl_Eval + 0x000009f0 (0x400ba3c0, 0x400d3843, 0x7b035908, 0x200)
11 TclParseNestedCmd + 0x0000005c (0x400ba3c0, 0x400d3843, 0, 0x7b035b08)
12 TclParseWords + 0x000002ac (0x400ba3c0, 0x400d3839, 0, 0x8)
13 Tcl_Eval + 0x000003a4 (0x400ba3c0, 0x400d3820, 0x40224ce9, 0)
14 InterpProc + 0x00000530 (0x400d0fd0, 0x400ba3c0, 0, 0x4012d828)
15 Tcl_Eval + 0x000009f0 (0x400ba3c0, 0x400f9d88, 0x7b035680, 0x7b035568)
16 InterpProc + 0x00000530 (0x400f9d18, 0x400ba3c0, 0, 0x7b0354c0)
17 Tcl_Eval + 0x000009f0 (0x400ba3c0, 0x402230d9, 0x7b035380, 0x7b035268)
18 Tcl_IfCmd + 0x0000056c (0, 0x400ba3c0, 0x5, 0x7b035280)
19 Tcl_Eval + 0x000009f0 (0x400ba3c0, 0x401fed37, 0x4012d7f8, 0)
20 Tcl_ForeachCmd + 0x000002c0 (0, 0x400ba3c0, 0x4, 0x7b034f80)
21 Tcl_Eval + 0x000009f0 (0x400ba3c0, 0x40103821, 0x401987e2, 0)
22 Tcl_ForeachCmd + 0x000002c0 (0, 0x400ba3c0, 0x4, 0x7b034c80)
23 Tcl_Eval + 0x000009f0 (0x400ba3c0, 0x400fd300, 0x45d4, 0x200)
24 Tcl_EvalFile + 0x0000088c (0x400ba3c0, 0x400d5327, 0, 0)
25 Tcl_SourceCmd + 0x000001a0 (0, 0x400ba3c0, 0x2, 0x7b0347c0)
26 Tcl_Eval + 0x000009f0 (0x400ba3c0, 0x400df168, 0x103aa, 0)
27 Tcl_EvalFile + 0x0000088c (0x400ba3c0, 0x7b03300b, 0x40002410, 0x1)
28 main (argc = 1, argv = 0x7b033dd8)    [/project/dce/build/dce1.1/src/admin/dcecp/main.c: 314]


proc principal_create_era_binding_12_P {} {
    # Identify the test
    tet_infoline principal_create_era_binding_12_P: A binding attribute may be specified with a list of server
    tet_infoline principal_create_era_binding_12_P: names

    # Setup steps
    if {[dcp_wrap {global SECMASTER DCP_SR_ENTRYNAME}] != 0} {return;}
    if {[dcp_wrap {set blist "$SECMASTER $DCP_SR_ENTRYNAME"}] != 0} {return;}
    if {[dcp_wrap {set fbind "none [list $blist]"}] != 0} {return;}
    if {[dcp_wrap {set attrib [list "test_binding [list $fbind]"]}] != 0} {return;}


    # Run the test
    test { principal create foob -attribute $attrib
           dcp_attrlist getval [principal show foob] test_binding
         } compare_lists [format "{none {%s %s}}" $SECMASTER $DCP_SR_ENTRYNAME]

    # Cleanup steps
    if {[dcp_wrap {principal delete foob}] != 0} {return;}
}

[8/16/94 public]

We talked about this at the status meeting today, and the consensus
was that this is unlikely to be a bug in the ERA, since it only
happens when provoked by TET. The tet API is therefore considered
suspect; reassigned to John R.

[8/17/94 public]
Uh, yeah right. The Tcl TET API is a SCRIPT. Could you explain how a 
bug in my script could cause encode_rgy_pgo_item_attr() to call a libdce 
routine which calls a libc routine that core dumps with a segmentation 
violation???????? This does not need tcc. This problem happens running 
the test individually as well as through tcc. It looks like a timing
problem to me, only running the set of commands rapid-fire causes this
problem.

[8/18/94 public]
Reassigned to the HP dcecp folks to take a look at. Do you folks see the
same problem?

[8/31/94 public]
I am not able to re-produce the problem you describe here. I see a different 
problem that results in the same symptoms, i.e., core dump after the 
principal_create_era_P.tcl test runs for a while. It is possible that
this new problem obscures the one reported by you. This is what I get when I 
traceback:
0 TMEM@libc + 0x00098978 (hp-ux export stub)
 1 TclWaitpid (pid = 5312, statPtr = 0x7b03572c, options = 0)    [/afs/ch/project/dce/buil
d/dce1.1/src/admin/tcl_dce/tclUnixUtil.c: 1654]
 2 CleanupChildren (interp = 0x400bddb0, numPids = 1, pidPtr = 0x400c45a0, errorId = 4, ke
epNewline = 0)    [/afs/ch/project/dce/build/dce1.1/src/admin/tcl_dce/tclUnixAZ.c: 2467]
 3 Tcl_ExecCmd (dummy =   00000000, interp = 0x400bddb0, argc = 4, argv = 0x7b035158)    [
/afs/ch/project/dce/build/dce1.1/src/admin/tcl_dce/tclUnixAZ.c: 491]
 4 Tcl_Eval (interp = 0x400bddb0, cmd = 0x400d4630)    [/afs/ch/project/dce/build/dce1.1/s
rc/admin/tcl_dce/tclBasic.c: 1022]
 5 Tcl_UplevelCmd (dummy =   00000000, interp = 0x400bddb0, argc = 4
 6 Tcl_Eval (interp = 0x400bddb0, cmd = 0x7b034948)    [/afs/ch/project/dce/build/dce1.1/s
rc/admin/tcl_dce/tclBasic.c: 1022]
7 TclParseNestedCmd (interp = 0x400bddb0, string = 0x7b034948, flags = 0, termPtr = 0x7b0
34ca8, pvPtr = 0x7b034c40)    [/afs/ch/project/dce/build/dce1.1/src/admin/tcl_dce/tclParse
.c: 407]
 8 TclParseWords (interp = 0x400bddb0, string = 0x7b034940, flags = 0, maxWords = 8, termP
tr = 0x7b034ca8, argcPtr = 0x7b034cc4, argv = 0x7b034c58, pvPtr = 0x7b034c40)    [/afs/ch/
project/dce/build/dce1.1/src/admin/tcl_dce/tclParse.c: 692]
 9 Tcl_Eval (interp = 0x400bddb0, cmd = 0x7b03493d)    [/afs/ch/project/dce/build/dce1.1/s
rc/admin/tcl_dce/tclBasic.c: 892]
10 Tcl_IfCmd (dummy =   00000000, interp = 0x400bddb0, argc = 3, argv = 0x7b034a18)    [/a
fs/ch/project/dce/build/dce1.1/src/admin/tcl_dce/tclCmdIL.c: 167]
11 Tcl_Eval (interp = 0x400bddb0, cmd = 0x7b0346fe)    [/afs/ch/project/dce/build/dce1.1/s
rc/admin/tcl_dce/tclBasic.c: 1022]
12 Tcl_IfCmd (dummy =   00000000, interp = 0x400bddb0, argc = 3, argv = 0x7b0347d8)    [/a
fs/ch/project/dce/build/dce1.1/src/admin/tcl_dce/tclCmdIL.c: 167]
13 Tcl_Eval (interp = 0x400bddb0, cmd = 0x400d480c)    [/afs/ch/project/dce/build/dce1.1/s
rc/admin/tcl_dce/tclBasic.c: 1022]
14 Tcl_IfCmd (dummy =   00000000, interp = 0x400bddb0, argc = 3, argv = 0x7b034598)    [/a
fs/ch/project/dce/build/dce1.1/src/admin/tcl_dce/tclCmdIL.c: 167]
15 Tcl_Eval (interp = 0x400bddb0, cmd = 0x400c36c0)    [/afs/ch/project/dce/build/dce1.1/s
rc/admin/tcl_dce/tclBasic.c: 1022]
16 InterpProc (clientData = 0x400c36a8, interp = 0x400bddb0, argc = 0, argv = 0x7b034298)
   [/afs/ch/project/dce/build/dce1.1/src/admin/tcl_dce/tclProc.c: 611]
17 Tcl_Eval (interp = 0x400bddb0, cmd = 0x7b033b80)    [/afs/ch/project/dce/build/dce1.1/s
rc/admin/tcl_dce/tclBasic.c: 1022]
18 Tcl_RecordAndEval (interp = 0x400bddb0, cmd = 0x7b033b80, flags = 0)    [/afs/ch/projec
t/dce/build/dce1.1/src/admin/tcl_dce/tclHistory.c: 253]
19 main (argc = 1, argv = 0x7b033b40)    [/afs/ch/project/dce/build/dce1.1/src/admin/dcecp
/main.c: 421]

[9/12/94 public]
Well, the principal_create_P tests don't dump core anymore. Unfortunately
only a single test passes now. I'll wait for input from HP to tell me
what the state of the world is in regard to these tests.

[9/15/94 public]
Additional malloc's were added to get_attr_values() to ensure the
attribute structure had enough space to hold all values.

[9/26/94 public]
closed.



CR Number                     : 11679
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : aud
Short Description             : Hnadle new audit condition "unknown"
Reported Date                 : 8/12/94
Found in Baseline             : 1.1b14
Found Date                    : 8/12/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : admin/dcecp/aud_util.c
Sensitivity                   : public

[8/12/94 public]
Modify dcecp to follow changes made in audit from CR 11443.

[8/18/94 public]
Submitted.

[9/26/94 public]
closed.



CR Number                     : 11671
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : registry
Short Description             : organization create does not process -attribute list.
Reported Date                 : 8/12/94
Found in Baseline             : 1.1
Found Date                    : 8/12/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : rgy.c
Sensitivity                   : public

[8/12/94 public]

The organization create does not correctly process the -attribute list for 
policy attributes.

dcecp> organization create foo -attribute {pwdminlen 6}
dcecp> org show foo -p
nopolicy

It seems to work fine for org attributes though.

dcecp> organization create foo -attribute {orgid 209}   
dcecp> org show foo                                   
{fullname {}}
{orgid 209}
{uuid 000000d1-b5f9-21cd-9c02-080009355d0e}

[8/22/94 public]
Fixed and submitted.

[9/27/94 public]
closed.



CR Number                     : 11663
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dhd
Short Description             : better msg for entry not found
Reported Date                 : 8/12/94
Found in Baseline             : 1.1b14
Found Date                    : 8/12/94
Severity                      : E
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : dcp.sams dhd_hostdata.c
Sensitivity                   : public

[8/12/94 public]
  dcecp> hostdata cat
  /.../absolut_cell/hosts/absolut/config/hostdata/dce_cf.db
  /.../absolut_cell/hosts/absolut/config/hostdata/cell_name
  /.../absolut_cell/hosts/absolut/config/hostdata/host_name
  /.../absolut_cell/hosts/absolut/config/hostdata/cell_aliases
  /.../absolut_cell/hosts/absolut/config/hostdata/post_processors
  dcecp> hostd s /.../absolut_cell/hosts/absolut/config/hostdata/cellalias 
  Error: No more dced entries available

I'm sure the above is the error returned by the API when you've run out of
entryies to match against.  dcecp should return a message such as "entry
not found".  Please scan the dcp.sams file for similar sounding messages
and match up with them.

[8/25/94 public]
Submitted.

[10/6/94 public]
closed.



CR Number                     : 11661
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : /admin/dcecp/scripts
Short Description             : operation not allowed
Reported Date                 : 8/12/94
Found in Baseline             : 1.1
Found Date                    : 8/12/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : src/admin/dcecp/rgy.h
Sensitivity                   : public

[8/12/94 public]

[ /admin/dcecp/scripts at 06:51 (AM) Friday ]
makepath scripts/. && cd scripts &&  exec make MAKEFILE_PASS=BASIC     build_all
scripts: created directory
rm -f service.h
/u1/devobj/sb/nb_rios/tools/rios/bin/idl      -keep c_source  -I../../directory/cds/includes -I/u1/devobj/sb/nb_rios/src/directory/cds/includes -I/project/dce/build/dce1.1-snap/src/directory/cds/includes -I../../directory/cds/stubs -I/u1/devobj/sb/nb_rios/src/directory/cds/stubs -I/project/dce/build/dce1.1-snap/src/directory/cds/stubs -I../../time/common -I/u1/devobj/sb/nb_rios/src/time/common -I/project/dce/build/dce1.1-snap/src/time/common -I../../security/audit/auditd -I/u1/devobj/sb/nb_rios/src/security/audit/auditd -I/project/dce/build/dce1.1-snap/src/security/audit/auditd -I/u1/devobj/sb/nb_rios/export/rios/usr/include -I/project/dce/build/dce1.1-snap/export/rios/usr/include  -client none -server none ../../../../export/rios/usr/include/dce/service.idl
rm -f audit_control.h
/u1/devobj/sb/nb_rios/tools/rios/bin/idl      -keep c_source  -I../../directory/cds/includes -I/u1/devobj/sb/nb_rios/src/directory/cds/includes -I/project/dce/build/dce1.1-snap/src/directory/cds/includes -I../../directory/cds/stubs -I/u1/devobj/sb/nb_rios/src/directory/cds/stubs -I/project/dce/build/dce1.1-snap/src/directory/cds/stubs -I../../time/common -I/u1/devobj/sb/nb_rios/src/time/common -I/project/dce/build/dce1.1-snap/src/time/common -I../../security/audit/auditd -I/u1/devobj/sb/nb_rios/src/security/audit/auditd -I/project/dce/build/dce1.1-snap/src/security/audit/auditd -I/u1/devobj/sb/nb_rios/export/rios/usr/include -I/project/dce/build/dce1.1-snap/export/rios/usr/include  -client none -server none ../../../../export/rios/usr/include/dce/audit_control.idl
rm -f cprpc_clerk.h
/u1/devobj/sb/nb_rios/tools/rios/bin/idl      -keep c_source  -I../../directory/cds/includes -I/u1/devobj/sb/nb_rios/src/directory/cds/includes -I/project/dce/build/dce1.1-snap/src/directory/cds/includes -I../../directory/cds/stubs -I/u1/devobj/sb/nb_rios/src/directory/cds/stubs -I/project/dce/build/dce1.1-snap/src/directory/cds/stubs -I../../time/common -I/u1/devobj/sb/nb_rios/src/time/common -I/project/dce/build/dce1.1-snap/src/time/common -I../../security/audit/auditd -I/u1/devobj/sb/nb_rios/src/security/audit/auditd -I/project/dce/build/dce1.1-snap/src/security/audit/auditd -I/u1/devobj/sb/nb_rios/export/rios/usr/include -I/project/dce/build/dce1.1-snap/export/rios/usr/include  -client none -server none ../../../../export/rios/usr/include/dce/cprpc_clerk.idl
rm -f cprpc_server.h
/u1/devobj/sb/nb_rios/tools/rios/bin/idl      -keep c_source  -I../../directory/cds/includes -I/u1/devobj/sb/nb_rios/src/directory/cds/includes -I/project/dce/build/dce1.1-snap/src/directory/cds/includes -I../../directory/cds/stubs -I/u1/devobj/sb/nb_rios/src/directory/cds/stubs -I/project/dce/build/dce1.1-snap/src/directory/cds/stubs -I../../time/common -I/u1/devobj/sb/nb_rios/src/time/common -I/project/dce/build/dce1.1-snap/src/time/common -I../../security/audit/auditd -I/u1/devobj/sb/nb_rios/src/security/audit/auditd -I/project/dce/build/dce1.1-snap/src/security/audit/auditd -I/u1/devobj/sb/nb_rios/export/rios/usr/include -I/project/dce/build/dce1.1-snap/export/rios/usr/include  -client none -server none ../../../../export/rios/usr/include/dce/cprpc_server.idl
rm -f cprpc_hcell.h
/u1/devobj/sb/nb_rios/tools/rios/bin/idl      -keep c_source  -I../../directory/cds/includes -I/u1/devobj/sb/nb_rios/src/directory/cds/includes -I/project/dce/build/dce1.1-snap/src/directory/cds/includes -I../../directory/cds/stubs -I/u1/devobj/sb/nb_rios/src/directory/cds/stubs -I/project/dce/build/dce1.1-snap/src/directory/cds/stubs -I../../time/common -I/u1/devobj/sb/nb_rios/src/time/common -I/project/dce/build/dce1.1-snap/src/time/common -I../../security/audit/auditd -I/u1/devobj/sb/nb_rios/src/security/audit/auditd -I/project/dce/build/dce1.1-snap/src/security/audit/auditd -I/u1/devobj/sb/nb_rios/export/rios/usr/include -I/project/dce/build/dce1.1-snap/export/rios/usr/include  -client none -server none ../../../../export/rios/usr/include/dce/cprpc_hcell.idl
rm -f cds_clerkserver.h
/u1/devobj/sb/nb_rios/tools/rios/bin/idl      -keep c_source  -I../../directory/cds/includes -I/u1/devobj/sb/nb_rios/src/directory/cds/includes -I/project/dce/build/dce1.1-snap/src/directory/cds/includes -I../../directory/cds/stubs -I/u1/devobj/sb/nb_rios/src/directory/cds/stubs -I/project/dce/build/dce1.1-snap/src/directory/cds/stubs -I../../time/common -I/u1/devobj/sb/nb_rios/src/time/common -I/project/dce/build/dce1.1-snap/src/time/common -I../../security/audit/auditd -I/u1/devobj/sb/nb_rios/src/security/audit/auditd -I/project/dce/build/dce1.1-snap/src/security/audit/auditd -I/u1/devobj/sb/nb_rios/export/rios/usr/include -I/project/dce/build/dce1.1-snap/export/rios/usr/include  -client none -server none ../../../../export/rios/usr/include/dce/cds_clerkserver.idl
rm -f dtss_ctrl.h
/u1/devobj/sb/nb_rios/tools/rios/bin/idl      -keep c_source  -I../../directory/cds/includes -I/u1/devobj/sb/nb_rios/src/directory/cds/includes -I/project/dce/build/dce1.1-snap/src/directory/cds/includes -I../../directory/cds/stubs -I/u1/devobj/sb/nb_rios/src/directory/cds/stubs -I/project/dce/build/dce1.1-snap/src/directory/cds/stubs -I../../time/common -I/u1/devobj/sb/nb_rios/src/time/common -I/project/dce/build/dce1.1-snap/src/time/common -I../../security/audit/auditd -I/u1/devobj/sb/nb_rios/src/security/audit/auditd -I/project/dce/build/dce1.1-snap/src/security/audit/auditd -I/u1/devobj/sb/nb_rios/export/rios/usr/include -I/project/dce/build/dce1.1-snap/export/rios/usr/include  -client none -server none ../../../../export/rios/usr/include/dce/dtss_ctrl.idl
xlc -c       -g -Dunix -D_BSD  -D_ALL_SOURCE -DAIX32   -I. -I/u1/devobj/sb/nb_rios/src/admin/dcecp -I/project/dce/build/dce1.1-snap/src/admin/dcecp   -I/u1/devobj/sb/nb_rios/export/rios/usr/include -I/project/dce/build/dce1.1-snap/export/rios/usr/include   /project/dce/build/dce1.1-snap/src/admin/dcecp/main.c
xlc -c       -g -Dunix -D_BSD  -D_ALL_SOURCE -DAIX32   -I. -I/u1/devobj/sb/nb_rios/src/admin/dcecp -I/project/dce/build/dce1.1-snap/src/admin/dcecp  -I../../time/common -I/u1/devobj/sb/nb_rios/src/time/common -I/project/dce/build/dce1.1-snap/src/time/common -I/u1/devobj/sb/nb_rios/export/rios/usr/include -I/project/dce/build/dce1.1-snap/export/rios/usr/include   /project/dce/build/dce1.1-snap/src/admin/dcecp/commands.c
xlc -c       -g -Dunix -D_BSD  -D_ALL_SOURCE -DAIX32   -I. -I/u1/devobj/sb/nb_rios/src/admin/dcecp -I/project/dce/build/dce1.1-snap/src/admin/dcecp   -I/u1/devobj/sb/nb_rios/export/rios/usr/include -I/project/dce/build/dce1.1-snap/export/rios/usr/include   /project/dce/build/dce1.1-snap/src/admin/dcecp/parseargv.c
xlc -c       -g -Dunix -D_BSD  -D_ALL_SOURCE -DAIX32   -I. -I/u1/devobj/sb/nb_rios/src/admin/dcecp -I/project/dce/build/dce1.1-snap/src/admin/dcecp   -I/u1/devobj/sb/nb_rios/export/rios/usr/include -I/project/dce/build/dce1.1-snap/export/rios/usr/include   /project/dce/build/dce1.1-snap/src/admin/dcecp/rgy.c
xlc -c       -g -Dunix -D_BSD  -D_ALL_SOURCE -DAIX32   -I. -I/u1/devobj/sb/nb_rios/src/admin/dcecp -I/project/dce/build/dce1.1-snap/src/admin/dcecp   -I/u1/devobj/sb/nb_rios/export/rios/usr/include -I/project/dce/build/dce1.1-snap/export/rios/usr/include   /project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 7109.36: 1506-068 (S) Operation between types pointer and integer is not allowed.
*** Error code 1

[8/12/94 public]
rgy_acct_info_t has an element randompwd defined to be a char * in rgy.h,
but in rgy_utils.c:7109 the value 1 is assigned to it.  My *guess* is that
it should defined to be an int, but...

[8/17/94 public]
closed.



CR Number                     : 11660
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : don't compare cellnames w/ strcmp
Reported Date                 : 8/11/94
Found in Baseline             : 1.1b14
Found Date                    : 8/11/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : rgy_utils.c
Sensitivity                   : public

[8/11/94 public]
From: Rich Salz <rsalz@osf.org>
To: dce-drb@osf.org, kevins@osf.org
Subject: Re:  request to submit dcecp CR 11071 10664 11368 11535
Date: Wed, 10 Aug 94 22:33:15 -0400

>        10664 - rgy code should compare cell name to assure same
>                registry is not reopened.
>        11368 - pgo/rgy cat take arg of cellname
>        11535 - cellname obtained incorrectly for catalog commands.

Just a heads-up.  With H Cells you can't do "strcmp" to see if two
cells are the same, since aliases get in the way.  John Bowe will be
writing a dce_cf_XXX function (soon, I guess :-) to do this.
	/r$

[8/26/94 public]

Now uses dce_cf_same_cell_name.

[9/27/94 public]
closed.



CR Number                     : 11659
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : registry
Short Description             : rgy_context needs locks
Reported Date                 : 8/11/94
Found in Baseline             : 1.1b14
Found Date                    : 8/11/94
Severity                      : B
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : rgy_utils.c rgy.h
Sensitivity                   : public

[8/11/94 public]
rgy_context is a global variable storing the cached security context.  It
is read by many pieces of code but written by one.  It needs locks around
the writing.

[kevins 8/25/94] 

The writing is now mutex locked.

[9/27/94 public]
closed.



CR Number                     : 11651
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : should gen error on bad options
Reported Date                 : 8/11/94
Found in Baseline             : 1.1b14
Found Date                    : 8/11/94
Severity                      : D
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : src/admin/dcecp/rgy_sa_tclif.c
Sensitivity                   : public

[8/11/94 public]
Need some better error handling in the registry show command (other
operations on registry too?) to catch unrecognized options:

dcecp> regi help show
-attributes         Show the attributes of a replica or master registry.
-master             Returns all propagation info kept by the master replica.
-policies           Show the policies of a replica or master registry.
-replica            Returns propagation info kept by the specified replica.
dcecp> regi show -pro 
{deftktlife +0-10:00:00.000I-----}
{hidepwd yes}
{maxuid 32767}
{mingid 5100}
{minorgid 100}
{mintktlife +0-00:05:00.000I-----}
{minuid 12438}
dcecp> regi show -badoption
{deftktlife +0-10:00:00.000I-----}
{hidepwd yes}
{maxuid 32767}
{mingid 5100}
{minorgid 100}
{mintktlife +0-00:05:00.000I-----}
{minuid 12438}
dcecp> regi show            
{deftktlife +0-10:00:00.000I-----}
{hidepwd yes}
{maxuid 32767}
{mingid 5100}
{minorgid 100}
{mintktlife +0-00:05:00.000I-----}
{minuid 12438}
dcecp>

[8/11/94 public]

This is just on "registry show" since it does not require an argument.

I'll also fix the case of a bogus argument:
Since the "registry" commands must accept a replica as found in the
replist, "subsys/dce/sec/master", the local cell is bound to.

So, if a user enters:
dcecp> regi show foo
{deftktlife +0-10:00:00.000I-----}
{hidepwd yes}
{maxuid 32767}
{mingid 5100}
{minorgid 100}
{mintktlife +0-00:05:00.000I-----}
{minuid 12438}

But I'll verify if the argument specified is not a string binding or
begins with "/", then I'll check against the replist.

[8/17/94 public]
closed.



CR Number                     : 11650
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : /admin/dcecp/scripts
Short Description             : dcp_t_kt_local_help  redefined
Reported Date                 : 8/11/94
Found in Baseline             : 1.1
Found Date                    : 8/11/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : src/admin/dcecp/dcp.sams
Sensitivity                   : public

[8/11/94 public]

[ /admin/dcecp/scripts at 06:53 (AM) Thursday ]

xlc -c       -g -Dunix -D_BSD  -D_ALL_SOURCE -DAIX32   -I. -I/u1/devobj/sb/nb_rios/src/admin/dcecp -I/project/dce/build/dce1.1-snap/src/admin/dcecp   -I/u1/devobj/sb/nb_rios/export/rios/usr/include -I/project/dce/build/dce1.1-snap/export/rios/usr/include   /project/dce/build/dce1.1-snap/src/admin/dcecp/main.c
"/u1/devobj/sb/nb_rios/export/rios/usr/include/dce/dcedcpmsg.h", line 885.0: 1506-213 (S) Macro name dcp_t_kt_local_help cannot be redefined.
*** Error code 1

xlc -c       -g -Dunix -D_BSD  -D_ALL_SOURCE -DAIX32   -I. -I/u1/devobj/sb/nb_rios/src/admin/dcecp -I/project/dce/build/dce1.1-snap/src/admin/dcecp   -I/u1/devobj/sb/nb_rios/export/rios/usr/include -I/project/dce/build/dce1.1-snap/export/rios/usr/include   /project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c
"/u1/devobj/sb/nb_rios/export/rios/usr/include/dce/dcedcpmsg.h", line 885.0: 1506-213 (S) Macro name dcp_t_kt_local_help cannot be redefined.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 7109.36: 1506-068 (S) Operation between types pointer and integer is not allowed.
*** Error code 1

xlc -c       -g -Dunix -D_BSD  -D_ALL_SOURCE -DAIX32   -I. -I/u1/devobj/sb/nb_rios/src/admin/dcecp -I/project/dce/build/dce1.1-snap/src/admin/dcecp   -I/u1/devobj/sb/nb_rios/export/rios/usr/include -I/project/dce/build/dce1.1-snap/export/rios/usr/include   /project/dce/build/dce1.1-snap/src/admin/dcecp/util_help.c
"/u1/devobj/sb/nb_rios/export/rios/usr/include/dce/dcedcpmsg.h", line 885.0: 1506-213 (S) Macro name dcp_t_kt_local_help cannot be redefined.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/util_help.c", line 186.18: 1506-016 (E) Operands must be pointers to compatible types.
*** Error code 1

[8/11/94 public]
Removed duplicate definition from dcp.sams file:

 < start           intable incatalog undocumented
 < code            dcp_t_kt_local_help 
 < text            "Specifies to operate on local key file only."
 < sub-component   dcp_svc_kt
 < attributes      svc_c_sev_info
 < end

[8/12/94 public]
closed.



CR Number                     : 11646
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : schema create doesn't bind to master rgy
Reported Date                 : 8/10/94
Found in Baseline             : 1.1b14
Found Date                    : 8/10/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : src/admin/dcecp/rgy.c
Sensitivity                   : public

[8/10/94 public]

The dcecp schema create command should automatically bind to the
master registry but doesn't.  It's binding can be set explicitly
using the _s(sec) variable.  Once set, resetting it doesn't take 
effect immediately (1st occurrence took about 4 minutes, second still
didn't take effect after 10 minutes...)
(The prin/group/org create commands exhibit the correct behavior.)

Config is osf/1 sec/cds master and hpux sec replica (yosemite).

-------[new dcecp session where setting _s(sec) has initial effect but resetting doesn't]
pomerol /usr/users/hester K# dcecp
dcecp> schema create /.:/sec/xattrschema/aaa -encoding integer -aclmgr {principal r r r r}
Error: Replica is not the master
dcecp> echo $_s(sec)
{}
dcecp> set _s(sec) /.:/subsys/dce/sec/master
/.:/subsys/dce/sec/master
dcecp> echo $_s(sec)
/.:/subsys/dce/sec/master
dcecp> schema create /.:/sec/xattrschema/aaa -encoding integer -aclmgr {principal r r r r}
dcecp> set _s(sec) /.:/subsys/dce/sec/yosemite
/.:/subsys/dce/sec/yosemite
dcecp> schema create /.:/sec/xattrschema/aaaa -encoding integer -aclmgr {principal r r r r}
dcecp> exit


-------[new dcecp session where setting _s(sec) has no effect at all
	and prin cmd is used to show master is up and prin works ]
pomerol /usr/users/hester K# dcecp
dcecp> echo $_s(sec)
{}
dcecp> schema create /.:/sec/xattrschema/ooo -encoding integer -aclmgr {principal r r r r}
Error: Replica is not the master
dcecp> echo $_s(sec)
{}
dcecp> set _s(sec) /.:/subsys/dce/sec/master
/.:/subsys/dce/sec/master
dcecp> echo $_s(sec)                         
/.:/subsys/dce/sec/master
dcecp> schema create /.:/sec/xattrschema/ooo -encoding integer -aclmgr {principal r r r r}
Error: Replica is not the master
dcecp> schema create /.:/sec/xattrschema/ooo -encoding integer -aclmgr {principal r r r r}
Error: Replica is not the master
dcecp> echo $_s(sec)                         
/.:/subsys/dce/sec/master
dcecp> prin create oo  
dcecp> schema create /.:/sec/xattrschema/ooo -encoding integer -aclmgr {principal r r r r}
dcecp> schema show /.:/sec/xattrschema/ooo 
{name ooo}
{uuid 2a9310b0-b48a-11cd-96b2-0000c0b7df56}
{encoding integer}
{aclmgr {principal {{query r} {update r} {test r} {delete r}}}}
{unique no}
{multivalued yes}
{reserved no}
{applydefs no}
{intercell reject}
{trigtype none}
{trigbind {none {}}}
{scope {}}
{annotation {}}

[9/27/94 public]
closed.



CR Number                     : 11644
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : pgo create era prints confusing msg when no credentials
Reported Date                 : 8/10/94
Found in Baseline             : 1.1b14
Found Date                    : 8/10/94
Severity                      : E
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b15
Affected File(s)              : rgy_utils.c
Sensitivity                   : public

[8/10/94 public]

When a user tries to create a pgo with an era without having logged in first,
the message says that the corresponding era does not exists. After logging in and trying 
the same command, the command succeeds:

dcecp> principal create foob -attribute {test_attr_set "291e5274-7887-11cd-98a5-0800092464af" "291e5274-7887-11cd-98a5-0800092464ag"}
Error: The attribute name is not a recognized attribute.
dcecp> schema show /.:/sec/xattrschema/test_attr_set
Error: No currently established network identity for which context exists
dcecp> exit
$ dce_login cell_admin -dce-
Password must be changed!
$ /opt/dcelocal/bin/dcecp
dcecp> principal create foob -attribute {test_attr_set "291e5274-7887-11cd-98a5-0800092464af" "291e5274-7887-11cd-98a5-0800092464ag"}
dcecp> principal show foob
{fullname {}}
{uid 397}
{uuid 0000018d-b485-21cd-9400-08000927ee90}
{alias no}
{quota unlimited}
{test_attr_set
 291e5274-7887-11cd-98a5-0800092464af
 291e5274-7887-11cd-98a5-08000924640a}

[8/19/94 public]
The error message coming back from one of the security api calls
was being trapped and replaced by a more generic dcecp message.
This is no longer the case, so the correct error message will
be displayed.

[8/21/94 public]
closed.



CR Number                     : 11641
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : pgo
Short Description             : $_n is not set for principal, group, org catalog cmds if an argument is specified.
Reported Date                 : 8/10/94
Found in Baseline             : 1.1b14
Found Date                    : 8/10/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : rgy.c rgy_utils.c rgy_pgo_account.c
                rgy_pgo_group.c
Sensitivity                   : public

[8/10/94 public]

Self-explanatory.

[8/10/94 public]

2 more problems with catalog commands:

#1)  These "catalog" cmds accept multiple arguments, but there's
     no loop to show the data from multiple cells specified.
     dcecp> prin cat {/.: /.../dcecp_cell.osf.org}


#2) These "catalog" cmds do not accept string binding specifications.
     OK:
     dcecp> prin cat /.../dcecp_cell.osf.org/subsys/dce/sec/master
     NOT OK:
     dcecp> prin cat ncacn_ip_tcp:130.105.5.121

     Remove check for "if(*argv[1] != '/')" in rgy.c.

[8/23/94 public]
The pgo and account objects now set _n for catalog operations.

[8/24/94 public]
The _n was the important part of this CR.  The other mods to the catalog
command are extra from the spec, though they do make it match other catalog
commands in dcecp.  I don't think they are very important for people to be
able to do, so very low priority but not cancelled.

[9/13/94 public]

Modified the catalog commands so that they now accept a tcl list for 
an argument. The also support a tcl list of tcl syntax string bindings.
Submitted.

[9/27/94 public]
closed.



CR Number                     : 11636
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : registry
Short Description             : Allow registry catalog to
take an argument. The argument is a cell name.
Reported Date                 : 8/10/94
Found in Baseline             : 1.1b13
Found Date                    : 8/10/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b15
Affected File(s)              : src/admin/dcecp/rgy_tclif.c, src/test/admin/dcecp/ts/rgy/registry_catalog_N.tcl, src/test/admin/dcecp/ts/rgy/registry_catalog_P.tcl
Sensitivity                   : public

[8/10/94 public]

This defect is here to be consistent with principal cat, group cat,
and org cat. They also now accept an argument.

The RFC and all man pages should be updated accordingly.

[8/17/94 public]
closed.



CR Number                     : 11635
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : acl
Short Description             : Does not handle 1 string binding specified in TCL syntax.
Reported Date                 : 8/10/94
Found in Baseline             : 1.1b13
Found Date                    : 8/10/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b17
Affected File(s)              : acl_edit.h,acl_edit.c,acl_tclif.c
Sensitivity                   : public

[8/10/94 public]

Note that this affects all "acl" commands but the workaround is
specifying as #2.
Similiar to CR10683 against dcecp log command.

This is a string binding for dts-entity:

THIS DOES NOT WORK:
#1
dcecp> acl show {019ee420-682d-11c9-a607-08002b0dea7a ncacn_ip_tcp 130.105.5.45 principal/jas}

WORKS:
#2
dcecp> acl show [list "019ee420-682d-11c9-a607-08002b0dea7a ncacn_ip_tcp 130.105.5.45 principal/jas"]

This just shows specifying multiple string bindings in TCL syntax WORKS:
#3
dcecp> acl show {{0050d6c4-9fce-1dd7-8cfa-0000c0239a70 ncacn_ip_tcp 130.105.5.45 principal/jas} {0090a5f6-642c-1dad-b1c6-0000c0239a70 ncacn_ip_tcp 130.105.5.45 principal/jas2}}

[8/10/94 public]
This sounds like

dcecp> acl show {{019ee420-682d-11c9-a607-08002b0dea7a ncacn_ip_tcp 130.105.5.45 principal/jas}}

should work too and that the code that checks the argument is expecting a
list of string bindings and isn't handling the single binding case.

[9/27/94 public]
closed.



CR Number                     : 11598
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : registry modify/show need FVTs
Reported Date                 : 8/8/94
Found in Baseline             : 1.1
Found Date                    : 8/8/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : 
         registry_modify_N.tcl  registry_modify_P.tcl  registry_show_P.tcl
Sensitivity                   : public

[8/8/94 public]

The registry modify/show commands need FVTs.

[8/18/94 public]
What was I thinking?  Kevin this is based on the work you did to add policy
stuff to these commands.  Sorry, your code, your tests.  :-)

[8/26/94 public]

Added the registry policy commands.

[9/26/94 public]
closed.



CR Number                     : 11597
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : registry
Short Description             : -uid not interpreted correctly during create commands.
Reported Date                 : 8/8/94
Found in Baseline             : 1.1
Found Date                    : 8/8/94
Severity                      : E
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : rgy.c rgy_utils.c dcp.sams
           principal_create_N.tcl group_create_N.tcl organization_create_N.tcl
Sensitivity                   : public

[8/8/94 public]

The command 

dcecp> princ create foo -uid days

Gives the error message "Supplied parameter is not an integer."
This should be "Supplied uid must be a positive integer."

[kevins 8/30/94 public] 

Modified the error return portion of pgo uid create and modify paths.

[9/27/94 public]
Almost:

  dcecp> princ create foo -uid days
  Error: Supplied 'uid' is not an integer.

need the "must be a positive integer" part.  Note it says this for:

  dcecp> princ create foo -uid -35 
  Error: Supplied 'uid' must be a positive integer.

[9/28/94 public]

Modified  error messages for uid/gid/orgid.



CR Number                     : 11596
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : registry
Short Description             : uuid's not recognized in attribute slists during create command
Reported Date                 : 8/8/94
Found in Baseline             : 1.1
Found Date                    : 8/8/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : rgy_utils.c
Sensitivity                   : public

[8/8/94 public]

The command:

principal create foo_bar -attribute {uuid foobar} 

fails with "The attribute name is not a recognized attribute."

[kevins 8/23/84 public] 

The attribute name "uuid" was being defined twice in the attribute
definition table. This caused the uuid definition for pgo objects
to be eliminated. Removed new  declaration and replaced all instances 
of second declaration with pgo declaration.

[8/26/94 public]
closed.



CR Number                     : 11579
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp -c audevents show seg faults
Reported Date                 : 8/5/94
Found in Baseline             : 1.1b14
Found Date                    : 8/5/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : admin/dcecp/aud_ops.c
Sensitivity                   : public

[8/5/94 public]


I tried the following command against bl-14 on a 486 machine

root@clam {3} ==> dcecp -c audevents show
Segmentation fault

There wasn't a core file around for me to
analyze where it was seg faulting.

Other audit command like "aud show" or "audevents cat" work fine.

[8/8/94 public]
Forgot to check for insufficient arguments for this command. Fixed.

[8/12/94 public]
closed.



CR Number                     : 11577
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : parseargs
Short Description             : _dcp_debug call in parseargs.dcp
Reported Date                 : 8/5/94
Found in Baseline             : 1.1b14
Found Date                    : 8/5/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : admin/dcecp/scripts/parseargs.dcp
Sensitivity                   : public

[8/5/94 public]

A _dcp_debug call in parseargs.dcp results in the following message
appearing twice every time one invokes a command implemented by a
script:

  DEBUG: parseargs: DEBUG in parse_args

This can be avoided by setting DEBUG to 0, but then one can't see the
debug messages in scripts one is testing.

[kevins 8/8/94 public] 

Removed all calls to _dcp_debug in parseargs.dcp.

[8/12/94 public]
closed.



CR Number                     : 11575
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dhd
Short Description             : Display message in place of tower if untranslatable.
Reported Date                 : 8/5/94
Found in Baseline             : 1.1b13
Found Date                    : 8/5/94
Severity                      : E
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : cdscp_utils.c cdscp_cache.c util_binding.h util_binding.c dhd_util.c
Sensitivity                   : public

[8/5/94 public]

In cdscp_utils.c and dhd_util.c, displaying towers should be
done as described below:

If there is a bad status from rpc_tower_to_binding() or
from rpc_binding_to_string_binding() API calls, then display
message dcp_s_rpc_binding_untranslated; "untranslatable binding".

If a user sets the environment variable RPC_SUPPORTED_PROTOSEQS
or if a server machine is using protocol sequences that the client 
does not know about, then a tower may be untranslatable.


Example:

setenv RPC_SUPPORTED_PROTSEQS ncadg_ip_udp

dcecp -c dir sh /.:/hosts
{CDS_Replicas
 {{CH_UUID f641c1ac-a7d3-11cd-95c3-0800092734a4}
  {CH_Name /.../dcecp_cell.osf.org/frick_ch}
  {Replica_Type Master}  
  {Tower x%02x%02x%02x%02x%02x}
  {Tower {ncadg_ip_udp 130.105.5.121}}}}

dcecp -c regi sh -rep
{addresses {untranslatable binding}
	   {ncadg_ip_udp 130.105.5.121}}
{masteraddrs {untranslatable binding}
	     {ncadg_ip_udp 130.105.5.121}}




setenv RPC_SUPPORTED_PROTSEQS ncadg_ip_tcp

dcecp -c dir sh /.:/hosts
{CDS_Replicas
 {{CH_UUID f641c1ac-a7d3-11cd-95c3-0800092734a4}
  {CH_Name /.../dcecp_cell.osf.org/frick_ch}
  {Replica_Type Master}  
  {Tower {ncacn_ip_tcp 130.105.5.121}}
  {Tower {ncadg_ip_udp 130.105.5.121}}}}

dcecp -c regi sh -rep
{addresses {ncacn_ip_tcp 130.105.5.121}
	   {untranslatable binding}}
{masteraddrs {ncacn_ip_tcp 130.105.5.121}
	     {untranslatable binding}}

[8/8/94 public]
kevins for now.  When done, give to Ping to do the dhd portion.

[kevins 8/10/94 public] 
The requirements for this have changed somewhat we now want to 
show untranslatable bindings in binary format. So for a 
cds display it should look like.

dcecp> dir sh /.:/hosts
{RPC_ClassVersion {01 00}}
{CDS_CTS 1994-08-03-07:11:57.875-04:00I0.000/00-00-c0-f7-de-56}
{CDS_UTS 1994-08-10-04:24:27.859-04:00I0.000/00-00-c0-f7-de-56}
{CDS_ObjectUUID b857d39a-aeb3-11cd-89bc-0000c0f7de56}
{CDS_Replicas
 {{CH_UUID 9d105bfc-aeb3-11cd-89bc-0000c0f7de56}
  {CH_Name /.../jerry.osf.org/drkstr_ch}
  {Replica_Type Master}  
  {Tower
   {05 00 13 00 0d c9 f1 7d 25 d3 c6 ca 11 85 54 08 00 2b 1c 8f 1f 
    01 00 02 00 00 00 13 00 0d 04 5d 88 8a eb 1c c9 11 9f e8 08 00 
    2b 10 48 60 02 00 02 00 00 00 01 00 0b 02 00 01 00 01 00 07 02 
    00 00 00 01 00 09 04 00 82 69 05 10}}
  {Tower {ncadg_ip_udp 130.105.5.16}}}}

I have completed all cds entries that need to be changes. Turning it over to
Ping

[8/24/94 public]
Wrote a convenient function to convert untranlatable tower data
to byte format (in util_binding.c)  and used it in dhd_util.c
accordingly.

[9/27/94 public]
closed.



CR Number                     : 11573
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rpc
Short Description             : "endpoint show" negative tests fail
Reported Date                 : 8/5/94
Found in Baseline             : 1.1b14
Found Date                    : 8/5/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : endpoint_show_N.tcl
Sensitivity                   : public

[8/5/94 public]

The negative tests for "endpoint show" are wrong, because they were
written on the assumption that it takes no argument (no longer true in
light of CR 11415). The first test, which checks for an "unrecognized
argument", should be removed. The second one, expecting "unrecognized
option", receives "invalid RPC protocol sequence", probably because an
unrecognized option is interpreted as an argument if none is present.

[8/18/94 public]
submitted.

[8/21/94 public]
closed.



CR Number                     : 11560
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : sec, aud, login
Short Description             : calling sec_rgy_site_open
Reported Date                 : 8/4/94
Found in Baseline             : 1.1b13
Found Date                    : 8/4/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : aud_utils.c rgy_utils.c util_login.c
Sensitivity                   : public

[8/4/94 public]
There are three places in dcecp where we call the depricated
sec_rgy_site_open() routine:

 absolut admin/dcecp$ gfgrep sec_rgy_site_open *.[ch]
 aud_util.c:    sec_rgy_site_open(NULL, &rgy_context, &st);
 rgy_utils.c:        sec_rgy_site_open((unsigned_char_t *)site, &new_context, &status);
 util_login.c:    sec_rgy_site_open(site_name, &rgy_handle, &st);

We should be calling sec_rgy_site_bind().  If we only call one of the
family maybe we can get the fixes faster.  No great need to ask HP to fix
depricated code quickly  :-)

Assigned to John, though kevin will do the rgy_utils.c one since he has it
bco'ed already.

[8/8/94 public]
aud_util.c and util_login.c are done. Passed to Kevin to close if 
he is already done.

[kevins 8/10/94 public] 

Completed and submitted a few days ago.

[8/12/94 public]
closed.



CR Number                     : 11559
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp needs help command
Reported Date                 : 8/4/94
Found in Baseline             : 1.1
Found Date                    : 8/4/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : admin/dcecp/scripts/help.dcp Makefile
Sensitivity                   : public

[8/4/94 public]

dcecp needs a top level help command that at least lists the objects and
maybe gives a one line description of the purpose of each (like the listing
of objects in the dcecp manpage). The command should be invoked like:

  dcecp> help

[8/8/94 public]
dcecp also needs a more verbose help system for each command, invoked by:
dcecp> OBJECT help -verbose

This CR will track both sets of changes (global help and help -verbose).

[8/23/94 public]
Implemented all remaining help functionality. Submitted.

[9/27/94 public]
closed.



CR Number                     : 11555
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dts
Short Description             : clock set -epoch calls wrong RPC
Reported Date                 : 8/3/94
Found in Baseline             : 1.1b13
Found Date                    : 8/3/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : admin/dcecp/clock.c
Sensitivity                   : public

[8/3/94 public]
In keeping with the long history of blaming dts for the worlds problems...

running:
dtscp> change epoch 3

Will cause dtsd to die.

dcecp> clock set -epoch 3   

...makes the RPC, but the epoch doesn't seem to change. I believe that
these problems are related.

[8/3/94 public]

Hmmm. I tried this running with the bits of 8/2/94 on both HP-UX and 
AT386. In both cases, dtsd graciously accepted the "dtscp change epoch
<n>" command. Could you provide some more information here?

[8/4/94 public]
I don't remember making this a B0, it may have been a typo. Downgraded
to a B2.

[8/5/94 public]
Yes these problems are related. They are caused by calling the wrong RPC
when we are just trying to change the epoch without setting the time.
Reassigned to dcecp.

[8/9/94 public]
Fixed. Now calls the correct RPC (UpdateCmd vs. ChangeCmd) depending on
if we are chaning the time or just the epoch.

[8/12/94 public]
Not quite:

  dcecp> clock set -epoch 1
  Error: must have write permission to the DTS entity
  dcecp> acl sho /.:/hosts/absolut/dts-entity
  {unauthenticated r--}
  {user hosts/absolut/self rwc}
  {group subsys/dce/dts-admin rwc}
  {any_other r--}
  dcecp> gr li  subsys/dce/dts-admin
  /.../absolut_cell/cell_admin
  dcecp> dts mod -epoch 1
  Error: Unrecognized argument '1'.
  dcecp> dts mod -change {epoch 1}
  Error: The attribute 'epoch' is an invalid or read-only DTS attribute.

Yet I was able to change the epoch with dtscp.
For the dts mod -epoch 1 error I'd rather see unknown option -epoch.

[8/12/94 public]
Just submitted now. Don't ask. Try it again with tonight's NB.

[8/17/94 public]
closed.



CR Number                     : 11551
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : endpoint FVT
Short Description             : endpoint FVTs test for incorrect output format
Reported Date                 : 8/3/94
Found in Baseline             : 1.1b13
Found Date                    : 8/3/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : endpoint_create_P.tcl, endpoint_delete_P.tcl, endpoint_show_P.tcl
Sensitivity                   : public

[8/3/94 public]

The positive FVTs for the "endpoint" commands have extra spaces in
their expected output because they were trying to match the
(incorrect) format used by the command. Now that the command has been
corrected (CR 11146), many of the tests (that used to pass) fail.

[8/3/94 public]

Submitted.

[8/17/94 public]
closed.



CR Number                     : 11543
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dcp.sams
Short Description             : Syntax error in dcp.sams
Reported Date                 : 8/3/94
Found in Baseline             : 1.1b13
Found Date                    : 8/3/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : dcp.sams
Sensitivity                   : public

[8/3/94 public]


The most-recently-installed dcp.sams contains the following:

notes		''%s' is the user supplied option. Do not translate '%s'."

The first ' should be a ". Nothing builds as a result.

I found it, I need it, I'll fix it.

[8/3/94 public]

I did.

[8/12/94 public]
closed.



CR Number                     : 11539
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : cleanup on dir cre -attr errors
Reported Date                 : 8/3/94
Found in Baseline             : 1.1b12
Found Date                    : 8/3/94
Severity                      : E
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : cdscp.c
Sensitivity                   : public

[8/3/94 public]
When using the -attribute option on a directory create command dcecp should
attempt to remove the created directory if the modify operations that are
performed after the creation to specify the attribute fail.  There is a
chance that the dir delete operation will fail (since this op can't be
atomic and it is possible that a user has perms to create a directory but
not delete it) so the error message returned to the user should specify
if the directory was created or not.

[8/19/94 public]
Now attempts to delete the directory, and includes a message saying
"Directory <name> [not] created." Submitted.

[9/27/94 public]
The error message appears on two lines.  You get:

 dcecp> dir cre /.:/foo -att {CDS_BADATTR 5}
 Error: invalid attribute
 Directory /.:/foo not created.

I'd like to see the errors on one line:

 dcecp> dir cre /.:/foo -att {CDS_BADATTR 5}
 Error: invalid attribute. Directory /.:/foo not created.

Can this happen?

[8/28/94 public]

Maybe. It would either have to reinvent DCP_SET_RESULT_CODE_ONE_ARG
(which automatically puts in the newline) or do some clever "backing
up" of the result string.

Note that in the case where the delete fails, there's an additional
error message indicating why. So you might have:

 dcecp> dir cre /.:/foo -att {CDS_BADATTR 5}
 Error: invalid attribute. Insufficient rights to perform requested operation Directory /.:/foo created.

Would you want all of that on one line? Note that the "Insufficient
rights" message (which presumably comes to dcecp from cds) doesn't
have a period at the end. Even if it did...

Is this a P1 for any other reason than that you'd like to see it done
this week? :-) Is there any reasonable use that the display on
multiple lines breaks?

[9/28/94 public]
Don't reinvent macros, just usr Tcl_AppendResult() to construct the strings.

[9/28/94 public]
The P1 is only so that it can happen this week.  I don't think this is the
type of bug that will be allowed next week.  If it weren't a 1 it would be
a 4.  Nothing else in dcecp has two line errors.  Scripts that check error
returns would need a newline in them, (no big deal really).

If putting the "Directory not created" message first helps, that would be
fine too.

[9/28/94 public]

Well, maybe nothing in dcecp produces more than one error at once? :-)

Putting the "Directory [not] created" first probably would help, but
it's the case where the directory *is* created -- or, more accurately,
not deleted -- that I'm not sure about. It's actually a little odd to
get a message like:

Directory /.:/foo created. Insufficient rights to perform requested operation

I thought of changing the message to say "Directory not deleted", but
that might puzzle a user who was trying to create, not delete, the
directory. Maybe it should say "Directory <name> created anyway"? Or,
"Delete of directory <name> failed"?

It's still true that you might end up with three messages on one line,
which is likely to be ugly, and possibly confusing. Do you really want
this?

I suspect you're abusing the priority mechanism a tiny bit :-), but I
don't mind changing it if we can agree on a change that's actually an
improvement.

John: that's really what I meant by my sloppy use of "reinvent".

[9/29/94 public]
Fixed as follows: "Directory [not] created" message now precedes error
message about attributes, on a single line. The specific error causing
a failure to delete the newly-created directory is discarded. Thus:

  Error: The directory '/.:/foo' was not created. Invalid name

or, if the deletion of the directory failed:

  Error: The directory '/.:/foo' was created. Invalid name

Submitted.

[10/6/94 public]
closed.



CR Number                     : 11535
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : cellname obtained incorrectly for catalog commands.
Reported Date                 : 8/3/94
Found in Baseline             : 1.1
Found Date                    : 8/3/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : admin/dcecp/rgy.c
Sensitivity                   : public

[8/3/94 public]

When performing intercell catalog operations for rgy commands the 
code always assumes that the operation is intracell therefore the 
full name of the principals/accounts/groups/organizations is
incorrect. For instance, 

dcecp> set _s(sec) /.../terrapin_cell.osf.org
dcecp> princ cat

/.../jerry.osf.org/nobody
/.../jerry.osf.org/root
/.../jerry.osf.org/daemon
/.../jerry.osf.org/sys
/.../jerry.osf.org/bin
/.../jerry.osf.org/uucp
/.../jerry.osf.org/who
/.../jerry.osf.org/mail
/.../jerry.osf.org/tcb
/.../jerry.osf.org/dce-ptgt
/.../jerry.osf.org/dce-rgy
/.../jerry.osf.org/cell_admin
/.../jerry.osf.org/krbtgt/terrapin_cell.osf.org
/.../jerry.osf.org/hosts/merckx/self
/.../jerry.osf.org/hosts/merckx/cds-server
/.../jerry.osf.org/hosts/merckx/gda
/.../jerry.osf.org/kevins
/.../jerry.osf.org/foo
/.../jerry.osf.org/foo_bar
/.../jerry.osf.org/foo_bar1
/.../jerry.osf.org/hosts/citron/self
/.../jerry.osf.org/hosts/citron/cds-server
/.../jerry.osf.org/hosts/citron/gda
dcecp> set _s(sec)                                    
/.../terrapin_cell.osf.org/subsys/dce/sec/master

This is obviously incorrect. When calculating the cellname to 
catalog routines use "/.:". They should use either _s(sec) or
the cell name, if provided, in the command line.

[8/8/94 public]

The cellname is now taken from the currently opened/accessed registry 
location.



CR Number                     : 11507
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : help
Short Description             : "help log" not recognized
Reported Date                 : 8/1/94
Found in Baseline             : 1.1
Found Date                    : 8/1/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : verb-object.dcp
Sensitivity                   : public

[8/1/94 public]

Doing "help log" complains that log is not unique, and wants login logout
or log.  Slightly overzealous ambiguity-detector...
	; dcecp -s
	dcecp> help log
	Error: Object "log" is not unique: logout login log

[8/3/94 public]
This is an easy fix, this is just truth in defects:  the work around is the
officially sanctioned "log help" command order which works without error.

[8/15/94 public]
Added check of [info commands $obj] before [info commands $obj*]
Also do an lsort if ambiguous.

[8/17/94 public]
closed.



CR Number                     : 11503
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : user
Short Description             : doesn't take tcl syntax for
-fullname option
Reported Date                 : 8/1/94
Found in Baseline             : 1.1
Found Date                    : 8/1/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : admin/dcecp/scripts/user.dcp
Sensitivity                   : public

[8/1/94 public]

This works:

  dcecp> prin mod K_Parsons -fullname {Ken Parsons}
  dcecp> prin show K_Parsons
  {fullname {Ken Parsons}}
  {uid 5137}
  {uuid 00001411-ad40-21cd-8c00-0000c08adf56}
  {alias no}
  {quota unlimited}
  {groups users}
  dcecp>  


But this doesn't work correctly (see output of prin show):

  dcecp> user create P_Pestana -mypwd osfosf! -password change.me \
  > -fullname {Pat Pestana} -group users -organization managers
  dcecp> prin show P_Pestana
  {fullname {Pat}}
  {uid 5138}
  {uuid 00001412-ad40-21cd-8c00-0000c08adf56}
  {alias no}
  {quota unlimited}
  {groups users}
  dcecp>

[kevins 8/3/94 public] 

The translation from commandline to attrlist structure was not handled 
properly.

[8/12/94 public]
didn't work for me:

  dcecp> user create P_Pestana -mypwd osfosf! -password change.me \
  > -fullname {Pat Pestana} -group users -organization managers -forc
  Error: Data integrity error
  dcecp> user create P_Pestana -mypwd osfosf! -password foo \
  > -fullname {Pat Pestana} -group none -organization none                  
  Error: Data integrity error

dcecp did clean up though.  There were no remnants of group users, org
managers, or princ P_Pestana.  The original problem with this bug may have
well been fixed and this is another problem, but we'll use this CR to track
both.

[kevins 8/22/94 public] 

The problem cited by Howard on 8/12/94 has nothing to do with the 
-fullname modification. This currently works on a build dated 8/18/94.
I think it had something to do with the build Howard was using.

[8/22/94 public]
works.  closed.  (hint, make sure you give the right value for -mypwd)



CR Number                     : 11501
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : /admin/dcecp/cdscp_utils.c
Short Description             : pointer error
Reported Date                 : 8/1/94
Found in Baseline             : 1.1
Found Date                    : 8/1/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : cdscp_utils.c
Sensitivity                   : public

[8/1/94 public]

xlc -c       -g -Dunix -D_BSD  -D_ALL_SOURCE -DAIX32   -I.
-I/u1/devobj/sb/nb_rios/src/admin/dcecp
-I/project/dce/build/dce1.1-snap/src/admin/dcecp
-I/u1/devobj/sb/nb_rios/export/rios/usr/include
-I/project/dce/build/dce1.1-snap/export/rios/usr/include
/project/dce/build/dce1.1-snap/src/admin/dcecp/cdscp_link.c
xlc -c       -g -Dunix -D_BSD  -D_ALL_SOURCE -DAIX32   -I.
-I/u1/devobj/sb/nb_rios/src/admin/dcecp
-I/project/dce/build/dce1.1-snap/src/admin/dcecp
-I/u1/devobj/sb/nb_rios/export/rios/usr/include
-I/project/dce/build/dce1.1-snap/export/rios/usr/include
/project/dce/build/dce1.1-snap/src/admin/dcecp/cdscp_utils.c
"/project/dce/build/dce1.1-snap/src/admin/dcecp/cdscp_utils.c", line
1980.50: 1506-193 (E) Function call argument cannot be assigned to
corresponding parameter.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/cdscp_utils.c", line
2634.54: 1506-193 (E) Function call argument cannot be assigned to
corresponding parameter.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/cdscp_utils.c", line
2782.21: 1506-068 (S) Operation between types pointer and integer is not
allowed.
*** Error code 1

[8/1/94 public]

Added dce_utils.h for definition of dce_strdup. Fixed a couple of casting
problems.

[8/12/94 public]
closed.



CR Number                     : 11500
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : admin/dcecp/rgy_utils.c
Short Description             : pointer error
Reported Date                 : 8/1/94
Found in Baseline             : 1.1
Found Date                    : 8/1/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : rgy_utils.c
Sensitivity                   : public

[8/1/94 public]



xlc -c       -g -Dunix -D_BSD  -D_ALL_SOURCE -DAIX32   -I.
-I/u1/devobj/sb/nb_rios/src/admin/dcecp
-I/project/dce/build/dce1.1-snap/src/admin/dcecp
-I/u1/devobj/sb/nb_rios/export/rios/usr/include
-I/project/dce/build/dce1.1-snap/export/rios/usr/include
/project/dce/build/dce1.1-snap/src/admin/dcecp/parseargv.c
xlc -c       -g -Dunix -D_BSD  -D_ALL_SOURCE -DAIX32   -I.
-I/u1/devobj/sb/nb_rios/src/admin/dcecp
-I/project/dce/build/dce1.1-snap/src/admin/dcecp
-I/u1/devobj/sb/nb_rios/export/rios/usr/include
-I/project/dce/build/dce1.1-snap/export/rios/usr/include
/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy.c
xlc -c       -g -Dunix -D_BSD  -D_ALL_SOURCE -DAIX32   -I.
-I/u1/devobj/sb/nb_rios/src/admin/dcecp
-I/project/dce/build/dce1.1-snap/src/admin/dcecp
-I/u1/devobj/sb/nb_rios/export/rios/usr/include
-I/project/dce/build/dce1.1-snap/export/rios/usr/include
/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 556.24:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 4155.29:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 4450.29:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 6972.36:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 6975.33:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 6978.34:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 6981.38:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 6984.33:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 6987.34:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 6990.41:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 6993.36:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 6996.32:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 6999.31:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 7002.37:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 7005.39:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 7008.39:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 7011.39:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 7014.35:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 7017.39:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 7020.33:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 7023.32:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 7026.37:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 7029.37:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 7032.38:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 7035.35:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 7038.32:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 7633.28:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 7636.30:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 7639.28:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 7642.28:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 7645.32:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 7648.29:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 7651.32:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 7654.33:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 7657.30:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 7660.29:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 7663.31:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 7666.29:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 7669.31:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rgy_utils.c", line 7672.30:
1506-068 (S) Operation between types pointer and integer is not allowed.
*** Error code 1

[kevins 8/1/94 public] 

Added dce_utils.h to define dce_strdup.

[8/12/94 public]
closed.



CR Number                     : 11478
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : tcl
Short Description             : task scripts mishandle help requests
Reported Date                 : 7/28/94
Found in Baseline             : 1.1
Found Date                    : 7/28/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : 
        ./admin/dcecp/scripts/parseargs.dcp
        ./admin/dcecp/scripts/attrlist.dcp
        ./admin/dcecp/scripts/cell.dcp
        ./admin/dcecp/scripts/host.dcp
        ./admin/dcecp/scripts/user.dcp
Sensitivity                   : public

[7/28/94 public]

When a help on task script is invoked. The option is, in some cases, not 
handled properly. That is, when help is requested from a verb that
takes no options the help sequence causes an error to be generated. 

For instance the task script 'cell' has a 'show' verb which takes no
arguments yet the command 'cell help show' produces an error. It
should return nothing or a string indicating no help/options are available.

[8/3/94 public]

Modified the method that the help sub-processor works. This is now fixed
and submitted.

[8/12/94 public]
closed.



CR Number                     : 11466
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : read/write bindings to/from file
Reported Date                 : 7/27/94
Found in Baseline             : 1.1
Found Date                    : 7/27/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : bunches
Sensitivity                   : public

[7/27/94 public]
dtdsd, auditd, and dced secval all write bindings to a known file.
We should have routines to do this transparently.  John, Charlie,
and I worked out the API and reviewed the code.

[07/27/94 public]
Code submitted.
When each of the three servers above are converted we can close this.

[07/28/94 public]
I fixed dced.  I opened OT CR 11470 for sec_login, so when dts/dtscp/dcecp
and auditd/auditcp/dcecp are fixed we can close this.  Charlie, John, it's
in your courts...

[7/28/94 public]
I've fixed dcecp for dts and auditing. I will be submitting auditd 
tonight too. Auditcp is dead, but will still work. dcecp talking to dtsd
will be broken until Charlie fixes dtsd (no pressure). :-)

[8/2/94 public]
It looks like we've fixed all the pieces.

[8/12/94 public]
closed.



CR Number                     : 11453
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : registry
Short Description             : Output of "registry show -replica" has syntax error
Reported Date                 : 7/26/94
Found in Baseline             : 1.1b12
Found Date                    : 7/26/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b17
Affected File(s)              : src/admin/dcecp/rgy_sa_replist.c
Sensitivity                   : public

[7/26/94 public]


The output of "registry show -replica" includes the following line:

{lastupdseq 0.178}{ncadg_ip_udp 130.105.4.33}}}{ncadg_ip_udp 130.105.4.33}}}

I have no idea what those bindings are doing there (complete with
extra closing braces), but "attrlist getvalues" doesn't like them.
"host show" needs this to be clean.

[7/26/94 public]

The output of "registry show -replica" is as follows:

dcecp> set _s(sec) /.../dcecp_cell.osf.org/subsys/dce/sec/ice
/.../dcecp_cell.osf.org/subsys/dce/sec/ice
dcecp> regi sh -rep
{name /.../dcecp_cell.osf.org/subsys/dce/sec/ice}
{type slave}
{cell /.../dcecp_cell.osf.org}
{uuid 62eea409-a8bc-11cd-aba3-0000c0239a70}
{status enabled}
{lastupdtime 1994-07-27-10:00:07.000-04:00I-----}
{lastupdseq 0.1419}
{addresses {{ncacn_ip_tcp 130.105.5.45}
            {ncadg_ip_udp 130.105.5.45}}}
{masteraddrs {{ncacn_ip_tcp 130.105.5.121}
              {ncadg_ip_udp 130.105.5.121}}}
{masterseqnum 0.100}
{masteruuid 9fdf0464-a7d3-11cd-b01d-0800092734a4}
{version secd.dce.1.1}

There are no extra braces around the addresses. The display is 
{attribute value}
OR
{attribute {{value1 in TCL syntax} 
            {value2 in TCL syntax}}}

Maybe we should talk off-line.

[7/27/94 public]

Further investigation using gdb reveals that, on my machine (a 486
using the "lastgoodbuild" of Sunday night 7/24), each of the
"addresses" attributes has two "towers" values, and for some reason
the rpc_tower_to_binding call for the first tower is returning a non-0
status code (382312541 decimal, I don't know what this is), but the
second call (on a tower which looks identical to my unpractised eye)
is OK. This causes the code in dcp__rgy_sa_print_towers
(rgy_sa_replist.c) to omit the printing of the string "\n{addresses
{".

I don't know why the status code is nonzero, but the routine shoudl
handle the situation more reliably, either by returning an error
immediately or by keeping better track of whether the attribute name
has actually been printed.

[7/27/94 public]
Now that Kevin has pointed out to me that the error code is "protocol
sequence not supported", I know why I was getting it: for obscure
reasons I had set RPC_SUPPORTED_PROTSEQS to "ncadg_ip_udp", so the
first tower was unsupported. My contention that the command should
handle this situation more comprhensibly stands.

[8/1/94 public]
Just off-hand (still almost 500 email msgs to go :-), the general rule is
this:  If you do an llength of the attribute you get 1+ the number of
values.  The following, quoted from above, is wrong:

         {attribute {{value1 in TCL syntax} 
                     {value2 in TCL syntax}}}

It should be:

         {attribute {value1 in TCL syntax} 
                    {value2 in TCL syntax}}

Now this can get confusing when values are in fact lists.  I don't THINK
the attributes of "registry show -replica" are though.

[8/4/94 public]
Down to a B 2.  There are some other more important bugs Julie is working
on.  Now that I understand it this defect is two fixes:

 * In a error case when generating bindings the output of the rgy show
   -replica's command gets messed up.  Answer: don't set
   RPC_SUPPORTED_PROTSEQS and this won't happen.  The output still needs to
   be fixed, but it makes this defect less important.

 * In addresses and masteraddrs there are an extra set of braces grouping
   all the values.  What is currently:

       {addresses {{ncacn_ip_tcp 130.105.5.45}
		   {ncadg_ip_udp 130.105.5.45}}}
       {masteraddrs {{ncacn_ip_tcp 130.105.5.121}
		     {ncadg_ip_udp 130.105.5.121}}}

   should be:

       {addresses {ncacn_ip_tcp 130.105.5.45}
		  {ncadg_ip_udp 130.105.5.45}}
       {masteraddrs {ncacn_ip_tcp 130.105.5.121}
		    {ncadg_ip_udp 130.105.5.121}}

[8/5/94 public]

If a user sets the environment variable RPC_SUPPORTED_PROTOSEQS or if 
a server machine is using protocol sequences that the client does not 
know about, then a tower may be untranslatable.

As a result, if there is a bad status from rpc_tower_to_binding() or from 
rpc_binding_to_string_binding() API calls, then display the message
"untranslatable binding".

[8/5/94 public]
I also removed the extraneous braces around the string bindings. They
are now displayed as follows:
       {addresses {ncacn_ip_tcp 130.105.5.45}
		  {ncadg_ip_udp 130.105.5.45}}
       {masteraddrs {ncacn_ip_tcp 130.105.5.121}
		    {ncadg_ip_udp 130.105.5.121}}

[8/10/94 public]

This defect is re-opened since we will now display "untranslatable"
bindings in binary format. Refer to defect CR11575.

[8/24/94 public]

Here's the final output:
______________________________________
Normal:

dcecp> registry show -replica
{name /.../dcecp_cell.osf.org/subsys/dce/sec/ice}
{type slave}
{cell /.../dcecp_cell.osf.org}
{uuid c660585c-be8c-11cd-aea9-0000c0239a70}
{status enabled}
{lastupdtime 1994-08-24-15:50:59.000-04:00I-----}
{lastupdseq 0.512}
{addresses
 {ncacn_ip_tcp 130.105.5.45}
 {ncadg_ip_udp 130.105.5.45}}
{masteraddrs
 {ncacn_ip_tcp 130.105.5.121}
 {ncadg_ip_udp 130.105.5.121}}
{masterseqnum 0.240}
{masteruuid 512ea04e-be86-11cd-8758-0800092734a4}
{version secd.dce.1.1}

______________________________________
setenv RPC_SUPPORTED_PROTSEQS ncadg_ip_udp

dcecp> registry show -replica
{name /.../dcecp_cell.osf.org/subsys/dce/sec/master}
{type master}
{cell /.../dcecp_cell.osf.org}
{uuid 512ea04e-be86-11cd-8758-0800092734a4}
{status enabled}
{lastupdtime 1994-08-24-15:50:59.000-04:00I-----}
{lastupdseq 0.512}
{addresses
 {05 00 13 00 0d a8 2f 8c 5b 0b b6 c9 11 be 0f 08 00 1e 01 8f
  a0 01 00 02 00 01 00 13 00 0d 04 5d 88 8a eb 1c c9 11 9f e8
  08 00 2b 10 48 60 02 00 02 00 00 00 01 00 0b 02 00 01 00 01
  00 07 02 00 00 00 01 00 09 04 00 82 69 05 79}
 {ncadg_ip_udp 130.105.5.121}}
{masteraddrs
 {05 00 13 00 0d a8 2f 8c 5b 0b b6 c9 11 be 0f 08 00 1e 01 8f
  a0 01 00 02 00 01 00 13 00 0d 04 5d 88 8a eb 1c c9 11 9f e8
  08 00 2b 10 48 60 02 00 02 00 00 00 01 00 0b 02 00 01 00 01
  00 07 02 00 00 00 01 00 09 04 00 82 69 05 79}
 {ncadg_ip_udp 130.105.5.121}}
{masterseqnum 0.240}
{masteruuid 512ea04e-be86-11cd-8758-0800092734a4}
{version secd.dce.1.1}
{updseqqueue {0.512 0.512}}

______________________________________
setenv RPC_SUPPORTED_PROTSEQS ncacn_ip_tcp

dcecp> registry show -replica
{name /.../dcecp_cell.osf.org/subsys/dce/sec/master}
{type master}
{cell /.../dcecp_cell.osf.org}
{uuid 512ea04e-be86-11cd-8758-0800092734a4}
{status enabled}
{lastupdtime 1994-08-24-15:50:59.000-04:00I-----}
{lastupdseq 0.512}
{addresses
 {ncacn_ip_tcp 130.105.5.121}
 {05 00 13 00 0d a8 2f 8c 5b 0b b6 c9 11 be 0f 08 00 1e 01 8f
  a0 01 00 02 00 01 00 13 00 0d 04 5d 88 8a eb 1c c9 11 9f e8
  08 00 2b 10 48 60 02 00 02 00 00 00 01 00 0a 02 00 00 00 01
  00 08 02 00 00 00 01 00 09 04 00 82 69 05 79}}
{masteraddrs
 {ncacn_ip_tcp 130.105.5.121}
 {05 00 13 00 0d a8 2f 8c 5b 0b b6 c9 11 be 0f 08 00 1e 01 8f
  a0 01 00 02 00 01 00 13 00 0d 04 5d 88 8a eb 1c c9 11 9f e8
  08 00 2b 10 48 60 02 00 02 00 00 00 01 00 0a 02 00 00 00
  01 00 08 02 00 00 00 01 00 09 04 00 82 69 05 79}}
{masterseqnum 0.240}
{masteruuid 512ea04e-be86-11cd-8758-0800092734a4}
{version secd.dce.1.1}
{updseqqueue {0.512 0.512}}

[8/26/94 public]
closed.



CR Number                     : 11451
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : 64 bit porting changes
Reported Date                 : 7/26/94
Found in Baseline             : 1.1
Found Date                    : 7/26/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : rgy.c, 
                                             cdscp_utils.c,
                                             cdscp_clearinghouse.c
Sensitivity                   : public

[7/26/94 public]

The following files need to be modified to run on a 64 bit platform:

    aud_ops.c
    aud_util.c
    cdscp_clearinghouse.c
    cdscp_utils.c
    clock.c
    dts_ops.c
    dts_util.c
    parseargv.c
    rgy.c
    utc_ops.c
    util_general.c
    util_help.c
    util_login.c

The changes to dts_util.c need to be coordinated with changes to dce.h
being made by Charlie Brooks and York Lo.

The following are the diffs of the changes:

=========================================
diff -r dcecp/aud_ops.c /project/dce/build/dce1.1/src/admin/dcecp/aud_ops.c
93d92
< #include <stdlib.h>
=========================================
diff -r dcecp/aud_util.c /project/dce/build/dce1.1/src/admin/dcecp/aud_util.c
65d64
< #include <stdlib.h>
=========================================
diff -r dcecp/cdscp_clearinghouse.c /project/dce/build/dce1.1/src/admin/dcecp/cdscp_clearinghouse.c
1213,1215d1212
< #if LONG_BIT >= 64
<     sprintf (buffer, "%d", attr->value.av_val.av_counter64);
< #else
1223d1219
< #endif
=========================================
diff -r dcecp/cdscp_utils.c /project/dce/build/dce1.1/src/admin/dcecp/cdscp_utils.c
241a242
> static time_quad_t nulltime={0u,0u};
249d249
< static time_quad_t nulltime=0;
252d251
< static time_quad_t nulltime={0u,0u};
1680c1679
<     unsigned32 converg;
---
>     unsigned32 converg = 2;
1700,1701d1698
<         /* set the default convergence to medium */
<         *buffer = (char *)dce_sprintf(dcp_t_cds_medium);
=========================================
diff -r dcecp/clock.c /project/dce/build/dce1.1/src/admin/dcecp/clock.c
263c263
<     signed32                    show_attr;
---
>     long int                    show_attr;
=========================================
diff -r dcecp/dts_ops.c /project/dce/build/dce1.1/src/admin/dcecp/dts_ops.c
197c197
<               (signed32 *)&abrupt_flag,
---
>               (long int *)&abrupt_flag,
1167c1167
<                    (signed32 *)&abr_flag,
---
>                    (long int *)&abr_flag,
=========================================
diff -r dcecp/dts_util.c /project/dce/build/dce1.1/src/admin/dcecp/dts_util.c
13,14c13,14
<  *    Added error message when binding file open fails (CR 11151).
<  *    [1994/07/01  14:01:19  rousseau]
---
>  *    Added error message when binding file open fails (CR 11151).
>  *    [1994/07/01  14:01:19  rousseau]
17,19c17,19
<  *    include <limits.h>
<  *    [1994/06/27  19:43:29  ohara]
<  *
---
>  *    include <limits.h>
>  *    [1994/06/27  19:43:29  ohara]
>  *
23c23
<  *
---
>  *
111,113d110
< #if LONG_BIT >= 64
< #define ASSIGN_HYPER_TO_BITS64(a,b) (a) = (b)
< #else
115d111
< #endif
147a144
>
1366c1363
<     idl_long_int                  show_attr;
---
>     long int                      show_attr;
1415c1412
<     idl_long_int                  show_attr;
---
>     long int                      show_attr;
1463,1464c1460,1461
<     idl_long_int                  max_servers = MAX_TSERVERS;
<     idl_long_int                  server_count;
---
>     long int                      max_servers = MAX_TSERVERS;
>     long int                      server_count;
1510,1511c1507,1508
<     idl_long_int                  max_servers = MAX_TSERVERS;
<     idl_long_int                  server_count;
---
>     long int                      max_servers = MAX_TSERVERS;
>     long int                      server_count;
1708,1710d1704
< #if LONG_BIT >= 64
<         if ( (tvalue & 0xffffffff00000000) == 0 ) {
< #else
1712d1705
< #endif
1724,1726d1716
< #if LONG_BIT >= 64
<         if ( (tvalue & 0xffffffff00000000) == 0 ) {
< #else
1728d1717
< #endif
1737,1741c1726
< #if LONG_BIT >= 64
<         if ( (tvalue & 0xffffffff00000000) == 0 ) {
< #else
<         if (tvalue.hi == 0) {
< #endif
---
>         if (tvalue.hi != 0) {
1815,1817d1799
< #if LONG_BIT >= 64
<     *prodPtr = u * v;
< #else
1825d1806
< #endif
1862,1867d1842
< #if LONG_BIT >= 64
<     if (remdPtr)
<         *remdPtr = *dividendPtr % divisor;
<     *quotPtr = *dividendPtr / divisor;
<     return(0);
< #else
1966d1940
< #endif
1998,2000d1971
< #if LONG_BIT >= 64
<     *prodPtr = u * v;
< #else
2017d1987
< #endif
=========================================
diff -r dcecp/parseargv.c /project/dce/build/dce1.1/src/admin/dcecp/parseargv.c
300d299
< /*
302,303d300
< */
<               *((long *) infoPtr->dst) = (long) infoPtr->src;
=========================================
diff -r dcecp/rgy.c /project/dce/build/dce1.1/src/admin/dcecp/rgy.c
2250,2252c2250,2252
<     signed32             members_supplied = 0;
<     signed32             members_avail = 0;
<     signed32             max_members = 1024;
---
>     long                 members_supplied = 0;
>     long                 members_avail = 0;
>     long                 max_members = 1024;
3018,3020c3018,3020
<     signed32             members_supplied = 0;
<     signed32             members_avail = 0;
<     signed32             max_members = 1024;
---
>     long                 members_supplied = 0;
>     long                 members_avail = 0;
>     long                 max_members = 1024;
=========================================
diff -r dcecp/utc_ops.c /project/dce/build/dce1.1/src/admin/dcecp/utc_ops.c
29c29
< #include <stdlib.h>
---
>
=========================================
diff -r dcecp/util_general.c /project/dce/build/dce1.1/src/admin/dcecp/util_general.c
126c126
<   command = (char *)malloc(strlen(cmd_string) + strlen(list));
---
>   command = malloc(strlen(cmd_string) + strlen(list));
=========================================
diff -r dcecp/util_help.c /project/dce/build/dce1.1/src/admin/dcecp/util_help.c
38d37
< #include <stdlib.h>
=========================================
diff -r dcecp/util_login.c /project/dce/build/dce1.1/src/admin/dcecp/util_login.c
94d93
< #include <stdlib.h>

[7/28/94 public]
Submitted:
    aud_ops.c
    aud_util.c
    clock.c
    dts_ops.c
    dts_util.c
    parseargv.c
    utc_ops.c
    util_general.c
    util_help.c
    util_login.c

Kevin Sullivan will be fixing the remaining files:
    cdscp_clearinghouse.c
    cdscp_utils.c
    rgy.c

[7/29/94 public]

Done and submitted. 
    cdscp_clearinghouse.c
    cdscp_utils.c
    rgy.c

[8/1/94 public]

There was a typo made to the file dts_util.c when the 64 bit changes were 
merged.  In the function uediv() the variable dividentPtr should be dividendPtr.

[8/1/94 public]
The above typo was corrected and submitted earlier this morning.

[8/12/94 public]
closed.



CR Number                     : 11449
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : Parsing of schema attribute field names when given no values causes problems.
Reported Date                 : 7/26/94
Found in Baseline             : 1.1b12
Found Date                    : 7/26/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : rgy_utils.c
Sensitivity                   : public

[7/26/94 public]

The parsing for schema attribute names, when those attribute names
are given no values, causes problems.  The following lines cause
the attributes to be given incorrect values, but still continue
operation:

      schema create gumby ... -attribute {uuid}

      schema create gumby ... -attribute {intercell}

The following lines cause dcecp to core dump:

      schema create gumby ... -attribute {aclmgr}

      schema create gumby ... -attribute {trigbind}

      schema create gumby ... -attribute {scope}

      schema create gumby ... -attribute {annotation}

When the other attribute fields are given no value upon input,
the schema command works as expected.  Note when no value is
passed via a switch (-scope or -intercell), the schema command
works as expected.

[8/17/94 public]
The -attribute behavior was corrected to more closely
check input before passing it along to various routines.
The tests now pass.

[8/18/94 public]
closed.



CR Number                     : 11448
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : failures in some era tests
Reported Date                 : 7/26/94
Found in Baseline             : 1.1b12
Found Date                    : 7/26/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : schema_*.tcl, pgo_*_era_*.tcl
Sensitivity                   : public

[7/26/94 public]

Some of the test cases submitted for the "schema" command need to
be completed.  All test problems are combined into one bug to
save time, but separate bugs are open for the code causing the
test problems as well..

   1. When support for generic schema name support is added to the
      schema command, a few of the tests will change from N to P, or
      will have their expected output change.  The tests that will
      have to changed are well commented in the test files themselves.
      This will effect all schema commands (show, catalog, create,
      modify, delete, rename).

   2. Two tests in schema create FAIL due to an open security bug,
      dealing with recognition of the encoding type stringarray.
      When the security bug is fixed, the two tests (9P, 10P) will
      both pass.

   3. Four tests are missing in the schema create negative test file.
      Including these tests cause dcecp to core dump.  When the
      problem is fixed in dcecp, the tests 32N, 39N, 40N and 41N
      should be added to the test file.

   4. The underlying functionality for all aspects of schema catalog,
      schema rename, and schema modify is currently missing.  The
      P tests for these were written to the best extent possible, but
      when the functionality arrives, these tests should be checked
      closely.

[8/17/94 public]

Problems 2 and 3 above have been fixed.  The schema catalog part of
number 4 has also been fixed.  We are still waiting on generic schema
support and the modify api before the tests can be completed.

[8/24/94 public]

The api call to support schema modify will not be completed by the
end of this week, so the best we will get from our schema modify
tests is "unsupported".  Submits were made to change "schema" to
"xattrschema" in all cases, thus partially completing problem 1 above.

[8/26/94 public]

Support in the schema tests was added today for generic schema calls.
Some tests that were N tests were changed to P and the messages in
other N tests were updated to reflect the new functionality.  The
pgo modify_era N and P tests were also submitted, although the P
tests are not complete.  I'll mark this bug fixed, as the initial
problems in this bug are fixed.  However, I will also open another
bug to track some of the current era test deficiencies in more
detail.

[9/26/94 public]
closed.



CR Number                     : 11424
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dhd
Short Description             : Enhance the server modify command
Reported Date                 : 7/25/94
Found in Baseline             : 1.1b12
Found Date                    : 7/25/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : rgy.h rgy_utils.c dhd_server.c dhd_util.c dhd.h
Sensitivity                   : public

[7/25/94 public]

server modify -add|-remove need to do the same as modify in rgy. Basically
it need to append new-value(s) to existing one and also be able to remove
individual value(s) from existing era attribute instance. I'll try to figure
out a way to call the corresponding routine(s) in rgy_utils.c so that it 
could keep sync-ing with the modify commands in rgy.

[8/24/94 public]
Submitted a couple of days ago.

[9/27/94 public]
closed.



CR Number                     : 11418
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : server obj
Short Description             : Adding secondary printstring_array attr to a server object dumps core
Reported Date                 : 7/25/94
Found in Baseline             : 1.1b12
Found Date                    : 7/25/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : dhd_server.c
Sensitivity                   : public

[7/25/94 public]
While adding secondary printstring_array attr to a server object,
dcecp core dumps. Somewhere, a pointer must be collapsed, but don't
know where yet ...

[7/25/94 public]
A size arguement to a malloc macro need parentheses surrounded.
Submitted.

[8/12/94 public]
closed.



CR Number                     : 11415
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : endpoint
Short Description             : need to do remote endpoint show
Reported Date                 : 7/25/94
Found in Baseline             : 1.1b13
Found Date                    : 7/25/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : rpccp.c
Sensitivity                   : public

[7/25/94 public]
rpccp show mapping takes an optional argument to bind to another 
endpoint mapper to read bindings remotely. dcecp endpoint show
(and probably all other endpoint commands) needs to do this.

This is an enhancement, but is blocking development of the
host task script, hence the A0.

[7/25/94 public]
RFC42.3 needs to be updated with this new information. This CR
will track both code and spec changes.

[7/25/94 public]
I think actually only "show" and "delete" should take this argument.
There doesn't seem to be a direct rpccp equivalent for "endpoint
create" anyway, and I can't find any evidence of an RPC API that
registers endpoints in non-local endpoint maps.

Also, the change has to find its way not only into the spec but into
the (in-progress) Admin Guide.

[7/26/94 public]
Correction: only "show" takes this argument.

Initial code change submitted, but it doesn't yet handle Tcl syntax
bindings (it should).

[7/26/94 public]
Reduced severity/priority because the partial fix means that John is
no longer blocked.

[9/9/94 public]
Now modified to handle Tcl syntax bindings too.

[9/26/94 public]
closed.



CR Number                     : 11409
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : Should determine security registry name on the fly.
Reported Date                 : 7/25/94
Found in Baseline             : 1.1b12
Found Date                    : 7/25/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : src/admin/dcecp/rgy.h,src/admin/dcecp/schema_ops.c,src/admin/dcecp/schema_utils.c
Sensitivity                   : public

[7/25/94 public]

The variable DEFAULT_RGY_SCHEMA_NAME is currently used to hold
the default registry schema name.  This name should be determined
on the fly, as the default may be differ between cells.

[9/20/94 public]
Julie has graciously volunteered to take this one as well...

[9/28/94 public]
closed.



CR Number                     : 11398
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 11396
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dhd
Short Description             : new name attribute on server
Reported Date                 : 7/22/94
Found in Baseline             : 1.1b12
Found Date                    : 7/22/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : dhd.h dhd_server.c dhd_util.c
Sensitivity                   : public

[7/22/94 public]
CR 11396 describes adding a new field to dced's server structure called
entryname.  This needs to be exposed as an attribute when doing "server
show".  The attribute should be called "name".

[8/9/94 public]
This one has dependency on CR 11396.

[8/24/94 public]
Submitted.

[8/26/94 public]
closed.



CR Number                     : 11394
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : pgo
Short Description             : Accept setting _s(sec) with a TCL s
yntax string binding.
Reported Date                 : 7/22/94
Found in Baseline             : 1.1b12
Found Date                    : 7/22/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : rgy_utils.c
Sensitivity                   : public

[7/22/94 public]

Problem is in module rgy_utils.c in open_rgy_site() routine.

Try this:
dcecp> set _s(sec) {ncacn_ip_tcp 130.105.5.121}
dcecp> prin cat
Error: Registry server unavailable
dcecp> set _s(sec) ncacn_ip_tcp:130.105.5.121
dcecp> prin cat
/.../dcecp_cell.osf.org/nobody
/.../dcecp_cell.osf.org/root
/.../dcecp_cell.osf.org/daemon
/.../dcecp_cell.osf.org/sys
/.../dcecp_cell.osf.org/bin
/.../dcecp_cell.osf.org/uucp
/.../dcecp_cell.osf.org/who
/.../dcecp_cell.osf.org/mail
/.../dcecp_cell.osf.org/tcb
/.../dcecp_cell.osf.org/dce-ptgt
/.../dcecp_cell.osf.org/dce-rgy
/.../dcecp_cell.osf.org/cell_admin
/.../dcecp_cell.osf.org/krbtgt/dcecp_cell.osf.org
/.../dcecp_cell.osf.org/hosts/frick/self
/.../dcecp_cell.osf.org/hosts/frick/cds-server
/.../dcecp_cell.osf.org/hosts/frick/gda
/.../dcecp_cell.osf.org/hosts/ninja/self
/.../dcecp_cell.osf.org/hosts/ninja/cds-server
/.../dcecp_cell.osf.org/hosts/ninja/gda
/.../dcecp_cell.osf.org/hosts/ice/self
/.../dcecp_cell.osf.org/hosts/ice/cds-server
/.../dcecp_cell.osf.org/hosts/ice/gda

[kevins 7/29/94 public] 
Now accepts a tcl binding syntax for _s(sec). Submitted.

[8/12/94 public]
Close:

  dcecp> set _s(sec)  {ncacn_ip_tcp 130.105.5.93}
  ncacn_ip_tcp 130.105.5.93
  dcecp> princ cat
  /.../absolut_cell/nobody
  /.../absolut_cell/root
  /.../absolut_cell/daemon
  /.../absolut_cell/sys
  /.../absolut_cell/bin
  /.../absolut_cell/uucp
  /.../absolut_cell/who
  /.../absolut_cell/mail
  /.../absolut_cell/tcb
  /.../absolut_cell/dce-ptgt
  /.../absolut_cell/dce-rgy
  /.../absolut_cell/cell_admin
  /.../absolut_cell/krbtgt/absolut_cell
  /.../absolut_cell/hosts/absolut/self
  /.../absolut_cell/hosts/absolut/cds-server
  /.../absolut_cell/hosts/absolut/gda
  dcecp> set _s(sec)
  ncacn_ip_tcp:130.105.5.93

when setting _s(sec) after a rgy command has executed, you must set it to
the Tcl syntax not the string syntax, regardless of which form was entered.

[8/23/94 public]
        
This now conforms I believe to required behavior. Also when accessing a 
registry via the string binding I now aquire the cell name with 
sec_rgy_site_binding_get_info instead of sec_id_parse_name.



CR Number                     : 11393
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : registry
Short Description             : Accept setting _s(sec) with a TCL syntax string binding.
Reported Date                 : 7/22/94
Found in Baseline             : 1.1b12
Found Date                    : 7/22/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b17
Affected File(s)              : src/admin/dcecp/rgy_sa_tclif.c, src/admin/dcecp/rgy_sa_replist.c
Sensitivity                   : public

[7/22/94 public]

Try this:

dcecp> set _s(sec) {ncacn_ip_tcp 130.105.5.121}
dcecp> regi cat
Error: Registry server unavailable
dcecp> set _s(sec) ncacn_ip_tcp:130.105.5.121
dcecp> regi cat
/.../dcecp_cell.osf.org/subsys/dce/sec/ice
/.../dcecp_cell.osf.org/subsys/dce/sec/master

[8/12/94 public]
Almost:

  dcecp> set _s(sec)  {ncacn_ip_tcp 130.105.5.93}
  ncacn_ip_tcp 130.105.5.93
  dcecp> rgy cat
  /.../absolut_cell/subsys/dce/sec/master
  dcecp> set _s(sec)                              
  ncacn_ip_tcp:130.105.5.93

The value should be shown in Tcl syntax.  If this is a dup of 11394 please
mark as such.

[8/25/94 public]

dcecp> set _s(sec) {ncacn_ip_tcp 130.105.5.121}
ncacn_ip_tcp 130.105.5.121
dcecp> regi cat
/.../dcecp_cell.osf.org/subsys/dce/sec/ice
/.../dcecp_cell.osf.org/subsys/dce/sec/master
dcecp> set _s(sec)
ncacn_ip_tcp 130.105.5.121

[8/26/94 public]
closed.



CR Number                     : 11390
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dts
Short Description             : change epoch w/o setting time
Reported Date                 : 7/22/94
Found in Baseline             : 1.1b12
Found Date                    : 7/22/94
Severity                      : D
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : admin/dcecp/clock.c
Sensitivity                   : public

[7/22/94 public]
Really low priority and has work around, just here as a placeholder

dtscp let you change the epoch without setting the time, dcecp does not.
You can always use the following workaround:

    clock set [clock show] -epoch 2

Though it would be easier if the time argument were optional.

[8/3/94 public]
Ok. Done. 

Valid commands are now:

clock set TIME
clock set TIME -epoch N -abruptly
clock set -epoch N

[8/12/94 public]
Not quite:

  dcecp> clock show 
  1994-08-12-10:28:27.625-04:00I-----
  dcecp> clock set 1994-08-12-10:30:00 
  Error: -to option not specified.
  dcecp> help clock set
  -abruptly           Immediately set the system clock to the specified time.
  -epoch              Specify a new epoch.
  -to                 Specify the ISO time value to set the clock to.
  dcecp> clock set -to 1994-08-12-10:30:30
  dcecp> clock sho
  1994-08-12-10:29:55.196-04:00I-----
  dcecp> clock set -to 1994-08-12-10:31:00 -ab
  Error: -epoch option not specified.
  dcecp> clock set -to 1994-08-12-10:31:30 -ab -ep 2
  Error: connection closed

The -to option is all correct.  John just described it incorrectly (or to
an old version of the spec) in his note above.  The code and spec now
match.  The error that -abruptly requires -epoch is correct though perhaps
if the message was more explicit: "The -abrubtly option requires the -epoch
option."  When I got the command correct it caused dtsd to die.

Perhaps this is just a DTS bug and not dcecp, I didn't try to recreate with
dtscp.  I see the following on the console:

Fatal error at line 2399 in file /project/dce/build/dce1.1-snap/src/time/service/dtss_service_ncl.c

[8/12/94 public]
Just submitted now. Don't ask.

[8/17/94 public]
closed.



CR Number                     : 11387
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : init.dcecp
Short Description             : variable for DCELOCAL path
Reported Date                 : 7/21/94
Found in Baseline             : 1.1b12
Found Date                    : 7/21/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : admin/dcecp/scripts/init.dcecp
Sensitivity                   : public

[7/21/94 public]
The init.dcecp file should create a variable containing the path of
<dcelocal> on the host.  task scripts need this.  Call the variable:

  set dcelocal_path /opt/dcelocal

[7/22/94 public]
Submitted.

[8/12/94 public]
closed.



CR Number                     : 11384
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : cellalias -> cdsalias
Reported Date                 : 7/21/94
Found in Baseline             : 1.1b12
Found Date                    : 7/21/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : commands.c
Sensitivity                   : public

[7/21/94 public]
The existing cellalias object should be renamed cdsalias as it only affects
the cellname as CDS understands it.  "cellalias" will be used for "the big
H-cell script".

[8/3/94 public]
submitted by Roger Zee 8/1/94

[8/12/94 public]
closed.



CR Number                     : 11383
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : cellalias catalog has optional arg
Reported Date                 : 7/21/94
Found in Baseline             : 1.1b12
Found Date                    : 7/21/94
Severity                      : D
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : dcecp
Sensitivity                   : public

[7/21/94 public]
The cellalias catalog command (the one that does cds only) should take an
optional argument that specifies the cellname to act in.  It defaults to
/.:

[8/12/94 public]
cdsalias cat works without an argument.  I didn't have intercell set up but
tried: 

  dcecp> cdsalias cat /.../othercell
  Error: Requested operation would result in lost connectivity to root directory

This is a weird error message to get if nothing else.

[8/12/94 public]
closed.  Another CR will be opened against CDS for the error message returned.



CR Number                     : 11368
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : pgo/rgy cat take arg of cellname
Reported Date                 : 7/20/94
Found in Baseline             : 1.1b12
Found Date                    : 7/20/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : rgy.c
Sensitivity                   : public

[7/20/94 public]
It would be nice if pgo catalog, registry catalog, and account catalog took
an argument that could specify another cell.  The current work around is to
set _s(sec) to point to the other cell.  Other catalog operations work this
way.  This is low priority.

[8/8/94 public]

The commands now take an optional argument to determine the cell name to 
catalog.

[8/12/94 public]
closed.



CR Number                     : 11361
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : clearinghouse counter information not formated properly.
Reported Date                 : 7/20/94
Found in Baseline             : 1.1
Found Date                    : 7/20/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : cdscp_clearinghouse.c
                                             dcp.sams
Sensitivity                   : public

[7/20/94 public]


Currently the clearinghouse counter information looks like:

{read_accesses 854}
{write_accesses 124}
{references_returned 0}
{root_not_reachable 0}
{data_corruption 0}
{skulk_failures 0}
{entry_missing 0}
{upgrade_fail 0}
{enables 0}
{disables 0}

It should look like:

{corruptions 0}
{disables 0}
{enables 1}
{failedupgrades 0}
{missingentries 0}
{reads 2336}
{returnedrefs 2}
{rootunreachables 0}
{skulkfailures 0}
{writes 68}

[8/2/94 public]
Done and submitted.

[8/12/94 public]
closed.



CR Number                     : 11343
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : strdup -> dce_strdup
Reported Date                 : 7/18/94
Found in Baseline             : 1.1b12
Found Date                    : 7/18/94
Severity                      : E
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : acl_edit.c, acl_tclif.c,
aud_ops.c, aud_util.c, cdscp_utils.c, commands.c, dcecp.h, dhd_hostdata.c,
dhd_keytab.c, dhd_server.c, dhd_util.c, dts_util.c, log_tclif.c, rgy.c,
rgy_sa_replist.c, rgy_utils.c, util_general.c, util_var.c
Sensitivity                   : public

[7/18/94 public]
Change all occurances of strdup() to dce_strdup().  strdup isn't defined
in standards so dce_strdup has been implemented in the dce utils
library: 

  Files modified: dce/utils/misc/{Makefile,dce_utils.h,strdup.c}

[7/19/94 public]
Can we #define strdup dce_strup in a central header file so that this
happens automatically in all code for free.

I vote for raising priority and getting this in.  Who knows how many 
mysterious crashes have been caused by use of non-thread safe strdup()?

[7/19/94 public]
I'd rather not.  To me that's just hiding the issue when it comes time to
debug.  This defect is just for the dcecp cases.  Rich had done a grep of
the tree and more than half of the cases were in dcecp.  There just aren't
that many occurances.  The dce_strdup is already submitted.  The dcecp
changes will go in shortly.

[07/29/94 public]
I believe I have fixed every component except XDS and DCECP.

[8/8/94 public]
changed all strdup's to dce_strdup, added #include <dce/dce_utils.h> to
dcecp.h and removed from all other places.

[8/12/94 public]
closed.



CR Number                     : 11330
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : dir show -member not implemented.
Reported Date                 : 7/15/94
Found in Baseline             : 1.1
Found Date                    : 7/15/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : dcp.sams
                                             cdscp.c
Sensitivity                   : public

[7/15/94 public]

The command 
dcecp> directory show {dirname} -member {membername} is not implemented.

[7/18/94 public]
Added -member capabilities. Submitted.

[8/12/94 public]
closed.



CR Number                     : 11311
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : tet tests
Short Description             : Global variables within
global variables are not translated.
Reported Date                 : 7/14/94
Found in Baseline             : 1.1b11
Found Date                    : 7/14/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : test/tet/src/tcl/api/tcm.tcl.dat
Sensitivity                   : public

[7/14/94 public]

This affects all the LOG FVT suite and some delegation and mask FVT
tests for ACL FVT suite.

Look at tests acl_modify_044_P and acl_modify_045_P.

if {[dcp_wrap {global DCP_HOSTNAME_ONE DCP_ACL_OBJ_MASK1}] != 0} {return;}
In tetexec.cfg file:   DCP_ACL_OBJ_MASK1=/.:/hosts/ice/dts-entity
   ********WORKS*************

15|0 1.10 2|TCM Start
400|0 3 1 17:24:17|IC Start
200|0 1 17:24:17|TP Start
520|0 1 27905 1 1|acl_modify_044_P: Check that a mask re-calculation occurs after all
520|0 1 27905 1 2|acl_modify_044_P: modifications are made on the specified ACL object that
520|0 1 27905 1 3|acl_modify_044_P: supports the mask_obj ACL entry type. The mask_obj ACL
520|0 1 27905 1 4|acl_modify_044_P: entry type does not exist but will be created.
520|0 1 27905 1 5|ACL object list: /.:/hosts/ice/dts-entity
520|0 1 27905 1 6|ACL type: {}
520|0 1 27905 1 7|ACL manager type: {}
520|0 1 27905 1 8|ACL entry list: {{mask_obj rwc} {user acl_modify_044_P rwc}}
520|0 1 27905 1 9|ACL object list: /.:/hosts/ice/dts-entity
520|0 1 27905 1 10|ACL type: {}
520|0 1 27905 1 11|ACL manager type: {}
520|0 1 27905 1 12|Result from acl show on /.:/hosts/ice/dts-entity === {{mask_obj rwc} {unauthenticated r--} {user hosts/ice/self rwc} {user 000031cd-9f51-21cd-a700-0800092734a4 r--} {user acl_modify_044_P rwc} {group subsys/dce/dts-admin rwc} {any_other r--}}
520|0 1 27905 1 13|ACL entry to be compared: {mask_obj rwc}
520|0 1 27905 1 14|ACL object list: /.:/hosts/ice/dts-entity
520|0 1 27905 1 15|ACL type: {}
520|0 1 27905 1 16|ACL manager type: {}
520|0 1 27905 1 17|Result from acl show on /.:/hosts/ice/dts-entity === {{mask_obj rwc} {unauthenticated r--} {user hosts/ice/self rwc} {user 000031cd-9f51-21cd-a700-0800092734a4 r--} {user acl_modify_044_P rwc} {group subsys/dce/dts-admin rwc} {any_other r--}}
520|0 1 27905 1 18|ACL entry to be compared: {user acl_modify_044_P rwc}
520|0 1 27905 1 19|==== Contents of test case:
520|0 1 27905 1 20|{ acl modify $DCP_ACL_OBJ_MASK1 -mask calc -a user:$name:rwc 	    dcp_acl_find_multi_entries "$DCP_ACL_OBJ_MASK1" {} {} "[list "mask_obj rwc" "user $name rwc"]" 	   }
520|0 1 27905 1 21|Test completed successfully.
520|0 1 27905 1 22|== Test output was:
520|0 1 27905 1 23|found
520|0 1 27905 1 24|== Expected output was:
520|0 1 27905 1 25|found
520|0 1 27905 1 26|Test Passed.
220|0 1 0 17:24:26|PASS
410|0 3 1 17:24:27|IC End
400|0 4 1 17:24:27|IC Start
200|0 1 17:24:28|TP Start
520|0 1 27905 1 27|acl_modify_045_P: Purge ineffective permissions for the specified ACL
520|0 1 27905 1 28|acl_modify_045_P: object that supports the mask_obj ACL entry
520|0 1 27905 1 29|acl_modify_045_P: type but it doesn't exist. -purge option is ignored.
520|0 1 27905 1 30|Test Completed Successfully on {acl modify /.:/hosts/ice/dts-entity -purge -a user:acl_modify_045_P:r}
520|0 1 27905 1 31|ACL object list: /.:/hosts/ice/dts-entity
520|0 1 27905 1 32|ACL type: {}
520|0 1 27905 1 33|Result from acl show on /.:/hosts/ice/dts-entity === {{unauthenticated r--} {user hosts/ice/self rwc} {user 000031cd-9f51-21cd-a700-0800092734a4 r--} {user acl_modify_045_P r--} {group subsys/dce/dts-admin rwc} {any_other r--}}
520|0 1 27905 1 34|ACL entry to be compared: {user acl_modify_045_P r--}
520|0 1 27905 1 35|Test Comparison Completed Successfully.
520|0 1 27905 1 36|Comparison Result: 0
520|0 1 27905 1 37|Test Passed.
220|0 1 0 17:24:30|PASS
410|0 4 1 17:24:30|IC End




if {[dcp_wrap {global DCP_HOSTNAME_ONE DCP_ACL_OBJ_MASK1}] != 0} {return;}
In tetexec.cfg file:  DCP_ACL_OBJ_MASK1=/.:/hosts/$DCP_HOSTNAME_ONE/dts-entity
   ********FAILS*************

15|0 1.10 2|TCM Start
400|0 3 1 17:25:59|IC Start
200|0 1 17:25:59|TP Start
520|0 1 27804 1 1|acl_modify_044_P: Check that a mask re-calculation occurs after all
520|0 1 27804 1 2|acl_modify_044_P: modifications are made on the specified ACL object that
520|0 1 27804 1 3|acl_modify_044_P: supports the mask_obj ACL entry type. The mask_obj ACL
520|0 1 27804 1 4|acl_modify_044_P: entry type does not exist but will be created.
520|0 1 27804 1 5|==== Contents of test case:
520|0 1 27804 1 6|{ acl modify $DCP_ACL_OBJ_MASK1 -mask calc -a user:$name:rwc 	    dcp_acl_find_multi_entries "$DCP_ACL_OBJ_MASK1" {} {} "[list "mask_obj rwc" "user $name rwc"]" 	   }
520|0 1 27804 1 7|== Test generated error.
520|0 1 27804 1 8|== Test output was:
520|0 1 27804 1 9|{acl object not found}
520|0 1 27804 1 10|Command failed: {acl modify $DCP_ACL_OBJ_MASK1 -r user:$name}
520|0 1 27804 1 11|Command returned: {acl object not found}
520|0 1 27804 1 12|Test aborted.
220|0 1 1 17:26:08|FAIL
410|0 3 1 17:26:08|IC End
400|0 4 1 17:26:09|IC Start
200|0 1 17:26:09|TP Start
520|0 1 27804 1 13|acl_modify_045_P: Purge ineffective permissions for the specified ACL
520|0 1 27804 1 14|acl_modify_045_P: object that supports the mask_obj ACL entry
520|0 1 27804 1 15|acl_modify_045_P: type but it doesn't exist. -purge option is ignored.
520|0 1 27804 1 16|Test Completed Successfully on {acl modify /.:/hosts/$DCP_HOSTNAME_ONE/dts-entity -purge -a user:acl_modify_045_P:r}
520|0 1 27804 1 17|ACL object list: {/.:/hosts/$DCP_HOSTNAME_ONE/dts-entity}
520|0 1 27804 1 18|ACL type: {}
520|0 1 27804 1 19|Result from acl show on {/.:/hosts/$DCP_HOSTNAME_ONE/dts-entity} === {acl object not found}
520|0 1 27804 1 20|Test Failed on acl show command for {/.:/hosts/$DCP_HOSTNAME_ONE/dts-entity.}
520|0 1 27804 1 21|Comparison Result: -1
520|0 1 27804 1 22|Command failed: {acl modify $DCP_ACL_OBJ_MASK1 -r user:$name}
520|0 1 27804 1 23|Command returned: {acl object not found}
520|0 1 27804 1 24|Test aborted.
220|0 1 1 17:26:15|FAIL
410|0 4 1 17:26:16|IC End

[7/19/94 public]
Don't know how this ever worked right in the first place, but it does now.
Submitted.

[8/12/94 public]
closed.



CR Number                     : 11309
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : acl
Short Description             : Allow abbreviations for
ACL manager names for the acl command -type option.
Reported Date                 : 7/14/94
Found in Baseline             : 1.1b11
Found Date                    : 7/14/94
Severity                      : D
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b14
Affected File(s)              : src/admin/dcecp/acl_edit.c, src/admin/dcecp/acl_tclif.c
Sensitivity                   : public

[7/14/94 public]
Self-explanatory.

[8/12/94 public]
closed.



CR Number                     : 11297
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : scripts
Short Description             : attrlist getvalues tests are wrong
Reported Date                 : 7/14/94
Found in Baseline             : 1.1
Found Date                    : 7/14/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b14
Affected File(s)              : attrlist_getvalues_P.tcl
Sensitivity                   : public

[7/14/94 public]

The positive FVTs for "attrlist getvalues" (in
scripts/attrlist_getvalues_P.tcl) look for incorrect results,
following the misinterpretation described in CR11229.

[8/2/94 public]

Fix submitted.

[8/12/94 public]
closed.



CR Number                     : 11285
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : conv vars
Short Description             : create $_h for DCE hostname
Reported Date                 : 7/13/94
Found in Baseline             : 1.1b11
Found Date                    : 7/13/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : dcecp.h, util_var.c, util_var.h
Sensitivity                   : public

[7/13/94 public]
Create a new conv. variable $_h that will contain the name of the
host in the format 'hosts/hostname'. This variable will be read-only,
and only be initialized when read (read-trace).

The contents of this variable should be what is returned from

dce_cf_get_host_name()

[8/1/94 public]
Submitted.

[8/12/94 public]
closed.



CR Number                     : 11282
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : byte attributes do not follow correct format
Reported Date                 : 7/13/94
Found in Baseline             : 1.1
Found Date                    : 7/13/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : src/admin/dcecp/rgy_utils.c src/admin/dcecp/dcp.sams
Sensitivity                   : public

[7/13/94 public]

The dcecp spec indicates that attributes with an encoding type of
"byte" should be displayed as 2-digit hex numbers (with intervening
spaces), and that byte values should be able to be input as hex
numbers in groupings of 2, 4, or 8. In fact, they are displayed in TCL
hex-escape format, and the characters input by the user are stored
directly. Thus:

dcecp> prin mod foo -ch {test_bytes 0341}   
dcecp> prin show foo                      
{fullname {}}
{uid 10404}
{uuid 000028a4-9e85-21cd-9600-0000c08de054}
{alias no}
{quota unlimited}
{test_bytes \x30\x33\x34\x31}
dcecp> 

The value of the "test_bytes" attribute should be 0x0341, displayed
as:

{test_bytes {03 41}}

[9/28/94 public]
closed.



CR Number                     : 11271
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 11259
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : i18n
Short Description             : errorInfo variable getting corrupted
Reported Date                 : 7/13/94
Found in Baseline             : 1.1
Found Date                    : 7/13/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : dcecp/main.c tcl_dce/Makefile tcl_dce/tcl.h
Sensitivity                   : public

[7/13/94 public]

The errorInfo variable is getting corrupted. For instance if an error
occurs the variable looks like:


Implementation specific errorUnknown message number 0x1771b00bUnknown message number 0x1771b0e1Unknown message number 0x1771b00cUnknown message number 0x1771b00cUnknown message number 0x1771b00cUnknown message number 0x1771b00cUnknown message number 0x1771b0e4Unknown message number 0x1771b00c

[7/18/94 public]

  Message 0x1771b00b is "while executing", and 0x0x1771b00c is "invoked from 
within".  I tested short Tcl commands on the nightly on both HP800 and AT386,
and could not re-produce this problem.  If you don't have tcl message catalog,
the default message table should be used, so this "Unknown message number"
should not appear.  I will look into further, though.

[7/18/94 public]

  The problem was, Tcl in-core message table was not initialized when Tcl
was called from dcecp.  Since the Tcl in-core message table initialization
takes place in Tcl main(), and dcecp calls Tcl library routines directory
(not through main() routine), I had to add the table initialization to 
dcecp main().  The fix was verified by Kevin before I submitted.

[7/28/94 public]
Nightly worked fine.



CR Number                     : 11270
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : implement clearinghouse create
Reported Date                 : 7/13/94
Found in Baseline             : 1.1b11
Found Date                    : 7/13/94
Severity                      : D
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : cdscp_clearinghouse.c commands.c 
                                        cdscp.h
Sensitivity                   : public

[7/13/94 public]
A "clearinghouse catalog" operation could be easily implemented as a Tcl
script that does "dir show /.:" and reads all the clearinghoues from the
CDS_Replica's attribute.  Since /.: must be replicated by all
clearinghouses it will list all of them.

[9/16/94 public]

Implemented. and submitted

[9/26/94 public]
closed.



CR Number                     : 11268
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : i18n
Short Description             : procedure call argument changes 
not propogated.
Reported Date                 : 7/13/94
Found in Baseline             : 1.1
Found Date                    : 7/13/94
Severity                      : B
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : Makefile util_signal.c
Sensitivity                   : public

[7/13/94 public]

Procedure call argument changes to Tcl_SignalId were not propated to 
dcecp source code. There are several calls in util_signal.c that need 
to be modified.

[kevins 7/13/94 public] 

This is what caused the build errors for the 486/HP.

[7/13/94 public]
I'll look at this.

[7/13/94 public]
Summary of fix: libtcl now depends on libdce	(Makefile)
                Tcl_SignalId() needs a new flag as argument, since an error
                message returned from dce_msg_get needs to be freed later.
						(util_signal.c)

I forgot the fact that some files in dcecp came from the net, so they should
have been treated same as Tcl sources.  Sorry to dcecp team for any 
inconvenience.

[7/14/94 public]
Nightly build worked.



CR Number                     : 11259
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : i18n
Short Description             : UHYP: Tcl I18N work
Reported Date                 : 7/12/94
Found in Baseline             : 1.1
Found Date                    : 7/12/94
Severity                      : C
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1unintegrated
Affected File(s)              : HP800/machdep.mk, Makefile, regexp.c, tcl.h, tcl.sams, tclAppInit.c, tclBasic.c, tclCmdIL.c, tclExpr.c, tclGet.c, tclGlob.c, tclHistory.c, tclInt.h, tclLink.c, tclMain.c, tclParse.c, tclProc.c, tclTest.c, tclUnixAZ.c, tclUnixUtil.c, tclUtil.c, tclVar.c, tclWCmdAH.c, tclWCmdIL.c, tclWCmdMZ.c, tclWInt.h, tclWParse.c, tclWUtil.c
Sensitivity                   : public

[7/12/94 public]

  Tcl needs to be internationalized.  The first path is separating all
user visible messages into message catalog with DCE messaging facilities.
The second path is fixing affected commands.

[10/6/94 public]

  Tcl messaging work was done and already included into the main line tree.  
The other part of work, which makes Tcl locale dependent/ASCII independent
will go into unintegrated tree.



CR Number                     : 11256
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : general
Short Description             : show errorInfo on error by default
Reported Date                 : 7/12/94
Found in Baseline             : 1.1b11
Found Date                    : 7/12/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : src/admin/dcecp/main.c
Sensitivity                   : public

[7/12/94 public]
There should be a dcecp variable that a user can set to have a stack
trace printed out by default when an error occurs so a user does not
have to manually invoke "puts $errorInfo".  This variable should be
dcecp_verbose_errors.

[7/12/94/public]
Submitted.  Actual command looks like:

  Tcl_Eval(interp, "puts stderr [format {Error: %s} [set errorInfo]]");

[8/12/94 public]
closed.



CR Number                     : 11255
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : should redraw prompt after resuming after suspend
Reported Date                 : 7/12/94
Found in Baseline             : 1.1b9
Found Date                    : 7/12/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : sysunix.c
Sensitivity                   : public

[7/12/94 public]
dcecp should redraw the prompt when resuming after being suspended.
(ie, catch SIGCONT)  You have to hit return to get the prompt back.

I'm not sure what it should do about what you've typed on the line so far.
Flush it?  Probably not.  When redrawing the prompt, the pending input
should also be redisplayed.  Otherwise there's no way to know there's
a command (like "rm -fr ~/*") ready to be executed.

	dcecp> asdf				<<== ctrl-Z at the end
	Suspended
	40 oxygen. fg
	dcecp
						<<== Return here

	Error: invalid command name "asdf"
	dcecp>

[8/25/94 public]
Well, I'm not absolutely sure yet, but I strongly suspect that it's
not going to be possible to redisplay the pending input unless we put
the handling in readline(), because that's who has the characters of
the partial line. This is likely to impact other users of readline.
Given that, it might be safer to flush it (by aborting dcecp's call to
readline).

I note that gdb, for what it's worth, redisplays its prompt, doesn't
redisplay the partial line, but doesn't flush it either:

(gdb) abc
Suspended
speed (133) 17:49 % fg
gdb
(gdb) 						<<== Return here
Undefined command: "abc".  Try "help".
(gdb) 

I don't particularly admire this behavior.

[8/25/94 public]
Flushing the pending input would be a safe thing.  I'd be much
happier with that.

I think changign editinput() like this will flush all input:
	case CSsignal:
+	    Repeat = NO_ARG;
+	    OldPoint = Point = Mark = End = 0;
+	    Line[0] = '\0';
	    return (CHAR *)"";

[8/26/94 public]

Even so, dcecp's main.c will still have to take some action in order
to redisplay the prompt, no?

[8/26/94 public]

Well, on further reflection I realize that the above isn't
necessarily true, since if dcecp gets an empty string returned it'll
just call readline() again, thus displaying the prompt. I still don't
entirely understand what readline() and its friends are doing, but
I'll worry about that when I get around to fixing it.

[8/31/94 public]
Well, no. The problem isn't in editinput(), since in the CSsignal
case everything gets reset before the next read. The problem is that
rl_ttyset() in sysunix.c isn't disabling ^Z, so readline() doesn't get
to postpone generating the SIGTSTP. I have a fix, which I'll submit
soon.

[9/1/94 public]
Fix submitted (tested using static libdceutils.a).

[9/28/94 public]
closed.



CR Number                     : 11251
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : clock
Short Description             : implement clock verify
Reported Date                 : 7/11/94
Found in Baseline             : 1.1b11
Found Date                    : 7/11/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : commands.c, clock.c, dts_proto.h, dcp.sams
Sensitivity                   : public

[7/11/94 public]
A command "clock verify" that took an optional argument as the other
clock operations do would be useful.  It would take a required -server
option with a value specifying a dts server to contact and compare clock
times with.  This would not do a synchronization but would return the
skew info so that an admin can determine if a "clock synch" is needed.

Optionally could consider -server optional and could use the equivalent
of: 

  set server <some default valid server>
  foreach s [dts catalog] {
    set p [attrlist getval [dts show $s] provider]
    if {p == "yes"} {set server $p; break}
  }

[7/19/94 public]
Implemented as part of the dts.dcp dcecp script. Submitted.

[8/12/94 public]
closed.



CR Number                     : 11249
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dts
Short Description             : dts catalog
Reported Date                 : 7/11/94
Found in Baseline             : 1.1b11
Found Date                    : 7/11/94
Severity                      : D
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : commands.c, dcp.sams, dts_ops.c, dts_proto.h, dts.dcp
Sensitivity                   : public

[7/11/94 public]
Implement a "dts catalog" command that works the same as the
"dtsservers" attribute in the "cell show" command.  Implement as script
that read the /.:/cell-profile and finds all /.:/lan-profile.

[7/19/94 public]
Implemented dts catalog. Part of the dts.dcp script. Submetted.

[8/12/94 public]
closed.



CR Number                     : 11242
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : login
Short Description             : remove ...certify_identity() from login sequence
Reported Date                 : 7/11/94
Found in Baseline             : 1.1b11
Found Date                    : 7/11/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : admin/dcecp/util_login.c
Sensitivity                   : public

[7/11/94 public]
From talking to HP it seems that the sec_login_s_not_certified message
from sec_login_inquire_net_info() is a warning, not an error. The 
documentation says this quite clearly too, I guess I never looked.

Removing the sec_login_certify_identity() call from the startup and login
sequence, and ignoring the sec_login_s_not_certified status from ...net_info()
works fine. Submitting soon.

[7/11/94 public]
Submitted.

[8/12/94 public]
closed.



CR Number                     : 11231
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dcp.sams
Short Description             : dcp.sams info msg cleanup
Reported Date                 : 7/11/94
Found in Baseline             : 1.1b10
Found Date                    : 7/11/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : admin/dcecp/dcp.sams
Sensitivity                   : public

[7/11/94 public]
Mail between r$ and me:

> I'm looking through dcp.sams (after sekhar's mail) and am
> wondering why we have 538 occurances of svc_c_sev_info.  The
> svc code doesn't know about it.  It passes the sams compiler
> fine (is this a bug?).

svc_c_sev_info is old, I think, replaced by notice_verbose.

The sams program (compiler is too flattering :-) deliberately does not
check the value in the attributes field.  Vendors can add their own
attributes and SAMS files must be portable so they're just text strings
which are copied directly into the xxx_MSG convenience macros.

> These messages are help messages and just plain text stuff.
> What severity should they be?  notice?  These are not things
> that we turn on/off, they are just text that needed to be a
> catalog so they could be i18n'ed.  What should we set them to?

If you must have the sub-component (and therefore the attributes field)
I would do
	attributes	"help message"

[8/17/94 public]
Removed all sub-component and attributes lines since we don't need them.

[8/18/94 public]
closed.



CR Number                     : 11229
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : attrlist
Short Description             : getvalues returns incorrect list format
Reported Date                 : 7/11/94
Found in Baseline             : 1.1
Found Date                    : 7/11/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : attrlist.dcp
Sensitivity                   : public
Please enter the full description of your defect or enhancement #
below under the "note" header.  Please add your own new note # header
when adding a new note.

[7/11/94 public]

When the command 'attrlist getvalues' returns a multivalued attribute
list it forces it through the tcl 'list' command thus ensconcing the
list in a list.

For instance,

attrlist getvalues [directory show /.:] -type CDS_Replicas

Which, each attribute value for CDS_Replicas has 5 elements, is
returned:

{{{Clearinghouse_Uuid 2c2aa82e-9b13-11cd-b9d8-0000c0f7de56}
  {Clearinghouse_Name /.../terrapin_cell.osf.org/drkstr_ch}
  {Replica_Type Master}
  {Tower ncacn_ip_tcp:130.105.5.16[]}
  {Tower ncadg_ip_udp:130.105.5.16[]}}}

When you do an llength on this it returns 1 not 5. In order to work on
the list you must eliminate one level of lists with:

lindex $result 0

[07/11/94 public]

The problem here is that attrlist also has to deal with lists
containing "multi-instance" attributes, especially if it's working on
the results of something like

  dir list {/.: /.:/foo}

where each instance of CDS_Replicas wants to be returned as a separate
member of the overall list. Without the "list" command that's
currently present in the script, all the values of all the instances
of a given attribute get concatenated into a single list.

To take a case that's simpler to read, consider the following:

dcecp> set test_list {{a 1} {b 2} {a 3 4}} dcecp> attrlist getvalues
$test_list -type a

is supposed to return a two-element list whose second element is a
list:
  1
  {3 4}

but when I didn't have that "list" command there it returned the
simple list {1 3 4}.

I suppose the script could distinguish between single and multiple
instances and only wrap the results into a list in the latter case,
but I'm not 100% convinced that that's the right thing to do.

[melman 7/11/94 public] Some ideas: lappend doesn't do the right
thing:

  dcecp> set a foo
  foo
  dcecp> lappend a [lrange {bar c d} 1 end]
  foo {c d}
  dcecp> lappend a [lrange {bar {c d}} 1 end]
  foo {c d} {{c d}}
  dcecp> lappend a [lrange {bar {c d} e} 1 end]
  foo {c d} {{c d}} {{c d} e}

The middle lappend has an extra set of braces.  How about linsert:

  dcecp> set a foo
  foo
  dcecp> set a [linsert $a [llength $a] c]
  foo c
  dcecp> set a [linsert $a [llength $a] {e d}]
  foo c {e d}
  dcecp> set a [linsert $a [llength $a] f g]
  foo c {e d} f g

This seems to do it, though you might need some eval magic when
constructing the command.

  From: -IX- How, in Tcl, can I XXX:
  Subject: -Q9B- call one proc with the multi parameter value returned
by
                  another proc?
  
  A9B. Assuming y requires multiple args and x returns multiple words,
use
          Tcl's eval command :
  
          eval y [x]

[7/11/94 public]

The examples above don't exactly parallel one another, but the one
with lappend raises an interesting question, to which I thought I knew
the answer :-) : What's the difference, for this purpose, between the
following attribute list elements:

(1) {bar c d}

(2) {bar {c d}}

I think (1) is a list with 3 elements, representing an attribute with
2 values, and (2) is a list with 2 elements, representing an
attribute whose single value is a list with 2 elements. In which case
it seems to me that Howard's lappend example does the "right" thing,
even if it's not the intuitively obvious thing.

[7/13/94 public]

No. The lappend does not do the right thing. Instance #2 in Robert's 
previous entry is not right. Consider this example. 

If two objects have attributes that some individual needs merged into 
one set of attributes on a seperate object he may aquire those
attributes with:

set comb_attr [attrlist getvalues [obj show {/.:/a /.:/b} -type CDS_Towers

Now /.:/a contains this attribute set for CDS_Towers:
	{CDS_Towers ncadg_ip_udp:130.105.5.16[]}

and /.:/b contains this attribute set for CDS_Towers:
	{CDS_Towers 
	 {ncadg_ip_udp:130.105.5.67[]}
	 {ncadg_ip_udp:130.105.5.16[]}
	 {ncacn_ip_tcp:130.105.5.16[]}}

The resultant value of comb_attr would be
	{ncadg_ip_udp:130.105.5.16[]}
	{{ncadg_ip_udp:130.105.5.67[]}
	 {ncadg_ip_udp:130.105.5.16[]}
	 {ncadg_ip_udp:130.105.5.16[]}
	 {ncacn_ip_tcp:130.105.5.16[]}}

Now this is a list with two elements. Should the individual try to add that 
list to an object with:

obj mod /.:/c -add {CDS_Towers $comb_attr} 

This most assuredly fail since the second element of that list is not 
binding tower but is rather a list of binding towers. 

linsert is the way to go. I think Howard will agree with me on this.

[7/13/94 public]
Yes I agree with Kevin, but let me answer Robert's question slightly
more directly:  

(1) {bar c d}   an attr list. type=bar, 2 values c and d

(2) {bar {c d}} an attr list. type=bar, 1 value

Now the one value can be interpretted in lots of different ways usually
based on the type bar.  It could be a string with a space in it, the
space being quoted with the {}'s.  It could be another attribute list like
the CDS_Replica attribute is:

  {CDS_Replicas
   {{Clearinghouse_Uuid d882d6e6-9415-11cd-89b6-080009251352}
    {Clearinghouse_Name /.../absolut_cell/absolut_ch}
    {Replica_Type Master}  
    {Tower ncacn_ip_tcp:130.105.5.93[]}
    {Tower ncadg_ip_udp:130.105.5.93[]}}}

Just remember the cardinal rule:  If you do an length on an attribute
list you get back the <number of values> + 1.

[7/13/94 public]

After some conversation with Howard I realize that the trouble is that
I misinterpreted the spec, thinking that the distinction between
multi-values and multi-instances was intended to be semantic as well
as visual. The return value of "attrlist getval" is supposed to be a
single list of values, not (as I supposed) a list of lists of values.

[7/14/94 public]

Fixed by removing the extra "list" command that Kevin complained about
originally :-). Submitted.



CR Number                     : 11219
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : dir merge failing
Reported Date                 : 7/8/94
Found in Baseline             : 1.1
Found Date                    : 7/8/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : ./admin/dcecp/cds.h
                                             ./admin/dcecp/Makefile
                                             ./admin/dcecp/cdscp_utils.c
                                      ./directory/cds/stubs/cds_clerkserver.idl
                                      ./directory/cds/stubs/Makefile
Sensitivity                   : public

[7/8/94 public]

the command 'directory merge' fails when copying an object that 
contains a binding tower. For instance this sequence of commands
will fail:

directory create /.:/foo_bar
directory merge /.:/hosts/drkstr -into /.:/foo_bar 

This command sequence will fail with:

1994-07-08-14:12:33.238-04:00I----- PID#5817 ERROR cds general 0xa44b0bc4
Routine rpc_tower_vector_from_binding(3rpc) failed : status = 382312487.
Error: {/.../terrapin_cell.osf.org/kevins/cds-clerk {no interfaces}}

[kevins 7/9/94 public] 

This appears to not be a problem with "directory merge". 
Reassigned to me.

[kevins 7/24/94 public] 

Added cds_ifspec the interface specification to the cds_clerkserver
into the call to rpc_tower_vector_from_binding so I could get a 
tower vector. To do this I needed to export the cds_clerkserver.idl 
interface definition idl file.

Submitted.

[8/12/94 public]
closed.



CR Number                     : 11218
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : misleading help message
Reported Date                 : 7/8/94
Found in Baseline             : 1.1
Found Date                    : 7/8/94
Severity                      : E
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : admin/dcecp/dcp.sams
Sensitivity                   : public

[7/8/94 public]

The directory merge help message for '-tree' is:

-tree               Copy directory and all its descendants

But this is misleading. It does not copy the directory but the 
contents of the directory and all its descendants.

[8/3/94 public]
Assigned to John, he had the file check out anyway and it's trivial.

   Copy contents of directory and all descendants

[8/3/94 public]
Done. Submitted.

[8/12/94 public]
closed.



CR Number                     : 11213
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : main
Short Description             : Application initialization failed
Reported Date                 : 7/8/94
Found in Baseline             : 1.1b10
Found Date                    : 7/8/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : admin/dcecp/main.c
Sensitivity                   : public

[7/8/94 public]
Missing a return TCL_OK at the end of Tcl_AppInit. Error message
is innocuous. App init did happen.

[7/8/94 public]
Submitted.

[8/12/94 public]
closed.



CR Number                     : 11205
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : acl
Short Description             : posix_semantics array
and mask_calc_type must be maintained for each ACL manager.
Reported Date                 : 7/7/94
Found in Baseline             : 1.1b11
Found Date                    : 7/7/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b13
Affected File(s)              : acl_edit.h,acl_edit.c,acl_tclif.c
Sensitivity                   : public

[7/7/94 public]

Maintain the posix_semantics array and mask_calc_type in the 
ACL manager table "dcp_acl_mgr_info_t".

One ACL manager of the specified object may request no POSIX "mask_obj" 
semantics, while another ACL manager may not. In the former case,
the mask calculation type is re-set to NO_MASK_OBJ_CALC. In the
latter case, the mask calculation type is not modified.

[8/12/94 public]
closed.



CR Number                     : 11200
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : utils
Short Description             : HYP: auto_path not set is fatal
Reported Date                 : 7/7/94
Found in Baseline             : 1.1b10
Found Date                    : 7/7/94
Severity                      : B
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : admin/dcecp/commands.c
Sensitivity                   : public

[7/7/94 public]

If the dcecp variable "auto_path" is not set prior to starting dcecp,
or not set for some reason by dcecp during its startup, when you
invoke dcecp, you get
   can't read "auto_path": no such variable
and it boots you out of dcecp.  There is no way I can tell how or
where to set it so dcecp will let me back in.

   Is it right for dcecp to boot you when the variable is not set?
And if it is not set, how do I recover?

[8/3/94 public]
This is a variable that is set by dcecp in dcp_initInterp().  It should
always happen, if you can reproduce this error we can re-open, but I think
the code always does the right thing.

[10/4/94 public]
Okay, so we can reproduce this one.  auto_path is set in init.tcl, the code
in commands.c tries to add dcecp_library to the begining of auto_path, but
if you don't have init.tcl on your system it never got set.  We should
change the script run in dcp_initInterp from:

  set auto_path [linsert $auto_path 0 $dcecp_library]

to something a little more involved:

  if {[info globals auto_path] == "auto_path"} {
    set auto_path [linsert $auto_path 0 $dcecp_library]
  } else {
    set auto_path $dcecp_library
  }

[10/5/94 public]
Made code above correct.

[10/5/94 public]
submitted.

[10/25/94 public]
closed.



CR Number                     : 11197
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : quota value gets reset.
Reported Date                 : 7/7/94
Found in Baseline             : 1.1b10
Found Date                    : 7/7/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : rgy.c rgy_utils.c
Sensitivity                   : public

[7/7/94 public]

   dcecp> principal create bar
   dcecp> principal show bar
   {fullname {}}
   {uid 13143}
   {uuid 0000357-9989-21cd-s200-0800009247461}
   {alias no}
   {quota unlimited}

   dcecp> principal modify bar -quota 101
   dcecp> principal show bar
   {fullname {}}
   {uid 13143}
   {uuid 0000357-9989-21cd-s200-0800009247461}
   {alias no}
   {quota 101}

   dcecp> principal modify bar -fullname "jimbo"
   dcecp> principal show bar
   {fullname {jimbo}
   {uid 13143}
   {uuid 0000357-9989-21cd-s200-0800009247461}
   {alias no}
   {quota unlimited}

   Note when you change fullname, quota goes back to the old value.
   If you exit dcecp after you change the quota, then enter dcecp
   again and change the fullname, the quota still gets reset to
   unlimited.

[7/7/94 public]

   The code was inadvertently setting the quota to unlimited if a 
quota parameter was not passed in.

[8/12/94 public]
closed.



CR Number                     : 11187
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : utc
Short Description             : utc commands display bad timestamps
Reported Date                 : 7/6/94
Found in Baseline             : 1.1b10
Found Date                    : 7/6/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : src/admin/dcecp/utc_ops.c
Sensitivity                   : public

[7/6/94 public]
Some of the utc commands output garbage depending on if their input
is in the form of absolute or relative timestamps. The code must be
changed to determine if the output should be in the form of an 
absolute or relative timestamp, and make the appropriate call.

[7/6/94 public]
Fixed and submitted.

[8/12/94 public]
closed.



CR Number                     : 11186
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : initial support for schema create
Reported Date                 : 7/6/94
Found in Baseline             : 1.1
Found Date                    : 7/6/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : commands.c, rgy.c, rgy_utils.c, dcp.sams, rgy.h
Sensitivity                   : public

[7/6/94 public]

Initial support for schema create command.

[7/19/94 public]

Implemented functionality on 7/19.

[8/12/94 public]
closed.



CR Number                     : 11185
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : support for schema catalog
Reported Date                 : 7/6/94
Found in Baseline             : 1.1
Found Date                    : 7/6/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : commands.c, rgy.c, rgy_utils.c, dcp.sams, rgy.h
Sensitivity                   : public

[7/6/94 public]

Initial support for schema catalog command.

[7/7/94 public]

Support for schema catalog command implemented.

[8/17/94 public]
closed.



CR Number                     : 11184
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : Support sec_attr_sch_* calls
Reported Date                 : 7/6/94
Found in Baseline             : 1.1
Found Date                    : 7/6/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : rgy.c, rgy_utils.c
Sensitivity                   : public

[7/6/94 public]

Support generic calls to sec_attr_sch_*, where right now only
the sec_attr_rgy_sch_* calls are used.  This does not apply
to the pgo work already done, but to the schema show work.

[8/17/94 public]

This OT supports what we've been calling the 'generic schema' work.
The api calls are ready and must be put into the era schema code.
All schema commands (catalog, create, delete, modify, rename, show)
are touched by this work.  Once this OT is addressed, the schema tests
must be updated to reflect the new functionality.

Oh, and how could I forget...
this OT is being reassigned to Nav :-)

[8/26/94 public]

Generic schema support added to all required schema commands.  There
seem to be some questions about how there calls are working, but other
OT's are tracking those issues.

[9/28/94 public]
closed.



CR Number                     : 11183
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : must accept only fully qualified schema attribute names
Reported Date                 : 7/6/94
Found in Baseline             : 1.1
Found Date                    : 7/6/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : rgy_utils.c
Sensitivity                   : public

[7/6/94 public]

Support only entry of fully qualified schema attribute names, not
the entry of shorthand names.  Right now, an entry of
   "schema show X500_DN"
will work, but it should not.  An entry of
   "schema show /.:/sec/attr_schema/X500_dn"
will not work, but it should.

[7/6/94 public]

Changed the show_schema_info function to only allow
fully qualified schema attribute names.

[8/12/94 public]
closed.



CR Number                     : 11182
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : Change the hard-coded acl manager names
Reported Date                 : 7/6/94
Found in Baseline             : 1.1
Found Date                    : 7/6/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : src/admin/dcecp/schema_utils.c
Sensitivity                   : public

[7/6/94 public]

Update the shorthand names of the security acl managers in the
hard-coded structure to better reflect their true meaning.  The
given shorthand names are currently rgy, principal, group, org,
directory, replist, and attr_schema.

[9/19/94 public]

Is this defect only meant to change the ACL manager names hard-coded
in schema_utils.c to be consistent with the DCE naming convention
for all ACL manager names?

OR 
Is the intention of this defect to remove all hard-coded ACL manager
names, ACL manager UUIDs, and printstrings in dcecp?
In sec_rgy_attr_sch.idl, we have APIs, sec_rgy_atttr_sch_get_acl_mgrs() and
sec_rgy_attr_sch_aclmgr_strings().  Are these supported?  Can we use
these now?

[9/19/94 public]

After a little more investigation, I see that
sec_rgy_atttr_sch_get_acl_mgrs() and sec_rgy_attr_sch_aclmgr_strings()
are not implemented.  Therefore, the new ACL manager names n
schema_utils.c will be changed to:

OLD:                 NEW:
rgy                  policy
principal            principal
group                group
org                  organization
directory            secdirectory
replist              replist
xattrschema          xattrschema

[9/20/94 public]
I wait till CR11303 has been submitted. The above ACL manager names
map to the UUIDS hard-coded in schema_utils.c and rsdb_daclmgr.c.

[9/23/94 public]
Changed the schema tests and some of the pgo era tests to
reflect the new names.

[9/28/94 public]
closed.



CR Number                     : 11181
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : poorly chosen constant name
Reported Date                 : 7/6/94
Found in Baseline             : 1.1
Found Date                    : 7/6/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : rgy_utils.c
Sensitivity                   : public

[7/6/94 public]

Change the constant MAX_ACL_TYPES to MAX_PERM_TYPES to
better reflect what the constant really means.

[7/7/94 public]

Changed the constant name.  Submitted and closed.

[8/12/94 public]
closed.



CR Number                     : 11179
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : aud
Short Description             : audtrail show -to creates unreadable file
Reported Date                 : 7/5/94
Found in Baseline             : 1.1b10
Found Date                    : 7/5/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : admin/dcecp/aud_ops.c
Sensitivity                   : public

[7/5/94 public]
dcecp> audt sh sec_audit_trail -to /u1/melman/gmd_aud
dcecp> ls -l ~melman/gmd_aud
----------   1 melman   osf       758098 Jul  5 17:35 /u1/melman/gmd_aud

If you create an audit trail file the permissions on the file are such
that no one can read them.  This is bad.

[7/19/94 public]
Ok. The file is now created with read permissions for the creator.
Submitted.

[10/6/94 public]
closed.



CR Number                     : 11178
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : aud
Short Description             : accept ~ in filenames
Reported Date                 : 7/5/94
Found in Baseline             : 1.1b10
Found Date                    : 7/5/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : admin/dcecp/aud_ops.c
Sensitivity                   : public

[7/5/94 public]
dcecp> audt sh sec_audit_trail -to ~/gmd_aud
Error: Could not open '~/gmd_aud' for output.
dcecp> audt sh sec_audit_trail -to /u1/melman/gmd_aud
dcecp> 

It would be nice if ~ worked in filenames.  The above mentions as the
value of -to, but other places as well.

[7/19/94 public]
Ok. Submitted.

[9/26/94 public]
closed.



CR Number                     : 11162
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : extended registry attributes
Short Description             : Support for schema show
Reported Date                 : 7/1/94
Found in Baseline             : 1.1
Found Date                    : 7/1/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dcp.sams, rgy.h, rgy_utils.c, rgy.c, commands.c
Sensitivity                   : public

[7/1/94 public]

Need initial support for schema show command.

[7/1/94 public]

Code submitted in two parts, 7/1 and 7/5.
Basic support for schema show complete.



CR Number                     : 11151
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dts
Short Description             : dts cmds give no error message if daemon isn't running.
Reported Date                 : 6/30/94
Found in Baseline             : 1.1b10
Found Date                    : 6/30/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : admin/dcecp/dts_util.c
Sensitivity                   : public

[6/30/94 public]
dcecp dts commands show an error but no text if the dts daemon isn't
running.

dcecp> dts show
Error: 

This fix is trivial, just add in an error message before the appropriate
return TCL_ERROR (right where I left the note to do so).

[7/1/94 public]
Submitted.

[7/5/94 public]
closed.



CR Number                     : 11146
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : endpoint
Short Description             : show output needs changes
Reported Date                 : 6/30/94
Found in Baseline             : 1.1b10
Found Date                    : 6/30/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : rpccp.c
Sensitivity                   : public

[6/30/94 public]
The output of endpoint show should not have a trailing newline.
It should also indent one space any line that is a member of another
list. For example:

{{object 019ee420-682d-11c9-a607-08002b0dea7a}
 {interface {47b333318000.0d.00.01.dc.6c.00.00.00 0.0}}
 {binding {ncadg_ip_udp 130.105.5.92 3549}}
 {annotation {Time Service ACL Mgr}}}

[8/3/94 public]

Fix submitted.

[8/12/94 public]
closed.



CR Number                     : 11143
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : task scripts
Short Description             : Better error checking
Reported Date                 : 6/30/94
Found in Baseline             : 1.1
Found Date                    : 6/30/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : admin/dcecp/scripts/user.dcp
Sensitivity                   : public

[6/30/94 public]

The user task scripts has a couple of problems. 

a.) When creating the CDS namespace entry if /.:/users does not 
    exist it should be created.
b.) When the -force option is specified on the command line and 
    the command fails. It should not remove the organization/group 
    if it was not created.

[6/30/94 public]

Changed the user task script to automaticly create /.:/users if the 
entry does not exist. 

The script now cleans up properly when the failing with -force option. 
It will only remove the organization/group if it created them.

[7/5/94 public]
closed.



CR Number                     : 11142
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : resolve
Short Description             : Incorrect tower representations
Reported Date                 : 6/30/94
Found in Baseline             : 1.1
Found Date                    : 6/30/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : admin/dcecp/commands.c
Sensitivity                   : public

[6/30/94 public]

The resolve command accepts and displays towers and binding information
incorrectly. It should be shown in Tcl list format.

[6/30/94 public]

Added the capability for the resolve command to take a tcl based 
list. It can now take either:
ncacn_ip_tcp 130.105.5.19
ncacn_ip_tcp:130.105.5.19

Now it reports the result in a tcl list. Such as:
ncacn_ip_tcp 130.105.5.19 4949

[7/5/94 public]
closed.



CR Number                     : 11134
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : registry
Short Description             : Sometimes using TCL syntax string bindings cause an error "Registry server unavailable".
Reported Date                 : 6/29/94
Found in Baseline             : 1.1b10
Found Date                    : 6/29/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b11
Affected File(s)              : rgy_sa_replist.c
Sensitivity                   : public

[6/29/94 public]

registry_disable_016_P and registry_enable_016_P succeed if invoked
individually. They fail if invoked with the rest of the FVT test
suite.

[7/18/94 public]

Changed dcp_rgy_sa_list_replicas() routine so that another
string binding address is used instead of the string binding 
generated from the rpc_binding_from_string_binding() API that 
is later freed.

[8/12/94 public]
closed.



CR Number                     : 11126
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : aud
Short Description             : audf create give bad error when unauthenticated
Reported Date                 : 6/29/94
Found in Baseline             : 1.1b10
Found Date                    : 6/29/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : admin/dcecp/aud_util.c
Sensitivity                   : public

[6/29/94 public]
audfilter create gives a bad error message when running unauthenticated.

dcecp> audf create {principal audtest2} -at {dce_dts_synch all all}
Error: The event class 'dce_dts_synch' is not valid.

[8/2/94 public]
What's happening is that the library function get_ec_number_from_name() 
returns either TRUE or FALSE, this prevents the caller from determining
if the call failed because an invalid event class name was passed in, or
if the caller did not have sufficient rights to perform the lookup.

The call should be changed to return a status code that more accurately
reflects what went wrong. Reassigned to the aud component.

[8/10/94 public]
As Robert correctly discovered, when unauthenticated, the initialization 
of the ec table never happens. aud_bind_to_server() bails out before this 
takes place. After moving the initialization eariler in the routine,
this problem goes away (the error reported becomes "client has no permission 
to execute operation"). Reassigned to dcecp. Will submit today.

[8/18/94 public]
Submitted last week.

[10/6/94 public]
closed.



CR Number                     : 11118
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : registry
Short Description             : No registry policies are displayable or modifiable.
Reported Date                 : 6/28/94
Found in Baseline             : 1.1b10
Found Date                    : 6/28/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : dcp.sams
                                             rgy_utils.c
                                             rgy_sa_tclif.c
                                             rgy.h
Sensitivity                   : public

[6/28/94 public]

registry show -policies 
should display the following as defined in RFC 42.3 pages 51 and 56.

acctlife
maxtktlife
maxtktrenew
pwdalpha
pwdexpdate
pwdlife
pwdminlen
pwdspaces

Also, "registry modify" should be able to modify these polices.
And the registry FVT tests must reflect the above changes.

[kevins 7/7/94 public] 
fixed and submitted 7/5

[8/12/94 public]
closed.



CR Number                     : 11117
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : registry
Short Description             : Not all registry attributes are shown.
Reported Date                 : 6/28/94
Found in Baseline             : 1.1b10
Found Date                    : 6/28/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : admin/dcecp/rgy_utils.c
Sensitivity                   : public

[6/28/94 public]
registry show -attributes
should display the following attributes as defined in RFC 42.3 page 58.

{mingid 31000}
{minorgid 100}
{minuid 5100}
{maxuid 32767}
{deftktlife +0-10:00:00.000I-----}
{mintktlife +0-00:05:00.000I-----}
{hidepwd no}

[6/20/94 public]
The property attributes were mistakenly classified as policy entries.
Changing the classification corrected the problem.

registry show -attributes now shows the appropriate attributes.

[7/5/94 public]
Almost.  Please show them in alphabetical order.  I know the spec
doesn't explicitly mention this, but I'm changing that now.  :-)

    dcecp> rgy sho -at
    {deftktlife +0-10:00:00.000I-----}
    {hidepwd yes}
    {maxuid 32767}
    {mingid 5100}
    {minorgid 100}
    {mintktlife +0-00:05:00.000I-----}
    {minuid 12429}

[7/7/94 public]

Changed the order of listing.

[8/12/94 public]
closed.



CR Number                     : 11098
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : pgo modify relies too much on multi-valued vs single-valued attributes
Reported Date                 : 6/27/94
Found in Baseline             : 1.1
Found Date                    : 6/27/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : rgy_utils.c
Sensitivity                   : public

[6/27/94 public]

As of first submittal of pgo modify code, the function
check_era_info() handles attributes which can have multiple
values per instance differently than those which can have
only a single value per instance.  While some differences
must be acknowledged and handled, there is far too much
emphasis in the code.

For example, the parsing function knows that test_integer
has only one value per instance, so rejects this:
   principal modify foo -add {test_integer 101 102}

But because test_printstring_array can have multiple
values per instance, accepts this:
   principal modify foo -add {test_printstring_array "aaa" "bbb"}

Both commands are legal, and both should be allowed, even though
the internal processing is different in each case.

Primarily, the check_era_info() function needs work, but
some of the parsing functions will also have to be checked.

[8/30/94 public]
Submitted.  All attributes should accept multiple values on the
command line, not just those which store multiple values in the
same instance.  So these will work...

   pgo modify -add {test_integer 101 102 103}
   pgo modify -add {test_printstring_array "aaa" "bbb" "ccc" "ddd"}
   pgo create gumby -attribute {test_printstring "blech" "blah" "phooey"}

[9/28/94 public]
closed.



CR Number                     : 11097
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : attrlist
Short Description             : Faulty error messages in "attrlist modify"
Reported Date                 : 6/27/94
Found in Baseline             : 1.1
Found Date                    : 6/27/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1
Affected File(s)              : admin/dcecp/scripts/attrlist.dcp
Sensitivity                   : public

[6/27/94 public]

There are a couple of faulty error messages that were detected by the
"attrlist modify" negative tests.

(1) The error when attempting to -change a nonexistent attribute reports
the whole attribute-value set rather than the attribute name.

> attrlist modify {{a 1 2} {b 2}} -change {{a 3} {c 1}}
Attribute "{c 1}" not present in list.

(2) Of the messages for the close-related cases of trying to add a
value already present and of trying to remove a nonexistent value, one
ends with a period and the other does not.

> attrlist modify {{a 1 2} {b 2}} -add {{a 1}}
Value "1" already present for attribute "a"
> attrlist modify {{a 1 2} {b 2}} -remove {{a 3}}
Value "3" not found for attribute "a".

[7/5/94 public]
closed.



CR Number                     : 11095
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : Cannot currently remove extended attributes completely
Reported Date                 : 6/27/94
Found in Baseline             : 1.1
Found Date                    : 6/27/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : dcp.sams, rgy.h, rgy.c, rgy_utils.c
Sensitivity                   : public

[6/27/94 public]

Due to the security api being incomplete, it is currently not
possible to remove all instances of an extended registry attribute
from an object.  The ability to remove single values from a multiple
valued instance is present, but if the user tries to remove all
values from an attribute, an 'unsupported' message is returned.

This implies support for the syntax
   principal modify foo -remove {test_integer}
to remove all values of attribute test_integer from object foo.

[8/24/94 public]

The needed security api call was completed and made available
last week.  The code in check_era_info() and modify_era_info()
needs to be updated to support the new call.

[8/24/94 public]

Note (if you haven't already) that the attribute-only syntax ( -remove
{test_integer} ) isn't checked for at all at the moment, and
modify_era_info tries to find a match for a null value. This has
various unpredictable and undesirable effects, for example: for
test_integer, it looks for (and removes if present) a value of 0; for
test_binding, it segfaults in match_bindings.

[8/24/94 public]

Work to support removal using the attribute-only syntax has
been progressing slowly during the last week, and some code has
been submitted, leaving it in an unpredictable state.  We
know about the matching of NULL to 0 in integer, also the
matching of NULL to the empty string for printstrings.

Thus, currently,
   principal modify foo -remove {test_integer}
tries to remove {test_integer 0} from foo
and
   principal modify foo -remove {test_printstring}
tries to remove {tet_printstring ""} from foo,
etc.

What we *didn't* know, however, was the segfault in
match_bindings()!  Thanks for the info.

This stuff is being actively worked on, and is, for the
present, in an unstable state.

[8/26/94 public]
Just for the record, since the TestSummary file will indicate this,
the ERAREL001 test fails as a result of this problem.  In bl-15,
the failure gives:
Error: The attempted operation is unsupported at this time.
In bl-16, it hangs.

[8/30/94 public]
Submitted.  Command like these should work now...

   pgo modify -remove {test_integer}
   pgo modify -remove {test_integer} -types
   pgo modify -remove {test_integer test_bytes} -types
   pgo_modify -remove {test_integer 101}
   pgo_modify -remove {test_integer 101 102}
   pgo_modify -remove {{test_integer 101} {test_printstring "blech"}}

[9/28/94 public]
closed.



CR Number                     : 11093
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dhd
Short Description             : keytab, hostdata, secval, server fv
t tests need to be updated
Reported Date                 : 6/27/94
Found in Baseline             : 1.1
Found Date                    : 6/27/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : Numerous
Sensitivity                   : public

[6/27/94 public]
The test code need to be updated against the following changes in
dced commands,

1) As the side effect of fix to cr 10948, status code of "Unrecognized 
hostname 'xxx'." is no longer used. If there is a wrong argument passed in, 
it will result the dced_binding_create failed, so that a status code of dced 
will be returned. In this case it will be "Bad or wrong arguments".

2) As the fix of cr 11020 soon being submitted, some attribute lists are
multi-value (they' re now single value, i.e. {attr-type attr-value}). These
are, data in hd, kt, sr; arguments, keytabs, principals, prerequesites,
services, bindings, flags, objects, starton in sr.

3) As the fix of cr 11072 soon being submitted, missed options "directory",
"uid", "gid" and "era" in sr have been added. 

4) As the side effect of fix to cr 10464, the era parse and printout routines
are replaced with hp-implemented routines in rgy_utils.c. The test code may
need to adjust.

5) "-add" and "-remove" options of server modify command have been implemented.

[7/5/94 public]
Submitted changes for server and secval fvt.

[8/11/94 public]
Pass to Rober for hostdata and keytab fvt update.

[9/1/94 public]
As it turns out, only output messages in negative tests had to be updated.
The positive tests were still all passing.  Submitted changes.

[9/26/94 public]
closed.



CR Number                     : 11083
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dts
Short Description             : Prototype mismatch in dcp_dts.h
Reported Date                 : 6/26/94
Found in Baseline             : 1.1
Found Date                    : 6/26/94
Severity                      : B
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : dcp_dts.h
Sensitivity                   : public

[6/26/94 public]

There is a prototype mismatch in dcp_dts.h for dts_show_all_counters
the second argument is CtlShowAllCntrs but is used as CtlShowAllCntrs *.
The prototype needs to be updated.

[kevins 6/26/94 public] 

Changed prototype to be CtlShowAllCntrs *.

[7/5/94 public]
closed.



CR Number                     : 11081
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : attrlist
Short Description             : Commands return wrong error message
Reported Date                 : 6/24/94
Found in Baseline             : 1.1
Found Date                    : 6/24/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b12
Affected File(s)              : attrlist.dcp
Sensitivity                   : public

[6/24/94 public]

For several of the attrlist commands, if required options are omitted,
a TCL error of the form:

  can't read {VARNAME}: no such variable

is returned instead of the expected error.

[8/2/94 public]

It appears that I fixed this soon after I reported it, but neglected
to update the CR.

[8/12/94 public]
closed.



CR Number                     : 11080
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : parseargs
Short Description             : parseargs always returns help message if invoked through too many levels of script
Reported Date                 : 6/24/94
Found in Baseline             : 1.1
Found Date                    : 6/24/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : admin/dcecp/scripts/parseargs.dcp
Sensitivity                   : public

[6/24/94 public]

If a script that uses the "parseargs" function is invoked from too
many levels of script, the following test:

  # check to see if this is a second level request for help 
  set _dcp_current_level [info level]
  if { $_dcp_current_level > 3 } { return $_dcp_help }

always "succeeds", so that, for example, if a task script is invoked
through TET and an FVT script, all commands always return their "help"
messages.

[kevins 6/26/94 public] 

Modified check for second level request for help to assure that the
sequence of calls is:

command->parseargs->verb->parseargs 

This sequence should only happen if the command is:

attrlist help getvalues 

The parseargs can now be successfully called from TET and task script
commands inbedded in scripts.

[7/5/94 public]
closed.



CR Number                     : 11079
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : auto_load doesn't work under TET
Reported Date                 : 6/24/94
Found in Baseline             : 1.1
Found Date                    : 6/24/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : 
                           test/admin/dcecp/lib/test_common.tcl
Sensitivity                   : public

[6/24/94 public]

dcecp's "auto_load" feature doesn't work under TET. Under default
conditions, it failes to find the commands implemented in scripts. If
I add the following to init.dcecp:

source /opt/dcelocal/dcecp/attrlist.dcp
source /opt/dcelocal/dcecp/parseargs.dcp

it responds to "attrlist remove <args>" as if I had said "attrlist
help remove".

[6/24/94 public]

By the way, the verbally suggested fix, namely taking the following
line out of {test_dir}/functional/admin/dcecp/lib/test_common.tcl:

  set auto_noload 1

had no observable effect.

[6/26/94 public]

Removed the following lines from test_common.tcl

set auto_noload 1
rename unknown ""

The autoload operation is done during the unknown proc. Therefore removing
the rename proc from test_common.tcl removed the autoload operation.

[7/5/94 public]
closed.



CR Number                     : 11075
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dts
Short Description             : show output should indent 1 space
Reported Date                 : 6/24/94
Found in Baseline             : 1.1b10
Found Date                    : 6/24/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : admin/dcecp/dts_util.c
Sensitivity                   : public

[6/24/94 public]
dts show output should indent 1 space for global and local servers, 
not two.

[6/24/94 public]
Fixed. Submitted.

[7/5/94 public]
closed.



CR Number                     : 11072
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : server
Short Description             : Add missed options to server create
Reported Date                 : 6/24/94
Found in Baseline             : 1.1
Found Date                    : 6/24/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : dcp.sams, dhd_server.c, dhd_util.c
Sensitivity                   : public

[6/24/94 public]

There are several options/attributes missed from server create
command -) directory, gid, uid and era attr. It need to be fixed.
The corresponding fvt ICs need to be added too.

[7/5/94 public]
Fixed and submitted.



CR Number                     : 11071
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : sec_id_parse_name should be 
	called with a NULL handle
Reported Date                 : 6/24/94
Found in Baseline             : 1.1
Found Date                    : 6/24/94
Severity                      : C
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : 
                                admin/dcecp/rgy.c
                                admin/dcecp/rgy_sa_tclif.c
                                admin/dcecp/rgy_utils.c
                                admin/dcecp/rgy.h
                                admin/dcecp/commands.c
Sensitivity                   : public

[6/24/94 public]

The sec_id_parse_name should be called with a NULL handle. The 
api will do the right thing regardless.

[kevins 6/28/94 public] 

After some investigation it turns out that sec_id_parse_name will 
not necessarily do the right thing. Without a network context 
sec_id_parse_name will not perform as expected. I only get the 
error:
No currently established network identity for which context exists

Apparently sec_id_parse_name is opening a registry site that requires
some type of acl rights.

[8/3/94 public]

The NULL process works if the user is dce logged in. This presents
somewhat of problem since that should not necessarily be a
requirement for parsing a name. The only requirement should be access
to a registry binding handle.

[8/3/94 public]
This is holding up John on the host task script.  Priority 0.

[8/3/94 public]
Since this is against a SEC API, I'm guessing it should be a SEC
component CR.  Will create a new SEC bug of priority 0. As Kevin
suggested, will leave this one against dcecp as a reminder.

[8/8/94 public]
  Calling sec_id_parse_name with a NULL handle only
  works when the user has a login context. Reworked the rgy_handle cache
  so that we now maintain two registry handles. One that is dynamic in
  that it always tracks the cell/registry that the user wants to access
  and another that is by default associated with unauthenticated
  access to the local registry. We now use the unauthenticated registry
  handle to pass into sec_id_parse_name so that we have quick and easy
  access to parsing object names.

[8/12/94 public]
closed.



CR Number                     : 11061
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : extended registry attributes
Short Description             : Support for modify -add, -change, and -remove
Reported Date                 : 6/23/94
Found in Baseline             : 1.1
Found Date                    : 6/23/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : rgy.c, rgy_utils.c, rgy.h, dcp.sams
Sensitivity                   : public

[6/23/94 public]

Need initial support for modify -add, -change, and -remove.
Will cover all pgo objects, but will not support attributes
of encoding type binding.

[7/01/94 public]

Code written and submitted on June 29 to cover this functionality.
Binding attributes are still not supported.  A separate OT is open
to cover those.



CR Number                     : 11060
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : Name for registry site not checked 
properly
Reported Date                 : 6/23/94
Found in Baseline             : 1.1
Found Date                    : 6/23/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : rgy_utils.c
Sensitivity                   : public

[6/23/94 public]

The name that is passed into open the registry is not checked properly. 
Currently if _s(sec) is "unset" then I pass no name in to open_rgy_site  
to be opened. This is wrong an extra check needs to be added to pass in the 
proper requested registry name.

[6/23/94 public]

One more check is now made. If a name has been passed in to open_rgy_site
and no _s(sec) variable exists then use the name that was passed in.

[7/5/94 public]
closed.



CR Number                     : 11058
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : hostdata, server
Short Description             : rpc binding for attr_schema is not released after use
Reported Date                 : 6/23/94
Found in Baseline             : 1.1
Found Date                    : 6/23/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : dhd_util.c dhd_hostdata.c dhd_server.c
Sensitivity                   : public

[6/23/94 public]
I forgot to free the binding for dced attr_schema interface after use.
This need to be fixed.

[7/5/94 public]
Fixed and submitted.



CR Number                     : 11056
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : registry
Short Description             : Some registry cmds do not accept a slave replica specification
Reported Date                 : 6/23/94
Found in Baseline             : 1.1b10
Found Date                    : 6/23/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : rgy_sa_replist.c rgy_sa_replist.h rgy_sa_tclif.c
Sensitivity                   : public

[6/23/94 public]

I broke the following commands in my last submission.  They were 
originally working properly but I ripped out some code that IS NEEDED. 

sec_rgy_replist_read_full() can only be successfully invoked by the
master registry.  Not documented anywhere and was working on an 
unstable security replication code base.

Right now, you cannot specify a slave replica with the following cmds:
regi modify -key
regi stop
regi delete -only
regi cat                   #must set _s(sec) to master
regi sh -rep               #must set _s(sec) to master
regi sh -master            #must set _s(sec) to master

[8/12/94 public]
closed.



CR Number                     : 11048
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : tcl parser's variables not unique
Reported Date                 : 6/22/94
Found in Baseline             : 1.1
Found Date                    : 6/22/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : admin/dcecp/scripts/parseargs.dcp
Sensitivity                   : public

[6/22/94 public]

The tcl parser's parseargs.dcp variables are not unique enough. 
That is the variable names are sometimes clashing with verb names
that the parser is attempting to parse. The parser variable names should
be prepended with _dcp_, which is reserverd, to assure uniqueness.

[6/23/94 public]

Modified all parser names to begin with _dcp_. This will 
alleviate the problem.

[7/5/94 public]
closed.



CR Number                     : 11037
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : registry
Short Description             : registry modify -minorgid with an i
nvalid value produces a bogus error message.
Reported Date                 : 6/22/94
Found in Baseline             : 1.1b10
Found Date                    : 6/22/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : rgy_utils.c
Sensitivity                   : public

[6/22/94 public]

Ran on the HP, produces a different number on the 486:

dcecp> registry modify -minorgid -1
Error: The 'minorgid' attribute must be less than 2063811252.

Should produce an error like to be consistent with other attribute changes:
Error: The 'minorgid' attribute must be a positive integer.

dcecp> registry modify -minorgid foo
Error: The 'minorgid' attribute must be less than 2063811252.

Should produce an error like to be consistent with other attribute changes:
Error: The 'minorgid' attribute must be a integer.

[kevins 6/22/94 public] 

Actually it should produce the error:
Error: The 'minorgid' attribute must be a positive integer.

This was returning a bad error value and consequently reporting it badly. 
Fixed the error return and modified reporting.

[7/5/94 public]
closed.



CR Number                     : 11036
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : show/accept towers in Tcl syntax
Reported Date                 : 6/22/94
Found in Baseline             : 1.1b10
Found Date                    : 6/22/94
Severity                      : E
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : cdscp_utils.c
                                             cdscp_cache.c
Sensitivity                   : public

[6/22/94 public]
Towers and binding info should always be shown in the Tcl syntax.  It
should be accpeted on input as well, I'm not sure if it is. 

  dcecp> dir show /.:/hosts  
  {RPC_ClassVersion
   {01 00}}
  {CDS_CTS 1994-06-16-14:43:51.923-04:00I0.000/08-00-09-25-13-52}
  {CDS_UTS 1994-06-21-13:05:49.887-04:00I0.000/08-00-09-25-13-52}
  {CDS_ObjectUUID e5bf3a9c-893a-11cd-afe7-080009251352}
  {CDS_Replicas
   {{Clearinghouse_Uuid cb32b67c-893a-11cd-afe7-080009251352}
    {Clearinghouse_Name /.../absolut_cell/absolut_ch}
    {Replica_Type Master}  
    {Tower ncacn_ip_tcp:130.105.5.93[]}

Should be {Tower {ncacn_ip_tcp 130.105.5.93}}

    {Tower ncadg_ip_udp:130.105.5.93[]}}}
Should be {Tower {ncadg_ip_udp 130.105.5.93}}}}

  {CDS_AllUpTo 1994-06-22-04:07:25.971-04:00I0.000/08-00-09-25-13-52}
  {CDS_Convergence medium}
  {CDS_ParentPointer
   {{Parent_UUID cccee302-893a-11cd-afe7-080009251352}
    {Timeout
     {expiration 1994-06-22-13:05:49.852}
     {extension +1-00:00:00.000I0.000}}
    {myname /.../absolut_cell/hosts}}}
  {CDS_DirectoryVersion 3.0}
  {CDS_ReplicaState on}
  {CDS_ReplicaType Master}
  {CDS_LastSkulk 1994-06-22-04:07:25.971-04:00I0.000/08-00-09-25-13-52}
  {CDS_LastUpdate 1994-06-21-13:05:49.887-04:00I0.000/08-00-09-25-13-52}
  {CDS_RingPointer cb32b67c-893a-11cd-afe7-080009251352}
  {CDS_Epoch e5e6571c-893a-11cd-afe7-080009251352}
  {CDS_ReplicaVersion 3.0}

[6/22/94 public]
I have a routine in rgy_sa_replist.c called "dcp__rgy_sa_print_towers()"
that can be used.  The indentation needed for display doesn't make it
generic, but it can be modified.

[7/14/94 public]

I made the changes. I can now accept tcl formated towers and I always 
print tcl towers. Also cds can accept tcl or traditional format for towers:

{ncadg_ip_udp:130.105.5.99}
or
{ncadg_ip_udp 130.105.5.99}

Here is a typical output of an object with CDS_Towers attribute:
dcecp> obj show /.:/kevins/test
{CDS_CTS 1994-07-13-10:55:06.825-04:00I0.000/08-00-09-35-5d-0e}
{CDS_UTS 1994-07-13-14:29:44.285-04:00I0.000/08-00-09-35-5d-0e}
{CDS_Towers 
 {ncadg_ip_udp 130.105.5.67}
 {ncadg_ip_udp 130.105.5.16}
 {ncadg_ip_udp 130.105.5.16}
 {ncacn_ip_tcp 130.105.5.16}
 {ncacn_ip_tcp 130.105.5.67}
 {ncacn_ip_tcp 130.105.5.66}}

Here is a directory with associated replicas information.
{RPC_ClassVersion
 {01 00}}
{CDS_CTS 1994-07-11-07:50:14.189-04:00I0.000/08-00-09-35-5d-0e}
{CDS_UTS 1994-07-14-05:01:10.046-04:00I0.000/08-00-09-35-5d-0e}
{CDS_ObjectUUID 418d37e2-9ca6-11cd-a5c3-080009355d0e}
{CDS_Replicas
 {{Clearinghouse_Uuid ce21a4d6-9b2a-11cd-aa72-080009355d0e}
  {Clearinghouse_Name /.../terrapin_cell.osf.org/jerry}
  {Replica_Type Master}  
  {Tower {ncacn_ip_tcp 130.105.4.193}}
  {Tower {ncadg_ip_udp 130.105.4.193}}}}
{CDS_AllUpTo 1994-07-14-02:00:58.692-04:00I0.000/08-00-09-35-5d-0e}
{CDS_Convergence medium}
{CDS_ParentPointer
 {{Parent_UUID 2dc517ab-9b13-11cd-b9d8-0000c0f7de56}
  {Timeout
   {expiration 1994-07-15-05:01:09.982}
   {extension +1-00:00:00.000I0.000}}
  {myname /.../terrapin_cell.osf.org/kevins}}}
{CDS_DirectoryVersion 3.0}
{CDS_ReplicaState on}
{CDS_ReplicaType Master}
{CDS_LastSkulk 1994-07-14-02:00:58.692-04:00I0.000/08-00-09-35-5d-0e}
{CDS_LastUpdate 1994-07-14-05:01:10.046-04:00I0.000/08-00-09-35-5d-0e}
{CDS_RingPointer ce21a4d6-9b2a-11cd-aa72-080009355d0e}
{CDS_Epoch 44d3a238-9ca6-11cd-a5c3-080009355d0e}
{CDS_ReplicaVersion 3.0}

[7/15/94 public]

cdscache commands still need to be done.

[8/2/94 public]
cdscache changes are done a submitted.

[8/12/94 public]
closed.



CR Number                     : 11032
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : show RPC_ClassVersion on one line
Reported Date                 : 6/21/94
Found in Baseline             : 1.1b9
Found Date                    : 6/21/94
Severity                      : E
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : cdscp_utils.c
Sensitivity                   : public

[6/21/94 public]

Output the RPC_ClassVersion on one line, it will always be short.

  dcecp> dir show /.:
  {RPC_ClassVersion
   {01 00}}
  {CDS_CTS 1994-06-16-14:43:10.083-04:00I0.000/08-00-09-25-13-52}
  {CDS_UTS 1994-06-16-14:43:38.799-04:00I0.000/08-00-09-25-13-52}
  {CDS_ObjectUUID cccee302-893a-11cd-afe7-080009251352}
  {CDS_Replicas
   {{Clearinghouse_Uuid cb32b67c-893a-11cd-afe7-080009251352}
    {Clearinghouse_Name /.../absolut_cell/absolut_ch}
    {Replica_Type Master}  
    {Tower ncacn_ip_tcp:130.105.5.93[]}
    {Tower ncadg_ip_udp:130.105.5.93[]}}}
  {CDS_AllUpTo 1994-06-21-17:06:25.371-04:00I0.000/08-00-09-25-13-52}
  {CDS_Convergence medium}
  {CDS_InCHName new_dir}
  {CDS_DirectoryVersion 3.0}
  {CDS_ReplicaState on}
  {CDS_ReplicaType Master}
  {CDS_LastSkulk 1994-06-21-17:06:25.371-04:00I0.000/08-00-09-25-13-52}
  {CDS_LastUpdate 1994-06-17-16:56:56.993-04:00I0.000/08-00-09-25-13-52}
  {CDS_RingPointer cb32b67c-893a-11cd-afe7-080009251352}
  {CDS_Epoch cccedee8-893a-11cd-afe7-080009251352}
  {CDS_ReplicaVersion 3.0}

[8/10/94 public]

Modified RPC_ClassVersion so now it is displayed on one line. 

  dcecp> dir show /.:
  {RPC_ClassVersion {01 00}}

[8/12/94 public]
closed.



CR Number                     : 11031
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : use #!/usr/bin/dcecp
Reported Date                 : 6/21/94
Found in Baseline             : 1.1b9
Found Date                    : 6/21/94
Severity                      : D
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : lots
Sensitivity                   : public

[6/21/94 public]
John Bowe writes:

 Why do dcecp scripts (at least the few I've seen in the test tree) start
 with #!/bin/dcecp instead of #!/usr/bin/dcecp?  The program is installed
 in /usr/bin/dcecp.  (the only reason /bin/dcecp works on osf1 (and SunOS)
 is that /bin is a symlink to /usr/bin.)  Also, POSIX (or whatever standards
 body) wants everything in /usr/bin...

All of our test scripts have #!/bin/dcecp as does test_suite.tcl.

On the bright side, when invoked with tcc these aren't used, it's
actually just a hack to let you run the script without having to bother
with TET.  Hence the low priority.

[9/28/94 public]
fixed, submitted.
 * no more #!/bin/dcecp in any file
 * moved all tests to the approved place: src/test/functional/admin/dcecp/*
 * taught ODE about tet_scen, tetexec.cfg, *.tcl *.dcp comment leaders

[10/6/94 public]
closed.



CR Number                     : 11030
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : print_attrs
Short Description             : print_attrs() dosn't handle null data well
Reported Date                 : 6/21/94
Found in Baseline             : 1.1
Found Date                    : 6/21/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : rgy_utils.c
Sensitivity                   : public

[6/21/94 public]
For example, in case sec_attr_encprintstring_array, it only
checks if the num_strings == 1 or assume it's greater than 1.
What if the num_strings == 0, it should show something like
{name {}}, but it shows {name

[8/19/94 public]
The print_attrs() function now handles null data correctly
on the printstring_array encoding types.

[8/21/94 public]
closed.



CR Number                     : 11029
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : keytab
Short Description             : Messages have typo in SAMS
file.  Causes FVT to fail.
Reported Date                 : 6/21/94
Found in Baseline             : 1.1
Found Date                    : 6/21/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dcp.sams
Sensitivity                   : public

[6/21/94 public]

dcp.sams messages:

  dcp_s_dhd_data_on_entry_ops 
  dcp_s_dhd_data_attr_missing

Have mistakes in their text fields.  They spell 'attribute' as 'atribute'.
Also, there should be a '.' at the end of the text.

Even simple typos like this causes exact match Negative FVT's to fail.

[7/5/94 public]
closed.



CR Number                     : 11025
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : aud
Short Description             : known attribute values should be abbrev'ed.
Reported Date                 : 6/21/94
Found in Baseline             : 1.1b10
Found Date                    : 6/21/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : aud_ops.c, dts_ops.c and others
Sensitivity                   : public

[6/21/94 public]
The values of the state and stotrategy attributes passed to aud
modify should be abbrevateable.

[8/19//94 public]
Both aud modify and dts modify now accept attribute names and known
attribute values in unique abbreviated form. Submitted.

[8/26/94 public]
closed.



CR Number                     : 11022
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : keytab and hostdata FVT
Short Description             : dcecp keytab and hostdata
FVT's should use tet_setup to invoke setup script as self/root.
Reported Date                 : 6/21/94
Found in Baseline             : 1.1
Found Date                    : 6/21/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : Many
Sensitivity                   : public

[6/21/94 public]

The dcecp keytab and hostdata FVT's should invoke the ACL operations
within their *_setup.tcl scripts via the tet_setup program.  This will
have those ACL operations executed as root & self.

Also, the tests should be modified to get their host/cell out of the 
tetexec.cfg file.  They currently do not.

[6/22/94 public]

Fixed.

[7/5/94 public]
closed.



CR Number                     : 11020
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : sr, hd, kt
Short Description             : multiple-value attributes are treated as single-value attributes
Reported Date                 : 6/21/94
Found in Baseline             : 1.1
Found Date                    : 6/21/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : dhd_hostdata.c dhd_keytab.c dhd_server.c dhd_util.c
Sensitivity                   : public

[6/21/94 public]
In the dced commands, some attributes should have been multiple-value,
but are treated as single-value. I.e {attr val1 val2 val3 ...} are
treated as {attr {val1 val2 val3 ...}}. These need to be fixed.

[7/5/94 public]
Fixed and submitted.



CR Number                     : 11017
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : task scripts need parser.
Reported Date                 : 6/21/94
Found in Baseline             : 1.1
Found Date                    : 6/21/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : admin/dcecp/scripts/parseargs.dcp
Sensitivity                   : public

[6/21/94 public]

Task scripts need a command line parser that can accept multiple 
arbitrary switches and can support switch abbreviations.

[6/22/94 public]

Developed and submitted a tcl based parser to use with 
task scripts.

[6/22/94 public]
closed.



CR Number                     : 11016
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : print_attrs
Short Description             : a couple of minor problems on returning of status code and printing of printstring_array
Reported Date                 : 6/21/94
Found in Baseline             : 1.1
Found Date                    : 6/21/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : rgy_utils.c
Sensitivity                   : public

[6/21/94 public]

1) print_attrs() something sets statuscode in the Tcl_Interp, 
   sometime returns it as result of the function. It could be better
   to keep it consistent to set it in the Tcl_Interp and return TCL_ERROR
   if a error occurrs.

2) While printing a printstring_array which has only one string and the
string is only one word , a set of braces is still put to surround the single 
string. For example {hostdata/filecontents {try}}, should it be better just
to print it as {hostdata/filecontents try} in this case?

[8/19/94 public]
The three error code lines in print_attrs() have been changed to all
be of the same format.  Also, the case where a printstring contains
no whitespace has been changed to remove the {}'s around the string.
This is true also for a printstring_array type which has only one
value, and that value has no whitespace.

[8/21/94 public]
closed.



CR Number                     : 11015
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rpc
Short Description             : \n between objects in rpc commands
Reported Date                 : 6/20/94
Found in Baseline             : 1.1b9
Found Date                    : 6/20/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : src/admin/dcecp/rpccp.c
Sensitivity                   : public

[6/20/94 public]
The following commands should output a newline between objects when
called with multiple objects as an argument:

  rpcentry import
  rpcentry show
  rpcgroup import
  rpcgroup list
  rpcprofile import
  rpcprofile list
  rpcprofile show

[8/22/94 public]
Fix submitted.

[9/28/94 public]
closed.



CR Number                     : 11000
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : certain "dts modify"
commands fail.
Reported Date                 : 6/17/94
Found in Baseline             : 1.1
Found Date                    : 6/17/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : admin/dcecp/dts_ops.c
Sensitivity                   : public

[6/17/94 public]

Using the build from Thursday, June 16th, the following errors were 
noted:

dcecp>  dts modify -maxinaccuracy +0-00:00:00.200I-----
# this commands succeeds 

dcecp>  dts modify -minservers 4
Error: The command requires at least one option.
dcecp> dts modify -queryattempts 4
Error: The command requires at least one option.

The above entries are taken from the functional test in 

	{sandbox}/src/test/admin/dcecp/ts/dts/dts_modify_P.tcl

[6/17/94 ]

Some more info:

The command 

	dts modify -change {minservers 4 } 
produces no error, but doesn't set the value of minservers correctly either

[6/19/94 public]
Hmmm. I fixed this a while ago (long before 6/16). It works fine on my 486.
I'm about to try it on an HP. Can anyone else reproduce this? 

Both problems are not occuring on my 486.

[6/19/94 public]
This IS happening on the HP. Looking into it now.

[6/23/94 public]
Thanks to John Bowe for some insight into this. I was making a comparison
that made some assumptions about byte ordering. A fix is in progress now.

[6/23/94 public]
Fixed casting problems to work on big and little endian platforms.
Submitted.

[7/5/94 public]
closed.

[1/15/96 public]
this is a test



CR Number                     : 10969
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : extended registry attributes
Short Description             : Support for pgo modify with binding attributes is missing
Reported Date                 : 6/15/94
Found in Baseline             : 1.1
Found Date                    : 6/15/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : rgy_utils.c
Sensitivity                   : public

[6/15/94 public]

During a pgo modify, support for extended attributes with encoding
type "binding" is missing at this time.

This is found in the get_attr_values() and check_era_info() functions.

[7/11/94 public]
Support added and submitted.



CR Number                     : 10968
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : extended registry attributes
Short Description             : Support for pgo create with binding attributes is missing
Reported Date                 : 6/15/94
Found in Baseline             : 1.1
Found Date                    : 6/15/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : rgy_utils.c rgy.h dcp.sams dhd_util.c dhd_hostdata.c
Sensitivity                   : public

[6/15/94 public]

During a pgo create, support for extended attributes with encoding
type "binding" is missing at this time.

This is found in the get_attr_values() function.

[7/7/94 public]
Fixed and submitted.



CR Number                     : 10967
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : Displaying multiple instances is incorrect
Reported Date                 : 6/15/94
Found in Baseline             : 1.1
Found Date                    : 6/15/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : rgy.h, rgy.c, rgy_utils.c
Sensitivity                   : public

[6/15/94 public]

During the display of extended attributes, the current method for
displaying multiple instances of a multi-valued attribute is to
display each instance as it is found.  Thus,
      principal show foo
         {test_integer 101}
         {test_integer 102}
         {test_integer 103}

There has been, however, a request to change this to combine each
instance of a multi-valued attribute to make the display more compact.
Thus,
      principal show foo
         {test_integer 101 102 103}

This is found in the show_era() function.

[9/29/94 public]
The changes to show_era() and print_attrs() were made and
submitted.  Multiple values for the same attribute name are
now displayed together.

[10/6/94 public]
closed.



CR Number                     : 10964
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : Binding-type twrs not supported for display
Reported Date                 : 6/15/94
Found in Baseline             : 1.1
Found Date                    : 6/15/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : rgy_utils.c
Sensitivity                   : public

[6/15/94 public]

During the display of extended attributes, an attribute of encoding
type "binding" can be one of type 'string', 'name', or 'twrs'.
Currently, the towers-type bindings are not supported for display.

This is found in the print_attrs() function.

[8/3/94 public]

I actually submitted this a couple of weeks ago, but forgot to update
the CR.

[8/12/94 public]
closed.



CR Number                     : 10963
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : Character buffers of pre-defined size, not malloc'd
Reported Date                 : 6/15/94
Found in Baseline             : 1.1
Found Date                    : 6/15/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : rgy.h, rgy_utils.c
Sensitivity                   : public

[6/15/94 public]

During the display of extended attributes, two character buffers of
fairly large size are defined to hold output information.  This is wasteful
and should be replaced by a system which keeps track of what size the
buffer should be, and as it grows, malloc the space dynamically.

This is found in the print_attrs() function, with the tmp_str variable
and in the show_era() function, with the pr_string variable.

[8/26/94 public]
Tcl has a package called Dynamic Strings to do just this.  Check out the
routines Tcl_DString*() in src/admin/tcl7.3/tclUtil.c .

If you have the Tcl book look there (Chap 36).  Or I can mail you the draft
that was available on the net.

[9/21/94 public]
Jim, I'm sorry I need to raise this one's priority since it blocks
me on closing OT#11926.

[9/23/94 public]
changed to P0 so that this stands out from the other P1's.  Ping is blocked
on this one.

[9/28/94 public]
This will be fixed by Jim as part of CR 10967.  Keeping as separate since
they are separate problems.  changing to a 1 though it is what Jim is
working on now.

[9/29/94 public]
With the new work done to show_era() and print_attrs(), a character
buffer is no longer required to do the pgo show output.  The output
is done directly with the Tcl_AppendResult call now.  Submitted.

[10/6/94 public]
closed.



CR Number                     : 10961
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : MAX_ATTR constant used to pre-define space limits era support
Reported Date                 : 6/15/94
Found in Baseline             : 1.1
Found Date                    : 6/15/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : rgy.c, rgy_utils.c
Sensitivity                   : public

[6/15/94 public]

MAX_ATTR constant is used to pre-define a certain amount of space for
a sec_attr_t structure (used to create and modify extended attributes).
This value is hard-coded in rgy.c and rgy_utils.c and should be
replaced with a system which malloc's space as needed.

Using MAX_ATTR limits how many extended attributes can be entered
on the command line during a create or modify, and limits how many
can exist on an object during a retrieval (during the check portion
of a modify command).

The functions that will change include principal_create(),
principal_modify(), rgy_group_create(), rgy_group_modify(),
rgy_org_create(), rgy_org_modify() and check_era_info().

The majority of the work will be done in only two place
check_era_info() and somewhere around parse_attribute_list().

Note that MAX_ATTR_SHOW used in rgy_utils.c is correct and
needs no changes.

[9/23/94 public]
Kevin has graciously volunteered to do this one.
I sent him the notes from Anne H.

[9/29/94 public]

Modified the size of the static allocation from 20 to 64. This needs to be 
done as an enhancement in 1.2



CR Number                     : 10955
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : Makefile
Short Description             : TCL TET FVT's are dieing with
signal 26.  Makefile should indicate this as SPCIAL signal
Reported Date                 : 6/15/94
Found in Baseline             : 1.1
Found Date                    : 6/15/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : test/tet/src/tcl/api/Makefile
Sensitivity                   : public

[6/15/94 public]

The ./test/tet/src/tcl/api/Makefile needs to have 26 in its SPEC Signal
list.

[6/21/94 public]

Added VTALRM signal (26) into SPEC_SIGNALS in Makefile

[6/22/94 public]
closed.



CR Number                     : 10948
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : hostdata
Short Description             : hostdata error message does not have default text
Reported Date                 : 6/14/94
Found in Baseline             : 1.1
Found Date                    : 6/14/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dcecp/dhd_*.c, dced/api/dced_binding.c dce/utils/svc/msgtable.c
Sensitivity                   : public

[6/14/94 public]

Since I wasn't running dced, I belive this is a dcecp problem.

Somewhere a default message table is not getting put in the correct place:

% unsetenv LANG NLSPATH
dcecp> hostdata catalog
Error: Unknown message number 0x113db064

surf>stcode -h 0x113db064
Tech = 1 = 01 = 0x1 = dce
Comp = 5083 = 011733 = 0x13db = dhd
Mesg = 100 = 0144 = 0x64 = Bad binding handle

I was running a machine without dced running, so the error message
is (sorta) correct.  Dcecp should make sure it registers the its 
default message table on startup.

It should also say something pithy like 'can't talk to hostdata daemon'.

[6/15/94 public]
If the dced is not running, it should return something close to
"communications failure"  from binding import operations in
dced_bingding_create(). dhd is supposed in dced's msg catalog
or its default msg table. Is it possible there was some bad entries
left over in ns? 

--------
pwang@foster19 >/opt/dcelocal/bin/dcecp
dcecp> hostdata catalog
Error: Unknown message number 0x16c9a016
dcecp> hostdata catalog
Error: Unknown message number 0x16c9a016

#foster#:> ~pwang/bin/statuscode 0x16c9a016
Tech = 1 = 01 = 0x1 = dce
Comp = 27802 = 066232 = 0x6c9a = rpc
Mesg = 22 = 026 = 0x16 = communications failure

[6/15/94 public]
Well on the RIOS orange, with the nightly of 6/13-14 it still
gives me the status code.

On the 486 with the nightly of 6/14-15, it gets worse:
This happens both as cell_admin or unathenticated.

start-------------
surf>dcecp
dcecp> hostdata catalog
Segmentation fault (core dumped)
surf>gdb dcecp core

...

(gdb) where
#0  0xa42a35e2 in dced_binding_set_auth_info (0, 2, -1, 0, 2, -1073745404)
#1  0x4693d0 in dcp_hd_catalog (clientData=0x0, interp=0x4c2008, argc=1, 
    argv=0xbffff3c4)
    at /project/dce/build/dce1.1-snap/src/admin/dcecp/dhd_hostdata.c:195
#2  0x402db5 in dcp_hostdata (clientData=0x0, interp=0x4c2008, argc=1, 
    argv=0xbffff3c4)
    at /project/dce/build/dce1.1-snap/src/admin/dcecp/commands.c:1350
#3  0x480425 in Tcl_Eval (4988936, -1073743364)
#4  0x48fe9b in Tcl_RecordAndEval (4988936, -1073743364, 0)
#5  0x4006ff in main (argc=1, argv=0xbffffaf8)
    at /project/dce/build/dce1.1-snap/src/admin/dcecp/main.c:392
(gdb)
end----------------

[6/15/94 public]
It seems that dced_binding_create() returns a dced binding with 
status ok at sometime even the dced server is not running. But all 
this possibly happens is that rpc_ns_binding_import_next() in 
dced_binding_create() returns status ok with some weird rpc binding. 
Is there any case in which rpc_ns_binding_import_next() will possibly
return ok even the server is not running so that we can put guard in 
dced_binding_create()?

[6/15/94 public]
I guess I know where the problem is for the core dump. Tom, could you 
please try "hostdata catalog hosts/surf" to see if it still dumps core 
since I could not reproduce the bug in my system. The status check in catalog 
operations doesn't cover the null hostname case. It is my mistake and I'll 
check in the fix after tree opens.

[6/22/94 public]
Fixed error checking in dcecp code. Added dced default msg table
to libdce. Removed unwanted loop on binding_import_next in dced
binding creation code.

[7/5/94 public]
closed.



CR Number                     : 10928
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : server hostdata keytab
Short Description             : Add carriage-return between two object outputs
Reported Date                 : 6/10/94
Found in Baseline             : 1.1
Found Date                    : 6/10/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dcecp/dhd_hostdata.c dcecp/dhd_keytab.c dcecp/dhd_server.c
Sensitivity                   : public

[6/10/94 public]

>From melman@osf.org Thu Jun  9 13:20:31 1994
>Received: by absolut.osf.org.osf.org (1.37.109.4/4.7) id AA08070; Thu, 9 Jun 94 13:20:11 -0400
>Date: Thu, 9 Jun 94 13:20:11 -0400
>Message-Id: <9406091720.AA08070@absolut.osf.org.osf.org>
>From: Howard Melman <melman@osf.org>
>Sender: melman@osf.org
>To: kevins, rousseau, salamone, landers, melman, coren, pwang,
>        ahop@apollo.hp.com, jake@apollo.hp.com, truitt@apollo.hp.com
>Subject: Re: differentiating between multiple object lists 
>References: <9406091545.AA00253@drkstr.osf.org>
>
>
>
>On Thu Jun 9, 1994, Kevin Sullivan wrote:
>
>> Currently it can be confusing to differentiate between
>> object lists when viewing the contents of two objects. 
>> 
>> For instance:
>> 
>> dcecp> princ show {tcb cell_admin}
>> {fullname {}}
>> {uid 9}
>> {uuid 00000009-fd5c-2df5-8e00-0000c0f7de56}
>> {alias no}
>> {quota 0}
>> {groups tcb}
>> {fullname {}}
>> {uid 100}
>> {uuid 00000064-fd5b-2df5-8e00-0000c0f7de56}
>> {alias no}
>> {quota unlimited}
>> {groups none acct-admin subsys/dce/sec-admin subsys/dce/cds-admin subsys/dce/dts-admin}
>> dcecp> llength set _r
>> 12
>> 
>> It can be difficult to distinguish between the two
>> principals. So... I have checked it out and adding a
>> carriage-return  between the objects in no apparent way
>> effects the integrity of the output. I/Howard think it would be a
>> good idea if we start/retrofit or show routines to do this. 
>> It is  certainly less eye strain. 
>> 
>> dcecp> princ show {tcb cell_admin}
>> {fullname {}}
>> {uid 9}
>> {uuid 00000009-fd5c-2df5-8e00-0000c0f7de56}
>> {alias no}
>> {quota 0}
>> {groups tcb}
>> 
>> {fullname {}}
>> {uid 100}
>> {uuid 00000064-fd5b-2df5-8e00-0000c0f7de56}
>> {alias no}
>> {quota unlimited}
>> {groups none acct-admin subsys/dce/sec-admin subsys/dce/cds-admin subsys/dce/dts-admin}
>> dcecp> llength set _r
>> 12
>
>This is a good thing, so here is a change for everyone to
>make.  If you have any output that can show multiple things
>(e.g., a show command accepting a list of args), then put a
>blank line between the objects.
>
>Everyone please open a CR for your own objects.  Group them
>however you want (e.g., all the cds objects in one CR, in
>separate CR's), etc.  Whatever is easiest for how you'll
>submit the fixes.  Put yourself as resp. eng.
>
>I'll do the rpccp ones.  Seriously :-)
>
>Howard
>

[7/5/94 public]
closed.



CR Number                     : 10920
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : aud
Short Description             : show output needs blank link for multiple lists
Reported Date                 : 6/9/94
Found in Baseline             : 1.1b9
Found Date                    : 6/9/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : admin/dcecp/aud_ops.c
Sensitivity                   : public

[6/9/94 public]
The show outputs for aud, filter, audevents and audtrail show should
put a carrage return into the result between outputs with multiple
lists.

[6/21/94 public]
Changes made for audfilter and audtrail. Aud and audevents did not 
require changes. Submitted.

[6/22/94 public]
closed.



CR Number                     : 10917
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : display ouput needs
   to be modified for objects.
Reported Date                 : 6/9/94
Found in Baseline             : 1.1
Found Date                    : 6/9/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : rgy.c
Sensitivity                   : public

[6/9/94 public]

Each object needs to have an extra line feed between objects when 
multiple objects are being displayed.

[6/9/94 public]
All of the pgo and account show routines have been modified. 
Also the go list routines have also been modified.

[6/13/94 public]
closed



CR Number                     : 10916
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : princ show does not 
reset cursor for group list.
Reported Date                 : 6/9/94
Found in Baseline             : 1.1
Found Date                    : 6/9/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : rgy.c
Sensitivity                   : public

[6/9/94 public]

When displaying a list of principals only the first principal's
group list is displayed. This is because principal show does not 
do a sec_rgy_cursor_reset on the cursor into sec_rgy_pgo_get_members.

[6/9/94 public]

The cursor is now reset prior to acquiring the group list .

[6/13/94 public]
doesn't seem to work yet...

  dcecp> princ show {cell_admin dce-rgy}
  {fullname {}}
  {uid 100}
  {uuid 00000064-efb1-2df5-ae00-0000c03adf56}
  {alias no}
  {quota unlimited}
  {groups none acct-admin subsys/dce/sec-admin subsys/dce/cds-admin subsys/dce/dts-admin}
  
  {fullname {}}
  {uid 21}
  {uuid 00000015-efb2-2df5-ae00-0000c03adf56}
  {alias no}
  {quota 0}
  dcecp> princ show  dce-rgy             
  {fullname {}}
  {uid 21}
  {uuid 00000015-efb2-2df5-ae00-0000c03adf56}
  {alias no}
  {quota 0}
  {groups none}

[6/21/94 public]

Reinitialize a variable for each principal as the principal is processed.

dcecp>  princ show {cell_admin dce-rgy}
{fullname {}}
{uid 100}
{uuid 00000064-fb5c-2e01-8200-0000c0f7de56}
{alias no}
{quota unlimited}
{groups none acct-admin subsys/dce/sec-admin subsys/dce/cds-admin subsys/dce/dts-admin}

{fullname {}}
{uid 21}
{uuid 00000015-fb5d-2e01-8200-0000c0f7de56}
{alias no}
{quota 0}
{groups none}
dcecp>

[6/22/94 public]
closed.



CR Number                     : 10915
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : dcecp
Subcomponent Name             : audit functions
Short Description             : coredump on aud modify
Reported Date                 : 6/9/94
Found in Baseline             : 1.1
Found Date                    : 6/9/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : admin/dcecp/aud_ops.c
Sensitivity                   : public

[6/9/94 public]
I was playing with dcecp and it coredumped on:

  dcecp> aud modify -state disable
  Illegal instruction(coredump)

Here's the trace (such as there is:)

  (gdb) bt
  #0  0xa40036d4 in dcp_svc_handle ()
  Cannot access memory at address 0xc6076d44.

However, because of the sec ot 10809 the operation wouldn't have worked
anyhow. 

  dcecp> aud disable
  Error: client has no permission to execute operation

[6/13/94 public]
Downgraded to a C1.  
 * There is a work around, use "aud disable"
 * This was user error, state should have been "disabled" not "disable"
 * Yes I know this is still bad, but John is on vacation, this isn't
   blocking anyone, so C1 seems reasonable.

The aud_modify() routine in aud_ops.c needs some reworking:

 * Calls to free() are made on cleanup even if memory is not allocated.
 * Values of attributes should be abbreviatable.
 * Even "aud modify -state disabled" fails since it tries to
   free(change_attrv) which hasn't been allocated.

[6/21/94 public]
Reorganized code to free correctly. Will open another CR to allow attribute
values to be abbreviated.

[6/22/94 public]
closed.



CR Number                     : 10910
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : show routines incorrectly 
resets output buffer.
Reported Date                 : 6/9/94
Found in Baseline             : 1.1
Found Date                    : 6/9/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : cdscp_utils.c
Sensitivity                   : public

[6/9/94 public]

The clearinghouse, directory, link, object show routines 
incorrectly calls Tcl_ResetResult  at the beginning of 
formating the display of attributes.

[kevins 6/9/94 public] 

Modified the process of building an ouput buffer when displaying 
mulitple object's attributes.

[6/13/94 public]
closed



CR Number                     : 10908
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : account modify processes info 
in wrong order
Reported Date                 : 6/9/94
Found in Baseline             : 1.1
Found Date                    : 6/9/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : rgy.c
Sensitivity                   : public

[6/9/94 public]

When processing the modified attributes of on account object. Currently 
group and organization rename is done at the end. That is all  other 
modified attributes are done first and then the rename is done. This
can run into confusion if the rename fails, since the other attributes
have already been modified. 

The rename should happen first, then the other attributes should be 
modified. 

Ideally, if any of the changes fail all the previous values should
fall back and be the existing values.

[6/10/94 public]

The account attributes are now modified after a rename has occured. 
There is however, no rollback show a failure happen during attribute
update.

[6/13/94 public]
closed



CR Number                     : 10873
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dcecp_verb
Short Description             : 'help stop' gives error
Reported Date                 : 6/6/94
Found in Baseline             : 1.1
Found Date                    : 6/6/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : verb-object.dcecp
Sensitivity                   : public

[6/6/94 public]

Found this while using dcecp:
dcecp> help stop
Error: too many nested calls to Tcl_Eval (infinite loop?)
dcecp> help help
Error: too many nested calls to Tcl_Eval (infinite loop?)

As long as dcecp knows about the second argument, it fails.

[6/7/94 public]
It's pretty general, if you give two verbs you get into this loop:

  dcecp> stop stop
  Error: too many nested calls to Tcl_Eval (infinite loop?)

And yes, Tcl is right, it's an infinite loop.

[6/9/94 public]
Fixed.  Added check if dcecp_verb is called recursively.

[6/13/94 public]
closed



CR Number                     : 10865
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 10476
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : log
Short Description             : should be able to specify multiple routes
Reported Date                 : 6/6/94
Found in Baseline             : 1.1b10
Found Date                    : 6/6/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : src/admin/dcecp/log_edit.h,src/admin/dcecp/log_edit.c
Sensitivity                   : public

[6/6/94 public]
dcecp's "log modify" should let you specify multiple routes to match what
you can do with env variables and routing files.  Multiple routes are
specified with a space-separated list of routes.  "log show" should show
the right thing, too.

[8/18/94 public]

Multiple routes are now specified with a semi-colon separated 
list of routes.

Note that RFC42.3 and man pages for the "dcecp log" command and 
serviceability documentation should be updated accordingly.
Here are some examples with string and TCL syntax for both
debug and production routing specifications:

    dcecp> log mod /.:/hosts/ice/dts-entity -ch {ERROR:STDERR:;STDOUT:;FILE:/tmp/jas}
    dcecp> log mod /.:/hosts/ice/dts-entity -ch {ERROR {STDERR STDOUT {FILE /tmp/jas}}}
    dcecp> log sh $_n
    {ERROR {{STDERR} {STDOUT} {FILE /tmp/jas}}}


    dcecp> log mod /.:/hosts/ice/dts-entity -ch {FATAL:FILE:/tmp/jas:private;STDERR:}
    dcecp> log mod /.:/hosts/ice/dts-entity -ch {FATAL {{FILE /tmp/jas private} STDERR}}
    dcecp> log sh $_n
    {FATAL {{FILE /tmp/jas private} {STDERR}}}


    dcecp> log mod /.:/hosts/ice/dts-entity -ch {cds:general.7:FILE:/tmp/jas;STDOUT:;STDERR:}
    dcecp> log mod /.:/hosts/ice/dts-entity -ch {cds {general 7} {{FILE /tmp/jas} STDOUT STDERR}}
    dcecp> log sh $_n
    {cds {general 7} {{FILE /tmp/jas} {STDOUT} {STDERR}}}


    dcecp> log mod /.:/hosts/ice/dts-entity -ch {dts:msgs.2,general.7:STDERR:;STDOUT:;FILE:/tmp/jas}}}
    dcecp> log mod /.:/hosts/ice/dts-entity -ch {dts {{msgs 2} {general 7}} {STDERR STDOUT {FILE /tmp/jas}}}
    dcecp> log sh $_n
    {dts {{msgs 2} {general 7}} {{STDERR} {STDOUT} {FILE /tmp/jas}}}

[8/21/94 public]
closed.



CR Number                     : 10846
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : server object
Short Description             : server show need to convert name into uuid before calling dced_object_read().
Reported Date                 : 6/2/94
Found in Baseline             : 1.1
Found Date                    : 6/2/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dhd_server.c
Sensitivity                   : public

[6/2/94 public]
The ep_compat is listed as a srvrconf object, but srvrconf_get()
returns "not_found" because srvr_find_by_uuid() cannot locate it.
Here is the gdb stack,
>From server,

Breakpoint 2, srvrconf_get (h=0x4b8498, id_uuid=0x59cb58, value=0x59cae4, 
    st=0x59cae0) at /project/dce/build/dce1.1/src/admin/dced/server/scops.c:297
297         *value = dced_g_null_server;
(gdb) n
298         *st = error_status_ok;
(gdb) 
301         dce_lock_read(sc_table.lock, st);
(gdb) 
302         if ((sp = srvr_find_by_uuid(&sc_table, id_uuid, st)) == NULL) {
(gdb) 
303             dce_lock_unlock(sc_table.lock, st);
(gdb) 
304             *st = dced_s_not_found;
(gdb) 
305             return;
(gdb) 
317     }

>From client,

dcecp> server show ep-compat
Error: Cannot find a matching object.

[6/2/94 public]
It turned out the problem was mine. I forgot to call dced_inq_id() to convert
the object name into uuid before calling dced_object_read() to read the server
object. Fixed in my sandbox and will check in soon.



CR Number                     : 10832
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : misc
Short Description             : The resolve command
does not check arguments correctly.
Reported Date                 : 6/2/94
Found in Baseline             : 1.1
Found Date                    : 6/2/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : commands.c
Sensitivity                   : public

[6/2/94 public]

The resolve command does not check the arguments passed in from 
the command line correctly.

[kevins 6/2/94 public] 

Added standard dcecp macro to check for extraneous arguments/options.

[6/6/94 public]
closed.



CR Number                     : 10827
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : auditcp prints trail dcecp doesn't
Reported Date                 : 6/1/94
Found in Baseline             : 1.1
Found Date                    : 6/1/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : admin/dcecp/aud_ops.c
Sensitivity                   : public

[6/1/94 public]

I just installed DCE from "lastgoodbuild" onto dce1
which is an HP machine running HP/UX.
I created an audit trail in /tmp.
I can print out this audit trail using auditcp.
However dcecp doesn't print out anything.

You can try it yourself.
Log into dce1. 


root@dce1> dcecp -c audtrail show /tmp/auditd_trail
root@dce1> auditcp
auditcp> audtrail show
Enter trail file name: /tmp/auditd_trail
Enter trail dump file name (enter for screen dump):

--- Dumping an event record --- Event Number: 1536
Client: /.../dce1_cell.osf.org/cell_admin
Number of groups: 0
Event Outcome: success 
Authorization Status: Authorized with a name
Local Time: 1994-06-01-15:07:55.180-04:00I-----
--- End of an event record ---

[6/24/94 public]
Files descriptors were getting closed when they shouldn't have been.
I can't see how this directly relates to the problem at hand, but
when testing the old and new binaries side by side, the new one works 
every time and the old one fails every time.

[6/24/96 public]
Submitted.

[8/18/94 public]
closed.



CR Number                     : 10826
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : group add does not handle tcl
list in -member option correctly.
Reported Date                 : 6/1/94
Found in Baseline             : 1.1
Found Date                    : 6/1/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : rgy.c
Sensitivity                   : public

[6/1/94 public]

The group add command does not use tcl lists correctly.
If I issue the command:

group add none -member {foo foo_bar} 

both members will not be added to the group.

[6/3/94 public]

Modified the process by which the group/org add commands manipulate
the member tcl list.

[6/6/94 public]
closed.



CR Number                     : 10819
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : shell
Short Description             : The shell command 
dumps core when run from script.
Reported Date                 : 6/1/94
Found in Baseline             : 1.1
Found Date                    : 6/1/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : admin/dcecp/commands.c
Sensitivity                   : public

[6/1/94 public]

The shell command will dump core when invoked from a script. 
For instance if this command:
shell /bin/hostname 
is imbedded in a script dcecp will core when the script is executed.

[6/1/94 public]
Fixed two problems. The invalid malloc was also unneeded and was
removed. The running of the single shell command was changed so
it did not rely on the 'unknown' command which is unavailable
when not running interactively. Submitted.

[6/6/94 public]
closed.



CR Number                     : 10818
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : misc
Short Description             : errtext command
does no error checking
Reported Date                 : 6/1/94
Found in Baseline             : 1.1
Found Date                    : 6/1/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : admin/dcecp/commands.c
Sensitivity                   : public

[6/1/94 public]

The errtext command does no argument error checking.

[6/1/94 public]
Does now. Submitted.

[6/6/94 public]
closed.



CR Number                     : 10817
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : logout
Short Description             : logout command does not 
check arguments.
Reported Date                 : 6/1/94
Found in Baseline             : 1.1
Found Date                    : 6/1/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : admin/dcecp/commands.c
Sensitivity                   : public

[6/1/94 public]

The logout command does no error checking.

[6/1/94 public]
Does now. Submitted.

[6/6/94 public]
closed.



CR Number                     : 10814
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rpc
Short Description             : rpcprofile show allows if uuid w/o version
Reported Date                 : 5/31/94
Found in Baseline             : 1.1b9
Found Date                    : 5/31/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : rpccp.c, dcp.sams
Sensitivity                   : public

[5/31/94 public]
The following two commands create a profile and then show it. The profile show
command does not specify a version, and this should be flagged as an error.
A version is required.

dcecp> rpcprofile add /.:/rpcp_show_9_P -member /.:/bar -interface {00220434-6417-1de3-9add-0000c03adf56 1.0}
dcecp> rpcprofile show /.:/rpcp_show_9_P -interface {00220434-6417-1de3-9add-0000c03adf56}
dcecp>

[8/17/94 public]
This turned to be the case for all the RPC commands (including
endpoint). dcp_rpc_parse_if_id wasn't doing any syntax checking, and
sscanf was silently setting the variables with no matching arguments
to 0. I've added some (rudimentary) syntax checking.

[8/21/94 public]
closed.



CR Number                     : 10804
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : principal show does not 
display groups principal is member of
Reported Date                 : 5/31/94
Found in Baseline             : 1.1
Found Date                    : 5/31/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : rgy.c
Sensitivity                   : public

[5/31/94 public]

The command "principal show" does not list the groups that a principal is a 
member of.

[kevins 6/6/94 public] 

Added a call to sec_rgy_pgo_get_members to aquire a list of groups the 
principal is a member of. This information is displayed after the 
principal attributes and before the era information.

[6/6/94 public]
closed.



CR Number                     : 10800
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : era support
Reported Date                 : 5/27/94
Found in Baseline             : 1.1
Found Date                    : 5/27/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : rgy.c, rgy_utils.c, rgy.h, dcp.sams
Sensitivity                   : public

[5/27/94 public]

Initial support for era stuff in dcecp.
   principal/group/org create
      (for all era types except binding)
   principal/group/org modify
      (for all era types except binding)
   principal/group/org show



CR Number                     : 10785
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : Sams messages need to be cleaned.
Reported Date                 : 5/26/94
Found in Baseline             : 1.1
Found Date                    : 5/26/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : dcp.sams
Sensitivity                   : public

[5/26/94 public]

Kathy Digan has sent in a list of changes that should be made ot the dcp.sams
file. I will take the first hit.

[7/11/94 public]
Cleaned up my portion of the sams file. Now I am passing it off.

[8/30/94 public]
Consistent use of single quotes around literals
All of Kathy's changes
Removed the hard tabs

[9/28/94 public]
closed.



CR Number                     : 10784
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : positive integers
are not being checked properly.
Reported Date                 : 5/26/94
Found in Baseline             : 1.1
Found Date                    : 5/26/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : dcp.sams rgy.c rgy.h rgy_utils.c
Sensitivity                   : public

[5/26/94 public]

The routine that checks the validity of an integer misses several checks. 
There is no verification that a list of numbers has not been sent in.
There is no check to verify that the integer does not excede a 
32-bit integer.

[kevins 6/8/94 public] 

Modified the routine that checks integers. It now verifies that a 
tcl list was not passed in and it verifies that the number does not
excede the Maximum integer size for the machine.

[6/13/94 public]
closed



CR Number                     : 10783
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : Argument to Tcl_AppendResult
not being freed.
Reported Date                 : 5/26/94
Found in Baseline             : 1.1
Found Date                    : 5/26/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b10
Affected File(s)              : rgy.c
Sensitivity                   : public

[5/26/94 public]

In the "principal show" command the arguments being passed into 
Tcl_AppendResult should be freed after the call.

[5/27/94 public]

Freed the offending argument.

[6/2/94 public]
closed.



CR Number                     : 10771
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rpc
Short Description             : rpcprofile show should ouput annotations as a list
Reported Date                 : 5/25/94
Found in Baseline             : 1.1b9
Found Date                    : 5/25/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b8
Affected File(s)              : admin/dcecp/rpccp.c
Sensitivity                   : public

[5/25/94 public]
dcecp> rpcprofile create /.:/rpcp_remove_13_P
dcecp> rpcprofile add /.:/rpcp_remove_13_P -interface {004dbc1e-5c69-1de3-9add-0000c03adf56 1.0} -member /.:/foo -annotation {First case}
dcecp> rpcprofile add /.:/rpcp_remove_13_P -interface {004dbc1e-5c69-1de3-9add-0000c03adf56 2.0} -member /.:/bar -annotation {Second case}
dcecp> rpcp sh $_n
{{004dbc1e-5c69-1de3-9add-0000c03adf56 1.0} /.../dcecp_cell.osf.org/foo 0 First case}
{{004dbc1e-5c69-1de3-9add-0000c03adf56 2.0} /.../dcecp_cell.osf.org/bar 0 Second case}

The "Fisrt case" and "Second case" in the output should be surrounded by
braces to make it a valid list.

[5/25/94 public]
Fixed and submitted.

[6/2/94 public]
Almost:

dcecp> rpcprofile create /.:/rpcp_remove_13_P
dcecp> rpcprofile add /.:/rpcp_remove_13_P -interface {004dbc1e-5c69-1de3-9add-0000c03adf56 1.0} -member /.:/foo -annotation {First case}
dcecp> rpcprofile add /.:/rpcp_remove_13_P -interface {004dbc1e-5c69-1de3-9add-0000c03adf56 2.0} -member /.:/bar -annotation {Second case}
dcecp> rpcp sh $_n
{{004dbc1e-5c69-1de3-9add-0000c03adf56 1.0} /.../dcecp_cell.osf.org/foo 0 First case}
{{004dbc1e-5c69-1de3-9add-0000c03adf56 2.0} /.../dcecp_cell.osf.org/bar 0 Second case}

Need an extra closing brace at EOL so each line is a list.

[6/22/94 public]
Howard was running an old binary. The fix was correct. Should have been
closed a while ago.



CR Number                     : 10762
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : keytab
Short Description             : The keytab create -entry and -data optons are mutually excl. yet they are allowed together.
Reported Date                 : 5/24/94
Found in Baseline             : 1.1
Found Date                    : 5/24/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dhd_hostdata.c dhd_keytab.c
Sensitivity                   : public

[5/24/94 public]

FVT: src/test/admin/dcecp/ts/ktb/keytab_create_N.tcl{7}

A keytab create command with both the -entry and -data options is accepted
by dcecp.  These optoins specify conflicting operations and should not
be accpeted together.

[5/31/94 public]
Fixed in dhd_keytab.c and dhd_hostdata.c

[6/2/94 public]
closed.



CR Number                     : 10761
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : keytab
Short Description             : FVT's for dcecp keytab &
hostdata commands must be updated to reflect new command output.
Reported Date                 : 5/24/94
Found in Baseline             : 1.1
Found Date                    : 5/24/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : ktb_misc.tcl hd_misc.tcl
Sensitivity                   : public

[5/24/94 public]

Many of the dcecp hostsdat & keytab commands fail because the actual
output from the commands has changed.  this is true of both the
positive and negative tests.

Also, the unauthentocated negative tests fail because the tests are not
dce_login'ing themselves due to the dcecp login problems.  The unauth
tests cannot log out from inheirted context so they fail.  Tests will
be set to login themselves when the login problem is solved.

[5/25/94 public]

The unauthenticated tests no longer fail.  The login problem had been fixed
a while back, the tests had not been switched to login/out on their own.

[6/07/94 public]

Name of dced mailing list is dce-ot-dced not dced-ot-bugs

[6/7/94 public]
Fixes made to tests.  Fixed

[6/13/94 public]
closed



CR Number                     : 10758
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rpc
Short Description             : rpcprofile add handles options wrong
Reported Date                 : 5/24/94
Found in Baseline             : 1.1b9
Found Date                    : 5/24/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : admin/dcecp/rpccp.c
Sensitivity                   : public

[5/24/94 public]
rpcprofile add currently allows the -default option with the other
options -interface, -annotation and -priority. Using -default with
any of these options should produce an error.

Currently when used with -default, -priority and -interface are
ignored, while -annotation is used in the default entry.

[5/27/94 public]
Further investigation indicated that -annotation is legal when
combined with -default, but -priority and -interface are not. Fixed
and submitted.

[6/2/94 public]
closed.



CR Number                     : 10756
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rpc
Short Description             : rpcentry show ignores -object
Reported Date                 : 5/24/94
Found in Baseline             : 1.1b9
Found Date                    : 5/24/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b10
Affected File(s)              : rpccp.c
Sensitivity                   : public

[5/24/94 public]


rpcentry show always displays all exported objects, even if specific
ones are specified with the -object option.

[5/234/94 public]
Fixed and submitted.

[6/2/94 public]
closed.



CR Number                     : 10748
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : signal 12 aborts dcecp tests when excuting some commands.
Reported Date                 : 5/24/94
Found in Baseline             : 1.1
Found Date                    : 5/24/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : test/tet/src/tcl/api/Makefile
Sensitivity                   : public

[5/24/94 public]

Some (security) commands executed from dcep scripts, which run
run under TET, print the following message:

signal in abandon is 12
/u1/dassarma/11sb/install/hp800/dcetest/dce1.1/test/tet/tet_tmp_dir/5554a/ts/sig12.tcl: Abandoning tetset: caught unexpected signal 12.

I can reproduce this when executing the login command and "acl check".

Here is a test example to reproduce the problem, it uses the acl 
command.

------------------------------------------------------------

#!/opt/dcelocal/bin/dcecp

if {([catch {set TET_ROOT $env(TET_ROOT)}]) ||
   ([string length $env(TET_ROOT)] == 0)} {
   puts stderr "$argv0: TET_ROOT is not defined."
   exit
}

proc first {} {
  puts "First procedure"
  if { [catch {directory create /.:/test_one} msg ] == 0 } {
     tet_infoline "-log---: $msg"
  } else {
    tet_infoline "-log---: $msg"
  }

  if { [catch {acl check /.:/test_one} msg ] == 0 } {
     tet_infoline "-log---: $msg"
  } else {
    tet_infoline "-log---: $msg"
  }
}

proc begin_test {} {
puts begin_test
}

proc end_test {} {
puts end_test
tet_result PASS
}

set iclist "ic1 "
set ic1 "first"
set tet_startup begin_test
set tet_cleaunp end_test

source $TET_ROOT/lib/tcl/tcm.tcl

[5/25/94 public]
If we leave signal 12 alone (don't ignore it or trap it), the problem
goes away. Submitted.

[6/6/94 public]
closed.



CR Number                     : 10743
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : test/admin/dcecp/ts/aud
Short Description             : make complains not knowing how to build trail1
Reported Date                 : 5/24/94
Found in Baseline             : 1.1
Found Date                    : 5/24/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : test/admin/dcecp/ts/aud/MACHINE/*
Sensitivity                   : public

[5/24/94 public]

make prints out the following error message:

    make: don't know how to make trail1 (continuing)

in the test/admin/dcecp/ts/aud directory.  I took a look at the Makefile
and it is as followed:

    ...
    TRAIL_FILES = trail1 ...
    ...
    ILIST       = ... ${TRAIL_FILES}
    DATAFILES   = ... ${TRAIL_FILES}
    ...

(As far as I can see, there appears to be no indircetion here.)
There are NO trail1 in that directory.  What gives?

[5/24/94 public]
The audit trail files have now been submitted for the AT386, HP800 
and RIOS platforms. I have no way to generate an audit trail for SVR4.

[6/6/94 public]
closed.



CR Number                     : 10734
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rpc
Short Description             : rpc export doesn't work
Reported Date                 : 5/23/94
Found in Baseline             : 1.1b9
Found Date                    : 5/23/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : rpccp.c
Sensitivity                   : public

[5/23/94 public]
Any attempt to export an rpcentry (or group, or profile) returns:

Error: nothing to export

[5/234/94 public]
Fixed and submitted.

[6/2/94 public]
closed.



CR Number                     : 10733
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rpc
Short Description             : rpcentry import should output lists
Reported Date                 : 5/23/94
Found in Baseline             : 1.1b9
Found Date                    : 5/23/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : rpccp.c
Sensitivity                   : public

[5/23/94 public]
dcecp> rpce import /.:/subsys/dce/sec/master -in {8f73de50-768c-11ca-bffc-08001e039431 1.0}
ncacn_ip_tcp 130.105.5.92
ncadg_ip_udp 130.105.5.92

The RPC import family should output it's results in a list format.

[5/234/94 public]
Fixed and submitted.

[6/2/94 public]
closed.



CR Number                     : 10722
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dts
Short Description             : dts mod cores w/o dtsd argument
Reported Date                 : 5/20/94
Found in Baseline             : 1.1b8
Found Date                    : 5/20/94
Severity                      : B
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b10
Affected File(s)              : admin/dcecp/dts_ops.c
Sensitivity                   : public

[5/20/94 public]
dts modify cores when the user does not specify the option dtsd argument.
Code is doing a free() in the wrong place.

[5/23/94 public]
Fixed and submitted.

[6/2/94 public]
closed.



CR Number                     : 10720
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : fix broken -s handling
Reported Date                 : 5/20/94
Found in Baseline             : 1.1b9
Found Date                    : 5/20/94
Severity                      : C
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : admin/dcecp/main.c
Sensitivity                   : public

[5/20/94 public]
Create a command line switch (maybe -s) that tells dcecp to startup
without contacting any DCE servers. This will allow dcecp to start in
an environment without DCE running. This would be very useful for 
dce_config like applications.

[6/28/94 public]
Implemented -s. Submitted. This is an initial fix. Handling of dcecp's command
line is going to be overhauled. 

Currently you cannot give any command to dcecp via the '-c' option that
contains a '-s' in it.

[9/13/94 public]
Just scribbling down an idea for later. Don't use parseargv, and force 
users to specify -s before -c on the command line. All text after -c
on the command line should be treated as a command.

[10/4/94 public]
The -s option got implemented a while ago.  But it had a defect in it.
John has a fix for the defect.  Changed to P0, approved by Maryanne for
hypercritical.

[10/4/94 public]
Submitted.

[10/25/94 public]
closed.



CR Number                     : 10714
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : commands not checking 
attribute parsing error codes correctly.
Reported Date                 : 5/20/94
Found in Baseline             : 1.1
Found Date                    : 5/20/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b10
Affected File(s)              : cdscp.c cdscp_link.c
			                     cdscp_object.c cdscp_utils.c
Sensitivity                   : public

[5/20/94 public]

The commands are not checking the return value of attribute parsing functions
correctly. They should simply check for TCL_OK or TCL_ERROR since
error messages are inserted into the interpreter during the parsing
phase, if necessary.

[kevins 5/23/94 public] 

The parsing routines now return TCL_ERROR and modify the 
primary interpreter to display the error messages.

[6/2/94 public]
closed.



CR Number                     : 10709
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dts
Short Description             : clock show should contact dtsd
Reported Date                 : 5/19/94
Found in Baseline             : 1.1b8
Found Date                    : 5/19/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b10
Affected File(s)              : admin/dcecp/clock.c
Sensitivity                   : public

[5/19/94 public]
clock show currently does a utc_asclocaltime(). It should make an RPC
to dtsd to get it's time. This will allow doing a clock show to a
remote dtsd.

[5/23/94 public]
Changes made, submitted.

[6/2/94 public]
closed.



CR Number                     : 10708
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : tclapi
Short Description             : tet_result "sticks" on bad results
Reported Date                 : 5/19/94
Found in Baseline             : 1.1b8
Found Date                    : 5/19/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : test/tet/src/tcl/tcm.tcl.dat
Sensitivity                   : public

[5/19/94 public]
Once a test in a test case generates a FAIL or UNRESOLVED (may be
any non-PASS value), all other tests in that test case have that
for a result.

[5/23/94 public]
The temporary results file should be zeroed after each test purpose.
It was being reset after each test case. Fixed and submitted.

[6/2/94 public]
closed.



CR Number                     : 10707
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : tcl TET api
Short Description             : Truncated output from
tet_infoline causes tcc to fail, and the results file is not written.
Reported Date                 : 5/19/94
Found in Baseline             : 1.1
Found Date                    : 5/19/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : test/tet/src/tcl/api/tetapi.tcl
Sensitivity                   : public

[5/19/94 public]

root@bronze> tcc -e -j msg system/I18N test
journal file name is: msg
begin_test
First procedure
warning: results file line truncated: prefix: 520|0 1 17451 1 2|

Tcc fatal error reported from source file
/project/dce/build/dce1.1-snap/src/test/tet/src/posix_c/tcc/startit.c line
1108 :
Bad format line in results file: -

[6/22/94 public]
I can't reproduce this. Martha, if this is no longer a problem, please
cancel this CR.

[6/27/94 public]
Unable to reproduce. Cancel.

[7/8/94 public]
Resurrected. I was able to reproduce this today. Fixed. It was an off-by-one
error in the way the API handled output strings that were too long.
Submitting soon.

[8/12/94 public]
closed.



CR Number                     : 10683
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : log
Short Description             : Does not handle 1 string binding specified in TCL syntax.
Reported Date                 : 5/17/94
Found in Baseline             : 1.1
Found Date                    : 5/17/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b15
Affected File(s)              : src/admin/dcecp/log_edit.c,src/admin/dcecp/log_tclif.c,src/admin/dcecp/util_general.h,src/admin/dcecp/util_general.c,src/admin/dcecp/rgy_sa_replist.h,src/admin/dcecp/rgy_sa_replist.c
Sensitivity                   : public

[5/17/94 public]

Note that this affects all "log" commands but the workaround is
specifying as #2.

This is a string binding for dts-entity:

THIS DOES NOT WORK:
#1
dcecp> log list {019ee420-682d-11c9-a607-08002b0dea7a ncacn_ip_tcp 130.105.5.45
1653}

WORKS:
#2
log list [list "019ee420-682d-11c9-a607-08002b0dea7a ncacn_ip_tcp 130.105.5.45 1
653"]


This just shows specifying multiple string bindings in TCL syntax WORKS:
#3
dcecp> log list {{0050d6c4-9fce-1dd7-8cfa-0000c0239a70 ncacn_ip_tcp 130.105.5.45 1639} {0090a5f6-642c-1dad-b1c6-0000c0239a70 ncacn_ip_tcp 130.105.5.45 4416}}

[8/21/94 public]
closed.



CR Number                     : 10675
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : keytab
Short Description             : A number of the dcecp keytab
commands fail in different ways (see long description)
Reported Date                 : 5/17/94
Found in Baseline             : 1.1
Found Date                    : 5/17/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : cleanup
Sensitivity                   : public

[5/17/94 public]



1. Most 'remove' operations segfault the dcecp.  Some fail in other 
   ways....
 
2. The next 'remove' operation fails.  It is a remove od
   a plain key.  The 'remove' does not complain but the key (or at least
   the principal entry in the keytab) does not  seem to be removed

520|0 1 29642 1 1|keytab_remove_13_P: Check to see that we can delete a
plain type key.
520|0 1 29642 1 2|Test Command is:
520|0 1 29642 1 3|{keytab remove ktb2 -member test_princ2 -type plain}
520|0 1 29642 1 4|{Actual Result:}
520|0 1 29642 1 5|{/.../oscar_cell.osf.org/test_princ1
/.../oscar_cell.osf.org/test_princ2 }
520|0 1 29642 1 6|{Expected Result:}
520|0 1 29642 1 7|{/.../oscar_cell.osf.org/test_princ1 }
520|0 1 29642 1 8|Test Failed.
220|0 1 1 18:12:31|FAIL

3. This tests fails when I try to add a 'des' key during setup phase.  This
   same error occurs in the 'keytab add' test for des keys.  The problem is
   the "Requested key unavailable' message.

   {keytab add $KTB2_SHORT_NAME -member $TEST_PRINC2 -random -registry}

520|0 1 29642 1 9|keytab_remove_14_P: Check to see that we can delete a des
type key.
520|0 1 29642 1 10|{Could not add des key for 'remove' test setup!}
520|0 1 29642 1 11|{Actual Result:}
520|0 1 29642 1 12|{Requested key is unavailable}
220|0 1 1 18:12:38|FAIL

4. Show is showing different info than expected.


520|0 1 29042 1 1|keytab_show_6_P: Check to see that we can show keytab
entry only.
520|0 1 29042 1 2|Test Command is:
520|0 1 29042 1 3|{keytab show ktb1 -entry}
520|0 1 29042 1 4|{Actual Result:}
520|0 1 29042 1 5|{Binding: 004fbfe7-7c8d-1dc9-941c-0000c0dc0d4b
rpc_c_ns_syntax_default rpc_c_ns_syntax_dce rpc_ns_syntax_x500}
520|0 1 29042 1 6|{Expected Result:}
520|0 1 29042 1 7|{UUID: 004fbfe7-7c8d-1dc9-941c-0000c0dc0d4b Object Name:
ktb1 Annotation: Keytab_1_Annotation Storage: /tmp/ktb1.ktb}
520|0 1 29042 1 8|Test Failed.
220|0 1 1 18:09:09|FAIL

5. The 'undefined' messages are incorrect.

520|0 1 29042 1 9|keytab_show_7_P: Check to see that we can show keytab
objects attribute only.
520|0 1 29042 1 10|Test Command is:
520|0 1 29042 1 11|{keytab show ktb1 -members}
520|0 1 29042 1 12|{Actual Result:}
520|0 1 29042 1 13|{/.../oscar_cell.osf.org/test_princ1    Undefined key
type has been encountered    Undefined sec_attr value type has been
encountered /.../oscar_cell.osf.org/test_princ2    Undefined key type has
been encountered    Undefined sec_attr value type has been encountered }
520|0 1 29042 1 14|{Expected Result:}
520|0 1 29042 1 15|{/.../oscar_cell.osf.org/test_princ1    plain    0
/.../oscar_cell.osf.org/test_princ2    plain    0 }
520|0 1 29042 1 16|Test Failed.
220|0 1 1 18:09:18|FAIL

6. See items 4 & 5

520|0 1 29042 1 17|keytab_show_8_P: Check to see that we can show keytab
objects.
xo520|0 1 29042 1 18|Test Command is:
520|0 1 29042 1 19|{keytab show ktb1}
520|0 1 29042 1 20|{Actual Result:}
520|0 1 29042 1 21|{Binding: 004fbfe7-7c8d-1dc9-941c-0000c0dc0d4b
rpc_c_ns_syntax_default rpc_c_ns_syntax_dce rpc_ns_syntax_x500
/.../oscar_cell.osf.org/test_princ1    Undefined key type has been
encountered    Undefined sec_attr value type has been encountered
/.../oscar_cell.osf.org/test_princ2    Undefined key type has been
encountered    Undefined sec_attr value type has been encountered }
520|0 1 29042 1 22|{Expected Result:}
520|0 1 29042 1 23|{UUID: 004fbfe7-7c8d-1dc9-941c-0000c0dc0d4b Object Name:
ktb1 Annotation: Keytab_1_Annotation Storage: /tmp/ktb1.ktb
/.../oscar_cell.osf.org/test_princ1    plain    0
/.../oscar_cell.osf.org/test_princ2    plain    0 }
520|0 1 29042 1 24|Test Failed.
220|0 1 1 18:09:26|FAIL

7. See item # 3 about 'des' keys failing.

520|0 1 29353 1 1|keytab_add_14_P: Check to see that we can add random key.
520|0 1 29353 1 2|{Could not add key (Requested key is unavailable)}
520|0 1 29353 1 3|Test Command is:
520|0 1 29353 1 4|{keytab add ktb2 -member cell_admin -random -registry}
520|0 1 29353 1 5|{Actual Result:}
520|0 1 29353 1 6|{/.../oscar_cell.osf.org/test_princ1
/.../oscar_cell.osf.org/test_princ2 }
520|0 1 29353 1 7|{Expected Result:}
520|0 1 29353 1 8|{/.../oscar_cell.osf.org/test_princ1
/.../oscar_cell.osf.org/test_princ2 /.../oscar_cell.osf.org/cell_admin }
520|0 1 29353 1 9|Test Failed.
220|0 1 1 18:10:52|FAIL

[5/18/94 public]
Robert, The latest changes have been submitted, which should fixed
some problems you have had. For add/remove key you need bowe's chages
too, he may check in tomorrow. The output/status codes have been changed
a lot, for which you need to update your tests' expected results. Please
run your test aganist the new code and file OTs for any problems you see 
Thanks. (and please update this OT too)

[5/20/94 public]

Reran tests with newest build and changes for updated command output.  
Problems #4, 5 & 6 above no longer occur.  The rest of the problems
still occur. (remove still fails, and show displays plain keys as 'des'.) 
I will mark this CR as 'fixed' and open up individual CR's for the 
other problems.

[6/2/94 public]
closed.



CR Number                     : 10674
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : aud
Short Description             : audf create should batch guides
Reported Date                 : 5/17/94
Found in Baseline             : 1.1b8
Found Date                    : 5/17/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : admin/dcecp/aud_ops.c
Sensitivity                   : public

[5/17/94 public]
Currently audfilter_create makes 1 RPC per guide to be created. It
should collect all the guides to be created into the guides linked
list and make 1 RPC.

[6/28/94 public]
Fixed and submitted. audfilter create and modify now make 1 RPC
per filter.

[7/5/94 public]
closed.



CR Number                     : 10673
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : tclapi
Short Description             : TET_SP unknown variable
Reported Date                 : 5/17/94
Found in Baseline             : 1.1
Found Date                    : 5/17/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b9
Affected File(s)              : test/tet/src/tcl/api/tetapi.tcl
Sensitivity                   : public

[5/17/94 public]
root@bronze> tcc -e -j messages system/I18N I8NSAN001
journal file name is: messages
can't read "TET_SP": no such variable

This problem is caused by a typo in tetapi.tcl . This section of code 
is only hit in rare cases (ie. I has not been hit until yesterday).

Changing $TET_SP to $tet_sp will fix the problem. dassarma@osf.org is
testing the problem, and this will be submitted when it passes her tests.

Fixing this turned up another syntax error on the same line. Missing a
close bracket. Also fixed. Submitting when the tree opens.

[5/18/94 public]
Submitted.

[5/19/94 public]
closed.



CR Number                     : 10664
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : rgy code should compare cell names
to assure that the same cell registry is not reopened.
Reported Date                 : 5/16/94
Found in Baseline             : 1.1
Found Date                    : 5/16/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : admin/dcecp/rgy_utils.c
Sensitivity                   : public

[5/16/94 public]

dcecp should verify that they are opening the correct cell sec 
registry with dce_cf_same_cell_name() this will help eliminate 
confusion over alias names. This is important when h-cell becomes
prevelant. This is a proposed api so this is a future enhancement.

[kevins 8/8/94 public] 

Implemented this in another fashion. The current registry cache now
contains a field for the cell name that is being operated on. If that 
cell name is the same as the cell that is requested then we can 
eliminate the need to reopen the cell.

[8/12/94 public]
closed.



CR Number                     : 10663
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : registry not chosen properly
Reported Date                 : 5/16/94
Found in Baseline             : 1.1
Found Date                    : 5/16/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : rgy.c rgy_utils.c rgy.h
Sensitivity                   : public

[5/16/94 public]

The correct master registry site is not opened. Currently the only way
to target a resgistry site is by specifying a site in the
_s(sec) convenience variable. If a full pathname is passed to be acted on 
then the cell name should be taken from the path.

[5/17/94 public]

I now chose the registry site from the path that was entered by the user. 
That is if the user enters a principal to be created as
/.:/kevins the default site is the master registry from the local 
cell. 

This was built, tested and will be submitted when the tree opens.

[5/19/94 public]
closed.

[5/19/94 public]

I reopened this. I had inadvertently forgotten to switch it from 
fix back to open. But here is the story. OT 10615 Describes the 
current thinking from HP on this issue. We have to wait for them to 
provide a fix before we can procede. Therefore I have also modified the
fixby and the fixedin fields.

[6/8/94 public]

Back to fix. The code that I needed to switch off because of ot 10615 
has been turned back on.

[8/12/94 public]
closed.



CR Number                     : 10658
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dts
Short Description             : dts stop should do both disable and delete
Reported Date                 : 5/16/94
Found in Baseline             : 1.1
Found Date                    : 5/16/94
Severity                      : B
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : admin/dcecp/dts_ops.c
Sensitivity                   : public

[5/16/94 public]

I think it would be better to disable and delete (in dtscp terms)
the dtsd when dcecp is given the 'dts stop' command.

This would mean that dcecp would have to do disable and delete.
It might also have to get tricky if dts was already disabled.

I think this would be great for admins, since two commands to
make dtsd go away is a pain.

[6/27/94 public]
Ok. dts stop now stops dtsd no matter what the state. Submitted.

[7/5/94 public]
closed.



CR Number                     : 10642
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dts
Short Description             : dcedtssvc.h not exported or 
included properly
Reported Date                 : 5/14/94
Found in Baseline             : 1.1
Found Date                    : 5/14/94
Severity                      : B
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : files in admin/dcecp and time
Sensitivity                   : public

[5/14/94 public]

File time/common/dtss_includes.h contains 

#ifdef DCE_DEBUG
#include <dcedtssvc.h>
#endif 

But, dce/dce.h defines DCE_DEBUG. Therefore, when dcecp includes 
dce/dtss_includes.h it tries to find dcedtssvc.h without the help of 
VPATH. Which breaks the build. 

This file dcedtssvc.h should be exported and the previous noted 
include line should be modified.

[05/16/94 public]
The dceXXXsvc.h file should not be exported unless anyone outside of
DTS needs access to the SVC table for DTS.  I can't think of anyone
who would need this access.

The "right" fix, I believe, is for dcecp to include what files it
wants, and not include dtss_includes.h (which also should not be
exported).

[05/16/94 public]
Agreed.  I'd like to know why dcecp would need anything more than utc.h
and dtss_ctrl.h.  Also, DTS installs utc.h but not dtss_ctrl.{idl,h}, why?

DTS should NOT export dcedtsssvc.h.  There is no reason for the incore
message table to be in anything other than dtsd.

[5/16/94 public]

changes to time were in both time/common/dts.h and time/common/dtss_includes.h

changes to dcecp were in admin/dcecp/Makefile
		admin/dcecp/dts_ops.c
		admin/dcecp/dts_util.c
		admin/dcecp/clock.c
		admin/dcecp/dts_dcp.h
		
and renaming admin's dts.h to dcp_dts.h

N.B. dtss_includes.h will evaporate over time (no pun), with pieces going
to dts.h. The other pieces required for export will eventually be localized
to one or two files.

[5/18/94 public]
closed



CR Number                     : 10636
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : svc
Short Description             : Certain log commands should display appropriate info if unauthenicated.
Reported Date                 : 5/13/94
Found in Baseline             : 1.1
Found Date                    : 5/13/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b9
Affected File(s)              : 
./admin/dcecp/log_edit.h
./admin/dcecp/log_edit.c
./admin/dcecp/log_tclif.c
./test/admin/dcecp/ts/log/log_show_P.tcl
./test/admin/dcecp/ts/log/log_list_P.tcl
./test/admin/dcecp/ts/log/log_modify_N.tcl
Sensitivity                   : public

[5/13/94 public]

"log list" and "log show" apply.

No warning should be displayed, but users can determine if
they are authenticated by reading the $_u convenience
variable.

[5/19/94 public]
closed.



CR Number                     : 10635
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : Certain rgy commands should display appropriate info if unauthenticated.
Reported Date                 : 5/13/94
Found in Baseline             : 1.1
Found Date                    : 5/13/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : rgy_utils.c
Sensitivity                   : public

[5/13/94 public]

For example: rgy_edit "view" doesn't have to be authenticated. 
So for dcecp these commands should not have to be authenticated:
prin cat
group cat
org cat
account cat

Anything "rgy_edit" does "unauthenticated" then the dcecp rgy commands
should too.

Note that "sec_admin" requires authentication for all it's 
operations.  However, should "registry catalog" and/or
"registry show -replica" be able to display info without 
authentication?

No warning should be displayed, but users can determine if
they are authenticated by reading the $_u convenience
variable.

[kevins 5/23/94 public] 

The function that opens the registry was not correctly opening
the site unauthenticated. The function has been modified to 
appropriately open the site.

[6/2/94 public]
closed.



CR Number                     : 10625
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : dir create fails
Reported Date                 : 5/12/94
Found in Baseline             : 1.1
Found Date                    : 5/12/94
Severity                      : B
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b9
Affected File(s)              : cdscp.c
Sensitivity                   : public

[5/12/94 public]
dir create /.:/foobar fails, though it works in cdscp on (HP and 486 at
least) 

absolut ts/rpc$ /bin/dcecp
dcecp> lca
Password must be changed!
dcecp> dir cre /.:/foobar
Error: Invalid name
dcecp> cdscp
cdscp> cre dir /.:/foobar
cdscp> sho dir /.:/foobar

                        SHOW
                   DIRECTORY   /.../absolut_cell/foobar
                          AT   1994-05-12-14:04:30
            RPC_ClassVersion = 0100
                     CDS_CTS =
1994-05-12-18:04:13.209027100/08-00-09-25-13-52
                     CDS_UTS =
1994-05-12-18:04:17.102023100/08-00-09-25-13-52
              CDS_ObjectUUID = 8f7a850c-6db4-11cd-8627-080009251352
                CDS_Replicas = :
          Clearinghouse UUID = d0222420-6850-11cd-9944-080009251352
                       Tower = ncacn_ip_tcp:130.105.5.93[]
                       Tower = ncadg_ip_udp:130.105.5.93[]
                Replica type = master
          Clearinghouse Name = /.../absolut_cell/absolut_ch
                 CDS_AllUpTo =
1994-05-12-18:04:17.180897100/08-00-09-25-13-52
             CDS_Convergence = medium
           CDS_ParentPointer = :
               Parent's UUID = d24546ce-6850-11cd-9944-080009251352
                     Timeout = :
                  Expiration = 1994-05-12-14:04:13.253
                   Extension = +1-00:00:00.000I0.000
                      MyName = /.../absolut_cell/foobar
        CDS_DirectoryVersion = 3.0
            CDS_ReplicaState = on
             CDS_ReplicaType = master
               CDS_LastSkulk =
1994-05-12-18:04:17.180897100/08-00-09-25-13-52
              CDS_LastUpdate =
1994-05-12-18:04:17.102023100/08-00-09-25-13-52
             CDS_RingPointer = d0222420-6850-11cd-9944-080009251352
                   CDS_Epoch = 910c5c06-6db4-11cd-8627-080009251352
          CDS_ReplicaVersion = 3.0
cdscp> exit
dcecp> dir show /.:/foobar
{RPC_ClassVersion 0100}
{CDS_CTS 1735-07-12-01:04:58.695-05:00I0.000/08-00-09-25-13-52}
{CDS_UTS 1735-07-12-01:05:02.588-05:00I0.000/08-00-09-25-13-52}
{CDS_ObjectUUID 8f7a850c-6db4-11cd-8627-080009251352}
{CDS_Replicas
 {{Clearinghouse_Uuid d0222420-6850-11cd-9944-080009251352}
  {Clearinghouse_Name /.../absolut_cell/absolut_ch}
  {Replica_Type Master}  
  {Tower ncacn_ip_tcp:130.105.5.93[]}
  {Tower ncadg_ip_udp:130.105.5.93[]}}}
{CDS_AllUpTo 1735-07-12-01:05:02.667-05:00I0.000/08-00-09-25-13-52}
{CDS_Convergence medium}
{CDS_ParentPointer
 {{Parent_UUID d24546ce-6850-11cd-9944-080009251352}
  {Timeout
   {expiration 1994-05-12-14:04:13.253}
   {extension +1-00:00:00.000I0.000}}
  {myname /.../absolut_cell/foobar}}}
{CDS_DirectoryVersion 3.0}
{CDS_ReplicaState on}
{CDS_ReplicaType Master}
{CDS_LastSkulk 1735-07-12-01:05:02.667-05:00I0.000/08-00-09-25-13-52}
{CDS_LastUpdate 1735-07-12-01:05:02.588-05:00I0.000/08-00-09-25-13-52}
{CDS_RingPointer d0222420-6850-11cd-9944-080009251352}
{CDS_Epoch 910c5c06-6db4-11cd-8627-080009251352}
{CDS_ReplicaVersion 3.0}
dcecp>

[5/12/94 public]
I did a little investigation on this (since I kind of need dir create
to work in order to proceed in doing functional tests of dir merge),
and I strongly suspect the problem is related to the following, added
to admin/dcecp/cdscp.c in Rev. 1.1.5.15:

>     if(!clearinghouse){
>         clearinghouse = DCP_GENERAL_GET_S_VAR(CLR_NAME);
>     }

gdb reveals that the result of this call is that "clearinghouse"
ceases to be a null pointer, and becomes a pointer to an empty string.
This gets passed to cdsCreateDir (line 374), which apparently doesn't
like it.

I don't know whether the correct solution is the make the macro return
a null pointer if Tcl_GetVar returns an empty string, or to make cdscp
check for an empty string. The latter is easier, so I'm going to try
it in my sandbox and see if it makes the problem go away.

[5/12/94 public]

The initialization of the _s(cds) convenience variable caused an 
illegal clearinghouse to be generated when no clearinghouse was set.
I currently check for a zero length clearinghouse name and set 
it to NULL in the api.

[5/18/94 public]
closed



CR Number                     : 10621
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : acl
Short Description             : "acl show /.:/xxx" does not work if unauthenticated
Reported Date                 : 5/12/94
Found in Baseline             : 1.1b8
Found Date                    : 5/12/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b9
Affected File(s)              : 
./admin/dcecp/acl_edit.h
./admin/dcecp/acl_edit.c
./admin/dcecp/acl_tclif.c
./test/admin/dcecp/ts/acl/acl_show_P.tcl
./test/admin/dcecp/ts/acl/acl_check_P.tcl
./test/admin/dcecp/ts/acl/acl_permissions_P.tcl
./test/admin/dcecp/ts/acl/acl_modify_N.tcl
./test/admin/dcecp/ts/acl/acl_replace_N.tcl
./test/admin/dcecp/ts/acl/acl_delete_N.tcl
Sensitivity                   : public

[5/12/94 public]

If you are unauthenticated (not dce_login'ed), you can never see an ACL:

    232 acme. dcecp
    dcecp> acl sho  /.:/hosts
    Error: unable to authenticate on acl operation
    dcecp> 

acl_edit, does the right thing (and gives you a warning about being
unauthenticated):

    233 acme. acl_edit /.:/hosts
    Warning - binding to ACL's server is unauthenticated
    Warning - binding to registry is unauthenticated
    sec_acl_edit> list

    # SEC_ACL for /.:/hosts:
    # Default cell = /.../bigred
    unauthenticated:r--t---
    user:cell_admin:rwdtcia
    user:hosts/oxygen/cds-server:rwdtcia
    user:hosts/oxygen/self:rwdtcia
    group:subsys/dce/cds-admin:rwdtcia
    group:subsys/dce/cds-server:rwdtcia
    any_other:r--t---
    sec_acl_edit>

[5/13/94 public]

dcecp "acl show", "acl check", and "acl permissions" should
display the appropriate information if unauthenticated.
No warning will be displayed, but users can determine if
they are authenticated by reading the $_u convenience
variable.

[5/19/94 public]
closed.



CR Number                     : 10618
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : Attribute type byte not 
checked properly.
Reported Date                 : 5/12/94
Found in Baseline             : 1.1
Found Date                    : 5/12/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : cdscp_utils.c
Sensitivity                   : public

[5/12/94 public]

When entering an attribute of type byte the input is not checked 
properly. In reality the onlyu input that should be accepted is
of hexadecimal type.

[5/23/94 public]

The byte attribute type is now rejected if the entered ascii value is not
a hexidecimal value. The output format has also been updated. 

{CDS_Byte 
 {ab 10 01 02 30 49 04 06 cb 0d 0f 0e dd
 ab 94 03 02 04}}

[6/2/94 public]
Almost.  The numbers should line up:

{CDS_Byte 
 {ab 10 01 02 30 49 04 06 cb 0d 0f 0e dd
  ab 94 03 02 04}}

[6/10/94 public]
They now line up correctly.

[6/13/94 public]
closed



CR Number                     : 10617
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : tests
Short Description             : Messages used for test 
purposes do not match dcp.sams
Reported Date                 : 5/12/94
Found in Baseline             : 1.1
Found Date                    : 5/12/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : 
 directory_remove_N.tcl       directory_remove_P.tcl
 clearinghouse_create_N.tcl   directory_show_N.tcl
 clearinghouse_create_P.tcl   directory_show_P.tcl
 clearinghouse_delete_N.tcl   directory_synchronize_N.tcl
 clearinghouse_delete_P.tcl   directory_synchronize_P.tcl
 clearinghouse_disable_N.tcl  link_create_N.tcl
 clearinghouse_disable_P.tcl  link_create_P.tcl
 clearinghouse_show_N.tcl     link_delete_N.tcl
 clearinghouse_show_P.tcl     link_delete_P.tcl
 directory_add_N.tcl          link_modify_N.tcl
 directory_add_P.tcl          link_modify_P.tcl
 directory_create_N.tcl       link_show_N.tcl
 directory_create_P.tcl       link_show_P.tcl
 directory_delete_N.tcl       object_create_N.tcl
 directory_delete_P.tcl       object_create_P.tcl
 directory_list_N.tcl         object_delete_N.tcl
 directory_list_P.tcl         object_delete_P.tcl
 directory_merge_N.tcl        object_modify_N.tcl
 directory_merge_P.tcl        object_modify_P.tcl
 directory_modify_N.tcl       object_show_N.tcl
 directory_modify_P.tcl       object_show_P.tcl
 group_add_N.tcl             organization_delete_N.tcl
 group_add_P.tcl             organization_delete_P.tcl
 group_catalog_N.tcl         organization_list_N.tcl
 group_catalog_P.tcl         organization_list_P.tcl
 group_create_N.tcl          organization_modify_N.tcl
 group_create_P.tcl          organization_modify_P.tcl
 group_create_era_N.tcl      organization_remove_N.tcl
 group_create_era_P.tcl      organization_remove_P.tcl
 group_delete_N.tcl          organization_rename_N.tcl
 group_delete_P.tcl          organization_rename_P.tcl
 group_list_N.tcl            organization_show_N.tcl
 group_list_P.tcl            organization_show_P.tcl
 group_modify_N.tcl          principal_catalog_N.tcl
 group_modify_P.tcl          principal_catalog_P.tcl
 group_modify_era_N.tcl      principal_create_N.tcl
 group_modify_era_P.tcl      principal_create_P.tcl
 group_remove_N.tcl          principal_create_era_N.tcl
 group_remove_P.tcl          principal_create_era_P.tcl
 group_rename_N.tcl          principal_delete_N.tcl
 group_rename_P.tcl          principal_delete_P.tcl
 group_show_N.tcl            principal_modify_N.tcl
 group_show_P.tcl            principal_modify_P.tcl
 group_show_era_N.tcl        principal_modify_era_N.tcl
 group_show_era_P.tcl        principal_modify_era_P.tcl
 organization_add_N.tcl      principal_rename_N.tcl
 organization_add_P.tcl      principal_rename_P.tcl
 organization_catalog_N.tcl  principal_show_N.tcl
 organization_catalog_P.tcl  principal_show_P.tcl
 organization_create_N.tcl   principal_show_era_N.tcl
 organization_create_P.tcl   principal_show_era_P.tcl
Sensitivity                   : public

[5/12/94 public]


The tests were generated prior to the initial review of dcp.sams.
As a result several of the negative test error messages have changed
and the tests no longer match the actual error messages.

[8/11/94 public]
This defect has become more important now since we want to be easily able
to run all the tests.

[9/6/94 public]

Modified all of the tests. They are now more than done.

[9/26/94 public]
closed.



CR Number                     : 10616
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rpcentry
Short Description             : missing arg to dce_sprintf
Reported Date                 : 5/11/94
Found in Baseline             : 1.1b8
Found Date                    : 5/11/94
Severity                      : E
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b9
Affected File(s)              : src/admin/dcecp/rpccp.c
Sensitivity                   : public

[5/11/94 public]
dce_sprintf() calls for dcp_s_rpc_bad_version_opt were missing an argument
for the %s in the message (the version entered).

[5/11/94 public]
            Tcl_SetResult(interp,
                          (char *)dce_sprintf(dcp_s_rpc_bad_version_opt,
                                              version_string),
                          TCL_DYNAMIC); 

added in import(), unexport(), and rpcprofile_show().

[5/18/94 public]
closed



CR Number                     : 10612
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : rgy.h defines macros already defined in dce/macros.h.
Reported Date                 : 5/11/94
Found in Baseline             : 1.1
Found Date                    : 5/11/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b9
Affected File(s)              : rgy.c rgy_utils.c rgy.h
Sensitivity                   : public

[5/11/94 public]

These macros are defined in dce/macros.h:
#define STATUS_OK(stp)            ((stp)==NULL || (*stp) == error_status_ok)
#define GOOD_STATUS(stp)          ((stp)==NULL || (*stp) == error_status_ok)
#define BAD_STATUS(stp)           ((*stp) != error_status_ok)
#define SET_STATUS(stp, val)      (*stp) = val
#define CLEAR_STATUS(stp)         (*stp) = error_status_ok
#define STATUS_EQUAL(stp, st_val) ((*stp) == (st_val))
#define STATUS(stp)               (*stp)
#define STATUS_V(st)              (st)
#define COPY_STATUS(stp1, stp2)   (*stp2) = (*stp1)

These macros are re-defined in rgy.h:
#define BAD_STATUS(stp)               (stp != error_status_ok)
#define SET_STATUS(stp,new_status)    stp = new_status
#define STATUS_EQUAL(status1,status2) (status1 == status2)
#define GOOD_STATUS(status)           (status == error_status_ok)

Note that the macros in dce/macros.h expect the address of "status"
but the macros in rgy.h expect the value of "status". This is causing 
conflicts for the "sec_admin" support to dcecp.

I'd like to submit some initial "sec_admin" support for BL-9 if possible.

[kevins 5/12/94 public] 

I removed the offending macro definitions.

[5/18/94 public]
closed



CR Number                     : 10601
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : Makefiles
Short Description             : Bad use of SCRIPTS in Makefiles
Reported Date                 : 5/10/94
Found in Baseline             : 1.1b8
Found Date                    : 5/10/94
Severity                      : D
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b9
Affected File(s)              : test/admin/dcecp/<all-Makefiles>
Sensitivity                   : public

[5/10/94 public]
RFC 34.2 Appendix I:

  (v) `SCRIPTS'

      This variable defines a list of shell scripts that get
      built.  If this variable is defined then rules for files
      ending in `.csh' and `.sh' are created by including the
      common makefile `osf.script.mk'.

      [... text deleted ...]

      Use this variable only if scripts need some processing
      before being installed.  If the script in the `src' tree
      is what should be installed on a system, then use the
      `ILIST', _et al_ variables described below and not the
      `SCRIPTS' variable.  Do _not_ use `SCRIPTS' as a
      convenient name for a variable and then include it in
      some other variable list such as `DATEFILES' or `ILIST';
      only use it for its intended purpose.

SCRIPTS is used incorrectly in the following Makefiles:

  src/test/admin/dcecp/ts/acl
  src/test/admin/dcecp/ts/aud
  src/test/admin/dcecp/ts/cds
  src/test/admin/dcecp/ts/dts
  src/test/admin/dcecp/ts/log
  src/test/admin/dcecp/ts/rgy
  src/test/admin/dcecp/ts/secval

All should be changed.

[5/11/94 public]
  src/test/admin/dcecp/ts/cds
  src/test/admin/dcecp/ts/rgy

Do not fall into this catagory. Both use TCL_CODE to define a list of
files that need to be processed. I then use TCL_CODE in the IDIR and
DATAFILES.

[5/11/94 public]
All Makefiles were changed to user <comp>_FILES. The installation path has
been changed from /test/admin/dcecp/... to /test/tet/functional/admin/dcecp/...
as requested by QA. Submitted.

[5/18/94 public]
closed



CR Number                     : 10600
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : parseargv.c
Short Description             : Better error messages in parseargv
Reported Date                 : 5/10/94
Found in Baseline             : 1.1b8
Found Date                    : 5/10/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : parseargv.c
Sensitivity                   : public

[5/10/94 public]
parseargv should generate some better error messages when it can.  For
example, -max is a DCP_ARGV_INT:

  dcecp> rpce import /.:/subsys/dce/sec/master -max     
  Error: The '-max' option requires more arguments.

It should say: The '-max' option requires an integer value.

The code is:
    case DCP_ARGV_INT:
	if (argc == 0) {
	    goto missingArg;
	} else {
	    char *endPtr;

	    *((int *) infoPtr->dst) =
		    strtol(argv[srcIndex], &endPtr, 0);
	    if ((endPtr == argv[srcIndex]) || (*endPtr != 0)) {
		Tcl_SetResult(interp, 
                              (char *)dce_sprintf(dcp_s_expected_int_arg, 
                                                  infoPtr->key, 
                                                  argv[srcIndex]), 
                              TCL_DYNAMIC);
		return TCL_ERROR;
	    }
	    srcIndex++;
	    argc--;
	}
	break;

The "goto missingArg" could be a Tcl_SetResult and return TCL_ERROR.  Not
sure if this also applies to other case's.

[5/19/94 public]
parseargv.c needs some code cleanup too. This CR will be a catch-all for
the following problems:

4 compiler warnings
2 error cases that return TCL_ERROR w/o returning a message
dcp_ParseArgv() does not handle empty string arguments correctly.

[8/9/94 public]
This was fixed and submitted last week.

[8/11/94 public]
tested and worked, so closed.



CR Number                     : 10595
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : _s variable set incorrectly, use
macros.
Reported Date                 : 5/10/94
Found in Baseline             : 1.1
Found Date                    : 5/10/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b9
Affected File(s)              : rgy.c rgy_utils.c rgy.h
Sensitivity                   : public

[5/10/94 public]

Use DCP_GENERAL_SET_S_VAR("sec", new_value) and DCP_GENERAL_UNSET_S_VAR("sec")
macros to set and unset DCP_C_GENERAL_SERVER_NAME, respectively.

When obtaining the value for DCP_C_GENERAL_SERVER_NAME, use 
DCP_GENERAL_GET_S_VAR("sec").

[5/11/94 public]

Modified the current method. I now use the convenience macros 
supplied in dcecp.h for the S variable array.

[5/12/94 public]
closed



CR Number                     : 10583
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : conv. var
Short Description             : can not set _s(x)
Reported Date                 : 5/9/94
Found in Baseline             : 1.1b8
Found Date                    : 5/9/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b9
Affected File(s)              : dcecp.h util_var.c
Sensitivity                   : public

[5/9/94 public]
The _s(component) convienece variable can't be set or unset. Trying
any operation returns "variable is not array".

[5/10/94 public]
Fixed and submitted by John on 5/9

   #define DCP_GENERAL_SET_S_VAR(index, element)                          Tcl_SetVar2(interp, DCP_C_GENERAL_SERVER_NAME, (char *)(index), (char *)(element), TCL_GLOBAL_ONLY|TCL_LEAVE_ERR_MSG);

[5/11/94 public]
closed



CR Number                     : 10558
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : tetapi
Short Description             : tcl api installed in wrong place
Reported Date                 : 5/6/94
Found in Baseline             : 1.1b7
Found Date                    : 5/6/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b9
Affected File(s)              : test/tet/src/tcl/api/{Makefile,tcm.tcl.dat}
Sensitivity                   : public

[5/6/94 public]
The Tcl TET API is installed in the wrong place. 

It is in:
test/lib/tcl

It should be in:
test/tet/lib/tcl

All dcecp function tests need to be changed, including one of the API files.

[5/6/94 public]
The API has been updated. Passing the CR to Howard so he can update all 
the tests.

[5/17/94 public]
Actually done on 5/6/94.  Submitted then too.  Closing bug.



CR Number                     : 10555
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : attribute init cores with 
blank linds in cds_attributes file.
Reported Date                 : 5/6/94
Found in Baseline             : 1.1
Found Date                    : 5/6/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b9
Affected File(s)              : cdscp_utils.c
Sensitivity                   : public

[5/6/94 public]

Attribute initialization cores dcecp when the file cds_attributes 
has a blank line at the end.

[5/11/94 public]

The initialization routine now verifies that the line read has contents.
Previously it was just operating on the line assuming a valid line.

[5/12/94 public]
closed



CR Number                     : 10554
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dhd
Short Description             : Bad sams message prevents compilation
Reported Date                 : 5/6/94
Found in Baseline             : 1.1
Found Date                    : 5/6/94
Severity                      : B
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dhd_hostdata.c dhd_keytab.c dhd_server.c
Sensitivity                   : public

[5/6/94 public]

The files:
 dhd_hostdata.c   dhd_keytab.c     dhd_server.c 

contain a bad sams message identifier. (dced_s_no_more_entry)
This prevents compilation.

[05/06/94 public]
The latest dhd.sams cleanup has changed dced_s_no_more_entry to
dced_s_no_more_entries. I forgot to update the dcecp code. So
fix is to change dced_s_no_more_entry to dced_s_no_more_entries
in dcecp/dhd_*.c

[5/9/94 public]
closed.



CR Number                     : 10541
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : dir add/remove don't accept
TCL lists as arguments.
Reported Date                 : 5/5/94
Found in Baseline             : 1.1
Found Date                    : 5/5/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : cdscp.c
Sensitivity                   : public

[5/5/94 public]

The dir add and the dir remove commands don't accept tcl 
lists for arguments. This syntax should work:

dir remove {/.:/hosts /.:/test} -member {one two}

But it currently does not. Both commands need to be 
modified to accept this syntax.

[kevins 7/18/94 public] 
fixed and submitted.

[8/12/94 public]
closed.



CR Number                     : 10540
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : Some pgo attributes don't
display time in ISO format.
Reported Date                 : 5/5/94
Found in Baseline             : 1.1
Found Date                    : 5/5/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b9
Affected File(s)              : rgy.c rgy_utils.c
Sensitivity                   : public

[5/5/94 public]

Several of the pgo attribute values are displayed in number of 
hours/number of days format. They should be displayed in 
ISO format. For instance:

{acctlife 20 days}

should be:

{acctlife  +20-00:00:00.000I-----}

[kevins 5/12/94 public] 

I modified the input and output routines for acctlife, pwdlife
and pwdexpdate of  organization policy. They all now take UTC input
and provide a UTC string date on output.

[5/18/94 public]
closed



CR Number                     : 10537
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : All commands must set and unset the $_o convenience variable.
Reported Date                 : 5/4/94
Found in Baseline             : 1.1
Found Date                    : 5/4/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b9
Affected File(s)              : ./admin/dcecp/commands.c
Sensitivity                   : public

[5/4/94 public]

For every dcecp command in the dcecp_cmd_table_t table[], set and unset
$_o accordingly.

[5/9/94 public]
closed.



CR Number                     : 10520
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : audit
Short Description             : aud storage strategy returned from server
Reported Date                 : 5/4/94
Found in Baseline             : 1.1b8
Found Date                    : 5/4/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : admin/dcecp/aud_ops.c
Sensitivity                   : public

[5/4/94 public]
After running a command (in either auditcp or dcecp) to enable an
already enabled auditd, any subsequent calls to
audit_control_show_sstrategy() returns a '0' value for the storage
strategy. '0' is not a valid storage strategy value.

auditcp> aud show
Attribute Types: state (0), stostrategy (1)
Enter a number: 1
Unknown stostrategy
command excution failed

dcecp> aud sh
Error: An invalid storage strategy was returned from the server.

[6/21/94 public]
when calling aud modify state, dcecp internally was calling modify strategy.

[6/21/94 public]
Fixed calling of wrong rpc. I can't fathom how this ever worked in the 
first place. Submitted.

[6/22/94 public]
closed.



CR Number                     : 10509
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : tclapi
Short Description             : Can not run tests standalone
Reported Date                 : 5/3/94
Found in Baseline             : 1.1b8
Found Date                    : 5/3/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b9
Affected File(s)              : src/test/tet/src/tcl/api/tcm.tcl.dat
Sensitivity                   : public

[5/3/94 public]
The dcecp test suite scripts can not be run standalone (by just running the
script). This is because the variable VERBOSE is undefined in the 'test'
procedure. The reason for this is currently unknown.

[5/4/94 public]
The problem was that running standalone, the TET_CONFIG file was undefined
(tcc defines this for you). The API was not alerting the user to this
problem.

[5/11/94 public]
closed



CR Number                     : 10506
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : tcl
Short Description             : tet_startup/cleanup doesn't work pr
operly
Reported Date                 : 5/2/94
Found in Baseline             : 1.1
Found Date                    : 5/2/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b9
Affected File(s)              : test/tet/src/tcl/api/{tcm.tcl.dat,tetapi.tcl}
Sensitivity                   : public

[5/2/94 public]
The tet_startup (and tet_cleanup) doesn't work properly in the test 
tcl scripts.

[5/2/94 public]
I've got a handle on the problem. As soon as I finish testing it, I'll
submit it.

[5/3/94 public]
The startup function was uncommented out, and a syntax error was fixed in
the cleanup function. Submitted.

[5/5/94 public]
closed.



CR Number                     : 10500
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : Unnecessary include files
exist in sources
Reported Date                 : 5/2/94
Found in Baseline             : 1.1
Found Date                    : 5/2/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b9
Affected File(s)              : cdscp.c cdscp_utils.c 
                                             cdscp_clearinghouse.c
	                                     cdscp_object.c
	                                     cdscp_link.c 
                                             cdscp_cache.c
Sensitivity                   : public

[5/2/94 public]

There are a variety of unnecessay include files in dcecp/cds source 
files. Several of the files are no longer necessary. They should be remove
to reduce inter-component dependencies.

[kevins 5/3/94 public] 

Several of the, no longer necessary, include files have been removed. This 
will help to reduce inter-component dependencies. As the cds clean-up
continues more include files may be eliminated.

[5/5/94 public]
closed.



CR Number                     : 10499
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : modify switches do not work 
as specified.
Reported Date                 : 5/2/94
Found in Baseline             : 1.1
Found Date                    : 5/2/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b9
Affected File(s)              : cdscp.c
                                             cdscp_object.c
                                             cdscp_link.c
                                             cdscp_utils.c
Sensitivity                   : public

[5/2/94 public]


The modify switches -add, -change, and -remove do not perform as they 
should.

1.) -add switch should allow a user to add multiple values to an
	 attribute of cdsSet attribute type.
           -add {RPC_ClassVersion 0200 0100 0300}

2.) -change This switch should first remove the attribute and then
	    replace it with the value(s) provided.

3.) -remove This should be able to remove both an attribute type and 
	    an attribute value, from a multi valued attribute. 
	     -remove {RPC_ClassVersion 0200}
	                   to remove an attribute value
	     -remove RPC_CLassVersion -types 
                           to remove an attribute type.

Attribute modification switches should be cumulative that is a user should
be able to enter:

object modify /.:/foo -add {RPC_ClassVersion 0200 0100 0300} -change \
                       {CDS_Class 0200} -remove {RPC_Group abcabc}

And it should do the right thing, in the order that it was entered.

[5/3/94 public]

The modify option have been brought into conformance with the functional 
spec. Two new switches have been added to the directory and object modify 
commands. 

1.) -single specifies that, if possible, the attribute being added should
            be added as a cdsSingle type attribute. This is only applicable
            and allowed with the -add switch. 

2.) -types  specifies that, if possible, the attribute(s) provided in the
            list for a -remove should be eliminated from the object/dir.

[5/5/94 public]
closed.



CR Number                     : 10466
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : sec
Short Description             : order of group arg_table
Reported Date                 : 4/27/94
Found in Baseline             : 1.1b7
Found Date                    : 4/27/94
Severity                      : E
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b9
Affected File(s)              : commands.c
Sensitivity                   : public

[4/27/94 public]
The group operations command returns:

   add catalog create delete list modify rename remove show help operations

 "rename" should not be listed before "remove" (It's not alphabetic order).

[kevins 5/3/94 public] 

Reordered the arg table to list remove prior to rename. Current group
operations command returns:

   add catalog create delete list modify remove rename show help operations

[5/5/94 public]
closed.



CR Number                     : 10464
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : The printout of ERA stuff on server object need to be updated
Reported Date                 : 4/26/94
Found in Baseline             : 1.1
Found Date                    : 4/26/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dhd_util.c dhd_server.c dhd_hostdat.c
Sensitivity                   : public

[4/26/94 public]
The printout of ERA stuff on server object need to be updated to 
ensure the same format as the schema object after the schema
implementation is checked in.

[6/22/94 public]
Called print_attrs and get_attr_values() in rgy_utils.c to
print the server/hostdata ERA attributes and transfer Tcl 
attribute list into sec_attr structure.

[7/5/94 public]
closed.



CR Number                     : 10460
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : log
Short Description             : When "where" field is not required, user should indicate a dash.
Reported Date                 : 4/26/94
Found in Baseline             : 1.1
Found Date                    : 4/26/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : src/admin/dcecp/log_edit.c
Sensitivity                   : public

[4/26/94 public]

Try this:
dcecp> log mod /.:/hosts/ice/dts-entity -ch dts:general.1:DISCARD::private-data
dcecp> log sh $_n -d
{dts {general 1} DISCARD private-data}

Should be specified:
dcecp> log mod /.:/hosts/ice/dts-entity -ch dts:general.1:DISCARD:-:private-data
dcecp> log sh $_n -d
{dts {general 1} DISCARD - private-data}

[04/26/94 public]
Err, maybe.  At any rate this is a dcecp UI issue, not an SVC issue.

[04/29/94 public]

If users don't have to indicate a dash for an unnecessary "where" field,
then this is a  dcecp "log show" problem.
Use the following FVT tests to verify fix:
log_show_016_P
log_show_017_P

[08/18/94 public]

FVT's now pass:
log_show_016_P
log_show_017_P

dcecp> log mod /.:/hosts/ice/dts-entity -ch dts:general.1:DISCARD::private-data
dcecp> log sh $_n -d
{dts {general 1} DISCARD {} private-data}

[8/21/94 public]
closed.



CR Number                     : 10434
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dts
Short Description             : new dts changes cause dcecp not to build
Reported Date                 : 4/21/94
Found in Baseline             : 1.1b7
Found Date                    : 4/21/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b9
Affected File(s)              : admin/dcecp/dts.h,dts_util.c,dts_ops.c
Sensitivity                   : public

[4/21/94 public]
I'll jump the gun and open a build CR before the RATS do.

The new DTS changes made by Chralie Brooks broke dcecp (as expected). Not
enough time to get the changes in and tested before the NB cutoff. 

dcecp needs to update the control interface version number, and fix 
all the RPC's to match the new interface.

[4/22/94 public]
Submitted changes to make dcecp build. More changes to follow.

[5/9/94 public]
Completed changes to use new interface. Made changes so the user can
specify a server to contact either through commands line arguments or by
the _s(dts) variable.

[5/11/94 public]
closed



CR Number                     : 10414
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : inconsistent error messages
Reported Date                 : 4/20/94
Found in Baseline             : 1.1
Found Date                    : 4/20/94
Severity                      : E
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b9
Affected File(s)              : cdscp.c cdscp_link.c
Sensitivity                   : public

[4/20/94 public]
directory remove
directory synchronize
link create

The above three commands need to have their argument checking fixed. 

dcecp> dir op
add create delete list modify remove show synchronize help operations
dcecp> dir add
Error: No directory name.
dcecp> dir cre
Error: No directory name.
dcecp> dir del
Error: No directory name.
dcecp> dir list
Error: No directory name.
dcecp> dir mod
Error: No directory name.
dcecp> dir remo
Error: Member name not specified.
dcecp> dir sho
Error: No directory name.
dcecp> dir syn
Error: No currently established network identity for which context exists.
dcecp>      

dcecp> link op
create delete modify show help operations
dcecp> link cre
Error: Linkto value not specified.
dcecp> link del 
Error: Link name not specified.
dcecp> link m     
Error: Link name not specified.
dcecp> link s
Error: Link name not specified.

[5/3/94 public]
Modified error checking to be consistent. Currently the object name is
checked prior to all other potential arguments.

[5/5/94 public]
closed.



CR Number                     : 10408
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : dcecp displays multi-valued
attributes incorrectly.
Reported Date                 : 4/20/94
Found in Baseline             : 1.1
Found Date                    : 4/20/94
Severity                      : C
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b9
Affected File(s)              : cdscp_utils.c
Sensitivity                   : public

[4/20/94 public]

dcecp displays  multi-valued attributes incorrectly. 
Multiple valued attributes should be displayed:

{attribute value1
           value2
           value3}
But they are currently displayed:

{attribute value1}
{attribute value2}
{attribute value3}

[kevins 5/3/94 public] 
Modified the displaying routines so that I know whether or not the 
attribute is cdsSet and if so I know how many lines each value should 
occupy and how many values are present. Multi-valued attributes are 
now displayed correctly.

[5/5/94 public]
closed.



CR Number                     : 10407
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : Attribute types are not set
or used.
Reported Date                 : 4/20/94
Found in Baseline             : 1.1
Found Date                    : 4/20/94
Severity                      : C
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b9
Affected File(s)              : cdscp_utils.c 
					     cdscp.c
					     cdscp_object.c
                                             cdscp_link.c
Sensitivity                   : public

[4/20/94 public]

dcecp does not use or set the cdsAttrType on cds attributes. That 
is, if a user is modifying/removing/adding an attribute the cdspi needs to 
know whether the attribute is cdsSet or cdsSingle.

[5/3/94 public]

The attribute types are now set accordingly. During dcecp initialization
the known attributes are assigned the appropriate types. They are know
because of the CDS AES. During a modification or creation the attribute 
types are set properly on the cdspi. There is also, now, the ability to
request an attribute type be set. A new switch is added to create and 
modify commands "-single" If this switch is set then the attribute that is 
being added is attempted to be set to type cdsSingle. So...
1.) Attributes that are defined by the AES have predetermined attribute
     types.  (cdsSet/cdsSingle)
2.) unknown attributes are assumed to be of type cdsSet.
3.) the user can force the addition of an arbitrary attribute to be of type
     cdsSingle.

[5/5/94 public]
closed.



CR Number                     : 10406
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : dcecp does not encode/decode 
attributes primarily by syntax
Reported Date                 : 4/20/94
Found in Baseline             : 1.1
Found Date                    : 4/20/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b8
Affected File(s)              : cdscp_utils.c
                                             main.c
Sensitivity                   : public

[4/20/94 public]

dcecp does not read the dcelocal/etc/cds_attributes file to ascertain 
the attribute syntax. The dcecp should read this file and use the 
syntax specified to encode/decode attribute values.

[4/20/94 public]

dcecp now uses the dcelocal/etc/cds_attributes file to determine
attribute syntax for encoding and decoding attribute values. There are
certain attributes such as CDS_Convergence which cannot be encoded or 
decoded via the syntax so special cases are made for these attributes.

[5/5/94 public]
closed.



CR Number                     : 10394
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : aud
Short Description             : Need better error messages for list problems.
Reported Date                 : 4/19/94
Found in Baseline             : 1.1b7
Found Date                    : 4/19/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b9
Affected File(s)              : admin/dcecp/aud_ops.c,dcp.sams
Sensitivity                   : public

[4/19/94 public]
The messages:
The list contains too many elements.
The list contains too few elements.

need to be expanded to include the list in error. This is for commands like
audfilter create and audfilter modify which take two lists as input.

[5/9/94 public]
The new messages now quote the offending list. Submitted.

[5/11/94 public]
closed



CR Number                     : 10393
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : aud
Short Description             : core dump in dcp_aud_check_multi_guides()
Reported Date                 : 4/19/94
Found in Baseline             : 1.1b7
Found Date                    : 4/19/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b9
Affected File(s)              : admin/dcecp/aud_util.c
Sensitivity                   : public

[4/19/94 public]
There are currently three known problems in ...check_multi_guides().
One is a typo in an array index. Second is not handling the case where
the action is invalid. The third is that the second SplitList is spltting
the wrong string.

[5/9/94 public]
Fixed above problems. Submitted.

[5/11/94 public]
closed



CR Number                     : 10392
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp core dumps
Reported Date                 : 4/18/94
Found in Baseline             : 1.1
Found Date                    : 4/18/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b10
Affected File(s)              : src/admin/dcecp/main.c
Sensitivity                   : public

[4/18/94 public]

The following sequence of commands causes dcecp to coredump.

root@bronze> dcecp
dcecp> ls /tmp[
> q 		<=================== Here type <CTR>-D !!!
> Memory fault(coredump)
root@bronze>

[5/5/94 public]
Cannot reproduce.  Might have been fixed with the readline submission.
Cancelled.

[5/5/94 public]
I can still reproduce this on the 486.

[5/5/94 public]

I can reproduce this on the NB on my HP.

[5/9/94 public]
This reproduces the problem:

  dcecp> ls /tmp/[
  > <Ctrl-d>
  core dump

The problem is in the following code in main.c:

        if ((line = readline(interp->result)) == NULL) {
            if (ferror(stdin)) {
                if (errno == EINTR) {
                    if (tcl_AsyncReady) {
                        (void) Tcl_AsyncInvoke((Tcl_Interp *) NULL, 0);
                    }
                    clearerr(stdin);
                } else {
                    goto done;
                }
            } else {
                if (!gotPartial) {
                    goto done;
                }
            }
            buffer[0] = 0;
        }
        add_history(line);
        strcpy(buffer, line);
        free(line);

line is NULL, there is no error and gotPartial is 1.  It goes into the big
if, through the else case, sets buffer[0]=0, add_history() and then cores
when doing the strcpy().  Questions this code brings up:

 * Why are we doing Tcl_AsyncInvoke when we don't set up any handlers?
 * If we get EINTR do we really want to just clearerr(stdin)?
 * Why is readline() returning NULL when the user enters C-d at the 
   start of a line?  If you type Ctrl-d at a dcecp> prompt, dcecp just exits.
 * shouldn't the add_history, strcpy, free, and strcat be in an else statement?

More to come...

[5/16/94 public]
Fixed, but not submitted since the tree is locked.

[5/19/94 public]
closed.



CR Number                     : 10391
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : aud
Short Description             : audf create doesn't catch invalid condition.
Reported Date                 : 4/18/94
Found in Baseline             : 1.1b7
Found Date                    : 4/18/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b9
Affected File(s)              : admin/dcecp/aud_util.c
Sensitivity                   : public

[4/18/94 public]
audfilter create doesn't catch an invalid condition correctly. Caused by
leaving out a "return TCL_ERROR" after sensing the error.

[5/9/94 public]
Inserted the return TCL_ERROR. Submitted.

[5/11/94 public]
closed



CR Number                     : 10383
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : aud
Short Description             : audfilter create dies w/o -attribute option
Reported Date                 : 4/18/94
Found in Baseline             : 1.1b7
Found Date                    : 4/18/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b9
Affected File(s)              : admin/dcecp/aud_ops.c
Sensitivity                   : public

[4/18/94 public]
audfilter create needs to check that the user specified the required
-attribute option.

[5/9/94 public]
Check for above error. Submitted.

[5/11/94 public]
closed



CR Number                     : 10381
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : account commands do not accept
pwdvalid or forwardabletkt in attribute list format.
Reported Date                 : 4/18/94
Found in Baseline             : 1.1
Found Date                    : 4/18/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b8
Affected File(s)              : rgy.c rgu_utils.c 
					     ./scripts/attr_eval.tcl
Sensitivity                   : public

[4/18/94 public]

The 'account create' and 'account modify' commands do not accept 
pwdvalid and forwardabletkt attributes in a TCL list structure. 
They are, however, accepted in option format.

[4/19/94 public]

Added the appropriate attr names into attr_eval.tcl and modified 
the utility program to accept the TCL list fields for pwdvalid and
forwardabletkt.

[5/2/94 public]
closed



CR Number                     : 10373
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : aud
Short Description             : auditd spinning after audf create
Reported Date                 : 4/15/94
Found in Baseline             : 1.1b7
Found Date                    : 4/15/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b9
Affected File(s)              : admin/dcecp/aud_ops.c
Sensitivity                   : public

[4/15/94 public]
The following command caused auditd to spin on the rios...

dcecp> audf create {{principal rousseau} {principal melman}} -at {dce_dts_mgt_query {success denial} alarm}

[4/15/94 public]
This turns out to be a multi-platform problem. Figuring out if this is a
dcecp or audit problem has yet to happen.

[4/22/94 public]
This is really an audit problem.  Complex filter creates will cause the
daemon to spin.  Haven't tried reproducing with auditcp.

[5/17/94 public]
The answer to the problem dawned on me this morning. auditcp makes 1
RPC per command while dcecp can make many. In dcecp's audfilter_create,
the guides pointer (and guide->next) was initialized to NULL, but after 
making the first RPC with it and freeing it, it pointed to garbage. It 
was never reset to NULL for subsequent RPC's, so the linked list pointed
off into space. Initializing guides and prev_guides to NULL inside the 
loop solves the problem. Submit coming when the tree opens.

[5/18/94 public]
Submitted.

[5/19/94 public]
closed.



CR Number                     : 10362
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : Can't set RPC_ClassVersion attribute on directories
Reported Date                 : 4/14/94
Found in Baseline             : 1.0
Found Date                    : 4/14/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b9
Affected File(s)              : cdscp.c
	                                     cdscp_object.c
                                             cdscp_link.c
                                             cdscp_utils.c
Sensitivity                   : public

[4/14/94 public]

'dir create /.:/foo -attribute {RPC_ClassVersion 0100}' returns an
error of "Specified attribute type is incorrect", although it does
succeed in creating the directory. This is awkward for 'dir merge',
which expects to be able to copy non-CDS attributes from the source
directory (and will stop if it gets an error return).

[4/15/94 public]

There's a question as to whether this attribute is supposed to be
writable for directories. (If it isn't, it should produce a better
error message.) John Dugas agreed to try to find out the answer to
this question, so I've reassigned the CR to him.

[4/19/94 public]

This attribute should be writable.  CDS must enforce read-onlyness and it
only knows about CDS attributes, not RPC attributes.  The NSI can change
them...

[4/27/94 public]
  From: mccann@tuxedo.enet.dec.com
  Date: Wed, 27 Apr 94 16:32:42 EDT
  
  We added it to directories because of acl_edit.  I think
  it has something to do with import.  Import looks for
  this attribute.
  
  I believe it is writable.

If CDS creates this attribute, then it should be considered a CDS attribute
for the sake of merge.  To see if it is writable, try to change it with
cdscp, then we can know if it's a "bug" in dcecp or CDS if either.

[4/27/94 public]

cdscp, like dcecp, fails to write it. In both cases, however, the
error message is "Specified attribute type is incorrect", rather than
the usual message for read-only attributes ("Specified attribute
cannot be modified").

Is this therefore a CDS bug? To whom should it be assigned?

[4/28/94 public]

This has been taken care of in dcecp. It is actually a duplicate of a 
previous attribute bug. I cannot get cdscp to change the value either
but it is modifyable via dcecp. A more detailed explaination of 
changes will come when the submission is due.

[5/3/94 public]
This has been fixed with the attribute modification submission OT 10499.

[5/5/94 public]
closed.



CR Number                     : 10360
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : obj create fails with multiple attributes
Reported Date                 : 4/14/94
Found in Baseline             : 1.0
Found Date                    : 4/14/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b9
Affected File(s)              : cdscp_object.c 
		                             cdscp_utils.c
Sensitivity                   : public

[4/14/94 public]

If 'object create' is given a list of attributes (as opposed to only
one attribute) with the -attribute switch, it fails with "Attribute
name is not defined". The reason for this is that object_create
special-cases for the CDS_ObjectUUID attribute by calling
parse_objuuid, but the latter expects a single attribute-value pair,
and is not prepared to deal with a list of such pairs.

Thus:
  obj create /.:/foo -attr {CDS_ObjectUUID <uuid>}

is fine, but, e.g.,

  obj create /.:/foo -attr {{CDS_Class RPC_Entry} {CDS_ClassVersion 1.0}}

fails.

[5/3/94 public]

  Modified the attribute acceptance routines for the object command. However
the previous example will still not work since RPC_Class is a byte value
not a char value. The command will now accept multiple attribute values and
correctly process an CDS_ObjectUUID attribute. The following command will
now work

obj create /.:/foo -attr {{CDS_Class 0100} {CDS_ClassVersion 1.0}
{CDS_ObjectUUID 000c01d4-341a-1dc6-b9bb-0000c0f7de56}}

[5/5/94 public]
closed.



CR Number                     : 10350
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : dcecp
Short Description             : rpccp.c: Macro name
DCP_SET_RESULT_CODE cannot be redefined.
Reported Date                 : 4/14/94
Found in Baseline             : 1.1
Found Date                    : 4/14/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b8
Affected File(s)              : admin/dcecp/rpccp.c
Sensitivity                   : public

[4/14/94 public]

dcecp failed to build;
"/project/dce/build/dce1.1-snap/src/admin/dcecp/rpccp.c", line 167.0:
1506-213 (S) Macro name DCP_SET_RESULT_CODE cannot be redefined.
*** Error code 1

[4/14/94 public]
Removed second definition of DCP_SET_RESULT_CODE. Original is in dcecp.h.

[4/19/94 public]
closed.



CR Number                     : 10349
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcp.sams uses wrong flags
Reported Date                 : 4/14/94
Found in Baseline             : 1.1b6
Found Date                    : 4/14/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b8
Affected File(s)              : dcp.sams
Sensitivity                   : public

[4/14/94 public]
The dcp.sams file is inconsistently and incorrectly using the message
flags. All flags need to be explicitly set for all messages.

[4/18/94 public]
Submitted. All flags were set explictly.

[4/19/94 public]
Nightly built x3 platforms. Closed.



CR Number                     : 10329
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : tet
Short Description             : Cannot run more than 40 tests at once
Reported Date                 : 4/11/94
Found in Baseline             : 1.1
Found Date                    : 4/11/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b8
Affected File(s)              : test/tet/src/tcl/api/tcm.tcl.dat
Sensitivity                   : public

[4/11/94 public]

Using the TET environment to run automated dcecp acl tests, the following 
occurs:

[ice]:/usr/sandbox/dcp/install/at386/dcetest/dce1.0/test> tcc -e admin/dcecp acl_modify_P
journal file name is: /usr/sandbox/dcp/install/at386/dcetest/dce1.0/test/admin/dcecp/results/0042e/journal
forked process couldn't set up input/output

[6/22/94 public]
This was fixed a while ago. Closed.



CR Number                     : 10328
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rpc
Short Description             : support lists of bindings and if's
Reported Date                 : 4/11/94
Found in Baseline             : 1.1
Found Date                    : 4/11/94
Severity                      : D
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : rpccp.c
Sensitivity                   : public

[4/11/94 public]
The "-binding" option on the export commands should accept a list of bindings
in either string or tcl syntax.  Currently it only accepts one binding in
either syntax.

Also the "-interface" option on  "rpcentry show" command should take a list
of interface id's in either string or tcl syntax and it only takes one.

[5/24/94 public]
Actually, the "-interface" option to "show" doesn't accept tcl syntax
at all, but it's perfectly happy with a list of IDs in string syntax.

(tcl syntax works for "unexport", and "export" as well pending the
fixing of CR 10734).

[6/14/94 public]
The first problem described above (-binding option doesn't accept a
list) also applies to the "endpoint" operations. In fact, the various
rpc* operations and endpoint now share the same code for interpreting
the option.

[8/17/94 public]

Fixed both of the above, and submitted.

[8/21/94 public]
closed.



CR Number                     : 10325
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : directory synchronize does not
entry of dir names as a list.
Reported Date                 : 4/11/94
Found in Baseline             : 1.1
Found Date                    : 4/11/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b7
Affected File(s)              : cdscp.c
Sensitivity                   : public

[4/11/94 public]

The 'directory synchronize' command does not accept a tcl list of
directories on the command line. The command needs to be modified to 
accept a tcl list.

[4/11/94 public]
	
Modified the 'directory synchronize' command to accept a tcl list of 
directories on the command line.

[4/19/94 public]
closed



CR Number                     : 10317
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : Assertion warning - when user
root executes subsequent logout commands.
Reported Date                 : 4/8/94
Found in Baseline             : 1.1
Found Date                    : 4/8/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b7
Affected File(s)              : admin/dcecp/util_login.c
Sensitivity                   : public

[4/8/94 public]

As user root, dcecp gives and assertion warning after subsequent
logouts or a logout followed by a login. 

Here is an example:

dcecp> login cell_admin -password -dce-
Password must be changed!
dcecp> logout
dcecp> logout
Error: You are not allowed to logout of an inhereted context.
dcecp> logout
**** Assertion warning. attempt to relock a mutex
     at line 1319 in /project/dce/build/dce1.1-snap/src/threads/cma_mutex.c

[4/8/94 public]
The problem will occur with any inherited context. If the user tries to
logout of an inherited context (root counts), delete_login_context()
returns with an error message without unlocking the global lock on the
login context list. One line fix.

[4/12/94 public]
Change was tested and submitted.

[4/19/94 public]
closed



CR Number                     : 10311
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : obj show doesn't always return valid list
Reported Date                 : 4/7/94
Found in Baseline             : 1.1
Found Date                    : 4/7/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b9
Affected File(s)              : cdscp_utils.c
Sensitivity                   : public

[4/7/94 public]

On my system, "obj show /.:/subsys/dce/sec/master" returns:

{RPC_ClassVersion 0100}
{RPC_ObjectUUIDs 8a7b5e00e78e901d90390000c08de054}
{CDS_CTS 1994-03-23-13:51:24.705-05:00I0.000/00-00-c0-8d-e0-54}
{CDS_UTS 1994-03-23-13:51:40.774-05:00I0.000/00-00-c0-8d-e0-54}
{CDS_Class RPC_Entry}
{CDS_ClassVersion 1.0}
{CDS_Towers ncacn_ip_tcp:130.105.4.33[]}{CDS_Towers ncadg_ip_udp:130.105.4.33[]}
{CDS_Towers ncacn_ip_tcp:130.105.4.33[]}
{CDS_Towers ncadg_ip_udp:130.105.4.33[]}
[etc.]

Note the lack of space between the first two CDS_Towers attributes.
TCL doesn't like this.

[5/3/94 public]
The object/directory/clearinghouse/link show commands now provide a 
valid tcl list output.

[5/5/94 public]
closed



CR Number                     : 10304
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : Cross component dependencies
cause build problems.
Reported Date                 : 4/6/94
Found in Baseline             : 1.1
Found Date                    : 4/6/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b7
Affected File(s)              : 
	./directory/cds/Makefile
	./directory/cds/includes/Makefile
	./directory/cds/includes/attributes.h
	./directory/cds/includes/cprpcp.h
	./directory/cds/includes/decnet_types.h
	./directory/cds/includes/dns_cdefs.h
	./directory/cds/includes/dns_debug.h
	./directory/cds/includes/dns_record.h
	./directory/cds/includes/dnstables.h
	./directory/cds/includes/qarith.h
	./directory/cds/includes/rpc_cvt.h
	./directory/cds/includes/sys_time.h
	./directory/cds/stubs/Makefile
	./directory/cds/stubs/cprpc.idl
	./security/audit/h/Makefile
	./security/h/Makefile
	./time/common/Makefile
	./time/common/arith.c
	./time/common/dtss_includes.h
	./time/common/dtssdef.h
	./time/common/sysdep.h
Sensitivity                   : public

[4/6/94 public]

There are several intercomponent dependencies that require VPATH and
-I declarations in the dcecp Makefile. The Makefiles and include files
for security, cds and dts need to be updated to export the appropriate
files to eliminate these declarations.

[4/8/94 public]
Modified the specified files so that they are either exported, specify 
for exporting or include/import exported files where necessary. 
Many of the cds files have nested includes that is why there are so many 
cds files.  

The build was clean for three platforms on 4/7/94.

[4/11/94 public]
closed



CR Number                     : 10293
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : Memory allocated by dce_sprinf is not released
Reported Date                 : 4/5/94
Found in Baseline             : 1.1
Found Date                    : 4/5/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b9
Affected File(s)              : most .c's
Sensitivity                   : public

[4/5/94 public]
dce_sprintf() does allocate 1k memory everytime you call and it is your
responsibility to free. In dcecp the memory is not freed, for example,
the macro DCP_APPEND_RESULT_CODE.

[4/19/94 public]
Fixed rpc.  John please fix time and auditing, then pass to Julie and Kevin...

[5/9/94 public]
Fixed dts, aud and dcecp.h macros. Passing to Julie.

[5/10/94 public]
No changes to acl and log support. Fixed in util_var.c 
Passing to Kevin.

[5/11/94 public]

Made the necessary changes to rgy and cds code. Back to Howard.

[5/18/94 public]
closed



CR Number                     : 10278
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : ctrl-C should not exit dcecp
Reported Date                 : 4/4/94
Found in Baseline             : 1.1b5
Found Date                    : 4/4/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : main.c, editline.c
Sensitivity                   : public

[4/4/94 public]
Interactive mode, you should be able to do 'ctrl-C' to interrup what you're
doing (like if you try to talk to a server that does not answer).  It should
not exit dcecp, but return you to the prompt.  Same thing should happen when
dcecp execs an external program (if you kill that command (ctrl-C), you
should return to dcecp).

How to implement?  Perhaps catch the INTR signal, then throw an exception.
That may make cleaning up easiest.

Issue: what to do if you're in a loop, like "foreach i [whatever] { xxx }"?
If in interactive mode, return to the prompt, else exit program.

This would make dcecp behave more like other "shells", which is a goal
(sort of) of dcecp.

[8/31/94 public]
It's easy enough for dcecp to make SIGINT generate an exception and do
the right thing, but the non-reentrancy of readline() makes it a
little tricky in the case where ctrl-C is typed while idling at the
dcecp prompt (or in mid-input), because the exception doesn't actually
get raised until readline blocks. I'm thinking about ways around this.

[9/1/94 public]
It turned out to be necessary (and sufficient) to add calls to
pthread_yield() and pthread_testcancel() to readline() immediately
after it sends the signal. Submitted.

[9/28/94 public]
closed.



CR Number                     : 10268
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : admin/dcecp/aud_util.c
Short Description             : Operation between types char
and pointer to void is not allowed.
Reported Date                 : 4/1/94
Found in Baseline             : 1.1
Found Date                    : 4/1/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : admin/dcecp/aud_util.c
Sensitivity                   : public

[4/1/94 public]
/project/dce/build/dce1.1-snap/src/admin/dcecp/aud_util.c", line 392.16:
1506-068 (S) Operation between types char and pointer to void is no
t allowed.

[4/1/94 public]
Changed two references of buf[0] = NULL   to  buf[0] = '\0'. Submitted.

[4/4/94 public]
closed



CR Number                     : 10262
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dced command enhancement (integrate into dcecp)
Reported Date                 : 3/31/94
Found in Baseline             : 1.1
Found Date                    : 3/31/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : too many to list
Sensitivity                   : public

[3/31/94 public]
Dced status meeting has requested a separate enhancement OT for 
dced commands development. This OT will be updated on all the dced 
commands related changes in addition to dce-drb.

[04/22/94 public]
Submitted dced commands support code to dcecp (hostdata object,
keytab object and server object).

[04/26/94 public]
Submitted dcecp secval object implementation.

[05/04/94 public]
Submitted functional test case for secval object (both negative 
and positive).

[06/10/94 public]
Submitted functional test case for server object (but only
srvrconf tested, srvrexec is post-beta)

[06/10/94 public]
Implemented -add and -removed switches for server modify command (now 
you can check out the server era attributes from schema interface and
add them to your-server-object or remove them).
Added ERA suuport in dced commands.

Two things remains -): 1) test srvrexec related cmds and fvt ICs
		       2) replace attr_scheme internal utility routines
			  with the generic rs_schema interface when it's
			  done.

[9/9/94 public]
Per Bob's request, increate this Ot to priority 1. The things left in
this Ot are 1) test srvrexec cmds 2) fix the server fvt.

[9/20/94 public]
Checked in the last piece.

[9/26/94 public]
closed.



CR Number                     : 10259
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : conv_var
Short Description             : Remove global C variables for dcecp convenience variable support.
Reported Date                 : 3/31/94
Found in Baseline             : 1.1
Found Date                    : 3/31/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b9
Affected File(s)              : src/admin/dcecp/util_var.c
                                             src/admin/dcecp/util_var.h
                                             src/admin/dcecp/dcecp.h
                                             src/admin/dcecp/main.c
                                             src/admin/dcecp/rpccp.c
Sensitivity                   : public

[3/31/94 public]

The need for this is apparent when more than 1 TCL Interpreter within dcecp 
requires convenience variable support.

[4/4/94 public]
closed

[5/4/94 public]
 Have another TCL global variable follow each read-only
 convenience variable. Note that the _old<read-only convenience variable>
 TCL global variables are not traced and users may cause havoc if 
 they modify them.

 This solution fulfills the need for multiple interpreters 
 used within dcecp.

 TCL future enhancement: Do not modify traced variables before
                         their trace procedures are invoked.

[5/9/94 public]
closed.



CR Number                     : 10243
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : acl
Short Description             : acl operations on "obj" objects produce misleading message
Reported Date                 : 3/29/94
Found in Baseline             : 1.1
Found Date                    : 3/29/94
Severity                      : E
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : dcp.sams,acl_edit.c
Sensitivity                   : public

[3/29/94 public]

Attempts to perform ACL operations on objects in directories appear to
fail, and to produce a spurious error message "not RPC entry".
Example:

dcecp> obj create /.:/temp/obj
dcecp> acl show /.:/temp/obj
Error: not RPC entry

[3/29/94 public]

Turns out the problem is that, without the -entry option, the ACL code
assumes an RPC object rather than the object's CDS entry. This is true
using acl_edit as well as dcecp. The former gives the additional
message "Unable to bind to object /.:/temp/obj", which adds a very
little information to the original error.

This error message could certainly be made more informative.

[3/29/94 public]
This error message is returned by the CDS ACL manager.  CDS code needs to
be changed to fix this, not dcecp or acl_edit code.  In the cds.sams work,
can this error message be improved?

[6/14/94 public]
The 'not RPC entry' message comes from rpc, cause the cds object doesn't
have rpc attributes on it.  The "unable to bind" message is hard coded
in acl_edit.  The CDS acl manager does not get involved.

This should be assigned to security.  The message comes from acl_edit.

[7/14/94 public]
Moved to dcecp component for Howard to look at prior to setting status
to defer to 1.2  (dcecp now performs most functions of the control programs)

[7/18/94 public]
Well this one is embarrassing.  Yes this is a dcecp problem.  Everything
is behaving correctly, we just need to produce a better error message.
The acl bind code should trap this error code and produce some message
to the effect of:

  Error: Cannot import from CDS entry, try -entry option

Is this clear enough to the user?

[7/18/94 public]
Yes, that would be a considerable improvement.

[8/1/94 public]
All control program bugs are being changed to E4 due to the existance
of dcecp.

[8/3/94 public]
This one was mistakenly got mixed in with acl_edit bugs.  Resetting
priority to 3.

[8/25/94 public]
Here it is:
dcecp> object create /.:/jaso
dcecp> acl show /.:/jaso
Error: Cannot import from CDS entry, try '-entry' option

dcecp> acl show /.:/jaso -entry
{unauthenticated r--t-}
{user cell_admin rwdtc}
{group subsys/dce/cds-admin rwdtc}
{group subsys/dce/cds-server rwdtc}
{any_other r--t-}

[8/26/94 public]
closed.



CR Number                     : 10241
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : parseargv
Short Description             : better msg for non-unique errors
Reported Date                 : 3/29/94
Found in Baseline             : 1.1
Found Date                    : 3/29/94
Severity                      : E
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : parseargv.c, dcp.sams
Sensitivity                   : public

[3/29/94 public]
Can we get a better error message for the following:

  dcecp> dir help      
  add                 Create a child pointer in the specified directory
  create              Create the named directory
  delete              Delete the named directory
  list                List the descendants of a directory
  modify              Add, remove or change an attribute in the named
  directory
  remove              Remove a child pointer in the specified directory
  show                Show the attributes of a directory or replica
  synchronize         Skulk the named directory
  help                Print summary of command-line options and abort
  operations          Return valid operations for command.
  dcecp> dir s /.:
  Error: Unrecognized option 's'.
  dcecp> 

Something like: Error: 's' is not a unique option.

[3/29/94 public]

Hmmm. Tcl outputs the following:

dcecp> s
Error: ambiguous command name "s": scan seek server set shell show signal
sigwatch source split start stop string switch synchronize

We should do the same thing. I'll look into it.

[4/11/94 public]
closed



CR Number                     : 10230
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : Dependencies on global "interp" variable
Reported Date                 : 3/25/94
Found in Baseline             : 1.1
Found Date                    : 3/25/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b9
Affected File(s)              : main.c 
	                                     cdscp_utils.c
                                             cdscp_clearinghouse.c
                                             cdscp.h
Sensitivity                   : public

[3/25/94 public]

There's a global variable "interp" declared in dcecp's main.c that is
used for the main loop interpreter. It really should be a local
variable that is then passed around to all the other C routines that
need it. This is mostly the case, but there are a few places that
use/depend on the global:

cdscp_utils.c: init_cds_attribute_table (shouldn't call Tcl_Eval)
               get_list_elements (shouldn't use DCP_SET_MISC_ERROR)
cdscp_clearinghouse.c: show_clearinghouse_counters (needs interp parameter)
cdscp.h: remove extern dcl
main.c: remove extern dcl, add automatic dcl

[kevins 5/3/94 public] 

All references to extern Tcl_Interp *interp have been removed.

[5/5/94 public]
closed



CR Number                     : 10221
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : aud
Short Description             : audit commands need to use
s(aud) to bind to off host servers
Reported Date                 : 3/24/94
Found in Baseline             : 1.1
Found Date                    : 3/24/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : admin/dcecp/{aud_ops.c,aud_util.c}
Sensitivity                   : public

[3/24/94 public]
The dcecp commands for controlling the audit daemon need to be modifed to
check the s(aud) conv. variable for binding to the appropriate audit
daemon.

[7/20/95 public]
Submitted.

[10/6/94 public]
closed.



CR Number                     : 10217
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : acl
Short Description             : On input, ignore "effective perms" string in ACL entry specification.
Reported Date                 : 3/23/94
Found in Baseline             : 1.1
Found Date                    : 3/23/94
Severity                      : D
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : src/admin/dcecp/acl_edit.c
Sensitivity                   : public

[3/23/94 public]

Use automated tests to verify:
(acl_modify_240_P)
(acl_replace_047_P)

Try this:
dcecp> acl m $n -a {{user_obj rc effective -c}}
Error: Invalid ACL entry.

dcecp> acl modify /.:/hosts/ice/dts-entity -a mask_obj:rc
dcecp> acl replace $n -acl [acl sh $n]
Error: Invalid ACL entry.

[8/12/94 public]
closed.



CR Number                     : 10211
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : acl
Short Description             : -mask calc is ignored.
Reported Date                 : 3/22/94
Found in Baseline             : 1.1
Found Date                    : 3/22/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b9
Affected File(s)              : src/admin/dcecp/acl_tclif.c src/admin/dcecp/acl_edit.c src/test/admin/dcecp/ts/acl/acl_modify_P.tcl
Sensitivity                   : public

[3/22/94 public]

Use automated FVT tests to verify:
   (acl_modify_231_P,acl_modify_239_P)

Move check for (mask_string != NULL) after the call to 
dcp_acl_bind_named_object().

[5/9/94 public]
closed.



CR Number                     : 10208
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : acl
Short Description             : Do not allow replacing an ACL with duplicate entries.
Reported Date                 : 3/22/94
Found in Baseline             : 1.1
Found Date                    : 3/22/94
Severity                      : D
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : src/admin/dcecp/acl_edit.c, src/admin/dcecp/dcp.sams
Sensitivity                   : public

[3/22/94 public]

Use Automated FVT test to verify:
	(acl_replace_021_N)

dcecp> acl replace /.:/jas1 -acl {any_other:rwc any_other:rwdtcia}
dcecp> acl sh $n
{any_other rw--c--}
{any_other rwdtcia}

Note that the last entry is used for determining access rights.

Additional note:
"acl_edit substitute" command will also replace the ACL with multiple 
entries.

[8/12/94 public]
closed.



CR Number                     : 10207
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : acl
Short Description             : Replacing all ACL entries with 1 ACL entry causes a core dump.
Reported Date                 : 3/22/94
Found in Baseline             : 1.1
Found Date                    : 3/22/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b9
Affected File(s)              : src/admin/dcecp/acl_edit.c
Sensitivity                   : public

[3/22/94 public]

Use automated FVT tests to verify:
(acl_replace_022_P, acl_replace_026_P)

acl replace /.:/jas -acl user:cell_admin:rc
Exception: fault invalid tag (dce / rpc)
core dump

[5/4/94 public]

Removed free((char *) replace_acl_entries); in dcp_acl_do_replace_entries().
This freed memory before call to sec_acl_replace().

[5/9/94 public]
closed.



CR Number                     : 10206
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : acl
Short Description             : Provide "isllist()" support.
Reported Date                 : 3/22/94
Found in Baseline             : 1.1
Found Date                    : 3/22/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : src/admin/dcecp/acl_edit.c
    src/test/admin/dcecp/ts/acl/acl_modify_P.tcl
Sensitivity                   : public

[3/22/94 public]

*) /* XXX - isllist() call here */
      in four places in code.
      Errors will occur here:
      acl modify  /.:/hosts -a {user a_p_cell1 r}
      acl modify  /.:/hosts -ch {user a_p_cell1 r}
      acl modify  /.:/hosts -r {user a_p_cell1 r}
      acl replace /.:/hosts -acl {user a_p_cell1 r}

Use automated FVT tests to verify:
(acl_modify_168_P thru acl_modify_173_P)
(acl_replace_023_P)

[4/4/94 public]
closed

[4/4/94 public]
actually change the state to closed this time. :-)



CR Number                     : 10203
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rpccp
Short Description             : rpccp help message cleanup
Reported Date                 : 3/22/94
Found in Baseline             : 1.1
Found Date                    : 3/22/94
Severity                      : E
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b6
Affected File(s)              : commands.c dcp.sams rpccp.c
Sensitivity                   : public

[3/22/94 public]
cleanup messages in the rpccp related commands as per comments from Kathy
Digan.

[3/22/94 public]
submitted.

[3/28/94 public]
closed.



CR Number                     : 10198
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : the attribute names uid orgid
and gid are interchangable
Reported Date                 : 3/21/94
Found in Baseline             : 1.1
Found Date                    : 3/21/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b7
Affected File(s)              : rgy.c rgy_utils.c dcp.sams
Sensitivity                   : public

[3/21/94 public]

When specifing an attribute list in the create commands for 
any pgo entry the uid/gid/orgid attribute names are interchangable.
This is incorrect. Principal should only accept uid and group should 
only accept gid and organization should only accept orgid.

[kevins 3/23/94 public] 

Made the necessary modifications to the uid/gid/orgid encoding functions. 
This will now produce an error if an individual attempts to generate 
a pgo with the incorrect attribute name. Such as
principal create kevins -attribute {gid 1234} 
will now fail with a message. As will group and organization create.

[3/28/94 public]
Well, close.

  dcecp> pri cre kevins -att {gid 1234}
  Error: In this context only uid is alllowed as attribute name.

How about just, "Unrecognized attribute 'gid'"
(I wouldn't have said anything about this, but allowed is spelled wrong so
that it had to be changed anyway.)

[4/8/94 public]

The current error message is "Unrecognized attribute 'gid'" or 
orgid or uid depending on the context.

[4/11/94 public]
closed.



CR Number                     : 10197
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : clearinghouse designation
convenience variable needs to be implemented.
Reported Date                 : 3/21/94
Found in Baseline             : 1.1
Found Date                    : 3/21/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b9
Affected File(s)              : cdscp.c cdscp_utils.c
Sensitivity                   : public

[3/21/94 public]

The s(cds) convenience variable needs to be implemented. This is 
essentially the same thing as preffered clearinghouse in cdscp.

[5/11/94 public]

The _s(cds)  convenience variable is now set-able and usable.
This variable is used, if set, when a -clearinghouse variable 
is not provided for directory show routines. 

It is also used, if set, in creating a directory. 
For instance, if _s(cds) is set to /.:/alt_ch
then
dir create /.:/foo_bar
is the same as 
dir create /.:/foo_bar -clearinghouse /.:/alt_ch

[5/12/94 public]
closed



CR Number                     : 10195
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : the output of the dcecp
commans "dir list /.:/" appends an extra / to the argument /.:/
Reported Date                 : 3/21/94
Found in Baseline             : 1.1
Found Date                    : 3/21/94
Severity                      : D
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b9
Affected File(s)              : cdscp.c
Sensitivity                   : public

[3/21/94 public]

Using NB 03/17/94

The following example illustrates the presence of the double / in the
output of:

dcecp> dir list /.:/
/.://hosts /.://sales /.://subsys /.://barbados_ch /.://bronze_ch
/.://cell-profile /.://fs /.://lan-profile /.://sec /.://sec-v1


Instead, the output should be look as follows:

dcecp> dir list /.:
/.:/hosts /.:/sales /.:/subsys /.:/barbados_ch /.:/bronze_ch
/.:/cell-profile /.:/fs /.:/lan-profile /.:/sec /.:/sec-v1

[3/21/94 public]
Actually the output should not have /.: in it, this should be expanded to
the name of the cell.  All output should be in the canonical name syntax.

[5/5/94 public]

The pathname is now expanded to include the full cell name. Sooo. the
output of 
dcecp> dir list /.:
/.../terrapin/dirmod /.../terrapin/hosts /.../terrapin/subsys 
/.../terrapin/cell-profile /.../terrapin/drkstr_ch /.../terrapin/fs
/.../terrapin/lan-profile /.../terrapin/sec /.../terrapin/sec-v1

Also extra / at the end of the path are removed.

[5/9/94 public]
closed.



CR Number                     : 10194
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : group
Short Description             : need to output inprojlist
Reported Date                 : 3/21/94
Found in Baseline             : 1.1
Found Date                    : 3/21/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b7
Affected File(s)              : rgy.c
Sensitivity                   : public

[3/21/94 public]
dcecp> gro show mail
{gid 6}
{uuid 00000006-40eb-21cd-bb01-080009251352}
{alias no}
dcecp>

inprojlist should be displayed.

[4/8/94 public]

It is now shown. 

dcecp> group show test
{alias no}
{gid 5107}
{uuid 000013f3-b4e6-2da2-8a01-0000c0f7de56}
{inprojlist yes}
{fullname {}}

[4/11/94 public]
closed



CR Number                     : 10188
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : cdscache
Short Description             : the "cdscache dump" command
prints a bogus error line at the end of the output.
Reported Date                 : 3/18/94
Found in Baseline             : 1.1
Found Date                    : 3/18/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b7
Affected File(s)              : cdscp_cache.c
Sensitivity                   : public

[3/18/94 public]

Using NB from 03/17/94

The output of the command

	dcecp> cdscache dump 

prints the following line at the end of its output
		
	Error: Unable to access the in-core message table : 

This line does not appear in the output of "cdscp dump clerk cache"

[3/23/94 public]
This is caused by a bad error code being returned to the parser
after cadump has been executed. 

Also there was a large amount of stale code to be removed. 
This has been removed and the error code has been corrected.

[3/28/94 public]
It fixed the problem if you are root, but if you are not root (and even if
you are logged in via the dcecp login command) you get:

  dcecp> cdscache dump
  Error: 
  dcecp> 

Can we give a more informative error message?  :-)

[4/8/94 public]
I think "Error:" is perfectly descriptive. The command now puts out a
little more descriptive Error message indicating that the command can 
be executed by root.

[4/11/94 public]
closed



CR Number                     : 10187
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : cdscache
Short Description             : the "dcecp cdscache show"
command  is not working according to the functional specification.
Reported Date                 : 3/18/94
Found in Baseline             : 1.1
Found Date                    : 3/18/94
Severity                      : B
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : cdscp_cache.c
                                             Makefile
                                             dcp.sams
Sensitivity                   : public

[3/18/94 public]

Using the NB from 03/17/94

The "dcecp cdscache show command" is not working according to the
fucntional specification. Here are two examples:

dcecp> cdscache show /.:/bronze_ch -clearinghouse
Error: The '-clearinghouse' option requires more arguments.

dcecp> cdscache show /.../dce_cell.qadce.osf.org/hosts/bronze/cds-server -server
Error: The '-server' option requires more arguments.
dcecp>

[8/2/94 public]
Finished I needed to add a cdslibrary to the Makefile and another 
file needs to be exported from cds/stubs

Submitted.

[8/12/94 public]
closed.



CR Number                     : 10169
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : directory
Short Description             : The switches -directory, -link,
and -object should be changed to -directories, -links, -objects as documented
in the func. spec.
Reported Date                 : 3/17/94
Found in Baseline             : 1.1
Found Date                    : 3/17/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : cdscp.c
Sensitivity                   : public

[3/17/94 public]

The command "directory list" takes the switches -directories, -links,
and -objects, however theses switches have been implemented as 
-directory, -link, -object. They should be changed to match the 
spec.

[3/18/94 public]
I modified the option definitions to correspond to the spec as noted
by Martha.

[3/21/94 public]
closed.



CR Number                     : 10168
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rpc
Short Description             : rpc commands broken
Reported Date                 : 3/17/94
Found in Baseline             : 1.1
Found Date                    : 3/17/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b5
Affected File(s)              : commands.c, rpccp.[ch]
Sensitivity                   : public

[3/17/94 public]
the rpccp commands are all out of date with respect to the new help style,
the new convenience variable work, the -syntax switch, etc.  needs general
cleanup.

[3/18/94 public]
submitted.

[3/21/94 public]
closed



CR Number                     : 10167
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : acl
Short Description             : ignore invalid cell id
Reported Date                 : 3/17/94
Found in Baseline             : 1.1
Found Date                    : 3/17/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : src/admin/dcecp/acl_edit.c
Sensitivity                   : public

[3/17/94 public]
acl_edit says:
1 acme. acl_edit /.:/hosts/acme/config/keytab
    Unknown default cell from ACL - ERROR: Cell UUID is not a valid cell
name
	(dce / sec)
    INFO: Local cell will be used for operations requiring default cell
info.
    sec_acl_edit> l

    # SEC_ACL for /.:/hosts/acme/config/keytab:
    # Default cell = 00000000-6944-1d88-932c-0000c09ce054
    user:00002ee1-6945-2d88-9300-0000c09ce054:cri
    any_other:-r-
    sec_acl_edit>

While dcecp:
    2 acme. dcecp
    dcecp> acl show /.:/hosts/acme/config/keytab 
    Error: Cell UUID is not a valid cell name
    dcecp>

acl_edit at least lets you talk to the thing (I can do "l", for
example).  dcecp does not.  A feature?

It follows the model of if you get an error report it an fail.  But this
can be worked around, just show the string rep of the UUID and don't report
an error or warning.  This should happen for all the commands.  (Actually
doesn't it have to for modify so that you can fix a bogus default_realm in
an existing ACL? -- ergo this is sev B).

[9/9/94 public]

If an invalid default cell UUID, then use the default cell UUID string 
as the default cell name and use the local cell registry for "acl" operations.

Unlike "acl_edit", dcecp will NOT display any warnings. 
If the user sees UUIDs as keys for some entries, then the user should 
check what the default cell name is. If the default cell name is invalid, 
then a UUID string is returned if possible.

[9/26/94 public]
closed.



CR Number                     : 10165
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : Makefile
Short Description             : remove -lsvc -ldceutils from LIBS
Reported Date                 : 3/17/94
Found in Baseline             : 1.1
Found Date                    : 3/17/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : admin/dcecp/Makefile
Sensitivity                   : public

[3/17/94 public]
LIBS doesn't need -lsvc and -ldceutils now that they are in libdce.

[3/17/94 public]
Removed extra libs and submitted.

[3/19/94 public]
Nightly built x3 platforms.



CR Number                     : 10151
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dts
Short Description             : include dce/dtss_includes.h
Reported Date                 : 3/16/94
Found in Baseline             : 1.1
Found Date                    : 3/16/94
Severity                      : D
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b7
Affected File(s)              : admin/dcecp/Makefile dts.h and dts_arith.c
Sensitivity                   : public

[3/16/94 public]
When dtss_includes.h is exported (CR 10146) then we have to:

 * Modify admin/dcecp/Makefile to remove all the dts*.o_INCFLAGS lines.
   We should not be getting any includes from the backing src tree
 * add dce/ to dts.h's include of dtss_includes.h
 * add dce/ to dts_arith.c's include of dtss_includes.h
   (or have it include dts.h if that is easier)

[4/15/94 public]
Closed. Submitted and built by kevins a while ago.



CR Number                     : 10144
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dts
Short Description             : dts is being too restrictive about authentication.
Reported Date                 : 3/15/94
Found in Baseline             : 1.1
Found Date                    : 3/15/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dts_ops.c, clock.c, util_login.c
Sensitivity                   : public

[3/15/94 public]
All the dts and clock commands are checking for authentication before doing
anything. This is too restrictive. The early authentication checks need to
be removed, and the function tests need to be updated to reflect this.

[3/17/94 public]
Removed all checks from get_login_context() returns. get_login_context()
now sets login_context_h = NULL if the sec_login_get_current_context() call
fails. Submitted.

[3/19/94 public]
Nightly built x3 platforms.



CR Number                     : 10126
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : Tcl
Short Description             : problems using Tcl procedures
in dcecp.
Reported Date                 : 3/11/94
Found in Baseline             : 1.1
Found Date                    : 3/11/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : admin/dcecp/main.c
Sensitivity                   : public

[3/11/94 public]

The following example, given in the Tcl manual (pg. 73), and similar
constructs do not work within dcecp.

dcecp> proc sum args {
> set s 0
> foreach i $args {
>    incr s $i
> }
> return $s
> }
dcecp> sum 1 2 3 4 5
Error: extra characters after close-brace

However, the following alternative works

dcecp>  proc sum args { set s 0; foreach i $args { incr s $i }; return $s }
dcecp>  sum 1 2 3 4 5
15

----

Another example:

dcecp> proc sum {} {
> set x name
> return $x
> }
dcecp> sum
Error: can't read "x": no such variable
dcecp> proc sum {} { set x name; return $x }
dcecp> sum
name
dcecp>

command in procedures. -> problems using Tcl procedures
in dcecp.

[3/11/94 public]
Creating the script foo.dcecp as follows...

#!/bin/dcecp

proc foo args {
  set s 0
  foreach i $args {
    incr s $i
  }
  return $s
}

...and sourcing it into dcecp works too.

[ninja]:/usr/users/rousseau> dcecp
dcecp> source /tmp/foo.dcecp
dcecp> foo 1 2 3 4 5
15

I'm not quite sure what is happnening here.

[3/11/94 public]
Try typing the command in interactively.
If you use wish, it works (i.e., you don't get an error)
I tried tclsh but the one in /usr/local/bin on HP had bad perms: hotline 1959

I think it is somehow related to how dcecp's main() constructs a complete
command to pass to Tcl_Eval().  Yes I know we took code from Tcl to do
this...

[3/11/94 public]

[ninja]:/usr/users/rousseau/dcecp/fvt/output> tclsh
% proc foo args {
set s 0
foreach i $args {
incr s $i
}
return $s
}
% foo 1 2 3 4 5
15

Sigh. I'll start looking at what we do different in main.

[3/17/94 public]
readline() in main.c strips off the trailing newline from the user's input.
This needs to be tacked back on so that multi-line commands work correctly.
Submitted.

[3/19/94 public]
Nightly built x3 platforms.



CR Number                     : 10121
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : tclapi
Short Description             : Tclapi receives "invalid argument" on hpux.
Reported Date                 : 3/10/94
Found in Baseline             : 1.1
Found Date                    : 3/10/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : test/tet/src/tcl/api/tcm.tcl.dat
Sensitivity                   : public

[3/10/94 public]
The Tcl API is generating an "invalid argument" message. This is because
the signals defined in the API Makefile are platform dependent. Changing
the Makefile to set the list of signals based on platform will solve this
problem. The fix will be submitted now.

[3/17/94 public]
Nightly built x3 platforms.



CR Number                     : 10118
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : test
Short Description             : Makefiles contain SCRIPTS
variable designating tcl scripts.
Reported Date                 : 3/10/94
Found in Baseline             : 1.1
Found Date                    : 3/10/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : ./test/admin/dcecp/ts/clock/Makefile, ./test/admin/dcecp/ts/dts/Makefile, ./test/admin/dcecp/ts/cds/Makefile, ./test/admin/dcecp/ts/rgy/Makefile
Sensitivity                   : public

[3/10/94 public]

The makefiles for dcecp functional tests incorrectly defines 
tcl scripts as SCRIPTS. SCRIPTS is a variable used for shell
scripts that get built. They are .sh and .csh shell scripts.
The tcl scripts should be designated as TCL_CODE.

[3/13/94 public]
Changed all instances of SCRIPTS to TCL_CODE.

[3/21/94 public]
closed.

[3/21/94 public]
closed



CR Number                     : 10114
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : rgy error message cleanup
Reported Date                 : 3/9/94
Found in Baseline             : 1.1
Found Date                    : 3/9/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dcp.sams
Sensitivity                   : public

[3/9/94 public]
Incorporated the suggested changes to the PGO messages from Kathy Digan's
review of 2/14/94.

[3/18/94 public]
Howard should have said that I was to incorporate the suggeted changes.
Incorporated the suggested changes to the PGO messages from Kathy Digan's
review of 2/14/94.

[3/21/94 public]
closed



CR Number                     : 10113
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : cds error message cleanup
Reported Date                 : 3/9/94
Found in Baseline             : 1.1
Found Date                    : 3/9/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dcp.sams
Sensitivity                   : public

[3/9/94 public]
Incorporate the suggested changes for the CDS messages from Kathy Digan's
review of 2/14/94.

[kevins 3/10/94] 
Updated dcp.sams with the suggestions made by Kathy Digan's review.

[3/21/94 public]
closed



CR Number                     : 10112
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dts
Short Description             : dts error message cleanup
Reported Date                 : 3/9/94
Found in Baseline             : 1.1
Found Date                    : 3/9/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dcp.sams
Sensitivity                   : public

[3/9/94 public]
Incorporated the suggested changes for the DTS objects from Kathy Digan's
review of 2/14/94.

[3/17/94 public]
Submitted changes.

[3/19/94 public]
Nightly built x3 platforms.



CR Number                     : 10104
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp should set $u to NULL
not unset it after last logout.
Reported Date                 : 3/8/94
Found in Baseline             : 1.1
Found Date                    : 3/8/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : admin/dcecp/util_login.c
Sensitivity                   : public

[3/8/94 public]
When logging out of the last login context, $u should be set to the string
"NULL" to be consistent with the startup state. It is currently being
unset.

[3/17/94 public]
The above change was made. Submitted.

[3/19/94 public]
Nightly built x3 platforms.



CR Number                     : 10101
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : login should get $u from the
API not from user input.
Reported Date                 : 3/8/94
Found in Baseline             : 1.1
Found Date                    : 3/8/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : util_login.c, util_login.h, commands.c
Sensitivity                   : public

[3/8/94 public]
Currently $u is set from user input in login. This needs to be changed to
get $u (and $c) from the API. This code should be putin util_login.c and
generalized so that check_initial_auth() and login can use the same code to
set $c, $u and update the login context list.

[3/31/94 public]
Summary of problem:
The convienence variable $_c (renamed from $c) which represents the
cell name that the current principal belongs to should be manipulated
by check_initial_auth(), login and logout. Both $_u and $_c should be
set from info returned from sec_login_get_net_info, not from user
input. Login and check_initial_auth() should share the same code
to get the principal and cell names.

Summary of fix:
Set $_u and $_c in add_login_context() only. Create
dcp_get_princ_and_cell()
to get the current principal and cell from sec_login_get_net_info(). Have
dcp_login() and check_initial_auth() both call add_login_context(). Fix
logout to manpulate $_c.

Submitted.

[4/1/94 public]
Nightly built x3 platforms.



CR Number                     : 10100
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : check_initial_auth(), login
and logout need to manipulate $c
Reported Date                 : 3/8/94
Found in Baseline             : 1.1
Found Date                    : 3/8/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : util_login.c, util_login.h, commands.c
Sensitivity                   : public

[3/8/94 public]
$c should be set the the cell name that the user is currently logged into.
This should be initially set in check_initial_auth() if needed, it must
also be set in login and reset in logout.

[3/31/94 public]
Summary of problem:
The convienence variable $_c (renamed from $c) which represents the
cell name that the current principal belongs to should be manipulated
by check_initial_auth(), login and logout. Both $_u and $_c should be
set from info returned from sec_login_get_net_info, not from user
input. Login and check_initial_auth() should share the same code
to get the principal and cell names.

Summary of fix:
Set $_u and $_c in add_login_context() only. Create
dcp_get_princ_and_cell()
to get the current principal and cell from sec_login_get_net_info(). Have
dcp_login() and check_initial_auth() both call add_login_context(). Fix
logout to manpulate $_c.

Submitted.

[4/1/94 public]
Nightly built x3 platforms.



CR Number                     : 10099
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : The $c conv. variable should
act like $u
Reported Date                 : 3/8/94
Found in Baseline             : 1.1
Found Date                    : 3/8/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b8
Affected File(s)              : util_var.c
Sensitivity                   : public

[3/8/94 public]
It has been decided that $c should contain the name of the cell that the
user is currently logged into. Therefore $c/$u will be the fully qualified
principal name of the current principal. 

The conv. variable support needs to be changed so that $c acts exactly like
$u. It should be intitialized to NULL.

[4/19/94 public]
closed via other CR's.  Not sure which ones but:

  absolut admin/dcecp$ ./dcecp
  dcecp> echo $_u
  {}
  dcecp> echo $_c
  {}
  dcecp> lca
  Password must be changed!
  dcecp> echo $_c/$_u
  /.../absolut_cell/cell_admin
  dcecp> exit



CR Number                     : 10098
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : The directory show command
returns a bad tcl list structure.
Reported Date                 : 3/8/94
Found in Baseline             : 1.1
Found Date                    : 3/8/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : cdscp_utils.c
Sensitivity                   : public

[3/8/94 public]

directory show $dirname returns an incorrectly structured tcl
list. In the ParentPointer attribute there is an extra "}". 
This invalidates the list structure.

[3/10/94 public]

Removed an extraneous "}" from the output generation section of
ParentPointer decoding.

[3/21/94 public]
closed



CR Number                     : 10097
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : "group modify" command fails
as "Operation not yet implemeneted"
Reported Date                 : 3/8/94
Found in Baseline             : 1.1
Found Date                    : 3/8/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b9
Affected File(s)              : rgy.c cdscp.c cdscp_link.c cdscp_object.c cdscp_cache.c dcecp.h rpccp.c
Sensitivity                   : public

[3/8/94 public]

The "group modify" command fails with the message 
"Operation not yet implemented"

[kevins 3/18/94 public] 
Added initialization of pgo_item prior to encoding attribute values.
This reset the uid (unix_number) field correctly.

[3/21/94 public]
dcecp> gro mod mail -gid 4
Error: Operation not yet implemented
dcecp> gro help mod
-alias              Change the named group to an alias
-change             Change an attribute in the named group
-fullname           Change the fullname/administrative data of the
specified cell group
-gid                Change the gid of the specified cell group
-inprojlist         Allows or denies the inclusion of group in principal's
project list
dcecp>

[3/21/94 public]
I removed the capability to change the gid/uid and orgid from all of the
modify commands.

[3/28/94 public]
Well almost:

  dcecp> grou sho mail
  {gid 6}
  {uuid 00000006-459e-21cd-ab01-080009251352}
  {alias no}
  dcecp> grou mod mail -fullname {blue beard}
  dcecp> grou sho mail                        
  {gid 6}
  {uuid 00000006-459e-21cd-ab01-080009251352}
  {alias no}
  {fullname "blue beard"}
  dcecp> grou mod mail -fullname {}           
  dcecp> grou sho mail              
  {gid 6}
  {uuid 00000006-459e-21cd-ab01-080009251352}
  {alias no}
  {fullname "blue beard"}
  dcecp> 

also, can a better error message be given for:

  dcecp> group mod mail -gid 4
  Error: Too many arguments specified in command.
  dcecp> 

something like:

  dcecp> rpce show foo -bar
  Error: Unrecognized option '-bar'.

[5/11/94 public]

I ordered and modified the macros that do the argument checking.

[5/12/94 public]
closed



CR Number                     : 10096
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : org create does not accept 
-attribute option
Reported Date                 : 3/8/94
Found in Baseline             : 1.1
Found Date                    : 3/8/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : rgy.c
Sensitivity                   : public

[3/8/94 public]

The "organization create" command does not accept the -attribute option.

[3/18/94 public]
I changed the location of evaluation of -attribute values within the 
function.

[3/21/94 public]
closed



CR Number                     : 10095
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : org policies acctlife and
pwdlife of "unlimited" not accepted
Reported Date                 : 3/8/94
Found in Baseline             : 1.1
Found Date                    : 3/8/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : rgy.c, rgy_utils.c
Sensitivity                   : public

[3/8/94 public]

The commands "organization modify" and "organization create" do not
accept "unlimited" as an acceptable value for acctlife or pwdlife.

[3/18/94 public]
The command switches for organization {modify and create} were accepting
only integers as arguments. I modified the switch definition.

Also the encoding functions were not accepting the string "unlimited".
I modified the encoding routines for acctlife and pwdlife.

[3/21/94 public]
closed



CR Number                     : 10094
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : acl
Short Description             : Remove -ic and -io options from acl check command.
Reported Date                 : 3/8/94
Found in Baseline             : 1.1
Found Date                    : 3/8/94
Severity                      : D
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b9
Affected File(s)              : src/admin/dcecp/acl_tclif.c
                                             src/admin/dcecp/dcp.sams
                                             src/test/admin/dcecp/ts/acl/acl_check_N.tcl
Sensitivity                   : public

[3/8/94 public]
Invoke the following commands as cell_admin:

dcecp> acl sh /.:/hosts
{unauthenticated r--t---}
{user cell_admin rwdtcia}
{user hosts/ice/cds-server rwdtcia}
{user hosts/ice/self rwdtcia}
{group subsys/dce/cds-admin rwdtcia}
{group subsys/dce/cds-server rwdtcia}
{any_other r--t---}
dcecp> acl sh /.:/hosts -io
{unauthenticated r--t---}
{group subsys/dce/cds-admin rwdtc--}
{group subsys/dce/cds-server rwdtc--}
{any_other r--t---}
dcecp> acl sh /.:/hosts -ic
{unauthenticated r--t---}
{group subsys/dce/cds-admin rwdtcia}
{group subsys/dce/cds-server rwdtcia}
{any_other r--t---}
dcecp> acl ch /.:/hosts
rwdtcia
dcecp> acl ch /.:/hosts -ic
rwdtcia
dcecp> acl ch /.:/hosts -io
rwdtcia

However, for the Initial Container ACL and the Initial Object ACL, there
is no "user:cell_admin" ACL entry. Once bounded to the specified ACL 
object not in CDS namespace(-entry), the sec_acl_get_access() just 
returns the ACL permissions of the invoker on the object itself.
Note the following for cell_admin:

dcecp> acl m /.:/hosts -ic -a user:cell_admin:rc
dcecp> acl sh /.:/hosts -ic
{unauthenticated r--t---}
{user cell_admin r---c--}
{group subsys/dce/cds-admin rwdtcia}
{group subsys/dce/cds-server rwdtcia}
{any_other r--t---}
dcecp> acl ch /.:/hosts -ic
rwdtcia

As a result, the -ic and -io options are not required with the "acl check"
command.

[4/4/94 public]
  absolut admin/dcecp$ ./dcecp
  dcecp> acl help check
  -entry              Operate on namespace entry ACL of the specified object.
  -ic                 Operate on initial container ACL of the specified
  object.
  -io                 Operate on initial object ACL of the specified object.
  dcecp> acl check /.:/hosts -ic
  Error: The -ic option is not valid for acl check.
  dcecp> 

Just remove -ic and -io from the arg_table.

[5/9/94 public]
closed.



CR Number                     : 10087
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : $n has too many braces
Reported Date                 : 3/7/94
Found in Baseline             : 1.1
Found Date                    : 3/7/94
Severity                      : D
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : src/admin/dcecp/util_var.c
                                             src/admin/dcecp/util_var.h
                                             src/admin/dcecp/dcecp.h
Sensitivity                   : public

[3/7/94 public]
This is from code I built late 3/7/94:

  dcecp> dir list {/.: /.:/hosts}
  /.:/cds_dir_cell1 /.:/hosts /.:/subsys /.:/absolut_ch /.:/cell-profile /.:/fs /.:/lan-profile /.:/sec /.:/sec-v1 /.:/hosts/absolut
  dcecp> echo $n
  {{/.: /.:/hosts}}
  dcecp> echo $n
  {{/.: /.:/hosts}}
  dcecp> dir show $n
  Error: Invalid name
  dcecp> 

Seems like an unexpected TCL_LIST_ELEMENT in a Tcl_SetVar() call.

[3/7/94 public]
corrected date of built code to 3/7/94

[4/4/94 public]
closed



CR Number                     : 10085
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : tcl
Short Description             : Tcl api does not run on hpux
or rios
Reported Date                 : 3/7/94
Found in Baseline             : 1.1
Found Date                    : 3/7/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : tcm.tcl.dat tetapi.tcl
Sensitivity                   : public

[3/7/94 public]
When running the Tcl API on the HP or RIOS platforms, the following error
is generated:

(:)& echo $!: (:)& echo $!: cannot open

This is caused by the use of "exec sh COMMAND" in the API. This works on
OSF/1 because OSF/1's sh is ksh. The fails on hpux and aix. The fix is to
invoke the commands as "exec sh -c COMMAND". This will make it portable.

[3/7/94 public]
Above fix has been tested on the at386, hp800 and rios platforms and
submitted.

[3/9/94 public]
closed.



CR Number                     : 10083
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : integer pgo and policy
attribute errors not reported correctly
Reported Date                 : 3/7/94
Found in Baseline             : 1.1
Found Date                    : 3/7/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dcp.sams, rgy_utils.c
Sensitivity                   : public

[3/7/94 public]

When integer attribute and policy values are entered incorrectly the 
errors are not descriptive enough. For instance if a command is 
entered as 
principal create joe -uid -1 

The error reported is simply "Supplied integer is out of available range."

The error should be more descriptive.

[3/18/94 public]
updated the error meesages to be more desciptive as outline
by Kathy Digan

[3/21/94 public]
closed



CR Number                     : 10081
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : link create -timeout does not work
Reported Date                 : 3/7/94
Found in Baseline             : 1.1
Found Date                    : 3/7/94
Severity                      : C
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b9
Affected File(s)              : cdscp_link.c
Sensitivity                   : public

[3/7/94 public]

link create /.:/link -timeout {value} does not work. The value is accepted 
but the attribute is never set.

[kevins 5/3/94 public] 
The -timeout switch now works. The value is parsed and set correctly. 
The create command has also been modified to accept the link target
as an attribute so that a user can enter:

link create /.:/foo -attribute {CDS_LinkTarget /.:/hosts}

[5/5/94 public]
closed



CR Number                     : 10075
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : login
Short Description             : gen princ names differently
Reported Date                 : 3/7/94
Found in Baseline             : 1.1
Found Date                    : 3/7/94
Severity                      : D
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : admin/dcecp/util_login.c
Sensitivity                   : public

[3/7/94 public]
Generating the principal name from the login context (done mostly to set $u
but applicable anywhere) should be done in the following way:

  sec_login_get_current_context()  to get the login_context_h
  sec_login_inquire_net_info()     to get the pac
  look in sec_id_pac_t             to get realm and principal UUIDs
  sec_id_gen_name()		   to get a principal name

This works if the login context is not in the local cell.  The current
method using sec_rgy_pgo_id_to_name() requires us to "pick a rgy handle,
any rgy handle" and that means we have to know the cell of the principal.
The above method does not require this.

[3/17/94 public]
Above changes were made and submitted.

[3/19/94 public]
Nightly built x3 platforms.



CR Number                     : 10074
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : tcl
Short Description             : RCS header needs to be moved
in admin/tcl7.3/library/tclIndex
Reported Date                 : 3/7/94
Found in Baseline             : 1.1
Found Date                    : 3/7/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : admin/tcl7.3/library/tclIndex
Sensitivity                   : public

[3/7/94 public]
The init.tcl script is looking of a specific line to start the tclIndex
file. The RCS header is confusing this. The RCS header should be moved
after the initial comment block in the file.

[3/7/94 public]
Submitted above change.

[3/9/94 public]
closed.



CR Number                     : 10072
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : organization list does not accept -simplename option
Reported Date                 : 3/5/94
Found in Baseline             : 1.1
Found Date                    : 3/5/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : rgy.c
Sensitivity                   : public

[3/5/94 public]

The organization catalog command does not currently accept -simplename
option. It should. Simplename provides only the organization name 
not prepended by the cellname. Normally the  organization catalog command
provides the organization name prepended with the cellname.

[kevins 3/5/94 public] 

Actually it's "organization list" not catalog that is causing the
problem.

[3/7/94 public]

Assured -simplename option was trapped, evaluated and implemented.

[3/9/94 public]
closed



CR Number                     : 10062
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : acl
Short Description             : dcp_s_acl_no_posix_semantics should be removed from catalog
Reported Date                 : 3/3/94
Found in Baseline             : 1.1
Found Date                    : 3/3/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : src/admin/dcecp/acl_tclif.c
                                             src/admin/dcecp/dcp.sams
Sensitivity                   : public

[3/3/94 public]

dcp_s_acl_no_posix_semantics is not needed anymore.  Remove from
catalog and remove check in module acl_tclif.c routine dcp_acl_modify().

If the ACL manager does not support the mask_obj ACL entry type, 
then the -mask calc and the -purge switch is meaningless.

There is no way to determine if a mask_obj ACL entry type is supported 
by the ACL object until a sec_acl_replace() is invoked.

As a result, the following tests will succeed without error but the
mask calculation and purge operation will be ignored:
   acl modify /.:/sec/principal/a -mask calc -a user:b:r
   acl modify /.:/sec/principal/a -purge

[3/21/94 public]
closed



CR Number                     : 10050
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : admin/tcl_dce
Short Description             : don't know how to make all_tests
Reported Date                 : 3/2/94
Found in Baseline             : 1.1
Found Date                    : 3/2/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : admin/tcl_dce/Makefile
Sensitivity                   : public

[3/2/94 public]

The "admin/tcl_dce" Makefile complains:

	make: don;t know how to make all_tests

[3/2/94 public]
The tests were moved to src/test/admin/tcl_dce, but the Makefile in
src/admin/tcl_dce was not updated, it was still trying to build the tests.
Changed the Makefile to not try to build TCL_TEST.

[3/4/94 public]
closed.



CR Number                     : 10045
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : acl
Short Description             : Provide support for a string binding specification for an ACL object.
Reported Date                 : 3/1/94
Found in Baseline             : 1.1
Found Date                    : 3/1/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : src/admin/dcecp/acl_edit.c, src/admin/dcecp/dcp.sams
Sensitivity                   : public

[3/1/94 public]

*) Add support for a string binding specification:
   Requires parsing of a list of ACL objects differently, call to
   rpc_binding_from_string_binding() to determine if the ACL object is
   a string binding, and call to sec_acl_bind_to_addr().

*) Message Support:
   - New message:
      If string binding specified and -entry, produce an error.
     acl modify {$OBJECT_UUID@$PROTSEQ:$NETADDR principal/a_p_cell1} -entry
     "Entry option used with a string binding."

   - New message:
      If no residual name is specified, produce an error.
      acl modify {$OBJECT_UUID@$PROTSEQ:$NETADDR} -add user:b_p_cell1:r
     "Residual name is missing."

[8/12/94 public]
closed.



CR Number                     : 10044
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : acl
Short Description             : mask_obj entry cannot be added to ACL object that supports it.
Reported Date                 : 3/1/94
Found in Baseline             : 1.1
Found Date                    : 3/1/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : src/admin/dcecp/acl_edit.c
                                             src/admin/dcecp/acl_tclif.c
                                             src/admin/dcecp/dcp.sams
Sensitivity                   : public

[3/1/94 public]

*) Currently, if an ACL object supports
   the mask_obj entry, dcecp acl command reports an error that it
   does not.
   /* XXX posix_semantics[0] not working */
   /.:/hosts/absolut/dts-entity accepts mask_obj entries thru the
   "acl_edit" interface but not thru the dcecp acl command!
   mask_obj problem: -add -change and -purge

*) Message Support:
   - New message:
     If a bogus default cell name is specified, produce an error.
     acl modify /.:/hosts -cell foo
     acl replace /.:/hosts -acl [acl sh /.:/subsys] -cell foo
     "Invalid cell name."

*) acl modify /.:/cds_dir_cell1 -a user::r
      {user 00000000-0000-0000-0000-000000000000 r------} gets applied!!!
      acl modify /.:/cds_dir_cell1 -ch user::rw
      {user 00000000-0000-0000-0000-000000000000 rw-----} gets applied!!!
      (Bug in ACL entry validation routine!)

*) Put same check for mask_obj entry in the remove loop in
   routine dcp_acl_do_modify_entries().

*) Move set convenience variables after checking argc in
   acl_tclif.c for all commands.
       if (argc < 2)
          ....
       else if (argc > 2)
          ....
      DCP_SET_CONVENIENCE_VARIABLES();

*) DCP_CHECK_SEC_ERROR() macros check for a bad status. Remove
   "if (BAD_STATUS(&status))" in code in acl_edit.c.
   Ex:
   if (BAD_STATUS(&status))
        DCP_CHECK_SEC_ERROR(status);

Tested:
    acl m /.:/hosts/ice/dts-entity -a mask_obj:rc
    acl m /.:/hosts/ice/dts-entity -ch mask_obj:rc
    acl m /.:/hosts/ice/dts-entity -r mask_obj:rc
    acl m /.:/hosts -a mask_obj:rcw

    acl modify /.:/cds_dir_cell1 -a user::r
    acl modify /.:/cds_dir_cell1 -ch user::r

    acl modify /.:/hosts -cell
    acl replace /.:/hosts -acl [acl sh /.:/subsys] -cell
    acl modify /.:/hosts -cell foo
    acl replace /.:/hosts -acl [acl sh /.:/subsys] -cell foo
    acl modify /.:/hosts -cell /.../foo
    acl replace /.:/hosts -acl [acl sh /.:/subsys] -cell /.../foo
    acl modify /.:/hosts -cell /.../ninja_cell.osf.org
    acl replace /.:/hosts -acl [acl sh /.:/subsys] -cell /.../ninja_cell.osf.org

[3/21/94 public]
closed.



CR Number                     : 10039
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : admin tests installed in wrong
install tree
Reported Date                 : 3/1/94
Found in Baseline             : 1.1
Found Date                    : 3/1/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : admin/tcl7.3/tests/* test/admin/tcl_dce/*
Sensitivity                   : public

[3/1/94 public]
The admin tests are currently installed in <install>/opt/dce1.0  They
should be installed in <install>/dcetest/dce1.0:

gemini feb/dee$ ls
/project/dce/build/nb_486/install/at386/opt/dce1.0/test/admin/tcl_dce
total 826
drwxr-xr-x   2 root     system             1536 Mar  1 01:12 .
drwxr-xr-x   3 root     system              512 Mar  1 01:12 ..
-rwxr-xr-x   1 bin      bin                 630 Feb 28 18:17 all_tests
-rwxr-xr-x   1 bin      bin                4298 Feb 28 18:17 append.test
-rwxr-xr-x   1 bin      bin                4807 Feb 28 18:17 async.test
-rwxr-xr-x   1 bin      bin                5430 Feb 28 18:17 case.test
-rwxr-xr-x   1 bin      bin                3951 Feb 28 18:17 cd.test
-rwxr-xr-x   1 bin      bin                3128 Feb 28 18:17 cmdinfo.test
-rwxr-xr-x   1 bin      bin                2346 Feb 28 18:17 concat.test
-rwxr-xr-x   1 bin      bin                2270 Feb 28 18:17 dcall.test
-rwxr-xr-x   1 bin      bin                3096 Feb 28 18:17 defs
-rwxr-xr-x   1 bin      bin                6283 Feb 28 18:17 dstring.test
-rwxr-xr-x   1 bin      bin                3949 Feb 28 18:17 env.test
-rwxr-xr-x   1 bin      bin                5837 Feb 28 18:17 error.test
-rwxr-xr-x   1 bin      bin                2602 Feb 28 18:17 eval.test
-rwxr-xr-x   1 bin      bin               15200 Feb 28 18:17 exec.test
.... and so on

[3/1/94 public]
I'll take care of this.

[3/1/94 public]
The tests were moved. The source Makefile was updated. The destination
Makefile was created, and the Makefile in the destiantions parent was
updated to know about the new directory.

[3/7/94 public]
With the help of CR 10050, this built x3 platforms. Closed.



CR Number                     : 10037
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : parseargv
Short Description             : operations cmd broken
Reported Date                 : 2/28/94
Found in Baseline             : 1.1
Found Date                    : 2/28/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b4
Affected File(s)              : commands.c
Sensitivity                   : public

[2/28/94 public]
After you perform some other command on an object, the operations command
on that object no longer works:

root@absolut /etc$ dcecp
dcecp> clock op
set show synchronize help operations
dcecp> dts op
activate configure deactivate modify show stop synchronize help operations
dcecp> clock show
1994-02-28-17:38:39.418-05:00I-----
dcecp> clock op
Error: Unrecognized argument 'op'.
dcecp> dts op
activate configure deactivate modify show stop synchronize help operations
dcecp>

[2/28/94 public]
Dumbness in static declaration of a function point in the object functions
in commands.  change 
   static int (*func)() = NULL;
to
   static int (*func)();
   ...

   func=NULL;

[3/1/94 public]
Fix was submitted by John R. yesterday.

[3/1/94 public]
Nightly built x3 platforms.



CR Number                     : 10033
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : sec
Short Description             : fully qualified names don't work
Reported Date                 : 2/28/94
Found in Baseline             : 1.1
Found Date                    : 2/28/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b10
Affected File(s)              : rgy.c rgy_utils.c
Sensitivity                   : public

[2/28/94 public]
You can't give a fully qualified name to one of the sec commands: dcecp>

  pri show /.../absolut_cell/cell_admin
  Error: Registry object not found
  dcecp> pri show cell_admin
  {uid 100}
  {uuid 00000064-3455-21cd-9800-080009251352}
  {alias no}
  {quota unlimited}
  dcecp> 

Either the catalog operations should output a simple name by default (so
the output of these commands can be used as input to others) or the various
commands should be modified to understand a fully qualified name.  To do
this sec_id_parse_name() would need to be called for each name to determine
the cell of the name so that rgy can be contacted via sec_rgy_site_open().
This is preferred but a test should be done to understand the performance
impact.  

If this is not done, the s(sec) variable should be modified to behave as a
"site" command.  Otherwise there is no way to manipulate rgy objects in
other cells.

[5/23/94 public]

Currently the pgo and account commands now take a full pathname.
They use sec_id_parse_name to aquire the actual pgo or account
name to act on. The cell name will be used to open the appropriate 
cell for action. This final step will be delayed due to 
OT 10682 and 10615.

[8/12/94 public]
closed.



CR Number                     : 10032
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : tclapi
Short Description             : using ic specification syntax
in tet_scen file causes api to fail
Reported Date                 : 2/28/94
Found in Baseline             : 1.1
Found Date                    : 2/28/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : test/tet/src/tcl/api/tcm.tcl.dat
Sensitivity                   : public

[2/28/94 public]

Specifying the ic syntax in the tet_scen file (like {1,4,5} or {2-6})
causes the following Tcl error from the API.

couldn't compile regular expression pattern: ?+* follows nothing

[2/28/94 public]
Fixing the syntax error revealed other problems with the way the ic list
specifers were being handled. All problems were resolved, tested and
submitted.

[3/1/94 public]
Nightly built x3 platforms.



CR Number                     : 10030
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : extra newlines on {dir,obj} show
Reported Date                 : 2/28/94
Found in Baseline             : 1.1
Found Date                    : 2/28/94
Severity                      : E
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : cdscp.c
                                             cdscp_object.c
                                             cdscp_clearinghouse.c
                                             cdscp_link.c
                                             cdscp_utils.c
Sensitivity                   : public

[2/28/94 public]
The dir show and obj show commands have an extra newline at the end of the
output.

[3/10/94 public]
Modified the routines that format the output to eliminate the extraneous 
newline.

[3/21/94 public]
closed



CR Number                     : 10029
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : dts
Short Description             : wierd error if dtsd not up
Reported Date                 : 2/28/94
Found in Baseline             : 1.1
Found Date                    : 2/28/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : admin/dcecp/dts_util.c
Sensitivity                   : public

[2/28/94 public]
If dtsd is not running and you issue "dts show" you get an unhelpful error
message: 

  dcecp> dts show
  Error: no more profile elements

Something like "dtsd not running" would be better :-)

[3/1/94 public]
Special case check to see if rpc_mgmt_ep_elt_inq_next() returns 
rpc_s_no_more_elements. If so, print a more useful message.

[3/7/94 public]
Nightly built x3 platforms. Closed.



CR Number                     : 10026
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : Group commands checking input
parameters incorrectly.
Reported Date                 : 2/28/94
Found in Baseline             : 1.1
Found Date                    : 2/28/94
Severity                      : E
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : rgy.c
Sensitivity                   : public

[2/28/94 public]

group add - checks arguments in incorrect order. It checks the 
	    -member switch before checking for the presence of  
	    a group name. 

group create foo -attribute {alias yes} - Reports that no uid was specified
		                          when it should report no gid. 

group modify - checks that a modify operation is specified before checking
   		for the presence of a group name.

[3/5/94 public]

several principal and organizations also check arguments in incorrect
order. 

principal rename 
principal modify
organization add
organization remove
organization modify

The input command show be checked first to see if a name has been provided
to operate on, then it should check the argument options/switches.

[3/7/94 public]
I reordered all of the affected commands. 

Currently all options are now checked after pgo name presence has 
been assured.

[3/9/94 public]
Tried to verify but:

    absolut admin/dcecp$ ./dcecp
    dcecp> login cell_admin -p -dce-
    Password must be changed!
    dcecp>  group create foo -att {alias yes}
    Bus error(coredump)

Also, an error that the gid is not specified should NOT be generated in
this case.  Rather a gid should be automatically assigned to the new group.

[3/21/94 public]
almost.  There is one problem.  Don't use SML in text fields:

  dcecp> group create foo -att {alias yes}
  Error: No *Lgid*O specified when attempting to create an alias.

[2/21/94 public]

I removed SML from the text field in the sams file dcp.sams.

[3/28/94 public]
closed



CR Number                     : 10011
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : init.dcecp must be read
Reported Date                 : 2/24/94
Found in Baseline             : 1.1
Found Date                    : 2/24/94
Severity                      : B
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b4
Affected File(s)              : commands.c
Sensitivity                   : public

[2/24/94 public]
The initialization file init.dcecp must be read into the interpretor in
dcecp_initInterp.  The file will live in <dceshared>/dcecp.

[3/21/94 public]
Normally I wouldn't go from open directly to closed, but this was submitted
long ago.



CR Number                     : 9952
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : tcl
Short Description             : install tcl in /opt/dcelocal/tcl
Reported Date                 : 2/14/94
Found in Baseline             : 1.1
Found Date                    : 2/14/94
Severity                      : B
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b5
Affected File(s)              : src/admin/tcl_dce/Makefile
Sensitivity                   : public

[2/14/94 public]
The tcl that is built in the tree should set the tcl library path to
/opt/dcelocal/tcl instead of /usr/local/lib/tcl.  init.tcl and friends
should be installed there.  dce_config will need to be modified to do this
as well.

[3/7/94 public]
The changes made to the TCL_LIBRARY path have been made and submitted. The
dce_config changes have not yet been made, so the CR will stay open.

[3/7/94 public]
The dce_config changes needed have been added to CR 9771 with other
dce_config changes.  This CR is marked "fix".

[3/9/94 public]
closed.



CR Number                     : 9949
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : Conv. variable prototypes
missing for util_general.c
Reported Date                 : 2/14/94
Found in Baseline             : 1.1
Found Date                    : 2/14/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : util_general.c
Sensitivity                   : public

[2/14/94 public]

Protoytpes for the convenience variable manipulation routines are not
included in util_gernal.c. Including  util_var.h header in util_general.c
will correct it.

[2/14/94 public]

Added include file util_var.h to util_general.c.

[2/28/94 public]
closed.



CR Number                     : 9946
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : rgy.h is not protected from
duplicate inclusion.
Reported Date                 : 2/11/94
Found in Baseline             : 1.1
Found Date                    : 2/11/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : rgy.h, cdscp.h
Sensitivity                   : public

[2/11/94 public]

admin/dcecp/rgy.h is not protected from duplicate inclusion by 
#ifndef _RGY_H 
#define _RGY_H
...
#endif

[2/11/94 public]
admin/dcecp/cdscp.h is also not protected from duplicate inclusion
Add
#ifndef _CDSCP_H
#define _CDSCP_H
...
#endif

[2/14/94 public]
I updated both include files with basic protection described above.

[2/28/94 public]
closed.



CR Number                     : 9944
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : arg_table for acl modify initialized incorrectly.
Reported Date                 : 2/11/94
Found in Baseline             : 1.1
Found Date                    : 2/11/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : src/admin/dcecp/acl_tclif.c
Sensitivity                   : public

[2/11/94 public]

arg_table was modified to be in alphabetical order. But the initializing
the arg_table in alphabetical order was not done.

[3/21/94 public]
closed



CR Number                     : 9943
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : site cache not refreshed for
new principal identity
Reported Date                 : 2/11/94
Found in Baseline             : 1.1
Found Date                    : 2/11/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : admin/dcecp/commands.c
Sensitivity                   : public

[2/11/94 public]

After opening the rgy site the binding handle for the site is 
maintained for the session. When someone changes principal identity 
during the session the site cache should be invalided. That is the 
structure member "site_cache.valid" should be set to false. This 
structure is defined in rgy.h in src/admin/dcecp.

[2/11/94 public]
I think julie keeps a cache when doing the acl command as well.  Is there
something that needs to change there?  Can it share the same cache as the
principal command?  (probably not).

[2/14/94 public]

The acl commands do not maintain a cache of rgy handles.

The fix kevins specified above was implemented in dcp_login and dcp_logout,
the commands performed as expected.

[2/18/94 public]

This fix built x3 platforms, and has been hand tested from the nightly build.



CR Number                     : 9938
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp needs function tests
Reported Date                 : 2/10/94
Found in Baseline             : 1.1
Found Date                    : 2/10/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : src/test/admin/dcecp/*
Sensitivity                   : public

[2/10/94 public]
dcecp needs functional tests. This will include the TCL TET API.

[8/3/94 public]
Well over 1000 functional tests have been submitted.  Time to close this
puppy.  :-)  Well done everyone.



CR Number                     : 9937
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dts
Short Description             : dts stop and dts deactivate do
not handle help correctly.
Reported Date                 : 2/10/94
Found in Baseline             : 1.1
Found Date                    : 2/10/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : admin/dcecp/dts_ops.c
Sensitivity                   : public

[2/10/94 public]

The two dts commands that do not take any options do not handle help
correctly.

dcecp> dts help stop
Error: Unrecognized argument 'stop'.

The command should exit successfully with a null in the result.

[3/19/94 public]
This was fixed a while ago with the DCP_NO_COMMAND_HELP() macro.



CR Number                     : 9920
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : "<object> help", "<object> <operation> help", or "<object> operations" clobber convenience variables.
Reported Date                 : 2/9/94
Found in Baseline             : 1.1
Found Date                    : 2/9/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : admin/dcecp/commands.c
Sensitivity                   : public

[2/9/94 public]

_________________________________
FOR <object> operations:

dcecp> acl sh /.:/hosts
{unauthenticated r--t---}
{user cell_admin rwdtcia}
{user hosts/ice/cds-server rwdtcia}
{user hosts/ice/self rwdtcia}
{group subsys/dce/cds-admin rwdtcia}
{group subsys/dce/cds-server rwdtcia}
{any_other r--t---}
dcecp> set n 
/.:/hosts
dcecp> acl operations
Error: check delete modify permissions replace show help operations help
dcecp> set n
Error: can't read "n": no such variable

_________________________________
FOR  <object> operations:

dcecp> acl sh /.:/hosts
{unauthenticated r--t---}
{user cell_admin rwdtcia}
{user hosts/ice/cds-server rwdtcia}
{user hosts/ice/self rwdtcia}
{group subsys/dce/cds-admin rwdtcia}
{group subsys/dce/cds-server rwdtcia}
{any_other r--t---}
dcecp> set n
/.:/hosts
dcecp> acl m help
Error: Command-specific options:
 -add:       Adds the ACL entries to the ACL.
 -cell:      Changes the value of the default cell on the ACL.
 -change:    Changes existing ACL entries in the ACL.
 -entry:     Operate on namespace entry ACL of the specified object.
 -ic:        Operate on initial container ACL of the specified object.
 -io:        Operate on initial object ACL of the specified object.
 -mask:      Recalculates a mask entry after ACL entry modification.
 -purge:     Purges all masked permissions before ACL entry modification.
 -remove:    Removes existing ACL entries from the ACL.
Generic options for all commands:
 operations: Return valid operations for command.
 help:       Print summary of command-line options and abort
dcecp> set n
Error: can't read "n": no such variable

[2/10/94 public]

Changes were submitted to commands.c that re-ordered the calling of macros.
This allowed the check for help to occur before clobbering the conv.
variables.

[2/11/94 public]

Submitted and nightly built x3 platforms.



CR Number                     : 9919
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : help facility parsing of arguments is incorrect
Reported Date                 : 2/9/94
Found in Baseline             : 1.1
Found Date                    : 2/9/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : admin/dcecp/util_help.c
                                             admin/dcecp/util_help.h
Sensitivity                   : public

[2/9/94 public]

This is OK:
dcecp> acl bbb help
Error: Unrecognized argument 'bbb'.
dcecp> acl help bbb
Error:

But try this:
dcecp> acl modify bbbb help
Error: Command-specific options:
 -add:       Adds the ACL entries to the ACL.
 -cell:      Changes the value of the default cell on the ACL.
 -change:    Changes existing ACL entries in the ACL.
 -entry:     Operate on namespace entry ACL of the specified object.
 -ic:        Operate on initial container ACL of the specified object.
 -io:        Operate on initial object ACL of the specified object.
 -mask:      Recalculates a mask entry after ACL entry modification.
 -purge:     Purges all masked permissions before ACL entry modification.
 -remove:    Removes existing ACL entries from the ACL.
Generic options for all commands:
 operations: Return valid operations for command.
 help:       Print summary of command-line options and abort

[2/10/94 public]

Change help system to handle extra arguments correctly.

[2/11/94 public]

Submitted and nightly built x3 platforms.



CR Number                     : 9918
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : "<object> help" and "<object> <operation> help" should display with same tabs.
Reported Date                 : 2/9/94
Found in Baseline             : 1.1
Found Date                    : 2/9/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : admin/dcecp/util_help.c 
                                             admin/dcecp/util_help.h
Sensitivity                   : public

[2/9/94 public]

Invoke for example:

dcecp> acl help
check               Returns ACL permissions of invoker.
delete              Deletes all ACL entries except the user_obj entry if it exists.
modify              Add, remove, or change ACL entries and attributes.
permissions         Returns permissions associated with the specified object.
replace             Replaces entire ACL with entries from -acl switch.
show                Returns ACL entries and/or attributes on the specified object.
help                Print summary of command-line options and abort
operations          Return valid operations for command.

dcecp> acl m help
Error: Command-specific options:
 -add:       Adds the ACL entries to the ACL.
 -cell:      Changes the value of the default cell on the ACL.
 -change:    Changes existing ACL entries in the ACL.
 -entry:     Operate on namespace entry ACL of the specified object.
 -ic:        Operate on initial container ACL of the specified object.
 -io:        Operate on initial object ACL of the specified object.
 -mask:      Recalculates a mask entry after ACL entry modification.
 -purge:     Purges all masked permissions before ACL entry modification.
 -remove:    Removes existing ACL entries from the ACL.
Generic options for all commands:
 operations: Return valid operations for command.
 help:       Print summary of command-line options and abort


Note that some "acl help" text now wraps around to next line.

[2/10/94 public]

Removed the old help system from parseargv. This in conjunction with the
fix to CR 9919 fixes this problem.

[2/11/94 public]

Submitted and nightly built x3 platforms.



CR Number                     : 9917
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : "<object> operations" lists the "help" operation twice
Reported Date                 : 2/9/94
Found in Baseline             : 1.1
Found Date                    : 2/9/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : admin/dcecp/parseargv.c
Sensitivity                   : public

[2/9/94 public]

Invoke for example: 

dcecp> acl operations
Error: check delete modify permissions replace show help operations help

dcecp> dts operations
activate configure deactivate modify show stop synchronize help operations help


The "help" operation is listed twice.

[2/10/94 public]

This is because remnants of the parseargv.c based help system were still in
the code. This will be removed with a sumbission today.

[2/10/94 public]

Removed the old help system. Changed the default arg table.

[2/11/94 public]

Submitted and nightly built x3 platforms.



CR Number                     : 9904
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : cds and rgy needs to support help
Reported Date                 : 2/7/94
Found in Baseline             : 1.1
Found Date                    : 2/7/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : ./admin/dcecp/cdscp.c, ./admin/dcecp/cdscp.h, ./admin/dcecp/cdscp_cache.c, ./admin/dcecp/cdscp_clearinghouse.c, ./admin/dcecp/cdscp_link.c, ./admin/dcecp/cdscp_object.c, ./admin/dcecp/commands.c, ./admin/dcecp/rgy.c, ./admin/dcecp/rgy.h
Sensitivity                   : public

[2/7/94 public]
The cds and rgy commands need to support the new help system.
This is object, directory, link, clearinghouse, cdscache, principal, group,
organization, account, and registry.

[3/14/94 public]

Added support for the help system to all orf the curretnly implemenented
cds and rgy commands. This involved modifying all of the 
function calls to the object and verb parsing functions. 

The object paring now checks for the help option.

[3/21/94 public]
closed.



CR Number                     : 9892
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dts
Short Description             : dts show has a trailing newline.
Reported Date                 : 2/4/94
Found in Baseline             : 1.1
Found Date                    : 2/4/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : admin/dcecp/dts_util.c
Sensitivity                   : public

[2/4/94 public]

The output of 'dts show' has an extra trailing newline. It needs to
be removed.

[2/10/94 public]

The fix required changing code everywhere newlines were output. Because
determining which string was to be the last in the output is difficult,
newlines are put at the beginning of each line, with some special checks to
assure that we don't put one at the head of the output. Fixed and tested x3
platforms.



CR Number                     : 9886
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : rgy_utils.c does not compile
on the rios
Reported Date                 : 2/3/94
Found in Baseline             : 1.1
Found Date                    : 2/3/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : admin/dcecp/rgy_utils.c
Sensitivity                   : public

[2/3/94 public]

admin/dcecp/rgy_utils.c does not build on the rios.

xlc -c     -O  -g -Dunix -D_BSD -D_ALL_SOURCE -DAIX32   -I.
-I/sandbox/rousseau/dcecp/src/admin/dcecp
-I/sandbox/rousseau/dcecp/src/admin/dcecp
-I/project/dce/build/dce1.1/src/admin/dcecp
-I/sandbox/rousseau/dcecp/export/rios/usr/include
-I/sandbox/rousseau/dcecp/export/rios/usr/include
-I/project/dce/build/dce1.1/export/rios/usr/include
/project/dce/build/dce1.1/src/admin/dcecp/rgy_utils.c
"/project/dce/build/dce1.1/src/admin/dcecp/rgy_utils.c", line 577.9:
1506-068 (S) Operation between types pointer and integer is not allowed.
"/project/dce/build/dce1.1/src/admin/dcecp/rgy_utils.c", line 580.53:
1506-122 (S) Expecting pointer to struct or union.
"/project/dce/build/dce1.1/src/admin/dcecp/rgy_utils.c", line 581.14:
1506-122 (S) Expecting pointer to struct or union.
"/project/dce/build/dce1.1/src/admin/dcecp/rgy_utils.c", line 581.32:
1506-122 (S) Expecting pointer to struct or union.
"/project/dce/build/dce1.1/src/admin/dcecp/rgy_utils.c", line 581.47:
1506-122 (S) Expecting pointer to struct or union.
"/project/dce/build/dce1.1/src/admin/dcecp/rgy_utils.c", line 581.62:
1506-122 (S) Expecting pointer to struct or union.
"/project/dce/build/dce1.1/src/admin/dcecp/rgy_utils.c", line 878.12:
1506-007 (S) Struct or union tm is undefined.
"/project/dce/build/dce1.1/src/admin/dcecp/rgy_utils.c", line 958.5:
1506-045 (S) Undeclared identifier tm.
"/project/dce/build/dce1.1/src/admin/dcecp/rgy_utils.c", line 959.5:
1506-045 (S) Undeclared identifier tm.
"/project/dce/build/dce1.1/src/admin/dcecp/rgy_utils.c", line 960.5:
1506-045 (S) Undeclared identifier tm.
"/project/dce/build/dce1.1/src/admin/dcecp/rgy_utils.c", line 961.5:
1506-045 (S) Undeclared identifier tm.
"/project/dce/build/dce1.1/src/admin/dcecp/rgy_utils.c", line 962.5:
1506-045 (S) Undeclared identifier tm.
"/project/dce/build/dce1.1/src/admin/dcecp/rgy_utils.c", line 963.5:
1506-045 (S) Undeclared identifier tm.
"/project/dce/build/dce1.1/src/admin/dcecp/rgy_utils.c", line 964.5:
1506-045 (S) Undeclared identifier tm.
"/project/dce/build/dce1.1/src/admin/dcecp/rgy_utils.c", line 965.5:
1506-045 (S) Undeclared identifier tm.
"/project/dce/build/dce1.1/src/admin/dcecp/rgy_utils.c", line 969.5:
1506-045 (S) Undeclared identifier tm.
"/project/dce/build/dce1.1/src/admin/dcecp/rgy_utils.c", line 970.40:
1506-045 (S) Undeclared identifier tm.
*** Error code 1

[2/4/94 public]

Added include of time.h to rgy_utils.c . Built x3 platforms.



CR Number                     : 9883
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : acl commands don't support help system.
Reported Date                 : 2/3/94
Found in Baseline             : 1.1
Found Date                    : 2/3/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : src/admin/dcecp/acl_tclif.h, src/admin/dcecp/commands.c, src/admin/dcecp/acl_tclif.c, src/admin/dcecp/dcp.sams
Sensitivity                   : public

[2/3/94 public]
Most of the dcecp components do not support the help system. Changes need
to be made to each component and to commands.c at the same time.

[2/7/94 public]
Changed this to be acl object only and assigned Julie as resp. eng.  Will
open another for cds and rgy commands.

[3/21/94 public]
closed.



CR Number                     : 9882
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : cds component of dcecp does
not conform to functional spec
Reported Date                 : 2/3/94
Found in Baseline             : 1.1
Found Date                    : 2/3/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : cdscp.c cdscp.h cdscp_object.c
cdscp_link.c
Sensitivity                   : public

[2/3/94 public]

There are a  variety of problems with the the cds portion of dcecp.
Primarily the code does not match the functional spec.

[2/3/94 public]

Corrected the appropriate problems.



CR Number                     : 9881
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp does not link correctly.
Unresolved symbols.
Reported Date                 : 2/3/94
Found in Baseline             : 1.1
Found Date                    : 2/3/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : admin/dcecp/Makefile
Sensitivity                   : public

[2/3/94 public]

The RIOS build of dcecp fails in the link step due to unresolved symbols.

0706-317 ERROR: Unresolved or undefined symbols detected:
		 Symbols in error (followed by references) are
		 dumped to the load map.
		 The -bloadmap:<filename> option will create a load map.
.krb5_read_password
.odm_get_obj
.odm_initialize
CuAt_CLASS
*** Error code 8

[2/7/94 public]

Changed dcecp's Makefile to link the RIOS with -lkrb5 -lodm -lcfg. Built x3
platforms in the nightlys.



CR Number                     : 9880
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : tcl_dce
Short Description             : tcl_dce does not install.
Can't make 'DATAFILES'.
Reported Date                 : 2/3/94
Found in Baseline             : 1.1
Found Date                    : 2/3/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : ./admin/tcl_dce/Makefile
                                             ./admin/tcl7.3/tests/all (to all_tests)
Sensitivity                   : public

[2/3/94 public]

admin/tcl_dce Can't make DATAFILES during install. Typo in Makefile.
ILIST = DATAFILES should be changed to ILIST = ${DATAFILES}

[2/3/94 public]

The problem was a little more complicated that first glance showed.
There were serveral VPATH and DATAFILES changes needed.

[2/4/94 public]

Fix to Makefile was submitted. Also admin/tcl7.3/tests/all needed to be
renamed to all_tests. Submitted, built and installed x3 platforms.



CR Number                     : 9877
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp does not link on the HP
Reported Date                 : 2/3/94
Found in Baseline             : 1.1
Found Date                    : 2/3/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : admin/dcecp/Makefile
Sensitivity                   : public

[2/3/94 public]

dcecp does not link on the HP. The order of the libraries listed in the
Makefile is wrong. libaudit needs to come before libdce.

[2/4/94 public]

Changed order of libraries. Submitted, built and installed x3 platforms.



CR Number                     : 9871
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : tcl_dce
Short Description             : tcl_dce does not build on the rios.
Reported Date                 : 2/1/94
Found in Baseline             : 1.1
Found Date                    : 2/1/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : ./admin/tcl_dce/RIOS/machdep.mk
Sensitivity                   : public

[2/1/94 public]

There are multiple symbols from the math library that are undefined 
for admin/tcl_dce on the rios. The fix is to update
admin/dcecp/RIOS/machdep.mk to link with '-lm'.

[2/2/94 public]

Changes specified above were made.



CR Number                     : 9869
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : aud
Short Description             : the dcecp audit component is
not complete
Reported Date                 : 2/1/94
Found in Baseline             : 1.1
Found Date                    : 2/1/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b8
Affected File(s)              : admin/dcecp/aud.h,aud_ops.c,aud_util.c
Sensitivity                   : public

[2/1/94 public]
dcecp aud functionality has been submitted. audfilter, audevents and
audtrail need to be submitted.

[2/3/94 public]
The bulk of the aud work has been sumbitted. This CR will stay open until
aud is "done".

[5/9/94 public]
All audit code (including functional tests) is complete and submitted.



CR Number                     : 9868
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : help
Short Description             : dcecp help system doesn't exist
Reported Date                 : 2/1/94
Found in Baseline             : 1.1
Found Date                    : 2/1/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : admin/dcecp/util_help.{c,h} 
                                                        /dts*
                                                        /aud*
Sensitivity                   : public

[2/1/94 public]

The dcecp help facilities do not exist.

[2/3/94 public]

The dcecp help facility was submitted with changes to support help
information in the dts and aud components. Other dcecp components need to
be changed to support help.



CR Number                     : 9862
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : secondary prompt should be >
Reported Date                 : 1/31/94
Found in Baseline             : 1.1
Found Date                    : 1/31/94
Severity                      : E
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : src/admin/dcecp/main.c
Sensitivity                   : public

[1/31/94 public]
The secondary prompt should default to ">", not "dcecp>".

Nothing major here, but we should do this before the internal release.

[1/31/94 public]

Fixed in my sandbox. I'll submit when the tree opens.

[2/3/94 public]

Submitted and built x3 platforms.



CR Number                     : 9854
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : dcecp
Subcomponent Name             : tcl
Short Description             : Convenience variables
have string length mismatch problems.
Reported Date                 : 1/28/94
Found in Baseline             : 1.1
Found Date                    : 1/28/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b8
Affected File(s)              : src/admin/dcecp/util_var.c
                                             src/admin/dcecp/util_var.h
                                             src/admin/dcecp/dcecp.h
Sensitivity                   : public

[1/28/94 public]
When attempting to update the "r" convenience variable the process 
takes a core. 

Initially I had thought that this was a result of passing a tcl owned
pointer into tcl, who would own the resultant variable. Attempting to 
circumvent this I did a strdup() to generate a new pointer. Naturally this
did not fix the problem. 

It is dying in StringCreate. The hash table buckets pointer has been
munged.

[1/28/94 public]
The problem is being caused because the pointer to the $r value  being
passed into Tcl_TraceVar is of fixed length. That is:

   if ((strcmp(varname, "r")) == 0){
       strcpy(dcp_g_general_r_var, var_list); 
       Tcl_TraceVar(interp, varname,
                   TCL_TRACE_WRITES|TCL_GLOBAL_ONLY,
                   (Tcl_VarTraceProc *)dcp__general_tracevar_writeproc, 
                   (ClientData) dcp_g_general_r_var);
       Tcl_TraceVar(interp, varname,
                   TCL_TRACE_UNSETS|TCL_GLOBAL_ONLY,
                   (Tcl_VarTraceProc *)dcp__general_tracevar_unsetproc, 
                   (ClientData) dcp_g_general_r_var);
   } else /* End of varname == r */

dcp_g_general_r_var is fixed at 100 bytes yet var_list can grow
significantly beyond 100 bytes. Copying var_list into dcp_g_general_r_var 
without a size limitation will overwrite the available space.

[1/31/94 public]
The convenience variables should be able to handle unlimited length.
Either use the DString package for this or change it to pass in the interp
struct to avoid the need for a strcpy.  Whatever works.

[4/4/94 public]
You need to actually set _r in main().

[4/7/94 public]
This was tried in my sandbox last week. Over a period of 3 days of testing
with $_r turned back on, I could not get it to fail. Watch for a submit in
a backing tree near you.

[4/29/94 public]
Was fixed and submitted a while ago.  Closed.



CR Number                     : 9809
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : install everything needed
Reported Date                 : 1/24/94
Found in Baseline             : 1.1
Found Date                    : 1/24/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : admin/dcecp/Makefile
Sensitivity                   : public

[1/24/94 public]
There are a few things wrong in the install process described in the
Makefiles: 

  dcecp/Makefile: must visit scripts/ during build.  Needs a SUBDIRS line.
  dcecp/Makefile: must put dcedcp.cat in ILIST and give correct IDIR
                  currently there are two ILIST's set and the 2nd overwrites

[2/3/94 public]
Fixed. Submitted and built x3 platforms.



CR Number                     : 9766
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cdscp_clearinghouse.c
Short Description             : cds symbol NULL_Set to go away
Reported Date                 : 1/18/94
Found in Baseline             : 1.1
Found Date                    : 1/18/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : ./admin/dcecp/cdscp_clearinghouse.c
Sensitivity                   : public

[1/18/94 public]
The NULL_Set symbol is to go away - please use NULL.

[2/2/94 public]
The above requested fix was implemented.



CR Number                     : 9691
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : DCECP is not implemented
Reported Date                 : 1/6/94
Found in Baseline             : 1.0.3
Found Date                    : 1/6/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : src/admin/dcecp/*
Sensitivity                   : public

[1/6/94 public]
DCECP is spec'ed but not implemented.

[8/26/94 public]
dcecp is more than done.  
It even builds.
Please see DCE CR 11850 for details. 
:-)



CR Number                     : 9659
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : src/time/common
Short Description             : Undeclared identifier
K_MAX_DEVNAME in sysdep.h
Reported Date                 : 12/28/93
Found in Baseline             : 1.1
Found Date                    : 12/28/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : sysdep.h
Sensitivity                   : public

[12/28/93 public]

The following complaints about "src/time/common/sysdep.h" occur:
 the following syntax error occurs:

"/project/dce/build/dce1.1-snap/src/time/common/sysdep.h", \
  line 122.19: 1506-04 5 (S) Undeclared identifier K_MAX_DEVNAME.
"/project/dce/build/dce1.1-snap/src/time/common/sysdep.h", \
  line 183.5: 1506-046 (S) Syntax error.

Lines 122 183 in "sysdep.h" are respectively:

    char                devName[K_MAX_DEVNAME+1];
    PortDsc *portPtr;         /* ptr to port Port Descriptor */

(The include lines in "sysdep.h" all use the old pre-ODE 2.3 "make"
angle brackets:

#include <netosi/dna_util.h>
#include <sys/socket.h>
#include <sys/un.h>
#include <sys/domain.h>
#include <net/if.h>
#include <netinet/if_ether.h>
#include <netdnet/dli_var.h>
#include <netdnet/dn.h>
#include <sysdep_vms.h>
#include <sysdep_ultrix.h> )

[12/28/93 public]

Reassigned to Tom Jordahl.

[01/05/94 public]
Looking at the build logs, I belive this error is comming from the
build of dcecp, and has nothing to do with the time component.
It looks like dcecp is including some of the header files from the
DTS directories.

Punting this over to the dtscp folks to dup to whatever bug they are
fixing all the dcecp problems under.

[01/10/94 public]
Submitted:
	src/admin/dcecp/Makefile
	src/admin/dcecp/commands.c
	src/admin/dcecp/acl_tclif.c
	src/admin/dcecp/util_login.c
	src/admin/dcecp/util_login.h

...to fix all RIOS specific build problems. There are other global problems
that will keep us out of the nightly builds for a while longer. I'm going
to close this CR, and I will open another to add dcecp back into the
nightly builds when we are ready.



CR Number                     : 9609
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : code
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : dts
Short Description             : Assertion failure in sanity check.
Reported Date                 : 12/13/93
Found in Baseline             : 1.0.3
Found Date                    : 12/13/93
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : admin/dcecp/dts_util.c
Sensitivity                   : public

[12/13/93 public]

Here is the information on this problem captured through e-mail
correspondence between Mike, Bill, John and myself.

This is in dcecp. The DCE control program. We have a command called 'login',
it functions identically to dce_login, except it doesn't fork a shell.
Our login command does a-c from above. Elsewhere in the code, we need access
to the sec_login_handle_t so that we can do authenticated RPC's. We can
get the current sec_login_handle_t in one of two ways, grab it off of
our globally maintained list of login contexts, or via sec_login_get_current_
context(). 

If I go through a series of:

dcecp> login rousseau
Enter Password: <blah>
dcecp> dts show           (any of our commands that use the login context)
[useless dts output :-)]
dcecp> login cell_admin   (I need cell_admin privs for some reason)
Assertion failed: cur != absent, file
/project/dce/build/dce1.0.3-snap/src/security/client/
login/sec_login_cache.c, line 145

...that's what happens. 

Our "login" facility saves the newly created context in a global linked
list. 
When we login again, we set_current_context to the new context. When we
"logout", we free the context off the head of the list and
set_curent_context to the next guy on the list.

I can sucessfully login / logout as many times as I want, and the context
is manipulated correctly, but as soon as a run any command that either uses
the context that's on the head of the global list, or gets the context with
sec_login_get_current_context(), the next login command will get the
assertion.

I can generate the same assertion for different code paths, but this is the
easiest / more reproduceable way.

Here is the session reproducing the problem with sec_login_cache_trace
turned on. Let me know what else you need.

(gdb) b cache_sanity_check
Breakpoint 2 at 0xa4301433
(gdb) c
Continuing.
4fe510: Reading cache
4fe510: Cache read in and set
Looking for /.../ninja_cell.osf.org/hosts/ninja/self
Fields: cellname   princname 
4fe510: Reading cache
4fe510: Cache read in and set
Allocating cache entry for /.../ninja_cell.osf.org/hosts/ninja/self; has
cell-name princ-name 
4fe510: dropping login handle refcount from 8 to 7
{checkinterval +0-01:30:00.000I-----}
{epoch 0}
{tolerance +0-00:10:00.000I-----}
{tdf -0-05:00:00.000I-----}
{maxinaccuracy +0-00:00:00.100I-----}
{minservers 3}
{queryattempts 3}
{localtimeout +0-00:00:05.000I-----}
{globaltimeout +0-00:00:15.000I-----}
{syncinterval +0-00:02:00.000I-----}
{type Server}
{courierrole noncourier}
{actcourierrole noncourier}
{clockadjrate 10000000 nsec/sec}
{maxdriftrate 1000000 nsec/sec}
{clockresolution 10000000 nsec}
{version V1.0.1}
{timerep V1.0.0}
{provider FALSE}
{autotdfchange FALSE}
{nexttdfchange 1994-04-03-03:00:00.000-04:00I0.000}
{serverprincipal hosts/ninja/self}
{serverentry hosts/ninja/dts-entity}
{servergroup subsys/dce/dts-servers}
{status enabled}
{uuid 000013898f8e.00.00.00.00.08.10.45.00}

dcecp> login cell_admin
adding 4fe510 to cache
Found 4fe510 in cache, when shouldn't have
Assertion failed: cur != absent, file
/project/dce/build/dce1.0.3-snap/src/security/client/login/sec_login_cache.c,
line 145

Program received signal 6, IOT/Abort trap
0xa405c910 in kill (6)

[2/1/94 public]

We are unable to build dcecp using the latest DCE1.1 sources,
and I am told that it is not part of the regular builds done 
at OSF.  Without being able to build and debug dcecp,
it will be hard to track down this bug.  When the sources
are a bit more stable, I'll look into this further.

[2/3/94 public]
There should be several changes that go in to the tree tomorrow that
will enable dcecp to build (with an appropriately populated export tree).
dcecp will never be able to build on it's own, it depends on other 
components to export various things. I will send you mail when dcecp
can be built.

[2/1/94 public]
As of 2/3/94 dcecp is now part of the nightly build, and builds on OSF/1.
It will build on HP as soon as the admin/dcecp/Makefile submit of CR 9877
is completed. You can fix it by just changing the 'LIBS' line to place
-laudit before -ldce. RIOS builds should be fixed today too.

[3/1/94 public]
This is a bug in the dcecp dts code. I was freeing the login context after
getting the binding handle to the server. After a week of hand testing, the
problem has not recurred. The fix will be submitted today.

[3/1/94 public]
Submitted change to not free login context.

[3/7/94 public]
Nightly built x3 platforms. Closed.



