CR Number                     : 13371
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : test/security/api/gssapi
Short Description             : gss_unseal() calls have last 2 parameters reversed
Reported Date                 : 2/24/96
Found in Baseline             : 1.1
Found Date                    : 2/24/96
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.2.1
Affected File(s)              : test/security/api/gssapi/test-gssapi.c
Sensitivity                   : public

[2/24/96 public]

A support customer report the following problem:
------------------------------------------------

< This has been fixed in the 1.2.1 code base >

Component (Module):     test/security/api/gssapi/test-gssapi.c

One Line Description:
test-gssapi: gss_unseal() calls -- the last two params are transposed.

Full Description:
The test-gssapi program has twelve calls to gss_unseal().
The function prototype for gss_unseal() is:

OM_uint32 gss_unseal
                 (OM_uint32*,       /* minor_status */
                  gss_ctx_id_t,     /* context_handle */
                  gss_buffer_t,     /* input_message_buffer */
                  gss_buffer_t,     /* output_message_buffer */
                  int*,             /* conf_state */
                  int*              /* qop_state */
                 );

The calls within test-gssapi.c all look like:

major_status = gss_unseal(&minor_status,
                          server_context,
                          &client_message_1,
                          &buffer2,
                          &message_qop,
                          &conf_state);

"conf_state" should proceed "message_qop" in the parameter list.


Proposed Solution:
changed all the calls to gss_unseal to look like:

major_status = gss_unseal(&minor_status,
                          server_context,
                          &client_message_1,
                          &buffer2,
                          &conf_state,
                          &message_qop);



CR Number                     : 13364
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : bld
Subcomponent Name             : 
Short Description             : ENDGAME: Install missing files
Reported Date                 : 2/23/96
Found in Baseline             : 1.2.1
Found Date                    : 2/23/96
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2.1
Fixed In Baseline             : 1.2.1
Affected File(s)              : src/test/systest/Makefile
Sensitivity                   : public

[2/23/96 public]
Install missing files dcetest_config, .profile.dcest.tet

[2/23/96 public]
Fixed.



CR Number                     : 13362
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : rpc
Subcomponent Name             : idlcxx
Short Description             : ENDGAME: fix for IBM C++ suffix
Reported Date                 : 2/23/96
Found in Baseline             : 1.2.1
Found Date                    : 2/23/96
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2.1
Fixed In Baseline             : 1.2.1
Affected File(s)              : src/test/rpc/idlcxx/ ...
idlcxx.mk
account/Makefile        handle/Makefile         native/Makefile         static/Makefile
account2/Makefile       local_object/Makefile   refcnt/Makefile         stubexc/Makefile
accountc/Makefile       lookup/Makefile         refmon/Makefile
bind/Makefile           matrix/Makefile         retry/Makefile
card/Makefile           matrixc/Makefile        stack/Makefile
Sensitivity                   : public

[2/23/96 public]
fix for IBM C++ suffix



CR Number                     : 13361
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : rpc
Subcomponent Name             : 
Short Description             : ENDGAME:Added "-DIDL_PROTOTYPES"
Reported Date                 : 2/23/96
Found in Baseline             : 1.2.1
Found Date                    : 2/23/96
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2.1
Fixed In Baseline             : 1.2.1
Affected File(s)              : src/test/functional/rpc/runtime/i18n_api/ts/cs_eval/{cs_byte/Makefile, wchar/Makefile}
Sensitivity                   : public

[2/23/96 public]
Added "-DIDL_PROTOTYPES"

[2/23/96 public]
Fixed.



CR Number                     : 13360
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : bld
Subcomponent Name             : 
Short Description             : ENDGAME: Conditionalize build of HP test
Reported Date                 : 2/23/96
Found in Baseline             : 1.2.1
Found Date                    : 2/23/96
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2.1
Fixed In Baseline             : 1.2.1
Affected File(s)              : src/test/Makefile
Sensitivity                   : public

[2/23/96 public]
Conditionalize build of HP test

[2/23/96 public]
DIFF:


*** /u2/sandboxes/nb/link/src/test/Makefile     Fri Dec  8 16:06:17 1995
--- Makefile    Thu Feb 22 14:36:58 1996
***************
*** 150,162 ****
  BUILD_SYSTEST =  systest
  .endif
  
  .ifdef BUILD_FUNC_TESTS
! DATA_SUBDIRS =   threads rpc directory security ${BUILD_DFS} functional valida
tion        
  EXPINC_SUBDIRS = include threads rpc directory time security ${BUILD_DFS} tet 
functional
  EXPLIB_SUBDIRS = lib threads rpc directory time security ${BUILD_DFS} \
                   tet functional
  SUBDIRS =        include lib threads rpc directory time security tools \
!                dce ${BUILD_DFS} tet functional validation
  .else
  EXPINC_SUBDIRS = include threads rpc directory time security \
                ${BUILD_DISKLESS} ${BUILD_DFS} tet functional
--- 154,170 ----
  BUILD_SYSTEST =  systest
  .endif
  
+ .if ${TARGET_MACHINE} == "HP800"
+ VALIDATION_TEST = validation
+ .endif
+ 
  .ifdef BUILD_FUNC_TESTS
! DATA_SUBDIRS =   threads rpc directory security ${BUILD_DFS} functional ${VALI
DATION_TEST}        
  EXPINC_SUBDIRS = include threads rpc directory time security ${BUILD_DFS} tet 
functional
  EXPLIB_SUBDIRS = lib threads rpc directory time security ${BUILD_DFS} \
                   tet functional
  SUBDIRS =        include lib threads rpc directory time security tools \
!                dce ${BUILD_DFS} tet functional ${VALIDATION_TEST}
  .else
  EXPINC_SUBDIRS = include threads rpc directory time security \
                ${BUILD_DISKLESS} ${BUILD_DFS} tet functional
***************
*** 165,171 ****
                ${BUILD_DISKLESS} ${BUILD_SYSTEST} tet functional
  SUBDIRS =        include lib threads rpc directory time security tools \
                 dce ${BUILD_DFS} ${BUILD_DISKLESS} ${BUILD_SYSTEST} tet functio
nal \
!                validation
  
  #OTHERS = dcetest_config
  #ILIST  = ${OTHERS}
--- 173,179 ----
                ${BUILD_DISKLESS} ${BUILD_SYSTEST} tet functional
  SUBDIRS =        include lib threads rpc directory time security tools \
                 dce ${BUILD_DFS} ${BUILD_DISKLESS} ${BUILD_SYSTEST} tet functio
nal \
!                ${VALIDATION_TEST}
  
  #OTHERS = dcetest_config
  #ILIST  = ${OTHERS}



CR Number                     : 13355
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : sec
Subcomponent Name             : 
Short Description             : ENDGAME: Remove platform specific stuff from Makefiles
Reported Date                 : 2/23/96
Found in Baseline             : 1.2.1
Found Date                    : 2/23/96
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : ./test/functional/security/ts/client/{Makefile,pwd_mgmt/Makefile}
Sensitivity                   : public

[2/23/96 public]

ENDGAME: Remove platform specific stuff from Makefiles

[2/23/96 public]
DIFF: old,new

*** /u2/sandboxes/nb/link/src/test/functional/security/ts/client/Makefile      M
on Dec 11 13:52:20 1995
--- Makefile    Fri Feb 23 10:20:01 1996
***************
*** 25,30 ****
  # 
  # $EndLog$
  # 
! SUBDIRS       = rca login pwd_mgmt migration bin_compat
  
  .include <${RULES_MK}>
--- 29,38 ----
  # 
  # $EndLog$
  # 
! .if ${TARGET_MACHINE} == "HP800"
! VENDOR_SUBDIR = bin_compat
! .endif
! 
! SUBDIRS       = rca login pwd_mgmt migration ${VENDOR_SUBDIR}
  
  .include <${RULES_MK}>
*** /u2/sandboxes/nb/link/src/test/functional/security/ts/client/pwd_mgmt/Makefi
le      Mon Dec 11 13:52:50 1995
  
  .include <${RULES_MK}>
*** /u2/sandboxes/nb/link/src/test/functional/security/ts/client/pwd_mgmt/Makefi
le      Mon Dec 11 13:52:50 1995
--- pwd_mgmt/Makefile   Fri Feb 23 10:20:13 1996
***************
*** 32,37 ****
  # 
  # $EndLog$
  # 
! SUBDIRS = pwd_strength pwd_expiration pwd_gen HP
  
  .include <${RULES_MK}>
--- 36,45 ----
  # 
  # $EndLog$
  # 
! .if ${TARGET_MACHINE} == "HP800"
! VENDOR_SUBDIR = HP
! .endif
! 
! SUBDIRS = pwd_strength pwd_expiration pwd_gen ${VENDOR_SUBDIR}
  
  .include <${RULES_MK}>



CR Number                     : 13354
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : ENDGAME: Fix VPATH to find tclTest.o
Reported Date                 : 2/23/96
Found in Baseline             : 1.2.1
Found Date                    : 2/23/96
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : ./test/functional/admin/tcl_dce/Makefile
Sensitivity                   : public

[2/23/96 public]
ENDGAME: Fix VPATH to find tclTest.o

[2/23/96 public]
DIFF:
*** /u2/sandboxes/nb/link/src/test/functional/admin/tcl_dce/Makefile    Mon Dec 
11 09:21:18 1995
--- Makefile    Fri Feb 23 10:21:21 1996
***************
*** 7,25 ****
  # 
  # HISTORY
  # $Log:	c013354,v $
# Revision 1.4  96/02/28  17:25:33  root
# changed fields:  new/changed/deleted note(s) [psn 2/28/96 public]
# 
# Revision 1.3  96/02/23  11:53:41  root
# changed fields: Interest List CC  
# 
# Revision 1.2  96/02/23  11:41:19  root
# changed fields: CR in Code, Doc, or Test?  Reported by  Interest List CC  Reported by Company  Status  Fixed In Baseline   new/changed/deleted note(s) [psn 2/23/96 public]
# 
  # Revision 1.1.8.2  1995/12/11  15:21:17  root
  #     Submit
! #
  #     HP revision /main/HPDCE02/2  1995/06/07  13:48 UTC  root
  #     build tcltest
! #
  #     HP revision /main/HPDCE02/2  1995/06/07  13:48 UTC  mothra
  #     build tcltest
! #
  #     HP revision /main/HPDCE02/1  1995/05/11  12:43 UTC  root
  #     fix IDIR
  #     [1995/12/11  14:34:16  root]
! #
  # Revision 1.1.4.1  1994/10/26  21:03:13  mori_m
  #     CR 11259:  Added multi-bytes functional tests.
  #     [1994/10/26  20:51:56  mori_m]
--- 7,29 ----
  # 
  # HISTORY
  # $Log:	c013354,v $
# Revision 1.4  96/02/28  17:25:33  root
# changed fields:  new/changed/deleted note(s) [psn 2/28/96 public]
# 
# Revision 1.3  96/02/23  11:53:41  root
# changed fields: Interest List CC  
# 
# Revision 1.2  96/02/23  11:41:19  root
# changed fields: CR in Code, Doc, or Test?  Reported by  Interest List CC  Reported by Company  Status  Fixed In Baseline   new/changed/deleted note(s) [psn 2/23/96 public]
# 
+ # Revision 1.1.8.3  1996/02/23  16:40:58  root
+ #     ENDGAME: Fix VPATH to find tclTest.o
+ #     [1996/02/23  16:32:54  root]
+ #
  # Revision 1.1.8.2  1995/12/11  15:21:17  root
  #     Submit
! # 
  #     HP revision /main/HPDCE02/2  1995/06/07  13:48 UTC  root
  #     build tcltest
! # 
  #     HP revision /main/HPDCE02/2  1995/06/07  13:48 UTC  mothra
  #     build tcltest
! # 
  #     HP revision /main/HPDCE02/1  1995/05/11  12:43 UTC  root
  #     fix IDIR
  #     [1995/12/11  14:34:16  root]
! # 
  # Revision 1.1.4.1  1994/10/26  21:03:13  mori_m
  #     CR 11259:  Added multi-bytes functional tests.
  #     [1994/10/26  20:51:56  mori_m]
***************
*** 38,44 ****
  # 
  # $EndLog$
  
! TCL_DIR                = ${SOURCEBASE}/admin/tcl_dce
  #TCL_TEST_DIR  = ${TCL_DIR}/tests
  
  VPATH          = ${TCL_DIR}
--- 42,48 ----
  # 
  # $EndLog$
  
! TCL_DIR                = ${SOURCEBASE}/admin/tcl_dce:../../../../admin/tcl_dce
  #TCL_TEST_DIR  = ${TCL_DIR}/tests
  
  VPATH          = ${TCL_DIR}

[2/28/96 public]
Slight correction: TCL_DIR should be the same as before, that is,
TCL_DIR                = ${SOURCEBASE}/admin/tcl_dce

and change VPATH to
VPATH          = ${TCL_DIR}:../../../../admin/tcl_dce



CR Number                     : 13183
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : aud
Subcomponent Name             : audit tests
Short Description             : audit tests fails in presence of replicated security
Reported Date                 : 10/31/95
Found in Baseline             : 1.1
Found Date                    : 10/31/95
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : security/audit/ts/{api_filter/startauditd,stopauditd},{cp_auditd/cp_auditd},{cp_filter/cp_filter},{ecfile_filter/startauditd,stopauditd}
Sensitivity                   : public

[10/31/95 public]

use rgy_edit option -update to do update with master wherever necessary....

*** /vob/dce.src.test/src/test/security/audit/ts/api_filter/startauditd@@/main/2        Thu Apr 28 14:33:37 1994
--- /vob/dce.src.test/src/test/security/audit/ts/api_filter/startauditd@@/main/HPDCE02/1        Tue Jun 27 17:20:34
1995
***************
*** 4,11 ****
  cellpw=-dce-

  #in order to run rgy_edit, there is need to dce_login as cell_admin
  print "add test principals, groups and accounts using rgy_edit\n"
!   dce_login cell_admin $cellpw -e rgy_edit <<EOF
  domain principal
  add aud_test_princ1
  add aud_test_princ2
--- 4,12 ----
  cellpw=-dce-

  #in order to run rgy_edit, there is need to dce_login as cell_admin
+ # use -up for rgy_edit to ensure master is updated.
  print "add test principals, groups and accounts using rgy_edit\n"
!   dce_login cell_admin $cellpw -e rgy_edit -up <<EOF
  domain principal
  add aud_test_princ1
  add aud_test_princ2
*** /vob/dce.src.test/src/test/security/audit/ts/api_filter/stopauditd@@/main/3 Thu Jun 23 16:48:42 1994
--- /vob/dce.src.test/src/test/security/audit/ts/api_filter/stopauditd@@/main/HPDCE02/1 Tue Jun 27 17:20:37 1995
***************
*** 4,11 ****
  cellpw=-dce-

  #in order to run rgy_edit, there is need to dce_login as cell_admin

!   dce_login cell_admin $cellpw -e rgy_edit <<EOF
  domain group
  del aud_test_group1
  del aud_test_group2
--- 4,12 ----
  cellpw=-dce-

  #in order to run rgy_edit, there is need to dce_login as cell_admin
+ # use -up for rgy_edit to ensure master is updated.

!   dce_login cell_admin $cellpw -e rgy_edit -up <<EOF
  domain group
  del aud_test_group1
  del aud_test_group2
*** /vob/dce.src.test/src/test/security/audit/ts/cp_auditd/cp_auditd@@/main/8   Tue Oct 25 16:57:26 1994
--- /vob/dce.src.test/src/test/security/audit/ts/cp_auditd/cp_auditd@@/main/HPDCE02/1   Tue Jun 27 17:19:10 1995
***************
*** 443,449 ****

  cellpw=-dce-

!   dce_login cell_admin $cellpw -e rgy_edit <<EOF
  domain principal
  add aud_test_princ1
  domain group
--- 443,450 ----

  cellpw=-dce-

! # use -up for rgy_edit to ensure master is updated.
!   dce_login cell_admin $cellpw -e rgy_edit -up <<EOF
  domain principal
  add aud_test_princ1
  domain group
***************
*** 510,516 ****
     print "\nOK: aud stop - failed"
   fi

!   dce_login cell_admin $cellpw -e rgy_edit <<EOF
  domain group
  del aud_test_group1
  domain principal
--- 511,518 ----
     print "\nOK: aud stop - failed"
   fi

! # use -up for rgy_edit to ensure master is updated.
!   dce_login cell_admin $cellpw -e rgy_edit -up <<EOF
  domain group
  del aud_test_group1
  domain principal
*** /vob/dce.src.test/src/test/security/audit/ts/cp_filter/cp_filter@@/main/10  Tue Oct 25 16:57:45 1994
--- /vob/dce.src.test/src/test/security/audit/ts/cp_filter/cp_filter@@/main/HPDCE02/1   Tue Jun 27 17:19:14 1995
***************
*** 33,40 ****
          fi

  #in order to run rgy_edit, there is need to dce_login as cell_admin

!   dce_login cell_admin $cellpw -e rgy_edit <<EOF
  domain principal
  add aud_test_princ1
  add aud_test_princ2
--- 33,41 ----
          fi

  #in order to run rgy_edit, there is need to dce_login as cell_admin
+ # use -up for rgy_edit to ensure master is updated.

!   dce_login cell_admin $cellpw -e rgy_edit -up <<EOF
  domain principal
  add aud_test_princ1
  add aud_test_princ2
***************
*** 1203,1210 ****
  cleanup() {

  #in order to run rgy_edit, there is need to dce_login as cell_admin

!   dce_login cell_admin $cellpw -e rgy_edit <<EOF
  domain group
  del aud_test_group1
  del aud_test_group2
--- 1204,1212 ----
  cleanup() {
  #in order to run rgy_edit, there is need to dce_login as cell_admin
+ # use -up for rgy_edit to ensure master is updated.

!   dce_login cell_admin $cellpw -e rgy_edit -up <<EOF
  domain group
  del aud_test_group1
  del aud_test_group2
*** /vob/dce.src.test/src/test/security/audit/ts/ecfile_filter/startauditd@@/main/3     Fri Jun 10 18:35:52 1994
--- /vob/dce.src.test/src/test/security/audit/ts/ecfile_filter/startauditd@@/main/HPDCE02/1     Tue Jun 27 17:19:48
1995
***************
*** 9,16 ****
  cellpw=-dce-

  #in order to run rgy_edit, there is need to dce_login as cell_admin
  print "add test principals, groups and accounts using rgy_edit\n"
!   dce_login cell_admin $cellpw -e rgy_edit <<EOF
  domain principal
  add aud_test_princ1
  domain group
--- 9,17 ----
  cellpw=-dce-

  #in order to run rgy_edit, there is need to dce_login as cell_admin
+ # use -up for rgy_edit to ensure master is updated.
  print "add test principals, groups and accounts using rgy_edit\n"
!   dce_login cell_admin $cellpw -e rgy_edit -up <<EOF
  domain principal
  add aud_test_princ1
  domain group
*** /vob/dce.src.test/src/test/security/audit/ts/ecfile_filter/stopauditd@@/main/5      Wed Jun 29 13:53:42 1994
--- /vob/dce.src.test/src/test/security/audit/ts/ecfile_filter/stopauditd@@/main/HPDCE02/1      Tue Jun 27 17:19:56
1995
***************
*** 17,24 ****


  #in order to run rgy_edit, there is need to dce_login as cell_admin
!
!   dce_login cell_admin $cellpw -e rgy_edit <<EOF
  domain group
  del aud_test_group1
  domain principal
--- 17,24 ----


  #in order to run rgy_edit, there is need to dce_login as cell_admin
! # use -up for rgy_edit to ensure master is updated.
!   dce_login cell_admin $cellpw -e rgy_edit -up <<EOF
  domain group
  del aud_test_group1
  domain principal

[11/01/95 public]
I would think this is a good testcase to test audit with and without 
security replication. I would like to have half of the testcase is 
added with -update or -up and leave the other half alone.  When 
security replica is not present, we expect all the testcases to pass.
When security replica is present, we expect half of them would fail.
However, these are good failures and we know why. How does it sound???

[11/2/95 public]
Tran, the fixes are for tests to gurantee success. While, it may be a
good idea to have some negative tests, I don't believe these were 
written for that purpose. Also by not specifying -update to rgy_edit does
not mean that it will always bind to a replica and so there may not be a
failure when it binds to master. Any way, at this time, I'd suggest we put
off splitting tests in such categories until someone (preferably component
owner) feels comfortable to add more tests.

[11/01/95 public]
ok, go for it, Parul.

[03/21/96 public]
Code included in the DCE 1.2.1 drop.  Closed with agreement of IBM.



CR Number                     : 13182
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 13119
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : aud
Subcomponent Name             : auditd tests
Short Description             : Changes in test associated with fix in OT13119
Reported Date                 : 10/31/95
Found in Baseline             : 1.1
Found Date                    : 10/31/95
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : security/audit/ts...api_filter/aud_testf_rpc_manager.c,aud_testf.c...api_log/aud_test.c,aud_test_rpc_manager.c...api_log_to_daemon/aud_testd.c,aud_testd_rpc_manager.c...ecfile_filter/aud_testec.c,aud_testec_rpc_manager.c
Sensitivity                   : public

[10/31/95 public]
These are the changes necessary to tests when fix for OT 13119 is made
as proposed in that OT under the tag "psn". These changes needs review
by IBM:

*** /vob/dce.src.test/src/test/security/audit/ts/api_filter/aud_testf_rpc_manager.c@@/main/4    Tue Oct  4 19:21:00
1994
--- /vob/dce.src.test/src/test/security/audit/ts/api_filter/aud_testf_rpc_manager.c@@/main/HPDCE02/2    Fri Aug 18 1
6:11:04 1995
***************
*** 8,13 ****
--- 8,25 ----
  /*
   * HISTORY
   * $Log:	c013182,v $
# Revision 1.4  96/03/21  11:25:59  root
# changed fields: Status  Fixed In Baseline   new/changed/deleted note(s) [white_r 03/21/96 public]
# 
# Revision 1.3  95/11/03  14:50:50  root
# changed fields:  new/changed/deleted note(s) [trant 11/02/95 public]
# 
# Revision 1.2  95/10/31  17:45:27  root
# changed fields: Affected File(s)  
# 
# Revision 1.1  95/10/31  17:23:07  root
# new CR
# 
+  * Revision /main/HPDCE02/2  1995/08/18  20:11 UTC  kline_s
+  *    Merge fix for CHFts16115
+  *
+  * Revision /main/kline_s_mothra/2  1995/08/17  21:32 UTC  kline_s
+  *    CHFts16115: Remove DES_HIDDEN conditional - only using integrity
+  *    protection level instead of using the privacy protection level
+  *    for Domestic.  Required to avoid conflicts due to singular
+  *    Domestic/Export release.
+  *
+  * Revision /main/kline_s_mothra/1  1995/07/06  19:45 UTC  kline_s
+  *    Enable tests to function properly using international (ie. non-DES) bits.
+  *
   * Revision 1.1.2.3  1994/10/04  21:23:38  weisz
   *    CR 12167: api_filter test suite fails.
   *    [1994/10/04  21:21:29  weisz]
***************
*** 93,99 ****
      rpc_binding_inq_auth_client(h, &privs, NULL, &authn_level,
                                &authn_svc, &authz_svc, stp);
      CHECK_STATUS("rpc_binding_inq_auth_client", stp);
!     if ((authn_level != rpc_c_protect_level_pkt_privacy) &&
            (authz_svc != rpc_c_authz_dce))
      {
         printf("wrong authn_level or wrong authz_svc, test failed\n");
--- 105,111 ----
      rpc_binding_inq_auth_client(h, &privs, NULL, &authn_level,
                                &authn_svc, &authz_svc, stp);
      CHECK_STATUS("rpc_binding_inq_auth_client", stp);
!     if ((authn_level != rpc_c_protect_level_pkt_integ) &&
            (authz_svc != rpc_c_authz_dce))
      {
         printf("wrong authn_level or wrong authz_svc, test failed\n");
***************
*** 182,188 ****
      rpc_binding_inq_auth_client(h, &privs, NULL, &authn_level,
                                &authn_svc, &authz_svc, stp);
      CHECK_STATUS("rpc_binding_inq_auth_client", stp);
!     if ((authn_level != rpc_c_protect_level_pkt_privacy) &&
            (authz_svc != rpc_c_authz_dce))
      {
        printf("wrong authn_level or wrong authz_svc, test failed, exiting\n");
--- 194,200 ----
      rpc_binding_inq_auth_client(h, &privs, NULL, &authn_level,
                                &authn_svc, &authz_svc, stp);
      CHECK_STATUS("rpc_binding_inq_auth_client", stp);
!     if ((authn_level != rpc_c_protect_level_pkt_integ) &&
            (authz_svc != rpc_c_authz_dce))
      {
        printf("wrong authn_level or wrong authz_svc, test failed, exiting\n");
***************
*** 269,275 ****
      rpc_binding_inq_auth_client(h, &privs, NULL, &authn_level,
                                &authn_svc, &authz_svc, stp);
      CHECK_STATUS("rpc_binding_inq_auth_client", stp);
!     if ((authn_level != rpc_c_protect_level_pkt_privacy) &&
            (authz_svc != rpc_c_authz_dce))
      {
        printf("wrong authn_level or wrong authz_svc, test failed, exiting\n");
--- 281,287 ----
      rpc_binding_inq_auth_client(h, &privs, NULL, &authn_level,
                                &authn_svc, &authz_svc, stp);
      CHECK_STATUS("rpc_binding_inq_auth_client", stp);
!     if ((authn_level != rpc_c_protect_level_pkt_integ) &&
            (authz_svc != rpc_c_authz_dce))
      {
        printf("wrong authn_level or wrong authz_svc, test failed, exiting\n");
***************
*** 355,361 ****
      rpc_binding_inq_auth_client(h, &privs, NULL, &authn_level,
                                &authn_svc, &authz_svc, stp);
      CHECK_STATUS("rpc_binding_inq_auth_client", stp);
!     if ((authn_level != rpc_c_protect_level_pkt_privacy) &&
            (authz_svc != rpc_c_authz_dce))
      {
        printf("wrong authn_level or wrong authz_svc, test failed, exiting\n");
--- 367,373 ----
      rpc_binding_inq_auth_client(h, &privs, NULL, &authn_level,
                                &authn_svc, &authz_svc, stp);
      CHECK_STATUS("rpc_binding_inq_auth_client", stp);
!     if ((authn_level != rpc_c_protect_level_pkt_integ) &&
            (authz_svc != rpc_c_authz_dce))
      {
        printf("wrong authn_level or wrong authz_svc, test failed, exiting\n");
***************
*** 441,447 ****
      rpc_binding_inq_auth_client(h, &privs, NULL, &authn_level,
                                &authn_svc, &authz_svc, stp);
      CHECK_STATUS("rpc_binding_inq_auth_client", stp);
!     if ((authn_level != rpc_c_protect_level_pkt_privacy) &&
            (authz_svc != rpc_c_authz_dce))
      {
        printf("wrong authn_level or wrong authz_svc, test failed, exiting\n");
--- 453,459 ----
      rpc_binding_inq_auth_client(h, &privs, NULL, &authn_level,
                                &authn_svc, &authz_svc, stp);
      CHECK_STATUS("rpc_binding_inq_auth_client", stp);
!     if ((authn_level != rpc_c_protect_level_pkt_integ) &&
            (authz_svc != rpc_c_authz_dce))
      {
        printf("wrong authn_level or wrong authz_svc, test failed, exiting\n");
***************
*** 527,533 ****
      rpc_binding_inq_auth_client(h, &privs, NULL, &authn_level,
                                &authn_svc, &authz_svc, stp);
      CHECK_STATUS("rpc_binding_inq_auth_client", stp);
!     if ((authn_level != rpc_c_protect_level_pkt_privacy) &&
            (authz_svc != rpc_c_authz_dce))
      {
        printf("wrong authn_level or wrong authz_svc, test failed, exiting\n");
--- 539,545 ----
      rpc_binding_inq_auth_client(h, &privs, NULL, &authn_level,
                                &authn_svc, &authz_svc, stp);
      CHECK_STATUS("rpc_binding_inq_auth_client", stp);
!     if ((authn_level != rpc_c_protect_level_pkt_integ) &&
            (authz_svc != rpc_c_authz_dce))
      {
        printf("wrong authn_level or wrong authz_svc, test failed, exiting\n");
***************
*** 613,619 ****
      rpc_binding_inq_auth_client(h, &privs, NULL, &authn_level,
                                &authn_svc, &authz_svc, stp);
      CHECK_STATUS("rpc_binding_inq_auth_client", stp);
!     if ((authn_level != rpc_c_protect_level_pkt_privacy) &&
            (authz_svc != rpc_c_authz_dce))
      {
        printf("wrong authn_level or wrong authz_svc, test failed, exiting\n");
--- 625,631 ----
      rpc_binding_inq_auth_client(h, &privs, NULL, &authn_level,
                                &authn_svc, &authz_svc, stp);
      CHECK_STATUS("rpc_binding_inq_auth_client", stp);
!     if ((authn_level != rpc_c_protect_level_pkt_integ) &&
            (authz_svc != rpc_c_authz_dce))
      {
        printf("wrong authn_level or wrong authz_svc, test failed, exiting\n");
***************
*** 703,709 ****
      rpc_binding_inq_auth_client(h, &privs, NULL, &authn_level,
                                &authn_svc, &authz_svc, stp);
      CHECK_STATUS("rpc_binding_inq_auth_client", stp);
!     if ((authn_level != rpc_c_protect_level_pkt_privacy) &&
            (authz_svc != rpc_c_authz_dce))
      {
         printf("wrong authn_level or wrong authz_svc, test failed\n");
--- 715,721 ----
      rpc_binding_inq_auth_client(h, &privs, NULL, &authn_level,
                                &authn_svc, &authz_svc, stp);
      CHECK_STATUS("rpc_binding_inq_auth_client", stp);
!     if ((authn_level != rpc_c_protect_level_pkt_integ) &&
            (authz_svc != rpc_c_authz_dce))
      {
         printf("wrong authn_level or wrong authz_svc, test failed\n");
***************
*** 798,804 ****
      rpc_binding_inq_auth_client(h, &privs, NULL, &authn_level,
                                &authn_svc, &authz_svc, stp);
      CHECK_STATUS("rpc_binding_inq_auth_client", stp);
!     if ((authn_level != rpc_c_protect_level_pkt_privacy) &&
            (authz_svc != rpc_c_authz_dce))
      {
         printf("wrong authn_level or wrong authz_svc, test failed\n");
--- 810,816 ----
      rpc_binding_inq_auth_client(h, &privs, NULL, &authn_level,
                                &authn_svc, &authz_svc, stp);
vc, stp);
      CHECK_STATUS("rpc_binding_inq_auth_client", stp);
!     if ((authn_level != rpc_c_protect_level_pkt_integ) &&
            (authz_svc != rpc_c_authz_dce))
      {
         printf("wrong authn_level or wrong authz_svc, test failed\n");
***************
*** 893,899 ****
      rpc_binding_inq_auth_client(h, &privs, NULL, &authn_level,
                                &authn_svc, &authz_svc, stp);
      CHECK_STATUS("rpc_binding_inq_auth_client", stp);
!     if ((authn_level != rpc_c_protect_level_pkt_privacy) &&
            (authz_svc != rpc_c_authz_dce))
      {
         printf("wrong authn_level or wrong authz_svc, test failed\n");
--- 905,911 ----
      rpc_binding_inq_auth_client(h, &privs, NULL, &authn_level,
                                &authn_svc, &authz_svc, stp);
      CHECK_STATUS("rpc_binding_inq_auth_client", stp);
!     if ((authn_level != rpc_c_protect_level_pkt_integ) &&
            (authz_svc != rpc_c_authz_dce))
      {
         printf("wrong authn_level or wrong authz_svc, test failed\n");
***************
*** 990,996 ****
      rpc_binding_inq_auth_client(h, &privs, NULL, &authn_level,
                                &authn_svc, &authz_svc, stp);
      CHECK_STATUS("rpc_binding_inq_auth_client", stp);
!     if ((authn_level != rpc_c_protect_level_pkt_privacy) &&
            (authz_svc != rpc_c_authz_dce))
      {
         printf("wrong authn_level or wrong authz_svc, test failed\n");
--- 1002,1008 ----
      rpc_binding_inq_auth_client(h, &privs, NULL, &authn_level,
                                &authn_svc, &authz_svc, stp);
      CHECK_STATUS("rpc_binding_inq_auth_client", stp);
!     if ((authn_level != rpc_c_protect_level_pkt_integ) &&
            (authz_svc != rpc_c_authz_dce))
      {
         printf("wrong authn_level or wrong authz_svc, test failed\n");
*** /vob/dce.src.test/src/test/security/audit/ts/api_filter/aud_testf.c@@/main/5        Tue Oct  4 19:20:49 1994
--- /vob/dce.src.test/src/test/security/audit/ts/api_filter/aud_testf.c@@/main/HPDCE02/3        Fri Aug 18 16:10:59
1995
***************
*** 8,13 ****
--- 8,29 ----
  /*
   * HISTORY
   * $Log:	c013182,v $
# Revision 1.4  96/03/21  11:25:59  root
# changed fields: Status  Fixed In Baseline   new/changed/deleted note(s) [white_r 03/21/96 public]
# 
# Revision 1.3  95/11/03  14:50:50  root
# changed fields:  new/changed/deleted note(s) [trant 11/02/95 public]
# 
# Revision 1.2  95/10/31  17:45:27  root
# changed fields: Affected File(s)  
# 
# Revision 1.1  95/10/31  17:23:07  root
# new CR
# 
+  * Revision /main/HPDCE02/3  1995/08/18  20:11 UTC  kline_s
+  *    Merge fix for CHFts16115
+  *
+  * Revision /main/kline_s_mothra/3  1995/08/17  21:32 UTC  kline_s
+  *    CHFts16115: Remove DES_HIDDEN conditional - only using integrity
+  *    protection level instead of using the privacy protection level
+  *    for Domestic.  Required to avoid conflicts due to singular
+  *    Domestic/Export release.
+  *
+  * Revision /main/kline_s_mothra/2  1995/07/06  19:45 UTC  kline_s
+  *    Enable tests to function properly using international (ie. non-DES) bits.
+  *
+  * Revision /main/kline_s_mothra/1  1995/06/27  01:58 UTC  kline_s
+  *    $TET_ROOT incorrectly assumes path of /tet/test instead of /tet.
+  *    Modify all impacted paths so that /test is included in path specifications.
+  *
   * Revision 1.1.2.4  1994/10/04  21:23:36  weisz
   *    CR 12167: api_filter test suite fails.
   *    [1994/10/04  21:21:20  weisz]
***************
*** 96,111 ****
        tet_infoline("ERROR: filtering environment variable DCEAUDITFILTERON not set\n");
        exit(1);
     }
!    system("$TET_ROOT/functional/security/audit/ts/api_filter/startauditd");
  }

   void cleanup()
  {
!    system("$TET_ROOT/functional/security/audit/ts/api_filter/stopauditd");
  #   system("rm /opt/dcelocal/var/audit/esl-* ");
     tet_infoline("End api_filter test suite");
     printf("End api_filter test suite\n");
  fflush(stdout);
  }
  */

--- 112,129 ----
        tet_infoline("ERROR: filtering environment variable DCEAUDITFILTERON not set\n");
        exit(1);
     }
!    system("$TET_ROOT/test/functional/security/audit/ts/api_filter/startauditd");
!    return(0);
  }

   void cleanup()
  {
!    system("$TET_ROOT/test/functional/security/audit/ts/api_filter/stopauditd");
  #   system("rm /opt/dcelocal/var/audit/esl-* ");
     tet_infoline("End api_filter test suite");
     printf("End api_filter test suite\n");
  fflush(stdout);
+    return(0);
  }
  */

***************
*** 141,146 ****
--- 159,165 ----
      non_dt_fatal_error = TRUE;
      pthread_cancel(distinguished_task);
      pthread_exit((void *)-1);
+     return(0);
  }


***************
*** 154,160 ****
    FILE *fptr;
    void (*test_case1) () = aud_testf_v1_0_c_epv.aud_testf_case1;

!   system("$TET_ROOT/functional/security/audit/ts/api_filter/addfilter.princ1");

    /* aud_client_server spins off a listener thread for the whole suite */
    rc = aud_client_server(test_case1, princ);
--- 173,179 ----
    FILE *fptr;
    void (*test_case1) () = aud_testf_v1_0_c_epv.aud_testf_case1;

!   system("$TET_ROOT/test/functional/security/audit/ts/api_filter/addfilter.princ1");

    /* aud_client_server spins off a listener thread for the whole suite */
    rc = aud_client_server(test_case1, princ);
***************
*** 161,167 ****
    if (rc != 0)
      overall_status |= tp1_error;

!   system("($TET_ROOT/functional/security/audit/ts/api_filter/delfilter.princ1)&");

    fptr = NULL;
    j = 0;
--- 180,186 ----
    if (rc != 0)
      overall_status |= tp1_error;

!   system("($TET_ROOT/test/functional/security/audit/ts/api_filter/delfilter.princ1)&");

    fptr = NULL;
    j = 0;
***************
*** 177,182 ****
--- 196,202 ----
      printf("deleting filter princ1 took: %i\n", j);
     fclose (fptr);
     remove (HANDSHAKE_FILE);
+    return(0);
  }


***************
*** 190,196 ****
    void (*test_case2) () = aud_testf_v1_0_c_epv.aud_testf_case2;


!   system("($TET_ROOT/functional/security/audit/ts/api_filter/addfilter.group1)&");
    fptr = NULL;
    j = 0;
    while (fptr == NULL)
--- 210,216 ----
    void (*test_case2) () = aud_testf_v1_0_c_epv.aud_testf_case2;


!   system("($TET_ROOT/test/functional/security/audit/ts/api_filter/addfilter.group1)&");
    fptr = NULL;
    j = 0;
    while (fptr == NULL)
***************
*** 211,217 ****
      overall_status |= tp2_error;

!   system("($TET_ROOT/functional/security/audit/ts/api_filter/delfilter.group1)&");
    fptr = NULL;
    j = 0;
    while (fptr == NULL)
--- 231,237 ----
      overall_status |= tp2_error;


!   system("($TET_ROOT/test/functional/security/audit/ts/api_filter/delfilter.group1)&");
    fptr = NULL;
    j = 0;
    while (fptr == NULL)
***************
*** 226,231 ****
--- 246,252 ----
      printf("deleting filter group1 took: %i\n", j);
      fclose (fptr);
      remove (HANDSHAKE_FILE);
+     return(0);

  }

***************
*** 240,246 ****
   void (*test_case3) () = aud_testf_v1_0_c_epv.aud_testf_case3;


!   system("($TET_ROOT/functional/security/audit/ts/api_filter/addfilter.cell)&");

    fptr = NULL;
    j = 0;
--- 261,267 ----
   void (*test_case3) () = aud_testf_v1_0_c_epv.aud_testf_case3;


!   system("($TET_ROOT/test/functional/security/audit/ts/api_filter/addfilter.cell)&");

    fptr = NULL;
    j = 0;
***************
*** 263,269 ****
      overall_status |= tp3_error;


!   system("($TET_ROOT/functional/security/audit/ts/api_filter/delfilter.cell)&");
    fptr = NULL;
    j = 0;
    while (fptr == NULL)
--- 284,290 ----
      overall_status |= tp3_error;


!   system("($TET_ROOT/test/functional/security/audit/ts/api_filter/delfilter.cell)&");
    fptr = NULL;
    j = 0;
    while (fptr == NULL)
***************
*** 279,284 ****
--- 300,306 ----
    fclose (fptr);
    remove (HANDSHAKE_FILE);

+   return(0);

  }

***************
*** 293,299 ****
    void (*test_case4) () = aud_testf_v1_0_c_epv.aud_testf_case4;


!   system("($TET_ROOT/functional/security/audit/ts/api_filter/addfilter.world)&");
    fptr = NULL;
    j = 0;
    while (fptr == NULL)
--- 315,321 ----
    void (*test_case4) () = aud_testf_v1_0_c_epv.aud_testf_case4;


!   system("($TET_ROOT/test/functional/security/audit/ts/api_filter/addfilter.world)&");
    fptr = NULL;
    j = 0;
    while (fptr == NULL)
***************
*** 315,321 ****
      overall_status |= tp4_error;


!   system("($TET_ROOT/functional/security/audit/ts/api_filter/delfilter.world)&");
    fptr = NULL;
    j = 0;
    while (fptr == NULL)
--- 337,343 ----
      overall_status |= tp4_error;


!   system("($TET_ROOT/test/functional/security/audit/ts/api_filter/delfilter.world)&");
    fptr = NULL;
    j = 0;
    while (fptr == NULL)
***************
*** 330,335 ****
--- 352,358 ----
       printf("deleting filter world took: %i\n", j);
    fclose (fptr);
    remove (HANDSHAKE_FILE);
+   return(0);

  }

***************
*** 345,351 ****



!   system("($TET_ROOT/functional/security/audit/ts/api_filter/addfilter.worldover)&");

    fptr = NULL;
    j = 0;
--- 368,374 ----



!   system("($TET_ROOT/test/functional/security/audit/ts/api_filter/addfilter.worldover)&");

    fptr = NULL;
    j = 0;
***************
*** 370,375 ****
--- 393,399 ----
  /*
     not removing the filter since needed in next test
  */
+   return(0);
  }


***************
*** 387,393 ****
    just adding principal filter with no action
  */

!   system("($TET_ROOT/functional/security/audit/ts/api_filter/addfilter.princ1noac)&");
    fptr = NULL;
    j = 0;
    while (fptr == NULL)
--- 411,417 ----
    just adding principal filter with no action
  */

!   system("($TET_ROOT/test/functional/security/audit/ts/api_filter/addfilter.princ1noac)&");
    fptr = NULL;
    j = 0;
    while (fptr == NULL)
***************
*** 409,415 ****
      overall_status |= tp6_error;


!   system("($TET_ROOT/functional/security/audit/ts/api_filter/delfilter.princ1)&");
    fptr = NULL;
    j = 0;
    while (fptr == NULL)
--- 433,439 ----
      overall_status |= tp6_error;


!   system("($TET_ROOT/test/functional/security/audit/ts/api_filter/delfilter.princ1)&");
    fptr = NULL;
    j = 0;
    while (fptr == NULL)
***************
*** 424,429 ****
--- 448,454 ----
        printf("deleting filter princ1 took: %i\n", j);
    fclose (fptr);
    remove (HANDSHAKE_FILE);
+   return(0);

  }

***************
*** 442,448 ****
    just adding group filter with no action, should override the world filter
  */

!   system("($TET_ROOT/functional/security/audit/ts/api_filter/addfilter.group1noac)&");
    fptr = NULL;
    j = 0;
    while (fptr == NULL)
--- 467,473 ----
    just adding group filter with no action, should override the world filter
  */
!   system("($TET_ROOT/test/functional/security/audit/ts/api_filter/addfilter.group1noac)&");
    fptr = NULL;
    j = 0;
    while (fptr == NULL)
***************
*** 465,471 ****



!   system("($TET_ROOT/functional/security/audit/ts/api_filter/delfilter.group1)&");
    fptr = NULL;
    j = 0;
    while (fptr == NULL)
--- 490,496 ----



!   system("($TET_ROOT/test/functional/security/audit/ts/api_filter/delfilter.group1)&");
    fptr = NULL;
    j = 0;
    while (fptr == NULL)
***************
*** 482,488 ****
    remove (HANDSHAKE_FILE);


!   system("($TET_ROOT/functional/security/audit/ts/api_filter/delfilter.worldover)&");
    fptr = NULL;
    j = 0;
    while (fptr == NULL)
--- 507,513 ----
    remove (HANDSHAKE_FILE);


!   system("($TET_ROOT/test/functional/security/audit/ts/api_filter/delfilter.worldover)&");
    fptr = NULL;
    j = 0;
    while (fptr == NULL)
***************
*** 497,502 ****
--- 522,528 ----
        printf("deleting filter world overridable took: %i\n", j);
    fclose (fptr);
    remove (HANDSHAKE_FILE);
+   return(0);

  }

***************
*** 513,519 ****
    void (*test_case8) () = aud_testf_v1_0_c_epv.aud_testf_case8;


!   system("($TET_ROOT/functional/security/audit/ts/api_filter/addfilter.princ1succalarm)&");
    fptr = NULL;
    j = 0;
    while (fptr == NULL)
--- 539,545 ----
    void (*test_case8) () = aud_testf_v1_0_c_epv.aud_testf_case8;


!   system("($TET_ROOT/test/functional/security/audit/ts/api_filter/addfilter.princ1succalarm)&");
    fptr = NULL;
    j = 0;
    while (fptr == NULL)
***************
*** 534,540 ****
      overall_status |= tp8_error;


!   system("($TET_ROOT/functional/security/audit/ts/api_filter/delfilter.princ1)&");
    fptr = NULL;
    j = 0;
    while (fptr == NULL)
--- 560,566 ----
      overall_status |= tp8_error;

!   system("($TET_ROOT/test/functional/security/audit/ts/api_filter/delfilter.princ1)&");
    fptr = NULL;
    j = 0;
    while (fptr == NULL)
***************
*** 549,554 ****
--- 575,581 ----
       printf("deleting filter princ1 took: %i\n", j);
      fclose (fptr);
      remove (HANDSHAKE_FILE);
+     return(0);

  }

***************
*** 564,570 ****
    void (*test_case9) () = aud_testf_v1_0_c_epv.aud_testf_case9;


!   system("($TET_ROOT/functional/security/audit/ts/api_filter/addfilter.princ1denialarm)&");
    fptr = NULL;
    j = 0;
    while (fptr == NULL)
--- 591,597 ----
    void (*test_case9) () = aud_testf_v1_0_c_epv.aud_testf_case9;


!   system("($TET_ROOT/test/functional/security/audit/ts/api_filter/addfilter.princ1denialarm)&");
    fptr = NULL;
    j = 0;
    while (fptr == NULL)
***************
*** 589,594 ****
--- 616,622 ----


  /*  not removing princ1 denial alarm filter since it is used by next test  */
+   return(0);
  }

***************
*** 612,617 ****
--- 640,646 ----


  /*  not removing princ1 denial alarm filter since it is used by next test  */
+   return(0);

  }

***************
*** 634,640 ****
      overall_status |= tp11_error;


!   system("($TET_ROOT/functional/security/audit/ts/api_filter/delfilter.princ1)&");
    fptr = NULL;
    j = 0;
    while (fptr == NULL)
--- 663,669 ----
      overall_status |= tp11_error;


!   system("($TET_ROOT/test/functional/security/audit/ts/api_filter/delfilter.princ1)&");
    fptr = NULL;
    j = 0;
    while (fptr == NULL)
***************
*** 649,654 ****
--- 678,684 ----
       printf("deleting filter princ1 took: %i\n", j);
      fclose (fptr);
      remove (HANDSHAKE_FILE);
+     return(0);

  }
***************
*** 799,805 ****

        rpc_binding_set_auth_info(bindings->binding_h[0],
                                  (unsigned_char_t *) server_name,
!                                   rpc_c_authn_level_pkt_privacy,
                                    rpc_c_authn_dce_private,
                                    (rpc_auth_identity_handle_t) login_context,
                                    rpc_c_authz_dce, &st);
--- 829,835 ----

        rpc_binding_set_auth_info(bindings->binding_h[0],
                                  (unsigned_char_t *) server_name,
!                                 rpc_c_authn_level_pkt_integrity,
                                    rpc_c_authn_dce_private,
                                    (rpc_auth_identity_handle_t) login_context,
                                    rpc_c_authz_dce, &st);
***************
*** 924,930 ****

        rpc_binding_set_auth_info(bindings->binding_h[0],
                                  (unsigned_char_t *) server_name,
!                                   rpc_c_authn_level_pkt_privacy,
                                    rpc_c_authn_dce_private,
                                    (rpc_auth_identity_handle_t) login_context,
                                    rpc_c_authz_dce, &st);
--- 954,960 ----

        rpc_binding_set_auth_info(bindings->binding_h[0],
                                  (unsigned_char_t *) server_name,
!                                 rpc_c_authn_level_pkt_integrity,
                                    rpc_c_authn_dce_private,
                                    (rpc_auth_identity_handle_t) login_context,
                                    rpc_c_authz_dce, &st);
***************
*** 959,965 ****

      }
      ENDTRY;
-
  }


--- 989,994 ----
*** /vob/dce.src.test/src/test/security/audit/ts/api_log/aud_test.c@@/main/7    Tue Sep 27 14:18:04 1994
--- /vob/dce.src.test/src/test/security/audit/ts/api_log/aud_test.c@@/main/HPDCE02/3    Fri Aug 18 16:10:17 1995
***************
*** 8,13 ****
--- 8,29 ----
  /*
   * HISTORY
   * $Log:	c013182,v $
# Revision 1.4  96/03/21  11:25:59  root
# changed fields: Status  Fixed In Baseline   new/changed/deleted note(s) [white_r 03/21/96 public]
# 
# Revision 1.3  95/11/03  14:50:50  root
# changed fields:  new/changed/deleted note(s) [trant 11/02/95 public]
# 
# Revision 1.2  95/10/31  17:45:27  root
# changed fields: Affected File(s)  
# 
# Revision 1.1  95/10/31  17:23:07  root
# new CR
# 
+  * Revision /main/HPDCE02/3  1995/08/18  20:10 UTC  kline_s
+  *    Merge fix for CHFts16115
+  *
+  * Revision /main/kline_s_mothra/3  1995/08/17  21:33 UTC  kline_s
+  *    CHFts16115: Remove DES_HIDDEN conditional - only using integrity
+  *    protection level instead of using the privacy protection level
+  *    for Domestic.  Required to avoid conflicts due to singular
+  *    Domestic/Export release.
+  *
+  * Revision /main/kline_s_mothra/2  1995/07/06  19:45 UTC  kline_s
+  *    Enable tests to function properly using international (ie. non-DES) bits.
+  *
+  * Revision /main/kline_s_mothra/1  1995/06/27  02:07 UTC  kline_s
+  *    Clean up functions to actually provide return values (and thereby
+  *    fixing all the compile-time warnings.
+  *
   * Revision 1.1.2.6  1994/09/27  17:32:37  weisz
   *    CR 10703: added tests for trail full situation.
   *    [1994/09/27  17:31:22  weisz]
***************
*** 118,123 ****
--- 134,140 ----
      non_dt_fatal_error = TRUE;
      pthread_cancel(distinguished_task);
      pthread_exit((void *)-1);
+     return(0);
  }

  compose_server_name
***************
*** 136,141 ****
--- 153,159 ----
          strcat(servername, name);
          strcat(servername, "/self");
  printf("servername= %s\n", servername);
+         return(0);
  }

  int tp1()
***************
*** 146,151 ****
--- 164,170 ----
   if (rc != 0)
     overall_status |= tp1_error;
  printf("tp1: rc= %i, overall_status= %lx\n", rc, overall_status);
+  return(0);
  }

  int tp2()
***************
*** 156,161 ****
--- 175,181 ----
   if (rc != 0)
     overall_status |= tp2_error;
  printf("tp2: rc= %i, overall_status= %lx\n", rc, overall_status);
+  return(0);
  }


***************
*** 167,172 ****
--- 187,193 ----
   if (rc != 0)
     overall_status |= tp3_error;
  printf("tp3: rc= %i, overall_status= %lx\n", rc, overall_status);
+  return(0);
  }

  int tp4()
***************
*** 177,182 ****
--- 198,204 ----
   if (rc != 0)
     overall_status |= tp4_error;
  printf("tp4: rc= %i, overall_status= %lx\n", rc, overall_status);
+  return(0);
  }

  int tp5()
***************
*** 187,192 ****
--- 209,215 ----
   if (rc != 0)
     overall_status |= tp5_error;
  printf("tp5: rc= %i, overall_status= %lx\n", rc, overall_status);
+  return(0);
  }


***************
*** 198,203 ****
--- 221,227 ----
   if (rc != 0)
     overall_status |= tp6_error;
  printf("tp6: rc= %i, overall_status= %lx\n", rc, overall_status);
+  return(0);
  }

  int tp7()
***************
*** 208,213 ****
--- 232,238 ----
   if (rc != 0)
     overall_status |= tp7_error;
  printf("tp7: rc= %i, overall_status= %lx\n", rc, overall_status);
+  return(0);
  }

  int tp8()
***************
*** 218,223 ****
--- 243,249 ----
   if (rc != 0)
     overall_status |= tp8_error;
  printf("tp8: rc= %i, overall_status= %lx\n", rc, overall_status);
+  return(0);
  }

  int tp9()
***************
*** 228,233 ****
--- 254,260 ----
   if (rc != 0)
     overall_status |= tp9_error;
  printf("tp9: rc= %i, overall_status= %lx\n", rc, overall_status);
+  return(0);
  }

  int tp10()
***************
*** 238,243 ****
--- 265,271 ----
   if (rc != 0)
     overall_status |= tp10_error;
  printf("tp10: rc= %i, overall_status= %lx\n", rc, overall_status);
+  return(0);
  }

  int tp11()
***************
*** 248,253 ****
--- 276,282 ----
   if (rc != 0)
     overall_status |= tp11_error;
  printf("tp11: rc= %i, overall_status= %lx\n", rc, overall_status);
+  return(0);
  }

  int tp12()
***************
*** 258,263 ****
--- 287,293 ----
   if (rc != 0)
     overall_status |= tp12_error;
  printf("tp12: rc= %i, overall_status= %lx\n", rc, overall_status);
+  return(0);
  }


***************
*** 269,274 ****
--- 299,305 ----
   if (rc != 0)
     overall_status |= tp13_error;
  printf("tp13: rc= %i, overall_status= %lx\n", rc, overall_status);
+  return(0);
  }


***************
*** 280,285 ****
--- 311,317 ----
   if (rc != 0)
     overall_status |= tp14_error;
  printf("tp14: rc= %i, overall_status= %lx\n", rc, overall_status);
+  return(0);
  }

  int tp15()
***************
*** 290,295 ****
--- 322,328 ----
   if (rc != 0)
     overall_status |= tp15_error;
  printf("tp15: rc= %i, overall_status= %lx\n", rc, overall_status);
+  return(0);
  }

  int tp16()
***************
*** 300,305 ****
--- 333,339 ----
   if (rc != 0)
     overall_status |= tp16_error;
  printf("tp16: rc= %i, overall_status= %lx\n", rc, overall_status);
+  return(0);
  }

  int tp17()
***************
*** 310,315 ****
--- 344,350 ----
   if (rc != 0)
     overall_status |= tp17_error;
  printf("tp17: rc= %i, overall_status= %lx\n", rc, overall_status);
+  return(0);
  }

  int tp18()
***************
*** 320,325 ****
--- 355,361 ----
   if (rc != 0)
     overall_status |= tp18_error;
  printf("tp18: rc= %i, overall_status= %lx\n", rc, overall_status);
+  return(0);
  }

  int tp19()
***************
*** 330,335 ****
--- 366,372 ----
   if (rc != 0)
     overall_status |= tp19_error;
  printf("tp19: rc= %i, overall_status= %lx\n", rc, overall_status);
+  return(0);
  }

  int tp20()
***************
*** 340,345 ****
--- 377,383 ----
   if (rc != 0)
     overall_status |= tp20_error;
  printf("tp20: rc= %i, overall_status= %lx\n", rc, overall_status);
+  return(0);
  }

  int tp21()
***************
*** 350,355 ****
--- 388,394 ----
   if (rc != 0)
     overall_status |= tp21_error;
  printf("tp21: rc= %i, overall_status= %lx\n", rc, overall_status);
+  return(0);
  }


***************
*** 361,366 ****
--- 400,406 ----
   if (rc != 0)
     overall_status |= tp22_error;
  printf("tp22: rc= %i, overall_status= %lx\n", rc, overall_status);
+  return(0);
  }


***************
*** 442,448 ****

        rpc_binding_set_auth_info(bindings->binding_h[0],
                                  (unsigned_char_t *) server_name,
!                                   rpc_c_authn_level_pkt_privacy,
                                    rpc_c_authn_dce_private,
                                    (rpc_auth_identity_handle_t) login_context,
                                    rpc_c_authz_dce, &st);
--- 482,488 ----

        rpc_binding_set_auth_info(bindings->binding_h[0],
                                  (unsigned_char_t *) server_name,
!                                 rpc_c_authn_level_pkt_integrity,
                                    rpc_c_authn_dce_private,
                                    (rpc_auth_identity_handle_t) login_context,
                                    rpc_c_authz_dce, &st);
***************
*** 482,488 ****

        rpc_binding_set_auth_info(bindings->binding_h[0],
                                  (unsigned_char_t *) server_name,
!                                   rpc_c_authn_level_pkt_privacy,
                                    rpc_c_authn_dce_private,
                                    (rpc_auth_identity_handle_t) login_context,
                                    rpc_c_authz_dce, &st);
--- 522,528 ----

        rpc_binding_set_auth_info(bindings->binding_h[0],
                                  (unsigned_char_t *) server_name,
!                                 rpc_c_authn_level_pkt_integrity,
                                    rpc_c_authn_dce_private,
                                    (rpc_auth_identity_handle_t) login_context,
                                    rpc_c_authz_dce, &st);
*** /vob/dce.src.test/src/test/security/audit/ts/api_log/aud_test_rpc_manager.c@@/main/16       Wed Oct 26 23:28:36
1994
--- /vob/dce.src.test/src/test/security/audit/ts/api_log/aud_test_rpc_manager.c@@/[trant 11/02/95 public]
For this OT, please ONLY pickup the changes to support 13119 and missing 
return statements.  For all "system("TET_ROOT/functional/...")" statements
which I think already mentioned in 13185, please do not change now.  There are
tet files under .../src/test/security/audit that I think we should use instead 
of .../src/test/functional/security.  In addition, OSF has noticed me that 
audit should be a part of security component.

[03/21/96 public]
Changes included in DCE1.2. Fixed/Closed



CR Number                     : 13050
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : sec_rgy_attr_schema test
Short Description             : uninitialized param in func tp7()
Reported Date                 : 8/17/95
Found in Baseline             : 1.1wp
Found Date                    : 8/17/95
Severity                      : A
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : sec_rgy_attr_sch.c
Sensitivity                   : public

[8/23/95 public]

(from Dave Hinman @ Gradient)

In the file:

 test/functional/security/ts/client/rca/sec_rgy_attr_sch/sec_rgy_attr_sch.c

the modify_parts parameter passed to sec_rgy_attr_sch_update_entry() is
unitialized.  If the random value it contains holds the flag for one of 
the schema entry parts that aren't legal for the *_update_entry() operation,
the test will fail.

Proposed Solution:

	Initialize the modify_parts variable. 


+ 	modify_parts = sec_attr_schema_part_acl_mgrs | 
+			sec_attr_schema_part_scope;

	sec_rgy_attr_sch_update_entry(write_context, sec_master_site_name,
		modify_parts, sch_entry_p, st_p);
	CHECK_RESULT(TRUE, "sec_rgy_attr_sch_update_entry()", st_p,
error_status_ok);

[12/20/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 13021
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : sec_rgy_attr tests
Short Description             : sec_rgy_attr functional
tests, tp20 and tp21, fail
Reported Date                 : 7/31/95
Found in Baseline             : 1.1
Found Date                    : 7/31/95
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : sec_rgy_attr.c
Sensitivity                   : public

[8/4/95 public]

The two tests tp20 and tp21 within
src/test/functional/security/ts/client/rca/sec_rgy_attr/sec_rgy_attr.c
both fail.  Here is the source:
- - - -
static void
tp20()  /* successful test for sec_rgy_attr_lookup_by_id */
{
    tet_infoline("test case (tp20)");
    Create_Schema_Entry();
    attr_lookup(test_integer, "for 1 attr id", 1);
    Delete_Schema_Entry();
    tet_result(TET_PASS);
}

static void
tp21()  /* successful test for sec_rgy_attr_lookup_by_id */
{
    tet_infoline("test case (tp21)");
    Create_Schema_Entry();
    attr_lookup(test_integer, "for 0 attr ids", 0);
    Delete_Schema_Entry();
    tet_result(TET_PASS);
}
- - - -

Both tests create a schema entry, do a lookup, and delete a schema entry.
The problem is that the schema entry is created with the
reserved schema_entry_flags set.  Here is the source:
- - - -
rgy_res_attr_sch_entry_t   rgy_res_attr_sch_entry[] = {
{ ATTR_NAME, ATTR_ID,
  sec_attr_enc_integer,
  "06ab9320-0191-11ca-a9e8-08001e039d7d",       /* person from rsdb_acl.c */
  sec_acl_perm_mgmt_info,              sec_acl_perm_mgmt_info,
  sec_acl_perm_mgmt_info,              sec_acl_perm_mgmt_info,
  (sec_attr_sch_entry_reserved | sec_attr_sch_entry_use_defaults),
  sec_attr_intercell_act_reject,       sec_attr_trig_type_none,
  NULL,                                "",
  "values: {0=ENFORCE-BY-THIRD-PARTY, 1=ENFORCE-BY-REGISTRY}" }
};
- - - -

Setting the sec_attr_sch_entry_reserved flag prevents the schema
entry from being deleted. (reference: Application Dev Ref, page 6-22).

The two calls to Delete_Schema_Entry() both fail.


Repeat By:  sec_rgy_attr test

Proposed Solution:  I deleted the sec_attr_sch_entry_reserved flag.

[12/20/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12868
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : sec_salvage_db
Short Description             : need to update salvager_sample.prt for WP sec_salvage_db testing.
Reported Date                 : 5/15/95
Found in Baseline             : 1.1wp
Found Date                    : 5/15/95
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.2.1
Affected File(s)              : src/test/security/api/moretests/salvager_sample.prt
Sensitivity                   : public

[5/15/95 public]

This file is not updated in your waranty patch release, please update
it for sec_salvage_db test.

Here is the diff of .../src/test/security/api/moretests/salvager_sample.prt
comparing with DCE 1.1 version. ( diff old new )

9,35d8
< # Revision /main/HPDCE02/SEC_migrate_merge/2  1995/05/15  16:21 UTC  hanfei
< #     change Master_Global_Software_Rev and Prev_Propagation_Type.
< #
< # Revision /main/HPDCE02/SEC_migrate/hanfei_migrate_bl2/2  1995/04/21  20:03 UTC  hanfei
< #     modify Attr_Acl_Mgr_Type = group_obj -> principal
< #
< # Revision /main/HPDCE02/SEC_migrate/hanfei_migrate_bl2/1  1995/04/12  19:01 UTC  hanfei
< #     add xattrschema acls entries.
< #
< # Revision /main/HPDCE02/hanfei_migrate_bl1/1  1995/03/01  16:02 UTC  hanfei
< #     add migration data types and merge in replist acls.
< #
< # Revision /main/HPDCE02/hanfei_bugfix_bl2/2  1995/04/10  14:05 UTC  hanfei
< #     take out test schema
< #
< # Revision /main/HPDCE02/hanfei_bugfix_bl2/1  1995/03/13  16:06 UTC  hanfei
< #     change Is_Required_Flag = false for host/.../self
< #
< # Revision /main/HPDCE02/4  1995/01/18  19:38 UTC  hanfei
< #     modify replist acl entries because sec_create_db did it differently.
< #
< # Revision /main/HPDCE02/2  1994/12/13  16:23 UTC  hanfei
< #     Modify attr_bind and scope output for changes in OSF unintegrated tree.
< #
< # Revision /main/hanfei_svg_bl2/1  1994/11/02  18:28 UTC  hanfei
< #     Added ERA entries for sec_salvage_db ERA enhancement.
< #
55,202d27
< ****************************** attr_schema.prt  *********************
<
< Record_Number = 1
< Name = pre_auth_req
< UUID = XXX
< Attr_Encoding = attr_enc_integer
< Num_Attr_Acl_Mgr_Entries = 1
< Attr_Acl_Mgr_Type = principal
< Attr_Acl_Mgr_Query_Entry = -----m---
< Attr_Acl_Mgr_Update_Entry = -----m---
< Attr_Acl_Mgr_Test_Entry = -----m---
< Attr_Acl_Mgr_Delete_Entry = -----m---
< Attr_Schema_Entry_Flag = attr_sch_entry_reserved
< Attr_Schema_Entry_Flag = attr_sch_entry_use_defaults
< Attr_Intercell_Action = reject
< Attr_Trig_Type = none
< Attr_Schema_Scope =
< Attr_Schema_Comment = values: {0=NONE, 1=PADATA_ENC_TIMESTAMPS, 2=PADATA_ENC_THIRD_PARTY}
< ================================================================================
< Record_Number = 2
< Name = pwd_val_type
< UUID = XXX
< Attr_Encoding = attr_enc_integer
< Num_Attr_Acl_Mgr_Entries = 1
< Attr_Acl_Mgr_Type = principal
< Attr_Acl_Mgr_Query_Entry = -----m---
< Attr_Acl_Mgr_Update_Entry = -----m---
< Attr_Acl_Mgr_Test_Entry = -----m---
< Attr_Acl_Mgr_Delete_Entry = -----m---
< Attr_Schema_Entry_Flag = attr_sch_entry_reserved
< Attr_Schema_Entry_Flag = attr_sch_entry_use_defaults
< Attr_Intercell_Action = reject
< Attr_Trig_Type = none
< Attr_Schema_Scope =
< Attr_Schema_Comment = values: {0=NONE, 1=USER_SELECT, 2=USER_CAN_SELECT, 3=GENERATION_REQUIRED}
< ================================================================================
< Record_Number = 3
< Name = pwd_mgmt_binding
< UUID = XXX
< Attr_Encoding = attr_enc_binding
< Num_Attr_Acl_Mgr_Entries = 1
< Attr_Acl_Mgr_Type = principal
< Attr_Acl_Mgr_Query_Entry = -----m---
< Attr_Acl_Mgr_Update_Entry = -----m---
< Attr_Acl_Mgr_Test_Entry = -----m---
< Attr_Acl_Mgr_Delete_Entry = -----m---
< Attr_Schema_Entry_Flag = attr_sch_entry_reserved
< Attr_Schema_Entry_Flag = attr_sch_entry_use_defaults
< Attr_Intercell_Action = reject
< Attr_Trig_Type = none
< Attr_Schema_Scope =
< Attr_Schema_Comment = binding to server exporting the password strength and generation interfaces
< ================================================================================
< Record_Number = 4
< Name = X500_DN
< UUID = XXX
< Attr_Encoding = attr_enc_printstring
< Num_Attr_Acl_Mgr_Entries = 1
< Attr_Acl_Mgr_Type = principal
< Attr_Acl_Mgr_Query_Entry = r--------
< Attr_Acl_Mgr_Update_Entry = -----m---
< Attr_Acl_Mgr_Test_Entry = r--------
< Attr_Acl_Mgr_Delete_Entry = -----m---
< Attr_Schema_Entry_Flag = attr_sch_entry_unique
< Attr_Schema_Entry_Flag = attr_sch_entry_reserved
< Attr_Intercell_Action = accept
< Attr_Trig_Type = none
< Attr_Schema_Scope =
< Attr_Schema_Comment = The principal's X500 Distinguished Name
< ================================================================================
< Record_Number = 5
< Name = X500_DSA_Admin
< UUID = XXX
< Attr_Encoding = attr_enc_printstring_array
< Num_Attr_Acl_Mgr_Entries = 1
< Attr_Acl_Mgr_Type = principal
< Attr_Acl_Mgr_Query_Entry = r--------
< Attr_Acl_Mgr_Update_Entry = -----m---
< Attr_Acl_Mgr_Test_Entry = r--------
< Attr_Acl_Mgr_Delete_Entry = -----m---
< Attr_Schema_Entry_Flag = attr_sch_entry_reserved
< Attr_Schema_Entry_Flag = attr_sch_entry_use_defaults
< Attr_Intercell_Action = reject
< Attr_Trig_Type = none
< Attr_Schema_Scope =
< Attr_Schema_Comment = list of DSAs that the principal is allowed to administer
< ================================================================================
< Record_Number = 6
< Name = disable_time_interval
< UUID = XXX
< Attr_Encoding = attr_enc_integer
< Num_Attr_Acl_Mgr_Entries = 1
< Attr_Acl_Mgr_Type = principal
< Attr_Acl_Mgr_Query_Entry = -----m---
< Attr_Acl_Mgr_Update_Entry = -----m---
< Attr_Acl_Mgr_Test_Entry = -----m---
< Attr_Acl_Mgr_Delete_Entry = -----m---
< Attr_Schema_Entry_Flag = attr_sch_entry_unique
< Attr_Schema_Entry_Flag = attr_sch_entry_reserved
< Attr_Intercell_Action = reject
< Attr_Trig_Type = none
< Attr_Schema_Scope =
< Attr_Schema_Comment = values: {number of seconds to disable account-86400(60*60*24) is one day}
< ================================================================================
< Record_Number = 7
< Name = max_invalid_attempts
< UUID = XXX
< Attr_Encoding = attr_enc_integer
< Num_Attr_Acl_Mgr_Entries = 1
< Attr_Acl_Mgr_Type = principal
< Attr_Acl_Mgr_Query_Entry = -----m---
< Attr_Acl_Mgr_Update_Entry = -----m---
< Attr_Acl_Mgr_Test_Entry = -----m---
< Attr_Acl_Mgr_Delete_Entry = -----m---
< Attr_Schema_Entry_Flag = attr_sch_entry_unique
< Attr_Schema_Entry_Flag = attr_sch_entry_reserved
< Attr_Intercell_Action = reject
< Attr_Trig_Type = none
< Attr_Schema_Scope =
< Attr_Schema_Comment = values: {number of invalid attempts allowed before account is disabled}
< ================================================================================
< Record_Number = 8
< Name = passwd_override
< UUID = XXX
< Attr_Encoding = attr_enc_integer
< Num_Attr_Acl_Mgr_Entries = 1
< Attr_Acl_Mgr_Type = principal
< Attr_Acl_Mgr_Query_Entry = -----m---
< Attr_Acl_Mgr_Update_Entry = -----m---
< Attr_Acl_Mgr_Test_Entry = -----m---
< Attr_Acl_Mgr_Delete_Entry = -----m---
< Attr_Schema_Entry_Flag = attr_sch_entry_unique
< Attr_Schema_Entry_Flag = attr_sch_entry_reserved
< Attr_Intercell_Action = reject
< Attr_Trig_Type = none
< Attr_Schema_Scope =
< Attr_Schema_Comment = values: {the ability to not be restricted by passwd expiration}
< ================================================================================
< Record_Number = 9
< Xattrschema_Name = xattrschema
< Obj_Acl_Def_Cell_Name = /.../XXX
< Num_Acl_Entries = 4
< Obj_Acl_Entry = any_other:r----
< Obj_Acl_Entry = other_obj:r----
< Obj_Acl_Entry = unauthenticated:r----
< Obj_Acl_Entry = user:root:rcidm
< ================================================================================
<
305d129
< Num_Attr_List_Entries = 0
325d148
< Num_Attr_List_Entries = 0
344d166
< Num_Attr_List_Entries = 0
364d185
< Num_Attr_List_Entries = 0
383d203
< Num_Attr_List_Entries = 0
402d221
< Num_Attr_List_Entries = 0
424d242
< Num_Attr_List_Entries = 0
443d260
< Num_Attr_List_Entries = 0
462d278
< Num_Attr_List_Entries = 0
483d298
< Num_Attr_List_Entries = 0
505d319
< Num_Attr_List_Entries = 0
529d342
< Num_Attr_List_Entries = 0
548d360
< Num_Attr_List_Entries = 0
566d377
< Num_Attr_List_Entries = 0
585d395
< Num_Attr_List_Entries = 0
694d503
< Num_Attr_List_Entries = 0
719d527
< Num_Attr_List_Entries = 0
738d545
< Num_Attr_List_Entries = 0
758d564
< Num_Attr_List_Entries = 0
780d585
< Num_Attr_List_Entries = 0
836,839c641,644
< Obj_Acl_Entry = any_other:r----
< Obj_Acl_Entry = other_obj:r----
< Obj_Acl_Entry = unauthenticated:r----
< Obj_Acl_Entry = user:root:rcmas
---
> Obj_Acl_Entry = any_other:r---
> Obj_Acl_Entry = other_obj:r---
> Obj_Acl_Entry = unauthenticated:r---
> Obj_Acl_Entry = user:root:rcma
1016d820
< Num_Attr_List_Entries = 0
1068d871
< Num_Attr_List_Entries = 0
1120d922
< Num_Attr_List_Entries = 0
1172d973
< Num_Attr_List_Entries = 0
1222c1023
< Is_Required_Flag = false
---
> Is_Required_Flag = true
1224d1024
< Num_Attr_List_Entries = 0
1276d1075
< Num_Attr_List_Entries = 0
1328d1126
< Num_Attr_List_Entries = 0
1346d1143
< Num_Attr_List_Entries = 0
1365d1161
< Num_Attr_List_Entries = 0
1417d1212
< Num_Attr_List_Entries = 0
1471d1265
< Num_Attr_List_Entries = 0
1490d1283
< Num_Attr_List_Entries = 0
1509d1301
< Num_Attr_List_Entries = 0
1562d1353
< Num_Attr_List_Entries = 0
1614d1404
< Num_Attr_List_Entries = 0
1672d1461
< Num_Attr_List_Entries = 0
1727d1515
< Num_Attr_List_Entries = 0
1745d1532
< Num_Attr_List_Entries = 0
1797d1583
< Num_Attr_List_Entries = 0
1815d1600
< Prev_Propagation_Type = unknown
1817,1823c1602
< ================================================================================
< Record_Number = 2
< Replist_Name = replist
< Obj_Acl_Def_Cell_Name = /.../XXX
< Num_Acl_Entries = 1
< Obj_Acl_Entry = user:root:cidmA-
<
---
>
1826c1605
< Rgy_State_File_Version = 8
---
> Rgy_State_File_Version = 6
1831c1610,1611
< Master_File_Version = 2
---
> Software_Version = 0
> Master_File_Version = 1
1835d1614
< Master_Global_Software_Rev = 2

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12852
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 12581
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : gssapi test
Short Description             : free's dce_msg_get_cat_msg return data
Reported Date                 : 4/28/95
Found in Baseline             : 1.1
Found Date                    : 4/28/95
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.2.1
Affected File(s)              : dce_msg_get_cat_msg
Sensitivity                   : public

[4/28/95 public]

src/test/security/api/gssapi/test-gssapi.c

At lines  997 and 1014 the data returned by dce_msg_get_cat_msg
is free'd.  That's a no-no; remove those lines.  See the related
OT CR for details.

[12/13/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12821
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 12613
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : secval
Short Description             : secval_status_6_P uses incorrect
dcecp command language syntax.
Reported Date                 : 3/16/95
Found in Baseline             : 1.1
Found Date                    : 3/16/95
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.2.1
Affected File(s)              : src/test/functional/admin/dcecp/ts/secval/secval_status_P.tcl
Sensitivity                   : public

[3/16/95 public]

As reported in OT CR 12613, secval_status_6_P fails, yielding
{1 {Bad or wrong arguments}} when the test expects {0 1}; but
this was not addressed in the resolution of 12613.

The contents of the test case are

	list [catch {secval status {$DCP_SR_PROTSEQ $DCP_SR_IP_ADDR}} msg] $msg

This fails because (as noted in the OSF DCE Admin Guide to Core Components'
chapter on dcecp command language) curly brackets disable $ variable
substitution.  This can be verified by invoking dcecp and trying the
following commands;

dcecp> set foobar grundge
dcecp> list $foobar
	-- yields "grundge"
dcecp> list {$foobar}
	-- yields "{$foobar}"

Therefore, no variable substitution is occurring for $DCP_SR_PROTSEQ and
$DCP_SR_IP_ADDR in secval_status_6_P.

My current workaround is to edit secval_status_P.tcl to substitute
the test system's protseq and IP-addr for these variables in the
broken line of secval_status_6_P; but this needs to be fixed in a
more portable way.

[3/22/95 public]

The solution is to create the desired string before the test; to wit:

    # Setup steps
    set temp1 [list $DCP_SR_PROTSEQ $DCP_SR_IP_ADDR]

    # Run the test
    test {
        list [catch {secval status $temp1} msg] $msg
    } compare_strings {0 1}

This works.

[3/16/95 public]

A better solution : use "" instead of {} to delimit the arguments of catch;

    # Setup steps

    # Run the test
    test {
        list [catch "secval status {$DCP_SR_PROTSEQ $DCP_SR_IP_ADDR}" msg] $msg
    } compare_strings {0 1}

This is also consistent with the other tests...

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12817
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : test needs a bit more cleanup...
Reported Date                 : 3/14/95
Found in Baseline             : 1.1
Found Date                    : 3/14/95
Severity                      : E
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.2.1
Affected File(s)              : src/test/functional/admin/dcecp/ts/rgy/schema_create_P.tcl
Sensitivity                   : public

[3/14/95 public]

schema_create_49_P and schema_create_50_P create extended attribute schemas
with the "reserved" flag set.  The cleanup step for these cases is

    if {[dcp_wrap {xattrschema delete /.:/sec/xattrschema/schema_create_50_P}] != 0} {return;}

which fails because it is not legal to delete an extended attribute schema
with the reserved bit set.  These two cases need an additional cleanup step
prior to the delete, namely

    if {[dcp_wrap {xattrschema modify /.:/sec/xattrschema/schema_create_50_P -reserved no}] != 0} {return;}

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12809
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : osf1
Component Name                : dcecp
Subcomponent Name             : sec
Short Description             : bad TET format in scenario file
Reported Date                 : 2/28/95
Found in Baseline             : 1.1
Found Date                    : 2/28/95
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.2.1
Affected File(s)              : test/functional/admin/dcecp/tet_scen
Sensitivity                   : public

[2/28/95 public]

test/functional/admin/dcecp/tet_scen contains the lines (under the "registry"
test case definition);
	/ts/rgy/registry_set_N.tcl 1-12
	/ts/rgy/registry_set_N.tcl 13
TET does not like this syntax, and fails to execute the indicated tests.
The proper syntax is
	/ts/rgy/registry_set_N.tcl{1-12}
	/ts/rgy/registry_set_N.tcl{13}

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12790
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : aud
Short Description             : Incorrect expected output in audfilter_modify_24_P
Reported Date                 : 2/7/95
Found in Baseline             : 1.1
Found Date                    : 2/7/95
Severity                      : E
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : src/test/functional/admin/dcecp/ts/aud/audfilter_modify_P.tcl
Sensitivity                   : public

[2/7/95 public]

proc audfilter_modify_24_P() expects an incorrect output from the test.

The expected output is
    {dce_audit_filter_query {success failure} alarm}
    {{dce_dts_mgt_modify dce_audit_filter_query} denial log}
    {dce_dts_time_provider success log}
    {dce_dts_time_provider failure all}
    {dce_dts_time_provider denial alarm}
    {dce_audit_filter_query {success failure} alarm}
    {{dce_dts_mgt_modify dce_audit_filter_query} denial log}

The output should be

    {dce_audit_filter_query {success failure} alarm}
    {{dce_dts_mgt_modify dce_audit_filter_query} denial log}
    {dce_dts_time_provider success log}
    {dce_dts_time_provider failure all}
    {dce_dts_time_provider denial alarm}
    {dce_audit_filter_query {success failure} alarm}
    {{dce_dts_mgt_modify dce_audit_filter_query} denial log}
    {dce_dts_mgt_query failure all}
    {dce_dts_time_provider failure all}
    {dce_audit_filter_query {success failure} alarm}
    {{dce_dts_mgt_modify dce_audit_filter_query} denial log}

The output expected by the test fails to list the filters "world" and
"world_overridable".

[12/9/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12720
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : tests cause test failures
Reported Date                 : 10/25/94
Found in Baseline             : 1.1b22
Found Date                    : 10/25/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2
Affected File(s)              : tet_scen, rgy_*_*.tcl
Sensitivity                   : public

[10/25/94 public]
There are several problems with running the entire dcecp test suite at 
once. Primarily, registry tests early in the suite often put the replica
in a state where it no longer receives updates. This causes subsequent 
tests in the suite to fail because the replica is not receiveing updates.

The test suite should be modified so that the registry tests do not cause 
this condition, or reset the replica to a functioning state after the
registry tests complete.

[09/13/95 public]
Modified the 'all' test suite, as well as a bunch of the registry tests
so they are not destructive.  This was fixed as part of the HP 1.1 Warranty
Patch submission.



CR Number                     : 12694
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp audtrail test fails
Reported Date                 : 10/20/94
Found in Baseline             : 1.1b22
Found Date                    : 10/20/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2
Affected File(s)              : trail1, trail1.md_index, trial2, trail2.md_index
Sensitivity                   : public

[10/20/94 public]

The followingfailures were found in the journal file:

...
520|0 1 13657 1 1|audtrail_show_4_P: Check that we can show an audit trail file.
520|0 1 13657 1 2|Test returned {Buffer not usable by IDL Encoding Services}
520|0 1 13657 1 3|Test Failed.
220|0 1 1 13:25:13|FAIL
410|0 1 1 13:25:14|IC End
400|0 2 1 13:25:14|IC Start
200|0 1 13:25:14|TP Start
520|0 1 13657 1 4|audtrail_show_5_P: Check that we can show an audit trail file
without list braces.
520|0 1 13657 1 5|Test returned {Buffer not usable by IDL Encoding Services}
520|0 1 13657 1 6|Test Failed.
220|0 1 1 13:25:14|FAIL
410|0 2 1 13:25:14|IC End
400|0 3 1 13:25:15|IC Start
200|0 1 13:25:15|TP Start
520|0 1 13657 1 7|audtrail_show_6_P: Check that we can show a list of audit trai
l files.
520|0 1 13657 1 8|Test returned {Buffer not usable by IDL Encoding Services}
520|0 1 13657 1 9|Test Failed.
220|0 1 1 13:25:15|FAIL
410|0 3 1 13:25:15|IC End
400|0 4 1 13:25:16|IC Start
200|0 1 13:25:16|TP Start
520|0 1 13657 1 10|audtrail_show_7_P: Check that we can dump an audit trail to a
 file using -to.
520|0 1 13657 1 11|Test returned {Could not open '/tmp/trail.out' for output.}
520|0 1 13657 1 12|Test Failed.
220|0 1 1 13:25:16|FAIL

[09/13/95 public]
Put in correct audtrail files.  Fixed in HP 1.1 Warranty Patch submission.
Z



CR Number                     : 12693
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp audevents test fails
Reported Date                 : 10/20/94
Found in Baseline             : 1.1b22
Found Date                    : 10/20/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2
Affected File(s)              : audevents_show_P.tcl
Sensitivity                   : public

[10/20/94 public]

The following error conditions were found in the jounal file:

...
520|0 1 13787 1 1|audevents_show_3_P: Check that we can show a single event clas
s.
520|0 1 13787 1 2|==== Contents of test case:
520|0 1 13787 1 3|{     audevents show {dce_audit_filter_modify}     }
520|0 1 13787 1 4|Test completed successfully.
520|0 1 13787 1 5|== Test output was:
520|0 1 13787 1 6|{{dce_audit_filter_modify 0x300 0x303 0x304}}
520|0 1 13787 1 7|== Expected output was:
520|0 1 13787 1 8|{{dce_audit_filter_modify 0x100 0x103 0x104}}
520|0 1 13787 1 9|Test Failed.
220|0 1 1 13:24:44|FAIL
410|0 1 1 13:24:44|IC End
400|0 2 1 13:24:44|IC Start
200|0 1 13:24:44|TP Start
520|0 1 13787 1 10|audevents_show_4_P: Check that we can show a list of event cl
asses.
520|0 1 13787 1 11|==== Contents of test case:
520|0 1 13787 1 12|{    audevents show [audevents cat]     }
520|0 1 13787 1 13|Test completed successfully.
520|0 1 13787 1 14|== Test output was:
520|0 1 13787 1 15|{{dce_audit_admin_modify 0x305 0x306 0x307 0x308} {dce_audit_
admin_query 0x309 0x30a} {dce_audit_filter_modify 0x300 0x303 0x304} {dce_audit_
filter_query 0x301 0x302} {dce_dts_mgt_modify 0x200 0x201 0x202 0x203 0x207 0x20
8 0x209 0x20a} {dce_dts_mgt_query 0x20b 0x20c 0x20d 0x20e 0x20f 0x210} {dce_dts_
synch 0x204 0x205 0x206} {dce_dts_time_provider 0x211 0x212} {dce_sec_authent 0x
101 0x102 0x103 0x104 0x10c 0x125} {dce_sec_control 0x105 0x106 0x107 0x108 0x10
9 0x10a 0x10b 0x10c 0x10d 0x10
520|0 1 13787 1 16|== Expected output was:
520|0 1 13787 1 17|{{dce_audit_admin_modify 0x105 0x106 0x107 0x108} {dce_audit_
admin_query 0x109 0x10a} {dce_audit_filter_modify 0x100 0x103 0x104} {dce_audit_
filter_query 0x101 0x102} {dce_dts_mgt_modify 0x200 0x201 0x202 0x203 0x207 0x20
8 0x209 0x20a} {dce_dts_mgt_query 0x20b 0x20c 0x20d 0x20e 0x20f 0x210} {dce_dts_
synch 0x204 0x205 0x206} {dce_dts_time_provider 0x211 0x212} {dce_sec_authent 0x
101 0x102 0x103 0x104 0x10c 0x125} {dce_sec_control 0x105 0x106 0x107 0x108 0x10
9 0x10a 0x10b 0x10c 0x10d 0x10
520|0 1 13787 1 18|Test Failed.
220|0 1 1 13:24:45|FAIL

[09/13/95 public]
Fixed the test.  Part of HP 1.1 Warranty Patch submission.



CR Number                     : 12624
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp utc test fails
Reported Date                 : 10/13/94
Found in Baseline             : 1.1b21
Found Date                    : 10/13/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : dcecp
Sensitivity                   : public

[10/13/94 public]

The following error was found in the journal file:

...
520|0 1 17364 1 1|utc_convert_5_P: Verify that we can convert a timestamp into l
ocal time.
520|0 1 17364 1 2|==== Contents of test case:
520|0 1 17364 1 3|{     utc convert 1994-07-01-17:51:56.101-09:00I90.232     }
520|0 1 17364 1 4|Test completed successfully.
520|0 1 17364 1 5|== Test output was:
520|0 1 17364 1 6|1994-07-01-21:51:56.101-05:00I90.232
520|0 1 17364 1 7|== Expected output was:
520|0 1 17364 1 8|1994-07-01-22:51:56.101-04:00I90.232
520|0 1 17364 1 9|Test Failed.
220|0 1 1 16:45:20|FAIL

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12615
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp misc test fails
Reported Date                 : 10/13/94
Found in Baseline             : 1.1b21
Found Date                    : 10/13/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : dcecp
Sensitivity                   : public

[10/13/94 public]

The following error was found in the journal file:

520|0 1 18237 1 1|uuid_compare_5_P: To check that two uuids that are not equal a
re checked properly
520|0 1 18237 1 2|==== Contents of test case:
520|0 1 18237 1 3|{uuid compare [uuid create] [uuid create] }
520|0 1 18237 1 4|Test completed successfully.
520|0 1 18237 1 5|== Test output was:
520|0 1 18237 1 6|1
520|0 1 18237 1 7|== Expected output was:
520|0 1 18237 1 8|0
520|0 1 18237 1 9|Test Failed.
220|0 1 1 10:14:37|FAIL

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12614
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp ktb test fails
Reported Date                 : 10/13/94
Found in Baseline             : 1.1b21
Found Date                    : 10/13/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2
Affected File(s)              : ktb_setup.tcl, ktb_cleanup.tcl
Sensitivity                   : public

[10/13/94 public]

The following errors were found in the journal file:

...
520|0 1 15358 1 1|{Keytab FVT Setup Problem:}
520|0 1 15358 1 2|{Could not acl modify /.:/hosts/agony/config/keytab -io -chang
e any_other:acdepr}
520|0 1 15358 1 3|{couldn't find "/opt/test/tet/tools/tet_setup" to execute}
520|0 1 15358 1 4|{If this ACL is not set, or equivalent priviledges are not pro
vided through}
520|0 1 15358 1 5|{other means, most or all dcecp KEYTAB FVT's will fail}
220|0 1 0 09:25:42|PASS
...
520|0 1 11928 1 1|keytab_remove_11_P: Check to see that we can delete a particul
ar version key.
520|0 1 11928 1 2|{Could not remove KEYTAB key!}
520|0 1 11928 1 3|{Actual Result:}
520|0 1 11928 1 4|{No currently established network identity for which context e
xists}
520|0 1 11928 1 5|Test Command is:
520|0 1 11928 1 6|{keytab remove /.../doyen.test.cell/hosts/agony/config/keytab/
ktb2 -member test_princ2 -version 0}
520|0 1 11928 1 7|{Actual Result:}
520|0 1 11928 1 8|{/.../doyen.test.cell/test_princ1 /.../doyen.test.cell/test_pr
inc2}
520|0 1 11928 1 9|{Expected Result:}
520|0 1 11928 1 10|/.../doyen.test.cell/test_princ1
520|0 1 11928 1 11|Test Failed.
220|0 1 1 09:36:17|FAIL
...
520|0 1 11928 1 12|keytab_remove_12_P: Check to see that we can delete all versi
ons of a key.
520|0 1 11928 1 13|{Could not remove KEYTAB key!}
520|0 1 11928 1 14|{Actual Result:}
520|0 1 11928 1 15|{No currently established network identity for which context
exists}
520|0 1 11928 1 16|Test Command is:
520|0 1 11928 1 17|{keytab remove /.../doyen.test.cell/hosts/agony/config/keytab
/ktb2 -member test_princ2}
520|0 1 11928 1 18|{Actual Result:}
520|0 1 11928 1 19|{/.../doyen.test.cell/test_princ1 /.../doyen.test.cell/test_p
rinc2}
520|0 1 11928 1 20|{Expected Result:}
520|0 1 11928 1 21|/.../doyen.test.cell/test_princ1
520|0 1 11928 1 22|Test Failed.
220|0 1 1 09:37:31|FAIL
520|0 1 11928 1 23|keytab_remove_13_P: Check to see that we can delete a plain t
ype key.
520|0 1 11928 1 24|{Could not remove KEYTAB key!}
520|0 1 11928 1 25|{Actual Result:}
520|0 1 11928 1 26|{No currently established network identity for which context
exists}
520|0 1 11928 1 27|Test Command is:
520|0 1 11928 1 28|{keytab remove /.../doyen.test.cell/hosts/agony/config/keytab
/ktb2 -member test_princ2 -type plain}
520|0 1 11928 1 29|{Actual Result:}
520|0 1 11928 1 30|{/.../doyen.test.cell/test_princ1 /.../doyen.test.cell/test_p
rinc2}
520|0 1 11928 1 31|{Expected Result:}
520|0 1 11928 1 32|/.../doyen.test.cell/test_princ1
520|0 1 11928 1 33|Test Failed.
220|0 1 1 09:39:06|FAIL
410|0 3 1 09:39:07|IC End
400|0 4 1 09:39:09|IC Start
200|0 1 09:39:09|TP Start
520|0 1 11928 1 34|keytab_remove_14_P: Check to see that we can delete a des typ
e key.
520|0 1 11928 1 35|{Could not remove KEYTAB key!}
520|0 1 11928 1 36|{Actual Result:}
520|0 1 11928 1 37|{No currently established network identity for which context
exists}
520|0 1 11928 1 38|Test Command is:
520|0 1 11928 1 39|{keytab remove /.../doyen.test.cell/hosts/agony/config/keytab
/ktb2 -member test_princ2 -type des}
520|0 1 11928 1 40|{Actual Result:}
520|0 1 11928 1 41|{/.../doyen.test.cell/test_princ1 /.../doyen.test.cell/test_p
rinc2 /.../doyen.test.cell/test_princ2}
520|0 1 11928 1 42|{Expected Result:}
520|0 1 11928 1 43|/.../doyen.test.cell/test_princ1
520|0 1 11928 1 44|Test Failed.
220|0 1 1 09:41:12|FAIL


I couldn't find the file tet_setup anywhere in the build tree.

[10/13/94 public]
Looks like missing tet_setup is the cause of all the problems based on the
inability to ACL edit the keytab entries such that the tests can manipulate
them as neccesary.

Do a build;build install_all in SB_BASE/test/tools to get tet_setup in
place.

[10/13/94 public]
tet_setup is in the install tree. The problem is dcetest_config does
not install it as part of the install process. I am going to put tet_setup
in the proper location and rerun the test.

[10/20/94 public]
Reran the tests on BL22 with tet_setup suid in place and ran tests as
a regular user. Same failures occured.

[10/29/04 public]
If the same failures occurred then there is some problem with the login
context.  The tests attempt to login into a principal which is defined
in the tetexec.cfg file as DCP_CLIENT/DCP_CLIENT_PW, make sure these
are properly set to your cell_admin principal/pwd.

Also, is 'tet_setup' owned by root with the setuid bit on?

  chown root tet_setup
  chmod 4777 tet_setup

I'm not sure what to suggest beyond that.  I reran the dcecp ktb tests at 
OSF with lgb.  100% PASS.  I ran logged in as myself (not root) and no 
DCE login context.  As mentioned previously, the easiest way to ensure 
this is to:

   unsetenv KRB5CCNAME.

Do a klist to make sure you get a message similar to:
  
  No DCE identity available: No currently established network identity for
  which context exists (dce / sec)
  
  Kerberos Ticket Information:
  klist: No credentials cache file found (dce / krb) while setting cache
  flags (ticket cache /tmp/krb5cc_10228)

[10/21/94 public]
If there is nothing else to suggest than this problem needs
to be looked into. I do not have a login context when running the test,
I am running as myself not root, tet_setup is suid, DCP_CLIENT=cell_admin,
DCP_CLIENT_PW=-dce-. What else is there? I am going to email you the
journal file.

[09/13/95 public]
Made changes to the setup and cleanup.  Made sure test files
were installed and acl'ed correctly, and the tests run in the
proper environment.  Part of HP 1.1 Warranty Patch submission.



CR Number                     : 12613
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp secval test fails
Reported Date                 : 10/13/94
Found in Baseline             : 1.1b21
Found Date                    : 10/13/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2
Affected File(s)              : secval_setup.tcl, secval_cleanup.tcl, secval_status_P.tcl
Sensitivity                   : public

[10/13/94 public]

The following errors were found in the journal file:

...
520|0 1 13554 1 19|secval_activate_3_N: check that non-privileged users are hand
led correctly.
520|0 1 13554 1 20|==== Contents of test case:
520|0 1 13554 1 21|{         list [catch {secval activate} msg] $msg     }
520|0 1 13554 1 22|Test completed successfully.
520|0 1 13554 1 23|== Test output was:
520|0 1 13554 1 24|{1 {secval service already enabled}}
520|0 1 13554 1 25|== Expected output was:
520|0 1 13554 1 26|{1 {permission not valid for this acl}}
520|0 1 13554 1 27|Test Failed.
220|0 1 1 08:53:09|FAIL
...
520|0 1 7538 1 19|secval_deactivate_3_N: check that unauthenticated users are ha
ndled correctly.
520|0 1 7538 1 20|==== Contents of test case:
520|0 1 7538 1 21|{         list [catch {secval deactivate} msg] $msg     }
520|0 1 7538 1 22|Test completed successfully.
520|0 1 7538 1 23|== Test output was:
520|0 1 7538 1 24|{0 {}}
520|0 1 7538 1 25|== Expected output was:
520|0 1 7538 1 26|{1 {permission not valid for this acl}}
520|0 1 7538 1 27|Test Failed.
220|0 1 1 08:54:20|FAIL
...
520|0 1 19177 1 19|secval_ping_3_N: check that a non login context's user get 0
as the result.
520|0 1 19177 1 20|==== Contents of test case:
520|0 1 19177 1 21|{            list [catch {secval ping} msg] $msg     }
520|0 1 19177 1 22|Test completed successfully.
520|0 1 19177 1 23|== Test output was:
520|0 1 19177 1 24|{0 1}
520|0 1 19177 1 25|== Expected output was:
520|0 1 19177 1 26|{0 0}
520|0 1 19177 1 27|Test Failed.
220|0 1 1 08:56:01|FAIL
...
520|0 1 11159 1 28|secval_status_6_P: check to see that we can check status of s
ecval by tcl binding.
520|0 1 11159 1 29|==== Contents of test case:
520|0 1 11159 1 30|{            list [catch {secval status {$DCP_SR_PROTSEQ $DCP
_SR_IP_ADDR}} msg] $msg     }
520|0 1 11159 1 31|Test completed successfully.
520|0 1 11159 1 32|== Test output was:
520|0 1 11159 1 33|{1 {Bad or wrong arguments}}
520|0 1 11159 1 34|== Expected output was:
520|0 1 11159 1 35|{0 1}
520|0 1 11159 1 36|Test Failed.
220|0 1 1 09:08:23|FAIL

[10/13/94 public]
The first 3 problems are most likely caused by being DCE logged in before
the tests.  Since Th tests should be running as root, this is easily overlooked
as root get sthe self principal by default.  An easy way to clobber this is
to setenv KRB5CCNAME some_garbage. and then run the tests.

Why the status command is failing with TCL binding I don;t know, are the
variables in tetxece.cfg (DCP_SR_IP_ADDR, etc) set properly for your
machine?)

[10/13/94 public]
I have rerun this test but I still get the following error:

10|0 /ts/secval/secval_setup.tcl 14:14:14|TC Start, scenario ref 966-1
15|0 1.10 1|TCM Start
400|0 1 1 14:14:24|IC Start
200|0 1 14:14:24|TP Start
520|0 1 9469 1 1|Command failed: exec tet_setup secval_setup.sh hosts/agony
520|0 1 9469 1 2|Command returned: {No currently established network identity fo
r which context exists}
520|0 1 9469 1 3|Test aborted.
220|0 1 2 14:14:25|UNRESOLVED

The other reported errors also occured.

[10/13/94 public]
Do you have the uid bit set on the tet_setup program? and it also
need to be owned by root. e.g.,

-rwsr-xr-x   1 root     adm        15459 Oct 13 04:00 tet_setup

However the test do NOT need to be run as root.

[10/20/94 public]
I reran the test on BL22 with tet_setup suid and as a regular user.
One failure was detected, which was secval_status_6_P.

DCP_SR_IP_ADDR is set to the ip address of the security server, which
is the machine that is running the test.

[10/20/94 public]
Can you please include your tetexec.cfg and the failed log file here,
much thanks.

[10/21/94 public]
Here is the tetexec.cfg file I am using:

... lines deleted
# Set the maximum number of signals
TET_NSIG=63
TET_SIG_IGN=34

TET_EXEC_IN_PLACE=TRUE

# For extended journal output
VERBOSE=1

DCP_CLIENT=cell_admin
DCP_CLIENT_PW=-dce-
DCP_CELLNAME_ONE=/.../doyen.test.cell
DCP_CELLNAME_TWO=/.../zeugma.test.cell
DCP_HOSTNAME_ONE=agony
DCP_HOSTNAME_TWO=richmond
DCP_ROOT_CH=yale_ch
DCP_INTERCELL_AVAIL=0
DCP_DFS_AVAIL=0

DCP_NOTROOT=notroot
DCP_NOTROOT_PW=-notroot-
DCP_CELLNAME_THREE=$DCP_CELLNAME_ONE
DCP_HOSTNAME_THREE=hosts/$DCP_HOSTNAME_ONE
DCP_SR_ENTRYNAME=/.:/hosts/$DCP_HOSTNAME_ONE/test_server


DCP_SR_PROTSEQ=ncacn_ip_tcp
DCP_SR_IP_ADDR=129.35.68.187
DCP_SR_STR_BINDING=ncacn_ip_tcp:129.35.68.187


#
# dcecp acl command support
#
DCP_ACL_OBJ_MASK1=/.:/hosts/$DCP_HOSTNAME_ONE/dts-entity
DCP_ACL_OBJ_DELEGATION=/.:/hosts/$DCP_HOSTNAME_ONE/dts-entity

DCP_ACL_OBJ_EXTENDED=XXX
EXTENDED_UUID=XXX
EXTENDED_NDR_F1=XXX
EXTENDED_NDR_F2=XXX
EXTENDED_NDR_F3=XXX
EXTENDED_NDR_F4=XXX
EXTENDED_NBR_BYTES=4
EXTENDED_DATA=0a0b0c0d

#
# dcecp log command support
#
DCP_LOG_DCE_DEBUG=0
DCP_LOG_SRVR_ONE=/.:/hosts/$DCP_HOSTNAME_ONE/dts-entity
DCP_LOG_SRVR_TWO=/.:/hosts/$DCP_HOSTNAME_ONE/cds-clerk
DCP_LOG_COMP_ONE=dts
DCP_LOG_COMP_TWO=cds

#
# dcecp registry command support
#
DCP_RGY_SA_REP_NAME_SLAVE1=subsys/dce/sec/yale
DCP_RGY_SA_REP_NAME_MASTER=subsys/dce/sec/master
DCP_RGY_SA_PROTSEQ_MASTER=ncacn_ip_tcp
DCP_RGY_SA_NETADDR_MASTER=129.35.68.187
DCP_RGY_SA_PROTSEQ_SLAVE1=ncacn_ip_tcp
DCP_RGY_SA_NETADDR_SLAVE1=129.35.67.232

#
# dcecp aud command support
#
DCP_AUD_CELLNAME=$DCP_CELLNAME_ONE
DCP_AUD_TRAIL_FILE_1=functional/admin/dcecp/ts/aud/trail1
DCP_AUD_TRAIL_FILE_2=functional/admin/dcecp/ts/aud/trail2
DCP_AUD_TRAIL_OUTFILE=/tmp/trail.out

#
# dcecp rpc command support
#
RPCENTRY1=/.:/rpctest1
RPCENTRY2=/.:/rpctest2
RPCENTRY3=/.:/rpctest3
INTERFACE1={afbcceec-6c33-11cd-b7ca-080009251352 1.0}
INTERFACEV={afbcceec-6c33-11cd-b7ca-080009251352 1.1}
INTERFACE2={006983fe-1e3e-1de2-83b0-0000c08de054 1.1}

# these interfaces in string syntax are temporary for use with "show"
# pending the fix of CR 10328

INTERFACE1S=afbcceec-6c33-11cd-b7ca-080009251352,1.0
INTERFACE2S=006983fe-1e3e-1de2-83b0-0000c08de054,1.1
OBJECT1=ea65d898-6c2b-11cd-b7ca-080009251352
OBJECT2=eed17b08-6c2b-11cd-b7ca-080009251352
BINDING1={ncadg_ip_udp 127.0.0.0}
BINDING2={ncacn_ip_tcp 127.0.0.0}
SECMASTER=/.:/subsys/dce/sec/master

#
# For hostdata and keytab FVT's
#
DCP_HOSTDATA_CELL=$DCP_CELLNAME_ONE
DCP_HOSTDATA_HOST=$DCP_HOSTNAME_ONE
DCP_KEYTAB_CELL=$DCP_CELLNAME_ONE
DCP_KEYTAB_HOST=$DCP_HOSTNAME_ONE

Here is the failed log file:

0|1.10 13:36:22 19941020|User: bmw (200) TCC Start, Command Line: tcc -e functio
nal/admin/dcecp secval 
20|/dcetest/dcelocal/test/tet/functional/admin/dcecp/tetexec.cfg 1|Config Start
30||TET_VERSION=1.10
30||TET_OUTPUT_CAPTURE=False
30||TET_RESCODES_FILE=tet_code
30||TET_EXEC_IN_PLACE=TRUE
30||TET_NSIG=63
30||TET_SIG_IGN=34
30||VERBOSE=1
30||DCP_CLIENT=cell_admin
30||DCP_CLIENT_PW=-dce-
30||DCP_CELLNAME_ONE=/.../doyen.test.cell
30||DCP_CELLNAME_TWO=/.../zeugma.test.cell
30||DCP_HOSTNAME_ONE=agony
30||DCP_HOSTNAME_TWO=richmond
30||DCP_ROOT_CH=yale_ch
30||DCP_INTERCELL_AVAIL=0
30||DCP_DFS_AVAIL=0
30||DCP_NOTROOT=notroot
30||DCP_NOTROOT_PW=-notroot-
30||DCP_CELLNAME_THREE=$DCP_CELLNAME_ONE
30||DCP_HOSTNAME_THREE=hosts/$DCP_HOSTNAME_ONE
30||DCP_SR_ENTRYNAME=/.:/hosts/$DCP_HOSTNAME_ONE/test_server
30||DCP_SR_PROTSEQ=ncacn_ip_tcp
30||DCP_SR_IP_ADDR=129.35.68.187
30||DCP_SR_STR_BINDING=ncacn_ip_tcp:129.35.68.187
30||DCP_ACL_OBJ_MASK1=/.:/hosts/$DCP_HOSTNAME_ONE/dts-entity
30||DCP_ACL_OBJ_DELEGATION=/.:/hosts/$DCP_HOSTNAME_ONE/dts-entity
30||DCP_ACL_OBJ_EXTENDED=XXX
30||EXTENDED_UUID=XXX
30||EXTENDED_NDR_F1=XXX
30||EXTENDED_NDR_F2=XXX
30||EXTENDED_NDR_F3=XXX
30||EXTENDED_NDR_F4=XXX
30||EXTENDED_NBR_BYTES=4
30||EXTENDED_DATA=0a0b0c0d
30||DCP_LOG_DCE_DEBUG=0
30||DCP_LOG_SRVR_ONE=/.:/hosts/$DCP_HOSTNAME_ONE/dts-entity
30||DCP_LOG_SRVR_TWO=/.:/hosts/$DCP_HOSTNAME_ONE/cds-clerk
30||DCP_LOG_COMP_ONE=dts
30||DCP_LOG_COMP_TWO=cds
30||DCP_RGY_SA_REP_NAME_SLAVE1=subsys/dce/sec/yale
30||DCP_RGY_SA_REP_NAME_MASTER=subsys/dce/sec/master
30||DCP_RGY_SA_PROTSEQ_MASTER=ncacn_ip_tcp
30||DCP_RGY_SA_NETADDR_MASTER=129.35.68.187
30||DCP_RGY_SA_PROTSEQ_SLAVE1=ncacn_ip_tcp
30||DCP_RGY_SA_NETADDR_SLAVE1=129.35.67.232
30||DCP_AUD_CELLNAME=$DCP_CELLNAME_ONE
30||DCP_AUD_TRAIL_FILE_1=functional/admin/dcecp/ts/aud/trail1
30||DCP_AUD_TRAIL_FILE_2=functional/admin/dcecp/ts/aud/trail2
30||DCP_AUD_TRAIL_OUTFILE=/tmp/trail.out
30||RPCENTRY1=/.:/rpctest1
30||RPCENTRY2=/.:/rpctest2
30||RPCENTRY3=/.:/rpctest3
30||INTERFACE1={afbcceec-6c33-11cd-b7ca-080009251352 1.0}
30||INTERFACEV={afbcceec-6c33-11cd-b7ca-080009251352 1.1}
30||INTERFACE2={006983fe-1e3e-1de2-83b0-0000c08de054 1.1}
30||INTERFACE1S=afbcceec-6c33-11cd-b7ca-080009251352,1.0
30||INTERFACE2S=006983fe-1e3e-1de2-83b0-0000c08de054,1.1
30||OBJECT1=ea65d898-6c2b-11cd-b7ca-080009251352
30||OBJECT2=eed17b08-6c2b-11cd-b7ca-080009251352
30||BINDING1={ncadg_ip_udp 127.0.0.0}
30||BINDING2={ncacn_ip_tcp 127.0.0.0}
30||SECMASTER=/.:/subsys/dce/sec/master
30||DCP_HOSTDATA_CELL=$DCP_CELLNAME_ONE
30||DCP_HOSTDATA_HOST=$DCP_HOSTNAME_ONE
30||DCP_KEYTAB_CELL=$DCP_CELLNAME_ONE
30||DCP_KEYTAB_HOST=$DCP_HOSTNAME_ONE
40||Config End
70||"Starting secval test suite"
70||"Starting secval setup"
10|0 /ts/secval/secval_setup.tcl 13:36:22|TC Start, scenario ref 966-1
15|0 1.10 1|TCM Start
400|0 1 1 13:36:29|IC Start
200|0 1 13:36:29|TP Start
520|0 1 13751 1 1|Test Setup Passed.
220|0 1 0 13:36:43|PASS
410|0 1 1 13:36:43|IC End
80|0 0 13:36:45|TC End
70||"Finished secval setup"
70||"Starting negative secval tests"
70||"Starting negative secval activate tests"
10|1 /ts/secval/secval_activate_N.tcl 13:36:45|TC Start, scenario ref 970-1
15|0 1.10 4|TCM Start
400|0 1 1 13:36:53|IC Start
200|0 1 13:36:53|TP Start
520|0 1 13812 1 1|secval_activate_1_N: check that extra/invalid options are trap
ped as errors.
520|0 1 13812 1 2|==== Contents of test case:
520|0 1 13812 1 3|{         list [catch {secval activate -foo} msg] $msg     }
520|0 1 13812 1 4|Test completed successfully.
520|0 1 13812 1 5|== Test output was:
520|0 1 13812 1 6|{1 {Unrecognized option '-foo'.}}
520|0 1 13812 1 7|== Expected output was:
520|0 1 13812 1 8|{1 {Unrecognized option '-foo'.}}
520|0 1 13812 1 9|Test Passed.
220|0 1 0 13:36:53|PASS
410|0 1 1 13:36:54|IC End
400|0 2 1 13:36:54|IC Start
200|0 1 13:36:54|TP Start
520|0 1 13812 1 10|secval_activate_2_N: check that a wrong host are returned as 
errors.
520|0 1 13812 1 11|==== Contents of test case:
520|0 1 13812 1 12|{         list [catch {secval activate foo} msg] $msg     }
520|0 1 13812 1 13|Test completed successfully.
520|0 1 13812 1 14|== Test output was:
520|0 1 13812 1 15|{1 {Bad or wrong arguments}}
520|0 1 13812 1 16|== Expected output was:
520|0 1 13812 1 17|{1 {Bad or wrong arguments}}
520|0 1 13812 1 18|Test Passed.
220|0 1 0 13:36:54|PASS
410|0 2 1 13:36:55|IC End
400|0 3 1 13:36:55|IC Start
200|0 1 13:36:55|TP Start
520|0 1 13812 1 19|secval_activate_3_N: check that non-privileged users are hand
led correctly.
520|0 1 13812 1 20|==== Contents of test case:
520|0 1 13812 1 21|{         list [catch {secval activate} msg] $msg     }
520|0 1 13812 1 22|Test completed successfully.
520|0 1 13812 1 23|== Test output was:
520|0 1 13812 1 24|{1 {permission not valid for this acl}}
520|0 1 13812 1 25|== Expected output was:
520|0 1 13812 1 26|{1 {permission not valid for this acl}}
520|0 1 13812 1 27|Test Passed.
220|0 1 0 13:36:56|PASS
410|0 3 1 13:36:56|IC End
400|0 4 1 13:36:56|IC Start
200|0 1 13:36:57|TP Start
520|0 1 13812 1 28|secval_activate_4_N: check activate secval which is already a
ctive returning a error.
520|0 1 13812 1 29|==== Contents of test case:
520|0 1 13812 1 30|{        list [catch {secval activate} msg] $msg     }
520|0 1 13812 1 31|Test completed successfully.
520|0 1 13812 1 32|== Test output was:
520|0 1 13812 1 33|{1 {secval service already enabled}}
520|0 1 13812 1 34|== Expected output was:
520|0 1 13812 1 35|{1 {secval service already enabled}}
520|0 1 13812 1 36|Test Passed.
220|0 1 0 13:37:07|PASS
410|0 4 1 13:37:07|IC End
80|1 0 13:37:08|TC End
70||"Finished negative secval activate tests"
70||"Starting negative secval deactivate tests"
10|2 /ts/secval/secval_deactivate_N.tcl 13:37:08|TC Start, scenario ref 973-1
15|0 1.10 4|TCM Start
400|0 1 1 13:37:17|IC Start
200|0 1 13:37:17|TP Start
520|0 1 13632 1 1|secval_deactivate_1_N: check that extra/invalid options are tr
apped as errors.
520|0 1 13632 1 2|==== Contents of test case:
520|0 1 13632 1 3|{         list [catch {secval deactivate -foo} msg] $msg     }

520|0 1 13632 1 4|Test completed successfully.
520|0 1 13632 1 5|== Test output was:
520|0 1 13632 1 6|{1 {Unrecognized option '-foo'.}}
520|0 1 13632 1 7|== Expected output was:
520|0 1 13632 1 8|{1 {Unrecognized option '-foo'.}}
520|0 1 13632 1 9|Test Passed.
220|0 1 0 13:37:17|PASS
410|0 1 1 13:37:17|IC End
400|0 2 1 13:37:18|IC Start
200|0 1 13:37:18|TP Start
520|0 1 13632 1 10|secval_deactivate_2_N: check that a wrong host are returned a
s invalid arg.
520|0 1 13632 1 11|==== Contents of test case:
520|0 1 13632 1 12|{         list [catch {secval deactivate foo} msg] $msg     }

520|0 1 13632 1 13|Test completed successfully.
520|0 1 13632 1 14|== Test output was:
520|0 1 13632 1 15|{1 {Bad or wrong arguments}}
520|0 1 13632 1 16|== Expected output was:
520|0 1 13632 1 17|{1 {Bad or wrong arguments}}
520|0 1 13632 1 18|Test Passed.
220|0 1 0 13:37:18|PASS
410|0 2 1 13:37:18|IC End
400|0 3 1 13:37:19|IC Start
200|0 1 13:37:19|TP Start
520|0 1 13632 1 19|secval_deactivate_3_N: check that unauthenticated users are h
andled correctly.
520|0 1 13632 1 20|==== Contents of test case:
520|0 1 13632 1 21|{         list [catch {secval deactivate} msg] $msg     }
520|0 1 13632 1 22|Test completed successfully.
520|0 1 13632 1 23|== Test output was:
520|0 1 13632 1 24|{1 {permission not valid for this acl}}
520|0 1 13632 1 25|== Expected output was:
520|0 1 13632 1 26|{1 {permission not valid for this acl}}
520|0 1 13632 1 27|Test Passed.
220|0 1 0 13:37:19|PASS
410|0 3 1 13:37:19|IC End
400|0 4 1 13:37:20|IC Start
200|0 1 13:37:20|TP Start
520|0 1 13632 1 28|secval_deactivate_4_N: check that deactivate secval which is 
not active returning a error.
520|0 1 13632 1 29|==== Contents of test case:
520|0 1 13632 1 30|{        list [catch {secval deactivate} msg] $msg     }
520|0 1 13632 1 31|Test completed successfully.
520|0 1 13632 1 32|== Test output was:
520|0 1 13632 1 33|{1 {secval service is not enabled}}
520|0 1 13632 1 34|== Expected output was:
520|0 1 13632 1 35|{1 {secval service is not enabled}}
520|0 1 13632 1 36|Test Passed.
220|0 1 0 13:37:33|PASS
410|0 4 1 13:37:33|IC End
80|2 0 13:37:35|TC End
70||"Finished negative secval deactivate tests"
70||"Starting negative secval ping tests"
10|3 /ts/secval/secval_ping_N.tcl 13:37:35|TC Start, scenario ref 976-1
15|0 1.10 3|TCM Start
400|0 1 1 13:37:44|IC Start
200|0 1 13:37:44|TP Start
520|0 1 13708 1 1|secval_ping_1_N: check that extra/invalid options are trapped 
as errors.
520|0 1 13708 1 2|==== Contents of test case:
520|0 1 13708 1 3|{         list [catch {secval ping -foo} msg] $msg     }
520|0 1 13708 1 4|Test completed successfully.
520|0 1 13708 1 5|== Test output was:
520|0 1 13708 1 6|{1 {Unrecognized option '-foo'.}}
520|0 1 13708 1 7|== Expected output was:
520|0 1 13708 1 8|{1 {Unrecognized option '-foo'.}}
520|0 1 13708 1 9|Test Passed.
220|0 1 0 13:37:45|PASS
410|0 1 1 13:37:45|IC End
400|0 2 1 13:37:45|IC Start
200|0 1 13:37:45|TP Start
520|0 1 13708 1 10|secval_ping_2_N: check that a wrong host are returned as erro
rs.
520|0 1 13708 1 11|==== Contents of test case:
520|0 1 13708 1 12|{         list [catch {secval ping foo} msg] $msg     }
520|0 1 13708 1 13|Test completed successfully.
520|0 1 13708 1 14|== Test output was:
520|0 1 13708 1 15|{1 {Bad or wrong arguments}}
520|0 1 13708 1 16|== Expected output was:
520|0 1 13708 1 17|{1 {Bad or wrong arguments}}
520|0 1 13708 1 18|Test Passed.
220|0 1 0 13:37:46|PASS
410|0 2 1 13:37:46|IC End
400|0 3 1 13:37:46|IC Start
200|0 1 13:37:46|TP Start
520|0 1 13708 1 19|secval_ping_3_N: check that a non login context's user get 0 
520|0 1 13708 1 20|==== Contents of test case:
520|0 1 13708 1 21|{            list [catch {secval ping} msg] $msg     }
520|0 1 13708 1 22|Test completed successfully.
520|0 1 13708 1 23|== Test output was:
520|0 1 13708 1 24|{0 0}
520|0 1 13708 1 25|== Expected output was:
520|0 1 13708 1 26|{0 0}
520|0 1 13708 1 27|Test Passed.
220|0 1 0 13:37:47|PASS
410|0 3 1 13:37:47|IC End
80|3 0 13:37:48|TC End
70||"Finished negative secval ping tests"
70||"Starting negative secval status tests"
10|4 /ts/secval/secval_status_N.tcl 13:37:48|TC Start, scenario ref 979-1
15|0 1.10 2|TCM Start
400|0 1 1 13:37:56|IC Start
200|0 1 13:37:56|TP Start
520|0 1 10449 1 1|secval_status_1_N: check that extra/invalid options are trappe
d as errors.
520|0 1 10449 1 2|==== Contents of test case:
520|0 1 10449 1 3|{         list [catch {secval status -foo} msg] $msg     }
520|0 1 10449 1 4|Test completed successfully.
520|0 1 10449 1 5|== Test output was:
520|0 1 10449 1 6|{1 {Unrecognized option '-foo'.}}
520|0 1 10449 1 7|== Expected output was:
520|0 1 10449 1 8|{1 {Unrecognized option '-foo'.}}
520|0 1 10449 1 9|Test Passed.
220|0 1 0 13:37:56|PASS
410|0 1 1 13:37:56|IC End
400|0 2 1 13:37:57|IC Start
200|0 1 13:37:57|TP Start
520|0 1 10449 1 10|secval_status_2_N: check that a wrong host are returned as er
520|0 1 10449 1 11|==== Contents of test case:
520|0 1 10449 1 12|{         list [catch {secval status foo} msg] $msg     }
520|0 1 10449 1 13|Test completed successfully.
520|0 1 10449 1 14|== Test output was:
520|0 1 10449 1 15|{1 {Bad or wrong arguments}}
520|0 1 10449 1 16|== Expected output was:
520|0 1 10449 1 17|{1 {Bad or wrong arguments}}
520|0 1 10449 1 18|Test Passed.
220|0 1 0 13:37:57|PASS
410|0 2 1 13:37:57|IC End
80|4 0 13:37:59|TC End
70||"Finished negative secval status tests"
70||"Finished negative secval tests"
70||"Starting positive secval tests"
70||"Starting positive secval activate tests"
10|5 /ts/secval/secval_activate_P.tcl 13:37:59|TC Start, scenario ref 984-1
15|0 1.10 2|TCM Start
400|0 1 1 13:38:06|IC Start
200|0 1 13:38:07|TP Start
520|0 1 10255 1 1|secval_activate_5_P: check to see that we can activate secval.

520|0 1 10255 1 2|==== Contents of test case:
520|0 1 10255 1 3|{             list [catch {secval activate} msg] $msg     }
520|0 1 10255 1 4|Test completed successfully.
520|0 1 10255 1 5|== Test output was:
520|0 1 10255 1 6|{0 {}}
520|0 1 10255 1 7|== Expected output was:
520|0 1 10255 1 8|{0 {}}
520|0 1 10255 1 9|Test Passed.
220|0 1 0 13:38:19|PASS
410|0 1 1 13:38:19|IC End
400|0 2 1 13:38:20|IC Start
200|0 1 13:38:20|TP Start
520|0 1 10255 1 10|secval_activate_6_P: check to see that we can activate secval
 by hostname.
520|0 1 10255 1 11|==== Contents of test case:
520|0 1 10255 1 12|{            list [catch {secval activate $DCP_HOSTNAME_THREE
} msg] $msg     }
520|0 1 10255 1 13|Test completed successfully.
520|0 1 10255 1 14|== Test output was:
520|0 1 10255 1 15|{0 {}}
520|0 1 10255 1 16|== Expected output was:
520|0 1 10255 1 17|{0 {}}
520|0 1 10255 1 18|Test Passed.
220|0 1 0 13:38:33|PASS
410|0 2 1 13:38:34|IC End
80|5 0 13:38:36|TC End
70||"Finished  positive secval activate tests"
70||"Starting positive secval deactivate tests"
10|6 /ts/secval/secval_deactivate_P.tcl 13:38:36|TC Start, scenario ref 987-1
15|0 1.10 2|TCM Start
400|0 1 1 13:38:45|IC Start
200|0 1 13:38:45|TP Start
520|0 1 10317 1 1|secval_deactivate_5_P: check to see that we can deactivate sec
val.
520|0 1 10317 1 2|==== Contents of test case:
520|0 1 10317 1 3|{             list [catch {secval deactivate} msg] $msg     }
520|0 1 10317 1 4|Test completed successfully.
520|0 1 10317 1 5|== Test output was:
520|0 1 10317 1 6|{0 {}}
520|0 1 10317 1 7|== Expected output was:
520|0 1 10317 1 8|{0 {}}
520|0 1 10317 1 9|Test Passed.
220|0 1 0 13:38:57|PASS
410|0 1 1 13:38:57|IC End
400|0 2 1 13:38:57|IC Start
200|0 1 13:38:58|TP Start
520|0 1 10317 1 10|secval_deactivate_6_P: check to see that we can deactivate se
cval by hostname.
520|0 1 10317 1 11|==== Contents of test case:
520|0 1 10317 1 12|{            list [catch {secval deactivate $DCP_HOSTNAME_THR
EE} msg] $msg     }
520|0 1 10317 1 13|Test completed successfully.
520|0 1 10317 1 14|== Test output was:
520|0 1 10317 1 15|{0 {}}
520|0 1 10317 1 16|== Expected output was:
520|0 1 10317 1 17|{0 {}}
520|0 1 10317 1 18|Test Passed.
220|0 1 0 13:39:12|PASS
410|0 2 1 13:39:13|IC End
80|6 0 13:39:15|TC End
70||"Finished  positive secval deactivate tests"
70||"Starting positive secval ping tests"
10|7 /ts/secval/secval_ping_P.tcl 13:39:15|TC Start, scenario ref 990-1
15|0 1.10 2|TCM Start
400|0 1 1 13:39:33|IC Start
200|0 1 13:39:33|TP Start
520|0 1 10379 1 1|secval_ping_4_P: check to see that we can ping secval.
520|0 1 10379 1 2|==== Contents of test case:
520|0 1 10379 1 3|{             list [catch {secval ping} msg] $msg     }
520|0 1 10379 1 4|Test completed successfully.
520|0 1 10379 1 5|== Test output was:
520|0 1 10379 1 6|{0 1}
520|0 1 10379 1 7|== Expected output was:
520|0 1 10379 1 8|{0 1}
520|0 1 10379 1 9|Test Passed.
220|0 1 0 13:39:34|PASS
410|0 1 1 13:39:34|IC End
400|0 2 1 13:39:34|IC Start
200|0 1 13:39:34|TP Start
520|0 1 10379 1 10|secval_ping_5_P: check to see that we can ping secval by host
name.
520|0 1 10379 1 11|==== Contents of test case:
520|0 1 10379 1 12|{            list [catch {secval ping $DCP_HOSTNAME_THREE} ms
g] $msg     }
520|0 1 10379 1 13|Test completed successfully.
520|0 1 10379 1 14|== Test output was:
520|0 1 10379 1 15|{0 1}
520|0 1 10379 1 16|== Expected output was:
520|0 1 10379 1 17|{0 1}
520|0 1 10379 1 18|Test Passed.
220|0 1 0 13:39:35|PASS
410|0 2 1 13:39:35|IC End
80|7 0 13:39:37|TC End
70||"Finished positive secval ping  tests"
70||"Starting positive secval status tests"
10|8 /ts/secval/secval_status_P.tcl 13:39:37|TC Start, scenario ref 993-1
15|0 1.10 5|TCM Start
400|0 1 1 13:39:54|IC Start
200|0 1 13:39:55|TP Start
520|0 1 10441 1 1|secval_status_3_P: check to see that we can check status of se
cval.
520|0 1 10441 1 2|==== Contents of test case:
520|0 1 10441 1 3|{             list [catch {secval status} msg] $msg     }
520|0 1 10441 1 4|Test completed successfully.
520|0 1 10441 1 5|== Test output was:
520|0 1 10441 1 6|{0 1}
520|0 1 10441 1 7|== Expected output was:
520|0 1 10441 1 8|{0 1}
520|0 1 10441 1 9|Test Passed.
220|0 1 0 13:39:55|PASS
410|0 1 1 13:39:55|IC End
400|0 2 1 13:39:56|IC Start
200|0 1 13:39:56|TP Start
520|0 1 10441 1 10|secval_status_4_P: check to see that we can check status of s
ecval by hostname.
520|0 1 10441 1 11|==== Contents of test case:
520|0 1 10441 1 12|{            list [catch {secval status $DCP_HOSTNAME_THREE} 
msg] $msg     }
520|0 1 10441 1 13|Test completed successfully.
520|0 1 10441 1 14|== Test output was:
520|0 1 10441 1 15|{0 1}
520|0 1 10441 1 16|== Expected output was:
520|0 1 10441 1 17|{0 1}
520|0 1 10441 1 18|Test Passed.
220|0 1 0 13:39:56|PASS
410|0 2 1 13:39:56|IC End
400|0 3 1 13:39:57|IC Start
200|0 1 13:39:57|TP Start
520|0 1 10441 1 19|secval_status_5_P: check to see that we can check status of s
ecval by string binding.
520|0 1 10441 1 20|==== Contents of test case:
520|0 1 10441 1 21|{            list [catch {secval status $DCP_SR_PROTSEQ:$DCP_
SR_IP_ADDR} msg] $msg     }
520|0 1 10441 1 22|Test completed successfully.
520|0 1 10441 1 23|== Test output was:
520|0 1 10441 1 24|{0 1}
520|0 1 10441 1 25|== Expected output was:
520|0 1 10441 1 26|{0 1}
520|0 1 10441 1 27|Test Passed.
220|0 1 0 13:39:57|PASS
410|0 3 1 13:39:57|IC End
400|0 4 1 13:39:58|IC Start
200|0 1 13:39:58|TP Start
520|0 1 10441 1 28|secval_status_6_P: check to see that we can check status of s
ecval by tcl binding.
520|0 1 10441 1 29|==== Contents of test case:
520|0 1 10441 1 30|{            list [catch {secval status {$DCP_SR_PROTSEQ $DCP
_SR_IP_ADDR}} msg] $msg     }
520|0 1 10441 1 31|Test completed successfully.
520|0 1 10441 1 32|== Test output was:
520|0 1 10441 1 33|{1 {Bad or wrong arguments}}
520|0 1 10441 1 34|== Expected output was:
520|0 1 10441 1 35|{0 1}
520|0 1 10441 1 36|Test Failed.
220|0 1 1 13:39:58|FAIL
410|0 4 1 13:39:58|IC End
400|0 5 1 13:39:59|IC Start
200|0 1 13:39:59|TP Start
520|0 1 10441 1 37|secval_status_7_P: check to see that secval status return 0 i
f the secval is not up.
520|0 1 10441 1 38|==== Contents of test case:
520|0 1 10441 1 39|{            list [catch {secval status} msg] $msg     }
520|0 1 10441 1 40|Test completed successfully.
520|0 1 10441 1 41|== Test output was:
520|0 1 10441 1 42|{0 0}
520|0 1 10441 1 43|== Expected output was:
520|0 1 10441 1 44|{0 0}
520|0 1 10441 1 45|Test Passed.
220|0 1 0 13:40:00|PASS
410|0 5 1 13:40:00|IC End
80|8 0 13:40:01|TC End
70||"Finished positive secval status tests"
70||"Finished positive secval  tests"
70||"Starting secval cleanup"
10|9 /ts/secval/secval_cleanup.tcl 13:40:01|TC Start, scenario ref 997-1
15|0 1.10 1|TCM Start
400|0 1 1 13:40:09|IC Start
200|0 1 13:40:09|TP Start
520|0 1 13596 1 1|Command failed: exec tet_setup secval_cleanup.sh hosts/agony
520|0 1 13596 1 2|Command returned: {No currently established network identity f
or which context exists}
520|0 1 13596 1 3|Test aborted.
220|0 1 2 13:40:10|UNRESOLVED
410|0 1 1 13:40:10|IC End
80|9 0 13:40:11|TC End
70||"Finished secval cleanup"
70||"Finished secval test suite"
900|13:40:11|TCC End

[10/21/94 public]
I have no idea why the following IC failed. Can you please try it interactively,
i.e. do,

dcecp> list [catch {secval status {ncacn_ip_tcp 129.35.68.187}} msg] $msg

to see if it works (returns "0 1"). (It works for me)

--------
30||DCP_SR_PROTSEQ=ncacn_ip_tcp
30||DCP_SR_IP_ADDR=129.35.68.187

400|0 4 1 13:39:58|IC Start
200|0 1 13:39:58|TP Start
520|0 1 10441 1 28|secval_status_6_P: check to see that we can check status of s
ecval by tcl binding.
520|0 1 10441 1 29|==== Contents of test case:
520|0 1 10441 1 30|{            list [catch {secval status {$DCP_SR_PROTSEQ $DCP
_SR_IP_ADDR}} msg] $msg     }
520|0 1 10441 1 31|Test completed successfully.
520|0 1 10441 1 32|== Test output was:
520|0 1 10441 1 33|{1 {Bad or wrong arguments}}
520|0 1 10441 1 34|== Expected output was:
520|0 1 10441 1 35|{0 1}
520|0 1 10441 1 36|Test Failed.
220|0 1 1 13:39:58|FAIL
410|0 4 1 13:39:58|IC End

[03/16/95 public]

I've opened OT 12821 for the secval_status_6_P problem -- curly brackets
disable $variable substitution.

On a more general note, I've found I get the best results running the
functional/admin/dcecp tests as NON-root.  Nearly all the tests that require
priveleges do a login as $DCP_CLIENT, which I set to cell_admin.  The remaining
tasks that appear to require root priveleges are done via tet_setup,
which I make SUID root.  The only privelege-related problem I have is
the cleanup for secval_status_P.tcl...

[09/13/95 public]
Made changes to setup and cleanup files.  Fix status test.  Part of
HP 1.1 Warranty Patch submission.



CR Number                     : 12612
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp log test fails
Reported Date                 : 10/13/94
Found in Baseline             : 1.1b21
Found Date                    : 10/13/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2
Affected File(s)              : log_list_P.tcl
Sensitivity                   : public

[10/13/94 public]

The following failures were found in the journal file:

...
520|0 1 10902 1 174|log_modify_020_N: Check that an unauthenticated user can not
 modify any
520|0 1 10902 1 175|log_modify_020_N: routing specifications.
520|0 1 10902 1 176|==== Contents of test case:
520|0 1 10902 1 177|{         list [catch {log modify $DCP_LOG_SRVR_ONE -ch FATA
L:BINFILE:/tmp/svc} msg] $msg     }
520|0 1 10902 1 178|Test completed successfully.
520|0 1 10902 1 179|== Test output was:
520|0 1 10902 1 180|{0 {}}
520|0 1 10902 1 181|== Expected output was:
520|0 1 10902 1 182|{1 {Must have write permission for the DTS entity}}
520|0 1 10902 1 183|Test Failed.
220|0 1 1 08:17:40|FAIL
...
520|0 1 10834 1 1|log_list_011_P: Display all components for 1 server, which
520|0 1 10834 1 2|log_list_011_P: is not enclosed in braces.
520|0 1 10834 1 3|==== Contents of test case:
520|0 1 10834 1 4|{ log list $DCP_LOG_SRVR_ONE    }
520|0 1 10834 1 5|Test completed successfully.
520|0 1 10834 1 6|== Test output was:
520|0 1 10834 1 7|{dts rpc cds aud}
520|0 1 10834 1 8|== Expected output was:
520|0 1 10834 1 9|{dts aud rpc cds}
520|0 1 10834 1 10|Test Failed.
220|0 1 1 08:18:12|FAIL
...
520|0 1 10834 1 11|log_list_012_P: Display all components for 1 server, which
520|0 1 10834 1 12|log_list_012_P: is enclosed in braces.
520|0 1 10834 1 13|==== Contents of test case:
520|0 1 10834 1 14|{ log list "$DCP_LOG_SRVR_ONE"         }
520|0 1 10834 1 15|Test completed successfully.
520|0 1 10834 1 16|== Test output was:
520|0 1 10834 1 17|{dts rpc cds aud}
520|0 1 10834 1 18|== Expected output was:
520|0 1 10834 1 19|{dts aud rpc cds}
520|0 1 10834 1 20|Test Failed.
220|0 1 1 08:18:14|FAIL
...
520|0 1 10834 1 91|log_list_024_P: Display all components for 1 server for an
520|0 1 10834 1 92|log_list_024_P: unauthenticated user.
520|0 1 10834 1 93|==== Contents of test case:
520|0 1 10834 1 94|{ log list $DCP_LOG_SRVR_ONE           }
520|0 1 10834 1 95|Test completed successfully.
520|0 1 10834 1 96|== Test output was:
520|0 1 10834 1 97|{dts rpc cds aud}
520|0 1 10834 1 98|== Expected output was:
520|0 1 10834 1 99|{dts aud rpc cds}
520|0 1 10834 1 100|Test Failed.
220|0 1 1 08:18:30|FAIL

[10/13/94 public]

Test log_modify_020_N looks like another authentication test so don't
run the tests as root or have a login context.

For tests: log_list_011_P, log_list_012_P, log_list_024_P, modify the
tests to "lsort" the output.

[10/20/94 public]
I ran the test again, not as the superuser, and log_modify_020_N passed.
The other still failed as expected.

[09/13/95 public]
Sort the output from the log_list tests so the output is in the correct
order.  Part of HP 1.1 Warranty Patch submission.



CR Number                     : 12596
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp link func test fails
Reported Date                 : 10/12/94
Found in Baseline             : 1.1b21
Found Date                    : 10/12/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : dcecp
Sensitivity                   : public

[10/12/94 public]

The following error was found in the journal file:

520|0 1 18256 1 10|link_modify_11_P: Check that we are able to modify a list of
attributes on a
520|0 1 18256 1 11|link_modify_11_P: softlink within the cds namespace
520|0 1 18256 1 12|==== Contents of test case:
520|0 1 18256 1 13|{        link modify /.:/linkmd -change {{CDS_LinkTimeout  {e
xpiration 1993-11-11-11:10:30.000} {extension 10-10:10:10}} {CDS_LinkTarget /.:/
subsys}}       attrlist getvalues [link show /.:/linkmd] -type CDS_LinkTimeout
      }
520|0 1 18256 1 14|Test completed successfully.
520|0 1 18256 1 15|== Test output was:
520|0 1 18256 1 16|{{expiration 1993-11-11-05:10:30.000}  {extension +10-10:10:1
0.000I-----}}
520|0 1 18256 1 17|== Expected output was:
520|0 1 18256 1 18|{{expiration 1993-11-11-06:10:30.000}  {extension +10-10:10:1
0.000I-----}}
520|0 1 18256 1 19|Test Failed.
220|0 1 1 14:21:53|FAIL


This appears to be a date problem. My TZ variable is set to CST6CDT.

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12595
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp func clearinghouse test fails
Reported Date                 : 10/12/94
Found in Baseline             : 1.1b21
Found Date                    : 10/12/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2
Affected File(s)              : clearinghouse_disable_P.tcl
Sensitivity                   : public

[10/12/94 public]

The following error were found in the journal file:

...
520|0 1 17991 1 19|clearinghouse_create_3_N: Check that unauthenticated users ar
e handled correctly.
520|0 1 17991 1 20|==== Contents of test case:
520|0 1 17991 1 21|{         list [catch {clearinghouse create /.:/foo_ch} msg]
$msg     }
520|0 1 17991 1 22|Test completed successfully.
520|0 1 17991 1 23|== Test output was:
520|0 1 17991 1 24|{1 {Insufficient rights to perform requested operation}}
520|0 1 17991 1 25|== Expected output was:
520|0 1 17991 1 26|{1 {No currently established network identity for which conte
xt exists}}
520|0 1 17991 1 27|Test Failed.
220|0 1 1 15:42:22|FAIL
...
520|0 1 15758 1 19|clearinghouse_delete_3_N: Check that unauthenticated users ar
e handled correctly.
520|0 1 15758 1 20|==== Contents of test case:
520|0 1 15758 1 21|{         list [catch {clearinghouse delete /.:/foo_ch} msg]
$msg     }
520|0 1 15758 1 22|Test completed successfully.
520|0 1 15758 1 23|== Test output was:
520|0 1 15758 1 24|{1 {Specified clearinghouse does not exist}}
520|0 1 15758 1 25|== Expected output was:
520|0 1 15758 1 26|{1 {No currently established network identity for which conte
xt exists}}
520|0 1 15758 1 27|Test Failed.
220|0 1 1 15:42:35|FAIL
...
520|0 1 18131 1 19|clearinghouse_disable_3_N: Check that unauthenticated users a
re handled correctly.
520|0 1 18131 1 20|==== Contents of test case:
520|0 1 18131 1 21|{         list [catch {clearinghouse disable /.:/foo_ch} msg]
 $msg     }
520|0 1 18131 1 22|Test completed successfully.
520|0 1 18131 1 23|== Test output was:
520|0 1 18131 1 24|{1 {Specified clearinghouse does not exist}}
520|0 1 18131 1 25|== Expected output was:
520|0 1 18131 1 26|{1 {No currently established network identity for which conte
xt exists}}
520|0 1 18131 1 27|Test Failed.
220|0 1 1 15:42:48|FAIL
...
520|0 1 15837 1 1|clearinghouse_disable_4_P: Check that we can successfully disa
ble a cds clearinghouse
520|0 1 15837 1 2|==== Contents of test case:
520|0 1 15837 1 3|{ clearinghouse disable /.:/clrdi_ch           clearinghouse d
elete /.:/clrdi_ch          }
520|0 1 15837 1 4|== Test generated error.
520|0 1 15837 1 5|== Test output was:
520|0 1 15837 1 6|{Specified clearinghouse does not exist}
220|0 1 1 15:46:39|FAIL
...
520|0 1 15837 1 7|clearinghouse_disable_5_P: Check that we can successfully disa
ble a list of cds
520|0 1 15837 1 8|clearinghouse_disable_5_P: clearinghouses
520|0 1 15837 1 9|==== Contents of test case:
520|0 1 15837 1 10|{ clearinghouse disable {/.:/clrdi_ch /.:/clrdi1_ch}
 clearinghouse delete  {/.:/clrdi_ch /.:/clrdi1_ch}          }
520|0 1 15837 1 11|== Test generated error.
520|0 1 15837 1 12|== Test output was:
520|0 1 15837 1 13|{Specified clearinghouse does not exist}
220|0 1 1 15:47:35|FAIL

[10/13/94 public]

All of the negative test case failures are the result of an invalid login 
context being present at the execution of the test.

[10/21/94 public]
I reran the test on BL22 with the following failures:

...
520|0 1 17185 1 1|clearinghouse_disable_4_P: Check that we can successfully disa
ble a cds clearinghouse
520|0 1 17185 1 2|==== Contents of test case:
520|0 1 17185 1 3|{ clearinghouse disable /.:/clrdi_ch           clearinghouse d
elete /.:/clrdi_ch          }
520|0 1 17185 1 4|== Test generated error.
520|0 1 17185 1 5|== Test output was:
520|0 1 17185 1 6|{Specified clearinghouse does not exist}
220|0 1 1 10:03:27|FAIL
410|0 1 1 10:03:27|IC End
400|0 2 1 10:03:27|IC Start
200|0 1 10:03:27|TP Start
520|0 1 17185 1 7|clearinghouse_disable_5_P: Check that we can successfully disa
ble a list of cds
520|0 1 17185 1 8|clearinghouse_disable_5_P: clearinghouses
520|0 1 17185 1 9|==== Contents of test case:
520|0 1 17185 1 10|{ clearinghouse disable {/.:/clrdi_ch /.:/clrdi1_ch}         
 clearinghouse delete  {/.:/clrdi_ch /.:/clrdi1_ch}          }
520|0 1 17185 1 11|== Test generated error.
520|0 1 17185 1 12|== Test output was:
520|0 1 17185 1 13|{Specified clearinghouse does not exist}
220|0 1 1 10:05:22|FAIL

[09/13/95 public]
Use correct and distinct  clearinghouse names in each test.
Part of HP 1.1 Warranty Patch submission.



CR Number                     : 12593
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dcecp account functional test fails
Reported Date                 : 10/12/94
Found in Baseline             : 1.1b21
Found Date                    : 10/12/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2
Affected File(s)              : account_generate_N.tcl
Sensitivity                   : public

[10/12/94 public]

The following errors were found in the journal file:

...
520|0 1 10898 1 19|account_create_3_N: Check that unauthenticated users are hand
led correctly.
520|0 1 10898 1 20|==== Contents of test case:
520|0 1 10898 1 21|{         list [catch {account create kevin -group none -orga
nization none -password mine -mypwd $DCP_CLIENT_PW} msg] $msg     }
520|0 1 10898 1 22|Test completed successfully.
520|0 1 10898 1 23|== Test output was:
520|0 1 10898 1 24|{1 {Registry object not found}}
520|0 1 10898 1 25|== Expected output was:
520|0 1 10898 1 26|{1 {Cant establish authentication to security server}}
520|0 1 10898 1 27|Test Failed.
220|0 1 1 10:10:57|FAIL
...
520|0 1 16961 1 46|account_generate_6_N: Check to see that account cannot be
520|0 1 16961 1 47|account_generate_6_N: generated when password generation is r
equired.
520|0 1 16961 1 48|==== Contents of test case:
520|0 1 16961 1 49|{         list [catch {account create $PRINCIPAL -group none
-org none -password foo -mypwd $DCP_CLIENT_PW} msg] $msg     }
520|0 1 16961 1 50|Test completed successfully.
520|0 1 16961 1 51|== Test output was:
520|0 1 16961 1 52|{1 {Entry not found}}
520|0 1 16961 1 53|== Expected output was:
520|0 1 16961 1 54|{1 {password failed password strength server checking policy}
}
520|0 1 16961 1 55|Test Failed.
220|0 1 1 10:12:38|FAIL
...
520|0 1 17019 1 38|account_create_49_P: Check that we can create an account with
 a list of attributes.
520|0 1 17019 1 39|==== Contents of test case:
520|0 1 17019 1 40|{  account create $PRINCIPAL -attribute $LIST        dcp_attr
list getval [account show $PRINCIPAL] expdate   }
520|0 1 17019 1 41|Test completed successfully.
520|0 1 17019 1 42|== Test output was:
520|0 1 17019 1 43|1999-04-12-19:00:00.000-05:00I-----
520|0 1 17019 1 44|== Expected output was:
520|0 1 17019 1 45|1999-04-12-20:00:00.000-04:00I-----
520|0 1 17019 1 46|Test Failed.
220|0 1 1 10:14:29|FAIL
...
520|0 1 17019 1 56|account_create_51_P: Check that we can create an account with
 a list of attributes.
520|0 1 17019 1 57|==== Contents of test case:
520|0 1 17019 1 58|{  account create $PRINCIPAL -attribute $LIST        dcp_attr
list getval [account show $PRINCIPAL] goodsince         }
520|0 1 17019 1 59|Test completed successfully.
520|0 1 17019 1 60|== Test output was:
520|0 1 17019 1 61|1999-04-12-19:00:00.000-05:00I-----
520|0 1 17019 1 62|== Expected output was:
520|0 1 17019 1 63|1999-04-12-20:00:00.000-04:00I-----
520|0 1 17019 1 64|Test Failed.
220|0 1 1 10:14:39|FAIL
...
520|0 1 17037 1 1|account_generate_7_P: Check to see that account passwords are
generated.
520|0 1 17037 1 2|==== Contents of test case:
520|0 1 17037 1 3|{ if { [catch {account generate $PRINCIPAL} msg] == 0} {
          if {[string length $msg] != 0} {                    account create $PR
INCIPAL -group none -org none  -password $msg -mypwd $DCP_CLIENT_PW
        if {[lsearch [account catalog -simple] $PRINCIPAL] != -1 } {
             list success } else {list fail}                } else {list fail} }
 else {list fail}}
520|0 1 17037 1 4|Test completed successfully.
520|0 1 17037 1 5|== Test output was:
520|0 1 17037 1 6|fail
520|0 1 17037 1 7|== Expected output was:
520|0 1 17037 1 8|success
520|0 1 17037 1 9|Test Failed.
220|0 1 1 10:16:42|FAIL
...
520|0 1 17037 1 10|account_generate_8_P: Check to see that account passwords are
 generated.
520|0 1 17037 1 11|==== Contents of test case:
520|0 1 17037 1 12|{ if { [catch {account generate $PRINCIPAL} msg] == 0} {
           if {[string length $msg] != 0} {                    account create $P
RINCIPAL -group none -org none  -password $msg -mypwd $DCP_CLIENT_PW
         if {[lsearch [account catalog -simple] $PRINCIPAL] != -1 } {
              list success } else {list fail}                } else {list fail}
} else {list fail}}
520|0 1 17037 1 13|Test completed successfully.
520|0 1 17037 1 14|== Test output was:
520|0 1 17037 1 15|fail
520|0 1 17037 1 16|== Expected output was:
520|0 1 17037 1 17|success
520|0 1 17037 1 18|Test Failed.
220|0 1 1 10:16:45|FAIL
...
520|0 1 17037 1 19|account_generate_9_P: Check to see that account passwords are
 generated.
520|0 1 17037 1 20|==== Contents of test case:
520|0 1 17037 1 21|{ principal modify $PRINCIPAL -add {{pwd_val_type 3}  {pwd_mg
mt_binding {{dce  /.:/pwd_strength pktprivacy  secret name} {/.:/pwd_mgmt/pwd_st
rength}}}}           if { [catch {account generate $PRINCIPAL} msg] == 0} {
         if {[string length $msg] != 0} {                 account modify $PRINCI
PAL -password $msg -mypwd $DCP_CLIENT_PW                  if {[lsearch [account
catalog -simple] $PRINCIPAL] != -1 } {                       list success } else
 {list fail}            } else
520|0 1 17037 1 22|Test completed successfully.
520|0 1 17037 1 23|== Test output was:
520|0 1 17037 1 24|fail
520|0 1 17037 1 25|== Expected output was:
520|0 1 17037 1 26|success
520|0 1 17037 1 27|Test Failed.
220|0 1 1 10:16:48|FAIL
...
520|0 1 17037 1 28|account_generate_10_P: Check to see that account passwords ar
e generated.
520|0 1 17037 1 29|==== Contents of test case:
520|0 1 17037 1 30|{ if { [catch {account generate $PRINCIPAL} msg] == 0} {
           if {[string length $msg] != 0} {                    list success
           } else {list fail}            } else {list fail} }
520|0 1 17037 1 31|Test completed successfully.
520|0 1 17037 1 32|== Test output was:
520|0 1 17037 1 33|fail
520|0 1 17037 1 34|== Expected output was:
520|0 1 17037 1 35|success
520|0 1 17037 1 36|Test Failed.
220|0 1 1 10:16:51|FAIL
...
520|0 1 17113 1 37|account_modify__8_P: Check that we can create an account with
 a list of attributes.
520|0 1 17113 1 38|==== Contents of test case:
520|0 1 17113 1 39|{ account modify $PRINCIPAL -expdate 1995-01-01      dcp_attr
list getval [account show $PRINCIPAL] expdate         }
520|0 1 17113 1 40|Test completed successfully.
520|0 1 17113 1 41|== Test output was:
520|0 1 17113 1 42|1994-12-31-18:00:00.000-06:00I-----
520|0 1 17113 1 43|== Expected output was:
520|0 1 17113 1 44|1994-12-31-19:00:00.000-05:00I-----
520|0 1 17113 1 45|Test Failed.
220|0 1 1 10:17:53|FAIL
...
520|0 1 17113 1 55|account_modify_10_P: Check that we can create an account with
 a list of attributes.
520|0 1 17113 1 56|==== Contents of test case:
520|0 1 17113 1 57|{ account modify $PRINCIPAL -goodsince 1995-01-01    dcp_attr
list getval [account show $PRINCIPAL] goodsince          }
520|0 1 17113 1 58|Test completed successfully.
520|0 1 17113 1 59|== Test output was:
520|0 1 17113 1 60|1994-12-31-18:00:00.000-06:00I-----
520|0 1 17113 1 61|== Expected output was:
520|0 1 17113 1 62|1994-12-31-19:00:00.000-05:00I-----
520|0 1 17113 1 63|Test Failed.
220|0 1 1 10:18:12|FAIL

[09/13/95 public]
The tests pass when run in the correct environment.  We did some
minor cleanup in one of the files.  Part of HP 1.1 Warranty Patch
submission.



CR Number                     : 12590
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : rpcprofile test failure
Reported Date                 : 10/12/94
Found in Baseline             : 1.1b21
Found Date                    : 10/12/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : dcecp
Sensitivity                   : public

[10/12/94 public]

The rpcprofile test failed with the following in the journal file:

520|0 1 15760 1 28|rpcprofile_show_4_N: Check that a bad value for -version fail
s.
520|0 1 15760 1 29|==== Contents of test case:
520|0 1 15760 1 30|{         list [catch {rpcprofile show /.:/rpcp_show_4_N -int
erface [list [uuid create] 1.0] -version bad} msg] $msg     }
520|0 1 15760 1 31|Test completed successfully.
520|0 1 15760 1 32|== Test output was:
520|0 1 15760 1 33|{1 {Invalid string UUID}}
520|0 1 15760 1 34|== Expected output was:
520|0 1 15760 1 35|{1 {The value 'bad' is not a valid version identifier.}}
520|0 1 15760 1 36|Test Failed.
220|0 1 1 16:20:42|FAIL

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12582
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : test case failures using hostname
Reported Date                 : 10/11/94
Found in Baseline             : 1.1b21
Found Date                    : 10/11/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : dcecp
Sensitivity                   : public

[10/11/94 public]

There are several places in the dcecp tests where the hostname is
resolved using [exec hostname]. There are problem with this because
at times a comparison is made with entries in the namespace or
elsewhere that have deleted the domain from the name. An example of
this is in the dts test. Here is the output from the journal file:

520|0 1 12417 1 28|dts_modify_4_N: Check the handling of the -globaltimeout opti
on with invalid data.
520|0 1 12417 1 29|==== Contents of test case:
520|0 1 12417 1 30|{         list [catch {dts modify -globaltimeout foo /.:/host
s/[exec hostname]/dts-entity} msg] $msg     }
520|0 1 12417 1 31|Test completed successfully.
520|0 1 12417 1 32|== Test output was:
520|0 1 12417 1 33|{1 {Entry not found}}
520|0 1 12417 1 34|== Expected output was:
520|0 1 12417 1 35|{1 {Invalid DTS style timestamp.}}
520|0 1 12417 1 36|Test Failed.
220|0 1 1 16:53:51|FAIL

"hostname" may return a value that contains the domain and the domain
is stripped when this entry is made in the namespace.

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12574
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : functional tests return UNRESOLVED
Reported Date                 : 10/10/94
Found in Baseline             : 1.1b21
Found Date                    : 10/10/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : dcecp
Sensitivity                   : public

[10/10/94 public]

A few of the dcecp functional tests indicate that the test passed
but it appears that tet_result is never being called.

For example the rpcgroup test has the following in the journal file:

520|0 1 17915 1 4|rpcgroup_add_1_N: Check that no supplied arguments is trapped
as an error.
520|0 1 17915 1 5|==== Contents of test case:
520|0 1 17915 1 6|{         list [catch {rpcgroup add} msg] $msg     }
520|0 1 17915 1 7|Test completed successfully.
520|0 1 17915 1 8|== Test output was:
520|0 1 17915 1 9|{1 {No RPC Group name given}}
520|0 1 17915 1 10|== Expected output was:
520|0 1 17915 1 11|{1 {No RPC Group name given}}
520|0 1 17915 1 12|Test Passed.
220|0 1 2 14:01:40|UNRESOLVED

No the question is did the test pass or fail?

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12521
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 12311
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : file
Short Description             : README update needed
Reported Date                 : 10/5/94
Found in Baseline             : 1.1b20
Found Date                    : 10/5/94
Severity                      : B
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b21
Affected File(s)              : src/test/systest/file/README.RWALL
Sensitivity                   : public

[10/5/94 public]

The README.RWALL should include a note that if the test is to be run
for > 10h, which requires the default ticket lifetime in the registry
to be set to > 10h, ALL the machine "self" principals should be given
max certificate lifetimes of 10h. If you do NOT do this, DCE performance
in the cell degrades as the credential caches grow (see CR 12311).

[10/6/94 public]
Submitted.



CR Number                     : 12512
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 12388
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dcesergy
Short Description             : dcesergy failing alot
Reported Date                 : 10/5/94
Found in Baseline             : 1.1b20
Found Date                    : 10/5/94
Severity                      : B
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : test/systest/security/sec.rgy.7/decesergy.data
Sensitivity                   : public

[10/5/94 public]

During a 18CHO run with bl-20, the dcesergy test (sec.rgy.7) recorded
the following number of pass/fails:
        pass = 21, fail = 34

This needs to be further investigated since it was expected that the
test would run better this baseline due to test fixes and DCE 
performance improvements.

[10/5/94 public]

The test would have run better if I had submitted both files associated with 
CR 12388.  I neglected to submit the dcesergy.data file.  The result was 
that the test server was not waiting any time at all before accepting client
requests.



CR Number                     : 12487
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dced
Short Description             : HYP:DCDREL003 may need changes
Reported Date                 : 10/4/94
Found in Baseline             : 1.1b20
Found Date                    : 10/4/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b21
Affected File(s)              : DCDREL003*
Sensitivity                   : public

[10/4/94 public]

DCDREL003 has not been fully executed due to incomplete setup. Once
that problem is fixed it may require additional changes to reflect
dced design decisions that were made after the test was written.

[10/5/94 public]

Rick did this work and submitted...



CR Number                     : 12486
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dced
Short Description             : HYP: DCDREL002 changes needed due to dced design decisions
Reported Date                 : 10/4/94
Found in Baseline             : 1.1b20
Found Date                    : 10/4/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b21
Affected File(s)              : dcdrel002.tcl,dcd_st_utils.tcl
Sensitivity                   : public

[10/4/94 public]

Operation of the "server ping" command and "server auto restart" was 
unclear in some situations. This needs to be clarified, and the 
test may need modifications to reflect the decisions made.

[10/5/94 public]

Modified the test to avoid using "server ping" to check status of
an automatic server.



CR Number                     : 12484
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dced
Short Description             : HYP:DCDREL002 doesn't use the portable form of "rsh"
Reported Date                 : 10/4/94
Found in Baseline             : 1.1b20
Found Date                    : 10/4/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b21
Affected File(s)              : dcdrel.functions
Sensitivity                   : public

[10/4/94 public]

DCDREL002 uses "rsh" directly in several places rather than "${RSH_COMM}",
and thus fails when run from an HP-UX system. (It works fine with an HP-UX
system as the target, run from an OSF system). (It doesn't use rshsp 
because its running Tcl scripts rather than ksh scripts.) The fix is to 
modify the offending routines in dced/ts/lib/dcdrel.functions.

[10/5/94 public]

Turned out that rshsp can be used with Tcl scripts, so I changed the rsh's
to rshsp's.



CR Number                     : 12482
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cds
Subcomponent Name             : 
Short Description             : HYP: Need CDS h-cell FVTs
Reported Date                 : 10/4/94
Found in Baseline             : 1.1
Found Date                    : 10/4/94
Severity                      : B
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : admin/dcecp/ts/*
Sensitivity                   : public

[10/4/94 public]

CDS h-cell FVTs that are available need to be dropped.  My understanding
is that some of this work is TETified and some isn't.  Whatever exists
that can be run needs to be dropped - TETified or not TETified.

[10/5/94 public]
Updated Roger's tests to use the same format as the other dcecp tests.
Submitted.



CR Number                     : 12480
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : acl
Short Description             : Intercell tests creating directory in wrong cell.
Reported Date                 : 10/3/94
Found in Baseline             : 1.1b20
Found Date                    : 10/3/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b21
Affected File(s)              : src/test/functional/admin/dcecp/ts/acl/acl_modify_P.tcl,src/test/functional/admin/dcecp/ts/acl/acl_replace_P.tcl
Sensitivity                   : public

[10/3/94 public]

acl_modify_134_P
acl_replace_025_P
acl_replace_029_P
acl_replace_032_P
acl_replace_034_P
acl_replace_036_P
acl_replace_038_P
acl_replace_040_P
acl_replace_042_P

[10/25/94 public]
closed.



CR Number                     : 12479
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : log
Short Description             : HYP: Due to CR12457, change test comparison.
Reported Date                 : 10/3/94
Found in Baseline             : 1.1b20
Found Date                    : 10/3/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b21
Affected File(s)              : src/test/functional/admin/dcecp/ts/log/log_list_P.tcl, src/test/functional/admin/dcecp/ts/log/log_modify_P.tcl
Sensitivity                   : public

[10/3/94 public]

Change tests:
log_modify_049_P 
log_modify_050_P
log_modify_051_P
log_modify_052_P 
log_modify_053_P
log_modify_054_P

[10/5/94 public]

Here are the results for dcecp log FVT:

Test Name                              PASS  FAIL UNRES UNINI UNSUP   Unk
=========================================================================
/ts/log/log_list_N.tcl                   10     0     0     0     0     0
/ts/log/log_show_N.tcl                    7     0     0     1     0     0
/ts/log/log_modify_N.tcl                 19     0     0     1     0     0
/ts/log/log_list_P.tcl                   14     0     0     0     0     0
/ts/log/log_show_P.tcl                   14     0     0     0     0     0
/ts/log/log_modify_P.tcl                 72     0     0     0     0     0
=========================================================================
Totals                                  136     0     0     2     0     0

[10/25/94 public]
closed.



CR Number                     : 12474
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dts
Subcomponent Name             : dtscp test
Short Description             : dtscp test needs updating
Reported Date                 : 10/3/94
Found in Baseline             : 1.1b20
Found Date                    : 10/3/94
Severity                      : B
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : ./test/time/control/Makefile
./test/time/control/README
./test/time/control/dtscp.ksh
./test/time/control/test_dtscp_clerk.templ
./test/time/control/test_dtscp_server.templ
Sensitivity                   : public

[10/3/94 public]

The dtscp test scripts need updating for 1.1.
Among the things to be fixed:
	- expected output differs with new svc messages (capitalizations mostly)
	- A few sleeps needed to be added for show state tests
	- A README file needs to be added and installed

[10/3/94 public]
Fixed up the test so they pass.

[10/3/94 public]
A note after the fact to denote this bug was approved hypercritical.



CR Number                     : 12459
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : tests
Short Description             : Various test cleanup
Reported Date                 : 9/30/94
Found in Baseline             : 1.1b19
Found Date                    : 9/30/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : many in src/test/functional
Sensitivity                   : public

[9/30/94 public]
The following tests (and datafiles for tests) need to be updated.
Acl and log tests are updated to generate string bindings on the fly.
test_common.tcl has the new routines for the acl and log test string
binding generation. tetexec.cfg has the acl and log string binding 
variables ripped out.

The aud* tests were changed to support new event classes and handle
new functionality in the audit daemon.

The dts test was changed to work around CR 'cuz they were broke.

./tetexec.cfg
./ts/acl/acl_modify_N.tcl
./ts/acl/acl_replace_P.tcl
./ts/acl/acl_check_N.tcl
./ts/acl/acl_modify_P.tcl
./ts/acl/acl_show_N.tcl
./ts/acl/acl_check_P.tcl
./ts/acl/acl_permissions_N.tcl
./ts/acl/acl_show_P.tcl
./ts/acl/acl_delete_N.tcl
./ts/acl/acl_permissions_P.tcl
./ts/acl/acl_delete_P.tcl
./ts/acl/acl_replace_N.tcl
./ts/dts/dts_modify_N.tcl
./ts/aud/aud_modify_P.tcl
./ts/aud/aud_disable_P.tcl
./ts/aud/audfilter_modify_P.tcl
./ts/aud/audevents_show_P.tcl
./ts/aud/AT386/trail1.md_index
./ts/aud/AT386/trail1
./ts/aud/AT386/trail2
./ts/aud/AT386/trail2.md_index
./ts/aud/audfilter_show_P.tcl
./ts/log/log_list_P.tcl
./ts/log/log_modify_P.tcl
./ts/log/log_show_P.tcl
./ts/log/log_list_N.tcl
./ts/log/log_modify_N.tcl
./ts/log/log_show_N.tcl
./lib/test_common.tcl

[10/3/94 public]
Submitted.

[10/25/94 public]
closed.



CR Number                     : 12449
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : utils
Subcomponent Name             : attr
Short Description             : attr schema tests need better error checking
Reported Date                 : 9/30/94
Found in Baseline             : 1.1b19
Found Date                    : 9/30/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : test/dce/utils/attr/ts/attr_sch/dce_attr_sch_fvt.c
Sensitivity                   : public

[9/30/94 public]
The tests in dce_attr_sch_fvt.c should do better error checking in general.
(eg, tests continue even if a setup call fails.) In particular, they all
depend on the first test passing; if that fails, none of the others can pass.

[1/3/94 public]
Made the changes above.  If first test fails (it does some setup, like
binding to the server), a flag is set.  All the other tests check this
flag, and act accordingly (ie, if setup failed, report unresolved).



CR Number                     : 12440
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : I18N
Short Description             : HYP: tests need minor corrections to run
Reported Date                 : 9/30/94
Found in Baseline             : 1.1b20
Found Date                    : 9/30/94
Severity                      : C
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : src/test/systest/I18N/README
		 src/test/systest/I18N/lib/test_common.tcl
		 src/test/systest/I18N/ts/I8NSAN001
Sensitivity                   : public

[9/30/94 public]

The I8NSAN001 tests need some minor corrections.  The path to dcecp,
the syntax to link create, and acl edit of non-PCS objects need to
be addressed.

[10/3/94 public]
On hypercritical list.

[9/30/94 public]

Submitted changes.



CR Number                     : 12436
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dced
Subcomponent Name             : FVT
Short Description             : HYP: Defunct tests from ./test/admin/dced/*
Reported Date                 : 9/30/94
Found in Baseline             : 1.1b20
Found Date                    : 9/30/94
Severity                      : B
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : test/admin/dced/*
Sensitivity                   : public

[9/30/94 public]

Howard has moved the dced tests to the correct location.  The old ones
should be defuncted.

[10/3/94 public]
Tests have been defuncted.  Assigning to my good friend and colleague Sally to 
remove directories.....

./test/admin
./test/admin/dced
./test/admin/dced/ts
./test/admin/dced/ts/api

[10/3/94 public]
Designated as being on hypercritical list.  Should be done 10/3.



CR Number                     : 12435
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : test
Short Description             : misc commands fail various tests.
Reported Date                 : 9/30/94
Found in Baseline             : 1.1
Found Date                    : 9/30/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : uuid_compare_N.tcl login_P.tcl
Sensitivity                   : public

[9/30/94 public]

The uuid_compare_N.tcl test incorrectly tests invalid uuid message.

The login_P.tcl has a test that is not implemented nor should it be.

[kevins 9/30/94 public] 

made the fix..

[10/6/94 public]
closed.



CR Number                     : 12432
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : sec tests.
Short Description             : Defunct directory for the
tet-based tests from /src/test/security.
Reported Date                 : 9/30/94
Found in Baseline             : 1.1
Found Date                    : 9/30/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : ./src/test/security/tet-tests
Sensitivity                   : public

[9/30/94 public]
Max, Please defunct the tet-tests directory from ./src/test/security. The
tet-based security tests were originally developed under this path. Now
that all tet-based tests are under ./src/test/functional/security,
everything including tet-tests directory from the ./src/test/security path
should be defunct.

[10/3/93 public]
Done by the rats. Marking fixed



CR Number                     : 12414
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 10967
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : Update pgo tests to reflect new show functionality
Reported Date                 : 9/29/94
Found in Baseline             : 1.1b19
Found Date                    : 9/29/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : see list below
Sensitivity                   : public

[9/29/94 public]

With the changes made to pgo show and multiple values
per attribute, some of the pgo tests need to be updated.
These tests are
   group_show_era_N.tcl
   group_show_era_P.tcl
   org_show_era_N.tcl
   org_show_era_P.tcl
   principal_show_era_N.tcl
   principal_show_era_P.tcl
   group_create_era_P.tcl
   org_create_era_P.tcl
   principal_create_era_P.tcl
   group_modify_era_P.tcl
   org_modify_era_P.tcl
   principal_modify_era_P.tcl

[9/30/94 public]
Changes that were made to the generic schema recently
are causing the schema_modify_generic_P.tcl test to
have failures.  The test needs to be changed before
this OT can be closed.

[9/30/94 public]
Submitted.

[10/6/94 public]
closed.



CR Number                     : 12406
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 9834
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : aud
Subcomponent Name             : fvts
Short Description             : api_log_to_daemon tests need updateing
Reported Date                 : 9/29/94
Found in Baseline             : 1.1b19
Found Date                    : 9/29/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : api_log_to_daemon/aud_testd_rpc_manager.c
Sensitivity                   : public

[9/29/94 public]
Due to the changes made for CR 9834, the api_log_to_daemon test needs
updating.

[09/29/94 public]
fixed.



CR Number                     : 12405
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : dlg_intermediary
Short Description             : add -exec switch to dlg_intermediary
Reported Date                 : 9/29/94
Found in Baseline             : 1.1
Found Date                    : 9/29/94
Severity                      : D
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : src/test/security/api/moretests/dlg_intermediary.c
Sensitivity                   : public

[9/29/94 public]
Add -exec switch to dlg_intermediary test process to allow execution
of arbitrary programs as delegated identity for test purposes.

[10/3/94 public]
Fix submitted.



CR Number                     : 12403
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : don't know how to make cdsalias_catalog_N.tcl
Reported Date                 : 9/29/94
Found in Baseline             : 1.1
Found Date                    : 9/29/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : test/admin/*
Sensitivity                   : public

[9/29/94 public]

platform - HPUX, AT486 (and possibly RIOS - RIOS build is in progress)
machine  - zagreb, vienna

extract from zagreb:/u3/devobj/sb/nb_ux/logs/tests.log.09-28-94

[ /test/admin/dcecp/ts/aud at 00:01 (AM) Thursday ]
makepath aud/. && cd aud &&  exec make MAKEFILE_PASS=BASIC     build_all
aud: created directory
[ /test/admin/dcecp/ts/cds at 00:01 (AM) Thursday ]
makepath cds/. && cd cds &&  exec make MAKEFILE_PASS=BASIC     build_all
cds: created directory
make: don't know how to make cdsalias_catalog_N.tcl (continuing)

[9/29/94 public]
These are in the old area, all these tests got moved to
src/test/functional/admin/dcecp last night.  Everything built fine there.
These are getting defuncted today.  It was probably a Makefile synch with
the tests problem.

[kevins 9/29/94 public] 

There was a glich of some sort at snap-time and the file was not 
transfered to the snap-tree.

[9/29/94 public]
the files have been defuncted.

[10/6/94 public]
closed.



CR Number                     : 12396
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : 
Short Description             : Submit dlgcfg002 test
Reported Date                 : 9/28/94
Found in Baseline             : 1.1
Found Date                    : 9/28/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : Makefile
Sensitivity                   : public

[9/28/94 public]


Submit the dlgcfg002 test.    
This test will test delegation backward compatibility
and delegation acl entries.

[9/29/94 public]

Typo, I meant dlgcfg002 not dlgcfg001.
dlgcfg001 is already submitted.

[10/05/94 public]

Test fixed in 1.1unintegrated functionality

[10/05/94 public]

Really fixed in 1.1b20



CR Number                     : 12393
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dced
Subcomponent Name             : 
Short Description             : dced functional test failures
Reported Date                 : 9/28/94
Found in Baseline             : 1.1
Found Date                    : 9/28/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : Several
Sensitivity                   : public

[9/28/94 public]

common test failures

520|0 2 23421 1 1|dced_inq_id_2, Assertion 02(A):
520|0 2 23421 1 2|When a srvrexec dced binding handle is supplied to
520|0 2 23421 1 3|dced_inq_id along with the srvrexec entry name,
520|0 2 23421 1 4|the entry id and the status error_status_ok is returned.
220|0 2 1 15:22:00|FAIL

...

520|1 2 23422 1 1|dced_inq_name_2, Assertion 02(A):
520|1 2 23422 1 2|When a srvrexec dced binding handle is supplied to
520|1 2 23422 1 3|dced_inq_name along with the entry id,
520|1 2 23422 1 4|the entry name and the status error_status_ok is returned.
220|1 2 1 15:22:06|FAIL

...

520|2 2 23423 1 1|dced_list_get_2, Assertion 02(A):
520|2 2 23423 1 2|When a srvrexec dced binding handle is supplied to
520|2 2 23423 1 3|dced_list_get, srvrexec entry list is returned.
220|2 2 1 15:22:14|FAIL

...

520|3 2 23424 1 1|dced_list_release_2, Assertion 02(A):
520|3 2 23424 1 2|When a srvrexec dced binding handle is supplied to
520|3 2 23424 1 3|dced_list_release along with the srvrexec entry list,
520|3 2 23424 1 4|the entry list is freed.
220|3 2 1 15:22:22|FAIL

...

520|4 2 23425 1 1|dced_entry_get_next_2, Assertion 02(A):
520|4 2 23425 1 2|When a srvrexec dced binding handle is supplied to
520|4 2 23425 1 3|dced_entry_get_next, srvrexec entry list is returned.
220|4 2 1 15:22:30|FAIL

...

520|7 2 23428 1 1|dced_object_read_2, Assertion 02(A):
520|7 2 23428 1 2|When srvrexec dced binding handle is supplied to
520|7 2 23428 1 3|dced_object_read along with the object uuid
520|7 2 23428 1 4|the associated object (server_t) is returned.
220|7 2 1 15:22:52|FAIL

...

520|9 2 23430 1 1|dced_object_read_all_2, Assertion 02(A):
520|9 2 23430 1 2|When srvrexec dced binding handle is supplied to
520|9 2 23430 1 3|dced_object_read_all, a list of objects (server_t)
520|9 2 23430 1 4|is returned along with a count of the objects.
220|9 2 1 15:23:10|FAIL


srvrexec test failures

520|0 1 23463 1 1|dced_server_start_1, Assertion 01(A):
520|0 1 23463 1 2|When a srvrconf dced binding handle is supplied to
520|0 1 23463 1 3|dced_server_start along with the server object,
520|0 1 23463 1 4|the server is started and the status is set to error_status_o
k.
520|0 1 23463 1 5|server name : dced_test_server
520|0 1 23463 1 6|server uuid  = "045152aa-d4b9-11cd-b532-10005a4f33bf"
520|0 1 23463 1 7|services count: 1
520|0 1 23463 1 8|server if uuid (ip) = "002d2117-7062-1dd2-a9bb-0000c03cd04c"
520|0 1 23463 1 9|interface name: dced_test_server
520|0 1 23463 1 10|entry name: /.:/hosts/yale/dced_test_server
520|0 1 23463 1 11|objects count: 1
520|0 1 23463 1 12|object uuid = "60cc7b6a-9e48-11cd-a5d7-0000c03cd04c"
520|0 1 23463 1 13|program name: /ufs/test/tet/functional/admin/dced/ts/api/dce
d_test_server
520|0 1 23463 1 14|arguments count: 2
520|0 1 23463 1 15|value[1]: /.:/hosts/yale/dced_test_server
520|0 1 23463 1 16|value[2]: ncadg_ip_udp
520|0 1 23463 1 17|principal count: 1
520|0 1 23463 1 18|principals name : /.../doyen/dced_test_srvr_1
220|0 1 1 15:25:39|FAIL

[9/30/94 public]
Fix submitted.



CR Number                     : 12392
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : various errors in dcecp test
Reported Date                 : 9/28/94
Found in Baseline             : 1.1b19
Found Date                    : 9/28/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.2.1
Affected File(s)              : dcecp
Sensitivity                   : public

[9/28/94 public]

Some of the dcecp test values are hard coded. These need to be chamged.
Here is a summary of the errors, when the dcecp tests were run:

rpcgroup test

520|0 1 16104 1 1|rpcgroup_add_6_P: Verify that we can add a member to a group.
520|0 1 16104 1 2|==== Contents of test case:
520|0 1 16104 1 3|{         rpcgroup add /.:/rpcg_add_6_P -member /.:/foo
rpcgroup list /.:/rpcg_add_6_P     }
520|0 1 16104 1 4|Test completed successfully.
520|0 1 16104 1 5|== Test output was:
520|0 1 16104 1 6|/.../doyen/foo
520|0 1 16104 1 7|== Expected output was:
520|0 1 16104 1 8|/.../dcecp_cell.osf.org/foo
520|0 1 16104 1 9|Test Failed.
220|0 1 1 10:05:53|FAIL

...

520|0 1 16104 1 1|rpcgroup_add_6_P: Verify that we can add a member to a group.
520|0 1 16104 1 2|==== Contents of test case:
520|0 1 16104 1 3|{         rpcgroup add /.:/rpcg_add_6_P -member /.:/foo
rpcgroup list /.:/rpcg_add_6_P     }
520|0 1 16104 1 4|Test completed successfully.
520|0 1 16104 1 5|== Test output was:
520|0 1 16104 1 6|/.../doyen/foo
520|0 1 16104 1 7|== Expected output was:
520|0 1 16104 1 8|/.../dcecp_cell.osf.org/foo
520|0 1 16104 1 9|Test Failed.
220|0 1 1 10:05:53|FAIL

...

520|0 1 16104 1 10|rpcgroup_add_7_P: Verify that we can add a list of members
to a list of groups.
520|0 1 16104 1 11|==== Contents of test case:
520|0 1 16104 1 12|{         rpcgroup add {/.:/rpcg_add_7_P_1 /.:/rpcg_add_7_P_
2} -member {/.:/foo /.:/bar}     rpcgroup list {/.:/rpcg_add_7_P_1 /.:/rpcg_add
_7_P_2}     }
520|0 1 16104 1 13|Test completed successfully.
520|0 1 16104 1 14|== Test output was:
520|0 1 16104 1 15|{/.../doyen/foo /.../doyen/bar  /.../doyen/foo /.../doyen/ba
r}
520|0 1 16104 1 16|== Expected output was:
520|0 1 16104 1 17|{/.../dcecp_cell.osf.org/foo /.../dcecp_cell.osf.org/bar /..
./dcecp_cell.osf.org/foo /.../dcecp_cell.osf.org/bar}
520|0 1 16104 1 18|Test Failed.
220|0 1 1 10:05:59|FAIL

...

520|0 1 13941 1 1|rpcgroup_list_4_P: Verify that we can list the members in an 
rpc group.
520|0 1 13941 1 2|==== Contents of test case:
520|0 1 13941 1 3|{         rpcgroup list /.:/rpcg_list_4_P     }
520|0 1 13941 1 4|Test completed successfully.
520|0 1 13941 1 5|== Test output was:
520|0 1 13941 1 6|/.../doyen/foo
520|0 1 13941 1 7|== Expected output was:
520|0 1 13941 1 8|/.../dcecp_cell.osf.org/foo
520|0 1 13941 1 9|Test Failed.
220|0 1 1 10:07:00|FAIL

...

520|0 1 13941 1 10|rpcgroup_list_5_P: Verify that we can list the members in a 
list of rpc groups.
520|0 1 13941 1 11|==== Contents of test case:
520|0 1 13941 1 12|{         rpcgroup list {/.:/rpcg_list_5_P_1 /.:/rpcg_list_5 _P_2}     }
520|0 1 13941 1 13|Test completed successfully.
520|0 1 13941 1 14|== Test output was:
520|0 1 13941 1 15|{/.../doyen/foo /.../doyen/bar  /.../doyen/foo /.../doyen/ba
r}
520|0 1 13941 1 16|== Expected output was:
520|0 1 13941 1 17|{/.../dcecp_cell.osf.org/foo /.../dcecp_cell.osf.org/bar /..
./dcecp_cell.osf.org/foo /.../dcecp_cell.osf.org/bar}
520|0 1 13941 1 18|Test Failed.
220|0 1 1 10:07:05|FAIL

...

520|0 1 14006 1 1|rpcgroup_remove_6_P: Verify that we can remove a member from 
a group.
520|0 1 14006 1 2|==== Contents of test case:
520|0 1 14006 1 3|{         rpcgroup remove /.:/rpcg_rem_6_P -member /.:/bar
rpcgroup list /.:/rpcg_rem_6_P     }
520|0 1 14006 1 4|Test completed successfully.
520|0 1 14006 1 5|== Test output was:
520|0 1 14006 1 6|/.../doyen/foo
520|0 1 14006 1 7|== Expected output was:
520|0 1 14006 1 8|/.../dcecp_cell.osf.org/foo
520|0 1 14006 1 9|Test Failed.
220|0 1 1 10:07:36|FAIL

...

520|0 1 14006 1 10|rpcgroup_remove_7_P: Verify that we can remove a list of mem
bers from a list of groups.
520|0 1 14006 1 11|==== Contents of test case:
520|0 1 14006 1 12|{         rpcgroup remove {/.:/rpcg_rem_7_P_1 /.:/rpcg_rem_7
_P_2} -member {/.:/bar /.:/biz}  rpcgroup list {/.:/rpcg_rem_7_P_1 /.:/rpcg_rem
_7_P_1}     }
520|0 1 14006 1 13|Test completed successfully.
520|0 1 14006 1 14|== Test output was:
520|0 1 14006 1 15|{/.../doyen/foo /.../doyen/bang  /.../doyen/foo /.../doyen/b
ang}
520|0 1 14006 1 16|== Expected output was:
520|0 1 14006 1 17|{/.../dcecp_cell.osf.org/foo /.../dcecp_cell.osf.org/bang /.
../dcecp_cell.osf.org/foo /.../dcecp_cell.osf.org/bang}
520|0 1 14006 1 18|Test Failed.
220|0 1 1 10:07:45|FAIL


rpcprofile tests

520|0 1 25066 1 28|rpcprofile_show_4_N: Check that a bad value for -version fai
ls.
520|0 1 25066 1 29|==== Contents of test case:
520|0 1 25066 1 30|{         list [catch {rpcprofile show /.:/rpcp_show_4_N -in
terface [list [uuid create] 1.0] -version bad} msg] $msg     }
520|0 1 25066 1 31|Test completed successfully.
520|0 1 25066 1 32|== Test output was:
520|0 1 25066 1 33|{1 {Invalid string UUID}}
520|0 1 25066 1 34|== Expected output was:
520|0 1 25066 1 35|{1 {The value 'bad' is not a valid version identifier.}}
520|0 1 25066 1 36|Test Failed.
220|0 1 1 10:10:51|FAIL

...

520|0 1 25917 1 1|rpcprofile_add_10_P: Verify that we can add a member to an rp
c profile with -default.
520|0 1 25917 1 2|==== Contents of test case:
520|0 1 25917 1 3|{     rpcprofile add /.:/rpcp_add_10_P -member /.:/foo -defau
lt       rpcprofile show /.:/rpcp_add_10_P     }
520|0 1 25917 1 4|Test completed successfully.
520|0 1 25917 1 5|== Test output was:
520|0 1 25917 1 6|{{{00000000-0000-0000-0000-000000000000 0.0} /.../doyen/foo 0
}}
520|0 1 25917 1 7|== Expected output was:
520|0 1 25917 1 8|{{{00000000-0000-0000-0000-000000000000 0.0} /.../dcecp_cell.
osf.org/foo 0 }}
520|0 1 25917 1 9|Test Failed.

...

520|0 1 25917 1 10|rpcprofile_add_11_P: Verify that we can add a member to an r
pc profile with -interface.
520|0 1 25917 1 11|==== Contents of test case:
520|0 1 25917 1 12|{    rpcprofile add /.:/rpcp_add_11_P -member /.:/foo -inter
face {00205383-5fa0-1de2-a683-0000c03adf56 1.0}  rpcprofile show /.:/rpcp_add_1
1_P     }
520|0 1 25917 1 13|Test completed successfully.
520|0 1 25917 1 14|== Test output was:
520|0 1 25917 1 15|{{{00205383-5fa0-1de2-a683-0000c03adf56 1.0} /.../doyen/foo 
0}}
520|0 1 25917 1 16|== Expected output was:
520|0 1 25917 1 17|{{{00205383-5fa0-1de2-a683-0000c03adf56 1.0} /.../dcecp_cell
.osf.org/foo 0 }}
520|0 1 25917 1 18|Test Failed.

...

520|0 1 25917 1 19|rpcprofile_add_12_P: Verify that we can add a member to an r
pc profile with -interface,
520|0 1 25917 1 20|rpcprofile_add_12_P: -priority and -annotation.
520|0 1 25917 1 21|==== Contents of test case:
520|0 1 25917 1 22|{    rpcprofile add /.:/rpcp_add_12_P -member /.:/foo -inter
face {00205383-5fa0-1de2-a683-0000c03adf56 1.0} -priority 2 -annotation {Test e
ntry}     rpcprofile show /.:/rpcp_add_12_P     }
520|0 1 25917 1 23|Test completed successfully.
520|0 1 25917 1 24|== Test output was:
520|0 1 25917 1 25|{{{00205383-5fa0-1de2-a683-0000c03adf56 1.0} /.../doyen/foo 
2 {Test entry}}}
520|0 1 25917 1 26|== Expected output was:
520|0 1 25917 1 27|{{{00205383-5fa0-1de2-a683-0000c03adf56 1.0} /.../dcecp_cell
.osf.org/foo 2 {Test entry}}}
520|0 1 25917 1 28|Test Failed.

...

520|0 1 25917 1 29|rpcprofile_add_13_P: Verify that we can add a member to a li
st of rpc profiles with
520|0 1 25917 1 30|rpcprofile_add_13_P: -interface, -priority and -annotation.
520|0 1 25917 1 31|==== Contents of test case:
520|0 1 25917 1 32|{    rpcprofile add {/.:/rpcp_add_13_P_1 /.:/rpcp_add_13_P_2
} -member /.:/foo -interface {00205383-5fa0-1de2-a683-0000c03adf56 1.0} -priori
ty2 -annotation {Test entry}     rpcprofile show {/.:/rpcp_add_13_P_1 /.:/rpcp_
add_13_P_2}     }
520|0 1 25917 1 33|Test completed successfully.
520|0 1 25917 1 34|== Test output was:
520|0 1 25917 1 35|{{{00205383-5fa0-1de2-a683-0000c03adf56 1.0} /.../doyen/foo 
2 {Test entry}}  {{00205383-5fa0-1de2-a683-0000c03adf56 1.0} /.../doyen/foo 2 {
Test entry}}}
520|0 1 25917 1 36|== Expected output was:
520|0 1 25917 1 37|{{{00205383-5fa0-1de2-a683-0000c03adf56 1.0} /.../dcecp_cell
.osf.org/foo 2 {Test entry}} {{00205383-5fa0-1de2-a683-0000c03adf56 1.0} /.../d
cecp_cell.osf.org/foo 2 {Test entry}}}
520|0 1 25917 1 38|Test Failed.

...

520|0 1 26055 1 1|rpcprofile_list_4_P: Verify that we can list the members in a
n rpc profile.
520|0 1 26055 1 2|==== Contents of test case:
520|0 1 26055 1 3|{     rpcprofile list /.:/rpcp_list_4_P     }
520|0 1 26055 1 4|Test completed successfully.
520|0 1 26055 1 5|== Test output was:
520|0 1 26055 1 6|{/.../doyen/foo /.../doyen/bar}
520|0 1 26055 1 7|== Expected output was:
520|0 1 26055 1 8|{/.../dcecp_cell.osf.org/foo /.../dcecp_cell.osf.org/bar}
520|0 1 26055 1 9|Test Failed.

...

520|0 1 26055 1 10|rpcprofile_list_5_P: Verify that we can list the members in 
a list of rpc profiles.
520|0 1 26055 1 11|==== Contents of test case:
520|0 1 26055 1 12|{    rpcprofile list {/.:/rpcp_list_5_P_1 /.:/rpcp_list_5_P_
2}     }
520|0 1 26055 1 13|Test completed successfully.
520|0 1 26055 1 14|== Test output was:
520|0 1 26055 1 15|{/.../doyen/foo /.../doyen/bar  /.../doyen/grape}
520|0 1 26055 1 16|== Expected output was:
520|0 1 26055 1 17|{/.../dcecp_cell.osf.org/foo /.../dcecp_cell.osf.org/bar /..
./dcecp_cell.osf.org/grape}
520|0 1 26055 1 18|Test Failed.
220|0 1 1 10:12:31|FAIL

...

520|0 1 25861 1 29|rpcprofile_remove_13_P: Verify that we can remove a member f
rom a profile with -annotation.
520|0 1 25861 1 30|==== Contents of test case:
520|0 1 25861 1 31|{    rpcprofile remove /.:/rpcp_remove_13_P -annotation {Sec
ond case}        rpcprofile show /.:/rpcp_remove_13_P     }
520|0 1 25861 1 32|Test completed successfully.
520|0 1 25861 1 33|== Test output was:
520|0 1 25861 1 34|{{{004dbc1e-5c69-1de3-9add-0000c03adf56 1.0} /.../doyen/foo 
0 {First case}}}
520|0 1 25861 1 35|== Expected output was:
520|0 1 25861 1 36|{{{004dbc1e-5c69-1de3-9add-0000c03adf56 1.0} /.../dcecp_cell
.osf.org/foo 0 {First case}}}
520|0 1 25861 1 37|Test Failed.

...

520|0 1 13911 1 1|rpcprofile_show_6_P: Verify that we can show an rpc profile.
520|0 1 13911 1 2|==== Contents of test case:
520|0 1 13911 1 3|{     rpcprofile show /.:/rpcp_show_6_P     }
520|0 1 13911 1 4|Test completed successfully.
520|0 1 13911 1 5|== Test output was:
520|0 1 13911 1 6|{{{004dbc1e-5c69-1de3-9add-0000c03adf56 1.0} /.../doyen/foo 1
}}
520|0 1 13911 1 7|== Expected output was:
520|0 1 13911 1 8|{{{004dbc1e-5c69-1de3-9add-0000c03adf56 1.0} /.../dcecp_cell.
osf.org/foo 1 }}
520|0 1 13911 1 9|Test Failed.


account tests

520|0 1 23153 1 19|account_create_3_N: Check that unauthenticated users are han
dled correctly.
520|0 1 23153 1 20|==== Contents of test case:
520|0 1 23153 1 21|{         list [catch {account create kevin -group none -org
anization none -password mine -mypwd $DCP_CLIENT_PW} msg] $msg     }
520|0 1 23153 1 22|Test completed successfully.
520|0 1 23153 1 23|== Test output was:
520|0 1 23153 1 24|{1 {Registry object not found}}
520|0 1 23153 1 25|== Expected output was:
520|0 1 23153 1 26|{1 {Cant establish authentication to security server}}
520|0 1 23153 1 27|Test Failed.

...

520|0 1 17197 1 38|account_create_49_P: Check that we can create an account wit
h a list of attributes.
520|0 1 17197 1 39|==== Contents of test case:
520|0 1 17197 1 40|{  account create $PRINCIPAL -attribute $LIST        dcp_att
rlist getval [account show $PRINCIPAL] expdate   }
520|0 1 17197 1 41|Test completed successfully.
520|0 1 17197 1 42|== Test output was:
520|0 1 17197 1 43|1999-04-12-19:00:00.000-05:00I-----
520|0 1 17197 1 44|== Expected output was:
520|0 1 17197 1 45|1999-04-12-20:00:00.000-04:00I-----
520|0 1 17197 1 46|Test Failed.

...

520|0 1 17197 1 47|account_create_51_P: Check that we can create an account wit
h a list of attributes.
520|0 1 17197 1 57|==== Contents of test case:
520|0 1 17197 1 58|{  account create $PRINCIPAL -attribute $LIST        dcp_att
rlist getval [account show $PRINCIPAL] goodsince         }
520|0 1 17197 1 59|Test completed successfully.
520|0 1 17197 1 60|== Test output was:
520|0 1 17197 1 61|1999-04-12-19:00:00.000-05:00I-----
520|0 1 17197 1 62|== Expected output was:
520|0 1 17197 1 63|1999-04-12-20:00:00.000-04:00I-----
520|0 1 17197 1 64|Test Failed.

...

520|0 1 26407 1 37|account_modify__8_P: Check that we can create an account wit
h a list of attributes.
520|0 1 26407 1 38|==== Contents of test case:
520|0 1 26407 1 39|{ account modify $PRINCIPAL -expdate 1995-01-01      dcp_att
rlist getval [account show $PRINCIPAL] expdate         }
520|0 1 26407 1 40|Test completed successfully.
520|0 1 26407 1 41|== Test output was:
520|0 1 26407 1 42|1994-12-31-18:00:00.000-06:00I-----
520|0 1 26407 1 43|== Expected output was:
520|0 1 26407 1 44|1994-12-31-19:00:00.000-05:00I-----
520|0 1 26407 1 45|Test Failed.

...

520|0 1 26407 1 55|account_modify_10_P: Check that we can create an account wit
h a list of attributes.
520|0 1 26407 1 56|==== Contents of test case:
520|0 1 26407 1 57|{ account modify $PRINCIPAL -goodsince 1995-01-01    dcp_att
rlist getval [account show $PRINCIPAL] goodsince          }
520|0 1 26407 1 58|Test completed successfully.
520|0 1 26407 1 59|== Test output was:
520|0 1 26407 1 60|1994-12-31-18:00:00.000-06:00I-----
520|0 1 26407 1 61|== Expected output was:
520|0 1 26407 1 62|1994-12-31-19:00:00.000-05:00I-----
520|0 1 26407 1 63|Test Failed.


registry tests

520|0 1 15404 1 73|registry_delete_009_N: Check for authentication to perform t
his operation.
520|0 1 15404 1 74|==== Contents of test case:
520|0 1 15404 1 75|{         list [catch {registry delete $DCP_RGY_SA_REP_NAME_
SLAVE1} msg] $msg     }
520|0 1 15404 1 76|Test completed successfully.
520|0 1 15404 1 77|== Test output was:
520|0 1 15404 1 78|{1 {Registry server unavailable}}
520|0 1 15404 1 79|== Expected output was:
520|0 1 15404 1 80|{1 {Cant establish authentication to security server}}
520|0 1 15404 1 81|Test Failed.

...

520|0 1 16042 1 37|registry_disable_005_N: Check for authentication to perform 
this operation.
520|0 1 16042 1 38|==== Contents of test case:
520|0 1 16042 1 39|{         list [catch {registry disable $DCP_RGY_SA_REP_NAME
_MASTER} msg] $msg     }
520|0 1 16042 1 40|Test completed successfully.
520|0 1 16042 1 41|== Test output was:
520|0 1 16042 1 42|{1 {User is not authorized to update record}}
520|0 1 16042 1 43|== Expected output was:
520|0 1 16042 1 44|{1 {Cant establish authentication to security server}}
520|0 1 16042 1 45|Test Failed.

...

520|0 1 16042 1 55|registry_disable_007_N: Check for slave replica specificatio
n.
520|0 1 16042 1 56|==== Contents of test case:
520|0 1 16042 1 57|{         list [catch {registry disable $DCP_RGY_SA_REP_NAME
_SLAVE1} msg] $msg     }
520|0 1 16042 1 58|Test completed successfully.
520|0 1 16042 1 59|== Test output was:
520|0 1 16042 1 60|{1 {Registry server unavailable}}
520|0 1 16042 1 61|== Expected output was:
520|0 1 16042 1 62|{1 {Registry replica specified is not the master.}}
520|0 1 16042 1 63|Test Failed.

...

520|0 1 23144 1 37|registry_enable_005_N: Check for authentication to perform t
his operation.
520|0 1 23144 1 38|==== Contents of test case:
520|0 1 23144 1 39|{         list [catch {registry enable $DCP_RGY_SA_REP_NAME_
MASTER} msg] $msg     }
520|0 1 23144 1 40|Test completed successfully.
520|0 1 23144 1 41|== Test output was:
520|0 1 23144 1 42|{0 {}}
520|0 1 23144 1 43|== Expected output was:
520|0 1 23144 1 44|{1 {Cant establish authentication to security server}}
520|0 1 23144 1 45|Test Failed.

...

520|0 1 23144 1 55|registry_enable_007_N: Check for slave replica specification
.
520|0 1 23144 1 56|==== Contents of test case:
520|0 1 23144 1 57|{         list [catch {registry enable $DCP_RGY_SA_REP_NAME_
SLAVE1} msg] $msg     }
520|0 1 23144 1 58|Test completed successfully.
520|0 1 23144 1 59|== Test output was:
520|0 1 23144 1 60|{1 {Registry server unavailable}}
520|0 1 23144 1 61|== Expected output was:
520|0 1 23144 1 62|{1 {Registry replica specified is not the master.}}
520|0 1 23144 1 63|Test Failed.

...

520|0 1 20177 1 73|registry_stop_009_N: Check for authentication to perform thi
s operation.
520|0 1 20177 1 74|==== Contents of test case:
520|0 1 20177 1 75|{         list [catch {registry stop $DCP_RGY_SA_REP_NAME_SL
AVE1} msg] $msg     }
520|0 1 20177 1 76|Test completed successfully.
520|0 1 20177 1 77|== Test output was:
520|0 1 20177 1 78|{1 {Registry server unavailable}}
520|0 1 20177 1 79|== Expected output was:
520|0 1 20177 1 80|{1 {No currently established network identity for which cont
ext exists}}
520|0 1 20177 1 81|Test Failed.

...

520|0 1 15936 1 73|registry_synchronize_009_N: Check for authentication to perf
orm this operation.
520|0 1 15936 1 74|==== Contents of test case:
520|0 1 15936 1 75|{         list [catch {registry synchronize $DCP_RGY_SA_REP_
NAME_SLAVE1} msg] $msg     }
520|0 1 15936 1 76|Test completed successfully.
520|0 1 15936 1 77|== Test output was:
520|0 1 15936 1 78|{1 {Registry server unavailable}}
520|0 1 15936 1 79|== Expected output was:
520|0 1 15936 1 80|{1 {Cant establish authentication to security server}}
520|0 1 15936 1 81|Test Failed.

...

520|0 1 16054 1 75|registry_modify_009_N: Check for authentication to perform t
his operation.
520|0 1 16054 1 76|==== Contents of test case:
520|0 1 16054 1 77|{         list [catch {registry modify $DCP_RGY_SA_REP_NAME_
MASTER -key} msg] $msg     }
520|0 1 16054 1 78|Test completed successfully.
520|0 1 16054 1 79|== Test output was:
520|0 1 16054 1 80|{1 {User is not authorized to update record}}
520|0 1 16054 1 81|== Expected output was:
520|0 1 16054 1 82|{1 {No currently established network identity for which cont
ext exists}}
520|0 1 16054 1 83|Test Failed.

...

520|0 1 16054 1 248|registry_modify_028_N: Check that unauthorized uses are tra
pped as errors.
520|0 1 16054 1 249|==== Contents of test case:
520|0 1 16054 1 250|{         list [catch {registry modify -minuid 5100} msg] $
msg     }
520|0 1 16054 1 251|Test completed successfully.
520|0 1 16054 1 252|== Test output was:
520|0 1 16054 1 253|{1 {User is not authorized to update record}}
520|0 1 16054 1 254|== Expected output was:
520|0 1 16054 1 255|{1 {Cant establish authentication to security server}}
520|0 1 16054 1 256|Test Failed.

...

520|0 1 23127 1 73|registry_set_009_N: Check for authentication to perform this
operation.
520|0 1 23127 1 74|==== Contents of test case:
520|0 1 23127 1 75|{         list [catch {registry set $DCP_RGY_SA_REP_NAME_SLA
VE1} msg] $msg     }
520|0 1 23127 1 76|Test completed successfully.
520|0 1 23127 1 77|== Test output was:
520|0 1 23127 1 78|{1 {Registry server unavailable}}
520|0 1 23127 1 79|== Expected output was:
520|0 1 23127 1 80|{1 {Registry object not found}}
520|0 1 23127 1 81|Test Failed.

...

520|0 1 23127 1 112|registry_set_013_N: Check that the specified replica is alr
eady a
520|0 1 23127 1 113|registry_set_013_N: slave replica.
520|0 1 23127 1 114|==== Contents of test case:
520|0 1 23127 1 115|{         list [catch {registry set $DCP_RGY_SA_REP_NAME_SL
AVE1 -slave} msg] $msg     }
520|0 1 23127 1 116|Test completed successfully.
520|0 1 23127 1 117|== Test output was:
520|0 1 23127 1 118|{1 {Registry server unavailable}}
520|0 1 23127 1 119|== Expected output was:
520|0 1 23127 1 120|{1 {Replica is not the master}}
520|0 1 23127 1 121|Test Failed.

[9/28/94 public]
90% of these error have been fixed over the last week. We have been doing
extensive test cleanup recently.

Please update the 'foundinbaseline' value to the value of the baseline that
you are using. 1.1 is not a baseline.

Note that there are several outstanding errors in dcecp tests. Please 
refer to the TestSummary file for a list of all open test related CR's.

[9/29/94 public]
I've reassigned this to IBM.  Here's the reason:
 * We do think that these have been fixed in the last week.
 * From the TestSummary file the NB of 9/25 was used in the tests, we have
   done the fixes since then (OT's were filed and fixed).
 * Please rerun the:
     rpcgroup
     rpcprofile
     account
   tests, these were the ones that failed that we think are now fixed.
   We've seen failures for the registry tests, I'm not sure about those.
   We'll check here, but it should be easy to rerun those.

I'm just using OT to communicate here.
Feel free to express opinions on the above if I've got something wrong.

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 12391
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 12174
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : aud
Subcomponent Name             : fvts
Short Description             : fvts must be updated to match exit codes from dcecp
Reported Date                 : 9/28/94
Found in Baseline             : 1.1b19
Found Date                    : 9/27/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : cp_filter
Sensitivity                   : public

[9/28/94 public]
Some of the audit fvts such as cp_filter04 now fail because the exit
codes from dcecp hav been updated.  The audit fvts need revision.

[10/14/94 public]
This was fixed back in build 20.  Have marked this closed.



CR Number                     : 12381
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dced
Subcomponent Name             : server_ebable FVT
Short Description             : Local var. overriding global in server enable/disable tests
Reported Date                 : 9/27/94
Found in Baseline             : 1.1b19
Found Date                    : 9/27/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : server_enable_if.c
Sensitivity                   : public

[9/27/94 public]

Local variable srvr_proc_id overriding initialized global copy, causing
tests to FAIL.

[9/28/94 public]
Fix submitted.



CR Number                     : 12378
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : cds
Short Description             : cdsalias needs functional tests.
Reported Date                 : 9/27/94
Found in Baseline             : 1.1
Found Date                    : 9/27/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : tet_scen Makefile
        cdsalias_catalog_N.tcl cdsalias_catalog_P.tcl 
        cdsalias_create_N.tcl cdsalias_create_P.tcl 
        cdsalias_delete_N.tcl cdsalias_delete_P.tcl 
        cdsalias_set_N.tcl
Sensitivity                   : public

[9/27/94 public]

self explanitory

[9/28/94 public]

created functional tests.



CR Number                     : 12370
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : Negative KTB FVT messages
Short Description             : Tests must be changed to expect new negative messages
Reported Date                 : 9/27/94
Found in Baseline             : 1.1b18
Found Date                    : 9/27/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : ktb*
Sensitivity                   : public

[9/27/94 public]

Negative messages from dcecp have changed again.  Tests must change to
reflect.

[9/29/94 public]
Submitted.

[10/6/94 public]
closed.



CR Number                     : 12365
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : server
Short Description             : Makefile doesn't have DATAFILES
Reported Date                 : 9/27/94
Found in Baseline             : 1.1b18
Found Date                    : 9/27/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : test/admin/dcecp/ts/server/Makefile
Sensitivity                   : public

[9/27/94 public]
The src/test/admin/dcecp/ts/server/Makefile needs a DATAFILES line
for all the scripts.

[9/27/94 public]
Submitted.

[10/6/94 public]
closed.



CR Number                     : 12362
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : log FVT
Short Description             : Need configurable for 2 LOG FVT tests.
Reported Date                 : 9/27/94
Found in Baseline             : 1.1b18
Found Date                    : 9/27/94
Severity                      : E
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b18
Affected File(s)              : src/test/admin/dcecp/ts/log/log_modify_N.tcl, src/test/admin/dcecp/ts/log/log_show_N.tcl, src/test/admin/dcecp/tetexec.cfg
Sensitivity                   : public

[9/27/94 public]

These tests need to return "UNINITIATED" if DCP_LOG_DCE_DEBUG is 0.

log_show_009_N
log_modify_019_N

[10/6/94 public]
closed.



CR Number                     : 12361
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : registry mod FVT
Short Description             : Only 2 registry modify tests need to be updated.
Reported Date                 : 9/27/94
Found in Baseline             : 1.1b18
Found Date                    : 9/27/94
Severity                      : E
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b20
Affected File(s)              : rgy_utils.c registry_modify_P.tcl
Sensitivity                   : public

[9/27/94 public]

registry_modify_062_P
registry_modify_076_P

[9/27/94 public]

Modified the method for storing deftktlife and modified the 
value for pwdexpdate in the positive test.



CR Number                     : 12359
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : acl modify FVT
Short Description             : Return "UNSUPPORTED" for 6 FVT tests.
Reported Date                 : 9/27/94
Found in Baseline             : 1.1b18
Found Date                    : 9/27/94
Severity                      : E
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b19
Affected File(s)              : src/test/admin/dcecp/ts/acl/acl_modify_P.tcl
Sensitivity                   : public

[9/27/94 public]

The following tests need to return "UNSUPPORTED":

acl_modify_059_P
acl_modify_062_P
acl_modify_139_P
acl_modify_142_P
acl_modify_237_P
acl_modify_238_P

Tests acl_modify_237_P and acl_modify_238_P refer to extended ACL
entry types.  There are currently no ACL managers that support this.
In the future, there may be.

Tests acl_modify_059_P, acl_modify_062_P, acl_modify_139_P, and
acl_modify_142_P refer no initial container ACL supporting
user_obj" and "group_obj" ACL entry types. In the future, there may
be.

[10/6/94 public]
closed.



CR Number                     : 12354
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dts
Short Description             : dts_configure_P tests fail
Reported Date                 : 9/27/94
Found in Baseline             : 1.1b19
Found Date                    : 9/27/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : dts_configure_P.tcl
Sensitivity                   : public

[9/27/94 public]
dts_configure_7_P and dts_configure_8_P tests fail.

Error messages:
7: No permission for name service operation
8: Not a global time server

[9/27/94 public]
Worked around. This problem was caused by a dtsd problem.

[10/25/94 public]
closed.



CR Number                     : 12353
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : audevents
Short Description             : audevents_catalog_3_P fails
Reported Date                 : 9/27/94
Found in Baseline             : 1.1b19
Found Date                    : 9/27/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : test/admin/dcecp/ts/aud/audevents_catalog_P.tcl
Sensitivity                   : public

[9/27/94 public]

audevents_catalog_3_P

The list of installed event classes has changed. This test needs to be
updated to reflect this.

[9/27/94 public]
Submitted.

[10/6/94 public]
closed.



CR Number                     : 12347
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : security
Short Description             : SEC tests failing with 'rgy_edit -update hung'
Reported Date                 : 9/26/94
Found in Baseline             : 1.1b18
Found Date                    : 9/26/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : dceseacl.data,dceseact.data,dcesepol.data,dcesestr.data
Sensitivity                   : public

[9/26/94 public]

Approximately 10% of the time the security system tests are failing with the error
that 'rgy_edit -update is hung' when run in a busy cell.  This is due to the fact
that the tests run rgy_edit in the background and only give it RGY_WAIT seconds to
complete before declaring it hung and killing it.  The current val is 120; this is
no longer sufficient and must be increased.

[9/28/94 public]
Submitted fix to increase RGY_WAIT to 180.



CR Number                     : 12342
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : sec
Subcomponent Name             : dlg systest
Short Description             : build on RIOS failed - Undeclared identifier authn_svc.
Reported Date                 : 9/26/94
Found in Baseline             : 1.1
Found Date                    : 9/26/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : test/systest/security/dlgstr001/identity.c
Sensitivity                   : public

[9/26/94 public]

extract from tests.log.09-25-94 in the directory
/u1/RAT_tools/logs/RIOS on vertigo

cc -c         -D_ALL_SOURCE -DAIX32   -I. -I/u1/devobj/sb/nb_rio
s/src/test/systest/security/dlgstr001 -I/project/dce/build/dce1.
1-snap/src/test/systest/security/dlgstr001  -I/u1/devobj/sb/nb_r
ios/export/rios/usr/include -I/project/dce/build/dce1.1-snap/exp
ort/rios/usr/include   /project/dce/build/dce1.1-snap/src/test/s
ystest/security/dlgstr001/identity.c
"/project/dce/build/dce1.1-snap/src/test/systest/security/dlgstr
001/identity.c", line 299.3: 1506-045 (S) Undeclared identifier
authn_svc.
*** Error code 1

[9/27/94 public]
Canceling - clean builds today - no changes had been made to
this test so I suspect a build problem (disk space/script/etc.)
caused this error.

[9/27/94 public]

The tests build on tailor finished at 12:30 today afternoon.  It has the 
same error as was reported earlier.  I am opening the bug again.

[9/26/94 public]
This only happens on the RIOS.

[9/27/94 public]
Fixed the hw,sw,description,component fields.
This should never have built on RIOS.  The following is the problem:

void establish_identity
#ifdef PROTOTYPES
(
    /* [in]  */ unsigned32      authn_svc,
    /* [in]  */ unsigned_char_t    *principal_name,
    /* [in]  */ unsigned_char_t    *keytab_file_name,
    /* [out] */ identity_info_t    **identity_info
)
#else
(principal_name, keytab_file_name, identity_info)
    /* [in]  */ unsigned_char_t    *principal_name;
    /* [in]  */ unsigned_char_t    *keytab_file_name;
    /* [out] */ identity_info_t    **identity_info;
#endif

Note the #else does not have the same argument list as the #ifdef.
Since the first have is correct and the RIOS now supports prototypes, just
get rid of the #ifdef line and everything between the #else and the #endif
and it'll work.

[9/29/94 public]
Oops - forgot to move to "fix" state, build worked yesterday and today -
closing.



CR Number                     : 12316
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : osf1
Component Name                : dced
Subcomponent Name             : grp_override
Short Description             : grp_override functional tests fail
Reported Date                 : 9/23/94
Found in Baseline             : 1.1b20
Found Date                    : 9/23/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : src/test/functional/security/grp_override...
Sensitivity                   : public

[9/23/94 public]

The group override and passwd_export test for group override fail
severely on osf1, OSF/1 Alpha, and presumably other platforms.

[10/3/94 public]
Fix submitted by Brian Hasbrouck on 9/29.



CR Number                     : 12310
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : sec
Subcomponent Name             : /test/security/api/moretests
Short Description             : too few arguments to function
Reported Date                 : 9/22/94
Found in Baseline             : 1.1
Found Date                    : 9/22/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : /test/security/api/moretests/sec_authn.c
Sensitivity                   : public

[9/22/94 public]

This bug was found during the rebuild on 9/22 at 5:05 PM


[ /test/security/api/moretests at 16:58 (PM) Thursday ]
makepath moretests/. && cd moretests &&  exec make MAKEFILE_PASS=BASIC     build_all
/project/dce/build/dce1.1-snap/tools/at386/macho/gcc -B/project/dce/build/dce1.1-snap/tools
/at386/macho/  -c    -D_SHARED_LIBRARIES       -I. -I/u1/devobj/sb/nb_486/src/test/security
/api/moretests -I/project/dce/build/dce1.1-snap/src/test/security/api/moretests  -I../../..
/../security/h -I/u1/devobj/sb/nb_486/src/security/h -I/project/dce/build/dce1.1-snap/src/s
ecurity/h -I../../../../security/client/login -I/u1/devobj/sb/nb_486/src/security/client/lo
gin -I/project/dce/build/dce1.1-snap/src/security/client/login -I/u1/devobj/sb/nb_486/expor
t/at386/usr/include -I/project/dce/build/dce1.1-snap/export/at386/usr/include   -pic-lib   
-L/u1/devobj/sb/nb_486/export/at386/usr/shlib -L/project/dce/build/dce1.1-snap/export/at386
/usr/shlib -L/usr/shlib -L/u1/devobj/sb/nb_486/export/at386/usr/lib     -L/project/dce/buil
d/dce1.1-snap/export/at386/usr/lib    -ldce    /project/dce/build/dce1.1-snap/src/test/secu
rity/api/moretests/sec_authn.c
/project/dce/build/dce1.1-snap/src/test/security/api/moretests/sec_authn.c: In function `ma
in':
/project/dce/build/dce1.1-snap/src/test/security/api/moretests/sec_authn.c:132: warning: pa
ssing arg 7 of `sec_krb_cn_build_message' from incompatible pointer type
/project/dce/build/dce1.1-snap/src/test/security/api/moretests/sec_authn.c:132: too few arg
uments to function `sec_krb_cn_build_message'
*** Error code 1

[9/23/94 public]
Fix submitted.

~
~
~
~

~
~
~
~
~



CR Number                     : 12268
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : log/acl
Short Description             : generate string bindings
Reported Date                 : 9/20/94
Found in Baseline             : 1.1b18
Found Date                    : 9/20/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : test/admin/dcecp/lib/test_common.tcl
Sensitivity                   : public

[9/20/94 public]
For acl/log and other string bindings. Create a function that generates
string bindings on the fly.

[9/22/94 pubic]
A new proc, dcp_get_binding_info, has been added to test_common.tcl . It
returns a list of the object uuid, protseq, ip addr and enpoint. The
tests need to be updated to use this instead of hard coded info in
the tetexec.cfg file.

dcecp> dcp_get_binding_info /.:/hosts/ninja/dts-entity
019ee420-682d-11c9-a607-08002b0dea7a ncadg_ip_udp 130.105.5.92 1910

[9/27/94 public]
In order to get the correct endpoint, an interface needs to be passed 
in as well as the namespace entry. Changes made. Submitted.

[10/6/94 public]
closed.



CR Number                     : 12265
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : sec
Short Description             : dceseacl test is failing
Reported Date                 : 9/20/94
Found in Baseline             : 1.1b18
Found Date                    : 9/20/94
Severity                      : B
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : test/systest/security/sec.functions
Sensitivity                   : public

[9/20/94 public]

The dceseacl test is failing consistently.  I'm assigning this to myself
until I figure out exactly where the test is failing.

Here's the abbreviated error list from the sanity test run:

 There were 5 ERRORs and/or FAILures total in
                        the 1 failed iterations.  Here's the breakdown:
                           1 - DCE_ERROR
                           1 - ERROR: in change_mgmt()
                           1 - ERROR: in changing organization management info
                           1 - ERROR: seaclclibrandy0org's management info was c
hanged unexpectedly                             in change_neg_org_management_inf
o
                           1 - ERROR: seaclclibrandy0org's management info was n
ot changed as expected                          in change_org_management_info

[9/20/94 public]
The failure is due to the ERA mods being backed out of rgy_edit
on 9/9.  We need to undo the mods we made to sec.functions when
these were originally put in.



CR Number                     : 12264
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : sec
Short Description             : dcesepol test is failing
Reported Date                 : 9/20/94
Found in Baseline             : 1.1b18
Found Date                    : 9/20/94
Severity                      : B
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : test/systest/security/sec.functions
Sensitivity                   : public

[9/20/94 public]

The dcesepol tests are failing.  I'm assigning this to myself until I figure
out where the test is failing, but I don't want to lose track of it.

One of the problems is that the test expires accounts, but the account is still
able to login.  I know there have been a number of changes to passwd modules 
recently. 

Here's the short breakdown from a sanity test run:

                        There were 34 ERRORs and/or FAILures total in
                        the 1 failed iterations.  Here's the breakdown:
                           1 - ERROR: STATUS=0, CURRENT_SECS = 64157, PLS_VALID_
SECS = 64096
                           1 - ERROR: STATUS=0, CURRENT_SECS = 64173, ALS_VALID_
SECS = 64113
                           1 - ERROR: Some users were able to login UNEXPECTEDLY
 or warning messages did not appear
                           1 - ERROR: Unable to complete all remote logins
                           1 - ERROR: sepolbrandy1p passed login test UNEXPECTED
LY, password should be expired
                           1 - ERROR: sepolbrandy3p passed login test UNEXPECTED
LY, account should be expired
                           2 - FAIL
                           1 - Final Logins: Pass = 106, Fail = 2, Total = 108
                           1 - Logins: Pass = 106, Fail = 2, Total = 108
                           1 - Logins: Pass = 18, Fail = 0, Total = 18
                           1 - Logins: Pass = 27, Fail = 0, Total = 27
                           1 - Logins: Pass = 36, Fail = 0, Total = 36
                           1 - Logins: Pass = 45, Fail = 0, Total = 45
                           1 - Logins: Pass = 54, Fail = 0, Total = 54
                           1 - Logins: Pass = 63, Fail = 0, Total = 63
                           1 - Logins: Pass = 72, Fail = 0, Total = 72
                           1 - Logins: Pass = 81, Fail = 0, Total = 81
                           1 - Logins: Pass = 9, Fail = 0, Total = 9
                           1 - Logins: Pass = 90, Fail = 0, Total = 90
                           1 - Logins: Pass = 99, Fail = 0, Total = 99
                          13 - Sorry. Password Validation Failure. - Invalid pas
sword. (dce / sec)

[9/20/94 public]
The failure is due to the ERA mods being backed out of rgy_edit
on 9/9.  We need to undo the mods we made to sec.functions when
these were originally put in.



CR Number                     : 12254
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : hostdata
Short Description             : update negative tests
Reported Date                 : 9/19/94
Found in Baseline             : 1.1b18
Found Date                    : 9/19/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : hostdata_*_N.tcl
Sensitivity                   : public

[9/19/94 public]
The negative messages are wrong in:

hostdata_create_N.tcl
hostdata_delete_N.tcl
hostdata_modify_N.tcl
hostdata_show_N.tcl

[9/20/94 public]
Submitted.

[9/26/94 public]
closed.



CR Number                     : 12253
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : hostdata
Short Description             : Not in ts's Makefile
Reported Date                 : 9/19/94
Found in Baseline             : 1.1b18
Found Date                    : 9/19/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : test/admin/dcecp/ts/Makefile
Sensitivity                   : public

[9/19/94 public]
hostdata is not listed in the test/admin/dcecp/ts Makefile.

[9/19/94 public]
Submitted.

[9/26/94 public]
closed.



CR Number                     : 12248
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : aud
Subcomponent Name             : functional test
Short Description             : Running audit FVTs leaves incorrect audit-server acl entry for user.
Reported Date                 : 9/19/94
Found in Baseline             : 1.1b18
Found Date                    : 9/19/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : test/security/audit/ts/api_log_to_daemon/aud_testd.c
Sensitivity                   : public

[9/19/94 public]

When you run the audit FVTs, the user entry in the default acl for the
audit-server has "r" permission incorrectly removed.

[9/19/94 public]
Oops! I should have written "l" not "r".  That is, running the tests
removes logging permission.

[09/21/94 public]
fixed.



CR Number                     : 12242
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rpc
Short Description             : Cell names are hard coded.
Reported Date                 : 9/19/94
Found in Baseline             : 1.1
Found Date                    : 9/19/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : test/admin/dcecp/ts/rpc/*
Sensitivity                   : public

[9/19/94 public]

In several of the rpc group functional tests the cell name is hard 
coded. This is of course very, very, very bad...

[9/19/94 public]
Duh. Submitted.

[9/26/94 public]
closed.



CR Number                     : 12237
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : 
Short Description             : Submit dlgstr001
Reported Date                 : 9/19/94
Found in Baseline             : 1.1
Found Date                    : 9/19/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : Makefile
Sensitivity                   : public

[9/19/94 public]


Submit the dlgstr001 (the multi-delegate test)

[9/21/94 public]

Submitted

[9/22/94 public]

Test update



CR Number                     : 12199
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : 'account generate' needs functional tests.
Reported Date                 : 9/15/94
Found in Baseline             : 1.1
Found Date                    : 9/15/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : account_generate_N.tcl
                                             account_generate_P.tcl
Sensitivity                   : public

[9/15/94 public]

The account generate command needs functional tests.

[9/16/94 public]

Generated functional tests.

[9/26/94 public]
closed.



CR Number                     : 12167
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : aud
Subcomponent Name             : 
Short Description             : HYP: Regression test failures in api_filter and ec_filter test suites
Reported Date                 : 9/13/94
Found in Baseline             : 1.1b17
Found Date                    : 9/13/94
Severity                      : B
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : see list below
Sensitivity                   : public

[9/13/94 public]

When running the audit FVTs on my 486 on BL-17, I am getting inconsistent
results with the api_log_to_daemon tests and with the api_filter tests.

The first time I run these tests after starting DCE I get this kind of
failure:

  After 1st start of DCE:

	520|4 1 27847 1 3|ERROR: api_log_to_daemon01 failed

  After restart of DCE:

	520|4 1 24667 1 6|ERROR: api_log_to_daemon04 failed

Subsequent runs of the audit FVTs either PASS completely or yield the
following failures:

	20|6 1 26228 1 4|ERROR: api_filter02 failed
	520|6 1 26228 1 5|ERROR: api_filter03 failed
	520|6 1 26228 1 10|ERROR: api_filter08 failed

When I see these failures, a core file is also dropped into /tmp.  Looking
at this core file I see:

> In Local core dump file,
> #0  0x405273 in op4_csr (h=0xa403fea4, st=0x4f2010) at aud_testf_cstub.c:533
> aud_testf_cstub.c:533: No such file or directory.
> (gdb) where
> #0  0x405273 in op4_csr (h=0xa403fea4, st=0x4f2010) at aud_testf_cstub.c:533
> #1  0x404ce2 in op2_csr (Cannot access memory at address 0x4392bb.
>

The tests appears to be crashing in the cstub routing. Line 533 is

	CATCH(rpc_x_ss_pipe_comm_error)

so we may be experiencing some kind of comm error.  

Robert Weisz points out that the sequence jumping from op2_csr to op4_csr
is not making any sense.  He doesn't know what to make out of it.

[10/03/94]
The test results are now consistent but we still have test failures on
tests that previously passed.  Specifically, the following tests fail:

520|6 1 5582 1 4|ERROR: api_filter02 failed
520|6 1 5582 1 5|ERROR: api_filter03 failed
520|6 1 5582 1 7|ERROR: api_filter05 failed
520|7 1 5686 1 3|ERROR: ecfile_filter01 failed

The short description, area, and priority have been updated.

[10/3/94 public]
On hypercritical list.

[10/04/94 public]
This problem is caused by the fact that both security and audit are
using same event numbers.  I am changing the audit event numbers to
use a different range and will submit today.
 In the future, OSF will have to administer the allocation of those
ranges of numbers.

[10/05/94 public]
Submitted, please rerun.

These are the files affected:

    audit/ec/dce_audit_admin_modify
    audit/ec/dce_audit_admin_query
    audit/ec/dce_audit_filter_modify
    audit/ec/dce_audit_filter_query
    audit/auditd/dmn_aud_evtsp.h

    test/security/audit/ts/api_filter/aud_testf_rpc_manager.c
    test/security/audit/ts/ecfile_filter/aud_testec_rpc_manager.c



CR Number                     : 12151
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : xds
Short Description             : missing example program
Reported Date                 : 9/13/94
Found in Baseline             : 1.1b17
Found Date                    : 9/13/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : test/directory/xds/examples/Makefile
					     .../examples/acl2.c acl2.h
Sensitivity                   : public

[9/13/94 public]
The example file for the XDS/XOM convenience library was not submitted
to OSF. This missing example file acl2.c together with its header file
acl2.h is discussed in the Application Development Guide.

As the example programs are not compiled during build
(the test/directory/xds/Makefile does not set SUBDIRS = example)
this will not affect the OSF nightly build.

Question for OSF: Should the SUBDIRS = example be activated
in this Makefile ?

[9/14/94 public]
We would prefer at this time to not activate SUBDIRS = example.  We do not
want to take any risks at all with the build given how late we are in the
project.



CR Number                     : 12133
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : Positive functional tests check output incorrectly
Reported Date                 : 9/12/94
Found in Baseline             : 1.1
Found Date                    : 9/12/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : registry_show_P.tcl
Sensitivity                   : public

[9/12/94 public]

A registry positive test checks for attribute output instead of policy 
output.

[9/12/94 public]

 The positive test now checks for policy output.

[9/26/94 public]
closed.



CR Number                     : 12122
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rpc
Short Description             : Need a couple of additional endpoint FVTs
Reported Date                 : 9/9/94
Found in Baseline             : 1.1b17
Found Date                    : 9/9/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : endpoint_show_P.tcl, endpoint_show_N.tcl
Sensitivity                   : public

[9/9/94 public]

With the addition of the -uuid option to "endpoint show", there need
to be additional FVTs to make sure that it works, and a negative test
for the combination of -uuid with other options.

Also, there are no tests for the "remote" option (these can be done by
specifying a binding for the local host as an argument).

[9/26/94 public]
closed.



CR Number                     : 12119
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : secval ping
Short Description             : secval ping fvt need setup and cleanup proc
Reported Date                 : 9/8/94
Found in Baseline             : 1.1b16
Found Date                    : 9/8/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : secval_ping_P.tcl
Sensitivity                   : public

[9/8/94 public]
secval ping fvt need setup and cleanup proc.

[9/9/4 public]
Submitted.

[9/26/94 public]
closed.



CR Number                     : 12108
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : pgo era tests don't work right
Reported Date                 : 9/8/94
Found in Baseline             : 1.1b16
Found Date                    : 9/8/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : pgo_era test files
Sensitivity                   : public

[9/8/94 public]

As with the schema tests, there are some strange things going on
with some of the pgo tests.  For example, group_create_era_N
causes secd to core dump (due to the schema create commands in
the startup function).  The org_create_era_N test does the same
thing.

The pgo era tests are currently being reviewed for completeness
and correctness.

[9/19/94 public]

All eighteen pgo era tests, positive and negative, are now up
to date, and all pass as expected.

[9/26/94 public]
closed.



CR Number                     : 12107
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : schema tests don't work right
Reported Date                 : 9/8/94
Found in Baseline             : 1.1b16
Found Date                    : 9/8/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : schema tests
Sensitivity                   : public

[9/8/94 public]

The schema_* functional tests are not working correctly.
Some fail on a regular basis with a secd core dump (reported
in a separate OT), so will probably begin working correctly
when the core dump is fixed.

Here's the current status of the schema tests:

   schema_catalog_N - PASS
   schema_catalog_P - PASS

   schema_show_N - PASS
   schema_show_P - sometimes PASS, sometimes secd core dump

   schema_delete_N - PASS
   schema_delete_P - PASS

   schema_create_N - PASS
   schema_create_P - sometimes secd core dump, sometimes dcecp core dump

   schema_rename_N         - PASS
   schema_rename_P         - FAIL (test is valid, api is not implemented)
   schema_rename_generic_P - PASS

   schema_modify_N         - PASS
   schema_modify_P         - sometimes secd core dump, sometimes dcecp core dump
                             (without core dump will FAIL, api is not implemented)
   schema_modify_generic_P - sometimes secd core dump, sometimes dcecp core dump
                             (without core dump will FAIL, api is not implemented)

   The dcecp core dump that appears looks like this
      0 TMEM@libc
      1 TMEM@libc
      2 sec_attr_util_sch_ent_free_ptr
      3 schema_create
      4 dcp_xattrschema
          :

   We are checking to make sure the schema entries are created correctly
   before they are free'd by sec_attr_util_sch_ent_free_ptr().  If they
   are, an OT against security will be opened.  It's possible that this
   is related to the secd core dump mentioned above.

[9/21/94 public]

   With a fix going in shortly for the secd core dump (ot12106) that
was holding up testing, we can finally verify these tests.  The following
list of tests now PASS for all test cases:

   schema_catalog_N.tcl
   schema_catalog_P.tcl
   schema_create_N.tcl
   schema_create_P.tcl
   schema_delete_N.tcl
   schema_delete_P.tcl
   schema_modify_N.tcl
   schema_rename_N.tcl
   schema_show_N.tcl
   schema_show_P.tcl

The following tests all FAIL because the underlying api calls to
support modification and renaming are not implemented yet.  The
tests were written as real tests, so expect real results.

   schema_modify_P.tcl
   schema_modify_generic_P.tcl
   schema_rename_P.tcl
   schema_rename_generic_P.tcl

[9/26/94 public]
closed.



CR Number                     : 12096
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : utils
Subcomponent Name             : attr
Short Description             : The generic schema i/f fvt need to be changed to reflect the changes on dced server xattrschema
Reported Date                 : 9/7/94
Found in Baseline             : 1.1b16
Found Date                    : 9/7/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : dce_attr_sch_fvt.h
Sensitivity                   : public

[9/7/94 public]
dced xattrschem create operation has been fixed to check the
input fields of a schema_entry to be created. The functional tests
need to be modified to match with the changes because fvt is 
written on the dced xattrschema implementation.

[9/9/94 public]
Submitted.



CR Number                     : 12084
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : systest
Subcomponent Name             : svc
Short Description             : svc test thinks secd svc debug not working
Reported Date                 : 9/7/94
Found in Baseline             : 1.1b16
Found Date                    : 9/7/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : security/server/rs/rs_main.c
Sensitivity                   : public

[9/7/94 public]

On the 486 w/ osf/1 using bl-16.3, secd debug routing specifications have
no effect.  Works fine on HPUX.  This is demonstrated by systests
svccfg005 and svccfg006.  By hand, do the following:

update /etc/rc.dce to put these 2 lines before the startup of secd

	SVC_SEC_DBG=sec:*.2:FILE:/tmp/sec.debug
	export SVC_SEC_DBG

or, using the default routing file, add the following line to
/opt/dcelocal/var/svc/routing

	sec:general.2:FILE:/tmp/sec.file.debug

The debug files never get created.

[ sekhar 9/8/94 public ]

The debug files are not created unless a SVC debug message 
is logged. 

And currently there are no SVC debug messages logged
for the "sec" component ( except in sec_login_pvt.c - but I
submitted those changes just yesterday  and should not be in bl16.3
which you are running ). 

So  the behaviour on OSF/1 seems to be correct.

You said it "Works fine on HPUX" . If a debug file is being
created , then it is not right.

I just configured a cell, shut down secd, added the following
line to /opt/dcelocal/var/svc/routing 

   sec:*.9:TEXTFILE:/opt/dcelocal/var/security/sec_debug.log

and restarted secd . And the file sec_debug.log was not created.

[9/8/94 public]
Can you check to see if the debug file (on HPUX ) was 
possibly created as a result of non sec debug messages being
logged to the same debug file ?

[9/8/94 public]
That was not the case.  Different components were using different files.
Sometimes I just get a zero length file on HP, depending on the dbg level,
but I always at least get the file.  If the level is *.1 I get the following
msgs:
prop_driver: attempt get rep binding

prop_driver: attempt get rep binding auth info

prop_driver: rep binding, get auth handle succeeded

prop_driver: rep binding succeeded

[9/8/94 public]
Turns out that the dbg code was getting hit on the HP because a replica
was configured in that cell.  Hitting the debug message created the
file regardless of debug level.  So the problem is that the test
expects to find the debug file, but if no debug statements are hit
it won't get created.  At this point in time, not many sec debug
calls have been converted to use SVC.  So the test should be updated
to deal with this, i.e. not report an error, at least until more debug
calls use svc.

[ sekhar 9/9/94 public ]

FYI, I just submitted a change so that a debug message is logged 
on secd startup and shutdown ( using sec_admin/dcecp )
to create a debug file for testing purposes.



CR Number                     : 12018
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : mavrostest
Short Description             : mavros tests not built
Reported Date                 : 9/2/94
Found in Baseline             : 1.1
Found Date                    : 9/2/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : test/directory/gds/mavrostest/Makefile
Sensitivity                   : public

[9/2/94 public]

[ /test/directory/gds/mavrostest at 03:21 (AM) Friday ]

/project/dce/build/dce1.1-snap/src/test/directory/gds/mavrostest/test_mvr.c:58: test.h: No such file or directory
*** Error code 1

/project/dce/build/dce1.1-snap/src/test/directory/gds/mavrostest/import1.c:38: test.h: No such file or directory
*** Error code 1

[09/02/94 public]
Submitted.



CR Number                     : 12010
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rpc
Short Description             : endpoint and rpc test errors
Reported Date                 : 9/1/94
Found in Baseline             : 1.1b16
Found Date                    : 9/1/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : rpcentry_delete_P.tcl
Sensitivity                   : public

[9/1/94 public]
rpcentry_delete_4_P is a negative test. The error string is wrong too.

520|0 1 29121 1 2|==== Contents of test case:
520|0 1 29121 1 3|{ rpcentry delete $RPCENTRY1          list [catch {rpcentry show $RPCENTR
Y1} msg] $msg     }
520|0 1 29121 1 4|Test completed successfully.
520|0 1 29121 1 5|== Test output was:
520|0 1 29121 1 6|{1 {Entry not found}}
520|0 1 29121 1 7|== Expected output was:
520|0 1 29121 1 8|{1 {entry not found}}


rpcentry_delete_5_P has the same problem as 4.

rpcprofile_add_9_N is a negative test, but completes successfully.

This CR covers all the current errors in ts/rpc .

[9/1/94 public]
rpcentry_delete_4_P and _5_P are *not* negative tests. They are
testing to make sure the delete operation works, by proving that the
deleted entry isn't there any more. They say "entry not found" on my
machine; somebody must have updated the RPC error message in the last
week or so. I'll update thet test (sometime after my next install).

rpcprofile_add_9_N completes successfully because that's what the code
does. The bug is in the code (not detecting this combination as an
error), not the test. I'll fix it.

[9/1/94 public]
Submitted the fix for rpcprofile_add.

[9/2/94 public]
Submitted the fix for rpcentry_delete_P.tcl. All done now.

[9/26/94 public]
closed.



CR Number                     : 11993
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : tools
Short Description             : gdsDump not exported
Reported Date                 : 9/1/94
Found in Baseline             : 1.1b16
Found Date                    : 9/1/94
Severity                      : B
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : /src/test/systest/tools/Makefile
Sensitivity                   : public

[9/1/94 public]

The gds system test tool gdsDump is not being exported.

[9/7/94 public]

Submitted makefile with change.  Re-installed $TET_ROOT/system/tools with
dcetest_config, gdsDump gets installed.



CR Number                     : 11991
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : mavrostest
Short Description             : remove the installation of three files in mavrostest
Reported Date                 : 9/1/94
Found in Baseline             : 1.1
Found Date                    : 9/1/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : test/directory/gds/mavrostest/Makefile
Sensitivity                   : public

[9/1/94 public]

The following files in mavrostest are installed but not used:

import1.h
test.h

They shouldn't be installed.

[09/01/94 public]
Makefile submitted.



CR Number                     : 11981
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : svr_example acl manager
Short Description             : Example ACL manager in src/test/security has user_obj_delegate bug
Reported Date                 : 8/31/94
Found in Baseline             : 1.1b16
Found Date                    : 8/31/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : test/security/svr_example/dacl_manager.c
Sensitivity                   : public

[8/31/94 public]
In the access control algorithm in dacl_manager.c (sample acl manager used
for tests and example code only), it erroneously falls through from the
user_obj check to the user_obj_delegate check even if the user_obj matches
the caller.  I've verified that this is only a problem in this test code
(done correctly in secd's ACL manager and DCE ACL mgr library).  Thanks to
Ron Arbo for finding this one.

[9/15/94 public]
Rajendra passed the bug to me quite a few days ago.  Updated the
responsible eng.
Also although I have put in the fix (not submitted yet) is worth
noting that there is not much utility in fixing user_obj stuff
in the example acl manager as the user_obj uuids it deals with
are always null.   In other words there is only token support for
user_obj or group_obj concepts.  I had to hack the example manager
itself to simulate verifying the fix.



CR Number                     : 11975
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dced
Subcomponent Name             : secval FVT
Short Description             : Need new FVT for dced_secval_status() API
Reported Date                 : 8/31/94
Found in Baseline             : 1.1b16
Found Date                    : 8/31/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : secval_status.c others
Sensitivity                   : public

[8/31/94 public]

Need new FVT for dced_secval_status() API.  This API sets a boolean32
out param to TRUE or FALSE depending upon whether the secval service is
active.

[9/30/94 public]
Added new tests, made changes to allow running tests without TET.



CR Number                     : 11964
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : systest
Subcomponent Name             : 
Short Description             : dcesestr fails on a 1.1 HPUX
client when having been executed on a 1.0.3 client
Reported Date                 : 8/30/94
Found in Baseline             : 1.1b16
Found Date                    : 8/30/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : test/systest/security/resestr
Sensitivity                   : public

[8/30/94 public]

As part of the compatibility testing, a 1.0.3 client is routinely
configured on a 1.1 cell. We expect all the 1.0.3 sytstem tests
to pass as they did by the end of 1.0.3.

The command to run the test is:

run.sec -t 15 -m "soldier trinidad dce3 barbados west" dcesestr

where "west" is an HPUX. The test fails on west and the log says:

520|0 1 30516 9 1|ERROR: RESESTR failed on west.
520|0 1 30516 9 2|Remote journal from west follows as info lines:
520|0 1 30516 9 3|      west    User: root (0) TCC Start, Command Line: tcc
-e -j /tmp/resestr.wes
t.940830131241 system/security resestr
520|0 1 30516 9 4|      west    Config Start
520|0 1 30516 9 5|      west    TET_VERSION=1.10
520|0 1 30516 9 6|      west    TET_OUTPUT_CAPTURE=False
520|0 1 30516 9 7|      west    TET_RESCODES_FILE=tet_code
520|0 1 30516 9 8|      west    TET_EXEC_IN_PLACE=False
520|0 1 30516 9 9|      west    TET_NSIG=31
520|0 1 30516 9 10|     west    TET_SIG_IGN=26
520|0 1 30516 9 11|     west    Config End
520|0 1 30516 9 12|     west    "Starting RESESTR Test Suite"
520|0 1 30516 9 13|     west    TC Start, scenario ref 102-1
520|0 1 30516 9 14|     west    TCM Start
520|0 1 30516 9 15|     west    Starting RESESTR on west
520|0 1 30516 9 16|     west    IC Start
520|0 1 30516 9 17|     west    TP Start
520|0 1 30516 9 18|     west    Starting iteration 1
520|0 1 30516 9 19|     west    Attempting to log in as sestrlesoldier0p
520|0 1 30516 9 20|     west    Successfully logged in as
sestrlesoldierwest0p testpw
520|0 1 30516 9 21|     west    Attempting to change home directory of
person sestrlesoldierwest0p
520|0 1 30516 9 22|     west    Was able to change home directory for
sestrlesoldierwest0p
520|0 1 30516 9 23|     west    Attempting to change shell of person
sestrlesoldierwest0p
520|0 1 30516 9 26|     west    Was able to change sestrlesoldierwest0p
password from testpw to ne
wtestpw
520|0 1 30516 9 27|     west    NORESULT
520|0 1 30516 9 28|     west    IC End
520|0 1 30516 9 29|     west    TC End
520|0 1 30516 9 30|     west    "Completed RESESTR Test Suite"
520|0 1 30516 9 31|     west    TCC End
520|0 1 30516 9 32|End of remote journal from west.

[8/30/94 public]
This is another case of the problem we saw before where the remote
test (the 1.1 version in this case) is attempting to check the 
value of USE_ERA.  The fix for the all-1.1 case was to set the
value in the env of the remote shell call.  The remote test will
have to be updated to have a default value of NO for the 1.0.3/1.1
case.



CR Number                     : 11832
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : hcells
Short Description             : No system tests are in place for hierarchical cells
Reported Date                 : 8/23/94
Found in Baseline             : 1.1b14
Found Date                    : 8/23/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b20
Affected File(s)              : hclcfg001,hclrel001
Sensitivity                   : public

[8/23/94 public]

The existing system tests don't lend themselves readily to 
testing of hierarchical cells. To avoid interfering with stable
existing dce system tests, separate tests should be created.

[10/5/94 public]

HCLCFG001 and HCLREL001 are now in place as initial tests
for use in intercell and hierarchical cell testing.



CR Number                     : 11829
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dced
Subcomponent Name             : test/admin/dced
Short Description             : common API tests associated
with key tab functionality fail.
Reported Date                 : 8/23/94
Found in Baseline             : 1.1
Found Date                    : 8/23/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : list_get.c, entry_get_next.c, object_read_all.c
Sensitivity                   : public

[8/23/94 public]
The follwoing assertions - 
dced_list_get_4, dced_entry_get_next_4, dced_object_read_all_4 fail.
Output is not properly verified.

[8/24/94 public]
Submitted and verified the changes.



CR Number                     : 11822
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : admin tests
Short Description             : enhancements for local_TET.admin
Reported Date                 : 8/23/94
Found in Baseline             : 1.1
Found Date                    : 8/23/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : test/functional/directory/gds/tet_scen
Sensitivity                   : public

[8/23/94 public]

I'd like to add the following scenarios:

all_no_gds_setup
all_no_gds_sec
all_no_gds_sec_gds_setup
all_no_gds_sec_gds_setup_gdscp
all_no_gds_sec_gdscp

I'd like to alter

all

to run really all tests - including gds_sec and gdscp.

[08/23/94 public]
Fix submitted.

[8/23/94 public]
Verified by inspection.



CR Number                     : 11752
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : tet scripts
Short Description             : less TET logging to screen
Reported Date                 : 8/18/94
Found in Baseline             : 1.1
Found Date                    : 8/18/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : 
./test/functional/directory/gds/ts/config/two_dsas.sed 
./test/functional/directory/gds/ts/config/gds_sec_start.sh
./test/functional/directory/gds/ts/config/config_gds-admin_cache.sed
./test/functional/directory/gds/ts/config/gds_sec_clean.sh
Sensitivity                   : public

[8/18/94 public]

Some of the logging of the TET scripts
(i.e.: "Configuring dir. id 11")
should move from the screen to gdsstart.log.

[08/19/94 public]
Fix submitted.

[8/23/94 public]
Verified by fvt



CR Number                     : 11733
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rpc
Short Description             : RPC/endpoint tests have invalid argument formats
Reported Date                 : 8/17/94
Found in Baseline             : 1.1b14
Found Date                    : 8/17/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : endpoint_create_P.tcl, endpoint_create_N.tcl, endpoint_delete_P.tcl, endpoint_delete_N.tcl, endpoint_show_P.tcl, rpcentry_export_P.tcl, rpcentry_import_P.tcl, rpcentry_import_N.tcl, rpcentry_unexport_P.tcl, rpcentry_unexport_N.tcl, rpcentry_show_P.tcl
Sensitivity                   : public

[8/17/94 public]

The various rpc* and endpoint FVTs don't properly enclose their
TCL-syntax arguments as lists. This had been masked by CRs 10814 and
10328.

Also, the text of some error messages in dcp.sams appears to have
changed, and the negative tests are checking for the wrong thing.

[8/18/94 public]
Closer examination suggested that only the rpcentry and endpoint tests
had these problems. I have fixed and submitted them.

[8/21/94 public]
closed.



CR Number                     : 11732
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rpc
Short Description             : rpcgroup and rpcprofile tests not present in tet_scen
Reported Date                 : 8/17/94
Found in Baseline             : 1.1b14
Found Date                    : 8/17/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : src/test/admin/dcecp/tet_scen
Sensitivity                   : public

[8/17/94 public]

Somehow or other, the rpcgroup and rpcprofile tests never made it into
the tet_scen file.

[8/17/94 public]
I have the appropriate changes to the tet_scen file in my sandbox from
the last time I worked on this. I'll submit later today, don't waste
any effort on this.

[8/18/94 public]
For some definition of "today". :-) Changed the responsible engineer.

[8/18/94 public]
I don't see the problem, it's still "today" :-).

I was holding off on the submit so I could finish my work on getting
all FVT's to run together. Let me know if submitting now would help
you out.

[9/12/94 public]
Submitted on 9/9/94.

[9/26/94 public]
closed.



CR Number                     : 11720
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dced
Short Description             : DCDREL tests not installed by dcetest_config
Reported Date                 : 8/16/94
Found in Baseline             : 1.1b14
Found Date                    : 8/16/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b19
Affected File(s)              : dcetest_config
Sensitivity                   : public

[8/16/94 public]

The test installation program needs to be modified to install
the DCDREL system tests.

[9/27/94 public]

Done



CR Number                     : 11717
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : delegation test
Short Description             : OSF's changes were overwritten.
Reported Date                 : 8/16/94
Found in Baseline             : 1.1b14
Found Date                    : 8/16/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : 
 ./test/security/api/moretests/dlg_client.c
 ./test/security/api/moretests/dlg_intermediary.c
Sensitivity                   : public

[8/16/94 public]
OSF made some changes to delegation test which was overwritten by the code
drop.  Merged has been done, now they are reviewd by OSF.  Bruce is going
to do the submission after he reviews them.



CR Number                     : 11716
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : multi machine smoketest
Short Description             : ERROR:   rgy_edit - adding CDS Server principals
Reported Date                 : 8/16/94
Found in Baseline             : 1.1
Found Date                    : 8/16/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : dce_config
Sensitivity                   : public

[8/16/94 public]

 ERROR:   rgy_edit - adding CDS Serv

MACHINE:	RIOS 
OS:		AIX
HOSTNAME:	mudslide

CONFIGURATION: 	multi machine cell test
		sif = sec and cds master, dts server
		budapest = sec replica, cds replica, dts server, dfs server
		mudslide = sec replica, cds replica, dfs client

CORE FILES PLATFORM HP          = none found
		    AT486	= none found
		    RIOS	= none found


DAEMONS RUNNING:    HP		= secd,cdsd,dtsd,dced,sec_clientd,cdsadv
		    AT486	= secd,cdsd,dtsd,dced,sec_clientd,cdsadv
                    RIOS        = secd,dtsd,dced,sec_clientd,cdsadv

SUBMISSION LOG:

Submission Log *****

  Submitted by Ajay Bhatnagar; User name: ajayb
  Date: 8/15/94; Time: 11:23
  Number of files: 1; Defect number: 11661.
  Set name: ajayb_dcecp1_1; Sandbox: dcecp1_1
  List of files and revisions:
./admin/dcecp/rgy.h     1.1.4.32        1.1.4.31

  Detailed description:

[ ./admin/dcecp/rgy.h ]
Changed type of randompwd from char* to boolean32.
[13:53:30  ajayb]

  Submitted by Julie Salamone; User name: salamone
  Date: 8/15/94; Time: 13:28
  Number of files: 4; Defect number: 11636.
  Set name: salamone_dcp; Sandbox: dcp
  List of files and revisions:
./admin/dcecp/rgy_sa_tclif.c    1.1.2.15        1.1.2.14
./admin/dcecp/rgy_sa_replist.c  1.1.2.15        1.1.2.14
./test/admin/dcecp/ts/rgy/registry_catalog_N.tcl        1.1.2.2 1.1.2.1
./test/admin/dcecp/ts/rgy/registry_catalog_P.tcl        1.1.2.2 1.1.2.1
  Detailed description:

[ ./admin/dcecp/rgy_sa_tclif.c ]
CR11651: Generate errors with bad option or bad argument.
[17:26:30  salamone]

CR11636: Allow registry catalog to take an argument.
[16:19:39  salamone]
[ ./admin/dcecp/rgy_sa_replist.c ]
CR11636: Allow registry catalog to take an argument.
[16:19:39  salamone]
[ ./admin/dcecp/rgy_sa_replist.c ]
CR11636: Allow registry catalog to take an argument.
CR11651: Generate errors with bad option or bad argument.
[17:24:08  salamone]
[ ./test/admin/dcecp/ts/rgy/registry_catalog_N.tcl ]
CR11636: Allow registry catalog to take an argument.
[17:22:51  salamone]
[ ./test/admin/dcecp/ts/rgy/registry_catalog_P.tcl ]
CR11636: Allow registry catalog to take an argument.
[17:23:14  salamone]
  Submitted by Ajay Bhatnagar; User name: ajayb
  Date: 8/15/94; Time: 14:19
  Number of files: 2; Defect number: 9691.
  Set name: ajayb_dcecp1_1; Sandbox: dcecp1_1
  List of files and revisions:
./admin/dcecp/dcp.sams  1.1.8.25        1.1.8.24
./admin/dcecp/rgy.c     1.1.4.41        1.1.4.40
 Detailed description:

[ ./admin/dcecp/dcp.sams ]
Improve explanation for dcp_s_rgy_invalid_pwd_val_type.
[18:17:57  ajayb]

Add entry for dcp_s_rgy_invalid_pwd_val_type
[15:15:04  ajayb]
[ ./admin/dcecp/rgy.c ]
rgy_account_create/modify():

- Match the sequence for initializing arg_table[].dst with the rest
  of the fields in the table. A mismatch in this sequence was causing
  dcecp to coredump when using the random password generation
  functionality.

- Use 'user-select' semantics for a pwd_val_type of 'none', i.e.
  pre-1.1 behavior.

- Return an error if the pwd_val_type is of an unrecognized type.
[14:39:51  ajayb]

  Detailed description:

[ ./admin/dcecp/dcp.sams ]
Improve explanation for dcp_s_rgy_invalid_pwd_val_type.
[18:17:57  ajayb]

Add entry for dcp_s_rgy_invalid_pwd_val_type
[15:15:04  ajayb]
[ ./admin/dcecp/rgy.c ]
rgy_account_create/modify():

- Match the sequence for initializing arg_table[].dst with the rest
  of the fields in the table. A mismatch in this sequence was causing







output from mudslide:/usr/rrizzo/do_test.dfs.log

S:****** Starting cdsadv...
        Modifying acls on /.:/sec/replist ...
        Modifying acls on /.:/subsys/dce/sec ...
        Modifying acls on /.:/sec ...
ERROR: no update sites for this acl operation (dce / sec)
        Modifying acls on /.: ...
        Modifying acls on /.:/cell-profile ...
                start slave security server (secd) ...


S:****** Configuring CDS Client...
ERROR:   rgy_edit - adding CDS Server principals.
  Message from rgy_edit:
  Current site is: registry server at /.../sif_cell/subsys/dce/sec/master
Domain changed to: principal
?(rgy_edit) Unable to add principal "hosts/mudslide/cds-server" - Principal already exists (\
Registry Edit Kernel)
 (dce / sad)
?(rgy_edit) Unable to add principal "hosts/mudslide/gda" - Principal already exists (Registr\
y Edit Kernel)
 (dce / sad)
Domain changed to: account
?(rgy_edit) Unable to add "hosts/mudslide/cds-server" - Specified object already exists (Reg\
istry Edit Kernel)
 (dce / sad)
?(rgy_edit) Unable to add "hosts/mudslide/gda" - Specified object already exists (Registry E\
dit Kernel)
 (dce / sad)
?(rgy_edit) Unable to add key - Specified key already exists in key store (dce / sec)
?(rgy_edit) Unable to add key - Specified key already exists in key store (dce / sec)
bye.
        Press <RETURN> to continue, CTRL-C to exit: ERROR:   cdsadv is already running.
        Press <RETURN> to continue, CTRL-C to exit: S:****** Configuring DTS Local Server


output from mudslide:/tmp/dce)config.log


DEBUG:     Executing: err_exit(rgy_edit - adding CDS Server principals.
  Message from rgy_edit:
  Current site is: registry server at /.../sif_cell/subsys/dce/sec/master 
Domain changed to: principal
?(rgy_edit) Unable to add principal "hosts/mudslide/cds-server" - Principal already exists (Registry Edit Kernel)
 (dce / sad)
?(rgy_edit) Unable to add principal "hosts/mudslide/gda" - Principal already exists (Registry Edit Kernel)
 (dce / sad)
Domain changed to: account
?(rgy_edit) Unable to add "hosts/mudslide/cds-server" - Specified object already exists (Registry Edit Kernel)
 (dce / sad)
?(rgy_edit) Unable to add "hosts/mudslide/gda" - Specified object already exists (Registry Edit Kernel)
 (dce / sad)
?(rgy_edit) Unable to add key - Specified key already exists in key store (dce / sec)
?(rgy_edit) Unable to add key - Specified key already exists in key store (dce / sec)
bye.)
ERROR:   rgy_edit - adding CDS Server principals.
  Message from rgy_edit:
  Current site is: registry server at /.../sif_cell/subsys/dce/sec/master 
Domain changed to: principal
?(rgy_edit) Unable to add principal "hosts/mudslide/cds-server" - Principal already exists (Registry Edit Kernel)

[8/16/94 public]
Cuased by changing of the smoketest scripts to config a security
replica and then trying to do a CDS client.  Fixed up dce_config
so config_cdsclient() wont be called more than once.



CR Number                     : 11702
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : test
Short Description             : pwd_strength-tc Test Needs
Makefile Enhancement
Reported Date                 : 8/15/94
Found in Baseline             : 1.1
Found Date                    : 8/15/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : test/functional/security/ts/client/pwd_mgmt/pwd_strength/Makefile
Sensitivity                   : public

[8/15/94 public]
The link for the pwd_strength-tc test fails if the build host provides
its own pthreads library for pthreads symbols.  The makefile file must
be modified so LIBS includes ${${TARGET_MACHINE}_LIBS} or the build
rule for the target is  modified as:
pwd_strength-tc_LIBS = ${LIBS} ${${TARGET_MACHINE}_LIBS}



CR Number                     : 11701
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : 
Short Description             : audit systests using kill -9 auditd
Reported Date                 : 8/15/94
Found in Baseline             : 1.1b14
Found Date                    : 8/15/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : audrel001.c, audstr001
Sensitivity                   : public

[8/15/94 public]


The audit system tests are using kill -9 auditd,
Need to fix so the tests do not kill -9 auditd.



CR Number                     : 11670
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dlgcfg001
Short Description             : errors installing dlgcfg001 tests
Reported Date                 : 8/12/94
Found in Baseline             : 1.1b14
Found Date                    : 8/12/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : dcetest_config
Sensitivity                   : public

[8/12/94 public]

dcetest_config fails installing the dlgcfg001 test. 

                installing test/tet/system/security ...
chmod: /dcetest/dcelocal/test/tet/system/security/ts/dlgcfg001/dlg_client:
Not a directory
chmod: /dcetest/dcelocal/test/tet/system/security/ts/dlgcfg001/dlg_intermediary:
Not a directory
chmod: /dcetest/dcelocal/test/tet/system/security/ts/dlgcfg001/acl_server:
Not a directory
                installing test/tet/system/threads ...


Before submitting changes to dcetest_config, make sure the changes 
work.

[8/12/94 public]

dctest_config not checking whether dlgcfg001 directory
exists or not.  If the directory doesn't exist it creates it.
Made the change to dcetest_config. Fixed.



CR Number                     : 11667
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : bsubmit of TestSummary core dumps
Short Description             : ODE2.3 bsubmit core dumps when trying to submit TestSummary
Reported Date                 : 8/12/94
Found in Baseline             : 1.1
Found Date                    : 8/12/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : test/TestSummary
Sensitivity                   : public

[8/12/94 public]

ODE2.3 bsubmit core dumps when submitting TestSummary.  The
workaround for now is to use ODE2.3.4 bsubmit.  I will put
ODE2.3.4 bsubmit in the backing tree in:

    /project/dce/build/dce1.1/ODE_tools/at386/bin

It will be called bsubmit.ode2.3.4.

By Monday, we will fix this problem so that ODE2.3 bsubmit will
work with this file.

thanks
annie

[8/17/94 public]

Marty Lynch has fixed the ancestry in the file - test/TestSummary.  
So, ODE2.3 bsubmit will not work with this file.

Please let us know if you have any bsubmit problems that are
related to this file - test/TestSummary.

thanks
annie



CR Number                     : 11655
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : security/dcesestr
Short Description             : dcesestr test not deleting registry objects
Reported Date                 : 8/11/94
Found in Baseline             : 1.1b14
Found Date                    : 8/11/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : test/systest/security/dcesestr
Sensitivity                   : public

[8/11/94 public]

The del_obj function in the dcesestr test is never deleting the
registry objects since it performs a loop over $SEC_MACHINE
where it should be $SEC_MACHINES.  This has had the effect of
bypassing the tests for deleting regi objs...

[9/7/94 public]

Fixed by submission of revision 1.1.10.4 with ERA updates.



CR Number                     : 11647
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : 
Short Description             : dcetest_config work to copy the installed delegation functional tests for system test purposes
Reported Date                 : 8/10/94
Found in Baseline             : 1.1b13
Found Date                    : 8/10/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : audrel001.c, audstr001
Sensitivity                   : public

[8/10/94 public]

Need to copy over the dlg_client, dlg_intermediary
and acl_server from the security functional test area.
into the system test area for use by dlgcfg001



CR Number                     : 11598
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rgy
Short Description             : registry modify/show need FVTs
Reported Date                 : 8/8/94
Found in Baseline             : 1.1
Found Date                    : 8/8/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : 
         registry_modify_N.tcl  registry_modify_P.tcl  registry_show_P.tcl
Sensitivity                   : public

[8/8/94 public]

The registry modify/show commands need FVTs.

[8/18/94 public]
What was I thinking?  Kevin this is based on the work you did to add policy
stuff to these commands.  Sorry, your code, your tests.  :-)

[8/26/94 public]

Added the registry policy commands.

[9/26/94 public]
closed.



CR Number                     : 11573
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : rpc
Short Description             : "endpoint show" negative tests fail
Reported Date                 : 8/5/94
Found in Baseline             : 1.1b14
Found Date                    : 8/5/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : endpoint_show_N.tcl
Sensitivity                   : public

[8/5/94 public]

The negative tests for "endpoint show" are wrong, because they were
written on the assumption that it takes no argument (no longer true in
light of CR 11415). The first test, which checks for an "unrecognized
argument", should be removed. The second one, expecting "unrecognized
option", receives "invalid RPC protocol sequence", probably because an
unrecognized option is interpreted as an argument if none is present.

[8/18/94 public]
submitted.

[8/21/94 public]
closed.



CR Number                     : 11565
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dlg
Short Description             : dlg_client needs to bind to master
Reported Date                 : 8/4/94
Found in Baseline             : 1.1b13
Found Date                    : 8/4/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : test/security/api/moretests/dlg_client.c
Sensitivity                   : public

[8/4/94 public]

The dlg_client needs to bind to the master security replica in 
order to make updates.  It works fine as is if you don't have a 
read-only replica running in the cell, if it does you get the
following (sometimes):
pomerol /dcetest/dcelocal/test/tet/system/security/ts/dlgcfg001 K# ./dlg_client -la
Error from sec_rgy_attr_update: Replica is not the master (dce / sec)
Num_returned: 4823624, Num_left: -1540070320, Failure_index: 1075951736

Fix is to add sec_rgy_site_open_update call before sec_rgy_attr_update

[9/7/94 public]
Fixed by submission (which subsequently got overwritten and then
put back in) of: 
revision 1.1.3.6
date: 1994/08/04 22:28:27;  author: hester;  state: Exp;  lines: +18 -2
        added sec_rgy_site_open_update call to get master rgy
        [1994/08/04  22:21:53  hester]



CR Number                     : 11551
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : endpoint FVT
Short Description             : endpoint FVTs test for incorrect output format
Reported Date                 : 8/3/94
Found in Baseline             : 1.1b13
Found Date                    : 8/3/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : endpoint_create_P.tcl, endpoint_delete_P.tcl, endpoint_show_P.tcl
Sensitivity                   : public

[8/3/94 public]

The positive FVTs for the "endpoint" commands have extra spaces in
their expected output because they were trying to match the
(incorrect) format used by the command. Now that the command has been
corrected (CR 11146), many of the tests (that used to pass) fail.

[8/3/94 public]

Submitted.

[8/17/94 public]
closed.



CR Number                     : 11534
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dcesestr
Short Description             : dcesestr fails to execute from
an OSF1 or RIOS machine to others
Reported Date                 : 8/2/94
Found in Baseline             : 1.1b13
Found Date                    : 8/2/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : test/systest/security/dcesestr
Sensitivity                   : public

[8/2/94 public]

Well, this took me a while to figure out. I first blamed it on
my 1.0.3 to 1.1 testing but it turns out to be the 1.1 version
of the test that has the problem.

The current version of dcesestr fails when started on a
RIOS or OSF1 and remotely executes on an HPUX or OSF1.

The test fails in the remote_test() procedure. The "rshp .. tcc.."
command fails to complete. 

The failure on the RIOS is different, prints a different error.

The test succeeds when going from an HPUX to an OSF1. I have
not looked for other successful combinations.

[8/3/94 public]
Fix submitted to set USE_ERA in env of remote shell, to prevent 
check of unset variable.



CR Number                     : 11532
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : sec_rgy_attr_sch
Short Description             : sec_rgy_attr_sch test core dumps due to missing &.
Reported Date                 : 8/2/94
Found in Baseline             : 1.1b13
Found Date                    : 8/2/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : ./test/security/tet-tests/ts/client/rca/sec_rgy_attr_sch/sec_rgy_attr_sch.c
Sensitivity                   : public

[8/2/94 public]

Line 332 in function tp6(), I believe it should be &cursor, not cursor.

[8/4/94 public]

Change suggested was made.

[08/04/94 public]



CR Number                     : 11527
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : fvt
Short Description             : gdssetup fvt return code failures
Reported Date                 : 8/2/94
Found in Baseline             : 1.1
Found Date                    : 8/2/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : test/functional/directory/gds/ts/lib/shfuncs
Sensitivity                   : public

[8/2/94 public]
Test results based upon binaries of 7/25.

The gdssetup journal from the 486 shows the following.  It's not clear what
the problem is because no error messages seem to be generated.  The
valid and invalid log files will be placed in the AFS cell in a directory
named after this OT.


0|1.10 08:31:12 19940802|User: zeliff (0) TCC Start, Command Line: /dcetest/dcelocal/test/tet/bin/tcc -e functional/directory/gds gdssetup 
20|/dcetest/dcelocal/test/tet/functional/directory/gds/tetexec.cfg 1|Config Start
30||TET_VERSION=1.10
30||TET_OUTPUT_CAPTURE=False
30||TET_RESCODES_FILE=tet_code
30||TET_EXEC_IN_PLACE=True
30||TET_TAPE_DEVICE=/dev/rmt0
40||Config End
70||"STARTING all TESTS using <gdssetup>"
10|0 /gdssetup/gdssetup_all 08:31:12|TC Start, scenario ref 49-1
15|0 1.10 2|TCM Start
520|0 0 25410 1 1|GDSSETUP TEST START
400|0 1 1 08:31:24|IC Start
200|0 1 08:31:25|TP Start
520|0 1 25410 1 2|GDSSETUP: TEST CASE begin.setup
520|0 1 25410 1 3|PASSED 
520|0 1 25410 1 4|GDSSETUP: TEST CASE client1
520|0 1 25410 1 5|<gdssetup> gave exit code: 37
520|0 1 25410 1 6|FAILED 
520|0 1 25410 1 7|GDSSETUP: TEST CASE client1.cleanup
520|0 1 25410 1 8|PASSED 
520|0 1 25410 1 9|GDSSETUP: TEST CASE client2
520|0 1 25410 1 10|<gdssetup> gave exit code: 37
520|0 1 25410 1 11|FAILED 
520|0 1 25410 1 12|GDSSETUP: TEST CASE client2.cleanup
520|0 1 25410 1 13|PASSED 
520|0 1 25410 1 14|GDSSETUP: TEST CASE client3
520|0 1 25410 1 15|<gdssetup> gave exit code: 37
520|0 1 25410 1 16|FAILED 
520|0 1 25410 1 17|GDSSETUP: TEST CASE client3.cleanup
520|0 1 25410 1 18|PASSED 
520|0 1 25410 1 19|GDSSETUP: TEST CASE client4
520|0 1 25410 1 20|<gdssetup> gave exit code: 37
520|0 1 25410 1 21|FAILED 
520|0 1 25410 1 22|GDSSETUP: TEST CASE client4.cleanup
520|0 1 25410 1 23|PASSED 
520|0 1 25410 1 24|GDSSETUP: TEST CASE client5
520|0 1 25410 1 25|<gdssetup> gave exit code: 37
520|0 1 25410 1 26|FAILED 
520|0 1 25410 1 27|GDSSETUP: TEST CASE client5.cleanup
520|0 1 25410 1 28|PASSED 
520|0 1 25410 1 29|GDSSETUP: TEST CASE sv_domdef1
520|0 1 25410 1 30|<gdssetup> gave exit code: 37
520|0 1 25410 1 31|FAILED 
520|0 1 25410 1 32|GDSSETUP: TEST CASE sv_domdef1.cleanup
520|0 1 25410 1 33|PASSED 
520|0 1 25410 1 34|GDSSETUP: TEST CASE sv_domdef2
520|0 1 25410 1 35|<gdssetup> gave exit code: 37
520|0 1 25410 1 36|FAILED 
520|0 1 25410 1 37|GDSSETUP: TEST CASE sv_domdef2.cleanup
520|0 1 25410 1 38|PASSED 
520|0 1 25410 1 39|GDSSETUP: TEST CASE sv_domdef3
520|0 1 25410 1 40|<gdssetup> gave exit code: 37
520|0 1 25410 1 41|FAILED 
520|0 1 25410 1 42|GDSSETUP: TEST CASE sv_domdef3.cleanup
520|0 1 25410 1 43|PASSED 
520|0 1 25410 1 44|GDSSETUP: TEST CASE sv_domdef4
520|0 1 25410 1 45|<gdssetup> gave exit code: 37
520|0 1 25410 1 46|FAILED 
520|0 1 25410 1 47|GDSSETUP: TEST CASE sv_domdef4.cleanup
520|0 1 25410 1 48|PASSED 
520|0 1 25410 1 49|GDSSETUP: TEST CASE sv_domdef5
520|0 1 25410 1 50|<gdssetup> gave exit code: 37
520|0 1 25410 1 51|FAILED 
520|0 1 25410 1 52|GDSSETUP: TEST CASE sv_domdef5.cleanup
520|0 1 25410 1 53|PASSED 
520|0 1 25410 1 54|GDSSETUP: TEST CASE sv_domdef6
520|0 1 25410 1 55|<gdssetup> gave exit code: 37
520|0 1 25410 1 56|FAILED 
520|0 1 25410 1 57|GDSSETUP: TEST CASE sv_domdef6.cleanup
520|0 1 25410 1 58|PASSED 
520|0 1 25410 1 59|GDSSETUP: TEST CASE sv_domnodef1
520|0 1 25410 1 60|<gdssetup> gave exit code: 37
520|0 1 25410 1 61|FAILED 
520|0 1 25410 1 62|GDSSETUP: TEST CASE sv_domnodef1.cleanup
520|0 1 25410 1 63|PASSED 
520|0 1 25410 1 64|GDSSETUP: TEST CASE sv_domnodef2
520|0 1 25410 1 65|<gdssetup> gave exit code: 37
520|0 1 25410 1 66|FAILED 
520|0 1 25410 1 67|GDSSETUP: TEST CASE sv_domnodef2.cleanup
520|0 1 25410 1 68|PASSED 
520|0 1 25410 1 69|GDSSETUP: TEST CASE sv_domnodef3
520|0 1 25410 1 70|<gdssetup> gave exit code: 37
520|0 1 25410 1 71|FAILED 
520|0 1 25410 1 72|GDSSETUP: TEST CASE sv_domnodef3.cleanup
520|0 1 25410 1 73|PASSED 
520|0 1 25410 1 74|GDSSETUP: TEST CASE sv_domnodef4
520|0 1 25410 1 75|<gdssetup> gave exit code: 37
520|0 1 25410 1 76|FAILED 
520|0 1 25410 1 77|GDSSETUP: TEST CASE sv_domnodef4.cleanup
520|0 1 25410 1 78|PASSED 
520|0 1 25410 1 79|GDSSETUP: TEST CASE sv_domnodef5
520|0 1 25410 1 80|<gdssetup> gave exit code: 37
520|0 1 25410 1 81|FAILED 
520|0 1 25410 1 82|GDSSETUP: TEST CASE sv_domnodef5.cleanup
520|0 1 25410 1 83|PASSED 
520|0 1 25410 1 84|GDSSETUP: TEST CASE sv_domnodef6
520|0 1 25410 1 85|<gdssetup> gave exit code: 37
520|0 1 25410 1 86|FAILED 
520|0 1 25410 1 87|GDSSETUP: TEST CASE sv_domnodef6.cleanup
520|0 1 25410 1 88|PASSED 
520|0 1 25410 1 89|GDSSETUP: TEST CASE sv_init1
520|0 1 25410 1 90|<gdssetup> gave exit code: 37
520|0 1 25410 1 91|FAILED 
520|0 1 25410 1 92|GDSSETUP: TEST CASE sv_init2
520|0 1 25410 1 93|<gdssetup> gave exit code: 37
520|0 1 25410 1 94|FAILED 
520|0 1 25410 1 95|GDSSETUP: TEST CASE sv_init2.cleanup
520|0 1 25410 1 96|PASSED 
520|0 1 25410 1 97|GDSSETUP: TEST CASE sv_init3
520|0 1 25410 1 98|<gdssetup> gave exit code: 37
520|0 1 25410 1 99|FAILED 
520|0 1 25410 1 100|GDSSETUP: TEST CASE sv_init4
520|0 1 25410 1 101|<gdssetup> gave exit code: 37
520|0 1 25410 1 102|FAILED 
520|0 1 25410 1 103|GDSSETUP: TEST CASE sv_init4.cleanup
520|0 1 25410 1 104|PASSED 
520|0 1 25410 1 105|GDSSETUP: TEST CASE sv_init5
520|0 1 25410 1 106|<gdssetup> gave exit code: 37
520|0 1 25410 1 107|FAILED 
520|0 1 25410 1 108|GDSSETUP: TEST CASE sv_init5.cleanup
520|0 1 25410 1 109|PASSED 
520|0 1 25410 1 110|GDSSETUP: TEST CASE sv_init6
520|0 1 25410 1 111|<gdssetup> gave exit code: 37
520|0 1 25410 1 112|FAILED 
520|0 1 25410 1 113|GDSSETUP: TEST CASE sv_init6.cleanup
520|0 1 25410 1 114|PASSED 
520|0 1 25410 1 115|GDSSETUP: TEST CASE sv_nodom1
520|0 1 25410 1 116|<gdssetup> gave exit code: 37
520|0 1 25410 1 117|FAILED 
520|0 1 25410 1 118|GDSSETUP: TEST CASE sv_nodom1.cleanup
520|0 1 25410 1 119|PASSED 
520|0 1 25410 1 120|GDSSETUP: TEST CASE sv_nodom2
520|0 1 25410 1 121|<gdssetup> gave exit code: 37
520|0 1 25410 1 122|FAILED 
520|0 1 25410 1 123|GDSSETUP: TEST CASE sv_nodom2.cleanup
520|0 1 25410 1 124|PASSED 
520|0 1 25410 1 125|GDSSETUP: TEST CASE sv_nodom3
520|0 1 25410 1 126|<gdssetup> gave exit code: 37
520|0 1 25410 1 127|FAILED 
520|0 1 25410 1 128|GDSSETUP: TEST CASE sv_nodom3.cleanup
520|0 1 25410 1 129|PASSED 
520|0 1 25410 1 130|GDSSETUP: TEST CASE sv_nodom4
520|0 1 25410 1 131|<gdssetup> gave exit code: 37
520|0 1 25410 1 132|FAILED 
520|0 1 25410 1 133|GDSSETUP: TEST CASE sv_nodom4.cleanup
520|0 1 25410 1 134|PASSED 
520|0 1 25410 1 135|GDSSETUP: TEST CASE sv_nodom5
520|0 1 25410 1 136|<gdssetup> gave exit code: 37
520|0 1 25410 1 137|FAILED 
520|0 1 25410 1 138|GDSSETUP: TEST CASE sv_nodom5.cleanup
520|0 1 25410 1 139|PASSED 
520|0 1 25410 1 140|GDSSETUP: TEST CASE sv_nodom6
520|0 1 25410 1 141|<gdssetup> gave exit code: 37
520|0 1 25410 1 142|FAILED 
520|0 1 25410 1 143|GDSSETUP: TEST CASE sv_nodom6.cleanup
520|0 1 25410 1 144|PASSED 
520|0 1 25410 1 145|GDSSETUP: TEST CASE end.setup
520|0 1 25410 1 146|PASSED 
220|0 1 7 10:04:35|NORESULT
410|0 1 1 10:04:36|IC End
400|0 2 1 10:04:37|IC Start
200|0 1 10:04:37|TP Start
520|0 1 25410 1 2|GDSSETUP: TEST CASE client1
520|0 1 25410 1 3|<gdssetup> gave exit code: 44
520|0 1 25410 1 4|FAILED 
520|0 1 25410 1 5|GDSSETUP: TEST CASE client2
520|0 1 25410 1 6|<gdssetup> gave exit code: 44
520|0 1 25410 1 7|FAILED 
520|0 1 25410 1 8|GDSSETUP: TEST CASE client3
520|0 1 25410 1 9|<gdssetup> gave exit code: 67
520|0 1 25410 1 10|FAILED 
520|0 1 25410 1 11|GDSSETUP: TEST CASE client4
520|0 1 25410 1 12|<gdssetup> gave exit code: 65
520|0 1 25410 1 13|FAILED 
520|0 1 25410 1 14|GDSSETUP: TEST CASE client5
520|0 1 25410 1 15|<gdssetup> gave exit code: 126
520|0 1 25410 1 16|FAILED 
520|0 1 25410 1 17|GDSSETUP: TEST CASE client5.cleanup
520|0 1 25410 1 18|PASSED 
520|0 1 25410 1 19|GDSSETUP: TEST CASE server1
520|0 1 25410 1 20|<gdssetup> gave exit code: 41
520|0 1 25410 1 21|FAILED 
520|0 1 25410 1 22|GDSSETUP: TEST CASE server2
520|0 1 25410 1 23|<gdssetup> gave exit code: 44
520|0 1 25410 1 24|FAILED 
520|0 1 25410 1 25|GDSSETUP: TEST CASE server3
520|0 1 25410 1 26|<gdssetup> gave exit code: 30
520|0 1 25410 1 27|FAILED 
520|0 1 25410 1 28|GDSSETUP: TEST CASE server4
520|0 1 25410 1 29|<gdssetup> gave exit code: 31
520|0 1 25410 1 30|FAILED 
520|0 1 25410 1 31|GDSSETUP: TEST CASE server5
520|0 1 25410 1 32|<gdssetup> gave exit code: 7
520|0 1 25410 1 33|FAILED 
520|0 1 25410 1 34|GDSSETUP: TEST CASE sv_domdef1
520|0 1 25410 1 35|<gdssetup> gave exit code: 126
520|0 1 25410 1 36|FAILED 
520|0 1 25410 1 37|GDSSETUP: TEST CASE sv_domdef2
520|0 1 25410 1 38|<gdssetup> gave exit code: 126
520|0 1 25410 1 39|FAILED 
520|0 1 25410 1 40|GDSSETUP: TEST CASE sv_domdef2.cleanup
520|0 1 25410 1 41|PASSED 
520|0 1 25410 1 42|GDSSETUP: TEST CASE sv_domdef3
520|0 1 25410 1 43|<gdssetup> gave exit code: 126
520|0 1 25410 1 44|FAILED 
520|0 1 25410 1 45|GDSSETUP: TEST CASE sv_domdef3.cleanup
520|0 1 25410 1 46|PASSED 
520|0 1 25410 1 47|GDSSETUP: TEST CASE sv_domdef4
520|0 1 25410 1 48|<gdssetup> gave exit code: 126
520|0 1 25410 1 49|FAILED 
520|0 1 25410 1 50|GDSSETUP: TEST CASE sv_domdef4.cleanup
520|0 1 25410 1 51|PASSED 
520|0 1 25410 1 52|GDSSETUP: TEST CASE sv_domdef5
520|0 1 25410 1 53|<gdssetup> gave exit code: 126
520|0 1 25410 1 54|FAILED 
520|0 1 25410 1 55|GDSSETUP: TEST CASE sv_domdef5.cleanup
520|0 1 25410 1 56|PASSED 
520|0 1 25410 1 57|GDSSETUP: TEST CASE sv_domdef6
520|0 1 25410 1 58|<gdssetup> gave exit code: 126
520|0 1 25410 1 59|FAILED 
520|0 1 25410 1 60|GDSSETUP: TEST CASE sv_domdef6.cleanup
520|0 1 25410 1 61|PASSED 
520|0 1 25410 1 62|GDSSETUP: TEST CASE sv_domnodef1
520|0 1 25410 1 63|<gdssetup> gave exit code: 126
520|0 1 25410 1 64|FAILED 
520|0 1 25410 1 65|GDSSETUP: TEST CASE sv_domnodef1.cleanup
520|0 1 25410 1 66|PASSED 
520|0 1 25410 1 67|GDSSETUP: TEST CASE sv_domnodef2
520|0 1 25410 1 68|<gdssetup> gave exit code: 126
520|0 1 25410 1 69|FAILED 
520|0 1 25410 1 70|GDSSETUP: TEST CASE sv_domnodef2.cleanup
520|0 1 25410 1 71|PASSED 
520|0 1 25410 1 72|GDSSETUP: TEST CASE sv_domnodef3
520|0 1 25410 1 73|<gdssetup> gave exit code: 126
520|0 1 25410 1 74|FAILED 
520|0 1 25410 1 75|GDSSETUP: TEST CASE sv_domnodef3.cleanup
520|0 1 25410 1 76|PASSED 
520|0 1 25410 1 77|GDSSETUP: TEST CASE sv_domnodef4
520|0 1 25410 1 78|<gdssetup> gave exit code: 126
520|0 1 25410 1 79|FAILED 
520|0 1 25410 1 80|GDSSETUP: TEST CASE sv_domnodef4.cleanup
520|0 1 25410 1 81|PASSED 
520|0 1 25410 1 82|GDSSETUP: TEST CASE sv_domnodef5
520|0 1 25410 1 83|<gdssetup> gave exit code: 126
520|0 1 25410 1 84|FAILED 
520|0 1 25410 1 85|GDSSETUP: TEST CASE sv_domnodef5.cleanup
520|0 1 25410 1 86|PASSED 
520|0 1 25410 1 87|GDSSETUP: TEST CASE sv_nodom1
520|0 1 25410 1 88|<gdssetup> gave exit code: 126
520|0 1 25410 1 89|FAILED 
520|0 1 25410 1 90|GDSSETUP: TEST CASE sv_nodom1.cleanup
520|0 1 25410 1 91|PASSED 
520|0 1 25410 1 92|GDSSETUP: TEST CASE sv_nodom2
520|0 1 25410 1 93|<gdssetup> gave exit code: 126
520|0 1 25410 1 94|FAILED 
520|0 1 25410 1 95|GDSSETUP: TEST CASE sv_nodom2.cleanup
520|0 1 25410 1 96|PASSED 
520|0 1 25410 1 97|GDSSETUP: TEST CASE sv_nodom3
520|0 1 25410 1 98|<gdssetup> gave exit code: 126
520|0 1 25410 1 99|FAILED 
520|0 1 25410 1 100|GDSSETUP: TEST CASE sv_nodom3.cleanup
520|0 1 25410 1 101|PASSED 
520|0 1 25410 1 102|GDSSETUP: TEST CASE sv_nodom4
520|0 1 25410 1 103|<gdssetup> gave exit code: 126
520|0 1 25410 1 104|FAILED 
520|0 1 25410 1 105|GDSSETUP: TEST CASE sv_nodom4.cleanup
520|0 1 25410 1 106|PASSED 
520|0 1 25410 1 107|GDSSETUP: TEST CASE sv_nodom5
520|0 1 25410 1 108|<gdssetup> gave exit code: 126
520|0 1 25410 1 109|FAILED 
520|0 1 25410 1 110|GDSSETUP: TEST CASE sv_nodom5.cleanup
520|0 1 25410 1 111|PASSED 
220|0 1 7 10:40:07|NORESULT
410|0 2 1 10:40:08|IC End
520|0 0 25410 1 1|GDSSETUP TEST ENDED
80|0 0 10:40:22|TC End
70||"FINISHED all TESTS using <gdssetup>"
900|10:40:22|TCC End

[8/16/94 public]
Fixed with OT11585 (addition of exit(0)).

[8/17/94 public]
Re-opened.  Results from last night's build on an HP:

Results of GDSSETUP Tests:  Wed Aug 17 13:32:59 EDT 1994
---------------------------------------------------

User: zeliff (0) TCC Start, Command Line: /dcetest/dcelocal/test/tet/bin/tcc -e functional/directory/gds gdssetup 
"STARTING all TESTS using <gdssetup>"

TC Start, scenario ref 49-1

<begin.setup> gave exit code: 4 -> FAILED 
<gdssetup> gave exit code: 44 -> FAILED 
<gdssetup> gave exit code: 44 -> FAILED 
<gdssetup> gave exit code: 67 -> FAILED 
<gdssetup> gave exit code: 65 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 41 -> FAILED 
<gdssetup> gave exit code: 44 -> FAILED 
<gdssetup> gave exit code: 30 -> FAILED 
<gdssetup> gave exit code: 31 -> FAILED 
<gdssetup> gave exit code: 7 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
GDSSETUP: TEST CASE sv_domdef5.cleanup -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
GDSSETUP: TEST CASE sv_domdef6.cleanup -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
GDSSETUP: TEST CASE sv_domnodef5.cleanup -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
GDSSETUP: TEST CASE sv_nodom5.cleanup -> FAILED 
"FINISHED all TESTS using <gdssetup>"
TCC End

------------------------------

Total PASSED =  12
Total FAILED =  31

[08/19/94 public]
Fix submitted.

[8/23/94 public]
Fixed via FVT.



CR Number                     : 11526
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : fvt
Short Description             : incorrect ordering of testcase results
Reported Date                 : 8/2/94
Found in Baseline             : 1.1
Found Date                    : 8/2/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : gdssetup_all
Sensitivity                   : public

[8/2/94 public]

The cleanup() routine in the gdssetup_all testsuite collects the results
logs of the individual testcases into one consolidated log.  It uses the
following process to collect the logs:

        for xfile in `ls valid*.log`
        do
           echo "" >> $OUTDIR/gdssetup_valid.log
           echo "---> Start of  $xfile" >> $OUTDIR/gdssetup_valid.log 
           echo "" >> $OUTDIR/gdssetup_valid.log
           cat -s $xfile >> $OUTDIR/gdssetup_valid.log
        done

This, however, results in the <testcase>.cleanup log being copied before
the the actual testcase log.  The logic should be:

	for testcase in `cat lib/valid/TESTCASES`
	do
		xfile="$testcase.log"
		echo "" >> $OUTDIR/gdssetup_valid.log
	        echo "---> Start of  $xfile >> $OUTDIR/gdssetup_valid.log 
                echo "" >> $OUTDIR/gdssetup_valid.log
                cat -s $xfile >> $OUTDIR/gdssetup_valid.log
	done

This will result in the consolidated log file being created in the same
order the testcases were run.

[08/19/94 public]
Fix submitted.

[8/29/94 public]
Verified via FVT.



CR Number                     : 11525
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : fvt filter
Short Description             : gdssetup filter should
identify failing testcase
Reported Date                 : 8/2/94
Found in Baseline             : 1.1
Found Date                    : 8/2/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b15
Affected File(s)              : test/functional/directory/gds/ts/lib/shfuncs
Sensitivity                   : public

[8/2/94 public]
The journal.log prodcued by TET_filter.gdssetup shows only the following
for failing testcases.  It should identify each testcase that failed.

Results of GDSSETUP Tests:  Tue Aug  2 10:41:05 EDT 1994
---------------------------------------------------

User: zeliff (0) TCC Start, Command Line: /dcetest/dcelocal/test/tet/bin/tcc -e functional/directory/gds gdssetup 
"STARTING all TESTS using <gdssetup>"

TC Start, scenario ref 49-1

<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 37 -> FAILED 
<gdssetup> gave exit code: 44 -> FAILED 
<gdssetup> gave exit code: 44 -> FAILED 
<gdssetup> gave exit code: 67 -> FAILED 
<gdssetup> gave exit code: 65 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 41 -> FAILED 
<gdssetup> gave exit code: 44 -> FAILED 
<gdssetup> gave exit code: 30 -> FAILED 
<gdssetup> gave exit code: 31 -> FAILED 
<gdssetup> gave exit code: 7 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
<gdssetup> gave exit code: 126 -> FAILED 
"FINISHED all TESTS using <gdssetup>"
TCC End

------------------------------

Total PASSED =  45
Total FAILED =  55

[08/19/94 public]
Fix submitted.

[8/23/94 public]
Verified via FVT.



CR Number                     : 11511
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dced
Short Description             : DCDREL002 can't find included .tcl file
Reported Date                 : 8/1/94
Found in Baseline             : 1.1b13
Found Date                    : 8/1/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b21
Affected File(s)              : dcdrel002.tcl
Sensitivity                   : public

[8/1/94 public]

When DCDREL002 is run on a remote node, it cannot find the 
included file dcd_st_utils.tcl. The path used needs to be fixed
to match up to the path used in the other .tcl files.

[10/05/94 public]

Modified file to use environment variable defining location of
the tests.



CR Number                     : 11509
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dced
Short Description             : HYP: Acl management portion of dcdrel003 reports "acl object not found"
Reported Date                 : 8/1/94
Found in Baseline             : 1.1b13
Found Date                    : 8/1/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b21
Affected File(s)              : DCDREL003*
Sensitivity                   : public

[8/1/94 public]

The acl management test portion of DCDREL003 requires setup which has not 
yet been incorporated into the test.

[8/2/94 public]
The script ./test/systest/admin/dced/ts/lib/run_setup.sh can be run to
do the neccesary setup.  It invokes (as root/self) a TCL script to
set ACL's and add CDS directories.

[10/4/94 public]
This work is needed to make this test useful before final code freeze.
Raised priority.

[10/4/94 public]
Rick fixed this, marking as such.



CR Number                     : 11498
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : sec
Subcomponent Name             : passwd_override
Short Description             : passwd_override bourne shell
test getting syntax error
Reported Date                 : 7/29/94
Found in Baseline             : 1.1b13
Found Date                    : 7/29/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : passwd_override,passwd_override.sh
Sensitivity                   : public

[7/29/94 public]

The passwd_override.sh FVT has syntax errors at each reference
to an "if [ $x -ne $y ] " type conditional in the function
check_status.  This occurs only on 486 whose Bourne shell
doesn't like -ne with strings.  I think '!=' will work on
486 and HP bourne shell in this case.

The test does not report this as a failure and is erroneously
reporting SUCCESS.

[7/29/94 public]
Mistakenly reported the problem with passwd_import.sh when it is
actually with passwd_override.sh.  Changed all references import->override

[7/9/94 public]
The problems found are the following.
1 Use of -ne instead of != for string comparisons.
  (as described in the CR).
2 Only arguments $1-$9 are directly accessible from
  a shell function, as check_status (at least on 486).
  A valid $10 is always evaluated to "00" causing failure.
3 sed filters are space sensitive and do not match the
  output of binlogin causing failures
4 Mismatches between passwd_override.sh and passwd_override
  files causes tests failures.



CR Number                     : 11486
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : 
Short Description             : audrel001 killing auditd before dcecp
Reported Date                 : 7/29/94
Found in Baseline             : 1.1b13
Found Date                    : 7/29/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : audrel001.c
Sensitivity                   : public

[7/29/94 public]


Audit daemon is being killed in audstr001 before
dcecp gets a chance to examine the trail.

[8/22/94 public]

Closed, also use this particular CR to test out
OT's updating ability after today's reboot.



CR Number                     : 11476
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : 
Short Description             : dlg_client test failing distributed
Reported Date                 : 7/28/94
Found in Baseline             : 1.1b11
Found Date                    : 7/28/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : dlg_client.c, dlg_intermediary.c
Sensitivity                   : public

[7/28/94 public]

I know I tried the dlg_client test yesterday, however, when
I ran the initiator on node1, the delegate on node 2,
and the target on node 3, today I am getting the same error message:

FAILED: Delegation test; Error from rpc_binding_set_auth_info: 
connection request rejected (dce / rpc)

The test consistently fails on rpc_binding_set_auth_info.
I doubled checked my configuration.
I don't know why this worked yesterday and not today.

The test works fine if I run it with the client on one node
and the delegate and server on the other node.
It only fails when the client, delegate and target are on
different nodes.

I have assigned this bug to myself for further investigation.
However, Mike if you have any information about why this
might be failing in a disributed mode, that would be very helpful.
It would be useful if someone else can try this and see if they
get the same failure.

[7/28/94 public]

Added max to the interest list.
Max, could you put the information you find out about
this problem here? Thanks.

[7/28/94 public]

It seems like the problem is in the communication between
the initiator and the delegate because the delegate
never reacts when I get this error message.
Even when I have debugging turned on in the delegate.
I still don't know what exactly is causing this problem.

[7/29/94 public]

The test failure is now reproducable.
The first time you configure a cell and
you try the test, it works on any three nodes.
However, if you then bring down the intermediary and
start the intermediary on a different node,
the dlg_client test always fails.  
I talked to Rob and Max about the problem
and Max will investigate further.

Tried rpc_ns_mgmt_set_exp_age(0, &status); in the client
after rpc_ns_binding_import_begin(), but before the call to
rpc_ns_binding_import_next();  This didn't fix the problem
though.  However, it changed the error message:

FAILED: Delegation test; Error from rpc_binding_set_auth_info: 
communications failure (dce / rpc)

[8/01/94 public]

Moved rpc_ns_mgmt_set_exp_age to the beginning of bind_to_svr
function, before any rpc_ns calls and this fixed the problem.
Also added rpc_ns_mgmt_entry_delete to dlg_intermediary
to make sure the /.:/dlg_test entry is deleted.
Rob/Max, I believe this problem is fixed now.



CR Number                     : 11460
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gdscp
Short Description             : unnecessary script gdscp
Reported Date                 : 7/27/94
Found in Baseline             : 1.1b12
Found Date                    : 7/27/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : test/functional/directory/gds/ts/gdscp/gdscp
Sensitivity                   : public

[7/27/94 public]
test/functional/directory/gds/ts/gdscp/gdscp has to be defuncted.
It is not used any more (has been replaced by gdscp_all).



CR Number                     : 11448
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : era
Short Description             : failures in some era tests
Reported Date                 : 7/26/94
Found in Baseline             : 1.1b12
Found Date                    : 7/26/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : schema_*.tcl, pgo_*_era_*.tcl
Sensitivity                   : public

[7/26/94 public]

Some of the test cases submitted for the "schema" command need to
be completed.  All test problems are combined into one bug to
save time, but separate bugs are open for the code causing the
test problems as well..

   1. When support for generic schema name support is added to the
      schema command, a few of the tests will change from N to P, or
      will have their expected output change.  The tests that will
      have to changed are well commented in the test files themselves.
      This will effect all schema commands (show, catalog, create,
      modify, delete, rename).

   2. Two tests in schema create FAIL due to an open security bug,
      dealing with recognition of the encoding type stringarray.
      When the security bug is fixed, the two tests (9P, 10P) will
      both pass.

   3. Four tests are missing in the schema create negative test file.
      Including these tests cause dcecp to core dump.  When the
      problem is fixed in dcecp, the tests 32N, 39N, 40N and 41N
      should be added to the test file.

   4. The underlying functionality for all aspects of schema catalog,
      schema rename, and schema modify is currently missing.  The
      P tests for these were written to the best extent possible, but
      when the functionality arrives, these tests should be checked
      closely.

[8/17/94 public]

Problems 2 and 3 above have been fixed.  The schema catalog part of
number 4 has also been fixed.  We are still waiting on generic schema
support and the modify api before the tests can be completed.

[8/24/94 public]

The api call to support schema modify will not be completed by the
end of this week, so the best we will get from our schema modify
tests is "unsupported".  Submits were made to change "schema" to
"xattrschema" in all cases, thus partially completing problem 1 above.

[8/26/94 public]

Support in the schema tests was added today for generic schema calls.
Some tests that were N tests were changed to P and the messages in
other N tests were updated to reflect the new functionality.  The
pgo modify_era N and P tests were also submitted, although the P
tests are not complete.  I'll mark this bug fixed, as the initial
problems in this bug are fixed.  However, I will also open another
bug to track some of the current era test deficiencies in more
detail.

[9/26/94 public]
closed.



CR Number                     : 11438
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : test.mk
Short Description             : test.mk contains old gds (ros) stuff
Reported Date                 : 7/26/94
Found in Baseline             : 1.1
Found Date                    : 7/26/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : src/test/test.mk
Sensitivity                   : public

[7/26/94 public]

test.mk contains:

.if ${MAKESUB}=="test/directory/gds/ros/testenv/"
  RIOS_LIBS     ?= -lxti
.endif

I'd like to delete this - ros/testenv doesn't exist.

[08/04/94 public]
Submitted on 1994/07/27.



CR Number                     : 11432
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : xds tet_scen
Short Description             : all_no_switch scenario should be in tet_scen
Reported Date                 : 7/26/94
Found in Baseline             : 1.1
Found Date                    : 7/26/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : tet_scen
Sensitivity                   : public

[7/26/94 public]

The test scenario all_no_switch disappeared from the XDS tet_scen with
the last submit from SNI Munich. It should be reintroduced.

[8/2/94 public]
verified by manual inspection



CR Number                     : 11428
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : test
Short Description             : cleanup dlg_client
Reported Date                 : 7/25/94
Found in Baseline             : 1.1
Found Date                    : 7/25/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : dlg_client.c, README
Sensitivity                   : public

[7/25/94 public]


Cleanup the dlg_client test in src/security/api/moretests

- Add README file for functional test
- Describe negative tests in README
- Differentiate return codes between nbi and dis
- Add negative testcase acl setup script
- code changes such that negative
testcases that run correctly (ie. access is denied)
report PASSED because this is the expect result. 
- Correct messages from -dt i and <no option> runs of dlg_client

[8/01/94 public]

Fixed, built and run  on a nightly build successfully.

[8/04/94 public]

I noticed that the Negative delegation test wasn't checking
the value of the return code from dlg_test_access.
I'll make the fix to dlg_client.c

[8/24/94 public]

Test update



CR Number                     : 11417
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : gds
Subcomponent Name             : fvt
Short Description             : switch test syntax error
Reported Date                 : 7/25/94
Found in Baseline             : 1.1
Found Date                    : 7/25/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : local_.TET.admin
                                             local_TET.api
Sensitivity                   : public

[7/25/94 public]

While running 'all' XDS tests:

  Run_Switch_Test switch_all_ST
  Configure DCE using cell_name:  c=ie\/o=digital
  Run_Switch_Test[4]: dce_config:  not found.
  
  Message from <local_TET.admin> 
	  dce_config returned with ERROR - STOP
  
'dce_config' should be an absolute path (/etc/dce_config)

[7/26/94 public]
NO!! The person who runs the tests must set the PATH to find the
executables. You are expecting that each machine has the
same structure of the executables.
Please downgrade or cancel.

[8/11/94 public]
I disagree.  There isn't a particular reason why you would expect /etc to
be on root's path -- this tends to be OS dependent. If you don't want to
prefix dce_config with /etc, /opt/dcelocal/bin would be a workable
substitute.

[8/11/94 public]
My mistake, this was, indeed, fixed.  Verified by inspection.



CR Number                     : 11407
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : systest
Subcomponent Name             : 
Short Description             : DCDREL001 test client gets rpc_s_unknown_stub_rtl_if_vers error
Reported Date                 : 7/23/94
Found in Baseline             : 1.1b13
Found Date                    : 7/23/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b14
Affected File(s)              : unknown
Sensitivity                   : public

[7/23/94 public]

When DCDREL001 is run on an HPUX platform the test client aborts
with a Signal 6 after reporting the following: 

Exception: interface's stub/runtime version is unknown (dce / rpc)

The same sources compile and run without this problem on the OSF/1
platform. The problem is believed to be related to compilation 
warnings which occur when the test is built on the HP platform.

[8/22/94 public]

This error went away in BL14. I had believed it to be a problem
in the test, but now thinks its more likely to have actually 
been due to some underlying problem in dce which was fixed. 
Since it hasn't recurred in BL14.x or Bl15, I'm closing it.



CR Number                     : 11403
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dced
Short Description             : Please don't link with libdceutils
Reported Date                 : 7/23/94
Found in Baseline             : 1.1
Found Date                    : 7/23/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b17
Affected File(s)              : dcdrel001/Makefile
Sensitivity                   : public

[7/23/94 public]
libdceutils is in libdce, please don't link with both. This extra
link has prevented me not building libdceutils.a.

[8/30/94 public]
Modified Makefile as requested.



CR Number                     : 11402
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : utils
Subcomponent Name             : acl/db fvt
Short Description             : Makefile has extra -ldceutils
Reported Date                 : 7/23/94
Found in Baseline             : 1.1
Found Date                    : 7/23/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : test/dce/utils/acldb/ts/acl/Makefile test/dce/utils/acldb/ts/db/Makefile dce/utils/misc/Makefile
Sensitivity                   : public

[7/23/94 public]

acl and db functional test Makefiles has linked with both libdce and
libdceutils, but the latter is in libdce. So it's unuseful to link
with both libraries and prevent us not building libdceutil.a.

[08/26/94 public]
You're right Ping.  Can you fix?  Tnx.

[9/2/94 public]
Submitted.



CR Number                     : 11385
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : era
Short Description             : HYP: need ERA systests
Reported Date                 : 7/21/94
Found in Baseline             : 1.1
Found Date                    : 7/21/94
Severity                      : B
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : test/systest/security/dceseacl,era.functions,sec.functions,era.data
Sensitivity                   : public

[7/21/94 public]

Need to add ERA systests to dce1.1 tree.  The first submission will
cover tests in current state - written and debugged to the point of
not using any of the dcecp schema functionality (not in b-11 which
they were last run against). Future submissions needed to verify
behavior.

[8/25/94 public]
Updates need to be made to test to reflect name change to xattrschema
and to use real output as it has become implemented.

[9/7/94 public]
Updated priority to show we need some more udpates for 1.1, mostly
to catch up with final changes to dcecp syntax/output and fine tuning
test run once all blocking bugs are passed.

[10/3/94 public]
changed priority to 0 to indicate should be done for 1.1 release

[10/3/94 public]

On hypercritical list...



CR Number                     : 11379
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : 
Short Description             : move acl_edit/svr_example to test area
Reported Date                 : 7/21/94
Found in Baseline             : 1.1
Found Date                    : 7/21/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : svr_example
Sensitivity                   : public

[7/21/94 public]

Move src/security/client/admin/acl_edit/svr_example to
src/test/security/acl_edit/svr_example since svr_example
is being used by the functional and system tests.

[7/21/94 public]

Sorry, accidentally made this a dupe.  It has now been brought back to
life.



CR Number                     : 11363
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : secd
Short Description             : core smoketest hung ( secd core dumping, core was mangled)
Reported Date                 : 7/20/94
Found in Baseline             : 1.1
Found Date                    : 7/20/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : kdc_preauth.c
Sensitivity                   : public

[7/20/94 public]


Core Smoketest hung


Output from core smoketest

sif/u1/RAT_tools/do_automatic_test.log

S:****** Starting cdsd...

sif/u1/RAT_tools/run_commands.log

Sorry.
User Identification Failure. - Registry server unavailable (dce / sec)

sif:/tmp/dce_config.log

S:****** Starting cdsd...
D:         Executing: cdsd -a

[7/20/94 public]

secd is gone.  Happens on HP as well.  Last attempt to recreate left a
mangled core.  Will re-try on HP again to attempt to get good core.

NOTE: OT 11365 is another secd core dump but this is happening after
the cell is up and a good core was recovered.  Until we know its the same
problem, I'd rather leave them as 2 CR's....

[7/20/94 public]
Perhaps obvious, but... we need more information before anyone here
can even begin to take a look at this one.

[7/20/94 public]


We reran the core smoketest for a third time on sif and obtained
more concrete info. It should be noted that these errors were
not consistent across the three tests done today on sif. The other two
hung (no output for 15 minutes or more) after starting the cdsd. 

1994-07-20-10:38:11.687-04:00I----- cdsclerk(728) ERROR cds general clerk_bind.c 483 0x004e7d88
Routine rpc_binding_set_auth_info(3rpc) failed : status = 387063931.
1994-07-20-10:38:47.694-04:00I----- cdsclerk(728) ERROR cds general clerk_bind.c 483 0x004e7d88
Routine rpc_binding_set_auth_info(3rpc) failed : status = 387063931.
1994-07-20-10:39:23.691-04:00I----- cdsclerk(728) ERROR cds general clerk_bind.c 483 0x004e7d88
Routine rpc_binding_set_auth_info(3rpc) failed : status = 387063931.
1994-07-20-10:39:59.688-04:00I----- cdsclerk(728) ERROR cds general clerk_bind.c 483 0x004e7d88
Routine rpc_binding_set_auth_info(3rpc) failed : status = 387063931.
1994-07-20-10:40:35.695-04:00I----- cdsclerk(728) ERROR cds general clerk_bind.c 483 0x004e7d88
Routine rpc_binding_set_auth_info(3rpc) failed : status = 387063931.
1994-07-20-10:41:11.692-04:00I----- cdsclerk(728) ERROR cds general clerk_bind.c 483 0x004e7d88
Routine rpc_binding_set_auth_info(3rpc) failed : status = 387063931.
1994-07-20-10:41:47.689-04:00I----- cdsclerk(728) ERROR cds general clerk_bind.c 483 0x004e7d88
Routine rpc_binding_set_auth_info(3rpc) failed : status = 387063931.
1994-07-20-10:42:23.696-04:00I----- cdsclerk(728) ERROR cds general clerk_bind.c 483 0x004e7d88
Routine rpc_binding_set_auth_info(3rpc) failed : status = 387063931.
1994-07-20-10:42:59.693-04:00I----- cdsclerk(728) ERROR cds general clerk_bind.c 483 0x004e7d88
Routine rpc_binding_set_auth_info(3rpc) failed : status = 387063931.
1994-07-20-10:43:35.690-04:00I----- cdsclerk(728) ERROR cds general clerk_bind.c 483 0x004e7d88
Routine rpc_binding_set_auth_info(3rpc) failed : status = 387063931.
1994-07-20-10:44:11.687-04:00I----- cdsclerk(728) ERROR cds general clerk_bind.c 483 0x004e7d88
Routine rpc_binding_set_auth_info(3rpc) failed : status = 387063931.
1994-07-20-10:44:47.694-04:00I----- cdsclerk(728) ERROR cds general clerk_bind.c 483 0x004e7d88
Routine rpc_binding_set_auth_info(3rpc) failed : status = 387063931.
1994-07-20-10:45:23.692-04:00I----- cdsclerk(728) ERROR cds general clerk_bind.c 483 0x004e7d88
Routine rpc_binding_set_auth_info(3rpc) failed : status = 387063931.
1994-07-20-10:45:23.702-04:00I----- cdsd(727) FATAL cds server dns_service_ncl.c 534 0xa447fc70
Can't read root replica, status =  DNS_NOCOMMUNICATION
ERROR:   cdsd failed to start
+ cd /u1/RAT_tools
+ rm -f /u1/RAT_tools/run_commands.log
+ /u1/opt/dcelocal/bin/dce_login cell_admin -dce- -exec /u1/RAT_tools/run_commands
+ 1> /u1/RAT_tools/run_commands.log
+ cat /u1/RAT_tools/run_commands.log
Sorry.
User Identification Failure. - Registry server unavailable (dce / sec)
+ + hostname

[7/20/94 public]
Unfortunately, this addt'l info doesn't add too much to the picture.
status = 387063931. is 'Registry Server Unavail.' ie, secd has crashed.

I have been trying to get a good core dump on this one.  The problem
occurs everytime on 486 at config, gdb core is mangled.  I will try
to build a full symbol secd on 486 tonight.

The HP core is periodic and almost nonsense.  Finally got one that
has a normal looking stack, although this looks like simple
startup code to me.....

 1 _raise@libc + 0x00000024 (0x6c696420, 0x696e7661, 0x62202d20, 0x32323030)
 2 _abort@libc + 0x00000078 (0x40035c80, 0, 0, 0)
 3 rs_task_fatal + 0x0000002c (0x1712200b, 0x3, 0x1, 0x11ed2286)
 4 go_away + 0x00000034 (0x1712200b, 0x4030fe20, 0x8c, 0x402)
 5 rs_util_fatal_st + 0x00000124 (0x1712200b, 0x4030fe20, 0x40004c4c, 0x203)
 6 rs_ns_server_register + 0x00000370 (0x4030f0e0, 0x7af5a068, 0x4004d870, 0x14)
 7 cma__thread_base@libdce + 0x0000021c (0x4004d870, 0, 0, 0)

[7/20/94 public]
Another occurrence of a crash from last night's nightly build on an HP
during cell config.  

The stack below looks very similar if not identical to the one reported 
in OT 11342 which was closed with a one line fix to kdc_preauth.c.  This
seems very strange.  The stack and add'l info follow:

 0 free@libc + 0x00000008 (hp-ux export stub)
 1 cma_lib_free@libdce + 0x00000284 (0x40035c80, 0x40049fe0, 0, 0)
 3 cma_lib_free@libdce + 0x00000284 (0x40035c80, 0x40460588, 0x40460568, 0)
 4 cma_lib_free@libdce + 0x00000148 (0x40309078, 0x40253f10, 0x4002ae6a, 0x14)
 5 third_party_padata + 0x00000b90 (0x40253c20, 0x4037d8c8, 0x40253f10, 0x1ff09c
0)
 6 check_padata_type + 0x0000005c (0x40253c20, 0x403ec7f8, 0x4037d8c8, 0x40253ee
8)
 7 process_as_req + 0x00001718 (0x403e6840, 0x40252b48, 0x40252b68, 0)
 8 dispatch + 0x0000036c (0x40252b60, 0x40252b48, 0x40252b68, 0x403e208c)
 9 rsec_krb5rpc_sendto_kdc + 0x00000100 (0x4045e488, 0x27f, 0x4045fdc0, 0x1000)
10 op0_ssr + 0x0000021c (0x4045e488, 0x4045c490, 0x4025253c, 0x40252520)
11 rpc__dg_execute_call@libdce + 0x00001ba4 (0x4045c490, 0, 0, 0)
12 cthread_call_executor@libdce + 0x000002d4 (0x4016de58, 0x7af5a068, 0x40049fe0
, 0xf)
13 cma__thread_base@libdce + 0x0000021c (0x40049fe0, 0, 0, 0)
14 cma__thread_start1@libdce + 0x0000004c (0x40049fe0, 0, 0, 0)
15 cma__thread_start0@libdce + 0x00000008 (0x40049fe0, 0, 0, 0)
16 cma__thread_start0@libdce + 0x00000008 (0x40049fe0, 0, 0, 0)

>lr $a
$arg0     = 0x40309078
$arg1     = 0x1
$arg2     = 0x400b9d68
$arg3     = 0
>lr $r
$r0       = 0
$r1       = 0x24b5
$r2       = 0x800b27c3
$r3       = 0x7b0127b0
$r4       = 0x2
$r5       = 0x40309074
$r6       = 0
$r7       = 0x652d7264
$r8       = 0
$r9       = 0
$r10      = 0
$r11      = 0
$r12      = 0
$r13      = 0
$r14      = 0
$r15      = 0
$r16      = 0
$r17      = 0
$r18      = 0
$r19      = 0x7b007948
$r20      = 0x177dc000
$r21      = 0x800b27b8
$r22      = 0x7afeef98
$r23      = 0
$r24      = 0x400b9d68
$r25      = 0x1
$r26      = 0x40309078
$r27      = 0x4002c7c0
$r28      = 0x177db009
$r29      = 0x4045e855
$r30      = 0x402545a0
$r31      = 0x812063cf
$ret0     = 0x177db009
$ret1     = 0x4045e855
>p *($pc-16)\20i
0x800b27b0  BV  0(2)
0x800b27b4  LDWM        -192(0,30),3
0x800b27b8  BL  _fp_status+0018,2
0x800b27bc  OR  0,0,0
0x800b27c0  LDW -24(0,30),2
0x800b27c4  LDSID       (0,2),1
0x800b27c8  MTSP        1,0
0x800b27cc  BE,N        0(0,2)
0x800b27d0  STW 2,-20(0,30)
0x800b27d4  STWM        3,192(0,30)
0x800b27d8  STW 4,-188(0,30)
0x800b27dc  STW 5,-184(0,30)
0x800b27e0  STW 6,-180(0,30)
0x800b27e4  STW 7,-176(0,30)
0x800b27e8  STW 8,-172(0,30)
0x800b27ec  STW 9,-168(0,30)
0x800b27f0  OR  26,0,4
0x800b27f4  STW 19,-32(0,30)
0x800b27f8  COMIBT,=    0,26,_fp_status+026c
0x800b27fc  OR  0,0,6

[7/21/94 public]
Maryann Hondo and Rob Baum looking at this.

[7/22/94 public]
Submitted change to nightly.  Marked fix.



CR Number                     : 11359
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : aud
Subcomponent Name             : functional test
Short Description             : CR 11298 changed exported i/f name
Reported Date                 : 7/19/94
Found in Baseline             : 1.1
Found Date                    : 7/19/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : restorelogperm setaclnologperm auditd_acl
Sensitivity                   : public

[7/19/94 public]
Tests have to follow suite with the exported name changes done with CR 11298.

[7/21/94 public]
fixed.



CR Number                     : 11357
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : sinix
Component Name                : gds
Subcomponent Name             : tet
Short Description             : `hostname` not found
Reported Date                 : 7/19/94
Found in Baseline             : 1.1
Found Date                    : 7/19/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b15
Affected File(s)              : see list below
Sensitivity                   : public

[7/19/94 public]

Running tetized tests on SVR4 the following happens:

./local_TET.api[132]: hostname:  not found

...


`hostname` is /usr/ucb/hostname on SVR4;

/usr/ucb is not in the normal PATH for root on SVR4.

[8/2/94 public]
What was the fix for this defect?  I can't find any obvious change related
to this in the source code.

[8/2/94 public]
See PATH. It has the new component /usr/ucb .

[8/11/94 public]
instead of hostname, try uname -n.  hostname is BSD.

the HP man page for uname says:

STANDARDS CONFORMANCE
     uname:SVID2,XPG2,XPG3,POSIX.2

[8/12/94 public]
Howard is right. Reopened. hostname is used in the following files:
	src/test/functional/directory/gds/tools/local_TET.admin
	src/test/functional/directory/gds/ts/config/config.env.sed
	src/test/functional/directory/xds/tools/local_TET.api
	src/test/functional/directory/xds/ts/mhs/mhs_st
	src/test/functional/directory/xds/ts/scripts/TEST
	src/test/functional/directory/xds/ts/scripts/_testall
	src/test/functional/directory/xds/ts/scripts/_ttestall
	src/test/functional/directory/xds/ts/scripts/result
	src/test/functional/directory/xds/ts/switch/switch_DNS
	src/test/functional/directory/xds/ts/switch/switch_mt
	src/test/functional/directory/xds/ts/switch/switch_st
	src/test/functional/directory/xds/ts/xds/xds_mt
	src/test/functional/directory/xds/ts/xds/xds_st
	src/test/functional/directory/xds/ts/xom/xom_mt
	src/test/functional/directory/xds/ts/xom/xom_st
	src/test/functional/directory/xds/ts/xoms/xoms_mt
	src/test/functional/directory/xds/ts/xoms/xoms_st
and in most of them I don't see the setting of PATH.
In all these files uname -n should replace hostname.



CR Number                     : 11346
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : systest
Short Description             : need uniform interface
Reported Date                 : 7/18/94
Found in Baseline             : 1.1
Found Date                    : 7/18/94
Severity                      : E
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b20
Affected File(s)              : dfs.block_frag dfs.glue dfs.lock dfs.maxdir dfs.maxfile dfs.repfs
Sensitivity                   : public

[7/18/94 public]

The automated dfs system tests do not all have the same
command line interface.

[7/19/94 public]
Changes submitted

[09/27/94 public]
Closed.



CR Number                     : 11342
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : sec
Subcomponent Name             : secd
Short Description             : secd core dump on HP during
cell config
Reported Date                 : 7/18/94
Found in Baseline             : 1.1
Found Date                    : 7/18/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : ./security/krb5/kdc/kdc_preauth.c
Sensitivity                   : public

[7/18/94 public]


Output from do_automatic_test.log

:****** Waiting for node self-identity to be established...
login failure.
  message from login:
  
  Sorry. Password Validation Failure. - Cannot contact any KDC for requested realm (dce / krb)
Failed to log in to DCE.
        Press <RETURN> to continue, CTRL-C to exit: 


Registry server unavailable
Registry server unavailable
Registry server unavailable




output from dce_config.log

DEBUG:     Executing: x_exit(login failure.
             message from login:
             
             Sorry. Password Validation Failure. - Cannot contact any KDC for 
           requested realm (dce / krb)
           Failed to log in to DCE.)
V:         User query: Press <RETURN> to continue, CTRL-C to exit: 




We rebooted the system and reran the smoketest with the same results.

[7/18/94 public]

Could you explain why is this a System Test problem? 
If so, which System Tests are failing?

[7/18/94 public]
I'm somewhat familiar with the smoketests - I'll take
a look.

[7/18/94 public]
Martha, the reason we assign it to systest is because it
seems liket the closest component name that we are given
to choose from.  Would it be worth having Bruce add a 
new component name = smoketest, which is really what it
should be assigned to?

[7/18/94 public]

Perhaps, the compoment should be unknown until the responsible
Eng. figures out what caused the failures. A question to ask is
what component are the NB smoketest part of? The bld component, 
utils..? It is definetely not System Tests, this is just my 
opinion.

[7/18/94 public]
Okay - looks like a real problem (ie. not a script problem -
reproduced by hand). The 486 single machine cell config with
today's build passed but the HP one is not. Secd apparently
disappears so that sec_clientd cannot do his thing. Couldn't
find a coredump. Handing off to Rob Baum.

[7/18/94 public]
Sorry Rob - should've reproduced on a different machine - the
smoketest machine root partition is full so there was no room
for the /krb5 directory - not clear that secd should just
(silently?) exit under these conditions or whether a better
error message is possible but this is definitely no longer an A0.
I'm trying to clean up the smoketest machine root partition now -
let me know where you want to go with this one - I'll update when
I've successfully config'd the smoketest machine (I've successfully
config'd a system test HP with today's build).

[7/18/94 public]
The code you currently have still has the pre-DCE1.1 error messages...
With the old stuff, it tried to spit out an error to the tty it was started
in, before exiting.  The code submitted on Friday was the latest stuff here
as of early last week (froze it and spent a couple days building/testing).
The serviceability work was being merged into our mainline here at the end
of last week and early this week and will handle getting these errors logged.
I've changed this to be an enhancement request asking for the secd svcability
functionality (which addresses the problem you had of not knowing why secd
was exiting).  The next big HP security submission should include the secd
serviceability changes.

[7/18/94 public]
Switching this CR back to its original self and making a new OT for the
lack of SVC in SEC.  

The problem of the secd core'ing on configuration of the cell has not gone
away.  It is just imtermittent.  I was able to config once, so was Gail but
more than 50% of the time the config fails.  The secd process is dumping
core.  I will append a core dump momentarily.....

[7/18/94 public]
Hmm, lets see how many times this CR can be updated in one day :-).
Along with the core dump info, can you list the amount of free disk space in /
and the amount of swapspace (/etc/swapinfo -t) available after it dies?  Also
let us know if the traceback from the core files is the same each time it
dies.

[7/18/94 public]
I promise this will be the last time I edit the CR today.  The stack trace from
xdb is attached.  The partition from which the dce_config was run had
more than 20Meg.  And the free swapspace was over 100Meg.  Stack always
the same.

The SEGV in free() would suggest free'ing a bad pointer.  This might help
explain the intermittency of the crash and why the 486 is more reliable.  The
486/GNU gcc platform is more lenient on SEGV'ing with code doing bad things
with malloc/free.  

The kdc_preauth.c:third_party_padata() routine where the free() SEGV is being
called from attempts to clean up malloc'ed memory.  The code is a little 
complicated due to all the goto cleanN; labels.  Maybe some pointer is begin 
free'ed twice?  Maybe free'ing non-malloc'ed memory?

Somewhat related question:  Is it possible for secd to chdir() to a well
known directory so that core dumps will always end up in the same place?
Finding secd cores is sometimes a chore in itself...

SECD CORE from xdb:

 0 free@libc + 0x00000008 (hp-ux export stub)
 1 cma_lib_free@libdce + 0x00000284 (0x40035be0, 0x40049fe0, 0, 0)
 2 cma_lib_free@libdce + 0x00000284 (0x40035be0, 0, 0, 0)
 3 cma_lib_free@libdce + 0x00000284 (0x40035be0, 0x40373870, 0x403738d0, 0)
 4 cma_lib_free@libdce + 0x00000148 (0x4002a62c, 0x40253e50, 0x4002add2,
0x14)
 5 third_party_padata + 0x00000b90 (0x40253b60, 0x4030bd90, 0x40253e50,
0x1ff09c0)
 6 check_padata_type + 0x0000005c (0x40253b60, 0x40372578, 0x4030bd90,
0x40253e28)
 7 process_as_req + 0x00001718 (0x40372328, 0x40252a88, 0x40252aa8, 0)
 8 dispatch + 0x0000036c (0x40252aa0, 0x40252a88, 0x40252aa8, 0)
 9 rsec_krb5rpc_sendto_kdc + 0x00000100 (0x40300260, 0x243, 0x40371050,
0x1000)
10 op0_ssr + 0x0000021c (0x40300260, 0x40167320, 0x4025251c, 0x4030cdc0)
11 rpc__cn_call_executor@libdce + 0x000007c8 (0x40167320, 0, 0, 0)
12 cthread_call_executor@libdce + 0x000002d4 (0x4016def0, 0x7af5a068,
0x40049fe0, 0xf)
13 cma__thread_base@libdce + 0x0000021c (0x40049fe0, 0, 0, 0)
14 cma__thread_start1@libdce + 0x0000004c (0x40049fe0, 0, 0, 0)
15 cma__thread_start0@libdce + 0x00000008 (0x40049fe

[7/19/94 public]
Well I'm actually glad that this resulted in all this discussion - very
good transfer of information and very interesting estimates with respect
to pass/fail rate of configuring! But just to get back to the catalyst for
all this... we will be adding a check to our smoketests script to catch
the out of space in root partition problem.


[ mob public 7/19/94]
We believe this is a problem related to an incomplete submission
of the intercell fix which was a bug at the end of 1.1 Beta but
never got fixed for Beta.  This fix was submitted with other changes
in the first merge of our code to OSF.  We will provide additional
information as it becomes available.

[7/19/94 public]

Bad free() fix put into nightly build.  Will ask systest to test out
thoroughly tomorrow.

[7/20/94 public]
Other secd cores are occuring but the stack looks different.  See 
OT #11363, 11365.  Closing this one.



CR Number                     : 11339
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : /src/test/security/api/moretests/dl				             g_intermediary.c
Short Description             : line 565: error 1523: Too many init                                             ializers
Reported Date                 : 7/18/94
Found in Baseline             : 1.1
Found Date                    : 7/18/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : ./test/api/moretests/dlg_test.idl
Sensitivity                   : public

[7/18/94 public]

cc: "/project/dce/build/dce1.1-snap/src/test/security/api/moretests/dlg_intermediary.c", line 565: error 1523: Too many initializers.
*** Error code 1

[7/18/94 public]

HP submitted missing change to .idl file.



CR Number                     : 11322
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : gds_sec
Short Description             : TET reports PASSED even for core dumping testcases
Reported Date                 : 7/15/94
Found in Baseline             : 1.1
Found Date                    : 7/15/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : gds/ts/gdssetup/gdssetup_all
					     gds/ts/gds_sec/gds_sec_all
					     gds/ts/lib/shfuncs
Sensitivity                   : public

[7/15/94 public]


gds_sec tests fail - gdscp core dumps.
But TET reports PASSED.

[07/19/94 public]
Here is that what I have had on the screen:

dcecp dcecp_add.tcl
rgy_add.sh
local_start: Configure GDS

Local CACHE administration (DIR-IDs=11)
Local CACHE administration (DIR-IDs=12)
Waiting 60 sec. for coming up the DSA processes
Adding objects in DSA-11
Adding objects in DSA-12
Now, testing is going on ... 
gds_sec (tp1/1): Waiting 60 sec. for coming up the DSA processes
/bin/ksh: 11155 Bus error(coredump)
gds_sec (tp1/2): Waiting 60 sec. for coming up the DSA processes
/bin/ksh: 11280 Memory fault(coredump)
gds_sec (tp1/3): Waiting 60 sec. for coming up the DSA processes
/bin/ksh: 11396 Memory fault(coredump)
gds_sec (tp2/1): Waiting 60 sec. for coming up the DSA processes
/bin/ksh: 11535 Memory fault(coredump)
gds_sec (tp3/1): Waiting 60 sec. for coming up the DSA processes
/bin/ksh: 11696 Bus error(coredump)
/bin/ksh: 11707 Bus error(coredump)
/bin/ksh: 11714 Bus error(coredump)
gds_sec (tp4/1): Waiting 60 sec. for coming up the DSA processes
/bin/ksh: 11875 Bus error(coredump)
/bin/ksh: 11884 Memory fault(coredump)
/bin/ksh: 11891 Bus error(coredump)
/bin/ksh: 11898 Memory fault(coredump)
/bin/ksh: 11905 Memory fault(coredump)
/bin/ksh: 11915 Memory fault(coredump)

rgy_del.sh
dcecp dcecp_del.tcl
local_clean: Deconfigure GDS


Here is the journal file:

0|1.10 13:39:11 19940719|User: keutel (0) TCC Start, Command Line: /dcetest/dcelocal/test/tet/bin/tcc -e functional/directory/gds gds_sec 
20|/dcetest/dcelocal/test/tet/functional/directory/gds/tetexec.cfg 1|Config Start
30||TET_VERSION=1.10
30||TET_OUTPUT_CAPTURE=False
30||TET_RESCODES_FILE=tet_code
30||TET_EXEC_IN_PLACE=True
30||TET_TAPE_DEVICE=/dev/rmt0
40||Config End
70||"STARTING all TESTS using DCE authentification"
10|0 /gds_sec/gds_sec_all 13:39:12|TC Start, scenario ref 57-1
15|0 1.10 4|TCM Start
520|0 0 10571 1 1|TESTING (DCE_Security) STARTED
400|0 1 1 13:45:50|IC Start
200|0 1 13:45:51|TP Start
520|0 1 10571 1 2|DCE_Security DAP tests with dce_login gds_cl1
520|0 1 10571 1 3|DCE_Security DAP test: sec_dap_b2.tcl
520|0 1 10571 1 4|PASSED 
520|0 1 10571 1 5|DCE_Security DAP test: sec_dap_b4.tcl
520|0 1 10571 1 6|FAILED 
520|0 1 10571 1 7|DCE_Security DAP test:  sec_dap_b1.tcl
520|0 1 10571 1 8|PASSED 
520|0 1 10571 1 9|DCE_Security DAP test:  sec_dap_b3.tcl
520|0 1 10571 1 10|PASSED 
220|0 1 7 13:57:37|NORESULT
410|0 1 1 13:57:37|IC End
400|0 2 1 13:57:38|IC Start
200|0 1 13:57:38|TP Start
520|0 1 10571 1 2|DCE_Security DAP test with dce_login gds_zero
520|0 1 10571 1 3|DCE_Security DAP test:  sec_dap_b1.tcl (gds_zero)
520|0 1 10571 1 4|PASSED 
220|0 1 7 14:01:08|NORESULT
410|0 2 1 14:01:09|IC End
400|0 3 1 14:01:10|IC Start
200|0 1 14:01:10|TP Start
520|0 1 10571 1 2|DCE_Security DSP tests with dce_login gds_cl1
520|0 1 10571 1 3|DCE_Security DSP test:  sec_dsp_b1.tcl
520|0 1 10571 1 4|PASSED 
520|0 1 10571 1 5|DCE_Security DSP test:  sec_dsp_b2.tcl
520|0 1 10571 1 6|PASSED 
520|0 1 10571 1 7|DCE_Security DSP test:  sec_dsp_b3.tcl
520|0 1 10571 1 8|PASSED 
220|0 1 7 14:07:34|NORESULT
410|0 3 1 14:07:34|IC End
400|0 4 1 14:07:35|IC Start
200|0 1 14:07:35|TP Start
520|0 1 10571 1 2|DCE_Security TDT tests with dce_login gds_cl1
520|0 1 10571 1 3|DCE_Security TDT test:  sec_tdt_b1.tcl
520|0 1 10571 1 4|PASSED 
520|0 1 10571 1 5|DCE_Security TDT test:  sec_tdt_b1.tcl (dir12)
520|0 1 10571 1 6|PASSED 
520|0 1 10571 1 7|DCE_Security TDT test:  sec_tdt_b2.tcl
520|0 1 10571 1 8|PASSED 
520|0 1 10571 1 9|DCE_Security TDT test:  sec_tdt_b3.tcl
520|0 1 10571 1 10|PASSED 
520|0 1 10571 1 11|DCE_Security TDT test:  sec_tdt_b4.tcl
520|0 1 10571 1 12|PASSED 
520|0 1 10571 1 13|DCE_Security TDT test:  sec_tdt_b5.tcl
520|0 1 10571 1 14|PASSED 
220|0 1 7 14:14:37|NORESULT
410|0 4 1 14:14:37|IC End
520|0 0 10571 1 1|TESTING (DCE_Security) FINISHED
80|0 0 14:16:41|TC End
70||"FINISHED all TESTS using DCE authentification"
900|14:16:41|TCC End

Running ../../tools/TET_filter.gds_sec journal I get journal.log:

Results of GDS Security Tests:  Tue Jul 19 14:20:10 EDT 1994
-------------------------------------------------------------

User: keutel (0) TCC Start, Command Line: /dcetest/dcelocal/test/tet/bin/tcc -e functional/directory/gds gds_sec 
"STARTING all TESTS using DCE authentification"

TC Start, scenario ref 57-1

DCE_Security DAP test: sec_dap_b4.tcl -> FAILED 
"FINISHED all TESTS using DCE authentification"
TCC End

------------------------------

Total PASSED =  13
Total FAILED =  1


This doesn't seem to be true.

You find in gds/ts/gds_sec a lot of *.log files: all are empty except
dap_b4.log:

TEST : sec_dap_b4
EXPECTED : anonymous bind to DSA2 ok
The requestor does not have permission to perform the operation.
EXPECTED : show protected attr failed
EXPECTED : simple bind to DSA2 ok
 1) /C=re/O=sni/OU=ap2/CN=two
    User-Password : \x73\x65\x63\x72\x65\x74\x32
EXPECTED : show protected attr succeeded
Some part of the directory is currently not available.
UNEXPECTED : DCE bind to DSA2 failed
Perform bind operation first.
UNEXPECTED : show protected attribute failed

The main reason for the "PASSED" in the journal file seems to be 
that gdscp is core dumping before anything is written to <testcase>.log.



CR Number                     : 11320
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : gds_sec
Short Description             : gds_sec_all invokes ksh wrong
Reported Date                 : 7/15/94
Found in Baseline             : 1.1
Found Date                    : 7/15/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : ts/gds_sec/gds_sec_all
Sensitivity                   : public

[7/15/94 public]

When running gds_sec etsts via TET I get:

gds_sec (tp3/1): Waiting 60 sec. for coming up the DSA processes
ksh: gdscp /dcetest/dcelocal/test/tet/functional/directory/gds/ts/gds_sec/lib/sec_dsp_b1.tcl > ./dsp_b1.log 2>&1: cannot open
grep: can't open dsp_b1.log

The reason seems to be that "ksh 'gdscp ...'" is wrong:
it should be "ksh -c 'gdscp ...'".

"ksh 'gdscp ...'" works on AT386 but not on HP800 .

"ksh -c 'gdscp ...'" works on both platforms - so I will submit this.
Hopefully it'll also work on RIOS and SVR4 ...

[07/15/94 public]
Fix submitted.

[8/2/94 public]
Fix verified by fvt



CR Number                     : 11316
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : TET tests
Short Description             : TET overwrites XDS_LOG
Reported Date                 : 7/15/94
Found in Baseline             : 1.1
Found Date                    : 7/15/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : 
						gds/ts/admin/cacheadm
						gds/ts/admin/dsa
						gds/ts/admin/scheme
						gds/ts/admin/shadow
						gds/ts/admin/subtree
						gds/ts/gdscp/gdscp
						gds/ts/gdscp/gdscp_all
						gds/ts/gdssetup/gdssetup_all
						gds/ts/gds_sec/gds_sec_all
						xds/ts/mhs/mhs_st
						xds/ts/switch/switch_mt
						xds/ts/switch/switch_st
						xds/ts/xds/xds_mt
						xds/ts/xds/xds_st
						xds/ts/xom/xom_mt
						xds/ts/xom/xom_st
						xds/ts/xoms/xoms_mt
						xds/ts/xoms/xoms_st
Sensitivity                   : public

[7/15/94 public]

The scripts used by TET for gds and xds testing overwrite
D2_LOG and XDS_LOG: if a TET user has set them then TET unsets them.
There is no reason for doing that: 

1.) D2_LOG isn't used in the DUA any more. D2_LOG is used to
specify the SVC routing of the gds processes - but TET can set
what ever it wants - it is overwritten by $CL/.profile
executed by gdssysadm when activating GDS.

2.) TET shouldn't unset XDS_LOG. If a testcase fails and you want
to reproduce it with XDS tracing switched on you should be able to do that.
The TET user setting XDS_LOG should know that he is going to write
many logfiles which could fill the disc partition.

I will remove the lines concerning the unsetting of XDS_LOG and D2_LOG.

[07/15/94 public]
Fix submitted.

[7/28/94 public]



CR Number                     : 11313
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : switch_mt TET testcases
Short Description             : typo in switch_mt (TET)
Reported Date                 : 7/14/94
Found in Baseline             : 1.1
Found Date                    : 7/14/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : xds/ts/switch/switch_mt
Sensitivity                   : public

[7/14/94 public]

typo in xds/ts/switch/switch_mt:

find ${TET_EXECUTE}/switch/lib/threads_as-name *.log .....


--->

find ${TET_EXECUTE}/switch/lib/threads_as -name *.log .....


I wiill do this.

[07/14/94 public]
Submitted.

[7/28/94 public]
Verified by inspection.



CR Number                     : 11312
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : TET scripts
Short Description             : TET scripts sleep too often
Reported Date                 : 7/14/94
Found in Baseline             : 1.1
Found Date                    : 7/14/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : 
./test/functional/directory/gds/ts/config/config_gds-admin_cache.sed
./test/functional/directory/gds/ts/config/config_gds-admin_cache.sh
./test/functional/directory/gds/ts/config/two_dsas.sed
./test/functional/directory/gds/ts/config/two_dsas.sh
Sensitivity                   : public

[7/14/94 public]

TET scripts sleep too often - i.e. after calling local_dsa12_admin.

I will fix this.

[07/14/94 public]
Submitted.



CR Number                     : 11311
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : tet tests
Short Description             : Global variables within
global variables are not translated.
Reported Date                 : 7/14/94
Found in Baseline             : 1.1b11
Found Date                    : 7/14/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : test/tet/src/tcl/api/tcm.tcl.dat
Sensitivity                   : public

[7/14/94 public]

This affects all the LOG FVT suite and some delegation and mask FVT
tests for ACL FVT suite.

Look at tests acl_modify_044_P and acl_modify_045_P.

if {[dcp_wrap {global DCP_HOSTNAME_ONE DCP_ACL_OBJ_MASK1}] != 0} {return;}
In tetexec.cfg file:   DCP_ACL_OBJ_MASK1=/.:/hosts/ice/dts-entity
   ********WORKS*************

15|0 1.10 2|TCM Start
400|0 3 1 17:24:17|IC Start
200|0 1 17:24:17|TP Start
520|0 1 27905 1 1|acl_modify_044_P: Check that a mask re-calculation occurs after all
520|0 1 27905 1 2|acl_modify_044_P: modifications are made on the specified ACL object that
520|0 1 27905 1 3|acl_modify_044_P: supports the mask_obj ACL entry type. The mask_obj ACL
520|0 1 27905 1 4|acl_modify_044_P: entry type does not exist but will be created.
520|0 1 27905 1 5|ACL object list: /.:/hosts/ice/dts-entity
520|0 1 27905 1 6|ACL type: {}
520|0 1 27905 1 7|ACL manager type: {}
520|0 1 27905 1 8|ACL entry list: {{mask_obj rwc} {user acl_modify_044_P rwc}}
520|0 1 27905 1 9|ACL object list: /.:/hosts/ice/dts-entity
520|0 1 27905 1 10|ACL type: {}
520|0 1 27905 1 11|ACL manager type: {}
520|0 1 27905 1 12|Result from acl show on /.:/hosts/ice/dts-entity === {{mask_obj rwc} {unauthenticated r--} {user hosts/ice/self rwc} {user 000031cd-9f51-21cd-a700-0800092734a4 r--} {user acl_modify_044_P rwc} {group subsys/dce/dts-admin rwc} {any_other r--}}
520|0 1 27905 1 13|ACL entry to be compared: {mask_obj rwc}
520|0 1 27905 1 14|ACL object list: /.:/hosts/ice/dts-entity
520|0 1 27905 1 15|ACL type: {}
520|0 1 27905 1 16|ACL manager type: {}
520|0 1 27905 1 17|Result from acl show on /.:/hosts/ice/dts-entity === {{mask_obj rwc} {unauthenticated r--} {user hosts/ice/self rwc} {user 000031cd-9f51-21cd-a700-0800092734a4 r--} {user acl_modify_044_P rwc} {group subsys/dce/dts-admin rwc} {any_other r--}}
520|0 1 27905 1 18|ACL entry to be compared: {user acl_modify_044_P rwc}
520|0 1 27905 1 19|==== Contents of test case:
520|0 1 27905 1 20|{ acl modify $DCP_ACL_OBJ_MASK1 -mask calc -a user:$name:rwc 	    dcp_acl_find_multi_entries "$DCP_ACL_OBJ_MASK1" {} {} "[list "mask_obj rwc" "user $name rwc"]" 	   }
520|0 1 27905 1 21|Test completed successfully.
520|0 1 27905 1 22|== Test output was:
520|0 1 27905 1 23|found
520|0 1 27905 1 24|== Expected output was:
520|0 1 27905 1 25|found
520|0 1 27905 1 26|Test Passed.
220|0 1 0 17:24:26|PASS
410|0 3 1 17:24:27|IC End
400|0 4 1 17:24:27|IC Start
200|0 1 17:24:28|TP Start
520|0 1 27905 1 27|acl_modify_045_P: Purge ineffective permissions for the specified ACL
520|0 1 27905 1 28|acl_modify_045_P: object that supports the mask_obj ACL entry
520|0 1 27905 1 29|acl_modify_045_P: type but it doesn't exist. -purge option is ignored.
520|0 1 27905 1 30|Test Completed Successfully on {acl modify /.:/hosts/ice/dts-entity -purge -a user:acl_modify_045_P:r}
520|0 1 27905 1 31|ACL object list: /.:/hosts/ice/dts-entity
520|0 1 27905 1 32|ACL type: {}
520|0 1 27905 1 33|Result from acl show on /.:/hosts/ice/dts-entity === {{unauthenticated r--} {user hosts/ice/self rwc} {user 000031cd-9f51-21cd-a700-0800092734a4 r--} {user acl_modify_045_P r--} {group subsys/dce/dts-admin rwc} {any_other r--}}
520|0 1 27905 1 34|ACL entry to be compared: {user acl_modify_045_P r--}
520|0 1 27905 1 35|Test Comparison Completed Successfully.
520|0 1 27905 1 36|Comparison Result: 0
520|0 1 27905 1 37|Test Passed.
220|0 1 0 17:24:30|PASS
410|0 4 1 17:24:30|IC End




if {[dcp_wrap {global DCP_HOSTNAME_ONE DCP_ACL_OBJ_MASK1}] != 0} {return;}
In tetexec.cfg file:  DCP_ACL_OBJ_MASK1=/.:/hosts/$DCP_HOSTNAME_ONE/dts-entity
   ********FAILS*************

15|0 1.10 2|TCM Start
400|0 3 1 17:25:59|IC Start
200|0 1 17:25:59|TP Start
520|0 1 27804 1 1|acl_modify_044_P: Check that a mask re-calculation occurs after all
520|0 1 27804 1 2|acl_modify_044_P: modifications are made on the specified ACL object that
520|0 1 27804 1 3|acl_modify_044_P: supports the mask_obj ACL entry type. The mask_obj ACL
520|0 1 27804 1 4|acl_modify_044_P: entry type does not exist but will be created.
520|0 1 27804 1 5|==== Contents of test case:
520|0 1 27804 1 6|{ acl modify $DCP_ACL_OBJ_MASK1 -mask calc -a user:$name:rwc 	    dcp_acl_find_multi_entries "$DCP_ACL_OBJ_MASK1" {} {} "[list "mask_obj rwc" "user $name rwc"]" 	   }
520|0 1 27804 1 7|== Test generated error.
520|0 1 27804 1 8|== Test output was:
520|0 1 27804 1 9|{acl object not found}
520|0 1 27804 1 10|Command failed: {acl modify $DCP_ACL_OBJ_MASK1 -r user:$name}
520|0 1 27804 1 11|Command returned: {acl object not found}
520|0 1 27804 1 12|Test aborted.
220|0 1 1 17:26:08|FAIL
410|0 3 1 17:26:08|IC End
400|0 4 1 17:26:09|IC Start
200|0 1 17:26:09|TP Start
520|0 1 27804 1 13|acl_modify_045_P: Purge ineffective permissions for the specified ACL
520|0 1 27804 1 14|acl_modify_045_P: object that supports the mask_obj ACL entry
520|0 1 27804 1 15|acl_modify_045_P: type but it doesn't exist. -purge option is ignored.
520|0 1 27804 1 16|Test Completed Successfully on {acl modify /.:/hosts/$DCP_HOSTNAME_ONE/dts-entity -purge -a user:acl_modify_045_P:r}
520|0 1 27804 1 17|ACL object list: {/.:/hosts/$DCP_HOSTNAME_ONE/dts-entity}
520|0 1 27804 1 18|ACL type: {}
520|0 1 27804 1 19|Result from acl show on {/.:/hosts/$DCP_HOSTNAME_ONE/dts-entity} === {acl object not found}
520|0 1 27804 1 20|Test Failed on acl show command for {/.:/hosts/$DCP_HOSTNAME_ONE/dts-entity.}
520|0 1 27804 1 21|Comparison Result: -1
520|0 1 27804 1 22|Command failed: {acl modify $DCP_ACL_OBJ_MASK1 -r user:$name}
520|0 1 27804 1 23|Command returned: {acl object not found}
520|0 1 27804 1 24|Test aborted.
220|0 1 1 17:26:15|FAIL
410|0 4 1 17:26:16|IC End

[7/19/94 public]
Don't know how this ever worked right in the first place, but it does now.
Submitted.

[8/12/94 public]
closed.



CR Number                     : 11310
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : filter
Short Description             : two TET_filter need a "ksh" in the first line
Reported Date                 : 7/14/94
Found in Baseline             : 1.1
Found Date                    : 7/14/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : TET_filter.gds_sec,TET_filter.gdssetup
Sensitivity                   : public

[7/14/94 public]

TET_filter.gdssetup and TET_filter.gds_sec should have a 

#!/bin/ksh

in the first line.

[07/14/94 public]
Submitted.



CR Number                     : 11299
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : gdssetup tests
Short Description             : gdssetup tests should cleanup in the end
Reported Date                 : 7/14/94
Found in Baseline             : 1.1
Found Date                    : 7/14/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : ts/gdssetup/lib/valid/end.setup
Sensitivity                   : public

[7/14/94 public]

When you run all gdssetup tests via TET then you have in the end
of the tests an activated GDS with 8 configured dir. id's.
This makes it impossible to create a new dir. id -
the new DSA's do not start, and if you try gdsditadm you
get the semaphore (errno 28) error.
gdssetup tests should delete all dir. id's configured by these tests.

[07/19/94 public]
Still the same behaviour: dir.id's 5, 6, 7, 8 are configured when
gdssetup tests are finished.

[07/20/94 public]
Fixed with today's submission.

[8/2/94 public]
fix verified by fvt



CR Number                     : 11297
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : scripts
Short Description             : attrlist getvalues tests are wrong
Reported Date                 : 7/14/94
Found in Baseline             : 1.1
Found Date                    : 7/14/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 
Fixed In Baseline             : 1.1b14
Affected File(s)              : attrlist_getvalues_P.tcl
Sensitivity                   : public

[7/14/94 public]

The positive FVTs for "attrlist getvalues" (in
scripts/attrlist_getvalues_P.tcl) look for incorrect results,
following the misinterpretation described in CR11229.

[8/2/94 public]

Fix submitted.

[8/12/94 public]
closed.



CR Number                     : 11279
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 11530
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gds_sec tetized tests
Short Description             : gds_sec tests need a running C-Stub
Reported Date                 : 7/13/94
Found in Baseline             : 1.1
Found Date                    : 7/13/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : 
	test/functional/directory/gds/tools/local_TET.admin
	test/functional/directory/gds/ts/config/gds_sec_start.sh
	test/functional/directory/xds/tools/local_TET.api
Sensitivity                   : public

[7/13/94 public]

If you reinstall DCE and start with running gds_sec tests via TET
they do fail.
The reason is that the cache of dir. id 1 is not configured at all.
You have to enter the Client address into the cache of dir. id 1.
Then the C-Stub will run, and the initialization of dir.id 11 and dir.id 12
(using save/copy subtree) works fine.

[8/2/94 public]
Fix verified by fvt.

[08/12/94 public]
Reopened. If you run all FVT all works fine because the gds admin tests 
enter the C-Stub address into the cache of dir. id. 1.
If you run gds_sec tests first they will fail - they still 
don't put anything into the cache of dir. id. 1.
That is the reason why 11530 occured.

[8/12/94 public]
Bumped priority.

[08/18/94 public]
Fix submitted.

[8/23/94 public]

Re-opened.  Seeing the same problems again with bl16.  I've run the
following tests in sequence:

	admin (all)
	gdscp
	gdssetup

Now when I run gds_sec the initialization of the test fails.  The first
indication is the error message from gdscp upon the following command:

  Error: A miscellaneous error occurred while interacting with the Directory Service.

x500obj create 43.12.2.1107.1.3.4.10=CLIENT -attribute PSA={TS=Client,NA='TCP/IP!internet=127.0.0.1+port=31010'}

gdsdirinfo shows no C-stub.

[8/29/94 public]
Verified on 486.



CR Number                     : 11278
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gds_sec tests
Short Description             : gds_sec tests expect -dce-  as password for cell_admin
Reported Date                 : 7/13/94
Found in Baseline             : 1.1
Found Date                    : 7/13/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : implicite with OT11233
Sensitivity                   : public

[7/13/94 public]

I did configure my cell with a cell_admin password "dce".
The gdssec tests didn't run via TET because
in dcecp_add.tcl the cell_admin password is expected to be "-dce-".
This should be documented.

[8/2/94 public]
Tests configure their own dce cells now.



CR Number                     : 11273
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 9133
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : sec.rgy.7
Short Description             : 'duration' not initialized in sec.rgy.7/secrgy_client.c
Reported Date                 : 7/13/94
Found in Baseline             : 1.0.3
Found Date                    : 7/13/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : secrgy_client.c
Sensitivity                   : public

[7/13/94 public]
This may explain the first part of CR 9133.

Full Description:
        'duration' is used, but not initialized in secrgy_client.c, when
        -t option is not specified for the test.
 
        This may cause the client(s) to run for an indeterminate
        amount of time, when -t option on the test is not used. 

Repeat By:

Proposed Solution:
        In the function main()

        #ifdef _FTX
        unsigned32           duration=0;
        #else
        unsigned32           duration;
        #endif

[7/19/94 public]

Fixed submitted. Tested on HPUX. Before closing this CR,
sec.rgy.7 will be tested on other platforms.

[8/24/94 public]

This has been fixed for a while and has been working.



CR Number                     : 11269
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gdssetup
Short Description             : additional gdssetup testcases
Reported Date                 : 7/13/94
Found in Baseline             : 1.1b10
Found Date                    : 7/13/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : see list below
Sensitivity                   : public

[7/13/94 public]
More testcases for gdssetup in test/functional/directory/gds/ts/gdssetup/lib :
	invalid/client3
	invalid/client3.cleanup
	invalid/client5
	invalid/client5.cleanup
	invalid/sv_domdef2.cleanup
	invalid/sv_domdef3.cleanup
	invalid/sv_domdef4
	invalid/sv_domdef4.cleanup
	invalid/sv_domdef5
	invalid/sv_domdef5.cleanup
	invalid/sv_domdef6
	invalid/sv_domdef6.cleanup
	invalid/sv_domnodef2
	invalid/sv_domnodef2.cleanup
	invalid/sv_domnodef3
	invalid/sv_domnodef3.cleanup
	invalid/sv_domnodef4
	invalid/sv_domnodef4.cleanup
	invalid/sv_domnodef5
	invalid/sv_domnodef5.cleanup
	invalid/sv_nodom1.cleanup
	invalid/sv_nodom2
	invalid/sv_nodom2.cleanup
	invalid/sv_nodom3
	invalid/sv_nodom3.cleanup
	invalid/sv_nodom4
	invalid/sv_nodom4.cleanup
	invalid/sv_nodom5
	invalid/sv_nodom5.cleanup
	valid/client5
	valid/client5.cleanup
	valid/sv_domdef5
	valid/sv_domdef5.cleanup
	valid/sv_domnodef3
	valid/sv_domnodef3.cleanup

[7/19/94 public]
	valid/end.setup
	valid/Makefile
	valid/TESTCASES

[7/28/94 public]
verified by inspection.



CR Number                     : 11266
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gds_sec
Short Description             : TET doesn't run: bad trap: cannot trap 18
Reported Date                 : 7/12/94
Found in Baseline             : 1.1
Found Date                    : 7/12/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : ts/gds_sec/gds_sec_all
Sensitivity                   : public

[7/12/94 public]

When running the gds_sec tests via TET I get:

ksh: bad trap: cannot trap 18.

The reason is a missing

#!/bin/ksh

in the beginning of ts/gds_sec/gds_sec_all.
I will submit it as soon as possible.

[07/13/94 public]
Submitted.



CR Number                     : 11247
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : mavrostest
Short Description             : test_mvr.sh calls oidt - not ./oidt
Reported Date                 : 7/11/94
Found in Baseline             : 1.1
Found Date                    : 7/11/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : mavrostest/test_mvr.sh
Sensitivity                   : public

[7/11/94 public]

test_mvr.sh contains the line:

oidt <oidt.input >oidt.diff

This failes if PATH doesn't contain "."   .

The fix is to change this line to

./oidt <oidt.input >oidt.diff

[07/11/94 public]
Fixed.

[7/28/94 public]
Closed.



CR Number                     : 11238
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 11212
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : fvt
Short Description             : Need to tetize typeless switch tests
Reported Date                 : 7/11/94
Found in Baseline             : 1.1
Found Date                    : 7/11/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : xds/ts/switch/switch_DNS
					     xds/ts/switch/Makefile
					     xds/tet_scen
Sensitivity                   : public

[7/11/94 public]
Testcases for testing switching to typeless (DCE) cellnames were submitted
this month.  However, these tests do not have a testsuite.  One needs to be
provided.

[7/28/94 public]
Closed.



CR Number                     : 11233
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : fvt
Short Description             : gds fvt should configure dce
cell as part of test startup
Reported Date                 : 7/11/94
Found in Baseline             : 1.1
Found Date                    : 7/11/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : gds/ts/config/config.cmd
					     gds/ts/config/config.env.sed
					     gds/ts/config/Makefile
					     xds/ts/config/Makefile
					     xds/tools/local_TET.api
					     gds/tools/local_TET.admin
Sensitivity                   : public

[7/11/94 public]
The GDS switch and gds_sec tests require that the following DCE cells
be created:

DUA Switch:
	/.../c=ie/o=digital
	/.../snidec.sni.com

gds_sec:
	/.../c=ie/o=digital

These cells should be configured and started as part of the FVT startup
process.

dce_config supports automated operation via command and environment
configuration files.  See the dce_config man page for details, and the DCE
Administration Guide -- Introduction (v1.0.3), Chapter 11 "Customizing the
dce_config Processing."

[7/11/94 public]
Correct typo in name of gds_sec cell.

[8/2/94 public]
Fix verified by fvt



CR Number                     : 11220
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : 
Short Description             : Need to dce_login before running audstr001
Reported Date                 : 7/8/94
Found in Baseline             : 1.1
Found Date                    : 7/8/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : audrel001.c, audstr001
Sensitivity                   : public

[7/8/94 public]


Need to dce_login before running audstr001 test.
This shouldn't be necessary.



CR Number                     : 11212
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 9400
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : gds
Subcomponent Name             : switch
Short Description             : switch ST valid failures
Reported Date                 : 7/8/94
Found in Baseline             : 1.1
Found Date                    : 7/8/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : switch/lib/valid/*tv, switch/lib/valid/Makefile, switch/lib/typeless_valid/*,switch/lib/Makefile
Sensitivity                   : public

[7/8/94 public]

The following switch tests failures were found:

XDS/Switch - valid Testcases
pass 0  	fail 1	.  .  .  .  add_entry1tv
pass 0  	fail 1	.  .  .  .  compare1tv
pass 0  	fail 1	.  .  .  .  list1tv
pass 0  	fail 1	.  .  .  .  mod_entry1tv
pass 0  	fail 1	.  .  .  .  read1tv
pass 0  	fail 1	.  .  .  .  remove1tv
--> Test cases: FAILED

[07/08/94 public]
See 9400. *tv tests need a different cell name - a typeless one.
("normal" switch tests require a cell name "/C=ie/O=digital",
*tv tests require a cell name "snidec.sni.com".
Of course this is not documented, I guess.

[07/11/94 public]
Fixed: moved all *tv tests from switch/lib/valid to switch/lib/typeless_valid.
Note:
These tests are not "tetized" yet.
But

cd ....switch/lib/typeless_valid
xt_test -a

works if you have set up all for "snidec.sni.com" as you do it for
"/C=ie/O=digital".

[8/18/94 public]
Verified by fvt.



CR Number                     : 11210
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 10091
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dcerpper
Short Description             : dcerpper fails to run successfully on all platforms
Reported Date                 : 7/8/94
Found in Baseline             : 1.1
Found Date                    : 7/8/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : dcerpper
Sensitivity                   : public

[7/8/94 public]

dcerpper tests do not run successfully on all platforms.  There appears
to be a problem with the parameters passed to one of the tests.

[7/8/94 public]

Is this problem different than the one in OT 10091?

[7/8/94 public]

Test was not designed to be run on multiple clients.  Increased sleep
time between client startup to minimize errors reported.



CR Number                     : 11209
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : tests
Short Description             : API switch tests and filter
don't report UNINITIATED
Reported Date                 : 7/8/94
Found in Baseline             : 1.1
Found Date                    : 7/8/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : TET_filter.api, switch_mt, switch_st
Sensitivity                   : public

[7/8/94 public]

When attempting to run switch_all, the test detected that DCE was not
activiated, and yet it returned 'PASS.'  The tests should have reported
UNINITIATED and aborted.  Also, TET_filter.api parsed the journal and
reported the tests as passing.

Journal:
--------
0|1.10 08:20:02 19940708|User: zeliff (0) TCC Start, Command Line: /dcetest/dcelocal/test/tet/bin/tcc -e functional/directory/xds switch_all 
20|/dcetest/dcelocal/test/tet/functional/directory/xds/tetexec.cfg 1|Config Start
30||TET_VERSION=1.10
30||TET_OUTPUT_CAPTURE=False
30||TET_RESCODES_FILE=tet_code
30||TET_EXEC_IN_PLACE=True
30||TET_TAPE_DEVICE=/dev/rmt0
40||Config End
70||"STARTING all Switch tests using TEST script"
10|0 /switch/switch_st 08:20:02|TC Start, scenario ref 74-1
15|0 1.10 4|TCM Start
520|0 0 17195 1 1|Verify_CDS - Couldn't execute <cdscp> properly - STOP
80|0 0 08:20:13|TC End
10|1 /switch/switch_mt 08:20:13|TC Start, scenario ref 75-1
15|1 1.10 8|TCM Start
520|1 0 17253 1 1|Verify_CDS - Couldn't execute <cdscp> properly - STOP
80|1 0 08:20:23|TC End
70||"FINISHED all Switch tests"
900|08:20:23|TCC End

Journal.log from TET_filter.api:
-------------------------------

Results of GDS API Tests:  Fri Jul  8 08:20:49 EDT 1994
----------------------------------------------------

User: zeliff (0) TCC Start, Command Line: /dcetest/dcelocal/test/tet/bin/tcc -e functional/directory/xds swi
tch_all 
"STARTING all Switch tests using TEST script"

TC Start, scenario ref 74-1

Verify_CDS - Couldn't execute <cdscp> properly - STOP

TC Start, scenario ref 75-1

Verify_CDS - Couldn't execute <cdscp> properly - STOP
"FINISHED all Switch tests"
TCC End

------------------------------

Total PASSED =  2
Total FAILED =  0

[8/2/94 public]
Verified via manual inspection.



CR Number                     : 11204
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : test drivers
Short Description             : remove 'clear' from all scripts
Reported Date                 : 7/7/94
Found in Baseline             : 1.1
Found Date                    : 7/7/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : local_TET.api
Sensitivity                   : public

[7/7/94 public]
Remove all 'clear' from scripts:  it prevents someone from running the TET
cases from a dialup line through OSF's annex.



CR Number                     : 11195
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : bld
Short Description             : gds tools not installed
Reported Date                 : 7/7/94
Found in Baseline             : 1.1
Found Date                    : 7/7/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : test/functional/directory/gds/tools/Makefile
Sensitivity                   : public

[7/7/94 public]

The GDS test tools were not installed.  In the log of the test install
pass:

make: don't know how to make TET_filter.gdssetup (continuing)

This is because TET_filter.gdssetup does not exist.  Did you forget to
submit something?

[07/07/94 public]
Temporary removed TET_filter.gdssetup from 
test/functional/directory/gds/tools/Makefile.



CR Number                     : 11194
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : bld
Short Description             : gdssetup testcase install errors
Reported Date                 : 7/7/94
Found in Baseline             : 1.1
Found Date                    : 7/7/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : test/functional/directory/gds/ts/gdssetup/lib/invalid/Makefile, test/functional/directory/gds/ts/gdssetup/lib/valid/Makefile
Sensitivity                   : public

[7/7/94 public]

In the test install log:

/test/functional/directory/gds/ts/gdssetup/lib/valid 
  make: don't know how to make client5 (continuing)

/test/functional/directory/gds/ts/gdssetup/lib/invalid 
  make: don't know how to make client3 (continuing)

This means that none of the gdssetup testcases were installed.

[07/07/94 public]
Fixed just now:

/test/functional/directory/gds/ts/gdssetup/lib/valid/Makefile:

removed: client5
	 client5.cleanup
	 sv_domdef5
	 sv_domdef5.cleanup
	 sv_domnodef3
	 sv_domnodef3.cleanup

/test/functional/directory/gds/ts/gdssetup/lib/valid/TESTCASES:

removed: sv_init3.cleanup

/test/functional/directory/gds/ts/gdssetup/lib/invalid/Makefile:

removed: client3
	 client3.cleanup
	 client5
	 client5.cleanup
	 sv_domdef2.cleanup
	 sv_domdef3.cleanup
	 sv_domdef4
	 sv_domdef4.cleanup
	 sv_domdef5
	 sv_domdef5.cleanup
	 sv_domdef6
	 sv_domdef6.cleanup
	 sv_domnodef2
	 sv_domnodef2.cleanup
	 sv_domnodef3
	 sv_domnodef3.cleanup
	 sv_domnodef4
	 sv_domnodef4.cleanup
	 sv_domnodef5
	 sv_domnodef5.cleanup
	 sv_nodom1.cleanup
	 sv_nodom2
	 sv_nodom2.cleanup
	 sv_nodom3
	 sv_nodom3.cleanup
	 sv_nodom4
	 sv_nodom4.cleanup
	 sv_nodom5 
	 sv_nodom5.cleanup
	 
/test/functional/directory/gds/ts/gdssetup/lib/valid/TESTCASES:

added: sv_domnodef1.cleanup

Basicly, I just removed the files from the Makefile which do not exist
and updated the two TESTCASES files in the sense that
"/bin/ls" and "cat TESTCASES" gives exactly the same.

Leo, Eva, Norbert: please check my fixes!



CR Number                     : 11152
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : 
Short Description             : Submit dlgcfg001
Reported Date                 : 6/30/94
Found in Baseline             : 1.1
Found Date                    : 6/30/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : dlgcfg001
Sensitivity                   : public

[6/30/94 public]


Submit dlgcfg001

[8/30/94 public]

Test update



CR Number                     : 11148
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : rpc
Subcomponent Name             : 
Short Description             : FREE macro in cover_ool/util_macros.h use non ANSI C free.
Reported Date                 : 6/30/94
Found in Baseline             : 1.0.3
Found Date                    : 6/30/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : test/rpc/idl/cover_ool/util_macros.h, util_xmit.c
Sensitivity                   : public

[6/30/94 public]

The FREE macro defined in util_macros.h uses a free() returning int as
opposed to the ANSI C free() which has return type void.

[6/30/94 public]
Remove the FREE macro.
Closed.



CR Number                     : 11124
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : aud
Subcomponent Name             : ecfile_filter
Short Description             : OS-dependent test in testsuite
Reported Date                 : 6/29/94
Found in Baseline             : 1.1
Found Date                    : 6/29/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : ts/cp_auditd/cp_auditd
test/security/audit/ts/ecfile_filter/stopauditd
Sensitivity                   : public

[6/29/94 public]
This segment of code:

  nr_of_dcecp=$( ps -e | grep -c dcecp )
  while ((nr_of_dcecp!=0))
  do
    sleep 5
    nr_of_dcecp=$( ps -e | grep -c dcecp )
  done 

Causes and infinite loop on OSF1.  That is because 'ps -e' produces
slightly different results than it does on HP/UX or RIOS -- it shows the
arguments to the command whereas on other platforms it only shows the
command.  Therefore, the grep counts the 'grep -c dcecp' process in
addition to the 'dcecp' processes and thus the test never reaches 0.

The same is true for the 'auditcp' version of the code.

This script should have OS-dependent 'ps' flags.  An example, below, is
taken from the auditd_startup script:

        if [ "`uname`" = "OSF1" ]
        then
                PS_FLAGS="-e -o ucomm"
        else
                PS_FLAGS="-e"
        fi

[6/29/94 public]
fixed. both in ecfile_filter as well as in cp_auditd.



CR Number                     : 11115
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : aud
Subcomponent Name             : cp_filter
Short Description             : Need to create filter before
removing it.
Reported Date                 : 6/28/94
Found in Baseline             : 1.1
Found Date                    : 6/28/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : ts/cp_filter/cp_filter
Sensitivity                   : public

[6/28/94 public]
The cp_filter testsuite has the following problem:

  START: cp_filter04 started
  audfilter modify {principal aud_test_princ2} -remove {dce_audit_filter_modifydenial log}
  
  OK: audfilter remove - successful
  {principal aud_test_princ1}
  {group aud_test_group1}
  {cell krbtgt/hither}
  world
  
  OK: audfilter catalog - successful
  Error: No filter found.

The filter needs to be created before it is removed.

[6/29/94 public]
Fixed.  Filter for aud_test_princ2 added as prerequisite to removing it.
The error: No filter found, on the other hand, is expected part of the
test, since trying to show the filter after removing it, to prove that
it was removed indeed



CR Number                     : 11099
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : systest
Subcomponent Name             : dced/ts/rel/dcdre101/dcdrel101-client.c
Short Description             : Undeclared identifier failed
Reported Date                 : 6/27/94
Found in Baseline             : 1.1
Found Date                    : 6/27/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : dcd_st_utils.h
Sensitivity                   : public

[6/27/94 public]

8248:"/project/dce/build/dce1.1-snap/src/test/systest/dced/ts/rel/dcdrel01/dcdrel01_client.c", line 204.134: 1506-045 (S) Undeclared identifier failed.
8276:*** Error code 1

[6/29/94 public]

Fixed the name of an argument in two macros which was treated as 
ambiguous by the RIOS C compiler.



CR Number                     : 11093
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : dhd
Short Description             : keytab, hostdata, secval, server fv
t tests need to be updated
Reported Date                 : 6/27/94
Found in Baseline             : 1.1
Found Date                    : 6/27/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : Numerous
Sensitivity                   : public

[6/27/94 public]
The test code need to be updated against the following changes in
dced commands,

1) As the side effect of fix to cr 10948, status code of "Unrecognized 
hostname 'xxx'." is no longer used. If there is a wrong argument passed in, 
it will result the dced_binding_create failed, so that a status code of dced 
will be returned. In this case it will be "Bad or wrong arguments".

2) As the fix of cr 11020 soon being submitted, some attribute lists are
multi-value (they' re now single value, i.e. {attr-type attr-value}). These
are, data in hd, kt, sr; arguments, keytabs, principals, prerequesites,
services, bindings, flags, objects, starton in sr.

3) As the fix of cr 11072 soon being submitted, missed options "directory",
"uid", "gid" and "era" in sr have been added. 

4) As the side effect of fix to cr 10464, the era parse and printout routines
are replaced with hp-implemented routines in rgy_utils.c. The test code may
need to adjust.

5) "-add" and "-remove" options of server modify command have been implemented.

[7/5/94 public]
Submitted changes for server and secval fvt.

[8/11/94 public]
Pass to Rober for hostdata and keytab fvt update.

[9/1/94 public]
As it turns out, only output messages in negative tests had to be updated.
The positive tests were still all passing.  Submitted changes.

[9/26/94 public]
closed.



CR Number                     : 11092
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gdssetup
Short Description             : gdssetup testsuite: need a
journal filter
Reported Date                 : 6/27/94
Found in Baseline             : 1.1
Found Date                    : 6/27/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : src/test/functional/directory/gds/tools/TET_filter.gdssetup
Sensitivity                   : public

[6/27/94 public]
Since we provide filters for the journals of all other tests, we should
have a filter for the gdssetup testsuite journal.

[7/11/94 public]
Filter submitted a couple of days ago.



CR Number                     : 11091
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dced
Short Description             : Incorrect install directory in
REL* tests.
Reported Date                 : 6/27/94
Found in Baseline             : 1.1
Found Date                    : 6/27/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : Makefile
Sensitivity                   : public

[6/27/94 public]

The REL002 & REL003 are using a different install directory path than
REL001.  Change for consistency.

[6/27/94 [ublic]

Done.



CR Number                     : 11077
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dced
Short Description             : DCED Rel test module names must be
renamed to have duoble 0's for consistency with other systests.
Reported Date                 : 6/24/94
Found in Baseline             : 1.1
Found Date                    : 6/24/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : dcdrel003_ktb.tcl
Sensitivity                   : public

[6/24/94 public]

The DCED rel test modules need to be renamed to have '00' instead
of '0 'in their names.

[6/27/93 public]

Done.

[7/21/94 public]

Submitted DCDREL001 modules and defuncted DCDREL01 modules.



CR Number                     : 11054
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gdssetup
Short Description             : valid testcase missing
Reported Date                 : 6/22/94
Found in Baseline             : 1.1
Found Date                    : 6/22/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : test/functional/directory/gds/ts/gdssetup/lib/valid/Makefile
Sensitivity                   : public

[6/22/94 public]
The testcase sv_init1.cleanup is missing from the gdssetup valid testsuite.
This is preventing all the valid testcases from being installed.

[6/23/94 public]
Remove sv_init1.cleanup and sv_init3.cleanup from the ILIST
of test/functional/directory/gds/ts/gdssetup/lib/valid/Makefile.



CR Number                     : 11044
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : rpc
Subcomponent Name             : i18n
Short Description             : some code set i14y evaluation failed on 486
Reported Date                 : 6/22/94
Found in Baseline             : 1.1b10
Found Date                    : 6/22/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : cs_s_stub.c
Sensitivity                   : public

[6/22/94 public]

  Default logic for code set I14Y failed on 486 functional tests.
The error says "conversion between codesets not possible", when it
should be.

[9/15/94 public]
This is impoartant - raising to P1.

[9/23/94 public]

  The problem was fixed by copying the terminating null bytes into
a buffer.

[9/26/94 public]

  Nightly build worked.



CR Number                     : 11043
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : rpc
Subcomponent Name             : i18n
Short Description             : code set registry functional test
need to be machine dependent
Reported Date                 : 6/22/94
Found in Baseline             : 1.1b10
Found Date                    : 6/22/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : access_cs_rgy.c code_set_registry.txt
Sensitivity                   : public

[6/22/94 public]

  Since code set names differ platform by platform, functional test for
code set registry access needs to be separated to a machine dependent
directory.  The functional test failed on 486 (and probably RIOS, too)
due to the code set name mismatch problem.

[6/22/94 public]

  Fix was submitted.

  src/test/functional/rpc/runtime/i18n_api/ts/cs_rgy/HP800/access_cs_rgy.c
				"		    /RIOS/access_cs_rgy.c
				"		    /AT386/access_cs_rgy.c
				"		    /HP800/code_set_registry.txt

  HP code_set_registry.txt was modified to null-out Korean entry, so the
negative test for accessing code set registry could pass.

[6/23/94 public]

  Fix worked.  Done.



CR Number                     : 11041
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : rpc
Subcomponent Name             : i18n
Short Description             : wchar_t functional test failed
Reported Date                 : 6/22/94
Found in Baseline             : 1.1b9
Found Date                    : 6/22/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : cs_s_stub.c plus functional tests.
Sensitivity                   : public

[6/22/94 public]

  Most of the wchar_t functional tests for RPC I18N API failed, probably
due to the following problem.  I've been noticing it for a while, but could
not get fixed due to the other higher priority tasks.

   Current implementation for wchar_t_to_netcs has the following signature:

       PUBLIC void wchar_t_to_netcs
       (
               rpc_binding_handle_t    h,
               unsigned32              tag,
               wchar_t                 *ldata,
               unsigned32              l_data_len,
               idl_byte                *wdata,
               unsigned32              *p_w_data_len,
               error_status_t          *status
       )

   'l_data_len' is the number of wchar_t elements in 'ldata'.  Since we will
 not send wchar_t type data over the network (wchar_t is a process code, which
 is not compatible with various operating systems), we have to convert
 wchar_t data type to multibyte data type.

   When this conversion takes place, the resulting multibyte length is
 different from 'l_data_len'.  In case of fixed length array and varying
 length array, 'p_w_data_len' is NULL.  IDL library assumes 'l_data_len'
 will be the length of network data. (And that's the specification of
 I-char support in IDL).  The length of multibyte string is usually larger
 than the length of wchar_t string.

   So when server receives multibyte string, it is usually shorter than
 the entire multibyte string.  Consequently, at the server side, when
 this multibyte string is converted to wchar_t string, 'invalid character
 error' occurs.

[9/15/94 public]
This is important - raising to P1.

[9/23/94 public]

  This problem was fixed partially with the fix CR 11044.  Currently, wchar_t
operations are working with fixed and varying array data types.  It still
has problems with conformant array data type.  I will still try to fix
it, but it probably goes into un-integrated tree, due to the main line tree
closing.

[9/27/94 public]

  Well, I found the fix before the tree is completely closed.  The fix is
mostly in functional tests.  size_is value should have been 
'(wcslen + 1) * sizeof(wchar_t)'.

[9/28/94 public]

  Nightly worked.  Done.



CR Number                     : 11034
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : mavrostest
Short Description             : Can't link against libasn1.a
Reported Date                 : 6/22/94
Found in Baseline             : 1.1
Found Date                    : 6/22/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : 
test/directory/gds/mavrostest/Makefile
Sensitivity                   : public

[6/22/94 public]
oidt and test_mvr try to link against libasn1.a.  libasn1.a is no longer
produced as an independent library; it is part of libdce.

Fix is to remove -lasn1 from the libs lines.

[6/22/94 public]
Fix submitted.



CR Number                     : 11031
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : use #!/usr/bin/dcecp
Reported Date                 : 6/21/94
Found in Baseline             : 1.1b9
Found Date                    : 6/21/94
Severity                      : D
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b20
Affected File(s)              : lots
Sensitivity                   : public

[6/21/94 public]
John Bowe writes:

 Why do dcecp scripts (at least the few I've seen in the test tree) start
 with #!/bin/dcecp instead of #!/usr/bin/dcecp?  The program is installed
 in /usr/bin/dcecp.  (the only reason /bin/dcecp works on osf1 (and SunOS)
 is that /bin is a symlink to /usr/bin.)  Also, POSIX (or whatever standards
 body) wants everything in /usr/bin...

All of our test scripts have #!/bin/dcecp as does test_suite.tcl.

On the bright side, when invoked with tcc these aren't used, it's
actually just a hack to let you run the script without having to bother
with TET.  Hence the low priority.

[9/28/94 public]
fixed, submitted.
 * no more #!/bin/dcecp in any file
 * moved all tests to the approved place: src/test/functional/admin/dcecp/*
 * taught ODE about tet_scen, tetexec.cfg, *.tcl *.dcp comment leaders

[10/6/94 public]
closed.



CR Number                     : 11026
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 12474
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dts
Subcomponent Name             : test_dtscp.ksh
Short Description             : dts dtscp tests need re-work
Reported Date                 : 6/21/94
Found in Baseline             : 1.1
Found Date                    : 6/21/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b21
Affected File(s)              : dtscp.ksh test_dtscp.*
Sensitivity                   : public

[6/21/94 public]

The dtscp interface tests need updating. 

1) The help command sections modification to pick up minor changes in syntax
between 1.0.x and 1.1.

2) It may be worth thinking about updating the test to make it less
sensitive to minor changes in values. At present, the tests are very
sensitive to "off by one" errors and timing problems which do not 
represent errors in the interface, but differences in state.

3) All of the above should be considered in light of the the fact that 
dtscp is deprecated in DCE 1.1 and will ultimately be replaced by
dcecp.

[10/4/94 public]
1. - modified expected results
2. - Added a few sleeps to make sure state tests come out correct
3. - the dtscp test tests specific commands dcecp test don't.

Did all three of these things under OT 12474.
Marking as fixed since this is more detailed.



CR Number                     : 11024
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : aud
Subcomponent Name             : functional test
Short Description             : use dcecp as audit control program
Reported Date                 : 6/21/94
Found in Baseline             : 1.1
Found Date                    : 6/21/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : most test suites
Sensitivity                   : public

[6/21/94 public]
Use dcecp as audit control program.

[6/24/94 public]
done.



CR Number                     : 11022
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : keytab and hostdata FVT
Short Description             : dcecp keytab and hostdata
FVT's should use tet_setup to invoke setup script as self/root.
Reported Date                 : 6/21/94
Found in Baseline             : 1.1
Found Date                    : 6/21/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : Many
Sensitivity                   : public

[6/21/94 public]

The dcecp keytab and hostdata FVT's should invoke the ACL operations
within their *_setup.tcl scripts via the tet_setup program.  This will
have those ACL operations executed as root & self.

Also, the tests should be modified to get their host/cell out of the 
tetexec.cfg file.  They currently do not.

[6/22/94 public]

Fixed.

[7/5/94 public]
closed.



CR Number                     : 11014
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : dlg_client
Short Description             : dlg test not checking result of sec_acl_test correctly
Reported Date                 : 6/20/94
Found in Baseline             : 1.1
Found Date                    : 6/20/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : dlg_intermediary.c
Sensitivity                   : public

[7/25/94 public]

Added logic to test return of sec_acl_test_access
Actually fixed and tested this bug weeks ago but
needed to test mandatory baselines in fixedinbaseline

[6/20/94 public]

I was playing around with the test you sent me
and I modified one of the entries in dlg_acl_setup

The first line in the file dlg_acl_setup was:

acl_edit /.:/myfilesystem/mike -m user:dlg_test:rwx -m user_delegate:dlg_svr:rwx


However, I tried:

acl_edit /.:/myfilesystem/mike -m user:dlg_test: -m user_delegate:dlg_svr:rwx

So now the ACL for /.:/myfilesystem/mike is:


# SEC_ACL for /.:/myfilesystem/mike:
# Default cell = /.../clam_cell.osf.org
mask_obj:-rwx---
user:dlg_test:-------
user_delegate:dlg_svr:-rwx---


Now when I tried dlg_client with no arguments it still passed:

root@clam {61} ==> dce_login cell_admin -dce-
Password must be changed!
You have mail.
root@clam {5} ==> ./dlg_client
PASSED: Delegation test


I would have thought that the test should have failed,
since dlg_test doesn't have permissions on /.:/myfilesystem/mike.

Even if I change mask_obj to no permissions the test still passes:
# SEC_ACL for /.:/myfilesystem/mike:
# Default cell = /.../clam_cell.osf.org
mask_obj:-------
user:dlg_test:-------
user_delegate:dlg_svr:-rwx---   #effective:-------
sec_acl_edit> co
sec_acl_edit> quit

I tried this test with an old build (approx 2 weeks old)
and the test failed as I would have expected.

root@clam {13} ==> ./dlg_client
FAILED: Delegation test; Error from dlg_test_access: 1712201b

This was before the dce_error_inq_text was added to the test.

However, when I try the test with last night's 486 nightly build.
The test PASSES which is incorrect.

I get the same results on an HP/UX system too.

[6/20/94 public]
You're supposed to be able to delegate.  The ACLs are on an object in a sample
server.  The test uses delegates to see if the access check for delegates is
correct, not to see if you can delegate when you change an ACL (I've updated
the description above to reflect the real problem).  The result of the
test_access is not being checked correctly (only the status is checked, not
the return value).  Reassigned to bhaim, since he's dealing with this test at
the moment.



CR Number                     : 11010
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : aud
Subcomponent Name             : cp_filter
Short Description             : auditcp filter catalog coredumps
Reported Date                 : 6/20/94
Found in Baseline             : 1.1
Found Date                    : 6/20/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : src/test/security/audit/ts/cp_filter/cp_filter
Sensitivity                   : public

[6/20/94 public]

In attempting to run the audit tests, I noted that the "START: cp_filter03" 
test was hanging "forever".  I attempted to run the command found in this
test manually. After an extended period of time without response from auditcp,
it dumped core due to "segmentation violation".  The core dump appear below:

>trace
 0 audfilter_catalog + 0x000003a8 (0x7aff2b40, 0x4000ec08, 0x7afe3728, 0x2e205573)
 1 cma__dispatch@libdce + 0x000003c0 (0x7aff2ac0, 0x1, 0x40, 0x7afe6430)
 2 _fp_status + 0x00000040 (Address not found (UE302)

[6/20/94 public]
Testcase cp_filter03 has a hardcoded cell name in it ... and I'm guessing
you didn't name your cell 'torolab.ibm.com' ?

IBM will submit the fix as soon as the tree is open.

[6/22/94 public]
fixed.



CR Number                     : 10990
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : aud
Subcomponent Name             : functional test
Short Description             : api_filter03 fails
Reported Date                 : 6/17/94
Found in Baseline             : 1.1
Found Date                    : 6/17/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : cp_filter, addfilter.cell delfilter.cell
Sensitivity                   : public

[6/17/94 public]
api_filter03 fails on 486.  No further information available in journal or
log.

[6/17/94 public]
Also failed on RIOS earlier this week.

[6/17/94 public]
Reproduced again on AT386 and HP.  The probable cause is a series of
'command execution failures':

  Enter Subject Name (press enter if no more subject): Enter Audit Condition (press entrer if no more condition): Enter Aud
  it Condition (press entrer if no more condition): Enter Audit Action (press entrer if no more action): Enter Audit Action
   (press entrer if no more action): Enter Event Class (press enter if no more event classes): Enter Event Class (press ent
  er if no more event classes): More Guides? (n)/y command excution failed
  
  dce_aud_start
  TestCase2 succeeded
  deleting filter group1 took: 15212
  adding filter cell took: 12896
  Start run_new_test
  aud_client_server pw_princ1= princ1, pw_princ2= princ2
  
   princ2prec->key.tagged_union.plain = princ2, plain= princ2
  servername= hosts/gemini/self
  
  inside the TRY-CATCH: principal= 2Start aud_testf_case3
  
  client is aud_test_princ2
  
  calling dce_aud_open 
  cannot make /opt/dcelocal/var/audit/client/12651/ directory
  
  dce_aud_open returns bad status= 10323064
  Enter
  0 for principal
  1 for foreign principal
  2 for group
  3 for foreign group
  4 for cell
  5 for cell overridable
  6 for world
  7 for world overridable
  Enter Subject Name (press enter if no more subject): command excution failed
  Enter
  0 for principal
  1 for foreign principal
  2 for group
  3 for foreign group
  4 for cell
  5 for cell overridable
  6 for world
  7 for world overridable
  Enter Audit Condition (press entrer if no more condition): Enter Audit Condition (press entrer if no more condition): Ent
  er Audit Action (press entrer if no more action): Enter Audit Action (press entrer if no more action): Enter Event Class 
  (press enter if no more event classes): Enter Event Class (press enter if no more event classes): More Guides? (n)/y 
  dce_aud_start
  TestCase3 succeeded
  deleting filter cell took: 13143
  adding filter world took: 16365

[weisz 6/22/94 public] 
fixed.
removed hardcoded cell name assignement.



CR Number                     : 10987
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : aud
Subcomponent Name             : api_log
Short Description             : api_log01 failed
Reported Date                 : 6/17/94
Found in Baseline             : 1.1
Found Date                    : 6/17/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : 
test/security/audit/ts/api_log/api_log
Sensitivity                   : public

[6/17/94 public]
No more information is available in either the journal or the log from the
test.

[6/17/94 public]
This failed because 'aud_test not found.'  Actually, it means that none of
the results of this test have any meaning.

Solution is to provide a path for 'aud_test' in the testsuite.

[6/20/94 public]
Fix submitted.



CR Number                     : 10986
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : aud
Subcomponent Name             : fvt
Short Description             : need comprehensive p/f result
Reported Date                 : 6/17/94
Found in Baseline             : 1.1
Found Date                    : 6/17/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b16
Affected File(s)              : api_log, api_log_to_daemon, api_filter, ecfile_filter
Sensitivity                   : public

[6/17/94 public]
Each test suite should log a Pass/Fail result for the overall result
of the suite.  I.e.  if all test cases pass then the suite passes,
otherwise the suite fails.  Also,  the result should be logged with a
unique message such as:

	Suite result <testsuite>:  {PASS/FAIL/NORESULT]

This would make extracting the basic test results from the journal file
much easier.

[8/22/94 public]
Replaced hardcoded tet_results of PASS, with actual results of the suite.



CR Number                     : 10960
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : rpc
Subcomponent Name             : 
Short Description             : idl test mtsvary fails for DG
Reported Date                 : 6/15/94
Found in Baseline             : 1.1
Found Date                    : 6/15/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : rpc/runtime/dg.c rpc/runtime/dgccall.c
Sensitivity                   : public

[6/15/94 public]

While running the idl tests, the pipefault and threads tests failed
for tcpip and mtsvary failed for udp.

The following is the output in the results file for tcp:

****TEST pipefault START****
PASS 0
Pipe empty exception
Pipe order exception
Binding my_handle
Unbinding my_handle
***FAILURE***: Unexpected exception
***FAILURE***: unexpected CMA exception rpc_x_unknown_reject
Binding my_handle
Unbinding my_handle
Pipe discipline exception
Test Complete
Summary: 1 passes, 1 failures
****server pipefault output****
****TEST pipefault END****
Client return code for pipefault: 1
****TEST threads START****
Error in thread_main, thread #3
Error in thread_main, thread #0
Error in thread_main, thread #5
Error in thread_main, thread #2
Error in thread_main, thread #7
Error in thread_main, thread #8
Error in thread_main, thread #9
Thread 0 exited with non-NULL context!
Thread 2 exited with non-NULL context!
Thread 3 exited with non-NULL context!
Thread 5 exited with non-NULL context!
Thread 7 exited with non-NULL context!
Thread 8 exited with non-NULL context!
Thread 9 exited with non-NULL context!
PASS 0
***FAILURE***: unexpected CMA exception rpc_x_connection_closed
***FAILURE***: unexpected CMA exception rpc_x_connection_closed
***FAILURE***: unexpected CMA exception rpc_x_connection_closed
***FAILURE***: unexpected CMA exception rpc_x_connection_closed
***FAILURE***: unexpected CMA exception rpc_x_connection_closed
***FAILURE***: unexpected CMA exception rpc_x_connection_closed
***FAILURE***: unexpected CMA exception rpc_x_connection_closed
***FAILURE***: unexpected CMA exception rpc_x_connect_rejected
****server threads output****
****TEST threads END****
Client return code for threads: 0


The following is the output in the results file for udp:

****TEST mtsvary START****
PASS 0
op0(j=8) completed - 0 failures
op0(j=9) completed - 0 failures
op0(j=10) completed - 0 failures
op0(j=11) completed - 0 failures
op0(j=12) completed - 0 failures
op1 completed - 0 failures
op2 completed - 0 failures
Returned from op2 call with inside-out data limits
***FAILURE***: unexpected CMA exception rpc_x_invalid_bound
****server mtsvary output****
****TEST mtsvary END****
Client return code for mtsvary: 0

[6/15/94 public]
Ran the complete idl test suite for cn and dg on RIOS, 486, and HP.
This was on the nightly build of 6/14-15 (13-14 for RIOS).

The pipfault test is a known failure, see ot 10677 and 9550.
A fix is forthcomming on this.

The threads test passes on all three platforms.

The mtsvary test, however, fails with the DG protocol.
Since I have integrated some idl enhancements, I will
investigate, but HP should also look at this since the DG
runtime has changed.

[6/15/94 public]
Tracked this down to the following change from Rico @ DEC that
I integrated in to the idl library.

src/idl/lib/ndrui.c:

10a11,14
>  * Revision 1.1.6.3  1994/05/31  18:56:43  tom
>  * 	From DEC: unmarshalling security enhancement (OT 10807).
>  * 	[1994/05/31  18:55:47  tom]
>  *
14c18
<  *
---
>  * 
1184a1189,1199
>     if (Z_values != NULL)   /* NULL possible for transmit_as case */
>     {
>         for (i=0; i<dimensionality; i++)
>         {
>             if ((range_list[i].upper - range_list[i].lower) > Z_values[i])
>             {
>                 /* Bogus data stream with A,B values outside of Z bound value */
>                 RAISE(rpc_x_invalid_bound);
>             }
>         }
>     }

What is strange (but I must be missing something) is the test code
seems to explicitly catch this exception.

src/rpc/idl/mtsvary/client_aux.c:

    TRY
        f = -1;
        l = 10;
        opc1(h, v, b, hy, u, sm2, &f, &l, a);
        printf("**Failure**: first call to opc1 didn't get exception\n");
        failures++;
    CATCH(rpc_x_invalid_bound)
#ifndef _MSDOS
    CATCH_ALL
        printf("Unexpected exception in first call to opc1\n");
        print_exception(THIS_CATCH);
        failures++;
#endif
    ENDTRY

Rico, any help?

[6/16/94 public]
The problem is definitely in the idl library change.  The
CATCH caluse *is* catching the first invalid_bounds exception,
however the new code is raising *another* exception that
the program does not expect.

For some reason, the second exception either does not occur
when using the CN protocol, or it is supressed.
Do an DG type from HP (Mark, Seiichi) think that there
has been any changes to the DG code that would show this problem?

[6/16/94 public]

I'm not sure if this helps. But, could you try RPC_DEBUG=33.1 (no private
socket)? If this changes the behavior, then it's related to the private
socket.

[6/16/94 public]
Turning private socket off has no affect.
I knew it wasn't the private socket code exactly, but something
having to do with the exception handling state of the DG code
which may affect this.  I'm not sure that trying to figure out
why it fails on DG and passes on CN isn't a red herring, but
its the only idea I have right now.

[6/16/94 public]
Well, after most of the day chasing this, I have to throw it back 
to the DG runtime.  I built a libdce with the bl-9 runtime and
the latest IDL library and the mtsvary test passes.

Plenty of DG files have changed since then, including some cancelability
fixes Mark submitted, and additional MBF code.  Here are the list of defects
in the 'fix'state relating to DG rpc.

10852 rpc   fix    tatsu_s@ 06/02/94 A 1 dced functional tests (keytab_create, h
10808 rpc   fix    markar   05/31/94 B 2 recv_pkt_private does not cancel if rec
10444 rpc   fix    tatsu_s  04/22/94 C 2 WAY failure gets mapped to comm failure
10377 rpc   fix    markar   04/14/94 B 2 ftserver dumps core
10345 rpc   fix    rico     04/13/94 B 1 unmarshalling error in 103 interpreter 
 9614 rpc   fix    tatsu_s  12/14/93 C 2 WAY callback failure with pkt_privacy
 9551 rpc   fix    tatsu_s  11/23/93 B 2 DG fault PDU not decrypted in pkt_priva
 8643 rpc   fix    tatsu_s  09/21/93 B 2 CL rpc does not consist with encryption
 8053 rpc   fix    tatsu_s  05/25/93 C 3 Perf test security errors
 7465 rpc   fix    tatsu_s  03/10/93 C 3 assert in pkt_alloc()

[6/17/94 public]

The second exception is raised by the second opc1() call in the
unmarshaling code. (The first opc1() call raises the invalid bound
exception in the marshaling code before transmitting any data to the
server.) What's different between CN and DG? It's the fragment size. The
second opc1() call's IN/OUT data sizes are 2238/2242 bytes, which fit into
a single fragment in CN, but not in DG. Yup, it's a bug in MBF. The two
lines fix will be included in the next MBF code drop. What exactly wrong
was the server sending the fragment which size wasn't a multiple of 8
bytes.

[6/27/94 public]

The fix was submitted.

[6/27/94 public]
And I verified that indeed, the idl tests pass with the nightly of 6/26-27.
Closed.



CR Number                     : 10955
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : Makefile
Short Description             : TCL TET FVT's are dieing with
signal 26.  Makefile should indicate this as SPCIAL signal
Reported Date                 : 6/15/94
Found in Baseline             : 1.1
Found Date                    : 6/15/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : test/tet/src/tcl/api/Makefile
Sensitivity                   : public

[6/15/94 public]

The ./test/tet/src/tcl/api/Makefile needs to have 26 in its SPEC Signal
list.

[6/21/94 public]

Added VTALRM signal (26) into SPEC_SIGNALS in Makefile

[6/22/94 public]
closed.



CR Number                     : 10896
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : aud
Subcomponent Name             : cp_filter
Short Description             : cp_filter fails to detect
error condition in test 5
Reported Date                 : 6/8/94
Found in Baseline             : 1.1
Found Date                    : 6/8/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1
Affected File(s)              : test/security/audit/ts/cp_filter/cp_filter
Sensitivity                   : public

[6/8/94 public]
cp_filter05 shows PASS despite a critical error.

START: cp_filter05 started
Enter
0 for principal
1 for foreign principal
2 for group
3 for foreign group
4 for cell
5 for cell overridable
6 for world
7 for world overridable
Enter Subject Name (press enter if no more subject): Enter Audit Condition (press entrer if no more condition): Enter Audit Condi
tion (press entrer if no more condition): Enter Audit Action (press entrer if no more action): Enter Audit Action (press entrer i
f no more action): Enter Event Class (press enter if no more event classes): Enter Event Class (press enter if no more event clas
ses): More Guides? (n)/y command excution failed

ERROR: could not add filter 1

OK: auditcp audfilter catalog - successful
Enter
0 for principal
1 for foreign principal
2 for group
3 for foreign group
4 for cell
5 for cell overridable
6 for world
7 for world overridable
Enter Subject Name (press enter if no more subject): no filter

return from auditcp audfilter show for aud_test_princ2 = 0

PASS: cp_filter05 passed

[6/9/94 public]
fixed

[6/9/94 public]
Fix verified via FVT.



CR Number                     : 10889
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : aud
Subcomponent Name             : auditd_startup
Short Description             : method for determining
preconditions is not correct
Reported Date                 : 6/8/94
Found in Baseline             : 1.1
Found Date                    : 6/8/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b10
Affected File(s)              : 
test/security/audit/ts/auditd_startup/auditd_startup
Sensitivity                   : public

[6/8/94 public]
The auditd_startup testsuite uses the following code to determine whether
auditd is already running (and, therefore, the test precondition is not
met):

  total_auditd=$( ps -e | grep -c auditd )
  auditd_startup=$( ps -e | grep -c auditd_startup )
  (nr_of_auditds = total_auditd - auditd_startup)) 
    
This works as long as TCC is invoked with 'all' testsuites.  However, if
you invoke the 'auditd_startup' test suite independently than the
precondition test fails.  This is because the grep for 'total_auditd' finds
four auditds:

	- the 'grep auditd' process
	- the 'tcc auditd_startup' process
	- two TET process with the name of the testsuite in the path

so, total-auditd = 4, auditd_startup = 1, and the testsuite incorrectly
believes auditd is already running.  Also, it also fails if you happen to
be logging TET output to a file named after the test suite (e.g., 'tcc
auditd_startup | tee log.auditd_startup').

A workaround is to change the syntax of the 'grep -c' commands to:

	grep -c "auditd "
	grep -c "auditd_startup "

[6/8/94 public]
Fix submitted.

[6/8/94 public]
Nope, that wasn't the right fix.  Currently embedding OS-dependent ps
switches in test.

[6/10/94 public]
Fixed, once again.



CR Number                     : 10879
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : systest/tools/remoteopen.c
Short Description             : Compiler warnings
Reported Date                 : 6/7/94
Found in Baseline             : 1.0.3
Found Date                    : 6/7/94
Severity                      : D
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.2
Fixed In Baseline             : 1.1b11
Affected File(s)              : nosupport/test/systest/tools/remoteopen.c
Sensitivity                   : public

[6/7/94 public]


Note, this file has been moved to unsupported area 
(nosupport/test/systest/tools/remoteope) since 1.0.3 release.

Approximately line 400
----------------------

   * of the of the given command plus the length of the suffix plus 1 for the
   * EOS character.
   */
<       buflen = strlen(cmdmsg->command) + strlen(suffix) + 1;
---
>       buflen = strlen((char *)cmdmsg->command) + strlen(suffix) + 1;
        buf = allocateMemory( buflen );

cmdmsg->command is defined in idl file as char array, which transfers to
idl_char, which is an unsigned char.


Approximately line 480
-----------------------

                                  (unsigned32*)&st);
        if (st != rpc_s_ok)
        {

<              dce_error_inq_text( st, error_string, &errst );
---
>              dce_error_inq_text( st, (unsigned char *)error_string, &errst );
               fprintf( stderr, "%s\n", error_string );
               exit(errno);
        }

dce_error_inq_text expects the 2nd parameter's type tobe unsigned char *.

[7/7/94 public]
above fixes submitted.



CR Number                     : 10835
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cds
Subcomponent Name             : tests
Short Description             : negative cds tests should be
separate from killer
Reported Date                 : 6/2/94
Found in Baseline             : 1.1
Found Date                    : 6/2/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : cp_killer.sh,cp_test.sh,cp_negative.tests
Sensitivity                   : public
With the inclusion of the subtree and foreign tests, killer was no
longer strictly a positive test suite.  Thus the completion status of
killer became meaningless, forcing the tester to review the entire
killer.log on completion (no small task).
The subtree, foreign & negative tests should be taken out of killer, and 
the completion status reported to the user as it had been previously. 
Also, cp_test.sh should use somewhat intelligent defaults for the 
clearinghouse names.
In addition, the cp_negative.tests file should be created in the 
test tree, although it will not be part of killer.  (batteries sold
separately)
6/10/94
All negative tests are pulled out of killer.  "Subtree" and "foreign"
tests must be run separately.
cp_negative.tests is provided, also to be run separately.

[6/2/94 public]



CR Number                     : 10830
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cds
Subcomponent Name             : 
Short Description             : cp_killer test fails
Reported Date                 : 6/1/94
Found in Baseline             : 1.1
Found Date                    : 6/1/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : test/directory/cds/Makefile
Sensitivity                   : public

[6/1/94 public]

Tests have been added to cp_killer but the Makefile has not been modified
to place the tests in the install tree.

[6/10/94 public]
Added test scripts to install list.



CR Number                     : 10822
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : audrel001
Short Description             : audrel001 fails with unexpected signal
Reported Date                 : 6/1/94
Found in Baseline             : 1.1
Found Date                    : 6/1/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : audrel001.c
Sensitivity                   : public

[6/1/94 public]

The audrel001 system test fails with the following errors:

AIX	- unexpected signal 34 (unknown signal) received

OSF/1	- unexpected signal 26 (unknown signal) received

HP-UX	- unexpected signal 20 (unknown signal) received



CR Number                     : 10813
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : systest
Subcomponent Name             : test/systest/dced/ts/lib
Short Description             : Syntax error
Reported Date                 : 5/31/94
Found in Baseline             : 1.1
Found Date                    : 5/31/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : /systest/Makefile /systest/dced/ts/rel/Makefile
Sensitivity                   : public

[5/31/94 public]

See related OT # 10805.

"/project/dce/build/dce1.1-snap/src/test/systest/dced/ts/lib/dcd_st_utils.c",\
 line 56.112: 1506-046 (S) Syntax error.
"/project/dce/build/dce1.1-snap/src/test/systest/dced/ts/lib/dcd_st_utils.c",\
 line 56.183: 1506-046 (S) Syntax error.
"/project/dce/build/dce1.1-snap/src/test/systest/dced/ts/lib/dcd_st_utils.c",\
 line 59.112: 1506-046 (S) Syntax error.
"/project/dce/build/dce1.1-snap/src/test/systest/dced/ts/lib/dcd_st_utils.c",\
 line 59.193: 1506-046 (S) Syntax error.

Etc.

[05/31/94 public]
Fix submitted.

[06/06/94 public]
This was fixed by changing the makefile to not build the dced system tests.



CR Number                     : 10805
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa,rs6000
S/W Ref Platform              : hpux,aix
Component Name                : systest
Subcomponent Name             : test/systest/ts/rel/dcdrel01
Short Description             : Unsatisfied symbols
Reported Date                 : 5/31/94
Found in Baseline             : 1.1
Found Date                    : 5/31/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : test/systest/dced/ts/rel/dcdrel01/Makefile
Sensitivity                   : public

[5/31/94 public]

[ /test/systest/dced/ts/rel/dcdrel01 at 01:32 (AM) Tuesday ]

c89   -g   -z -Wl,-Bimmediate,-Bnonfatal,-a,default,+b,/lib:/usr/lib    -L. \
 -L/u3/devobj/sb/nb_ux/src/test/systest/dced/ts/rel/dcdrel01 \
 -L/project/dce/build/dce1.1-snap/src/test/systest/dced/ts/rel/dcdrel01 \
 -L../../lib -L/u3/devobj/sb/nb_ux/src/test/systest/dced/ts/lib \
 -L/project/dce/build/dce1.1-snap/src/test/systest/dced/ts/lib \
 -L../../../lib -L/u3/devobj/sb/nb_ux/src/test/systest/dced/lib \
 -L/project/dce/build/dce1.1-snap/src/test/systest/dced/lib \
 -L/u3/devobj/sb/nb_ux/export/hp800/usr/shlib \
 -L/project/dce/build/dce1.1-snap/export/hp800/usr/shlib -L/usr/shlib \
 -L/u3/devobj/sb/nb_ux/export/hp800/usr/lib \
 -L/project/dce/build/dce1.1-snap/export/hp800/usr/lib \
 -o dcdrel_server.X dcdrel_server.o dcdrel01_smgr.o dcdrel01a_sstub.o \
 -ldceutils -ldcetst -ldce -ldcdtst  -ltet_dummy
/bin/ld: Unsatisfied symbols:
   rpc_binding_reset (code)
   rpc_server_use_all_protseqs (code)
   rpc_ns_binding_unexport (code)
   rpc_ns_binding_export (code)
   rpc_binding_set_object (code)
   rpc_ns_group_mbr_add (code)
   rpc_mgmt_set_authorization_fn (code)
   rpc_server_register_if (code)
   rpc_binding_copy (code)
*** Error code 1

Etc.

[5/31/94 public]

Corrected platforms field: errors occurred on HP and RIOS.

[05/31/94 public]
Fix submitted.

[06/22/94 public]
Re-opened with lower priority (we worked around it by not having build
visit that directory) and moved responsibilities.

[06/27/94 public]
Flipped library sequence in the link.



CR Number                     : 10803
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : aud
Subcomponent Name             : functional tests
Short Description             : minor cleanup
Reported Date                 : 5/30/94
Found in Baseline             : 1.1
Found Date                    : 5/30/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : cp_filter auditd_acl
Sensitivity                   : public

[5/30/94 public]

Suite cp_filter needs to remove the audit filters it creates, after
the suite ends.  Also auditd should start without "-a" option, since
default acl does not allow auditd to log audit records.
Suite auditd_acl should check for "crw" permissions in the acl, and 
not for "crwl" since default acl does not allow logging.

[5/30/94 public]
fixed

[6/9/94 public]
closed.



CR Number                     : 10791
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : 
Short Description             : submit dced system tests
Reported Date                 : 5/26/94
Found in Baseline             : 1.1
Found Date                    : 5/26/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : test/systest/dced/*
Sensitivity                   : public

[5/26/94 public]

Submit dced system tests.

[6/24 public]

Submitted working set of files so that REL001 is now operational.
Additional functionality is required however before the test 
is complete.

[6/27/94 public]

Submitted REL003 (complete) and REL002 (completion awaiting functionality
from DCED)

[7/21/94 public]

Submitted extensive modifications to REL001, removing use of 
TET stubs, improving error reporting, and adding a second
server on each node to test out the dced endpoint registration
API call (once it's defined and implemented.) Further changes
to REL001 should be entered via new CR's.



CR Number                     : 10764
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : aud
Subcomponent Name             : ecfile_filter
Short Description             : aud_testec dumps core
Reported Date                 : 5/25/94
Found in Baseline             : 1.1
Found Date                    : 5/25/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : aud_testec.c startauditd stopauditd
Sensitivity                   : public

[5/25/94 public]
aud_testec dumps core during ecfile_filter01

With binaries from 5/24:

  START: ecfile_filter1 started
  
  Enter
  0 for principal
  1 for foreign principal
  2 for group
  3 for foreign group
  4 for cell
  5 for cell overridable
  6 for world
  7 for world overridable
  Enter Audit Condition (press entrer if no more condition): Enter Audit Condition (press entrer if no more condition): Enter Audit Action (press entrer if no more action): Enter Audit Action (press entrer if no more action): Enter Event Class (press enter if no more event classes): Enter Event Class (press enter if no more event classes): More Guides? (n)/y ecfile_filter1[7]: 2337 Memory fault(coredump)
  16#8b
  
  
  ERROR: ecfile_filter01 failed

Not much information from the core, unfortunately:

[6/9/94 public]
Reproduced with binaries from 6/7/94.

[6/10/94 public]
This occurs both when executed with all test suites, and individually.
Here's information from SVC:

1994-06-10-07:25:26.370-04:00I----- auditd NOTICE_VERBOSE aud general 0xa44adad0 set daemon locale: (null)
1994-06-10-07:25:26.690-04:00I----- auditd NOTICE aud general 0xa44adad0 the audit daemon started
1994-06-10-07:25:27.240-04:00I----- auditd NOTICE_VERBOSE aud general 0xa44adad0 daemon registered interfaces with RPC runtime
1994-06-10-07:25:29.969-04:00I----- auditd NOTICE_VERBOSE aud general 0xa44adad0 daemon registered its authentication identity hosts/gemini/self with RPC runtime
1994-06-10-07:25:30.009-04:00I----- auditd NOTICE_VERBOSE aud general 0x004d5918 daemon is ready to listen to its interfaces
1994-06-10-07:25:38.549-04:00I----- auditcp DEBUG1 aud msgs 0xa44adad0 input_evt_table: File /opt/dcelocal/etc/audit/ec/dce_audit_filter_modify opened

1994-06-10-07:25:38.709-04:00I----- auditcp DEBUG1 aud msgs 0xa44adad0 DoKeyWord: Find keyword ECN with residual string 0

1994-06-10-07:25:38.709-04:00I----- auditcp DEBUG1 aud msgs 0xa44adad0 DoKeyWord: Find keyword SEP with residual string  0x100 

1994-06-10-07:25:38.719-04:00I----- auditcp DEBUG1 aud msgs 0xa44adad0 input_evt_table: File /opt/dcelocal/etc/audit/ec/dce_audit_filter_modify define event class number 0

1994-06-10-07:25:38.719-04:00I----- auditcp DEBUG1 aud msgs 0xa44adad0 input_evt_table: File /opt/dcelocal/etc/audit/ec/dce_audit_filter_query opened

1994-06-10-07:25:38.719-04:00I----- auditcp DEBUG1 aud msgs 0xa44adad0 DoKeyWord: Find keyword ECN with residual string 1

1994-06-10-07:25:38.719-04:00I----- auditcp DEBUG1 aud msgs 0xa44adad0 DoKeyWord: Find keyword SEP with residual string  0x100 

1994-06-10-07:25:38.719-04:00I----- auditcp DEBUG1 aud msgs 0xa44adad0 input_evt_table: File /opt/dcelocal/etc/audit/ec/dce_audit_filter_query define event class number 1

1994-06-10-07:25:38.729-04:00I----- auditcp DEBUG1 aud msgs 0xa44adad0 input_evt_table: File /opt/dcelocal/etc/audit/ec/dce_dts_mgt_modify opened

1994-06-10-07:25:38.779-04:00I----- auditcp DEBUG1 aud msgs 0xa44adad0 DoKeyWord: Find keyword ECN with residual string 2

1994-06-10-07:25:38.779-04:00I----- auditcp DEBUG1 aud msgs 0xa44adad0 DoKeyWord: Find keyword SEP with residual string  0x200 

1994-06-10-07:25:38.779-04:00I----- auditcp DEBUG1 aud msgs 0xa44adad0 input_evt_table: File /opt/dcelocal/etc/audit/ec/dce_dts_mgt_modify define event class number 2

1994-06-10-07:25:38.779-04:00I----- auditcp DEBUG1 aud msgs 0xa44adad0 input_evt_table: File /opt/dcelocal/etc/audit/ec/dce_dts_mgt_query opened

1994-06-10-07:25:38.789-04:00I----- auditcp DEBUG1 aud msgs 0xa44adad0 DoKeyWord: Find keyword ECN with residual string 3

1994-06-10-07:25:38.789-04:00I----- auditcp DEBUG1 aud msgs 0xa44adad0 DoKeyWord: Find keyword SEP with residual string  0x200 

1994-06-10-07:25:38.789-04:00I----- auditcp DEBUG1 aud msgs 0xa44adad0 input_evt_table: File /opt/dcelocal/etc/audit/ec/dce_dts_mgt_query define event class number 3

1994-06-10-07:25:38.799-04:00I----- auditcp DEBUG1 aud msgs 0xa44adad0 input_evt_table: File /opt/dcelocal/etc/audit/ec/dce_dts_synch opened

1994-06-10-07:25:38.799-04:00I----- auditcp DEBUG1 aud msgs 0xa44adad0 DoKeyWord: Find keyword ECN with residual string 4

1994-06-10-07:25:38.799-04:00I----- auditcp DEBUG1 aud msgs 0xa44adad0 DoKeyWord: Find keyword SEP with residual string  0x200 

1994-06-10-07:25:38.799-04:00I----- auditcp DEBUG1 aud msgs 0xa44adad0 input_evt_table: File /opt/dcelocal/etc/audit/ec/dce_dts_synch define event class number 4

1994-06-10-07:25:38.809-04:00I----- auditcp DEBUG1 aud msgs 0xa44adad0 input_evt_table: File /opt/dcelocal/etc/audit/ec/dce_dts_time_provider opened

1994-06-10-07:25:38.809-04:00I----- auditcp DEBUG1 aud msgs 0xa44adad0 DoKeyWord: Find keyword ECN with residual string 5

1994-06-10-07:25:38.809-04:00I----- auditcp DEBUG1 aud msgs 0xa44adad0 DoKeyWord: Find keyword SEP with residual string  0x200 

1994-06-10-07:25:38.809-04:00I----- auditcp DEBUG1 aud msgs 0xa44adad0 input_evt_table: File /opt/dcelocal/etc/audit/ec/dce_dts_time_provider define event class number 5

1994-06-10-07:25:39.779-04:00I----- auditd DEBUG9 aud general 0x0053d428 audit daemon serving RPC number 1
1994-06-10-07:25:39.789-04:00I----- auditd ERROR aud general 0x0053d428 client has no permission to execute operation

-----------

For some reason aud_testec is dropping core files that don't provide a
stack trace so I had to run it out of gdb.

sec_login_setup_identity() is returning 'sec_rgy_object_not_found'
(probably because of the of our old friend, the security bug(s)) aud_testec
is dying in the subsequent call to sec_login_validate_identity() is
dumping.

The return code from sec_login_setup_identity() needs to be handled.

Program received signal 11, Segmentation fault
0xa432654d in sec_login_validate_cert_auth (-1073743944)
(gdb) bt
#0  0xa432654d in sec_login_validate_cert_auth (-1073743944)
#1  0xa4326758 in sec_login_validate_identity (0, -1073743944, -1073744516, -1073744520, -1073744500)
#2  0x4008fc in aud_client_server (aud_test_case_n=0x400e40 <main+736>)
    at ../../../../../../../src/test/security/audit/ts/ecfile_filter/aud_testec.c:221
#3  0x40029d in tp1 () at ../../../../../../../src/test/security/audit/ts/ecfile_filter/aud_testec.c:111
#4  0x400bb4 in main () at ../../../../../../../src/test/security/audit/ts/ecfile_filter/aud_testec.c:278

[6/10/94 public]
fixed.

[6/17/94 public]
Reproduced today with binary from 6/13.
 
Program received signal 11, Segmentation fault
0xa432706d in sec_login_validate_cert_auth (-1073743916)
(gdb) bt
#0  0xa432706d in sec_login_validate_cert_auth (-1073743916)
#1  0xa4327481 in sec_login_validate_identity ()

[6/29/94 public]
fixed again...



CR Number                     : 10763
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : xt_test
Short Description             : xt_test should be installed
with API FVTs
Reported Date                 : 5/25/94
Found in Baseline             : 1.1
Found Date                    : 5/25/94
Severity                      : D
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : see below
Sensitivity                   : public

[5/25/94 public]
xt_test is still installed in the old location:

	dcetest/dce1.1/test/directory/xds

It should be installed along with the FVTs in:

	dcetest/dce1.1/test/tet/functional/directory/xds/ts/scripts

(perhaps 'scripts' should be renamed 'bin')

This would involve changes to:

src/test/directory/xds/Makefile
src/test/systest/dcetest_config
src/test/functional/directory/gds/ts/lib/shfuncs
	export_paths()



CR Number                     : 10761
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : keytab
Short Description             : FVT's for dcecp keytab &
hostdata commands must be updated to reflect new command output.
Reported Date                 : 5/24/94
Found in Baseline             : 1.1
Found Date                    : 5/24/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : ktb_misc.tcl hd_misc.tcl
Sensitivity                   : public

[5/24/94 public]

Many of the dcecp hostsdat & keytab commands fail because the actual
output from the commands has changed.  this is true of both the
positive and negative tests.

Also, the unauthentocated negative tests fail because the tests are not
dce_login'ing themselves due to the dcecp login problems.  The unauth
tests cannot log out from inheirted context so they fail.  Tests will
be set to login themselves when the login problem is solved.

[5/25/94 public]

The unauthenticated tests no longer fail.  The login problem had been fixed
a while back, the tests had not been switched to login/out on their own.

[6/07/94 public]

Name of dced mailing list is dce-ot-dced not dced-ot-bugs

[6/7/94 public]
Fixes made to tests.  Fixed

[6/13/94 public]
closed



CR Number                     : 10751
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : aud
Subcomponent Name             : 
Short Description             : aud_test dumps core during api_log
Reported Date                 : 5/24/94
Found in Baseline             : 1.1
Found Date                    : 5/24/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b10
Affected File(s)              : test/security/audit/ts/api_log/aud_test_rpc_manager.c
Sensitivity                   : public

[5/24/94 public]
During the api_log test the aud_test program dumps core.  These binaries
were built on 5/15.

Here's an extract from stdout:
  --- Dumping an event record --- Event Number: 990
  Client: /.../gemini/hosts/gemini/self
  Event Outcome: success 
  Authorization Status: Authorized with a pac
  Local Time: 1994-05-24-14:33:26.796-04:00I-----
  Client Address: ncacn_ip_tcp:130.105.5.83[1662]
  --- End of an event record --- 
  
  
  
  audit record header.addr:
   ncacn_ip_tcp:130.105.5.83[1662]
  
  audit record header.client_id[0].num_groups:
   0
  api_log1[6]: 25359 Memory fault(coredump)
  16#8b
    
Here's the journal from the test:
  0|1.10 14:33:13 19940524|User: zeliff (0) TCC Start, Command Line: /dcetest/dcelocal/test/tet/bin/tcc -e functional/security/audit api_log 
  20|/dcetest/dcelocal/test/tet/functional/security/audit/tetexec.cfg 1|Config Start
  30||TET_VERSION=1.10
  30||TET_OUTPUT_CAPTURE=False
  30||TET_RESCODES_FILE=tet_code
  30||TET_EXEC_IN_PLACE=False
  30||TET_NSIG=31
  30||TET_SIG_IGN=26,34
  40||Config End
  70||"Starting AUDIT api_log Test Suite"
  10|0 /ts/api_log/api_log 14:33:14|TC Start, scenario ref 28-1
  15|0 1.9 1|TCM Start
  520|0 0 26133 1 1|START DCE audit functional test: /u2/dcetest/test/tet/tet_tmp_dir/26128a/api_log/api_log; DATE: Tue May 24 14:33:21 EDT 1994
  400|0 1 1 14:33:21|IC Start
  200|0 1 14:33:21|TP Start
  520|0 1 26133 1 2|START: api_log1 started
  520|0 1 26133 1 3|ERROR: api_log01 failed
  520|0 1 26133 1 4|ERROR: api_log02 failed
  520|0 1 26133 1 5|PASS: api_log03 passed
  520|0 1 26133 1 6|ERROR: api_log04 failed
  520|0 1 26133 1 7|PASS: api_log05 passed
  520|0 1 26133 1 8|PASS: api_log06 passed
  520|0 1 26133 1 9|PASS: api_log07 passed
  520|0 1 26133 1 10|ERROR: api_log08 failed
  520|0 1 26133 1 11|PASS: api_log09 passed
  520|0 1 26133 1 12|PASS: api_log10 passed
  520|0 1 26133 1 13|PASS: api_log11 passed
  520|0 1 26133 1 14|PASS: api_log12 passed
  520|0 1 26133 1 15|PASS: api_log13 passed
  520|0 1 26133 1 16|PASS: api_log14 passed
  220|0 1 0 14:33:54|PASS
  410|0 1 1 14:33:54|IC End
  520|0 0 26133 1 1|END DCE audit functional test: /u2/dcetest/test/tet/tet_tmp_dir/26128a/api_log/api_log; DATE: Tue May 24 14:33:54 EDT 1994
  80|0 0 14:33:55|TC End
  70||"Completed AUDIT api_log Test Suite"
  900|14:33:55|TCC End

Here's the stack trace from the core file:
  (gdb) bt
  #0  0x40976f in aud_test_case10 (h=0x4a05a8, stp=0x481b7c)
      at /project/dce/build/dce1.1-snap/src/test/security/audit/ts/api_log/aud_test_rpc_manager.c:884
  #1  0x402af5 in op9_ssr (h=0x4a05a8, IDL_call_h=0x4b3cc8, IDL_elt_p=0x481e54, IDL_drep_p=0x4afd28, 
      IDL_transfer_syntax_p=0x4b3ec4, IDL_mgr_epv=0x418360, IDL_status_p=0x481e30) at aud_test_sstub.c:1167
  #2  0xa41f385c in attr ()
  #3  0xa41d144f in attr ()
  #4  0xa41ac38b in attr ()
  #5  0xa41b177d in attr ()
  #6  0xa41d12f4 in attr ()
  #7  0x4cce18 in attr ()
  Cannot access memory at address 0x2.

[5/25/94 public]
Reproduced again with binaries from 5/24 nightly build.  Bl9.5

[6/10/94 public]
Reproduced with binaries from 6/8.

More debugging information.

Here's the console output from testcase 10:

  Start aud_test_case10
  calling dce_aud_start with flag aud_c_evt_address_info
  dce_aud_print (in) event: 
  --- Dumping an event record --- Event Number: 990
  Client: /.../hither/cell_admin
  Event Outcome: success 
  Authorization Status: Authorized with a pac
  Local Time: 1994-06-10-10:24:25.451-04:00I-----
  Client Address: ncacn_ip_tcp:130.105.5.83[3743]
  --- End of an event record --- 
  
  
  dce_aud_print (out) event: 
  --- Dumping an event record --- Event Number: 990
  Client: /.../hither/cell_admin
  Event Outcome: success 
  Authorization Status: Authorized with a pac
  Local Time: 1994-06-10-10:24:25.451-04:00I-----
  Client Address: ncacn_ip_tcp:130.105.5.83[3743]
  --- End of an event record --- 
  
  
  
  audit record header.addr:
   ncacn_ip_tcp:130.105.5.83[3743]
  
  audit record header.client_id[0].num_groups:
   0
  api_log1[6]: 20635 Memory fault(coredump)
  16#8b

The journal doesn't provide any useful information.  However, it is
interesting to note that it thinks api_log10 passed, despite the coredump.

[6/14/94 public]

Test that the defect is unlocked



CR Number                     : 10748
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : signal 12 aborts dcecp tests when excuting some commands.
Reported Date                 : 5/24/94
Found in Baseline             : 1.1
Found Date                    : 5/24/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : test/tet/src/tcl/api/Makefile
Sensitivity                   : public

[5/24/94 public]

Some (security) commands executed from dcep scripts, which run
run under TET, print the following message:

signal in abandon is 12
/u1/dassarma/11sb/install/hp800/dcetest/dce1.1/test/tet/tet_tmp_dir/5554a/ts/sig12.tcl: Abandoning tetset: caught unexpected signal 12.

I can reproduce this when executing the login command and "acl check".

Here is a test example to reproduce the problem, it uses the acl 
command.

------------------------------------------------------------

#!/opt/dcelocal/bin/dcecp

if {([catch {set TET_ROOT $env(TET_ROOT)}]) ||
   ([string length $env(TET_ROOT)] == 0)} {
   puts stderr "$argv0: TET_ROOT is not defined."
   exit
}

proc first {} {
  puts "First procedure"
  if { [catch {directory create /.:/test_one} msg ] == 0 } {
     tet_infoline "-log---: $msg"
  } else {
    tet_infoline "-log---: $msg"
  }

  if { [catch {acl check /.:/test_one} msg ] == 0 } {
     tet_infoline "-log---: $msg"
  } else {
    tet_infoline "-log---: $msg"
  }
}

proc begin_test {} {
puts begin_test
}

proc end_test {} {
puts end_test
tet_result PASS
}

set iclist "ic1 "
set ic1 "first"
set tet_startup begin_test
set tet_cleaunp end_test

source $TET_ROOT/lib/tcl/tcm.tcl

[5/25/94 public]
If we leave signal 12 alone (don't ignore it or trap it), the problem
goes away. Submitted.

[6/6/94 public]
closed.



CR Number                     : 10742
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : api
Short Description             : Make removal of testcase logs
conditional
Reported Date                 : 5/24/94
Found in Baseline             : 1.1
Found Date                    : 5/24/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : various files in test/functional/directory/xds
Sensitivity                   : public

[5/24/94 public]
Each of the testsuites has a cleanup() routine which removes the individual
testcase logs after the test is finished.  Removal of these logs should be
made conditional.  I suggest adding a commandline option to local_TET.api
which sets an environment variable.  The value of this variable controls
whether the logs are removed, or not.

[8/2/94 public]
verified by manual inspection



CR Number                     : 10741
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : api tests
Short Description             : New test scenario for API
Reported Date                 : 5/24/94
Found in Baseline             : 1.1
Found Date                    : 5/24/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : src/test/functional/directory/xds/tet_scen
Sensitivity                   : public

[5/24/94 public]
It would be useful to have a test scenario to run all API tests which do
not require a DCE cell. (I.e., everything but 'switch')  I suggest

	all_no_switch

[07/07/94 public]
Fixed. Yesterday submitted. Works - I have just used it.



CR Number                     : 10740
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : gds,xds
Short Description             : Submit test drivers, filters
Reported Date                 : 5/24/94
Found in Baseline             : 1.1
Found Date                    : 5/24/94
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b10
Affected File(s)              : see below
Sensitivity                   : public

[5/24/94 public]
The following files need to be created in the backing build:

src/test/functional/directory/gds/tools/
	Makefile
	local_TET.admin
	TET_filter.admin
	TET_filter.gdscp

src/test/functional/directory/xds/tools/
	Makefile
	local_TET.api
	TET_filter.api

The following files will be modified for this:
	
src/test/functional/directory/gds/Makefile
src/test/functional/directory/xds/Makefile

[5/24/94 public]
Files submitted.



CR Number                     : 10736
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : xds
Short Description             : threads_as fail
Reported Date                 : 5/24/94
Found in Baseline             : 1.1
Found Date                    : 5/24/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b10
Affected File(s)              : test/functional/directory/gds/ts/lib/shfuncs, test/functional/directory/xds/ts/switch/switch_mt, test/functional/directory/xds/ts/xds/xds_mt
Sensitivity                   : public

[5/24/94 public]
The TET journal reports that threads_as fails:

400|1 2 1 13:23:04|IC Start
200|1 1 13:23:04|TP Start
520|1 1 7069 1 2|XDS - threads_as/Testcases
520|1 1 7069 1 3|pass 12        fail 0  .  .  .  .  T10compare1b
520|1 1 7069 1 4|pass 12        fail 0  .  .  .  .  T10list1b
520|1 1 7069 1 5|pass 12        fail 0  .  .  .  .  T10read1b
520|1 1 7069 1 6|pass 12        fail 0  .  .  .  .  T10search1b
520|1 1 7069 1 7|pass 12        fail 0  .  .  .  .  T10compare12v
520|1 1 7069 1 8|pass 12        fail 0  .  .  .  .  T10list8v
520|1 1 7069 1 9|pass 12        fail 0  .  .  .  .  T10read17v
520|1 1 7069 1 10|pass 12       fail 0  .  .  .  .  T10read25v
520|1 1 7069 1 11|pass 12       fail 0  .  .  .  .  T10read26v
520|1 1 7069 1 12|pass 12       fail 0  .  .  .  .  T10read28v
520|1 1 7069 1 13|pass 12       fail 0  .  .  .  .  T10search17v
520|1 1 7069 1 14|pass 4        fail 0  .  .  .  .  T2bu1_is2_as
520|1 1 7069 1 15|pass 4        fail 0  .  .  .  .  T2is1_2_as
520|1 1 7069 1 16|pass 4        fail 0  .  .  .  .  T2ivbu1_2_as
520|1 1 7069 1 17|pass 4        fail 0  .  .  .  .  T2ivbus1_2_as
520|1 1 7069 1 18|pass 4        fail 0  .  .  .  .  T2shutdown1_2_as
520|1 1 7069 1 19|pass 4        fail 0  .  .  .  .  T2v1_is2_as
220|1 1 1 13:26:12|FAIL
410|1 2 1 13:26:12|IC End

I'm going to rerun to produce a more detailed log.

[5/24/94 public]
I think this is a defect in the testcase rather than the code:  the 'check
error' function in lib/shfuncs.

[05/24/94 public]
I think the same. The output of the tests is OK: all T10* have 12 passing,
0 failing threads, the T2* have 4 passing, 0 failing threads.

[05/31/94 public]
Fix submitted: 05/27/94.

[6/20/94 public]
Fix verified.



CR Number                     : 10728
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : api tests
Short Description             : Correct paths in cleanup()
Reported Date                 : 5/23/94
Found in Baseline             : 1.1
Found Date                    : 5/23/94
Severity                      : C
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : see below
Sensitivity                   : public

[5/23/94 public]
Some of the paths are incorrect for cleaning logs.

[5/23/94 public]
Fixed.



CR Number                     : 10721
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : 
Short Description             : Add dcecp to audrel001 system test
Reported Date                 : 5/20/94
Found in Baseline             : 1.1
Found Date                    : 5/20/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : Makefile, audrel001.c
Sensitivity                   : public

[5/20/94 public]


The audrel001 system test was using auditcp instead of dcecp
to check the audit logs.  Change the test to use dcecp instead



CR Number                     : 10711
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dcesepol
Short Description             : dcesepol failure caused by rgy_edit message changes
Reported Date                 : 5/20/94
Found in Baseline             : 1.1
Found Date                    : 5/20/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : sec.functions
Sensitivity                   : public

[5/20/94 public]

Changes in rgy_edit messages cause dcesepol to fail.

[05/23/94 public]
Fix submitted.

[05/23/94 public]
Closed.



CR Number                     : 10705
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : api tests
Short Description             : API tests fail on TET lock
Reported Date                 : 5/19/94
Found in Baseline             : 1.1
Found Date                    : 5/19/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b10
Affected File(s)              : see below
Sensitivity                   : public

[5/19/94 public]
The API tests will not even run.  They seem to fail when tet complains of
lock_file problems.  This is the output of xds_st run alone:

  Local CACHE administration (DIR-IDs=1,2,5)
  Local CACHE administration (DIR-ID=3)
  Local CACHE administration (DIR-ID=4)
  Waiting 60 sec. for coming up the DSA processes
  DSA administration (dsa.chmaster)
  DSA administration (dsa.dsa1)
  DSA administration (dsa.dsa2)
  Waiting 60 sec. for coming up the DSA processes
  Now, testing is going on ... 
  
  Tcc error, message from source file
  /project/dce/build/dce1.1-snap/src/test/tet/src/posix_c/tcc/tool.c line
  911 :  
  unlock of exe dir exclusive lock file
  
  For results about Code Coverage Measurement see: ./hits
  
The resultant journal looks like this:

  0|1.10 14:27:11 19940519|User: zeliff (0) TCC Start, Command Line:
    /dcetest/dcelocal/test/tet/bin/tcc -e functional/directory/xds
    xds_all_ST 
  20|/dcetest/dcelocal/test/tet/functional/directory/xds/tetexec.cfg
      1|Config Start 
  30||TET_VERSION=1.10
  30||TET_OUTPUT_CAPTURE=False
  30||TET_RESCODES_FILE=tet_code
  30||TET_EXEC_IN_PLACE=True
  30||TET_TAPE_DEVICE=/dev/rmt0
  40||Config End
  70||"STARTING single threaded XDS tests using TEST script"
  10|0 /xds/xds_st 14:27:11|TC Start, scenario ref 53-1
  520|0 0 2425 1 1|TESTING with XT_TEST FINISHED
  50||Message from source file
      /project/dce/build/dce1.1-snap/src/test/tet/src/posix_c/tcc/tool.c
      line 911: unlock of exe dir exclusive lock file  
  80|0 0 14:37:57|TC End
  70||"FINISHED single threaded XDS tests"
  900|14:37:57|TCC End
      
The directory in which the testsuite ran (dir/xds/ts/xds) looks like so:

  total 26
  drwxr-xr-x   3 zeliff   sys         1024 May 19 14:37 .
  drwxr-xr-x  10 zeliff   sys         1024 May 19 07:29 ..
  drwxr-xr-x  12 zeliff   sys         1024 May 18 21:12 lib
  -rw-rw-rw-   1 root     sys           36 May 19 14:27 tet1.2408
  -rw-rw-rw-   1 root     sys            0 May 19 14:37 tet_stderr
  -rw-rw-rw-   1 root     sys           47 May 19 14:37 tet_xres
  -rwxr-xr-x   1 zeliff   sys         3587 May 18 18:10 xds_mt
  -rwxr-xr-x   1 zeliff   sys         3108 May 18 18:10 xds_st

I am using a different test driver (local_TET.api) than SNI provided.  I
will place a copy of it in the AFS cell, in:

	/afs/dce/project/dce/sni/otXXXXX
 
where XXXXX is the number of this defect.

[5/23/94 public]
I caused this.  I uncommented the line in the testsuite cleanup() routines
which deletes all tet_* files.  This is removing the lock.

[5/23/94 public]
Files fixed:
./test/functional/directory/xds/ts/mhs/mhs_st
./test/functional/directory/xds/ts/switch/switch_mt
./test/functional/directory/xds/ts/switch/switch_st
./test/functional/directory/xds/ts/xds/xds_mt
./test/functional/directory/xds/ts/xds/xds_st
./test/functional/directory/xds/ts/xom/xom_mt
./test/functional/directory/xds/ts/xom/xom_st
./test/functional/directory/xds/ts/xoms/xoms_mt
./test/functional/directory/xds/ts/xoms/xoms_st



CR Number                     : 10697
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : api tests
Short Description             : xds_mt - bad path for find in cleanup()
Reported Date                 : 5/18/94
Found in Baseline             : 1.1
Found Date                    : 5/18/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : test/functional/directory/xds/ts/xds/xds_mt
Sensitivity                   : public

[5/18/94 public]
The cleanup() routine has a bad path for the find invocations.  Needs 'lib'
between 'xds' and 'threads_*'.

[5/18/94 public]
Fix submitted.



CR Number                     : 10696
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : api tests
Short Description             : defunct unused test drivers
Reported Date                 : 5/18/94
Found in Baseline             : 1.1
Found Date                    : 5/18/94
Severity                      : D
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : see below
Sensitivity                   : public

[5/18/94 public]
The following files are unused and should be defuncted:

src/test/functional/directory/xds/ts/scripts:
	TESTALL
	TTESTALL
	TTESTALLa
	TTESTa
	_test
	_ttest
	_ttestalla



CR Number                     : 10695
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : api tests
Short Description             : API test suites do not run all cases
Reported Date                 : 5/18/94
Found in Baseline             : 1.1
Found Date                    : 5/18/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : see below
Sensitivity                   : public

[5/18/94 public]
Not all the API test suites run all the testcases, and some test suites try
to run non-existent test.

 Single-threaded
---------------
	XDS - does not run stress testcases 
	XOMS - attempts to run 'basic,' but there are no basic XOMS
		testcases.  (Only valid and invalid.)  
	MHS - attempts to run 'basic,' but there are no basic MHS
		testcases.  (Only valid and invalid.)  
	SWITCH - attempts to run 'basic,' but there are no basic SWITCH
		testcases.  (Only valid and invalid.)  

Multi-threaded
--------------
	XDS - does not run the threads_up testcases.
	SWITCH - does not run the threads_up testcases.cases.

Files modified:
---------------
src/test/functional/directory/xds/ts:

	xds/xds_st
	xds/xds_mt
	xoms/xoms_st
	mhs/mhs_st
	switch/switch_st
	switch/switch_mt

[5/18/94 public]
Fix submitted

[5/24/94 public]
Closed.



CR Number                     : 10667
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : gds
Subcomponent Name             : admin
Short Description             : DSA admin I18N tests fail
Reported Date                 : 5/17/94
Found in Baseline             : 1.1
Found Date                    : 5/17/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : test/functional/directory/gds/ts/admin/dsa
Sensitivity                   : public

[5/17/94 public]
The DSA admin tests recorded failures in 
	dsa.addi18n.01
	dsa.deli18n.01

Here is the journal transcript:

520|0 1 20445 1 2|DSA ADMIN: TEST CASE   dsa.addi18n.01
520|0 1 20445 1 3|Command (gdsditadm test_trace < /dcetest/dcelocal/test/tet/functional/director
y/gds/ts/lib/dsa.addi18n.01) gave exit code 0
520|0 1 20445 1 4|EXPECTED ERROR: One of the fields could not be converted to the T61 string !
520|0 1 20445 1 5|EXPECTED ERROR: Wrong attribute syntax !
520|0 1 20445 1 6|EXPECTED ERROR: One of the fields could not be converted to the T61 string !
520|0 1 20445 1 7|RECEIVED ERROR: One of the fields could not be converted to the T61 string !
520|0 1 20445 1 8|RECEIVED ERROR: Invalid CDS-Cell value !
520|0 1 20445 1 9|RECEIVED ERROR: Invalid Telex-Number value !
520|0 1 20445 1 10|RECEIVED ERROR: Invalid Directory-ID !
520|0 1 20445 1 11|TEST FAILED
220|0 1 1 16:42:41|FAIL
410|0 28 1 16:42:41|IC End
400|0 29 1 16:42:41|IC Start
200|0 1 16:42:41|TP Start
520|0 1 20445 1 2|DSA ADMIN: TEST CASE   dsa.deli18n.01
520|0 1 20445 1 3|Command (gdsditadm test_trace < /dcetest/dcelocal/test/tet/functional/director
y/gds/ts/lib/dsa.deli18n.01) gave exit code 0
520|0 1 20445 1 4|RECEIVED ERROR: Object (or superior object) doesn't exist !
520|0 1 20445 1 5|RECEIVED ERROR: Object (or superior object) doesn't exist !
520|0 1 20445 1 6|RECEIVED ERROR: Object (or superior object) doesn't exist !
520|0 1 20445 1 7|TEST FAILED
220|0 1 1 16:43:18|FAIL

[5/18/94 public]
Receive a new copy of the test file dsa.addi18n.01 which contained a fix to
a spelling error.  This did not change the test results at all.  Journal
output for these tests are identical to the segment provided above.

[05/18/94 public]
Rich: please try on HP the following:

export LANG=english;
export NLSPATH=/opt/dcelocal/nls/msg/en_US.ASCII/%N;

Then run the i18n admin tests.

If this works I will try to explain why it has worked. 
(I'm sure you will know that yourself ...)

[5/18/94 public]
Nope, didn't work.  gdsditadm didn't even run -- it exited immediately with
a return code of 1.  No output file.

Also, this test fails when run both in an xterm and in an hpterm.

So, what else can be different between your HP and my HP?

[5/19/94 public]
This works on the HP:

	LANG=english
	NLSPATH=/opt/dcelocal/nls/msg/en_US.ASCII/%N.cat

I tried similar settings on the 486 (without the '.cat' on NLSPATH) and
they didn't work.

In any event, the TET script must set this automatically and, after it is
done, reset LANG and NLSPATH to their original values.  Please update the
testsuite accordingly with the changes necessary for the tests to pass on
all platforms.

[5/20/94 public]
By hand-testing, I've confirmed that the testcase do, in fact, work.
However, they consistently fail when run as part of the tet 'dsa'
testsuite.  Clearly, the environment is not being configured correctly. 

Changed this from a 'code' defect to a 'test' defect.

[05/25/94 public]
Fixed by today's submission.

[6/20/94 public]
I18N tests still fail when run via the TET environment.  Was using code
from build of 6/13.

[6/27/94 public]
Tests still fail.  Clearly, the code in the test script is correctly
setting the LANG variable.

[7/7/94 public]
I18N tests still fail on 486 after July code drop.

[07/18/94 public]
With my change in gds/ts/admin/dsa it works on my HP (milo).
It also works on my AT386 (moon)  if I copy /usr/lib/nls/loc/en_US.ISO8859-1
from sniosf2 (in Munich) to moon.
It doesn't work - also not if you run the I18N tests by hand -
if there is no locale file in /usr/lib/nls/loc.
It also doesn't run if I compile /usr/lib/nls/loc/src/en_US.src
with

localedef -c -i /usr/lib/nls/loc/src/en_US.src /usr/lib/nls/loc/en_US.ISO8859-1

- I think localedef needs some more compiler switches.

We have to document that I18N tests only run if the
locale files of the actual language (HP800: english, AT386: en_US.ISO8859-1)
are there.
On sniosf2 we have a en_US.ISO8859-1 - we don't have it on all AT386 machines
I have checked here in Boston.

[8/1/94 public]
Fix verified by FVT on binaries of 7/25.



CR Number                     : 10656
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dts
Subcomponent Name             : test/time/service
Short Description             : Undeclared identifier
DCELOCAL_PATH in dtss-graph.c
Reported Date                 : 5/16/94
Found in Baseline             : 1.1
Found Date                    : 5/16/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : time/service/dtss-graph.c
Sensitivity                   : public

[5/16/94 public]

[ /test/time/service at 11:10 (AM) Sunday ]

"/project/dce/build/dce1.1-snap/src/test/time/service/dtss-graph.c", line \
 436.28: 1506-045 (S) Undeclared identifier DCELOCAL_PATH.



CR Number                     : 10653
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dfs
Subcomponent Name             : low/util
Short Description             : fs_DetermineFSType fails w/ dfs and /bin/posix/sh
Reported Date                 : 5/16/94
Found in Baseline             : 1.1
Found Date                    : 5/16/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1a
Affected File(s)              : test/file/util/fs_FunctionsScript
						test/file/util/fs_SetSysVar
						test/file/low/runtests
Sensitivity                   : public

[5/16/94 public]

Running performance tests for CHO evaluation, noticed large discrepancy
between RIOS and HP test times. Scanning HP output, noticed it reported
"local" filesystem rather than "dfs". Code in script for fs_DetermineFSType
relies on expansion of /: symbolic link to /.../<cellname>/fs by `pwd`
but /bin/posix/sh built-in pwd does not expand /: . Suggested fix is to
force use of /bin/pwd rather than built-in pwd.

[05/17/94 public]
Files submitted.

[05/23/94 public]
Builds fine - closing.



CR Number                     : 10648
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : admin tests
Short Description             : admin tests all return NORESULT
Reported Date                 : 5/15/94
Found in Baseline             : 1.1
Found Date                    : 5/15/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b10
Affected File(s)              : see below
Sensitivity                   : public

[5/15/94 public]
Results of GDS Admin Tests:  Sun May 15 17:09:59 EDT 1994
----------------------------------------------------

User: zeliff (0) TCC Start, Command Line: /dcetest/dcelocal/test/tet/bin/tcc -e functional/directory/gds shadow 
"STARTING ALL gdsditadm (SHADOW) TESTS"

TC Start, scenario ref 48-1

SHADOW TEST START
SHADOW: Dummy test BIND / UNBIND 
SHADOW: Dummy test BIND / UNBIND 
SHADOW: Dummy test BIND / UNBIND 
SHADOW: TEST CASE shadow.adduser1 (Create shadows and shadowing job)
SHADOW: TEST CASE dsa.1addobj (Create shadows and shadowing job)
SHADOW: TEST CASE shadow.6crshd_job (Create shadows and shadowing job)
SHADOW: TEST CASE shadow.6upd_job1 (Update shadows and shadowing job)
SHADOW: TEST CASE shadow.6chgupd1 (Update shadows and shadowing job)
SHADOW: TEST CASE shadow.6addobj1 (Create shadowing job)
SHADOW: TEST CASE shadow.6cr_job (Create shadowing job)
SHADOW: TEST CASE shadow.6upd_job2 (Update shadowing job)
SHADOW: TEST CASE shadow.6chgupd2 (Update shadowing job)
SHADOW: TEST CASE shadow.6remjob1 (Remove shadows and shadowing job)
SHADOW: TEST CASE shadow.6remjob2 (Remove shadowing job)
SHADOW TEST ENDED
"FINISHED gdsditadm (SHADOW) TESTS"
TCC End

------------------------------

Total PASSED =          0
Total FAILED =          0

All of the admin tests return "NORESULT" rather than PASS.  Here's the
journal.log from the shadow tests:

[5/16/94 public]
This was the result of a problem in the check_ERROR function of shfuncs.
The test_trace file was being written in
/opt/dcelocal/var/adm/directory/gds/adm.  The check_ERROR function expected
to find it in OUTDIR.  In and of itself, this isn't a problem because the
wrapper script set OUTDIR to the appropriate directory.  However, the
functional tests also use this variable to store test logs from gdscp,
leading one to believe that it's value can be changed at will.  Not so.

The solution was to split this variable into two different ones:

ADM is /opt/dcelocal/.... and should not be modified by the user.
OUTDIR is the directory into which all test logs are ultimately written.
This can be changed to any path the user wishes.

Ultimately, the following files were changed:

./test/functional/directory/gds/ts/admin/cacheadm
./test/functional/directory/gds/ts/admin/dsa
./test/functional/directory/gds/ts/admin/scheme
./test/functional/directory/gds/ts/admin/shadow
./test/functional/directory/gds/ts/admin/subtree
./test/functional/directory/gds/ts/gdscp/gdscp_all
./test/functional/directory/gds/ts/lib/shfuncs

[5/18/94 public]
Fix submitted.



CR Number                     : 10647
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : xds tests
Short Description             : xt_test and TEST* scripts
found on path
Reported Date                 : 5/15/94
Found in Baseline             : 1.1
Found Date                    : 5/15/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : see below
Sensitivity                   : public

[5/15/94 public]
The API tests try to find the TEST* scripts and the xt_test command on the
path of the tester.  They should, instead, invoke them via a fully
qualified path from /dcetest/dcelocal.

[5/15/94 public]
The files which must change are:

./test/functional/directory/gds/ts/lib/shfuncs
./test/functional/directory/xds/ts/mhs/mhs_st
./test/functional/directory/xds/ts/scripts/TEST
./test/functional/directory/xds/ts/scripts/TESTALL
./test/functional/directory/xds/ts/scripts/TTEST
./test/functional/directory/xds/ts/scripts/TTESTALL
./test/functional/directory/xds/ts/scripts/TTESTALLa
./test/functional/directory/xds/ts/scripts/TTESTa
./test/functional/directory/xds/ts/scripts/_test
./test/functional/directory/xds/ts/scripts/_testall
./test/functional/directory/xds/ts/scripts/_ttest
./test/functional/directory/xds/ts/scripts/_ttestall
./test/functional/directory/xds/ts/scripts/_ttestalla
./test/functional/directory/xds/ts/scripts/cleantree
./test/functional/directory/xds/ts/switch/switch_mt
./test/functional/directory/xds/ts/switch/switch_st
./test/functional/directory/xds/ts/xds/xds_mt
./test/functional/directory/xds/ts/xds/xds_st
./test/functional/directory/xds/ts/xom/xom_mt
./test/functional/directory/xds/ts/xom/xom_st
./test/functional/directory/xds/ts/xoms/xoms_mt
./test/functional/directory/xds/ts/xoms/xoms_st

These are fixed in my sandbox.

[5/18/94 public]
Fix submitted.



CR Number                     : 10645
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : admin tests
Short Description             : Warning returned on invocation
Reported Date                 : 5/15/94
Found in Baseline             : 1.1
Found Date                    : 5/15/94
Severity                      : D
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b10
Affected File(s)              : not applicable
Sensitivity                   : public

[5/15/94 public]
Upon invocation of:

	local_TET.admin cadm

The following warning appears:

journal file name is:
/dcetest/dcelocal/test/tet/functional/directory/gds/results/0004e/journal


/u2/dcetest/test/tet/functional/directory/gds/ts/admin/cacheadm: warning:
illegal entry 20 in TET_SIG_IGN ignored

[5/18/94 public]
Fix was to remove TET_SIG_IGN from the TET test drivers.  These drivers are
not yet under source control.



CR Number                     : 10644
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : admin
Short Description             : Improper manipulation of TET_ROOT
Reported Date                 : 5/15/94
Found in Baseline             : 1.1
Found Date                    : 5/15/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b10
Affected File(s)              : see below
Sensitivity                   : public

[5/15/94 public]
The admin tests reset the value of TET_ROOT to TET_ROOT_INST.  This is not
necessary and, in fact, causes the tests to fail.  

TET_ROOT is always:

	/dcetest/dcelocal/test/tet

All references to files should be made via paths relative to this.

[5/15/94 public]
This also occurs in the API tests.

The files which must change for this are:

./test/functional/directory/gds/ts/admin/cacheadm
./test/functional/directory/gds/ts/admin/dsa
./test/functional/directory/gds/ts/admin/scheme
./test/functional/directory/gds/ts/admin/shadow
./test/functional/directory/gds/ts/admin/subtree
./test/functional/directory/xds/ts/switch/switch_mt
./test/functional/directory/xds/ts/switch/switch_st
./test/functional/directory/xds/ts/xds/xds_mt
./test/functional/directory/xds/ts/xds/xds_st
./test/functional/directory/xds/ts/xom/xom_mt
./test/functional/directory/xds/ts/xom/xom_st
./test/functional/directory/xds/ts/xoms/xoms_mt
./test/functional/directory/xds/ts/xoms/xoms_st
./test/functional/directory/xds/ts/mhs/mhs_st

I have the fixes on a branch in my sandbox.

[5/18/94 public]
Fix submitted.

[5/24/94 public]
Closed.



CR Number                     : 10643
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dcetest_config
Short Description             : Update for TETized GDS FVT
Reported Date                 : 5/15/94
Found in Baseline             : 1.1
Found Date                    : 5/15/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b10
Affected File(s)              : test/systest/dcetest_config
Sensitivity                   : public

[5/15/94 public]
dcetest_config must install the new TETized GDS and XDS functional tests
instead of the old versions.

The function install_f_gds now looks like:

#------------------------------------------------------
# install_f_gds()
#
# Install GDS functional tests
#------------------------------------------------------
install_f_gds()
{
	install test/directory/gds/mavrostest
	install test/tet/functional/directory/gds
	install test/tet/functional/directory/xds
}



CR Number                     : 10634
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : svc
Short Description             : Need SVC system tests
Reported Date                 : 5/13/94
Found in Baseline             : 1.1
Found Date                    : 5/13/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b19
Affected File(s)              : test/systest/svc/*
Sensitivity                   : public

[5/13/94 public]
Need to add Serviceability system tests to dce1.1 tree

[7/12/94 public]
Initial versions of svccfg001 - 6 were submitted, subsequently
followed by updates to dcetest_config and a new run.svc.
Tests need to be updated to remove reference to rc.dts, use
dce_shutdown, check for new msgs emitted from rc.dce, and add 
capability to save svc logs.

[7/22/94 public]
Need to update svc.functions for svccfg005 to add xxx component to
debug specification (see CR 10639).  Also save rc_file if
SAVE_LOGS specified and don't send uwanted output to stdout.
Also update README to clarify how tests are run and remove svcrel001
from tet_scen (test being deferred, shouldn't have gotten in there
in the first place).

[7/26/94 public]
Need to add changes for svccfg test to run on svr4.  Port work was
done by Abby O'Hara.

[7/28/94 public]
The svccfg tests must be run as root.  A check should be added to
the beginning of each one to make sure the user is root or else
quit.

[7/28/94 public]
Tests which set debug routing should not use '*' to specify all 
subcomponents (at least for rpc).  Switch to use 'general' subcomponent
instead.

[9/7/94 public]
Updated priority to show we need some more udpates for 1.1, mostly
to catch up with final changes to components just enabling svc and fine 
tuning test run once all blocking bugs are passed.

[9/28/94 public]
Final updates were submitted on 9/08/94.



CR Number                     : 10617
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : tests
Short Description             : Messages used for test 
purposes do not match dcp.sams
Reported Date                 : 5/12/94
Found in Baseline             : 1.1
Found Date                    : 5/12/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b17
Affected File(s)              : 
 directory_remove_N.tcl       directory_remove_P.tcl
 clearinghouse_create_N.tcl   directory_show_N.tcl
 clearinghouse_create_P.tcl   directory_show_P.tcl
 clearinghouse_delete_N.tcl   directory_synchronize_N.tcl
 clearinghouse_delete_P.tcl   directory_synchronize_P.tcl
 clearinghouse_disable_N.tcl  link_create_N.tcl
 clearinghouse_disable_P.tcl  link_create_P.tcl
 clearinghouse_show_N.tcl     link_delete_N.tcl
 clearinghouse_show_P.tcl     link_delete_P.tcl
 directory_add_N.tcl          link_modify_N.tcl
 directory_add_P.tcl          link_modify_P.tcl
 directory_create_N.tcl       link_show_N.tcl
 directory_create_P.tcl       link_show_P.tcl
 directory_delete_N.tcl       object_create_N.tcl
 directory_delete_P.tcl       object_create_P.tcl
 directory_list_N.tcl         object_delete_N.tcl
 directory_list_P.tcl         object_delete_P.tcl
 directory_merge_N.tcl        object_modify_N.tcl
 directory_merge_P.tcl        object_modify_P.tcl
 directory_modify_N.tcl       object_show_N.tcl
 directory_modify_P.tcl       object_show_P.tcl
 group_add_N.tcl             organization_delete_N.tcl
 group_add_P.tcl             organization_delete_P.tcl
 group_catalog_N.tcl         organization_list_N.tcl
 group_catalog_P.tcl         organization_list_P.tcl
 group_create_N.tcl          organization_modify_N.tcl
 group_create_P.tcl          organization_modify_P.tcl
 group_create_era_N.tcl      organization_remove_N.tcl
 group_create_era_P.tcl      organization_remove_P.tcl
 group_delete_N.tcl          organization_rename_N.tcl
 group_delete_P.tcl          organization_rename_P.tcl
 group_list_N.tcl            organization_show_N.tcl
 group_list_P.tcl            organization_show_P.tcl
 group_modify_N.tcl          principal_catalog_N.tcl
 group_modify_P.tcl          principal_catalog_P.tcl
 group_modify_era_N.tcl      principal_create_N.tcl
 group_modify_era_P.tcl      principal_create_P.tcl
 group_remove_N.tcl          principal_create_era_N.tcl
 group_remove_P.tcl          principal_create_era_P.tcl
 group_rename_N.tcl          principal_delete_N.tcl
 group_rename_P.tcl          principal_delete_P.tcl
 group_show_N.tcl            principal_modify_N.tcl
 group_show_P.tcl            principal_modify_P.tcl
 group_show_era_N.tcl        principal_modify_era_N.tcl
 group_show_era_P.tcl        principal_modify_era_P.tcl
 organization_add_N.tcl      principal_rename_N.tcl
 organization_add_P.tcl      principal_rename_P.tcl
 organization_catalog_N.tcl  principal_show_N.tcl
 organization_catalog_P.tcl  principal_show_P.tcl
 organization_create_N.tcl   principal_show_era_N.tcl
 organization_create_P.tcl   principal_show_era_P.tcl
Sensitivity                   : public

[5/12/94 public]


The tests were generated prior to the initial review of dcp.sams.
As a result several of the negative test error messages have changed
and the tests no longer match the actual error messages.

[8/11/94 public]
This defect has become more important now since we want to be easily able
to run all the tests.

[9/6/94 public]

Modified all of the tests. They are now more than done.

[9/26/94 public]
closed.



CR Number                     : 10610
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : I18N
Short Description             : Place holder for new I18N
test scripts.
Reported Date                 : 5/11/94
Found in Baseline             : 1.1
Found Date                    : 5/11/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : I8NSAN001, I8NSAN002
Sensitivity                   : public

[5/11/94 public]

This OT is to be referenced during the submition of the I18N 
tests developed test DCE connectivity in an I18N environment. The 
tests, developed as dcecp scripts, focus on CDS and Security only.



CR Number                     : 10605
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa,i486,rs6000
S/W Ref Platform              : hpux,osf1,aix
Component Name                : gds
Subcomponent Name             : test/functional/directory/xds/ts
Short Description             : don't know how to make t.cacheinit125.sed or shfuncs
Reported Date                 : 5/11/94
Found in Baseline             : 1.1
Found Date                    : 5/11/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b9
Affected File(s)              : config/Makefile, lib/Makefile
Sensitivity                   : public

[5/11/94 public]

In the tests installation pass:

[ /test/functional/directory/xds/ts/config at 01:42 (AM) Wednesday ]
makepath config/. && cd config &&  exec make MAKEFILE_PASS=BASIC
install_all
make: don't know how to make t.cacheinit125.sed (continuing)
[ /test/functional/directory/xds/ts/lib at 01:42 (AM) Wednesday ]
makepath lib/. && cd lib &&  exec make MAKEFILE_PASS=BASIC     install_all
make: don't know how to make shfuncs (continuing)

[5/12/94 public]
The Makefiles were using a VPATH directive
that provides the wrong search path - it should
not go all the way back up to src - it should reference it from
the current offset from obj and just specify it relatively from there.

diffs: src/test/functional/directory/gds/ts/config/Makefile
< VPATH         = ../../../gds/ts/config
---
> VPATH         = ../../../../../../../../src/test/functional/directory/gds/ts/config

diffs:src/test/functional/directory/gds/ts/lib/Makefile
< VPATH         = ../../../gds/ts/lib
---
> VPATH         = ../../../../../../../../src/test/functional/directory/gds/ts/lib

[5/13/94 public]



CR Number                     : 10601
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : Makefiles
Short Description             : Bad use of SCRIPTS in Makefiles
Reported Date                 : 5/10/94
Found in Baseline             : 1.1b8
Found Date                    : 5/10/94
Severity                      : D
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b9
Affected File(s)              : test/admin/dcecp/<all-Makefiles>
Sensitivity                   : public

[5/10/94 public]
RFC 34.2 Appendix I:

  (v) `SCRIPTS'

      This variable defines a list of shell scripts that get
      built.  If this variable is defined then rules for files
      ending in `.csh' and `.sh' are created by including the
      common makefile `osf.script.mk'.

      [... text deleted ...]

      Use this variable only if scripts need some processing
      before being installed.  If the script in the `src' tree
      is what should be installed on a system, then use the
      `ILIST', _et al_ variables described below and not the
      `SCRIPTS' variable.  Do _not_ use `SCRIPTS' as a
      convenient name for a variable and then include it in
      some other variable list such as `DATEFILES' or `ILIST';
      only use it for its intended purpose.

SCRIPTS is used incorrectly in the following Makefiles:

  src/test/admin/dcecp/ts/acl
  src/test/admin/dcecp/ts/aud
  src/test/admin/dcecp/ts/cds
  src/test/admin/dcecp/ts/dts
  src/test/admin/dcecp/ts/log
  src/test/admin/dcecp/ts/rgy
  src/test/admin/dcecp/ts/secval

All should be changed.

[5/11/94 public]
  src/test/admin/dcecp/ts/cds
  src/test/admin/dcecp/ts/rgy

Do not fall into this catagory. Both use TCL_CODE to define a list of
files that need to be processed. I then use TCL_CODE in the IDIR and
DATAFILES.

[5/11/94 public]
All Makefiles were changed to user <comp>_FILES. The installation path has
been changed from /test/admin/dcecp/... to /test/tet/functional/admin/dcecp/...
as requested by QA. Submitted.

[5/18/94 public]
closed



CR Number                     : 10596
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : aud
Subcomponent Name             : functional test
Short Description             : api_log_to_daemon assumes log ACL
Reported Date                 : 5/10/94
Found in Baseline             : 1.1
Found Date                    : 5/10/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : aud_testd.c aud_testd_rpc_manager.c
Sensitivity                   : public

[5/10/94 public]

api_log_to_daemon test suite wrongly assumes default ACL allows logging
to auditd. (default is crw , not crwl).



CR Number                     : 10590
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : threads
Short Description             : File dcethrp1 should be deleted
Reported Date                 : 5/9/94
Found in Baseline             : 1.1
Found Date                    : 5/9/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dcethrp1
Sensitivity                   : public

[5/9/94 public]
The files ./test/systest/threads/{dcethrp1,thd.acf,thd.idl} are not used and
should be deleted.

[05/09/94 public]
Only dcethrp1 should be deleted, thd.acf and thd.idl are used by dcethrpc.

[05/11/94 public]
Fixed and closed.



CR Number                     : 10586
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : admin
Short Description             : New admin checklists.
Reported Date                 : 5/9/94
Found in Baseline             : 1.1
Found Date                    : 5/9/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : DCPSAN001, DCPSAN002,
DCPSAN003, DCPSAN004
Sensitivity                   : public

[5/9/94 public]

This OT will serve as a place holder to track the submition of 
the new admin checklists.
They are:
DCPSAN001 - CH backup and restore
DCPSAN002 - CH backup
DCPSAN003 - CH restore
DCPSAN004 - backup and restore of the security database



CR Number                     : 10582
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : rpc
Subcomponent Name             : idl
Short Description             : refdels client core dumps on SVR4 platform
Reported Date                 : 5/9/94
Found in Baseline             : 1.0.3
Found Date                    : 5/9/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : test/rpc/idl/refdels/client_aux.c
Sensitivity                   : public

[5/9/94 public]

The function build_node() in file refdels/client_aux.c does not returns the
p_node pointer when the 'depth == 1'. This causes some junk to be returned
and so core dump. Following #ifdef SNI_SVR4 indicate the fix:

if (depth == 1)
{
....
....
#ifdef SNI_SVR4
   return p_node;
#else
   return;
#endif
}

[05/10/94 public]
Abby said she had a fix for this.

[5/10/94 public]
Tom, the purpose of this bug report was to have OSF incorporate the fix
into their main-line source. This is not a SVR4 specific bug. Yes, Abby
would have this because I fixed it for her!! Thanks.

[05/10/94 public]
And she is going to submit this (and another fix) to the mailine source.
She (and you!) can do that, you know.. :-)

[5/27/94 public]
Abby, when are you going to submit this code?



CR Number                     : 10565
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dcetest_config
Short Description             : Installation menu returns to
wrong place
Reported Date                 : 5/6/94
Found in Baseline             : 1.1
Found Date                    : 5/6/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b9
Affected File(s)              : src/test/systest/dcetest_config
Sensitivity                   : public

[5/6/94 public]
The installation menu in dcetest_config (which allows you to select between
functional tests, system tests, and TET) returns to the highest level menu.
Therefore, if you want to install more than one thing you have to go
through the menu that prompts you for the location of the binary files.

Instead, this menu option should cycle back to the menu until the user
explicitly selects 98.

[5/6/94 public]
Fix submitted.

Solution was to stick most of the code in install_menu() into a
non-terminating while loop.



CR Number                     : 10558
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : tetapi
Short Description             : tcl api installed in wrong place
Reported Date                 : 5/6/94
Found in Baseline             : 1.1b7
Found Date                    : 5/6/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b9
Affected File(s)              : test/tet/src/tcl/api/{Makefile,tcm.tcl.dat}
Sensitivity                   : public

[5/6/94 public]
The Tcl TET API is installed in the wrong place. 

It is in:
test/lib/tcl

It should be in:
test/tet/lib/tcl

All dcecp function tests need to be changed, including one of the API files.

[5/6/94 public]
The API has been updated. Passing the CR to Howard so he can update all 
the tests.

[5/17/94 public]
Actually done on 5/6/94.  Submitted then too.  Closing bug.



CR Number                     : 10551
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dfs
Subcomponent Name             : test/systest/file
Short Description             : dcetest/dce1.1/test/systest/file does not exist in DFS smoketest
Reported Date                 : 5/5/94
Found in Baseline             : 1.1
Found Date                    : 5/5/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dce_config
Sensitivity                   : public

[5/5/94 public]

During the RaT multi_machine smoketest, when running "dce_config" in
the RIOS DFS server "mudslide" the following complaint occurs, hanging
the smoketest:

/mnt/tailor/dcetest/dce1.1/test/systest/file: A file or directory in the \
  path name does not exist.


Here's the output:


dfsd: All DFS daemons started.
+ cd /usr/rrizzo/RAT_tools
+ /usr/opt/dcelocal/bin/dce_login cell_admin -dce- -exec
/usr/rrizzo/RAT_tools/run_commands.dfs
Password must be changed!
+ grep FAIL /usr/rrizzo/RAT_tools/run_commands.dfs.log
+ [ 1 != 1 ]
+ [ ! -d /dcetest/dcelocal/test/systest/file ]
+ cd /mnt/tailor/dcetest/dce1.1/test/systest/file
/mnt/tailor/dcetest/dce1.1/test/systest/file: A file or directory in the
path name does not exist. 


/tmp/dce_config.log shows:


S:****** Starting dfsd...
D:         Executing: dfsd
DEBUG:     Executing: enable_in_dfs_rc(dfsd)
V:         Successfully modified rcfile /etc/rc.dfs for "dfsd"
D:         Executing: ls /.: 2>/dev/null | grep /.../sif_cell >/dev/null
2>\&1
D:         Executing: rm -f /.: > /dev/null 2>\&1
D:         Executing: ln -s /.../sif_cell /.: >/dev/null 2>\&1
D:         Executing: ls /: 2>/dev/null | grep /.../sif_cell >/dev/null
2>\&1
D:         Executing: rm -f /: > /dev/null 2>\&1
D:         Executing: ln -s /.../sif_cell/fs /: >/dev/null 2>\&1

[05/05/94 public]
Hmm - dcetest/dce1.1/test/systest/file DOES exist in the install tree
of nightly builds ... have you changed the build machines or mount points
recently? Is it possible the test build hasn't completed at the time
you run this? If test build completion is an issue, we may want to switch
to using a local copy of the dfs.read_write_all.main test (as the
DFS 1.1a smoketest does).

[05/20/94 public]
This hasn't shown up for 2 weeks - my suspicion is still that the test build had
not completed - lowering the severity/priority for now - will close if this 
doesn't show up before BETA.

[06/30/94 public]
Closing - standing by theory - not seen since.



CR Number                     : 10548
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cds
Subcomponent Name             : 
Short Description             : Addition of test scripts for
subtree operations.
Reported Date                 : 5/5/94
Found in Baseline             : 1.1
Found Date                    : 5/5/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : 
cp_test.sh, cp_killer.sh, cp_subtree.tests, cp_foreign.tests, foreign_dump.dat
Sensitivity                   : private

[5/5/94 public]
The files cp_test.sh and cp_killer.sh need updating to support the 
new tests for the new subtree functions.  

The files cp_subtree.tests adn cp_foreign.tests are scripts for cdscp
which exercise subtree commands.  The file foreign_dump.dat is used to 
test the merge of a subtree from a foreign cell.



CR Number                     : 10530
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 10533
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : gds
Subcomponent Name             : mavrostest
Short Description             : invalid lint flag generated
Reported Date                 : 5/4/94
Found in Baseline             : 1.1
Found Date                    : 5/4/94
Severity                      : B
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b8
Affected File(s)              : see below
Sensitivity                   : public

[5/4/94 public]
A '-O' is being supplied to lint, possibly via CFLAGS.  Here is the content
of lint.log:

gemini gds/mavrostest$ more lint.log
lint -o test -wkhplrDoCnud -O test.c  import1.c  attrdec.c 
getopt: illegal option -- O
/usr/bin/lint[118]: test: argument expected
"", line 0: lint error: unknown record directive in file llib-lc.c

[05/05/94 public]
With the next code drop you will see that no lint is called in the
build or from the shell script. Good fix, isn't it?

[06/21/94 public]
Fixed with today's submission - no lint is called any more.
Documentation has to change - see 10533.



CR Number                     : 10509
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : tclapi
Short Description             : Can not run tests standalone
Reported Date                 : 5/3/94
Found in Baseline             : 1.1b8
Found Date                    : 5/3/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1beta
Fixed In Baseline             : 1.1b9
Affected File(s)              : src/test/tet/src/tcl/api/tcm.tcl.dat
Sensitivity                   : public

[5/3/94 public]
The dcecp test suite scripts can not be run standalone (by just running the
script). This is because the variable VERBOSE is undefined in the 'test'
procedure. The reason for this is currently unknown.

[5/4/94 public]
The problem was that running standalone, the TET_CONFIG file was undefined
(tcc defines this for you). The API was not alerting the user to this
problem.

[5/11/94 public]
closed



CR Number                     : 10470
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : rca
Short Description             : the rca functional tests are
being installed in the wrong directory.
Reported Date                 : 4/27/94
Found in Baseline             : 1.1
Found Date                    : 4/27/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b14
Affected File(s)              : entire security tet test suite
Sensitivity                   : public

[4/27/94 public]

The security rca functional tests are being installed under

nb_<platform>/install/<platform>/dcetest/dce1.1/tet.

This is incorrect. They should be installed in 

nb_<platform>/install/<platform>/dcetest/dce1.1/test/tet/functional/security

The audit tests are there already.

[8/4/94 public ]

IDIR was modified.



CR Number                     : 10431
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : tests
Short Description             : broken comment leaders
Reported Date                 : 4/21/94
Found in Baseline             : 1.1
Found Date                    : 4/21/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : test/security/tet-tests/tet_scen,
test/security/tet-tests/tetexec.cfg, test/security/api/gssapi/Makefile.echo
Sensitivity                   : public

[4/21/94 public]
All three had "NONE" for their initial rscs comment leader (also fixed.)
Also, leave VTALRM alone in tetexec.cfg.

[5/13/94 public]
Closed.



CR Number                     : 10419
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : aud
Subcomponent Name             : api_log
Short Description             : syntax error
Reported Date                 : 4/21/94
Found in Baseline             : 1.1
Found Date                    : 4/21/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b8
Affected File(s)              : see below
Sensitivity                   : public

[4/21/94 public]

There are compilation errors in function "aud_client_server" which
occurs in 3 modules of the functional tests for audit:
 
[ /test/security/audit/ts/api_log at 03:36 (AM) Thursday ]

In file included from
 /project/dce/build/dce1.1-snap/src/test/security/audit/ts/api_log/aud_test.c:
 18:
 /u1/devobj/sb/nb_486/export/at386/usr/include/dce/dce_cf.h:49: parse error
 before `*'
/project/dce/build/dce1.1-snap/src/test/security/audit/ts/api_log/aud_test.c:
 In function `aud_client_server':
....
*** Error code 1

[ /test/security/audit/ts/api_log_to_daemon at 03:37 (AM) Thursday ]

/u1/devobj/sb/nb_486/export/at386/usr/include/dce/dce_cf.h:49: parse error
 before `*'
/project/dce/build/dce1.1-snap/src/test/security/audit/ts/api_log_to_daemon/\
 aud_testd.c: In function `aud_client_server':
....

[ /test/security/audit/ts/ecfile_filter at 03:38 (AM) Thursday ]

In file included from
 /project/dce/build/dce1.1-snap/src/test/security/audit/ts/ecfile_filter/aud_testec.c:18:
/u1/devobj/sb/nb_486/export/at386/usr/include/dce/dce_cf.h:49: parse error
 before `*'
....

[4/21/94 public]
The files modified are:

src/test/security/audit/ts/
	api_log/Makefile
	api_log/aud_test.c
	api_log_to_daemon/Makefile
	api_log_to_daemon/aud_testd.c
	ecfile_filter/Makefile
	ecfile_filter/aud_testec.c

There were two problems:
- the macro FILE was not found, but is used by dce_cf.h
	- this problem was fixed by explicitly including stdio.h in the
	offending program
- TRY/CATCH macros were not found
	- INCFLAGS line contained a poor path, thus the wrong pthread.h
	file was being included.

[5/4/94 public]
Closed.



CR Number                     : 10402
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : aud
Subcomponent Name             : 
Short Description             : more functional tests
Reported Date                 : 4/19/94
Found in Baseline             : 1.1
Found Date                    : 4/19/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : all new
Sensitivity                   : public

[4/19/94 public]
Second batch of functional tests for audit.



CR Number                     : 10395
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : systest
Subcomponent Name             : audrel001
Short Description             : audrel001 fails on HP-UX
Reported Date                 : 4/19/94
Found in Baseline             : 1.1
Found Date                    : 4/19/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : ./test/systest/audit/ts/audrel001.c
Sensitivity                   : public

[4/19/94 public]

In the audrel001 system test, "/bin/auditd" needs to be changed to
"/usr/bin/auditd" or "/opt/dcelocal/bin/auditd", which is used in
audstr001, for the system test to work on HP-UX.



CR Number                     : 10386
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : aud
Subcomponent Name             : 
Short Description             : Turn audit FVT on in build
Reported Date                 : 4/18/94
Found in Baseline             : 1.1
Found Date                    : 4/18/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b8
Affected File(s)              : src/test/security/Makefile
Sensitivity                   : public

[4/18/94 public]
Add 'audit' to SUBDIRS of src/test/seucrity/Makefile.

[4/18/94 public]
Fix submitted.

[4/19/94 public]
Closed



CR Number                     : 10385
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : aud
Subcomponent Name             : functional
Short Description             : Cleanup stuff in makefile
Reported Date                 : 4/18/94
Found in Baseline             : 1.1
Found Date                    : 4/18/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b8
Affected File(s)              : see below
Sensitivity                   : public

[4/18/94 public]
Clean up various minor things in the functional test makefiles:

src/test/security/audit/Makefile:
src/test/security/audit/ts/Makefile:
src/test/security/audit/ts/auditd_acl/Makefile
src/test/security/audit/ts/auditd_startup/Makefile
src/test/security/audit/ts/cp_auditd/Makefile
src/test/security/audit/ts/cp_filter/Makefile

[4/18/94 public]
Fix submitted.

[4/19/94 public]
Closed.



CR Number                     : 10384
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dcetest_config
Short Description             : dctest_config needs to install
aud FVT
Reported Date                 : 4/18/94
Found in Baseline             : 1.1
Found Date                    : 4/18/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b8
Affected File(s)              : test/systest/dcetest_config
Sensitivity                   : public

[4/18/94 public]
dcetest_config should install audit FVTs.

This requires changes to the following procedures:

	print_install_f_test_menu()
	install_functional_test_menu()

and the creation of:

	install_f_aud()

[4/18/94 public]
Also had to modify install_f_all()

Fix submitted.

[4/19/94 public]
Closed.



CR Number                     : 10327
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : aud
Subcomponent Name             : 
Short Description             : submit functional tests
Reported Date                 : 4/11/94
Found in Baseline             : 1.1
Found Date                    : 4/11/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b8
Affected File(s)              : all new tests
Sensitivity                   : public

[4/11/94 public]
Submission of first batch of functional tests for audit.

[5/4/94 public]
Closed.



CR Number                     : 10315
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : rpc.runtime.1
Short Description             : rpc.runtime.1 ignores protocol switch
Reported Date                 : 4/7/94
Found in Baseline             : 1.1
Found Date                    : 4/7/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dcerpcrun, dcerpcrun.data
Sensitivity                   : public

[4/7/94 public]

The rpc.runtime.1 system test uses PROTOCOL instead of PROTO which causes
the protocol switch in run.rpc to be ignored.

[04/27/94 public]
Fix submitted.

[05/05/94 public]
Closed.



CR Number                     : 10307
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : systest
Subcomponent Name             : tet
Short Description             : Running audrel001 in a window with < 80 chars caused the test to fail.
Reported Date                 : 4/6/94
Found in Baseline             : 1.1
Found Date                    : 4/6/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : audrel001.c
Sensitivity                   : public

[4/6/94 public]



When I run the audrel001 test on an OSF1 machine in a window size
which is < 80 characters the test aborts right after
the auditd is started.  I get the following message:


daemon_identity file open ok
1994-04-06-13:01:47.455-04:00I----- audd NOTICE_VERBOSE aud general 0x004c3c48 daemon is ready to listen to its interfaces
/usr/users/dcetest/test/tet/tet_tmp_dir/8324a/ts/audrel001: TET_TMPRESFD not set in environment

[4/6/94 public]

This happens on OSF1 because OSF1 truncates the results of ps command.
I have filed a bug on OSF1 (10781).
In the meantime I have changed the startup command to the audit
daemon so the ps command on OSF1 can find it in a regular sized window (80x24).

[5/2/94 public]
You should look at src/config/dce_com_env for the definition of POSIX_PS
and PSARGS.  For those platforms (OSF/1 and AIX at least) that support the
POSIX syntax of ps, you can tailor the output to be exactly what you want.
On those platforms, dce_config does just a pid and command column.

[05/11/94 public]
Closed.



CR Number                     : 10302
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : audit
Short Description             : don't know how to make run.aud
Reported Date                 : 4/6/94
Found in Baseline             : 1.1
Found Date                    : 4/6/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : test/tet/system/audit/ts/systest
Sensitivity                   : public

[4/6/94 public]
In [ /test/systest/audit/ts at 04:26 (AM) Wednesday ], under
test/tet/system/audit/ts/systest, this message was produced:
	make: don't know how to make run.aud (continuing

NOTE: the Component Name is really "systest" but the ot program won't let
      me enter it.

[4/8/94 public]

It appears that upon submission, the permissions of the rcs file were
set to 400 (-r- --- ---) so this file was in effect invisible.  I've
changed the permissions to 444 and will try another snap of the tree
to ensure that it works.  I will send a message upon a successful 
snap of this file.  At this time one of you should change the CR to
"fix".



CR Number                     : 10281
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : test/file/rep
Short Description             : incorrect grep usage in file/rep/rtest3
Reported Date                 : 4/4/94
Found in Baseline             : 1.1a
Found Date                    : 4/4/94
Severity                      : E
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b11
Affected File(s)              : test/file/rep/rtest3
Sensitivity                   : public

[4/4/94 public]
 
Running file/rep/rtest3 yields the following error messages:
	usage:
	 grep  [-E|-F] [-cbilnqsvx] [-e expression [-e expression] ... | -f file]
	 [expression] [file ...]
	 egrep [-cbilnqsvx] [-e expression [-e expression] ... | -f file]
	 [expression] [file ...]
	 fgrep [-cbilnqsvx] [-e expression [-e expression] ... | -f file]
	 [expression] [file ...]
	./rtest3: On-line: not found

[4/25/94 public]
This has a trivial fix.  I'll mail it to Andy and Ron today, just in case
they haven't fixed it already.  (Our DB 5159.)

[4/25/94 public]
Already submitted the fix.  Sorry for the delay in updating the CR.

[8/11/94 public]
Rep functional tests successfully run since so closing - can not be
run currently due to 11423



CR Number                     : 10279
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dfs
Subcomponent Name             : acl
Short Description             : misplaced quotes in driver script
Reported Date                 : 4/4/94
Found in Baseline             : 1.1
Found Date                    : 4/4/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : test/file/acl/scripts/accheck/driver.sh
Sensitivity                   : public

[4/4/94 public]

The file src/test/file/acl/scripts/accheck/driver.sh contains:

      su acluou "-c $DCE_LOGIN $USER_OBJ_USER $COMMON_USER_PASSWD -e $PROG"
      su $2 "-c $DCE_LOGIN $2 $COMMON_USER_PASSWD -e $PROG"

which fail because su attempts to interpret the "-e" option (which
belongs to the $DCE_LOGIN command) and reports "bad option(s)"

[04/05/94 public]
Submitted.

[5/23/94 public]
Builds and test runs fine now - closed.



CR Number                     : 10262
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : dced command enhancement (integrate into dcecp)
Reported Date                 : 3/31/94
Found in Baseline             : 1.1
Found Date                    : 3/31/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : too many to list
Sensitivity                   : public

[3/31/94 public]
Dced status meeting has requested a separate enhancement OT for 
dced commands development. This OT will be updated on all the dced 
commands related changes in addition to dce-drb.

[04/22/94 public]
Submitted dced commands support code to dcecp (hostdata object,
keytab object and server object).

[04/26/94 public]
Submitted dcecp secval object implementation.

[05/04/94 public]
Submitted functional test case for secval object (both negative 
and positive).

[06/10/94 public]
Submitted functional test case for server object (but only
srvrconf tested, srvrexec is post-beta)

[06/10/94 public]
Implemented -add and -removed switches for server modify command (now 
you can check out the server era attributes from schema interface and
add them to your-server-object or remove them).
Added ERA suuport in dced commands.

Two things remains -): 1) test srvrexec related cmds and fvt ICs
		       2) replace attr_scheme internal utility routines
			  with the generic rs_schema interface when it's
			  done.

[9/9/94 public]
Per Bob's request, increate this Ot to priority 1. The things left in
this Ot are 1) test srvrexec cmds 2) fix the server fvt.

[9/20/94 public]
Checked in the last piece.

[9/26/94 public]
closed.



CR Number                     : 10260
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dcerpbnk_auth
Short Description             : dcerpbnk_auth does not work
Reported Date                 : 3/31/94
Found in Baseline             : 1.1
Found Date                    : 3/31/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : ./dcerpbnk
Sensitivity                   : public

[3/31/94 public]

The system test dcerpbnk_auth does not work, Martha D. is working on it.

[04/27/94 public]
Fixed and closed by Martha.



CR Number                     : 10244
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : gds
Subcomponent Name             : xt_test
Short Description             : xt_test core dumps
Reported Date                 : 3/29/94
Found in Baseline             : 1.1
Found Date                    : 3/29/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : unknown
Sensitivity                   : public

[3/29/94 public]
xt_test core dumped while executing the SHUTDOWNadd_entry32i testcase in
tests.xds/threads_af:

Running testsuite T10add_entry32i, it had successfully completed the bulk
of the suite:

Here's the info from the start of the suite:

  T10add_entry32i
  Directory tester: threads version 4.0t [Mar 27 1994  03:01:33]
	 arguments:  -a  T10add_entry32i 
    
And from where it died:

  [1]: Testcase = BODYadd_entry32i
  
  [1]:  Func xt_cmp_status : not expected
  [1]:  Func xt_ds_add_entry : expected and received DS_status differ
  [1]:  Func xt_run : Function call FAILED
  [1]: ADD_ENTRY returned ERROR
  [1]: Testcase BODYadd_entry32i failed
  
  [1]:  Func xt_main : Testcase BODYadd_entry32i FAILED
  [1]: Testcase = SHUTDOWNadd_entry32i
  
  [1]:  Func xt_cmp_status : error received:
  [1]:    xt_cmp_status: received status was:
  ./runit[106]: 4523 Memory fault(coredump)
    
And the stack trace from the xt_test:

  (gdb) file ../../xt_test
  Reading symbols from ../../xt_test...(no debugging symbols found)...done.
  (gdb) core-file core
  Core was generated by `xt_test'.
  Program terminated with signal 11, Segmentation fault.
  #0  0x408748 in xt_status_to_buffer (1, -1073747128)
  (gdb) bt
  #0  0x408748 in xt_status_to_buffer (1, -1073747128)
  #1  0x408e48 in xt_cmp_status (1, 0, 25)
  #2  0x41bc63 in xt_ds_unbind ()
  #3  0x4076b0 in xt_run ()
  #4  0x406ae9 in xt_main (3, -1073745196)
  #5  0x422540 in main (3, -1073745196, -1073745180, -1073744908)
  #6  0x4000cb in __start (Cannot access memory at address 0x3.
  (gdb)

[3/29/94 public]
Upon further execution of the threads_af suite, it seems to be dumping on
all SHUTDOWN testcases.

[3/30/94 public]
Rich: let's try to reproduce it together.

[3/30/94 public]
The problem seems to be related to the following:
If you run T10add_entry32i at first STARTadd_entry32i is executed.
This STARTadd_entry32i runs build_tree8 and then an INITIALIZE,
VERSION,BIND. After that BODYadd_entry32i is executed which contains
only one ADD. This ADD has to use the BIND and the workspace from
STARTadd_entry32i. It seems that for "-a" (no parallel threads)
BODYadd_entry32i doesn't know anything from that what STARTadd_entry32i
did before. 
But it works for "-t" - so I think it is some stuff in xt_test which
is executed only for "-t" - but it should be executed always.
Because these testcases were written for tests with parallel threads
I propose to run the threaded functional tests only with "-t" and
decrease the priority and severity.
(I can reproduce the problem here. We always test only with "-t" -
thinking that if it runs with "-t" it will of course run with "-a" ...)

[5/5/94 public]
Downgraded to a 3 because the circumstance which creates this is a negative
test.  (I.e., a mistake.)  Also removed from beta list.

[7/11/94 public]
Couldn't reproduce problem on 486.

[07/12/94 public]
It also works fine on HP800. So we should really close it.

[7/13/94 public]
Agreed.  This was fixed at some point in the previous few months.



CR Number                     : 10237
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : xds/xom
Short Description             : initXdsM1a no longer works
Reported Date                 : 3/29/94
Found in Baseline             : 1.1
Found Date                    : 3/29/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b7
Affected File(s)              : 
test/directory/gds/tst/initXdsM1a, initXdsM1b, initXdsM2
Sensitivity                   : public

[3/29/94 public]
The syntax of the file seems to be out-of-phase with the gdsditadm program.
When executing
	gdsditadm < initXdsM1a

I find the following message in the 'tstfile':

  *** INITIALIZATION BATCHFILE FOR MACHINE #1   (step 1/4)
  *****:
									     
  ERROR:
  No connection to DSA/DUA-Cache available !
  To continue press <CR> !
    
It seems that the batch files have not been updated to provide the
'authentication' mechanism.

[3/29/94 public]
Added the following line to initXdsM1a:

:Authentication mechanism to be used:Simple Unprotected

So that step 1/4 now looks like this:

  :**** INITIALIZATION BATCHFILE FOR MACHINE #1   (step 1/4)
  *****:
  :directory id:1
  :Authentication mechanism to be used:Simple Unprotected
  :password:
  :Country:
  :Organisation:
  :Organisational unit:
  :common name:
  :options():  '
    
This causes gdsditadm to core dump!

[3/29/94 public]
After some trial and error, this seems to work:

  :**** INITIALIZATION BATCHFILE FOR MACHINE #1   (step 1/4)
  *****:
  :directory id:1
  :Authentication mechanism to be used:anonymous
  :options():  '

Based upon this, the following changes need to be made in the initXdsM*
files:

initXdsM1a:
10,14c10
< :password:
< :Country:
< :Organisation:
< :Organisational unit:
< :common name:
---
> :Authentication mechanism to be used:anonymous

initXdsM2:
11,15c11
< :password:
< :Country:
< :Organisation:
< :Organisational unit:
< :common name:
---
> :Authentication mechanism to be used:anonymous
92,96c88
< :password:
< :Country:
< :Organisation:
< :Organisational unit:
< :common name:
---
> :Authentication mechanism to be used:anonymous    

initXdsM1b:
12,16c12
< :password:
< :Country:
< :Organisation:
< :Organisational unit:
< :common name:
---
> :Authentication mechanism to be used:anonymous
44,48c40
< :password:
< :Country:
< :Organisation:
< :Organisational unit:
< :common name:
---
> :Authentication mechanism to be used:anonymous
157,161c149
< :password:
< :Country:
< :Organisation:
< :Organisational unit:
< :common name:
---
> :Authentication mechanism to be used:anonymous

[3/29/94 public]
Fix submitted.

[3/30/94 public]
We have fixed it also today - we just forgot to change the three init* files.
The difference between Rich's version and our is always:

< :Authentication mechanism to be used:anonymous
---
> :Authentication mechanism to be used:Anonymous

"Anonymous" is correct. If you give "anonymous" nothing happens because
the administration doesn't accept small letters in the beginning of this word.
(You can try it using directly gdsditadm.)
Who shall submit the change from "anonymous" to "Anonymous"? rich or me?

[3/30/94 public]
Sorry - forgotten to reopen it.

[3/30/94 public]
Well 'anonymous' (vs 'Anonymous') worked for me ....

[3/30/94 public]
Ahh...  it worked because if the word does not begin with a capital letter,
then gdsditadm ignores the data an assumes the default ... which, at the
moment, is anonymous. 

Fix re-submitted with a capital A.

[3/31/94 public]
Done



CR Number                     : 10227
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dcetest_config
Short Description             : dcetest_config uses 'clear' and 'more'
Reported Date                 : 3/25/94
Found in Baseline             : 1.1
Found Date                    : 3/25/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b9
Affected File(s)              : src/test/systest/dcetest_config
Sensitivity                   : public

[3/25/94 public]
Please don't use 'clear' and 'more' in dcetest_config.  These are only used
for cosmetic reasons and, I think, tend to get in the way more than they
help.

[5/6/94 public]
Solution was to remove calls to clear_screen from the print_menu*
functions.  (I didn't touch other areas of dcetest_config.)  Also, changed
how menus are printed.

Instead of using 'more <<== EOF ==' to print entire screens, used a
line-by-line 'echo'.



CR Number                     : 10206
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : acl
Short Description             : Provide "isllist()" support.
Reported Date                 : 3/22/94
Found in Baseline             : 1.1
Found Date                    : 3/22/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : src/admin/dcecp/acl_edit.c
    src/test/admin/dcecp/ts/acl/acl_modify_P.tcl
Sensitivity                   : public

[3/22/94 public]

*) /* XXX - isllist() call here */
      in four places in code.
      Errors will occur here:
      acl modify  /.:/hosts -a {user a_p_cell1 r}
      acl modify  /.:/hosts -ch {user a_p_cell1 r}
      acl modify  /.:/hosts -r {user a_p_cell1 r}
      acl replace /.:/hosts -acl {user a_p_cell1 r}

Use automated FVT tests to verify:
(acl_modify_168_P thru acl_modify_173_P)
(acl_replace_023_P)

[4/4/94 public]
closed

[4/4/94 public]
actually change the state to closed this time. :-)



CR Number                     : 10192
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : test/systest/audit/ts
Short Description             : Can't find library for -ldcetst
Reported Date                 : 3/21/94
Found in Baseline             : 1.1
Found Date                    : 3/21/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : src/test/Makefile
Sensitivity                   : public

[3/21/94 public]

Fixed Makefile at the top of src/test

[3/21/94 public]

[ /test/systest/audit/ts at 00:50 (AM) Sunday ]

c89 -z  -Wl,-Bimmediate,-Bnonfatal,-a,default,+b,/lib:\
  /usr/lib-L/u3/devobj/sb/nb_ux/export/hp800/usr/shlib \
  -L/project/dce/build/dce1.1-snap/export/hp800/usr/shlib -L/usr/shlib \
  -L/u3/devobj/sb/nb_ux/export/hp800/usr/lib \
  -L/project/dce/build/dce1.1-snap/export/hp800/usr/lib -o try_logins.X \
  try_logins.o -ldcetst -ldce
/bin/ld: Can't find library for -ldcetst
*** Error code 1
c89 -z -Wl,-Bimmediate,-Bnonfatal,-a,default,+b,/lib:/usr/lib\
  -L/u3/devobj/sb/nb_ux/export/hp800/usr/shlib \
  -L/project/dce/build/dce1.1-snap/export/hp800/usr/shlib -L/usr/shlib \
  -L/u3/devobj/sb/nb_ux/export/hp800/usr/lib \
  -L/project/dce/build/dce1.1-snap/export/hp800/usr/lib -o rel001.X rel001.o \
  -ltettcm -ltetapi -laudit -ldce
mv rel001.X rel001
`build_all' not remade because of errors.
*** Error code 1
`build_all' not remade because of errors.
*** Error code 1

[05/11/94 public]
Closed.



CR Number                     : 10184
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dcegdshd
Short Description             : dcegdshd - several errors in test
Reported Date                 : 3/18/94
Found in Baseline             : 1.1
Found Date                    : 3/18/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dcegdshd, sTest.gds
Sensitivity                   : public

[3/18/94 public]
There are several errors in the dcegdshd system test.

[03/18/94 public]
Fix submitted.

[03/24/94 public]
Closed.



CR Number                     : 10177
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : gds
Subcomponent Name             : test/directory/xds
Short Description             : Undeclared identifier
Reported Date                 : 3/18/94
Found in Baseline             : 1.1
Found Date                    : 3/18/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b7
Affected File(s)              : test/directory/xds/xt_dump.c
Sensitivity                   : public

[3/18/94 public]

 [ /test/directory/xds/tests.xoms/valid at 09:30 (AM) Friday ]

cc -c -DXOM -DTHREADSAFE -D_ALL_SOURCE -DAIX32 -I. \
  -I/u1/devobj/sb/nb_rios/src/test/directory/xds \
  -I/project/dce/build/dce1.1-snap/src/test/directory/xds \
  -I../../../directory/xds/h -I/u1/devobj/sb/nb_rios/src/directory/xds/h \
  -I/project/dce/build/dce1.1-snap/src/directory/xds/h \
  -I../../../directory/xom/h -I /u1/devobj/sb/nb_rios/src/directory/xom/h \
  -I/project/dce/build/dce1.1-snap/src/directory/xom/h \
  -I../../../directory/gds/h -I/u1/devobj/sb/nb_rios/src/directory/gds/h \
  -I/project/dce/build/dce1.1-snap/src/directory/gds/h \
  -I/u1/devobj/sb/nb_rios/export/rios/usr/include \
  -I/project/dce/build/dce1.1-snap/export/rios/usr/include \
  /project/dce/build/dce1.1-snap/src/test/directory/xds/xt_dump.c
"/project/dce/build/dce1.1-snap/src/test/directory/xds/xt_dump.c", line 61.1: \
  1506-045 (E) Undeclared identifier omP_dump_object.

 [ /test/systest/directory/gds/dcegdshd at 09:57 (AM) Friday ]

cc -c -g -D_BSD -Dunix -DIDL_NO_PROTOTYPES  -D_ALL_SOURCE -DAIX32 -I. \
 -I/u1/devobj/sb/nb_rios/src/test/systest/directory/gds/dcegdshd \
 -I/project/dce/build/dce1.1-snap/src/test/systest/directory/gds/dcegdshd \
 -I../../../tools -I/u1/devobj/sb/nb_rios/src/test/systest/tools \
 -I/project/dce/build/dce1.1-snap/src/test/systest/tools \
 -I../../../../../directory/xds/h -I/u1/devobj/sb/nb_rios/src/directory/xds/h \
 -I/project/dce/build/dce1.1-snap/src/directory/xds/h \
 -I../../../../../directory/xom/h -I/u1/devobj/sb/nb_rios/src/directory/xom/h \
 -I/project/dce/build/dce1.1-snap/src/directory/xom/h \
 -I../../../../../directory/xmh/h -I/u1/devobj/sb/nb_rios/src/directory/xmh/h \
 -I/project/dce/build/dce1.1-snap/src/directory/xmh/h \
 -I../../../../../directory/gds/h -I/u1/devobj/sb/nb_rios/src/directory/gds/h \
 -I/project/dce/build/dce1.1-snap/src/directory/gds/h \
 -I/u1/devobj/sb/nb_rios/export/rios/usr/include \
 -I/project/dce/build/dce1.1-snap/export/rios/usr/include \
 /project/dce/build/dce1.1-snap/src/test/directory/xds/xt_dump.c
"/project/dce/build/dce1.1-snap/src/test/directory/xds/xt_dump.c", line 61.1: \
  1506-045 (E) Undeclared identifier omP_dump_object.

[3/18/94 public]
Well, this certainly isn't an A0 because xt_test built, but it's still a
significant.

[3/21/94 public]

Why does this error occur now? Our submit was one month before. But anyway -
xt_dump.c will be defuncted with our next submit. xt_dump could be used
to dump some XOM objects - but the switch for xt_test was not documented.
And also didn't work correctly. We have decided to remove this option -
it was too difficult to keep XOM and xt_dump consistent.
Rich: Shall I submit the fix for that before? (It's only the Makefile -
remove all xt_dump stuff.)

[3/21/94 public]
Apparently this problem has occured for some time but the Rats just picked
it up now.

You can hold on the fix until your drop.

[03/21/94 public]

When xt_dump is defuncted, are you going to also make sure the system test
/test/systest/directory/gds/dcegdshd still builds correctly?  When dump
was changed to xt_dump in the last drop dcegdshd stopped building.

[03/21/94 public]

Thanks for the hint. I don't feel really responsible for the systest
stuff but it's easy to change. I will remove xt_dump.c in the 
systest/directory/gds/dcegdshd/Makefile and the call of 
"omP_dump_object" in shd_util.c.
I will build systest/directory/gds/dcegdshd to make sure that all will work.
Do you know who is the author  of shd_util.c? Who knows what view_obj
(built in systest/directory/gds/dcegdshd) really does? Where is it
used in the system test?

[04/26/94 public]
Set it to fix - all changes have been submitted in March.
I asked some questions: nobody answered. Does this mean that nobody knows
an answer? Who cares about gds (xds) systests?

[4/27/94 public]
To answer your question:  judging from the comments in the code, it looks
like the auther of shd_util was IBM.  This seems to date from prior to the
1.0 release.  I don't know about the other details of the tests.

QA owns the system tests -- I've mentioned this to you before.

[5/4/94 public]
Closed.



CR Number                     : 10172
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : systest
Subcomponent Name             : 
Short Description             : Submit audit system tests
Reported Date                 : 3/17/94
Found in Baseline             : 1.1
Found Date                    : 3/17/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : Makefile
Sensitivity                   : public

[3/17/94 public]


Submit the following audit system tests:

Test Name: AUSTR001

	- Test many users logging in simultaneously
	  Procedure:
	   - Start auditd
	   - Add AUDIT_ACCTS DCE users to the registry
	   - Fork off AUDIT_ACCTS processes
	   - AUDIT_ACCTS processes wait on a shared variable
	   - When shared variable reaches AUDIT_ACCTS all process login simultaneously
	   - Verify there are AUDIT_ACCTS log entries with with auditcp
	   - Stop auditd

	   Note: AUDIT_ACCTS is an integer configuration variable read in 
	      from the tetexec.cfg file.  The default value is 5.

Test Name: AUDREL001


	- Have client(s) sending events to the same log
	   Procedure:

	   This test will make use of an application
	   which will have the following defineable parameters

	   AUDIT_DURATION	"How long to run the test"	(minutes)
	   AUDIT_EVENT_DELAY	"Period for issuing events"	(seconds)
	   AUDIT_NUM_OF_CLIENTS    "Number of clients to run"	(whole number)

	   AUDIT_DURATION will have the default 60 minutes and
	   AUDIT_EVENT_DELAY will have the default 5 seconds
	   AUDIT_NUM_OF_CLIENTS will have the default 1

	    - Start the auditd using auditcp
	    - Start AUDIT_NUM_OF_CLIENTS 
	    - Emit an event every AUDIT_EVENT_DELAY from each of the 1 clients
	    - Use auditcp to verify that there are 
	      1*[60*AUDIT_DURATION] / AUDIT_EVENT_DELAY events which are logged

	     Note: Currently only a single client is supported for this test.
		   Values of AUDIT_NUM_OF_CLIENTS other than 1 are ignored.



CR Number                     : 10149
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cds
Subcomponent Name             : test/directory/cds/dcesx
Short Description             : cdstest.c can't find rpc.h
Reported Date                 : 3/16/94
Found in Baseline             : 1.1
Found Date                    : 3/16/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : cdstest.c
Sensitivity                   : public

[3/16/94 public]

[ /test/directory/cds/dcesx ]

c89 -c    -D_SHARED_LIBRARIES   -Dunix -DDEBUG -DDNS_RPC -DDNS_V3API \
  -DDNS_CDS -DDCE_SEC -DDNS_CMA -D__hppa -Dhp9000s800 -Dhp9000s700 \
  -D__hp9000s800 -D__hp9000s700 -DHPUX -D__hpux -Dunix +DA1.0 -D_HPUX_SOURCE\
  -I. -I/u3/devobj/sb/nb_ux/src/test/directory/cds \
  -I/project/dce/build/dce1.1-snap/src/test/directory/cds \
  -I../../../directory/cds/includes \
  -I/u3/devobj/sb/nb_ux/src/directory/cds/includes \
  -I/project/dce/build/dce1.1-snap/src/directory/cds/includes \
  -I/u3/devobj/sb/nb_ux/export/hp800/usr/include \
  -I/project/dce/build/dce1.1-snap/export/hp800/usr/include \
  /project/dce/build/dce1.1-snap/src/test/directory/cds/cdstest.c
param.h: 391: warning- Redefinition of macro MIN.
param.h: 392: warning- Redefinition of macro MAX.
cdstest.c: 108: Unable to find include file 'rpc.h'.
*** Error code 1

[3/17/94 public]
include <rpc.h> -> include <dce/rpc.h>



CR Number                     : 10136
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : other
S/W Ref Platform              : sinix
Component Name                : systest
Subcomponent Name             : rpc/rpc.cds.3
Short Description             : rpc.cds.3_cli gets bus error on "id (debug)" statement
Reported Date                 : 3/15/94
Found in Baseline             : 1.0.3
Found Date                    : 3/15/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : rpc.cds.3_cmain.c
Sensitivity                   : public

[3/15/94 public]

The test rpc.cds.3 gets bus error due to incorrectly declared variable.
The file rpc.cds.3_cmain.c declares debug as short. The maintain_id.c
declares it as 'extern int'. Out mips compiler that aligns int to
4 byte address boundary gets bus error in trying to access debug
variable.

All other instances and use of debug variable suggest that it should
be declared consistently as an int. By declaring debug as an int in
file rpc.cds.3_cmain.c fixes this problem.

[05/05/94 public]
Fix submitted.

[05/11/94 public]
Closed.



CR Number                     : 10128
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dcerpbnk
Short Description             : dcerpbnk can not alternate protocols
Reported Date                 : 3/11/94
Found in Baseline             : 1.1
Found Date                    : 3/11/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dcerpbnk
Sensitivity                   : public

[3/11/94 public]

The dcerpbnk system test can not be executed with alternating RPC
protocols.

[03/11/94 public]
Fix submitted.

[03/14/94 public]
Reopened, my fix does not seem to work as well as it looked in testing it.

[05/11/94 public]
Fix submitted.

[05/17/94 public]
Closed.



CR Number                     : 10121
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dcecp
Subcomponent Name             : tclapi
Short Description             : Tclapi receives "invalid argument" on hpux.
Reported Date                 : 3/10/94
Found in Baseline             : 1.1
Found Date                    : 3/10/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : test/tet/src/tcl/api/tcm.tcl.dat
Sensitivity                   : public

[3/10/94 public]
The Tcl API is generating an "invalid argument" message. This is because
the signals defined in the API Makefile are platform dependent. Changing
the Makefile to set the list of signals based on platform will solve this
problem. The fix will be submitted now.

[3/17/94 public]
Nightly built x3 platforms.



CR Number                     : 10119
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dceseacl
Short Description             : dceseacl always says PASS no matter what it does
Reported Date                 : 3/10/94
Found in Baseline             : 1.1
Found Date                    : 3/10/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : ./test/systest/security/dceseacl
Sensitivity                   : public

[3/10/94 public]

The dceseacl system test always says PASS no matter what.

[03/10/94 public]
Fix submitted.

[03/14/94 public]
Closed.



CR Number                     : 10091
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 9819
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : systest
Subcomponent Name             : dcerpper system test
Short Description             : systest dcerpper fp test dumps core
Reported Date                 : 3/8/94
Found in Baseline             : 1.1
Found Date                    : 3/8/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.2.1
Affected File(s)              : system_tests
Sensitivity                   : public

[3/8/94 public]

The dcerpper floating point test (#6) consistently dumps core on an AIX machine.

[03/08/94 public]
More information:

EXAMPLE #1 (TCP)

SERVER

root@soldier> perf_server 10 ncacn_ip_tcp
Got binding: ncacn_ip_tcp:130.105.202.6[2001]
+ Listening...
+ perf_init: called from ncacn_ip_tcp:130.105.202.6[3878] 

CLIENT

root@soldier> perf_client 06 ncacn_ip_tcp:130.105.202.6[2001] 3 100 y n
Floating point test [6]
    passes: 3; calls/pass: 100; verification: on; idempotent: no
Segmentation fault(coredump)

EXAMPLE #2 (UDP)

SERVER

root@soldier> perf_server 10 ncadg_ip_udp
Got binding: ncadg_ip_udp:130.105.202.6[2001]
+ Listening...
+ perf_init: called from ncadg_ip_udp:130.105.202.6[2713] 
+ perf_init: called from ncadg_ip_udp:130.105.202.6[2715] 

CLIENT

root@soldier> perf_client 06 ncadg_ip_udp:130.105.202.6[2001] 3 100 y n
Floating point test [6]
    passes: 3; calls/pass: 100; verification: on; idempotent: no
Segmentation fault(coredump)
root@soldier> perf_client 06 ncadg_ip_udp:130.105.202.6[2001] 3 100 y n
Floating point test [6]
    passes: 3; calls/pass: 100; verification: on; idempotent: no
Segmentation fault(coredump)

[3/8/94 public]

Maybe caused by the divide-by-zero error because of rand() returning 0?

[03/08/94 public]
This defect might be a duplicate of defect 9819 except that on AIX it
dumps core.

[04/04/94 public]
This appears to be a bug in the functional test.

[04/04/94 public]
Duped to 9819.  Fixed test not to allow zero return from rand().

[04/27/94 public]
Re-opened, this test still dumps core on AIX.

[04/27/94 public]
Paul,

I ran this on orange today (4/27) with the 4/26 nightly build and it
ran fine:
orange> ./client 06 ' ncadg_ip_udp:130.105.5.21[2001]' 3 100 y n
Floating point test [6]
    passes: 3; calls/pass: 100; verification: on; idempotent: no
        pass   1; ms/call: 8.568
        pass   2; ms/call: 8.804
        pass   3; ms/call: 8.855

IBM has also ran this test with no failures (see TestSummary file).

Perhaps you were using bl-6, which did not have my fixes in it.
Please re-test and mark the defect back to dup.

[05/03/94 public]
Verified that functional test works, problem must be in system test only.

[08/11/94 public]

This problem only shows up on the RIOS. ksh core dumps during the 
execution of the client on the RIOS machine, thus the test fails.
So, if one of the machines in the -m "c1 c2 .. cn" list happens to
be a RIOS, the test will sure fail. If one excludes the RIOS from 
the client list, the test will pass. I must add that the server 
runs successfully on the RIOS.

[08/25/94 public]
This is not a problem with the ksh on the RIOS. The test does fail
in the following code in client.c:

>                 case 6:
>                 {
>                     float f1 = (float) (rand()+1);
>                     float f2 = (calln & 1 ? 1.0 : -1.0) * (rand()+1);
>                     double d1 = 1.0 / (rand()+1);
>                     double d2 = sqrt(pow((double) (7 + (rand()+1) % 10),
>                         (double) ((rand()+1) % 40)));
>                     float o1, o1_l = (f1 / f2) * (d1 / d2);
>                     double o2, o2_l = (f2 / f1) * (d2 / d1);

A core dump occurs in the call to "pow". I took this code and moved the
assignment of d2, o1_l, and o2_l to come after the declaration and it
did not dump core. This leads me to believe that the compiler is not
generating the proper code. I am going to submit this change and
verify that this is indeed the problem. I have been looking at the
assembly code produced by the compiler but that seems to be
inconclusive.

Below is the output which indicates the compiler I am using:

[yale:bmw] pts/10 /u/bmw
805 ->lslpp -h xlccmp.obj
  Name
  --------------------
    Fix Id  Release         Status     Action     Date       Time     User Name
    ------- --------------- ---------- ---------- ---------- -------- ----------

Path: /usr/lib/objrepos
  xlccmp.obj
            01.03.0000.0000 COMPLETE   COMMIT     10/07/93   08:44:24 root
    U491204 01.03.0000.0000 COMPLETE   COMMIT     10/07/93   18:32:09 root

Path: /etc/objrepos
  xlccmp.obj
            01.03.0000.0000 COMPLETE   COMMIT     10/07/93   08:44:26 root

[09/26/94 public]

I was too quick on the trigger on closing this one. The problem is still there.
The changes to the declarations and assignments in client.c weren't in the 
tree, but I made them and tested them, and still got the problem with the test 
failing in the fp section.

Here's the compiler info for the RIOS we're running the tests on:

% lslpp -h xlccmp.obj
  Name
  --------------------
    Fix Id  Release         Status     Action     Date       Time     User Name
    ------- --------------- ---------- ---------- ---------- -------- ----------
Path: /usr/lib/objrepos
  xlccmp.obj
            01.02.0001.0000 COMPLETE   COMMIT     02/25/94   11:08:15 root

  xlccmp.obj
    U417268 01.02.0001.0008 COMPLETE   COMMIT     02/25/94   11:53:05 root
    U491075 01.02.0001.0008 COMPLETE   COMMIT     02/25/94   11:53:06 root

Path: /etc/objrepos
  xlccmp.obj
            01.02.0001.0000 COMPLETE   COMMIT     02/25/94   11:08:16 root

[09/27/94 public]
I see the changes I made in the BL18 build. We will be testing either
this build or BL19. We will update with our results.

[12/19/95 public]
Fixed in DCE 1.2.1
Closed



CR Number                     : 10086
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : systest
Subcomponent Name             : dcerpper
Short Description             : dcerpper fails on AIX, invalid use of LOGNAME
Reported Date                 : 3/7/94
Found in Baseline             : 1.1
Found Date                    : 3/7/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dcerpper, per.functions
Sensitivity                   : public

[03/07/94 public]

The dcerpper system test fails on AIX because of the invalid use of the
variable LOGNAME.

[03/08/94 public]
Fix submitted.

[03/09/94 public]
Closed.



CR Number                     : 10078
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : systest
Subcomponent Name             : 
Short Description             : Added common test support functions to DCE
Reported Date                 : 3/7/94
Found in Baseline             : 1.1
Found Date                    : 3/7/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : tst_tet_util.c, tst_process.c
, tst_dtet_util.c, tst_dce_login.c, tst_comm_api.h
Sensitivity                   : public

[3/7/94 public]

I ported a number of functions that were useful
with TET during the DME project.
By porting them they are available to the DCE 1.1 project.
Let me know if there are comments/questions.

I have showed Paul Ellis this list and he agrees
these functions are useful.


extern int tst_tet_printf(const char *,...);


This function allows the user to send the contents
of a printf to the tet journal file.  A tester
can use the different format directives used in printf
when sending a message to the journal file.
tet_infoline by itself doesn't provide this feature.
If this function is successful, a 0 is returned.
Otherwise a non-zero value is returned.

int tst_tet_syncall(int syncpoint ,int timeout);

This function is a wrapper around tet_sync.
This function is used for DTET testcases.
Instead of having to fill in a list of nodes to synchronize with,
this function will automatically determine the current node
and perform the synchronization with the other DTET nodes.
If this function is successful, a 0 is returned.
Otherwise a non-zero value is returned.

extern void tst_dce_login(char *, char *, error_status_t *status);

Given a dce user name and password, this function attempts a dce_login.
If the dce_login is successful error_status_ok is returned.
Otherwise a non-zero value is returned.


extern int tst_chk_command(char *command, pid_t *pid);


This function will take a given command name "command"
and check to see whether this command is in the process table.
If this function is successful, a 0 is returned.
Otherwise a non-zero value is returned.


extern int tst_chk_process(pid_t *pid);


This function will take a given process "pid"
and check to see whether this pid is in the process table.
If this function is successful, a 0 is returned.
Otherwise a non-zero value is returned.

[3/14/94 public]
Closed



CR Number                     : 10077
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : rpc
Subcomponent Name             : rtandidl testcase
Short Description             : errors in do_rpc_test
Reported Date                 : 3/7/94
Found in Baseline             : 1.1
Found Date                    : 3/7/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : 
			src/test/rpc/rtandidl/control/do_rpc_test.sh
Sensitivity                   : public

[3/7/94 public]
There are two errors in the shell script do_rpc_test:

1) The following line causes the Xserver process to be killed on an
	AIX machine:

ps -ef | grep server | grep -v grep | awk '{ print \$2 }' | xargs kill -9


	This line along with the following:
ps -ef | grep sofserv  | grep -v grep | awk '{ print \$2 }' | xargs kill -9
ps -ef | grep mgmt_ser | grep -v grep | awk '{ print \$2 }' | xargs kill -9

can be combined and modified into the following:

      ps -eo comm,pid | awk '/server|sofserv|mgmt_ser/ {print $2}' | xargs kill


2) If the test is interrupted, it does not cleanup.


I have added a cleanup function that will perform the following:

	- kill server processes
	- dce_login as cell_admin and remove name space entries


Therefore the cleanup function is:
cleanup()
{
        echo "Stopping servers"
        ps -eo comm,pid | awk '/server|sofserv|mgmt_ser/ {print $2}'|xargs kill

        echo "Removing ns entries"
        dce_login cell_admin -dce- <<-DCE_LOGIN_EOF
                # Remove cds entries
                cdscp >/dev/null 2>&1 <<-CDSCP_EOF
                        del obj /.:/NSTEST_DIR/profile_test
                        del obj /.:/NSTEST_DIR/profile_test_export1_8_dup
                        del obj /.:/NSTEST_DIR/profile_test_export_1_1
                        del obj /.:/NSTEST_DIR/profile_test_export1_1
                        del dir /.:/NSTEST_DIR
                        q
                CDSCP_EOF
        DCE_LOGIN_EOF
}

trap "cleanup; exit 1" 1 2 3 15



CR Number                     : 10069
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dcesepol
Short Description             : Fix required in sec.functions for interface change in rgy_edit
Reported Date                 : 3/4/94
Found in Baseline             : 1.1
Found Date                    : 3/4/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : sec.functions
Sensitivity                   : public

[3/4/94 public]
Fix required in sec.functions for an interface change in rgy_edit.

[03/04/94 public]
Fix submitted.

[03/07/94 public]
Closed.



CR Number                     : 10061
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : test/security/tet-tests/ts/client/rca/sec_rgy_attr
Short Description             : make: don't know how to make
mob@apollo.hp.com ahop@apollo.hp.com marcyw rrizzo
Reported Date                 : 3/3/94
Found in Baseline             : 1.1
Found Date                    : 3/3/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : 
./test/security/tet-tests/ts/client/rca/sec_rgy_attr/Makefile
./test/security/tet-tests/ts/client/rca/sec_rgy_attr_sch/Makefile
Sensitivity                   : public

[3/3/94 public]
Test build errors:
in the install_tests.log
  make: don't know how to make sec_rgy_attr-tc (continuing)
  make: don't know how to make sec_rgy_attr_sch-tc (continuing)
in the tests.log
  make: don't know how to make ts-common.o (continuing)
Fixes in Makefiles necessary.  From ERA submission.

[3/3/94 public]
Changed SOURCEBASE to MAKETOP so that builds would work in non populated
sandboxes.  Tested and submitted (entered the wrong defect number) entered
10036 instead of this one.

[5/14/94 public]
Closed.



CR Number                     : 10059
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : rpc
Subcomponent Name             : 
Short Description             : missing files in install tree
Reported Date                 : 3/3/94
Found in Baseline             : 1.1
Found Date                    : 3/3/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : 
	src/test/rpc/idl/context/Makefile
	src/test/rpc/idl/cover1/Makefile
	src/test/rpc/idl/pipefault/Makefile
	src/test/rpc/idl/pipetest/Makefile
	src/test/rpc/idl/no_op/Makefile
	src/test/rpc/idl/pipes/Makefile
Sensitivity                   : public

[3/3/94 public]
When I was running the rpc idl tests the following tests failed because
the corresponding .h file was not put into the install tree:

context
cover1
no_op
pipefault
pipes
pipetest

The solution is to modify the Makefile for each directory to put the
.h file into the install tree.

[4/6/94 public]
Verified that tests run OK.
Closed.



CR Number                     : 10054
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : rpc
Subcomponent Name             : 
Short Description             : perf test failures
Reported Date                 : 3/2/94
Found in Baseline             : 1.1
Found Date                    : 3/2/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b7
Affected File(s)              : perf_tcp.sh perf_udp.sh run_client.sh
Sensitivity                   : public

[3/2/94 public]
The following errors were extracted out of the log files from the perf tests:


perf_tcp.sh errors only:

client 12a
*** "Unknown remote fault" exception raised
Callback (UNSUPPORTED!) test [12]
client 12b
*** "Unknown remote fault" exception raised
Callback (UNSUPPORTED!) test [12]


perf_tcp.sh and perf_udp.sh errors:

client 15c
        Correct cancel exception operation
    *** unexpected cancel timeout raised (1st call)!
    *** unexpected cancel timeout exception raised!
    *** unexpected cancel timeout exception raised!
    *** cancel exception NOT raised!
    *** and lost cancel (not pending)!
client 15d
        Correct cancel exception operation
    *** unexpected cancel timeout raised (1st call)!
    *** unexpected exception raised!
    *** cancel not pending
        Correct cancel exception operation
    *** unexpected cancel timeout raised (1st call)!


run_client.sh ncadg_ip_udp

Variable length output arg test [2]
    passes: 3; calls/pass: 3; verification: on; idempotent: yes; bytes/call: 100000
        pass   1; ms/call: 474.177; kbytes/sec: 210
        pass   2; ms/call: 386.972; kbytes/sec: 259
        pass   3; ms/call: 374.101; kbytes/sec: 267
*** Call succeeded (shouldn't have); bound to "ncadg_ip_udp:129.35.67.203[1994]", result="rain.austin.ibm.com"
Broadcast test [3]
  Broadcast call that should succeed...
    bound to "ncadg_ip_udp:129.35.67.203[2001]", result="rain.austin.ibm.com"
  Broadcast call that should get communications failure (exception case)...
    call failed as expected
  Broadcast call that should get communications failure (unknown i/f case)...
Maybe test [4]


run_client.sh ncacn_ip_tcp

Variable length output arg test [2]
    passes: 3; calls/pass: 3; verification: on; idempotent: yes; bytes/call: 100000
        pass   1; ms/call: 224.987; kbytes/sec: 446
        pass   2; ms/call: 220.146; kbytes/sec: 454
        pass   3; ms/call: 224.112; kbytes/sec: 446
*** "Communications failure" exception raised
Broadcast test [3]
  Broadcast call that should succeed...
Maybe test [4]

[3/3/94 public]

Test #12: Callback test

It says "UNSUPPORTED!" and it is unsupported. (Although DG protocol
implementation has it and Microsoft RPC claims that it supports callbacks,
AES does not define it.)

Test #15: Static Cancel test

Since the server manager routines have a cancellation point, i.e.,
printf(), this test doesn't work as expected. (And there are other timing
related issues...)

Test #3: Broadcast test

Of course, it's supported in DG only. You shouldn't run it with CN.
In case of DG failure, it was caused by one of these:

a) You started the perf server with -b option. (Or there was another server
with -b option already running. Maybe from the previous test run?)

b) You had run the test #8: Forwarding test, which failed and didn't
unregister perfb interface from the server, before running the test #3. (Or
there was another server already running in this state from the previous
test run.)

There is another failure mode which wasn't the cause of your failure.

c) There is a server running in the above mentioned states, i.e.,
supporting perfb interface, on the local network. After all, it is a
broadcast.

Well, these failures, except test #15, are caused by the operator error.
So, it leaves us only test #15 to be fixed (or dropped :-).

[04/06/94 public]

I modified the scripts so they will not run the DG only tests if you
are testing CN.  In addition, I removed test 12 from the tcp script
since it is unsupported and will fail.

I could not reproduce the broadcast failures on HP or 486.  I think
this was operator error.

For test #15 - The static cancel test, I increased the cancel timeout value
from 1 second to 5.  I don't believe the printf's in the server code
are cancel points as Seiichi states above.  The failure in the test
was because the timeout timer was expiring before the rpc call had
finished its sleeping ( the old values were 1 second sleep and 1 
second timeout).

IBM - Please re-run these test on the RIOS and update the TestSummary file.
Thanks.

[4/13/94 public]

Yes, printf()s in the server manager code are cancellation points. However,
the current CMA implementation will not raise the exception unless the IO
gets blocked, i.e., if the first write() attempt succeeds it will never
check the pending alert (see cma__ts_func()::cma_thread_io.h.). Luckily,
your printf()s never get blocked. Try it on the slow IO output device. I
don't know what Pthread draft 4 says about this behavior, though.



CR Number                     : 10039
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dcecp
Subcomponent Name             : 
Short Description             : admin tests installed in wrong
install tree
Reported Date                 : 3/1/94
Found in Baseline             : 1.1
Found Date                    : 3/1/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : admin/tcl7.3/tests/* test/admin/tcl_dce/*
Sensitivity                   : public

[3/1/94 public]
The admin tests are currently installed in <install>/opt/dce1.0  They
should be installed in <install>/dcetest/dce1.0:

gemini feb/dee$ ls
/project/dce/build/nb_486/install/at386/opt/dce1.0/test/admin/tcl_dce
total 826
drwxr-xr-x   2 root     system             1536 Mar  1 01:12 .
drwxr-xr-x   3 root     system              512 Mar  1 01:12 ..
-rwxr-xr-x   1 bin      bin                 630 Feb 28 18:17 all_tests
-rwxr-xr-x   1 bin      bin                4298 Feb 28 18:17 append.test
-rwxr-xr-x   1 bin      bin                4807 Feb 28 18:17 async.test
-rwxr-xr-x   1 bin      bin                5430 Feb 28 18:17 case.test
-rwxr-xr-x   1 bin      bin                3951 Feb 28 18:17 cd.test
-rwxr-xr-x   1 bin      bin                3128 Feb 28 18:17 cmdinfo.test
-rwxr-xr-x   1 bin      bin                2346 Feb 28 18:17 concat.test
-rwxr-xr-x   1 bin      bin                2270 Feb 28 18:17 dcall.test
-rwxr-xr-x   1 bin      bin                3096 Feb 28 18:17 defs
-rwxr-xr-x   1 bin      bin                6283 Feb 28 18:17 dstring.test
-rwxr-xr-x   1 bin      bin                3949 Feb 28 18:17 env.test
-rwxr-xr-x   1 bin      bin                5837 Feb 28 18:17 error.test
-rwxr-xr-x   1 bin      bin                2602 Feb 28 18:17 eval.test
-rwxr-xr-x   1 bin      bin               15200 Feb 28 18:17 exec.test
.... and so on

[3/1/94 public]
I'll take care of this.

[3/1/94 public]
The tests were moved. The source Makefile was updated. The destination
Makefile was created, and the Makefile in the destiantions parent was
updated to know about the new directory.

[3/7/94 public]
With the help of CR 10050, this built x3 platforms. Closed.



CR Number                     : 10012
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : xoms
Short Description             : XOMS tests not installed
Reported Date                 : 2/24/94
Found in Baseline             : 1.1
Found Date                    : 2/24/94
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b4
Affected File(s)              : tests.xoms/*
Sensitivity                   : public

[2/24/94 public]
The XOMS tests are not installed.

[2/24/94 public]
submitted 6 Makefiles.

[3/14/94 public]
Closed.



CR Number                     : 10002
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cds
Subcomponent Name             : test/directory/cds/dcesx
Short Description             : cannot "build_all", possibly because of other test build failures resulting from inability to find "dce/std.h"
Reported Date                 : 2/23/94
Found in Baseline             : 1.1
Found Date                    : 2/23/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : test/tet/src/dtet/tcm/Makefile,
test/directory/cds/dcesx/Makefile
Sensitivity                   : public

[2/23/94 public]

Broken out from OT 9998 (please see its updated description):

The following modules complained "'build_all' not remade because of errors":

[ /test/tet/src/dtet/tcm at 22:58 (PM) Tuesday ]
[ /test/directory/cds/dcesx at 23:40 (PM) Tuesday ]

The problem may be related to the failure of other test modules to find
the include file "dce/std.h".

[2/23/94 public]

Corrected a module name in full description - had GDS, should have been
CDS, directory.

[2/23/94 public]
We can't seem to make this failure happen in a sandbox backed by 
dce1.1. It could be a side affect of the gds. We're going to let
it go again tonight. Niether of these will affect core functionality
if it fails again. Downgrading it to a 1 until we see if it breaks again.

[2/23/94 public]

I'm adding one more module that was in the GDS OT 9998.  The only complaint
is as above, "'build_all' not remade because of errors'":

[ test/tet/src/dtet/xresd at 23:51 (PM) Tuesday ]

[03/07/94 public]
Closed



CR Number                     : 9999
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : test/systest/rpc/rpc.cds.3
Short Description             : can't find "dce/std.h"
Reported Date                 : 2/23/94
Found in Baseline             : 1.1
Found Date                    : 2/23/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : See Below
Sensitivity                   : public

[2/23/94 public]

This breaks out the test/systest/rpc errors from OT 9998.  Please
see the updated comments to that OT.

The following files in the modules shown complained that they couldn't
find "dce/std.h":

[ /test/systest/rpc/rpc.cds.3 at 23:47 (PM) Tuesday ]
rpc.cds.3_set_cal_uuid.c

[ /test/systest/rpc/rpc.sec.2 at 23:47 (PM) Tuesday ]
maintain_id.c
bnk_util.c
bank.c
bankd.c

[2/23/94 public]

Could anybody explain me why systest/rpc files include an include file
from directory/gds/asn1/DUA? See 9998 : I think all these files should change.

[02/23/94 public]

Need to change std.h to dce.h in:

./test/systest/directory/gds/dcegdshd/shd_util.c        1.1.3.1
./test/systest/directory/gds/dcegdshd/view_obj.c        1.1.3.1
./test/systest/file/dirread.c   1.1.8.1
./test/systest/file/filewnr.c   1.1.18.1
./test/systest/rpc/bank.c       1.1.17.1
./test/systest/rpc/bankd.c      1.1.16.1
./test/systest/rpc/bnk_util.c   1.1.14.1
./test/systest/rpc/rpc.cds.3/maintain_id.c      1.1.14.1
./test/systest/rpc/rpc.cds.3/rpc.cds.3_set_cal_uuid.c   1.1.75.1
./test/systest/rpc/rpc.cds.3/rpc.cds.3_smain.c  1.1.88.1
./test/systest/rpc/util.c       1.1.68.1
./test/systest/security/sec.rgy.7/login_test.c  1.1.62.1
./test/systest/security/sec.rgy.7/secrgy_client.c       1.1.67.1
./test/systest/security/sec.rgy.7/secrgy_server.c       1.1.78.1
./test/systest/threads/thd_client.c     1.1.15.1
./test/systest/threads/thd_server.c     1.1.14.1
./test/systest/threads/thd_util.c       1.1.95.1
./test/systest/tools/msgqd.c    1.1.86.1
./test/systest/tools/ropen_main.c       1.1.16.1
./test/systest/tools/util.c     1.1.15.1
./test/systest/tools/xx_lib_r.c 1.1.12.1

[02/23/94 public]
Submitted 21 files.

[02/24/94 public]

A new problem caused by the GDS drop:

c89      -z -Wl,-Bimmediate,-Bnonfatal,-a,default,+b,/lib:/usr/lib     -L/u3/dev
obj/sb/nb_ux/export/hp800/usr/shlib -L/project/dce/build/dce1.1-snap/export/hp80
0/usr/shlib -L/usr/shlib -L/u3/devobj/sb/nb_ux/export/hp800/usr/lib     -L/proje
ct/dce/build/dce1.1-snap/export/hp800/usr/lib   -o view_obj.X view_obj.o shd_uti
l.o dump.o  -ldce
/bin/ld: Unsatisfied symbols:
   get_acl_length (code)
   get_psap_length (code)
*** Error code 1

[02/25/94 public]
Closed.



CR Number                     : 9998
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : thr
Subcomponent Name             : test/systest/threads
Short Description             : can't find "dce/std.h"
Reported Date                 : 2/23/94
Found in Baseline             : 1.1
Found Date                    : 2/23/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dce/std.h
Sensitivity                   : public

[2/23/94 public]

Various GDS test modules report they cannot find "dce/std.h" and cannot
find the library for "-lxx_":

[ /test/systest/directory/gds/dcegdshd at 23:46 (PM) Tuesday ]
view_obj.c
shd_util.c

The following module complains about unsatisfied symbols:

[ /test/directory/gds/ros/testenv/adm at 23:37 (PM) Tuesday ]

c89      -z -Wl,-Bimmediate,-Bnonfatal,-a,default,+b,/lib:/usr/lib    -L. \
-L/u3/devobj/sb/nb_ux/src/test/directory/gds/ros/testenv \
-L/project/dce/build/dce1.1-snap/src/test/directory/gds/ros/testenv \
-L/u3/devobj/sb/nb_ux/export/hp800/usr/shlib \
-L/project/dce/build/dce1.1-snap/export/hp800/usr/shlib -L/usr/shlib \
-L/u3/devobj/sb/nb_ux/export/hp800/usr/lib \
-L/project/dce/build/dce1.1-snap/export/hp800/usr/lib  \
-o adrmgr.X adrmgr.o nameserv.o d20frame.o d20trans.o  ldformats.o \
-ladmv2e -losiaddr -lcurses -ltermcap
/bin/ld: Unsatisfied symbols:
   cma_sprintf (code)
   cma_catgets (code)
   pthread_once (code)
   pthread_mutex_init (code)
   cma_fputs (code)
   cma_isatty (code)
   cma_fputc (code)
   pthread_mutex_unlock (code)
   cma_lib_malloc (code)
   cma_fprintf (code)
   cma_fgets (code)
   cma_lib_free (code)
   cma_fflush (code)
   cma_fclose (code)
   cma_fgetc (code)
   pthread_mutex_lock (code)
   pthread_mutexattr_default (data)
   cma_fopen (code)
*** Error code 1

The following modules seem to be indirectly affected (message is
merely "'build_all' not remade because of errors"):

[ /test/directory/gds/mavrostest at 23:38 (PM) Tuesday ]
[ /test/systest/directory/gds/gds_xds_str_001 at 23:46 (PM) Tuesday ]

[2/23/94 public]

OK: I will repair the /test/directory/gds/ros/testenv/adm problems.
	(That means I will add a "-ldce".)

The other problems: std.h is a include file from src/directory/gds/asn1/DUA.
We have it exported before but we have changed that because we didn't know
that i.e. systest files use this private gds include. We don't export it
because nobody in directory outside gds/asn1 uses it. 
I have checked some of the files which did not build: In all files I have
found a comment from "cmckeen": (1993/10/14)

 For CR 7671, included <dce/std.h> for definition of TRUE and FALSE

I think the following has happened : TRUE and FALSE were missing in a lot
of systest files. The resp. engineer went to export/hp800/usr/include/dce
and did a "grep TRUE *". He found that std.h has defined TRUE. So they
included std.h.

I think the quick and dirty fix is to export std.h again (it still defines
TRUE and FALSE ....); a good fix would be to include dce/dce.h (or sys/types.h)
instead of dce/std.h.

It's your decision, systest guys.

[2/23/94 public]
Removed Norbert Marrek as assignee of this defect.  This defect contains
problems which are scattered among a bunch of different components.  I
recommend component-specific defects be opened and this be cancelled.

[2/23/94 public]
Before you cancel this defect I would like to mention that I have 
fixed the problem of linking /test/directory/gds/ros/testenv/adrmgr and
/test/directory/gds/ros/testenv/rostest: libdce is linked additionally. 
The corrosponding files (/test/directory/gds/ros/testenv/Makefile
and /test/directory/gds/ros/testenv/${TARGET_MACHINE}/machdep.mk)
are submitted.

[2/23/94 public]

Transferred all non-GDS test modules to separate OTs.

[5/6/94 public]
This was fixed I believe by Paul. I'll mark it a fixed for now and check with
him on Monday when he is back.



CR Number                     : 9980
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : 
Short Description             : profile.dcest[.tet] and run.rpc need updates
Reported Date                 : 2/18/94
Found in Baseline             : 1.1
Found Date                    : 2/18/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : See Below
Sensitivity                   : public

[2/18/94 public]

NLSPATH needs to be removed from profile.dcest[.tet] and run.rpc needs a
couple of updates for dcerpper.

[02/18/94 public]

Submitted:
	./test/systest/profile.dcest
	./test/systest/profile.dcest.tet
	./test/systest/rpc/run.rpc

[02/18/94 public]
Closed.



CR Number                     : 9959
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : cds.acl.6
Short Description             : cds.acl.6 rgy_edit does not bind to master
Reported Date                 : 2/15/94
Found in Baseline             : 1.1
Found Date                    : 2/15/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : dcecdsacl6.func
Sensitivity                   : public

[2/15/94 public]

The cds.acl.6 system test has a rgy_edit which binds to a random registry
in a cell instead of the master.

[02/18/94 public]
Closed.



CR Number                     : 9958
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : systest
Subcomponent Name             : 
Short Description             : Apply patches to DTET
Reported Date                 : 2/15/94
Found in Baseline             : 1.1
Found Date                    : 2/15/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : getlist.c, remexec.c, tcm_in.c
Sensitivity                   : public

[2/15/94 public]

Some bugs which were found and fixed in DTET during the DME project
need to fixed in the version of DTET in the DCE1.1 source tree.

1) tet_remexec did not marshall caller's argv correctly
   which resulted in a segmentation violation

2) tet_remgetlist didn't null terminate the list of servers
   with a NULL this resulted in a duplicate number of servers in the list

3) Make sure the loopback address is not put in the tsinfo
   message when the message destination is a different machine.

The following three files are affected:

./test/tet/src/dtet/dapilib/getlist.c
./test/tet/src/dtet/dapilib/remexec.c
./test/tet/src/dtet/tcm/tcm_in.c

[2/25/94 public]
Fixed.

[2/28/94 public]
Closed.

[3/14/94 public]
Closed



CR Number                     : 9942
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : systest
Subcomponent Name             : profile.dcest[.tet]
Short Description             : Inadequate $PATH created
Reported Date                 : 2/11/94
Found in Baseline             : 1.1
Found Date                    : 2/11/94
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : profile.dcest & profile.dcest.tet
Sensitivity                   : public

[2/11/94 public]

The DCE System Test environment setup files, profile.dcest.tet and
profile.dcest, do not set up a $PATH value which is adequate to find
all the programs used by the test scripts.  In particular /etc and
/sbin are needed.

[2/21/94 public]

The fix is in.



CR Number                     : 9896
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa,rs6000
S/W Ref Platform              : hpux,aix
Component Name                : dfs
Subcomponent Name             : src/test/file
Short Description             : DFS test Makefiles had pre-ODE
2.3 include line format
Reported Date                 : 2/7/94
Found in Baseline             : 1.1
Found Date                    : 2/7/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : src/file/HP800,RIOS/machdep.mk
Sensitivity                   : public

[2/7/94 public]

Pre-ODE 2.3 angle brackets for include lines in DFS test Makefiles caused
the following error:

[ /test/file/itl at 23:41 (PM) Friday ]

makepath itl/. && cd itl &&  exec make MAKEFILE_PASS=FIRSTB     build_all
"/project/dce/build/dce1.1-snap/src/test/file/itl/Makefile", line 190:
Could no\
t find ../../..//file/HP800/machdep.mk
Fatal errors encountered -- cannot continue
*** Error code 1

A fix is being submitted, which converts the include lines to double
quotes format.

[3/4/94 public]
These fixes were submitted on 2/7 and worked fine.  This defect should have
been closed long before this....



CR Number                     : 9876
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : sinix
Component Name                : rpc
Subcomponent Name             : idl
Short Description             : test/rpc/idl:data files are not installed
Reported Date                 : 2/2/94
Found in Baseline             : 1.0.3
Found Date                    : 2/2/94
Severity                      : B
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b12
Affected File(s)              : src/test/rpc/idl/{context,cover1,no_op,pipefault,pipes,pipetest}/Makefile
Sensitivity                   : public

[2/2/94 public]

The Makefiles under src/test/rpc/idl/{context,cover1,no_op,pipefault,
pipes,pipetest} do not install datafiles context.h, cover1.h, no_op.h,
pipefault.h, pipes.h, and pipetest.h respectively. This causes these
tests to fail when installed through dcetest_config.

Add correct .h file in each of these Makefiles. E.g., for context
test do the following:

DATAFILES=RUN_ARGS context.h
   instead of just
DATAFILES=RUN_ARGS

[8/29/94 public]
Bob W. from IBM submitted these fixes in March 1994.
Closed.



CR Number                     : 9870
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : systest
Short Description             : open/lock argument mismatch in filewnr.c
Reported Date                 : 2/1/94
Found in Baseline             : 1.0.3a
Found Date                    : 2/1/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3a
Fixed In Baseline             : 1.0.3a
Affected File(s)              : test/systest/file/filewnr.c
Sensitivity                   : public

[2/1/94 public]
The last submission of filewnr.c contained a path where an exclusive
write lock was being requested for a file opened for read-only access.
This lock request always failed, causing all dfs.lock iterations to
fail.

[2/4/94 public]
Fix tested and submitted - closing.



CR Number                     : 9858
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : rpc
Subcomponent Name             : src/test/rpc/idl
Short Description             : pointer initialization error
Reported Date                 : 1/29/94
Found in Baseline             : 1.1
Found Date                    : 1/29/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : arraypt/manager.c,bug_3/manager.c,
multiref/managter.c,stringptr/manager.c,stringts/manager.c
Sensitivity                   : public

[1/29/94 public]

Numerous error messages of the form:

7764:"/project/dce/build/dce1.1-snap/src/test/rpc/idl/arrayptr/manager.c", \
  line 430.44: 1506-196 (S) The number 1 initializer is in error: \
  Initialization between types pointer and pointer is not allowed.
....
Error code 1

are issued for each "manager.c" file in the following test directories:

	src/test/rpc/idl/arraypt
			 bug_3
			 multiref
			 stringptr
			 stringts

[1/31/94 public]

This is more properly a code cleanup bug. The problem arises because the 
local definitions of the functions have a different signature than
the members of the given structure. 

Fix: include dce/dce.h in the offending files, and change to use
_DCE_PROTO_ instead of the (obsolet) NIDL_PROTOTYPES.

I am testing this fix now on both the HP800 and the RIOS, and will check
it in when the tree opens.

[2/1/94 public]

Files were submitted for the nightly build for 1 February 1994



CR Number                     : 9832
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dfs
Subcomponent Name             : test/systest
Short Description             : test other parameters of replication in dfs.repfs
Reported Date                 : 1/27/94
Found in Baseline             : 1.0.3a
Found Date                    : 1/27/94
Severity                      : D
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1a
Affected File(s)              : test/systest/file/dfs.repfs, test/systest/file/repfs.data
Sensitivity                   : public

[1/27/94 public]
The following parameters of replication should be tested:

MaxAge -- see if the cache is updated 
MaxSiteAge -- use values other than the DefaultSiteAge
              This value is set in the fts addsite command so there can be
              a different value at each site of the replica.
FailAge
ReclaimWait

Verification of the replication can include flushing the cache of the
fileset and then accessing it again.  The updates should then be accessible
soon after the MinRepDelay instead of the sum of MinRepDelay and MaxAge.
Currently the verification is done by checking the information from the fts
lsreplicas command, not by accessing the replicated fileset.

[5/6/94 public]
Submitted a new version that includes the following enhancements:
Verifies MaxAge and FailAge.
Reports the number of iterations that passed/failed.
Moves the read/write fileset
Creates a replica on the same machine as the read/write fileset
Creates a new replica, removes the old replica, verifies access to the
  replica



CR Number                     : 9824
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dcesestr
Short Description             : dcesestr runs resestr test one at a time
Reported Date                 : 1/26/94
Found in Baseline             : 1.1
Found Date                    : 1/26/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : See Below
Sensitivity                   : public

[1/26/94 public]

The system test dcesestr runs the remote resestr tests one at a time
instead of all at the same time, this does not allow dcesestr to act-
ually do stress testing (i.e. "str").

[02/03/94 public]

Submitted fix to BL3:

./test/systest/security/dcesestr
./test/systest/security/dcesestr.data
./test/systest/security/resestr
./test/systest/security/sec.functions

[02/04/94 public]
Closed.



CR Number                     : 9802
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dcerpper
Short Description             : Ported dcerpper system test to 1.1
Reported Date                 : 1/24/94
Found in Baseline             : 1.1
Found Date                    : 1/24/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : See Below
Sensitivity                   : public

[1/24/94 public]

Ported dcerpper system test to 1.1

[01/24/94 public]
Submitted:
./test/systest/rpc/common_functions
./test/systest/rpc/dcerpper
./test/systest/rpc/dcerpper.data
./test/systest/rpc/per.functions
./test/systest/rpc/run.rpc
./test/systest/rpc/tet_scen

[01/25/94 public]
Closed.



CR Number                     : 9795
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : rpc
Short Description             : ./src/test/systest/rpc has unused files
Reported Date                 : 1/21/94
Found in Baseline             : 1.1
Found Date                    : 1/21/94
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : ./test/systest/rpc/{make.bnk,dcerpbn1,admin.acf}
Sensitivity                   : public

[1/21/94 public]

There are unused files in the ./src/test/systest/rpc directory.

	dcerpbn1, make.bnk, admin.acf

[01/25/94 public]
Closed.



CR Number                     : 9764
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : profile.dcest[.tet]
Short Description             : profile.dcest[.tet] need NLSPATH
Reported Date                 : 1/18/94
Found in Baseline             : 1.1
Found Date                    : 1/18/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : ./test/systest/profile.dcest[.tet]
Sensitivity                   : public

[01/18/94 public]

The two files, profile.dcest and profile.dcest.tet, need to have NLSPATH
defined for tests to run successfully.

[01/20/94 public]
Made changes for all platforms.



CR Number                     : 9763
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : dfs.lock
Short Description             : intermittent dfs.lock failures
Reported Date                 : 1/18/94
Found in Baseline             : 1.0.3a
Found Date                    : 1/18/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3a
Fixed In Baseline             : 1.0.3a
Affected File(s)              : src/test/systest/file/filewnr.c, src/test/systest/file/dfs.lock
Sensitivity                   : public

[1/18/94 public]
This is a placeholder to track dfs.lock failures.  We've seen a variety
including the wrong client obtaining the lock, and clients taking too
long to read the data file.  Additionally, the stdout and stderr streams
get jumbled in the log files making debug difficult.

[1/26/94 public]
Fixed.  Beefed error reporting, re-directed stdout, stderr of filewnr
to local file rather than piping back through the remsh since that
jumbled output and caused bugs.

[02/04/94 public]
Closed.



CR Number                     : 9741
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : rpc
Subcomponent Name             : rtandidl
Short Description             : mgmt_stop_server_listening test fails with CN RPC
Reported Date                 : 1/14/94
Found in Baseline             : 1.1
Found Date                    : 1/14/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b2
Affected File(s)              : mgmt_stop_server_listening.c
Sensitivity                   : public

[1/14/94 public]

While running the RPC functional test 'rtandidl', there is a failure
in the test 'mgmt_stop_server_listening'.

The test calls:
	#1. rpc_mgmt_is_server_listening()
	#2. rpc_mgmt_stop_server_listening()
	#3. rpc_mgmt_is_server_listening()

and compares the status code returned by #3 against rpc_s_comm_failure.

CN rpc returns rpc_s_connection_closed.

This test should check the return code (as opposed to the status code)
to see if the server has stopped listening.

[01/14/94 public]
Commented out the code which compares against rpc_s_comm_error.



CR Number                     : 9734
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : low/test14
Short Description             : infinite loop in test14
Reported Date                 : 1/13/94
Found in Baseline             : 1.0.3a
Found Date                    : 1/13/94
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3a
Fixed In Baseline             : 1.0.3a
Affected File(s)              : low/prog14.c
Sensitivity                   : public

[1/13/94 public]


Test14 runs forever after it trips over a fileset quota overrun
even aftet the quota problem has been fixed.  I have tried
cm flush, cm check to try to clear out the state of things 
but I am continually getting error 88 back from cm_write.

cm_write vp 5ec900c, flag 0x2
time 194.225610, pid 21596: checkerror returning code 88
time 194.225893, pid 21596: cm_read vp 5e95bf8, nolock 0
time 194.226017, pid 21596: gettokens vp 5e95bf8, rights.low 0x400
time 194.226192, pid 21596: checkerror returning code 0
time 194.226549, pid 21596: cm_write vp 5ec900c, flag 0x2
time 194.226668, pid 21596: checkerror returning code 88
time 194.226954, pid 21596: cm_read vp 5e95bf8, nolock 0
time 194.227067, pid 21596: gettokens vp 5e95bf8, rights.low 0x400
time 194.227245, pid 21596: checkerror returning code 0
time 194.227602, pid 21596: cm_write vp 5ec900c, flag 0x2
time 194.227721, pid 21596: checkerror returning code 88

The output from fts aggrinfo and fts lsheader show that
there is lots of room on this fileset and the aggregate.
As far as I know test14 creates holey files, which don't
actually consume large amunts of disk space. 

explorer.epi1 0,,23594 RW LFS     states 0x10010005 On-line
    explorer.osf.org, aggregate epi1 (ID 1)
    Parent 0,,0       Clone 0,,23595   Backup 0,,23596
    llBack 0,,0       llFwd 0,,0       Version 0,,3820663
    4294967232 K alloc limit;       6498 K alloc usage
         70000 K quota limit;       6498 K quota usage
    Creation Tue Jan 11 09:31:28 1994
    Last Update Thu Jan 13 12:45:23 1994

LFS aggregate epi1 (/dev/dsk/c201d4s0): 299766 K free out of total 321272 (3240 reserved)

[1/13/94 public]

It seems we are infintely looping in the read_it function in test14.
The only way I can see this happening is if the read system call
returns 0 for the number of bytes read.  The program never checks
for this and assumes that this case will never happen.

[1/17/93 public]

Well after all this, it turns out there is a coding error in test14
which caused the infinite loop.  I think it just happened that
this occurred that the same time we got quota errors and they
don't really have anything to do with each other.

The following line in read_it could use some extra paranthesis
to give the assignment statement precedence over the relational operators:

 if (rf = read(fd,buf,(RWA3)BUFSIZE) < 0) errex("read(1)");

[1/17/93 public]


fix submitted

[02/04/94 public]
Closed.



CR Number                     : 9724
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : test/systest/file
Short Description             : dfs.sec.cross_bind_checklist needs corrections
Reported Date                 : 1/12/94
Found in Baseline             : 1.0.3a
Found Date                    : 1/12/94
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3a
Fixed In Baseline             : 1.0.3a
Affected File(s)              : test/systest/file/dfs.sec.cross_bind_checklist
Sensitivity                   : public

[1/12/94 public]
The following fixes or changes are needed for correctness or clarity:
- change the cell names to be generic
- clarify wording in Section B about root owning the fileset
- set the umask to 077 at the beginning of the checklist
- put in comment in section 5 about being someone other than root

[1/26/94 public]
Made the above fixes and changes.  The wording about root owning the
fileset was actually in Section D not B.
Filled in Section G -- Check ACL Inheritance.

[02/04/94 public]
Closed.



CR Number                     : 9711
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : systest
Short Description             : reference TROOT after reading datafile
Reported Date                 : 1/10/94
Found in Baseline             : 1.0.3a
Found Date                    : 1/10/94
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3a
Fixed In Baseline             : 1.0.3a
Affected File(s)              : dfs.read_write_all.main
Sensitivity                   : public

[1/10/94 public]
Small gotcha - apparently I've always had TROOT defined in my environment
but it's actually defined in the datafile and the datafile should be
read first - then TROOT referenced to find check_RC.ksh ie.

move sourcing of $TROOT/check_RC.ksh AFTER
read_datafile_export_variables

OTHERWISE test exits complaining that it can't find /check_RC.ksh.

[01/17/94 public]
Tested,submitted, built - closing.



CR Number                     : 9688
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : test/acl
Short Description             : change acl tests to run sequentially
Reported Date                 : 1/6/94
Found in Baseline             : 1.0.3a
Found Date                    : 1/6/94
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3a
Fixed In Baseline             : 1.0.3a
Affected File(s)              : test/file/acl/driver.sh
Sensitivity                   : public

[1/6/94 public]


The default mode of operation for the ACL tests is to
kick off all six tests simultaneously.  This has the
effect of placing way too much stress on a system,
especially when combined with other tests such as DFS CHO.

We'd like the default behaviour for the tests to be to
run them sequentially.  (The ideal solution would be
to have an option to crank up the load on these tests,
but we are not going to do that for 1.0.3a.).  Anyway,
what's the hurry?  Running all 6 at once bogs down the
system so much that it probably does not complete much
faster than running them 1 at a time.

[1/6/94 public]

fix submitted.

[02/04/94 public]
Closed.



CR Number                     : 9684
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : dfs.lock
Short Description             : filewnr has tight read loop
Reported Date                 : 1/5/94
Found in Baseline             : 1.0.3a
Found Date                    : 1/5/94
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3a
Fixed In Baseline             : 1.0.3a
Affected File(s)              : src/test/systest/file/filewnr.c
Sensitivity                   : public

[1/5/94 public]
Using 1.0.3ab2 (latest weekly build) in the large cell (Config G),
10 DFS machines (3 flservers, 2 file servers, 5 clients) and
dfs.lock test with 7 clients to an episode fileset on a rios 
file server, I only got through 1 iteration before the fxd
seemed to hang up. 

Evidence:
none of the client machines can do a "ls /:/dfs_1" (all hang on this command -
can be interrupted with ctl-c)
when 1 or more clients attempt the above ls, top.aix on the file server
shows:

load averages:   0.00,  0.00,  0.00               10:16:01
89 processes:  1 runable, 1 swapable
Cpu states:  4.2% user, 85.3% kernel,  9.9% idle,  0.4% wait
2emory: 3 MB Free , 32 MB Total, 65 MB Swap Free, 104 MB Swap Total

  PID USERNAME PRI NICE   SIZE   RES STATE   TIME   %CPU COMMAND
17944 root     120   20    48K   24K run    19:20 79.44% thr 
  514 root     127   41    24K    8K run  1137:28 11.13% wait
17687 root      61   20    32K   16K sleep   3:27  1.63% LSN
12201 root      60   20  1520K  576K sleep   1:42  1.30% rpcd
12723 root      61   20  1536K  468K sleep   6:46  1.20% cdsadv
18201 root      60   20    48K   24K sleep  20:14  1.06% thr"
 5692 root      60   20   760K  120K sleep   0:07  0.00% snmpd
 3115 root      60   20   264K   84K sleep   0:01  0.00% syslogd
 3567 root      60   20   440K   72K sleep   0:00  0.00% errdemon
 
ie. lots of kernel!

a dfstrace dump during an ls ends with:
time 900.867200, pid 17944: vnm_WaitForBusyVnode: evp 0x5dc800c, lock 0x5c8cf10
time 900.867996, pid 17944: vnm_VnodeBusy: evp 0x5de4e0c, flags 0
time 900.950882, pid 17944: vnm_VnodeNotBusy: evp 0x5dfac0c, flags 0x4
time 900.954394, pid 17944: vnm_VnodeBusy: evp 0x5dfac0c, flags 0
time 900.954518, pid 17944: vnm_VnodeNotBusy: evp 0x5dfac0c, flags 0x4
time 900.954610, pid 17944: vnm_VnodeBusy: evp 0x5dc800c, flags 0x2
time 900.954692, pid 17944: vnm_VnodeNotBusy: evp 0x5dc800c, flags 0x6

note that the pid in the dfstrace dump matches the busy thread pid
in the top.aix output.

NOTE: I must take down this cell in the next hour to create smaller
cells for parallel hand testing! Please advise on further debug
options asap - Thanks!

[1/5/94 public]
OK - the only further debug options are if the master-slave debug setup
has been done beforehand so stack traces of the fxd threads can be
taken with the kdbx or llbd AIX kernel debuggers. Unfortunately,
this master-slave debug setup was NOT done prior to testing - largely
because we have never had much luck with it here at OSF.

SO ... to reproduce this problem at Transarc where the master-slave
debug setup has been done (and used successfully), do the following:

1) setup an episode fileset on a rios file server (not nec. an fldb server)
with a quota large enough to handle test's file writes (2 or 3 X default of
5000)
2) allow access to that fileset by a DCE principal and list that principal
(and assoc'd password) in the lock.data datafile.
3) further edit the lock.data datafile such that:
CLI_MACHINES="<names of all your dfs machines in cell>"
NCLIENTS=7
HOURS=8 (or greater)
NUMFILEWRITES=1000
TROOT=/dcetest/dcelocal/test/systest/file (must contain filewnr executable)
STDEXC=/dcetest/dcelocal/test/systest/tools (must contain conf_util.sh)
DFS_PATH="<mount point to episode fileset referenced in step 1)>"
SYNCH_DIR=$DFS_PATH
LOG_DIR=$DFS_PATH
READY_WAIT=5
LOCK_WAIT=10
EXIT_WAIT=15
SLEEPRANGE=10
4) login as the DCE principal referenced in step 2 (and the lock.data
file), cd to $TROOT and type:
	./dfs.lock -f ./lock.data > lock.log 2>&1 
Note that you can start dfs.lock from any machine that has rsh/remsh
access to all the other machines listed in CLI_MACHINES.

You'll want rev 1.1.8.2 of dfs.lock, 1.1.5.4 of lock.data - currently
in the 1.0.3 tree (ode error - should be in 1.0.3a). These newer versions
do not change the test but do fix small errors (like not defining STDEXC)
that made it more difficult to run.

In the meantime, I'll verify that I can reproduce this problem in a
smaller cell with the above settings as well.

Please let me know if you have any questions.

[1/6/94 public]
Using the above steps, I believe I have reproduced the problem in the smaller
(CHO matching) configuration A of system test. HOURS_TO_RUN=8 is NOT big
enough however - it took 14 hours or so for the problem to appear AND the
symptoms are not identical (yet anyway). 

Evidence:
COMPLETED dfs.lock ITERATION 7 AT Thu Jan  6 07:04:37 EST 1994
COMPLETED dfs.lock ITERATION 8 AT Thu Jan  6 07:38:53 EST 1994
COMPLETED dfs.lock ITERATION 9 AT Thu Jan  6 11:18:43 EST 1994

ie. Iteration 8 took 34 minutes, Iteration 9 took 3 hours, 50 minutes.

After letting it sit for 2.5 hours, I was still able to ls the episode
fileset from the different clients - HOWEVER, top.aix reports that again,
the system is VERY busy in kernel code and the dfstrace dump contains
the same vnm type messages.

Using crash on the running system, I was unable to get stack traces of
the busiest threads (as reported by top.aix). The trace of the running
proc/thread (taken twice ~10 minutes apart):
	.uiomove
	.mmrw
	.rdevread (2nd time started here)
	.cdev_rdwr
	.spec_rdwr
	.vno_rw
	.rwuio
	.rdwr
	.kreadv

fxd traces looked normal as did dfsd. epidaemon traces were:
	.e_wait
	.e_sleep
	[dfscore.ext:osi_aix_Sleep]
	[dfscore.ext:Lock_Obtain]
	[dfslfs.ext:epia_Async]
	[dfslfs.ext:afscall_episode]
and
	.e_wait
	.e_sleep
	.e_sleepl
	.sleepx
	[dfslfs.ext:get_bioreq]
	[dfslfs.ext:efs_BioDaemon]
	[dfslfs.ext:afscall_episode]

[1/6/94 public]
More observations (of problem reproduced in smaller cell) - apparently this
instance of the problem is not fatal or irrecoverable - by letting the test
continue crawling along, I observed that kernel CPU usage and iteration
times returned to "normal" again. I've listed the interval times here in
the hopes that a pattern may appear:
BEGINNING dfs.lock ITERATION 0 AT Wed Jan  5 17:08:34 EST 1994
COMPLETED dfs.lock ITERATION 0 AT Wed Jan  5 19:03:44 EST 1994	2 hours

BEGINNING dfs.lock ITERATION 1 AT Wed Jan  5 19:03:44 EST 1994
COMPLETED dfs.lock ITERATION 1 AT Wed Jan  5 19:14:20 EST 1994	11 minutes!

BEGINNING dfs.lock ITERATION 2 AT Wed Jan  5 19:14:20 EST 1994
COMPLETED dfs.lock ITERATION 2 AT Wed Jan  5 20:49:09 EST 1994	1 hour 35 min

BEGINNING dfs.lock ITERATION 3 AT Wed Jan  5 20:49:09 EST 1994
COMPLETED dfs.lock ITERATION 3 AT Thu Jan  6 00:58:00 EST 1994	4 hours 9 min!

BEGINNING dfs.lock ITERATION 4 AT Thu Jan  6 00:58:00 EST 1994
COMPLETED dfs.lock ITERATION 4 AT Thu Jan  6 02:43:06 EST 1994	2 hours 45 min

BEGINNING dfs.lock ITERATION 5 AT Thu Jan  6 02:43:07 EST 1994
COMPLETED dfs.lock ITERATION 5 AT Thu Jan  6 05:58:34 EST 1994	3 hours 5 minutes

BEGINNING dfs.lock ITERATION 6 AT Thu Jan  6 05:58:34 EST 1994
COMPLETED dfs.lock ITERATION 6 AT Thu Jan  6 06:12:10 EST 1994	14 minutes

BEGINNING dfs.lock ITERATION 7 AT Thu Jan  6 06:12:10 EST 1994
COMPLETED dfs.lock ITERATION 7 AT Thu Jan  6 07:04:37 EST 1994	52 minutes

BEGINNING dfs.lock ITERATION 8 AT Thu Jan  6 07:04:37 EST 1994
COMPLETED dfs.lock ITERATION 8 AT Thu Jan  6 07:38:53 EST 1994	34 minutes

BEGINNING dfs.lock ITERATION 9 AT Thu Jan  6 07:38:54 EST 1994
COMPLETED dfs.lock ITERATION 9 AT Thu Jan  6 11:18:43 EST 1994	3 hours 40 min

BEGINNING dfs.lock ITERATION 10 AT Thu Jan  6 11:18:43 EST 1994
COMPLETED dfs.lock ITERATION 10 AT Thu Jan  6 13:49:58 EST 1994	2 hours 31 min

BEGINNING dfs.lock ITERATION 11 AT Thu Jan  6 13:49:58 EST 1994
COMPLETED dfs.lock ITERATION 11 AT Thu Jan  6 15:08:18 EST 1994	1 hour 19 min

BEGINNING dfs.lock ITERATION 12 AT Thu Jan  6 15:08:18 EST 1994
COMPLETED dfs.lock ITERATION 12 AT Thu Jan  6 15:23:42 EST 1994	15 minutes

BEGINNING dfs.lock ITERATION 13 AT Thu Jan  6 15:23:42 EST 1994
(crawling again)
machine taken down at 16:41 - ITERATION 13 had not yet completed 1 hour 20 min +

[01/07/94 public]
Adding Carl to the interest list - any insight you can add here Carl
would be greatly appreciated.

[01/09/94 public]
The demail1 phone line is down - switching to other email address for Carl - thanks
for the info Dawn.

[01/09/94 public]
Neither email address works for Carl but he was very helpful over the phone, plan
of attack is:
	- run dfs.lock in an exported jfs filesystem long enough to
	notice/rule out similar performance swings
	(Not that dfs.glue run on an exported jfs filesystem did NOT
	exhibit performance swings. dfs.glue uses same test program w/o 
	file locking steps)

	- turn off all icl tracing and rerun as above to see if
	problem still appears (dfstrace setset -dormant) - Diane had
	also recommended this - I have just not attempted to reproduce
	a 3rd time since system test schedule being impacted greatly.

	- report above results to Carl - we can possibly use tprof to
	determine who's most active in kernel and where (what procs and
	functions most active).

None of these steps are yet scheduled. Plan is to continue with system testing
for additional exposure - especially while CHO is not yet passing (ie. equally
troubling problems known to be in current code base).

[01/12/94 public]
Step 1 taken - dfs.lock on an exported jfs filesystem. Iteration times were as follows:
BEGINNING dfs.lock ITERATION 0 AT Tue Jan 11 19:38:18 EST 1994
COMPLETED dfs.lock ITERATION 0 AT Tue Jan 11 21:35:18 EST 1994	1 hr 57 min

BEGINNING dfs.lock ITERATION 1 AT Tue Jan 11 21:35:18 EST 1994
COMPLETED dfs.lock ITERATION 1 AT Wed Jan 12 01:29:41 EST 1994	3 hr 54 min !

BEGINNING dfs.lock ITERATION 2 AT Wed Jan 12 01:29:41 EST 1994
COMPLETED dfs.lock ITERATION 2 AT Wed Jan 12 01:40:30 EST 1994	11 minutes!

BEGINNING dfs.lock ITERATION 3 AT Wed Jan 12 01:40:30 EST 1994	2 hr 1 min
COMPLETED dfs.lock ITERATION 3 AT Wed Jan 12 03:41:17 EST 1994

BEGINNING dfs.lock ITERATION 4 AT Wed Jan 12 03:41:17 EST 1994
COMPLETED dfs.lock ITERATION 4 AT Wed Jan 12 05:05:39 EST 1994	1 hr 24 min

BEGINNING dfs.lock ITERATION 5 AT Wed Jan 12 05:05:39 EST 1994
ITERATION 5: FAILED
COMPLETED dfs.lock ITERATION 5 AT Wed Jan 12 09:13:39 EST 1994 	4 hr 8 min !

BEGINNING dfs.lock ITERATION 6 AT Wed Jan 12 09:13:39 EST 1994
COMPLETED dfs.lock ITERATION 6 AT Wed Jan 12 09:46:12 EST 1994	33 min

SO ... a similar range of ITERATION completion times exists with both episode
and native filesystems. Note that a failure does take a LITTLE longer to detect
in the test (test waits full WAIT period for message - largest WAIT period set
for this test was 15 minutes) but does not account for the huge time difference.

[1/13/93 public]

I've also seen 1 occurence of this in the CHO cell with test 14.
The configuration was a RIOS client to an HPUX server (episode).
It appears that the prog14 process is getting cpu time and
moving along but it has now taken more than 3 hours to run this
test, which normally requires less than 10 minutes.

[1/13/94 public]
The filewnr program in the dfs.lock test contains a read loop checking 
the contents of a file in DFS for messages used to synchronize with 
other test clients.  The read loop contains no sleeps so if the 
message it is looking for has not yet been written by the dfs.lock 
program, it immediately attempts another read.  Needless to say,
this is not a recommended programming practice.  In large cells,
when you have many (in this case 7) clients all performing this
tight read loop on the file, the process attempting to do the write
can hang for long periods of time (we've seen up to ~4 hours).  
Presumably, the cm is attempting to fetch the write token on the
file, but there is so much contention that it is not possible so
it continues to retry.  I've added a sleep to the tight loop in
the filewnr program and re-run the test in a large (7 client) cell.
The completion times were:

0	10m34s
1	10m31s
2	10m30s
3	10m30s
4	13m32s
5	13m33s
6	13m23s

Apparently, there is still some small anomaly in the test 
completion times, but it is miniscule compared to the previous
completion times seen with this test (2 - 4 hours!).

[1/13/94 public]
Fixed.

[02/04/94 public]
Closed.



CR Number                     : 9667
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : ./src/nosupport/test/systest
Short Description             : ./src/nosupport/test/systest is no longer needed
Reported Date                 : 12/29/93
Found in Baseline             : 1.1
Found Date                    : 12/29/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : ./src/nosupport/test/systest/*
Sensitivity                   : public

[12/29/93 public]

The 564 system test files in ./src/nosupport/test/systest are no longer
needed.  They have been released with DCE 1.0.3 if anyone needs them.

[01/05/94 public]
All files and directories have been deleted.



CR Number                     : 9655
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : ropen(d)
Short Description             : ropen does not work
Reported Date                 : 12/27/93
Found in Baseline             : 1.0.3
Found Date                    : 12/27/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : See Below
Sensitivity                   : public

[12/27/93 public]

The ropen command does not work at all in 1.0.3 on any platform.

[05/09/94 public]
Closed, moved to ./src/nosupport/test/systest/tools since the ropen command
has not worked since the DCE 1.0.2 release and no system tests depend on it.

./test/systest/tools/rc.ropen
./test/systest/tools/remoteopen.c
./test/systest/tools/ropen.mf
./test/systest/tools/ropen_idl.idl
./test/systest/tools/ropen_main.c



CR Number                     : 9654
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : systest / dcesepol
Short Description             : dcesepol runs only once every 24 hours
Reported Date                 : 12/27/93
Found in Baseline             : 1.0.3
Found Date                    : 12/27/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : src/test/systest/security/{dcesepol,dcesepol.data,sec.functions}
Sensitivity                   : public

[12/27/93 public]

The system tst dcesepol runs only once every 24 hours.

[12/28/93 public]
Closed.



CR Number                     : 9653
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : 
Short Description             : Makefile can't find machdep.mk
Reported Date                 : 12/23/93
Found in Baseline             : 1.1
Found Date                    : 12/23/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b1
Affected File(s)              : src/test/directory/gds/ros/testenv/Makefile
Sensitivity                   : public

[12/23/93 public]

On all 3 platforms "src/test/directory/gds/ros/testenv/Makefile" can't
find "HP800/machdep.mk".

The Makefile reference is:

.include <${TARGET_MACHINE}/machdep.mk>

[12/28/93 public]
This defect was caused because the test makefiles had not been upgraded for
the ODE2.3 make.  I thought this was going to happen before we began
building 1.1?

In any case, I've submitted the fix.

[12/29/93 public]
Verified in nightly build of 12/28.  Defect closed.



CR Number                     : 9652
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : 
Short Description             : src/test/test.mk can't find test/rpc/rpc.mk
Reported Date                 : 12/23/93
Found in Baseline             : 1.1
Found Date                    : 12/23/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : See Below
Sensitivity                   : public

[12/23/93 public]

On all 3 platforms "src/test/test.mk" complains it can't find
 
	../../..//test/rpc/rpc.mk

(The path expansion is wrong if the current directory is
"src/test"; if so, "rpc.mk" is in "./rpc/rpc.mk".)

[12/27/93 public]
Assigned to Tom, this looks like a problem with the RPC functional tests.

[12/28/93 public]

Reading a DRB request by Diane it occurred to me that this problem was
the same as the one that she was fixing in DFS tests.  I am going to
submit a fix for this.

[12/28/93 public]

Fixed, affected file are:

./test/rpc/idl/alias/Makefile
./test/rpc/idl/ao_arrays/Makefile
./test/rpc/idl/array/Makefile
./test/rpc/idl/array2/Makefile
./test/rpc/idl/array_v1_string/Makefile
./test/rpc/idl/array_v2_string/Makefile
./test/rpc/idl/arrayp/Makefile
./test/rpc/idl/arrayptr/Makefile
./test/rpc/idl/arraystr/Makefile
./test/rpc/idl/arraystr2/Makefile
./test/rpc/idl/arrayswith/Makefile
./test/rpc/idl/arrayv1/Makefile
./test/rpc/idl/bigtest1/Makefile
./test/rpc/idl/binop_alloc/Makefile
./test/rpc/idl/binopwk/Makefile
./test/rpc/idl/brown/Makefile
./test/rpc/idl/bug_3/Makefile
./test/rpc/idl/comprefs/Makefile
./test/rpc/idl/comprefs_ool/Makefile
./test/rpc/idl/conftree/Makefile
./test/rpc/idl/context/Makefile
./test/rpc/idl/context2/Makefile
./test/rpc/idl/cover1/Makefile
./test/rpc/idl/cover2/Makefile
./test/rpc/idl/cover_array/Makefile
./test/rpc/idl/cover_array_ool/Makefile
./test/rpc/idl/cover_contain_ref/Makefile
./test/rpc/idl/cover_ool/Makefile
./test/rpc/idl/cover_struct/Makefile
./test/rpc/idl/cover_top_pointer/Makefile
./test/rpc/idl/cover_union/Makefile
./test/rpc/idl/epv/Makefile
./test/rpc/idl/es_array/Makefile
./test/rpc/idl/es_arrayb/Makefile
./test/rpc/idl/es_arrayc/Makefile
./test/rpc/idl/factorial/Makefile
./test/rpc/idl/faultstat/Makefile
./test/rpc/idl/fpe/Makefile
./test/rpc/idl/gregbug1/Makefile
./test/rpc/idl/h_ta/Makefile
./test/rpc/idl/ichar1/Makefile
./test/rpc/idl/ichar2/Makefile
./test/rpc/idl/icharexp/Makefile
./test/rpc/idl/icharpkl/Makefile
./test/rpc/idl/ignore/Makefile
./test/rpc/idl/mtsaconf/Makefile
./test/rpc/idl/mtsvary/Makefile
./test/rpc/idl/multiref/Makefile
./test/rpc/idl/n_e_union/Makefile
./test/rpc/idl/no_op/Makefile
./test/rpc/idl/nodethreads/Makefile
./test/rpc/idl/ool/Makefile
./test/rpc/idl/oolsmall/Makefile
./test/rpc/idl/oolthings/Makefile
./test/rpc/idl/op_results/Makefile
./test/rpc/idl/orecord/Makefile
./test/rpc/idl/out_refs/Makefile
./test/rpc/idl/outrefs/Makefile
./test/rpc/idl/packed_byte_array/Makefile
./test/rpc/idl/parray/Makefile
./test/rpc/idl/pipe_of_array/Makefile
./test/rpc/idl/pipefault/Makefile
./test/rpc/idl/pipes/Makefile
./test/rpc/idl/pipetest/Makefile
./test/rpc/idl/pipetest2/Makefile
./test/rpc/idl/pipetest2_cancel/Makefile
./test/rpc/idl/pipetest2_ool/Makefile
./test/rpc/idl/pointarray/Makefile
./test/rpc/idl/pointed/Makefile
./test/rpc/idl/primes/Makefile
./test/rpc/idl/ptrarray/Makefile
./test/rpc/idl/refdels/Makefile
./test/rpc/idl/refptrs/Makefile
./test/rpc/idl/repas1/Makefile
./test/rpc/idl/repas2/Makefile
./test/rpc/idl/represent/Makefile
./test/rpc/idl/represent_ool/Makefile
./test/rpc/idl/sp_union/Makefile
./test/rpc/idl/sparse/Makefile
./test/rpc/idl/string0/Makefile
./test/rpc/idl/string1/Makefile
./test/rpc/idl/string_tree/Makefile
./test/rpc/idl/stringptr/Makefile
./test/rpc/idl/stringts/Makefile
./test/rpc/idl/stringy/Makefile
./test/rpc/idl/struct_ct_union/Makefile
./test/rpc/idl/threads/Makefile
./test/rpc/idl/tree/Makefile
./test/rpc/idl/ue1/Makefile
./test/rpc/idl/ue2/Makefile
./test/rpc/idl/unique1/Makefile
./test/rpc/idl/unique2/Makefile
./test/rpc/idl/xmit/Makefile
./test/rpc/idl/xmitas/Makefile
./test/rpc/idl/xmitas_conf/Makefile
./test/rpc/idl/xmitas_nested/Makefile
./test/rpc/idl/xmitas_repas/Makefile
./test/rpc/idl/xmitas_repas_ool/Makefile
./test/rpc/rpc.mk
./test/rpc/runtime/helper/Makefile
./test/rpc/runtime/kdriver/Makefile
./test/rpc/runtime/kncstest/Makefile
./test/rpc/runtime/ncstest/Makefile
./test/test.mk

[12/29/93 public]
Closed.



CR Number                     : 9651
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa,rs6000
S/W Ref Platform              : hpux,aix
Component Name                : dfs
Subcomponent Name             : test/file/*/Makefile
Short Description             : can't find <platform>/machdep.mk
Reported Date                 : 12/23/93
Found in Baseline             : 1.1
Found Date                    : 12/23/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b1
Affected File(s)              : test/file/*/Makefile
Sensitivity                   : public

[12/23/93 public]

All test Makefiles for DFS complain that they can't find the common
Makefile "<platform>/machdep.mk".  A sample from the HP tests build log:

[ /test/file/util at 02:02 (AM) Thursday ]

makepath util/. && cd util &&  exec make MAKEFILE_PASS=BASIC install_all
"/project/dce/build/dce1.1-snap/src/test/file/util/Makefile", line 143: \
Could not find ../../..//file/HP800/machdep.mk
Fatal errors encountered -- cannot continue
*** Error code 1

These Makefiles define the path to "machdep.mk" as:

	${MAKETOP}/file/${TARGET_MACHINE}/machdep.mk

For example, the HP "machdep.mk" source is in:

	src/file/HP800/machdep.mk

[ rrizzo 12/23/93 public ]

Corrected mistakes in the short and full descriptions of the problem.

[12/28/93]

We changed the .include syntax for machdep.mk's which are specified
using MAKETOP to use "" rather than <>'s

Fix submitted.

[09/26/94 public]
Closed.



CR Number                     : 9650
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 9284
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dfs
Subcomponent Name             : lfs
Short Description             : Allow different-sized partitions in rcx tests in HP
Reported Date                 : 12/23/93
Found in Baseline             : 1.0.3a
Found Date                    : 12/23/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.0.3a
Affected File(s)              : file/episode/rcx/copyaggr.c
Sensitivity                   : public
Transarc Deltas               : rajesh-db4799-rcx-copyaggr-optional-checksum
Transarc Herder               : jaffe@transarc.com
Transarc Status               : submit

[12/23/93 public]
Due to the restriction that there can be only one partition per disk, and
the problematic nature of finding identically-sized disks to mount on one
machine for the RCX tests, we have relaxed the requirement that all three
partitions be the same size.  There are two new environment variables:
  COPYAGGR_NOCHECKSUM specifies that copyaggr won't do checksumming.  This
    is needed because the checksum algorithm looks at the whole partition,
    not just what's in use by the aggregate.
  RCX_SRCAGGR_NEWAGGR_SPEC specifies that the compare-aggr phase should
    look at only as many blocks in each destination aggregate as there were
    in the source aggregate.
It's still necessary to insure that the source partition is the smallest of
the three.
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `jaffe@transarc.com' 
Added field Transarc Status with value `open'

[12/29/93 public]
Changed component to test, defer to 1.1.  This is a candidate for
the 1.0.3a unintegrated tree.

[1/5/94 public]
Defect Closure Form
-------------------
--Verification procedure below--
The verification procedure described for OT CR 9284 was used.  The three
disks (partitions) used were of different sizes.
Associated information:
Tested on TA build:  
dfs-osf-1.12
Tested with backing build:  
dce1.0.3ab1
Filled in Transarc Deltas with `rajesh-db4799-rcx-copyaggr-optional-checksum' 
Changed Transarc Status from `open' to `export'

[1/19/94 public]
Changed Status from `defer' to `fix' 
Filled in Fixed In Baseline with `1.0.3a' 
Filled in Affected File with `file/episode/rcx/copyaggr.c' 
Changed Transarc Status from `export' to `submit'

[02/04/94 public]
Closed.



CR Number                     : 9633
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 9674
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : fts
Short Description             : Some minor problems with fts test21
Reported Date                 : 12/20/93
Found in Baseline             : 1.0.3a
Found Date                    : 12/20/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3a
Fixed In Baseline             : 1.0.3a
Affected File(s)              : test/file/fts/runtests
Sensitivity                   : public
Transarc Status               : submit
Transarc Deltas               : bwl-ot9633-fts-test21-problems
Transarc Herder               : jaffe@transarc.com

[12/20/93 public]
Some minor problems with fts/test21 (and fts/runtests):
- definition of "tests" in fts/runtests is not used.
- fts/test21 should be trying to use two different servers, and if that fails,
  use the same server, rather than the other way around; as it is, when 
  SERVER1 and SERVER2 are identical, fts/runtests sets AGGRNAME_3 to "invalid"
  and fts/test21 issues a warning message about how it's finding aggregates
  on different servers, when it really isn't.
- In fts/test21 there are two forked processes that are supposed to test
  whether the two aggregates are still accessible after the failed fts moves.
  Instead of one starting by cd'ing to $mp1 and the other by cd'ing to $mp2,
  they both start by cd'ing to $mp1, so they only test one of the aggregates.
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `jaffe@transarc.com' 
Added field Transarc Status with value `open'

[1/6/94 public]
Inadvertently, I included the fix for OT CR 9674 in the delta that fixes
this bug (OT CR 9633).
Defect Closure Form
-------------------
--Verification procedure below--
Run fts test21 using two aggregates on the same server, and look at the log.
Suppose the server's name is "foo"; you used to see an informational message
like: "Using two aggregates on *different* servers."  Now you will see
"Using two aggregates on the same server."
.
There is no verification procedure for the other two minor problems
(superfluous definition of "tests" and incorrect choice of a mountpoint on
which to test fileset accessibility).
.
To test whether OT CR 9674 is fixed (see above), run fts test21 and monitor
its progress.  If the filler file it creates on /tmp is later deleted, and
if the filler file's size is exactly 1<<10, you win.  Also, run fts test21 in
an environment where /tmp is already full (less than 1MB free).  It should
complain and exit.
--Other explanation below--
Associated information:
Tested on TA build:  
dfs-osf-1.12
Tested with backing build:  
dce1.0.3ab1
Filled in Inter-dependent CRs with `9674' 
Filled in Transarc Deltas with `bwl-ot9633-fts-test21-problems' 
Changed Transarc Status from `open' to `export'

[1/6/94 public]

[1/6/94 public]
Edited verification procedure (see above).

[1/19/94 public]
Changed Status from `open' to `fix' 
Filled in Fixed In Baseline with `1.0.3a' 
Filled in Affected File with `test/file/fts/runtests' 
Changed Transarc Status from `export' to `submit'

[02/04/94 public]
Closed.



CR Number                     : 9628
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000,hppa
S/W Ref Platform              : hpux,aix
Component Name                : dfs
Subcomponent Name             : 
Short Description             : comment needed in
block_frag.data about minimum block size
Reported Date                 : 12/17/93
Found in Baseline             : 1.0.3a
Found Date                    : 12/17/93
Severity                      : E
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3a
Fixed In Baseline             : 1.0.3a
Affected File(s)              : block_frag.data
Sensitivity                   : public

[12/17/93 public]

The minimum block size for RS6000s has changed to 4096.  A comment
needs to be added to the data file for dfs.block_frag so that the
BLOCKSIZE_RANGE is properly set.

[12/22/93 public]
Added comment to the data file about the minimum block size for RS-6000s.



CR Number                     : 9588
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : TEST SUITES
Short Description             : bos test12 doesn't check remote file
Reported Date                 : 12/7/93
Found in Baseline             : 1.0.2a
Found Date                    : 11/16/93
Severity                      : C
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.2a
Fixed In Baseline             : 1.0.3a
Affected File(s)              : some
Sensitivity                   : public
Transarc Status               : submit
Transarc Deltas               : 
Transarc Herder               : andi@transarc.com

[12/7/93 public]
**Solution Text**
 Have bos test12 actually check for the existence of the NoAuth
 file on a remote server.  I tested this between 2 RIOS and RIOS 
 to HP.
 comer-Tue, 16 Nov 1993 16:31:20

[12/7/93 public]
  Moved from Transarc database and in dfs-osf-1.5
Added field Transarc Herder with value `andi@transarc.com' 
Added field Transarc Status with value `import'

[12/17/93 public]
Closed.



CR Number                     : 9587
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : BOS
Short Description             : bos test0 and runtests script have minor problems
Reported Date                 : 12/7/93
Found in Baseline             : 1.0.2a
Found Date                    : 11/11/93
Severity                      : C
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.2a
Fixed In Baseline             : 1.0.3a
Affected File(s)              : some
Sensitivity                   : public
Transarc Status               : submit
Transarc Deltas               : 
Transarc Herder               : andi@transarc.com

[12/7/93 public]
**Solution Text**
 Made a couple of minor fixes to the bos tests:
 
    runtests was trying to use ksh's $() command substitution in a
    /bin/sh script.  I tested this fix by hand.  We don't typically
    see this because we set TESTTOP explicitly in the invocing shell.
 
    test0 was running some inappropriate tests in -noadmin mode and
    was subsequently failing.  I successfully ran test0 in -admin and
    in -noadmin mode.  We hadn't seen this since we only run the full
    test suite, not the "quickie" test.
 comer-Thu, 11 Nov 1993 10:11:08

[12/7/93 public]
  Moved from Transarc database and in dfs-osf-1.5
Added field Transarc Herder with value `andi@transarc.com' 
Added field Transarc Status with value `import'

[12/17/93 public]
Closed.



CR Number                     : 9542
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : run_loops.ksh
Short Description             : Must delete TET work directory
Reported Date                 : 11/23/93
Found in Baseline             : 1.0.3
Found Date                    : 11/23/93
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : run_loops.ksh
Sensitivity                   : public

[11/23/93 public]

TET creates a work directory, $TET_ROOT/system/<component>/results/<nnnn>e,
once per invocation.  These directories are NOT deleted by TET.  This
happens for every TET run, ie every iteration of RUN_LOOPS.KSH.  When
running fast tests like DCETH002, this can result in tens of thousands of
empty directories being left about.  RUN_LOOPS.KSH should be modified to
get rid of them as they are created.  Since more than one TET invocation
may be sharing the same <component>/results directory, it is not ok to
simply delete all <nnnn>e subdirectories when a TET run finishes.

[11/24/93 public]

Created a version of RUN_LOOPS.KSH from the 1.0.3 tree which fixes the problem
by creating a tmp dir name and feeding that to TCC (-i opt) so when it comes
time to clean up, RUN_LOOPS.KSH knows what to remove.  Waiting for the official
1.1 tree to open before checking this back in.

[02/21/94 public]

Put the fix into the DCE 110 tree.

[03/01/94 public]

Seems to all work and not break the build.  Closed.



CR Number                     : 9522
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dfs
Subcomponent Name             : test
Short Description             : dfs.repfs_checklist needs modifications
Reported Date                 : 11/19/93
Found in Baseline             : 1.0.3
Found Date                    : 11/19/93
Severity                      : D
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3a
Fixed In Baseline             : 1.0.3a
Affected File(s)              : src/test/systest/file/dfs.repfs_checklist
Sensitivity                   : public

[11/19/93 public]

Item B. Verify

 The "fts lsreplicas -fileset epi.1 -all" command should probably be re-run
 with new output listed in the file.  Both the IBM machine and the HP
 machine show (lfs_aggr3) instead of (lfs_aggr1) as the aggregate following
 the src 0,,7 item.

Item C. Test Release Replication

 Might want to add a note in the initial setup paragraph that the user will
 need to do some fts crmounts to get those filesets mounted on /:/epi_1 and
 /:/epi_2.  Might not be obvious to everyone.

Item D. Check Scheduled Replication

 The "fts lsheader -aggregate lfs_aggr3 -server server1" command should
 probably be re-run and the new output listed in the file.  Both the IBM
 machine and the HP machins show (id 5):2 instead of (id 5):3 in the first
 line of the output.

Item E. Disable and Re-enable Read-Only Fileset

 The series:
  cm check
  cd /:/epi_2_ro 
 indicates that if should not be possible to addess the scheduled replica
 because the repserver is down.  This in fact is not true and the repserver
 has nothing to do with being able to access that replica.  As a matter a
 fact, this is just as permissible as the access to the previous replica.

 Also in Item E. before the dfsexport "/dev/rz1e -detach command", a note
 must be made to indicate that the proper amount of time must have elapsed
 before executing this command (ie ~105 minutes after the last deletion from
 the replicated fileset on that aggregate) otherwise this will not work and
 a "Device Busy" message will appear during the detach.  NOTE:  Even this
 does not work since something in the ZLC code is broken, an OT has been
 opened against that).


 Item G.  Is this still valid or not?  You had indicated to us not to run
 this one, so you might want to either delete this entry or reword it to
 indicate what you really want to happen.

[01/19/94 public]
Made all the above changes - thanks for your excellent feedback Cindy!
Submitted so state = fix.

[02/04/94 public]
Closed.



CR Number                     : 9521
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dfs
Subcomponent Name             : test
Short Description             : dfs.repfldb_checklist needs modification
Reported Date                 : 11/19/93
Found in Baseline             : 1.0.3
Found Date                    : 11/19/93
Severity                      : D
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3a
Fixed In Baseline             : 1.0.3a
Affected File(s)              : src/test/systest/file/dfs.repfldb_checklist
Sensitivity                   : public

[11/19/93 public]

The configuration required for this test should be spelled out more
completely to indicate that in order to complete the 48 hr dfs.glue CHO
test, the DCE core services should be run on a separate machine from any of
the DFS file services.  Therefore, 4 machines will be required for this
test not the optional 3 as the script indicates, 3 FLDB servers and one DCE
core services machine.

[01/26/94 public]
The intro/config requirement section WAS unnecessarily confusing. Fixed
this and other minor errors in checklist.

[02/04/94 public]
Closed.



CR Number                     : 9474
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : gds_xds_str_001 system test
Short Description             : various minor coding defects
Reported Date                 : 11/10/93
Found in Baseline             : 1.0.3
Found Date                    : 11/10/93
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1
Affected File(s)              : test/systest/directory/gds/gds_xds_str_001/gds_xds_str_001
Sensitivity                   : public

[11/10/93 public]
This defect is a reminder to fix the following problems in the
gds_xds_str_001 test driver:

   1) the client that is spawned to remove the test tree is not run in the 
      background due to a missing '&' at the end of the command line (in
      function cleanup() ).  
      EFFECT: This can cause the entire test run to hang if
              the cleanup client hangs.  
      FIX: Add the missing '&' to the command lines.

   2) D2_LOG_DIR not set for local machine.  The line that is supposed to 
      set the local version of the D2_LOG_DIR environmental variable is 
      incorrect (in the main part of the script); it reads
        D2_LOG_DIR=$D2_LOG_DIR
      EFFECT: this means that if the D2_LOG_DIR variable is not already
              set, the D2_LOG_DIR variable will be empty, and all local D2 
              logs from the client xt_test runs will go to the root 
              directory (/).
      WORKAROUND: In the environment of the process from which the test is
                  to be run, assign to the D2_LOG_DIR environmental
                  variable the path assigned to D2_LOGDIR in the 
                  gds_xds_str_001.data file.
      FIX: change the assignment of D2_LOG_DIR in the gds_xds_str_001 
           file to 
                    D2_LOG_DIR=$D2_LOGDIR

   3) Due to a missing option in the command line that starts local test
      clients, the local clients write their D2 logs to the file
      xt_test.log in the directory specified by the D2_LOG_DIR
      environmental variable (or / if the D2_LOG_DIR environmental variable
      is not set).
      EFFECT: Prevents the cleanup routine from finding the D2 logs from
              the local xt_test clients, either to remove or to store them.
      FIX: add the option flag
              -o $host.$ITERATION.$seq.$$.$ostype.d2log 
           to the command line (in the function start_clients() ) that
           starts the local clients.

   4) Due to a missing '.' connecting two parts of a filename, the D2
      logging output from any cleanup clients run on the local machine is
      written to a file with the same name of the local host, in the
      directory specified by the D2_LOG_DIR environmental variable (or / if
      the D2_LOG_DIR environmental variable is not set).
      EFFECT: Prevents the cleanup routine from finding the D2 logs from
              the local cleanup xt_test clients, either to remove or to
              store them.
      FIX: change the command line (in the routine cleanup() ) that starts
           cleanup clients on the local machine to specify 
             -o $tk_host.$ITERATION.$tk_seq.$$.$tk_os.cud2_log 
           instead of the current
             -o $tk_host $ITERATION $tk_seq.$$.$tk_os.cud2_log

   5) There is an extra '$' in front of the string mach_2 in the line
      that reports the values of mach_1 and mach_2 (in function setup_gds).
      EFFECT: causes an incorrect print to the log.
      FIX: remove the '$' in the line 
           runecho "      mach_1 (initial DSA) is $mach_1, $mach_2 is $mach_2"

[11/14/93 public]
Another minor problem.  Note that all of these fixes have been made and 
verified using the final DCE 1.0.3 build,  they are awaiting submission 
to DCE 1.1.

   6) Sometime during the editting of the gds_xds_str_001 system test, the
      line that sets the variable END_DATE (the time the run completed) got
      deleted.  This was not caught during runs of the test since the test
      always failed.
      EFFECT: The line END DATE WAS    is printed with no date.
      FIX   : Add the line END_DATE=`date` to the bottom of the
              gds_xds_str_001 file, just before the print of the 
              "END DATE was.." message.

[11/16/93 public]

   7) The variable $ITERATION_STAT is misspelled as ITERATIUON_STAT
      in the error handling after the attempt to set up the test case files.
      Not caught previously since the testcase setup has never failed.
      EFFECT: The log files will end up in the wrong directory and the 
              run status will be reported incorrectly if the testcase setup
              fails.
      FIX: Fix the variable name spelling.

[12/22/93 public]
Fixed all of the problems described above and submitted to dce1.1.  Fixed.

[1/10/94 public]
All the changes described above have been in the build for a few weeks, 
with no problems.  Defect closed.



CR Number                     : 9455
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : EPISODE
Short Description             : Build tool to dump ALL episode log records
Reported Date                 : 11/10/93
Found in Baseline             : 1.0.2a
Found Date                    : 09/23/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.2a
Fixed In Baseline             : 1.0.3a
Affected File(s)              : some
Sensitivity                   : public
Transarc Status               : submit
Transarc Deltas               : 
Transarc Herder               : andi@transarc.com

[11/10/93 public]
**Description Text**
 Add capability into readlog to dump the entire episode log.
 
 rajesh-Thu, 23 Sep 1993 15:27:05
**Solution Text**
 rajesh-db4362-build-tool-to-dump-ALL-log-records
 rajesh-Thu, 23 Sep 1993 15:27:10
**Validation Text**

[11/10/93 public]
  Moved from Transarc database and in dfs-osf-1.5
Added field Transarc Herder with value `andi@transarc.com' 
Added field Transarc Status with value `import'

[12/17/93 public]
Closed.



CR Number                     : 9436
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : TEST SUITES
Short Description             : fs tests have problem with diffs
Reported Date                 : 11/10/93
Found in Baseline             : 1.0.2a
Found Date                    : 10/28/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.2a
Fixed In Baseline             : 1.0.3a
Affected File(s)              : some
Sensitivity                   : public
Transarc Status               : submit
Transarc Deltas               : 
Transarc Herder               : andi@transarc.com

[11/10/93 public]

[11/10/93 public]
  Moved from Transarc database and in dfs-osf-1.5
Added field Transarc Herder with value `andi@transarc.com' 
Added field Transarc Status with value `import'

[12/17/93 public]
Closed.



CR Number                     : 9435
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : BOS
Short Description             : bos test11 and test12 need to use remsh for hp
Reported Date                 : 11/10/93
Found in Baseline             : 1.0.2a
Found Date                    : 10/27/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.2a
Fixed In Baseline             : 1.0.3a
Affected File(s)              : some
Sensitivity                   : public
Transarc Status               : submit
Transarc Deltas               : 
Transarc Herder               : andi@transarc.com

[11/10/93 public]
**Solution Text**
 Changed the tests to set a variable $RSH based on operating
 system to either rsh or remsh.  Tested this on both HP and RIOS
 platforms.
 comer-Wed, 27 Oct 1993 15:57:12

[11/10/93 public]
  Moved from Transarc database and in dfs-osf-1.5
Added field Transarc Herder with value `andi@transarc.com' 
Added field Transarc Status with value `import'

[12/17/93 public]
Closed.



CR Number                     : 9411
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : systest
Short Description             : dfs.repfs_checklist step G
Reported Date                 : 11/9/93
Found in Baseline             : 1.0.3
Found Date                    : 11/9/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.0.3a
Affected File(s)              : test/systest/file/Makefile
test/systest/file/repfs.data test/systest/file/dfs.repfs
Sensitivity                   : public

[11/9/93 public]

The dfs.repfs_checklist step G refers to running the system test dfs.lock
in a fileset with scheduled replication. This is (currently) too much
stress for replicated filesets. Another CHO test must be designed to
accomplish the scheduled replication verification without breaking the
"expected usage" parameters of replicated filesets (write infrequently,
read frequently). This CHO test tuned for replicated filesets should
force and verify use of the read-only replicas.

[12/1/93 public]
Deferring this work until DFS 1.1 release.

[1/27/94]
Wrote dfs.repfs to use in dfs.repfs_checklist.

[02/04/94 public]
Closed.



CR Number                     : 9399
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : gdsSetup
Short Description             : needs to be able to set client processes parameter when configging GDS
Reported Date                 : 11/8/93
Found in Baseline             : 1.0.3b9
Found Date                    : 11/8/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b10
Affected File(s)              : test/systest/
tools/gdsSetup, test/systest/directory/gds/dcegdshd/sTest.gds, test/systest/directory/gds/gds_xds_str_001/gds_xds_str_001.data
Sensitivity                   : public

[11/8/93 public]
With the advent of the gds_xds_str_001 system test, it has become necessary
for the gdsSetup script to be able to support the specification of 
the number of GDS client processes in the data file.  

The fix for this (to all the files above) has already been made and tested.

[11/10/93 public]
This fix was submitted 11/8/93, passed the builds of 11/8-9/93, and has
been verified for both the gds_xds_str_001 and dcegdshd system tests.
Closed.



CR Number                     : 9398
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : systest
Subcomponent Name             : gdsSetup
Short Description             : need to be able to handle funny expr return
Reported Date                 : 11/8/93
Found in Baseline             : 1.0.3b9
Found Date                    : 11/8/93
Severity                      : A
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b10
Affected File(s)              : test/systest/tools/gdsSetup
Sensitivity                   : public

[11/8/93 public]
The description previously associated with this defect belonged in another
defect.  The actual description is that the OSF1 version of expr, when 
evaluating an expression like:

   "" : regexp\(regexp\)regexp

returns a 0, instead of (the expected) "" that is returned on the HP-UX and
AIX platforms.  The "" is expected because specifying the \(regexp\) in the 
match expression is supposed to return the characters in the string on the
left hand side of the ":" that match the regexp.  

Anyway, the fix has been made in a sandbox and verified. Just have to
submit it.

[11/10/93 public]
This fix was submitted 11/8/93, passed the builds of 11/8-9/93, and has
been verified for both the gds_xds_str_001 and dcegdshd system tests.
Closed.



CR Number                     : 9397
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : gds_xds_str_001 driver
Short Description             : needs to handle client hang in tree build
Reported Date                 : 11/8/93
Found in Baseline             : 1.0.3b9
Found Date                    : 11/8/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b10
Affected File(s)              : test/systest/directory/gds/gds_xds_str_001/gds_xds_str_001
Sensitivity                   : public

[11/8/93 public]
During system test GDS, the client that builds the test tree for an iteration
hung due to a GDS error.  Because this client (unlike the actual test
clients) is not run in the backround, the entire test run was hung.

The fix, already implemented and tested in a couple of test runs, is to 
run the tree building and tree deleting clients in the background, so that
the driver will detect that they did not exit and kill them.

[11/10/93 public]
This was submitted 11/8/93, passed the builds of 11/8-9/93, and was run 
11/9/93 and 11/10/93.  Defect closed.



CR Number                     : 9390
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : gds
Subcomponent Name             : admin #2
Short Description             : gdsditadm#2: can't update schema
Reported Date                 : 11/7/93
Found in Baseline             : 1.0.3
Found Date                    : 11/7/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : see below
Sensitivity                   : public

[11/7/93 public]
I've encountered and error during gdsditadm test #2.  Here is a segment of
the last 5 lines of the t.erg file created by the test:

  ERROR:
  Scheme update failed, local scheme file will be created !
  To continue press <CR> !
  **EXIT***:
  **EXIT***:

This did not occur in the HP800 or AT386 tests.

Here are the configurations used:

M1 (RIOS)

DIRECTORY-ID  CONFIGURATION TYPE  SERVER-PROC  CLIENTS  UPDATE   

    1         Clt/Srv-System          2         16      yes      
    3         Clt/Srv-System          2         16      yes      
    4         Clt/Srv-System          2         16      yes      


M2 (HP/UX)

DIRECTORY-ID  CONFIGURATION TYPE  SERVER-PROC  CLIENTS  UPDATE 

    1         Clt/Srv-System          2         16      no

[11/8/93 public]
Fix submitted by Gundola Loose in Munich.  The following files where
submitted: 

./directory/gds/dsa/d26logg.c 
./directory/gds/dsa/d26trans.c

[11/9/93 public]
The submitted code fix one instance of the problem.  The error still occurs
at the very end of gdsditadm test #2.  Here is the configuration on which
the test was run.

Will rerun test with tracing turned on and place logs in AFS cell.

[11/9/93 public]
Can't reproduced the problem ... must have been driver error.  Defect is
closed.



CR Number                     : 9387
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dfs
Subcomponent Name             : /test/file/acl
Short Description             : acl tests don't run under HP /bin/posix/sh
Reported Date                 : 11/5/93
Found in Baseline             : 1.0.3
Found Date                    : 11/5/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3a
Affected File(s)              : some
Sensitivity                   : public
Transarc Status               : submit
Transarc Deltas               : 
Transarc Herder               : andi
Transarc Delta                : andi-o-ot9387-acl-tests-workaround-for-hp-shell

[11/5/93 public]
Sub-shells started by the acl tests are "restricted".
Added field Transarc Herder with value `andi' 
Added field Transarc Status with value `open'

[11/11/93 public]
Changed SHELL to PROG and exec $PROG in:
  test/file/acl/scripts/accheck/driver.sh
  test/file/acl/scripts/common/init.sh
Changed Transarc Status from `open' to `import' 
Added field Transarc Delta with value 
 `andi-o-ot9387-acl-tests-workaround-for-hp-shell'

[12/17/93 public]
Closed.



CR Number                     : 9371
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 9295
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : xom
Short Description             : Xom valid get* tests fail
under certain circumstances
Reported Date                 : 11/4/93
Found in Baseline             : 1.0.3
Found Date                    : 11/4/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b4
Affected File(s)              : Feb code submission
Sensitivity                   : public

[11/4/93 public]
See the discussion under OT9295.

The xom/valid/get* tests fail when:
	- gds is activated
	- testcases are run with xt_test -a option.  

Here is the Testcases file used:
copy1v
copy2v
copy3v
copy_value1v
copy_value2v
create1v
create2v
delete1v
delete2v
get1v
get2v
get3v
get4v
get5v
get6v
get7v
get8v
get9v
instance1v
instance2v
instance3v
put1v
put2v
put3v
put4v
put5v
put6v
read1v
read2v
remove1v
write1v

[02/24/94 public]
Fixed by Feb. code submission.

[4/20/94 public]
Closed.



CR Number                     : 9342
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : systest
Short Description             : dfs.read_write_all.main fixes needed
Reported Date                 : 11/3/93
Found in Baseline             : 1.0.3
Found Date                    : 11/3/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dfs.read_write_all.main
Sensitivity                   : public

[11/3/93 public]

	- Look for check_RC.ksh in TROOT.
        - Check for datafile - exit if not found.
        - Print and check results of fts create, crmount,
        delmount and setquota commands.
        - Load check_RC function.
        - Output PASSED or FAILED in addition to 0 or 1
        exit.

[11/4/93 public]
Above fixes submitted via changes to dfs.read_write_all.main.

[11/11/93 public]
Closing.



CR Number                     : 9325
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : rpc
Subcomponent Name             : 
Short Description             : RPC functional test need cleanup
Reported Date                 : 11/2/93
Found in Baseline             : 1.0.3
Found Date                    : 11/2/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : ./test/rpc/rtandidl/Makefile
./test/rpc/rtandidl/README
./test/rpc/rtandidl/control/Makefile
./test/rpc/rtandidl/control/do_rpc_test.sh
./test/rpc/runtime/perf/Makefile
./test/rpc/runtime/v2test_lib/Makefile
Sensitivity                   : public

[11/2/93 public]

The RPC functional tests need a little cleanup:
	- Install README files
	- Install shell scripts which run the tests

[11/02/93 public]
Fixed up the above.
Closed.



CR Number                     : 9324
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : 
Short Description             : syntax error in rpc.sec.2_runtest.sh
Reported Date                 : 11/2/93
Found in Baseline             : 1.0.3
Found Date                    : 11/2/93
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : 
			src/test/systest/rpc/rpc.sec.2/rpc.sec.2_runtest.sh
Sensitivity                   : public

[11/2/93 public]
The following syntax error occured when I ran rpc.sec.2_runtest.sh:

1200 ->rpc.sec.2_runtest.sh -H
/dcetest/dcelocal/test/tet/system/rpc/ts/rpc.sec.2
rpc.sec.2_runtest.sh[205]: test: 0403-021 A ] character is missing.

Usage: rpc.sec.2_runtest.sh -C <num> [-a authn_svc][-c <mach> -c <mach>...][-b][
-d]

This is a simple problem with a "]" not having a space before it. The line is:

if [ "$rs2_rt_local_os" = "HP-UX" -o "$rs2_rt_local_os" = "SINIX-D"]

and it should be

if [ "$rs2_rt_local_os" = "HP-UX" -o "$rs2_rt_local_os" = "SINIX-D" ]

[11/11/93 public]
Closed.



CR Number                     : 9311
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : switch test
Short Description             : Update switch test 'valid'
Testcases
Reported Date                 : 11/1/93
Found in Baseline             : 1.0.3
Found Date                    : 11/1/93
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b10
Affected File(s)              : src/directory/xds/tests.switch/valid/Testcases
Sensitivity                   : public

[11/1/93 public]
The read11v and read12v tests should be removed from Testcases.  They were
defuncted in 2/93.

[11/1/93 public]
Additionally, the following testcases were dropped in 11/92 but were never
added to the 'Testcases' file:

add_entry1tv
compare1tv
list1tv
mod_entry1tv
read1tv
remove1tv

[11/1/93 public]
Fix submitted.

[11/8/93 public]
Oops, the aforementioned *1tv tests don't work under the basic switch test
configuration -- they apparently require a second machine to be configured.
Therefore, they should be removed from Testcases after all.  Will open a
documentation defect against the porting guide.

[11/8/93 public]
Doc bug is OT9400



CR Number                     : 9308
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : tests.switch
Short Description             : Testcases file references
defuncted test
Reported Date                 : 11/1/93
Found in Baseline             : 1.0.3
Found Date                    : 11/1/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b10
Affected File(s)              : 
src/test/directory/xds/tests.switch/invalid/Testcases
Sensitivity                   : public

[11/1/93 public]
The 'Testcases' file contains the test 'read3i', which was defuncted by
Norbert Marrek on 2/4/93.

[11/1/93 public]
Removed read3i from Testcases

[11/8/93 public]



CR Number                     : 9307
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : xt_test
Short Description             : xt_test gets a bus error
during valid switch tests
Reported Date                 : 11/1/93
Found in Baseline             : 1.0.3
Found Date                    : 11/1/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b10
Affected File(s)              : 
./directory/gds/dua/switch/d21_cdslis.c
Sensitivity                   : public

[11/1/93 public]
The xt_test program reports a bus error in function make_result_contiguous
during the valid testcase list3v.

Configured DCE and GDS according to instructions in Porting Guide.  Used
the following script to initialize the DUA cache:

*****:
:directory id:1
:password:
:Country:
:Organisation:
:Organisational unit:
:common name:
:options():Logon to the DUA Cache
:****Administration ****:
:Function:1
:****Add Client Address *******:
:Operation:05
:P-Selector:
:S-Selector:
:T-Selector:Client
:Net-address 1:TCP/IP!internet=130.105.5.41+port=21010__________________
:Net-address 2:
:Net-address 3:
:Net-address 4:
:Net-address 5:
:****AddObject  ie/digital/dce/dsa/dsa-m1 *******:
:Operation:01
:Objekttypnummer:07
:country:ie
:organization:digital
:OrganizationalUnit:dce
:Common-Name:dsa
:Common-Name:dsa-m1
:ObjectClass:DSA
:Auxiliary Object class:NO
:Attribute Name1:Presentation-Address
:Attribute Name2:DSA-Type
:Attribute Name3:
:Attribute Name4:
:Attribute Name5:
:More:
:attributName:DSA-Type
:attributwert:default/local'
:attributwert:
:attributName:
:attributwert:
:attributwert:
:attributName:
:attributwert:
:attributwert:
:P-Selector:
:S-Selector:
:T-Selector:Server
:Net-address 1:TCP/IP!internet=130.105.5.41+port=21011___________________
:Net-address 2:
:Net-address 3:
:Net-address 4:
:Net-address 5:
:******** RETURN ******:
:operation:00
:**** Administration ****:
:Function:0

[11/1/93 public]
Also happens during tests.switch/threads_as/T10list3v

[11/4/93 public]
Fix submitted 11/3.

[11/4/93 public]
Fix verified.



CR Number                     : 9301
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : src/test/systest/directory/gds/dcegdshd
Short Description             : Makefile still refers to defunct
					     files
Reported Date                 : 11/1/93
Found in Baseline             : 1.0.3
Found Date                    : 11/1/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : /systest/directory/gds/dcegdshd/Makefile
Sensitivity                   : public

[11/1/93 public]

In "src/test/systest/directory/gds/dcegdshd" the Makefile still lists
in its "OTHERS" target 6 files that were defuncted, so it complains
during "test" and "test install" phases:
 
install_tests.log.10-30-93:13334:make: don't know how to make gdsSetup
(continuing)
install_tests.log.10-30-93:13335:make: don't know how to make gdsmod
(continuing)
install_tests.log.10-30-93:13336:make: don't know how to make
worldSetup.gds (continuing)
install_tests.log.10-30-93:13337:make: don't know how to make
gdsdirinfo.awk (continuing)
install_tests.log.10-30-93:13338:make: don't know how to make gdskill
(continuing)
install_tests.log.10-30-93:13339:make: don't know how to make setup.i.gds
(continuing)
tests.log.10-30-93:13069:make: don't know how to make gdsSetup (continuing)
tests.log.10-30-93:13070:make: don't know how to make gdsmod (continuing)
tests.log.10-30-93:13071:make: don't know how to make worldSetup.gds
(continuing)
tests.log.10-30-93:13072:make: don't know how to make gdsdirinfo.awk
(continuing)
tests.log.10-30-93:13073:make: don't know how to make gdskill (continuing)
tests.log.10-30-93:13074:make: don't know how to make setup.i.gds (continuing)

[11/01/93 public]
Fix submitted.

[11/08/93 public]
Closed.



CR Number                     : 9299
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : Systest
Short Description             : The administration lists need
to be updated to support all the ref. patforms.
Reported Date                 : 11/1/93
Found in Baseline             : 1.0.3
Found Date                    : 11/1/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : Admin Checklists (cds,sec)
Sensitivity                   : public

[11/1/93 public]

Several of the admin lists need to be updated to support all the
reference platforms. 

The output of some of the commands need to be edited to reflect the 
most current changes.

[11/3/93 public]

All the changes had been submitted.

[11/12/93 public]

Closing this defect.



CR Number                     : 9288
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cds
Subcomponent Name             : dacl test
Short Description             : dacl test scripts should have backed out the temporary work around of OT#7759 after OT#7759 got fixed
Reported Date                 : 10/28/93
Found in Baseline             : 1.0.3
Found Date                    : 10/28/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dacl_setup.sh and dacl_testing.sh
Sensitivity                   : public

[10/28/93 public]
dacl test scripts have some work around of OT#7759 put in by sommerfeld
which is no longer needed after the OT is fixed.

[10/28/93 public]
Backed out the work around and also fixed a small problem which should
had used -o instead of -or for logical OR

[11/11/93 public]
fixed->closed.



CR Number                     : 9285
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dcegdshd systest
Short Description             : GDS setup files/scripts obsolete
Reported Date                 : 10/28/93
Found in Baseline             : 1.0.3b8
Found Date                    : 10/28/93
Severity                      : A
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b9
Affected File(s)              : test/systest/directory/gds/dcegdshd/sTest.gds, gds*, setup.i.gds
Sensitivity                   : public

[10/28/93 public]
The changes to gdsSetup and worldSetup.gds mean that a new sTest.gds is 
needed to configure gds for the dcegdshd test.

[10/29/93 public]
Changed the short description to cover both the update to the sTest.gds
file, and the defuncting of the setup scripts for GDS (these move to 
the systest/tools directory).

[10/29/93 public]
Did the submit to defunct the GDS setup scripts and the upgrade to the 
sTest.gds file.

[11/12/93 public]
These changes have passed numerous nightly builds and have been used to set
up the config for the dcegdshd test on all reference platforms.
Defect closed.



CR Number                     : 9284
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 9650
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dfs
Subcomponent Name             : lfs
Short Description             : Episode recovery tests don't pass on HPUX.
Reported Date                 : 10/28/93
Found in Baseline             : 1.0.3
Found Date                    : 10/28/93
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.0.3a
Affected File(s)              : file/episode/rcx/copyaggr.c
					     src/file/episode/rcx/runrcx
					     src/file/episode/sautils/asdb.c
Sensitivity                   : public
Transarc Deltas               : bwl-o-ot9284-hp-port-rcx-tests
Transarc Herder               : 
Transarc Status               : submit

[10/28/93 public]
Changes are needed in src/file/episode/rcx/runrcx,
src/file/episode/sautils/asdb.c, and in src/file/episode/rcx/README to make
these tests pass on HPUX.  The changes all have to do with the fact that
devices on HPUX are in, e.g. /dev/dsk/5s0 and /dev/rdsk/5s0.  Also, on
HPUX, the major device number is different between the block and raw
devices (they seem to be the same on AIX).  I will be submitting the fixes
shortly.

[12/17/93 public]
Closed.

[12/23/93 public]
Additional changes required:
- Use bdf instead of df to determine what's mounted.  Deal with idiosyncrasies
  of bdf, e.g. an output line may be split into two lines.
- Wait 30 seconds before calling bdf, so the syncer can update /etc/mnttab.
  The right thing to do would be to fix the code that calls mount; fixing
  runrcx instead is strictly a quick hack.
- copyaggr must pass the block device number, not the char device number, to
  the freeze and unfreeze syscalls.
Some further changes, to cope with partitions of different sizes, will be
described in another OT CR.
Filled in Subcomponent Name with `lfs' 
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `' 
Added field Transarc Status with value `'

[1/5/94 public]
Re-opening, to cope with the changes that were required to get rcx to actually
run on HP/UX.
Changed CR in Code, Doc, or Test? from `code' to `test' 
Filled in Inter-dependent CRs with `9650' 
Changed Interest List CC from `kinney@ch.hp.com' to `kinney@ch.hp.com, 
 kissel@ch.hp.com' 
Changed Status from `closed' to `defer' 
Changed Fix By Baseline from `1.0.3' to `1.1' 
Changed Fixed In Baseline from `1.0.3' to `' 
Changed Responsible Engr. from `kissel@ch.hp.com' to `bwl@transarc.com' 
Changed Resp. Engr's Company from `hp' to `tarc' 
Filled in Transarc Status with `open'

[1/5/94 public]
Defect Closure Form
-------------------
--Verification procedure below--
The verification procedure was to run various RCX tests.  I created a copy
of all_tests that ran basictest and bigsimple on 8K-1K and 4K-4K filesets.
I was able to get one successful run of this.  There were several unsuccessful
runs, due to a not-reliably-reproducible bug, described in another OT CR.
--Other explanation below--
To get the RCX tests to run on HP with Episode disks that are of different
sizes, it is also necessary to have the fix for OT CR 9650.
Associated information:
Tested on TA build:  
dfs-osf-1.12
Tested with backing build:  
dce1.0.3ab1
Filled in Transarc Deltas with `bwl-o-ot9284-hp-port-rcx-tests' 
Changed Transarc Status from `open' to `export'

[1/19/94 public]
Changed Status from `defer' to `fix' 
Filled in Fixed In Baseline with `1.0.3a' 
Changed Affected File from `src/file/episode/rcx/README' to 
 `file/episode/rcx/copyaggr.c' 
Changed Transarc Status from `export' to `submit'

[02/04/94 public]
Closed.



CR Number                     : 9274
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : API  key management test
Short Description             : key_mgmt_setup.sh fails to remove ktab file
Reported Date                 : 10/27/93
Found in Baseline             : 1.0.3
Found Date                    : 10/27/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : 
			src/test/security/api/moretests/key_mgmt_setup.sh
Sensitivity                   : public

[10/27/93 public]
If I have previously run the all_key_mgmt.tsh test on a mahine, it
leaves the ktab file in /tmp. In the file key_mgmt_set_key.tsh it
appears to be using the "/tmp/key_mgmt_test" as the name of the
ktab file. However, it may already exist in which case the test fails.

The solution is to modify key_mgmt_setup.sh to remove
"/tmp/key_mgmt_test".

[11/12/93 public]
Closed.



CR Number                     : 9271
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : rgy_edit tests
Short Description             : failures in rgy_edit test
Reported Date                 : 10/27/93
Found in Baseline             : 1.0.3
Found Date                    : 10/27/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : 
				src/test/security/api/moretests/rgy_account.sh
				src/test/security/api/moretests/rgy_group.sh
Sensitivity                   : public

[10/27/93 public]
In the rgy_group.sh shell script, which performs some tests on
groups for rgy_edit, the group "rom" is added with a hard coded group
number of 202. This causes the test to fail when that group number is
already used (e.g. if the defaults values are entered when configuring
security and CDS is also configured). I recommend changing this value
to something larger and not quite so common, such as 876.

In the rgy_account.sh shell script, which does account test, the
following error occurs:

Routine Tested:    rgy_edit command line
Tested for:        RA1 Adding Account: bullwinkle,rom,jwe

Failure Message (from rgy_edit):      ?(rgy_edit) "//vw/finger" - Unknown or red
undant keyword (Registry Editor/TTY Interface) (dce / sad)
Test Status:       Test FAILED
Failure Message:   rgy_edit test case failed with error 114

When I changed the following line this test passed:


previous lines
   rgy.sh $DEBUG $SAVE "RA1" "Adding Account: bullwinkle,rom,jwe" \
           "do acc" \
           'a bullwinkle -g none -o none -pw mooseandsquirrel -mp -dce- -m "Thi
s is a test" -h //vw/finger -s /bin/ksh'


new lines
   rgy.sh $DEBUG $SAVE "RA1" "Adding Account: bullwinkle,rom,jwe" \
           "do acc" \
           'a bullwinkle -g none -o none -pw mooseandsquirrel -mp -dce- -m \"Thi s is a test\" -h //vw/finger -s /bin/ksh'

[10/7/93 public]
This CR is a dup of 9239.

[10/27/93 public]
This is not a complete dup of 9239. The problem concerning group
202 being hard coded is still a problem in rgy_group.sh
and rgy_account.sh.

[11/11/93 public]
Closed.



CR Number                     : 9270
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : mavrostest
Short Description             : test_mvr.sh should not build code.
Reported Date                 : 10/27/93
Found in Baseline             : 1.0.3
Found Date                    : 10/27/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b9
Affected File(s)              : test_mvr.sh, Makefile
Sensitivity                   : public

[10/27/93 public]
Most of the compilation and linkage activities that are done in the
test_mvr.sh script should be done as part of the build.  test_mvr.sh should
then only need to execute the test drivers.

[5/4/94 public]
Fixed.



CR Number                     : 9269
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : mavrostest
Short Description             : test.make is not installed
Reported Date                 : 10/27/93
Found in Baseline             : 1.0.3
Found Date                    : 10/27/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b9
Affected File(s)              : test/directory/gds/mavrostest
Sensitivity                   : public

[10/27/93 public]
The makefile 'test.make' is not installed.  This prevents the operation of
the mavros functional test as specified by the porting guide.

[10/27/93 public]
More general: fixed mavrostests so they would work as documented:

Makefile:  added three files to DATAFILES: test.make, import1.h, test.h

test_mvr.sh: added -e file to make invocation so that it would pick up
environement values of CFLAGS and LDFLAGS.

[10/28/93 public]
Verified in build of 10/27.



CR Number                     : 9260
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : admin tests
Short Description             : Discrepency between predicted
and actual error.
Reported Date                 : 10/26/93
Found in Baseline             : 1.0.3
Found Date                    : 10/26/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : test/directory/gds/tst/t.scheme/ch_schema2
Sensitivity                   : public

[10/26/93 public]
Running the gdsditadm test #2 on an OSF1 system I encounter the following
circumstance in which the predicted error does not match the actual error:

**ADD OCT entry (EEE) --->o.k***:
**MODIFY OCT entry (CCC) --->ERROR(This modification generates a loop in
object class hierarchy !)***:
                                                                           
ERROR:
Mandatory attr. appears in one of the superior object classes !
To continue press <CR> !

[10/27/93 public]
fixed with changing the batchfile

[10/28/93 public]
Fix verified.



CR Number                     : 9259
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dfs
Subcomponent Name             : test
Short Description             : admin_checklist needs corrections
Reported Date                 : 10/26/93
Found in Baseline             : 1.0.3
Found Date                    : 10/26/93
Severity                      : D
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.0.3a
Affected File(s)              : test/systest/admin/file/tests/admin_checklist
Sensitivity                   : public

[10/26/93 public]

The file src/test/systest/admin/file/tests/admin_checklist needs some
corrections and enhancements in order to be more useful to the tester.  I
have provided a diff of the file I kept which contains my notes indicated
by ***** in the first 5 columns.  In some cases the correction follows, in
others I have just provided a suggestion for what is needed.  If you need
or want my copy of the file, please let me know.

marathon:/users/buhner/Dfs/RP -> diff admin_checklist.orig admin_checklist
112a113,114
> *****need statement of what expected configuration is - buhner
>
126c128,129
< /dev/rz1b       /u2             ufs     0,,13
---
> ***** must add the aggregate id number as well!!! - buhner
> /dev/rz1b       /u2             ufs   4    0,,13
164c167
< X> %newaggr -aggregate /dev/rz1e -blocksize 8192 -fragsize 1024
---
> *****need statement of what the initial configuration is - buhner
165a169,172
> *****note to add optional switches -overwrite and -verbose - buhner
>
> X> %newaggr -aggregate /dev/rz1e -blocksize 8192 -fragsize 1024
(-overwrite -verbose)
>
226a234,236
> ***** can't do the following unless the aggregates already exist on this
> ***** and another node.  Should let this be known before get to this
poing - buhner
>
267c277,278
< > %fts setquota -fileset epi.1
---
> ***** must include the -size switch and value for this command - buhner
> > %fts setquota -fileset epi.1 -size 10000
275a287,289
> ***** modify comment to more clearly state that the following set if
lines
> ***** are merely informational and are not meant to indicate that
anything
> ***** needs to be executed. - buhner
279a294,295
> The dce_config script exercises the above aspects of dfs cell
administration so there
> is no need to repeat them at this time.
281d296
< The dce_config script exercises these aspects of dfs cell administration.
367a383,386
>
> *****need statement of what the initial configuration is - buhner
>
>
374a394,397
> *****The above detach should be followed by a re-attach of the
> *****aggregate since there is another request to detach this
> *****device later on in this section - buhner
>
379a403,406
> *****Add note that the tester might want to perform the following test
when it
s the FLDB to be
> out of sync
> > %fts lsfldb -server valentine
> Check to make sure the fileset has been deleted
>
489c542
< (on dce12)
---
> (on dce12 only)
516a570,572
> *****NOTE: Given the previous sequence of events, it is not possible
> *****to perform this detach.  It was detached back in the beginning
>
822a895,897
>
> *****need statement of what the initial configuration is - buhner
>
848a924,925
> *****need statement of what the initial configuration is - buhner
>
920c997,999
< Firs we  must do a full backup from one LFS fileset to another.
---
> *****need statement of what the initial configuration is - buhner
>
> First we must do a full backup from one LFS fileset to another.
922c1001
< done.  Note that we're restoring  to a non-existant fileset, one
---
> done.  Note that we're restoring to a non-existant fileset, one

[10/27/93 public]
Thanks Cindy - I'm going to try to go through the admin_checklist
this week and next week so I'll be incorporating your input.

[12/22/93 public]
Added configuration information at the beginning of each section.
Changed machine names to be generic.
Fixed inconsistencies and errors in commands.
Added setup setup steps where needed.



CR Number                     : 9249
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : dfs.lock
Short Description             : dfs.lock test setup undocumented
Reported Date                 : 10/25/93
Found in Baseline             : 1.0.3
Found Date                    : 10/25/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3a
Fixed In Baseline             : 1.0.3a
Affected File(s)              : dfs.lock, lock.data
Sensitivity                   : public
Transarc Deltas               : 
Transarc Status               : open

[10/25/93 public]
dfs.lock system test seems to require undocumented setup
procedures involving a variable STDEXC, BINDIR (README says TROOT).
Also unsupplied with the sources are:
a profile called profile.dcetest and a script called conf_util.sh.
Added field Transarc Deltas with value `' 
Added field Transarc Status with value `open'
[mhickey public]
The dfs.lock setup should be better documented, either in the books, the
script itself, or an associated README.  However, comments in both the
datafile and the script itself indicate the need for and use of the BINDIR
directory and the STDEXC variables.  In addition, the test is assumed to 
have been installed using the dcetest_config tool, in which case the
profile.dcetest file and the conf_util.sh script will be installed.  Use
of the dcetest_config tool is documented in the Porting and Testing Guide.

[11/3/93 public]
Changed area from code to test. I agree that there's no reason for dfs.lock
to differ so much from the other tests - will the following changes suffice?
	- replace BINDIR with TROOT
	- define STDEXC in datafile
	- document conf_util.sh dependency

[11/3/93 public]
The above changes will be just fine for resolving this problem.

[12/28/93 public]
Above changes made and submitted.

[01/17/94 public]
Submission fixed - closing.



CR Number                     : 9248
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : tst
Short Description             : Possible error in admin test #2
Reported Date                 : 10/23/93
Found in Baseline             : 1.0.3
Found Date                    : 10/23/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b9
Affected File(s)              : test/directory/gds/tst/t.schema/ch_schema2
Sensitivity                   : public

[10/23/93 public]
When running gdsditadm test #2 I encountered the following text in the
t.erg file:

BIND                 elapsed time:     0.0500 sec
**Administration of the Schema:***:
**ADD AT entry (VVW) --->ok***:
**ADD AT entry (TSS) --->ok***:
**ADD AT entry (KKK) --->ok***:
**ADD AT entry (PJN) ---> ok***:
**ADD AT entry (WWW) --->ok***:
**ADD AT entry (PNO) ---> ok***:
**ADD AT entry (SE) --->ok***:
**ADD AT entry (PJS) --->ERROR(Wrong input for lower/upper bound !)***:
**ADD AT entry (PJS) ---> ok***:
                                                                           
ERROR:
Invalid Directory-ID !
To continue press <CR> !

This was found using two configurations: M1(486) & M2(UX), and M1(UX) &
M2(486).

[10/26/93 public]
Problem reproduced again with binaries from nightly build of 10/25.
Priority bumped.

[10/26/93 public]
Fixed in submission of 10/26.

[11/8/93 public]



CR Number                     : 9246
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dfs
Subcomponent Name             : test/systest/file/dfs.wan_checklist
Short Description             : dfs.wan_checklist omissions
Reported Date                 : 10/22/93
Found in Baseline             : 1.0.3
Found Date                    : 10/22/93
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3a
Fixed In Baseline             : 1.0.3a
Affected File(s)              : test/systest/file/dfs.wan_checklist
Sensitivity                   : public

[10/22/93 public]
dce_config used to start gdad by default.  Since it no longer does,
dfs.wan_checklist should include a directive to do so, probably via
dce_config.

[10/27/93 public]
I found that I needed to be dce_logged in to the cell_admin account that
corresponded to the cell in which I was working.  For example, if I used
filewnr to write a file in cell-A, from cell-B I needed to dce_login as
/.../cell-A/cell_admin in order to use filewnr to verify it.  I understand
that the right fix for this is to appropriately set the ACLs.  No mention
of ACLs is made in dfs.wan_checklist.

I also found that if hub doesn't run perfectly the first time, due for
example to the above problem, you will need to do a cm flush on the test
directory before restarting both spoke processes and rerunning hub.

[10/27/93 public]
Thanks Steve - I believe I had foreign ACLs set up when I ran the test
but failed to mention them in the checklist - good catch. Still not
sure of cm flush-hub connection but I'll look into it when I get to
this one.

[12/16/93 public]
Setting fixby field back to 1.0.3a in the hopes that I can update the
checklist as I run through it. Currently WAN testing is scheduled for
the second half of January.

[1/5/95 public]
Since I'll be doing the dfs.wan_checklist, I'll get this one.

[1/25/94]
Added note about installing and starting gdad daemon.
Added steps to setup the appropriate ACLs.

When going through the checklist, I also had trouble running the hub
and spoke tests, but flushing the cache was not neccessary.  Since I did
not see this problem, a comment about flushing the cache was not added.



CR Number                     : 9234
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : ros
Short Description             : rostest: unresolved symbols
Reported Date                 : 10/22/93
Found in Baseline             : 1.0.3
Found Date                    : 10/22/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : test/directory/gds/ros/testenv/Makefile
Sensitivity                   : public

[10/22/93 public]
In test/directory/gds/ros/testenv/adm:

Unresolved symbols while linking rostest:

c89      
	-z 
	-Wl,
	-Bimmediate,
	-Bnonfatal,
	-a,default,+b,/lib:/usr/lib    
	-L.
	-L/u3/devobj/sb/nb_ux/src/test/directory/gds/ros/testenv
	-L/project/dce/build/dce1.0.3-snap/src/test/directory/gds/ros/testenv
	-L/u3/devobj/sb/nb_ux/export/hp800/usr/shlib 
	-L/project/dce/build/dce1.0.3-snap/export/hp800/usr/shlib
	-L/usr/shlib 
	-L/u3/devobj/sb/nb_ux/export/hp800/usr/lib
	-L/project/dce/build/dce1.0.3-snap/export/hp800/usr/lib   
	-o rostest.X lundtpdu.o nameserv.o  
	-lrom 
	-lroa 
	-lros
	-loss 
	-lxti  
	-ld27 
	-losiaddr 
	-ldce    
/bin/ld: Unsatisfied symbols:
   sigset (code)
   nds_map_addrinfo (code)
*** Error code 1

[10/22/93 public]
Fixed : Jochen Keutel

[10/26/93 public]
Closed.



CR Number                     : 9232
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : tst
Short Description             : Not all t.dsa files are installed
Reported Date                 : 10/21/93
Found in Baseline             : 1.0.3
Found Date                    : 10/21/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : see below
Sensitivity                   : public

[10/21/93 public]

In test/directory/gds/t.dsa

The following files are not installed during the build.  These files are
required by gdsditadm test #1.

t.adddme.01
t.deldme.01
t.dispdme.01
t1.mdl1addobj
t1.mdl5addatt
t1.mdl6rematt
t1.mdl7addval
t1.mdl7delval
t1.mdl7modsub
t1.mdl7modval

The following file isn't installed either but it's not clear whether it's
needed by anything:

script

[10/21/93 public]
Fixed: Jochen Keutel

[11/8/93 public]



CR Number                     : 9228
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : test/systest/file/filewnr.c
Short Description             : filewnr random read bug
Reported Date                 : 10/21/93
Found in Baseline             : 1.0.3
Found Date                    : 10/21/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : test/systest/file/filewnr.c
Sensitivity                   : public

[10/21/93 public]
The read_file() routine in filewnr.c uses an extremely poorly designed
algorithm for choosing random blocks.  Basically, it consists of:

	1) Choose a random number out of all blocks in the file.

	2) If the block has been read, goto step 1.

	3) Read the block.

	4) Repeat until all blocks have been read.

This takes O(N log N) time, I believe, which is far too long for 320,000
blocks.

I have a fix, which is O(1) time.  The algorithm consists of:

	1) Pick a random number out of all blocks *not yet read*.

	2) Read the block, and remove it from the list of blocks not read.

	3) Repeat until all blocks have been read.

Here is a diff which implements this change:

904a905
>   long bleft;
914c915,916
<   /* set up for random access - create array of 0's and seed random #
generator */
---
>   /* set up for random access - create array of block numbers and */
>   /* seed random # generator */
915a918,920
>   for (i = 0; i < input->bnum; i++)
>     array[i] = i;
>   bleft = input->bnum;
922c927
<   for (i = 0; i < input->bnum; )
---
>   for (i = 0; i < input->bnum; i++)
925c930
<       r = RAND () % input->bnum;
---
>       r = RAND () % bleft;
927,928c932,935
<       /* if that block hasn't been read, read it, bump count (i) and mark
array */
<       if (!array[r])
---
>       /* Read block, replace entry with block number from last slot in */
>       /* range. */
>       if (lseek (fd, (array[r] * input->bsize) + input->offset,
>                SEEK_SET) == -1)
930,939c937
<         if (lseek (fd, (r * input->bsize) + input->offset,
<                    SEEK_SET) == -1)
<           {
<             LSEEK_ERROR;
<           }
<         else
<           read_pattern (input, fd, r);
<
<         i++;
<         array[r] = i;
---
>         LSEEK_ERROR;
940a939,943
>       else
>       read_pattern (input, fd, array[r]);
>
>       bleft--;
>       array[r] = array[bleft];
941a945,947
>
>   /* Destroy array */
>   free(array);

[10/22/93 public]
All is not as it seems on the surface.  While there is an algorithmic problem
here, there's a simple reason why it surfaced during the HP port:

From the code:
 *---* HP-UX does not have the random/srandom calls either.  To make this
 *---* portable, we will define RAND and SRAND to be rand and srand for
 *---* HPUX, and random and srandom for all others.

Checking the rand man page, we see:
 rand() uses a multiplicative, congruential, random-number
 generator with period 2^32 that returns successive pseudo-
 random numbers in the range from 0 to 2^15-1.

This is based on the RAND_MAX symbol defined in stdlib.h or thereabouts.

The range of random(), the orginal generator used on OSF/1 & rios, is 0
to 2^31 - 1.

So rand will never generate a number larger than about 32768, no matter how
you change the algorithm.  I haven't checked the suggested changes to see
how they circuvent the problem, but with the 32k limit, it's easy to see
why the test would take a long time for large files.

For blocks > 2^15-1, the algorithm is O(infinity), not O(n log n).

Regardless, the original algorithm is deficient, even for a wider ranging
random function, since there's no guarantee that ALL integers in the
range, 0 <= block count < RAND_MAX, will be generated in finite time.

[12/14/93 public]
Filewnr.c now contains a more efficient algorithm. This was submitted BEFORE
the 1.0.3 freeze under another CR - HP did their maxfile testing of their
port using this new filewnr.



CR Number                     : 9214
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cds
Subcomponent Name             : backup and restore CDS system test
Short Description             : hostname not extracted correctly
Reported Date                 : 10/20/93
Found in Baseline             : 1.0.3
Found Date                    : 10/20/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : 
			src/test/systest/admin/cds/tests/backup_ch.ksh
			src/test/systest/admin/cds/tests/backup_restore_ch.ksh
			src/test/systest/admin/cds/tests/restore_ch.ksh
Sensitivity                   : public

[10/20/93 public]
The "Backup and Restore Automated Test" fails because of two problems:

   1) The variable HOSTNAME is used for creation of file names.
	However, when hostname returns the full domain (e.g.
	name.osf.org) it uses this name to create files names that
	are used by CDS. However, CDS strips the damin off of the
	hostname (e.g. name.osf.org is stripped to name).
	Therefore the following line should be changed:

		existing:	HOSTNAME=`hostname`

		change to:	HOSTNAME=`hostname|awk -F"." '{print \$1}'`

	This will allow the file names to be created with the
	correct name.

   2) The first test that is performed is expected to fail but will
	always pass. The command is

		cdscp list dir /.:/${TESTDIR}

	where TESTDIR = "bkrsch_${HOSTNAME}. This command always
	passes because the cell_admin has read permission to /.:/.
	Therefore the expected status for this command should be 0.

I have made these changes and run this test on AIX.

[10/22/93 public]
The "Restore Clearinghouse Automated Test" and the "Backup Clearinghouse
Automated Test" also do not extract the hostname correctly. I have
changed these files and run the test successfully.

I have seem the same behavior on the setup.ksh script that is used
to setup cds.acl.6 system test.  This defect may affect more than 
just these two tests.  Can someone at OSF do some analysis on this
defect?  Are these problems only showing up on RIOS for some reason ?

[11/11/93 public]
fixed->closed.



CR Number                     : 9209
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : gds system test
Short Description             : need systetm test for threadsafe XDS
Reported Date                 : 10/20/93
Found in Baseline             : 1.0.3
Found Date                    : 10/20/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b10
Affected File(s)              : test/systest/tools/{gdsSetup,worldSetup.gds,gdskill,gdsdirinfo.awk}, test/systest/directory/gds/gds_xds_str_001/*
Sensitivity                   : public

[10/20/93 public]
Place holder for submitting the n3ew gds_xds_str_001 system test and
associated files.

[11/10/93 public]
The system test created in response to this defect is gds_xds_str_001.
The DCE 1.0.3 system test plan and associated documents describe the goals
and operation of this test.  This test has been run on all of the reference
platforms.  Defect closed.



CR Number                     : 9200
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dts
Subcomponent Name             : dtscp test
Short Description             : New dtscp test from HP.
Reported Date                 : 10/19/93
Found in Baseline             : 1.0.3
Found Date                    : 10/19/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : see below
Sensitivity                   : public

[10/19/93 public]
This bug covers the submission of an improved dtscp test from HP.

It was a TET functional test, and can still be in 1.1, but for
1.0.3 we just made it easier to run and verify output.

files are:
./test/time/control/Makefile
./test/time/control/dtscp.ksh
./test/time/control/test_dtscp.ksh
./test/time/control/test_dtscp_clerk.templ
./test/time/control/test_dtscp_server.templ

Defuncted is:
./test/time/control/test_dtsscp_ultrix.sh

[11/10/93 public]
Functional tests passed build and work great.
Closed.



CR Number                     : 9195
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cds
Subcomponent Name             : test
Short Description             : LOGNAME used for file name
Reported Date                 : 10/19/93
Found in Baseline             : 1.0.3
Found Date                    : 10/19/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : test/systest/admin/cds/tests/functions
Sensitivity                   : public

[10/19/93 public]
The test uses the environmental variable LOGNAME as part of the name
for the log files which are created for the test. However, LOGNAME
is a readonly variable on AIX. Regargless it is a not a good choice
for naming this environmental variable. The variable is only used
in one fuction and I will change "LOGNAME" to "LOGFILE".

[11/11/93 public]
fixed->closed.



CR Number                     : 9194
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dfs
Subcomponent Name             : test/systest/file/dfs.block_frag
Short Description             : dfstab is not restored after test
Reported Date                 : 10/19/93
Found in Baseline             : 1.0.3
Found Date                    : 10/19/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : test/systest/file/dfs.block_frag
Sensitivity                   : public
Transarc Deltas               : 
Transarc Herder               : 
Transarc Status               : 

[10/19/93 public]
When the DFSTAB_EDITTED variable is FALSE, the dfstab is overwritten,
rather than modified.  It is not restored after the test completes, either.

[10/20/93 public]
Changed CR in Code, Doc, or Test? from `code' to `test' 
Filled in Affected File with `test/systest/file/dfs.block_frag' 
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `' 
Added field Transarc Status with value `'

[10/27/93 public]
Yup - typo caused dfstab to be overwritten. It was also leaving dfstab
as it was used during the test - better to restore original - fix
submitted.

[11/11/93 public]
Closing.



CR Number                     : 9184
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : xt_test
Short Description             : xt_test lies about results
Reported Date                 : 10/18/93
Found in Baseline             : 1.0.3
Found Date                    : 10/18/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b4
Affected File(s)              : xt_test files
Sensitivity                   : public

[10/18/93 public]
When run in debug mode, the xt_test program reports incorrect numbers of 
threads passed and failed; ie: all threads pass, and the output says they
all failed.

[02/24/93 public]
fixed by code submission at 22.Feb.

[3/14/94 public]
Closed.



CR Number                     : 9178
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : EPISODE
Short Description             : Add checksumming to aggregate copies in RCX tests
Reported Date                 : 10/18/93
Found in Baseline             : 1.0.2a
Found Date                    : 09/07/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.2a
Fixed In Baseline             : 1.0.3a
Affected File(s)              : some
Sensitivity                   : public
Transarc Status               : submit
Transarc Deltas               : 
Transarc Herder               : andi@transarc.com

[10/18/93 public]
**Description Text**
 To remove possibilites of problems in the "dd" of aggregates, I added
 checksum the source and destination aggregates and bail out if 
 checksums do not match.
 
 rajesh-Thu, 23 Sep 1993 15:33:45
**Solution Text**
 rajesh-db4280-checksum-aggregates
 rajesh-Thu, 23 Sep 1993 15:33:48
 
 This delta has been expanded tremendously in scope since its original
 inception. For the gory details check out the cml history (RCS log).
 
 rajesh-Wed, 29 Sep 1993 08:34:45
**Validation Text**

[10/18/93 public]
  Moved from Transarc database and in dfs-osf-1.5
Added field Transarc Herder with value `andi@transarc.com' 
Added field Transarc Status with value `import'

[12/17/93 public]
Closed.



CR Number                     : 9145
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : sec
Subcomponent Name             : functional test failure.
Short Description             : sec_login_valid_and_cert api
test fails when tested for invalid password.
Reported Date                 : 10/18/93
Found in Baseline             : 1.0.3
Found Date                    : 10/18/93
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : ../src/test/security/api/moretests/login_test.c
Sensitivity                   : public

[10/18/93 public]

Running the security functional tests with the latest 1.0.3 build gives a
failure in sec_login_valid_and_cert api test when tested for invalid
password on 486 platform running osf1. This same test passes on hp/ux.

Here is the output with -d63 for 486 first and then for hp.

486 output:
----------

Begin sec_login_valid_and_cert_ident test

---------------------------------------------------------------
Routine Tested:   login_test
Tested For:       1 login_valid_and_cert_ident: good

Trace Message:    sec_login_setup_identity (flintstone 0.. ), status;
successful completion
Trace Message:    sec_login_valid_and_cert_ident ((null) .. ), status;
(null)
Trace Message:    Reset Login flag is false, AuthSrc is Network
Test Status:      Test SUCCEEDED
Status Returned:  0
Status Text:      successful completion

---------------------------------------------------------------
Routine Tested:   login_test
Tested For:       2 login_valid_and_cert_ident: passwd invalide

Trace Message:    sec_login_setup_identity (flintstone 0.. ), status;
successful completion

---------------------------------------------------------------
Routine Tested:   login_test
Tested For:       3 login_valid_and_cert_ident: default context

Trace Message:    sec_login_valid_and_cert_ident ((null) .. ), status;
(null)
Trace Message:    Reset Login flag is true, AuthSrc is Network
Test Status:      Test SUCCEEDED
Status Returned:  0
Status Text:      successful completion


Subtotal: 2 passed, 1 failed
Summary: 140 passed, 1 failed

End sec_login_valid_and_cert_ident test


hp/ux:
-----

Begin sec_login_valid_and_cert_ident test

---------------------------------------------------------------
Routine Tested:   login_test
Tested For:       1 login_valid_and_cert_ident: good

Trace Message:    sec_login_setup_identity (flintstone 0.. ), status;
successful completion
Trace Message:    sec_login_valid_and_cert_ident ( .. ), status; successful
completion
Trace Message:    Reset Login flag is false, AuthSrc is Network
Test Status:      Test SUCCEEDED
Status Returned:  0
Status Text:      successful completion

---------------------------------------------------------------
Routine Tested:   login_test
Tested For:       2 login_valid_and_cert_ident: passwd invalide

Trace Message:    sec_login_setup_identity (flintstone 0.. ), status;
successful completion
Trace Message:    sec_login_valid_and_cert_ident ( .. ), status; Invalid
password (dce / sec)
Trace Message:    Reset Login flag is true, AuthSrc is Network
Test Status:      Test SUCCEEDED
Status Returned:  0
Status Text:      successful completion


---------------------------------------------------------------
Routine Tested:   login_test
Tested For:       3 login_valid_and_cert_ident: default context

Trace Message:    sec_login_valid_and_cert_ident ( .. ), status; illegal
use of
default sec login handle (dce / sec)
Trace Message:    Reset Login flag is true, AuthSrc is Network
Test Status:      Test SUCCEEDED
Status Returned:  0
Status Text:      successful completion


Subtotal: 3 passed, 0 failed
Summary: 141 passed, 0 failed

End sec_login_valid_and_cert_ident test

[10/19/93 public]
Fix tested and submitted.

[11/11/93 public]
Closed.



CR Number                     : 9130
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : test/file
Short Description             : clean up test/file
Reported Date                 : 10/15/93
Found in Baseline             : 1.0.3
Found Date                    : 10/15/93
Severity                      : D
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3a
Affected File(s)              : some
Sensitivity                   : public
Transarc Status               : submit
Transarc Deltas               : 
Transarc Herder               : 

[10/15/93 public]
There are a number of confusing things about the
file functional tests which need to be cleaned up.
To start with:
   backup:
     Tests in this directory are not the ones which were run
     for the 1.0.2a release.  In fact, the shell scripts in this
     directory don't even run.  The solution is to defunct the
     tests in this directory.  Transarc will by the end of 1.0.3a
     supply a file which enumerates the actual test commands
     and configurations for the tests which comprise the 
     backup hand-test suite. 
   recovery:
     These tests are useless, and infact, "recovery tests" actually
     refer to the rcx tests which live in file episode.  This
     directory should be defuncted and replaced with the rcx
     dirctory which currently lives in the source treee.
   salvage:
     Useless and will be defuncted.

[10/15/93 public]
please let us deal with this at Transarc.  At a minimum, we will deal 
with recovery, backup, and scavenge.  (Salvage is the tools that cleans
up aggregates). 
Changed Responsible Engr. from `delgado' to `jaffe@transarc.com' 
Changed Resp. Engr's Company from `osf' to `tarc' 
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `' 
Added field Transarc Status with value `'

[10/15/93 public]

Too late, man.  backup is defuncted.  We are leaving it to you
to submit the proprer backup testing procedure file.

recovery is also defuncted as well.  

There is no reason to keep these two around since no one
uses them, there are other tests which are used instead,
and their presence only serves to cause much confusion for everyone.

All of this was ok'd by Gail who is the dfs-drb authority for the
test area.


As for salvage, if these are in fact tools, then they don't belong
in the test tree at all, and should be put under src/file/episode.
Feel free to put them there.

[12/17/93 public]
Closed.



CR Number                     : 9128
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : rpc
Subcomponent Name             : ./test/rpc/rtandidl/moretests/pattrm.c
Short Description             : 
./test/rpc/rtandidl/moretests/pattrm.c: In function `pattrtest_op2':
./test/rpc/rtandidl/moretests/pattrm.c:107:argument `st_in' doesn't match
					   prototype
Reported Date                 : 10/15/93
Found in Baseline             : 1.0.3
Found Date                    : 10/15/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : test/rpc/rtandidl/moretests/pattr.idl
Sensitivity                   : public

[10/15/93 public]

src/test/rpc/rtandidl/moretests/pattrm.c:In function `pattrtest_op2':
src/test/rpc/rtandidl/moretests/pattrm.c:107:argument `st_in' doesn't match
prototype 


test_install:
/test/rpc/rtandidl/moretests/tstsrvr: installing as
/u1/devobj/sb/nb_486/src/../install/at386/dcetest/dce1.0/test/rpc/rtandidl
/moretests/tstsrvr 
make: don't know how to make server (continuing)

[10/15/93 public]
Fixed the pattr.idl file to have to correct prototype.

[11/12/93 public]
Code has passed functional and most of system test.
Closed.



CR Number                     : 9127
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : gds
Subcomponent Name             : ./test/directory/gds/ros/testenv
Short Description             : No such file or directory for
libros.a
Reported Date                 : 10/15/93
Found in Baseline             : 1.0.3
Found Date                    : 10/15/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b8
Affected File(s)              : stuff
Sensitivity                   : public

[10/15/93 public]

unable to link to libros.a in the test/directory/gds/ros/testenv
No such file or directory for cgetext.o

/project/dce/build/dce1.0.3-snap/src/test/systest/directory/gds/dcegdshd/view_obj.c:In function `fill_in_strings':
/project/dce/build/dce1.0.3-snap/src/test/systest/directory/gds/dcegdshd/view_obj.c:566:`OM_element_position' undeclared (first use this function)
/project/dce/build/dce1.0.3-snap/src/test/systest/directory/gds/dcegdshd/view_obj.c:566:(Each undeclared identifier is reported only once
/project/dce/build/dce1.0.3-snap/src/test/systest/directory/gds/dcegdshd/view_obj.c:566:for each function it appears in.)
/project/dce/build/dce1.0.3-snap/src/test/systest/directory/gds/dcegdshd/view_obj.c:566:parse error before `length'

install_tests failed:
release: lstat rostest: No such file or directory
/u1/devobj/sb/nb_486/src/../install/at386/dcetest/dce1.0/test/directory/gds/ros/testenv/rostest:aborting installation
make: don't know how to make adrmgr (continuing)

[ /test/systest/directory/gds/dcegdshd at 01:47 (AM) Friday ]
makepath dcegdshd/. && cd dcegdshd &&  exec make MAKEFILE_PASS=BASIC
install_all
make: don't know how to make view_obj (continuing)

[10/15/93 public]

The build error in the dcegdshd system test was caused by a change to
xom.h (See Below).  If we are not supposed to use OM_element_position
please let us know what we should use instead.

pellis@brandy(163) diff xom.h /project/dce/build/dce1.0.3/src/directory/xom/h
10a11,17
>  * Revision 1.1.75.1  1993/10/14  19:24:14  keutel
>  *    October 1993 code drop
>  *    [1993/10/14  19:23:02  keutel]
>  *
>  *    October 1993 code drop
>  *    [1993/10/11  10:24:00  keutel]
>  *
14c21
<  *
---
>  * 
43c50
< static char xom_rcsid[] = "@(#)$Id: c009127,v 1.4 94/03/15 15:24:46 nata Exp $";
---
> static char xom_rcsid[] = "@(#)$Id: c009127,v 1.4 94/03/15 15:24:46 nata Exp $";
106,109d112
< 
< /* Element Position */
< 
< typedef OM_uint32 OM_element_position;

[10/22/93 public]
Closed.



CR Number                     : 9106
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dfs
Subcomponent Name             : test/systest/admin/file/tests/admin_checklist
Short Description             : newaggr should be used with
the -overwrite option
Reported Date                 : 10/13/93
Found in Baseline             : 1.0.3
Found Date                    : 10/13/93
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.0.3a
Affected File(s)              : test/systest/admin/file/tests/admin_checklist
Sensitivity                   : public

[10/13/93 public]
It's likely that whoever is reading this will need to use the newaggr
-overwrite option, so it should be mentioned.

[12/14/93 public]
This CR was missed due to non-"test" status. Updating and assigning
to Cindy who is doing a lot of clean up work on the admin_checklist.
Thanks Cindy!

[12/22/93 public]
Added the overwrite switch to the newaggr command.



CR Number                     : 9105
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cds
Subcomponent Name             : test/directory/cds/cdstest.c
Short Description             : cdstest.c will not compile
because of type mismatch.
Reported Date                 : 10/13/93
Found in Baseline             : 1.0.3
Found Date                    : 10/13/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b23
Affected File(s)              : cdstest.c
Sensitivity                   : public

[10/13/93 public]

In cdsCvtTsToStr, the second parameter is expected to be of unsigned char *.

In function getopqsimplelen(), the return from cds_simpletoopq() is
assigned to a var of type char *. cds_simpletoopq() actually return
unsigned char *.

In function strtots, cdsCvtTsToStr() is passed with second parameter of
type char *. cdsCvtTsToStr() actually expects the 2nd parameter of type
unsigned char *.

Suggested fix is to declare the vars as unsigned char * in both cases.

[10/27/94 public]
This got fixed during code cleanup.



CR Number                     : 9089
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : fset
Short Description             : Fix the search path of fset_test in lock00.itl
Reported Date                 : 10/12/93
Found in Baseline             : 1.0.2
Found Date                    : 10/12/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3a
Affected File(s)              : some
Sensitivity                   : public
Transarc Status               : submit
Transarc Deltas               : 
Transarc Herder               : jaffe@transarc.com

[10/12/93 public]
There is a minor problem in the test/fset/scripts/lock00.itl : If the 
user (root) does not have . in his seatch path then lock00.itl would not be
able to locate fset_test and the test will fail mysteriously.
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `jaffe@transarc.com' 
Added field Transarc Status with value `open'

[12/17/93 public]
Closed.



CR Number                     : 9087
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa,i486
S/W Ref Platform              : hpux,osf1
Component Name                : rpc
Subcomponent Name             : idl
Short Description             : faultstat test core dumps
Reported Date                 : 10/12/93
Found in Baseline             : 1.0.3
Found Date                    : 10/12/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : test/rpc/idl/faultstat/manager.c,
					     client_aux.c
Sensitivity                   : public

[10/12/93 public]

While running the idl tests (using run_tests script), 
faultstat test core dumps.

From Log file:

Running faultstat test
run_tests: 9619 Floating exception - core dumped
run_tests: 9624 Killed

[10/12/93 public]
for 486/osf1 -
The non-portable tests (tests which use the bogus handle) are eliminated
by modfying the client_aux.c

for 486/osf1 and hp/ux-
Appropriate DIV_BY_ZERO is accessed in  manager.c

[11/12/93 public]
Code has passed functional and most of system test.
Closed.



CR Number                     : 9057
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : tests
Short Description             : some tests require the caller
key version number be 1.  Not necessary.
Reported Date                 : 10/6/93
Found in Baseline             : 1.0.3
Found Date                    : 10/6/93
Severity                      : D
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : test/security/api/moretests/acct_rename.c
Sensitivity                   : public

[10/6/93 public]
Some of the tests in moretests require the caller_key (cell_admin -dce-) 
to be 1.  This is a pain when you dce_config to configure your cell
cause it forces you to change the password.  As long as you change
it to what it already is dce_config is happy, but the
tests fail cause of the version.  I want to change
the caller_key.version_number = 0.

These files:
	acct_add_del.c
	acct_admin_repl.c
	acct_lookup.c
	acct_passwd.c
	acct_rename.c
	acct_repl_all.c
	acct_user_repl.c
	auth_policy.c
	unix_getpwnam.c

I have the changes. HP - say the word and I'll submit them.

[10/7/93 public]
I assume this is where it's setting up a passwd structure to use for obtaining
credentials.  If it's a test that's explicitly testing password changing or
something where the version number would make a difference, then please let
us see the fix first.  If it's just the passwds used to log in, go ahead and
request DRB permission to submit them.

[11/11/93 public]
Closed.



CR Number                     : 9056
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : tests
Short Description             : sec_acl test releases handle incorrectly
Reported Date                 : 10/6/93
Found in Baseline             : 1.0.3
Found Date                    : 10/6/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : sec_acl.c
Sensitivity                   : public

[10/6/93 public]
test/security/api/moretests/sec_acl.c calls sec_acl_release_handle with
the sec_acl_handle_t not a pointer.

I'll submit the fix.

[10/7/93 public]
Changed 'code' to test.  Janet has our approval to request that the DRB let
her submit the fix to this.

[11/11/93 public]
Closed.



CR Number                     : 9004
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : TEST SUITES
Short Description             : remove use of dfsatab from TSR tests
Reported Date                 : 10/5/93
Found in Baseline             : 1.0.2a
Found Date                    : 08/30/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.2a
Fixed In Baseline             : 1.0.3a
Affected File(s)              : some
Sensitivity                   : public
Transarc Status               : submit
Transarc Deltas               : 
Transarc Herder               : andi@transarc.com

[10/5/93 public]
**Description Text**
 Remove use of obsolete dfsatab file from test setup.
 Fix a core-dump problem in the tsrtest.c program.
 Add SPARC notes to TSR-README.
 cfe-Mon, 30 Aug 1993 16:10:41
**Solution Text**
 Delta: cfe-db4236-remove-dfsatab-from-tests
 Backed by dfs-103 3.28.
 cfe-Mon, 30 Aug 1993 16:13:23
**Validation Text**

[10/5/93 public]
  Moved from Transarc database and in dfs-osf-1.5
Added field Transarc Herder with value `andi@transarc.com' 
Added field Transarc Status with value `import'

[12/17/93 public]
Closed.



CR Number                     : 9000
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : EPISODE
Short Description             : Test_anode end script command broken
Reported Date                 : 10/5/93
Found in Baseline             : 1.0.2a
Found Date                    : 08/27/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.2a
Fixed In Baseline             : 1.0.3a
Affected File(s)              : some
Sensitivity                   : public
Transarc Status               : submit
Transarc Deltas               : 
Transarc Herder               : andi@transarc.com

[10/5/93 public]
**Description Text**
 The "end" command does not end processing of the input script. This
 causes a assertion failure for one my test scripts later on.
 rajesh-Fri, 27 Aug 1993 12:53:02
**Solution Text**
 rajesh-db4222-fix-end-command-in-test_anode
 rajesh-Mon, 30 Aug 1993 08:45:06

[10/5/93 public]
  Moved from Transarc database and in dfs-osf-1.5
Added field Transarc Herder with value `andi@transarc.com' 
Added field Transarc Status with value `import'

[12/17/93 public]
Closed.



CR Number                     : 8957
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : EPISODE
Short Description             : Fix ACL test shell scripts
Reported Date                 : 10/5/93
Found in Baseline             : 1.0.2a
Found Date                    : 08/09/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.2a
Fixed In Baseline             : 1.0.3a
Affected File(s)              : some
Sensitivity                   : public
Transarc Status               : submit
Transarc Deltas               : 
Transarc Herder               : andi@transarc.com

[10/5/93 public]
**Solution Text**
 rajesh-db4062-fix-acl-test-script-errors
 rajesh-Mon, 09 Aug 1993 14:00:26

[10/5/93 public]
  Moved from Transarc database and in dfs-osf-1.5
Added field Transarc Herder with value `andi@transarc.com' 
Added field Transarc Status with value `import'

[12/17/93 public]
Closed.



CR Number                     : 8929
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : EPISODE
Short Description             : Reorganize RCX test scripts
Reported Date                 : 10/4/93
Found in Baseline             : 1.0.2a
Found Date                    : 07/26/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.2a
Fixed In Baseline             : 1.0.3a
Affected File(s)              : some
Sensitivity                   : public
Transarc Status               : submit
Transarc Deltas               : 
Transarc Herder               : andi@transarc.com

[10/4/93 public]
**Solution Text**
 rajesh-db3959-reorganize-rcx-test-input-scripts
 rajesh-Mon, 30 Aug 1993 08:56:41

[10/4/93 public]
  Moved from Transarc database and in dfs-osf-1.5
Added field Transarc Herder with value `andi@transarc.com' 
Added field Transarc Status with value `import'

[12/17/93 public]
Closed.



CR Number                     : 8891
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dfs
Subcomponent Name             : systest
Short Description             : read_write_all porting changes
Reported Date                 : 10/1/93
Found in Baseline             : 1.0.3
Found Date                    : 10/1/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : README.RWALL, main, data, do.ksh
Sensitivity                   : public

[10/1/93 public]

main (dfs.read_write_all.main)
-	need to remove UNIX account setup routines - applied only to
	RIOS and would be cumbersome to maintain without adding to
	ease of use or coverage.
-	need to add verification routines for:
		- available space on aggregates
		- matching registry and local uids on all machines
		- existence and access of logging directories
-	need to add "wait" logic to verify success or failure of
	all users before exitting
-	RSH var for remsh vs. rsh
-	replace "ROOT" references with "BASE" where appropriate
	to avoid confusion with unix user root and root filesystem
-	ping_command var for syntax variation
-	replace "home directory" references with "home fileset" references
	since they can now differ
-	correct fts setquota syntax
-	need to check for POPULATE_USER_ENV var
-	need to remove unnecessary acl_edits
-	standardize on print (somethings are echo some not)
-	fix and enable delete routines

data (dfs.read.write.data)
-	minor reordering, recommenting, renaming and removing to
	support changes in main

README.RWALL
-	give 2 invoke syntax options for whether mount points are in LFS or native
-	move default certificate lifetime comment closer to invoke syntax
-	move root setup to add_root_as_admin script
-	remove warnings about not cleaning up
	
do.ksh
-	use KSH SECONDS rather than complex TIMER
-	output PASSED or FAILED and exit with 0 or 1
-	add -r to rm to handle subdirectories	
-	use $username variable

[10/4/93 public]

Tested, submitted and built - closing.



CR Number                     : 8884
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : systest
Short Description             : README and README.RWALL not being installed
Reported Date                 : 10/1/93
Found in Baseline             : 1.0.3
Found Date                    : 10/1/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : test/systest/file/Makefile
Sensitivity                   : public

[10/1/93 public]

README and README.RWALL not being installed - need to update Makefile.

[10/4/93 public]

Makefile updated to install README, README.RWALL and add_root_as_admin.ksh.

[11/11/93 public]
Closed - makefile submission and subsequent builds have succeeded.



CR Number                     : 8814
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : EPISODE
Short Description             : ACL test id selection mechanism needs generalization
Reported Date                 : 9/28/93
Found in Baseline             : 1.0.2a
Found Date                    : 06/28/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.2a
Fixed In Baseline             : 1.0.3a
Affected File(s)              : some
Sensitivity                   : public
Transarc Status               : submit
Transarc Deltas               : 
Transarc Herder               : andi@transarc.com

[9/28/93 public]
**Description Text**
 rajesh-Thu, 22 Jul 1993 13:54:28
**Solution Text**
 rajesh-Thu, 22 Jul 1993 13:54:31
**Validation Text**

[9/28/93 public]
  Moved from Transarc database and in dfs-osf-1.5
Added field Transarc Herder with value `andi@transarc.com' 
Added field Transarc Status with value `IMPORT'

[12/17/93 public]
Closed.



CR Number                     : 8694
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa,i486,rs6000
S/W Ref Platform              : hpux,osf1,aix
Component Name                : cds
Subcomponent Name             : src/directory/cds/control
Short Description             : dce_config failed to set ACLs
Reported Date                 : 9/27/93
Found in Baseline             : 1.0.3
Found Date                    : 9/27/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : config/dce_config
Sensitivity                   : public

[9/27/93 public]

Output from dce_config:

	S:****** Setting ACLs for all new namespace entries...
	ERROR: acl object not found (dce / sec)
	Unable to bind to object /.:/sec-v1
	ERROR:   Error while setting ACLs on new namespace entries.
	  Message from acl_edit:
	  ERROR: acl object not found (dce / sec)
	Unable to bind to object /.:/lan-profile
	ERROR: acl object not found (dce / sec)
	Unable to bind to object /.:/sec

[10/4/93 public]
I fixed this last week and somehow forgot to close ot report. 
The cdscp program isn't as forgiving as it used to be on attribute
names. Changed all instances of class-> CDS_Class and 
classversion-> CDS_ClassVersion.



CR Number                     : 8690
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 8524
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : 
Short Description             : Functional test files
installed in wrong place
Reported Date                 : 9/24/93
Found in Baseline             : 1.0.3
Found Date                    : 9/24/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : test/file/util/Makefile
Sensitivity                   : public

[9/24/93 public]

The following files are installed in "install/<mach>/dcetest/dce1.0"
instead of "install/<mach>/dcetest/dce1.0/test/...".  This is most
likely a problem with IDIR in the Makefiles:

file/util/fs_FunctionsScript
file/util/fs_GenerateFile
file/util/fs_SetSysVar
file/util/dce_AddUserPrincipal
file/util/gen_FunctionsScript
file/util/CreateLocalAccount
file/util/DeleteLocalAccount
file/util/icldump

[9/28/93 public]
Corrected file/util/Makefile submitted - status changed to fix.

[12/17/93 public]
Closed.



CR Number                     : 8689
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 8524
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cds
Subcomponent Name             : examples
Short Description             : Functional test files
installed in wrong place
Reported Date                 : 9/24/93
Found in Baseline             : 1.0.3
Found Date                    : 9/24/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : test/directory/cds/dcesx/Makefile
Sensitivity                   : public

[9/24/93 public]
The following files are installed in
install/<target_machine>/dcetest/dce1.0 instead of
install/<target_machine>/dcetest/dce1.0/test/...  This is probably a
problem with the value of IDIR in the makefile

examples/dcesx
examples/dcesx/dcesx0.idl
examples/dcesx/dcesx1.idl
examples/dcesx/dcesx2.idl
examples/dcesx/dcesx3.idl
examples/dcesx/dcesx4.idl
examples/dcesx/dcesx5.idl
examples/dcesx/dcesx6.idl
examples/dcesx/dcesx7.idl
examples/dcesx/dcesx8.idl
examples/dcesx/dcesx9.idl
examples/dcesx/dcesx0.acf
examples/dcesx/dcesx1.acf
examples/dcesx/dcesx2.acf
examples/dcesx/dcesx3.acf
examples/dcesx/dcesx4.acf
examples/dcesx/dcesx5.acf
examples/dcesx/dcesx6.acf
examples/dcesx/dcesx7.acf
examples/dcesx/dcesx8.acf
examples/dcesx/dcesx9.acf
examples/dcesx/dcesx.c
examples/dcesx/dcesx

[9/24/93 public]
Fixed by removing the IDIR in the Makefile so that it can be installed
in the corresponding position of install tree. Closed



CR Number                     : 8657
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa,i486,rs6000
S/W Ref Platform              : hpux,osf1,aix
Component Name                : systest
Subcomponent Name             : test/systest/tools
Short Description             : run_loops.ksh, run_summary.ksh -
				             snapping of files for nightly
					     failing
Reported Date                 : 9/22/93
Found in Baseline             : 1.0.3
Found Date                    : 9/22/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : run_loops.ksh, run_summary.ksh
Sensitivity                   : public

[9/22/93 public]

[ /test/systest/tools at 21:50 (PM) Tuesday ]
makepath tools/. && cd tools &&  exec make MAKEFILE_PASS=BASIC
build_all
make: don't know how to make run_loops.ksh (continuing)
make: don't know how to make run_summary.ksh (continuing)

OT 8599 was closed by Jeff Barry by moving run_loops.ksh from the
"security" to the "tools" directory of "test/systest" but the tools
Makefile now complains.

[9/24/93 public]

The build failure occurred only on the Release Engineering side: automatic
snapping of the files run_summary.ksh and run_logs.ksh (ie, transfer from
the dynamic to the static source trees, the latter being what the nightly
builds build) failed.  Release Engineering is investigating & trying to fix.

			- rrizzo.

The failure of the snapping script to transfer files to the static source tree
was caused by over-protected RCS files "run_loos.ksh" and "run_summary.ksh"
with modes 400.  The modes were changed to 444 and the snapping script was run
again to confirm the fix.   - rrizzo, 9/24/93



CR Number                     : 8648
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dfs
Subcomponent Name             : test/systest/dfs.lock
Short Description             : The -p <passes> option really
does <passes + 1> passes.
Reported Date                 : 9/21/93
Found in Baseline             : 1.0.3
Found Date                    : 9/21/93
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3a
Fixed In Baseline             : 1.0.3a
Affected File(s)              : dfs.lock
Sensitivity                   : public

[9/21/93 public]
I specified "-p 1" and the test completed iteration 0 and continued into
iteration 1.  See here:
$ ./dfs.lock_cl -d -p 1
:
   - Running for 1 passes.
:
COMPLETED dfs.lock ITERATION 0 AT Tue Sep 21 17:23:12 EDT 1993


BEGINNING dfs.lock ITERATION 1 AT Tue Sep 21 17:23:12 EDT 1993
----
The offending code is at the end of the main loop where it compares
$ITERATION to $PASSES.  It should instead compare $PASSES to $ITERATION +
1.

[12/17/93 public]
Might as well get it in this release.

[12/28/93 public]
Script now increments ITERATION before comparison.

[01/17/94 public]
Submission fixed - closing.



CR Number                     : 8647
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : systest
Subcomponent Name             : dcerpbnk fails
Short Description             : uuids get corrupted causing dcerpbnk to fail
Reported Date                 : 9/21/93
Found in Baseline             : 1.0.3
Found Date                    : 9/21/93
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : ./systest/rpc/bnk_util.c
Sensitivity                   : public

[09/21/93 public]

The system test dcerpbnk fails only on the OSF/1 because of a problem with
uuids getting corrupted.  The same test runs fine on AIX and HP-UX.

[09/21/93 public]

Take a look at the get_handle_obj() routine in bnk_util.c.
It's returning the address of a uuid_t from the stack.

Try this instead.

uuid_t *get_handle_obj(handle_t rh)
{
	uuid_t *handle_obj = malloc(sizeof(uuid_t));
	error_status_t st;

	rpc_binding_inq_object(rh, handle_obj, &st);
	sprintf(buf, "Cannot inquire handle's object\n");
	check_status(st, rpc_s_ok, NOT_EQUAL, buf, TRUE, RPC);
	return(handle_obj);
}

[09/21/93 public]

That was it, the test now works fine on all platforms.

[09/28/93 public]
Closed.



CR Number                     : 8645
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dfs
Subcomponent Name             : test/systest/file
Short Description             : dfs.lock specifies "-P" option
in usage info - should be "-p"
Reported Date                 : 9/21/93
Found in Baseline             : 1.0.3
Found Date                    : 9/21/93
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3a
Fixed In Baseline             : 1.0.3a
Affected File(s)              : test/systest/file/dfs.lock
Sensitivity                   : public

[9/21/93 public]
Just a simple typo, the one liner says it all.

[12/17/93 public]
Might as well - along with other dfs.lock bugs for this release.

[12/28/93 public]
Typo fixed.

[01/17/94 public]
Submission fixed - closing.



CR Number                     : 8623
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dfs
Subcomponent Name             : test/systest/file/dfs.glue
Short Description             : Inadequate configuration 
					     documentation
Reported Date                 : 9/17/93
Found in Baseline             : 1.0.3
Found Date                    : 9/17/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : test/systest/file/README, dfs.glue
Sensitivity                   : public

[9/17/93 public]
Here is a list of the undocumented configuration requirements for
dfs.glue:
- UNIX and DCE login uid and gid must be identical.
- required executables and their pathnames relative to the test
  directory are:
  - systest/file/filewnr
  - systest/file/dirread
  - systest/file/dirwrite.sh
  - file/cache_mgr/spoke
  - file/cache_mgr/hub
- UFS_PATH and/or TROOT must be chosen to be valid from all hosts.
  Either an NFS pathname, e.g. "/net/hostname/foo", or a duplicate of
  the test tree must be used.

[9/30/93 public]

Notes on the following were added to the README:
- UNIX and DCE login uid and gid must be identical.
- TROOT must be chosen to be valid from all hosts.

List of:
- required executables and their pathnames relative to the test
were added to dfs.glue header comment.

[10/1/93 public]

Verified made it through nightly build - closing.



CR Number                     : 8605
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : i486
S/W Ref Platform              : osf1
Component Name                : rpc
Subcomponent Name             : test/rpc/runtime/knctest,uncstest,
					     kv2test
Short Description             : secdefines.h & user.h
Reported Date                 : 9/14/93
Found in Baseline             : 1.0.3
Found Date                    : 9/14/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : various - see detailed description
Sensitivity                   : public

[9/14/93 public]

[ /test/rpc/runtime/kncstest at 02:05 (AM) Tuesday ]

In file included from 
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/param.h:379,
from /project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/user.h:286, 
from /project/dce/build/dce1.0.3-snap/src/test/rpc/runtime/ncstest/client.c:64:
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/secdefines.h:40:\
 sec_base.h: No such file or directory
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/secdefines.h:41:\
 sec_priv.h: No such file or directory
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/secdefines.h:42:\
 sec_mac_ob.h: No such file or directory
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/secdefines.h:43:\
 sec_acl_posix.h: No such file or directory
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/secdefines.h:44:\
 sec_acl_sware.h: No such file or directory
In file included from
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/user.h:287,
from /project/dce/build/dce1.0.3-snap/src/test/rpc/runtime/ncstest/client.c:64:
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/time.h:65:\
 sys/unix_defs.h: No such file or directory
In file included from
/project/dce/build/dce1.0.3-snap/src/test/rpc/runtime/ncstest/client.c:64:
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/user.h:291:\
 sys/namei.h: No such file or directory
In file included from
/project/dce/build/dce1.0.3-snap/src/test/rpc/runtime/ncstest/client.c:64:
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/user.h:294:\
 sys/filedesc.h: No such file or directory
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/user.h:295:\
 sys/unix_defs.h: No such file or directory
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/user.h:297:\
 kern/event.h: No such file or directory
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/user.h:298:\
 kern/thread.h: No such file or directory
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/user.h:299:\
 machine/user.h: No such file or directory
*** Error code 1 (continuing)

[ /test/rpc/runtime/uncstest at 02:06 (AM) Tuesday ]

In file included from
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/ioctl.h:284,
from /project/dce/build/dce1.0.3-snap/src/test/rpc/runtime/v2test_lib/v2test.h:94, from\
/project/dce/build/dce1.0.3-snap/src/test/rpc/runtime/v2test_lib/v2server.c:54:
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/secdefines.h:40:\
 sec_base.h: No such file or directory
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/secdefines.h:41:\
 sec_priv.h: No such file or directory
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/secdefines.h:42:\
 sec_mac_ob.h: No such file or directory
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/secdefines.h:43:\
 sec_acl_posix.h: No such file or directory
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/secdefines.h:44:\
 sec_acl_sware.h: No such file or directory
*** Error code 1 (continuing)

[ /test/rpc/runtime/kv2test at 02:06 (AM) Tuesday ]

In file included from
/project/dce/build/dce1.0.3-snap/src/test/rpc/runtime/v2test_lib/v2test.h:93,\
from /project/dce/build/dce1.0.3-snap/src/test/rpc/runtime/v2test_lib/v2server.c:54:\
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/time.h:65:\
 sys/unix_defs.h: No such file or directory
In file included from
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/ioctl.h:284,\
from /project/dce/build/dce1.0.3-snap/src/test/rpc/runtime/v2test_lib/v2test.h:94, from\
/project/dce/build/dce1.0.3-snap/src/test/rpc/runtime/v2test_lib/v2client.c:67:
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/secdefines.h:40:\
 sec_base.h: No such file or directory
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/secdefines.h:41:\
 sec_priv.h: No such file or directory
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/secdefines.h:42:\
 sec_mac_ob.h: No such file or directory
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/secdefines.h:43:\
 sec_acl_posix.h: No such file or directory
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/secdefines.h:44:\
 sec_acl_sware.h: No such file or directory
*** Error code 1 (continuing)

In file included from
/project/dce/build/dce1.0.3-snap/src/test/rpc/runtime/v2test_lib/v2test.h:93,\
from /project/dce/build/dce1.0.3-snap/src/test/rpc/runtime/v2test_lib/v2client.c:67:
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/time.h:65:\
 sys/unix_defs.h: No such file or directory
In file included from
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/ioctl.h:284,\
from /project/dce/build/dce1.0.3-snap/src/test/rpc/runtime/v2test_lib/v2test.h:94, from\
/project/dce/build/dce1.0.3-snap/src/test/rpc/runtime/v2test_lib/crc.c:45:\
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/secdefines.h:40:\
 sec_base.h: No such file or directory
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/secdefines.h:41:\
 sec_priv.h: No such file or directory
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/secdefines.h:42:\
 sec_mac_ob.h: No such file or directory
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/secdefines.h:43:\
 sec_acl_posix.h: No such file or directory
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/secdefines.h:44:\
 sec_acl_sware.h: No such file or directory
*** Error code 1 (continuing)
`build_all' not remade because of errors

In file included from
/project/dce/build/dce1.0.3-snap/src/test/rpc/runtime/v2test_lib/v2test.h:93,\
from /project/dce/build/dce1.0.3-snap/src/test/rpc/runtime/v2test_lib/crc.c:45:
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/time.h:65:\
 sys/unix_defs.h: No such file or directory
In file included from
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/ioctl.h:284,\
from /project/dce/build/dce1.0.3-snap/src/test/rpc/runtime/v2test_lib/v2test.h:94, from\
/project/dce/build/dce1.0.3-snap/src/test/rpc/runtime/v2test_lib/crc.c:45:\
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/secdefines.h:40:\
 sec_base.h: No such file or directory
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/secdefines.h:41:\
 sec_priv.h: No such file or directory
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/secdefines.h:42:\
 sec_mac_ob.h: No such file or directory
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/secdefines.h:43:\
 sec_acl_posix.h: No such file or directory
/project/osc/build/osc_sbox1.2/export/at386/usr/include/sys/secdefines.h:44:\
 sec_acl_sware.h: No such file or directory
*** Error code 1 (continuing)

[09/15/93 public]
This was caused by the osc_sbox1.2 having 1.1 header files in it
when it should have 1.2 header files in it.

Cris D. and I are rebuilding the export area for osc_sbox1.2.

[09/22/93 public]
The export area should now be correct for DFS.

[09/27/93 public]
DFS no longer turned on in nightly build, but verified by hand.
Closed.



CR Number                     : 8603
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : rpc
Subcomponent Name             : test/systest/rpc.sec.2,rpc.cds.3
Short Description             : assorted compile bugs involving
					     time variables
Reported Date                 : 9/14/93
Found in Baseline             : 1.0.3
Found Date                    : 9/14/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : err_track.h, chk_stat.c,
					     maintain_id.c, rep_timer.c,
					     rpc.cds.3_set_cal_uuid.c,
					     rpc.cds.3_smain.c
Sensitivity                   : public

[9/14/93 public]

[ /test/systest/rpc/rpc.sec.2 at 21:50 (PM) Monday ]

makepath rpc.sec.2/. && cd rpc.sec.2 &&  exec make MAKEFILE_PASS=BASIC
build_all
rpc.sec.2: created directory
c89 -c    -D_SHARED_LIBRARIES   -DIDL_PROTOTYPES -DRPCSEC2_SRV_REPORTING
-D__hppa -Dhp9000s800 -Dhp9000s700 -D__hp9000s800 -D__hp90\
00s700 -DHPUX -D__hpux -Dunix +DA1.0 -D_HPUX_SOURCE    -I.
-I/u3/devobj/sb/nb_ux/src/test/systest/rpc/rpc.sec.2 -I/project/dce/buil\
d/dce1.0.3-snap/src/test/systest/rpc/rpc.sec.2  -I../rpc.cds.3
-I/u3/devobj/sb/nb_ux/src/test/systest/rpc/rpc.cds.3 -I/project/dce/\
build/dce1.0.3-snap/src/test/systest/rpc/rpc.cds.3
-I/u3/devobj/sb/nb_ux/export/hp800/usr/include
-I/project/dce/build/dce1.0.3-sna\
p/export/hp800/usr/include
/project/dce/build/dce1.0.3-snap/src/test/systest/rpc/rpc.cds.3/chk_stat.c
cc:
"/project/dce/build/dce1.0.3-snap/src/test/systest/rpc/rpc.cds.3/err_track.h",
line 67: error 1000: Unexpected symbol: "time_t"\
.
cc:
"/project/dce/build/dce1.0.3-snap/src/test/systest/rpc/rpc.cds.3/chk_stat.c",
line 197: error 1000: Unexpected symbol: ")".
cc:
"/project/dce/build/dce1.0.3-snap/src/test/systest/rpc/rpc.cds.3/chk_stat.c",
line 214: error 1000: Unexpected symbol: ")".
cc:
"/project/dce/build/dce1.0.3-snap/src/test/systest/rpc/rpc.cds.3/chk_stat.c",
line 197: error 1588: "time_t" undefined.
cc:
"/project/dce/build/dce1.0.3-snap/src/test/systest/rpc/rpc.cds.3/chk_stat.c",
line 214: error 1533: Illegal function call.
*** Error code 1

c89 -c    -D_SHARED_LIBRARIES   -DIDL_PROTOTYPES -DRPCSEC2_SRV_REPORTING
-D__hppa -Dhp9000s800 -Dhp9000s700 -D__hp9000s800 -D__hp90\
00s700 -DHPUX -D__hpux -Dunix +DA1.0 -D_HPUX_SOURCE    -I.
-I/u3/devobj/sb/nb_ux/src/test/systest/rpc/rpc.sec.2 -I/project/dce/buil\
d/dce1.0.3-snap/src/test/systest/rpc/rpc.sec.2  -I../rpc.cds.3
-I/u3/devobj/sb/nb_ux/src/test/systest/rpc/rpc.cds.3 -I/project/dce/\
build/dce1.0.3-snap/src/test/systest/rpc/rpc.cds.3
-I/u3/devobj/sb/nb_ux/export/hp800/usr/include
-I/project/dce/build/dce1.0.3-sna\
p/export/hp800/usr/include
/project/dce/build/dce1.0.3-snap/src/test/systest/rpc/rpc.cds.3/maintain_id.c
e1.0.3-snap/src/test/systest/rpc/rpc.cds.3/err_track.h", line 67: error
1000: Unexpected symbol: "time_t"\
.cc:
"/project/dce/build/dce1.0.3-snap/src/test/systest/rpc/rpc.cds.3/chk_stat.c",
line 197: error 1000: Unexpected symbol: ")".
cc:
"/project/dce/build/dce1.0.3-snap/src/test/systest/rpc/rpc.cds.3/chk_stat.c",
line 214: error 1000: Unexpected symbol: ")".
cc:
"/project/dce/build/dce1.0.3-snap/src/test/systest/rpc/rpc.cds.3/chk_stat.c",
line 197: error 1588: "time_t" undefined.
cc:
"/project/dce/build/dce1.0.3-snap/src/test/systest/rpc/rpc.cds.3/chk_stat.c",
line 214: error 1533: Illegal function call.
*** Error code 1

c89 -c    -D_SHARED_LIBRARIES   -DIDL_PROTOTYPES -DRPCCDS3_SRV_REPORTING
-DRPCCDS3_AUTO_REFRESH -DRPCCDS3_DO_LOGIN -D__hppa -Dhp900\
0s800 -Dhp9000s700 -D__hp9000s800 -D__hp9000s700 -DHPUX -D__hpux -Dunix

[9/15/93 public]

Submitted the ported rpc.cds.3 file from HP.



CR Number                     : 8600
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa, i486
S/W Ref Platform              : hpux, osf1
Component Name                : rpc
Subcomponent Name             : test/systest/rpc/rpc.sec.2, rpc.cds.3
Short Description             : no files rpc.*.?_srv, rpc.*.?_cli
Reported Date                 : 9/14/93
Found in Baseline             : 1.0.3
Found Date                    : 9/14/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : Makefile
Sensitivity                   : public

[9/14/93 public]

[ /test/systest/rpc/rpc.sec.2 at 22:06 (PM) Monday ]

makepath rpc.sec.2/. && cd rpc.sec.2 &&  exec make MAKEFILE_PASS=BASIC
install_all
make: don't know how to make rpc.sec.2_srv (continuing)
make: don't know how to make rpc.sec.2_cli (continuing)

[ /test/systest/rpc/rpc.cds.3 at 22:06 (PM) Monday ]

makepath rpc.cds.3/. && cd rpc.cds.3 &&  exec make MAKEFILE_PASS=BASIC
install_all
make: don't know how to make rpc.cds.3_srv (continuing)
make: don't know how to make rpc.cds.3_cli (continuing)

[9/15/93 public]

Submitted the ported rpc.cds.3 files from HP.



CR Number                     : 8599
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa, i486, rs6000
S/W Ref Platform              : aix, hpux, osf1
Component Name                : sec
Subcomponent Name             : test/systest/security/sec.rgy.7
Short Description             : script runs_loops.ksh is missing
Reported Date                 : 9/14/93
Found in Baseline             : 1.0.3
Found Date                    : 9/14/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : Makefile, run.sec
Sensitivity                   : public

[9/14/93 public]

[ /test/systest/security/sec.rgy.7 at 22:07 (PM) Monday ]

release   -o bin -g bin -m 755 -tostage
/u3/devobj/sb/nb_ux/src/../install/hp800/dcetest/dce1.0 -fromfile \
/project/dce/build/dce1.0.3-snap/src/test/systest/security/tetexec.cfg \
/test/tet/system/security/tetexec.cfg
/test/tet/system/security/tetexec.cfg: copying from \
/project/dce/build/dce1.0.3-snap/src/test/systest/security/tetexec.cfg
/test/tet/system/security/tetexec.cfg: owner bin, group bin, mode 0755
/test/tet/system/security/tetexec.cfg: installing as \
/u3/devobj/sb/nb_ux/src/../install/hp800/dcetest/dce1.0/test/tet/system/securi\
ty/tetexec.cfg
make: don't know how to make run_loops.ksh (continuing)

[9/17/93 public]
RUN_LOOPS.KSH was in the wrong directory.  It is now in the tools directory
where it belongs.  The fix and other changes will show up in the 17-Sep-93
nightly build.  Jeff Barry.



CR Number                     : 8541
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : rpc
Subcomponent Name             : 
Short Description             : wrong TSH function was used to test success
Reported Date                 : 8/31/93
Found in Baseline             : 1.0.3
Found Date                    : 8/31/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b18
Affected File(s)              : test/rpc/rtandidl/moretests/set_inq_auth_info.c,moretests/control/set_auth_info.tsh
Sensitivity                   : public

[8/31/93 public]

Full Description:

customer attempted to run the tests in set_auth_info.tsh on a version of
the rpc runtime (NOENCRYPTION) which doesn't allow allow packet privacy
as one of the supported protection levels. To their surprise all of the
tests passed. They looked into it, and found TestFunction() in
set_inq_auth_info.c to be using the wrong TSH function to test success
of some RPC API operations. The result being that TestFunction would exit
the test case with an rpc_s_ok status without having performed the
intended test. Furthermore, each test would be reported to have been
completed successfully.

More detail:

    * TSHMessage doesn't return a value, so when it's return
    * value is used as an expression in an if statement, the result
    * is likely to be (non zero) and thus true, idependent of the
    * real status of rpc_string_binding_compose(). This enables
    * the cleanup branch, which in most cases will cause the test
    * to return rpc_s_ok which interpretted by the test harness to
    * mean the test completed successfully even though the real
    * function under test was never run.
    *
    * Changing this TSHMessage to TSHStatus, should fix this problem
    *

Customer repaired this problem, along with some others (see details
below), and reran set_auth_info.tsh (on an RPC runtime which DID
allow for packet privacy) and got failures on the following
test cases:

	62, 63, 67, 68, 69, 99, 100, 111, 112, 123, 124,
	135, 136, 147, 148, 150, 151, 155, 156, 157, 159,
	160, 162, 163, 171, 172

The customer investigated the cause of these failures and concluded
that, in all cases, the failure could be attributed to an error in
set_auth_info.tsh expected status value for the failing test cases.

A synopsis of the test case particulars, the expected status
return, and the actual status return are listed at the end of
this mail. The corresponding corections should be made
to set_auth_info.tsh.

Other problems encountered/repaired:

	1) made change so that test arguments are clearly displayed

        2) fixed a null server principal name bug. If the test case
           called for the use of a NULL server principal name, an internal
           flag would be set in set_inq_auth_info, but never used.

           this was fixed by declaring a local variable into which a
           copy of the the server name passed as one of the test
           arguments was transferred.

           sec_rgy_name_t       tmp_server_name;

           This variable needs to contain a \'0' terminated character
           string even in the NULL server principal name case, since
           the RPC and security API's don't handle a null pointer very
           well.

           Use of a NULL pointer resulted in connection and communication
           failures. In the case of the null server name test cases, a
           0 length string is assigned to tmp_server_name.

Proposed Solution:

Changes to make to set_inq_auth_info.c

***
/project/dce/build/dce1.0.3/src/test/rpc/rtandidl/moretests/set_inq_auth_info.c
Wed Aug 25 09:33:30 1993
--- set_inq_auth_info.c	Tue Aug 31 11:10:21 1993
***************
*** 176,183 ****
        authn_svc = atol(argv[9]);
        authz_svc = atol(argv[10]);
  
!       TSHMessage(ctx, MOINFO, "7=%d 8=%d 9=%d\n",
!               atol(argv[7]), atol(argv[8]), atol(argv[9]));
  
        /* Adjust input values as necessary. */
  
--- 176,183 ----
        authn_svc = atol(argv[9]);
        authz_svc = atol(argv[10]);
  
!       TSHMessage(ctx, MOINFO, "7=%s 8=%d 9=%d 10=%d\n",
!               argv[7], atol(argv[8]), atol(argv[9]), atol(argv[10]));
  
        /* Adjust input values as necessary. */
  
***************
*** 317,323 ****
     	"rpc_binding_from_string_binding status: %d\n", tstatus);
  
     if (TSHStatus (ctx, SETUP,
!              "rpc_binding_from_string_binding failed", tstatus, rpc_s_ok)) {
        clean_up (ctx, client_name, server_name);
        return tstatus;
     }
--- 317,324 ----
     	"rpc_binding_from_string_binding status: %d\n", tstatus);
  
     if (TSHStatus (ctx, SETUP,
!              "rpc_binding_compose failed", tstatus, rpc_s_ok))
!    {
        clean_up (ctx, client_name, server_name);
        return tstatus;
     }
***************
*** 333,338 ****
--- 334,349 ----

     if (subcase != INQ_AUTH_INFO_WO_SETUP) {
  
+            sec_rgy_name_t	tmp_server_name;
+
+ 	   tmp_server_name[0] = '\0';
+ 	   if (servname_flag)
+ 		strcpy(tmp_server_name, server_name);
+ 
+ 	   TSHMessage(ctx,MOINFO,
+ 	      "tmp_server_name: %s, server_name: %s\n",
+ 		      tmp_server_name, server_name);
+ 
        /*
         * If this is the rpc_binding_set_auth_info test and the
         * rpc_s_invalid_binding pathological case, make an invalid handle.
Note
***************
*** 343,349 ****
        if ((subcase == SET_AUTH_INFO) && (estatus ==
rpc_s_invalid_binding))
     	binding = (rpc_binding_handle_t)NULL;
  
!       rpc_binding_set_auth_info (binding, server_name, authn_level,
        	authn_svc, auth_id, authz_svc, &tstatus);
  
        TSHMessage(ctx,MOTRACE,"rpc_binding_set_auth_info status: %d\n",
--- 354,360 ----
        if ((subcase == SET_AUTH_INFO) && (estatus == rpc_s_invalid_binding))
     	binding = (rpc_binding_handle_t)NULL;
  
!       rpc_binding_set_auth_info (binding, tmp_server_name, authn_level,
        	authn_svc, auth_id, authz_svc, &tstatus);
  
        TSHMessage(ctx,MOTRACE,"rpc_binding_set_auth_info status: %d\n",
***************
*** 359,369 ****
        	if (estatus == tstatus)
        		tstatus = rpc_s_ok;
        	else
!       		TSHMessage (ctx, MOFAILURE, "rpc_binding_set_auth_info failed\n");
        }
        else {
        	if (tstatus != rpc_s_ok)
!       		TSHMessage (ctx, SETUP, "rpc_binding_set_auth_info failed\n");
        }
  
     } /* End if (subcase != INQ_AUTH_INFO_WO_SETUP) */
--- 370,382 ----
        	if (estatus == tstatus)
        		tstatus = rpc_s_ok;
        	else
!       		TSHStatus (ctx, MOFAILURE, "rpc_binding_set_auth_info failed\n",
! 			estatus, tstatus);
        }
        else {
        	if (tstatus != rpc_s_ok)
!       		TSHStatus (ctx, SETUP, "rpc_binding_set_auth_info failed\n",
! 			estatus, tstatus);
        }
  
     } /* End if (subcase != INQ_AUTH_INFO_WO_SETUP) */


---------------------------

Corrections to be made to set_auth_info.tsh:

Failing Test Case Synopsis and Status Return Values. expect results are
those in set_auth_info.tsh

	62: protect level: packet privacy, authn svc: private,
	    authz svc: name, non-null server principal name

	test case expected result: rpc_s_authn_authz_mismatch
	test case actual result: rpc_s_ok

	-----------------------------------------------------
	63: protect level: packet privacy, authn svc: private,
	    authz svc: dce, non-null server principal name

	test case expected result: rpc_s_authn_authz_mismatch
	test case actual result: rpc_s_ok
	-----------------------------------------------------
	67: protect level: packet privacy, authn svc: none,
	    authz svc: none, non-null server principal none

	test case expected result: rpc_s_authn_authz_mismatch
	test case actual result: rpc_s_ok
	-----------------------------------------------------
	68: protect level: packet privacy, authn svc: none,
	    authz svc: name, non-null server principal name

	test case expected result: rpc_s_authn_authz_mismatch
	test case actual result: rpc_s_ok
	-----------------------------------------------------
	69: protect level: packet privacy, authn svc: none,
	    authz svc: dce, non-null server principal name

	test case expected result: rpc_s_authn_authz_mismatch
	test case actual result: rpc_s_ok
	-----------------------------------------------------
	99: protect level: default (integrity), authn svc: default (private),
	    authz svc: name, null server principal name

	test case expected result: rpc_s_ok
	test case actual result: sec_s_null_param_illegal
	-----------------------------------------------------
	100: protect level: default (integrity), authn svc: default (private),
	    authz svc: dce, null server principal name

	test case expected result: rpc_s_ok
	test case actual result: sec_s_null_param_illegal
	-----------------------------------------------------
	111: protect level: connect, authn svc: default (private),
	    authz svc: name, null server principal name

	test case expected result: rpc_s_ok
	test case actual result: sec_s_null_param_illegal
	-----------------------------------------------------
	112: protect level: connect, authn svc: default (private),
	    authz svc: dce, null server principal name

	test case expected result: rpc_s_ok
	test case actual result: sec_s_null_param_illegal
	-----------------------------------------------------
	123: protect level: call, authn svc: default (private),
	    authz svc: name, null server principal name

	test case expected result: rpc_s_ok
	test case actual result: sec_s_null_param_illegal
	-----------------------------------------------------
	124: protect level: call, authn svc: default (private),
	    authz svc: dce, null server principal name

	test case expected result: rpc_s_ok
	test case actual result: sec_s_null_param_illegal
	-----------------------------------------------------
	135: protect level: packet, authn svc: default (private),
	    authz svc: name, null server principal name

	test case expected result: rpc_s_ok
	test case actual result: sec_s_null_param_illegal
	-----------------------------------------------------
	136: protect level: packet, authn svc: default (private),
	    authz svc: dce, null server principal name

	test case expected result: rpc_s_ok
	test case actual result: sec_s_null_param_illegal
	-----------------------------------------------------
	147: protect level: integrity, authn svc: default (private),
	    authz svc: name, null server principal name

	test case expected result: rpc_s_ok
	test case actual result: sec_s_null_param_illegal
	-----------------------------------------------------
	148: protect level: integrity, authn svc: default (private),
	    authz svc: dce, null server principal name

	test case expected result: rpc_s_ok
	test case actual result: sec_s_null_param_illegal
	-----------------------------------------------------
	150: protect level: privacy, authn svc: private,
	    authz svc: name, null server principal name

	test case expected result: rpc_s_ok
	test case actual result: sec_s_null_param_illegal
	-----------------------------------------------------
	151: protect level: privacy, authn svc: private,
	    authz svc: dce, null server principal name

	test case expected result: rpc_s_ok
	test case actual result: sec_s_null_param_illegal
	-----------------------------------------------------
	155: protect level: privacy, authn svc: none,
	    authz svc: none, null server principal name

	test case expected result: rpc_s_unsupported_protect_level
	test case actual result: rpc_s_ok
	-----------------------------------------------------
	156: protect level: privacy, authn svc: none,
	    authz svc: name, null server principal name

	test case expected result: rpc_s_unsupported_protect_level
	test case actual result: rpc_s_ok
	-----------------------------------------------------
	157: protect level: privacy, authn svc: none,
	    authz svc: dce, null server principal name

	test case expected result: rpc_s_unsupported_protect_level
	test case actual result: rpc_s_ok
	-----------------------------------------------------
	159: protect level: privacy, authn svc: default (private),
	    authz svc: name, null server principal name

	test case expected result: rpc_s_ok
	test case actual result: sec_s_null_param_illegal
	-----------------------------------------------------
	160: protect level: privacy, authn svc: default (private),
	    authz svc: dce, null server principal name

	test case expected result: rpc_s_ok
	test case actual result: sec_s_null_param_illegal
	-----------------------------------------------------
	162: protect level: none, authn svc: private,
	    authz svc: name, null server principal name

	test case expected result: rpc_s_ok
	test case actual result: sec_s_null_param_illegal
	-----------------------------------------------------
	163: protect level: none, authn svc: private,
	    authz svc: dce, null server principal name

	test case expected result: rpc_s_ok
	test case actual result: sec_s_null_param_illegal
	-----------------------------------------------------
	171: protect level: none, authn svc: default (private),
	    authz svc: name, null server principal name

	test case expected result: rpc_s_ok
	test case actual result: sec_s_null_param_illegal
	-----------------------------------------------------
	172: protect level: none, authn svc: default (private),
	    authz svc: dce, null server principal name

	test case expected result: rpc_s_ok
	test case actual result: sec_s_null_param_illegal
 -------------------------------------------------------------------------

[9/22/93 public]

        The following is intended to clarify what was written in 2) above
        regarding tests performed via set_auth_info.tsh with null server
        principal names.

        set_auth_info.tsh contains 176 tests, the second 88 differ
        from the first 88 only in that they are expected to call
        rpc_binding_set_auth_info with a NULL pointer for server name.
        rpc_binding_set_auth_info chokes when passed a NULL pointer
        for server name so the set_inq_auth_info.c implementation
        of TestFunction ignores the $USE_SERVNAME/$NULL_SERVNAME passed
        down from set_auth_info.tsh. The result is that the same 88
        tests are performed twice, and the tests being performed in the
        second 88 are actually misrepresented in the report.

	The submitter of this defect, working under the assumption that
        their was something meaningful to test in the line of NULL
        server names, suggested modifications to the test code to
        use a zero length string when NULL_SERVER name was specified.
        They also suggested that rpc_binding_set_auth_info be 
        hardened to reject NULL server names. 

	I think the correct thing to do, is to remove the second 88
        tests form the set_auth_info.tsh (modulo changes being made for
        TET), and leave rpc_binding_set_auth_info alone.

	Note that the more significant problem reported in this defect,
        the use of TSHMessage(a procedure) as a function remains to be
        fixed.

[8/29/94 public]

rpc_binding_set_auth_info() has the unsupported "null server principal
name" feature. See test/rpc/runtime/perf/client.c for the sample usage.

[9/1/94 public]
Humm.. So I ran the tests with the server_name==NULL, but the
failure I am seeing is: Connection request rejected (dce / rpc)

Looking at the set_auth_info code we see that the NULL name feature
only works if rpc_c_authn_dce_secret is being used:

    if (authn_protocol == rpc_c_authn_dce_secret &&
        server_princ_name == NULL)
    {
        rpc_mgmt_inq_server_princ_name
            (binding_h,
             authn_protocol,
             &server_princ_name,
             st);

        if (*st != rpc_s_ok)
            return;

        need_to_free_server_name = true;
    }

I think we would be wise to remove these tests.
Comments?

[9/13/94 public]
Removed the NULL server tests, but fixed the test to actually pass
a NULL to rpc_binding_set_auth_info() is the command line arguments
call for it.

Fixed up expect results.

Fixed up test source to use correct TSH status function.



CR Number                     : 8534
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : rpc
Subcomponent Name             : test/rpc/rtandidl/moretests
Short Description             : don't knwo how to make tstdriver
Reported Date                 : 8/30/93
Found in Baseline             : 1.0.3
Found Date                    : 8/30/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : comtest_client_xfr.c
Sensitivity                   : public

[8/30/93 public]

[ /test/rpc/rtandidl/moretests at 04:24 (AM) Monday ]

release   -o bin -g bin -m 755 -tostage \
/u1/devobj/sb/nb_rios/src/../install/ri\os/dcetest/dce1.0 \
-fromfile mgmt_stop_server_listening \
/rpc/rtandidl/moretests/\mgmt_stop_server_listening 
/rpc/rtandidl/moretests/mgmt_stop_server_listening: copying from \
mgmt_stop_serv\er_listening
/rpc/rtandidl/moretests/mgmt_stop_server_listening: owner bin, group bin, mode \0755
/rpc/rtandidl/moretests/mgmt_stop_server_listening: installing as \
/u1/devobj/sb\/nb_rios/src/../install/rios/dcetest/dce1.0/rpc/rtandidl/moretests/mgmt_stop_se\rver_listening
make: don't know how to make tstdriver (continuing)

[08/30/93 public]
This is a side affect of not being able to build comtest_client_xfr.o, which
prevented tstdriver from being built.

This is fixed as of today (built on 486 and RIOS).



CR Number                     : 8533
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : gds
Subcomponent Name             : test/directory/xds/tests.xom/valid
Short Description             : can't find various libraries
Reported Date                 : 8/30/93
Found in Baseline             : 1.0.3
Found Date                    : 8/30/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b3
Affected File(s)              : Makefile
Sensitivity                   : public

[8/30/93 public]

[ /test/directory/xds/tests.xom/valid at 03:51 (AM) Monday ]

cc           -L/u1/devobj/sb/nb_rios/export/rios/usr/lib \
-L/project/dce/bui\ld/dce1.0.3-snap/export/rios/usr/lib  -o \
xt_test.Xxt_test.o xt_file.o xt_run.o xt_rValue.o xt_omFuncs.o xt_dsFuncs.o \
xt_tree.o xt_thread.o dump.o  -lXDS_r -\lXOM_r -ldua_r -lslog_r -ldce -lc_r \
-lpthreads
0706-005 ld: Cannot find file: /lib/libXDS_r.a
        Check path name and permissions or
        use local problem reporting procedures.
0706-005 ld: Cannot find file: /lib/libXOM_r.a
        Check path name and permissions or
        use local problem reporting procedures.
0706-005 ld: Cannot find file: /lib/libdua_r.a
        Check path name and permissions or
        use local problem reporting procedures.
0706-005 ld: Cannot find file: /lib/libslog_r.a
        Check path name and permissions or
        use local problem reporting procedures.
0706-005 ld: Cannot find file: /lib/libc_r.a
        Check path name and permissions or
        use local problem reporting procedures.
0706-005 ld: Cannot find file: /lib/libpthreads.a
        Check path name and permissions or
        use local problem reporting procedures.
*** Error code 255 (continuing)
`build_all' not remade because of errors.

[9/17/93 public]
Fixed with Jochen's submission.  Closed.



CR Number                     : 8524
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : rpc
Subcomponent Name             : Makefiles
Short Description             : Functional test files installed in wrong place
Reported Date                 : 08/27/93
Found in Baseline             : 1.0.3
Found Date                    : 08/27/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : ./test/rpc/rtandidl/moretests/Makefile ./test/rpc/rtandidl/testsh/Makefile
Sensitivity                   : public

[08/27/93 public]

The following files are installed in "install/<mach>/dcetest/dce1.0"
instead of "install/<mach>/dcetest/dce1.0/test/...".  This is most
likely a problem with IDIR in the Makefiles:

rpc/rtandidl/moretests/mgmt_set_server_stack
rpc/rtandidl/moretests/if_reg_auth_info
rpc/rtandidl/moretests/sofserv
rpc/rtandidl/moretests/svr_reg_auth_info
rpc/rtandidl/moretests/rpc_server
rpc/rtandidl/moretests/binding_server_to_client
rpc/rtandidl/moretests/mgmt_inq_stats
rpc/rtandidl/moretests/mgmt_set_authz_fn
rpc/rtandidl/moretests/object_inq_type
rpc/rtandidl/moretests/enumc
rpc/rtandidl/moretests/scalc
rpc/rtandidl/moretests/ihc
rpc/rtandidl/moretests/mgmt_inq_dflt_authn_level
rpc/rtandidl/moretests/set_inq_auth_info
rpc/rtandidl/moretests/sofservclient
rpc/rtandidl/moretests/recc
rpc/rtandidl/moretests/strzc
rpc/rtandidl/moretests/specc
rpc/rtandidl/moretests/iattrc
rpc/rtandidl/moretests/pattrc
rpc/rtandidl/moretests/aryc
rpc/rtandidl/moretests/object_set_type
rpc/rtandidl/moretests/tattrc
rpc/rtandidl/moretests/rattrc
rpc/rtandidl/moretests/vrecc
rpc/rtandidl/moretests/pipec
rpc/rtandidl/moretests/outoflinec
rpc/rtandidl/moretests/repasc
rpc/rtandidl/moretests/stringc
rpc/rtandidl/moretests/uuid_from_string
rpc/rtandidl/moretests/uuid_compare
rpc/rtandidl/moretests/uuid_create
rpc/rtandidl/moretests/uuid_create_nil
rpc/rtandidl/moretests/uuid_equal
rpc/rtandidl/moretests/uuid_to_string
rpc/rtandidl/moretests/uuid_hash
rpc/rtandidl/moretests/uuid_is_nil
rpc/rtandidl/moretests/network_inq_protseqs_valid
rpc/rtandidl/moretests/string_binding_compose
rpc/rtandidl/moretests/string_binding_parse
rpc/rtandidl/moretests/binding_from_string
rpc/rtandidl/moretests/string_free
rpc/rtandidl/moretests/binding_copy
rpc/rtandidl/moretests/binding_free
rpc/rtandidl/moretests/mgmt_server
rpc/rtandidl/moretests/binding_inq_object
rpc/rtandidl/moretests/binding_reset
rpc/rtandidl/moretests/binding_set_object
rpc/rtandidl/moretests/binding_vector_free
rpc/rtandidl/moretests/error_inq_text
rpc/rtandidl/moretests/mgmt_inq_com_timeout
rpc/rtandidl/moretests/network_inq_protseqs
rpc/rtandidl/moretests/ns_mgmt_binding_unexport
rpc/rtandidl/moretests/group_mbr_add_remove
rpc/rtandidl/moretests/group_mbr_inquiry
rpc/rtandidl/moretests/ns_profile_elt_add
rpc/rtandidl/moretests/ns_profile_elt_inq
rpc/rtandidl/moretests/ns_profile_delete
rpc/rtandidl/moretests/ns_mgmt_entry_create
rpc/rtandidl/moretests/ns_mgmt_entry_delete
rpc/rtandidl/moretests/mgmt_set_com_timeout
rpc/rtandidl/moretests/ns_binding_import
rpc/rtandidl/moretests/ns_binding_export
rpc/rtandidl/moretests/ns_binding_lookup
rpc/rtandidl/moretests/ns_binding_select
rpc/rtandidl/moretests/ns_binding_unexport
rpc/rtandidl/moretests/ns_entry_object_inq
rpc/rtandidl/moretests/ns_entry_inq_if_ids
rpc/rtandidl/moretests/mgmt_ep_elt_inq
rpc/rtandidl/moretests/mgmt_inq_if_ids
rpc/rtandidl/moretests/tstsrvr
rpc/rtandidl/moretests/mgmt_stop_server_listening
rpc/rtandidl/moretests/tstdriver
rpc/rtandidl/moretests/server
rpc/rtandidl/moretests/ns_mgmt_exp_age
usr/include/dce/testsh

[9/24/93 public]
This was originally opened as a 'bld' defect and covered tests in CDS and
file, as well.  I've created two other defects to cover CDS and DFS and
have recaste this one as an RPC defect

[09/27/93 public]
Removed the IDIR variables from the Makefiles.
Verified by building and installing rtandidl.
Closed.



CR Number                     : 8520
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : rpc
Subcomponent Name             : test/rpc/idl/n_e_union
Short Description             : pointer initialization problem
Reported Date                 : 8/27/93
Found in Baseline             : 1.0.3
Found Date                    : 8/27/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : manager.c
Sensitivity                   : public

[8/27/93 public]

xlc -c       -Dunix -D_ALL_SOURCE -DNO_SIOCGIFADDR -D_ALL_SOURCE -DAIX32 \
-I. -I/u1/devobj/sb/nb_rios/src/test/rpc/idl/n_e_union \
 -I/u1/devobj/sb/nb_rios/src/test/rpc/idl/n_e_union \
-I.. -I/u1/devobj/sb/nb_rios/src/test/rpc/idl \
-I/u1/devobj/sb/nb_rios/src/test/rpc/idl \
-I/u1/devobj/sb/nb_rios/export/rios/usr/include \
../../../../../../src/test/rpc/idl/n_e_union/manager.c
"../../../../../../src/test/rpc/idl/n_e_union/manager.c", line 150.5: \
1506-196 (S) Initialization between types pointer and pointer is not allowed.
"../../../../../../src/test/rpc/idl/n_e_union/manager.c", line 153.5: \
1506-196 (S) Initialization between types pointer and pointer is not allowed.
"../../../../../../src/test/rpc/idl/n_e_union/manager.c", line 155.5: \
1506-196 (S) Initialization between types pointer and pointer is not allowed.
*** Error code 1 (continuing)
`build_all' not remade because of errors.

In manager.c:

/*globaldef*/ n_e_union_v0_0_epv_t n_e_union_v0_0_m_epv =
{
    s_param_by_value,                   line 150
    s_param_by_ref,
    s_in_struct,
    s_ptr_union_val_discrim,            line 153
    s_ptr_union_ref_discrim,
    s_union_unique_ref_discrim,         line 155
    s_in_multi,
    s_array_op
};

[11/12/93 public]
Code has passed functional and most of system test.
Closed.



CR Number                     : 8519
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : rpc
Subcomponent Name             : test/rpc/idl/mtsaconf
Short Description             : incompatible pointer types, etc.
Reported Date                 : 8/27/93
Found in Baseline             : 1.0.3
Found Date                    : 8/27/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : client_aux.c, manager.c
Sensitivity                   : public

[8/27/93 public]

xlc -c       -Dunix -D_ALL_SOURCE -DNO_SIOCGIFADDR -D_ALL_SOURCE -DAIX32
-I. -I/u1/devobj/sb/nb_rios/src/test/rpc/idl/mtsaconf \
-I/u1/devobj/sb/nb_rios/src/test/rpc/idl/mtsaconf-I.. -I/u1/devobj/sb/nb_rios/src/test/rpc/idl -I/u1/devobj/sb/nb_rios/src/test/rpc/idl -I/u1/devobj/sb/nb_rios/export/rios/usr/include    ../../../../../../src/test/rpc/idl/mtsaconf/client_aux.c
"../../../../../../src/test/rpc/idl/mtsaconf/client_aux.c", line 112.44: \
1506-193 (E) Function call argument cannot be assigned to corresponding parameter.
"../../../../../../src/test/rpc/idl/mtsaconf/client_aux.c", line 145.25: \
1506-193 (E) Function call argument cannot be assigned to corresponding parameter.
"../../../../../../src/test/rpc/idl/mtsaconf/client_aux.c", line 206.12: \
1506-016 (E) Operands must be pointers to compatible types.
"../../../../../../src/test/rpc/idl/mtsaconf/client_aux.c", line 218.12: \
1506-016 (E) Operands must be pointers to compatible types.
"../../../../../../src/test/rpc/idl/mtsaconf/client_aux.c", line 248.12: \
1506-016 (E) Operands must be pointers to compatible types.
xlc          -L.. -L/u1/devobj/sb/nb_rios/src/test/rpc/idl \
-L/u1/devobj/sb/nb_rios/src/test/rpc/idl -L/u1/devobj/sb/nb_rios/export/rios/usr/lib       -o client.X client.o mtsaconf_cstub.o  client_aux.o  -lidltest -ld\
ce -lbsd
mv client.X client
sed -e "s/TESTCASE/mtsaconf/"
../../../../../../src/test/rpc/idl/server.tmpl > server.c
xlc -c       -Dunix -D_ALL_SOURCE -DNO_SIOCGIFADDR -D_ALL_SOURCE -DAIX32 \
-I. -I/u1/devobj/sb/nb_rios/src/test/rpc/idl/mtsaconf \
-I/u1/devobj/sb/nb_rios/src/test/rpc/idl/mtsaconf -I.. \
-I/u1/devobj/sb/nb_rios/src/test/rpc/idl \
-I/u1/devobj/sb/nb_rios/src/test/rpc/idl \
-I/u1/devobj/sb/nb_rios/export/rios/usr/include    server.c
xlc -c       -Dunix -D_ALL_SOURCE -DNO_SIOCGIFADDR -D_ALL_SOURCE -DAIX32
-I. -I/u1/devobj/sb/nb_rios/src/test/rpc/idl/mtsaconf \
-I/u1/devobj/sb/nb_rios/src/test/rpc/idl/mtsaconf \
-I.. -I/u1/devobj/sb/nb_rios/src/test/rpc/idl \
-I/u1/devobj/sb/nb_rios/src/test/rpc/idl \
-I/u1/devobj/sb/nb_rios/export/rios/usr/include \
../../../../../../src/test/rpc/idl/mtsaconf/manager.c
"../../../../../../src/test/rpc/idl/mtsaconf/manager.c", line 159.12: \
1506-016 (E) Operands must be pointers to compatible types.
"../../../../../../src/test/rpc/idl/mtsaconf/manager.c", line 194.16: \
1506-016 (E) Operands must be pointers to compatible types.
"../../../../../../src/test/rpc/idl/mtsaconf/manager.c", line 236.10: \
1506-196 (S) Initialization between types pointer and pointer is not allowed.
"../../../../../../src/test/rpc/idl/mtsaconf/manager.c", line 230.10: \
1506-196 (S) Initialization between types pointer and pointer is not allowed.
*** Error code 1 (continuing)
`build_all' not remade because of errors.

In manager.c:

    idl_short_float *flptr1, *flptr2;

    flptr1 = &(p_mc->a);        line 159

    idl_long_float *dbrowi, *dbcoli, *dbrowo, *dbcolo;

        dbrowi = &(p_mo->d);    line 194

/*globaldef*/ mtsaconf_v0_0_epv_t mtsaconf_v0_0_m_epv =
        {s_op0,                 line 230
         s_op1,
         s_op2,
         s_op3,
         s_op4,
         s_op5,
         s_op6};                line 236

[11/12/93 public]
Code has passed functional and most of system test.
Closed.



CR Number                     : 8518
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : rpc
Subcomponent Name             : test/rpc/rtandidl/moretests
Short Description             : varrectest_op4 redeclared
Reported Date                 : 8/27/93
Found in Baseline             : 1.0.3
Found Date                    : 8/27/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : vrecm.c
Sensitivity                   : public

[8/27/93 public]

cc -c       -Dunix -D_ALL_SOURCE -DNO_SIOCGIFADDR  -D_ALL_SOURCE -DAIX32 \
-I. -I/u1/devobj/sb/nb_rios/src/test/rpc/rtandidl/moretests \
-I/u1/devobj/sb/nb_rios/src/test/rpc/rtandidl/moretests -I/u1/devobj/sb/nb_rios/export/rios/usr/include
../../../../../../src/test/rpc/rtandidl/moretests/vrecm.c \
"../../../../../../src/test/rpc/rtandidl/moretests/vrecm.c", line 262.6: \
1506-132 (S) Function varrectest_op4 cannot be redeclared.

[11/12/93 public]
Code has passed functional and most of system test.
Closed.



CR Number                     : 8517
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : rpc
Subcomponent Name             : src/test/rpc/rtandidl/moretests
Short Description             : scalartest_op11 redeclared
Reported Date                 : 8/27/93
Found in Baseline             : 1.0.3
Found Date                    : 8/27/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : scalm.c
Sensitivity                   : public

[8/27/93 public]

c -c       -Dunix -D_ALL_SOURCE -DNO_SIOCGIFADDR  -D_ALL_SOURCE -DAIX32
-I. -I/u1/devobj/sb/nb_rios/src/t\
est/rpc/rtandidl/moretests
-I/u1/devobj/sb/nb_rios/src/test/rpc/rtandidl/moretests
-I/u1/devobj/sb/nb_rios/\
export/rios/usr/include
../../../../../../src/test/rpc/rtandidl/moretests/scalm.c
"../../../../../../src/test/rpc/rtandidl/moretests/scalm.c", line 308.6:
1506-132 (S) Function scalartest_op\
11 cannot be redeclared.

Line 308 in scalm.c is:

	void scalartest_op11

[11/12/93 public]
Code has passed functional and most of system test.
Closed.



CR Number                     : 8516
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : rpc
Subcomponent Name             : test/rpc/rtandidl/moretests
Short Description             : unexpected argument in function call
Reported Date                 : 8/27/93
Found in Baseline             : 1.0.3
Found Date                    : 8/27/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : comtest_client_xfr.c
Sensitivity                   : public

[8/27/93 public]

c -c       -Dunix -D_ALL_SOURCE -DNO_SIOCGIFADDR  -D_ALL_SOURCE -DAIX32
-I. -I/u1/devobj/sb/nb_rios/src/t\
est/rpc/rtandidl/moretests
-I/u1/devobj/sb/nb_rios/src/test/rpc/rtandidl/moretests
-I/u1/devobj/sb/nb_rios/\
export/rios/usr/include
../../../../../../src/test/rpc/rtandidl/moretests/comtest_client_xfr.c
"../../../../../../src/test/rpc/rtandidl/moretests/comtest_client_xfr.c",
line 685.58: 1506-099 (S) Unexpect\
ed argument.
"../../../../../../src/test/rpc/rtandidl/moretests/comtest_client_xfr.c",
line 686.41: 1506-099 (S) Unexpect\
ed argument.
"../../../../../../src/test/rpc/rtandidl/moretests/comtest_client_xfr.c",
line 687.41: 1506-099 (S) Unexpect\
ed argument.
"../../../../../../src/test/rpc/rtandidl/moretests/comtest_client_xfr.c",
line 688.41: 1506-099 (S) Unexpect\
ed argument.
"../../../../../../src/test/rpc/rtandidl/moretests/comtest_client_xfr.c",
line 689.41: 1506-099 (S) Unexpect\
ed argument.

Lines 685-689 in comtest_client_xfr.c are:

                          ( (vararg_fn_t)(*object_ptr)) (binding_h,
                                        COMTST_client_more_tsts,
                                        (sstring_t *)COMTST_obj_buf,
                                        &omsg,
                                        status);

"../../../../../../src/test/rpc/rtandidl/moretests/comtest_client_xfr.c",
line 735.50: 1506-099 (S) Unexpect\
ed argument.
"../../../../../../src/test/rpc/rtandidl/moretests/comtest_client_xfr.c",
line 736.33: 1506-099 (S) Unexpect\
ed argument.
"../../../../../../src/test/rpc/rtandidl/moretests/comtest_client_xfr.c",
line 737.33: 1506-099 (S) Unexpect\
ed argument.
"../../../../../../src/test/rpc/rtandidl/moretests/comtest_client_xfr.c",
line 738.33: 1506-099 (S) Unexpect\
ed argument.
"../../../../../../src/test/rpc/rtandidl/moretests/comtest_client_xfr.c",
line 739.33: 1506-099 (S) Unexpect\
ed argument.

Lines 735-739 in comtest_client_xfr.c are:

                    ( (vararg_fn_t) (*sav_ptr)) (binding_h,
                                COMTST_client_nomore_tsts,
                                (sstring_t *)"Test Complete",
                                &omsg,
                                status);

[08/30/93 public]
Have to assign (*sav_ptr) to a temp pointer of the correct type to work
around a RIOS (but not gcc) compiler problem.

[11/12/93 public]
Code has passed functional and most of system test.
Closed.



CR Number                     : 8471
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : bld
Subcomponent Name             : build install_all
Short Description             : Tests are not installed in dcetest
Reported Date                 : 08/18/93
Found in Baseline             : 1.0.3
Found Date                    : 08/18/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : ./test/test.mk
Sensitivity                   : public

[08/18/93 public]

All functional and system tests are being installed in opt instead of
dcetest.

[08/18/93 public]

Uncommented TOSTAGE in ./test/test.mk.

[08/23/93 public]
Verified on nightly build of 08/20/93.



CR Number                     : 8449
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dfs.lock system test
Short Description             : dfs.lock - minor coding defects
Reported Date                 : 8/13/93
Found in Baseline             : 1.0.2a
Found Date                    : 8/13/93
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : test/systest/file/dfs.lock
Sensitivity                   : public

[8/13/93 public]
The following defects exist in the version of dfs.lock in the 1.0.2a 
release:

    if the command line options to dfs.lock are enabled (ie: dfs.lock is 
    invoked as dfs.lock_cl) then the -d (debug client) will not work.  The
    problem is that in the switch that parses the command line options, the
    variable DEBUG_CLI is set to "-D" if the -d command line option is 
    specified.  The DEBUG_CLI variable should be set to "-v" in this case.
    (it is also probably desirable to put a commented out line like
       # DEBUG_CLI=-v 
     in the lock.data file to give users something to turn on to get 
     debugging)
    

    in the function cleanup the test of cu_cntxt != "final" should be
    a  test of cu_case != "final".

The first defect only affects the largely undocumented command-line
interface to dfs.lock in a debug case.  The second defect only causes
a print to come out a little strangely.  Hence the low priority and severity.

[7/18/94 public]

Assigning to Rick LeMon.

[7/19/94 public]
Changes submitted.



CR Number                     : 8448
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dfs.lock system test
Short Description             : dfs.lock - typos in comments
Reported Date                 : 8/13/93
Found in Baseline             : 1.0.2a
Found Date                    : 8/13/93
Severity                      : D
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b13
Affected File(s)              : test/systest/file/dfs.lock
Sensitivity                   : public

[8/13/93 public]
There are several typos in the comments describing the operation
of the dfs.lock script at the top of the file test/systest/file/dfs.lock:
 
  In the LOGIC FLOW section

     - "DFSLOCK_CONF, or the default of "lock.data" can be used."
       should be "DFSLOCK_CONFIG..."
 
     - "If everyhing is okay, this script prints "EX-LOCK-STATUS-OKAY"
       should be "If everything ... "EW-LOCK-STATUS-OKAY"

     - an "EXITTED message.
       should be "an "EXITTED" message"

  In the SYNTAX section:

     - "dfs.lock_cl -H"
       should be "dfs.lock_cl -h"

[7/18/94 public]

Assigning to Rick LeMon.

[7/19/94 public]

Changes submitted.



CR Number                     : 8445
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : systest/file
Short Description             : dfs.glue CHO currently = default cert lifetime
Reported Date                 : 8/13/93
Found in Baseline             : 1.0.2a
Found Date                    : 8/13/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dfs.glue, glue.data
Sensitivity                   : public

[8/13/93 public]

In my last revision to the dfs.glue script, I removed the killing
and restarting of the cache_mgr functional test program "spoke".
While this adds to the efficiency of the test, the side effect
is that when the test is run with RUN_CACHEMGRTESTS=TRUE, the
credentials of the "spokes" only last as long as the default
certificate lifetime and therefore, the tests can only succeed
for that amount of time.

Current workarounds are:
	- set RUN_CACHEMGRTESTS=FALSE in glue.data
OR
	- set the default certificate lifetime in the
	registry to the length of time you want to run
	the test (NOTE: newly installed dce default
	certificate lifetime is 10 hours)

[9/30/93 public]

Fixed - dfs.glue submitted that contains kill/restart code for
cache_mgr tests. Also added RUN_CACHEMGRTESTS var to glue.data
for easier test tuning. Updated comments per CR 8623.

[10/1/93 public]

Made it through the nightly build fine - closing.



CR Number                     : 8437
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa,i486
S/W Ref Platform              : hpux,aix
Component Name                : gds
Subcomponent Name             : xds
Short Description             : don't know how to make xt_test
Reported Date                 : 8/12/93
Found in Baseline             : 1.0.3
Found Date                    : 8/12/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b3
Affected File(s)              : tests.xom/valid/write1v
Sensitivity                   : public

[8/12/93 public]

For file "test/directory/xds/test.xom/valid/write1v" the installation test
phase of the nightly build complained: "don't know how to make xt_test."

[8/16/93 public]
This error was caused by an intermediate state during submission.
Fixed with end of submission.

[9/17/93 public]
Closed.



CR Number                     : 8436
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa,i486
S/W Ref Platform              : hpux,aix
Component Name                : gds
Subcomponent Name             : xds
Short Description             : in file dump.c, function
dump_class, the struct alloc_desc is undefined.
Reported Date                 : 8/12/93
Found in Baseline             : 1.0.3
Found Date                    : 8/12/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dump.c
Sensitivity                   : public

[8/12/93 public]

In the function "dump_class" in the file "test/directory/xds/dump.c" the
struct "alloc_desc" is undefined.

[8/16/93 public]
This error was caused by an intermediate state during submisssion.
Fixed with end of submission.

[9/17/93 public]
Closed.



CR Number                     : 8406
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : dfs
Subcomponent Name             : fts
Short Description             : typos in fts test env variable
Reported Date                 : 8/3/93
Found in Baseline             : 1.0.3
Found Date                    : 8/3/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : src/test/file/fts/README,src/test/file/fts/test21
Sensitivity                   : public

[8/3/93 public]
UFS_FSNAME_2 variable sometimes refered to as UFS_FS_NAME_2
causing test errors with -ufs switch.

[12/17/93 public]
Closed.



CR Number                     : 8368
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : systest
Short Description             : Need scripts to reflect how 102a stress objectives tested
Reported Date                 : 7/27/93
Found in Baseline             : 1.0.2a
Found Date                    : 7/27/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.2a
Fixed In Baseline             : 1.0.2a
Affected File(s)              : test/systest/file/Makefile
Sensitivity                   : public

[7/27/93 public]

The max file, max directory and block-fragment testing for 102a was done
with the following scripts and datafiles which should be in the tree for
reference:
	dfs.maxfile	maxfile.data
	dfs.maxdir	maxdir.data
	dfs.block_frag	block_frag.data
The datafiles are templates - actual datafiles used are in the 102a test 
results area along with the output logs.

[7/27/93 public]
Submission done, status = fixed.

[8/30/93 public]
Build done (many times!) - status = closed.



CR Number                     : 8356
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : rpc
Subcomponent Name             : 
Short Description             : string_buf[] defined twice.
Reported Date                 : 7/22/93
Found in Baseline             : 1.0.2
Found Date                    : 7/22/93
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : in test/rpc/rtandidl/moretests comtest_interface_y.c server_obj_tsts.h
Sensitivity                   : public

[7/22/93 public]

The variable string_buf is defined twice among the files that make up
tstsrvr. It appears both in comtest_interface_y.c (where it is not used)
and in server_obj_tsts.h (used in server_obj_tsts.c).  Why not get rid of
the definition in comtest_interface_y.c?

[10/15/93 public]
Removed the definition in comtest_interface_y.c.
Closed.



CR Number                     : 8355
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : rpc
Subcomponent Name             : 
Short Description             : Return type of register_ifs conflicts with type of value actually returned.
Reported Date                 : 7/22/93
Found in Baseline             : 1.0.2
Found Date                    : 7/22/93
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : test/rpc/rtandidl/moretests/mgmt_ep_elt_inq.c
Sensitivity                   : public

[7/22/93 public]

In the file test/rpc/rtandidl/moretests/mgmt_ep_elt_inq.c the function
register_ifs() is declared without a return type and therefore its return
type is int while a couple of return statements in the body of the function
return pointers to unsigned32 resulting in type mismatch warnings. Since
the return value is never used by the caller a solution might be to
declare the return value of register_ifs() as void and not return anything
with the return statements.

[10/15/93 public]
Made register_ifs() a void function.
Closed.



CR Number                     : 8354
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 8300
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : rpc
Subcomponent Name             : 
Short Description             : A few files in test/rpc/rtandidl/moretests lack #include <stdlib.h>.
Reported Date                 : 7/22/93
Found in Baseline             : 1.0.2
Found Date                    : 7/22/93
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : binding_copy.c binding_from_string.c set_inq_auth_info.c string_binding_compose.c
Sensitivity                   : public

[7/22/93 public]

The files binding_copy.c, binding_from_string.c, set_inq_auth_info.c,
string_binding_compose.c all are missing the statement:

	#include <stdlib.h>

which is required since those files contain calls to functions declared in
<stdlib.h> (malloc() in binding_copy.c, binding_from_string.c and
string_binding_compose.c and getenv() in set_inq_auth_info.c). As a result
the compiler defaults the return type of these functions to int which
causes an ANSI-C compiler to issue type mismatch warnings in several
places. In most environments this problem is hidden by the indirect
inclusion of <stdlib.h> through a long chain of includes but the problem
arises when for example the DCE implementation uses kernel threads.

[10/14/93 public]
Added the includes.
Closed.



CR Number                     : 8342
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : rpc
Subcomponent Name             : 
Short Description             : Compilation errors in v2test_lib
Reported Date                 : 7/22/93
Found in Baseline             : 1.0.3
Found Date                    : 7/22/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : ./test/rpc/runtime/v2test_lib/v2test.h
Sensitivity                   : public

[7/22/93 public]
Two compilation errors:
src/test/rpc/runtime/v2test_lib/v2client.c:
src/test/rpc/runtime/v2test_lib/v2server.c

src/test/rpc/runtime/v2test_lib/v2client.c:
cc: "../../../../../../src/test/rpc/runtime/v2test_lib/v2client.c", line
307: error 1588: "N" undefined.
cc: "../../../../../../src/test/rpc/runtime/v2test_lib/v2client.c", line
307: warning 563: Argument #2 is not the 
correct type.
cc: "../../../../../../src/test/rpc/runtime/v2test_lib/v2client.c", line
307: warning 608: Illegal integer-pointer
 combination in assignment.
cc: "../../../../../../src/test/rpc/runtime/v2test_lib/v2client.c", line
307: warning 563: Argument #3 is not the 
correct type.

src/test/rpc/runtime/v2test_lib/v2server.c:
cc: "../../../../../../src/test/rpc/runtime/v2test_lib/v2server.c", line
343: error 1588: "N" undefined.
cc: "../../../../../../src/test/rpc/runtime/v2test_lib/v2server.c", line
343: warning 563: Argument #2 is not the 
correct type.
cc: "../../../../../../src/test/rpc/runtime/v2test_lib/v2server.c", line
343: warning 608: Illegal integer-pointer
 combination in assignment.
cc: "../../../../../../src/test/rpc/runtime/v2test_lib/v2server.c", line
343: warning 563: Argument #3 is not the 
correct type.

[7/22/93 public]

This happens because you are building kernel RPC functional tests which is
not ported to HP-UX. If you do build in src/test/rpc/runtime/v2test_lib
directory (building the user space RPC functional tests), it will succeed.
The above errors are in src/test/rpc/runtime/uv2test and
src/test/rpc/runtime/kv2test (not in v2test_lib, please check 'cd' before
the errors).

[07/22/93 public]
Duplicate of 8340.

[07/23/93 public]
Didn't get fixed in nightly build of July22.
Refer to build log (for tests) for details.

[07/23/93 public]
Reopened this defect and assigned it to Dave.  I mistook it for a system
test defect.

[11/12/93 public]
Code has passed functional and most of system test.
Closed.



CR Number                     : 8341
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : rpc
Subcomponent Name             : 
Short Description             : Can't find header files in ncstest
Reported Date                 : 7/22/93
Found in Baseline             : 1.0.3
Found Date                    : 7/22/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : ./test/rpc/rpc.mk
					     ./test/rpc/runtime/ncstest/client.c
Sensitivity                   : public

[7/22/93 public]
In src/test/rpc/runtime/ncstest/client.c:
user.h: 17: Unable to find include file '../h/time.h'.
user.h: 18: Unable to find include file '../h/resource.h'.
user.h: 19: Unable to find include file '../h/privgrp.h'.
user.h: 20: Unable to find include file '../h/errno.h'.
user.h: 21: Unable to find include file '../h/signal.h'.
user.h: 22: Unable to find include file '../h/proc.h'.
user.h: 27: Unable to find include file '../h/vmmac.h'.

Here's the complete compilation invocation:
c89 
	-c    
	-D_SHARED_LIBRARIES  +z  
	-DKERNEL 
	-D_KERNEL  
	-D__hppa
	-Dhp9000s800 
	-Dhp9000s700 
	-D__hp9000s800 
	-D__hp9000s700 
	-DHPUX 
	-D__hpux 
	-Dunix +DA1.0 
	-D_HPUX_SOURCE    
	-I.
	-I/project/dce/build/nb_ux/src/test/rpc/runtime/kncstest
	-I/project/dce/build/dce1.0.3i/src/test/rpc/runtime/kncstest
	-I/project/dce/build/dce1.0.2a/src/test/rpc/runtime/kncstest  
	-I. 
	-I/project/dce/build/nb_ux/src/test/rpc/runtime/kncstest
	-I/project/dce/build/dce1.0.3i/src/test/rpc/runtime/kncstest
	-I/project/dce/build/dce1.0.2a/src/test/rpc/runtime/kncstest 
	-I../ncstest
	-I/project/dce/build/nb_ux/src/test/rpc/runtime/ncstest
	-I/project/dce/build/dce1.0.3i/src/test/rpc/runtime/ncstest
	-I/project/dce/build/dce1.0.2a/src/test/rpc/runtime/ncstest
	-I/project/dce/build/nb_ux/export/hp800/usr/include 
	-I/project/dce/build/dce1.0.3i/export/hp800/usr/include
	-I/project/dce/build/dce1.0.2a/export/hp800/usr/include
../../../../../../src/test/rpc/runtime/ncstest/client.c

[7/22/93 public]

On HP-UX, when _KERNEL is defined you need -I/etc/conf . I though that DFS
group is addressing this problem because they need kernel headers. As I
know, none of the kernel RPC functional tests is ported to HP-UX.

[07/22/93 public]
Duplicate of 8340.

[07/23/93 public]
Reopened and assigned to Dave.  I mistook this defect for a system test bug.

[8/12/93 public]
Fixed by changes in ./test/rpc/rpc.mk and
./test/rpc/runtime/ncstest/client.c

[11/12/93 public]
Code has passed functional and most of system test.
Closed.



CR Number                     : 8340
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : systest
Subcomponent Name             : systest
Short Description             : Syntax errors
Reported Date                 : 7/22/93
Found in Baseline             : 1.0.3
Found Date                    : 7/22/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : ./src/test/Makefile
Sensitivity                   : public

[7/22/93 public]
The following syntax errors were found in the build:

src/test/systest/tools/xx_lib_r.c:
cc: "../../../../../src/test/systest/tools/xx_lib_r.c", line 120: error
1588: "TRUE" undefined.
cc: "../../../../../src/test/systest/tools/xx_lib_r.c", line 120: error
1521: Incorrect initialization.
cc: "../../../../../src/test/systest/tools/xx_lib_r.c", line 176: error
1588: "FALSE" undefined.
*** Error code 1

src/test/systest/tools/msgq_ut.c, msgrcv_bad.c,msgsnd_bad.c:
cc: "/project/dce/build/nb_ux/src/test/systest/tools/msgq.h", line 100:
error 1000: Unexpected symbol: "ulong".

src/test/systest/tools/util.c:
cc: "../../../../../src/test/systest/tools/util.c", line 151: warning 604:
Pointers are not assignment-compatible.
cc: "../../../../../src/test/systest/tools/util.c", line 151: warning 563:
Argument #2 is not the correct type.
cc: "../../../../../src/test/systest/tools/util.c", line 197: error 1588:
"TRUE" undefined.
cc: "../../../../../src/test/systest/tools/util.c", line 197: error 1725:
Case label expressions must be integer c
onstants.
cc: "../../../../../src/test/systest/tools/util.c", line 201: error 1588:
"FALSE" undefined.
cc: "../../../../../src/test/systest/tools/util.c", line 201: error 1725:
Case label expressions must be integer c
onstants.
cc: "../../../../../src/test/systest/tools/util.c", line 228: warning 604:
Pointers are not assignment-compatible.
cc: "../../../../../src/test/systest/tools/util.c", line 228: warning 563:
Argument #1 is not the correct type.
cc: "../../../../../src/test/systest/tools/util.c", line 238: error 1000:
Unexpected symbol: "long_host_addr".
cc: "../../../../../src/test/systest/tools/util.c", line 238: error 1588:
"ulong" undefined.
cc: "../../../../../src/test/systest/tools/util.c", line 240: error 1588:
"long_host_addr" undefined.
cc: "../../../../../src/test/systest/tools/util.c", line 241: warning 563:
Argument #1 is not the correct type.
cc: "../../../../../src/test/systest/tools/util.c", line 241: error 1594:
Unknown size.
cc: "../../../../../src/test/systest/tools/util.c", line 241: warning 608:
Illegal integer-pointer combination in 
assignment.
cc: "../../../../../src/test/systest/tools/util.c", line 241: warning 563:
Argument #2 is not the correct type.

[7/22/93 public]
More things:

src/test/systest/tools/ropen_main.c:
cc: "../../../../../src/test/systest/tools/ropen_main.c", line 287: error
1588: "TRUE" undefined.
cc: "../../../../../src/test/systest/tools/ropen_main.c", line 298: error
1588: "TRUE" undefined.
cc: "../../../../../src/test/systest/tools/ropen_main.c", line 376: error
1588: "FALSE" undefined.
*** Error code 1

src/test/systest/tools/remoteopen.c:
cc: "../../../../../src/test/systest/tools/remoteopen.c", line 361: warning
604: Pointers are not assignment-compa
tible.
cc: "../../../../../src/test/systest/tools/remoteopen.c", line 361: warning
563: Argument #1 is not the correct ty
pe.
cc: "../../../../../src/test/systest/tools/remoteopen.c", line 441: warning
604: Pointers are not assignment-compa
tible.
cc: "../../../../../src/test/systest/tools/remoteopen.c", line 441: warning
563: Argument #2 is not the correct ty
pe.

[07/22/93 public]
Fixed, changed ./src/test/Makefile so that the systests do not get built.
These problems will be fixed when the TETized system tests are submitted
in the near future.

[08/11/93 public]
System tests are building cleanly on HP and i486, they will be included
in the nightly build once we get a chance to build on a RIOS.



CR Number                     : 8339
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : gds
Subcomponent Name             : ros
Short Description             : Missing machdep.mk
Reported Date                 : 7/22/93
Found in Baseline             : 1.0.3
Found Date                    : 7/22/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : 
test/directory/gds/ros/testenv/HP800/machdep.mk
Sensitivity                   : public

[7/22/93 public]
A machine dependent makefile for the HP is missing:

[ /test/directory/gds/ros/testenv at 21:23 (PM) Wednesday ]
makepath testenv/. && cd testenv &&  exec make MAKEFILE_PASS=FIRSTA
build_all
testenv: created directory
"../../../../../../../src/test/directory/gds/ros/testenv/Makefile", line
101: Could not find HP800/machdep.mk
Fatal errors encountered -- cannot continue
*** Error code 1

[8/13/93 public]
HP800/machdep.mk was delivered together with the July 1993 code drop.

[9/13/93 public]
Closed



CR Number                     : 8324
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : README for dfs system tests
Short Description             : needs to be updated for dfs.lock changes
Reported Date                 : 7/20/93
Found in Baseline             : 1.0.2b7
Found Date                    : 7/20/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : src/test/systest/file/README
Sensitivity                   : public

[7/20/93 public]
The README for src/test/systest/file needs to change to reflect the changes
to the dfs.lock script.

[11/10/93 public]
The README for the src/test/systest/file directory has been modified to
point readers at the SYNTAX comments in the test script files.  This 
removes the need for additional updates to this file for the dfs.lock
test.

Defect closed.



CR Number                     : 8303
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : rpc
Subcomponent Name             : 
Short Description             : code cleanup issues
Reported Date                 : 7/16/93
Found in Baseline             : 1.0.2
Found Date                    : 7/16/93
Severity                      : E
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : test/rpc/runtime/ncstest/smplm.c,client.c,afsu.c test/rpc/runtime/v2test_lib/v2client.c,v2client.h
Sensitivity                   : public

[7/16/93 public]

1. test/rpc/runtime/ncstest/smplm.c

	remove superfluous ;'s after final brace of functions:

		ncstest_simple_op1
		ncstest_simple_op2
		ncstest_simple_op3

2. test/rpc/runtime/ncstest/client.c

	recasting required for argument of call to rpc_bincing_set_auth_info

3. test/rpc/runtime/ncstest/afsu.c
	
	the definition of ncstest_afs_foo in afsu.c should be changed to
        an external reference (globalref or extern), so as not to duplicate
        the definition put in afs_cstub.c by the idl compiler as the result
        of the transformation of afs.acf.

4. test/rpc/runtime/v2test_lib/v2client.c,v2client.h

	the definition of the global variable, timers appearing in inv2test.h
        causes this variable to be instantiated in each module which includes
        v2test.h. In the case of the server program, there are two modules
        which include v2test.h, and thus two instances of the variable which
        must be resolved by the linker.

5. test/rpc/runtime/perf/server.c

	two of the three calls to strtok appearing in this file have had
        their return values cast, and the third would require this to
        be done for the file to be ANSI compilable (without
        warning: assignment makes pointer from integer without a cast)

	No casting would be required (in any of the three cases) if string.h
        were simply included in server.c

[10/15/93 public]
Fixed 1-4, for the perf test, HP had added the third cast so I decided
not to change anything.



CR Number                     : 8301
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dfs repfldb checklist
Short Description             : needs work for accuracy, utility
Reported Date                 : 7/16/93
Found in Baseline             : 1.0.2b7
Found Date                    : 7/16/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.2b7
Affected File(s)              : src/test/systest/file/dfs.repfs_checklist
Sensitivity                   : public

[7/16/93 public]
While trying to follow this checklist, I encountered a number of
inaccuracies, missing information, and steps that served no real useful
purpose.  Specifically:
  -  You must either run the core DCE services on a non-DFS machine, or 
     on the machine with the highest IP address of the machines in the 
     test cell so that the DCE core server does not get elected the  
     fldb sync site.

  -  missing the '-process flserver' arguement to the bos restart command 
     to restart the flservers so that they can elect a sync site.

  -  Information on setting up to run the ubik unit tests is extraneous
     since there is no step that tells you to run them, nor is it well 
     understood how to run them. 

  -  To determine the fldb sync site, you should check amoung the members
     of the /.:/fs group, not the /.:/subsys/dce/dfs/utst group.

  -  After shutting down the initial sync site, you should verify that a 
     new sync site is elected from the remaining flservers before
     re-starting the old sync site.

  -  The last step should be to run the fts short test, periodically
     determining the sync site, stopping the flserver on that machine,
     waiting to see that a new sync site is elected, restarting the 
     old sync site's flserver, and verifying that it sees the same 
     fldb info as the machines left running.

[7/20/93 public]
Fixed all of the above, plus changed step H to describe running dfs.lock
and dfs.glue.  Status changed to fix.

[11/12/93 public]
All of the changes mentioned above have been made.  This defect is closed.
Note that there is a small problem in the NOTE for step 1.  This will be
mentioned in a new defect for 1.0.3a.



CR Number                     : 8284
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : systest
Short Description             : dfs.read_write_all does not work on a RIOS cell
Reported Date                 : 7/15/93
Found in Baseline             : 1.0.2a
Found Date                    : 7/15/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.2a
Fixed In Baseline             : 1.0.2a
Affected File(s)              : dfs.read_write_all.main
Sensitivity                   : public
Transarc Deltas               : 
Transarc Herder               : 
Transarc Status               : 

[7/15/93 public]
The system test dfs.read_write_all is not working on the RIOS. I am having
a problem runnning the rsh command from the script. For instance:
On machine soldier, logged in as cell_admin or root I type and get the follwoing:
rsh vodka -l user_1 dce_login user_1 -dfsuser- -exec /.../tasso_cell/fs/soldier_u1/user_1/one 
rshd: 0826-813 Permission is denied 
It does not execute the script called one. 
However, on the same machine, if I am dce logged in as user_1 and I type the same command, 
the script gets excuted. 
I need to find a way to be able, as root or cell_admin, to run remotely a script that lives 
on a user's home directory which is on DFS.

[7/16/93 public]
Are you sure it's not rshd that's rejecting your request?  I take it
your .rhosts and/or /etc/hosts.equiv is set up right on vodka?
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `' 
Added field Transarc Status with value `'

[7/20/93 ]

Problem fixed. Thanks to Mike Comer for his hints.
In order to be able to run a script that rsh-es into user accounts that live in 
fileset on DFS, the pathname to that directory nee to have the ACL any_other:rx.
In addition, all the /etc/hosts.equiv file need to explicitly state the name of
the user doing the rsh, even if it is root itself. I also found out that in this
during this operation the ~/.hosts is not taken into account.



CR Number                     : 8280
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : 
Short Description             : HP's TET'ized system tests
Reported Date                 : 7/15/93
Found in Baseline             : 1.0.3
Found Date                    : 7/15/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.0.3
Affected File(s)              : many files under src/test/systest
Sensitivity                   : public

[7/15/93 public]

[08/11/93 public]
Assigned to Cindy.

[3/1/94 public]
The TET'ized tests shipped with DCE 1.0.3.  Closing this CR.

[03/02/94 public]
Closed again.



CR Number                     : 8279
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : 
Short Description             : moving TET code into the tree
Reported Date                 : 7/15/93
Found in Baseline             : 1.0.3
Found Date                    : 7/15/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : all files under src/test/tet
Sensitivity                   : public

[7/15/93 public]

Some of the functional and system tests will be modified to utilize TET in
DCE 1.0.3.  TET commands, libraries, and functions will be needed to build
and run the tests.  I took a copy of the TET code from the DME team.  They
got TET from XOpen and replaced the generic makefiles with ODE makefiles.
Refer to src/test/tet/README for more details.  The TET code will be in the
source tree (src/test/tet).

[10/12/93 public]

TET code is under src/test/tet.



CR Number                     : 8275
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : 
Short Description             : control variables multiply defined
Reported Date                 : 7/14/93
Found in Baseline             : 1.0.2
Found Date                    : 7/14/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : src/test/rpc/rtandidl/testsh/tsh.h
Sensitivity                   : public

[7/14/93 public]

The file tsh.h is included in various modules which are used to compose
the program testsh. The following variables

    int errorflag;
    int errdefault;

    int verboselog ;
    int verbosescrn ;
    int verbose ;
    int scroutput ;
    int outputmask ;

are declared both in tsh.h and main.c, the result being that each module
which includes tsh.h has it's own copy of these variables. In the mcase of
main.c (which also includes tsh.h) there are two copys of these variables
and the corresponding multiple definition complaints by the compiler, not
to mention the problems which can be expected at link time, and the
inability to for the modules other than main to be affected by the values
assigned to these variables during argument parsing.

Propsed Solution:

prefix the definitions of these variables in tsh.h with extern.

    extern int errorflag;
    extern int errdefault;

    extern int verboselog ;
    extern int verbosescrn ;
    extern int verbose ;
    extern int scroutput ;
    extern int outputmask ;

[9/29/93 public]

Fix submitted. Removed multiple definitions from tsh.h file. Tested on
hp/ux.

[11/11/93 public]
Closed.



CR Number                     : 8264
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dfs.lock
Short Description             : does not remove data file
Reported Date                 : 7/13/93
Found in Baseline             : 1.0.2b7
Found Date                    : 7/13/93
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.2b7
Affected File(s)              : src/test/systest/file/dfs.lock
Sensitivity                   : public

[7/13/93 public]
The dfs.lock file removes the datafile that it creates as part of the 
cleanup for an iteration.  It then tries to remove the file again (with
a bogus name to boot), and issues an error message when it fails.  This is
a harmless defect (hence the low pri/sev), but might alarm some users.

The fix is to remove the line "rm $data_base" from the main part of the
script.

[7/13/93 public]
In looking at the file, I notice that Gail found this problem and correctly
saw that the problem was that the data file NEVER got removed; no that thte
script tried to remove it twice.  I changed the short description
accordingly.  Gail submitted a fix that gets the data file removed, but
before closing the bug, I would like to get the errant remove line taken
out of the script as well.

[7/21/93 public]
Completed the fix and submitted.

[11/12/93 public]
Verified - defect closed.

[11/12/93 public]
Actually MARKED as closed.



CR Number                     : 8263
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : systest tools
Short Description             : conf_util.sh not installed
Reported Date                 : 7/13/93
Found in Baseline             : 1.0.2b7
Found Date                    : 7/13/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b1
Affected File(s)              : src/test/systest/tools/Makefile
Sensitivity                   : public

[7/13/93 public]
The conf_util.sh shell library file was submitted to the systest tools
area, but I forgot to add it to the list of files to be installed in the
Makefile.  The workaround is to copy it from the source tree.

[9/22/93 public]
This defct was addressed by a submission on 7/20/93.
It has since been in many a nughtly build, and is therefore
verifed.  Defect closed.



CR Number                     : 8259
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : /test/systest/file
Short Description             : "make" errors
Reported Date                 : 7/13/93
Found in Baseline             : 1.0.2a
Found Date                    : 7/13/93
Severity                      : A
Priority                      : 0
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.2a
Affected File(s)              : test/systest/file/Makefile
Sensitivity                   : public

[7/13/93 public]

[ /test/systest/file at 23:48 (PM) Monday ]
makepath file/. && cd file &&  exec make MAKEFILE_PASS=BASIC     build_all
make: don't know how to make dfs.read_write_all (continuing)
make: don't know how to make read_write_all.data (continuing)
`build_all' not remade because of errors.

[7/30/93 public]
Martha Dassarma submitted the updated Makefile for dfs.read_write_all



CR Number                     : 8215
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dfs.lock system test
Short Description             : need to seperate log, data, and temp files.
Reported Date                 : 6/29/93
Found in Baseline             : 1.0.2b6
Found Date                    : 6/29/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.2b7
Affected File(s)              : test/systest/file/dfs.lock
Sensitivity                   : public

[6/29/93 public]
Currently the dfs.lock system test puts all of it's temporary files in /tmp
and all of its data files (ie: the file to read and write, and the synch
file) and log files in the same directory (specified as the log directory).
In cases where the test is experiencing a large number of failures, or when
logs are being saved, this can result in the test failing because the logs
fill the filesystem where the data file is supposed to be created.

 The workaround is to allocate a large fileset (20Mb) for the test to run in.
 The fix is to allow the specification of three different directories;
 DATA_DIR, TMP_DIR, and LOG_DIR, to hold the three different types of files.

[7/13/93 public]
Submitted 7/2/93 after pmax and rios testing. Has passed a few nightly
builds.  Closed



CR Number                     : 8211
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dfs.lock system test
Short Description             : -f option does not work.
Reported Date                 : 6/29/93
Found in Baseline             : 1.0.2b6
Found Date                    : 6/29/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.2b7
Affected File(s)              : test/systest/file/dfs.lock
Sensitivity                   : public

[6/29/93 public]
Due to a variable misspelling in the dfs.lock script, the -f option does
not work.

[6/29/93 public]
Forgot to describe the workaround.  To get a particular config file used,
name it lock.data, and put it a directory in the search path of the
executing user.

[7/13/93 public]
Submitted 7/2/93 after pmax and rios testing. Has passed a few nightly
builds.  Closed



CR Number                     : 8210
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dfs.lock system test
Short Description             : does not print help message
Reported Date                 : 6/29/93
Found in Baseline             : 1.0.2b6
Found Date                    : 6/29/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.2b7
Affected File(s)              : test/systest/file/dfs.lock
Sensitivity                   : public

[6/29/93 public]
The dfs.lock script, if invoked as dfs.lock (as opposed to dfs.lock_cl,
which allows command line options beyond -f <config_file), does not provide
a way to get a usage message, short of entering a ridiculous option and
getting a usage message as part of the error output.

  The test should allow "dfs.lock -h" to print a usage message.

  This means that the -H option for dfs.lock_cl should switch function witb
the -h option (currently -H means "help", and -h means "hours to run").

[7/13/93 public]
Submitted 7/2/93 after pmax and rios testing. Has passed a few nightly
builds.  Closed

Also made -P specify the number of passes, instead of -p for consistency.



CR Number                     : 8208
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dfs.lock systest
Short Description             : driver should write terminate message
Reported Date                 : 6/29/93
Found in Baseline             : 1.0.2b6
Found Date                    : 6/29/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.2b7
Affected File(s)              : test/systest/file/dfs.lock
Sensitivity                   : public

[6/29/93 public]
The filewnr program has the ability to detect, via a message in a file,
that it is to exit.  In some cases, it is useful for the driver to use
this mechanism to stop the clients, but the driver never writes the 
message.  The fix is for the driver to write the terminate message 
to the synch file before it attempts to kill the client jobs.  This is 
a fail-safe to handle the case where the driver can't read the client
logs to get the remote PID's due to DFS failures.

[7/13/93 public]
Submitted 7/2/93 after pmax and rios testing. Has passed a few nightly
builds.  Closed



CR Number                     : 8201
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : thr
Subcomponent Name             : 
Short Description             : header files cts_test.h and
cma.h are included from src directory
Reported Date                 : 6/25/93
Found in Baseline             : 1.0.3
Found Date                    : 6/25/93
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : 150 files, listed in mail to dce-drb
Sensitivity                   : public

[6/25/93 public]
A bunch of files in the test/threads directory include the cma.h and
cts_test.h header files by stuffing a relative path to the 'src' directory
into the INCDIRS line.  This is a Bad Thing.  Both these header files are
exported so the programs which include them should be changed to use:

	#include <dce/cma.h>
	#include <dce/cts_tests.h>

Parenthetically, cts_tests.h includes cma.h so some cleanup work could be
done as well.

This is creating a problem for the HP port of the system tests because they
are trying to build so threads functional tests via VPATHs, but that's a
different story.

Follow-ups to Cindy McKeen.

[10/12/93 public]
These simple changes to 150 files have been detailed in mail to dce-drb.
Only 129 of those files are built and tested on the DCE reference platforms;
the rest are changed for the sake of consistency.

Cleanup work will be done in DCE 1.1

[11/12/93 public]
fixed->closed.



CR Number                     : 8191
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : hppa
S/W Ref Platform              : hpux
Component Name                : sec
Subcomponent Name             : query test
Short Description             : query test dumps core if executed without an argument
Reported Date                 : 6/22/93
Found in Baseline             : 1.0.2
Found Date                    : 6/22/93
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : /test/security/commands/rgy/query.c
Sensitivity                   : public

[6/22/93 public]

Executing the query test without an argument causes query to dump
core.  Also, query does not respond properly to the -help option.
It does give you the help text, but then goes ahead and attempts to
run the query test anyway.  Should give you the help text and exit.

[9/14/93 public]

Fix submitted and tested against 1.0.3 on hp/ux.

[11/11/93 public]
Closed.



CR Number                     : 8188
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : TEST SUITES
Short Description             : fts test10 confused about crmount/delmount cases
Reported Date                 : 6/21/93
Found in Baseline             : 1.0.2a
Found Date                    : 06/03/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.2a
Fixed In Baseline             : 1.0.2a
Affected File(s)              : some
Sensitivity                   : public
Transarc Herder               : andi@transarc.com
Transarc Status               : submit
Transarc Deltas               : andi-o-db3728-fts-test10-confused

[6/21/93 public]
**Description Text**
 Trying to "fts crm" with a -cell arg returns a "pass" for non-zero status,
 but the test still expects to be able to do a delmount on that mountpoint.
 
 Probably we should stop trying to delete something we know isn't there.
 
 This was introduced when the "-cell" arg went out of style.
**Solution Text**
 Changed expected return from deleting nonexistent mount points from
 $DFS_PSDD_EQ_ZERO to $DFS_PASS_EQ_NONZERO.
 
 Delta: andi-o-db3728-fts-test10-confused
Added field Transarc Herder with value `andi@transarc.com' 
Added field Transarc Status with value `export'

[6/22/93 public]
Changed Transarc Status from `export' to `import' 
Added field Transarc Deltas with value `andi-o-db3728-fts-test10-confused'

[6/29/93 public]
Changed Status from `open' to `fix' 
Filled in Fixed In Baseline with `1.0.2a' 
Filled in Affected File with `some' 
Changed Transarc Status from `import' to `submit'

[12/17/93 public]
Closed.



CR Number                     : 8187
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : TEST SUITES
Short Description             : FTS test 9 fails when VERB_ARG = "-verbose"
Reported Date                 : 6/21/93
Found in Baseline             : 1.0.2a
Found Date                    : 06/03/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.2a
Fixed In Baseline             : 1.0.2a
Affected File(s)              : some
Sensitivity                   : public
Transarc Herder               : andi@transarc.com
Transarc Status               : submit
Transarc Deltas               : andi-o-db3726-test9-chokes-on-verbose

[6/21/93 public]
**Description Text**
 fts delmount is called with $av_arg.
 
 av_arg="$AUTH_ARG $VERB_ARG"    $VERB_ARG="-verbose"
 
 fts delmount chokes on the -verbose switch.
**Solution Text**
 Removed $av_arg from arguments list for fts delmount.
 Delta: andi-o-db3726-test9-chokes-on-verbose
Added field Transarc Herder with value `andi@transarc.com' 
Added field Transarc Status with value `export'

[6/21/93 public]

[6/22/93 public]
Changed Transarc Status from `export' to `import' 
Added field Transarc Deltas with value `andi-o-db3726-test9-chokes-on-verbose'

[6/29/93 public]
Changed Status from `open' to `fix' 
Filled in Fixed In Baseline with `1.0.2a' 
Filled in Affected File with `some' 
Changed Transarc Status from `import' to `submit'

[12/17/93 public]
Closed.



CR Number                     : 8186
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : filewnr (dfs systest)
Short Description             : missing info, and incompatible flag usage
Reported Date                 : 6/21/93
Found in Baseline             : 1.0.2b5
Found Date                    : 6/21/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.2b6
Affected File(s)              : test/systest/file/filewnr.c
Sensitivity                   : public

[6/21/93 public]
Gail Driscoll actually found this while running (or attempting to run) the
dfs.glue system test.  When I made changes to the filewnr program to
enhance dfs.lock, I mixed up the options so that -D meant delete the file
written on exit, not -d.  This broke the dfs.glue test.  When I looked at
the code (after Gail alerted me to it) I noticed the following problems:

  -h (usage)        not described in the usage message
  -T quit string     "     "      "   "   "     "
  -C okay string     "     "      "   "   "     "
  -D delete          should have remained -d
  -d (debug)         superfluous 
  printed FAILED if -h specified

[06/21/93 public]
Fixed and submitted.

[11/12/93 public]
Verified - Defect closed.

[11/12/93 public]
Actually MARKED as closed.



CR Number                     : 8185
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cds
Subcomponent Name             : cp_test.sh
Short Description             : cp_Test.sh uses arp to get IP address
Reported Date                 : 6/21/93
Found in Baseline             : 1.0.3
Found Date                    : 6/21/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : test/directory/cds/cp_test.sh
Sensitivity                   : public

[6/21/93 public]
While looking at files fo rthe SNI merge, I noticed that this test
(src/test/directory/cds/cp_test.sh) uses the 'arp' command to get
a host IP address.

This is agly and in fact wont work in cretain situations.  What
it should use is the utility program 'getip' which is installed
for dce_config in /opt/dcelocal/bin.

[8/26/93 public]
Replaced arp with getip. The arp has some depedency, like, In OSF/1
and AIX (BSD), it residents in /usr/sbin and /sbin, In HP_UX (SYS5),
it's in /etc. The getip is utility suplied by DCE and this scripts
will have to run after the DCE is installed anyway.



CR Number                     : 8145
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : systest
Short Description             : need to update dfs.glue doc
Reported Date                 : 6/11/93
Found in Baseline             : 1.0.2a
Found Date                    : 6/11/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.2a
Fixed In Baseline             : 1.0.2a
Affected File(s)              : src/test/systest/file/README
Sensitivity                   : public

[6/11/93 public]

With the new acl changes, it became apparent that an extra step
is required in dfs.glue setup if root.dfs is in lfs. While I'm
at it, I want to doublecheck that the README is as complete as
the Porting and Testing Guide entry for dfs.glue AND to add the
option of NOT running the cache_mgr functional tests.

[6/16/93 public]
Assigned to gail for possible re-assignment within the systest
group.

[7/7/93 public]
Submitted README with NOTES on RSH requirement and ANY_OTHER acl
requirement. Enhancements to dfs.glue will be done under another
defect.

[7/30/93 public]
Changing from fix to closed state.



CR Number                     : 8137
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : other
S/W Ref Platform              : osf1
Component Name                : systest
Subcomponent Name             : systest
Short Description             : expmachinfo doesn't know about i386
Reported Date                 : 6/10/93
Found in Baseline             : 1.0.3
Found Date                    : 6/10/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : ./test/systest/tools/expmachinfo
Sensitivity                   : public

[6/10/93 public]

The tool expmachinfo doesn't know about i386 which causes the error:

unknown machine type (i386)

[08/11/93 public]
Fixed and Closed.



CR Number                     : 8083
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cds
Subcomponent Name             : test
Short Description             : dacl_ test problems
Reported Date                 : 6/2/93
Found in Baseline             : 1.0.2
Found Date                    : 6/2/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : Makefie, dacl_reads.sh, dacl_deletes.sh dacl_testing.sh dacl_replicas.sh, dacl_start.sh, dacl_setup.sh
Sensitivity                   : public

[6/2/93 public]
In dacl_creates.sh, the machine name, barge, is hardcoded in.  This causes
ACLs to fail since it looks for the wrong hostname.  Barge should be
replaced with the variable 'hostname.'

In both the dacl_reads and dacl_modifies tests, the NLS path is hardcoded
in.  It is not the correct path for everyone, and should be set in the
system configuration, not the testcase.  This causes messages to not be
found.  

dacl_reads.sh - the last line is missing the ending quote.

dacl_deletes.sh
  a.  Two echoes say, "Delete the object and directory", but the code
deletes the object and link, not the directory.

  b.  An echo says, "cdscp delete dir /.:/dacl_deletes."  The code actually
does cdscp delete dir /.:/dacl_deletes/dir1.  It attempts to delete dir1.
It makes sense that this is the directory which should be deleted, being
consistent with the use of obj1 and lnk1.  However, permissions have not
been changed for dir1 yet.  The echo should be changed and the permissions
should be set for dir1.

  c.  Before trying to prove the directory cannot be deleted, administer
permissions should be removed from the parent directory.  Currently
administer permissions are being granted.

  d.  Going on the assumption that dir1 was the directory to be tested, the
permissions should be changed after the failing delete in order to confirm
successful deletion of dir1.  Then as cleanup the dacl_deletes directory
should be deleted.  It now just deletes dacl_deletes and does not test
delete of dir1.


dacl_testing.sh calls dacl_replicas.sh passing chd (default clearinghouse)
instead of ch1, the clearinghouse which is specified in teh dacl_replicas
prolog.  Also, the dacl_replicas prolog shows the call as replicasreplicas
instead of dacl_replicas.

dacl_replicas.sh
  a.  At the point where create replica is expected to succeed, all the
required permissions are in place except that the server principal does not
have write permission to the clearinghouse that stores the replica being
designated as the new master replica (ch1) for Set Dir to New Epoch.  (In
this case, ch1 is both the current master and the designated new master.)
Therefore, Set Dir to New Epoch Master will fail after the successful
Create.  The next Set Dir to New Epoch Master is expected to fail and
should since it is using ch2 as the clearinghouse that stores the
designated new master, and the server principal does not have write
permission.  However, the test then does an acl_edit to give the server
principal write permission to ch1 in an attempt to make the command
succeed.  The permission to ch1 should be granted before the first Set Dir
to New Epoch, and later write should be granted to ch2 to enable the last
Set Dir to New Epoch to succeed.

  b.  Unless I grant wc permission for notroot on ch2, I encounter errors
in the testcase.  Perhaps dacl_start.sh should do this grant on ch2 rather
than chd.  See previous difference in how dacl_testing calls dacl_replicas
and how the dacl_replicas prolog says it should be called - ch1 versus chd.

[8/26/93 public]
Some problems stated above were fixed by sommerfeld, some problems are not
true, other problems and a few of new problems discovered during time working
on this bug has been fixed as,
(1) Hardcode problems were fixed by sommerfeld
(2) dacl_reads.sh: fixed the truncated last line.
(3) dacl_deletes.sh: - Fixed wrong eccho messaages 
		     - dir1 was removed totaly by sommerfeld
		     - delete permission is a must to delete a
		       dir
(4) dacl_testing.sh: - passed right parameters to dacl_replicas.sh now
		     - fixed dacl_replicas prolog 
(5) dacl_replicas.sh: - In order to have "set dir to new epoch" work, the
		        server principal needs write permission to each
		        clearinghouse where the replica type is changed to
		        read-only, not the clearinghose that stores new master
		        replica. See Admin. Ref. p2-58
		      - wc permission to ch2 cannot be granted on beginning
			of the replica test in order to have those failure
			tests.
(6) dacl_start.sh: this script is named as dacl_setup.sh in DCE Proting and
		   Testing Guide p4-21. It's easier to rename the script than
		   fix doc. So renamed it to dacl_setup.sh. And fixed
		   Makefile to match with the new name.



CR Number                     : 8057
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : pmax
S/W Ref Platform              : osf1
Component Name                : dfs
Subcomponent Name             : rep
Short Description             : fts release fails intermittently
Reported Date                 : 5/25/93
Found in Baseline             : 1.0.2a
Found Date                    : 5/25/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.2a
Fixed In Baseline             : 1.0.3
Affected File(s)              : src/test/file/rep/rtest3
Sensitivity                   : public
Transarc Deltas               : 
Transarc Herder               : jaffe@transarc.com
Transarc Status               : open

[5/25/93 public]
Two machine cell, RIOS and PMAX - running rep functional tests 
from RIOS.  Caught a "repserver forward fileset" error from
an fts release command in rtest3.  I've seen this sporadically 
in the past from other replication functional tests.  I'll put 
the test output in ~notuser/rep_failures/rtest3.out.

[5/25/93 public]
Just assigning to me.  This is a test defect, not a code defect.
Changed CR in Code, Doc, or Test? from `code' to `test' 
Filled in Interest List CC with `pakhtar@transarc.com' 
Changed Responsible Engr. from `pakhtar@transarc.com' to `cfe@transarc.com' 
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `jaffe@transarc.com' 
Added field Transarc Status with value `open'

[5/26/93 public]
If this is an expected (normal?) failure from fts release, it
should probably be documented somewhere.  I'll open a doc bug.
I'm assuming the workaround  is simply to re-run fts release?
I'm dropping the priority since there's a workaround.

[5/27/93 public]
I'm still looking over the rtest3.out file, but the problem of encountering
a busy fileset when you're doing some fileset operation is indeed inherent
in the system.  I don't know if any assertions about that appear in the
documentation.  It's a test defect that the tests don't deal with these
essentially expected failures.  The work-around is indeed to re-execute the
command that failed.
Changed Interest List CC from `pakhtar@transarc.com' to `pakhtar@transarc.com, 
 jeff@transarc.com'

[5/27/93 public]
I've e-mailed with Craig and agreed to fix this myself.

[8/3/93 public]
Added code to serialize invocations of fts release in rtest3.
Fixed.

[12/17/93 public]
Closed.



CR Number                     : 8039
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : sec_salvage_db test
Short Description             : sec_salvage_db test #1 failed.
Reported Date                 : 5/21/93
Found in Baseline             : 1.0.2
Found Date                    : 5/21/93
Severity                      : B
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : 
 ./test/security/api/moretests/salvager.sh
 ./test/security/api/moretests/salvager_sample.prt
 ./test/security/api/testsh/main.c
 ./security/h/rs_reserved.h
Sensitivity                   : public

[5/21/93 public]
Need to change foreign cell name in sec_salvage_db's fake db to "zzzzzzz",
so all the reasonable cell name will be print out ahead of this build-in
cell name when do "sec_salvage_db -print".  So the test will pass in all
the cell environment.

[8/5/93 public]
Files submitted.  Marked fix.

[11/11/93 public]
Closed.



CR Number                     : 8019
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : rep
Short Description             : rep tests clean up replicas in wrong order
Reported Date                 : 5/19/93
Found in Baseline             : 1.0.2
Found Date                    : 5/19/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.2a
Fixed In Baseline             : 1.0.2a
Affected File(s)              : some
Sensitivity                   : public
Transarc Deltas               : cfe-ot8019-bad-rep-test-cleanups
Transarc Herder               : jaffe@transarc.com
Transarc Status               : submit

[5/19/93 public]
At least one rep test (rtest2) cleans up the R/O sites of a release-replicated
setup in a bad order, causing the repserver to log horrible-looking messages.
There are no other ill effects.
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `jaffe@transarc.com' 
Added field Transarc Status with value `open'

[5/24/93 public]
Defect Closure Form
-------------------
--Regression test program below--
Rep tests no longer produce horrible messages in the RepLog, claiming that
some release-replicated fileset exists with no staging replica.
 
Associated information:
Tested on TA build:  dfs-carl2, a.k.a. dfs-carl 1.10
Tested with backing build:  dce1.0.2a-0427
Filled in Transarc Deltas with `cfe-ot8019-bad-rep-test-cleanups' 
Changed Transarc Status from `open' to `export'

[6/14/93 public]

[6/15/93 public]
Changed Transarc Status from `export' to `import'

[6/21/93 public]
We'de like to get this into 1.0.2a, since it is a functional test failure, and
all functional tests are supposed to pass.
Changed Fix By Baseline from `1.0.3' to `1.0.2a'

[6/29/93 public]
Changed Status from `open' to `fix' 
Filled in Fixed In Baseline with `1.0.2a' 
Filled in Affected File with `some' 
Changed Transarc Status from `import' to `submit'

[12/17/93 public]
Closed.



CR Number                     : 7997
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : rpc.sec.2 and rpc.cds.3 system tests
Short Description             : do not setup correctly in a cell with security replicas
Reported Date                 : 5/13/93
Found in Baseline             : 1.0.2
Found Date                    : 5/13/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : rpc.sec.2_sec_util.sh, rpc.cds.3_sec_util.sh
Sensitivity                   : public

[5/13/93 public]
During final system tests on the release tapes, we found that the setup 
scripts for the rpc.sec.2 and rpc.cds.3 system tests fail because the 
security utilities used to add pricipals and keys to the registry do not
specify the -update option to rgy_edit.  The fix is to make all the
rgy_edit calls specify the -update option.

[9/23/93 public]
To be more specific, any invocation of rgy_edit in rpc.sec.2_sec_util.sh or
rpc.cds.3_sec_util.sh that adds or modifies the registry must have the 
'-u' option specified on the command line.

[11/10/93 public]
Submitted by Cindy Mckeen 10/5/93, run on all platforms many times since
then.  Defect Closed.



CR Number                     : 7993
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : rpc.cds.3 and rpc.sec.2 system tests
Short Description             : do not clean up namespace
Reported Date                 : 5/13/93
Found in Baseline             : 1.0.2b23
Found Date                    : 5/13/93
Severity                      : D
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b1
Affected File(s)              : rpc.cds.3_smain.c, rpc.sec.2_smain.c, sig_hndlr.c, maintain_id.c
Sensitivity                   : public

[5/13/93 public]
The servers for the rpc.sec.2 and rpc.cds.3 system tests do not do any
unexporting from the namespace.  This was an intentional ommission during
implementation of the tests, since leaving the objects, etc. exported by
the servers speeds startup, but it should be possible to specify that the
namespace is to be cleaned-up.

[12/22/93 public]
Submitted fixes for this as well as some other small problems discovered
while looking at the code.  Tested on HP, OSF/1, RIOS.  Fixed

[1/10/94 public]
These changes have been in the build for a few weeks with no problems.
Defect closed.



CR Number                     : 7954
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dfs
Subcomponent Name             : lfs
Short Description             : strategy daemon panic on deleted file
Reported Date                 : 5/7/93
Found in Baseline             : 1.0.2
Found Date                    : 5/7/93
Severity                      : A
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.2
Fixed In Baseline             : 1.0.2a
Affected File(s)              : some
Sensitivity                   : public
Transarc Deltas               : bwl-ot7954-biodaemon-panic
Transarc Herder               : jaffe@transarc.com
Transarc Status               : submit

[5/7/93 public]
If the strategy daemon gets a request to clean a dirty page for a file that
has been deleted, the call to efs_getvolume panics.  (A null volume handle is
passed to epiv_GetIdent and it doesn't like it.)
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `jaffe@transarc.com' 
Added field Transarc Status with value `open'

[5/18/93 public]
Defect Closure Form
-------------------
--Verification procedure below--
We have run 24 hour CHO on this problem, and we no longer see this problem
Associated information:
Tested on TA build:  dfs-carl-1.10
Tested with backing build:  dce1.0.2-0427
Changed H/W Ref Platform from `pmax' to `rs6000' 
Changed S/W Ref Platform from `osf1' to `aix' 
Changed Status from `open' to `fix' 
Filled in Fixed In Baseline with `1.0.2a' 
Filled in Affected File with `some' 
Filled in Transarc Deltas with `bwl-ot7954-biodaemon-panic' 
Changed Transarc Status from `open' to `submit'

[12/17/93 public]
Closed.



CR Number                     : 7858
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : EPISODE
Short Description             : test_anode needs better testing of clone volops
Reported Date                 : 03/20/92
Found in Baseline             : 1.0.2a
Found Date                    : 03/20/92
Severity                      : C
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.2a
Fixed In Baseline             : 1.0.3a
Affected File(s)              : file/episode/anode/basic.test, file/episode/anode/test_anode.c
Sensitivity                   : public
Transarc Status               : submit
Transarc Deltas               : ota-db3204-volume-qualify-fids
Transarc Herder               : andi@transarc.com

[5/3/93 public]
**Description Text**
 Augment test_anode.c so that fid naming can be qualified by volume
 name/id.  Otherwise it won't allow the obvious clone operation which is
 create an anode in one volume whose fid is the same as that of an anode
 in another volume.
 
 The need for this is driven by investigation of OT 7353, which reports
 an assertion failure during anomolous clone operations.
 
 ota 930302:
 
 Fixed in delta ota-db3204-volume-qualify-fids.
Added field Transarc Herder with value `andi@transarc.com' 
Added field Transarc Status with value `IMPORT'

[5/4/93 public]
imported into dfs-carl 1.8
Filled in Affected File with `file/episode/anode/basic.test, 
 file/episode/anode/test_anode.c' 
Changed Transarc Herder from `andi@transarc.com' to 
 `andi@transarc.comjaffe@transarc.com' 
Changed Transarc Status from `IMPORT' to `IMPORTimport' 
Added field Transarc Deltas with value `ota-db3204-volume-qualify-fids'

[5/4/93 public]
Changed Transarc Herder from `andi@transarc.comjaffe@transarc.com' to 
 `andi@transarc.com' 
Changed Transarc Status from `IMPORTimport' to `import'

[5/11/93 public]
Changed Status from `open' to `fix' 
Filled in Fixed In Baseline with `1.0.2a'

[12/17/93 public]
Closed.



CR Number                     : 7834
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : sec
Subcomponent Name             : sec.rgy.7
Short Description             : sec.rgy.7 fails to build on
the dce1.0.2 release
Reported Date                 : 4/29/93
Found in Baseline             : 1.0.2
Found Date                    : 4/29/93
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : 
/test/systest/security/sec.rgy.7/Makefile
Sensitivity                   : public

[4/29/93 public]

Using the DCE 1.0.2 release tape ./test/systest/security/sec.rgy.7 
fails to build if the directory /project/dce/build/dce1.0.2 is not 
mounted on the machine one is building.

The Makefile in sec.rgy.7 has the following line:

INCFLAGS = -I/project/dce/build/dce1.0.2/src/security/h

That needs to change to be a relative path or export the later
needed include file during the build phase and look for the file
there.

With the correct path to the include directory the test builds.

[10/4/93 public]
Fix already submitted. This CR is being closed.



CR Number                     : 7784
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : rpc.cds.3 and rpc.sec.2 system tests.
Short Description             : do not specify correct binary and log directories in the config files.
Reported Date                 : 4/22/93
Found in Baseline             : 1.0.2b23
Found Date                    : 4/22/93
Severity                      : D
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : src/test/systest/rpc/rpc.sec.2/rpc.sec.2.conf, src/test/systest/rpc/rpc.cds.3/rpc.cds.3.conf
Sensitivity                   : public

[4/22/93 public]
The configuration files for the rpc.sec.2 and rpc.cds.3 system tests as
shipped do not specify the correct log and binary directories.  The
configuration files should specify the binary and log directories as 
/dcetest/dcelocal/... to be consistent with the other system tests.

[9/23/93 public]
It looks like the bin path was fixed for rpc.sec.2, but not the logfile,
and nothing has been fixed in rpc.cds.3.  Re-assigned to Cindy Mckeen as
per Peter Shaw.

[10/12/93]

The log and binary directories for both rpc.cds.3 and rpc.sec.2 have been
updated to the appropriate place under /dcetest/dcelocal.



CR Number                     : 7778
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dcetest_config
Short Description             : The script dcetest_config does
not install the cds and xds tests
Reported Date                 : 4/21/93
Found in Baseline             : 1.0.2
Found Date                    : 4/21/93
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dcetest_config
Sensitivity                   : public

[4/21/93 public]

The dcetest_config script does not install all the files in the
install directory, for instance it does not install the cds and
xds tests.

[7/29/93 public]
Belongs in the dce category, not CDS.

[08/11/93 public]
Assigned to Cindy.

[10/12/93 public]

Fixed dcetest_config to install all the  system tests.



CR Number                     : 7747
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : rpc.cds.3 server and client
Short Description             : not enough time allowed for ticket refresh
Reported Date                 : 4/16/93
Found in Baseline             : 1.0.2b23
Found Date                    : 4/16/93
Severity                      : D
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b5
Affected File(s)              : src/test/systest/rpc/rpc.cds.3/rpc.cds.3_{c,s}main.c
Sensitivity                   : public

[4/16/93 public]
There is not enough time allowed in the rpc.cds.3 server and client code
for the ticket to be refreshed before the ticket expires.  The ticket 
should be refreshed halfway throught it's lifetime, as is the case for
rpc.sec.2.

[4/18/93 public]
Fix is in 

  src/unintegrated/test/systest/rpc/rpc.cds.3/rpc.cds.3_cmain.c

in the DCE1.0.2 src archive.  The server main appears to work okay as is.

[10/1/93 public]
Merged DCE 1.0.2 unintegrated tree fix into DCE 1.0.3 version and
submitted.  Defect fixed.  Verified by Cindy Mckeen on HP-UX, OSF/1, and
AIX.  Defect can be closed after passing nightly build.

[10/1/93 public]
Verified - defect closed.

[11/12/93 public]
Actually MARKED as closed.



CR Number                     : 7744
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : rpc.cds.3 server and client
Short Description             : fail if some command line
parameters are not specified
Reported Date                 : 4/16/93
Found in Baseline             : 1.0.2b23
Found Date                    : 4/16/93
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b5
Affected File(s)              : src/test/systest/rpc/rpc.cds.3/rpc.cds.3_{s,c}main.c
Sensitivity                   : public

[4/16/93 public]
If the -D, -I or -n options to the rpc.cds.3 server or client programs
are not specified on the command line, the programs seg fault.  This is 
because the default values for the parameters specifed by these options, 
though specified in the configuration file, are not read or used.  The fix
is to read these values from the config file, and then use them if values
are not specified on the command line.

[4/18/93 public]
Fix is in 

  src/unintegrated/test/systest/rpc/rpc.cds.3/rpc.cds.3_cmain.c
  src/unintegrated/test/systest/rpc/rpc.cds.3/rpc.cds.3_smain.c

in the DCE1.0.2 src archive.  Defaults are read from the config file 
for the initial calendar number and number of calendars to read.  The 
calendar data directory defaults to '.'.

[10/1/93 public]
Merged DCE 1.0.2 unintegrated tree fix into DCE 1.0.3 version and
submitted.  Defect fixed.  Verified by Cindy Mckeen on HP-UX, OSF/1, and
AIX.  Defect can be closed after passing nightly build.

[11/12/93 public]
Verified via use - Defect closed.

[11/12/93 public]
Actually MARKED as closed.



CR Number                     : 7743
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : rpc.sec.2 and rpc.cds.3 test servers
Short Description             : don't allow intercell access
Reported Date                 : 4/16/93
Found in Baseline             : 1.0.2
Found Date                    : 4/16/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.1b1
Affected File(s)              : 
src/test/systest/rpc/rpc.sec.2/rpc.sec.2_smain.c, src/test/systest/rpc/rpc.cds.3/rpc.cds.3_smain.c, rpc.sec.2_cmain.c,rpc.cds.3_cmain.c
Sensitivity                   : public

[4/16/93 public]
It occurred to me, while considering the remifications of running the 
rpc.sec.2 and rpc.cds.3 tests in an intercell configuration, that they
won't!  The reason is that when the protection level is anything but 
protect_level_none, the server checks to make sure that the client 
principle name is /.../<servers's cell>/<client_principle>, which
effectively restricts access, in the authenicated case at least, to 
clients within the server's cell.  The correct check for the server to
do is to just check the cell-relative part of the client principle name
in the incoming call request, not the global name.  

This change to the server code for these two tests did not make it into 
the DCE1.0.2 integrated source tree; however; there are versions of the 
two server main's in the directories

 <path-to-dce-root>/dce1.0/src/unintegrated/test/systest/rpc/rpc.sec.2
 <path-to-dce-root>/dce1.0/src/unintegrated/test/systest/rpc/rpc.cds.3

that contain the changes.  These will be submitted to the integrated source
tree after the DCE1.0.2 release.

[12/22/93 public]
Fixed during down time after 1.0.3 - client now queries server for
principal name to use in authentication, and the server does not require
the client to be in the local cell.  Tested on RIOS, HP, and 486.  Fixed.

[1/10/94 public]
The fix for this defect has been in the tree for a couple of weeks now.
There have been no build problems, so I'm closing it.



CR Number                     : 7739
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 7398
Project Name                  : dce
H/W Ref Platform              : pmax
S/W Ref Platform              : osf1
Component Name                : dfs
Subcomponent Name             : Acl Test
Short Description             : User "nobody" with id 32767 causes ACL tests to fail on OSF/1
Reported Date                 : 4/16/93
Found in Baseline             : 1.0.2
Found Date                    : 4/16/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.2
Fixed In Baseline             : 1.0.2a
Affected File(s)              : test/file/acl/README.tmp, + others
Sensitivity                   : public
Transarc Deltas               : rajesh-ot7739-acl-test-setup-failure-on-pmax
Transarc Herder               : jaffe@transarc.com
Transarc Status               : submit

[4/16/93 public]
The elusive bug that prevented ACL tests from running on OSF/1 has
finally been found. The setup phase of ACL tests choose uids for the
test users it creates in the registry by finding the max. of the uids
in the local /etc/passwd file and registry database and using the next
5 succesive numbers.  By default the max user id allowed by the
registry is set to 32767 and the /etc/passwd file on PMAX have a user
nobody with id 32767. This causes ids 32768 to 32772 to be used as user
ids for the 5 tests users needed by ACL tests. The rgy_edit command to 
add a test user fails with the following messages:
(rgy_edit) Unable to add principal  "acluou" - Invalid data - record too long (
Registry Edit Kernel) (dce / sad)
Domain changed to: account
?(rgy_edit) Unable to add account "acluou" - Principal does not exist (Registry
Edit Kernel) (dce / sad)
But the ACL setup code does not check for errors from the rgy_edit
command and continues. (The messages are NOT even in the log as the
test redirects stdout and stderr of the rgy_edit command to
/dev/null).  And since these users do not exist in the registry,
subsequent tests fail.
This problem does not occur on the rios as there is no user in the passwd
file with a 32767 id.
This is almost certainly the problem that Ron Arbo experienced (OT 7398).
Instead of reopening that one, we just opening a new one.
A quick fix is in the pipeline.
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `jaffe@transarc.com' 
Added field Transarc Status with value `open'

[4/18/93 public]
Defect Closure Form
-------------------
--Verification procedure below--
Details of the QUICK fix: The test setup phase now does not consider
32767 while finding the max.  id in the local passwd file. It then
checks if the id of any test user to be created by the ACL tests would
exceed 32767 and if so, it generates an error. The max id allowed by
registry is a configurable parameter in the ACL tests.
The modified tests passed on a pmax client and a rios server with no
regressions.  
Associated information:
Tested on TA build:  dfs-102-2.9
Tested with backing build: dce1.0.2b21 
Filled in Transarc Deltas with `rajesh-ot7739-acl-test-setup-failure-on-pmax' 
Changed Transarc Status from `open' to `export'

[4/20/93 public]
in dfs-102-2.10
Changed Status from `open' to `fix' 
Filled in Fixed In Baseline with `1.0.2a' 
Filled in Affected File with `test/file/acl/README.tmp, + others' 
Changed Transarc Status from `export' to `submit'

[12/17/93 public]
Closed.



CR Number                     : 7725
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : rpc
Subcomponent Name             : test/rpc/idl
Short Description             : makefiles need updating
Reported Date                 : 4/15/93
Found in Baseline             : 1.0.2
Found Date                    : 4/15/93
Severity                      : D
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : test/rpc/idl/maketest.mk
Sensitivity                   : public
DEC does not own responsibility for the test suite. Please reassign this
to someone at OSF.

[4/15/93 public]
Makefiles in the RPC idl FVT test subdirectories: context, cover1, no_op,
pipefault, pipes, pipetest, and threads need updating to include the file
RUN_ARGS in the install variable ILIST. These tests appear to fail when
executed after a test installation because the RUN_ARGS file contains
the necessary runtime environment definitions. These do execute sucessfully
from the object tree.

[08/20/93 public]
Easy fix:
60c70
< ILIST         = ${PROGRAMS}
---
> ILIST         = ${PROGRAMS} ${DATAFILES}

Closed.



CR Number                     : 7724
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : rpc.cds.3 and rpc.sec.2 system tests
Short Description             : server buffers output
Reported Date                 : 4/15/93
Found in Baseline             : 1.0.2b23
Found Date                    : 4/15/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3b5
Affected File(s)              : src/test/systest/rpc/rpc.sec.2/rpc.sec.2_smain.c, src/test/systest/rpc/rpc.cds.3/rpc.cds.3_smain.c
Sensitivity                   : public

[4/15/93 public]
When started the rpc.sec.2 and rpc.cds.3 servers buffer their output.  This
means that the user does not see the output till the buffer fills and is 
dumped, and thus may not see indication of what caused problems in the 
startup.  Both servers should call setbuf(stdout, NULL) before doing
output.

[4/18/93 public]
Fix is in 

  src/unintegrated/test/systest/rpc/rpc.sec.2/rpc.sec.2_smain.c
  src/unintegrated/test/systest/rpc/rpc.cds.3/rpc.cds.3_smain.c

in the DCE1.0.2 src archive.  The server mains no longer buffer stdout.

[10/1/93 public]
Merged DCE 1.0.2 unintegrated tree fix into DCE 1.0.3 version and
submitted.  Defect fixed.  Verified by Cindy Mckeen and MArk Hickey
on HP-UX, OSF/1, and AIX.  Defect can be closed after passing nightly build.

[11/12/93 public]
Verified via use - closed.



CR Number                     : 7721
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : rpc.sec.2 system test
Short Description             : driver only creates log dir if
passed on the command line
Reported Date                 : 4/15/93
Found in Baseline             : 1.0.2b23
Found Date                    : 4/15/93
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : src/test/systest/rpc/rpc.sec.2/rpc.sec.2_runtest.sh
Sensitivity                   : public

[4/15/93 public]
Found that the code to create the log directory if it is non-existent only
kicks in if the log dir is specified on the command line.  This needs to
be moved outside of the command line parsing loop.

[4/22/93 public]
Moved the code to create the path to the log and tmp diretories out of
the command line parsing loop so that the directories get created if they
are read from the configuration file.  Also moved the log directory
creation code so that the messages about creation get output after the 
"hi" messages.  This version will only be in the unintegrated tree for the
DCE1.0.2 release, since the 'src' tree is already froxen.  The fix is 
in the file:

<dce-root-dir>/src/unintegrated/test/systest/rpc/rpc.sec.2/rpc.sec.2_runtest.sh

This fix will be submitted to the regular source tree after DCE1.0.2 ships.

[08/23/93 public]
This defct was opened against the wrong component.  Changed the component
to the correct "dce".

[9/23/93 public]
Re-assigned to Cindy Mckeen as per Peter Shaw.

[10/18/93 public]

Moved the code to create the log and tmp directories out of the parsing
loop and after the "hi" messages.  The log and tmp directories are now
created if the paths are specified in the configuration file or on command
line.

[11/11/93 public]

The fix has been verfied.



CR Number                     : 7687
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : systest
Subcomponent Name             : dcetest_config
Short Description             : should not muck with value of the DCELOCAL environmental variable
Reported Date                 : 4/12/93
Found in Baseline             : 1.0.2b23
Found Date                    : 4/12/93
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : src/test/systest/dcetest_config
Sensitivity                   : public

[4/12/93 public]
The dcetest_config script sets the DCELOCAL environmental variable to be
/dcetest/dcelocal.  This is wrong because the DCELOCAL variable is supposed
to point to the base of the dce binary tree; ie: /opt/dcelocal, or
wherever.  Resetting this variable causes the dcegdsh1 testcase to break, since
it assumes that DCELOCAL has it's usual meaning.

The version of the dcegdsh1 testcase in the unintegrated archive on the 
DCE 1.0.2 release tape contains the workaround; hardcode /opt/dcelocal into
the dcegdsh1 testcase.  The correct fix is for dcetest_config to use some
other variable name to store whatever value it currently uses DCELOCAL for.

[08/11/93 public]
Changed owner to Cindy since this is a dcetest_config issue.

[10/12/93 public]

Created DCE_TEST_LOCAL that contains the path to the tests so that DCELOCAL
is not changed.



CR Number                     : 7671
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : other
S/W Ref Platform              : other
Component Name                : systest
Subcomponent Name             : test/systest
Short Description             : TRUE and FALSE are undefined
Reported Date                 : 4/8/93
Found in Baseline             : 1.0.1
Found Date                    : 4/8/93
Severity                      : D
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : see below for list of files
Sensitivity                   : public

[4/8/93 public]

See note at the end.

Full Description:

     There are several files in the system test directories which use the
     constants TRUE and FALSE.  These constants are not defined in any of
     these files or the include files.  This results in compiler errors.

Proposed Solution:

     We propose that TRUE and FALSE are defined explicitly within each of
     the files that use them.  This can be accomplished by:

     #ifndef TRUE
     #  define TRUE 1
     #endif

     and the same for FALSE.  A less elegant solution is to put flags in the
     Makefiles.


I checked why it does not arise on the RIOS and the PMAX.

On the RIOS, they are defined in <sys/types.h> in an

#ifdef _ALL_SOURCE

section - the DCE build of systest includes -D_ALL_SOURCE.

On the PMAX, it is defined in <sys/types.h> in an

#ifdef _OSF_SOURCE

section - as far as I can tell, _OSF_SOURCE is defined in the
gcc preprocessor (!).

[04/08/93 public]
_OSF_SOURCE (and _ALL_SOURCE) are defined in /usr/include/standards.h
when no other standards pre-processor macro (such as POSIX_SOURCE)
is defined.

The rule is, if you say nothing, you get everything (OSF_SOURCE).

[8/5/93 public]
I don't know if it's relevant but on the HP's it works opposite.  If you
don't define anything, you don't get anything.  Several of the headers in
/usr/include and /usr/include/sys do define TRUE and FALSE, although I
don't know if they are surrounded by #ifdef's.  

RFC 34 says that dce.h will define TRUE and FALSE and that anything that
needs them defined must include dce.h.  This must be fixed in DCE 1.1 if
not before.

[08/05/93 public]
And if you use DCE RPC then you pretty much always
get true and false as constants, for free...

[08/11/93 public]
Changed owner to Cindy since she is working on the tests.

[10/15/93 public]

Included <dce/std.h> to pick up the definitions of TRUE and FALSE in the
following files:

./test/systest/directory/gds/dcegdshd/shd_util.c
./test/systest/directory/gds/dcegdshd/shd_util.h
./test/systest/directory/gds/dcegdshd/view_obj.c
./test/systest/file/filewnr.c
./test/systest/rpc/bank.c
./test/systest/rpc/bankd.c
./test/systest/rpc/bnk_util.c
./test/systest/rpc/rpc.cds.3/rpc.cds.3_set_cal_uuid.c
./test/systest/rpc/rpc.cds.3/rpc.cds.3_smain.c
./test/systest/rpc/rpc.sec.2/rpctest.h
./test/systest/rpc/util.c
./test/systest/security/sec.rgy.7/login_test.c
./test/systest/security/sec.rgy.7/rgy_clt.h
./test/systest/security/sec.rgy.7/secrgy_client.c
./test/systest/security/sec.rgy.7/secrgy_server.c
./test/systest/threads/thd_client.c
./test/systest/threads/thd_server.c
./test/systest/threads/thd_util.c
./test/systest/tools/msgqd.c
./test/systest/tools/ropen_main.c
./test/systest/tools/util.c
./test/systest/tools/xx_lib_r.c



CR Number                     : 7652
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : pmax
S/W Ref Platform              : osf1
Component Name                : dfs
Subcomponent Name             : 
Short Description             : Install of DFS tests needs fixing
Reported Date                 : 4/5/93
Found in Baseline             : 1.0.2
Found Date                    : 4/5/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : test/file/Makefile
Sensitivity                   : public

[4/5/93 public]
I noticed a couple of problems with the DFS test install:

(1) The rep tests apparently aren't being installed at all.

(2) The test/file directory contains the scripts runone and
runavg.  They are essentially uncommented and undocumented.  
They appear to be master scripts of some sort for running
low and fs tests.  We need to figure out whether they should
be there, and what documentation (README, in-line comments, etc.)
should be included with them.

(3) The README files in many of the test directories are not
being installed (fts, cm, maybe others).

[4/5/93 public]
Re-assigned to Gail.

[4/12/93 public]
Adjusted Makefiles to solve (1) and (3) above have been submitted. No
consensus has been reached on (2). Downgrading severity/priority since majority
of the problems has been addressed.

[9/28/93 public]
Defuncted runavg, runone and updated test/file/Makefile - status = fix.

[10/1/93 public]
Verified nightly build install tree does not contain either - closing.



CR Number                     : 7570
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : lfs
Short Description             : insufficient quota in shutdown.test script
Reported Date                 : 3/23/93
Found in Baseline             : 1.0.2
Found Date                    : 3/23/93
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.2
Fixed In Baseline             : 1.0.2
Affected File(s)              : file/episode/anode/{mp.int.test,mp.test,mp_repeat.test,mt.test,shutdown.test}
Sensitivity                   : public
Transarc Deltas               : ota-ot7570-measure-mp.int.test-quota-usage
Transarc Herder               : jaffe@transarc.com
Transarc Status               : submit

[3/23/93 public]
I found still another case where I didn't allow enough quota on a volume
in a script using mp.int.test for the worst case.  Make definitive
measurement and fix all affected scripts.  Update comment in
mp.int.test.
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `jaffe@transarc.com' 
Added field Transarc Status with value `open'

[3/23/93 public]
Defect Closure Form
-------------------
--Regression test program below--
The all_tests scripts should verify that this problem is fixed.  To test
this specific change I ran all the test_anode scripts that invoke
mp.int.test without trouble.
Associated information:
Tested on TA build:  
dfs-102-2.8
Tested with backing build:  
dce1.0.2b19
Filled in Transarc Deltas with `ota-ot7570-measure-mp.int.test-quota-usage' 
Changed Transarc Status from `open' to `export'

[3/26/93 public]
Changed Transarc Status from `export' to `import'

[3/31/93 public]
submitted on March 31 1993
Changed Status from `open' to `fix' 
Filled in Fixed In Baseline with `1.0.2' 
Filled in Affected File with 
 `file/episode/anode/{mp.int.test,mp.test,mp_repeat.test,mt.test,shutdown.test}'
Changed Transarc Status from `import' to `submit'

[4/7/93 public]
This is ota using shl's console.
Defect Closure Form
-------------------
A variant of this problem cropped up again and I have made another
change to this delta.  This delta is revision 1.2.
--Verification procedure below--
I ran mt.test and it succeeded.  Bruce Eppinger is running the whole
suite of test_anode tests (all_tests) concurrently.
Associated information:
Tested on TA build:  
dfs-102-2.9 (unreleased)
Tested with backing build:  
dce1.0.2b21
Changed Interest List CC from `jaffe, mason' to `jaffe, mason, shl, bruce' 
Changed Status from `fix' to `open' 
Changed Fixed In Baseline from `1.0.2' to `' 
Changed Transarc Status from `submit' to `export'

[4/7/93 public]
Imported into dfs-102-2.9.
Changed Transarc Status from `export' to `import'

[4/15/93 public]
submitted on 4/07/93
Changed Status from `open' to `fix' 
Filled in Fixed In Baseline with `1.0.2' 
Changed Transarc Status from `import' to `submit'

[12/17/93 public]
Closed.



CR Number                     : 7489
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : rpc
Subcomponent Name             : perf test
Short Description             : forwarding test w/ dynamic endpoint fails
Reported Date                 : 3/12/93
Found in Baseline             : 1.0.2
Found Date                    : 3/12/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : src/test/rpc/runtime/perf/client.c
Sensitivity                   : public

[3/12/93 public]

Start up PERF server using notif (dynamic endpoints).

Have client perform test 8 (forwarding test) over TCP

The test will fail in the following way:

Forwarding test [8]
  binding resolved to: ncacn_ip_tcp:16.20.16.94[1414]
  result of forwarded call = "voran.lkg.dec.com"
  large forwarded call completd OK
  request for interface ids through partial binding completed OK (nil type obje
  request for interface ids through partial binding completed OK (non-nil type 
  warning: can't do broadcast
*** Unknown exception raised
%CMA-F-EXCCOPLOS, exception raised; some information lost
-DCERPC-E-CONNECTREJECTED, connection request rejected (dce / rpc)

What's happening is that at the end of the test, the client attempts
to contact the server (over the PERF if) to tell it to unregister the PERFB
interface (via perf_unregister_b).  The call is being made over a partially
bound handle.  In resolving the handle, the runtime pulls the well
known endpoint out of the perf if spec:

CN: call_rep->2763c8 assoc->2d0bc8 desc->0 connection request intiated to
16.20.16.94[2001]

In this case, though, the perf server was started up with a dynamic
endpoint and the connect request to the well known endpoint gets
rejected by the remote server machine.

There are at least a couple of ways to fix this:

- Could save the binding specified on the command line by the user and
the one used to make the initial call to the server.  Use this binding
to call perf_unregister_b.

- Conditionally perform an explicit rpc_ep_resolve_binding to fully
resolve the binding.

[3/17/93 public]
I have nothing to do with perf test.  Assign Markar as responsible engineer.

[9/17/93 public]

The string binding specified on the command line is still available when
perf_unregister_b() is called. So we just need to do:

    rh = binding_from_string_binding(NULL, argv[2]);

before calling perf_unregister_b().

[9/28/93 public]

The fix was submitted to 1.0.3.

[11/12/93 public]
Code has passed functional and most of system test.
Closed.



CR Number                     : 7440
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : systest
Subcomponent Name             : 
Short Description             : dcethrp1 fails to start thd_server using ropen for long TCDIR
Reported Date                 : 3/5/93
Found in Baseline             : 1.0.1
Found Date                    : 3/5/93
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dcethrpc
Sensitivity                   : public

[3/5/93 public]

when invoked by the systest driver dcethrpc, dcethrp1 can fail to start
thd_server via ropen when the pathname LCDIR is "long".

Repeat BY:

Execute thd_server with a "long" path name, for example:

        /opt/dcelocal/test/systest/threads/thd_server -p thdrpc

In which case thd_server will crash.

cd to /opt/dcelocal/test/systest/threads and execute

        thd_server -p thdrpc

In this case thd_server should come up without any probelm.

Proposed Solution:

	Figure out what's wrong with thd_server, or just
        change the dcethrp1 script to shorten the thd_server path name.
        specifically change one line in Start_server as follows.

<       ropen -b $HOST "JOURNAL=$WSLOGDIR/$SERVER_FILE.$HOST; export
JOURNAL;\
<                       $TCDIR/$SERVER_FILE $SERVER_PARMS"

        with:

>       ropen -b $HOST "JOURNAL=$WSLOGDIR/$SERVER_FILE.$HOST; export
JOURNAL;\
>                       cd $TCDIR; ./$SERVER_FILE $SERVER_PARMS"

[03/24/93 public]
Changed from thr -> dce since this is a system test bug.

[08/11/93 public]
Changed owner to Cindy since she is working on the tests.

[10/12/93 public]

dcethrpc has been changed to copy thd_server from the binary directory to
/tmp and execute it in /tmp.



CR Number                     : 7438
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : systest
Subcomponent Name             : 
Short Description             : dcethrp1 test sometimes fails because thd_server(s) come up too late.
Reported Date                 : 3/5/93
Found in Baseline             : 1.0.1
Found Date                    : 3/5/93
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : test/systest/threads/dcethrpc
Sensitivity                   : public

[3/5/93 public]

Full Description:

        customer reports that dcethrp1 test can fail because of timing
        problems. In particular they have experienced failures in this
        test whenever the thd_client starts up before the thd_server(s)
        running on remote machines(s).
Repeat By:

        Execute the command "dcethrpc -m m1 -p thrpc", where m1 is a
        machine whose cpu utilization is high.

Proposed Solution:

	dcethrp1 should make sure server processes on remote machines are
        running before it starts the client.

        modify dcethrp1 to make this check, by adding the following code to
        test/systest/threads/dcethrp1, and call Check_servers() before
        calling Start_client().

	Note that OT 4116 describes a fix to a similar problem in this test.

###########################################################################
#
# Make sure server processes on remote machines are running.
#
###########################################################################
Check_servers()
{
        for HOST in $HOSTLIST
        do
                rsh $HOST "ps -ef | grep thd_server" | grep thd_server
                server_up="$?"
                timer=0
                while [ "$server_up" -ne 0 -a "$timer" -lt 10 ]
                do
                        xx_log "thd_server is not running on $HOST. Sleep for 30 seconds ..."
                        sleep 30
                        rsh $HOST "ps -ael | grep thd_server" | grep thd_server
                        server_up="$?"
                        timer=`expr $timer + 1`
                done
                if [ "$server_up" -ne 0 ]
                then
                        xx_fail "Failed to start thd_server on $HOST"
                else
                        xx_log " thd_server is running on $HOST"
                fi
        done
}

[03/24/93 public]
Changed from thr -> dce since this is a system test bug.

[08/11/93 public]
Changed owner to Cindy since she is working on the tests.

[10/15/93 public]

Added the following check_servers function to make sure the servers are
running before the clients are started.

> # Make sure server processes on remote machines are running.
> check_servers()
> {
>       error=0
>         for HOST in $HOSTLIST
>         do
>                 $RSH_COMM $HOST "ps -ef | grep thd_server" | grep
thd_server
>                 server_up="$?"
>                 timer=0
>                 while [ "$server_up" -ne 0 -a "$timer" -lt 10 ]
>                 do
>                         tet_infoline "thd_server is not running on $HOST.
Slee
p for 30 seconds ..."
>                         sleep 30
>                         $RSH_COMM $HOST "ps -ael | grep thd_server" |
grep thd
_server
>                         server_up="$?"
>                         timer=`expr $timer + 1`
>                 done
>                 if [ "$server_up" -ne 0 ]
>                 then
>                         tet_infoline "ERROR:Failed to start thd_server on
$HOS
T"
>                       error=1
>                 else
>                         tet_infoline " thd_server is running on $HOST"
>                 fi
>         done
>       if [ $error -ne 0 ] ; then
>               return 1
>       fi
>
>       return 0
> }

[11/11/93 public]

The fix has been verified.



CR Number                     : 7433
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : rpc
Subcomponent Name             : test/rpc/idl/repas2/manager.c
Short Description             : Pointer used after being freed.
Reported Date                 : 3/5/93
Found in Baseline             : 1.0.1
Found Date                    : 3/5/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : test/rpc/idl/repas2/util_cvt.c
Sensitivity                   : public
DEC has no responsibility to maintain these tests. Please reaasign this CR
to someone within OSF.

[3/5/93 public]

{note, the test code has not been changed since 1.0.1. So it is also a
1.0.2 problem}

Full Description:
        In test/rpc/idl/repas2/manager.c:_xmitas_sum_in_out(...)
        variable 'list' and reused by the following code.

          /* Free the in rep */
        trans_t_free_local(list);
        list->next = NULL;

         ....
            /* Recreate list with a new set of elements */
        l = list;
        for (i = 0; i < num_elems; i++)
        {
         l->value = i * 38;
                ...


        Where trans_t_free_local calls free_list_recursively
        which frees 'list' -
             if (l->next) free_list_recursively(l->next);
             free(l);

	So after calling trans_t_free_local, list is freed and should not
	be referenced again. but
        The list that is freed is getting used in
                manager.c:_xmitas_sum_in_out

Proposed Solution:
        trans_t_free_local(list->next) in _xmitas_sum_in_out()
        instead of trans_t_free_local(list)

[10/1/93 public]

Back in June, as a part of HP-UX reference platform submittion,
trans_t_free_local() was changed to not-free the first element of the list.
Thus, the above proposed solution is not necessary.

[11/12/93 public]
Code has passed functional and most of system test.
Closed.



CR Number                     : 7426
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : other
S/W Ref Platform              : other
Component Name                : rpc
Subcomponent Name             : test/rpc/idl
Short Description             : Alignment problems in idl tests
Reported Date                 : 3/4/93
Found in Baseline             : 1.0.1
Found Date                    : 3/4/93
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : 
				test/rpc/idl/pipetest2/manager.c
				test/rpc/idl/pipetest2/client_aux.c
				test/rpc/idl/pipetest2_ool/manager.c
				test/rpc/idl/pipetest2_ool/client_aux.c
				test/rpc/idl/pipetest2_cancel/manager.c
				test/rpc/idl/pipetest2_cancel/client_aux.c
Sensitivity                   : public

[3/4/93 public]

(note, these test files have not been changed since 1.0.1, so it is also 
a problem for current 1.0.2 code)

------------------start: defect report from licensee----------------------
Full Description:
        Alignment problems from promotion of byte * to double/float/
        pt2_struct * in
      ( . = test/rpc/idl )
        ./pipetest2/manager.c
        ./pipetest2/client_aux.c
        ./pipetest2_cancel/manager.c
        ./pipetest2_cancel/client_aux.c
        ./pipetest2_ool/manager.c
        ./pipetest2_ool/client_aux.c

        mostly while declaring buffers ( manager_buffer/client_buffer
         ). byte pointers are being used by pipe callbacks as float
        and struct pointers - could leads to alignment problems.

Proposed Solution:

        Declare buffers and align it to double/float/pt2_struct
        eg:
           float client_buffer[howmany(CLIENT_BUFFER_SIZE,sizeof float)];
-------------------end of defect report from licensee---------------------

[03/04/93 public]
My experience with Sparc tells me that this is definitely an
alignment error which will cause core dump. Some systems, like Sparc, have
very strict requirement about alignment.

Also the proposed solution is not good enough for sparc, for the same
reason. On sparc, float * and double * are not the same, let alone the
struct. So to make the code portable, declaring a static array of any type
is not goign to work. Guess w ehave to dynamically allocate the memory.

[06/14/93 public]
DEC does not own responsibility for these tests.
Please assign this CR to someone in OSF.

[10/14/93 public]
Allocate the buffers dynamically both in client_aux.c and manager.c.
Introduced the alloc routines for pipes as needed in the tests.

[11/12/93 public]
Code has passed functional and most of system test.
Closed.



CR Number                     : 7397
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : cds
Subcomponent Name             : test/directory/cds/dcesx/dcesx.c
Short Description             : dcesx exists even with valid
options and prints usage message. And Makefile problem
Reported Date                 : 3/2/93
Found in Baseline             : 1.0.1
Found Date                    : 3/2/93
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.2
Affected File(s)              : test/directory/cds/dcesx/dcesx.c, Makefile
Sensitivity                   : public

[3/2/93 public]

[dcesx code has not been changed since 1.0.1 release]

Full Description:

        The command "dcesx -K -M -R -V -i 10 -m 10 -p 1 -t 30" exits with usage
        message

Repeat By:

        Compile this test on AIX in dcesx directory using 'xlc' or 'cc'
	compiler. Type the above command line.

Proposed Solution:

        In file test/directory/cds/dcesx/dcesx.c (function main()):

        Change:

    while ((c = get_options (argc, argv, options)) != EOF)

        to:

    while ((c = get_options (argc, argv, options)) != (char)EOF)

        and recompile. The system header file defines EOF as (-1).


Also the Makefile for dcesx directory is not functional. The LIBS vars were
commented out, making it impossible to link.

[3/3/93 public]

	get_options returns char value. Since it will also return EOF, it
	shoul dbe declared to return int in the first place so that EOF
	does not mess with other possible char values (0 - 255).

	ANSI C does not specify whether type "char" should be signed or 
	unsigned. It just happens that AIX chose to interpret it as
	unsigned char. That is why it failed on AIX machines.

	So the right fix is to declare get_options() to return int, change
	c to have a type of int and leave the comparison statement
	unchanged.

[8/26/93 public]
Jd has fixed this problem in dcesx.c:Revision 1.1.4.3 and
Makefile:Revision 1.1.4.3.



CR Number                     : 7383
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : cds
Subcomponent Name             : test/directory/cds/dcesx/dcesx.c
Short Description             : dcesx exits if either
ncadg_ip_udp or ncacn_ip_tcp is not supported.
Reported Date                 : 3/1/93
Found in Baseline             : 1.0.1
Found Date                    : 3/1/93
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : dcesx/dcesx.c
Sensitivity                   : public

[3/1/93 public]

(this is still true in the current 1.0.2 code base).

Full Description:

        dcesx exits if either ncadg_ip_udp or ncacn_ip_tcp is not supported
        when a cell is configured with either of these only. As ILAB
        guideline suggests, it dcesx should try to use the available protocol
        sequences. (In the "DRAFT ILAB TEST PROCESS DOCUMENT" sent out by
	ILAB people, in the ILAB Test Process section, item 1, 1st
	first-level bullet, 4th second-level bullet (dcesx), 2nd third-level
	bullet, 1st fourth-level bullet says: "use connectionless and
	datagram protocols whenever possible". The word "possible" imples
	it is not required to have both CN and DG protocols to be present.)

Proposed Solution:

        In file test/directory/cds/dcesx/dcesx.c:

main (argc, argv)

int         argc;
char        *argv[];

{
    unsigned32  status, status2;
                        ^^^^^^^^^^  add this...
..........
..........

    rpc_server_use_protseq ((unsigned_char_t *)"ncacn_ip_tcp",
                            rpc_c_protseq_max_reqs_default, &status);
    if (status != rpc_s_ok)
    {
        dcesx_log ("*** Can't set up server protocols\n");
        exit (dcesx_s_rpc_use_protseq);  <<<<<<<<<<<----- Remove this line
    }

    rpc_server_use_protseq ((unsigned_char_t *)"ncadg_ip_udp",
                            rpc_c_protseq_max_reqs_default, &status2);
                                     Change from status --- ^^^^^^^^^
    if (status2 != rpc_s_ok)
    {
        dcesx_log ("*** Can't set up server protocols\n");
        exit (dcesx_s_rpc_use_protseq);  <<<<<<<<<<<----- Remove this line
    }

    if (status != rpc_s_ok && status2 != rpc_s_ok) <<<<<<<++++++ add this
        exit (dcesx_s_rpc_use_protseq);            <<<<<<<++++++ add this

..........
..........

}

[8/20/93 public]
Removed all usages of rpc_server_use_protseq and use 
rpc_server_use_all_protseqs only. This way will make it
use whatever protocol sequence the your configuration 
supports. So if to test a particular protocol sequence
is required, the evironment variable RPC_SUPPROTED_PROTSEQS
could serve the purpose. One thing need to remember is if
you build rpc/runtime without -DDEBUG then the environment
variable RPC_SUPPROTED_PROTSEQS is ignored.

Marked this bug as closed.



CR Number                     : 7237
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dfs
Subcomponent Name             : bos tests
Short Description             : org undefined in bos test0
Reported Date                 : 2/16/93
Found in Baseline             : 1.0.1
Found Date                    : 2/16/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.0.3a
Affected File(s)              : some
Sensitivity                   : public
Transarc Status               : submit
Transarc Deltas               : comer-ot7237-define-org-in-test0
Transarc Herder               : mason@transarc.com

[2/16/93 public]
Bos test0 attempts to create an account for usera in the
registry, but is failing because org is never set ."
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `mason@transarc.com' 
Added field Transarc Status with value `open'
M

[2/26/93 public]
Defect Closure Form
-------------------
--Verification procedure below--
run bos test0.  Check to see that usera is no longer in the registry
after the test is done.
Associated information:
Tested on TA build:  
	dfs-102-2.6
Tested with backing build:  
	dce1.0.2b15
Filled in Transarc Deltas with `comer-ot7237-define-org-in-test0' 
Changed Transarc Status from `open' to `export'

[12/17/93 public]
Closed.



CR Number                     : 7190
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dfs
Subcomponent Name             : bos tests
Short Description             : bos test10 should clean up registry entries
Reported Date                 : 2/9/93
Found in Baseline             : 1.0.1
Found Date                    : 2/9/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.0.3a
Affected File(s)              : test/file/bos/tests/test10
Sensitivity                   : public
Transarc Status               : submit
Transarc Deltas               : comer-ot7190-bos-test10-cleanup
Transarc Herder               : mason@transarc.com

[2/9/93 public]
Bos test10 creates users (usera-userf, userz) in the registry
for testcase use.  It should clean these up when the testcase
completes so that the registry doesn't get cluttered up with
extra principals.  This is particularly a problem for bos test0
which also tries to create some of these entries and exits if
unable to (even if it was because they already exist).
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `mason@transarc.com' 
Added field Transarc Status with value `open'

[2/27/93 public]
Defect Closure Form
-------------------
--Verification procedure below--
Run test10.  It should pass and there should not be user[a-g,z]
principals in the registry and there should not be keys for 
userz in the keytable.
Associated information:
Tested on TA build:  
	dfs-102-2.6
Tested with backing build:  
	dce1.0.2b15
Filled in Affected File with `test/file/bos/tests/test10' 
Filled in Transarc Deltas with `comer-ot7190-bos-test10-cleanup' 
Changed Transarc Status from `open' to `export'

[12/17/93 public]
Closed.



CR Number                     : 7189
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : dfs
Subcomponent Name             : bos tests
Short Description             : DetermineLocalAuth never sets localauth if long hostname
Reported Date                 : 2/9/93
Found in Baseline             : 1.0.1
Found Date                    : 2/9/93
Severity                      : C
Priority                      : 3
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.0.3a
Affected File(s)              : test/file/util/gen_FunctionsScript
Sensitivity                   : public
Transarc Status               : submit
Transarc Deltas               : comer-ot7189-fix-test-util
Transarc Herder               : mason@transarc.com

[2/9/93 public]
Attempted to verify our orbit equivalent of OT 5015, and determined
that the fix dropped for test9 does not work in all cases.  The 
original problem was that test9 did not run on a client because it
tried to use -localauth with some commands.  The fix that was dropped
with 5015 was to add a routine in util/gen_FunctionsScript called
DetermineLocalAuth which only sets the localAuth flag if it can 
determine from the registry that the machine is a server.  The problem
is that is assumes short hostname in all cases when in fact the
registry entry has whatever the hostname command on the machine
returns.  So in the case of a machine with a long hostname like
mine:
# hostname
dfswitch.austin.ibm.com
localAuth is never set (server or client) and test9 isn't doing any
-localauth testing.
I am opening this as a new bug instead of re-opening 5015 because
there were also serveral other bos testcase fixes dropped under 5015
which are fine.
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `mason@transarc.com' 
Added field Transarc Status with value `open'

[2/9/93 public]
Changing from enh to def.
Changed Defect or Enhancement? from `enh' to `def'

[3/2/93 public]
Defect Closure Form
-------------------
--Verification procedure below--
** Under ksh on power8:
	# hostname
	power8
	# . gen_FunctionsScript
	# echo $localAuth
	<nothing>
** Try this host
	# DetermineLocalAuth
	# echo $localAuth
	-localauth
** Try non-existent machine
	# DetermineLocalAuth foo
	?(rgy_edit) Cannot retrieve any matching entries for hosts/foo/dfs-server   "" - Entry not found (Registry Edit Kernel) (dce / sad)
	# echo $localAuth
	<nothing>
** Try another server in cell
	# DetermineLocalAuth olorin
	# echo $localAuth
	-localauth
** Set host's name to full name
	# hostname power8.transarc.com
	power8.transarc.com
	# hostname
	power8.transarc.com
	# DetermineLocalAuth
	?(rgy_edit) Cannot retrieve any matching entries for hosts/power8.transarc.com/dfs-server   "" - Entry not found (Registry Edit Kernel) (dce / sad)
** Host is not found in registry but it is using the whole name
Associated information:
Tested on TA build:  
	dfs-102-2.6
Tested with backing build:  
	dce1.0.2b15
Filled in Affected File with `test/file/util/gen_FunctionsScript' 
Filled in Transarc Deltas with `comer-ot7189-fix-test-util' 
Changed Transarc Status from `open' to `export'

[12/17/93 public]
Closed.



CR Number                     : 7069
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 5000
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : lfs
Short Description             : improve salt tests cow1, cow6
Reported Date                 : 1/29/93
Found in Baseline             : 1.0.2
Found Date                    : 1/29/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.0.3a
Affected File(s)              : some
Sensitivity                   : public
Transarc Status               : submit
Transarc Deltas               : blake-ot7069-fix-salt-COW-tests
Transarc Herder               : jaffe@transarc.com

[1/29/93 public]
Ted and I agreed that two tests in the salt salvager test program
should be improved:

"cow1" checks for COW anodes that are not of "regular" type, or that
are not backed by regular anodes.  The current repair rule is that the
COW anode should alway be cleared.  It makes more sense to convert the
COW anode to non-COW if its type is regular.  Also, an off-by-one error
in subtest cow1b makes it do something other than what I intended.

"cow6" checks for COW anodes whose (bBlock, bOffset) information does
not point to a valid anode.  We decided to add a few more variations
to the existing test.
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `jaffe@transarc.com' 
Added field Transarc Status with value `open'

[2/1/93 public]
I used these tests to verify the fixes in OT 5000.  A cursory review of
the complaints produced by this test suggest the fixes for OT 5000 are
correct.  There are other problems these tests still show.  For
instance, see OT 7057.
Changed CR in Code, Doc, or Test? from `code' to `test' 
Filled in Inter-dependent CRs with `5000' 
Changed Subcomponent Name from `test' to `lfs' 
Filled in Interest List CC with `ota'

[2/2/93 public]
Defect Closure Form
-------------------
--Verification procedure below--
Run the test programs as follows (on power11):

	% salt -run cow1,cow6 /dev/epi-blake

The program output reflects the modifications.

Associated information:

Tested on TA build:  
dfs-102-2.4

Tested with backing build:  

Filled in Transarc Deltas with `blake-ot7069-fix-salt-COW-tests' 
Changed Transarc Status from `open' to `export'

[12/17/93 public]
Closed.



CR Number                     : 6848
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : ITL test library
Short Description             : Incorporate local enhancements.
Reported Date                 : 1/14/93
Found in Baseline             : 1.0.1
Found Date                    : 1/14/93
Severity                      : E
Priority                      : 4
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.0.3a
Affected File(s)              : some
Sensitivity                   : public
Transarc Status               : submit
Transarc Deltas               : fred-ot6848-add-pack-unpack-capability
Transarc Herder               : mason@transarc.com

[1/14/93 public]
Time to incorporate enhancements made by Ofer.  This will include the
pack/unpack capability for data types.  This is needed for better 
distributed testing.
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `mason@transarc.com' 
Added field Transarc Status with value `open'

[2/25/93 public]
Defect Closure Form
-------------------
--Verification procedure below--
I added the pack/unpack capability, but currently no data type is using it.
This will be added in the future, after additional changes are made to
ITL.  Look at the itl_value.c file and note the extension of the variable
function array.  Also, all of our user defined data types were extended,
e.g. all the .c files in the common_data directory.
Tested on TA build:  dfs-102-2.6
Filled in Transarc Deltas with `fred-ot6848-add-pack-unpack-capability' 
Changed Transarc Status from `open' to `export'

[12/17/93 public]
Closed.



CR Number                     : 6785
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : fts
Short Description             : fts test20 fails because it restores incrementals in the wrong order
Reported Date                 : 1/10/93
Found in Baseline             : 1.0.2
Found Date                    : 1/10/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.2
Fixed In Baseline             : 1.0.2
Affected File(s)              : some
Sensitivity                   : public
Transarc Deltas               : vijay-ot6785-fts-tests-fix-incremental-restore-errors
Transarc Herder               : mason@transarc.com
Transarc Status               : submit

[1/10/93 public]

In fts/test20, a full dump is restored followed by a restore of a second
incremental with the first incremental not being restored. This causes 
problems with episode. This test segment should be backed out until this
issue is resolved.

Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `mason@transarc.com' 
Added field Transarc Status with value `open'

[1/12/93 public]

Defect Closure Form
-------------------

--Regression test program below--

Just run test20 using the runtests driver and it should pass.

Associated information:

Tested on TA build:  
dfs-102-2.2

Tested with backing build:  
dce1.0.2b6

Filled in Transarc Deltas with 
 `vijay-ot6785-fts-tests-fix-incremental-restore-errors' 
Changed Transarc Status from `open' to `export'

[1/14/93 public]
Changed Status from `open' to `fix' 
Filled in Fixed In Baseline with `1.0.2' 
Filled in Affected File with `some' 
Changed Transarc Status from `export' to `submit'

[12/17/93 public]
Closed.



CR Number                     : 6784
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : fts
Short Description             : fts tests have to be updated to include the new fts command argument changes
Reported Date                 : 1/10/93
Found in Baseline             : 1.0.2
Found Date                    : 1/10/93
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.2
Fixed In Baseline             : 1.0.2
Affected File(s)              : some
Sensitivity                   : public
Transarc Deltas               : vijay-ot6784-fts-test-dump-lsft-should-handle-server-switch
Transarc Herder               : mason@transarc.com
Transarc Status               : submit

[1/10/93 public]

The "fts dump" and "fts lsft" commands now have a -server option. The fts
tests have to be fixed to handle this change. At least test12 seems to fail
due to this reason. fts commands in the tests usually don't use the 
command line switches, but just the arguments. This is the reason for this
problem. 
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `mason@transarc.com' 
Added field Transarc Status with value `open'

[1/10/93 public]

Changed CR in Code, Doc, or Test? from `code' to `test' 
Changed Interest List CC from `davecarr@transarc.com' to `comer@transarc.com'

[1/11/93 public]

Defect Closure Form
-------------------

--Regression test program below--
Run the fts test12. test12 will pass with this fix, but will not otherwise.

Associated information:

Tested on TA build:  
dfs-102-2.2

Tested with backing build:  
dce1.0.2b6

Filled in Transarc Deltas with 
 `vijay-ot6784-fts-test-dump-lsft-should-handle-server-switch' 
Changed Transarc Status from `open' to `export'

[1/14/93 public]
Changed Status from `open' to `fix' 
Filled in Fixed In Baseline with `1.0.2' 
Filled in Affected File with `some' 
Changed Transarc Status from `export' to `submit'

[12/17/93 public]
Closed.



CR Number                     : 6748
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : pmax,rs6000
S/W Ref Platform              : osf1,aix
Component Name                : systest
Subcomponent Name             : 
Short Description             : 
Simplify and enhance the usability of the DCE 1.0.1 system tests (the eight
that were really used).
Reported Date                 : 1/6/93
Found in Baseline             : 1.0.1
Found Date                    : 1/6/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.0.2
Affected File(s)              : ./test/systest/dcetest_config
Sensitivity                   : public

[1/6/93 public]
Simplify the procedure for installing tests, configuring the system for
running the system tests, executing the system tests and reviewing the 
systest logs. Also eliminate unneccessary logging and optionally storing
of 'passed' test logs.

[08/11/93 public]
This functionality is covered by dcetest_config.



CR Number                     : 6717
Defect or Enhancement?        : enh
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : tsr
Short Description             : add some automated tsr tests for fts move recovery
Reported Date                 : 1/4/93
Found in Baseline             : 1.0.2
Found Date                    : 1/4/93
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.1
Fixed In Baseline             : 1.0.3a
Affected File(s)              : some
Sensitivity                   : public
Transarc Status               : submit
Transarc Deltas               : comer-ot6717-add-tsr-tests-for-fts-move-recovery
Transarc Herder               : jaffe@transarc.com

[1/4/93 public]
Add some automated TET-based tests for tsr recovery on fts move
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `jaffe@transarc.com' 
Added field Transarc Status with value `open'

[6/29/93 public]
Tests run but do not yet pass.
Filled in Transarc Deltas with 
 `comer-ot6717-add-tsr-tests-for-fts-move-recovery' 
Changed Transarc Status from `open' to `export'

[6/29/93 public]
Changed Defect or Enhancement? from `def' to `enh'

[12/17/93 public]
Closed.



CR Number                     : 6677
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : acl test
Short Description             : chmodtest incorrectly determines group mode bits from an ACL
Reported Date                 : 12/29/92
Found in Baseline             : 1.0.2
Found Date                    : 12/29/92
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.2
Fixed In Baseline             : 1.0.2
Affected File(s)              : some
Sensitivity                   : public
Transarc Deltas               : rajesh-ot6677-determine-group-mode-bits-from-an-ACL-correctly
Transarc Herder               : jaffe@transarc.com
Transarc Status               : submit

[12/29/92 public]

The get_mode_from_acl subroutine does not initialize mask_obj to an
empty string as it does user_obj, group_obj and other_obj variables.
If the present ACL does not have a mask_obj but the ACL analysed by
the previous call to this function did, then the present ACL is
acquires incorrectly the mask_obj entry of the previously analysed
ACL. This causes incorrect determination of the group_mode (UNIX group
mode bits) for this ACL. 

Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `jaffe@transarc.com' 
Added field Transarc Status with value `open'

[12/29/92 public]
Defect Closure Form
-------------------
--Other explanation below--
The problem was found while investigating failure of acl_edit due
to unavailable registry server. The problem is not easily reproducible
without much special setup. And since it is not a major change
but just filling in what was probably an oversight, its best verified
by inspection.

Associated information:
Tested on TA build:  dfs-102-2.2
Tested with backing build:  dce1.0.2b6

Filled in Transarc Deltas with 
 `rajesh-ot6677-determine-group-mode-bits-from-an-ACL-correctly' 
Changed Transarc Status from `open' to `export'

[1/14/93 public]
Changed Status from `open' to `fix' 
Filled in Fixed In Baseline with `1.0.2' 
Filled in Affected File with `some' 
Changed Transarc Status from `export' to `submit'

[12/17/93 public]
Closed.



CR Number                     : 6659
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : acl tests
Short Description             : acl_edit failures are not handled correctly
Reported Date                 : 12/28/92
Found in Baseline             : 1.0.1
Found Date                    : 12/28/92
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3a
Affected File(s)              : some
Sensitivity                   : public
Transarc Status               : submit
Transarc Deltas               : tu-o-ot6659-acl_edit-should-return-error-when-fail
Transarc Herder               : jaffe@transarc.com

[12/28/92 public]
The ACL tests do not check for failure (the return value) after
executing acl_edit at places e.g.syscall/scripts/chmodtest.sh
chacl_test subroutine and at other places, on failure of acl_edit
simply exit without logging an error message e.g.
syscalls/scripts/chmodtest.sh get_mode_from_acl subroutine.
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `jaffe@transarc.com' 
Added field Transarc Status with value `open'

[8/16/93 public]
In addition to misc/chmodtest.sh, misc/sizetest.sh also did not log the error
on failure of any acl_edit operation. 
                                                                               
Defect Closure Form
-------------------
--Regression test program below--
Run both misc/chmodtest.sh and misc/sizetest.sh to make sure there is no
regression problem. 
Associated information:
Tested on TA build:  
Tested with backing build:  
Changed Interest List CC from `mason@transarc.com' to `comer@transarc.com' 
Changed Responsible Engr. from `rajesh@transarc.com' to `tu@transarc.com' 
Filled in Transarc Deltas with 
 `tu-o-ot6659-acl_edit-should-return-error-when-fail' 
Changed Transarc Status from `open' to `export'

[12/17/93 public]
Closed.



CR Number                     : 6658
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : acl test
Short Description             : ACL tests exits on error without logging error message.
Reported Date                 : 12/28/92
Found in Baseline             : 1.0.1
Found Date                    : 12/28/92
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3a
Affected File(s)              : some
Sensitivity                   : public
Transarc Status               : submit
Transarc Deltas               : tu-o-ot6658-acl_edit-chmodtest-dont-report-error
Transarc Herder               : jaffe@transarc.com

[12/28/92 public]
The syscalls/chmodtest.sh ( chacl_test subroutine ) exits if
the ACLs and UNIX mode bits do not correspond without logging an error
message.
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `jaffe@transarc.com' 
Added field Transarc Status with value `open'

[8/13/93 public]
Assign this to me as part of sweeping old OTs plan.
Changed Interest List CC from `mason@transarc.com' to `comer@transarc.com' 
Changed Responsible Engr. from `rajesh@transarc.com' to `tu@transarc.com'

[8/13/93 public]
The enhancements made by IBM Austin may have already addressed this issue.

[8/16/93 public]
                                                                               
I got a copy of IBM's work from Rajesh and took a closer look at what their
enhancement was all about. They made a lot of changes on the user interface
of acl_edit by adding a set of new different options to this command. In 
addition, they also incoporated a DBG Trace utility for debuging purpose. 
The level of trace information to be collected can be specified at the new
user interface. Their work is very useful. 
                                                                               
However, IBM's work did not address any of defects reported in ot6658 and 
ot6659. 
                                                                               
I would recommend that IBM's work should be integrated into our code
based as part of the enhance work described in ot6276.   
Defect Closure Form
-------------------
In addition to acl/scripts/misc/chmodtest.sh ( chacl_test subroutine ), there 
are also other places in acl/scripts/misc/getset.sh, 
acl/scripts/misc/inherit.sh and acl/scripts/misc/sizetest.sh that do not
log the error to the status file when comparing ACL and Unix mode bits fails. 
                                                                              
This delta fixed the above problems. 
                                                                              
--Regression test program below--
Run the above acl tests to make sure there is no regression problem. 
Associated information:
Tested on TA build:  
Tested with backing build:  
Filled in Transarc Deltas with 
 `tu-o-ot6658-acl_edit-chmodtest-dont-report-error' 
Changed Transarc Status from `open' to `export'

[12/17/93 public]
Closed.



CR Number                     : 6516
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : cds
Subcomponent Name             : test cases
Short Description             : delete and create child are not tested
Reported Date                 : 12/17/92
Found in Baseline             : 1.0.2b6
Found Date                    : 12/17/92
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : ./test/directory/cds/cp_childpointer.tests
Sensitivity                   : public

[12/17/92 public]
cdscp delete child and create child are not tested by the test cases
under src/test/directory/cds.  I haven't been able to figure out how
to get the namespace in a position to get these commands to work (or,
they're completely broken).  This is a significant test exposure, hence 
the B1 severity-priority.

[12/18/92 public]
This is not a significant exposure as the code  for create/delete child
in the API, clerk and server is exercised when a  directory is created.
Downgrading this CR to C3. As you suspect, these commands are seldom usable.

[8/26/93 public]
Implemented to test delete child and create child.



CR Number                     : 6344
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : pmax
S/W Ref Platform              : aix
Component Name                : dfs
Subcomponent Name             : Syscall tests.
Short Description             : Have problems to run on PMAX.
Reported Date                 : 12/4/92
Found in Baseline             : 1.0.2
Found Date                    : 12/4/92
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3a
Affected File(s)              : some
Sensitivity                   : public
Transarc Status               : submit
Transarc Deltas               : jess-ot6344-fix-syscall-test-on-pmax
Transarc Herder               : jaffe@transarc.com

[12/4/92 public]
This delta is opened for fixes on pmax running of the syscall tests.
Some problems are because the different system call definitions
and some other minor adjustments.
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `jaffe@transarc.com' 
Added field Transarc Status with value `open'

[12/14/92 public]
The delta for this OT was imported into TA build dfs-102 2.3, but will
be backed out by hand.

[12/15/92 public]

[3/15/93 public]
Defect Closure Form
-------------------
This delta has been tested on a two-machine cell configured by dfs 2.7.
Refer to ot 6277 for possible problems.
This delta must go with "jess-ot6277-add-syscall-tests-1".
Associated information:
Tested on TA build:  
dfs 2.7
Tested with backing build:  
dce1.0.2bi17
Filled in Transarc Deltas with `jess-ot6344-fix-syscall-test-on-pmax' 
Changed Transarc Status from `open' to `export'

[12/17/93 public]
Closed.



CR Number                     : 6333
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : pmax
S/W Ref Platform              : osf1
Component Name                : rpc
Subcomponent Name             : mgmt_stop_server_listening
 and binding_server_to_client test
Short Description             : Return code of rpc_mgmt_is_server_listening changed in soruce code.  Need to update the test to reflec the change.
Reported Date                 : 12/4/92
Found in Baseline             : 1.0.2
Found Date                    : 12/4/92
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.2
Affected File(s)              : 
	./test/rpc/rtandidl/moretests/binding_server_to_client.c
	./test/rpc/rtandidl/moretests/mgmt_stop_server_listening.c
Sensitivity                   : public

[12/4/92 public]
Need to update the expected return status of rpc_mgmt_is_server_listening
to reflect the change in the rpc code.

[08/03/93 public]
Looks like Sue already fixed this in 1.0.2.
Closed.



CR Number                     : 6245
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : ACL test
Short Description             : The utility programs in acl/util generate error
Reported Date                 : 11/30/92
Found in Baseline             : 1.0.1
Found Date                    : 11/30/92
Severity                      : C
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3a
Affected File(s)              : some
Sensitivity                   : public
Transarc Status               : submit
Transarc Deltas               : tu-o-ot6245-acl_edit-generates-errors
Transarc Herder               : jaffe@transarc.com

[11/30/92 public]
The utility program generate error messages even when errors are
expected without generating any "expected error" messages. This can be
confusing.
Added field Transarc Deltas with value `' 
Added field Transarc Herder with value `mason@transarc.com' 
Added field Transarc Status with value `open'

[8/13/93 public]
Assign this to me as part of sweeping old OTs plan.
Filled in Interest List CC with `comer' 
Changed Responsible Engr. from `rajesh@transarc.com' to `tu@transarc.com' 
Changed Transarc Herder from `mason@transarc.com' to `jaffe@transarc.com'

[8/16/93 public]
The fix is very straightforwar: just removed all error messages in the 
utility code and let the utility code return the status code to the caller.
The caller (the test driver) will print out (it already did) the appropriate
error messages depending on whether it is testing an error case or not. 
                                                                              
Defect Closure Form
-------------------
--Regression test program below--
Ran the whole set of scripts/syscalls test suite to make sure that there is
no regression problem. 
Associated information:
Tested on TA build:  
Tested with backing build:  
Filled in Transarc Deltas with `tu-o-ot6245-acl_edit-generates-errors' 
Changed Transarc Status from `open' to `export'

[12/17/93 public]
Closed.



CR Number                     : 6103
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : mx300
S/W Ref Platform              : sinix
Component Name                : cds
Subcomponent Name             : cdstest
Short Description             : cdstest overwrites input buffer causing core dump
Reported Date                 : 11/16/92
Found in Baseline             : 1.0.2
Found Date                    : 11/16/92
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : cdstest.c
Sensitivity                   : public

[11/16/92 public]

Run cdstest with the following input:

	co
	/.../psycho.cells.sni-usa.com/blurie28037/dir00000005/obj00000005

causes a core dump at this point.

The problem is in the get_ent() routine.  The length
information being passed to fgets() is larger than the user's 
buffer really is.

The first time through the loop:

	len = 32;
	val = (char *)malloc(len);
	...
	...
	if (fgets(vp, len, stdion) == NULL) {
	...
	...

At this point, the size of the buffer 'val' is 32 bytes, which is
what fgets() reads.

Later in the same loop:

	...
	...
	slen = strlen(val);
	...
	else {
		len *= 2;
		val = (char *)realloc(val, len);
		vp = val + slen;
		...
		...

At this point, the size of the buffer 'val' is 64 bytes, and
len's value is '64', but 'vp' points to val[32].

During the second loop:

	if ( fgets(vp, len, stdin) == NULL) {

At this point, len is still '64' which means than fgets() is going
to read up to 64 *more* bytes into 'vp'.  But the buffer which
'vp' points to is only 32 bytes long.

[02/24/93 public]
Problem seems to be gone.
cancelled.

[02/24/93 public]
Didn't notice that this was SVR4 specific. Obly tested on pmax
and RIOS. Reopen it. Got suggested fix from Benjamin Lurie and
will check out getting it in this release.

[8/18/93 public]
Adjusted the input buffer size to be the size of unused portion of
newly allocation buffer. Marked it as fix instead of closd because 
waiting for ohara@sni-usa.com to test on their mx300 platform.

[11/11/93 public]
fixed->closed.



CR Number                     : 5939
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : pmax
S/W Ref Platform              : osf1
Component Name                : sec
Subcomponent Name             : acl_edit test
Short Description             : Aborting acl_edit test leaves a principal's ACL too restrictive
Reported Date                 : 11/5/92
Found in Baseline             : 1.0.2
Found Date                    : 11/5/92
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : /src/test/security/api/moretests/acl_edit.sh
Sensitivity                   : public

[11/5/92 public]

I began to run the acl_edit.tsh as cell_admin and then aborted (ctrl-c)
in the middle of the test (because the test must be run after being dce_logged
in as flintstone). This left the registry database in an inconsistent state:
a view command in rgy_edit does not find either the principal flintstone or
the account for flintstone. However an attempt to add the principal fails 
(with an error that the principal already exists). 

% rgy_edit
Current site is: registry server at /.../cn_pmax/subsys/dce/sec/master
rgy_edit=> do p
Domain changed to: principal
rgy_edit=> v flintstone
?(rgy_edit) Cannot retrieve entry for flintstone - Entry not found (Registry Edit Kernel) (dce / sad)
rgy_edit=> add flintstone
?(rgy_edit) Unable to add principal  "flintstone" - An object with the specified name already exists (Registry Edit Kernel) (dce / sad)
rgy_edit=> do a
Domain changed to: account
rgy_edit=> add
Add Account=> Enter account id [pname]: flintstone
?(rgy_edit) Unable to add account "flintstone" - Principal does not exist (Registry Edit Kernel) (dce / sad)
Do you wish to try again  [y/n]? (n)
rgy_edit=>

[11/5/92 public]
This is *not* a secd problem.  The registry is *not* in an inconsistent state.
The test manipulates the ACL on the flintstone principal.  If you quit out of
the test while the permissions on the ACL prevent cell_admin from seeing the
principal, then you won't be able to see it with rgy_edit, and you won't be
able to add it because it's already there.  The test should trap an interrupt
and cleanup by restoring the original ACL on the principal.

[10/7/93 public]
Fix tested and submitted.

[11/11/93 public]
Closed.



CR Number                     : 5458
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : other
S/W Ref Platform              : other
Component Name                : rpc
Subcomponent Name             : idl_compiler
Short Description             : idl test arrayptr fails if the
host system does not support PACKED_SCALER_ARRAYS.
Reported Date                 : 9/24/92
Found in Baseline             : 1.0.1
Found Date                    : 9/24/92
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : New IDL compiler
Sensitivity                   : public

[9/24/92 public]

This is an Interoperability problem.


Full Description:

We have found a problem with the IDL compiler code for non-UNIX
systems.  The idl test in directory rpc/idl/arrayptr fails if the host
system does not support PACKED_SCALAR_ARRAYS. The case is a non-NULL
pointer to an array of shorts.
	
The problem is in the routine IDL_anon_0_mc in the client 'C; stub
generated by the IDL compiler. It uses the wrong variable for the size
of the array. It uses the last argument passed in (IDL_B_0) for the
size if PACKED_SCALAR_ARRAYS are defined. However, if this is not
supported then IDL_count_0 is used. IDL_count_0 is only set if
NIDL_varying  true. In these test case it is false.
	
	
	if (NIDL_varying)
	{
	rpc_marshall_ulong_int(mp, IDL_A_0);
	rpc_advance_mop(mp, op, 4);
	rpc_marshall_ulong_int(mp, IDL_B_0);
	rpc_advance_mop(mp, op, 4);
	IDL_count_0 = IDL_B_0;
	if (IDL_count_0 > IDL_size_0) RAISE(rpc_x_invalid_bound);
	}
	
	#ifdef PACKED_SCALAR_ARRAYS
	memcpy((char *)mp, (char *)&(*p_node)[IDL_A_0], IDL_B_0*2);
	rpc_advance_mop(mp, op, IDL_B_0*2);
	#else
	IDL_element_0 = &(*p_node)[IDL_A_0];
	for (IDL_index_0 = IDL_count_0; IDL_index_0; IDL_index_0--)
	{
	rpc_marshall_short_int(mp, (*IDL_element_0));
	rpc_advance_mop(mp, op, 2);
	IDL_element_0++;
	}
	#endif

[11/12/93 public]
Code has passed functional and most of system test.
Closed.



CR Number                     : 4952
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : dfs
Subcomponent Name             : test
Short Description             : test programs need to reset errno
Reported Date                 : 8/6/92
Found in Baseline             : 1.0.1
Found Date                    : 8/6/92
Severity                      : D
Priority                      : 2
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3a
Affected File(s)              : some
Sensitivity                   : public
Transarc Status               : submit
Transarc Deltas               : tu-o-ot4952-low-not-to-return-confused-errors
Transarc Herder               : jaffe@transarc.com

[8/6/92 public]
There are cases where the test programs should reset errno to 0 prior to
making a system call.  This causes cases where the system call succeeds
when it should fail to print out an incorrect value for the system error
code in test case's error message. The test code is picking up the errno 
value from previous system calls since errno is not set when a system call
is successful.

[08/06/92 public]
I forgot to mention that I have seen this problem in low/prog8.c and low/prog9.c
I don't know if this is a problem with the other tests.

[8/25/93 public]
Defect Closure Form
-------------------
Oen of the major problems is that the low test programs call one
common function to print the error message. This function also prints out
the errno. 
This could be misleading if this function is called not because
of a failed unix system call. This problem is actually there in almost all 
of the low test C programs. 
I also ran it on RIOS/1.0.3 2.25 to make sure that the delta does not introduce
any new problem.
Tested on TA build:  
Tested with backing build:  
Changed Responsible Engr. from `fred@transarc.com' to `tu@transarc.com' 
Added field Transarc Deltas with value 
 `tu-o-ot4952-low-not-to-return-confused-errors' 
Added field Transarc Herder with value `jaffe@transarc.com' 
Added field Transarc Status with value `export'

[12/17/93 public]
Closed.



CR Number                     : 3931
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : rs6000
S/W Ref Platform              : aix
Component Name                : rpc
Subcomponent Name             : test
Short Description             : move "standard definitions" from test/rpc/rpc.mk to test/test.mk
Reported Date                 : 5/30/92
Found in Baseline             : 1.0.1b17
Found Date                    : 5/30/92
Severity                      : C
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : test/test.mk
Sensitivity                   : public

[5/30/92 public]
(Orbit 1225)

test/test.mk needs standard definitions to convert machine specific flags
to flags (e.g. RIOS_CFLAGS to CFLAGS) so they show up on the cc line.
Since they are already in test/rpc/rpc.mk, move them from there.

Also standard target-specific definitions.

[6/30/92 public]
Reassigned to RPC New World Leader.

[07/02/92 public]
Lowered priority to C2 -- everything builds this is not a P1 bug --
and removed the Responsible Engineer.

[12/29/92 public]

Changed to a 1.1 code cleanup.

[08/03/93 public]
Everything seems to work as is.  
What the bug is here is unclear.
Canceled.

[08/03/93 public]
These lines appear in test/rpc/rpc.mk
 
  #
  # Defaults for standard definitions.  These may be overriden in some RPC
  # test makefiles.
  #
 
  CFLAGS  ?= ${${TARGET_MACHINE}_CFLAGS}
  YFLAGS  ?= ${${TARGET_MACHINE}_YFLAGS}
  LIBS    ?= ${LIBS_DCE} ${${TARGET_MACHINE}_LIBS}

and allow the use of machine specific flags in the test/rpc component. If 
they were moved to test/test.mk, all test components could use machine
specific flags, without respecifying the assignments.  For example, in
test/directory/cds/Makefile, these lines appear

  RIOS_LIBS= -lm -lbsd
  LIBS     = -ldce ${${TARGET_MACHINE}_LIBS}

These sort of assignments appear in the component specific .mks (e.g., 
src/rpc/rpc.mk) in the source tree, but there is no .mk analogous to
test/test.mk in that branch.

So, I think there is a cleanup issue for 1.1.  Consistency between
makefiles would be an asset to porters.

[08/03/93 public]
Ok, I'll fix it.

[08/03/93 public]
Added the following to test.mk:
CFLAGS          ?= ${${TARGET_MACHINE}_CFLAGS}
LDFLAGS         ?= ${${TARGET_MACHINE}_LDFLAGS}
YFLAGS          ?= ${${TARGET_MACHINE}_YFLAGS}
LIBS            ?= ${LIBS_DCE} ${${TARGET_MACHINE}_LIBS}

removed the following from test/rpc/rpc.mk:
CFLAGS  ?= ${${TARGET_MACHINE}_CFLAGS}
YFLAGS  ?= ${${TARGET_MACHINE}_YFLAGS}
LIBS    ?= ${LIBS_DCE} ${${TARGET_MACHINE}_LIBS}

closed.



CR Number                     : 2283
Defect or Enhancement?        : def
CR in Code, Doc, or Test?     : test
Inter-dependent CRs           : 
Project Name                  : dce
H/W Ref Platform              : all
S/W Ref Platform              : all
Component Name                : thr
Subcomponent Name             : functional tests
Short Description             : prvb_thd_006 and crvb_thd_006 find bad thread scheduling
Reported Date                 : 3/12/92
Found in Baseline             : 1.0.1b4
Found Date                    : 3/12/92
Severity                      : B
Priority                      : 1
Status                        : closed
Duplicate Of                  : 
Fix By Baseline               : 1.0.3
Fixed In Baseline             : 1.0.3
Affected File(s)              : prvb_thd_006.c, crvb_thd_006.c
Sensitivity                   : public

[3/12/92 public]
This test fails on the RIOS only in the standard (shared-library)
build.  The test works on the RIOS in a local build with a non-
shared libcma.a, and on the PMAX.  The failure is "semantic":  the
test measures the degree of fairness in thread scheduling, and
consistently finds very unfair scheduling when run from this
build.  Typical output:
    
    START,  Test "PRVB_THD_006":    Test for timeslicing fairness.
    Starting......done.
    
         Thread          Iterations
            0               068321
            1               078776
            2               104511
            3               078021
            4               074162
            5               075550
            6               069533
            7               078130
            8               083630
            9               074274
    
    For 10 threads, running for 100 seconds:
            Average: 78489
            Maximum: 104511
            Minimum: 68321
    Deviation: 33%  (Threshold: 10%)
    
    FAILED, Test "PRVB_THD_006":    Unequal distribution of execution.

[03/19/92 public]
Assign to Jim Wade pending appropriate re-assignment,
presumably to IBM developer.

[05/08/92 public]
This is a test, not a code defect.

[05/15/92 public]
There's no problem specific to the RIOS here.  Still some general
question about the usefulness of this test, for which I'll be
opening a new defect.

[05/18/92 public]
Well, er... Hmmm... Extensive testing on both ref platforms
*does* seem to indicate that a RIOS-specific problem exists.
Specifically, 500+ runs of prvb_thd_006 and crvb_thd_006 on
a PMAX netted *no* failures, while on a RIOS 800+ runs of
the same two tests failed about 20% of the time.  Though I
know the test occasionally fails on the PMAX (I've seen it),
this difference seems too big to ignore.

So I guess we can't just nuke the test.  Too bad...

[05/28/92 public]
There's continuing debate on the validity of this test, as
well as new data (that I collected yesterday) that seem to
indicate the problem may be related to the virtual interval
timer on the RIOS, rather than to CMA timeslicing.

On balance, this test does not seem to indicate a problem
of sufficient certainty or gravity to warrant a "1" priority,
so I'm reducing it.  Work on it may continue, as circumstances
permit.

[02/05/93 public]
Assigned this to myself and defered it. Don't think anyone
at IBM is working it. Need to get enough data to determine 
if this is pointing to a generic threads problem that doesn't
present itself on the pmax for some reason or if there is 
something funny about the rios timing functions that the 
cma package is exercising. Will come back to this after the
release.

[05/07/93 public]

This also happens on the SVR4 SINIX intel platforms.  We have
noticed it to be performance related in that if there is a
moderate load on the machine, then this test will indicate failure.
If there is nothing else happening on the machine, it will usually
indicate success.

By the way, this test used to fail more often in previous builds. 
It does not fail so much anymore.

[10/12/93 public]

Examination of the code reveals workaounds have been put into prvb_thd006.c and
crvb_thd006.c for rs6000 and hppa by increasing the min_iterations value to 50000
from 10000. No such changes have been made for the i486/osf1 reference platform.
Recent testing on rios, hppa, and i486 shows (several hundred runs on each 
platform):
	rios		always passes, Deviation 0-2%
	hppa		always passes, Deviation 0-2%
	i486/osf1	1 in 40 runs fail, Deviation up to 12%. 

Once the change passes testing for the i486/osf1 platform, this bug could be 
changed from a defect to an enhancement, to be further analyzed during the 
DCE 1.1 cleanup. We need to find out if the scheduling algorithm is really
a fair one.

Note: changing this and testing for SNI_SVR4 will be left up to SNI.

[10/12/93 public]

Increased min_iterations to 50000 for i486/osf1. This lowers the
Deviation to 0-2%.

[11/12/93 public]
fixed->closed.



