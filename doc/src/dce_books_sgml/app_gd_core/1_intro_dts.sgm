<!--
# @OSF_COPYRIGHT@
# 
# 
# HISTORY
# $Log: 1_intro_dts.sgm,v $
# Revision 1.1.2.8  1996/12/14  20:23:45  wardr
# 	{edit,R1.2.2}
# 	penultimate format fixes
# 	[1996/12/14  20:21:29  wardr]
#
# Revision 1.1.2.7  1996/12/13  22:10:13  wardr
# 	{edit,R1.2.2}
# 	Fixed formatting problems
# 	[1996/12/13  22:08:04  wardr]
# 
# Revision 1.1.2.6  1996/12/12  21:29:53  wardr
# 	{edit,R1.2.2}
# 	Fixed formatting problems
# 	[1996/12/12  21:28:02  wardr]
# 
# Revision 1.1.2.5  1996/12/12  16:48:55  carrig
# 	{enh,R1.2.2}
# 	Minor edits
# 	[1996/12/12  16:46:34  carrig]
# 
# Revision 1.1.2.4  1996/12/06  21:09:33  carrig
# 	{enh,R1.2.2}
# 	Second pass for editor
# 	[1996/12/06  21:07:18  carrig]
# 
# Revision 1.1.2.3  1996/12/05  21:38:24  carrig
# 	{enh,R1.2.2}
# 	First pass to prepare for editing
# 	[1996/12/05  21:36:23  carrig]
# 
# Revision 1.1.2.2  1996/12/02  15:40:32  weir
# 	Removed thinsp entities, corrected other minor errors
# 	[1996/12/02  15:38:44  weir]
# 
# Revision 1.1.2.1  1996/12/01  20:42:48  weir
# 	Initial submission
# 	[1996/12/01  20:41:09  weir]
# 
# 	Initial submission
# 	[1996/11/29  20:35:14  weir]
# 
# $EndLog$
-->
<!-- Fragment document type declaration subset:
ArborText, Inc., 1988-1993, v.4001
<!DOCTYPE Book PUBLIC "-//Davenport//DTD DocBook V2.4//EN" [
]>
-->
<!---->
<!-- COPYRIGHT NOTICE-->
<!-- Copyright (c) 1990, 1991, 1992, 1993 Open Software Foundation, Inc.-->
<!-- ALL RIGHTS RESERVED (DCE).  See the file named COPYRIGHT.DCE in the-->
<!-- src directory for the full copyright text.-->
<!---->
<!---->
<!-- OLD HISTORY-->
<!-- Revision 1.1.8.2  1996/03/27  13:15:14  wardr-->
<!-- 	{edit R1.2.1}-->
<!-- 	More Release Edits-->
<!-- 	[1996/03/27  13:14:55  wardr]-->
<!---->
<!-- Revision 1.1.8.1  1996/03/21  20:38:00  wardr-->
<!-- 	{edit R1.2.1}-->
<!-- 	Release Edits-->
<!-- 	[1996/03/21  20:37:44  wardr]-->
<!-- -->
<!-- Revision 1.1.6.10  1995/06/07  14:36:36  rcb-->
<!-- 	PRENTICE HALL reformat; final edits and changes-->
<!-- 	[1995/06/05  19:53:55  rcb]-->
<!-- -->
<!-- 	PRENTICE HALL reformat-->
<!-- 	[1995/05/01  19:34:57  rcb]-->
<!-- -->
<!-- 	incorporated 1.1 edits-->
<!-- 	[1995/05/01  19:10:50  rcb]-->
<!-- -->
<!-- Revision 1.1.6.9  1994/11/03  23:33:56  neilson-->
<!-- 	Substituted macros for book names in cross refs.-->
<!-- 	[1994/11/03  01:38:52  neilson]-->
<!-- -->
<!-- 	Substituted macros for book names in cross refs.-->
<!-- -->
<!-- Revision 1.1.6.8  1994/10/27  00:22:17  jshirley-->
<!-- 	Minor edits.-->
<!-- 	[1994/10/27  00:22:03  jshirley]-->
<!-- -->
<!-- Revision 1.1.6.7  1994/10/21  00:22:16  jshirley-->
<!-- 	Fixed cross refs. and table problem.-->
<!-- 	[1994/10/21  00:21:37  jshirley]-->
<!-- -->
<!-- Revision 1.1.6.6  1994/03/14  22:00:36  rom-->
<!-- 	{enh, 10129, R1.1}-->
<!-- 	Fix pathnames of included files for new three-book organization.-->
<!-- 	[1994/03/14  21:20:11  rom]-->
<!-- -->
<!-- Revision 1.1.6.5  1993/02/03  20:29:28  buckler-->
<!-- 	Changed .P! to .pI and added Postscript boundary boxes-->
<!-- 	[1993/02/03  20:28:47  buckler]-->
<!-- -->
<!-- Revision 1.1.6.4  1993/01/28  18:41:51  cjd-->
<!-- 	Embedded copyright notice-->
<!-- 	[1993/01/28  18:01:23  cjd]-->
<!-- -->
<!-- Revision 1.1.6.3  1993/01/07  16:50:09  buckler-->
<!-- 	Bug 5335:  Changed ISO acronym expansion from "International Standards-->
<!-- 	Organization" to "International Organization for Standardization".-->
<!-- 	Also changed an index entry to conform with this expansion.-->
<!-- 	[1993/01/07  16:44:26  buckler]-->
<!-- -->
<!-- Revision 1.1.6.2  1992/11/20  19:20:49  weir-->
<!-- 	Moved into 1.0.2doc tree-->
<!-- 	[1992/11/20  19:16:47  weir]-->
<!-- -->
<!-- Revision 1.1.4.6  1992/11/11  23:47:33  buckler-->
<!-- 	Corrected index entries-->
<!-- 	[1992/11/11  22:50:59  buckler]-->
<!-- -->
<!-- Revision 1.1.4.5  1992/11/06  19:59:08  lmk-->
<!-- 	Prentice-Hall index edits only-->
<!-- 	[1992/11/06  19:57:55  lmk]-->
<!-- -->
<!-- Revision 1.1.4.4  1992/10/10  15:46:01  casey-->
<!-- 	Index changes for PH-->
<!-- 	[1992/10/10  15:36:02  casey]-->
<!-- -->
<!-- Revision 1.1.4.3  1992/10/08  16:45:00  lmk-->
<!-- 	Prentice-Hall final edits only-->
<!-- 	[1992/10/08  15:04:18  lmk]-->
<!-- -->
<!-- Revision 1.1.4.2  1992/09/18  19:44:24  oaf-->
<!-- 	*** empty log message ***-->
<!-- -->
<!-- Revision 1.1.3.2  1992/09/18  19:43:00  oaf-->
<!-- 	updated, moved to dce1.0.1PHdoc.-->
<!-- -->
<!-- Revision 1.1.2.6  1992/07/17  14:24:14  weir-->
<!-- 	Fixed faulty .zA/.zZ macro coding.-->
<!-- 	[1992/07/17  14:23:50  weir]-->
<!-- -->
<!-- Revision 1.1.2.5  1992/06/17  16:57:15  h_hoff-->
<!-- 	Affected doc: App_gd, pp 36-3, 36-4, 36-5, examples-->
<!-- -->
<!-- 	1. CR2183 - pp 36-3, 1st example: Changed 'infinite' to 'unspecified.'-->
<!-- 	2. CR2183 - pp 36-3, 3rd example: Changed 'infinite' to 'unspecified.'-->
<!-- 	3. CR2183 - pp 36-3, 4th example: Changed 'infinite' to 'unspecified.'-->
<!-- 	4. CR2183 - pp 36-4, 1st example: Changed 'infinite' to 'unspecified.'-->
<!-- 	[1992/06/17  15:13:10  h_hoff]-->
<!-- -->
<!-- Revision 1.1.2.4  1992/06/05  12:57:40  h_hoff-->
<!-- 	1. CR2843 - pp 36-2, para 4: Changed 'Local time is UTC minus the TDF' to-->
<!-- 	                'Local time is UTC plus the TDF'.-->
<!-- -->
<!-- 	2. CR2843 - pp 36-9: Changed of a binary relative time' to 'of a binary-->
<!-- 	                relative timestamp'.-->
<!-- -->
<!-- 	3. CR2843 - pp 36-10, utc_binreltime: Change wording for clarity-->
<!-- -->
<!-- 	4. CR2843 - pp 36-10, utc_gmtzone:  Change wording to delete offset reference-->
<!-- -->
<!-- 	5. CR2843 - pp 36-11, utc_spantime: Correct for clarity-->
<!-- -->
<!-- 	6. CR2843 - pp 36-11, utc_subtime: Correct for clarity-->
<!-- 	[1992/06/05  12:56:26  h_hoff]-->
<!-- -->
<!-- Revision 1.1.2.2  1992/05/14  13:14:15  h_hoff-->
<!-- 	The following files have been fixed, Postscript proofed, and verified as-->
<!-- 	specified in CR2843:-->
<!-- -->
<!-- 	  Submitted by Heinz A. Hoffmann - DOC; User name: h_hoff-->
<!-- 	  Date: 5/14/92-->
<!-- 	  Number of files: 1.-->
<!-- -->
<!-- 	1, 1_intro_dts.gpsml, pp 1-10, utc_binreltime: CR2843 - Change wording-->
<!-- 	for clarity-->
<!-- -->
<!-- 	2. 1_intro_dts.gpsml, pp 1-10, utc_gmtzone: CR2843 - Change wording to delete-->
<!-- 	offset reference-->
<!-- -->
<!-- 	3. 1_intro_dts.gpsml, pp 1-11, utc_spantime, utc_subtime: CR2843 - Correct-->
<!-- 	for clarity-->
<!-- 	[1992/05/14  13:12:56  h_hoff]-->
<!-- -->
<!-- Revision 1.1  1992/01/29  16:06:14  damon-->
<!-- 	Initial revision-->
<!-- -->
<!---->
<!-- (c) Copyright 1991, Open Software Foundation, Inc.  ALL RIGHTS RESERVED-->
<!--   HISTORY COMMENTS:-->
<!---->
<!--   DATE:                            COMMENT:-->
<!---->
<!--	Fri Oct 25, 1991                 Initial File Submission for final-->
<!--                                    integration at IBM-->
<!---->
<!-- ********************************************************************-->
<!--                                                                    *-->
<!-- COPYRIGHT (c) 1991 BY DIGITAL EQUIPMENT CORPORATION,               *-->
<!-- Maynard, Mass.                                                     *-->
<!--                                                                    *-->
<!-- This document is furnished under a license and may be used and     *-->
<!-- copied only in accordance with the terms of such license and with  *-->
<!-- the inclusion of the above copyright notice.  No title to or       *-->
<!-- ownership of the document is hereby transferred.                   *-->
<!--                                                                    *-->
<!-- The information in this document is subject to change without      *-->
<!-- notice and should not be construed as a commitment by Digital      *-->
<!-- Equipment Corporation.                                             *-->
<!--                                                                    *-->
<!-- ********************************************************************-->
<Chapter Id="DCEADG.TIMEI.div.1">
<Title>Introduction to the Distributed Time Service API</Title>
<Para><IndexTerm Id="DCEADG.TIMEI.indx.1">
<Primary>time structures</Primary>
<See>DTS, time structures</See>
</IndexTerm>
<IndexTerm Id="DCEADG.TIMEI.indx.2">
<Primary>DTS</Primary>
<Secondary>routines</Secondary>
</IndexTerm>This chapter describes the DCE Distributed Time Service (DTS) programming
routines.  You can use these routines to obtain timestamps that are based on
Coordinated Universal Time (UTC).  You can also use the DTS routines to
translate among different timestamp formats and perform calculations on
timestamps.  Applications can use the timestamps that DTS supplies to determine
event sequencing, duration, and scheduling.  Applications can call the DTS
routines from any host that has the <Literal>libdce</Literal>.  The <Command>dtsd</Command> need
not be running.
</Para>
<Para>DTS routines are written in the C programming language.
You should be familiar with basic DTS concepts before you attempt to use
the application programming interface (API).  The DTS chapters of the
&DCEAc; provide conceptual information about DTS.
</Para>
<Para>The DTS API routines offer the following basic functions:
</Para>
<ItemizedList>
<ListItem>
<Para>Retrieving timestamp information
</Para>
</ListItem>
<ListItem>
<Para>Converting between binary timestamps that use different time structures
</Para>
</ListItem>
<ListItem>
<Para>Converting between binary timestamps and ASCII representations
</Para>
</ListItem>
<ListItem>
<Para>Converting between UTC time and local time
</Para>
</ListItem>
<ListItem>
<Para>Manipulating binary timestamps
</Para>
</ListItem>
<ListItem>
<Para>Comparing two binary time values
</Para>
</ListItem>
<ListItem>
<Para>Calculating binary time values
</Para>
</ListItem>
<ListItem>
<Para>Obtaining time zone information
</Para>
</ListItem>
</ItemizedList>
<Para>The sections that follow describe how DTS represents time, discuss the DTS time
structures, discuss the
DTS API header files, and briefly describe the DTS API routines.
</Para>
<Sect1 Id="DCEADG.TIMEI.div.2">
<Title>DTS Time Representation</Title>
<Para><IndexTerm Id="DCEADG.TIMEI.indx.3">
<Primary>time representation</Primary>
</IndexTerm>
<IndexTerm Id="DCEADG.TIMEI.indx.4">
<Primary>UTC</Primary>
</IndexTerm>
<IndexTerm Id="DCEADG.TIMEI.indx.5">
<Primary>Coordinated Universal Time</Primary>
</IndexTerm>
<IndexTerm Id="DCEADG.TIMEI.indx.6">
<Primary>BIH</Primary>
</IndexTerm>
<IndexTerm Id="DCEADG.TIMEI.indx.7">
<Primary>International Time Bureau</Primary>
</IndexTerm>
<IndexTerm Id="DCEADG.TIMEI.indx.8">
<Primary>Greenwich Mean Time (GMT)</Primary>
</IndexTerm>
<IndexTerm Id="DCEADG.TIMEI.indx.9">
<Primary>ASCII text strings</Primary>
<Secondary>binary timestamps translated to</Secondary>
</IndexTerm>UTC is the international time standard that has
largely replaced Greenwich Mean Time (GMT).  The standard is administered by the
International Time Bureau (BIH) and is widely used.  DTS uses opaque binary
timestamps that represent UTC for all of its internal processes.  You cannot
read or disassemble a DTS binary timestamp; the DTS API allows applications to
convert or manipulate timestamps, but they cannot be displayed.  DTS also
translates the binary timestamps into ASCII text strings, which can be
displayed.
</Para>
<Sect2 Id="DCEADG.TIMEI.div.3">
<Title>Absolute Time Representation</Title>
<Para>An absolute time is a point on a time scale. For DTS, absolute
times reference the UTC time scale; absolute time measurements are derived from
system clocks or external time-providers.  When DTS reads a system clock
time, it records the time in an opaque binary timestamp that also includes the
inaccuracy and other information.  When you display an absolute time, DTS
converts the time to ASCII text as shown in the following display:
</Para>
<InformalExample>
<Para><ProgramListing>1990-11-21-13:30:25.785-04:00I000.082
</ProgramListing></Para>
</InformalExample>
<Para><IndexTerm Id="DCEADG.TIMEI.indx.10">
<Primary>ISO format</Primary>
</IndexTerm>
<IndexTerm Id="DCEADG.TIMEI.indx.11">
<Primary>International Organization for Standardization</Primary>
<See>ISO</See>
</IndexTerm>DTS displays all times in a format that complies with the International
Organization for Standardization (ISO) 8601 (1988) standard. 
Note that the inaccuracy
portion of the time is not defined in the ISO standard; times that do not
include an inaccuracy are accepted.
</Para>
<Para><?sml-need 3i>Figure 20-1 explains the ISO format that generated the previous display.
</Para>
<Figure>
<Title>ISO Format for Time Displays</Title>
<Graphic Entityref="DCEADG.TIMEI.ent.1"></Graphic>
</Figure>
<!-- sourcefile = 1_iso_format_10_dts.gra scaled to 80%-->
<?sml-space .5>
<Para><IndexTerm Id="DCEADG.TIMEI.indx.12">
<Primary>TDF</Primary>
</IndexTerm>
<IndexTerm Id="DCEADG.TIMEI.indx.13">
<Primary>time differential factor</Primary>
</IndexTerm>
<IndexTerm Id="DCEADG.TIMEI.indx.14">
<Primary>inaccuracy, specifying ISO</Primary>
</IndexTerm>In this figure, the relative time preceded by the <Literal>+</Literal> (plus) 
or <Literal>&minus;</Literal> (minus) character indicates the hours and minutes that 
the calendar date and time are
offset from UTC. The presence of this time differential factor (TDF)
in the string also indicates that the calendar date and time are the local
time of the system, not UTC. Local time is UTC plus the TDF. The Inaccuracy
(<Literal>I</Literal>) designator indicates the beginning of the inaccuracy component
associated with the time.
</Para>
<Para>Although DTS displays all times in the previous format, variations to the
ISO format shown in Figure 20-2 are also accepted as input for the
ASCII conversion routines.
</Para>
<Figure>
<Title>Variations to the ISO Time Format</Title>
<Graphic Entityref="DCEADG.TIMEI.ent.2"></Graphic>
</Figure>
<!--sourcefile = 1_iso_variant_20_dts.gra scaled to 80%-->
<?sml-space .5>
<Para><IndexTerm Id="DCEADG.TIMEI.indx.15" SpanEnd="DCEADG.TIMEI.indx.10"><?sml-need 3>In this figure, the Time (<Literal>T</Literal>) designator separates the
calendar date from the time, a <Literal>,</Literal> (comma) separates seconds from fractional
seconds, and the <Literal>+</Literal> or <Literal>&minus;</Literal> indicates the beginning of the
inaccuracy component.
</Para>
<Para>The following examples show some valid time formats.
</Para>
<Para>The following represents July 4, 1776 17:01 GMT and an unspecified inaccuracy
(default):
</Para>
<InformalExample>
<Para><ProgramListing>1776-7-4-17:01:00
</ProgramListing></Para>
</InformalExample>
<Para>The following represents a local time of 12:01 (17:01 GMT) on July 4, 1776
with a TDF of &minus;5 hours and an inaccuracy of 100 seconds:
</Para>
<InformalExample>
<Para><ProgramListing>1776-7-4-12:01:00-05:00I100
</ProgramListing></Para>
</InformalExample>
<Para>Both of the following represent 12:00 GMT in the current day, month, and year
with an unspecified inaccuracy:
</Para>
<InformalExample>
<Para><ProgramListing>12:00 and T12
</ProgramListing></Para>
</InformalExample>
<Para>The following represents July 14, 1792 00:00 GMT with an unspecified
inaccuracy:
</Para>
<InformalExample>
<Para><ProgramListing>1792-7-14
</ProgramListing></Para>
</InformalExample>
</Sect2>
<Sect2 Id="DCEADG.TIMEI.div.4">
<Title>Relative Time Representation</Title>
<Para><IndexTerm Id="DCEADG.TIMEI.indx.16">
<Primary>time</Primary>
<Secondary>relative</Secondary>
</IndexTerm>
<IndexTerm Id="DCEADG.TIMEI.indx.17">
<Primary>relative time</Primary>
</IndexTerm>A relative time is a discrete time interval that is usually added to
or subtracted from another time.  A TDF associated with an absolute time is one
example of a relative time.  A relative time is normally used as input for
commands or system routines.
</Para>
<Para><?sml-need 2.5i>Figure 20-3 shows the full syntax for a relative time.
</Para>
<Figure>
<Title>Full Syntax for a Relative Time</Title>
<Graphic Entityref="DCEADG.TIMEI.ent.3"></Graphic>
</Figure>
<!--sourcefile = 1_reltime_format_30_dts.gra scaled to 80%-->
<?sml-space .5>
<Para>The following example shows a relative time of 21 days, 8 hours, and 30
minutes, 25 seconds with an inaccuracy of 0.300 seconds:
</Para>
<InformalExample>
<Para><ProgramListing>21-08:30:25.000I00.300
</ProgramListing></Para>
</InformalExample>
<Para>The following example shows a negative relative time of 20.2 seconds with an
unspecified inaccuracy (default):
</Para>
<InformalExample>
<Para><ProgramListing>-20.2
</ProgramListing></Para>
</InformalExample>
<Para>The following example shows a relative time of 10 minutes, 15.1 seconds with an
inaccuracy of 4 seconds:
</Para>
<InformalExample>
<Para><ProgramListing>10:15.1I4
</ProgramListing></Para>
</InformalExample>
<Para><IndexTerm Id="DCEADG.TIMEI.indx.18">
<Primary>relative time</Primary>
</IndexTerm>Notice that a relative time does not use the calendar date fields, since these
fields concern absolute time.  A positive relative time is unsigned; a negative
relative time is preceded by a <Literal>&minus;</Literal> (minus) sign.  A relative time is often
subtracted from or added to another relative or absolute time.  Relative times
that DTS uses internally are opaque binary timestamps.  The DTS API offers
several routines that can be used to calculate new times by use of
relative binary timestamps.
</Para>
<Sect3 Id="DCEADG.TIMEI.div.5">
<Title>Representing Periods of Time</Title>
<Para>A given duration of a period of time can be represented by a data element of
variable length that uses the syntax shown in Figure 20-4.
</Para>
<?sml-need 2i>
<Figure>
<Title>Syntax for Representing a Duration</Title>
<Graphic Entityref="DCEADG.TIMEI.ent.4" Scalefit="1" Reprowid="350" Reprodep="350"></Graphic>
</Figure>
<!--sourcefile = 1_periodtime_format_40_dts.gra scaled to 80%-->
</Sect3>
<Sect3 Id="DCEADG.TIMEI.div.6">
<Title>The Data Element Parts</Title>
<Para>The data element contains the following parts:
</Para>
<ItemizedList>
<ListItem>
<Para>The designator <Literal>P</Literal> precedes the part that includes the calendar
components, including the following:
</Para>
<ItemizedList>
<ListItem>
<Para>The number of years followed by the designator <Literal>Y</Literal>
</Para>
</ListItem>
<ListItem>
<Para>The number of months followed by the designator <Literal>M</Literal>
</Para>
</ListItem>
<ListItem>
<Para>The number of weeks followed by the designator <Literal>W</Literal>
</Para>
</ListItem>
<ListItem>
<Para>The number of days followed by the designator <Literal>D</Literal>
</Para>
</ListItem>
</ItemizedList>
</ListItem>
<ListItem>
<Para>The <Literal>T</Literal> designator precedes the part that includes the time components,
including the following:
</Para>
<ItemizedList>
<ListItem>
<Para>The number of hours followed by the designator <Literal>H</Literal>
</Para>
</ListItem>
<ListItem>
<Para>The number of minutes followed by the designator <Literal>M</Literal>
</Para>
</ListItem>
<ListItem>
<Para>The number of seconds followed by the designator <Literal>S</Literal>
</Para>
</ListItem>
</ItemizedList>
</ListItem>
<ListItem>
<Para>The designator <Literal>I</Literal> precedes the number of seconds of inaccuracy.
</Para>
</ListItem>
</ItemizedList>
<Para>The following example represents a period of 1 year, 6 months, 15 days, 11
hours, 30 minutes, and 30 seconds and an unspecified inaccuracy:
</Para>
<InformalExample>
<Para><ProgramListing><?sml-need 3>P1Y6M15DT11H30M30S
</ProgramListing></Para>
</InformalExample>
<Para>The following example represents a period of 3 weeks and an inaccuracy of 4
seconds:
</Para>
<InformalExample>
<Para><ProgramListing>P3WI4
</ProgramListing></Para>
</InformalExample>
</Sect3>
</Sect2>
</Sect1>
<Sect1 Id="DCEADG.TIMEI.div.7">
<Title>Time Structures</Title>
<Para><IndexTerm Id="DCEADG.TIMEI.indx.19">
<Primary>DTS</Primary>
<Secondary>time structures</Secondary>
</IndexTerm>DTS can convert among several types of binary time structures that are
based on different base dates and time unit measurements.
DTS uses UTC-based time structures and can convert other types of
time structures to its own presentation of UTC-based time.
The DTS API routines are used to perform these conversions for
applications on your system.
</Para>
<Para>Table 20-1 lists the absolute time structures that the DTS API uses
to modify binary times for applications.
<!---->
<!--  \*LAbsolute time\*O is a point on a time scale, such as-->
<!--  1970-01-01-00:00:00.000+00:00I000.000.  For DTS, absolute-->
<!--  times reference the UTC standard.-->
</Para>
<Table Frame="all" Remap="center" Orient="Port">
<Title>Absolute Time Structures</Title>
<TGroup Rowsep="1" Colsep="1" Cols="4">
<ColSpec Colsep="1" Align="Left" Colwidth="1*" Colname="col1" Colnum="1">
<ColSpec Colsep="1" Align="Left" Colwidth="1*" Colname="col2" Colnum="2">
<ColSpec Colsep="1" Align="Left" Colwidth="1*" Colname="col3" Colnum="3">
<ColSpec Align="Left" Colwidth="1*" Colname="col4" Colnum="4">
<thead>
<Row>
<Entry Rowsep="1"><Literal>Structure</Literal></Entry>
<Entry Rowsep="1"><Literal>Time Units</Literal></Entry>
<Entry Rowsep="1"><Literal>Base Date</Literal></Entry>
<Entry Rowsep="1"><Literal>Approximate Range</Literal></Entry>
</Row>
</thead>
<tbody>
<Row>
<Entry><Literal>utc</Literal></Entry>
<Entry>100-nanosecond</Entry>
<Entry>15 October 1582</Entry>
<Entry>A.D. 1 to A.D. 30,000</Entry>
</Row>
<Row>
<Entry><Literal>tm</Literal></Entry>
<Entry>second</Entry>
<Entry>1 January 1900</Entry>
<Entry>A.D. 1 to A.D. 30,000</Entry>
</Row>
<Row>
<Entry><Literal>timespec</Literal></Entry>
<Entry>nanosecond</Entry>
<Entry>1 January 1970</Entry>
<Entry>A.D. 1970 to A.D. 2106</Entry>
</Row>
</TBody>
</TGroup>
</Table>
<?sml-point-size 11>
<!--no-op:  13-->
<?sml-point-size 12>
<!--no-op:  14-->
<Para>Table 20-2 lists the relative time structures that the DTS API uses
to modify binary times for applications.
<!---->
<!--  \*LRelative time\*O is a discrete time interval that is usually-->
<!--  added to or subtracted from an absolute time.  For example,-->
<!--  2 days, 2 hours, and 22 minutes, 22 seconds with an inaccuracy of 0.222-->
<!--  seconds.-->
<!---->
<IndexTerm Id="DCEADG.TIMEI.indx.20">
<Primary>DTS</Primary>
<Secondary>relative time structures</Secondary>
</IndexTerm></Para>
<Table Frame="all" Remap="center" Orient="Port">
<Title>Relative Time Structures</Title>
<TGroup Rowsep="1" Colsep="1" Cols="3">
<ColSpec Colsep="1" Align="Left" Colwidth="1*" Colname="col1" Colnum="1">
<ColSpec Colsep="1" Align="Left" Colwidth="1*" Colname="col2" Colnum="2">
<ColSpec Align="Left" Colwidth="1*" Colname="col3" Colnum="3">
<thead>
<Row>
<Entry Rowsep="1"><Literal>Structure</Literal></Entry>
<Entry Rowsep="1"><Literal>Time Units</Literal></Entry>
<Entry Rowsep="1"><Literal>Approximate Range</Literal></Entry>
</Row>
</thead>
<tbody>
<Row>
<Entry><Literal>utc</Literal></Entry>
<Entry>100-nanosecond</Entry>
<Entry>+/&minus; 30,000 years</Entry>
</Row>
<Row>
<Entry><Literal>tm</Literal></Entry>
<Entry>second</Entry>
<Entry>+/- 30,000 years</Entry>
</Row>
<Row>
<Entry><Literal>reltimespec</Literal></Entry>
<Entry>nanosecond</Entry>
<Entry>+/- 68 years</Entry>
</Row>
</TBody>
</TGroup>
</Table>
<Para>The remainder of this section explains the DTS time structures in detail.
</Para>
<Sect2 Id="DCEADG.TIMEI.div.8">
<Title>The utc Structure</Title>
<Para><IndexTerm Id="DCEADG.TIMEI.indx.21">
<Primary>DTS</Primary>
<Secondary>time structures</Secondary>
</IndexTerm>
<IndexTerm Id="DCEADG.TIMEI.indx.22">
<Primary>Binary Timestamps</Primary>
</IndexTerm>UTC is useful for measuring time across local time
zones and for avoiding the seasonal changes (summer time or daylight savings
time) that can affect the local time.  DTS uses 128-bit binary numbers to
represent time values internally; throughout this guide, these binary numbers
representing time values are referred to as <FirstTerm>binary timestamps</FirstTerm>.
The DTS <Literal>utc</Literal> structure determines the ordering of the bits in a binary
timestamp; all binary timestamps that are based on the <Literal>utc</Literal> structure
contain the following information:
</Para>
<ItemizedList>
<ListItem>
<Para>The count of 100-nanosecond units since 00:00:00.00, 15 October 1582 (the date
of the Gregorian reform to the Christian calendar)
</Para>
</ListItem>
<ListItem>
<Para>The count of 100-nanosecond units of inaccuracy applied to the
preceding item
</Para>
</ListItem>
<ListItem>
<Para>The TDF, expressed as the signed quantity
</Para>
</ListItem>
<ListItem>
<Para>The DTS version number
</Para>
</ListItem>
</ItemizedList>
<Para>The binary timestamps that are derived from the DTS <Literal>utc</Literal> structure have
an opaque format.  This format is a cryptic character sequence that DTS uses
and stores internally.  The opaque binary timestamp is designed for use in
programs, protocols, and databases.
</Para>
<Note>
<Para>Applications use the opaque binary timestamps when storing time values or when
passing them to DTS.
</Para>
</Note>
<Para>The API provides the necessary routines for converting between opaque binary
timestamps and character strings that can be displayed and read by users.
</Para>
</Sect2>
<Sect2 Id="DCEADG.TIMEI.div.9">
<Title>The tm Structure</Title>
<Para><IndexTerm Id="DCEADG.TIMEI.indx.23">
<Primary>DTS</Primary>
<Secondary>time structures</Secondary>
</IndexTerm>
<IndexTerm Id="DCEADG.TIMEI.indx.24">
<Primary>time.h header file</Primary>
</IndexTerm>The <Literal>tm</Literal> structure is based on the time in years, months, days, hours,
minutes, and seconds since 00:00:00 GMT (Greenwich Mean Time), 1 January 1900.
The <Literal>tm</Literal> structure is defined in the <Filename>time.h</Filename> header file.
</Para>
<Para><IndexTerm Id="DCEADG.TIMEI.indx.25">
<Primary>tm time structures</Primary>
</IndexTerm>The <Literal>tm</Literal> structure declaration follows:
</Para>
<InformalExample>
<Para><ProgramListing><?sml-need 12>struct tm {
     int tm_sec;    /* Seconds (0 - 59)                   */
     int tm_min;    /* Minutes (0 - 59)                   */
     int tm_hour;   /* Hours (0 - 23)                     */
     int tm_mday;   /* Day of Month (1 - 31)              */
     int tm_mon;    /* Month of Year (0 - 11)             */
     int tm_year;   /* Year - 1900                        */
     int tm_wday;   /* Day of Week (Sunday = 0)           */
     int tm_yday;   /* Day of Year (0 - 364)              */
     int tm_isdst;  /* Nonzero if Daylight Savings Time   */
                    /*  is in effect                      */
          };
</ProgramListing></Para>
</InformalExample>
<Para>Not all of the <Literal>tm</Literal> structure fields are used for each routine that
converts between <Literal>tm</Literal> structures and <Literal>utc</Literal> structures.
(See the parameter descriptions contained in the reference pages
in the &DCEDr; for additional
information about which fields are used for specific routines.)
</Para>
</Sect2>
<Sect2 Id="DCEADG.TIMEI.div.10">
<Title>The timespec Structure</Title>
<Para><IndexTerm Id="DCEADG.TIMEI.indx.26">
<Primary>DTS</Primary>
<Secondary>time structures</Secondary>
</IndexTerm>The <Literal>timespec</Literal> structure is normally used in combination with
or in place of the <Literal>tm</Literal> structure to provide finer resolution
for binary times.  The <Literal>timespec</Literal> structure is similar to the
<Literal>tm</Literal> structure, but the <Literal>timespec</Literal> structure
specifies the number of seconds and nanoseconds since the base time of
00:00:00 GMT, 1 January 1970.
<IndexTerm Id="DCEADG.TIMEI.indx.27">
<Primary>dce/utc.h header file</Primary>
</IndexTerm>You can find the structure in the <Filename>dce/utc.h</Filename> header file.
</Para>
<Para>The <Literal>timespec</Literal> structure declaration follows:
</Para>
<InformalExample>
<Para><ProgramListing>struct timespec {
   time_t  tv_sec;       /*  Seconds since 00:00:00 GMT,  */
                         /*   1 January 1970              */
   long    tv_nsec;      /*  Additional nanoseconds since */
                         /*   tv_sec                      */
             }    timespec_t;
</ProgramListing></Para>
</InformalExample>
</Sect2>
<Sect2 Id="DCEADG.TIMEI.div.11">
<Title>The reltimespec Structure</Title>
<Para><IndexTerm Id="DCEADG.TIMEI.indx.28">
<Primary>DTS</Primary>
<Secondary>time structures</Secondary>
</IndexTerm>The <Literal>reltimespec</Literal> structure represents relative time.  This
structure is similar to the <Literal>timespec</Literal> structure, except that
the first field is <Symbol Role="Variable">signed</Symbol> in the <Literal>reltimespec</Literal>
structure. (The field is <Symbol Role="Variable">unsigned</Symbol> in the
<Literal>timespec</Literal> structure.)
You can find the <Literal>reltimespec</Literal> structure in the <Filename>dce/utc.h</Filename>
header file.
</Para>
<Para>The <Literal>reltimespec</Literal> structure declaration follows:
</Para>
<InformalExample>
<Para><ProgramListing>struct reltimespec {
         time_t tv_sec;   /*  Seconds of relative time    */
         long   tv_nsec;  /*  Additional nanoseconds of   */
                          /*   relative time              */
              }   reltimespec_t;
</ProgramListing></Para>
</InformalExample>
</Sect2>
</Sect1>
<Sect1 Id="DCEADG.TIMEI.div.12">
<Title>DTS API Header Files</Title>
<Para>The <Filename>time.h</Filename> and <Filename>dce/utc.h</Filename> header files contain the
data structures, type definitions, and define statements that are referenced by
the DTS API routines.  The <Filename>time.h</Filename> header file is a standard UNIX file.
The <Filename>dce/utc.h</Filename> header file includes
<Filename>time.h</Filename> and contains the <Literal>timespec</Literal>, <Literal>reltimespec</Literal>, and
<Literal>utc</Literal> structures.
</Para>
<Para>These header files are located in <Filename>/usr/include/dce</Filename>.
<?sml-break><?sml-need 20></Para>
</Sect1>
<Sect1 Id="DCEADG.TIMEI.div.13">
<Title>DTS API Routine Functions</Title>
<Para>Figure 20-5 categorizes the DTS portable interface routines by function.
</Para>
<?sml-need 6i>
<Figure>
<Title>DTS API Routines Shown by Functional Grouping</Title>
<Graphic Entityref="DCEADG.TIMEI.ent.5" Scalefit="1" Reprowid="350" Reprodep="350"></Graphic>
</Figure>
<!--sourcefile = 1_routines_by_function_50_dts.gra scaled to 80%-->
<!--             a.k.a. routines_by_function.gra-->
<?sml-space .5>
<Para>An alphabetical listing of the DTS portable interface routines and a brief
description of each one follows:
</Para>
<ItemizedList>
<ListItem>
<?sml-need 3>
<Para><Function>utc_abstime</Function>: Computes the absolute value of a binary relative timestamp
</Para>
</ListItem>
<ListItem>
<Para><Function>utc_addtime</Function>: Computes the sum of two binary timestamps; the timestamps can be two relative times or a relative time and an absolute time
</Para>
</ListItem>
<ListItem>
<Para><Function>utc_anytime</Function>: Converts a binary timestamp into a <Literal>tm</Literal> structure by using the TDF information contained in the timestamp to determine the TDF returned with the <Literal>tm</Literal> structure
</Para>
</ListItem>
<ListItem>
<Para><Function>utc_anyzone</Function>: Gets the time zone label and offset from GMT by using the TDF contained in the
input <Literal>utc</Literal>
</Para>
</ListItem>
<ListItem>
<Para><Function>utc_ascanytime</Function>: Converts a binary timestamp into an ASCII string that represents an arbitrary
time zone
</Para>
</ListItem>
<ListItem>
<Para><Function>utc_ascgmtime</Function>: Converts a binary timestamp into an ASCII string that expresses a GMT time
</Para>
</ListItem>
<ListItem>
<Para><Function>utc_asclocaltime</Function>: Converts a binary timestamp to an ASCII string that represents a local time
</Para>
</ListItem>
<ListItem>
<Para><Function>utc_ascreltime</Function>: Converts a binary timestamp that expresses a relative time to its ASCII
representation
</Para>
</ListItem>
<ListItem>
<Para><Function>utc_binreltime</Function>: Converts a relative binary timestamp into two <Literal>timespec</Literal> structures that
express relative time and inaccuracy
</Para>
</ListItem>
<ListItem>
<Para><Function>utc_bintime</Function>: Converts a binary timestamp into a <Literal>timespec</Literal> structure
</Para>
</ListItem>
<ListItem>
<Para><Function>utc_boundtime</Function>: Given two UTC times, one before and one after an event, returns a single
UTC time whose inaccuracy includes the event
</Para>
</ListItem>
<ListItem>
<Para><Function>utc_cmpintervaltime</Function>: Compares two binary timestamps or two relative binary timestamps
</Para>
</ListItem>
<ListItem>
<Para><Function>utc_cmpmidtime</Function>: Compares two binary timestamps or two relative binary timestamps, ignoring
inaccuracies
</Para>
</ListItem>
<ListItem>
<Para><Function>utc_gettime</Function>: Returns the current system time and inaccuracy as an opaque binary timestamp
</Para>
</ListItem>
<ListItem>
<Para><Function>utc_getusertime</Function>: Returns the time and process-specific TDF, rather than the system-specific TDF
</Para>
</ListItem>
<ListItem>
<Para><Function>utc_gmtime</Function>: Converts a binary timestamp into a <Literal>tm</Literal> structure that expresses GMT or
the equivalent UTC
</Para>
</ListItem>
<ListItem>
<Para><Function>utc_gmtzone</Function>: Gets the time zone label, given <Literal>utc</Literal>
</Para>
</ListItem>
<ListItem>
<Para><Function>utc_localtime</Function>: Converts a binary timestamp into a <Literal>tm</Literal> structure that expresses local
time
</Para>
</ListItem>
<ListItem>
<Para><Function>utc_localzone</Function>: Gets the time zone label and offset from GMT, given <Literal>utc</Literal>
</Para>
</ListItem>
<ListItem>
<Para><Function>utc_mkanytime</Function>: Converts a <Literal>tm</Literal> structure and TDF (expressing the time in an arbitrary
time zone) into a binary timestamp
</Para>
</ListItem>
<ListItem>
<Para><Function>utc_mkascreltime</Function>: Converts a null-terminated character string, which represents a relative
timestamp, to a binary timestamp
</Para>
</ListItem>
<ListItem>
<Para><Function>utc_mkasctime</Function>: Converts a null-terminated character string, which represents an absolute
timestamp, to a binary timestamp
</Para>
</ListItem>
<ListItem>
<Para><Function>utc_mkbinreltime</Function>: Converts a <Literal>timespec</Literal> structure expressing a relative time to a binary
timestamp
</Para>
</ListItem>
<ListItem>
<Para><Function>utc_mkbintime</Function>: Converts a <Literal>timespec</Literal> structure into a binary timestamp
</Para>
</ListItem>
<ListItem>
<Para><Function>utc_mkgmtime</Function>: Converts a <Literal>tm</Literal> structure that expresses GMT or UTC to a binary timestamp
</Para>
</ListItem>
<ListItem>
<Para><Function>utc_mklocaltime</Function>: Converts a <Literal>tm</Literal> structure that expresses local time to a binary timestamp
</Para>
</ListItem>
<ListItem>
<Para><Function>utc_mkreltime</Function>: Converts a <Literal>tm</Literal> structure that expresses relative time to a binary
timestamp
</Para>
</ListItem>
<ListItem>
<Para><Function>utc_mulftime</Function>: Multiplies a relative binary timestamp by a floating-point value
</Para>
</ListItem>
<ListItem>
<Para><Function>utc_multime</Function>: Multiplies a relative binary timestamp by an integer factor
</Para>
</ListItem>
<ListItem>
<Para><Function>utc_pointtime</Function>: Converts a binary timestamp to three binary timestamps that represent the
earliest, most likely, and latest time
</Para>
</ListItem>
<ListItem>
<Para><Function>utc_reltime</Function>: Converts a binary timestamp that expresses a relative time into a <Literal>tm</Literal>
structure
</Para>
</ListItem>
<ListItem>
<Para><Function>utc_spantime</Function>: Given two (possibly unordered) binary timestamps, returns a single UTC time
interval whose inaccuracy spans the two input timestamps
</Para>
</ListItem>
<ListItem>
<Para><Function>utc_subtime</Function>: Computes the difference between two binary timestamps that express either
an absolute time and a relative time, two relative times, or two absolute
times
</Para>
</ListItem>
</ItemizedList>
</Sect1>
</Chapter>
<!--+ 11/27/96 19:53:47
    | tagMorph:  $Id: 1_intro_dts.sgm,v 1.1.2.8 1996/12/14 20:23:45 wardr Exp $
    | tagMorph library:  $Id: 1_intro_dts.sgm,v 1.1.2.8 1996/12/14 20:23:45 wardr Exp $
    | sml-to-docbook:  1.25
    +-->
