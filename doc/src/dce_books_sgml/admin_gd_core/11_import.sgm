<!--
# @OSF_COPYRIGHT@
# 
# 
# HISTORY
# $Log: 11_import.sgm,v $
# Revision 1.1.2.11  1996/12/04  22:48:39  carrig
# 	{enh,R1.2.2}
# 	JC's edits
# 	[1996/12/04  22:46:16  carrig]
#
# Revision 1.1.2.10  1996/12/03  22:03:44  carrig
# 	{enh,R1.2.2}
# 	Scaled graphics
# 	[1996/12/03  22:00:42  carrig]
# 
# Revision 1.1.2.9  1996/11/29  20:20:06  carrig
# 	{enh,R1.2.2}
# 	Finished edit changes; must scale graphics
# 	[1996/11/29  20:16:33  carrig]
# 
# Revision 1.1.2.8  1996/11/27  21:43:05  carrig
# 	{enh,R1.2.2}
# 	More editor's comments
# 	[1996/11/27  21:41:01  carrig]
# 
# 	{enh,R1.2.2}
# 	More editor's comments
# 	[1996/11/27  21:27:47  carrig]
# 
# Revision 1.1.2.7  1996/11/26  21:44:41  carrig
# 	{enh,R1.2.2}
# 	Putting in editor's comments
# 	[1996/11/26  21:40:13  carrig]
# 
# Revision 1.1.2.6  1996/11/25  21:50:50  carrig
# 	{enh,R1.2.2}
# 	Started to put in editor's comments
# 	[1996/11/25  21:48:39  carrig]
# 
# Revision 1.1.2.5  1996/11/07  20:42:57  weir
# 	Cleaned up history
# 	[1996/11/07  20:40:59  weir]
# 
# Revision 1.1.2.4  1996/11/06  20:40:07  carrig
# 	{enh,R1.2.2}
# 	OK for editing
# 	[1996/11/06  20:37:28  carrig]
# 
# Revision 1.1.2.3  1996/11/05  18:58:21  carrig
# 	{enh,R1.2.2}
# 	Second pass
# 	[1996/11/05  18:54:56  carrig]
# 
# Revision 1.1.2.2  1996/11/04  22:03:14  carrig
# 	{enh,R1.2.2}
# 	First pass at corrections
# 	[1996/11/04  21:59:36  carrig]
# 
# Revision 1.1.2.1  1996/11/01  18:19:38  wardr
# 	{edit,R1.2.2}
# 	Initial checkin after sgml conversion
# 	[1996/11/01  18:17:27  wardr]
# 
# Revision 1.1.1.2  1996/11/01  18:17:27  wardr
# 	{edit,R1.2.2}
# 	Initial checkin after sgml conversion
# 
# $EndLog$
-->
<!---->
<!-- Fragment document type declaration subset:
ArborText, Inc., 1988-1993, v.4001
<!DOCTYPE Book PUBLIC "-//Davenport//DTD DocBook V2.4//EN" [
]>
-->
<!---->
<!-- COPYRIGHT NOTICE-->
<!-- Copyright (c) 1990, 1991, 1992, 1993 Open Software Foundation, Inc.-->
<!-- ALL RIGHTS RESERVED (DCE).  See the file named COPYRIGHT.DCE in the-->
<!-- src directory for the full copyright text.-->
<!---->
<!--         -->
<!-- HISTORY-->
<!-- Revision 1.1.8.1  1996/10/21  18:08:18  wardr-->
<!-- 	{edit,R1.2.2}-->
<!-- 	Update for sgml conversion-->
<!-- 	[1996/10/21  18:07:53  wardr]-->
<!---->
<!-- Revision 1.1.6.10  1995/05/25  19:06:30  rcb-->
<!-- 	PRENTICE HALL reformat: final changes-->
<!-- 	[1995/05/25  13:24:02  rcb]-->
<!-- -->
<!-- 	PRENTICE HALL reformat-->
<!-- 	[1995/03/14  16:20:01  rcb]-->
<!-- -->
<!-- 	incorporated 1.1 edits-->
<!-- 	[1995/03/14  15:49:14  rcb]-->
<!-- -->
<!-- Revision 1.1.6.9  1994/10/20  20:26:39  wardr-->
<!-- 	{edit R1.1}-->
<!-- 	Final GA release edits-->
<!-- 	[1994/10/20  20:25:54  wardr]-->
<!-- -->
<!-- Revision 1.1.6.8  1994/10/04  22:52:44  millette-->
<!-- 	{def,9992,R1.1}-->
<!-- 	Delete that org will be created by -o option if-->
<!-- 	named org doesn't exist-->
<!-- 	[1994/10/04  22:51:24  millette]-->
<!-- -->
<!-- Revision 1.1.6.7  1994/09/30  22:08:27  millette-->
<!-- 	(enh,10014,R1.1)-->
<!-- 	dcecp edits-->
<!-- 	[1994/09/30  22:07:46  millette]-->
<!-- -->
<!-- Revision 1.1.6.6  1994/05/15  20:06:19  steto-->
<!-- 	{enh, 10014, edt, R1.1}-->
<!-- 	Looked at chapter for dcecp and made a few unrelated edits.-->
<!-- 	[1994/05/15  20:06:02  steto]-->
<!-- -->
<!-- Revision 1.1.6.5  1993/09/01  17:06:27  tmw-->
<!-- 	Added index entries for second version of master index.-->
<!-- 	[1993/09/01  17:05:06  tmw]-->
<!-- -->
<!-- Revision 1.1.6.4  1993/07/13  18:46:37  buckler-->
<!-- 	{edit, R1.0.2}-->
<!-- 	More Prentice-Hall edits.-->
<!-- 	[1993/07/13  18:07:22  buckler]-->
<!-- -->
<!-- Revision 1.1.6.3  1993/07/06  18:37:17  buckler-->
<!-- 	{edit, R1.0.2}-->
<!-- 	Prentice-Hall editorial changes.-->
<!-- 	[1993/07/06  18:16:01  buckler]-->
<!-- -->
<!-- Revision 1.1.6.2  1993/06/01  18:59:37  millette-->
<!-- 	Prentice Hall edits-->
<!-- 	[1993/06/01  18:58:20  millette]-->
<!-- -->
<!-- Revision 1.1.4.8  1993/03/02  22:17:19  buckler-->
<!-- 	Fixed mismatching .zA and .zZ codes-->
<!-- 	[1993/03/02  22:16:14  buckler]-->
<!-- -->
<!-- Revision 1.1.4.7  1993/02/19  23:41:05  millette-->
<!-- 	Bug 7215: 1.0.2 review corrections-->
<!-- 	[1993/02/19  22:57:11  millette]-->
<!-- -->
<!-- 	Bug 7215: 1.0.2 review corrections-->
<!-- 	[1993/02/19  22:17:48  millette]-->
<!-- -->
<!-- Revision 1.1.4.6  1993/01/28  20:09:41  dbelch-->
<!-- 	Embedding copyright notice-->
<!-- 	[1993/01/28  18:45:37  dbelch]-->
<!-- -->
<!-- Revision 1.1.4.5  1993/01/27  17:04:15  buckler-->
<!-- 	Fixed cross-refs and figure calls for new book org-->
<!-- 	[1993/01/27  16:56:42  buckler]-->
<!-- -->
<!-- Revision 1.1.4.4  1992/10/06  19:38:40  millette-->
<!-- 	Bug 4466: Clarify processing steps and example and-->
<!-- 	make section on entries created by passwd_import consistent-->
<!-- 	with man page.-->
<!-- 	[1992/10/06  19:37:08  millette]-->
<!-- -->
<!-- Revision 1.1.4.3  1992/08/26  13:10:44  weir-->
<!-- 	Test-->
<!-- 	[1992/08/26  13:08:05  weir]-->
<!-- -->
<!-- 	Removed change bars-->
<!-- 	[1992/08/26  12:25:27  weir]-->
<!-- -->
<!-- Revision 1.1.4.2  1992/08/25  21:22:06  weir-->
<!-- 	Moved to dce1.0.2doc-->
<!-- 	[1992/08/25  21:04:33  weir]-->
<!-- -->
<!-- Revision 1.1.2.4  1992/06/04  19:08:11  millette-->
<!-- 	Bug 3792:  Miscellaneous editorial corrections-->
<!-- 	[1992/06/04  19:06:11  millette]-->
<!-- -->
<!-- Revision 1.1.2.3  1992/05/20  14:59:38  millette-->
<!-- 	Bug 3436 and Bug 3023: Miscellaneous editorial corrections-->
<!-- 	[1992/05/20  14:42:12  millette]-->
<!-- -->
<!-- Revision 1.1.2.2  1992/05/07  21:27:59  millette-->
<!-- 	Bug 3165: passwd_import enhancements-->
<!-- 	[1992/05/07  21:26:22  millette]-->
<!-- -->
<!-- Revision 1.1  1992/01/29  16:24:15  damon-->
<!-- 	Initial revision-->
<!-- -->
<!---->
<!-- (c) Copyright 1991, Open Software Foundation, Inc.  ALL RIGHTS RESERVED-->
<!-- -->
<!-- ********************************************************************-->
<!--                                                                    *-->
<!-- HP/DIGITAL CONFIDENTIAL-->
<!-- Copyright (c) 1991 Hewlett-Packard Co. and Digital Equipment Corp.  -->
<!-- All rights reserved.-->
<!--                                                                    *-->
<!-- ********************************************************************-->
<!-- -->
<Chapter Id="AGCC.SECIMP.div.1">
<Title>Importing UNIX Accounts to DCE</Title>
<Para><IndexTerm Id="AGCC.SECIMP.indx.1">
<Primary>accounts</Primary>
<Secondary>importing</Secondary>
</IndexTerm>
<IndexTerm Id="AGCC.SECIMP.indx.2">
<Primary>UNIX accounts</Primary>
<Secondary>importing</Secondary>
</IndexTerm>The <Command>passwd_import</Command> command creates entries in the registry 
that are based on information
in the <Filename>/etc/passwd</Filename> and<Filename> /etc/group</Filename> files.  It provides
a method of ensuring account consistency between machines that use
the DCE Security Service and those that do not, and a means of adding an
existing UNIX user base to the registry.
</Para>
<Sect1 Id="AGCC.SECIMP.div.2">
<Title>How passwd_import Works</Title>
<Para><IndexTerm Id="AGCC.SECIMP.indx.3">
<Primary>security</Primary>
<Secondary>commands</Secondary>
<Tertiary><Command>passwd_import</Command></Tertiary>
</IndexTerm>When
<Command>passwd_import</Command> processes entries, it compares group and
password file entries to registry entries.  It can find two types
of conflicts:
</Para>
<VariableList>
<VarListEntry role="linebreak">
<Term>Name Conflicts</Term>
<ListItem>
<Para>These conflicts arise when the same name string is
defined in the
registry and the group or password files.  The names <Literal>joe 102</Literal>
and <Literal>joe 555</Literal> exemplify such a conflict.  The duplicate name
can represent the same user or two different users.
<IndexTerm Id="AGCC.SECIMP.indx.4">
<Primary>primary names</Primary>
<Secondary>conflicting</Secondary>
</IndexTerm>
<IndexTerm Id="AGCC.SECIMP.indx.5">
<Primary>UNIX IDs</Primary>
<Secondary>conflicting</Secondary>
</IndexTerm></Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term>UNIX ID Conflicts</Term>
<ListItem>
<?sml-need 5>
<Para>These conflicts arise when the same UNIX ID is
defined in the
registry and the group or password files for users with different names. 
The names<Literal> joe 102 </Literal>and <Literal>ann 102</Literal> exemplify such a conflict.
</Para>
</ListItem>
</VarListEntry>
</VariableList>
<Para>These conflicts can be found separately, as in the preceding examples,
or together.  For example, a registry entry of <Literal>joe 102</Literal> and
a UNIX entry of <Literal>joe 102</Literal> are in conflict.  When a conflict
is found, you must either supply the information that is used to change the
password and group file entries or inform <Command>passwd_import</Command> not to 
import that entry.  The <Command>passwd_import</Command> command makes no changes to
existing registry principals, groups, or accounts; but, if you so specify,
it will create new principals, groups, and accounts in the registry 
that are based on the group and password files. 
</Para>
<Sect2 Id="AGCC.SECIMP.div.3">
<Title>The passwd_import Processing Steps</Title>
<Para>As
<Command>passwd_import</Command> processes entries, it performs the following steps in
sequence: 
</Para>
<OrderedList>
<ListItem>
<Para>It opens the group and password files and establishes a connection 
to the registry. 
</Para>
</ListItem>
<ListItem>
<Para>It compares the group file entries to groups in the registry. 
If there are no conflicts, it creates groups in the registry 
that correspond to the groups in the group file.  
</Para>
</ListItem>
<ListItem>
<Para>It compares the entries in the password file to principals in the registry.  
Again, if there are no conflicts, it
</Para>
<ItemizedList>
<ListItem>
<Para>Creates principals in the registry that correspond to the entries in 
the password file.
</Para>
</ListItem>
<ListItem>
<Para>Adds the newly created principals to the appropriate groups.
</Para>
</ListItem>
<ListItem>
<Para>Creates accounts for the newly created principals. 
</Para>
</ListItem>
</ItemizedList>
</ListItem>
<ListItem>
<Para>It reexamines the group file and adds the principals as members of any 
additional groups that it finds there.
</Para>
</ListItem>
</OrderedList>
<Para>The changes to the registry are made individually as each step is
processed.  If you specify the <Option>o</Option> option, <Command>passwd_import</Command> 
adds all newly created registry 
principals to the specified organization.  If 
you do not specify the organization, the principals are added to the 
organization <Literal>none</Literal>.
</Para>
</Sect2>
<Sect2 Id="AGCC.SECIMP.div.4">
<Title>Registry Entries Created by passwd_import</Title>
<Para>If an entry exists in the password or group file
but does not exist in the registry, <Command>passwd_import</Command> creates
a new registry entry.  For additional registry information,
<Command>passwd_import</Command> takes the following values: 
</Para>
<ItemizedList>
<ListItem>
<Para>For Principal and Group Entries:
</Para>
<ItemizedList>
<ListItem>
<Para><Literal>Alias/Primary Name</Literal> = If the password
file contains two entries with the same UNIX number, <Command>passwd_import</Command>
creates a primary name entry for the first UNIX number it finds and
an alias for each occurrence of the same UNIX number.
</Para>
</ListItem>
<ListItem>
<Para><Literal>Full Name</Literal> = A blank string; no full name is added for the entry. 
</Para>
</ListItem>
<ListItem>
<Para><Literal>Membership List</Literal> = For new groups only, all principals
that are listed in the group file and all principals with registry accounts
that are associated with that group.
</Para>
</ListItem>
<ListItem>
<Para><Literal>Project List</Literal> = Yes (for groups only).
</Para>
</ListItem>
</ItemizedList>
</ListItem>
<ListItem>
<Para>For Account Entries:
</Para>
<ItemizedList>
<ListItem>
<Para><Literal>Account Expiration Date</Literal> = None.
</Para>
</ListItem>
<ListItem>
<Para><Literal>Account-Valid Flag</Literal> = No.  Use the <Command>dcecp account modify</Command> command 
to change this flag to <Literal>y</Literal> after the
password is set. 
</Para>
</ListItem>
<ListItem>
<Para><Literal>Client Flag</Literal> = Yes. 
</Para>
</ListItem>
<ListItem>
<Para><Literal>Duplicate Certificate Flag</Literal> = No.
</Para>
</ListItem>
<ListItem>
<Para><Literal>Forwardable Certificate Flag</Literal> = Yes.
</Para>
</ListItem>
<ListItem>
<Para><Literal>GECOS</Literal> = The same value as the entry in the principal's GECOS field in 
the <Filename>etc/passwd</Filename> file.
</Para>
</ListItem>
<ListItem>
<Para><Literal>Good Since Date</Literal> = Time of the account creation.
</Para>
</ListItem>
<ListItem>
<Para><Literal>Home Directory</Literal> = The same value as the principal's home directory 
entry in the <Filename>/etc/passwd</Filename> file.
</Para>
</ListItem>
<ListItem>
<Para><Literal>Login Shell</Literal> = The same value as the principal's login shell 
entry in the <Filename>/etc/passwd</Filename> file.
</Para>
</ListItem>
<ListItem>
<Para><Literal>Maximum Certificate Lifetime</Literal> = Set to the registry authentication
policy. 
</Para>
</ListItem>
<ListItem>
<Para><Literal>Maximum Certificate Renewable</Literal> = Set to the registry authentication
policy.
</Para>
</ListItem>
<ListItem>
<Para><Literal>Password</Literal> = Randomly generated.  Note that you must modify or reset
randomly generated passwords before user authentication is possible. 
</Para>
</ListItem>
<ListItem>
<Para><Literal>Password Date and Time Modified</Literal> = Set to the date and time
<Command>passwd_import</Command> was run.
</Para>
</ListItem>
<ListItem>
<Para><Literal>Password-Valid Flag</Literal> = No. 
</Para>
</ListItem>
<ListItem>
<Para><Literal>Postdated Certificate Flag</Literal> = No.
</Para>
</ListItem>
<ListItem>
<Para><Literal>Proxiable Certificate Flag</Literal> = No.
</Para>
</ListItem>
<ListItem>
<Para><Literal>Renewable Certificate Flag</Literal> = Yes.
</Para>
</ListItem>
<ListItem>
<Para><Literal>Server Flag</Literal> = Yes.
</Para>
</ListItem>
<ListItem>
<Para><Literal>TGT Authentication Flag</Literal> = Yes.
</Para>
</ListItem>
</ItemizedList>
</ListItem>
</ItemizedList>
<Para>Note that <Command>passwd_import</Command> does not set usable passwords for the accounts
it creates.  You must use the 
<Command>dcecp account modify</Command> command to set passwords
before authentication is possible.  
</Para>
</Sect2>
</Sect1>
<Sect1 Id="AGCC.SECIMP.div.5">
<Title>The passwd_import Command Syntax</Title>
<Para><IndexTerm Id="AGCC.SECIMP.indx.6">
<Primary>UNIX IDs</Primary>
<Secondary>importing</Secondary>
</IndexTerm>
<IndexTerm Id="AGCC.SECIMP.indx.7">
<Primary>primary names</Primary>
<Secondary>conflicting</Secondary>
</IndexTerm>The <Command>passwd_import</Command> command has the following syntax: 
</Para>
<InformalExample>
<Para><ProgramListing><UserInput><Symbol Role="Variable">dceshared</Symbol><Filename>/bin/passwd_import</Filename> [<Literal>&hyphen;h</Literal>] [<Literal>&hyphen;c</Literal>] <Literal>&hyphen;d</Literal>&ensp;<Symbol Role="Variable">pathname</Symbol> [<Literal>&hyphen;i</Literal>] [<Literal>&hyphen;o</Literal>&ensp;<Symbol Role="Variable">org</Symbol>] \
     [<Literal>&hyphen;p&ensp;</Literal><Symbol Role="Variable">password</Symbol>] [<Literal>&hyphen;u</Literal>&ensp;<Symbol Role="Variable">username</Symbol>] [<Literal>&hyphen;v</Literal>]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>where:
</Para>
<VariableList>
<VarListEntry>
<Term><Option>h</Option></Term>
<ListItem>
<Para>Displays usage information.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Option>c</Option></Term>
<ListItem>
<Para>Runs in check mode; processes the command showing conflicts,
but makes no changes to the registry.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Option>d</Option> <Symbol Role="Variable">pathname</Symbol></Term>
<ListItem>
<Para>The path to the directory containing the password and group files
to be imported.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Option>i</Option></Term>
<ListItem>
<Para>Specifies that identical name strings are not in conflict,
but represent the same identity.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Option>o</Option> <Symbol Role="Variable">org</Symbol></Term>
<ListItem>
<Para>The name of the organization to 
be assigned to all principals that are added to the registry. 
The default is the organization named <Literal>none</Literal>.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Option>p</Option> <Symbol Role="Variable">password</Symbol></Term>
<ListItem>
<Para>The password&ensp; for&ensp; the&ensp; account&ensp; with&ensp; whose&ensp; privileges 
<Command>passwd_import</Command> will run. 
If you do not use the <Option>i</Option> option, <Command>passwd_import</Command> prompts
you to resolve the name conflict.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Option>u</Option> <Symbol Role="Variable">username</Symbol></Term>
<ListItem>
<Para>The principal name of the account with whose privileges 
<Command>passwd_import</Command> will run.  
This account must have the privileges to access the 
registry and add principals, 
groups, accounts and organizations, and members to groups and organizations.  
The principal name and password are used to obtain network authentication.  
If you do not supply them, 
<Command>passwd_import</Command> prompts you for them, even if you have 
already performed a network login.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Option>v</Option></Term>
<ListItem>
<Para>Runs in verbose mode, generating a verbose transcript
of all activity.
</Para>
</ListItem>
</VarListEntry>
</VariableList>
</Sect1>
<Sect1 Id="AGCC.SECIMP.div.6">
<Title>Using passwd_import</Title>
<Para>To use <Command>passwd_import</Command>, the security server must be running.  
The following subsections describe how to use the <Command>passwd_import</Command> 
command and its options.
</Para>
<Sect2 Id="AGCC.SECIMP.div.7">
<Title>Using the Identical User Option</Title>
<Para>The <Option>i</Option> option
lets you specify that duplicate names are not in conflict but, instead,
represent the same identity.  When <Command>passwd_import</Command> finds duplicate
name entries, it processes them as though they are the same user 
and skips to the next entry. 
</Para>
</Sect2>
<Sect2 Id="AGCC.SECIMP.div.8">
<Title>Using Check Mode</Title>
<Para>Run <Command>passwd_import</Command> first in check
mode by using the <Option>c</Option> option.  In this mode, <Command>passwd_import</Command>
attempts to simulate the results of a processing run, showing the conflicts
that are encountered when <Command>passwd_import</Command> is run without the <Option>c</Option>
option.
</Para>
<Para>Check mode gives you a good idea of the quantity and complexity of
the potential conflicts.  However, check mode does not make any changes
to the registry.  When you run <Command>passwd_import</Command> without the <Option>c</Option>
option and make changes to resolve conflicts, these changes can in turn
create further conflicts not readily apparent in check mode.
</Para>
<Para>If you encounter numerous conflicts in check mode, it is more efficient
to manually edit either the registry or the UNIX group and password
files to resolve some obvious conflicts before you run <Command>passwd_import</Command>. 
<?sml-break></Para>
</Sect2>
<Sect2 Id="AGCC.SECIMP.div.9">
<Title>Resolving Conflicts</Title>
<Para>The <Command>passwd_import</Command> command prompts you for instructions on 
how to resolve the conflicts it finds.  You have the following choices:
</Para>
<ItemizedList>
<ListItem>
<Para>You can create an alias to resolve a UNIX ID conflict.  This action creates 
an alias for the registry object 
that is in conflict.  This alias is assigned the 
same name as the conflicting entry in the group 
or password file.  For example, if the entry <Literal>joe 555</Literal> exists in the 
registry and the entry <Literal>tim 555</Literal> exists in the password file, 
this option creates the alias <Literal>tim</Literal> for <Literal>joe 555</Literal>.
</Para>
</ListItem>
<ListItem>
<Para>You can generate a new UNIX ID automatically or enter a new one explicitly
to resolve a UNIX ID conflict.  For example, if there is a conflict between
the entry <Literal>joe 555</Literal> in the registry and <Literal>tim 555</Literal> in the password
file, you can generate a new UNIX ID for <Literal>tim</Literal>.
</Para>
</ListItem>
<ListItem>
<Para>You can enter a new name to resolve a name conflict.  For example, 
if there is a conflict between the entry <Literal>joe 555</Literal> in the registry 
and <Literal>joe 383</Literal> in the password file, you can generate a new 
name for <Literal>joe 383</Literal>.  This new name will be added to the registry.
</Para>
</ListItem>
</ItemizedList>
<Para>In addition, you are given the option of ignoring the conflict and skipping
the entry.
</Para>
</Sect2>
<Sect2 Id="AGCC.SECIMP.div.10">
<Title>Answering Prompts</Title>
<Para>When
you run <Command>passwd_import</Command>, you can be prompted for names
and numbers (UNIX IDs).  Names can contain any characters or digits 
except the @ (at sign) and : (colon) characters, and they 
must not exceed 1024 characters in length.
</Para>
<Para>If you enter a name or number in an incorrect format, <Command>passwd_import</Command>
ignores your entry and prompts you again.
</Para>
</Sect2>
</Sect1>
<Sect1 Id="AGCC.SECIMP.div.11">
<Title>Sample passwd_import Session</Title>
<Para>This section shows a simplified <Command>passwd_import</Command> session. 
The sample session uses the following registry group and password entries
and the UNIX group file and password file entries.  For convenience,
the registry entries are shown in the password and group 
file format, although they are not stored that way in the registry
database.
</Para>
<Para><Literal>Registry Group and Password Entries</Literal>
</Para>
<ItemizedList>
<ListItem>
<Para><Literal>Group Entries</Literal>
</Para>
<InformalExample>
<Para><ProgramListing><?sml-point-size 10>
<!--no-op:  12-->
wheel::0:
daemon::1:
none::2:
backup::3:user
locksmith::4:
login::5:
mail::6:bin
bin::7:root
server::8:
sys::9:root
staff::10:
sys_admin::11:user
sys_proj::12:
tgroup::35: 
<?sml-point-size 12>
<!--no-op:  14-->
</ProgramListing></Para>
</InformalExample>
</ListItem>
<ListItem>
<?sml-need 10>
<Para><Literal>Password Entries</Literal>
</Para>
<InformalExample>
<Para><ProgramListing><?sml-point-size 10>
<!--no-op:  12-->
root:sq1RclUrrb1L6:0:10::/:
daemon:sq1RclUrrb1L6:1:2::/:
none:sq1RclUrrb1L6:2:2::/:
user:sq1RclUrrb1L6:3:2::/:
lp:sq1RclUrrb1L6:4:7::/:
sys_person:sq1RclUrrb1L6:5:2::/:
admin:sq1RclUrrb1L6:6:2::/:
uucp:sq1RclUrrb1L6:7:2::/usr/spool/uucppublic:                      
bin:sq1RclUrrb1L6:8:7::/:
<?sml-point-size 12>
<!--no-op:  14-->
</ProgramListing></Para>
</InformalExample>
</ListItem>
</ItemizedList>
<Para><Literal>UNIX Group and Password File Entries</Literal>
</Para>
<ItemizedList>
<ListItem>
<Para><Literal>Group File Entries</Literal>
</Para>
<InformalExample>
<Para><ProgramListing><?sml-point-size 10>
<!--no-op:  12-->
system::0:root
other::1:
bin::2:root,bin,daemon
sys::3:root,bin,sys,adm
adm::4:root,adm,daemon
mail::6:root
rje::8:rje,shqer
daemon::12:root,daemon
tgroup::35: 
diags::48:brown,smith,jones
cheetah::50:root,daemon
mkt_dev::52:roberts,anderson,hill
<?sml-point-size 12>
<!--no-op:  14-->
</ProgramListing></Para>
</InformalExample>
</ListItem>
<ListItem>
<Para><Literal>Password File Entries</Literal>
</Para>
<InformalExample>
<Para><ProgramListing role="page-wide"><?sml-point-size 10>
<!--no-op:  12-->
root::0:1:0000-Admin(0000):/:
daemon::1:1:0000-Admin(0000):/:
bin::2:2:0000-Admin(0000):/bin:
sys::3:3:0000-Admin(0000):/usr/src:
adm::4:4:0000-Admin(0000):/usr/adm:
uucp::5:5:0000-uucp(0000):/usr/lib/uucp:
<!-- nuucp::10:10:0000\(hyuucp(0000):/usr/spool/uucppublic:/usr/lib/uucp/uucico -->
rje::18:18:0000-rje(0000):/usr/rje:
trouble::70:1:trouble(0000):/usr/lib/trouble:
lp::71:2:0000-lp(0000):/usr/spool/lp:
setup::0:0:general&ensp;system&ensp;administration:/usr/admin:/bin/rsh
powerdown::0:0:general&ensp;system&ensp;administration:/usr/admin:/bin/rsh
sysadm::0:0:general&ensp;system&ensp;administration:/usr/admin:/bin/rsh
checkfsys::0:0:check&ensp;diskette&ensp;file&ensp;system:/usr/admin:/bin/rsh
makefsys::0:0:make&ensp;diskette&ensp;file&ensp;system:/usr/admin:/bin/rsh
mountfsys::0:0:mount&ensp;diskette&ensp;file&ensp;system:/usr/admin:/bin/rsh
umountfsys::0:0:unmount&ensp;diskette&ensp;file&ensp;system:/usr/admin:/bin/rsh 
<?sml-point-size 12>
<!--no-op:  14-->
</ProgramListing></Para>
</InformalExample>
</ListItem>
</ItemizedList>
<Sect2 Id="AGCC.SECIMP.div.12">
<Title>Invoking passwd_import</Title>
<Para>In the sample session, the following <Command>passwd_import</Command>
command is entered at the shell prompt: 
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>passwd_import -d sys5.3_tapes/adm -i -v -u cell_admin
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>This command specifies that
</Para>
<ItemizedList>
<ListItem>
<Para>Identical names represent the same identity (<Option>i</Option>).
</Para>
</ListItem>
<ListItem>
<Para>The UNIX group and password files are in the <Literal>sys5.3_tapes/adm</Literal> 
directory.
</Para>
</ListItem>
<ListItem>
<Para>The command will not run in check mode (<Option>c</Option> is
not specified).
</Para>
</ListItem>
<ListItem>
<Para>The command will run in verbose mode (<Option>v</Option> is specified).
</Para>
</ListItem>
<ListItem>
<Para>The principal whose account should be used for authentication is 
<Literal>cell_admin</Literal>.
</Para>
</ListItem>
<ListItem>
<Para>The command prompts you for the <Literal>cell_admin</Literal> account's password 
because the <Option>p</Option> option is not used. 
</Para>
</ListItem>
</ItemizedList>
<Para>After the command is invoked, the system prepares for <Command>passwd_import</Command> 
processing by displaying the following:
</Para>
<InformalExample>
<Para><ProgramListing>Preparing import files. (dce / sad)
Setting up registry information. (dce / sad)
Verifying that the necessary Organization exists. (dce / sad)
Creating group objects from group file. (dce / sad)
</ProgramListing></Para>
</InformalExample>
<Para>As <Command>passwd_import</Command> reads the UNIX group and password files,
it informs you of any conflicts and prompts for their resolution.
</Para>
</Sect2>
<Sect2 Id="AGCC.SECIMP.div.13">
<Title>Examining the Group File</Title>
<Para>The <Command>passwd_import</Command> command first checks the group file for name and then 
UNIX ID conflicts.  When you resolve the conflict by answering the prompt, 
<Command>passwd_import</Command> creates the groups in the registry if it is so directed.
</Para>
<Para>The following steps show how UNIX ID group conflicts are handled: 
</Para>
<OrderedList>
<ListItem>
<Para>The <Command>passwd_import</Command> command first finds a conflict between
UNIX IDs, as shown in the preceding sections.
The name <Literal>wheel</Literal> in the group file
and the name <Literal>system</Literal> in the registry both have UNIX IDs of <Literal>0</Literal>.  The  
<Command>passwd_import</Command> command prompts you for how to resolve the 
conflict, as follows: 
</Para>
<InformalExample>
<Para><ProgramListing role="page-wide"><?sml-point-size 10>
<!--no-op:  12-->
CONFLICT: (wheel 0) - Import Group's UNIX id exists in registry. 
	  (dce / sad)
          (system 0) is the conflicting entry from the registry.
Do you wish to resolve the conflict (y) or skip this entry (n):
<?sml-point-size 12>
<!--no-op:  14-->
</ProgramListing></Para>
</InformalExample>
</ListItem>
<ListItem>
<Para>If you enter an <Literal>n</Literal> to skip the entry, <Command>passwd_import</Command> continues 
processing.  If you enter a <Literal>y</Literal> to resolve the conflict, 
<Command>passwd_import</Command> prompts you for how to resolve the conflict.  In the  
following example, the conflict is resolved by 
creating an alias of <Literal>wheel</Literal> for the <Literal>system</Literal> entry in the registry:
</Para>
<InformalExample>
<Para><ProgramListing role="page-wide"><?sml-point-size 10>
<!--no-op:  12-->
Do you wish to resolve the conflict (y) or skip this entry (n): <Literal>y</Literal>
Select one of: (a)lias, (g)enerate, (e)nter, (s)kip entry, (h)elp: <Literal>a</Literal> 
>> Adding Group entry for: wheel 0                          
<?sml-point-size 12>
<!--no-op:  14-->
</ProgramListing></Para>
</InformalExample>
<Para>Because it is running in verbose mode, <Command>passwd_import</Command> describes the 
actions it is taking.  Each action description
is prefaced with the <Literal>>> </Literal> (redirection symbols). 
</Para>
<Para>If you are running <Command>passwd_import</Command> in check mode, you
are not prompted to resolve the conflict.  Instead, you are informed
of the conflict and processing continues.  The message looks like
the following display:
</Para>
<InformalExample>
<Para><ProgramListing><?sml-point-size 10>
<!--no-op:  12-->
CONFLICT: (wheel 0) - Import Group's UNIX id exists in registry. 
	(dce / sad)
        (system 0) is the conflicting entry from the registry.
Would need new UNIX id to resolve conflict. (dce / sad)
<?sml-point-size 12>
<!--no-op:  14-->
</ProgramListing></Para>
</InformalExample>
</ListItem>
<ListItem>
<?sml-need 5>
<Para>If <Command>passwd_import</Command> does not find conflicts that you must resolve,
it displays the group entries as it processes them and, because it is
running in verbose mode, the actions it is taking.  In the following example, 
you are not prompted to resolve the name conflict 
because <Command>passwd_import</Command> was invoked with the <Option>i</Option> option.
</Para>
<InformalExample>
<Para><ProgramListing><?sml-point-size 10>
<!--no-op:  12-->
<?sml-need 8>CONFLICT: (tgroup 35)
	 - Group name exists in registry and UNIX ids match. 
	   (dce / sad)
>> Import Group:  - Ignoring name conflict, as instructed 
	   (dce / sad)
>> Adding Group entry for: diags 48
>> Adding Group entry for: cheetah 50
>> Adding Group entry for: mkt_dev 52
<?sml-point-size 12>
<!--no-op:  14-->
</ProgramListing></Para>
</InformalExample>
<Para>As <Command>passwd_import</Command> continues through the UNIX group file, it finds two
other UNIX ID conflicts: UNIX entries <Literal>adm 4</Literal> and <Literal>rje 8</Literal>, which are
in conflict with registry entries 
<Literal>locksmith 4</Literal> and <Literal>server 8</Literal>, respectively.
</Para>
</ListItem>
</OrderedList>
</Sect2>
<Sect2 Id="AGCC.SECIMP.div.14">
<Title>Examining the Password File</Title>
<Para>The <Command>passwd_import</Command> command then proceeds to examine the password file
for conflicts.  As it begins, it displays the following:
</Para>
<InformalExample>
<Para><ProgramListing><?sml-point-size 10>
<!--no-op:  12-->
Creating principal entries and accounts from password file. 
	(dce / sad)
<?sml-point-size 12>
<!--no-op:  14-->
</ProgramListing></Para>
</InformalExample>
<Para>When an entry is processed with no conflicts, 
<Command>passwd_import</Command> creates the principal in the 
registry, adds the principal to the appropriate group and organization, 
and creates an account for the principal.  As it does this, it displays
the following:
</Para>
<InformalExample>
<Para><ProgramListing><?sml-point-size 10>
<!--no-op:  12-->
>> Adding Principal entry for: rje
>> Adding account for rje none. 
<?sml-point-size 12>
<!--no-op:  14-->
</ProgramListing></Para>
</InformalExample>
<Para>The following example shows the 
warning message that is displayed when <Command>passwd_import</Command> finds a conflict:
</Para>
<InformalExample>
<Para><ProgramListing><?sml-point-size 10>
<!--no-op:  12-->
CONFLICT: (bin 2)
	 - Principal name exists in registry and UNIX ids match. 
	   (dce / sad)
>> Import Principal:  - Ignoring name conflict, as instructed 
   	   (dce / sad)
<?sml-point-size 12>
<!--no-op:  14-->
</ProgramListing></Para>
</InformalExample>
<Para>This message notifies you that the account for <Literal>bin</Literal> exists in the
registry.  Both accounts remain unchanged even though the UNIX
password file entry contains information that differs from the
registry account. 
</Para>
<Para>Because the <Option>i</Option> option is specified in the command used in the sample 
session, name conflicts are ignored.  The following example shows the
prompt from a name conflict that was found when 
<Command>passwd_import</Command> was run without the <Option>i</Option> option:
</Para>
<InformalExample>
<Para><ProgramListing><?sml-point-size 10>
<!--no-op:  12-->
CONFLICT: (daemon 1)
	 - Principal name exists in registry and UNIX ids match. 
	   (dce / sad)
Do you wish to resolve the conflict (y) or skip this entry (n):
<?sml-point-size 12>
<!--no-op:  14-->
</ProgramListing></Para>
</InformalExample>
<Para>If you enter an <Literal>n</Literal>, the entry is skipped and processing continues.  
If you enter a <Literal>y</Literal>, <Command>passwd_import</Command> prompts you for the new 
name for the foreign principal, as follows:
</Para>
<InformalExample>
<Para><ProgramListing><?sml-point-size 10>
<!--no-op:  12-->
Enter new name for principal "daemon" "1": 
<?sml-point-size 12>
<!--no-op:  14-->
</ProgramListing></Para>
</InformalExample>
</Sect2>
<Sect2 Id="AGCC.SECIMP.div.15">
<Title>Adding Members to Groups</Title>
<Para><IndexTerm Id="AGCC.SECIMP.indx.8">
<Primary>groups</Primary>
<Secondary>adding members</Secondary>
</IndexTerm>When <Command>passwd_import</Command> completes the processing of the UNIX password file, it
reexamines the group file and adds the newly created principals to any 
additional groups that it finds there.  As it does, it displays the following:
</Para>
<InformalExample>
<Para><ProgramListing><?sml-point-size 10>
<!--no-op:  12-->
Add memberships from imported group file. (dce / sad)
>> Add root as member of group with UNIX id: 0
>> Add root as member of group with UNIX id: 2
>> Add daemon as member of group with UNIX id: 2
<?sml-point-size 12>
<!--no-op:  14-->
</ProgramListing></Para>
</InformalExample>
</Sect2>
<Sect2 Id="AGCC.SECIMP.div.16">
<Title>Completing Processing</Title>
<Para>When <Command>passwd_import</Command> completes processing, it displays the following:
</Para>
<InformalExample>
<Para><ProgramListing><?sml-point-size 10>
<!--no-op:  12-->
Closing import files. (dce / sad)
Closing connection to registry. (dce / sad)
<?sml-point-size 12>
<!--no-op:  14-->
</ProgramListing></Para>
</InformalExample>
<IndexTerm Id="AGCC.SECIMP.indx.9" SpanEnd="AGCC.SECIMP.indx.6">
<IndexTerm Id="AGCC.SECIMP.indx.10" SpanEnd="AGCC.SECIMP.indx.7">
<IndexTerm Id="AGCC.SECIMP.indx.11" SpanEnd="AGCC.SECIMP.indx.3">
<IndexTerm Id="AGCC.SECIMP.indx.12" SpanEnd="AGCC.SECIMP.indx.1">
<IndexTerm Id="AGCC.SECIMP.indx.13" SpanEnd="AGCC.SECIMP.indx.2">
</Sect2>
</Sect1>
</Chapter>
<!--+ 10/31/96 16:05:54
    | tagMorph:  $Id: 11_import.sgm,v 1.1.2.11 1996/12/04 22:48:39 carrig Exp $
    | tagMorph library:  $Id: 11_import.sgm,v 1.1.2.11 1996/12/04 22:48:39 carrig Exp $
    | sml-to-docbook:  1.24
    +-->
