<!--
# @OSF_COPYRIGHT@
# 
# 
# HISTORY
# $Log: 4_cds_update.sgm,v $
# Revision 1.1.2.10  1996/12/04  22:49:08  carrig
# 	{enh,R1.2.2}
# 	JC's edits
# 	[1996/12/04  22:46:54  carrig]
#
# Revision 1.1.2.9  1996/11/29  20:20:45  carrig
# 	{enh,R1.2.2}
# 	Finished edit changes; must scale graphics
# 	[1996/11/29  20:17:14  carrig]
# 
# Revision 1.1.2.8  1996/11/27  21:43:30  carrig
# 	{enh,R1.2.2}
# 	More editor's comments
# 	[1996/11/27  21:41:33  carrig]
# 
# 	{enh,R1.2.2}
# 	More editor's comments
# 	[1996/11/27  21:28:19  carrig]
# 
# Revision 1.1.2.7  1996/11/26  21:45:04  carrig
# 	{enh,R1.2.2}
# 	Putting in editor's comments
# 	[1996/11/26  21:40:44  carrig]
# 
# Revision 1.1.2.6  1996/11/25  21:51:12  carrig
# 	{enh,R1.2.2}
# 	Started to put in editor's comments
# 	[1996/11/25  21:49:13  carrig]
# 
# Revision 1.1.2.5  1996/11/07  20:43:22  weir
# 	Cleaned up history
# 	[1996/11/07  20:41:31  weir]
# 
# Revision 1.1.2.4  1996/11/06  20:40:31  carrig
# 	{enh,R1.2.2}
# 	OK for editing
# 	[1996/11/06  20:37:59  carrig]
# 
# Revision 1.1.2.3  1996/11/05  18:58:44  carrig
# 	{enh,R1.2.2}
# 	Second pass
# 	[1996/11/05  18:55:28  carrig]
# 
# Revision 1.1.2.2  1996/11/04  22:03:37  carrig
# 	{enh,R1.2.2}
# 	First pass at corrections
# 	[1996/11/04  22:00:09  carrig]
# 
# Revision 1.1.2.1  1996/11/01  18:20:19  wardr
# 	{edit,R1.2.2}
# 	Initial checkin after sgml conversion
# 	[1996/11/01  18:17:52  wardr]
# 
# Revision 1.1.1.2  1996/11/01  18:17:52  wardr
# 	{edit,R1.2.2}
# 	Initial checkin after sgml conversion
# 
# $EndLog$
-->
<!---->
<!-- Fragment document type declaration subset:
ArborText, Inc., 1988-1993, v.4001
<!DOCTYPE Book PUBLIC "-//Davenport//DTD DocBook V2.4//EN" [
]>
-->
<!---->
<!-- COPYRIGHT NOTICE-->
<!-- Copyright (c) 1990, 1991, 1992, 1993 Open Software Foundation, Inc.-->
<!-- ALL RIGHTS RESERVED (DCE).  See the file named COPYRIGHT.DCE in the-->
<!-- src directory for the full copyright text.-->
<!---->
<!---->
<!-- HISTORY-->
<!-- Revision 1.1.6.9  1995/05/25  19:02:20  rcb-->
<!-- 	PRENTICE HALL reformat: final changes-->
<!-- 	[1995/05/25  13:14:28  rcb]-->
<!---->
<!-- 	PRENTICE HALL reformat - index entries, odds and ends-->
<!-- 	[1995/03/27  19:49:29  rcb]-->
<!---->
<!-- 	no change-->
<!-- 	[1995/02/27  18:22:09  rcb]-->
<!---->
<!-- 	PRENTICE HALL reformat-->
<!-- 	[1995/02/27  18:11:30  rcb]-->
<!---->
<!-- 	incoroporated 1.1 edits-->
<!-- 	[1995/02/27  18:03:46  rcb]-->
<!---->
<!-- Revision 1.1.6.8  1994/10/19  15:58:47  wardr-->
<!-- 	{edit R1.1}-->
<!-- 	Final GA release edits-->
<!-- 	[1994/10/19  15:57:59  wardr]-->
<!-- -->
<!-- Revision 1.1.6.7  1994/09/12  20:26:37  steto-->
<!-- 	{enh, CR10014, R1.1, Checked for final review.}-->
<!-- 	[1994/09/12  20:23:44  steto]-->
<!-- -->
<!-- Revision 1.1.6.6  1994/05/11  18:52:37  rjohnson-->
<!-- 	Updated to include CR#10578.-->
<!-- 	[1994/05/11  18:52:18  rjohnson]-->
<!-- -->
<!-- Revision 1.1.6.5  1994/05/09  12:06:23  rjohnson-->
<!-- 	Changes made: Added info on hierarchial cells for release 1.1.-->
<!-- 	File name: admin_gd/directory/cds/4_cds_update.gpsml-->
<!-- 	[1994/05/02  15:38:38  rjohnson]-->
<!-- -->
<!-- Revision 1.1.6.4  1993/08/15  02:44:39  tmw-->
<!-- 	Added index entries for second version of master index.-->
<!-- 	[1993/08/13  03:40:35  tmw]-->
<!-- -->
<!-- Revision 1.1.6.3  1993/07/06  18:34:12  buckler-->
<!-- 	{edit, R1.0.2}-->
<!-- 	More Prentice-Hall edits.-->
<!-- 	[1993/06/29  21:28:50  buckler]-->
<!-- -->
<!-- Revision 1.1.6.2  1993/06/01  18:15:53  buckler-->
<!-- 	{edit, R1.0.2}-->
<!-- 	Prentice-Hall editorial review.-->
<!-- 	[1993/06/01  18:08:55  buckler]-->
<!-- -->
<!-- Revision 1.1.4.5  1993/01/28  19:06:45  dbelch-->
<!-- 	Embedding copyright notice-->
<!-- 	[1993/01/28  18:31:24  dbelch]-->
<!-- -->
<!-- Revision 1.1.4.4  1993/01/27  16:03:39  buckler-->
<!-- 	Fixed cross-refs and figure calls for new book org-->
<!-- 	[1993/01/27  16:00:00  buckler]-->
<!-- -->
<!-- Revision 1.1.4.3  1992/08/26  13:29:14  weir-->
<!-- 	Test-->
<!-- 	[1992/08/26  13:28:07  weir]-->
<!-- -->
<!-- Revision 1.1.4.2  1992/08/25  20:33:46  weir-->
<!-- 	Moved to dce1.0.2doc-->
<!-- 	[1992/08/25  20:26:27  weir]-->
<!-- -->
<!-- Revision 1.1.2.2  1992/07/06  23:29:13  lipsky-->
<!-- 	Changes made:  None.  Text was at first revised to reflect cr #4540, but-->
<!-- 	team decided that present text was sufficient.  New text was added to-->
<!-- 	appropriate individual man pages.-->
<!-- 	File name: src/admin_gd/directory/cds/4_cds_update.gpsml-->
<!-- 	Change Request Number:  4540-->
<!-- 	[1992/07/06  23:28:00  lipsky]-->
<!-- -->
<!-- Revision 1.1  1992/01/29  16:16:02  damon-->
<!-- 	Initial revision-->
<!-- -->
<!---->
<!-- (c) Copyright 1991, Open Software Foundation, Inc.  ALL RIGHTS RESERVED-->
<!--   HISTORY COMMENTS:-->
<!---->
<!--   DATE:                            COMMENT:-->
<!---->
<!--	Tues Oct 29, 1991                Initial File Submission for final-->
<!--                                    integration at IBM-->
<!---->
<!-- ********************************************************************-->
<!--                                                                    *-->
<!-- COPYRIGHT (c) 1991 BY DIGITAL EQUIPMENT CORPORATION,               *-->
<!-- Maynard, Massachusetts                                             *-->
<!-- All Rights Reserved.                                               *-->
<!--                                                                    *-->
<!-- This document is furnished under a license and may be used and     *-->
<!-- copied only in accordance with the terms of such license and with  *-->
<!-- the inclusion of the above copyright notice.  No title to or        *-->
<!-- ownership of the document is hereby transferred.                   *-->
<!--                                                                    *-->
<!-- The information in this document is subject to change without      *-->
<!-- notice and should not be construed as a commitment by Digital      *-->
<!-- Equipment Corporation.                                             *-->
<!--                                                                    *-->
<!-- ********************************************************************-->
<Chapter Id="AGCC.CDSUPD.div.1">
<Title>How CDS Updates Data</Title>
<Para><IndexTerm Id="AGCC.CDSUPD.indx.1">
<Primary>namespace</Primary>
<Secondary>updating</Secondary>
</IndexTerm>
<IndexTerm Id="AGCC.CDSUPD.indx.2">
<Primary>replica</Primary>
<Secondary>updating (CDS)</Secondary>
</IndexTerm>Once names exist in the namespace, users who have the appropriate access
can make changes to the data associated with the names.  Any addition,
modification, or deletion of CDS data initially happens in only one
replica: the master replica.  This chapter introduces the main methods
by which CDS keeps other replicas consistent: <Replaceable>update propagation</Replaceable>
and the <Replaceable>skulk</Replaceable> operation.  It also describes two timestamps that
help to ensure consistency in CDS data.  By understanding the concepts
in this chapter, you can more effectively plan the content and
replication of directories and the organization of hierarchical cells in
your namespace.
</Para>
<Sect1 Id="AGCC.CDSUPD.div.2">
<Title>Update Propagation</Title>
<Para><IndexTerm Id="AGCC.CDSUPD.indx.3">
<Primary>update propagation</Primary>
</IndexTerm>An update propagation is an immediate attempt to apply one change to all
replicas of the directory in which the change was just made.  Its main
benefit is that it delivers each change in an efficient and timely way.
</Para>
<Para><?sml-need 5>Unlike a skulk operation, however, update propagation does not guarantee that
the change gets made in all replicas.  If a
particular replica is not available, the update propagation does not fail;
the change simply does not get made in that replica.  The skulk operation
ensures that, when the replica is available again, it becomes consistent with
the other replicas in its set.
</Para>
<Para>You can tune the degree of persistence that CDS uses
in attempting an update propagation&mdash;or prevent propagation altogether&mdash;by
adjusting a directory attribute called <Literal>CDS_Convergence</Literal>.
Convergence also affects the frequency of skulks on a directory.  (See
<!-- the chapter in this module on managing directories -->
Chapter 18
for details on viewing and changing a directory's convergence.) 
</Para>
</Sect1>
<Sect1 Id="AGCC.CDSUPD.div.3">
<Title>Skulk Operation</Title>
<IndexTerm Id="AGCC.CDSUPD.indx.4">
<Primary>skulk</Primary>
<Secondary>explained</Secondary>
</IndexTerm>
<Para>The skulk operation is a periodic distribution of a collection of
updates.  Its main functions are to ensure that replicas receive changes that
may not have reached them during an update propagation and to remove
outdated information from the namespace.
</Para>
<Para>For hierarchical cells, the skulk updates the child pointers in the
parent cell and the <Replaceable>up pointers</Replaceable> in the child cell (which point to
the parent) so they reflect the updated information.  
</Para>
<Para>Skulk maintenance functions include the following:
</Para>
<ItemizedList>
<ListItem>
<Para>Removing soft links that have expired.  You can specify an expiration time 
when you create a soft link.
</Para>
</ListItem>
<ListItem>
<Para>Maintaining child pointers, which includes removing pointers to 
directories that were deleted.
</Para>
</ListItem>
<ListItem>
<Para>Removing information about deleted replicas.
</Para>
</ListItem>
</ItemizedList>
<Para>CDS skulks each directory individually.
During a skulk, CDS collects all changes that were made to the master
replica since the last successful skulk and then disseminates
the changes to all read-only replicas 
of the directory.
All replicas must be available for a skulk to be considered successful.  If
CDS cannot contact a replica, it continues making changes in the 
replicas that it can contact, while generating an event to notify you of the
replica or replicas it could not update.  CDS then periodically reattempts 
the skulk until it completes successfully.
</Para>
<Para>A skulk can begin in one of three ways:
</Para>
<ItemizedList>
<ListItem>
<Para>A CDS manager can enter a command to start an immediate 
skulk on a directory.
</Para>
</ListItem>
<ListItem>
<Para>CDS starts a skulk as an indirect result of
other namespace management activities, which include the following:
</Para>
<ItemizedList>
<ListItem>
<Para>Adding or removing a replica
</Para>
</ListItem>
<ListItem>
<Para>Creating or deleting a directory
</Para>
</ListItem>
<ListItem>
<Para>Redesigning replica types
</Para>
</ListItem>
<ListItem>
<Para>Adding or deleting a child cell name in a parent cell
</Para>
</ListItem>
</ItemizedList>
<Para><IndexTerm Id="AGCC.CDSUPD.indx.5">
<Primary>namespace</Primary>
<Secondary>maintenance operations</Secondary>
</IndexTerm>All of these activities produce changes in the structure of the
namespace, so an immediate skulk ensures that the new structure is reflected
throughout the namespace as quickly as possible.  
</Para>
</ListItem>
<ListItem>
<Para>The CDS server initiates skulks automatically at a
routine interval called the <Symbol Role="Variable">background skulk time</Symbol>. 
<IndexTerm Id="AGCC.CDSUPD.indx.6">
<Primary>background skulk time</Primary>
</IndexTerm></Para>
<Para>The background skulk time interval guarantees a maximum lapse of time
between skulks of a directory, regardless of other factors, such as namespace
management activities and user-initiated skulks.  A CDS server periodically
checks each master replica in its clearinghouse and
initiates a skulk if changes were made in a directory since the last successful
skulk of that directory. 
<IndexTerm Id="AGCC.CDSUPD.indx.7">
<Primary>skulking</Primary>
</IndexTerm></Para>
</ListItem>
</ItemizedList>
</Sect1>
<Sect1 Id="AGCC.CDSUPD.div.4">
<Title>How Timestamps Help Keep Data Consistent</Title>
<IndexTerm Id="AGCC.CDSUPD.indx.8">
<Primary>timestamps</Primary>
<Secondary>use by CDS</Secondary>
</IndexTerm>
<Para>CDS uses several timestamps to help ensure the consistency
and accuracy of data.  The following two timestamps exist for every entry:
</Para>
<ItemizedList>
<ListItem>
<Para>Creation Timestamp (CTS)
</Para>
</ListItem>
<ListItem>
<Para>Update Timestamp (UTS)
</Para>
</ListItem>
</ItemizedList>
<IndexTerm Id="AGCC.CDSUPD.indx.9">
<Primary>Creation Timestamp (CTS)</Primary>
</IndexTerm>
<Para><?sml-need 7>CDS assigns a CTS to
everything that is in a cell namespace: clearinghouses, directories, object
entries, soft links, and child pointers.
The CTS is a unique value reflecting the date, time, and
location where a clearinghouse, directory, or entry in a directory 
was created.  It consists of two parts: a time portion and the system
identifier of the node on which the name was created.  The two parts guarantee
uniqueness among timestamps that are generated on different nodes. 
</Para>
<Para>During propagation of a new name or a changed name to each replica of
the directory where it was created, every CDS server checks the 
validity of the CTS before accepting the new name.
<IndexTerm Id="AGCC.CDSUPD.indx.10">
<Primary>Update Timestamp (UTS)</Primary>
</IndexTerm></Para>
<Para>The UTS reflects the most recent change that was 
made to any of the attributes of a
clearinghouse, directory, object entry, soft link, or child pointer.  When a 
CDS server receives an update to an existing
entry in a directory, it checks the validity of the UTS before accepting the 
update. 
</Para>
<Para>Directories and replicas have several other timestamps that
CDS uses when determining whether to skulk a directory or
make a change in a directory.  (See the <Command>directory(8dce)</Command>
reference page for information about other timestamp attributes used by CDS.)
<IndexTerm Id="AGCC.CDSUPD.indx.11" SpanEnd="AGCC.CDSUPD.indx.1"><IndexTerm Id="AGCC.CDSUPD.indx.12" SpanEnd="AGCC.CDSUPD.indx.2"><IndexTerm Id="AGCC.CDSUPD.indx.13" SpanEnd="AGCC.CDSUPD.indx.8"></Para>
</Sect1>
</Chapter>
<!--+ 10/31/96 16:05:54
    | tagMorph:  $Id: 4_cds_update.sgm,v 1.1.2.10 1996/12/04 22:49:08 carrig Exp $
    | tagMorph library:  $Id: 4_cds_update.sgm,v 1.1.2.10 1996/12/04 22:49:08 carrig Exp $
    | sml-to-docbook:  1.24
    +-->
