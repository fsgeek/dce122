<!--
# @OSF_COPYRIGHT@
# 
# 
# HISTORY
# $Log: 7_cds_clerkservch.sgm,v $
# Revision 1.1.2.10  1996/12/04  22:49:16  carrig
# 	{enh,R1.2.2}
# 	JC's edits
# 	[1996/12/04  22:47:05  carrig]
#
# Revision 1.1.2.9  1996/11/29  20:20:52  carrig
# 	{enh,R1.2.2}
# 	Finished edit changes; must scale graphics
# 	[1996/11/29  20:17:26  carrig]
# 
# Revision 1.1.2.8  1996/11/27  21:43:37  carrig
# 	{enh,R1.2.2}
# 	More editor's comments
# 	[1996/11/27  21:41:43  carrig]
# 
# 	{enh,R1.2.2}
# 	More editor's comments
# 	[1996/11/27  21:28:29  carrig]
# 
# Revision 1.1.2.7  1996/11/26  21:45:14  carrig
# 	{enh,R1.2.2}
# 	Putting in editor's comments
# 	[1996/11/26  21:40:59  carrig]
# 
# Revision 1.1.2.6  1996/11/25  21:51:18  carrig
# 	{enh,R1.2.2}
# 	Started to put in editor's comments
# 	[1996/11/25  21:49:23  carrig]
# 
# Revision 1.1.2.5  1996/11/07  20:43:29  weir
# 	Cleaned up history
# 	[1996/11/07  20:41:39  weir]
# 
# Revision 1.1.2.4  1996/11/06  20:40:38  carrig
# 	{enh,R1.2.2}
# 	OK for editing
# 	[1996/11/06  20:38:08  carrig]
# 
# Revision 1.1.2.3  1996/11/05  18:58:51  carrig
# 	{enh,R1.2.2}
# 	Second pass
# 	[1996/11/05  18:55:38  carrig]
# 
# Revision 1.1.2.2  1996/11/04  22:03:44  carrig
# 	{enh,R1.2.2}
# 	First pass at corrections
# 	[1996/11/04  22:00:18  carrig]
# 
# Revision 1.1.2.1  1996/11/01  18:20:32  wardr
# 	{edit,R1.2.2}
# 	Initial checkin after sgml conversion
# 	[1996/11/01  18:17:59  wardr]
# 
# Revision 1.1.1.2  1996/11/01  18:17:59  wardr
# 	{edit,R1.2.2}
# 	Initial checkin after sgml conversion
# 
# $EndLog$
-->
<!---->
<!-- Fragment document type declaration subset:
ArborText, Inc., 1988-1993, v.4001
<!DOCTYPE Book PUBLIC "-//Davenport//DTD DocBook V2.4//EN" [
<!ENTITY DCEAr "<CiteTitle>OSF DCE Command Reference</CiteTitle>">
<!ENTITY DCEPg "<CiteTitle>OSF DCE Porting and Testing Guide</CiteTitle>">
<!ENTITY DCEAi "<CiteTitle>OSF DCE Administration Guide&mdash;Introduction</CiteTitle>">
]>
-->
<!---->
<!-- COPYRIGHT NOTICE-->
<!-- Copyright (c) 1990, 1991, 1992, 1993 Open Software Foundation, Inc.-->
<!-- ALL RIGHTS RESERVED (DCE).  See the file named COPYRIGHT.DCE in the-->
<!-- src directory for the full copyright text.-->
<!---->
<!---->
<!-- HISTORY-->
<!-- Revision 1.1.6.1  1996/09/19  14:52:49  sherman-->
<!-- 	{def,13326,R1.2.2}-->
<!-- 	Corrected example for dcecp clearinghouse show-->
<!-- 	{def,13578,R1.2.2}-->
<!-- 	Add dcecp commands for CDS-->
<!-- 	[1996/09/19  14:52:17  sherman]-->
<!---->
<!-- Revision 1.1.4.20  1995/05/25  19:02:52  rcb-->
<!-- 	PRENTICE HALL reformat: final changes-->
<!-- 	[1995/05/25  13:14:41  rcb]-->
<!-- -->
<!-- 	PRENTICE HALL reformat - index entries, odds and ends-->
<!-- 	[1995/03/27  19:49:44  rcb]-->
<!-- -->
<!-- 	prevented hyphenation of option names-->
<!-- 	[1995/03/09  15:00:32  rcb]-->
<!-- -->
<!-- 	fixes to header capitalization-->
<!-- 	[1995/03/08  16:19:30  rcb]-->
<!-- -->
<!-- 	additional 1.1 edit change-->
<!-- 	[1995/02/27  17:07:16  rcb]-->
<!-- -->
<!-- 	PRENTICE HALL reformat-->
<!-- 	[1995/02/23  20:11:25  rcb]-->
<!-- -->
<!-- 	incorporated 1.1 edits-->
<!-- 	[1995/02/23  20:04:49  rcb]-->
<!-- -->
<!-- Revision 1.1.4.19  1994/10/19  21:55:22  neilson-->
<!-- 	Automatic fix to mistake in .zA-.zZ-->
<!-- 	[1994/10/19  21:54:29  neilson]-->
<!-- -->
<!-- Revision 1.1.4.18  1994/10/19  15:58:51  wardr-->
<!-- 	{edit R1.1}-->
<!-- 	Final GA release edits-->
<!-- 	[1994/10/19  15:58:04  wardr]-->
<!-- -->
<!-- Revision 1.1.4.17  1994/09/15  16:32:48  rjohnson-->
<!-- 	Changes made: The change to Section 8.7 was in response to-->
<!-- 	CR10159.-->
<!-- 	[1994/09/15  16:32:26  rjohnson]-->
<!-- -->
<!-- Revision 1.1.4.16  1994/09/13  21:12:53  rjohnson-->
<!-- 	Changes made: Added a step to the list in Section 8.7.-->
<!-- 	[1994/09/13  21:12:33  rjohnson]-->
<!-- -->
<!-- Revision 1.1.4.15  1994/09/06  20:24:27  steto-->
<!-- 	{edt, R1.1, Made edits.}-->
<!-- 	[1994/09/06  20:22:33  steto]-->
<!-- -->
<!-- Revision 1.1.4.14  1994/09/06  19:10:04  steto-->
<!-- 	{enh, CR10014, R1.1, Prepared for final review.}-->
<!-- 	[1994/09/06  19:09:43  steto]-->
<!-- -->
<!-- Revision 1.1.4.13  1994/08/30  18:05:16  rjohnson-->
<!-- 	Changes made: None.-->
<!-- 	[1994/08/30  18:04:52  rjohnson]-->
<!-- -->
<!-- Revision 1.1.4.12  1994/08/30  14:49:32  rjohnson-->
<!-- 	Changes made: Removed Section 8.6 - Saving Daemon Debugging Information.  Also added a new file, cds_cache.wan, to Section 8.7 - Preserving a Clearinghouse Across a Server System Upgrade.-->
<!-- 	[1994/08/30  14:48:01  rjohnson]-->
<!-- -->
<!-- 	Changes made: None.-->
<!-- 	[1994/08/29  20:46:46  rjohnson]-->
<!-- -->
<!-- Revision 1.1.4.11  1994/08/26  14:13:00  rjohnson-->
<!-- 	Changes made: Incorporated review comments.-->
<!-- 	[1994/08/26  14:12:40  rjohnson]-->
<!-- -->
<!-- 	Changes made: None.-->
<!-- 	[1994/08/15  18:14:43  rjohnson]-->
<!-- -->
<!-- 	No changes to text.-->
<!-- 	[1994/08/08  14:39:59  rjohnson]-->
<!-- -->
<!-- Revision 1.1.4.10  1994/07/12  18:37:53  jshirley-->
<!-- 	{def,10220,R1.1} Remove reference to rpcd and sec_clientd-->
<!-- 	[1994/07/12  18:37:31  jshirley]-->
<!-- -->
<!-- Revision 1.1.4.9  1994/05/15  00:35:58  steto-->
<!-- 	{enh, 10014, edt, R1.1}-->
<!-- 	Prepared for Beta.-->
<!-- 	[1994/05/15  00:31:27  steto]-->
<!-- -->
<!-- Revision 1.1.4.8  1994/05/11  18:57:13  rjohnson-->
<!-- 	No changes made.-->
<!-- 	[1994/05/11  18:56:51  rjohnson]-->
<!-- -->
<!-- 	Changes made: None-->
<!-- 	File name: admin_gd/directory/cds/7_cds_clerkservch.gpsml-->
<!-- 	[1994/05/02  15:44:28  rjohnson]-->
<!-- -->
<!-- Revision 1.1.4.7  1993/11/12  23:20:49  goldfarb-->
<!-- 	Responding to CR 8598-->
<!-- 	[1993/11/12  23:20:22  goldfarb]-->
<!-- -->
<!-- Revision 1.1.4.5  1993/10/13  18:02:33  goldfarb-->
<!-- 	No changes need to this file.  Correction made in V1.0.2.-->
<!-- 	[1993/10/13  18:01:56  goldfarb]-->
<!-- -->
<!-- 	No changes made.  Reserved the wrong chapter.-->
<!-- -->
<!-- Revision 1.1.4.4  1993/08/15  02:44:49  tmw-->
<!-- 	Added index entries for second version of master index.-->
<!-- 	[1993/08/13  03:40:53  tmw]-->
<!-- -->
<!-- Revision 1.1.4.3  1993/07/06  18:34:24  buckler-->
<!-- 	{edit, R1.0.2}-->
<!-- 	More Prentice-Hall edits.-->
<!-- 	[1993/06/29  21:30:03  buckler]-->
<!-- -->
<!-- Revision 1.1.4.2  1993/06/01  18:16:14  buckler-->
<!-- 	{edit, R1.0.2}-->
<!-- 	Prentice-Hall editorial review.-->
<!-- 	[1993/06/01  18:09:20  buckler]-->
<!-- -->
<!-- Revision 1.1.2.6  1993/02/23  21:01:03  steiner-->
<!-- 	Fixed an index entry (was missing a " ).-->
<!-- 	[1993/02/23  21:00:40  steiner]-->
<!-- -->
<!-- Revision 1.1.2.5  1993/02/23  02:09:39  lipsky-->
<!-- 	Changes made:  Added text on saving debugging info, added reviewers' comments-->
<!-- 	File name:  src/admin_gd/directory/cds/7_cds_clerkservch.gpsml-->
<!-- 	CR#: 7115-->
<!-- 	[1993/02/23  02:06:42  lipsky]-->
<!-- -->
<!-- Revision 1.1.2.4  1993/01/28  19:06:55  dbelch-->
<!-- 	Embedding copyright notice-->
<!-- 	[1993/01/28  18:31:43  dbelch]-->
<!-- -->
<!-- Revision 1.1.2.3  1993/01/27  16:04:06  buckler-->
<!-- 	Fixed cross-refs and figure calls for new book org-->
<!-- 	[1993/01/27  16:00:27  buckler]-->
<!-- -->
<!-- Revision 1.1.2.2  1992/08/25  20:34:15  weir-->
<!-- 	Moved to dce1.0.2doc-->
<!-- 	[1992/08/25  20:27:14  weir]-->
<!-- -->
<!-- Revision 1.1  1992/01/29  16:16:12  damon-->
<!-- 	Initial revision-->
<!-- -->
<!---->
<!-- (c) Copyright 1991, Open Software Foundation, Inc.  ALL RIGHTS RESERVED-->
<!--   HISTORY COMMENTS:-->
<!---->
<!--   DATE:                            COMMENT:-->
<!---->
<!--	Tues Oct 29, 1991                Initial File Submission for final-->
<!--                                    integration at IBM-->
<!---->
<!-- ********************************************************************-->
<!--                                                                    *-->
<!-- COPYRIGHT (c) 1991 BY DIGITAL EQUIPMENT CORPORATION,               *-->
<!-- Maynard, Massachusetts                                             *-->
<!-- All Rights Reserved.                                               *-->
<!--                                                                    *-->
<!-- This document is furnished under a license and may be used and     *-->
<!-- copied only in accordance with the terms of such license and with  *-->
<!-- the inclusion of the above copyright notice.  No title to or        *-->
<!-- ownership of the document is hereby transferred.                   *-->
<!--                                                                    *-->
<!-- The information in this document is subject to change without      *-->
<!-- notice and should not be construed as a commitment by Digital      *-->
<!-- Equipment Corporation.                                             *-->
<!--                                                                    *-->
<!-- ********************************************************************-->
<Chapter Id="AGCC.CDSCSC.div.1">
<Title>Managing Clerks, Servers, and Clearinghouses</Title>
<Para><IndexTerm Id="AGCC.CDSCSC.indx.1">
<Primary>CDS</Primary>
<Secondary>monitoring network traffic</Secondary>
</IndexTerm>CDS clerks, servers, and clearinghouses are initially created and started as
part of the CDS clerk and server configuration.  Thereafter, clerk and server
processes are created and started with a series of commands that are
executed either manually or by the startup scripts on the systems where
they are running.  These CDS entities are largely self-regulating and,
apart from routine monitoring, require only minor management intervention.
</Para>
<Para>This chapter explains how to monitor CDS clerks, servers, and
clearinghouses and perform other management tasks, such as backing up
namespace information.
</Para>
<Sect1 Id="AGCC.CDSCSC.div.2">
<Title>Monitoring Clerk, Server, and Clearinghouse Counters</Title>
<Para>Every clerk, server, and clearinghouse maintains a set of attributes
called <Replaceable>counters</Replaceable> to keep track of the read, write, and other operations
that it performed, or that were performed on it, since it was last
started up.  You can monitor these counters to determine the type and volume
of the CDS traffic that is being generated on your network.
</Para>
<Para><?sml-need 2>Clerk, server, and clearinghouse counters are fully described in the
&DCEAr;.
</Para>
<Sect2 Id="AGCC.CDSCSC.div.3">
<Title>Displaying Clerk Counters</Title>
<Para RevisionFlag="Changed"><?og-ChangeStart def,13578,R1.2.2,Changed cdscp commands to dcecp">
<IndexTerm Id="AGCC.CDSCSC.indx.2">
<Primary>CDS</Primary>
<Secondary>clerks</Secondary>
<Tertiary>viewing counters</Tertiary>
</IndexTerm>Use the <Command>dcecp cdsclient show</Command> command
to display current counter
values for a clerk.  For example, to display the current
values of all attributes that are associated with a clerk, you enter
the following command:
</Para>
<InformalExample>
<Para><ProgramListing>dcecp> <Literal>cdsclient show /.:/hosts/&lt;hostname>/cds-clerk</Literal>
</ProgramListing></Para>
</InformalExample>
</Sect2>
<Sect2 Id="AGCC.CDSCSC.div.4">
<Title RevisionFlag="Changed">Displaying Server Counters</Title>
<Para><IndexTerm Id="AGCC.CDSCSC.indx.3">
<Primary RevisionFlag="Changed">CDS</Primary>
<Secondary RevisionFlag="Changed">servers</Secondary>
<Tertiary RevisionFlag="Changed">viewing counters</Tertiary>
</IndexTerm>Use the <Command RevisionFlag="Changed">dcecp cds show</Command> command
<!-- with the \*Lall counters\*O-->
<!-- attribute specifier-->
to display the current counter values for a server.  For example,
to display the current values of all the attributes 
that are associated with a server, you enter the following command:
</Para>
<InformalExample>
<Para><ProgramListing>dcecp> <Literal>cds show</Literal>
</ProgramListing></Para>
</InformalExample>
</Sect2>
<Sect2 Id="AGCC.CDSCSC.div.5">
<Title RevisionFlag="Changed">Displaying Clearinghouse Counters</Title>
<Para><IndexTerm Id="AGCC.CDSCSC.indx.4">
<Primary RevisionFlag="Changed">clearinghouses</Primary>
<Secondary RevisionFlag="Changed">viewing counters</Secondary>
</IndexTerm>Use the <Command RevisionFlag="Changed">dcecp clearinghouse show</Command> command
with the <Option>counters</Option> option
<!-- with the -->
<!-- \*Lall counters\*O attribute specifier-->
to display the current counter values for a specified clearinghouse.  For
example, the following command displays the current values of all attributes 
that are associated with the remote clearinghouse <Filename RevisionFlag="Changed">/.:/Paris1_CH</Filename>:
</Para>
<InformalExample>
<Para><ProgramListing>dcecp> <Literal>clearinghouse show  /.:/Paris1_CH  -counters</Literal> 
</ProgramListing></Para>
</InformalExample>
<IndexTerm Id="AGCC.CDSCSC.indx.5" SpanEnd="AGCC.CDSCSC.indx.1">
</Sect2>
</Sect1>
<Sect1 Id="AGCC.CDSCSC.div.6">
<Title RevisionFlag="Changed">Monitoring Clerk Communications with Specific Clearinghouses</Title>
<Para><IndexTerm Id="AGCC.CDSCSC.indx.6">
<Primary RevisionFlag="Changed">CDS</Primary>
<Secondary RevisionFlag="Changed">clerks</Secondary>
<Tertiary RevisionFlag="Changed">clearinghouse communications</Tertiary>
</IndexTerm>
<IndexTerm Id="AGCC.CDSCSC.indx.7">
<Primary RevisionFlag="Changed">clearinghouses</Primary>
<Secondary RevisionFlag="Changed">communications with CDS clerks</Secondary>
</IndexTerm>Every CDS clerk maintains a separate set of clearinghouse counters to
keep track of read, write, and other operations that it directs to each of
the clearinghouses with which it communicates.
These records collectively represent the cached clearinghouse entity for a
particular clerk.
</Para>
<Para RevisionFlag="Changed">You can monitor a clerk's cached clearinghouse counters so that
you can look at the distribution of the clerk's transactions to each of the
clearinghouses that it uses and find out where a clerk's requests are most
often directed.  To do this, you use
the <Command>dcecp</Command> <Command>cdscache show</Command> command with the <Option>clearinghouse</Option>
option.  For example, to display
the cached clearinghouse counters that are maintained by the local clerk for
the
<Filename>/.:/NY1_CH</Filename> clearinghouse, you enter the following command:
</Para>
<InformalExample>
<Para><ProgramListing>dcecp> <Literal>cdscache show  /.:/NY1_CH  -clearinghouse</Literal>
</ProgramListing></Para>
</InformalExample>
<IndexTerm Id="AGCC.CDSCSC.indx.8" SpanEnd="AGCC.CDSCSC.indx.6">
<IndexTerm Id="AGCC.CDSCSC.indx.9" SpanEnd="AGCC.CDSCSC.indx.7">
<?og-ChangeEnd def,13578,R1.2.2,Changed cdscp commands to dcecp">
</Sect1>
<Sect1 Id="AGCC.CDSCSC.div.7">
<Title>Displaying the Contents of a Clearinghouse</Title>
<Para RevisionFlag="Changed"><IndexTerm Id="AGCC.CDSCSC.indx.10">
<Primary>clearinghouses</Primary>
<Secondary>viewing contents</Secondary>
</IndexTerm>Use the <Command>dcecp clearinghouse show</Command> command to display the directory names
of all the directories that are stored in a particular clearinghouse.  For
example, to display the names of the directories that 
are stored in the clearinghouse <Filename>/.:/Chicago2_CH</Filename>, you enter the following
command:
<?og-ChangeStart def,13326,R1.2.2,Corrected the example"></Para>
<InformalExample>
<Para><ProgramListing>dcecp> <Literal>clearinghouse show  /.:/Chicago2_CH</Literal>
</ProgramListing></Para>
</InformalExample>
<?og-ChangeEnd def,13326,R1.2.2,Corrected the example">
<Para>(See 
<!-- the chapter on viewing the contents and structure of a namespace -->
Chapter 19
for more examples of displaying clearinghouse information.)
</Para>
</Sect1>
<Sect1 Id="AGCC.CDSCSC.div.8">
<Title>Forcing the Clearinghouse to Checkpoint to Disk</Title>
<Para>Under normal operations, the server will periodically checkpoint the
clearinghouse from memory to disk.  However, you can perform this task
immediately by having write permission to the server and entering the
<Command>dcecp clearinghouse initiate</Command> command with the <Literal>checkpoint</Literal>
option.  For example, to checkpoint the clearinghouse <Filename>/.:/Boston3_CH</Filename>
from memory to disk, you enter the following command:
</Para>
<InformalExample>
<Para><ProgramListing>dcecp> <Literal>clearinghouse initiate /.:/Boston3_CH -checkpoint</Literal> 
</ProgramListing></Para>
</InformalExample>
</Sect1>
<Sect1 Id="AGCC.CDSCSC.div.9">
<Title>Disabling Clerks and Servers</Title>
<Para RevisionFlag="Changed"><IndexTerm Id="AGCC.CDSCSC.indx.11">
<Primary>CDS</Primary>
<Secondary>clerks</Secondary>
<Tertiary>stopping</Tertiary>
</IndexTerm>
<IndexTerm Id="AGCC.CDSCSC.indx.12">
<Primary>CDS</Primary>
<Secondary>servers</Secondary>
<Tertiary>stopping</Tertiary>
</IndexTerm>
<!-- Note to Licensee Writers:-->
<!-- Many vendors offer customizable shutdown scripts-->
<!-- that contain commands to stop network processes.-->
<!-- If you ship such scripts with CDS, you might want to mention them here as -->
<!-- the normal or recommended method of stopping CDS clerks and servers.-->
<?og-ChangeStart def,13578,R1.2.2,Changed cdscp commands to dcecp">You may occasionally have to disable the clerk or server that
is running on a particular
system when you need to perform diagnostic or troubleshooting work
that requires active clerk or server processes to be suspended.  
Usually, you can use the <Literal>dce_config</Literal> procedure to start and stop 
DCE daemons.
You can disable CDS clerks and servers by using the <Command>dcecp</Command> commands,
<Command>cdsclient disable</Command>
and <Command>cds disable</Command>.
</Para>
<Sect2 Id="AGCC.CDSCSC.div.10">
<Title RevisionFlag="Changed">Disabling a Clerk</Title>
<Para RevisionFlag="Changed">To disable the clerk that is on the local node, enter the following command:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput RevisionFlag="Changed">dcecp> <Literal>cdsclient disable /.:/hosts/&lt;hostname>/cds-clerk
</Literal></UserInput></ProgramListing></Para>
</InformalExample>
</Sect2>
<Sect2 Id="AGCC.CDSCSC.div.11">
<Title RevisionFlag="Changed">Disabling a Server</Title>
<Para RevisionFlag="Changed">To disable the server that is on the local node, enter the following command:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput RevisionFlag="Changed">dcecp> <Literal>cds disable /.:/hosts/&lt;hostname>/cds-server
</Literal></UserInput></ProgramListing></Para>
</InformalExample>
<?og-ChangeEnd def,13578,R1.2.2,Changed cdscp commands to dcecp">
</Sect2>
</Sect1>
<Sect1 Id="AGCC.CDSCSC.div.12">
<Title>Restarting Clerks and Servers</Title>
<IndexTerm Id="AGCC.CDSCSC.indx.13">
<Primary>CDS</Primary>
<Secondary>clerks</Secondary>
<Tertiary>restarting</Tertiary>
</IndexTerm>
<IndexTerm Id="AGCC.CDSCSC.indx.14">
<Primary>CDS</Primary>
<Secondary>servers</Secondary>
<Tertiary>restarting</Tertiary>
</IndexTerm>
<!-- Note to Licensee Writers:-->
<!-- Many vendors offer customizable start-up -->
<!-- scripts that contain commands to start network processes.-->
<!-- If you ship such scripts with CDS, you might want to mention them here as -->
<!-- the normal or recommended method of starting CDS clerks and-->
<!-- servers.-->
<Para>CDS clerk and server processes are created and started
automatically by startup scripts that execute whenever the host
system is rebooted.  Sometimes, however, you may need to run these
scripts yourself if a clerk or server fails to start
automatically upon reboot, or if you want to restart a clerk or server that
you disabled to perform a backup or do diagnostic work on the host system.
</Para>
<Sect2 Id="AGCC.CDSCSC.div.13">
<Title>Restarting a Clerk</Title>
<Para>To restart a clerk, follow these steps:
</Para>
<OrderedList>
<ListItem>
<Para>Log into the clerk system as superuser (<Literal>root</Literal>).
</Para>
</ListItem>
<ListItem>
<Para>Enter the following command to see if the <Filename>dced</Filename> process is already
running:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Literal>ps -e
</Literal></UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
<ListItem>
<Para>If the <Filename>dced</Filename> process appears on the list of active processes,
proceed to step 4.
If the <Filename>dced</Filename> process does not appear on the list of active processes,
enter the following command to start the process:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Literal>dced
</Literal></UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
<ListItem>
<Para>Enter the following command to start the <Command>cdsadv</Command> process:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Literal>cdsadv
</Literal></UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
</OrderedList>
<Para><IndexTerm Id="AGCC.CDSCSC.indx.15" SpanEnd="AGCC.CDSCSC.indx.13"></Para>
</Sect2>
<Sect2 Id="AGCC.CDSCSC.div.14">
<Title>Restarting a Server</Title>
<Para>To restart a server, follow these steps:
</Para>
<OrderedList>
<ListItem>
<Para>Log into the server system as superuser (<Literal>root</Literal>).
</Para>
</ListItem>
<ListItem>
<Para>Enter the following command to see if the <Filename>dced</Filename> process is already
running:
</Para>
<InformalExample>
<Para><ProgramListing># <Literal>ps -e
</Literal></ProgramListing></Para>
</InformalExample>
</ListItem>
<ListItem>
<Para>If the <Filename>dced</Filename> process appears on the list of active processes,
proceed to step 4.
If the <Filename>dced</Filename> process does not appear on the list of active processes,
enter the following command to start the process:
</Para>
<InformalExample>
<Para><ProgramListing># <Literal>dced
</Literal></ProgramListing></Para>
</InformalExample>
</ListItem>
<ListItem>
<Para>Enter the following command to see if the <Command>cdsadv</Command> process is already
running:
</Para>
<InformalExample>
<Para><ProgramListing># <Literal>ps -e 
</Literal></ProgramListing></Para>
</InformalExample>
</ListItem>
<ListItem>
<Para>If the <Command>cdsadv</Command> process appears on the list of active processes,
proceed to step 6.
If the <Command>cdsadv</Command> process does not appear on the list of active processes,
enter the following command to start the process:
</Para>
<InformalExample>
<Para><ProgramListing># <Literal>cdsadv
</Literal></ProgramListing></Para>
</InformalExample>
</ListItem>
<ListItem>
<Para>Enter the following command to restart the server:
</Para>
<InformalExample>
<Para><ProgramListing># <Literal>cdsd
</Literal></ProgramListing></Para>
</InformalExample>
</ListItem>
</OrderedList>
<Para>When the server process starts, it starts all
clearinghouses on the system.
<IndexTerm Id="AGCC.CDSCSC.indx.16" SpanEnd="AGCC.CDSCSC.indx.14"></Para>
</Sect2>
</Sect1>
<Sect1 Id="AGCC.CDSCSC.div.15">
<Title>Preserving a Clearinghouse Across a Server System Upgrade</Title>
<Para><IndexTerm Id="AGCC.CDSCSC.indx.17">
<Primary>clearinghouses</Primary>
<Secondary>preserving after server upgrades</Secondary>
</IndexTerm></Para>
<Para>If you plan to upgrade the operating system software on a CDS server
system, and you want to preserve the clearinghouse (or clearinghouses)
on the system, follow this procedure:
</Para>
<OrderedList>
<ListItem>
<Para>Make sure that you disable the clerk and server. 
</Para>
</ListItem>
<ListItem>
<Para>Before you perform the system upgrade, back up the following CDS files:
</Para>

<ItemizedList>
<ListItem>
<Para><Literal>cds_attributes</Literal></Para>
</ListItem>

<ListItem>
<Para>
<Literal>cds_files</Literal>
</Para>
</ListItem>
<?sml-break>

<ListItem>
<Para>
<Literal>*_ch.checkpoint</Literal><Symbol Role="Variable">nnnnnnnn</Symbol>
</Para>
</ListItem>

<ListItem>
<Para>
<Literal>*_ch.tlog</Literal><Symbol Role="Variable">nnnnnnnn</Symbol>
</Para>
</ListItem>

<ListItem>
<Para>
<Literal>*_ch.version</Literal>
</Para>
</ListItem>

<ListItem>
<Para>
<Literal>cds_cache.</Literal><Symbol Role="Variable">nnnnnnnn</Symbol>
</Para>
</ListItem>

<ListItem>
<Para>
<Literal>cds_cache.version</Literal>
</Para>
</ListItem>

<ListItem>
<Para>
<Literal>cds_cache.wan</Literal> 
</Para>
</ListItem>
</ItemizedList>

<Para>(See the &DCEAi; and the &DCEPg; for the full pathnames of all CDS files.)
</Para>
</ListItem>
<ListItem>
<Para>Perform the system upgrade.
</Para>
</ListItem>
<ListItem>
<Para>Restore all the files that you backed up in step 2.
</Para>
</ListItem>
<ListItem>
<Para>Follow the procedure described in Section 17.6 for restarting a server.  When
the server process starts, it automatically locates the appropriate restored
files and starts all clearinghouses on the system.
</Para>
</ListItem>
</OrderedList>
</Sect1>
<Sect1 Id="AGCC.CDSCSC.div.16">
<Title>Backing Up Namespace Information</Title>
<IndexTerm Id="AGCC.CDSCSC.indx.18">
<Primary>namespace</Primary>
<Secondary>backing up</Secondary>
</IndexTerm>
<Para>Because updates and skulks of directories can occur asynchronously, and
because of the distributed nature of a namespace,
you cannot always depend on traditional backup methods to
preserve CDS data.
</Para>
<Para>The rest of this chapter tells when to use the following backup mechanisms:
</Para>
<ItemizedList>
<ListItem>
<Para>Directory replication
</Para>
</ListItem>
<ListItem>
<Para>Operating system backups
</Para>
</ListItem>
</ItemizedList>
<Sect2 Id="AGCC.CDSCSC.div.17">
<Title>Using Replication to Back Up Namespace Information</Title>
<IndexTerm Id="AGCC.CDSCSC.indx.19">
<Primary>replication</Primary>
<Secondary>namespace backup mechanism</Secondary>
</IndexTerm>
<Para>Directory replication is always the most reliable way to back up the
information that is in your namespace. 
When you create a new replica of a directory
at a clearinghouse, you are not only distributing the information but also
creating an up-to-date, real-time backup of the information.  If a replica
in one clearinghouse becomes unavailable, users can look up the information
they need in another replica of the directory in some other clearinghouse.
The more replicas of a directory you create, the more likely users will
always be able to find the information that is
contained in the directory somewhere in the namespace.
</Para>
<Para>If an entire clearinghouse is corrupted, you can restore it by creating a
new clearinghouse and then creating new replicas of the directories that
were stored there.  (See 
<!-- the chapter in this module on managing directories -->
Chapter 18
for complete information on how to create a replica.) 
</Para>
</Sect2>
<Sect2 Id="AGCC.CDSCSC.div.18">
<Title>Using Operating System Backups</Title>
<Para>Because a namespace is a distributed database to which modifications are
synchronized at variable intervals, any traditional backup of a particular
server system always contains old and incomplete information.  If you
frequently create, modify, or delete names, restoring an out-of-date backup
can cause recently created names to disappear, recent modifications to be
reversed, or recently deleted names to reappear in the namespace.  The
degree to which a traditional backup reflects the current condition of a
clearinghouse depends entirely on the following conditions:
</Para>
<ItemizedList>
<ListItem>
<Para>How recently the backup was created 
</Para>
</ListItem>
<ListItem>
<Para>What modifications were made since that time
</Para>
</ListItem>
<ListItem>
<Para>Whether the backup included the clearinghouse files in the 
directory <Symbol Role="Variable">dcelocal</Symbol><Filename>/var/directory/cds</Filename>
</Para>
</ListItem>
</ItemizedList>
<Para RevisionFlag="Changed">If you decide to use operating system backups, you only need to back up the
server systems whose clearinghouses store master replicas of directories.
<IndexTerm Id="AGCC.CDSCSC.indx.20">
<Primary>namespace</Primary>
<Secondary>files for backup</Secondary>
</IndexTerm>To ensure that you back up your namespace completely, check for the
following:
<?og-ChangeStart def,13578,R1.2.2,Changed cdscp commands to dcecp"></Para>
<ItemizedList>
<ListItem>
<Para RevisionFlag="Changed">The servers on these systems are disabled by using the <Command>dcecp cds disable</Command>
command.
</Para>
</ListItem>
<ListItem>
<Para RevisionFlag="Changed">The files in the root directory <Symbol Role="Variable">dcelocal</Symbol><Filename>/var/directory/cds</Filename>
are included in the backup.
</Para>
</ListItem>
</ItemizedList>
<?og-ChangeEnd def,13578,R1.2.2,Changed cdscp commands to dcecp">
<Para>If your namespace is small enough to be maintained in one clearinghouse,
you can reliably use traditional operating system backups to save and
restore the clearinghouse data.  If only one
clearinghouse exists, only one replica (the master replica) of each
directory exists.  This eliminates the need to account for the discrepancies
that may exist among multiple directory replicas.  Remember that the more
frequently you back up clearinghouse data, the more up-to-date that
information will be if you need to restore it.
<IndexTerm Id="AGCC.CDSCSC.indx.21" SpanEnd="AGCC.CDSCSC.indx.18"></Para>
</Sect2>
</Sect1>
</Chapter>
<!--+ 10/31/96 16:05:54
    | tagMorph:  $Id: 7_cds_clerkservch.sgm,v 1.1.2.10 1996/12/04 22:49:16 carrig Exp $
    | tagMorph library:  $Id: 7_cds_clerkservch.sgm,v 1.1.2.10 1996/12/04 22:49:16 carrig Exp $
    | sml-to-docbook:  1.24
    +-->
