<!--
# @OSF_COPYRIGHT@
# 
# 
# HISTORY
# $Log: adminkey.sgm,v $
# Revision 1.1.2.6  1996/12/15  23:01:40  wardr
# 	{edit,R1.2.2}
# 	[D[DFiformatting problems before penultimate build
# 	[1996/12/15  22:59:58  wardr]
#
# Revision 1.1.2.5  1996/12/14  23:14:01  wardr
# 	{edit,R1.2.2}
# 	Fixed figure problems
# 	[1996/12/14  23:12:16  wardr]
# 
# Revision 1.1.2.4  1996/11/06  18:46:52  weir
# 	Cleaned up history
# 	[1996/11/06  18:45:40  weir]
# 
# Revision 1.1.2.3  1996/10/28  17:33:37  carrig
# 	{enh,R1.2.2}
# 	Ready for editor
# 	[1996/10/28  17:19:21  carrig]
# 
# Revision 1.1.2.2  1996/10/24  20:10:10  carrig
# 	{enh,R1.2.2}
# 	Fixed tables
# 	[1996/10/24  20:08:06  carrig]
# 
# Revision 1.1.2.1  1996/10/22  20:42:28  wardr
# 	{edit,R1.2.2}
# 	Initial checkin after sgml conversion
# 	[1996/10/22  20:40:48  wardr]
# 
# Revision 1.1.1.2  1996/10/22  20:40:48  wardr
# 	{edit,R1.2.2}
# 	Initial checkin after sgml conversion
# 
# $EndLog$
-->
<!---->
<!-- Fragment document type declaration subset:
ArborText, Inc., 1988-1993, v.4001
<!DOCTYPE Book PUBLIC "-//Davenport//DTD DocBook V2.4//EN" [
]>
-->
<!---->
<!-- COPYRIGHT NOTICE-->
<!-- Copyright (c) 1990, 1991, 1992, 1993 Open Software Foundation, Inc.-->
<!-- ALL RIGHTS RESERVED (DCE).  See the file named COPYRIGHT.DCE in the-->
<!-- src directory for the full copyright text.-->
<!---->
<!---->
<!-- HISTORY-->
<!-- Revision 1.1.8.1  1996/05/14  19:51:58  wardr-->
<!-- 	{enh,R1.2.2}-->
<!-- 	Removed changebars-->
<!-- 	[1996/05/14  19:50:53  wardr]-->
<!---->
<!-- Revision 1.1.6.13  1995/07/24  18:27:38  buckler-->
<!-- 	More 1.1 edits.-->
<!-- 	[1995/07/24  17:58:41  buckler]-->
<!-- -->
<!-- Revision 1.1.6.12  1995/07/07  21:34:33  buckler-->
<!-- 	1.1 edits and Prentice Hall reformat-->
<!-- 	[1995/07/07  21:34:15  buckler]-->
<!-- -->
<!-- Revision 1.1.6.11  1994/10/14  19:34:47  jeff-->
<!-- 	{defect, 12535, R1.1}-->
<!-- 	Incorporate dcecp commands in DFS documentation.-->
<!-- 	[1994/10/14  19:32:05  jeff]-->
<!-- -->
<!-- Revision 1.1.6.10  1994/07/17  18:40:25  jeff-->
<!-- 	Editorial improvements.-->
<!-- 	[1994/07/17  18:40:05  jeff]-->
<!-- -->
<!-- Revision 1.1.6.9  1994/05/19  20:49:47  jeff-->
<!-- 	{defect, 8118, R1.1}-->
<!-- 	Correct use of double quotes.-->
<!-- 	[1994/05/19  20:48:40  jeff]-->
<!-- -->
<!-- Revision 1.1.6.8  1994/05/13  18:19:09  jeff-->
<!-- 	{defect, 9472, R1.1}-->
<!-- 	Document that database servers must be in each other's admin lists.-->
<!-- 	[1994/05/13  18:18:36  jeff]-->
<!-- -->
<!-- Revision 1.1.6.7  1994/04/28  22:21:22  jeff-->
<!-- 	{defect, 10439, R1.1}-->
<!-- 	Correct cross-references for reorganization of DFS documentation.-->
<!-- 	[1994/04/28  22:15:01  jeff]-->
<!-- -->
<!-- Revision 1.1.6.6  1993/09/27  03:26:16  tmw-->
<!-- 	Added index entries for second version of master index.-->
<!-- 	[1993/09/27  03:23:25  tmw]-->
<!-- -->
<!-- Revision 1.1.6.5  1993/09/16  11:27:30  kdu-->
<!-- 	{def,5778,R1.0.3}-->
<!-- 	Short forms of machine names.-->
<!-- 	[1993/09/16  11:27:00  kdu]-->
<!-- -->
<!-- Revision 1.1.6.4  1993/08/12  16:34:52  buckler-->
<!-- 	{edit, R1.0.2}-->
<!-- 	Tiny adjustment to formatting (added a .P) to fix build error-->
<!-- 	resulting from .zA/.zZ markers at end of file.-->
<!-- 	[1993/08/12  16:32:11  buckler]-->
<!-- -->
<!-- Revision 1.1.6.3  1993/08/10  23:58:50  jeff-->
<!-- 	Changed versions for defect fixes from 1.0.2A to 1.0.3.-->
<!-- 	[1993/08/10  23:58:06  jeff]-->
<!-- -->
<!-- Revision 1.1.6.2  1993/07/30  17:35:01  kdu-->
<!-- 	{def,8386,R1.0.3}-->
<!-- 	Incorporate OSF editorial comments into DFS Admin Guide and related-->
<!-- 	documentation.-->
<!-- 	[1993/07/30  17:33:43  kdu]-->
<!-- -->
<!-- Revision 1.1.4.15  93/02/22  19:12:45  jeff-->
<!-- 	Fix for defect 5795, update backup documentation.-->
<!-- 	[1993/02/22  19:12:13  jeff]-->
<!-- -->
<!-- Revision 1.1.4.14  1993/02/22  15:01:17  jeff-->
<!-- 	Fix for defect 7219, review comments.-->
<!-- 	[1993/02/22  15:00:43  jeff]-->
<!-- -->
<!-- Revision 1.1.4.13  1993/02/05  20:34:08  jeff-->
<!-- 	Fix for defect 7135, change key file to keytab file.-->
<!-- 	[1993/02/05  20:13:10  jeff]-->
<!-- -->
<!-- Revision 1.1.4.12  1993/01/28  19:05:22  dbelch-->
<!-- 	Embedding copyright notice-->
<!-- 	[1993/01/28  18:29:18  dbelch]-->
<!-- -->
<!-- Revision 1.1.4.11  1993/01/27  21:09:08  buckler-->
<!-- 	Fixed cross-refs and figure calls for new book org-->
<!-- 	[1993/01/27  21:06:40  buckler]-->
<!-- -->
<!-- Revision 1.1.4.10  1992/12/21  23:33:54  jeff-->
<!-- 	Fix for defect 6542, improve descriptions of principal and-->
<!-- 	group options.-->
<!-- 	[1992/12/21  23:32:56  jeff]-->
<!-- -->
<!-- Revision 1.1.4.9  1992/11/26  00:04:14  jeff-->
<!-- 	Fix for defect 6019, correct -noauth option with bos and fts-->
<!-- 	commands.-->
<!-- 	[1992/11/26  00:03:13  jeff]-->
<!-- -->
<!-- Revision 1.1.4.8  1992/11/25  00:09:46  jeff-->
<!-- 	Fix for defect 6019, correct -noauth option with bos and fts-->
<!-- 	commands.-->
<!-- 	[1992/11/25  00:09:14  jeff]-->
<!-- -->
<!-- Revision 1.1.4.7  1992/11/13  00:52:55  jeff-->
<!-- 	Fix for defect 5120, correct description of -localauth option.-->
<!-- 	[1992/11/13  00:52:20  jeff]-->
<!-- -->
<!-- Revision 1.1.4.6  1992/11/06  23:58:37  jeff-->
<!-- 	Fix for defects 5786 and 5961, changes to -kvno options of bos-->
<!-- 	commands, and other small clarifications and edits.-->
<!-- 	[1992/11/06  23:58:10  jeff]-->
<!-- -->
<!-- Revision 1.1.4.5  1992/10/31  01:27:06  jeff-->
<!-- 	Fix for defect 5791, bos status command displays NoAuth message.-->
<!-- 	[1992/10/31  01:25:32  jeff]-->
<!-- -->
<!-- Revision 1.1.4.4  1992/10/29  23:59:36  jeff-->
<!-- 	Fix for defect 5787, -createlist option creates an empty admin list.-->
<!-- 	[1992/10/29  23:59:00  jeff]-->
<!-- -->
<!-- Revision 1.1.4.3  1992/10/29  22:05:47  jeff-->
<!-- 	Fix for defect 5789, the -removelist option removes an empty admin list.-->
<!-- 	[1992/10/29  22:03:40  jeff]-->
<!-- -->
<!-- Revision 1.1.4.2  1992/08/26  12:09:44  weir-->
<!-- 	Removed change bars-->
<!-- 	[1992/08/26  11:52:02  weir]-->
<!-- -->
<!-- Revision 1.1.2.6  1992/07/02  17:39:08  jeff-->
<!-- 	Corrected ACL permissions and small editorial stuff.-->
<!-- 	[1992/07/02  17:37:57  jeff]-->
<!-- -->
<!-- Revision 1.1.2.5  1992/05/12  15:57:34  jeff-->
<!-- 	Verified and/or modified italics and other editorial-->
<!-- 	aspects of the file.-->
<!-- 	[1992/05/12  14:47:55  jeff]-->
<!-- -->
<!-- Revision 1.1.2.4  1992/04/29  22:16:37  jeff-->
<!-- 	Added .zA/.zZ tags around -noauth/-localauth changes.-->
<!-- 	[1992/04/29  22:11:02  jeff]-->
<!-- -->
<!-- Revision 1.1.2.3  1992/04/29  18:59:16  jeff-->
<!-- 	Modified syntax and description of -noauth and -localauth options.-->
<!-- 	[1992/04/28  23:43:13  jeff]-->
<!-- -->
<!-- Revision 1.1.2.2  1992/04/28  21:41:16  jeff-->
<!-- 	No changes....-->
<!-- 	[1992/04/28  21:39:40  jeff]-->
<!-- -->
<!-- Revision 1.1  1992/01/29  16:14:44  damon-->
<!-- 	Initial revision-->
<!-- -->
<!---->
<!-- (c) Copyright 1991, Open Software Foundation, Inc.  ALL RIGHTS RESERVED-->
<!--no-op:  Copyright (C) 1989, 1991, Transarc Corporation-->
<!--no-op:  The Gulf Tower-->
<!--no-op:  707 Grant Street-->
<!--no-op:  Pittsburgh, PA  15219-->
<!-- CHANGED-->
<!-- 12-10-91:  Removed bolding from -noauth in heading of Section 4.2.3.1-->
<!-- 12-10-91:  In Section 4.3.1.2, changed Step 6 to Step 5.-->
<!-- 12-11-91:  In Section 4.3.1, changed the last sentence of the third-->
<!--            paragraph to state that a key file must already exist before-->
<!--            a key can be added to it.-->
<!-- END CHANGED-->
<!--DOCUMENTSTYLE [12pt]{book}-->
<Chapter Id="DFSAGR.ADMK.div.1">
<Title>Using Administrative Lists and Keytab Files</Title>
<IndexTerm Id="DFSAGR.ADMK.indx.1">
<Primary>keytab files</Primary>
</IndexTerm>
<Para>Most DFS server processes have an associated administrative list that
defines the principals (users and server machines) and groups that can execute
commands that affect the process.  Server processes on different machines can
have different lists, or each process can use a copy of the same list. 
Different types of processes can also share the same administrative list.
</Para>
<Para>The management of an administrative domain is often shared by groups of
administrative users.  Each group is granted the privileges needed to execute
specific commands on specific machines.  By developing different groups, you
have the flexibility to allow only certain people to perform specific tasks
and access specific files.  This allows you to simplify the administration of
your domains by adding users to and removing them from groups rather than
altering the administrative lists themselves.
</Para>
<Para>You can use the <Command>dcecp group create</Command> command to create administrative
groups.  You can then use the <Command>bos addadmin</Command> command to place the groups
on administrative lists. (See Chapter 3 for more information about groups.)
</Para>
<Para>Each DFS server machine also has a keytab file.  The file contains server
encryption keys, at least one of which is also stored in the cell's Registry
Database.  Keytab files are used to provide security between server machines
and client machines.  A server machine uses an encryption key from the keytab
file to prove that it is a valid server to clients accessing data from it, as
well as to other server machines from which it accesses data.
</Para>
<Para>This chapter provides information about using and managing administrative
lists and keytab files.  Administrative lists, keytab files, and encryption
keys are maintained with <Command>bos</Command> commands. (Note that commands from the DCE
Security Service are also available to manipulate keytab files and keys.)
</Para>
<Sect1 Id="DFSAGR.ADMK.div.2">
<Title>Standard Options and Arguments</Title>
<Para>The following options and arguments are used with many of the commands
described in this chapter.  If an option or argument is not described with a
command in the text, a description of it appears here. (See Part 2 of this
guide and reference for complete details about each command.)
</Para>
<ItemizedList>
<ListItem>
<Para>The <Option>server</Option> <Symbol Role="Variable">machine</Symbol> option specifies the server machine on
which the command is to execute.  This option names the machine on which the
administrative list or keytab file to be affected is stored.  The BOS Server 
on this machine executes the command.  This option can be used to specify a
server machine in a foreign cell.
</Para>
<Para>To run a privileged <Command>bos</Command> command (a <Command>bos</Command> command that requires the
issuer to have some level of administrative privilege) using a privileged
identity, always specify the full DCE pathname of the machine (for example,
<Replaceable>/.../abc.com/hosts/fs1</Replaceable>).
</Para>
<Para>To run an unprivileged <Command>bos</Command> command, you can use any of the following to
specify the machine:
</Para>
<ItemizedList>
<ListItem>
<Para>The machine's DCE pathname (for example, <Replaceable>/.../abc.com/hosts/fs1</Replaceable>)
</Para>
</ListItem>
<ListItem>
<Para>The machine's host name (for example, <Literal>fs1.abc.com</Literal> or <Literal>fs1</Literal>)
</Para>
</ListItem>
<ListItem>
<Para>The machine's IP address (for example, <Literal>11.22.33.44</Literal>)
</Para>
</ListItem>
</ItemizedList>
<Note>
<IndexTerm Id="DFSAGR.ADMK.indx.2">
<Primary>authorization checking</Primary>
<Secondary>unprivileged identity</Secondary>
</IndexTerm>
<Para>If you specify the host name or IP address of the machine, the command
executes using the unprivileged identity <Literal>nobody</Literal> (the equivalent of
running the command with the <Option>noauth</Option> option); unless DFS authorization
checking is disabled on the specified machine, a privileged <Command>bos</Command> command
issued in this manner fails.  If you specify the machine's host name or IP
address, the command displays the following message (using the <Option>noauth</Option>
option suppresses the message):
<?sml-break><?sml-point-size 11>
<!--no-op:  12-->
</Para>
<InformalExample>
<Para><ProgramListing>bos:  WARNING: short form for server used; no
authentication information will be sent to the bosserver
</ProgramListing></Para>
</InformalExample>
<?sml-point-size 12>
<!--no-op:  14-->
</Note>
<Para>When working with administrative lists, modify only the administrative lists
stored on the System Control machine for the domain.  The Update Server can then
be used to distribute the lists to other server machines in the domain.  If
<Option>server</Option> is not the System Control machine, the list is not distributed 
to other server machines in the domain.  In addition, changes made to the 
list can be lost if the list is later updated from the System Control machine.
</Para>
</ListItem>
<ListItem>
<Para>The <Option>noauth</Option> option directs the <Command>bos</Command> program to use the unprivileged
identity <Literal>nobody</Literal> as the identity of the issuer of the command.  If DFS
authorization checking has been disabled with the <Command>bos setauth</Command> command,
the identity <Literal>nobody</Literal> has the necessary privileges to perform any
operation. (See Section 4.2.3 for information about disabling DFS
authorization checking.) If you use this option, do not use the
<Option>localauth</Option> option.
</Para>
</ListItem>
<ListItem>
<Para>The <Option>localauth</Option> option directs the <Command>bos</Command> program to use the DFS 
server principal of the machine on which the command is issued as the 
identity of the issuer.  Each DFS server machine has a DFS server principal 
stored in the Registry Database.  A DFS server principal is a unique, 
fully qualified principal name that ends with the string <Literal>dfs-server</Literal>; 
for example, <Replaceable>/.../abc.com/hosts/fs1/dfs-server</Replaceable>.  Do not confuse a 
machine's DFS server principal with its unique <Literal>self</Literal> identity. (See 
Chapter 6 for information about DFS server principals.)
</Para>
<Para>Use this option only if the command is issued from a DFS server machine. You
must be logged into the server machine as <Literal>root</Literal> for this option to work.
If you use this option, do not use the <Option>noauth</Option> option.
</Para>
</ListItem>
</ItemizedList>
<Para>The <Option>noauth</Option> and <Option>localauth</Option> options are always optional.
</Para>
</Sect1>
<Sect1 Id="DFSAGR.ADMK.div.3">
<Title>Using Administrative Lists</Title>
<IndexTerm Id="DFSAGR.ADMK.indx.3">
<Primary>administrative lists</Primary>
<Secondary>managing</Secondary>
</IndexTerm>
<Para>Because administrative lists exist on a per-process and per-machine basis,
different groups of principals can have different sets of administrative
privileges within a domain.  It is often useful, however, to have the same
group or user on several lists.  For example, the same users will probably
administer filesets and the Fileset Location Database, so they should be
included on all of the lists necessary to perform operations related to such
administration.
</Para>
<Para>In some cases, it is also practical to include the same users on multiple
lists.  For example, individuals listed in the <Filename>admin.bos</Filename> list can issue
all <Command>bos</Command> commands, including those to add members to other administrative
lists.  Therefore, principals added to the <Filename>admin.bos</Filename> list should also
be granted administrative privileges on the other administrative lists.
</Para>
<Para>To simplify the management of these lists, use the domain's System Control
machine as the source of all administrative lists for the domain.  The System
Control machine runs the <Command>upserver</Command> process; the other server machines in 
the domain run the <Command>upclient</Command> process.  The <Command>upclient</Command> process takes 
updates of the administrative lists from the <Command>upserver</Command> process.  As a 
result, all of the machines in the domain share the administrative lists and, 
thus, share a common set of administrators. (See Part 2 of this guide and
reference for more information on the <Command>upserver</Command> and <Command>upclient</Command>
processes.)
</Para>
<Sect2 Id="DFSAGR.ADMK.div.4">
<Title>Administrative Lists</Title>
<IndexTerm Id="DFSAGR.ADMK.indx.4">
<Primary>administrative lists</Primary>
<Secondary>types of</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.ADMK.indx.5">
<Primary>Fileset Location Database</Primary>
<Secondary>administrative list</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.ADMK.indx.6">
<Primary><Filename>admin.ft</Filename> file</Primary>
</IndexTerm>
<IndexTerm Id="DFSAGR.ADMK.indx.7">
<Primary>Fileset Server</Primary>
<Secondary>administrative list</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.ADMK.indx.8">
<Primary><Filename>admin.fl</Filename> file</Primary>
</IndexTerm>
<IndexTerm Id="DFSAGR.ADMK.indx.9">
<Primary>Update Server</Primary>
<Secondary>administrative list</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.ADMK.indx.10">
<Primary><Filename>admin.up</Filename> file</Primary>
</IndexTerm>
<IndexTerm Id="DFSAGR.ADMK.indx.11">
<Primary>BOS Server</Primary>
<Secondary>administrative list</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.ADMK.indx.12">
<Primary><Filename>admin.bos</Filename> file</Primary>
</IndexTerm>
<IndexTerm Id="DFSAGR.ADMK.indx.13">
<Primary>Backup Server</Primary>
<Secondary>administrative list</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.ADMK.indx.14">
<Primary><Filename>admin.bak</Filename> file</Primary>
</IndexTerm>
<IndexTerm Id="DFSAGR.ADMK.indx.15">
<Primary>authorization checking</Primary>
<Secondary>about</Secondary>
</IndexTerm>
<Para>Many tasks require that users, groups, and machines be added to one or more
administrative lists.  Summaries of the different DFS administrative lists and
the types of tasks associated with each list follow:
<?sml-break><?sml-need 15></Para>
<ItemizedList>
<ListItem>
<Para>The <Filename>admin.fl</Filename> list is associated with the Fileset Location (FL) Server.
It designates the users and groups permitted to create server entries and
fileset entries in the Fileset Location Database (FLDB).  Because the FLDB is
usually replicated to several different machines in the cell, you need to
ensure that the <Filename>admin.fl</Filename> lists on all machines that house the FLDB are
identical; otherwise, an administrator may be able to execute a command from
one machine but not from another.  You also need to ensure that the abbreviated
DFS server principals of all Fileset Database machines are included in the
<Filename>admin.fl</Filename> list (they can be present as members of a group); otherwise,
the synchronization site for the FLDB may not be able to propagate changes to
the database to the secondary sites.
</Para>
</ListItem>
<ListItem>
<Para>The <Filename>admin.ft</Filename> list is associated with the Fileset Server.  It designates
the users and groups permitted to administer filesets on a machine.  Because 
some fileset operations (such as moving filesets) affect multiple machines, the
server principal names of the machines involved in the operations must also be
in this administrative list.  To simplify management, it is best that the
server principal names of all server machines in the domain be represented
in the <Filename>admin.ft</Filename> list on the System Control machine so that the list is
distributed to all File Server machines in the domain.  Note that the server 
principals can be included directly, or a group to which they belong can be 
included.
</Para>
</ListItem>
<ListItem>
<Para>The <Filename>admin.up</Filename> list is associated with the Update Server.  It contains the
server principals for all server machines in the domain, allowing the
<Command>upclient</Command> processes on those machines to obtain files such as common
configuration files, binary files, and administrative lists from the
<Command>upserver</Command> process.  The list should be stored on machines such as the
System Control machine and the Binary Distribution machine, which run the
<Command>upserver</Command> process.
</Para>
</ListItem>
<ListItem>
<Para>The <Filename>admin.bos</Filename> list is associated with the BOS Server.  It designates the
users and groups permitted to create, start, and stop DFS server processes and
other processes to be controlled by the BOS Server on a machine.  The BOS Server
runs as <Literal>root</Literal>, so processes that it starts run with <Literal>root</Literal> privileges.
Because they can direct the BOS Server to start any process, and because they
can add and remove members from the other administrative lists on the machine,
users in the <Filename>admin.bos</Filename> list are usually a subset of the users in the
other lists for a machine or domain.
<?sml-break><?sml-need 15></Para>
</ListItem>
<ListItem>
<Para>The <Filename>admin.bak</Filename> list is associated with the Backup Server.  It designates
the users and groups allowed to issue commands in the <Command>bak</Command> command suite.
These commands are used to configure the Backup System and to dump and restore
data.  The Backup Database, like the FLDB, is typically replicated to several
different machines in the cell.  Therefore, you need to ensure that the
<Filename>admin.bak</Filename> lists on all machines that house the Backup Database are
identical.  You also need to ensure that the <Filename>admin.bak</Filename> list includes the
abbreviated DFS server principals of all Backup Database machines to make sure
that the synchronization site for the Backup Database can propagate changes to
the secondary sites (the server principals can be present as members of a
group).
</Para>
</ListItem>
</ItemizedList>
<Para>Many tasks require that a user be included on multiple lists; for example, to
move a fileset from one server machine to another, you must be included in the
<Filename>admin.ft</Filename> file on the source machine, and you and the server principal for
the source machine must be listed in the <Filename>admin.ft</Filename> list on the destination
machine.  You must also be included in the <Filename>admin.fl</Filename> list on all machines
on which the FLDB is stored.  The check by the DFS server processes to ensure 
that the issuer of a command is included in the proper administrative lists is
referred to as <Replaceable>DFS authorization checking</Replaceable>.
</Para>
<Para>In this guide, the specific privileges required to execute commands are
detailed with each task. (See Part 2 of this guide and reference for complete
information about the administrative privileges and permissions required to
issue each DFS command.) Note that the names of the administrative lists are
only recommendations; different names can be specified when the respective
processes are started.
</Para>
</Sect2>
<Sect2 Id="DFSAGR.ADMK.div.5">
<Title>Maintaining Administrative Lists</Title>
<IndexTerm Id="DFSAGR.ADMK.indx.16">
<Primary>administrative lists</Primary>
<Secondary>creating</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.ADMK.indx.17">
<Primary>administrative lists</Primary>
<Secondary>storing</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.ADMK.indx.18">
<Primary>administrative lists</Primary>
<Secondary>copies</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.ADMK.indx.19">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Command>addadmin</Command></Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.ADMK.indx.20">
<Primary><Filename>admin.bos</Filename> file</Primary>
</IndexTerm>
<Para>Administrative lists for server processes can initially be created in one of
two ways:
</Para>
<ItemizedList>
<ListItem>
<Para>A server process automatically creates its administrative list when it is
started on a machine if the list does not already exist on the local disk of
the machine.  By default, a process places its list in the configuration
directory, <Symbol Role="Variable">dcelocal</Symbol><Filename>/var/dfs</Filename>.  An administrative list generated by a
process is always empty.
<?sml-break><?sml-need 15></Para>
</ListItem>
<ListItem>
<Para>You can create an administrative list for any process except the BOS Server by
including the <Option>createlist</Option> option with the <Command>bos addadmin</Command> command.
Because the BOS Server must be running to issue the <Command>bos addadmin</Command>
command, and because every process creates its administrative list if the list
does not already exist when the process starts, the <Filename>admin.bos</Filename> list
<Replaceable>must</Replaceable> already exist when you issue the <Command>bos addadmin</Command> command.
</Para>
</ListItem>
</ItemizedList>
<Para>Every server machine stores administrative lists for its processes on its
local disk.  It is recommended that all administrative lists be stored in the
default directory, <Symbol Role="Variable">dcelocal</Symbol><Filename>/var/dfs</Filename>.  If the administrative list for
a process is stored in a different directory, you must specify the full
pathname of the list when you start the process.  For example, if you store
the <Filename>admin.bos</Filename> file in a directory called
<Symbol Role="Variable">dcelocal</Symbol><Filename>/var/dfs/config</Filename>, you must use that pathname when you start
the <Command>bosserver</Command> process on that machine.
</Para>
<Para>Do not create multiple copies of administrative lists and store them in
different directories; this can cause confusion when attempting to determine
who has administrative privilege and can potentially result in unauthorized
users executing restricted commands.  Note that a Private File Server machine
typically has specialized versions of the <Filename>admin.bos</Filename> and <Filename>admin.ft</Filename>
administrative lists to allow its administrators to manage its processes and
the data it contains.  Such lists can reside in the <Symbol Role="Variable">dcelocal</Symbol><Filename>/var/dfs</Filename>
directory, but they should not be retrieved from the System Control machine
via the Update Server.
</Para>
<Para>To guarantee that all users and groups have the same privileges on all server
machines, the same users and groups must be on the administrative lists that
grant those privileges on each machine.  If the same copy of an administrative
list is not distributed to all machines in the domain, users can be prohibited
from issuing commands on specific machines.  For instance, suppose a user is
listed in the <Filename>admin.ft</Filename> file on machine <Literal>fs1</Literal> but is not listed in
the <Filename>admin.ft</Filename> file on machine <Literal>fs2</Literal>.  The user can issue commands that
affect filesets on <Literal>fs1</Literal>, but the user cannot issue commands that affect
filesets on <Literal>fs2</Literal>.
</Para>
<Para>To maintain consistency among administrative lists, use the following
guidelines:
</Para>
<ItemizedList>
<ListItem>
<Para>Make all changes only to the files stored on the domain's System Control
machine.
<?sml-break><?sml-need 15></Para>
</ListItem>
<ListItem>
<Para>Ensure that all other server machines in the domain are running the
<Command>upclient</Command> process to reference the appropriate administrative lists on
the System Control machine.  The <Command>upclient</Command> and <Command>upserver</Command> processes
then automatically maintain the synchronization of the administrative lists.
</Para>
</ListItem>
</ItemizedList>
<Para><IndexTerm Id="DFSAGR.ADMK.indx.21">
<Primary>administrative lists</Primary>
<Secondary>removing</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.ADMK.indx.22">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Command>rmadmin</Command></Secondary>
</IndexTerm>You can remove an administrative list that you no longer need by including the
<Option>removelist</Option> option with the <Command>bos rmadmin</Command> command.  If you use the
command to remove the last member from an administrative list or if a list
contains no members when you issue the command, the <Option>removelist</Option> option
specifies that the list is to be removed.  The option has no effect if the list
is not empty.
</Para>
<Sect3 Id="DFSAGR.ADMK.div.6">
<Title>Listing Principals and Groups in Administrative Lists</Title>
<IndexTerm Id="DFSAGR.ADMK.indx.23">
<Primary>administrative lists</Primary>
<Secondary>viewing members</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.ADMK.indx.24">
<Primary>principals</Primary>
<Secondary> on administrative lists</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.ADMK.indx.25">
<Primary>groups</Primary>
<Secondary>on administrative lists</Secondary>
</IndexTerm>
<Para>Issue the <Command>bos lsadmin</Command> command to check the principals and groups on an
administrative list:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>bos lsadmin -server </Command><Symbol Role="Variable">machine</Symbol> <Option>adminlist</Option> <Symbol Role="Variable">filename</Symbol>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>adminlist</Option> <Symbol Role="Variable">filename</Symbol> option specifies the name of the 
administrative list to be displayed.  The default directory for the 
administrative lists is the configuration directory, <Symbol Role="Variable">dcelocal</Symbol><Filename>/var/dfs</Filename>.
If the lists are stored in the default directory, you need to provide only the 
specific filename, <Filename>admin.fl</Filename>, <Filename>admin.ft</Filename>, <Filename>admin.up</Filename>, 
<Filename>admin.bos</Filename>, or <Filename>admin.bak</Filename>.  If the lists are stored elsewhere, you 
must enter the pathname that was used when the specific process was started.
</Para>
<Para>For example, the following command lists the members of the <Filename>admin.bos</Filename>
file on the server machine named <Literal>fs1</Literal>:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Literal>bos lsa /.../abc.com/hosts/fs1 admin.bos</Literal>
</UserInput></ProgramListing></Para>
</InformalExample>
<InformalExample>
<Para><ProgramListing>Admin Users are: user: jones, user: smith,
user: hosts/fs1/self, group: dfs-admin, group: fs1-admin
</ProgramListing></Para>
</InformalExample>
</Sect3>
<Sect3 Id="DFSAGR.ADMK.div.7">
<Title>Adding Principals and Groups to Administrative Lists</Title>
<IndexTerm Id="DFSAGR.ADMK.indx.26">
<Primary>administrative lists</Primary>
<Secondary>adding members</Secondary>
</IndexTerm>
<Para>To add principals and groups to an administrative list, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Verify that you have the necessary privilege to issue the command.  You must
be included in the <Filename>admin.bos</Filename> list on the machine on which the 
administrative list to be affected is located.  If necessary, issue the 
<Command>bos lsadmin</Command> command to check the <Filename>admin.bos</Filename> list.
</Para>
</ListItem>
<ListItem>
<Para>Issue the <Command>bos addadmin</Command> command to add principals, groups, or both to an
administrative list:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>bos addadmin -server </Command><Symbol Role="Variable">machine</Symbol> <Option>adminlist</Option> <Symbol Role="Variable">filename</Symbol> &bsol;
[<Option>principal </Option><Symbol Role="Variable">name</Symbol>...] [<Option>group </Option><Symbol Role="Variable">name</Symbol>...] [<Option>createlist</Option>]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>adminlist</Option> <Symbol Role="Variable">filename</Symbol> option specifies the name of the 
administrative list to which principals and groups are to be added.  The 
default directory for the administrative lists is the configuration directory,
<Symbol Role="Variable">dcelocal</Symbol><Filename>/var/dfs</Filename>.  If the lists are stored in the default directory,
you need to provide only the specific filename, <Filename>admin.fl</Filename>, <Filename>admin.ft</Filename>,
<Filename>admin.up</Filename>, <Filename>admin.bos</Filename>, or <Filename>admin.bak</Filename>.  If the lists are stored
elsewhere, you must enter the pathname that was used when the specific process
was started.
</Para>
<Para>The <Option>principal</Option> <Symbol Role="Variable">name</Symbol> option specifies the principal name of each 
user or server machine to be added to the list.  A user from the local cell 
can be specified by a full or abbreviated principal name 
(<Filename>/.../</Filename><Symbol Role="Variable">cellname</Symbol><Filename>/</Filename><Symbol Role="Variable">username</Symbol> or just <Symbol Role="Variable">username</Symbol>, for example); a user from
a foreign cell can be specified only by a full principal name.  A server
machine from the local cell can be specified by a full or abbreviated
principal name (for example,
<Filename>/.../</Filename><Symbol Role="Variable">cellname</Symbol><Literal>/hosts/</Literal><Symbol Role="Variable">hostname</Symbol><Literal>/self</Literal> or just
<Literal>hosts/</Literal><Symbol Role="Variable">hostname</Symbol><Literal>/self</Literal>); a server machine from a foreign cell can
be specified only by a full principal name.
</Para>
<Para>The <Option>group</Option> <Symbol Role="Variable">name</Symbol> option specifies the name of each group to be 
added to the list.  A group from the local cell can be specified by a full 
or abbreviated group name (for example, 
<Filename>/.../</Filename><Symbol Role="Variable">cellname</Symbol><Filename>/</Filename><Symbol Role="Variable">group_name</Symbol> or just <Symbol Role="Variable">group_name</Symbol>); a group 
from a foreign cell can be specified only by a full group name.
</Para>
<Para><?sml-need 10>The <Option>createlist</Option> option specifies that the administrative list indicated 
with <Option>adminlist</Option> is to be created if it does not already exist.  Any 
principals or groups specified with the command are added to the new file; 
if no principals or groups are specified, the command creates an empty file. 
This option has no effect if the specified file already exists.
</Para>
</ListItem>
</OrderedList>
</Sect3>
<Sect3 Id="DFSAGR.ADMK.div.8">
<Title>Removing Principals and Groups from Administrative Lists</Title>
<IndexTerm Id="DFSAGR.ADMK.indx.27">
<Primary>administrative lists</Primary>
<Secondary>removing members</Secondary>
</IndexTerm>
<Para>To rename principals and groups for an administrative list, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Verify that you have the necessary privilege to issue the command.  You must
be included in the <Filename>admin.bos</Filename> list on the machine on which the 
administrative list to be affected is located.  If necessary, issue the 
<Command>bos lsadmin</Command> command to check the <Filename>admin.bos</Filename> list.
</Para>
</ListItem>
<ListItem>
<Para>Issue the <Command>bos rmadmin</Command> command to remove principals, groups, or both from
an administrative list:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$<Command> bos rmadmin -server </Command><Symbol Role="Variable">machine</Symbol> <Option>adminlist</Option> <Symbol Role="Variable">filename</Symbol> &bsol;
[<Option>principal </Option><Symbol Role="Variable">name</Symbol>...] [<Option>group </Option><Symbol Role="Variable">name</Symbol>...] [<Option>removelist</Option>]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>adminlist</Option> <Symbol Role="Variable">filename</Symbol> option specifies the name of the 
administrative list from which to remove principals and groups.  The default 
directory for the administrative lists is the configuration directory,
<Symbol Role="Variable">dcelocal</Symbol><Filename>/var/dfs</Filename>.  If the lists are stored in the default directory,
you need to provide only the specific filename, <Filename>admin.fl</Filename>, <Filename>admin.ft</Filename>,
<Filename>admin.up</Filename>, <Filename>admin.bos</Filename>, or <Filename>admin.bak</Filename>.  If the lists are stored
elsewhere, you must enter the pathname that was used when the specific process
was started.
</Para>
<Para>The <Option>principal</Option> <Symbol Role="Variable">name</Symbol> option specifies the principal name of each 
user or server machine to be removed from the list.  A user from the local 
cell can be specified by a full or abbreviated principal name (for example,
<Filename>/.../</Filename><Symbol Role="Variable">cellname</Symbol><Filename>/</Filename><Symbol Role="Variable">username</Symbol> or just <Symbol Role="Variable">username</Symbol>); a user from a
foreign cell can be specified only by a full principal name.  A server machine
from the local cell can be specified by a full or abbreviated principal name
(for example, <Filename>/.../</Filename><Symbol Role="Variable">cellname</Symbol><Literal>/hosts/</Literal><Symbol Role="Variable">hostname</Symbol><Literal>/self</Literal> or just
<Literal>hosts/</Literal><Symbol Role="Variable">hostname</Symbol><Literal>/self</Literal>); a server machine from a foreign cell can
be specified only by a full principal name.
</Para>
<Para><?sml-need 15>The <Option>group</Option> <Symbol Role="Variable">name</Symbol> option specifies the name of each group to be 
removed from the list.  A group from the local cell can be specified by a 
full or abbreviated group name
(<Filename>/.../</Filename><Symbol Role="Variable">cellname</Symbol><Filename>/</Filename><Symbol Role="Variable">group_name</Symbol> or just <Symbol Role="Variable">group_name</Symbol>, for example); a group 
from a foreign cell can be specified only by a full group name.
</Para>
<Para>The <Option>removelist</Option> option specifies that the administrative list 
indicated with <Option>adminlist</Option> is to be removed if it is empty either 
when the command is issued or after any principals or groups specified with 
the command are removed.  This option has no effect if the specified file 
is not empty when the command is issued or after any indicated principals 
or groups are removed.
</Para>
</ListItem>
</OrderedList>
<IndexTerm Id="DFSAGR.ADMK.indx.28" SpanEnd="DFSAGR.ADMK.indx.27">
<IndexTerm Id="DFSAGR.ADMK.indx.29" SpanEnd="DFSAGR.MAN74.indx.3">
<IndexTerm Id="DFSAGR.ADMK.indx.30" SpanEnd="DFSAGR.ADMK.indx.25">
</Sect3>
</Sect2>
<Sect2 Id="DFSAGR.ADMK.div.9">
<Title>Disabling DFS Authorization Checking on a Server Machine</Title>
<IndexTerm Id="DFSAGR.ADMK.indx.31">
<Primary>authorization checking</Primary>
<Secondary>disabling</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.ADMK.indx.32">
<Primary>server machines</Primary>
<Secondary>disabling authorization</Secondary>
</IndexTerm>
<Para>DFS authorization checking involves a server process checking the proper
administrative list to ensure that the issuer of a command has the necessary
administrative privilege to execute the command.  If the issuer is a member of
the list, the process performs the requested operation; if the issuer is not
a member of the list, the process does not perform the operation.
</Para>
<Para>By default, DFS authorization checking is enabled on every server machine.  You
can disable it on a machine by
</Para>
<ItemizedList>
<ListItem>
<Para>Including the <Option>noauth</Option> option with the <Command>bosserver</Command> command when the
BOS Server is started on the machine.
</Para>
</ListItem>
<ListItem>
<Para>Issuing the <Command>bos setauth</Command> command and specifying the machine with the
command's <Option>server</Option> option.
</Para>
</ListItem>
<ListItem>
<Para>Manually creating the zero-length file <Symbol Role="Variable">dcelocal</Symbol><Filename>/var/dfs/NoAuth</Filename> on
the local disk of the machine; the first two methods create this file
automatically.
</Para>
</ListItem>
</ItemizedList>
<Para>All DFS server processes, including the BOS Server, check for the presence of
the <Filename>NoAuth</Filename> file when they are requested to perform an operation.  They do
not check for the necessary administrative privilege for a requested operation
when the file is present.  Consider disabling authorization checking on a
machine in the following situations:
<?sml-break><?sml-need 15></Para>
<ItemizedList>
<ListItem>
<Para>During initial DFS installation, by including the <Option>noauth</Option> option with
the <Command>bosserver</Command> command.  Before administrative lists have been created or
users have been added to the lists, no one has the necessary privilege to
issue an administrative command.
</Para>
</ListItem>
<ListItem>
<Para>If some component of the Security Service is unavailable, by manually creating
the <Filename>NoAuth</Filename> file.  If the <Command>secd</Command> process or a related security process
is unavailable, the issuer of a command cannot acquire the security credentials
necessary to allow DFS server processes to verify administrative privilege.  In
this case, the <Option>noauth</Option> option must be included with a command to bypass
the unavailable Security Service. (See Section 4.2.3.1.)
</Para>
</ListItem>
<ListItem>
<Para>During server encryption key emergencies, by manually creating the <Filename>NoAuth</Filename>
file.  Improper keys may make it impossible for DFS server processes to verify
a user's administrative privilege.  The <Option>noauth</Option> option can again be used
to circumvent the security problems.
</Para>
</ListItem>
<ListItem>
<Para>To view the actual keys stored in a keytab file, by issuing the <Command>bos
setauth</Command> command.  If authorization checking is enabled, checksums are
displayed rather than the actual keys. (See Section 4.3.)
</Para>
</ListItem>
</ItemizedList>
<Para>Never disable DFS authorization checking for longer than is absolutely
necessary.  Disabling DFS authorization checking on a machine compromises
security by allowing anyone, including the unprivileged identity
<Literal>nobody</Literal>, to execute any DFS command on the machine.  To enable DFS
authorization checking (the normal state) once it has been disabled, use the
<Command>bos setauth</Command> command.  Use the <Command>bos status</Command> command to determine
whether DFS authorization checking is enabled or disabled on a server machine.
</Para>
<Sect3 Id="DFSAGR.ADMK.div.10">
<Title>Using the -noauth Option</Title>
<IndexTerm Id="DFSAGR.ADMK.indx.33">
<Primary><Literal>noauth</Literal> option</Primary>
</IndexTerm>
<Para>Most DFS commands from the <Command>bos</Command> and <Command>fts</Command> suites have an optional
<Option>noauth</Option> option.  Omitting the <Option>noauth</Option> option from a command requires
that authentication information be available about the issuer of the command;
because it is optional, the option is always omitted by default.  Including the
<Option>noauth</Option> option with a command directs the <Command>bos</Command> or <Command>fts</Command> program
to use the unprivileged identity <Literal>nobody</Literal> as the identity of the issuer
of the command.  Include the <Option>noauth</Option> option with a command if
<?sml-break><?sml-need 15></Para>
<ItemizedList>
<ListItem>
<Para>Authentication information is unnecessary.  If DFS authorization checking is
disabled on a server machine or if a command does not require administrative
privilege, DFS server processes on the machine do not check for authentication
information.  Omitting the <Option>noauth</Option> option in these cases causes the
<Command>bos</Command> or <Command>fts</Command> program to include the unnecessary security credentials
of the issuer with the command; including the <Option>noauth</Option> option allows the
command to execute more quickly because it avoids the unnecessary creation of
the issuer's security credentials.
</Para>
<Para>You may want to include the <Option>noauth</Option> option with a command that does not
require administrative privilege if the command is to be issued as a <Command>bos</Command>
<Literal>cron</Literal> process. (See Chapter 5 for more information about <Command>bos</Command>
processes.)
</Para>
</ListItem>
<ListItem>
<Para>Authentication information is unavailable.  If some aspect of the Security
Service is unavailable (for example, if the <Command>secd</Command> process is not
functioning) and the <Option>noauth</Option> option is omitted from a command, <Command>bos</Command>
and <Command>fts</Command> commands fail even if DFS authorization checking is disabled.
The failure occurs because the <Command>bos</Command> or <Command>fts</Command> program cannot obtain
the issuer's security credentials from the Security Service.  In such cases,
even commands that do not require administrative privilege may fail if the
<Option>noauth</Option> option is not used.
</Para>
</ListItem>
</ItemizedList>
<Para>Including the <Option>noauth</Option> option when DFS authorization checking is disabled
ensures that a command will succeed because the Security Service is never
contacted to assemble the issuer's security credentials.  Include the
<Option>noauth</Option> option with a command that requires administrative privilege
only if DFS authorization checking is disabled on the necessary machines.  A
command that requires administrative privilege fails if the <Option>noauth</Option>
option is included and DFS authorization checking is not disabled.
</Para>
</Sect3>
<Sect3 Id="DFSAGR.ADMK.div.11">
<Title>Disabling or Enabling DFS Authorization Checking</Title>
<IndexTerm Id="DFSAGR.ADMK.indx.34">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Command>setauth</Command></Secondary>
</IndexTerm>
<Para>To disable or enable DFS authorization checking, do the following:
</Para>
<Caution>
<Para>Disabling DFS authorization checking makes potentially serious
security breaches possible.  Enable DFS authorization checking as soon as the
need to have it disabled has passed.
</Para>
</Caution>
<OrderedList>
<ListItem>
<Para>If DFS authorization checking is to be disabled, verify that you have the
necessary privilege to issue the command.  You must be included in the 
<Filename>admin.bos</Filename> list on the machine on which checking is to be disabled.  If 
necessary, issue the <Command>bos lsadmin</Command> command to check the <Filename>admin.bos</Filename> 
list.
</Para>
</ListItem>
<ListItem>
<Para>Enter the <Command>bos setauth</Command> command to disable or enable DFS authorization
checking on the server machine:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$<Command> bos setauth -server </Command><Symbol Role="Variable">machine</Symbol> <Option>authchecking</Option> {<Literal>on</Literal> | <Literal>off</Literal>}
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>authchecking</Option> <Literal>off</Literal> option disables DFS authorization checking by 
creating the <Filename>NoAuth</Filename> file on the machine specified with <Option>server</Option>;
the <Option>authchecking</Option> <Literal>on</Literal> option enables DFS authorization checking by 
removing the <Filename>NoAuth</Filename> file from the machine specified with <Option>server</Option>.
</Para>
</ListItem>
</OrderedList>
<IndexTerm Id="DFSAGR.ADMK.indx.35" SpanEnd="DFSAGR.ADMK.indx.31">
<IndexTerm Id="DFSAGR.ADMK.indx.36" SpanEnd="DFSAGR.ADMK.indx.32">
</Sect3>
</Sect2>
</Sect1>
<Sect1 Id="DFSAGR.ADMK.div.12">
<Title>Using Keytab Files</Title>
<IndexTerm Id="DFSAGR.ADMK.indx.37">
<Primary>keytab files</Primary>
</IndexTerm>
<IndexTerm Id="DFSAGR.ADMK.indx.38">
<Primary>DFS servers</Primary>
<Secondary>passwords</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.ADMK.indx.39">
<Primary>passwords</Primary>
<Secondary>DFS server</Secondary>
</IndexTerm>
<Para>An encryption key is a set of octal characters used to encrypt and decrypt
packets of information.  In DFS, a server encryption key is employed to provide
security for information transferred between server processes and their
clients.  An encryption key for a server is analogous to a password for a user.
All DFS server processes on a server machine use the same key from the keytab
file as a "password" for that machine.
</Para>
<Para>One or more keys are stored in the <Filename>/krb5/v5srvtab</Filename> keytab file on the
local disk of each server machine.  Each key is associated with a principal
name, usually the DFS principal name of the machine on which the key resides.
Multiple keys can be associated with a principal name in a keytab file, but one
key (usually the most recent) is also stored in the Registry Database for any
principal name in a keytab file.
</Para>
<Para>The key stored in the Registry Database is the one used for subsequent
communications between processes on client machines and processes on the server
machine.  Multiple keys can exist if a new key is added while an existing key
is still being used for communications between a client and server.  Note that,
once communications have been initiated between a client and server using a
key, removing that key may not prevent continued communications between the
two.
</Para>
<Sect2 Id="DFSAGR.ADMK.div.13">
<Title>Maintaining Keytab Files</Title>
<Para>Maintaining server encryption keys and keytab files is critical to establishing
adequate security measures in your cell or domain.  Under normal circumstances,
keytab files require little maintenance.  Because they are analogous to user
passwords, they should be changed about as often.
</Para>
<Para><IndexTerm Id="DFSAGR.ADMK.indx.40">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Command>genkey</Command></Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.ADMK.indx.41">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Command>addkey</Command></Secondary>
</IndexTerm>The first step in changing a server encryption key is to add a new key to the
keytab file.  Two commands are available for adding keys: <Command>bos genkey</Command> and
<Command>bos addkey</Command>.
</Para>
<ItemizedList>
<ListItem>
<Para>The <Command>bos genkey</Command> command automatically generates a random key.  It also
automatically updates the entry in the Registry Database for the principal
with which the key is associated.  Any subsequent communications that involve
the specified principal and that require a key use the newly added key.
</Para>
</ListItem>
<ListItem>
<Para>The <Command>bos addkey</Command> command performs a similar function, but it requires that
you enter a string to be converted into a key, and it gives you the option of
updating the Registry Database entry for the indicated principal.  The <Command>bos
addkey</Command> command is less secure than the <Command>bos genkey</Command> command because
user-specified strings are seldom as random as machine-generated strings.
</Para>
</ListItem>
</ItemizedList>
<Para>A keytab file must already exist before either of these commands can be used to
add a key to it; keytab files are created with the <Command>dcecp keytab create</Command>
command.
</Para>
<Para>A unique version number is associated with each key for a principal in a keytab
file.  When adding a key to a keytab file, you must specify its key version
number as one of the following:
</Para>
<ItemizedList>
<ListItem>
<Para>An integer in the range 1 to 255.  The command uses the specified integer as the
version number of the new key.  The integer must be unique for the indicated
principal in the keytab file on the specified machine.  Because reusing a
version number currently in use in a keytab file can cause authentication
failures between the processes on a server machine and clients communicating
with them, an error is returned if you attempt to do so.
<?sml-break><?sml-need 15></Para>
</ListItem>
<ListItem>
<Para><Literal>+</Literal> or <Literal>0</Literal> (zero).  The command chooses an integer to serve as the
version number of the new key.  The integer it chooses is unique for the
indicated principal in the Registry Database.  However, it may not be unique
for the indicated principal in the keytab file on the specified machine, in
which case it replaces the key currently associated with the principal/version
number pair in the keytab file.
</Para>
</ListItem>
</ItemizedList>
<Para><IndexTerm Id="DFSAGR.ADMK.indx.42">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Command>lskeys</Command></Secondary>
</IndexTerm>It is best to keep the key version numbers in sequence by choosing a number
that is one greater than the current version number for the principal.  Use the
<Command>bos lskeys</Command> command to examine the key version numbers associated with the
keys in a keytab file.
</Para>
<Para><IndexTerm Id="DFSAGR.ADMK.indx.43">
<Primary>checksum</Primary>
</IndexTerm>The <Command>bos lskeys</Command> command also displays a <Command>checksum</Command> with each key
version number.  A checksum is a decimal number derived by encrypting a
constant with a key.  Because displaying the checksum is adequate for most
purposes (for example, when checking key version numbers presently in use),
and because its display is less of a security risk, it is displayed rather
than the actual key associated with a version number.  Note that the actual 
keys can be viewed by first issuing the <Command>bos setauth</Command> command to 
disable DFS authorization checking on the server machine; however, because 
disabling DFS authorization checking creates a compromised state of 
security, it is not recommended.
</Para>
<Para><IndexTerm Id="DFSAGR.ADMK.indx.44">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Command>rmkey</Command></Secondary>
</IndexTerm>After a new key has been added to a keytab file, the old key can be removed
from the file.  The <Command>bos rmkey</Command> command can be used to remove one or more
keys from a keytab file.  Removing the key currently in use in the Registry
Database or any other key still being used for client/server communications
can cause authentication failures between server processes and clients.
Tickets based on a removed key are invalidated; new tickets based on a new
key must be obtained to reestablish communications with the server process.
</Para>
<Para><IndexTerm Id="DFSAGR.ADMK.indx.45">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Literal>gckeys</Literal></Secondary>
</IndexTerm>To prevent authentication failures, wait until all old tickets held by client
machines expire before removing the old key.  For example, if tickets held by
clients expire after 2 hours, wait at least that long from the time the new
key is added to remove the old key.  If you are unsure of whether a key is
still in use, use the <Command>bos gckeys</Command> command to delete, or "garbage collect,"
those keys from a keytab file that are no longer in use (obsolete).
<?sml-break><?sml-need 20></Para>
<Note>
<Para>The BOS Server uses authenticated RPC for communications with clients.  By
default, it uses the packet privacy protection level with the <Command>bos</Command> key
commands described in this chapter.  However, this protection level is not
available to everyone who uses DCE.  If it is not available to you, the BOS
Server uses the next-highest protection level, packet integrity.  It displays
the following message, reporting that it must use the packet integrity
protection level because packet privacy is not available:
<?sml-break><?sml-point-size 11>
<!--no-op:  12-->
</Para>
<InformalExample>
<Para><ProgramListing>Data encryption unsupported by RPC.  Continuing without it.
</ProgramListing></Para>
</InformalExample>
<?sml-point-size 12>
<!--no-op:  14-->
</Note>
<Sect3 Id="DFSAGR.ADMK.div.14">
<Title>Listing Keys in Keytab Files</Title>
<IndexTerm Id="DFSAGR.ADMK.indx.46">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Command>lskeys</Command></Secondary>
</IndexTerm>
<Para>To list the keys in a keytab file, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Verify that you have the necessary privilege to issue the command.  You must
be included in the <Filename>admin.bos</Filename> list on the machine whose keys are to be 
displayed.  If necessary, issue the <Command>bos lsadmin</Command> command to check the 
<Filename>admin.bos</Filename> list on the appropriate machine.
</Para>
</ListItem>
<ListItem>
<Para>Issue the <Command>bos lskeys</Command> command to view the key version numbers and
checksums from the keytab file on a server machine:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$<Command> bos lskeys -server </Command><Symbol Role="Variable">machine</Symbol> [<Option>principal </Option><Symbol Role="Variable">name</Symbol>]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>principal</Option> <Symbol Role="Variable">name</Symbol> option is the principal name for which 
associated keys are to be listed.  The default is the DFS principal name of 
the machine specified with <Option>server</Option>.
</Para>
</ListItem>
</OrderedList>
<?sml-break>
<?sml-need 20>
</Sect3>
<Sect3 Id="DFSAGR.ADMK.div.15">
<Title>Adding Keys to Keytab Files</Title>
<IndexTerm Id="DFSAGR.ADMK.indx.47">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Command>genkey</Command></Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.ADMK.indx.48">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Command>addkey</Command></Secondary>
</IndexTerm>
<Para>To add a key to a keytab file, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Verify that you have the necessary privilege to issue the command.  You must
be include in the <Filename>admin.bos</Filename> list on the machine on which the keytab 
file to be affected is located.  If necessary, issue the <Command>bos lsadmin</Command> 
command to check the <Filename>admin.bos</Filename> list on the appropriate machine.
</Para>
</ListItem>
<ListItem>
<Para>Verify that the DFS server principal of the machine whose keytab file is to
be affected has the necessary permissions to alter entries in the Registry
Database. (See the Security Service portion of the &DCEAc; for more information.)
</Para>
</ListItem>
<ListItem>
<Para>Choose a key version number for the new key.  If necessary, issue the <Command>bos
lskeys</Command> command to check the version numbers of the keys in the appropriate
machine's keytab file:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$<Command> bos lskeys -server </Command><Symbol Role="Variable">machine</Symbol> [<Option>principal </Option><Symbol Role="Variable">name</Symbol>]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>principal</Option> <Symbol Role="Variable">name</Symbol> option is the principal name for which 
associated keys are to be listed.  The default is the DFS principal name of 
the machine specified with <Option>server</Option>.
</Para>
</ListItem>
<ListItem>
<Para>Create a new key in the keytab file with either the <Command>bos genkey</Command> command or
the <Command>bos addkey</Command> command.  The <Command>bos genkey</Command> command is the more secure
of the two commands.  It generates a random, octal string for use as the key.  It
also automatically updates the Registry Database in addition to adding the key
to the keytab file.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$<Command> bos genkey -server </Command><Symbol Role="Variable">machine</Symbol> <Option>kvno</Option> <Symbol Role="Variable">+_or_version_number</Symbol> \
[<Option>principal </Option><Symbol Role="Variable">name</Symbol>]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>kvno</Option> <Symbol Role="Variable">+_or_version_number</Symbol> option is the key version number of 
the new key.  Valid arguments for this option are
</Para>
<ItemizedList>
<ListItem>
<Para>An integer in the range 1 to 255.  The command uses the specified integer as
the version number of the new key.  The integer must be unique for the indicated
principal in the keytab file on the specified machine.
<?sml-break><?sml-need 15></Para>
</ListItem>
<ListItem>
<Para><Literal>+</Literal> or <Literal>0</Literal> (zero).  The command chooses an integer to serve as the 
version number of the new key.  The integer it chooses is unique for the 
indicated principal in the Registry Database, but it may not be unique for 
the indicated principal in the keytab file on the specified machine.
</Para>
</ListItem>
</ItemizedList>
<Para>The <Option>principal</Option> <Symbol Role="Variable">name</Symbol> option is the principal name with which the 
key is to be associated.  The default is the DFS principal name of the 
machine specified with <Option>server</Option>.
</Para>
<Para>The <Command>bos addkey</Command> command is less secure because it requires you to enter
a string to be converted into the key.  However, you can include the
<Option>localonly</Option> option with the command to add the key to the keytab file
without updating the Registry Database, which is useful for certain server
encryption key emergencies.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$<Command> bos addkey -server </Command><Symbol Role="Variable">machine</Symbol> <Option>kvno</Option> <Symbol Role="Variable">+_or_version_number</Symbol> \
<Option>password</Option> <Symbol Role="Variable">string </Symbol>[<Option>principal </Option><Symbol Role="Variable">name</Symbol>] [<Option>localonly</Option>]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>kvno</Option> <Symbol Role="Variable">+_or_version_number</Symbol> option is the key version number of 
the new key.  Valid arguments for this option are
</Para>
<ItemizedList>
<ListItem>
<Para>An integer in the range 1 to 255.  The command uses the specified integer as
the version number of the new key.  The integer must be unique for the indicated
principal in the keytab file on the specified machine.
</Para>
</ListItem>
<ListItem>
<Para><Literal>+</Literal> or <Literal>0</Literal> (zero).  The command chooses an integer to serve as the 
version number of the new key.  The integer it chooses is unique for 
the indicated principal in the Registry Database, but it may not be unique 
for the indicated principal in the keytab file on the specified machine.
</Para>
</ListItem>
</ItemizedList>
<Para>The <Option>password</Option> <Symbol Role="Variable">string</Symbol> option is a character string to be converted 
into an octal string.  The string can include any characters, including spaces 
if it is enclosed in "&thinsp;" (double quotes).
</Para>
<Para>The <Option>principal</Option> <Symbol Role="Variable">name</Symbol> option is the principal name with which the 
new key is to be associated.  The default is the DFS principal name of 
the machine specified with <Option>server</Option>.
</Para>
<Para>The <Option>localonly</Option> option specifies that the key is to be added to the 
keytab file on the machine indicated by <Option>server</Option>, but the Registry 
Database is not to be updated.
<?sml-break><?sml-need 10></Para>
</ListItem>
<ListItem>
<Para>If you added the key to the keytab file by using the <Command>bos addkey</Command> command and
its <Option>localonly</Option> option, use the <Command>dcecp keytab add</Command> command with the
<Option>registry</Option> option to add the key to the Registry Database when necessary.
</Para>
</ListItem>
</OrderedList>
</Sect3>
<Sect3 Id="DFSAGR.ADMK.div.16">
<Title>Removing Specific Keys from Keytab Files</Title>
<IndexTerm Id="DFSAGR.ADMK.indx.49">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Command>rmkey</Command></Secondary>
</IndexTerm>
<Para>To remove a specific key from a keytab file, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Verify that you have the necessary privilege to issue the command.  You must
be included in the <Filename>admin.bos</Filename> list on the machine on which the keytab 
file to be affected is located.  If necessary, issue the <Command>bos lsadmin</Command> 
command to check the <Filename>admin.bos</Filename> list on the appropriate machine.
</Para>
</ListItem>
<ListItem>
<Para>Remove one or more keys from the keytab file with the <Command>bos rmkey</Command> command:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$<Command> bos rmkey -server </Command><Symbol Role="Variable">machine</Symbol> <Option>kvno</Option> <Symbol Role="Variable">version_number</Symbol>... \
[<Option>principal </Option><Symbol Role="Variable">name</Symbol>]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>kvno</Option> <Symbol Role="Variable">version_number</Symbol> option is the key version number of each 
key to be removed for the indicated principal.  Valid arguments for this 
option are integers in the range 1 to 255.
</Para>
<Para>The <Option>principal</Option> <Symbol Role="Variable">name</Symbol> option is the principal name associated with 
the keys to be removed from the keytab file.  The default is the DFS principal 
name of the machine specified with <Option>server</Option>.
</Para>
</ListItem>
</OrderedList>
</Sect3>
<Sect3 Id="DFSAGR.ADMK.div.17">
<Title>Removing All Obsolete Keys from Keytab Files</Title>
<IndexTerm Id="DFSAGR.ADMK.indx.50">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Literal>gckeys</Literal></Secondary>
</IndexTerm>
<Para>To remove all obsolete keys from a keytab file, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Verify that you have the necessary privilege to issue the command.  You
must be included in the <Filename>admin.bos</Filename> list on the machine on which 
the keytab file to be affected is located.  If necessary, issue the 
<Command>bos lsadmin</Command> command to check the <Filename>admin.bos</Filename> list on the 
appropriate machine.
<?sml-break><?sml-need 15></Para>
</ListItem>
<ListItem>
<Para>Remove obsolete keys (those keys that are no longer in use) from the keytab
file with the <Command>bos gckeys</Command> command:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$<Command> bos gckeys -server </Command><Symbol Role="Variable">machine</Symbol> [<Option>principal </Option><Symbol Role="Variable">name</Symbol>]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>principal</Option> <Symbol Role="Variable">name</Symbol> option is the principal name for which 
obsolete keys are to be removed from the keytab file.  The default is the DFS 
principal name of the machine specified with <Option>server</Option>.
</Para>
</ListItem>
</OrderedList>
</Sect3>
</Sect2>
<Sect2 Id="DFSAGR.ADMK.div.18">
<Title>Handling Server Encryption Key Emergencies</Title>
<Para>Server encryption key emergencies are situations that require immediate
attention to ensure continued, authenticated communications between the
processes on a server machine and the clients with which they are
communicating.  One type of emergency occurs when you suspect that a machine's
encryption key in the Registry Database is compromised.  In this case, you must
immediately remove that key from the keytab file and reboot the server machine
to prevent unwanted access to the server.
</Para>
<Para>A second type of server encryption key emergency can result from the current
key becoming corrupted.  In this case, server processes using the key cannot
decrypt the information used in client/server communications, bringing all
activity involving those processes to a halt.  You must remove the corrupted
key from the keytab file, but you do not need to reboot the server machine.
From a security perspective, this type of emergency is less severe than one
resulting from a compromised key, but it requires immediate attention
nonetheless.
</Para>
<Para>To resolve encryption key emergencies, you must add a new server key to both
the keytab file on the machine and the Registry Database.  You must turn off DFS
authorization checking when handling key emergencies.  Because disabling DFS
authorization checking is a severe security risk, disable authorization
checking for a minimal amount of time.
</Para>
<Para>The emergency procedure requires you to be logged into the affected server
machine as <Literal>root</Literal> to create the <Filename>NoAuth</Filename> file and to reboot the
machine.  Many of the steps in the procedure were detailed in previous sections
of this chapter. (See Chapter 5 for a description of the <Command>bos shutdown</Command> 
command.)
<?sml-break><?sml-need 10></Para>
<Note>
<Para>Rebooting is not necessary when replacing a corrupted key.  It may not always
be necessary when dealing with a compromised key; for example, it may be
sufficient simply to restart any processes associated with the compromised
key.  However, rebooting the machine is the safest way to terminate all
unauthorized communications.
<IndexTerm Id="DFSAGR.ADMK.indx.51">
<Primary>registry database</Primary>
<Secondary>updating keytab files</Secondary>
</IndexTerm></Para>
</Note>
<OrderedList>
<ListItem>
<Para>Log in as <Literal>root</Literal> on the affected machine.
</Para>
</ListItem>
<ListItem>
<Para>Disable DFS authorization checking by creating the
<Symbol Role="Variable">dcelocal</Symbol><Filename>/var/dfs/NoAuth</Filename> file.  It is usually recommended that you use
the <Command>bos setauth</Command> command to create the <Filename>NoAuth</Filename> file.  However, because
the server encryption key emergency can make it impossible to issue <Command>bos</Command>
commands, create the file with the <Command>touch</Command> command (or its equivalent).
</Para>
</ListItem>
<ListItem>
<Para>Use the <Command>bos lskeys</Command> command to check the key version numbers currently in
use, using the <Option>noauth</Option> option to employ an unprivileged identity as the
identity of the issuer of the command:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Command>bos lskeys -server </Command><Symbol Role="Variable">machine</Symbol> [<Option>principal </Option><Symbol Role="Variable">name</Symbol>] <Option>noauth</Option>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>principal</Option> <Symbol Role="Variable">name</Symbol> option is the principal name for which 
associated keys are to be listed.  The default is the DFS principal name of 
the machine specified with <Option>server</Option>.
</Para>
<Para>The <Option>noauth</Option> option directs the <Command>bos</Command> program to use the 
unprivileged identity <Literal>nobody</Literal> as the identity of the issuer.
</Para>
</ListItem>
<ListItem>
<Para>Create the new key with the <Command>bos genkey</Command> command, specifying a new key
version number for the key with the <Option>kvno</Option> option and again using the
<Option>noauth</Option> option:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Command>bos genkey -server </Command><Symbol Role="Variable">machine</Symbol> <Option>kvno</Option> <Symbol Role="Variable">+_or_version_number</Symbol> \
[<Option>principal </Option><Symbol Role="Variable">name</Symbol>] <Option>noauth</Option>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>kvno</Option> <Symbol Role="Variable">+_or_version_number</Symbol> option is the key version number 
of the new key.  Valid arguments for this option are
</Para>
<ItemizedList>
<ListItem>
<Para>An integer in the range 1 to 255.  The command uses the specified integer as
the version number of the new key.  The integer must be unique for the indicated
principal in the keytab file on the specified machine.
<?sml-break><?sml-need 15></Para>
</ListItem>
<ListItem>
<Para><Literal>+</Literal> or <Literal>0</Literal> (zero).  The command chooses an integer to serve as the 
version number of the new key.  The integer it chooses is unique for 
the indicated principal in the Registry Database, but it may not be unique 
for the indicated principal in the keytab file on the specified machine.
</Para>
</ListItem>
</ItemizedList>
<Para>The <Option>principal</Option> <Symbol Role="Variable">name</Symbol> option is the principal name with which the 
key is to be associated.  The default is the DFS principal name of the 
machine specified with <Option>server</Option>.
</Para>
<Para>The <Option>noauth</Option> option directs the <Command>bos</Command> program to use the 
unprivileged identity <Literal>nobody</Literal> as the identity of the issuer.
</Para>
</ListItem>
<ListItem>
<Para>Use the <Command>bos rmkey</Command> command to remove any old keys that are compromised.
Specify the version number of each key to be removed with the <Option>kvno</Option>
option, and again use the <Option>noauth</Option> option.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Command>bos rmkey -server </Command><Symbol Role="Variable">machine</Symbol> <Option>kvno</Option> <Symbol Role="Variable">version_number</Symbol>...\
[<Option>principal </Option><Symbol Role="Variable">name</Symbol>] 
<Option>noauth</Option>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>kvno</Option> <Symbol Role="Variable">version_number</Symbol> option is the key version number of each 
key to be removed for the indicated principal.  Valid arguments for this 
option are integers in the range 1 to 255.
</Para>
<Para>The <Option>principal</Option> <Symbol Role="Variable">name</Symbol> option is the principal name associated with 
the keys to be removed from the keytab file.  The default is the DFS principal 
name of the machine specified with <Option>server</Option>.
</Para>
<Para>The <Option>noauth</Option> option directs the <Command>bos</Command> program to use the 
unprivileged identity <Literal>nobody</Literal> as the identity of the issuer.
</Para>
</ListItem>
<ListItem>
<Para><Replaceable>If the emergency resulted from a compromised key</Replaceable>, issue the <Command>bos
shutdown</Command> command to prepare to reboot the machine.  You must reboot the
machine to terminate all existing communications that are based on the 
compromised encryption key.  The <Command>bos shutdown</Command> command directs the BOS 
Server to shut down the other DFS server processes running on the machine. 
Include the <Option>wait</Option> option with the command to be sure that all processes 
have stopped before continuing.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Command>bos shutdown -server </Command><Symbol Role="Variable">machine</Symbol> <Option>wait</Option> <Option>noauth</Option>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>wait</Option> option delays the command shell prompt's return until the 
processes are stopped.  If the option is omitted, the prompt returns 
immediately, even if the processes are not yet stopped.
</Para>
<Para>The <Option>noauth</Option> option directs the <Command>bos</Command> program to use the 
unprivileged identity <Literal>nobody</Literal> as the identity of the issuer.
</Para>
</ListItem>
<ListItem>
<Para>Enable DFS authorization checking by entering the <Command>bos setauth</Command> command.
Specify the value <Literal>on</Literal> with the <Option>authchecking</Option> option, and include
the <Option>noauth</Option> option.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Command>bos setauth -server </Command><Symbol Role="Variable">machine</Symbol> <Option>authchecking</Option> {<Literal>on</Literal> | <Literal>off</Literal>} <Option>noauth</Option>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>authchecking</Option> <Literal>on</Literal> option enables DFS authorization checking by 
removing the <Filename>NoAuth</Filename> file from the machine specified with <Option>server</Option>;
<Option>authchecking</Option> <Literal>off</Literal> disables authorization checking by creating the
<Filename>NoAuth</Filename> file on the machine specified with <Option>server</Option>.
</Para>
<Para>The <Option>noauth</Option> option directs the <Command>bos</Command> program to use the 
unprivileged identity <Literal>nobody</Literal> as the identity of the issuer.
</Para>
</ListItem>
<ListItem>
<Para><Replaceable>If the emergency resulted from a compromised key</Replaceable>, issue the appropriate
reboot command (<Filename>/etc/reboot</Filename> or its equivalent) for the machine to be
rebooted.  For example:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Filename>/etc/reboot</Filename>
</UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
</OrderedList>
</Sect2>
<Sect2 Id="DFSAGR.ADMK.div.19">
<Title>The dcecp keytab Command and Keytab Files</Title>
<Para>The <Command>dcecp keytab</Command> command can also be used to manipulate encryption keys
in keytab files.  The following <Command>dcecp keytab</Command> operations are used to manage
keytab files:
</Para>
<VariableList>
<VarListEntry>
<Term><Command>add</Command></Term>
<ListItem>
<Para>Adds keys to a keytab file and, optionally, to the Registry Database
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Literal>catalog</Literal></Term>
<ListItem>
<Para>Lists the names of all keytab files on a machine
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Command>create</Command></Term>
<ListItem>
<Para>Creates a keytab file
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Command>delete</Command></Term>
<ListItem>
<Para>Deletes an entire keytab file or, optionally, just the keys in a keytab file
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Literal>remove</Literal></Term>
<ListItem>
<Para>Removes keys from a keytab file
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Command>show</Command></Term>
<ListItem>
<Para>Lists the keys in a keytab file
</Para>
</ListItem>
</VarListEntry>
</VariableList>
<Para>These operations perform functions similar to those of their counterparts in
the <Command>bos</Command> command suite.  Whereas the analogous <Command>bos</Command> commands require
that you be included in the <Filename>admin.bos</Filename> list on the machine whose keytab
file you wish to manage, these operations require that you have the necessary
ACL permissions. (See the &DCEAr; for more information about the <Command>dcecp
keytab</Command> command.)
<IndexTerm Id="DFSAGR.ADMK.indx.52" SpanEnd="DFSAGR.ADMK.indx.37"><IndexTerm Id="DFSAGR.ADMK.indx.53" SpanEnd="DFSAGR.ADMK.indx.39"><IndexTerm Id="DFSAGR.ADMK.indx.54" SpanEnd="DFSAGR.ADMK.indx.38"></Para>
</Sect2>
</Sect1>
</Chapter>
<!--+ 10/19/96 18:43:16
    | tagMorph:  $Id: adminkey.sgm,v 1.1.2.6 1996/12/15 23:01:40 wardr Exp $
    | tagMorph library:  $Id: adminkey.sgm,v 1.1.2.6 1996/12/15 23:01:40 wardr Exp $
    | sml-to-docbook:  1.23
    +-->
