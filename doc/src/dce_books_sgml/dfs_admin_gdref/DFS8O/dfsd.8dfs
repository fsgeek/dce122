<!--
# @OSF_COPYRIGHT@
# 
# 
# HISTORY
# $Log: dfsd.8dfs,v $
# Revision 1.1.2.5  1996/11/07  18:49:46  weir
# 	Cleaned up history
# 	[1996/11/07  18:49:36  weir]
#
# Revision 1.1.2.4  1996/10/28  17:44:44  carrig
# 	{enh,R1.2.2}
# 	Ready for editing
# 	[1996/10/28  17:41:01  carrig]
# 
# Revision 1.1.2.3  1996/10/25  16:37:53  carrig
# 	{enh,R1.2.2}
# 	Fixed VarLists
# 	[1996/10/25  16:37:35  carrig]
# 
# Revision 1.1.2.2  1996/10/24  20:06:55  carrig
# 	{enh,R1.2.2}
# 	Fixed VarLists
# 	[1996/10/24  20:06:33  carrig]
# 
# Revision 1.1.2.1  1996/10/22  20:55:46  wardr
# 	{edit,R1.2.2}
# 	Initial checkin after sgml conversion
# 	[1996/10/22  20:51:13  wardr]
# 
# Revision 1.1.1.2  1996/10/22  20:51:13  wardr
# 	{edit,R1.2.2}
# 	Initial checkin after sgml conversion
# 
# $EndLog$
-->
<!---->
<!-- Fragment document type declaration subset:
ArborText, Inc., 1988-1993, v.4001
<!DOCTYPE Book PUBLIC "-//Davenport//DTD DocBook V2.4//EN" [
]>
-->
<RefEntry Id="DFSAGR.MAN111.rsml.1">
<RefMeta>
<RefEntryTitle>dfsd</RefEntryTitle>
<ManVolNum>8dfs</ManVolNum>
</RefMeta>
<RefNameDiv>
<RefName><Command>dfsd</Command></RefName>
<RefPurpose>Initializes the DFS Cache Manager and starts related daemons
</RefPurpose>
</RefNameDiv>
<!---->
<!--  COPYRIGHT NOTICE-->
<!--  Copyright (c) 1990, 1991, 1992, 1993 Open Software Foundation, Inc.-->
<!--  Copyright (C) 1989, 1991, 1992, 1993 Transarc Corporation-->
<!--  ALL RIGHTS RESERVED (DCE).  See the file named COPYRIGHT.DCE in the-->
<!--  src directory for the full copyright text.-->
<!---->
<!---->
<!-- HISTORY-->
<!-- Revision 1.1.12.2  1996/09/16  20:24:30  wfl-->
<!-- 	Added editorial changes-->
<!-- 	[1996/09/16  20:22:59  wfl]-->
<!---->
<!-- Revision 1.1.12.1  1996/08/20  18:46:34  wfl-->
<!-- 	{enh,13605,R1.2.2}-->
<!-- 	Security enhancement-->
<!-- 	[1996/08/20  18:42:10  wfl]-->
<!-- -->
<!-- Revision 1.1.10.2  1996/02/09  16:11:56  rcb-->
<!-- 	R1.2.1: editorial pass following HP revision-->
<!-- 	[1996/02/09  16:11:32  rcb]-->
<!-- -->
<!-- 	R1.2.1: editorial pass following HP revision-->
<!-- 	[1996/02/09  15:59:08  rcb]-->
<!-- -->
<!-- Revision 1.1.10.1  1996/02/06  21:35:23  weir-->
<!-- 	CR 13293: miscellaneous HP changes-->
<!-- 	[1996/02/06  21:34:44  weir]-->
<!-- -->
<!-- Revision 1.1.8.14  1995/07/20  17:36:00  buckler-->
<!-- 	1.1 edits and Prentice Hall reformat-->
<!-- 	[1995/07/20  17:34:17  buckler]-->
<!-- -->
<!-- Revision 1.1.8.13  1995/07/13  23:00:09  buckler-->
<!-- 	no change-->
<!-- 	[1995/07/13  22:57:24  buckler]-->
<!-- -->
<!-- Revision 1.1.8.12  1994/10/20  21:40:35  jeff-->
<!-- 	Formatting cleanup.-->
<!-- 	[1994/10/20  21:39:00  jeff]-->
<!-- -->
<!-- Revision 1.1.8.11  1994/05/31  17:01:44  jeff-->
<!-- 	Fix an incorrect change marker.-->
<!-- 	[1994/05/31  17:01:27  jeff]-->
<!-- -->
<!-- Revision 1.1.8.10  1994/05/17  18:35:43  jeff-->
<!-- 	Fix formatting errors.-->
<!-- 	[1994/05/17  18:35:30  jeff]-->
<!-- -->
<!-- Revision 1.1.8.9  1994/05/10  21:46:49  jeff-->
<!-- 	Fix formatting error.-->
<!-- 	[1994/05/10  21:46:36  jeff]-->
<!-- -->
<!-- Revision 1.1.8.8  1994/04/20  20:59:07  jeff-->
<!-- 	Confirm/correct removal of diskless references-->
<!-- 	[1994/04/20  20:53:57  jeff]-->
<!-- -->
<!-- Revision 1.1.8.7  1994/04/07  19:56:57  rom-->
<!-- 	{enh, 10306, R1.1}-->
<!-- 	Remove diskless documentation from the DCE doc set.-->
<!-- 	[1994/04/07  17:08:15  rom]-->
<!-- -->
<!-- Revision 1.1.8.6  1993/11/04  14:35:59  jeff-->
<!-- 	{def,9333,R1.0.3}-->
<!-- 	Small changes to previous edit.-->
<!-- 	[1993/11/04  14:35:42  jeff]-->
<!-- -->
<!-- Revision 1.1.8.5  1993/10/25  18:57:59  zahn-->
<!-- 	[zahn 10/24/93 public]-->
<!-- -->
<!-- 	{defect,9241,R1.0.3}-->
<!-- 	document namecachesize option.-->
<!-- 	[1993/10/25  18:57:16  zahn]-->
<!-- -->
<!-- Revision 1.1.8.4  1993/10/15  15:36:51  jeff-->
<!-- 	{def,8320,R1.0.3}-->
<!-- 	Document minimum cache size.-->
<!-- 	[1993/10/15  15:36:41  jeff]-->
<!-- -->
<!-- Revision 1.1.8.3  1993/10/08  15:02:30  weir-->
<!-- 	Inserted Transarc copyright-->
<!-- 	[1993/10/08  14:59:04  weir]-->
<!-- -->
<!-- Revision 1.1.8.2  1993/08/04  18:53:57  tmw-->
<!-- 	Added index entries for second version of master index.-->
<!-- 	[1993/08/04  18:37:49  tmw]-->
<!-- -->
<!-- Revision 1.1.6.10  1993/02/25  23:33:04  jeff-->
<!-- 	Fix for defect 7219, review comments.-->
<!-- 	[1993/02/25  23:32:32  jeff]-->
<!-- -->
<!-- Revision 1.1.6.9  1993/02/16  00:46:03  jeff-->
<!-- 	Fix for defect 7219, small changes.-->
<!-- 	[1993/02/16  00:45:41  jeff]-->
<!-- -->
<!-- Revision 1.1.6.8  1993/02/04  01:30:02  jeff-->
<!-- 	Fix for defect 6888.-->
<!-- 	[1993/02/04  01:28:02  jeff]-->
<!-- -->
<!-- Revision 1.1.6.7  1993/01/28  02:14:41  dbelch-->
<!-- 	Embedding copyright notice-->
<!-- 	[1993/01/28  00:50:23  dbelch]-->
<!-- -->
<!-- Revision 1.1.6.6  1993/01/13  19:00:28  jeff-->
<!-- 	Fix for defect 6811, -ioprocs option is AIX specific.-->
<!-- 	[1993/01/13  18:59:51  jeff]-->
<!-- -->
<!-- Revision 1.1.6.5  1993/01/09  18:33:25  jeff-->
<!-- 	Fix for defect 6326, update Ubik and related information.-->
<!-- 	[1993/01/09  18:32:48  jeff]-->
<!-- -->
<!-- Revision 1.1.6.4  1992/12/06  19:49:58  jeff-->
<!-- 	Fix for defect 5125, augment -cachedir description, and-->
<!-- 	related editorial changes.-->
<!-- 	[1992/12/06  19:49:14  jeff]-->
<!-- -->
<!-- Revision 1.1.6.3  1992/11/14  19:05:42  jeff-->
<!-- 	Fix for defect 6062, remove cm debug command and related-->
<!-- 	DFSLog file.-->
<!-- 	[1992/11/14  19:05:19  jeff]-->
<!-- -->
<!-- Revision 1.1.6.2  1992/09/10  15:29:39  weir-->
<!-- 	Removed change bar macros; moved into 1.0.2doc tree-->
<!-- 	[1992/09/10  14:17:29  weir]-->
<!-- -->
<!-- Revision 1.1.4.2  1992/09/08  19:03:05  casey-->
<!-- 	Prentice Hall production-->
<!-- 	[1992/09/08  16:54:38  casey]-->
<!-- -->
<!-- Revision 1.1.2.5  1992/06/09  21:33:01  jeff-->
<!-- 	Included IBM 1.0.1 review comments.-->
<!-- 	[1992/06/09  21:02:02  jeff]-->
<!-- -->
<!-- Revision 1.1.2.4  1992/05/10  17:49:36  jeff-->
<!-- 	Verified and/or modified italics and other editorial-->
<!-- 	aspects of the file.-->
<!-- 	[1992/05/10  17:12:15  jeff]-->
<!-- -->
<!-- Revision 1.1.2.3  1992/04/22  18:11:40  jeff-->
<!-- 	Changed the -nosettime option -settime (reversed the nature of-->
<!-- 	the option's functionality).-->
<!-- 	[1992/04/22  16:25:04  jeff]-->
<!-- -->
<!-- Revision 1.1.2.2  1992/02/14  14:49:14  weir-->
<!-- 	Added EQN code to produce superscripts where required.-->
<!-- 	[1992/02/14  14:47:13  weir]-->
<!-- -->
<!-- Revision 1.1  1992/01/29  15:50:27  damon-->
<!-- 	Initial revision-->
<!-- -->
<!---->
<!-- (c) Copyright 1991, Open Software Foundation, Inc.  ALL RIGHTS RESERVED-->
<!-- -->
<!-- -->
<!-- -->
<!-- -->
<!-- HP History:-->
<!--	HP revision /main/HPDCE02/1  1995/09/18  18:08 UTC  millett-->
<!-- 	16032 fixes-->
<!-- -->
<!--	HP revision /main/millett_doc/1  1995/09/18  18:06 UTC  millett-->
<!-- 	16032: fix DTE coding problem in "Example" section-->
<!-- -->
<!--	HP revision /main/1  1995/03/08  02:04 UTC  arh-->
<!-- 	Add OSF doc sources.-->
<!-- -->
<!-- -->
<!-- -->
<!-- -->
<!-- -->
<!-- -->
<!-- -->
<!---->
<!-- (c) Copyright 1991, Open Software Foundation, Inc.  ALL RIGHTS RESERVED-->
<!--DOCUMENTSTYLE [12pt]{book}-->
<IndexTerm Id="DFSAGR.MAN111.indx.1">
<Primary><Command>dfsd</Command> command</Primary>
</IndexTerm>
<IndexTerm Id="DFSAGR.MAN111.indx.2">
<Primary>Cache Manager</Primary>
<Secondary>initializing</Secondary>
</IndexTerm>
<RefSynopsisDiv RevisionFlag="Changed">
<?og-ChangeStart enh, 13605, R1.2.2, Security enhancements">
<CmdSynopsis>
<Command>dfsd</Command>
<Arg Choice="opt"><Option>blocks</Option><Replaceable>number_of_cache_blocks</Replaceable></Arg>
<Arg Choice="opt"><Option>files</Option><Replaceable>number_of_cache_files</Replaceable></Arg>
<Arg Choice="opt"><Option>stat</Option><Replaceable>number_of_status_cache_entries</Replaceable></Arg>
<Arg Choice="opt"><Option>rootfileset</Option><Replaceable>root_fileset</Replaceable></Arg>
<Arg Choice="opt"><Option>cachedir</Option><Replaceable>cache_directory</Replaceable></Arg>
<Arg Choice="opt"><Option>mountdir</Option><Replaceable>DFS_mount_directory</Replaceable></Arg>
<Arg Choice="opt"><Option>rootcell</Option><Replaceable>root_cell</Replaceable></Arg>
<Arg Choice="opt"><Option>settime</Option></Arg>
<Arg Choice="opt"><Option>mainprocs</Option><Replaceable>number_of_background_daemons</Replaceable></Arg>
<Arg Choice="opt"><Option>tokenprocs</Option><Replaceable>number_of_token_daemons</Replaceable></Arg>
<Arg Choice="opt"><Option>ioprocs</Option><Replaceable>number_of_I/O_background_daemons</Replaceable></Arg>
<Arg Choice="opt"><Option>memcache</Option></Arg>
<Arg Choice="opt"><Option>dcache</Option><Replaceable>number_of_entries</Replaceable></Arg>
<Arg Choice="opt"><Option>chunksize</Option><Replaceable>chunk_exponent</Replaceable></Arg>
<Arg Choice="opt"><Option>namecachesize</Option><Replaceable>number_of_name_cache_entries</Replaceable></Arg>
<Arg Choice="opt"><Option>initiallocalprotectlevel</Option><Replaceable>level</Replaceable></Arg>
<Arg Choice="opt"><Option>minlocalprotectlevel</Option><Replaceable>level</Replaceable></Arg>
<Arg Choice="opt"><Option>initialremoteprotectlevel</Option><Replaceable>level</Replaceable></Arg>
<Arg Choice="opt"><Option>minremoteprotectlevel</Option><Replaceable>level</Replaceable></Arg>
<Arg Choice="opt"><Option>verbose</Option></Arg>
<Arg Choice="opt"><Option>debug</Option></Arg>
<Arg Choice="opt"><Option>help</Option></Arg>
</CmdSynopsis>
</RefSynopsisDiv>
<RefSect1>
<Title RevisionFlag="Changed">OPTIONS</Title>
<VariableList>
<VarListEntry role="linebreak">
<Term RevisionFlag="Changed"><Option>blocks</Option> <Symbol Role="Variable">number_of_cache_blocks</Symbol></Term>
<ListItem>
<Para RevisionFlag="Changed">Specifies the number of kilobytes to be made available for caching in the
machine's cache directory (for a disk cache) or memory (for a memory cache).
This value overrides the default, which must be specified in the third field
of the <Symbol Role="Variable">dcelocal</Symbol><Filename>/etc/CacheInfo</Filename> file.  The unit of measurement for block
size is always kilobytes.
</Para>
<Para RevisionFlag="Changed">A disk cache should not exceed 90% of the disk space available on the cache
partition; a memory cache should not exceed 20 to 25% of the machine's
available memory.  These limits are necessary because the implementation of
the cache requires a small amount of disk space or machine memory, and because
a memory cache must leave enough memory for processes and applications to run.
</Para>
<Para RevisionFlag="Changed">For a memory cache, do not combine this option with the <Option>dcache</Option> option.
</Para>
<Note>
<Para RevisionFlag="Changed">The minimum cache size you can specify with the <Option>blocks</Option> option is 17
kilobytes.  If you specify a cache size smaller than 17 kilobytes, the Cache
Manager creates a cache of 17 kilobytes.
</Para>
</Note>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term RevisionFlag="Changed"><Option>files</Option> <Symbol Role="Variable">number_of_cache_files</Symbol></Term>
<ListItem>
<Para RevisionFlag="Changed">Specifies the number of V files (chunks) to be created in the cache directory
for a disk cache.  This value overrides the default, which is the number of
cache blocks divided by 8.
</Para>
<Para RevisionFlag="Changed">Each V file can accommodate a chunk of data.  By default, each chunk can
accommodate 64 kilobytes of data.  To operate most efficiently, at least 90%
of the cache must be in use.  Use the <Option>files</Option> option to increase
the number of V files if this is not the case.  Do not specify a value greater
than 32,000.
</Para>
<Para RevisionFlag="Changed">Do not combine this option with the <Option>memcache</Option> option, which is used for
memory caching.
</Para>
<Note>
<Para RevisionFlag="Changed">The minimum number of V files you can specify with the <Option>files</Option> option is
2.  If you specify a value smaller than 2, the Cache Manager creates a cache
with two V files.
</Para>
</Note>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term RevisionFlag="Changed"><Option>stat</Option> <Symbol Role="Variable">number_of_status_cache_entries</Symbol></Term>
<ListItem>
<Para RevisionFlag="Changed">Specifies the number of entries in the machine's memory for recording status
information about DFS files in the cache.  The default is <Literal>300</Literal>.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term RevisionFlag="Changed"><Option>rootfileset</Option> <Symbol Role="Variable">root_fileset</Symbol></Term>
<ListItem>
<Para RevisionFlag="Changed">Names the read/write fileset corresponding to the top-level (<Literal>root</Literal>)
directory.  This option is generally used for testing purposes only.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term RevisionFlag="Changed"><Option>cachedir</Option> <Symbol Role="Variable">cache_directory</Symbol></Term>
<ListItem>
<Para RevisionFlag="Changed">Names the local disk directory to be used as the cache for disk caching.  This
value overrides the default, which must be specified in the second field of the
<Filename>CacheInfo</Filename> file.  The default is <Symbol Role="Variable">dcelocal</Symbol><Filename>/var/adm/dfs/cache</Filename>.
</Para>
<Para RevisionFlag="Changed">Do not combine this option with the <Option>memcache</Option> option, which is used for
memory caching.  With memory caching, the <Option>cachedir</Option> option, like the
second field of the <Filename>CacheInfo</Filename> file, is ignored.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term RevisionFlag="Changed"><Option>mountdir</Option> <Symbol Role="Variable">DFS_mount_directory</Symbol></Term>
<ListItem>
<Para RevisionFlag="Changed">Names the local disk directory where the DCE global namespace is to be mounted.
This value overrides the default, which must be specified in the first field of
the <Filename>CacheInfo</Filename> file.  The default for a machine with a disk is the global
namespace designation (<Filename>/...</Filename>); if <Filename>/...</Filename> is not used, symbolic links
to the global namespace will not work.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term RevisionFlag="Changed"><Option>rootcell</Option> <Symbol Role="Variable">root_cell</Symbol></Term>
<ListItem>
<Para RevisionFlag="Changed">Names the cell that contains the root fileset.  This option is generally used
for testing purposes only.
<!-- .cS-->
<!-- Use this option only with a DCE diskless machine.-->
<!-- .cE-->
<?sml-break></Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term RevisionFlag="Changed"><Option>settime</Option></Term>
<ListItem>
<Para RevisionFlag="Changed">Causes the local machine to select a random server machine in the local cell to
use as the source of the correct time.  If this option is specified, the local
machine selects a server machine and checks the time on that machine every 10
minutes.  If the time on the local machine differs by more than 2 seconds from
the time on the selected server machine, the local machine adjusts its time to
match that of the server machine.
</Para>
<Para RevisionFlag="Changed">For machines running the DCE Distributed Time Service (DTS) or the Network Time
Protocol (NTP), it is recommended that the <Option>settime</Option> option be omitted to
prevent the machine from selecting and using two different time standards at
once.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term RevisionFlag="Changed"><Option>mainprocs</Option> <Symbol Role="Variable">number_of_background_daemons</Symbol></Term>
<ListItem>
<Para RevisionFlag="Changed">Specifies the number of background daemons to run on the machine.  These daemons
improve efficiency by performing prefetching and background writing of saved
data.  The default is two.
</Para>
<Para RevisionFlag="Changed">Increase the number of background daemons if the machine serves more than five
users.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term RevisionFlag="Changed"><Option>tokenprocs</Option> <Symbol Role="Variable">number_of_token_daemons</Symbol></Term>
<ListItem>
<Para RevisionFlag="Changed">Specifies the number of background daemons dedicated to servicing token
revocation RPC requests from File Exporters.  The default is two. (Token daemons
run in addition to the background daemons associated with the <Option>mainprocs</Option>
option.)
</Para>
<Para RevisionFlag="Changed">Increase the number of token daemons if users on this machine interact with
many File Server machines.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term RevisionFlag="Changed"><Option>ioprocs</Option> <Symbol Role="Variable">number_of_I/O_background_daemons</Symbol></Term>
<ListItem>
<Para><Replaceable RevisionFlag="Changed">On a machine running the AIX operating system</Replaceable>, specifies the number of
background I/O daemons performing I/O operations.  I/O daemons move data from
disk to memory, and vice versa.  The default is five.
</Para>
<Para RevisionFlag="Changed">On a machine running AIX, increase the number of I/O daemons if many users use
the machine. <Replaceable>Use this option only on a machine running AIX.</Replaceable> Because no
I/O daemons are used on a machine not running AIX, the option is ignored if it
is used on a machine not running AIX.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term RevisionFlag="Changed"><Option>memcache</Option></Term>
<ListItem>
<Para RevisionFlag="Changed">Causes <Command>dfsd</Command> to initialize a memory cache rather than a disk cache.  If
this option is provided, space in memory is allocated for the cache; no disk
space is used, even if it is available.
</Para>
<Para RevisionFlag="Changed">Do not combine this option with the <Option>files</Option> option (which is used for
machines that use disk caching).  Also, do not combine this option with the
<Option>cachedir</Option> option; with memory caching, the <Option>cachedir</Option> option, 
like the second field of the <Filename>CacheInfo</Filename> file, is ignored.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term RevisionFlag="Changed"><Option>dcache</Option> <Symbol Role="Variable">number_of_entries</Symbol></Term>
<ListItem>
<Para RevisionFlag="Changed">Sets the number of dcache entries in memory; dcache entries store information
about cache chunks.
</Para>
<Para RevisionFlag="Changed">For a disk cache, the <Symbol Role="Variable">dcelocal</Symbol><Filename>/var/adm/dfs/cache/CacheItems</Filename> file
contains one entry for each V file.  By default, 100 entries from the
<Filename>CacheItems</Filename> file are duplicated in machine memory; the <Option>dcache</Option>
option overrides the default.
</Para>
<Para RevisionFlag="Changed">For a memory cache, there is no <Filename>CacheItems</Filename> file; one dcache entry exists
for each cache chunk.  The Cache Manager determines the number of dcache entries
(cache chunks) by dividing the cache size by the chunk size; the <Option>dcache</Option>
option sets the number of cache chunks.  Do not combine this option with the
<Option>blocks</Option> option.
</Para>
<Para RevisionFlag="Changed">Use of this option with a disk cache is not necessary because it increases
performance only marginally.  It is not recommended with a memory cache because
it requires the issuer to perform additional calculations.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term RevisionFlag="Changed"><Option>chunksize</Option> <Symbol Role="Variable">chunk_exponent</Symbol></Term>
<ListItem>
<Para RevisionFlag="Changed">Sets the size of each cache chunk.  Provide an integer between 13 and 18 to be
used as an exponent of 2.  This value overrides the default chunk size, which
is 64 kilobytes (2<Superscript><?sml-size -4>16<?sml-size 0></Superscript>) for a disk cache and 8 kilobytes
(2<Superscript><?sml-size -4>13<?sml-size 0></Superscript>) for a memory cache.  A value less than 13 or greater than 18
sets the chunk size to the appropriate default for the type of cache in use.
The unit of measure for chunk size is always bytes.
</Para>
<Para RevisionFlag="Changed">It is not recommended that you use this option with the <Option>dcache</Option> option
for a memory cache.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term RevisionFlag="Changed"><Option>namecachesize</Option> <Symbol Role="Variable">number_of_name_cache_entries</Symbol></Term>
<ListItem>
<Para RevisionFlag="Changed">Sets the number of entries allocated for the Cache Manager's name lookup cache.
Provide an integer greater than 0 (zero); the default number of name cache
entries is <Literal>256</Literal>.
</Para>
<Para RevisionFlag="Changed">The name lookup cache stores the results obtained from remote directory lookup
requests to DFS servers, which allows subsequent lookup requests for the same
file or directory to be satisfied on the local DFS client rather than on the
remote DFS server.  Because name cache entries are recycled when the name
lookup cache limit is reached, the ability to satisfy the request locally
depends upon the size of the name lookup cache.
<?og-ChangeStart enh, 13605, R1.2.2, Security enhancements"></Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term RevisionFlag="Changed"><Option>initiallocalprotectlevel</Option> <Symbol Role="Variable">level</Symbol></Term>
<ListItem>
<Para RevisionFlag="Changed">Specifies the initial DCE RPC authentication 
level for communications between the Cache Manager and File Servers
within the same cell. The <Symbol Role="Variable">level</Symbol> is set either as an integer value between 0 and 6, the complete string defining the authentication level, or an abbreviation of that string. For a description of the various DCE RPC levels, see the Description section.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term RevisionFlag="Changed"><Option>minlocalprotectlevel</Option> <Symbol Role="Variable">level</Symbol></Term>
<ListItem>
<Para RevisionFlag="Changed">Specifies the minimum acceptable DCE RPC authentication level for
communications between the Cache Manager and File Servers within the
same cell. The <Symbol Role="Variable">level</Symbol> is set either as an integer value between 0 and 6, the complete string defining the authentication level, or an abbreviation of that string. For a description of the various DCE RPC levels, see the
Description section.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term RevisionFlag="Changed"><Option>initialremoteprotectlevel</Option> <Symbol Role="Variable">level</Symbol></Term>
<ListItem>
<Para RevisionFlag="Changed">Specifies the initial DCE RPC authentication level for 
communications between the Cache Manager and File Servers within foreign cells. The <Symbol Role="Variable">level</Symbol> is set either as an integer value between 0 and 6, the complete string defining the authentication level, or an abbreviation of that string. For a description of the various DCE RPC levels, see the Description
section.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term RevisionFlag="Changed"><Option>minremoteprotectlevel</Option> <Symbol Role="Variable">level</Symbol></Term>
<ListItem>
<Para RevisionFlag="Changed">Specifies the minimum acceptable DCE RPC authentication level for
communications between the Cache Manager and File Servers within
foreign cells. The <Symbol Role="Variable">level</Symbol> is set either as an integer value between 0 and 6, the complete string defining the authentication level, or an abbreviation of that string. For a description of the various DCE RPC levels, see the
Description section.
<?og-ChangeEnd enh, 13605, R1.2.2, Security enhancements"></Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Option>verbose</Option></Term>
<ListItem>
<Para>Directs <Command>dfsd</Command> to produce a more detailed trace of its activities than it
does by default.  The trace is displayed on standard output (<Literal>stdout</Literal>)
unless it is directed elsewhere.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Option>debug</Option></Term>
<ListItem>
<Para>Causes <Command>dfsd</Command> to produce a highly detailed trace of its activities, which
can be useful for debugging purposes.  The trace is displayed on standard output
(<Literal>stdout</Literal>) unless it is directed elsewhere.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Option>help</Option></Term>
<ListItem>
<Para>Prints the online help for this command.  All other valid options specified with
this option are ignored.
</Para>
<Para>The <Command>help</Command> and <Literal>apropos</Literal> commands available with all command suites are
also available with <Command>dfsd</Command>.  See the <Literal>bos_help(8dfs)</Literal> and 
<Literal>bos_apropos(8dfs)</Literal> reference pages for examples using these commands.
</Para>
</ListItem>
</VarListEntry>
</VariableList>
</RefSect1>
<RefSect1>
<Title>DESCRIPTION</Title>
<Para><IndexTerm Id="DFSAGR.MAN111.indx.3">
<Primary><Command>dfsd</Command> process</Primary>
<Secondary>functions</Secondary>
</IndexTerm>
<!-- These index entries removed because they are not in the master index.-->
</Para>
<Para>The <Command>dfsd</Command> process initializes the DFS Cache Manager on a client machine
according to the information specified with the options described previously.
It must be run on all DFS client machines.  It is usually added to the proper
start-up file (<Filename>/etc/rc</Filename> or its equivalent) rather than typed at the
command shell prompt. (The <Command>dfsbind</Command> process must be run before the
<Command>dfsd</Command> process in a start-up file.) The binary file for the <Command>dfsd</Command>
process resides in <Symbol Role="Variable">dcelocal</Symbol><Filename>/bin/dfsd</Filename>.
</Para>
<Para>Specifically, the <Command>dfsd</Command> process does the following:
</Para>
<ItemizedList>
<ListItem>
<Para>Transfers information about cell membership to kernel memory.  This information
can be changed only by rebooting and running <Command>dfsd</Command>.
</Para>
</ListItem>
<ListItem>
<Para>Determines if the cache is on the local disk or in machine memory.  A disk cache
is used unless the <Option>memcache</Option> option is provided.  If the <Option>memcache</Option>
option is used, no disk space is used, even if it is available; the Cache
Manager maintains all cached data and cache-related information in memory.
</Para>
</ListItem>
<ListItem>
<Para>Defines the name of the local disk directory devoted to a disk cache.  The
second field in the <Filename>CacheInfo</Filename> file specifies the default directory.  If
necessary, <Command>dfsd</Command> creates the directory, provided its parent directory
exists.  Any directory that formerly served as the disk cache is left on the
disk.
</Para>
</ListItem>
<ListItem>
<Para>Sets the &ensp;size of &ensp;the cache.  The third field &ensp;in the &ensp;<Filename>CacheInfo</Filename> file
specifies the default cache size in kilobytes.
</Para>
<Para>For a disk cache, the value in the <Filename>CacheInfo</Filename> file is an upper limit that
can be increased only with the <Option>blocks</Option> option; it cannot be increased
with the other options available with the <Command>dfsd</Command> process.  For a memory
cache, the <Option>dcache</Option> option alone or in combination with the
<Option>chunksize</Option> option overrides the cache size specified in the
<Filename>CacheInfo</Filename> file; these combinations are not recommended.
</Para>
<Para>After initialization, use the <Command>cm setcachesize</Command> command to change the size
of a disk cache without rebooting.  The value set with the <Command>cm setcachesize</Command>
command is overridden the next time the machine is rebooted and <Command>dfsd</Command> is
run.  The <Command>cm setcachesize</Command> command does not work for memory caches; the
machine must be rebooted. (The <Command>cm getcachesize</Command> command can be used to
display the current size of the cache, the amount in use, and the type of
cache&mdash;disk or memory.)
</Para>
</ListItem>
<ListItem>
<Para>Sets the size of each chunk of data in the cache and, by implication, the
amount of data the Cache Manager requests at one time from the File Exporter.
For a memory cache, if the total cache size divided by the chunk size leaves
a remainder, <Command>dfsd</Command> rounds the number down, resulting in a slightly smaller
cache.
</Para>
</ListItem>
<ListItem>
<Para>Sets the number of dcache entries allocated in machine memory for storing
information about the cache chunks in a disk cache.
</Para>
</ListItem>
<ListItem>
<Para>Sets the &ensp;number of empty V files &ensp;created in the &ensp;cache directory &ensp;for a disk
cache. (A memory cache cannot use V files because it does not use disk storage;
the number of chunks is instead equal to the number of dcache entries.)
</Para>
</ListItem>
<ListItem>
<Para>Sets the number of <Command>stat</Command> entries in machine memory for caching status
information about cached DFS files.
</Para>
</ListItem>
<ListItem>
<Para>Sets the number of entries in the name lookup cache for storing the results of
remote directory lookups.
</Para>
</ListItem>
<ListItem>
<Para>Specifies the directory on the machine's local disk where DFS is mounted.  The
first field in the <Filename>CacheInfo</Filename> file specifies the default directory.
<!-- .cS-->
<!-- .LI-->
<!-- Specifies the read/write fileset that corresponds to the root of the DFS file-->
<!-- tree for a diskless machine.  For a diskless machine, use the \*L-rootfileset\*O-->
<!-- option to specify the fileset that serves as the top-level directory.  This-->
<!-- overrides the default specified in the first field of the \*LCacheInfo\*O file.-->
<!-- .LI-->
<!-- Specifies the name of the cell containing the root fileset.  For a DCE diskless-->
<!-- machine, use the \%\*L-rootcell\*O option to specify the name of the cell that-->
<!-- contains the root fileset.-->
<!-- .cE-->
</Para>
</ListItem>
<ListItem>
<Para RevisionFlag="Changed">Selects a random server machine in the local cell as the source of the correct
time if the <Option>settime</Option> option is provided.
<?og-ChangeStart enh, 13605, R1.2.2, Security enhancements"></Para>
</ListItem>
<ListItem>
<Para RevisionFlag="Changed">Sets the initial RPC authentication level and minimum RPC authentication bound for communications between the Cache Manager and File Servers.
<?og-ChangeEnd enh, 13605, R1.2.2, Security enhancements"></Para>
</ListItem>
</ItemizedList>
<Para>In addition to setting cache configuration parameters, <Command>dfsd</Command> also starts
the following types of daemons.  On most system types, these daemons appear as
nameless entries in the output of the <Literal>ps</Literal> command.
</Para>
<ItemizedList>
<ListItem>
<Para>One or more maintenance daemons, which perform routine periodic maintenance
tasks such as the following:
</Para>
<ItemizedList>
<ListItem>
<Para>Performing garbage collection
</Para>
</ListItem>
<ListItem>
<Para>Synchronizing files
</Para>
</ListItem>
<ListItem>
<Para>Probing processes on File Server machines every few minutes
</Para>
</ListItem>
<ListItem>
<Para>Refreshing information about filesets referenced by the Cache Manager once per
hour
</Para>
</ListItem>
<ListItem>
<Para>Keeping the &ensp;machine's clock &ensp;synchronized with the &ensp;clock of the chosen server 
machine (if the <Option>settime</Option> option is included with the <Command>dfsd</Command> command)
</Para>
</ListItem>
</ItemizedList>
</ListItem>
<ListItem>
<Para>One or more background daemons, which improve performance by performing delayed
writing of updated data.  The default number of background daemons is two, which
is usually sufficient to handle up to five simultaneous users of a machine.
Use the <Option>mainprocs</Option> option to increase the number of background daemons
if the machine serves more than five users.
</Para>
</ListItem>
<ListItem>
<Para>One or more token daemons, which handle token revocation RPC requests from the
File Exporters on File Server machines (for example, by writing modified data
back to the File Server machines).  The default number of token daemons is two.
Use the <Option>tokenprocs</Option> option to increase this number if the machine
interacts with many File Server machines from different cells.
</Para>
</ListItem>
<ListItem>
<Para><Replaceable>On a machine running the AIX operating system</Replaceable>, one or more I/O daemons,
which move data from disk to memory and from memory to disk.  The default
number of I/O daemons is five.  Use the <Option>ioprocs</Option> option to increase the
number of I/O daemons performing I/O requests if the number of users working
on the machine increases and the machine begins to experience performance
problems.
</Para>
<Para><Replaceable>Use the </Replaceable><Option>ioprocs</Option><Replaceable> option only on a machine running AIX.</Replaceable> No I/O
daemons are used on a machine not running AIX; the option is ignored if it is
used on such a machine.
</Para>
</ListItem>
</ItemizedList>
<Para RevisionFlag="Changed">The default number of daemons is ten (one maintenance daemon, two background
daemons, two token daemons, and five I/O daemons).  You can alter only the
number of background daemons, token daemons, and I/O daemons; <Command>dfsd</Command>
initializes additional maintenance daemons as necessary.
<IndexTerm Id="DFSAGR.MAN111.indx.4" SpanEnd="DFSAGR.MAN111.indx.3"><?sml-break><?og-ChangeStart enh, 13605, R1.2.2, Security enhancements"></Para>
<RefSect2>
<Title RevisionFlag="Changed">RPC Security Settings</Title>
<Para RevisionFlag="Changed">The <Command>dfsd</Command> command sets the DCE RPC security
level for RPCs sent between a Cache Manager and DFS File Servers. The command sets two levels: an initial DCE RPC security level used as
a starting point in security level negotiations between the Cache
Manager and a File Server, and the minimum DCE RPC security level that the
Cache Manager will accept for such communications. Two sets of these
levels are maintained: One set specifies the security levels for
communications with File Servers within the local cell, and the other
set specifies the security levels for communications with File Servers
within foreign cells. Both sets of security levels can be adjusted 
through the <Command>cm setprotectlevels</Command> command.
</Para>
<Para RevisionFlag="Changed">In operation, the Cache Manager and File Server interact to arrive at
a mutually acceptable authentication level for communications. The
negotiation starts with an RPC that uses the initial authentication level
sent from the Cache Manager to the File Server.  If the initial
authentication level is outside the minimum or maximum bounds set at
the File Server, the File Server returns a response to the Cache
Manager specifying that the authentication level is either too low or too
high.  The Cache Manager then decreases or increases its
authentication level accordingly and retries the RPC.  This process
continues until the Cache Manager either adjusts its RPCs to an
acceptable security level or the File Server requests a security level
below the minimum set at the Cache Manager (causing the Cache Manager
to refuse communications with the File Server). Once the Cache Manager
and File Server have negotiated a security level, the Cache Manager
stores this information so that it does not need to renegotiate this
level for further communications with the File Server.
</Para>
<Para RevisionFlag="Changed">The Cache Manager and <Command>fxd</Command> default settings are such that communications occur at the packet integrity authentication level. 
</Para>
<Para RevisionFlag="Changed">In addition to a general pair of upper and lower bounds 
for all communications between the File Server and Cache Manager, administrators can also set advisory bounds on a per-fileset basis.  At
present, these advisory levels serve only to bias the Cache Manager's
selection of an initial authentication level (they may be enforced in a future version of DFS).  Advisory bounds are set
through the <Command>fts setprotectlevels</Command> command and are stored in the FLDB record for that fileset.
</Para>
<Para RevisionFlag="Changed">Note that the use of this command does not preclude communications with 
File Servers running earlier versions of DFS.  
</Para>
<Para RevisionFlag="Changed">The various authentication levels are set by specifying either an integer value between
0 and 6, a complete string specifying the authentication level, or an abbreviation of that string as the <Symbol Role="Variable">level</Symbol> argument for the various command options.  The 
following lists the various authentication levels:
</Para>
<ItemizedList>
<ListItem>
<Para><Literal RevisionFlag="Changed">rpc_protect_level_default</Literal> or <Literal RevisionFlag="Changed">default</Literal> or <Literal RevisionFlag="Changed">0</Literal>: Use the DCE default authentication level.
</Para>
</ListItem>
<ListItem>
<Para><Literal RevisionFlag="Changed">rpc_protect_level_none</Literal> or <Literal RevisionFlag="Changed">none</Literal> or <Literal RevisionFlag="Changed">1</Literal>: Perform no authentication.
</Para>
</ListItem>
<ListItem>
<Para><Literal RevisionFlag="Changed">rpc_protect_level_connect</Literal> or <Literal RevisionFlag="Changed">connect</Literal> or <Literal RevisionFlag="Changed">2</Literal>: Authenticate only when the Cache Manager establishes a connection with the File Server.
</Para>
</ListItem>
<ListItem>
<Para><Literal RevisionFlag="Changed">rpc_protect_level_call</Literal> or <Literal RevisionFlag="Changed">call</Literal> or <Literal RevisionFlag="Changed">3</Literal>: Authenticate only at the beginning of each RPC received.
</Para>
</ListItem>
<ListItem>
<Para><Literal RevisionFlag="Changed">rpc_protect_level_pkt</Literal> or <Literal RevisionFlag="Changed">pkt</Literal> or <Literal RevisionFlag="Changed">4</Literal>: Ensure that all data received is from the expected host.
</Para>
</ListItem>
<ListItem>
<Para><Literal RevisionFlag="Changed">rpc_protect_level_pkt_integrity</Literal> or <Literal RevisionFlag="Changed">pkt_integrity</Literal> or <Literal RevisionFlag="Changed">5</Literal>: Authenticate and verify that none of the
data transferred has been modified.
</Para>
</ListItem>
<ListItem>
<Para><Literal RevisionFlag="Changed">rpc_protect_level_pkt_privacy</Literal> or <Literal RevisionFlag="Changed">pkt_privacy</Literal> or <Literal RevisionFlag="Changed">6</Literal>: Perform authentication as specified by all of the previous levels and also encrypt each RPC argument value.
</Para>
</ListItem>
</ItemizedList>
<Para RevisionFlag="Changed">Note that there is a trade-off between selecting higher security and 
performance.  The higher levels of security require more overhead and 
increase the response time in file operations with File Servers.
<?og-ChangeEnd enh, 13605, R1.2.2, Security enhancements"></Para>
</RefSect2>
<RefSect2>
<Title>Privileges Required</Title>
<Para>The issuer must be <Literal>root</Literal> on the local machine.
<?sml-break><?sml-need 1.5i></Para>
</RefSect2>
</RefSect1>
<RefSect1>
<Title>EXAMPLES</Title>
<Para>It is recommended that the <Command>dfsd</Command> process be included in the proper
initialization file (<Filename>/etc/rc</Filename> or its equivalent) rather than typed at
the command shell prompt.  The <Command>dfsbind</Command> process must be run before the
<Command>dfsd</Command> process in a start-up file.  For most disk caches, the following
form is appropriate in the initialization file:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput><Symbol Role="Variable">dcelocal</Symbol>/bin/dfsd
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The following line in an initialization file is appropriate when enabling a
machine to serve more than five users:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput><Symbol Role="Variable">dcelocal</Symbol><Literal>/bin/dfsd -mainprocs 4
</Literal></UserInput></ProgramListing></Para>
</InformalExample>
<Para>The following line in an initialization file initializes a memory cache and
sets the chunk size to 16 kilobytes (2<Superscript><?sml-size -4>14<?sml-size 0></Superscript>):
</Para>
<InformalExample>
<Para><ProgramListing><UserInput><Symbol Role="Variable">dcelocal</Symbol><Literal>/bin/dfsd -memcache -chunksize 14
</Literal></UserInput></ProgramListing></Para>
</InformalExample>
</RefSect1>
<RefSect1>
<Title>RELATED INFORMATION</Title>
<Para RevisionFlag="Changed"><!--no-op:  l-->
Commands:
<Literal>cm&ensp;getcachesize(8dfs)</Literal>,
<?og-ChangeStart enh, 13605, R1.2.2, Security enhancements"><Literal>cm&ensp;getprotectlevels(8dfs)</Literal>,
<?og-ChangeEnd enh, 13605, R1.2.2, Security enhancements"><Literal>cm&ensp;setcachesize(8dfs)</Literal>,
<?og-ChangeStart enh, 13605, R1.2.2, Security enhancements"><Literal>cm&ensp;setprotectlevels(8dfs)</Literal>,
<?og-ChangeEnd enh, 13605, R1.2.2, Security enhancements"><Literal>dfsbind(8dfs)</Literal>,
<?og-ChangeStart enh, 13605, R1.2.2, Security enhancements"><Command>fts setprotectlevels</Command>.
<?og-ChangeEnd enh, 13605, R1.2.2, Security enhancements">
<!--no-op:  b-->
</Para>
<Para><!--no-op:  l-->
Files:
<Literal>CacheInfo(4dfs)</Literal>,
<Literal>CacheItems(4dfs)</Literal>,
<Literal>FilesetItems(4dfs)</Literal>,
<Literal>Vn(4dfs)</Literal>.
<!--no-op:  b-->
<IndexTerm Id="DFSAGR.MAN111.indx.5" SpanEnd="DFSAGR.MAN111.indx.1"><IndexTerm Id="DFSAGR.MAN111.indx.6" SpanEnd="DFSAGR.MAN111.indx.2">
</Para>
</RefSect1>
<!--+ 10/19/96 18:43:16
    | tagMorph:  $Id: dfsd.8dfs,v 1.1.2.5 1996/11/07 18:49:46 weir Exp $
    | tagMorph library:  $Id: dfsd.8dfs,v 1.1.2.5 1996/11/07 18:49:46 weir Exp $
    | sml-to-docbook:  1.23
    +-->
</RefEntry>
