<!--
# @OSF_COPYRIGHT@
# 
# 
# HISTORY
# $Log: cachemgr.sgm,v $
# Revision 1.1.2.7  1996/12/16  17:12:16  wardr
# 	{edit,R1.2.2}
# 	Last minute format fixes
# 	[1996/12/16  17:11:56  wardr]
#
# Revision 1.1.2.6  1996/12/15  23:01:48  wardr
# 	{edit,R1.2.2}
# 	[D[DFiformatting problems before penultimate build
# 	[1996/12/15  23:00:08  wardr]
# 
# Revision 1.1.2.5  1996/12/14  23:14:08  wardr
# 	{edit,R1.2.2}
# 	Fixed figure problems
# 	[1996/12/14  23:12:25  wardr]
# 
# Revision 1.1.2.4  1996/11/06  18:46:58  weir
# 	Cleaned up history
# 	[1996/11/06  18:45:49  weir]
# 
# Revision 1.1.2.3  1996/10/28  17:33:43  carrig
# 	{enh,R1.2.2}
# 	Ready for editor
# 	[1996/10/28  17:19:29  carrig]
# 
# Revision 1.1.2.2  1996/10/24  20:10:17  carrig
# 	{enh,R1.2.2}
# 	Fixed tables
# 	[1996/10/24  20:08:17  carrig]
# 
# Revision 1.1.2.1  1996/10/22  20:42:38  wardr
# 	{edit,R1.2.2}
# 	Initial checkin after sgml conversion
# 	[1996/10/22  20:41:00  wardr]
# 
# Revision 1.1.1.2  1996/10/22  20:41:00  wardr
# 	{edit,R1.2.2}
# 	Initial checkin after sgml conversion
# 
# $EndLog$
-->
<!---->
<!-- Fragment document type declaration subset:
ArborText, Inc., 1988-1993, v.4001
<!DOCTYPE Book PUBLIC "-//Davenport//DTD DocBook V2.4//EN" [
]>
-->
<!---->
<!-- COPYRIGHT NOTICE-->
<!-- Copyright (c) 1990, 1991, 1992, 1993 Open Software Foundation, Inc.-->
<!-- ALL RIGHTS RESERVED (DCE).  See the file named COPYRIGHT.DCE in the-->
<!-- src directory for the full copyright text.-->
<!---->
<!---->
<!-- HISTORY-->
<!-- Revision 1.1.10.4  1996/09/16  19:59:13  wfl-->
<!-- 	Added editorial changes-->
<!-- 	[1996/09/16  19:58:41  wfl]-->
<!---->
<!-- Revision 1.1.10.3  1996/08/20  13:21:10  wfl-->
<!-- 	{enh,13605,R1.2.2}-->
<!-- 	Security enhancement-->
<!-- 	[1996/08/20  13:17:23  wfl]-->
<!-- -->
<!-- Revision 1.1.10.2  1996/07/16  20:03:07  wfl-->
<!-- 	{enh, 13566, R1.2.2}-->
<!-- 	Added multihomed servers-->
<!-- 	[1996/07/16  20:01:29  wfl]-->
<!-- -->
<!-- Revision 1.1.10.1  1996/05/14  19:52:12  wardr-->
<!-- 	{enh,R1.2.2}-->
<!-- 	Removed changebars-->
<!-- 	[1996/05/14  19:51:04  wardr]-->
<!-- -->
<!-- Revision 1.1.8.4  1995/12/29  17:25:44  wfl-->
<!-- 	{edit, R1.2.1}-->
<!-- 	made copy edits-->
<!-- 	[1995/12/29  17:24:41  wfl]-->
<!-- -->
<!-- Revision 1.1.8.3  1995/10/04  15:56:43  wfl-->
<!-- 	{def, 13140, R1.2.1}-->
<!-- 	Fixed quotes in change markers-->
<!-- 	[1995/10/04  15:56:15  wfl]-->
<!-- -->
<!-- Revision 1.1.8.2  1995/09/15  20:01:11  wfl-->
<!-- 	{enh, 13093, R1.2.1}-->
<!-- 	Add description of server preferences-->
<!-- 	[1995/09/15  20:00:31  wfl]-->
<!-- -->
<!-- Revision 1.1.8.1  1995/08/28  20:52:17  jeff-->
<!-- 	Testing ODE some more...-->
<!-- 	[1995/08/28  20:52:00  jeff]-->
<!-- -->
<!-- Revision 1.1.6.16  1995/07/24  18:42:37  weir-->
<!-- 	Prentice-Hall corrections-->
<!-- 	[1995/07/24  18:42:00  weir]-->
<!-- -->
<!-- Revision 1.1.6.14  1994/08/22  15:24:39  jeff-->
<!-- 	Small editorial change.-->
<!-- 	[1994/08/22  15:23:24  jeff]-->
<!-- -->
<!-- Revision 1.1.6.13  1994/08/15  13:10:01  jeff-->
<!-- 	Editorial change.-->
<!-- 	[1994/08/15  13:09:50  jeff]-->
<!-- -->
<!-- Revision 1.1.6.12  1994/05/17  14:53:50  jeff-->
<!-- 	Correcting small formatting errors.-->
<!-- 	[1994/05/17  14:50:02  jeff]-->
<!-- -->
<!-- Revision 1.1.6.11  1994/05/10  20:11:42  jeff-->
<!-- 	Fix formatting error.-->
<!-- 	[1994/05/10  20:10:07  jeff]-->
<!-- -->
<!-- Revision 1.1.6.10  1994/04/28  22:22:15  jeff-->
<!-- 	{defect, 10439, R1.1}-->
<!-- 	Correct cross-references for reorganization of DFS documentation.-->
<!-- 	[1994/04/28  22:17:11  jeff]-->
<!-- -->
<!-- Revision 1.1.6.9  1994/04/23  19:59:53  jeff-->
<!-- 	{defect, 10440, R1.1}-->
<!-- 	Incorporate user information into admin documentation; make simple-->
<!-- 	editorial changes as necessary.-->
<!-- 	[1994/04/23  19:50:33  jeff]-->
<!-- -->
<!-- Revision 1.1.6.8  1994/04/20  21:08:19  jeff-->
<!-- 	{enh, 10306, R1.1}-->
<!-- 	Confirm/correct removal of diskless references.-->
<!-- 	[1994/04/20  21:04:59  jeff]-->
<!-- -->
<!-- Revision 1.1.6.7  1994/04/07  19:56:33  rom-->
<!-- 	{enh, 10306, R1.1}-->
<!-- 	Remove diskless documentation from the DCE doc set.-->
<!-- 	[1994/04/07  15:31:48  rom]-->
<!-- -->
<!-- Revision 1.1.6.6  1993/10/27  20:13:19  rom-->
<!-- 	Remove two superfluous ending page-range index entries.-->
<!-- 	[1993/10/27  18:20:46  rom]-->
<!-- -->
<!-- Revision 1.1.6.5  1993/10/13  20:51:46  tmw-->
<!-- 	Added index entries for second version of master index.-->
<!-- 	[1993/10/13  20:50:33  tmw]-->
<!-- -->
<!-- Revision 1.1.6.4  1993/08/17  17:01:29  jeff-->
<!-- 	Small editorial fix to previous submission:  Change title of a section.-->
<!-- 	[1993/08/17  17:00:12  jeff]-->
<!-- -->
<!-- Revision 1.1.6.3  1993/08/11  00:36:10  jeff-->
<!-- 	Changed versions for defect fixes from 1.0.2A to 1.0.3.-->
<!-- 	[1993/08/11  00:33:33  jeff]-->
<!-- -->
<!-- Revision 1.1.6.2  1993/07/30  18:02:58  kdu-->
<!-- 	{def,8386,R1.0.3}-->
<!-- 	Incorporate OSF editorial comments into DFS Admin Guide and related-->
<!-- 	documentation.-->
<!-- 	[1993/07/30  18:01:21  kdu]-->
<!-- -->
<!-- Revision 1.1.4.10  1993/02/26  00:35:38  jeff-->
<!-- 	Defect fix for 7219, review comments.-->
<!-- 	[1993/02/26  00:35:05  jeff]-->
<!-- -->
<!-- Revision 1.1.4.9  1993/02/19  15:54:44  jeff-->
<!-- 	Additional comments.-->
<!-- 	[1993/02/19  15:54:19  jeff]-->
<!-- -->
<!-- Revision 1.1.4.8  1993/02/16  12:59:38  jeff-->
<!-- 	Fix for defect 7219, changes throughout.-->
<!-- 	[1993/02/16  12:58:58  jeff]-->
<!-- -->
<!-- Revision 1.1.4.7  1993/01/28  19:06:08  dbelch-->
<!-- 	Embedding copyright notice-->
<!-- 	[1993/01/28  18:30:07  dbelch]-->
<!-- -->
<!-- Revision 1.1.4.6  1993/01/27  21:09:56  buckler-->
<!-- 	Fixed cross-refs and figure calls for new book org-->
<!-- 	[1993/01/27  21:07:01  buckler]-->
<!-- -->
<!-- Revision 1.1.4.5  1992/12/23  21:56:43  jeff-->
<!-- 	Fix for defect 6557, correct how Cache Manager handles-->
<!-- 	unstored data.-->
<!-- 	[1992/12/23  21:55:43  jeff]-->
<!-- -->
<!-- Revision 1.1.4.4  1992/12/06  19:44:44  jeff-->
<!-- 	Fix for defect 5125, augment -cachedir description, and-->
<!-- 	related editorial changes.-->
<!-- 	[1992/12/06  19:44:01  jeff]-->
<!-- -->
<!-- Revision 1.1.4.3  1992/11/14  18:12:02  jeff-->
<!-- 	Fix for defect 6062, remove cm debug command and related-->
<!-- 	DFSLog file.-->
<!-- 	[1992/11/14  18:10:32  jeff]-->
<!-- -->
<!-- Revision 1.1.4.2  1992/08/26  12:10:43  weir-->
<!-- 	Moved to dce1.0.2doc-->
<!-- 	[1992/08/26  12:04:35  weir]-->
<!-- -->
<!-- Revision 1.1.2.4  1992/07/02  15:40:23  jeff-->
<!-- 	ACL permission and other changes.-->
<!-- 	[1992/07/02  14:52:03  jeff]-->
<!-- -->
<!-- Revision 1.1.2.3  1992/06/09  21:11:20  jeff-->
<!-- 	Included IBM 1.0.1 review comments.-->
<!-- 	[1992/06/09  21:07:26  jeff]-->
<!-- -->
<!-- Revision 1.1.2.2  1992/05/12  16:16:08  jeff-->
<!-- 	Verified and/or modified italics and other editorial-->
<!-- 	aspects of the file.-->
<!-- 	[1992/05/12  14:38:02  jeff]-->
<!-- -->
<!-- Revision 1.1  1992/01/29  16:14:54  damon-->
<!-- 	Initial revision-->
<!-- -->
<!---->
<!-- (c) Copyright 1991, Open Software Foundation, Inc.  ALL RIGHTS RESERVED-->
<!--no-op:  Copyright (C) 1989, 1991, Transarc Corporation-->
<!--no-op:  The Gulf Tower-->
<!--no-op:  707 Grant Street-->
<!--no-op:  Pittsburgh, PA  15219-->
<!-- CHANGED-->
<!-- 12-10-91:  Removed bolding from setuid in headings of Sections 8.7,-->
<!--            8.7.1, and 8.7.2.-->
<!-- 12-10-91:  Removed par break and changed single quote to apostrophe in-->
<!--            third bullet of Section 8.7.1 on page 8-11.-->
<!-- 12-10-91:  Removed par break and changed single quote to apostrophe in-->
<!--            third bullet of Section 8.8.1 on page 8-13.-->
<!-- END CHANGED-->
<!-- -->
<Chapter Id="DFSAGR.CCHMG.div.1">
<Title>Configuring the Cache Manager</Title>
<IndexTerm Id="DFSAGR.CCHMG.indx.1">
<Primary>Cache Manager</Primary>
<Secondary>configuring</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.CCHMG.indx.2">
<Primary>Cache Manager</Primary>
<Secondary>about</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.CCHMG.indx.3">
<Primary>client machines</Primary>
<Secondary>requirements</Secondary>
</IndexTerm>
<Para>This chapter describes the configuration of any machine that is to serve as a
DFS client machine.  All DFS client machines must do the following:
</Para>
<ItemizedList>
<ListItem>
<Para>Run the set of modifications known as the <Symbol Role="Variable">Cache Manager</Symbol> in the kernel.
The Cache Manager enables the client to access DFS.  You can control several
aspects of Cache Manager and client performance by configuring the Cache
Manager as described in this chapter.
</Para>
</ListItem>
<ListItem>
<Para>Run the <Command>dfsd</Command> process, which initializes the Cache Manager by transferring
DFS configuration information into kernel memory.
</Para>
</ListItem>
<ListItem>
<Para>Run the <Command>dfsbind</Command> process, which resolves CDS pathnames for the Cache
Manager and accesses user authentication information necessary for effective
communications with server machines.
</Para>
</ListItem>
<ListItem>
<Para>Provide local disk space or memory sufficient to house configuration 
information and a cache.
</Para>
</ListItem>
</ItemizedList>
<Sect1 Id="DFSAGR.CCHMG.div.2">
<Title>An Overview of the Cache Manager</Title>
<IndexTerm Id="DFSAGR.CCHMG.indx.4">
<Primary>tokens</Primary>
<Secondary>about</Secondary>
</IndexTerm>
<Para>The Cache Manager fetches and caches files from File Server machines on behalf
of application programs that are running on client machines.  To locate a file 
to be retrieved, it first contacts the Fileset Location Server (FL Server) to 
learn the location of the fileset that houses the file; to retrieve the file, 
it then contacts the File Server machine that houses the file.  The File 
Exporter on the File Server machine delivers the file, which the Cache 
Manager stores in the client machine's cache, which is an area of local disk 
or memory designated for temporary storage.  Once the data is cached locally, 
the Cache Manager can access it as quickly as it can a local file.
</Para>
<Para>The Cache Manager verifies that its cached files match the central copies at
File Server machines by keeping the tokens that the File Exporters send with
the files.  A token acts as the File Exporter's promise to contact the Cache
Manager if the centrally stored copy of a file changes while the Cache Manager
has a cached copy.  If the central copy changes, the File Exporter revokes the
token; the Cache Manager sees that the token is revoked and retrieves the new
version of the file when an application program next requests data from it.
<IndexTerm Id="DFSAGR.CCHMG.indx.5" SpanEnd="DFSAGR.CCHMG.indx.4"></Para>
<Sect2 Id="DFSAGR.CCHMG.div.3">
<Title>Cache Manager Processes</Title>
<IndexTerm Id="DFSAGR.CCHMG.indx.6">
<Primary><Command>dfsd</Command> process</Primary>
<Secondary>about</Secondary>
</IndexTerm>
<Para>The <Command>dfsd</Command> process controls the Cache Manager, which runs in the kernel.
You can add options to the <Symbol Role="Variable">dcelocal</Symbol><Filename>/bin/dfsd</Filename> command and modify
the <Symbol Role="Variable">dcelocal</Symbol><Filename>/etc/CacheInfo</Filename> file on the client machine to customize
DFS cache parameters.
</Para>
<Para>You can control several Cache Manager features with <Command>dfsd</Command> options. 
The <Command>dfsd</Command> process must be invoked at or after system reboot on all 
DFS client machines; it is recommended that the <Command>dfsd</Command> command be 
added to the proper initialization file (<Filename>/etc/rc</Filename> or its equivalent). 
The <Command>dfsbind</Command> process must be run before the <Command>dfsd</Command> process; it 
is recommended that the <Symbol Role="Variable">dcelocal</Symbol><Filename>/bin/dfsbind</Filename> command also be added 
to the proper initialization file.
</Para>
</Sect2>
<Sect2 Id="DFSAGR.CCHMG.div.4">
<Title>Cache Manager Files</Title>
<IndexTerm Id="DFSAGR.CCHMG.indx.7">
<Primary><Filename>CacheInfo</Filename> file</Primary>
</IndexTerm>
<IndexTerm Id="DFSAGR.CCHMG.indx.8">
<Primary>Cache Manager</Primary>
<Secondary>local files</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.CCHMG.indx.9">
<Primary>V files</Primary>
<Secondary>editing and deleting</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.CCHMG.indx.10">
<Primary><Filename>CacheItems</Filename> file</Primary>
<Secondary>editing and deleting</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.CCHMG.indx.11">
<Primary><Literal>FilesetItems</Literal> file</Primary>
<Secondary>editing and deleting</Secondary>
</IndexTerm>
<Para>The <Filename>CacheInfo</Filename> file, which is manually created during DFS client 
installation, is composed of three fields separated by colons: the first 
field specifies where the DCE global namespace is mounted; the second field 
names the cache directory where the Cache Manager creates its cache files; 
and the third field specifies the cache size in 1024-byte (1-kilobyte) blocks.
</Para>
<Para>The Cache Manager creates and maintains the following files, which are not
intended for direct use.  You can cause the kernel to panic if you accidentally
modify any of these files; if this happens, rebooting the machine should
restore normal performance.  Note that these files exist only on client
machines that use disk caching; a machine that uses a memory cache maintains
in memory the cache information the files contain.
</Para>
<Caution>
<Para><Replaceable>Never</Replaceable> directly modify or delete these files; this can cause the kernel
to panic. <Replaceable>Always</Replaceable> use the commands provided with DFS to alter these files.
</Para>
</Caution>
<ItemizedList>
<ListItem>
<Para>Multiple <Symbol Role="Variable">dcelocal</Symbol><Filename>/var/adm/dfs/cache/V</Filename><Symbol Role="Variable">n</Symbol> files, where <Symbol Role="Variable">n</Symbol> is a 
unique number for each file.  By default, each <Literal>V</Literal><Symbol Role="Variable">n</Symbol> file holds up to 
64 kilobytes of a cached file; files larger than 64 kilobytes are divided 
into multiple files.  The number of <Literal>V</Literal><Symbol Role="Variable">n</Symbol> files, or <Literal>V</Literal> files, 
depends on the cache size.
</Para>
</ListItem>
<ListItem>
<Para>The <Symbol Role="Variable">dcelocal</Symbol><Filename>/var/adm/dfs/cache/CacheItems</Filename> file.  The Cache Manager 
uses this binary file to record information about each <Literal>V</Literal> file, 
including its file ID number and data version number.
</Para>
</ListItem>
<ListItem>
<Para>The <Symbol Role="Variable">dcelocal</Symbol><Filename>/var/adm/dfs/cache/FilesetItems</Filename> file.  This binary file 
stores the fileset-to-mount point mapping for each fileset accessed.  This 
mapping enables the Cache Manager to respond correctly to commands such 
as <Literal>pwd</Literal>.
</Para>
</ListItem>
</ItemizedList>
<IndexTerm Id="DFSAGR.CCHMG.indx.12" SpanEnd="DFSAGR.CCHMG.indx.2">
</Sect2>
</Sect1>
<Sect1 Id="DFSAGR.CCHMG.div.5">
<Title>Cache Manager Features You Can Customize</Title>
<IndexTerm Id="DFSAGR.CCHMG.indx.13">
<Primary>Cache Manager</Primary>
<Secondary>customizing</Secondary>
</IndexTerm>
<Para>You can alter the following aspects of the Cache Manager configuration to
achieve different levels of performance on different client machines:
</Para>
<ItemizedList>
<ListItem>
<Para>Disk or Memory Cache: You can direct the Cache Manager to use machine
memory instead of disk space for caching.
</Para>
</ListItem>
<ListItem>
<Para>Chunk Size and Number: You can use several options with <Command>dfsd</Command> to
alter the default size and number of chunks that compose a cache.  With a
disk cache, each chunk is called a <Literal>V</Literal> file; with a memory cache, each 
chunk is represented by a block of memory.  The size and number of chunks can 
be modified to take advantage of fast networks or to compensate for 
slow networks.
</Para>
</ListItem>
<ListItem>
<Para>Cache Location: The standard location of the cache (which is at
<Symbol Role="Variable">dcelocal</Symbol><Filename>/var/adm/dfs/cache</Filename>) can be changed to take advantage of
greater space availability on other partitions.
</Para>
</ListItem>
<ListItem>
<Para>Cache Size: The cache size influences how often the Cache Manager
contacts File Server machines across the network.  Increasing the cache size
results in better performance because fewer cross-network calls are necessary.
</Para>
</ListItem>
<ListItem RevisionFlag="Changed">
<?og-ChangeStart enh,13566,R1.2.2,Add multihomed server">
<Para>File Server and FL Server Preferences: The Cache Manager maintains
entries that contain the machine specifications (either host names or
IP addresses) and preference ranks for File Servers and FL Servers. A
File Server entry's rank determines the Cache Manager's preference for
electing to access replicas at that address over replicas that are
available through other network connections. Similarly, an FL Server
entry's rank determines the Cache Manager's preference for querying
the FLDB through a particular address.  You can specify preferences
for both types of server machines to bias the Cache Manager's
selection process. A File Server or FL Server will normally have up to
four entries in a Cache Manager's preference list, with each entry having
a separate machine specification.
<?og-ChangeEnd enh,13566,R1.2.2,Add multihomed server"></Para>
</ListItem>
<ListItem>
<Para>The <Command>setuid</Command> Status: By default, the Cache Manager does not allow
<Command>setuid</Command> programs from filesets to execute with <Command>setuid</Command> permission.
You can enable <Command>setuid</Command> programs from specific filesets to execute with
<Command>setuid</Command> permission; <Command>setgid</Command> programs on a fileset are enabled and
disabled along with <Command>setuid</Command> programs.
</Para>
</ListItem>
<ListItem>
<Para>Device File Status: By default, the Cache Manager does not honor device
files stored in filesets.  You can instruct the Cache Manager to recognize
device files from specific filesets.
</Para>
</ListItem>
<ListItem>
<Para>Cached File Versions: The DFS token mechanism guarantees that the Cache
Manager uses the most current versions of files and directories.  You can also
force the Cache Manager to discard the versions you are using and fetch new
versions from the File Server machine.
<?sml-break><?sml-need 20></Para>
</ListItem>
<ListItem>
<Para RevisionFlag="Changed">Unstored Data: If the Cache Manager cannot contact a File Server machine
to write data to it, it keeps the unstored data in the cache.  It then continues
to attempt to contact the File Server machine until it can store the data.  You
can list all of the data the Cache Manager cannot store, and you can force 
the Cache Manager to discard the data rather than to continue to try to contact
unavailable File Server machines.
<?og-ChangeStart enh, 13605, R1.2.2, Security enhancements"></Para>
</ListItem>
<ListItem>
<Para RevisionFlag="Changed">RPC Authentication Levels: The Cache Manager and File Server default authentication levels are such that communications default to the packet integrity RPC authentication level.  You can set two sets of initial RPC authentication levels and minimum RPC authentication levels; one set governs communications with File Servers in the local cell, while the second set governs communications with File Servers in foreign cells.
<?og-ChangeEnd enh, 13605, R1.2.2, Security enhancements"></Para>
</ListItem>
</ItemizedList>
<Note>
<Para>You must issue the commands described in this chapter at a console or terminal
of the machine being configured; you cannot specify a different machine name
to be used with these commands.  Some of the commands require that you log in
as <Literal>root</Literal>, while others require no privileges; the necessary privileges 
are indicated with each command.  All of the files mentioned in this chapter 
are local files.
</Para>
</Note>
</Sect1>
<Sect1 Id="DFSAGR.CCHMG.div.6">
<Title>Choosing Cache Type, Location, and Size</Title>
<IndexTerm Id="DFSAGR.CCHMG.indx.14">
<Primary>caching</Primary>
<Secondary>types</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.CCHMG.indx.15">
<Primary>memory cache</Primary>
</IndexTerm>
<IndexTerm Id="DFSAGR.CCHMG.indx.16">
<Primary>disk cache</Primary>
<Secondary>about</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.CCHMG.indx.17">
<Primary><Filename>CacheInfo</Filename> file</Primary>
</IndexTerm>
<Para>The default DFS configuration is disk caching. However, the Cache Manager can
use a machine memory cache rather than a disk cache.  To direct the Cache
Manager to use memory caching, use the <Option>memcache</Option> option with the
<Command>dfsd</Command> command.  When the <Option>memcache</Option> option is used, the Cache Manager
does no disk caching, even if the machine has a disk available.
</Para>
<Para>The <Filename>CacheInfo</Filename> file defines the directory to use for a disk cache and
the size of a disk or memory cache.  The Cache Manager checks this file at
initialization to determine this information.  The <Filename>CacheInfo</Filename> file
contains the following three fields separated by colons:
</Para>
<ItemizedList>
<ListItem>
<Para>A directory on the local disk where the Cache Manager mounts the DCE global
namespace.  The default entry is the global namespace designation (<Filename>/...</Filename>).
If <Filename>/...</Filename> is not specified, symbolic links to the global namespace fail.
<?sml-break><?sml-need 20></Para>
</ListItem>
<ListItem>
<Para>A local directory that serves as the DFS cache for a disk cache.  The Cache
Manager creates its cache files in this directory.  The default entry is
<Symbol Role="Variable">dcelocal</Symbol><Filename>/var/adm/dfs/cache</Filename>.  Although the indicated directory is not
used with a memory cache, an entry <Replaceable>must</Replaceable> appear in this field even 
if memory caching is employed on the machine.
</Para>
</ListItem>
<ListItem>
<Para>A definition of the cache size in kilobyte blocks.
</Para>
</ListItem>
</ItemizedList>
<Para>Following is an example of a <Filename>CacheInfo</Filename> file. The file lists the DCE
namespace mounted at the global namespace designation (<Filename>/...</Filename>), the
<Symbol Role="Variable">dcelocal</Symbol><Filename>/var/adm/dfs/cache</Filename> directory used for the cache, and a defined
cache size of 50,000 kilobyte blocks (the machine <Replaceable>must</Replaceable> have this 
many blocks available on its disk):
</Para>
<InformalExample>
<Para><ProgramListing>/...:<Symbol Role="Variable">dcelocal</Symbol>/var/adm/dfs/cache:50000
</ProgramListing></Para>
</InformalExample>
</Sect1>
<Sect1 Id="DFSAGR.CCHMG.div.7">
<Title>Altering Default Parameters with the dfsd Process</Title>
<IndexTerm Id="DFSAGR.CCHMG.indx.18">
<Primary><Command>dfsd</Command> process</Primary>
<Secondary>changing defaults</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.CCHMG.indx.19">
<Primary>cache</Primary>
<Secondary>changing size</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.CCHMG.indx.20">
<Primary>chunks</Primary>
<Secondary>about</Secondary>
</IndexTerm>
<Para RevisionFlag="Changed"><?og-ChangeStart enh, 13605, R1.2.2, Security enhancements">The fields in the <Filename>CacheInfo</Filename> file are the only Cache Manager parameters
that you <Replaceable>must</Replaceable> set.  However, you can use the options available with the
<Command>dfsd</Command> command to alter several Cache Manager defaults, affecting the way
information is cached.  Following are the configuration parameters that have
the greatest effect on cache performance and security. (See the following subsections for a description of the <Command>dfsd</Command> options used to configure these parameters.)
</Para>
<ItemizedList>
<ListItem>
<Para RevisionFlag="Changed">Total Cache Size: This is the amount of disk space or memory available
for caching.
</Para>
</ListItem>
<ListItem>
<Para RevisionFlag="Changed">Chunk Size: This parameter determines the maximum amount of data that
can fit in a cache chunk.  A chunk cannot hold more than one element; in a
memory cache, the unused memory that is allocated for a chunk is wasted.  If 
an element cannot fit in a single chunk, it is split into as many chunks 
as are needed.
</Para>
<Para RevisionFlag="Changed">This parameter also determines the maximum amount of data that the Cache 
Manager can request at one time from a File Exporter.  Increase the chunk size 
to take advantage of very fast links or decrease the size for slow networks.
<?sml-break><?sml-need 20></Para>
</ListItem>
<ListItem>
<Para RevisionFlag="Changed">Cache Chunk Configuration: This parameter determines the number of
chunks that are used for the cache.  It can affect how often the Cache 
Manager must discard cached data to make room for new data.  Consider the 
following example:
</Para>
<Para RevisionFlag="Changed">A disk cache is configured at 50 megabytes and consists of 1000 chunks.
Suppose 10 users each have the Cache Manager cache 100 files and each file is
20 kilobytes in size.  This uses all 1000 chunks available (because each chunk
can hold only one element), even though the cache has only 20 megabytes of
cached elements, which is less than 50% of its capacity of 50 megabytes.
</Para>
<Para RevisionFlag="Changed">When a user requests more data, the Cache Manager must discard cached data to
reclaim space, even though the cache is not close to its capacity.  In this
case, increasing the number of chunks into which the cache is divided would
improve performance by allowing the unused 30 megabytes of cache capacity to
be allocated for other cached files.
</Para>
</ListItem>
<ListItem>
<Para RevisionFlag="Changed">Number of dcache (disk cache) Entries in Memory: The Cache Manager maintains
one dcache entry for each cache chunk; the entry records system
identification information such as the file ID and version number of the file
corresponding to the chunk.  On disk caching machines, each dcache entry is
stored in the <Filename>CacheItems</Filename> file, with a small number of entries (by
default, 100) duplicated in machine memory.  On memory caching machines, all
dcache entries are stored in memory; the number of entries is equal to the
number of chunks.
<?og-ChangeStart enh, 13605, R1.2.2, Security enhancements"></Para>
</ListItem>
<ListItem>
<Para RevisionFlag="Changed">Minimum and Initial RPC Authentication Levels: The Cache Manager maintains an initial authentication level used as a starting point for authentication negotiations with File Servers and a minimum acceptable level for communications with File Servers.  There are two sets of these parameters: one set governs communications with File Servers in the local cell, and the other set governs communications with File Servers in foreign cells.
<?og-ChangeEnd enh, 13605, R1.2.2, Security enhancements"></Para>
</ListItem>
</ItemizedList>
<Note>
<Para>The <Command>dfsd</Command> command is normally placed in a machine's initialization file
(<Filename>/etc/rc</Filename> or its equivalent), not typed at the console.  The commands in
the following subsections are presented as examples of entries from
initialization files.
</Para>
</Note>
<Sect2 Id="DFSAGR.CCHMG.div.8">
<Title>Disk Cache Configuration</Title>
<IndexTerm Id="DFSAGR.CCHMG.indx.21">
<Primary>cache</Primary>
<Secondary>disk</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.CCHMG.indx.22">
<Primary>disk cache</Primary>
<Secondary>about</Secondary>
</IndexTerm>
<Para>The number of kilobyte blocks allocated to the cache is defined in the third
field of the <Filename>CacheInfo</Filename> file.  You can use the <Option>blocks</Option> option to
override the number of cache blocks; the unit of measure associated with the
cache block size is always kilobytes.  The Cache Manager heuristically divides
the number of blocks by 8 to determine the number of cache chunks in a disk
cache.  The following example sets the number of disk blocks allocated for the
cache to 75,000 kilobyte blocks:
</Para>
<InformalExample>
<Para><ProgramListing>dfsd -blocks 75000
</ProgramListing></Para>
</InformalExample>
<Para>The default number of cache chunks in a disk cache is computed as the number of
cache blocks divided by 8; you can use the <Option>files</Option> option with a positive
integer not greater than 32,000 to override this default.  To use your cache
most effectively, issue the <Command>du</Command> command on the cache directory to
determine the number of cache blocks used; compare this number to the number
of blocks allocated to the cache.  If you are not using 90% of the cache,
increase the number of chunks (<Literal>V</Literal> files).  The following example sets the 
number of chunks to 2000:
</Para>
<InformalExample>
<Para><ProgramListing>dfsd -files 2000
</ProgramListing></Para>
</InformalExample>
<Para><!--.EQ-->
<!--delim %%-->
<!--.EN-->
<!--The default chunk size for a disk cache is 64 kilobytes (%2 sup 16%); the unit-->
The default chunk size for a disk cache is 64 kilobytes (2<Superscript>16</Superscript>); the unit
of measure associated with the chunk size is always bytes.  You can use the
<Option>chunksize</Option> option to override the default chunk size.  Provide an integer
between 13 and 18 to be used as an exponent of 2.  For example, a value of 15
sets the chunk size to 32 kilobytes (2<Superscript>15</Superscript>= 32,768); a value of 16 equals
the default for disk caches (2<Superscript>16</Superscript>= 64 kilobytes).  A value less than 13
or greater than 18 returns the chunk size to the default (as does a value of
16).  The following example sets the chunk size to 16 kilobytes (2<Superscript>14</Superscript>):
<!--.EQ-->
<!--delim off-->
<!--.EN-->
</Para>
<InformalExample>
<Para><ProgramListing>dfsd -chunksize 14
</ProgramListing></Para>
</InformalExample>
<Para>For a disk cache, the default number of dcache entries duplicated in memory is
100.  You can use the <Option>dcache</Option> option with a positive integer to change
the default.  It is usually not necessary to duplicate more than 100 entries in
memory.  However, because memory access is faster than disk access, increasing
the number of dcache entries stored in memory may improve performance slightly.
The following example sets the number to 250:
</Para>
<InformalExample>
<Para><ProgramListing>dfsd -dcache 250
</ProgramListing></Para>
</InformalExample>
<Para>When altering a disk cache configuration, any combination of <Command>dfsd</Command> options
is allowed.  However, the cache size defined in the <Filename>CacheInfo</Filename> file or
with the <Option>blocks</Option> option cannot be exceeded with the <Option>files</Option> or
<Option>chunksize</Option> option.
<IndexTerm Id="DFSAGR.CCHMG.indx.23" SpanEnd="DFSAGR.CCHMG.indx.21"><IndexTerm Id="DFSAGR.CCHMG.indx.24" SpanEnd="DFSAGR.CCHMG.indx.22"></Para>
</Sect2>
<Sect2 Id="DFSAGR.CCHMG.div.9">
<Title>Memory Cache Configuration</Title>
<IndexTerm Id="DFSAGR.CCHMG.indx.25">
<Primary>cache</Primary>
<Secondary>memory</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.CCHMG.indx.26">
<Primary>memory cache</Primary>
</IndexTerm>
<Para><!--.EQ-->
<!--delim %%-->
<!--.EN-->
<!--The default chunk size for a memory cache is 8 kilobytes (%2 sup 13%).  There-->
The default chunk size for a memory cache is 8 kilobytes (2<Superscript>13</Superscript>).  There
is no predefined default for the number of chunks in a memory cache, and, as
mentioned previously, the number of dcache entries equals the number of chunks.
<!--.EQ-->
<!--delim off-->
<!--.EN-->
</Para>
<Para>If the <Option>blocks</Option> option is used alone, it overrides the default cache size
in the <Filename>CacheInfo</Filename> file.  The Cache Manager divides this value by the
default chunk size of 8 kilobytes to calculate the number of chunks and dcache
entries.  The following example sets the cache size to 5 megabytes (5120
kilobytes); as a result, the number of chunks is set to 640 (5120 divided by
8):
</Para>
<InformalExample>
<Para><ProgramListing>dfsd -memcache -blocks 5120
</ProgramListing></Para>
</InformalExample>
<Para><!--.EQ-->
<!--delim %%-->
<!--.EN-->
If the <Option>chunksize</Option> option is used alone, it overrides the default of 8
<!--kilobytes (%2 sup 13%).  Provide an integer between 13 and 18 to be used as an-->
kilobytes (2<Superscript>13</Superscript>).  Provide an integer between 13 and 18 to be used as an
exponent of 2.  For example, a value of 15 sets the chunk size to 32 kilobytes
<!--(%2 sup 15%= 32,768).  A value less than 13 or greater than 18 returns the-->
(2<Superscript>15</Superscript>= 32,768).  A value less than 13 or greater than 18 returns the
chunk size to the default (as does a value of 13).  The following example sets
<!--the chunk size to 16 kilobytes (%2 sup 14%); if the total cache size is 4-->
the chunk size to 16 kilobytes (2<Superscript>14</Superscript>); if the total cache size is 4
<!--megabytes (%2 sup 12% kilobytes), the resulting number of chunks is 256:-->
megabytes (2<Superscript>12</Superscript> kilobytes), the resulting number of chunks is 256:
<!--.EQ-->
<!--delim off-->
<!--.EN-->
</Para>
<InformalExample>
<Para><ProgramListing>dfsd -memcache -chunksize 14
</ProgramListing></Para>
</InformalExample>
<Para><!--.EQ-->
<!--delim %%-->
<!--.EN-->
If the <Option>blocks</Option> and <Option>chunksize</Option> options are used together, they
override the defaults for the cache size and the chunk size.  The Cache Manager
divides the cache size by the chunk size to calculate the number of chunks
and dcache entries.  The following example sets the cache size to 8 
<!--megabytes (8192 kilobytes) and the chunk size to 16 kilobytes (%2 sup 14%), -->
megabytes (8192 kilobytes) and the chunk size to 16 kilobytes (2<Superscript>14</Superscript>), 
resulting in 512 chunks:
<!--.EQ-->
<!--delim off-->
<!--.EN-->
</Para>
<InformalExample>
<Para><ProgramListing>dfsd -memcache -blocks 8192 -chunksize 14
</ProgramListing></Para>
</InformalExample>
<Para>When configuring a memory cache, the following options explicitly set the
number of chunks and dcache entries.  They also set the cache size indirectly
and should not be used; use <Option>blocks</Option>, <Option>chunksize</Option>, or both, and allow
the Cache Manager to determine the number of chunks and dcache entries itself.
</Para>
<ItemizedList>
<ListItem>
<Para>The <Option>dcache</Option> option alone.  The Cache Manager multiplies this value by
the default chunk size (8 kilobytes) to derive a total cache size, overriding
the value in the <Filename>CacheInfo</Filename> file.
</Para>
</ListItem>
<ListItem>
<Para>A combination of <Option>dcache</Option> and <Option>chunksize</Option> options.  The Cache Manager 
sets the specified values and multiplies them together to obtain a total cache
size, again overriding the value in the <Filename>CacheInfo</Filename> file.
</Para>
</ListItem>
</ItemizedList>
<Para>Do not use the following options when configuring a memory cache:
</Para>
<ItemizedList>
<ListItem>
<Para>The <Option>files</Option> option alone.  This option sets the number of chunks for a
disk cache and is thus ignored for a memory cache.
</Para>
</ListItem>
<ListItem>
<Para>The <Option>blocks</Option> and <Option>dcache</Option> options together.  If you combine these
options, the Cache Manager may choose one of the values to ignore, or the
command may fail.
</Para>
</ListItem>
</ItemizedList>
<Para>(See Part 2 of this guide and reference for complete information about these
options and the use of the <Command>dfsd</Command> command in general.)
<IndexTerm Id="DFSAGR.CCHMG.indx.27" SpanEnd="DFSAGR.CCHMG.indx.20"></Para>
</Sect2>
</Sect1>
<Sect1 Id="DFSAGR.CCHMG.div.10">
<Title>Changing Cache Location</Title>
<IndexTerm Id="DFSAGR.CCHMG.indx.28">
<Primary>cache</Primary>
<Secondary>changing location</Secondary>
</IndexTerm>
<Para>The default directory for the Cache Manager's cache is
<Symbol Role="Variable">dcelocal</Symbol><Filename>/var/adm/dfs/cache</Filename>.  You can change this to a directory on
another partition if more space is available.  Use the <Command>du</Command> or <Literal>df</Literal>
command (or an equivalent command) to check partition size and fullness.
</Para>
<Para>You can change the location of the cache by editing the <Filename>CacheInfo</Filename> file
or by using the <Option>cachedir</Option> option with the <Command>dfsd</Command> command. (See Part
2 of this guide and reference for more information about the use of the
<Command>dfsd</Command> command.)
</Para>
<Para>To change the cache location, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Log in as <Literal>root</Literal> on the machine.
</Para>
</ListItem>
<ListItem>
<Para>Use a text editor to change the second field of the <Filename>CacheInfo</Filename> file (the
information between the two colons).  The new directory must be on the local
disk of the machine.  The following example shows the cache directory specified
in the <Filename>CacheInfo</Filename> file changed to <Filename>/usr/cache</Filename>:
</Para>
<InformalExample>
<Para><ProgramListing>/...:/usr/cache:15000
</ProgramListing></Para>
</InformalExample>
</ListItem>
<ListItem>
<Para>Reboot the machine using <Filename>/etc/reboot</Filename> or its equivalent. (Consult your
system documentation for information on the correct rebooting command for your
workstation.)
</Para>
</ListItem>
<ListItem>
<Para>Move to the old cache directory and delete it using the <Command>rm -rf</Command> command.
</Para>
</ListItem>
</OrderedList>
<IndexTerm Id="DFSAGR.CCHMG.indx.29" SpanEnd="DFSAGR.CCHMG.indx.28">
</Sect1>
<Sect1 Id="DFSAGR.CCHMG.div.11">
<Title>Listing and Setting Cache Size</Title>
<IndexTerm Id="DFSAGR.CCHMG.indx.30">
<Primary>cache</Primary>
<Secondary>calculating size</Secondary>
</IndexTerm>
<Para>The amount of local disk space or memory allocated for the Cache Manager to
use for its cache affects the speed of file access.  A larger cache means the
Cache Manager has to contact the File Server machine less often, resulting in
fewer cross-network messages.  A smaller cache fills sooner, making it more
likely that the Cache Manager must discard cached copies of data to make room
for newly requested data; if the user requests the discarded data again, the
Cache Manager must recontact the File Server machine and refetch the data.  A
larger cache can make the initial discarding of data unnecessary.
</Para>
<Para>The amount of disk space or memory used for caching depends on several factors.
The size of the partition that houses the cache directory or the amount of
memory available on the machine places an absolute limit on cache size.  Do not
use more than 90% of the cache directory's partition for a disk cache; do not
use more than 20 to 25% of available memory for a memory cache (this leaves
enough memory for processes and applications to run).
</Para>
<Para>Within these limits, devoting more than 40 megabytes to the cache on a machine
that does not serve multiple users is normally not useful unless users often
work with large amounts of data (accessing large databases, for example).  If a
machine serves multiple users, a cache of 60 to 70 megabytes may be
appropriate.  A cache smaller than 5 megabytes can hamper Cache Manager
performance; a cache smaller than twice the chunk size is rounded up.
<?sml-break><?sml-need 20></Para>
<Para><IndexTerm Id="DFSAGR.CCHMG.indx.31">
<Primary><Filename>CacheInfo</Filename> file</Primary>
</IndexTerm>You can reset the cache size for both types of caches by using a text editor
to alter the size field in the <Filename>CacheInfo</Filename> file and then rebooting the
machine; you must be logged in as <Literal>root</Literal> or have the write permission
on the file to edit it.  The <Option>blocks</Option> option can also be used with the
<Command>dfsd</Command> command to override the <Filename>CacheInfo</Filename> value at reboot. (See Part
2 of this guide and reference for complete information about the <Command>dfsd</Command>
command.)
</Para>
<Para>To alter disk cache size without rebooting the machine, use the <Literal>cm
setcachesize</Literal> command.  The value remains in effect until the machine is
next rebooted and reads the value in the <Filename>CacheInfo</Filename> file.  To display the
current cache size, the amount being used, and the type of cache (disk or
memory), use the <Command>cm getcachesize</Command> command.
</Para>
<Para>You must reboot to reset the cache size for a memory-caching machine.
<IndexTerm Id="DFSAGR.CCHMG.indx.32" SpanEnd="DFSAGR.CCHMG.indx.18"><IndexTerm Id="DFSAGR.CCHMG.indx.33" SpanEnd="DFSAGR.CCHMG.indx.25"><IndexTerm Id="DFSAGR.CCHMG.indx.34" SpanEnd="DFSAGR.CCHMG.indx.26"></Para>
<Sect2 Id="DFSAGR.CCHMG.div.12">
<Title>Displaying the Cache Size from the CacheInfo File</Title>
<IndexTerm Id="DFSAGR.CCHMG.indx.35">
<Primary>cache</Primary>
<Secondary>viewing size</Secondary>
</IndexTerm>
<Para>Use the <Command>cat</Command> command (or the command appropriate to your system) to view
the <Filename>CacheInfo</Filename> file on a client machine:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Literal>cat CacheInfo</Literal>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Filename>CacheInfo</Filename> file contains a single line that lists three fields 
separated by a colon; the third field lists the maximum number of kilobyte 
blocks the Cache Manager can reserve for use as a cache in the designated 
cache directory.
</Para>
<Para>In the following example, the default cache size for the machine is 25,000
kilobyte blocks:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Literal>cat CacheInfo</Literal>
</UserInput></ProgramListing></Para>
</InformalExample>
<InformalExample>
<Para><ProgramListing>/...:<Symbol Role="Variable">dcelocal</Symbol>/var/adm/dfs/cache:25000
</ProgramListing></Para>
</InformalExample>
<?sml-break>
<?sml-need 20>
</Sect2>
<Sect2 Id="DFSAGR.CCHMG.div.13">
<Title>Displaying the Current Cache Size and the Amount in Use</Title>
<IndexTerm Id="DFSAGR.CCHMG.indx.36">
<Primary><Command>cm</Command> command suite</Primary>
<Secondary><Command>getcachesize</Command></Secondary>
</IndexTerm>
<Para>Issue the <Command>cm getcachesize</Command> command on a client machine to view the
current size of the cache and the amount in use.  On machines that use disk
caching, the current cache size may disagree with the default size specified
in the <Filename>CacheInfo</Filename> file if the cache size was changed with the <Literal>cm
setcachesize</Literal> command.  Regardless of the type of caching in use, the current
cache size may also disagree with the <Filename>CacheInfo</Filename> file if the size was
changed with the <Option>blocks</Option> option of the <Command>dfsd</Command> command.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>cm getcachesize</Command>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The following example shows the number of kilobyte blocks that the Cache 
Manager is using as a cache at the moment the command is issued and the 
current size of the cache:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>cm getcachesize</Command>
</UserInput></ProgramListing></Para>
</InformalExample>
<InformalExample>
<Para><ProgramListing>Using 13709 of the cache's available 25000 1K byte blocks.
</ProgramListing></Para>
</InformalExample>
</Sect2>
<Sect2 Id="DFSAGR.CCHMG.div.14">
<Title>Changing the Cache Size Temporarily</Title>
<Para>You can reset the cache size without rebooting a machine. The value remains
in effect until you next reboot the machine.  To change the cache size
temporarily, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Log in as <Literal>root</Literal> on the machine.
</Para>
</ListItem>
<ListItem>
<Para>Issue the <Command>cm setcachesize</Command> command to set a new cache size:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Command>cm setcachesize -size </Command><Symbol Role="Variable">kilobytes</Symbol>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>size</Option> <Symbol Role="Variable">kilobytes</Symbol> option is the number of kilobyte blocks to 
be used for the cache.  A value of 1024 equals 1 megabyte; the smallest 
allowable value is 1.  A value less than 5120 (5 megabytes) can have a 
negative effect on Cache Manager performance; a value less than twice the 
chunk size is rounded up.  A value of 0 (zero) resets the cache size to 
the amount specified in the <Filename>CacheInfo</Filename> file.
</Para>
</ListItem>
</OrderedList>
</Sect2>
<Sect2 Id="DFSAGR.CCHMG.div.15">
<Title>Resetting the Cache Size to the Default</Title>
<Para>To reset the cache size to the default, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Log in as <Literal>root</Literal> on the machine.
</Para>
</ListItem>
<ListItem>
<Para>Use the <Option>reset</Option> option with the <Command>cm setcachesize</Command> command to reset
the cache size to the value specified at the last reboot, which is either the
value in the <Filename>CacheInfo</Filename> file or the value set with the <Option>blocks</Option>
option of the <Command>dfsd</Command> command:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Command>cm setcachesize -reset</Command>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>reset</Option> option resets the cache size to the value at the last reboot.
</Para>
</ListItem>
</OrderedList>
</Sect2>
<Sect2 Id="DFSAGR.CCHMG.div.16">
<Title>Changing the Cache Size Permanently</Title>
<Para>To change the cache size permanently, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Log in as <Literal>root</Literal> on the machine.
</Para>
</ListItem>
<ListItem>
<Para>Use a text editor to change the number in the third field of the
<Filename>CacheInfo</Filename> file.  Specify a number in kilobyte blocks; 1024 kilobyte blocks
equals 1 megabyte.  Following is an example of the <Filename>CacheInfo</Filename> file:
</Para>
<InformalExample>
<Para><ProgramListing>/...:<Symbol Role="Variable">dcelocal</Symbol>/var/adm/dfs/cache:25000
</ProgramListing></Para>
</InformalExample>
<Caution>
<Para>Be precise when editing the <Filename>CacheInfo</Filename> file.  Use colons to
separate the fields in the file; do not include any spaces in the
file.
</Para>
</Caution>
</ListItem>
<ListItem>
<Para>Reboot using <Filename>/etc/reboot</Filename> or its equivalent. (Consult your system
documentation for information on the correct rebooting command for your
workstation.)
</Para>
</ListItem>
</OrderedList>
<IndexTerm Id="DFSAGR.CCHMG.indx.37" SpanEnd="DFSAGR.CCHMG.indx.19">
<IndexTerm Id="DFSAGR.CCHMG.indx.38" SpanEnd="DFSAGR.CCHMG.indx.31">
</Sect2>
</Sect1>
<Sect1 Id="DFSAGR.CCHMG.div.17">
<Title>Setting File Server and Fileset Location Server Machine Preferences</Title>
<IndexTerm Id="DFSAGR.CCHMG.indx.39">
<Primary>Cache Manager</Primary>
<Secondary>setting File Server preferences</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.CCHMG.indx.40">
<Primary>Cache Manager</Primary>
<Secondary>checking File Server preferences</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.CCHMG.indx.41">
<Primary>Cache Manager</Primary>
<Secondary>setting FL Server preferences</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.CCHMG.indx.42">
<Primary>Cache Manager</Primary>
<Secondary>checking FL Server preferences</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.CCHMG.indx.43">
<Primary>File Server machines</Primary>
<Secondary>setting Cache Manager preferences</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.CCHMG.indx.44">
<Primary>FL Server machines</Primary>
<Secondary>setting Cache Manager preferences</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.CCHMG.indx.45">
<Primary>File Server machines</Primary>
<Secondary>checking Cache Manager preferences</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.CCHMG.indx.46">
<Primary>FL Server machines</Primary>
<Secondary>checking Cache Manager preferences</Secondary>
</IndexTerm>
<Para>A replicated DCE LFS fileset typically has multiple read-only replicas. Each
replica provides the same data, but each resides on a different File Server.
When the Cache Manager needs to access data from a read-only replica, the FL
Server provides the Cache Manager with the names of all File Servers
on which that replica resides. As with File Servers, there can be multiple
FL servers. The Cache Manager must choose the FL server to query for
fileset locations and then choose the Fileset Server to access.
</Para>
<Para>To choose from among these servers, the Cache Manager consults its
collection of File Server and FL server preferences. Each preference
consists of the hostname or Internet Protocol (IP) address of a server and
the machine's numerical rank in the range from 1 to 65,534. The Cache
Manager attempts to access the server that has the lowest recorded rank. If
two FL servers have the same rank, the Cache Manager selects them in the
order in which their names appear in the file system junction. If two File
Servers have the same rank, the Cache Manager selects them in the order in
which it received their names from the FL Server.
</Para>
<Para>If the Cache Manager cannot access the server with the lowest rank&mdash;because
the machine is currently unavailable, for example&mdash;it attempts to access
the server with the next-lowest rank. It continues in this fashion until it
either succeeds or determines that all File Servers or FL Servers are
unavailable.
</Para>
<Para>The Cache Manager stores its server preferences in the kernel of the local
machine. Therefore, it loses its current preferences each time it is
initialized. To rebuild its preferences following initialization, the Cache
Manager assigns a default rank to each File Server or FL Server that it
contacts.  The Cache Manager bases its default ranks on IP addresses, as
follows:
</Para>
<ItemizedList>
<ListItem>
<Para>If the local machine is also a File Server or FL Server, it receives an
initial rank of 5000.
</Para>
</ListItem>
<ListItem>
<Para>Each File Server or FL Server in the same subnetwork as the local machine receives
an initial rank of 20,000.
</Para>
</ListItem>
<ListItem>
<Para>Each File Server or FL Server in the same network as the local machine
receives an initial rank of 30,000.
</Para>
</ListItem>
<ListItem>
<Para>Each File Server or FL Server in a different network from the local machine, or
for which the Cache Manager can determine no network information, receives an
initial rank of 40,000.
</Para>
</ListItem>
</ItemizedList>
<Para RevisionFlag="Changed"><?og-ChangeStart enh,13566,R1.2.2,Add multihomed server">When multiple server entries have the same rank, the Cache Manager
chooses between connections to suitable servers by picking the machine
with the lowest "round-trip time." When initialized, the Cache Manager
assigns a randomly adjusted round-trip time value to each server entry
in the preference list. The assigned round-trip time value is always
greater than the limit for recorded values for actual round-trip
times, thus biasing the selection process to any connection that the Cache
Manager has actually made.  The assigned round-trip time value ensures
that if more than one entry have the same rank (a very probable event
given the default values assigned to entries) then no single entry
will receive all requests from the various DFS clients.
</Para>
<Para RevisionFlag="Changed">To display the Cache Manager's current set of File Server connection
preferences, use the <Command>cm getpreferences</Command> command. Use the <Literal>cm
getpreferences</Literal> command with the <Option>fldb</Option> option to display the
current set of FL Server connection preferences. By default, the
command displays its output on standard output, but you can direct the
output to a specified file. Note that each server will normally have
up to four entries, each with a different IP address.
</Para>
<Para RevisionFlag="Changed">To specify preferences for one or more File Server connections, use
the <Command>cm setpreferences</Command> command. Use the <Command>cm setpreferences</Command>
command with the <Option>fldb</Option> option to specify preferences for one or
more FL Server connections.  Each preference entry that you specify
must consist of the following pair of values: the machine
specification (either the host name or IP address of the File Server or
FL Server) and that machine's rank in the form of an integer in the
range from 1 to 65,534 (lower ranks have a higher preference). You can
specify up to four preference entries for the same server, with each
entry using a different IP address.
</Para>
<Para RevisionFlag="Changed">Use the command's options to specify File Server or FL Server preference
entries as follows:
</Para>
<ItemizedList>
<ListItem>
<Para RevisionFlag="Changed">Use the <Option>server</Option> option to specify one or more File Server entries 
on the command line. If the <Option>fldb</Option> option is not used, the
<Option>server</Option> option specifies File Server machine specifications 
and their ranks. 
For
example, the following command assigns the File Server host names
<Literal>fs1.abc.com</Literal> and <Literal>fs2.abc.com</Literal> ranks of 19,000 and 21,000,
respectively:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput RevisionFlag="Changed"># <Literal>cm setp -se fs1.abc.com 19000 fs2.abc.com 21000</Literal>
</UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
<ListItem>
<Para RevisionFlag="Changed">Use the <Option>fldb</Option> option with the <Option>server</Option> option to
set one or more FL Server preference entries.  For example, the
following command assigns the FL Server host names <Literal>fl1.abc.com</Literal> and
<Literal>fl2.abc.com</Literal> with ranks of 15,000 and 25,000, respectively:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput RevisionFlag="Changed"># <Literal>cm setp -se fl1.abc.com 15000 fl2.abc.com 25000 -fldb</Literal>
</UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
<ListItem>
<Para RevisionFlag="Changed">Use the <Option>path</Option> option to specify the pathname of a file that 
contains
server preferences. (The output from the <Command>cm getpreferences</Command>
command can be redirected to create such a file.) For example, 
the following
command reads a collection of preferences from a file that resides on the
local machine at
<Filename>/etc/cm.prefs</Filename>:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput RevisionFlag="Changed"># <Literal>cm setp -pa /etc/cm.prefs</Literal>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para RevisionFlag="Changed">The preference file should contain lines similar to the following:
</Para>
<InformalExample>
<Para><ProgramListing RevisionFlag="Changed">121.86.33.41 39000
121.86.33.34 39000
121.86.33.36 41000
121.86.33.37 41000
</ProgramListing></Para>
</InformalExample>
</ListItem>
<ListItem>
<Para RevisionFlag="Changed">Use the <Option>stdin</Option> option to read preference entries 
from standard input. 
For example, the following command reads preferences piped to the command 
from a user-defined program named
<Command>mkprefs</Command>:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput RevisionFlag="Changed"># <Literal>mkprefs | cm setp -st</Literal>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para RevisionFlag="Changed">The program should generate preferences in the following format:
</Para>
<InformalExample>
<Para><ProgramListing RevisionFlag="Changed">fs3.abc.com 15000 fs4.abc.com 25000 ...
</ProgramListing></Para>
</InformalExample>
</ListItem>
</ItemizedList>
<Para RevisionFlag="Changed">The <Option>server</Option>, <Option>path</Option>, and <Option>stdin</Option> options are not
mutually exclusive. You can include any combination of the options
with the <Command>cm setpreferences</Command> command. If the Cache Manager already
has a rank for a File Server or FL Server connection 
that you specify, the rank
you specify replaces the connection's existing rank.
</Para>
<Para RevisionFlag="Changed">Each Cache Manager maintains its own collection of preferences, so 
two Cache
Managers can have two different ranks for the same File Server or 
FL Server connection.
</Para>
<Para RevisionFlag="Changed">To load a predefined set of preferences each time the Cache Manager
is initialized, include the <Command>cm setpreferences</Command> command in the 
machine's
initialization file.
</Para>
<Sect2 Id="DFSAGR.CCHMG.div.18">
<Title RevisionFlag="Changed">Displaying File Server and FL Server Preferences</Title>
<IndexTerm Id="DFSAGR.CCHMG.indx.47">
<Primary><Command RevisionFlag="Changed">cm</Command> command suite</Primary>
<Secondary><Command RevisionFlag="Changed">getpreferences</Command></Secondary>
</IndexTerm>
<Para RevisionFlag="Changed">Issue the <Command>cm getpreferences</Command> command to display the Cache Manager's
preferences for File Servers or FL Server connections, as follows:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput RevisionFlag="Changed">$ <Command>cm getpreferences</Command> [<Option>path </Option><Symbol Role="Variable">filename</Symbol>] [<Option>numeric</Option>] [<Option>fldb</Option>]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para RevisionFlag="Changed">The <Option>path </Option><Symbol Role="Variable">filename</Symbol> option specifies a file to which the 
command is
to write its output. Omit this option to display the preferences 
on standard 
output.
</Para>
<Para RevisionFlag="Changed">The <Option>numeric</Option> option directs the command to display the IP addresses
rather than the host names of the server machine connections. 
Omit this option to display the host names.
</Para>
<Para RevisionFlag="Changed">The <Option>fldb</Option> option directs the command to display the 
FL Server machine connections
and their respective ranks and not File Servers.
</Para>
<Para RevisionFlag="Changed">The command produces output of the following form for each server 
connection preference:
</Para>
<InformalExample>
<Para><ProgramListing><Symbol Role="Variable" RevisionFlag="Changed">hostname</Symbol>          <Symbol Role="Variable" RevisionFlag="Changed">rank</Symbol>
</ProgramListing></Para>
</InformalExample>
<Para RevisionFlag="Changed">For example:
</Para>
<InformalExample>
<Para><ProgramListing><Literal RevisionFlag="Changed">fl2.abc.com</Literal>             <Literal RevisionFlag="Changed">25000</Literal>
</ProgramListing></Para>
</InformalExample>
<Para RevisionFlag="Changed">In the output, <Symbol Role="Variable">hostname</Symbol> is the host name of a File or FL Server, and
<Symbol Role="Variable">rank</Symbol> is the machine's numeric preference rank. 
Note that <Symbol Role="Variable">hostname</Symbol> is 
replaced with the machine's IP address if the Cache
Manager cannot presently determine the host name or if the <Option>numeric</Option>
option is included with the command.
</Para>
</Sect2>
<Sect2 Id="DFSAGR.CCHMG.div.19">
<Title RevisionFlag="Changed">Setting File Server Preferences</Title>
<IndexTerm Id="DFSAGR.CCHMG.indx.48">
<Primary><Command RevisionFlag="Changed">cm</Command> command suite</Primary>
<Secondary><Command RevisionFlag="Changed">setpreferences</Command></Secondary>
</IndexTerm>
<Para RevisionFlag="Changed">To set the Cache Manager's preferences for one or more File Server or
FL Server
connections,
do the following:
</Para>
<OrderedList>
<ListItem>
<Para RevisionFlag="Changed">Log in as <Literal>root</Literal> on the machine.
</Para>
</ListItem>
<ListItem>
<Para RevisionFlag="Changed">Issue the <Command>cm setpreferences</Command> command to set the Cache Manager's
preferences for one or more File Server or FL Server connections, 
as follows:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput RevisionFlag="Changed"># <Command>cm setpreferences</Command> [<Option>server </Option><Symbol Role="Variable">machine rank</Symbol>...] [<Option>path </Option><Symbol Role="Variable">filename</Symbol>] \ 
[<Option>stdin</Option>] [<Option>fldb</Option>]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para RevisionFlag="Changed"><?og-ChangeStart enh,13566,R1.2.2,Add multihomed server">The <Option>server </Option><Symbol Role="Variable">machine rank</Symbol> option specifies one or more pairs of
server machine specifications 
(either through the host names or IP addresses) 
and their ranks.  By default, the machines are considered to
be File Servers; however, you can specify FL Server entries by adding the 
<Option>fldb</Option> option. Separate each machine specification and each
rank with one or more spaces. Note that you can specify up to four
entries per server, with each entry having a separate machine 
specification.
<?og-ChangeEnd enh,13566,R1.2.2,Add multihomed server"></Para>
<Para>The <Option>path </Option><Symbol Role="Variable">filename</Symbol> option specifies a file from which 
the command is
to read one or more pairs of File Server specifications and their ranks. 
Separate
each machine specification from its rank with one or more spaces, and 
include
each paired machine specification and rank on a separate line.
</Para>
<Para>The <Option>stdin</Option> option directs the command to read pairs of File Server
specifications
and their ranks from standard input. Separate each machine 
specification and
each rank with one or more spaces.
</Para>
<Para>The <Option>fldb</Option> option directs the command to set preferences for 
FL Server addresses, 
rather than for File Servers. 
</Para>
</ListItem>
</OrderedList>
<?og-ChangeEnd enh,13566,R1.2.2,Add multihomed server">
<IndexTerm Id="DFSAGR.CCHMG.indx.49" SpanEnd="DFSAGR.CCHMG.indx.39">
<IndexTerm Id="DFSAGR.CCHMG.indx.50" SpanEnd="DFSAGR.CCHMG.indx.40">
<IndexTerm Id="DFSAGR.CCHMG.indx.51" SpanEnd="DFSAGR.CCHMG.indx.41">
<IndexTerm Id="DFSAGR.CCHMG.indx.52" SpanEnd="DFSAGR.CCHMG.indx.42">
<IndexTerm Id="DFSAGR.CCHMG.indx.53" SpanEnd="DFSAGR.CCHMG.indx.43">
<IndexTerm Id="DFSAGR.CCHMG.indx.54" SpanEnd="DFSAGR.CCHMG.indx.44">
<IndexTerm Id="DFSAGR.CCHMG.indx.55" SpanEnd="DFSAGR.CCHMG.indx.45">
<IndexTerm Id="DFSAGR.CCHMG.indx.56" SpanEnd="DFSAGR.CCHMG.indx.46">
</Sect2>
</Sect1>
<Sect1 Id="DFSAGR.CCHMG.div.20">
<Title>Determining setuid Permission</Title>
<IndexTerm Id="DFSAGR.CCHMG.indx.57">
<Primary>permissions</Primary>
<Secondary><Command>setuid</Command></Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.CCHMG.indx.58">
<Primary><Command>setuid</Command> permission</Primary>
</IndexTerm>
<Para>Programs that have <Command>setuid</Command> permission allow users to perform operations 
and access local files for which they normally may not have the necessary
permissions.  Such a program allows anyone who uses it to execute with the
permissions of the user who owns the program for the duration of the program's
execution.
</Para>
<Para>While a <Command>setuid</Command> program executes, the person executing it is treated as 
the owner of the program.  The effective user identification number (UID) of
the executing program is the UID of the person who owns the program, not the
UID of the person who initiated the program's execution.  Thus, the person
executing the program is granted the same permissions as the person who owns
the program for as long as the program executes.
</Para>
<Para>A <Command>setuid</Command> program owned by <Literal>root</Literal> allows a user who executes the
program to execute with <Literal>root</Literal> privilege for the duration of the program.
When handled correctly, such <Command>setuid</Command> programs are very useful.  For
example, programs that modify the password file for a system (<Filename>/etc/passwd</Filename>
or its equivalent) are <Command>setuid</Command> programs that allow users to execute with
<Literal>root</Literal> privilege long enough to modify their passwords.  When handled
incorrectly, however, <Command>setuid</Command> programs owned by <Literal>root</Literal> can present
a serious breach in security.
</Para>
<Para>In the UNIX operating system, <Command>setuid</Command> programs are indicated by setting
a mode bit associated with a file.  By default, the Cache Manager does not
allow <Command>setuid</Command> programs to execute with <Command>setuid</Command> permission.  Use the
<Command>cm setsetuid</Command> command to enable <Command>setuid</Command> programs from specific
filesets to execute with <Command>setuid</Command> permission.  The command sets <Command>setuid</Command>
status on a per-fileset and per-Cache Manager basis.  It is commonly included in
a start-up file (<Filename>/etc/rc</Filename> or its equivalent) to enable <Command>setuid</Command> 
programs from a specified fileset at machine startup.
</Para>
<Para>Note that <Command>setuid</Command> programs are effective only in the local environment.
A <Command>setuid</Command> program can change only the local identity under which a program
runs; it cannot change the DCE identity with which a program executes because
it provides no Kerberos tickets.  DCE does not recognize the change to the local
identity associated with a <Command>setuid</Command> program.
</Para>
<Para>Use the <Command>cm getsetuid</Command> command to determine whether the Cache Manager
allows programs from specific filesets to execute with <Command>setuid</Command> permission.
<?sml-break><?sml-need 20></Para>
<Note>
<Para>Every program also has a <Command>setgid</Command> bit that, when set, allows a person
executing the program to execute with the permissions of the group that owns 
the program for the duration of its execution.  When the <Command>cm setsetuid</Command> 
command is used, it automatically enables or disables <Command>setgid</Command> permission 
at the same time.  Thus, if <Command>setuid</Command> programs are enabled on a fileset,
<Command>setgid</Command> programs are also enabled on that same fileset.
</Para>
</Note>
<Sect2 Id="DFSAGR.CCHMG.div.21">
<Title>Checking setuid Permission</Title>
<IndexTerm Id="DFSAGR.CCHMG.indx.59">
<Primary><Command>cm</Command> command suite</Primary>
<Secondary><Command>getsetuid</Command></Secondary>
</IndexTerm>
<Para>Issue the <Command>cm getsetuid</Command> command to determine the status of <Command>setuid</Command>
programs on specific filesets:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>cm getsetuid </Command>[<Option>path</Option> {<Symbol Role="Variable">filename</Symbol> | <Symbol Role="Variable">directory_name</Symbol>}...]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>path</Option> option specifies a file or directory from each fileset 
whose <Command>setuid</Command> status is to be displayed.  Omit this option to display the 
status for the fileset that contains the current working directory.
</Para>
<Para>The output from this command includes a line for each specified fileset,
stating one of the following:
</Para>
<ItemizedList>
<ListItem>
<Para><ComputerOutput>no setuid allowed</ComputerOutput>
</Para>
<Para>Indicates that <Command>setuid</Command> (and <Command>setgid</Command>) programs from the fileset are
disabled
</Para>
</ListItem>
<ListItem>
<Para><ComputerOutput>setuid allowed</ComputerOutput>
</Para>
<Para>Indicates that <Command>setuid</Command> (and <Command>setgid</Command>) programs from the fileset are
enabled
</Para>
</ListItem>
<ListItem>
<Para><ComputerOutput>cm: the fileset on which `</ComputerOutput><Symbol Role="Variable">pathname</Symbol><ComputerOutput>' resides does not exist</ComputerOutput>
</Para>
<Para>Indicates that the pathname specified with the <Option>path</Option> option is invalid
</Para>
</ListItem>
</ItemizedList>
<?sml-break>
<?sml-need 20>
</Sect2>
<Sect2 Id="DFSAGR.CCHMG.div.22">
<Title>Changing setuid Permission</Title>
<IndexTerm Id="DFSAGR.CCHMG.indx.60">
<Primary><Command>cm</Command> command suite</Primary>
<Secondary><Command>setsetuid</Command></Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.CCHMG.indx.61">
<Primary><Command>setgid</Command> bit</Primary>
</IndexTerm>
<Para>To change <Command>setuid</Command> permission, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Log in as <Literal>root</Literal> on the machine.
</Para>
</ListItem>
<ListItem>
<Para>Issue the <Command>cm setsetuid</Command> command to change the status of <Command>setuid</Command> (and
<Command>setgid</Command>) programs on specific filesets:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Command>cm setsetuid </Command>[<Option>path</Option> {<Symbol Role="Variable">filename</Symbol> | <Symbol Role="Variable">directory_name</Symbol>}...] \
[<Option>state</Option> {<Literal>on</Literal> |<Literal> off</Literal>}]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>path</Option> option specifies a file or directory from each fileset 
whose <Command>setuid</Command> status is to be changed.  Omit this option to change the 
status for the fileset that contains the current working directory.
</Para>
<Para>The <Option>state</Option> <Literal>on</Literal> option allows <Command>setuid</Command> programs from the indicated 
filesets to execute with <Command>setuid</Command> permission; the <Option>state</Option> <Literal>off</Literal> option
prevents <Command>setuid</Command> programs from the indicated filesets from executing 
with <Command>setuid</Command> permission.  If this option is omitted, <Command>setuid</Command> 
programs from the specified filesets are allowed to execute with <Command>setuid</Command> 
permission.
</Para>
</ListItem>
</OrderedList>
<IndexTerm Id="DFSAGR.CCHMG.indx.62" SpanEnd="DFSAGR.CCHMG.indx.57">
<IndexTerm Id="DFSAGR.CCHMG.indx.63" SpanEnd="DFSAGR.CCHMG.indx.58">
</Sect2>
</Sect1>
<Sect1 Id="DFSAGR.CCHMG.div.23">
<Title>Determining Device File Status</Title>
<IndexTerm Id="DFSAGR.CCHMG.indx.64">
<Primary>Cache Manager</Primary>
<Secondary>device file status</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.CCHMG.indx.65">
<Primary>device files</Primary>
<Secondary>determining status</Secondary>
</IndexTerm>
<!--.iX "diskless machines" "device files"-->
<!--.iX "machines" "diskless"-->
<Para>In UNIX file systems, devices are represented as special device files.  By
convention, device files reside in the <Filename>/dev</Filename> directory or a subdirectory
of that directory; the UNIX kernel always honors device files stored in the
<Filename>/dev</Filename> directory.  However, the Cache Manager determines whether device
files stored in filesets in the global namespace are honored.  By default, the
Cache Manager does not honor device files stored in filesets in the global
namespace.
</Para>
<Para>You can use the <Command>cm setdevok</Command> command to instruct the Cache Manager to
honor device files stored on specific filesets.  The command sets device file
status on a per-fileset and per-Cache Manager basis.  It is commonly included
in a start-up file (<Filename>/etc/rc</Filename> or its equivalent) to honor device files at
machine startup.
<!-- .cS-->
<!-- This is especially useful for diskless machines.  Because the \*L/dev\*O-->
<!-- directory cannot be a local directory, the Cache Manager must be instructed-->
<!-- to honor device files stored in filesets used by diskless machines.-->
<!-- .cE-->
</Para>
<Para>Use the <Command>cm getdevok</Command> command to determine whether the Cache Manager honors
device files from specific filesets.
</Para>
<Sect2 Id="DFSAGR.CCHMG.div.24">
<Title>Checking Device File Status</Title>
<IndexTerm Id="DFSAGR.CCHMG.indx.66">
<Primary><Command>cm</Command> command suite</Primary>
<Secondary><Command>getdevok</Command></Secondary>
</IndexTerm>
<Para>Issue the <Command>cm getdevok</Command> command to determine whether the Cache Manager
honors device files on specific filesets:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>cm getdevok </Command>[<Option>path</Option> {<Symbol Role="Variable">filename</Symbol> | <Symbol Role="Variable">directory_name</Symbol>}...]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>path</Option> option specifies a file or directory from each fileset about 
which device file status information is to be displayed.  Omit this option 
to display the status for the fileset containing the current working directory.
</Para>
<Para>The output from this command includes one line for each specified fileset,
stating one of the following:
</Para>
<ItemizedList>
<ListItem>
<Para><ComputerOutput>device files allowed</ComputerOutput>
</Para>
<Para>Indicates that device files from the fileset are honored
</Para>
</ListItem>
<ListItem>
<Para><ComputerOutput>device files not allowed</ComputerOutput>
</Para>
<Para>Indicates that device files from the fileset are not honored
</Para>
</ListItem>
<ListItem>
<Para><ComputerOutput>cm: the fileset on which `</ComputerOutput><Symbol Role="Variable">pathname</Symbol><ComputerOutput>' resides does not exist</ComputerOutput>
</Para>
<Para>Indicates that the pathname specified with the <Option>path</Option> option is invalid
</Para>
</ListItem>
</ItemizedList>
</Sect2>
<Sect2 Id="DFSAGR.CCHMG.div.25">
<Title>Changing Device File Status</Title>
<IndexTerm Id="DFSAGR.CCHMG.indx.67">
<Primary><Command>cm</Command> command suite</Primary>
<Secondary><Command>setdevok</Command></Secondary>
</IndexTerm>
<Para>To change device file status, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Log in as <Literal>root</Literal> on the machine.
</Para>
</ListItem>
<ListItem>
<Para>Issue the <Command>cm setdevok</Command> command to change the status of device files on
specific filesets:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Command>cm setdevok </Command>[<Option>path</Option> {<Symbol Role="Variable">filename</Symbol> | <Symbol Role="Variable">directory_name</Symbol>}...] \
[<Option>state</Option> {<Literal>on</Literal> | <Literal>off</Literal>}]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>path</Option> option specifies a file or directory from each fileset for 
which device file status is to be changed.  Omit this option to change the 
status for the fileset containing the current working directory.
</Para>
<Para>The <Option>state</Option> <Literal>on</Literal> option causes device files from the indicated filesets to 
be honored; the <Option>state</Option> <Literal>off</Literal> option prevents device files from the 
indicated filesets from being honored.  If this option is omitted, device 
files from the specified filesets are honored.
</Para>
</ListItem>
</OrderedList>
<IndexTerm Id="DFSAGR.CCHMG.indx.68" SpanEnd="DFSAGR.CCHMG.indx.64">
<IndexTerm Id="DFSAGR.CCHMG.indx.69" SpanEnd="DFSAGR.CCHMG.indx.65">
</Sect2>
</Sect1>
<Sect1 Id="DFSAGR.CCHMG.div.26">
<Title>Updating Cached Data</Title>
<IndexTerm Id="DFSAGR.CCHMG.indx.70">
<Primary>cache</Primary>
<Secondary>updating</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.CCHMG.indx.71">
<Primary>cache</Primary>
<Secondary>criteria for updating</Secondary>
</IndexTerm>
<Para>When an application program requests new data and the cache is full, the Cache
Manager discards some data to make room for the new information.  It discards
databased on the following two factors:
</Para>
<ItemizedList>
<ListItem>
<Para>If the data is reproducible; information is considered reproducible if it is
unchanged from its first retrieval.  By definition, data from read-only filesets
is always reproducible; data from read/write filesets that was changed by a 
local application is considered reproducible if the changes are stored to 
the File Server machine.
</Para>
</ListItem>
<ListItem>
<Para>When the application program last referenced the data; data not used for the
longest time is discarded first.
</Para>
</ListItem>
</ItemizedList>
<Para>Thus, reproducible data not used for the longest time is discarded first. The
Cache Manager continues to discard Least Recently Used (LRU) data in this
fashion until there is enough room for the new data.
</Para>
<Para>You can force the Cache Manager to discard, or flush, data cached from files,
directories, and filesets.  You can flush individual files or directories with
the <Command>cm flush</Command> command, or you can flush one or more filesets with the
<Command>cm flushfileset</Command> command.  Flushing is necessary only in the event of file
system problems or for testing purposes.  The <Command>cm flush</Command> and <Literal>cm
flushfileset</Literal> commands do not cause the Cache Manager to discard changes to
data not written back to the central copies of files.  These commands also do 
not affect data in the buffers of application programs.
</Para>
<Para>The Cache Manager checks once an hour for changes that do not involve tokens, 
such as the release of a new version of a cached read-only fileset or a name 
change for any cached fileset.  You can force the Cache Manager to notice 
these changes at other times with the <Command>cm checkfilesets</Command> command, which 
directs the Cache Manager to revise its table of mappings between fileset 
names and fileset ID numbers.
</Para>
<Sect2 Id="DFSAGR.CCHMG.div.27">
<Title>Flushing Specific Files or Directories</Title>
<IndexTerm Id="DFSAGR.CCHMG.indx.72">
<Primary><Command>cm</Command> command suite</Primary>
<Secondary><Command>flush</Command></Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.CCHMG.indx.73">
<Primary>cache</Primary>
<Secondary>flushing</Secondary>
</IndexTerm>
<Para>Issue the <Command>cm flush</Command> command to discard data from specific files or
directories:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>cm flush </Command>[<Option>path</Option> {<Symbol Role="Variable">filename</Symbol> | <Symbol Role="Variable">directory_name</Symbol>}...]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>path</Option> option names each file or directory that you want to flush 
from the cache.  If a <Symbol Role="Variable">directory_name</Symbol> is used, the Cache Manager flushes 
the name mappings and the blocks associated only with the directory, not with
the files in the directory.  If this option is omitted, the current working 
directory is flushed.
</Para>
</Sect2>
<Sect2 Id="DFSAGR.CCHMG.div.28">
<Title>Flushing All Data from Specific Filesets</Title>
<IndexTerm Id="DFSAGR.CCHMG.indx.74">
<Primary><Command>cm</Command> command suite</Primary>
<Secondary><Command>flushfileset</Command></Secondary>
</IndexTerm>
<Para>Issue the <Command>cm flushfileset</Command> command to discard data from specific filesets:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>cm flushfileset </Command>[<Option>path</Option> {<Symbol Role="Variable">filename</Symbol> | <Symbol Role="Variable">directory_name</Symbol>}...]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>path</Option> option names each file or directory in a fileset whose 
contents you want to flush.  The Cache Manager flushes everything cached from 
each fileset that contains a specified file or directory.  If this option 
is omitted, the fileset that contains the current working directory is flushed.
</Para>
</Sect2>
<Sect2 Id="DFSAGR.CCHMG.div.29">
<Title>Forcing the Cache Manager to Notice Other Fileset Changes</Title>
<Para>Issue the <Command>cm checkfilesets</Command> command to make the Cache Manager check for
changes to information about filesets that contain cached data:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>cm checkfilesets</Command>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para><IndexTerm Id="DFSAGR.CCHMG.indx.75" SpanEnd="DFSAGR.CCHMG.indx.73"></Para>
</Sect2>
</Sect1>
<Sect1 Id="DFSAGR.CCHMG.div.30">
<Title>Discarding Unstored Data</Title>
<IndexTerm Id="DFSAGR.CCHMG.indx.76">
<Primary>Cache Manager</Primary>
<Secondary>discarding data</Secondary>
</IndexTerm>
<Para>The Cache Manager may occasionally be unable to write cached data back to a
File Server machine, possibly because the File Server machine is down or
because network problems prevent the Cache Manager from reaching it.  In this
event, the Cache Manager displays a message on the screen to notify the user
that it cannot write the data to the File Server machine.  If possible, it also
returns a failure code to the application program that is using the data.
</Para>
<Para>The Cache Manager keeps the unstored data in the cache and continues to attempt to contact the File Server machine until it can store the data. (The frequency with which the Cache Manager attempts to reach a File Server machine is 
defined with the <Option>pollinterval</Option> option of the <Command>fxd</Command> command issued 
on that File Server machine.) In the meantime, corrective measures can be 
taken to alleviate the problem that prevents the data from being stored; for 
example, the File Server machine can be restarted.  Once the problem is 
alleviated, the Cache Manager can contact the File Server machine and store 
the data.
</Para>
<Para>The Cache Manager discards unstored data only when
</Para>
<ItemizedList>
<ListItem>
<Para>It needs to make room in the cache for other data.  Given an average-sized cache
with average usage, the Cache Manager rarely needs to discard unstored data.
</Para>
</ListItem>
<ListItem>
<Para>The <Command>cm resetstores</Command> command is issued to force the Cache Manager to 
discard unstored data from the cache.  This command cancels the Cache 
Manager's continued attempts to contact unavailable File Server machines; 
<Replaceable>all</Replaceable> data that the Cache Manager cannot store to such File Server machines
is discarded; you cannot selectively discard individual files or data from 
specific filesets.
</Para>
</ListItem>
</ItemizedList>
<Para>The <Command>cm resetstores</Command> command affects only data that could not be written
to a File Server machine; it does not affect other data in the cache.
Nonetheless, issue the command only after issuing the <Command>cm lsstores</Command>
command.  The <Command>cm lsstores</Command> command lists the fileset ID numbers of
filesets that contain data that the Cache Manager cannot write to a File Server
machine.  Examine the output of the command to be sure that you know from
which filesets unstored data will be discarded.  You may be able to use this
information to ensure that unstored data from the indicated filesets can
safely be discarded.
</Para>
<Note>
<Para>Because unstored data discarded from the cache cannot be recovered, any
problem that prevents data from being written to a File Server machine should
be handled promptly.
</Para>
</Note>
<Para RevisionFlag="Changed"><?og-ChangeStart enh,13566,R1.2.2,Add multihomed server">You can use the <Command>cm statservers</Command> command to determine which File Server
machines are failing to respond to the Cache Manager. (See Section 8.12 for
information about the <Command>cm statservers</Command> command.)
<?og-ChangeEnd enh,13566,R1.2.2,Add multihomed server"></Para>
<Sect2 Id="DFSAGR.CCHMG.div.31">
<Title>Listing Unstored Data</Title>
<IndexTerm Id="DFSAGR.CCHMG.indx.77">
<Primary><Command>cm</Command> command suite</Primary>
<Secondary><Command>lsstores</Command></Secondary>
</IndexTerm>
<Para>Issue the <Command>cm lsstores</Command> command to list filesets that contain unstored data
that the Cache Manager cannot write back to a File Server machine:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>cm lsstores</Command>
</UserInput></ProgramListing></Para>
</InformalExample>
</Sect2>
<Sect2 Id="DFSAGR.CCHMG.div.32">
<Title>Discarding Unstored Data</Title>
<IndexTerm Id="DFSAGR.CCHMG.indx.78">
<Primary><Command>cm</Command> command suite</Primary>
<Secondary><Command>resetstores</Command></Secondary>
</IndexTerm>
<Para>To discard unstored data, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Log in as <Literal>root</Literal> on the machine.
</Para>
</ListItem>
<ListItem>
<Para>Issue the <Command>cm resetstores</Command> command to cancel any further attempts by the
Cache Manager to contact unavailable File Server machines.  The Cache Manager
discards all data that it has been unable to store to such File Server
machines.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Command>cm resetstores</Command>
</UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
</OrderedList>
<IndexTerm Id="DFSAGR.CCHMG.indx.79" SpanEnd="DFSAGR.CCHMG.indx.70">
<IndexTerm Id="DFSAGR.CCHMG.indx.80" SpanEnd="DFSAGR.CCHMG.indx.76">
<IndexTerm Id="DFSAGR.CCHMG.indx.81" SpanEnd="DFSAGR.CCHMG.indx.13">
<IndexTerm Id="DFSAGR.CCHMG.indx.82" SpanEnd="DFSAGR.CCHMG.indx.3">
<IndexTerm Id="DFSAGR.CCHMG.indx.83" SpanEnd="DFSAGR.CCHMG.indx.1">
</Sect2>
</Sect1>
<Sect1 Id="DFSAGR.CCHMG.div.33">
<Title>Checking File Server Machine Status</Title>
<IndexTerm Id="DFSAGR.CCHMG.indx.84">
<Primary>Cache Manager</Primary>
<Secondary>checking File Server status</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.CCHMG.indx.85">
<Primary>File Server machines</Primary>
<Secondary>checking status</Secondary>
</IndexTerm>
<Para>If the Cache Manager cannot access files or save files that it currently has
cached, you can use the <Command>cm statservers</Command> command to determine if one or
more File Server machines are currently inaccessible.  The command checks the
status of each File Server machine with which the Cache Manager has been in
contact.  The command does not report the reason that a File Server machine
is unavailable, but it does list the names of unresponsive machines.
</Para>
<Para>The Cache Manager classifies as unresponsive any File Server machine that
meets the following pair of conditions:
</Para>
<ItemizedList>
<ListItem>
<Para>The Cache Manager has been in contact with the File Exporter running on the
machine and needs to contact it in the future (for example, the Cache Manager
is holding tokens to data on the machine).
</Para>
</ListItem>
<ListItem>
<Para>The File Exporter on the machine is not responding to the Cache Manager's
periodic probes (implying that it also is not responding to requests for data).
</Para>
</ListItem>
</ItemizedList>
<Para>The Cache Manager does not probe all File Server machines in the local cell;
it probes only those File Server machines that house data it has cached.
Similarly, the <Command>cm statservers</Command> command is concerned only with File Server
machines that do not respond to the Cache Manager's probes.  You can use the
command to check the statuses of File Server machines that meet the first of
the previous two conditions and reside in the local cell, in a specific foreign
cell, or in any cell.
</Para>
<Para><IndexTerm Id="DFSAGR.CCHMG.indx.86">
<Primary><Command>cm</Command> command suite</Primary>
<Secondary><Command>statservers</Command></Secondary>
</IndexTerm>To check the status of each File Server machine with which the Cache Manager
has been in contact, issue the <Command>cm statservers</Command> command:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>cm statservers </Command>[{<Option>cell</Option> <Symbol Role="Variable">cellname</Symbol> | <Option>all</Option>}] [<Option>fast</Option>]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>cell</Option> <Symbol Role="Variable">cellname</Symbol> option specifies the name of a foreign cell
whose File Server machines the Cache Manager is to check.  The Cache Manager
determines the status of each File Server machine with which it has been
in contact from the specified cell.  Use the <Option>cell</Option> option or use the
<Option>all</Option> option to direct the Cache Manager to check File Server machines
in all cells; omit both options to check the status of each File Server
machine the Cache Manager has contacted from the local cell only.
<?sml-break><?sml-need 20></Para>
<Para>The <Option>all</Option> option directs the command to check the status of each File
Server machine with which it has been in contact, regardless of the cell in
which a machine resides.  Use the <Option>all</Option> option or use the <Option>cell</Option>
option to specify a specific foreign cell whose File Server machines the
Cache Manager is to check; omit both options to check the status of each
File Server machine the Cache Manager has contacted from the local cell only.
</Para>
<Para>The <Option>fast</Option> option directs the command to display the results of its
most recent probes.  The Cache Manager does not probe File Server machines to
determine their statuses at the instant the command is issued.
</Para>
<Para>If all of the File Server machines that it probes respond, the Cache Manager
displays the following output in response to the command:
</Para>
<InformalExample>
<Para><ProgramListing>All servers are running.
</ProgramListing></Para>
</InformalExample>
<Para>If one or more of the File Server machines that it probes do not respond, the
Cache Manager displays the following output:
</Para>
<InformalExample>
<Para><ProgramListing>These servers are still down: <Symbol Role="Variable">hostname</Symbol>
</ProgramListing></Para>
</InformalExample>
<Para RevisionFlag="Changed"><?og-ChangeStart enh,13566,R1.2.2,Add multihomed server">where <Symbol Role="Variable">hostname</Symbol> is the name of each File Server machine that fails to
respond. In a multihomed server environment, the
<Symbol Role="Variable">hostname</Symbol> corresponds to the machine name that the Cache Manager is
currently using to access each File Server machine.  The output does
not contain multiple machine host names for the same File Server machine. 
<?og-ChangeEnd enh,13566,R1.2.2,Add multihomed server"><IndexTerm Id="DFSAGR.CCHMG.indx.87" SpanEnd="DFSAGR.CCHMG.indx.84"><IndexTerm Id="DFSAGR.CCHMG.indx.88" SpanEnd="DFSAGR.CCHMG.indx.85"><?og-ChangeStart enh, 13605, R1.2.2, Security enhancements"></Para>
<Sect2 Id="DFSAGR.CCHMG.div.34">
<Title RevisionFlag="Changed">RPC Authentication Level Configuration</Title>
<Para RevisionFlag="Changed">You can set the RPC authentication level for communications between the Cache Manager and File Servers.  By default, such communications use the packet integrity DCE RPC authentication level (each RPC is authenticated and the data is checked to ensure that it was not modified in transit). However, circumstances at your site may require higher security or permit lower security for File Server communications.  The following lists the range of authentication levels: 
</Para>
<VariableList>
<VarListEntry>
<Term RevisionFlag="Changed">Default</Term>
<ListItem>
<Para RevisionFlag="Changed">Use the DCE default authentication level.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term RevisionFlag="Changed">None</Term>
<ListItem>
<Para RevisionFlag="Changed">Perform no authentication.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term RevisionFlag="Changed">Connect</Term>
<ListItem>
<Para RevisionFlag="Changed">Authenticate only when the Cache Manager establishes a connection with the File Server.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term RevisionFlag="Changed">Call</Term>
<ListItem>
<Para RevisionFlag="Changed">Authenticate only at the beginning of each RPC received.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term RevisionFlag="Changed">Packet</Term>
<ListItem>
<Para RevisionFlag="Changed">Ensure that all data received is from the expected host (authenticate).
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term RevisionFlag="Changed">Packet Integrity</Term>
<ListItem RevisionFlag="Changed">
<?sml-break>
<Para>Ensure that all data received is from the expected host and verify that none of the data has been modified.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term RevisionFlag="Changed">Packet Privacy</Term>
<ListItem RevisionFlag="Changed">
<?sml-break>
<Para>Perform authentication as specified by all of the previous levels and also encrypt each RPC argument value.
</Para>
</ListItem>
</VarListEntry>
</VariableList>
<Para RevisionFlag="Changed">Note that higher authentication levels do incur some overhead and therefore cause some degradation in performance.  Lower security levels, while more efficient, do carry an additional risk of attack.
</Para>
<Para RevisionFlag="Changed">You can set separate authentication levels for dealing with File Servers in the local cell and for dealing with File Servers in foreign cells.  These authentication levels are set through two pairs of values. Each pair of values consists of the following:
</Para>
<ItemizedList>
<ListItem>
<Para RevisionFlag="Changed">An initial RPC authentication level.  This value sets the initial RPC authentication level used by the Cache Manager when it attempts to establish communications with a File Server. The initial level is used as a starting point in negotiating an RPC authentication level with the File Server.
</Para>
</ListItem>
<ListItem>
<Para RevisionFlag="Changed">A minimum RPC authentication level.  This value defines a lower bound RPC authentication level for the Cache Manager.  Should a File Server request an authentication level below this level, the Cache Manager will refuse communications with that File Server.
</Para>
</ListItem>
</ItemizedList>
<Para RevisionFlag="Changed">For a complete description of how the Cache Manager negotiates the RPC authentication level, see Section 2.5.  In short, each File Server (File Exporter) maintains its own pairs of security values.  These pairs set maximum and minimum bounds that control RPC authentication for communications with Cache Managers.  As with the Cache Manager, one pair controls communications with Cache Managers within the local cell while the other controls communications with Cache Managers in foreign cells.  By default, the RPC authentication settings at the File Server and Cache Manager will negotiate to the packet integrity authentication level.
</Para>
<Para RevisionFlag="Changed">The Cache Manager begins the negotiation by sending an RPC to the File Server at the authentication level determined by its initial RPC setting.  The File Manager then replies in one of the following three ways:
</Para>
<ItemizedList>
<ListItem>
<Para RevisionFlag="Changed">The File Server accepts the RPC authentication level it received (the level fell within the range defined by its upper and lower bounds) and begins the process of sending and receiving fileset data with the Cache Manager.
</Para>
</ListItem>
<ListItem>
<Para RevisionFlag="Changed">The File Server finds that the RPC authentication level is above its upper bound and sends a response to the Cache Manager instructing it to lower its authentication level.  If the Cache Manager is currently using an authentication level equal to the Cache Manager's lower bound, the Cache Manager will cease attempts to communicate with the File Server.
</Para>
</ListItem>
<ListItem>
<Para RevisionFlag="Changed">The File Server finds that the RPC authentication level is below its lower bound and sends a response to the Cache Manager instructing it to raise its authentication level.
</Para>
</ListItem>
</ItemizedList>
<Para RevisionFlag="Changed">The following sections detail how to initially configure the Cache Manager RPC authentication levels and how to adjust those levels for a running Cache Manager.
</Para>
<Sect3 Id="DFSAGR.CCHMG.div.35">
<Title RevisionFlag="Changed">Configuring RPC Authentication Levels</Title>
<Para RevisionFlag="Changed">The default Cache Manager and File Server authentication settings are such that they will negotiate to the packet integrity authentication level.  Use the following options to set the authentication levels at the Cache Manager:
</Para>
<ItemizedList>
<ListItem>
<Para RevisionFlag="Changed"><Option>initiallocalprotectlevel</Option> - Specifies the initial DCE RPC authentication 
level for communications between the Cache Manager and File Servers
within the local cell. 
</Para>
</ListItem>
<ListItem>
<Para RevisionFlag="Changed"><Option>minlocalprotectlevel</Option> - Specifies the minimum acceptable DCE RPC authentication level for communications between the Cache Manager and File Servers within the
local cell. 
</Para>
</ListItem>
<ListItem>
<Para RevisionFlag="Changed"><Option>initialremoteprotectlevel</Option> - Specifies the initial DCE RPC authentication level for communications between the Cache Manager and File Servers within foreign cells.
</Para>
</ListItem>
<ListItem>
<Para RevisionFlag="Changed"><Option>minremoteprotectlevel</Option> -
Specifies the minimum acceptable DCE RPC authentication level for
communications between the Cache Manager and File Servers within
foreign cells. 
</Para>
</ListItem>
</ItemizedList>
<Para RevisionFlag="Changed">Each of the above options takes either a string, abbreviated string, or integer value as an argument to define the RPC authentication level.  The following lists the values you can use:
</Para>
<ItemizedList>
<ListItem>
<Para><Literal RevisionFlag="Changed">rpc_protect_level_default</Literal> or <Literal RevisionFlag="Changed">default</Literal> or <Literal RevisionFlag="Changed">0</Literal>: Use the DCE default authentication level.
</Para>
</ListItem>
<ListItem>
<Para><Literal RevisionFlag="Changed">rpc_protect_level_none</Literal> or <Literal RevisionFlag="Changed">none</Literal> or <Literal RevisionFlag="Changed">1</Literal>: Perform no authentication.
</Para>
</ListItem>
<ListItem>
<Para><Literal RevisionFlag="Changed">rpc_protect_level_connect</Literal> or <Literal RevisionFlag="Changed">connect</Literal> or <Literal RevisionFlag="Changed">2</Literal>: Authenticate only when the Cache Manager establishes a connection with the File Server.
</Para>
</ListItem>
<ListItem>
<Para><Literal RevisionFlag="Changed">rpc_protect_level_call</Literal> or <Literal RevisionFlag="Changed">call</Literal> or <Literal RevisionFlag="Changed">3</Literal>: Authenticate only at the beginning of each RPC received.
</Para>
</ListItem>
<ListItem>
<Para><Literal RevisionFlag="Changed">rpc_protect_level_pkt</Literal> or <Literal RevisionFlag="Changed">pkt</Literal> or <Literal RevisionFlag="Changed">4</Literal>: Ensure that all data received is from the expected host.
</Para>
</ListItem>
<ListItem>
<Para><Literal RevisionFlag="Changed">rpc_protect_level_pkt_integrity</Literal> or <Literal RevisionFlag="Changed">pkt_integrity</Literal> or <Literal RevisionFlag="Changed">5</Literal>: Authenticate and verify that none of the
data transferred has been modified.
</Para>
</ListItem>
<ListItem>
<Para><Literal RevisionFlag="Changed">rpc_protect_level_pkt_privacy</Literal> or <Literal RevisionFlag="Changed">pkt_privacy</Literal> or <Literal RevisionFlag="Changed">6</Literal>: Perform authentication as specified by all of the previous levels and also encrypt each RPC argument value.
</Para>
</ListItem>
</ItemizedList>
<Para RevisionFlag="Changed">The following example sets the initial RPC authentication level for the home cell to connect, the minimum authentication RPC level for the home cell to none, the initial RPC authentication level for foreign cells to packet privacy, and the minimum authentication level for foreign cells also to packet privacy.
</Para>
<InformalExample>
<Para><ProgramListing RevisionFlag="Changed">$ <Literal>dfsd -initiallocalprotectlevel rpc_protect_level_connect -minlocalprotectlevel 
none -initialremoteprotectlevel 6 -initialremoteprotectlevel pkt_privacy</Literal>
</ProgramListing></Para>
</InformalExample>
<Para RevisionFlag="Changed">When configuring the authentication levels, any combination of <Command>dfsd</Command> options is allowed.
</Para>
</Sect3>
<Sect3 Id="DFSAGR.CCHMG.div.36">
<Title RevisionFlag="Changed">Changing the RPC Authentication Levels Temporarily</Title>
<Para RevisionFlag="Changed">You can reset any of the RPC authentication levels without rebooting the machine by using the <Command>cm setprotectlevels</Command> command. The values you alter remain in effect until you next reboot the machine. 
</Para>
<Para RevisionFlag="Changed">To change the authentication levels temporarily, do the following:
</Para>
<OrderedList>
<ListItem>
<Para RevisionFlag="Changed">Log in as <Literal>root</Literal> on the machine.
</Para>
</ListItem>
<ListItem>
<Para RevisionFlag="Changed">Issue the <Command>cm setprotectlevels</Command> command with the appropriate options.
</Para>
</ListItem>
</OrderedList>
<InformalExample>
<Para><ProgramListing><UserInput RevisionFlag="Changed"># <Command>cm setprotectlevels</Command> [<Option>initiallocalprotectlevel</Option> <Symbol Role="Variable">level</Symbol>] &bsol;
[<Option>minlocalprotectlevel</Option> <Symbol Role="Variable">level</Symbol>] &bsol;
[<Option>initialremoteprotectlevel</Option> <Symbol Role="Variable">level</Symbol>] [<Option>minremoteprotectlevel</Option><Literal> </Literal><Symbol Role="Variable">level</Symbol>] 
</UserInput></ProgramListing></Para>
</InformalExample>
<Para RevisionFlag="Changed">The various options are defined as follows:
</Para>
<VariableList>
<VarListEntry role="linebreak">
<Term RevisionFlag="Changed"><Option>initiallocalprotectlevel</Option> <Symbol Role="Variable">level</Symbol></Term>
<ListItem>
<Para RevisionFlag="Changed">Specifies the initial DCE RPC authentication 
level for communications between the Cache Manager and File Servers
within the same cell. 
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term RevisionFlag="Changed"><Option>minlocalprotectlevel</Option> <Symbol Role="Variable">level</Symbol></Term>
<ListItem>
<Para RevisionFlag="Changed">Specifies the minimum acceptable DCE RPC authentication level for
communications between the Cache Manager and File Servers within the
same cell. 
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term RevisionFlag="Changed"><Option>initialremoteprotectlevel</Option> <Symbol Role="Variable">level</Symbol></Term>
<ListItem>
<Para RevisionFlag="Changed">Specifies the initial DCE RPC authentication level for 
communications between the Cache Manager and File Servers within foreign cells.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term RevisionFlag="Changed"><Option>minremoteprotectlevel</Option> <Symbol Role="Variable">level</Symbol></Term>
<ListItem>
<Para RevisionFlag="Changed">Specifies the minimum acceptable DCE RPC authentication level for
communications between the Cache Manager and File Servers within
foreign cells. 
</Para>
</ListItem>
</VarListEntry>
</VariableList>
<Para RevisionFlag="Changed">Where <Symbol Role="Variable">level</Symbol> is the appropriate RPC authentication level. The various levels can be set by specifying a complete string, an abbreviated string, or a corresponding integer value.  The valid arguments for <Symbol Role="Variable">level</Symbol> are defined in Section 5.12.1.1.
</Para>
<Para RevisionFlag="Changed">The following example command
</Para>
<ItemizedList>
<ListItem>
<Para RevisionFlag="Changed">Sets the initial authentication level for communications
with File Servers in the local cell to packet integrity.
</Para>
</ListItem>
<ListItem>
<Para RevisionFlag="Changed">Sets the minimum authentication level for communications with File Servers in 
the local cell to packet.
</Para>
</ListItem>
<ListItem>
<Para RevisionFlag="Changed">Sets the initial authentication level for communications with File Servers in foreign cells to packet privacy.
</Para>
</ListItem>
<ListItem>
<Para RevisionFlag="Changed">Sets the minimum authentication level for communications with File Servers in 
foreign cells to packet privacy.
</Para>
</ListItem>
</ItemizedList>
<InformalExample>
<Para><ProgramListing>$ <UserInput RevisionFlag="Changed"><Literal>cm setprotectlevels -initiallocalprotectlevel pkt_integ -minlocalprotectlevel 4 \
-initialremoteprotectlevel 6 -minremoteprotectlevel 6</Literal> 
</UserInput></ProgramListing></Para>
</InformalExample>
</Sect3>
<Sect3 Id="DFSAGR.CCHMG.div.37">
<Title RevisionFlag="Changed">Checking RPC Authentication Levels</Title>
<Para RevisionFlag="Changed">You can check the Cache Manager's current RPC authentication levels by using the <Command>cm getprotectlevels</Command> command:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput RevisionFlag="Changed">$ <Command>cm getprotectlevels</Command>
</UserInput></ProgramListing></Para>
</InformalExample>
<InformalExample>
<Para><ProgramListing RevisionFlag="Changed">Initial protection level in the local cell: <Symbol Role="Variable">value</Symbol> 
Minimum protection level in the local cell: <Symbol Role="Variable">value</Symbol>
Initial protection level in non-local cells: <Symbol Role="Variable">value</Symbol>
Minimum protection level in non-local cells: <Symbol Role="Variable">value</Symbol>
</ProgramListing></Para>
</InformalExample>
<Para RevisionFlag="Changed">The various possible output strings for <Symbol Role="Variable">value</Symbol> are as follows:
</Para>
<ItemizedList>
<ListItem>
<Para><Literal RevisionFlag="Changed">rpc_c_protect_level_default</Literal> - default
</Para>
</ListItem>
<ListItem>
<Para><Literal RevisionFlag="Changed">rpc_c_protect_level_none</Literal> - none
</Para>
</ListItem>
<ListItem>
<Para><Literal RevisionFlag="Changed">rpc_c_protect_level_connect</Literal> - connect
</Para>
</ListItem>
<ListItem>
<Para><Literal RevisionFlag="Changed">rpc_c_protect_level_call</Literal> - call
</Para>
</ListItem>
<ListItem>
<Para><Literal RevisionFlag="Changed">rpc_c_protect_level_pkt</Literal> - packet
</Para>
</ListItem>
<ListItem>
<Para><Literal RevisionFlag="Changed">rpc_c_protect_level_pkt_integ</Literal> - packet integrity
</Para>
</ListItem>
<ListItem>
<Para><Literal RevisionFlag="Changed">rpc_c_protect_level_pkt_privacy</Literal> - packet privacy
</Para>
</ListItem>
</ItemizedList>
<?og-ChangeEnd enh, 13605, R1.2.2, Security enhancements">
</Sect3>
</Sect2>
</Sect1>
</Chapter>
<!--+ 10/19/96 18:43:16
    | tagMorph:  $Id: cachemgr.sgm,v 1.1.2.7 1996/12/16 17:12:16 wardr Exp $
    | tagMorph library:  $Id: cachemgr.sgm,v 1.1.2.7 1996/12/16 17:12:16 wardr Exp $
    | sml-to-docbook:  1.23
    +-->
