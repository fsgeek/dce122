<!--
# @OSF_COPYRIGHT@
# 
# 
# HISTORY
# $Log: ftavail.sgm,v $
# Revision 1.1.2.6  1996/12/15  23:01:54  wardr
# 	{edit,R1.2.2}
# 	[D[DFiformatting problems before penultimate build
# 	[1996/12/15  23:00:18  wardr]
#
# Revision 1.1.2.5  1996/12/14  23:14:15  wardr
# 	{edit,R1.2.2}
# 	Fixed figure problems
# 	[1996/12/14  23:12:33  wardr]
# 
# Revision 1.1.2.4  1996/11/06  18:47:04  weir
# 	Cleaned up history
# 	[1996/11/06  18:45:56  weir]
# 
# Revision 1.1.2.3  1996/10/28  17:33:48  carrig
# 	{edit,R1.2.2}
# 	Ready for editing
# 	[1996/10/28  17:32:34  carrig]
# 
# 	{edit,R1.2.2}
# 	Ready for editing
# 	[1996/10/28  17:22:33  carrig]
# 
# Revision 1.1.2.2  1996/10/24  20:10:23  carrig
# 	{enh,R1.2.2}
# 	Fixed tables
# 	[1996/10/24  20:08:25  carrig]
# 
# Revision 1.1.2.1  1996/10/22  20:42:45  wardr
# 	{edit,R1.2.2}
# 	Initial checkin after sgml conversion
# 	[1996/10/22  20:41:06  wardr]
# 
# Revision 1.1.1.2  1996/10/22  20:41:06  wardr
# 	{edit,R1.2.2}
# 	Initial checkin after sgml conversion
# 
# $EndLog$
-->
<!---->
<!-- Fragment document type declaration subset:
ArborText, Inc., 1988-1993, v.4001
<!DOCTYPE Book PUBLIC "-//Davenport//DTD DocBook V2.4//EN" [
]>
-->
<!---->
<!-- COPYRIGHT NOTICE-->
<!-- Copyright (c) 1990, 1991, 1992, 1993 Open Software Foundation, Inc.-->
<!-- ALL RIGHTS RESERVED (DCE).  See the file named COPYRIGHT.DCE in the-->
<!-- src directory for the full copyright text.-->
<!---->
<!---->
<!-- HISTORY-->
<!-- Revision 1.1.10.4  1996/09/16  20:03:19  wfl-->
<!-- 	Added editorial changes-->
<!-- 	[1996/09/16  20:01:57  wfl]-->
<!---->
<!-- Revision 1.1.10.3  1996/08/20  15:44:35  wfl-->
<!-- 	{enh,13605,R1.2.2}-->
<!-- 	Security enhancement-->
<!-- 	[1996/08/20  15:43:20  wfl]-->
<!-- -->
<!-- Revision 1.1.10.2  1996/07/16  19:55:11  wfl-->
<!-- 	{enh, 13566, R1.2.2}-->
<!-- 	Added multihomed servers-->
<!-- 	[1996/07/16  19:54:44  wfl]-->
<!-- -->
<!-- Revision 1.1.10.1  1996/05/14  19:52:15  wardr-->
<!-- 	{enh,R1.2.2}-->
<!-- 	Removed changebars-->
<!-- 	[1996/05/14  19:51:07  wardr]-->
<!-- -->
<!-- Revision 1.1.8.4  1995/12/29  17:27:46  wfl-->
<!-- 	{edit, R1.2.1}-->
<!-- 	made copy edits-->
<!-- 	[1995/12/29  17:26:56  wfl]-->
<!-- -->
<!-- Revision 1.1.8.3  1995/10/04  16:00:03  wfl-->
<!-- 	{def, 13140, R1.2.1}-->
<!-- 	Fixed quotes in change markers-->
<!-- 	[1995/10/04  15:59:32  wfl]-->
<!-- -->
<!-- Revision 1.1.8.2  1995/09/18  16:30:55  wfl-->
<!-- 	{enh,13107,R1.2.1}-->
<!-- 	Clarify shared-file locks-->
<!-- 	[1995/09/18  16:30:25  wfl]-->
<!-- -->
<!-- Revision 1.1.8.1  1995/09/15  19:57:34  wfl-->
<!-- 	{enh, 13096, R1.2.1}-->
<!-- 	Add information detailing that read-only fileset replication is now-->
<!-- 	parallel (not serial).-->
<!-- 	{enh, 13109, R1.2.1}-->
<!-- 	Add -wait option for the fts_release command.-->
<!-- 	[1995/09/15  19:56:03  wfl]-->
<!-- -->
<!-- Revision 1.1.6.40  1995/07/24  18:27:40  buckler-->
<!-- 	More 1.1 edits.-->
<!-- 	[1995/07/24  18:27:15  buckler]-->
<!-- -->
<!-- Revision 1.1.6.39  1995/07/13  16:26:20  weir-->
<!-- 	Prentice-Hall edits-->
<!-- 	[1995/07/13  16:25:32  weir]-->
<!-- -->
<!-- Revision 1.1.6.38  1994/10/14  19:35:21  jeff-->
<!-- 	{defect, 12535, R1.1}-->
<!-- 	Incorporate dcecp commands in DFS documentation.-->
<!-- 	[1994/10/14  19:33:32  jeff]-->
<!-- -->
<!-- Revision 1.1.6.37  1994/08/19  16:03:32  jeff-->
<!-- 	More editorial work.-->
<!-- 	[1994/08/19  13:28:31  jeff]-->
<!-- -->
<!-- Revision 1.1.6.36  1994/08/17  15:03:27  jeff-->
<!-- 	More editorial enhancements.-->
<!-- 	[1994/08/17  15:03:04  jeff]-->
<!-- -->
<!-- Revision 1.1.6.35  1994/08/15  17:09:08  jshirley-->
<!-- 	{def,10220,R1.1}-->
<!-- 	Removed references to rpcd and sec_clientd.-->
<!-- 	[1994/08/15  17:08:32  jshirley]-->
<!-- -->
<!-- Revision 1.1.6.34  1994/08/15  12:05:58  jeff-->
<!-- 	Continued editorial cleanup.-->
<!-- 	[1994/08/15  12:05:34  jeff]-->
<!-- -->
<!-- Revision 1.1.6.33  1994/08/14  21:22:58  jeff-->
<!-- 	One more tweak (it never fails...).-->
<!-- 	[1994/08/14  21:22:45  jeff]-->
<!-- -->
<!-- Revision 1.1.6.32  1994/08/14  21:11:24  jeff-->
<!-- 	More assorted editorial cleanup.-->
<!-- 	[1994/08/14  21:11:12  jeff]-->
<!-- -->
<!-- Revision 1.1.6.31  1994/08/10  22:11:13  jeff-->
<!-- 	Editorial work.-->
<!-- 	[1994/08/10  22:09:27  jeff]-->
<!-- -->
<!-- Revision 1.1.6.30  1994/07/22  01:14:14  jeff-->
<!-- 	Editorial improvements.-->
<!-- 	[1994/07/22  01:13:46  jeff]-->
<!-- -->
<!-- Revision 1.1.6.29  1994/07/19  10:42:39  jshirley-->
<!-- 	No changes.-->
<!-- 	[1994/07/19  10:41:46  jshirley]-->
<!-- -->
<!-- Revision 1.1.6.28  1994/05/27  18:45:14  jeff-->
<!-- 	{defect, 10752, R1.1}-->
<!-- 	Minor technical clarification for replication commands.-->
<!-- 	[1994/05/27  18:44:47  jeff]-->
<!-- -->
<!-- Revision 1.1.6.27  1994/05/24  22:47:34  jeff-->
<!-- 	Minor editorial work.-->
<!-- 	[1994/05/24  22:47:19  jeff]-->
<!-- -->
<!-- Revision 1.1.6.26  1994/05/24  22:00:48  jeff-->
<!-- 	{defect, 10752, R1.1}-->
<!-- 	Minor technical clarification for fileset names.-->
<!-- 	[1994/05/24  22:00:06  jeff]-->
<!-- -->
<!-- Revision 1.1.6.25  1994/05/24  19:31:04  jeff-->
<!-- 	Correct small editorial oversight.-->
<!-- 	[1994/05/24  19:30:41  jeff]-->
<!-- -->
<!-- 	{defect, 10752, R1.1}-->
<!-- 	Minor technical clarification for fts addsite.-->
<!-- 	[1994/05/24  19:25:44  jeff]-->
<!-- -->
<!-- Revision 1.1.6.24  1994/05/19  20:51:18  jeff-->
<!-- 	{defect, 8118, R1.1}-->
<!-- 	Correct use of double quotes.-->
<!-- 	[1994/05/19  20:50:36  jeff]-->
<!-- -->
<!-- Revision 1.1.6.23  1994/05/19  16:47:05  jeff-->
<!-- 	{defect, 9568, R1.1}-->
<!-- 	Clarify description of pathname traversal.-->
<!-- 	[1994/05/19  16:46:43  jeff]-->
<!-- -->
<!-- Revision 1.1.6.22  1994/05/10  21:40:50  jeff-->
<!-- 	Fix formatting error.-->
<!-- 	[1994/05/10  21:40:30  jeff]-->
<!-- -->
<!-- Revision 1.1.6.21  1994/05/10  19:30:56  jeff-->
<!-- 	{defect, 8118, R1.1}-->
<!-- 	Work release notes into documentation (forgot index tags).-->
<!-- 	[1994/05/10  19:29:07  jeff]-->
<!-- -->
<!-- Revision 1.1.6.20  1994/05/10  19:12:02  jeff-->
<!-- 	{defect, 8118, R1.1}-->
<!-- 	Work release notes into documentation.-->
<!-- 	[1994/05/10  19:10:30  jeff]-->
<!-- -->
<!-- Revision 1.1.6.19  1994/05/04  21:33:12  jeff-->
<!-- 	{defect, 10527, R1.1}-->
<!-- 	Create structure for new DFS documentation organization.-->
<!-- 	[1994/05/04  21:32:10  jeff]-->
<!-- -->
<!-- Revision 1.1.6.18  1994/04/28  22:22:08  jeff-->
<!-- 	{defect, 10439, R1.1}-->
<!-- 	Correct cross-references for reorganization of DFS documentation.-->
<!-- 	[1994/04/28  22:16:31  jeff]-->
<!-- -->
<!-- Revision 1.1.6.17  1994/04/20  21:07:30  jeff-->
<!-- 	{enh, 10306, R1.1}-->
<!-- 	Confirm/correct removal of diskless references.-->
<!-- 	[1994/04/20  21:04:23  jeff]-->
<!-- -->
<!-- Revision 1.1.6.16  1994/04/07  19:56:29  rom-->
<!-- 	{enh, 10306, R1.1}-->
<!-- 	Remove fts crmount -global option as part of removal of-->
<!-- 	diskless documentation from the DCE doc set.-->
<!-- 	[1994/04/07  17:15:31  rom]-->
<!-- -->
<!-- 	{enh, 10306, R1.1}-->
<!-- 	Remove diskless documentation from the DCE doc set.-->
<!-- 	[1994/04/07  15:31:44  rom]-->
<!-- -->
<!-- Revision 1.1.6.15  1994/04/05  20:45:39  zahn-->
<!-- 	{enh,5923,R1.1}-->
<!-- -->
<!-- 	Fixed cross-references to now-defunct User's Guide-->
<!-- 	and Reference.-->
<!-- 	[1994/04/05  20:45:14  zahn]-->
<!-- -->
<!-- Revision 1.1.6.14  1993/11/12  20:58:02  rom-->
<!-- 	Expand space reserved for figures by .ne.-->
<!-- 	[1993/11/12  20:56:13  rom]-->
<!-- -->
<!-- Revision 1.1.6.13  1993/11/11  16:55:46  zahn-->
<!-- 	Checked out file to examine figure printing-->
<!-- 	problem.  File not changed.-->
<!-- 	[1993/11/11  16:54:54  zahn]-->
<!-- -->
<!-- Revision 1.1.6.12  1993/10/15  19:21:07  jeff-->
<!-- 	{def,9129,R1.0.3}-->
<!-- 	Document how to remove a rep. site from a detached aggregate.-->
<!-- 	[1993/10/15  19:18:25  jeff]-->
<!-- -->
<!-- Revision 1.1.6.11  1993/10/14  23:15:38  jeff-->
<!-- 	{def,9119,R1.0.3}-->
<!-- 	Document the maximum allowable number of read-only sites.-->
<!-- 	[1993/10/14  23:15:04  jeff]-->
<!-- -->
<!-- Revision 1.1.6.10  1993/10/14  14:08:22  jeff-->
<!-- 	{misc,R1.0.3}-->
<!-- 	Made some small editorial changes and enhancements.-->
<!-- 	[1993/10/14  14:07:42  jeff]-->
<!-- -->
<!-- Revision 1.1.6.9  1993/10/14  13:20:28  kdu-->
<!-- 	{def,8084,R1.0.3}-->
<!-- 	Correct description of -principal option.-->
<!-- 	[1993/10/14  13:20:08  kdu]-->
<!-- -->
<!-- Revision 1.1.6.8  1993/10/13  20:24:05  tmw-->
<!-- 	Added index entries for second verions of master index.-->
<!-- 	[1993/10/13  15:33:30  tmw]-->
<!-- -->
<!-- Revision 1.1.6.7  1993/09/23  13:21:36  kdu-->
<!-- 	{def,7715,R1.0.3}-->
<!-- 	Examples of sysname.-->
<!-- 	[1993/09/23  13:20:39  kdu]-->
<!-- -->
<!-- Revision 1.1.6.6  1993/09/17  13:48:48  kdu-->
<!-- 	{def,8616,R1.0.3}-->
<!-- 	Foreign groups cannot own server entries.-->
<!-- 	[1993/09/17  13:46:51  kdu]-->
<!-- -->
<!-- Revision 1.1.6.5  1993/09/15  21:35:47  kdu-->
<!-- 	{def,5778,R1.0.3}-->
<!-- 	Short forms of machine names.-->
<!-- -->
<!-- 	{def,6358,R1.0.3}-->
<!-- 	Fileset quota interface changes.-->
<!-- -->
<!-- 	{def,8515,R1.0.3}-->
<!-- 	Availability of read-only filesets.-->
<!-- 	[1993/09/15  21:33:42  kdu]-->
<!-- -->
<!-- Revision 1.1.6.4  1993/09/01  15:51:46  kdu-->
<!-- 	{def,8439,R1.0.3}-->
<!-- 	Removed references to the dfsatab file.-->
<!-- -->
<!-- 	{def,8462,R1.0.3}-->
<!-- 	Removed references to fts crmount's cell option and cellular mount points.-->
<!-- -->
<!-- 	{def,8466,R1.0.3}-->
<!-- 	Clarified descriptions of MaxAge and FailAge replication parameters.-->
<!-- 	[1993/09/01  15:50:29  kdu]-->
<!-- -->
<!-- Revision 1.1.6.3  1993/04/10  23:54:03  jeff-->
<!-- 	Changed versions for defect fixes from 1.0.2A to 1.0.3.-->
<!-- 	[1993/08/10  23:52:38  jeff]-->
<!-- -->
<!-- Revision 1.1.6.2  1993/07/30  17:58:45  kdu-->
<!-- 	{def,8386,R1.0.3}-->
<!-- 	Incorporate OSF editorial comments into DFS Admin Guide and related-->
<!-- 	documentation.-->
<!-- 	[1993/07/30  17:57:05  kdu]-->
<!-- -->
<!-- Revision 1.1.4.20  1993/02/23  00:22:14  buckler-->
<!-- 	Changed .P! to .pI and added Postscript boundary boxes-->
<!-- 	[1993/02/23  00:21:06  buckler]-->
<!-- -->
<!-- Revision 1.1.4.19  1993/02/21  23:50:39  jeff-->
<!-- 	Fix for defect 7219, review comments.-->
<!-- 	[1993/02/21  23:49:02  jeff]-->
<!-- -->
<!-- Revision 1.1.4.18  1993/02/05  20:20:19  jeff-->
<!-- 	Fix for defect 7135, change key file to keytab file.-->
<!-- 	[1993/02/05  20:11:11  jeff]-->
<!-- -->
<!-- Revision 1.1.4.17  1993/02/04  02:02:31  jeff-->
<!-- 	Fix for defects 7063, 7023, 6999, and 6944.-->
<!-- 	[1993/02/04  01:59:39  jeff]-->
<!-- -->
<!-- Revision 1.1.4.16  1993/01/28  19:05:36  dbelch-->
<!-- 	Embedding copyright notice-->
<!-- 	[1993/01/28  18:29:34  dbelch]-->
<!-- -->
<!-- Revision 1.1.4.15  1993/01/27  20:07:14  buckler-->
<!-- 	Fixed cross-refs and figure calls for new book org-->
<!-- 	[1993/01/27  20:05:06  buckler]-->
<!-- -->
<!-- Revision 1.1.4.14  1993/01/27  19:13:53  jeff-->
<!-- 	... TEMPORARY CHECK-IN TO ALLOW FOR OSF WORK....-->
<!-- 	[1993/01/27  19:04:02  jeff]-->
<!-- -->
<!-- Revision 1.1.4.13  1993/01/09  18:43:51  jeff-->
<!-- 	Fix for defect 6326, update Ubik and related information.-->
<!-- 	[1993/01/09  18:43:06  jeff]-->
<!-- -->
<!-- Revision 1.1.4.12  1992/12/21  23:36:09  jeff-->
<!-- 	Fix for defect 6542, improve descriptions of principal and-->
<!-- 	group options.-->
<!-- 	[1992/12/21  23:33:20  jeff]-->
<!-- -->
<!-- Revision 1.1.4.11  1992/12/10  20:54:41  jeff-->
<!-- 	Fix for defect 6378, add new -noowner option to fts edser.-->
<!-- 	[1992/12/10  20:53:32  jeff]-->
<!-- -->
<!-- Revision 1.1.4.10  1992/11/14  01:45:02  jeff-->
<!-- 	Small clarification to previous change.-->
<!-- 	[1992/11/14  01:44:19  jeff]-->
<!-- -->
<!-- Revision 1.1.4.9  1992/11/14  00:39:10  jeff-->
<!-- 	Fix for defect 5120, correct use of -localauth option (I-->
<!-- 	missed this reference).-->
<!-- 	[1992/11/14  00:38:17  jeff]-->
<!-- -->
<!-- Revision 1.1.4.8  1992/11/13  00:55:14  jeff-->
<!-- 	Fix for defect 5120, correct description of -localauth option.-->
<!-- 	[1992/11/13  00:54:04  jeff]-->
<!-- -->
<!-- Revision 1.1.4.7  1992/11/09  19:55:08  jeff-->
<!-- 	Fixes for defects 5693 and 5808, correct fts rmsite and fts-->
<!-- 	setrepinfo privileges and related information.-->
<!-- 	[1992/11/09  19:53:37  jeff]-->
<!-- -->
<!-- Revision 1.1.4.6  1992/11/02  22:59:42  jeff-->
<!-- 	Fix for defect 5042, provide more information about -fast option of-->
<!-- 	fts crmount command.-->
<!-- 	[1992/11/02  22:58:13  jeff]-->
<!-- -->
<!-- Revision 1.1.4.5  1992/11/02  20:29:29  jeff-->
<!-- 	Fix for defect 5879, remove additional local-mounting restrictions.-->
<!-- 	[1992/11/02  20:07:03  jeff]-->
<!-- -->
<!-- Revision 1.1.4.4  1992/10/30  01:01:02  jeff-->
<!-- 	Fix for defect 5623, remove local-mounting restriction for clone ops.-->
<!-- 	[1992/10/30  01:00:07  jeff]-->
<!-- -->
<!-- Revision 1.1.4.3  1992/10/28  20:50:27  jeff-->
<!-- 	Closed font changes in syntax to un-bold change bars.-->
<!-- 	[1992/10/28  20:49:25  jeff]-->
<!-- -->
<!-- 	Fix for defect 5313, remove -fxdid option.-->
<!-- 	[1992/10/28  20:45:13  jeff]-->
<!-- -->
<!-- Revision 1.1.4.2  1992/08/26  12:10:11  weir-->
<!-- 	Removed change bars-->
<!-- 	[1992/08/26  11:53:34  weir]-->
<!-- -->
<!-- Revision 1.1.2.23  1992/07/14  15:50:06  steiner-->
<!-- 	Modified change bar "IBM review comments" to "review comments"-->
<!-- 	per Tony F's request.-->
<!-- 	[1992/07/14  15:48:23  steiner]-->
<!-- -->
<!-- Revision 1.1.2.22  1992/07/07  19:27:29  jeff-->
<!-- 	Fixed the dreaded dfsexport -type clarification.-->
<!-- 	[1992/07/07  19:25:31  jeff]-->
<!-- -->
<!-- Revision 1.1.2.21  1992/07/05  20:02:19  jeff-->
<!-- 	Fixed presentation of table for consistency.-->
<!-- 	[1992/07/05  20:01:21  jeff]-->
<!-- -->
<!-- Revision 1.1.2.20  1992/07/04  14:22:45  jeff-->
<!-- 	Small changes related to ACLs and permissions.-->
<!-- 	[1992/07/04  14:21:50  jeff]-->
<!-- -->
<!-- Revision 1.1.2.19  1992/07/02  17:14:38  jeff-->
<!-- 	Corrected ACL permissions and small editorial stuff.-->
<!-- 	[1992/07/02  17:01:12  jeff]-->
<!-- -->
<!-- Revision 1.1.2.18  1992/06/24  18:36:42  jeff-->
<!-- 	Small editorial change to parallel User's Guide.-->
<!-- 	[1992/06/22  22:53:49  jeff]-->
<!-- -->
<!-- Revision 1.1.2.17  1992/06/08  20:47:43  jeff-->
<!-- 	Edited in response to IBM review comments on DFS User's-->
<!-- 	documentation.-->
<!-- 	[1992/06/08  18:10:58  jeff]-->
<!-- -->
<!-- Revision 1.1.2.16  1992/06/07  02:05:27  jeff-->
<!-- 	Clarified the description of the DCE pathname used to-->
<!-- 	specify a server machine.-->
<!-- 	[1992/06/06  23:20:52  jeff]-->
<!-- -->
<!-- 	Clarified that the NULL ACLs associated with a new-->
<!-- 	fileset's root directory are affected by the mode-->
<!-- 	bits associated with the directory.-->
<!-- 	[1992/06/06  20:22:43  jeff]-->
<!-- -->
<!-- Revision 1.1.2.15  1992/06/04  18:14:01  jeff-->
<!-- 	Included cfe's review comments.-->
<!-- 	[1992/06/03  23:36:00  jeff]-->
<!-- -->
<!-- Revision 1.1.2.14  1992/06/03  21:32:31  jeff-->
<!-- 	Includes complementary information as a result of new-->
<!-- 	growaggr command documentation.-->
<!-- 	[1992/06/03  21:19:09  jeff]-->
<!-- -->
<!-- Revision 1.1.2.13  1992/05/21  17:55:47  jeff-->
<!-- 	Modified the text to clearly express that the aggregate name-->
<!-- 	of a nonLFS partition, as it appears in the second field of-->
<!-- 	the dfstab file, must match the name of the partition's local-->
<!-- 	mount point.-->
<!-- 	[1992/05/21  16:50:42  jeff]-->
<!-- -->
<!-- Revision 1.1.2.12  1992/05/12  16:06:53  jeff-->
<!-- 	Verified and/or modified italics and other editorial-->
<!-- 	aspects of the file.-->
<!-- 	[1992/05/12  14:57:42  jeff]-->
<!-- -->
<!-- Revision 1.1.2.11  1992/05/09  01:35:34  jeff-->
<!-- 	Added and edited information on the fts cr/edserverentry-->
<!-- 	commands' -quota option and server and fileset entries.-->
<!-- 	[1992/05/09  01:30:24  jeff]-->
<!-- -->
<!-- Revision 1.1.2.10  1992/05/07  15:11:12  jeff-->
<!-- 	Modified general description of "mounted locally."-->
<!-- 	[1992/05/07  00:15:16  jeff]-->
<!-- -->
<!-- Revision 1.1.2.9  1992/04/29  22:19:10  jeff-->
<!-- 	Added .zA/.zZ "enh, 13605, R1.2.2, Security enhancements" tags around -noauth/-localauth changes.-->
<!-- 	[1992/04/29  22:13:43  jeff]-->
<!-- -->
<!-- Revision 1.1.2.8  1992/04/29  19:01:29  jeff-->
<!-- 	Modified syntax and description of -noauth and -localauth options.-->
<!-- 	[1992/04/29  15:01:41  jeff]-->
<!-- -->
<!-- Revision 1.1.2.7  1992/04/22  13:02:20  jeff-->
<!-- 	Modified description of the meaning of the status flag for-->
<!-- 	read-only filesets.-->
<!-- 	[1992/04/21  16:25:06  jeff]-->
<!-- -->
<!-- Revision 1.1.2.6  1992/04/20  22:14:03  jeff-->
<!-- 	Updated to better describe use of local replica with Release-->
<!-- 	Replication.-->
<!-- 	[1992/04/20  16:51:12  jeff]-->
<!-- -->
<!-- Revision 1.1.2.5  1992/04/17  17:34:26  jeff-->
<!-- 	Added reference to the fact that the fts addsite command prevents you-->
<!-- 	  from defining the same File Server machine as a replication site for-->
<!-- 	  a single fileset more than once.-->
<!-- 	[1992/04/17  17:10:03  jeff]-->
<!-- -->
<!-- Revision 1.1.2.4  1992/04/17  14:15:42  jeff-->
<!-- 	Removed all occurrences of the following references:-->
<!-- -->
<!-- 	   o References to the optional -aggregate <name> option from the-->
<!-- 	     fts update command-->
<!-- 	   o References to the optional -aggregate <name> option from the-->
<!-- 	     fts lsreplicas command-->
<!-- -->
<!-- 	Because only a single replica of any given fileset can be stored-->
<!-- 	on a single File Server machine, these options provided no useful-->
<!-- 	functionality.-->
<!-- 	[1992/04/17  13:29:20  jeff]-->
<!-- -->
<!-- Revision 1.1.2.3  1992/04/15  14:08:23  jeff-->
<!-- 	Edited the section about prerequisites to exporting aggregates and-->
<!-- 	partitions that concern server entries for server machines in the FLDB.-->
<!-- 	The section now includes references to the fts delserverentry command,-->
<!-- 	as well as distinct sections that describe creating, listing, editing,-->
<!-- 	and deleting server entries.-->
<!-- 	[1992/04/15  14:06:25  jeff]-->
<!-- -->
<!-- Revision 1.1.2.2  1992/04/09  14:47:14  jeff-->
<!-- 	Completed the following changes:-->
<!-- 	1.  Updated note on restrictions associated with locally mounting a DCE-->
<!-- 	   LSF fileset.-->
<!-- 	2.  Added Caution about local mount restriction to first page of section-->
<!-- 	   on replication.-->
<!-- 	3.  Editorial changes to existing Note that follows new Caution in-->
<!-- 	   replication section.-->
<!-- 	4.  Added Caution about local mount restriction to first page of section-->
<!-- 	   on backups.-->
<!-- 	[1992/04/09  13:51:26  jeff]-->
<!-- -->
<!-- Revision 1.1  1992/01/29  16:14:51  damon-->
<!-- 	Initial revision-->
<!-- -->
<!---->
<!-- (c) Copyright 1991, Open Software Foundation, Inc.  ALL RIGHTS RESERVED-->
<!--no-op:  Copyright (C) 1989, 1991, Transarc Corporation-->
<!--no-op:  The Gulf Tower-->
<!--no-op:  707 Grant Street-->
<!--no-op:  Pittsburgh, PA  15219-->
<!-- CHANGED-->
<!-- 12-09-91:  Added the word "to" the description of the -quota option-->
<!--            for the fts edserverentry command.-->
<!-- 12-09-91:  Edited the descriptions of the -quota options for the-->
<!--            fts crserverentry and fts edserverentry commands.-->
<!-- 12-09-91:  Edited the first paragraph of Section 6.2.1.3 according-->
<!--            to the -quota option clarification.-->
<!-- 12-10-91:  In Section 6.4.1.1.2, removed extra spaces after italicized-->
<!--            phrases at the beginnings of the items in the bulleted list.-->
<!-- 12-10-91:  Changed the heading of Section 6.4.1.2 to "Adding and-->
<!--            Removing Replication Sites."-->
<!-- 12-11-91:  In Section 6.2.1.4, changed the paragraph that follows the-->
<!--            bulleted list.-->
<!-- 12-11-91:  In Section 6.2.1.4.1, removed the second sentence from the-->
<!--            paragraph that introduces Step 4.-->
<!-- 12-11-91:  In Section 6.2.1, added an additional item to the bulleted-->
<!--            list, documenting that rpcd must be running on the machine.-->
<!-- 12-11-91:  In Section 6.2.2, added RPC to the list of processes.-->
<!-- 12-11-91:  In Section 6.2.3, added RPC to the list of processes.-->
<!-- 12-11-91:  In Section 6.6, reformatted the output for the fts lsmount-->
<!--            command to be one line (also fixed quotes/apostrophes).-->
<!-- 12-11-91:  In Section 6.4.1.1, created a new .ps file for Table 6-1;-->
<!--            the current file (which prints an extra caption) must be-->
<!--            replaced.-->
<!-- 12-11-21:  In Section 6.4.1.1.2, added a second paragraph to the last-->
<!--            item of the bulleted list to explain a new constraint.-->
<!-- 12-11-91:  Section 6.4, second to last paragraph:  Edited last sentence-->
<!--            for technical update.-->
<!-- 12-11-91:  Section 6.4.1.2:  Split the paragraph into two paragraphs,-->
<!--            adding some additional technical information.-->
<!-- END CHANGED-->
<Chapter Id="DFSAGR.FTAV.div.1">
<Title>Making Filesets and Aggregates Available</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.1">
<Primary>filesets</Primary>
<Secondary>about</Secondary>
</IndexTerm>
<Para>In the DCE Local File System (DCE LFS), a fileset is defined as a collection
of related files that are organized into a single, easily managed unit. 
Because DCE LFS filesets are usually smaller in size than standard file 
systems, and because each DCE LFS aggregate can house multiple DCE LFS 
filesets, DCE LFS filesets are easily moved between File Server machines to 
facilitate load balancing across the network.  It is also easy to place 
read-only copies (replicas) of DCE LFS filesets on different machines in your 
cell.  These multiple copies prevent machines from becoming overburdened with 
requests for files from popular filesets.
</Para>
<Para>In other operating systems, a file system typically occupies more disk space
and is tied to a physical location.  In addition, non-DCE LFS file systems
(non-DCE LFS filesets) cannot be replicated in DFS.
</Para>
<Para>This chapter provides detailed information about how to create, replicate, and
back up DCE LFS filesets, and how to mount DCE LFS and non-DCE LFS filesets
for use in the DCE namespace.  It also explains how to export aggregates and
partitions. (See Chapter 7 for information on the tasks involved in the use
and maintenance of filesets.)
</Para>
<Note>
<Para>This guide uses the term <Replaceable>non-LFS</Replaceable> to refer to <Replaceable>non-DCE LFS</Replaceable>
filesets and aggregates.
</Para>
</Note>
<Sect1 Id="DFSAGR.FTAV.div.2">
<Title>An Overview of Filesets</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.2">
<Primary>aggregates</Primary>
<Secondary>about</Secondary>
</IndexTerm>
<Para>A DCE LFS fileset is a hierarchical grouping of files that is managed as a
single unit.  A DCE LFS aggregate is a disk partition that is modified to 
include the DCE LFS metadata structure that supports DCE Access Control 
Lists (ACLs), multiple DCE LFS filesets, logging, and other fileset-related 
operations.
</Para>
<Para>Using DFS, you can share information stored on the local disks of
different machines by exporting aggregates and partitions from the
machines.  Exporting an aggregate or partition makes the filesets contained
on it available in the DCE namespace.  With the DCE LFS, you can export
multiple filesets from one aggregate.  Because non-LFS partitions do not
support the enhancements that are supported on DCE LFS aggregates, and 
because you can store only one fileset on a non-LFS partition, you can export 
only one non-LFS fileset per nonLFS partition.
</Para>
<Para>Figure 6-1 illustrates the structural differences between the DCE LFS and
other file systems.  The partitioning structure in the DCE LFS features
aggregates, each of which can store multiple DCE LFS filesets; the partitioning
structure in other file systems has partitions that can house only a single
non-LFS file system each. (Note that the disks in both structures include a
non-LFS boot partition.)
<IndexTerm Id="DFSAGR.FTAV.indx.3">
<Primary>aggregates</Primary>
<Secondary>compared to partitions (figure)</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.FTAV.indx.4">
<Primary>partitions</Primary>
<Secondary>compared to aggregates (figure)</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.FTAV.indx.5">
<Primary>Local File System (LFS)</Primary>
<Secondary>disk partitioning structure (figure)</Secondary>
</IndexTerm></Para>
<?sml-need 7i>
<Figure>
<Title>Comparison of DCE LFS and non-LFS Disk Partitioning Structures</Title>
<Graphic Entityref="DFSAGR.FTAV.ent.1" role="page-wide"></Graphic>
</Figure>
<IndexTerm Id="DFSAGR.FTAV.indx.6" SpanEnd="DFSAGR.FTAV.indx.1">
<Sect2 Id="DFSAGR.FTAV.div.3">
<Title>Creating and Using Filesets</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.7">
<Primary>filesets</Primary>
<Secondary>creating</Secondary>
</IndexTerm>
<Para>Before you can create a DCE LFS fileset, you must first use the <Command>newaggr</Command>
command to initialize, or format, the disk partition on which the aggregate is
to reside; the <Command>newaggr</Command> command is comparable to the UNIX <Command>newfs</Command>
command.  You must then export the aggregate with the <Command>dfsexport</Command> command
to make it available in the DCE namespace.
</Para>
<Para>After the DCE LFS aggregate is initialized and exported, a DCE LFS fileset can
be created on it with the <Command>fts create</Command> command.  This command also registers
the fileset in the Fileset Location Database (FLDB) and obtains a unique ID
number for the fileset.  To make the contents of a DCE LFS fileset visible in
the DCE namespace, enter the <Command>fts crmount</Command> command to create a mount point
for the fileset.  After the <Command>fts crmount</Command> command is issued, the fileset is
automatically attached to the DFS file system and is accessible to authorized
DCE users.
</Para>
<Para>On the other hand, when creating a non-LFS fileset, you do not use <Command>fts</Command>
commands.  Because a disk partition is equal to one non-LFS fileset, you use
the <Command>newfs</Command> command (or the command appropriate to your operating system)
to initialize the partition on which the non-LFS fileset is to reside.  You
then use your operating system's <Command>mount</Command> command (or its appropriate
equivalent) to mount the partition locally, after which data can be placed
on the partition and used locally.  Note that, if your vendor has properly
modified your local operating system's <Command>mount</Command> command, you can also mount
and use a DCE LFS fileset locally.
</Para>
<Para>To make a non-LFS fileset visible in the DCE namespace, you first use the
<Command>fts crfldbentry</Command> command to register the fileset in the FLDB and generate
a unique ID number for it.  You then export the partition on which the fileset
resides with the <Command>dfsexport</Command> command and mount the fileset with the <Command>fts
crmount</Command> command.  The terms <Symbol Role="Variable">aggregate</Symbol> and <Replaceable>non-LFS aggregate</Replaceable> can
also be used to refer to an exported partition.
</Para>
</Sect2>
<Sect2 Id="DFSAGR.FTAV.div.4">
<Title>The Different Types of DCE LFS Filesets</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.8">
<Primary>filesets</Primary>
<Secondary>types</Secondary>
</IndexTerm>
<Para>DCE LFS provides three types of filesets: read/write, read-only, and backup.
Non-LFS file systems do not have these different types of filesets.  When used
with DFS, non-LFS filesets are essentially treated as read/write filesets.
However, a partition that houses a non-LFS fileset can be marked as read-only
in the local operating system; DFS treats it as a read-only fileset (it cannot
be modified), but the fileset does not receive a <Literal>.readonly</Literal> extension.
</Para>
<Para>Every DCE LFS fileset has a single read/write version, which contains the
modifiable versions of the files and directories in that fileset.  This version
is also referred to as the read/write source because the other fileset types
are derived from it via replication and backup operations.
</Para>
<Para><IndexTerm Id="DFSAGR.FTAV.indx.9">
<Primary>replicas</Primary>
<Secondary>characteristics (DFS)</Secondary>
</IndexTerm>A read-only fileset is an exact copy, or replica, of all of the data in a
read/write source fileset when the read-only replica is created.  Each read-only
fileset is given the same name as its read/write source with an additional
<Literal>.readonly</Literal> extension.  Read-only filesets can be placed at various sites
in the file system; a site is a specific aggregate on a File Server machine.
A read-only fileset cannot be modified by commands such as <Command>mkdir</Command> or
<Command>rm</Command> (or their equivalent commands).  If the read/write source fileset
changes, the read-only versions must be updated to match the changed read/write
version; otherwise, they remain unchanged.  The update process can be performed
manually (via Release Replication) or it can be automated (via Scheduled
Replication).
</Para>
<Para><IndexTerm Id="DFSAGR.FTAV.indx.10">
<Primary>filesets</Primary>
<Secondary>backup</Secondary>
</IndexTerm>A backup fileset is a clone of a read/write source fileset stored at the same
site and with the same name as the source, with the addition of a <Literal>.backup</Literal>
extension.  A backup fileset is not the same as a backup <Replaceable>of</Replaceable> a fileset
(for example, a copy on tape), but making a backup fileset is often one step
in the backup process. (See Chapter 9 for more information on the backup
process.)
<?sml-break><?sml-need 10></Para>
<Para>Figure 6-2 illustrates the different types of DCE LFS filesets: read/write,
read-only, and backup.
</Para>
<Para><?sml-need 5.5i><IndexTerm Id="DFSAGR.FTAV.indx.11" SpanEnd="DFSAGR.FTAV.indx.8"></Para>
<Figure>
<Title>The Different Types of DCE LFS Filesets</Title>
<Graphic Entityref="DFSAGR.FTAV.ent.2"></Graphic>
</Figure>
</Sect2>
<Sect2 Id="DFSAGR.FTAV.div.5">
<Title>Data Sharing Among the Different Types of DCE LFS Filesets</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.12">
<Primary>filesets</Primary>
<Secondary>data sharing</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.FTAV.indx.13">
<Primary>disk space</Primary>
<Secondary>saving by data sharing</Secondary>
</IndexTerm>
<Para>When a backup or read-only fileset occupies the same site (File Server machine
and aggregate) as its read/write source fileset, DFS attempts to save disk
space by having the filesets share data that is the same across the different
types of filesets.  This data sharing is accomplished in the following way:
<?sml-break><?sml-need 20></Para>
<ItemizedList>
<ListItem>
<Para>When the backup or read-only fileset is created, the new fileset is filled
with an array of pointers to the data housed by the read/write source.
</Para>
</ListItem>
<ListItem>
<Para>The identities of the read/write source and the backup or read-only fileset
are then exchanged so that the read/write source becomes the backup or
read-only fileset, and the backup or read-only fileset becomes the read/write
source.
</Para>
</ListItem>
</ItemizedList>
<Para>This technique provides full access to the data via the read/write fileset
without requiring that the read/write fileset physically house the data.  As
long as the read-only or backup fileset remains identical to the read/write
source, the disk space occupied by the read/write fileset remains small
(because pointers take up much less disk space than the data to which they
point).  However, as changes are made to the data in the read/write fileset,
the amount of space occupied by the read/write fileset increases.  This is
because the read/write fileset must acquire additional disk blocks to store
changed data; it can no longer simply point to disk blocks housed by the
read-only or backup fileset.
</Para>
<Para>Because of this data-sharing arrangement, DFS provides statistics on two types
of disk usage for a fileset.  The first statistic, quota, identifies the amount
of disk space occupied by all of the files and directories in the read/write
fileset, <Replaceable>including</Replaceable> those files and directories in the read/write fileset
that are actually pointers to disk blocks in the backup or read-only version of
the fileset.  The second statistic, allocation, identifies the amount of disk
space occupied by those files and directories actually housed in the fileset,
<Replaceable>excluding</Replaceable> those files and directories that are represented by pointers
to disk blocks in another version of the fileset.
</Para>
<Para>Users are concerned with the quota statistics only, because the quota dictates
the amount of data that they can store in a read/write fileset.  To check a
fileset's quota statistics, issue the <Command>fts lsquota</Command> command. (See Part 2
of this guide and reference for information on the <Command>fts lsquota</Command> command.)
<?sml-break><?sml-need 20></Para>
<Para>Administrators are also concerned with the quota statistics, especially when
dealing with users.  One of the most common user requests of an administrator
is for an increase in the size of the user's fileset quota.  To change the
size of a fileset's quota, issue the <Command>fts setquota</Command> command. (See Chapter
7 for information on changing a fileset's quota.)
</Para>
<Para>Administrators are also concerned with the allocation statistics when they need
information on the physical disk usage of a fileset (for example, when moving
filesets for load-balancing purposes).  To check both the quota and allocation
statistics for an individual fileset, issue the <Command>fts lsft</Command> command.  To
check the quota and allocation statistics for multiple filesets on a File
Server machine, issue the <Command>fts lsheader</Command> command. (See Chapter 7 for
information on the <Command>fts lsft</Command> and <Command>fts lsheader</Command> commands.)
</Para>
<Note>
<Para>There is no way to set or change the allocation for a fileset.  It is
automatically set during the creation of the fileset and cannot be changed.
</Para>
</Note>
<IndexTerm Id="DFSAGR.FTAV.indx.14" SpanEnd="DFSAGR.FTAV.indx.12">
<IndexTerm Id="DFSAGR.FTAV.indx.15" SpanEnd="DFSAGR.FTAV.indx.13">
</Sect2>
<Sect2 Id="DFSAGR.FTAV.div.6">
<Title>Identifying DCE LFS and Non-LFS Filesets</Title>
<Para>Every DCE LFS and non-LFS fileset is identified by a unique name and ID number.
The following subsections discuss these two forms of fileset identification.
</Para>
<Sect3 Id="DFSAGR.FTAV.div.7">
<Title>Fileset Names</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.16">
<Primary>filesets</Primary>
<Secondary>naming conventions</Secondary>
</IndexTerm>
<Para>Every fileset must have a fileset name that is unique within the cell in which
it resides.  The name is stored in the cell's FLDB.  You assign a name to a DCE
LFS fileset when you create the read/write version of the fileset and register
it in the FLDB with the <Command>fts create</Command> command.  You assign a name to a
non-LFS fileset when you register the read/write (and only) version of the
fileset in the FLDB with the <Command>fts crfldbentry</Command> command.
</Para>
<Para>You can use the following characters in the name of a fileset:
<?sml-break><?sml-need 20></Para>
<ItemizedList>
<ListItem>
<Para>All uppercase and lowercase alphabetic characters (a through z,
and A through Z)
</Para>
</ListItem>
<ListItem>
<Para>All numerals (0 through 9)
</Para>
</ListItem>
<ListItem>
<Para>The <Literal>.</Literal> (dot)
</Para>
</ListItem>
<ListItem>
<Para>The <Literal>&minus;</Literal> (dash)
</Para>
</ListItem>
<ListItem>
<Para>The <Literal>_</Literal> (underscore)
</Para>
</ListItem>
</ItemizedList>
<Para>A fileset name must include at least one alphabetic character or an <Literal>_</Literal>
(underscore); it cannot consist of just numbers, dots, and dashes.  This
allows the system to differentiate the name of the fileset from its ID number.
</Para>
<Para>The name you assign to a fileset can contain no more than 102 characters.  This
does not include the <Literal>.readonly</Literal> or <Literal>.backup</Literal> extension, which is
automatically added when a process creates a read-only or backup fileset.
Note that the <Literal>.readonly</Literal> and <Literal>.backup</Literal> extensions are reserved for
read-only and backup filesets, so you cannot specify a fileset name that ends
with either of these extensions.
</Para>
<Note>
<Para>Fileset names can actually be as long as 111 characters&mdash;the name of the
fileset plus the appropriate <Literal>.readonly</Literal> or <Literal>.backup</Literal> extension.
However, you can specify only the first 102 characters of the name to
accommodate the extensions.  This is also true of non-LFS fileset names, even
though non-LFS filesets do not need the extensions because they cannot have
read-only and backup versions.
</Para>
</Note>
<Para>With DCE LFS, each user's home directory typically corresponds to a separate
fileset.  You may find it convenient to name all user filesets
<Literal>user.</Literal><Symbol Role="Variable">user_name</Symbol> (for example, <Replaceable>user.sandy</Replaceable>).  It may also be
convenient to indicate the type of aggregate in which the fileset is stored
(for example, <Literal>ufs.fs1</Literal> to indicate a non-LFS aggregate from the machine
named <Literal>fs1</Literal>).  You may also want to put system binaries into filesets with
names that begin with the system type (for example, <Literal>rs_aix32.bin</Literal>).
<?sml-break><?sml-need 20></Para>
<Para>When specifying the name of an existing fileset in a DFS command, include the
<Literal>.readonly</Literal> or <Literal>.backup</Literal> extension, if appropriate, to indicate the
read-only or backup version of the fileset.  You must include the extension when
you wish to perform an operation that affects only that version of a fileset.
For example, to delete just the backup version of a fileset, you must add the
<Literal>.backup</Literal> extension to the name of the fileset when you issue the <Command>fts
delete</Command> command.
</Para>
</Sect3>
<Sect3 Id="DFSAGR.FTAV.div.8">
<Title>Fileset ID Numbers</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.17">
<Primary>filesets</Primary>
<Secondary>ID numbers</Secondary>
</IndexTerm>
<Para>Every fileset also has a fileset ID number that, like a fileset name, is
unique within the cell in which the fileset resides.  When a fileset is
registered in the FLDB with the <Command>fts create</Command> or <Command>fts crfldbentry</Command>
command, the FL Server allocates it a fileset ID number, which is stored in
the FLDB along with its name.  Read/write and backup filesets have their own
fileset IDs, which are automatically reserved in the FLDB when the read/write
source fileset is registered; all read-only copies of the same read/write
fileset share a common fileset ID.
</Para>
<Para><!--.EQ-->
<!--delim %%-->
<!--.EN-->
Fileset ID numbers are represented as two positive integers separated by a
pair of commas.  For example, the ID number of the first fileset in the FLDB is
<Literal>0,,1</Literal>.  The integer after the commas is then incremented every time a new
fileset is created.  When the integer after the commas becomes larger than
<!--%2 sup 32%, the integer before the commas becomes 1 and the integer after the-->
2<Superscript>32</Superscript>, the integer before the commas becomes 1 and the integer after the
commas returns to 0 (zero).
<!--.EQ-->
<!--delim off-->
<!--.EN-->
</Para>
<Para>When specifying a fileset ID in a DFS command, you can omit the
integer before the commas if it is a 0 (zero); commands that accept a
fileset ID number assume that the first integer is 0 (zero) if it is not
supplied.  In this case, also omit the two commas.  For example, the fileset
ID number <Literal>0,,1</Literal> can be entered as
<Literal>1</Literal>.
<?sml-break><?sml-need 20></Para>
</Sect3>
</Sect2>
<Sect2 Id="DFSAGR.FTAV.div.9">
<Title>Tracking Fileset Locations</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.18">
<Primary>filesets</Primary>
<Secondary>tracking locations</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.FTAV.indx.19">
<Primary>Fileset Location Database</Primary>
<Secondary>about</Secondary>
</IndexTerm>
<Para>The Fileset Location Database (FLDB) is maintained by the FL Server.  The FLDB
records information about the locations of the filesets in a cell.  Users do
not need to know the location of a fileset to access it; the Cache Manager
contacts the FL Server to obtain the location of a requested fileset.
</Para>
<Para><IndexTerm Id="DFSAGR.FTAV.indx.20">
<Primary>replicas</Primary>
<Secondary>in FLDB entries (DFS)</Secondary>
</IndexTerm>Each read/write fileset has an entry in the FLDB; the entry includes
information about the fileset's read-only and backup versions.  Read-only and
backup filesets normally do not have their own FLDB entries because they share
an FLDB entry with the read/write fileset.  However, a read-only fileset can
have its own entry if its read/write source is removed.
</Para>
<Para><IndexTerm Id="DFSAGR.FTAV.indx.21">
<Primary>fileset headers</Primary>
</IndexTerm>For a DCE LFS fileset, information is also stored in the fileset's header,
which is part of the data structure that records the physical addresses on the
aggregate of the files in the fileset.  It is essential that the FLDB entry and
the fileset header be synchronized (that they match).  Therefore, all <Command>fts</Command>
commands that affect fileset status and the FLDB change both the appropriate
FLDB entry and the fileset header.  In some rare cases, however, you may need
to resynchronize the entries yourself (see Chapter 7).
</Para>
<Para>A non-LFS fileset does not have a fileset header, but some information about
the fileset is available from the local disk of the machine on which it
resides.  For example, the fileset ID number of each non-LFS fileset is stored
in the <Symbol Role="Variable">dcelocal</Symbol><Filename>/var/dfs/dfstab</Filename> on the local machine. (See Section 6.2.2.3
for a description of the <Literal>dfstab</Literal> file.)
</Para>
<Sect3 Id="DFSAGR.FTAV.div.10">
<Title>A Fileset's FLDB Information</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.22">
<Primary>Fileset Location Database</Primary>
<Secondary>viewing fileset entries</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.FTAV.indx.23">
<Primary>filesets</Primary>
<Secondary>viewing FLDB information</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.FTAV.indx.24">
<Primary><Command>fts</Command> command suite</Primary>
<Secondary><Command>lsfldb</Command></Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.FTAV.indx.25">
<Primary><Command>fts</Command> command suite</Primary>
<Secondary><Command>lsft</Command></Secondary>
</IndexTerm>
<Para>The <Command>fts lsfldb</Command> and <Command>fts lsft</Command> commands display
information from a fileset's FLDB entry (the <Command>fts lsft</Command> command
also shows information from a fileset's header).  Each FLDB entry for a
DCE LFS fileset contains the following information:
<?sml-break><?sml-need 20></Para>
<ItemizedList>
<ListItem>
<Para>The name of the fileset, with a <Literal>.readonly</Literal> or <Literal>.backup</Literal> extension, 
if appropriate.
</Para>
</ListItem>
<ListItem>
<Para>The fileset IDs of the read/write, read-only, and backup versions.
</Para>
</ListItem>
<ListItem>
<Para>A separate status flag for each of the three versions, indicating whether
the version exists at some site.  A status of <Literal>valid</Literal> indicates the
version exists at some site; a status of <Literal>invalid</Literal> indicates the version
does not exist at any site.  Note that the status of the read-only version
is <Literal>valid</Literal> once a replication site is defined, regardless of whether a
replica yet exists at the site.
</Para>
</ListItem>
<ListItem>
<Para>The number of sites at which a version of the fileset exists.
</Para>
</ListItem>
<ListItem>
<Para>An indicator if the FLDB entry is locked.  The indicator is omitted
if the entry is not locked.
</Para>
</ListItem>
<ListItem>
<Para>The replication parameters that are associated with the fileset.
</Para>
</ListItem>
<ListItem>
<Para>Information identifying the File Server machines and aggregates
(sites) where read/write (<Literal>RW</Literal>), read-only (<Literal>RO</Literal>), or backup (<Literal>BK</Literal>)
versions of the fileset reside.
</Para>
</ListItem>
<ListItem>
<Para>For each read-only site, the MaxSiteAge replication parameter defined for that
site. (See Section 6.4 for more information about replication parameters.)
</Para>
</ListItem>
<ListItem>
<Para RevisionFlag="Changed">The abbreviated DCE principal name of each File Server machine on which a
version of the fileset resides, and the name of the group that owns the server
entry for the machine in the FLDB or <Literal>&lt;nil></Literal> if no group owns the server
entry.
<?og-ChangeStart enh, 13605, R1.2.2, Security enhancements"></Para>
</ListItem>
<ListItem>
<Para RevisionFlag="Changed">For each fileset with advisory RPC authentication bounds, the values for both sets of upper and lower bounds (one set for communications with Cache Managers in the local cell and the other set for communications with Cache Managers in foreign cells).
<?og-ChangeEnd enh, 13605, R1.2.2, Security enhancements"></Para>
</ListItem>
</ItemizedList>
<Para>Because functionality such as replication is not supported for non-LFS
filesets, FLDB entries for non-LFS filesets do not contain as much information
as entries for DCE LFS filesets.  However, information such as the ID number
and site of each non-LFS fileset is recorded in the FLDB.  The <Command>fts lsfldb</Command>
and <Command>fts lsft</Command> commands display this information.
</Para>
</Sect3>
<Sect3 Id="DFSAGR.FTAV.div.11">
<Title>A Fileset's Header Information</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.26">
<Primary>fileset headers</Primary>
<Secondary>contents</Secondary>
</IndexTerm>
<Para>A separate fileset header is stored at each site where a version of a
DCE LFS fileset exists.  The header is part of the data structure that records
disk addresses on the aggregate where the files in the fileset are stored.
This data structure is a method of grouping all of the files into
logical units without requiring that they be stored in contiguous memory
blocks.  In addition, the header records some of the same information
that appears in the FLDB.  Therefore, even if the FLDB is unavailable,
the <Command>fts</Command> commands can still access the information.
</Para>
<Para>The <Command>fts lsheader</Command> and <Command>fts lsft</Command> commands display information from a
fileset's header (the <Command>fts lsft</Command> command also shows information from a
fileset's entry in the FLDB).  Each fileset header for a DCE LFS fileset
contains the following information:
</Para>
<ItemizedList>
<ListItem>
<Para>The name of the fileset, with a <Literal>.readonly</Literal> or <Literal>.backup</Literal> extension, if
appropriate.
</Para>
</ListItem>
<ListItem>
<Para>The fileset ID number.
</Para>
</ListItem>
<ListItem>
<Para>The type of fileset (<Literal>RW</Literal> for read/write, <Literal>RO</Literal> for read-only, or 
<Literal>BK</Literal> for backup).
</Para>
</ListItem>
<ListItem>
<Para>Information about the state of the fileset.
</Para>
</ListItem>
<ListItem>
<Para>The status flag for the site, including <Literal>On-line</Literal>, <Literal>Off-line</Literal>, or an
error condition.
</Para>
</ListItem>
<ListItem>
<Para>The File Server machine, aggregate name, and aggregate ID number
where the fileset resides.  This information, while not in the header, is
available because it was used to contact the machine that houses the
fileset.
</Para>
</ListItem>
<ListItem>
<Para>The ID numbers of the parent, clone, and backup filesets that are related to
the fileset.
</Para>
</ListItem>
<ListItem>
<Para>The ID numbers of the low-level backing and low-level forward
filesets that are related to the fileset.
</Para>
</ListItem>
<ListItem>
<Para>The version number of the fileset.  Every DCE LFS fileset has a distinct
version number that increments every time an operation is performed on
the fileset or a file it contains.  Version numbers have the same format as
fileset ID numbers (for example, <Literal>0,,25963</Literal>).
</Para>
</ListItem>
<ListItem>
<Para>The allocation and allocation usage, in kilobytes, of the fileset.
</Para>
</ListItem>
<ListItem>
<Para>The quota and quota usage, in kilobytes, of the fileset.
</Para>
</ListItem>
<ListItem>
<Para>The day, date, and time that the fileset was created (for read-only and backup
versions, this indicates the day, date, and time that the fileset was 
replicated or backed up).
</Para>
</ListItem>
<ListItem>
<Para>The day, date, and time that the contents of the fileset were last updated.
</Para>
</ListItem>
</ItemizedList>
<Para>Because non-LFS filesets do not have DCE LFS fileset headers, only such
information as the fileset ID number is available from the machine that houses
the fileset.  The <Command>fts lsheader</Command> and <Command>fts lsft</Command> commands
display this information.
<IndexTerm Id="DFSAGR.FTAV.indx.27" SpanEnd="DFSAGR.FTAV.indx.26"></Para>
</Sect3>
</Sect2>
<Sect2 Id="DFSAGR.FTAV.div.12">
<Title>Replicating DCE LFS Filesets</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.28">
<Primary>replication</Primary>
<Secondary>about (DFS)</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.FTAV.indx.29">
<Primary>replication</Primary>
<Secondary>types</Secondary>
</IndexTerm>
<Para>Replication is the process of creating one or more read-only copies of the
read/write version of a DCE LFS fileset and placing the copies at multiple
sites.  With replication, you can tailor your system's configuration by making
a fileset's contents accessible from more than one File Server machine.  As a
result, a single machine is not overburdened with requests for popular files,
and files are available from more than one machine, which can minimize the
effects of a machine failure.  Replication is not available for non-LFS
filesets.
</Para>
<Para>You can manually initiate the replication of a DCE LFS fileset by using
Release Replication with the fileset, or you can automate the process by using
Scheduled Replication with the fileset.  With Release Replication, you issue a
command that updates the read-only copies of a read/write fileset whenever you
want to release new copies of the fileset.  This type of replication is useful
for filesets whose replication you want to control closely.  With Scheduled
Replication, you specify parameters that control how often read-only copies
are to be updated.  The Replication Server then updates the copies according
to the specified intervals.  This type of replication is useful for filesets
whose replication can be performed asynchronously.
<IndexTerm Id="DFSAGR.FTAV.indx.30" SpanEnd="DFSAGR.FTAV.indx.29"><IndexTerm Id="DFSAGR.FTAV.indx.31" SpanEnd="DFSAGR.FTAV.indx.28"></Para>
</Sect2>
<Sect2 Id="DFSAGR.FTAV.div.13">
<Title>Mounting Filesets</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.32">
<Primary>filesets</Primary>
<Secondary>mounting</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.FTAV.indx.33">
<Primary>mount points</Primary>
<Secondary>about</Secondary>
</IndexTerm>
<Para>To make the contents of a DCE LFS or non-LFS fileset visible and accessible
to users in the DCE namespace, you must attach the fileset to the namespace
through a mount point.  In DFS, you use the <Command>fts crmount</Command> command to create
a mount point for a fileset.  A fileset is mounted automatically once a mount
point is created for it, so you do not have to issue additional commands to
attach the fileset.  There are several types of mount points; the tasks in this
chapter all use regular mount points, which are the most common type.
</Para>
<Para>A DFS mount point appears and functions like a regular directory, but
structurally it is a special symbolic link that indicates the name of the
fileset associated with the mount point.  Each fileset has a directory structure
whose root directory has the same name as the fileset's mount point.  You can
create standard subdirectories within the fileset's root directory.  You can
also create other mount points in the directory; these mount points look like
subdirectories, but they are associated with files in their own filesets rather
than with files in the mount-level directory's fileset.
</Para>
<Para>When the Cache Manager traverses a pathname to locate a file that resides in
your cell, it begins at the cell's top-level fileset (<Literal>root.dfs</Literal>).  As it
traverses the file's pathname, the Cache Manager accesses a different fileset
whenever it encounters a mount point.
</Para>
<Para>Most filesets are mounted with regular mount points. When the Cache Manager
encounters a regular mount point in a read-only fileset, it attempts to access
the read-only version of the fileset named by the mount point.  It also attempts
to access the read-only version of any fileset whose mount point it encounters
further in the file's pathname.  However, if a fileset in the pathname is not
replicated, the Cache Manager accesses the read/write version of the fileset.
From that point on, it continues to access the read/write version of each
fileset it encounters in the remainder of the pathname unless it is explicitly
directed to access the read-only (or backup) version of a fileset.
</Para>
<Para>Given how the Cache Manager traverses mount points, to be able to access the
read-only version of a fileset, you must replicate all filesets mounted at
higher levels in the file system hierarchy.  In other words, you must create
read-only copies of the fileset that contains the mount point for the fileset
and all filesets above it in the file system. (See Section 6.6 for more
information about the different types of mount points and how the Cache
Manager accesses them.)
</Para>
</Sect2>
<Sect2 Id="DFSAGR.FTAV.div.14">
<Title>Standard Options and Arguments</Title>
<Para>When using the <Command>fts</Command> commands to create, manipulate, or delete filesets,
you can often add the <Option>verbose</Option> option to receive detailed information
from the <Command>fts</Command> program about its actions as it executes the command.  This
can be particularly helpful if an operation fails for a reason you do not
understand.  The amount of additional information produced by the
<Option>verbose</Option> option varies for different commands.
</Para>
<Para>The following options and arguments are common to many of the commands
described in this chapter.  If an option or argument is not described with a
command in the text, a description of it appears here. (See Part 2 of this
guide and reference for complete details about each command.)
</Para>
<ItemizedList>
<ListItem>
<Para>The <Option>fileset</Option><Symbol Role="Variable"> name</Symbol> option is the complete name (for example, 
<Replaceable>user.sandy</Replaceable>) or ID number (for example, <Literal>0,,34692</Literal>) of the fileset 
to be used in the command.
</Para>
</ListItem>
<ListItem>
<Para>The <Option>server</Option><Symbol Role="Variable"> machine</Symbol> option is the File Server machine to be used in 
the command.  Unless otherwise indicated, you can use any of the following 
to specify the File Server machine:
</Para>
<ItemizedList>
<ListItem>
<Para>The machine's DCE pathname (for example, <Replaceable>/.../abc.com/hosts/fs1</Replaceable>)
</Para>
</ListItem>
<ListItem>
<Para>The machine's host name (for example, <Literal>fs1.abc.com</Literal> or <Literal>fs1</Literal>)
</Para>
</ListItem>
<ListItem>
<Para>The machine's IP address (for example, <Literal>11.22.33.44</Literal>)
</Para>
</ListItem>
</ItemizedList>
</ListItem>
<ListItem>
<Para>The <Option>aggregate</Option><Symbol Role="Variable"> name</Symbol> option is the device name (for example, 
<Filename>/dev/lv01</Filename>), aggregate name (for example, <Literal>lfs1</Literal> or <Filename>/usr</Filename>), or 
aggregate ID (for example, <Literal>3</Literal> or <Literal>12</Literal>) of the aggregate or partition 
to be used in the command.  These identifiers are specified in the first, 
second, and fourth fields of the entry for the aggregate or partition in the
<Symbol Role="Variable">dcelocal</Symbol><Filename>/var/dfs/dfstab</Filename> file.
</Para>
</ListItem>
<ListItem>
<Para>The <Option>cell</Option><Symbol Role="Variable"> cellname</Symbol> option specifies the cell with respect to which 
the command is to be run (for example, <Replaceable>abc.com</Replaceable>).  The default is the 
local cell of the issuer of the command.
<?sml-break><?sml-need 20></Para>
</ListItem>
<ListItem>
<Para>The <Option>noauth</Option> option directs the <Command>fts</Command> program to use the unprivileged
identity <Literal>nobody</Literal> as the identity of the issuer of the command.  If DFS
authorization checking has been disabled with the <Command>bos setauth</Command> command,
the identity <Literal>nobody</Literal> has the necessary privileges to perform any
operation. (See Chapter 4 for information about disabling DFS authorization
checking.) If you use this option, do not use the <Option>localauth</Option> option.
</Para>
</ListItem>
<ListItem>
<Para>The <Option>localauth</Option> option directs the <Command>fts</Command> program to use the DFS
server principal of the machine on which the command is issued as the identity
of the issuer.  Each DFS server machine has a DFS server principal stored in
the Registry Database.  A DFS server principal is a unique, fully qualified
principal name that ends with the string <Literal>dfs-server</Literal> (for example,
<Replaceable>/.../abc.com/hosts/fs1/dfs-server</Replaceable>).  Do not confuse a machine's DFS
server principal with its unique <Literal>self</Literal> identity. (See Section 6.2 for
information about DFS server principals.)
</Para>
<Para>Use the <Option>localauth</Option> option only if the command is issued from a DFS 
server machine.  You must be logged into the server machine as <Literal>root</Literal> for 
this option to work.
If you use this option, do not use the <Option>noauth</Option> option.
</Para>
</ListItem>
</ItemizedList>
<Para>The <Option>cell</Option>, <Option>noauth</Option>, and <Option>localauth</Option> options are always
optional.
</Para>
</Sect2>
</Sect1>
<Sect1 Id="DFSAGR.FTAV.div.15">
<Title>Exporting Aggregates and Partitions</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.34">
<Primary>aggregates</Primary>
<Secondary>exporting</Secondary>
</IndexTerm>
<Para>Before exporting a DCE LFS aggregate or a non-LFS partition (non-LFS aggregate)
from a File Server machine, you must ensure that an RPC binding exists for the
DCE pathname of the machine and that a DFS server principal and account exist
for the machine.  You must also ensure that a server entry exists for the
machine.  The RPC binding is created in CDS, the DFS server principal is created
in the Registry Database, and the server entry is registered in the FLDB. (See
Section 6.2.1 for a description of these prerequisites and additional
requirements for exporting.)
<?sml-break><?sml-need 20></Para>
<Para><IndexTerm Id="DFSAGR.FTAV.indx.35">
<Primary><Command>newaggr</Command> command</Primary>
</IndexTerm>Prior to exporting a DCE LFS aggregate, you must use the <Command>newaggr</Command> command
to construct the aggregate from a raw disk partition.  This command formats the
partition for use as a DCE LFS aggregate.  It is similar to the UNIX <Command>newfs</Command>
command, which is used to format a partition.  You issue it once for each DCE
LFS aggregate that you want to create.  The partition to be initialized as a
DCE LFS aggregate must be neither mounted locally nor exported to the DCE
namespace when you issue the <Command>newaggr</Command> command.
</Para>
<Para>Conversely, before exporting a non-LFS partition for use as an aggregate in
DFS, you must create the partition and mount it locally using the <Command>newfs</Command>
and <Command>mount</Command> commands or their equivalents.  You must also create an entry
for the partition in the local <Literal>fstab</Literal> file or its equivalent.
</Para>
<Para><IndexTerm Id="DFSAGR.FTAV.indx.36">
<Primary><Command>dfsexport</Command> command</Primary>
<Secondary> about</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.FTAV.indx.37">
<Primary><Literal>dfstab</Literal> file</Primary>
</IndexTerm>To make data on a DCE LFS aggregate or non-LFS partition available in the DCE
namespace, you must issue the <Command>dfsexport</Command> command to export the aggregate
or partition.  Before using the <Command>dfsexport</Command> command, include an entry in
the <Symbol Role="Variable">dcelocal</Symbol><Filename>/var/dfs/dfstab</Filename> file for each aggregate or partition
to be exported.  The <Command>dfsexport</Command> command reads the <Literal>dfstab</Literal> file to
determine which aggregates and partitions can be exported.  It then exports
the indicated devices.  You typically add the <Command>dfsexport</Command> command to a
machine's initialization file (<Filename>/etc/rc</Filename> or its equivalent) to
automatically export aggregates and partitions at system startup.  Note that
the <Command>dfsexport</Command> command will not export an aggregate or partition that
is currently exported.
</Para>
<Para>Because a non-LFS partition can store only one fileset, you register that
fileset in the FLDB with the <Command>fts crfldbentry</Command> command <Replaceable>before</Replaceable> you
export the partition to the namespace.  Using the <Command>fts crfldbentry</Command> command,
you specify a name to be associated with the fileset; the FL Server allocates
a fileset ID number for the new fileset.  You use this fileset ID number when
you create the entry for the partition in the <Literal>dfstab</Literal> file.  After the
partition is exported, you use the <Command>fts crmount</Command> command to create a mount
point for the fileset that the partition contains.  The <Command>fts crmount</Command>
command makes a fileset visible in the DCE namespace.
</Para>
<Para>Conversely, you must use the <Command>dfsexport</Command> command to export a DCE LFS
aggregate to the DCE namespace <Replaceable>before</Replaceable> the aggregate can store filesets.
Once a DCE LFS aggregate is exported, you can create filesets on it with the
<Command>fts create</Command> command, and you can create mount points for the filesets
with the <Command>fts crmount</Command> command.  You specify a name for a DCE LFS fileset
with the <Command>fts create</Command> command; the fileset is automatically assigned an
ID number and registered in the FLDB.
<?sml-break><?sml-need 20></Para>
<Para>Note that files from a non-LFS partition should not be open when you export
the partition.  DFS grants tokens for files from a non-LFS partition that are
accessed after the partition is exported, but it cannot grant tokens for
files from the partition that are accessed before the partition is exported.
As a result, DFS cannot effectively synchronize file access between users who
opened files before the partition was exported and users who open files after
the partition is exported because only the latter have tokens.
</Para>
<Para>The following subsections describe these steps and the commands that are used 
to perform them in more detail. (See Part 2 of this guide and reference for
more information about a specific DFS command.)
</Para>
<Sect2 Id="DFSAGR.FTAV.div.16">
<Title>Preparing for Exporting</Title>
<Para>Several prerequisites must be met before you can export either a DCE LFS
aggregate or a non-LFS partition from a File Server machine.  The following
server processes must be running before any of the other steps described in
this or the following subsections are attempted:
</Para>
<ItemizedList>
<ListItem>
<Para>A CDS server process (<Command>cdsd</Command>) must be running in the cell, and a CDS
advertiser process (<Command>cdsadv</Command>) and a CDS clerk process (<Command>cdsclerk</Command>)
must be running on the machine; use the appropriate CDS command to verify
that the CDS processes are running.  Note that the CDS advertiser on a
machine automatically spawns a new CDS clerk for each user on the machine.
</Para>
</ListItem>
<ListItem>
<Para>A Security Server process (<Command>secd</Command>) must be running in the
cell, and a security client process (<Command>sec_clientd</Command>) must be
running on the machine; use the appropriate Security Service command to
verify that the processes are running.
</Para>
</ListItem>
<ListItem>
<Para>The <Command>dced</Command> process must be running on the machine; use the appropriate
<Command>dcecp</Command> command to verify that the process is running.
</Para>
</ListItem>
<ListItem>
<Para>An FL Server process must be running in the cell.  You can use the <Command>bos
status</Command> command to verify that the <Command>flserver</Command> process is running, or
you can use the <Command>fts lsfldb</Command> command to list information about the
<Literal>root.dfs</Literal> fileset, which must exist, thus verifying that the
<Command>flserver</Command> is actually functioning.
</Para>
</ListItem>
</ItemizedList>
<?sml-break>
<?sml-need 20>
<Para>In addition, an RPC binding must exist for the DCE pathname of the File Server
machine in CDS, a corresponding DFS server principal must exist for the machine
in the Registry Database, and a server entry must exist for the machine in the
FLDB.  The following subsections describe these topics and additional 
preparation that must be completed if the machine is to export aggregates 
or partitions.
</Para>
<Sect3 Id="DFSAGR.FTAV.div.17">
<Title>Creating an RPC Binding for a File Server Machine</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.38">
<Primary>RPC bindings</Primary>
<Secondary>for File Server machine</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.FTAV.indx.39">
<Primary>File Server machines</Primary>
<Secondary>creating RPC bindings</Secondary>
</IndexTerm>
<Para>A File Server machine must have an RPC binding in CDS for its DCE pathname.
The <Command>fts</Command> program uses the RPC binding to contact the File Server machine
when it needs to communicate with the <Command>ftserver</Command> process on the machine. 
This RPC binding includes the server machine's network address, an identifier
for the protocol used to communicate with the machine, and an endpoint for
communications with the endpoint mapper service of the <Command>dced</Command> process on
the machine.
</Para>
<Para>In DCE, server machines are identified by DCE pathnames of the form
<Filename>/.../</Filename><Symbol Role="Variable">cellname</Symbol><Literal>/hosts/</Literal><Symbol Role="Variable">hostname</Symbol>; for example,
<Replaceable>/.../abc.com/hosts/fs1</Replaceable>.  The entry in CDS for the RPC binding defined
for each server machine must have a name of the form
<Filename>/.../</Filename><Symbol Role="Variable">cellname</Symbol><Literal>/hosts/</Literal><Symbol Role="Variable">hostname</Symbol><Literal>/self</Literal>; for example,
<Replaceable>/.../abc.com/hosts/fs1/self</Replaceable>.
</Para>
<Para>Note that the DFS server principal for the machine is similarly derived. The
abbreviated server principal registered for the machine in the FLDB is similar
in form to the RPC binding and DFS server principal.
</Para>
<Note>
<Para>The element that follows the <Symbol Role="Variable">cellname</Symbol> in the pathname is not well known;
for example, <Literal>hosts</Literal> could be <Literal>dfs-hosts</Literal>.  However, the string used
for the element must be applied consistently to all such names in the cell.
</Para>
</Note>
<Para>To create an RPC binding for a File Server machine, use the <Command>dcecp</Command> command
to create the structure for the RPC binding in CDS.  The entry for the RPC
binding in CDS must have a name of the form
<Filename>/.../</Filename><Symbol Role="Variable">cellname</Symbol><Literal>/hosts/</Literal><Symbol Role="Variable">hostname</Symbol><Literal>/self</Literal>.
<?sml-break><?sml-need 20></Para>
</Sect3>
<Sect3 Id="DFSAGR.FTAV.div.18">
<Title>Creating a DFS Server Principal for a File Server Machine</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.40">
<Primary>File Server machines</Primary>
<Secondary>creating server principals</Secondary>
</IndexTerm>
<Para>A File Server machine must also have a DFS server principal and associated
account in the local Registry Database.  The DFS server principal name is used
to establish an authenticated connection to the DFS server machine.
</Para>
<Para>In DCE, server machines are identified by DCE pathnames of the form
<Filename>/.../</Filename><Symbol Role="Variable">cellname</Symbol><Literal>/hosts/</Literal><Symbol Role="Variable">hostname</Symbol>; for example,
<Replaceable>/.../abc.com/hosts/fs1</Replaceable>.  The DFS server principal is of the form
<Filename>/.../</Filename><Symbol Role="Variable">cellname</Symbol><Literal>/hosts/</Literal><Symbol Role="Variable">hostname</Symbol><Filename>/dfs-server</Filename>; for example,
<Replaceable>/.../abc.com/hosts/fs1/dfs-server</Replaceable>.  A machine's DFS server principal is
similar in appearance to the name of its RPC binding, the difference being
that the last element of the RPC binding name is <Literal>self</Literal>, whereas the
corresponding element of the DFS server principal is <Literal>dfs-server</Literal>.  The
two elements also differ in that the RPC binding is defined in CDS, while the
DFS server principal is registered in the Registry Database.  Note again that
<Literal>hosts</Literal> is not a well-known element of the name.
</Para>
<Para>An abbreviation of the DFS server principal registered in the Registry
Database must be used as the principal name associated with the machine's
entry in the FLDB.  Continuing with the previous example, <Literal>hosts/fs1</Literal>
is the abbreviated DFS server principal associated with the FLDB entry for
the machine whose DFS server principal in the Registry Database is
<Replaceable>/.../abc.com/hosts/fs1/dfs-server</Replaceable>. (The full DFS principal name of a
server machine is also associated with a server encryption key in a keytab
file; see Chapter 4 for more information on server encryption keys.)
</Para>
<Para>Use the <Command>dcecp principal create</Command> command to create a DFS server principal
and associated account in the Registry Database for the File Server machine
from which aggregates and partitions are to be exported.  The DFS server
principal must be of the form
<Filename>/.../</Filename><Symbol Role="Variable">cellname</Symbol><Literal>/hosts/</Literal><Symbol Role="Variable">hostname</Symbol><Filename>/dfs-server</Filename>.
<?sml-break><?sml-need 20></Para>
</Sect3>
<Sect3 Id="DFSAGR.FTAV.div.19">
<Title>Creating a Server Entry for a File Server Machine</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.41">
<Primary>File Server machines</Primary>
<Secondary>server entries in FLDB</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.FTAV.indx.42">
<Primary>Fileset Location Database</Primary>
<Secondary>creating server entries</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.FTAV.indx.43">
<Primary><Command>fts</Command> command suite</Primary>
<Secondary><Command>crserverentry</Command></Secondary>
</IndexTerm>
<Para>Before it can house an exported aggregate or partition, a File Server machine
must also have a server entry in the FLDB.  The <Command>fts crserverentry</Command> command
is used to register a File Server machine's server entry in the FLDB.  The
server entry stores information about the machine, such as its network
addresses (a server entry can store up to four network addresses), its
abbreviated DFS server principal name, the number of fileset entries in
the FLDB that can be associated with it, and the group of administrators
that "owns" (possesses special administrative privileges for) the
server entry.
</Para>
<Para>The <Option>principal</Option> option of the <Command>fts crserverentry</Command> command is used
to specify the abbreviated DFS server principal to be registered with a
machine's server entry.  The abbreviated DFS server principal is of the form
<Literal>hosts/</Literal><Symbol Role="Variable">hostname</Symbol>.  For example, the DFS server principal
<Replaceable>/.../abc.com/hosts/fs1/dfs-server</Replaceable> would be abbreviated to <Literal>hosts/fs1</Literal>
for use with the machine's server entry in the FLDB.
</Para>
<Para>The <Option>quota</Option> option of the <Command>fts crserverentry</Command> command is used to
limit the number of filesets (read/write, read-only, and backup) that can
reside on a File Server machine.  The entry for each fileset in the FLDB
defines the File Server machine on which each version of the fileset resides.
Each server entry records the total number of filesets that are listed
in fileset entries as residing on the File Server machine.  No more than the
number of filesets that are specified with the <Option>quota</Option> option can be 
recorded in the FLDB as residing on the machine at any given time.
</Para>
<Para>The <Option>owner</Option> option of the command is used to specify the group that
owns the server entry.  Members of this group can administer the FLDB entries
for all filesets on the File Server machine.  The administrators in the group
need not be included on the <Filename>admin.fl</Filename> list for the entire cell, which
would allow them to modify all of the fileset entries in the FLDB in that
cell.  The same group can be given ownership of the server entries for all
of the File Server machines in an administrative domain, which is a collection
of File Server machines administered by the same system administrators.
Members of the group can then manipulate the FLDB entries for all of the
filesets in the domain.  A foreign group cannot own a server entry.
<?sml-break><?sml-need 20></Para>
<Para RevisionFlag="Changed">The following additional commands are also provided for the manipulation of 
server entries in the FLDB: 
<?og-ChangeStart enh,13566,R1.2.2,Add multihomed server"></Para>
<ItemizedList>
<ListItem>
<Para RevisionFlag="Changed">The <Command>fts lsserverentry</Command> command lets you list 
current server entries.  In a multihomed server environment (where
servers have more than one connection), the command lists all of the
machine specifications (host names or IP addresses) 
currently known for that server.
</Para>
</ListItem>
<ListItem>
<Para RevisionFlag="Changed">The <Command>fts edserverentry</Command> command allows you to 
edit an existing preference entry. If a server has more than one 
connection, the additional addresses must be entered through this
command. The <Command>fts crserverentry</Command> command can only specify one
connection for a server. You can remove connections 
from a server entry
with the <Command>fts edserverentry</Command> command.
</Para>
</ListItem>
<ListItem>
<Para RevisionFlag="Changed">The <Command>fts delserverentry</Command> command lets 
you remove an existing server entry.  
<!--.ML-->
</Para>
</ListItem>
</ItemizedList>
<?og-ChangeEnd enh,13566,R1.2.2,Add multihomed server">
<Para>The following subsections provide 
information about the various server entry manipulation commands.
</Para>
<Sect4 Id="DFSAGR.FTAV.div.20">
<Title>Creating a Server Entry for a Machine</Title>
<Para>To create a server entry for a File Server machine, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Verify that you have the necessary privilege.  You must be included in the 
<Filename>admin.fl</Filename> file on each Fileset Database machine.  If necessary, issue 
the <Command>bos lsadmin</Command> command to verify the members of an administrative list.
</Para>
</ListItem>
<ListItem>
<Para>Use the <Command>fts crserverentry</Command> command to create a server entry in the FLDB
for the machine:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>fts crserverentry -server </Command><Symbol Role="Variable">machine</Symbol> <Option>principal </Option><Symbol Role="Variable">name</Symbol> &bsol;
[<Option>quota </Option><Symbol Role="Variable">entries</Symbol>] [<Option>owner </Option><Symbol Role="Variable">group</Symbol>]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>server</Option> <Symbol Role="Variable">machine</Symbol> option specifies the DCE pathname, host name, 
or IP address of the server machine whose entry is to be added to the FLDB. 
The command fails if a network address in use by another server entry is 
specified with this option.
</Para>
<Para>The <Option>principal</Option> <Symbol Role="Variable">name</Symbol> option is the abbreviated DFS server 
principal name of the machine to be registered in the FLDB (for example, 
<Literal>hosts/</Literal><Symbol Role="Variable">hostname</Symbol>).  The machine's principal name in the Registry 
Database must match this name.
<?sml-break><?sml-need 20></Para>
<Para>The <Option>quota</Option> <Symbol Role="Variable">entries</Symbol> option sets a limit on the number of 
fileset entries (read/write, read-only, and backup) in the FLDB that can 
be associated with the server.  If this option is omitted, the default is 
0 (zero), meaning that an unlimited number of fileset entries can be 
associated with the server.
</Para>
<Para>The <Option>owner</Option> <Symbol Role="Variable">group</Symbol> option specifies the name of the group that 
is the owner of the server entry.  A group can be specified by a full or 
abbreviated group name (for example, <Filename>/.../</Filename><Symbol Role="Variable">cellname</Symbol><Filename>/</Filename><Symbol Role="Variable">group_name</Symbol> 
or just <Symbol Role="Variable">group_name</Symbol>).  Foreign groups cannot own a local server entry.
If this option is omitted, no group owns the server entry; the value 
<Literal>&lt;nil></Literal> is reported as the owner.
</Para>
</ListItem>
</OrderedList>
<IndexTerm Id="DFSAGR.FTAV.indx.44" SpanEnd="DFSAGR.FTAV.indx.42">
<IndexTerm Id="DFSAGR.FTAV.indx.45" SpanEnd="DFSAGR.FTAV.indx.43">
</Sect4>
<Sect4 Id="DFSAGR.FTAV.div.21">
<Title>Listing Server Entries for Machines</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.46">
<Primary>Fileset Location Database</Primary>
<Secondary>viewing server entries</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.FTAV.indx.47">
<Primary><Command>fts</Command> command suite</Primary>
<Secondary><Command>lsserverentry</Command></Secondary>
</IndexTerm>
<Para>Use the <Command>fts lsserverentry</Command> command to list either the server entry for
a specific File Server machine or all current server entries from the FLDB:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>fts lsserverentry </Command>{<Option>server </Option><Symbol Role="Variable">machine</Symbol> | <Option>all</Option>}
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>server</Option> <Symbol Role="Variable">machine</Symbol> option specifies the DCE pathname, host 
name, or IP address of the server machine whose entry in the FLDB is to 
be displayed.  Use this option or use the <Option>all</Option> option.
</Para>
<Para>The <Option>all</Option> option specifies that the entries for all server machines in 
the FLDB are to be displayed.  Use this option or use the <Option>server</Option> option.
</Para>
</Sect4>
<Sect4 Id="DFSAGR.FTAV.div.22">
<Title>Editing a Server Entry for a Machine</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.48">
<Primary>Fileset Location Database</Primary>
<Secondary>editing server entries</Secondary>
</IndexTerm>
<Para>To edit the server entry for a File Server machine, do the following:
<?sml-break><?sml-need 20></Para>
<OrderedList>
<ListItem>
<Para>Verify that you have the necessary privilege.  You must be included in the 
<Filename>admin.fl</Filename> file on each Fileset Database machine.  If necessary, issue 
the <Command>bos lsadmin</Command> command to verify the members of an administrative list.
</Para>
</ListItem>
<ListItem>
<IndexTerm Id="DFSAGR.FTAV.indx.49">
<Primary><Command>fts</Command> command suite</Primary>
<Secondary><Command>edserverentry</Command></Secondary>
</IndexTerm>
<Para>Use the <Command>fts edserverentry</Command> command to modify any aspect of an existing
server entry in the FLDB.  For example, the command can be used to add an
additional network address to an existing entry for a machine.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>fts edserverentry -server</Command> <Symbol Role="Variable">machine</Symbol> \
[{<Option>rmaddr</Option> | <Option>addaddr</Option> <Symbol Role="Variable">address</Symbol> | <Option>changeaddr </Option><Symbol Role="Variable">address</Symbol>}] \
[<Option>principal </Option><Symbol Role="Variable">name</Symbol>] [<Option>quota </Option><Symbol Role="Variable">entries</Symbol>] [{<Option>owner </Option><Symbol Role="Variable">group</Symbol> \
| <Option>noowner</Option>}]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>server</Option> <Symbol Role="Variable">machine</Symbol> option specifies the DCE pathname, host name, 
or IP address of the server machine whose entry in the FLDB is to be modified. 
Specify the network address if the <Option>rmaddr</Option>, <Option>addaddr</Option>, or 
<Option>changeaddr</Option> option is used with the command.
</Para>
<Para>The <Option>rmaddr</Option> option removes the network address specified with 
<Option>server</Option> from the FLDB.  The command fails if the specified address is 
the only address present for the machine in the FLDB.  If you use this option, 
do not use the <Option>addaddr</Option> or <Option>changeaddr</Option> option.
</Para>
<Para>The <Option>addaddr</Option> <Symbol Role="Variable">address</Symbol> option adds the additional address specified 
with this option to the FLDB for the machine specified with <Option>server</Option>. 
A machine can have up to four addresses associated with its entry in the FLDB. 
If you use this option, do not use the <Option>rmaddr</Option> or <Option>changeaddr</Option> 
option.
</Para>
<Para>The <Option>changeaddr</Option> <Symbol Role="Variable">address</Symbol> option changes the address in the 
FLDB specified with <Option>server</Option> to the address specified with this option. 
If you use this option, do not use the <Option>rmaddr</Option> or <Option>addaddr</Option> option.
</Para>
<Para>The <Option>principal</Option> <Symbol Role="Variable">name</Symbol> option changes the abbreviated DFS 
server principal name of the machine registered in the FLDB (for example, 
<Literal>hosts/</Literal><Symbol Role="Variable">hostname</Symbol>).  The machine's principal name in the Registry 
Database must match this name.  Omit this option to leave the DFS server 
principal registered for the machine unchanged.
<?sml-break><?sml-need 20></Para>
<Para>The <Option>quota</Option> <Symbol Role="Variable">entries</Symbol> option changes the limit on the number of 
fileset entries (read/write, read-only, and backup) in the FLDB that can be 
associated with the server.  Omit this option to leave the quota for the 
number of fileset entries unchanged.
</Para>
<Para>The <Option>owner</Option> <Symbol Role="Variable">group</Symbol> option changes the group that is the owner of 
the server entry.  In the entry, the specified group replaces the current 
owning group, if there is any.  A group can be specified by a full or 
abbreviated group name (for example, <Filename>/.../</Filename><Symbol Role="Variable">cellname</Symbol><Filename>/</Filename><Symbol Role="Variable">group_name</Symbol> 
or just <Symbol Role="Variable">group_name</Symbol>).  Foreign groups cannot own a local server entry. 
Use this option or use the <Option>noowner</Option> option; omit both options to leave 
the current owning group unchanged.
</Para>
<Para>The <Option>noowner</Option> option specifies that no group is to own the server entry.
In the entry, the empty group ID, which is displayed as <Literal>&lt;nil></Literal>, replaces 
the group that currently owns the server entry; the entry is unchanged in 
this regard if no group presently owns the server entry.  Use this option or 
use the <Option>owner</Option> option; omit both options to leave the current owning 
group unchanged.
</Para>
</ListItem>
</OrderedList>
<IndexTerm Id="DFSAGR.FTAV.indx.50" SpanEnd="DFSAGR.FTAV.indx.48">
</Sect4>
<Sect4 Id="DFSAGR.FTAV.div.23">
<Title>Deleting a Server Entry for a Machine</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.51">
<Primary>Fileset Location Database</Primary>
<Secondary>deleting server entries</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.FTAV.indx.52">
<Primary><Command>fts</Command> command suite</Primary>
<Secondary><Command>delserverentry</Command></Secondary>
</IndexTerm>
<Para>To remove the server entry for a File Server machine, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Verify that you have the necessary privilege.  You must be included in the 
<Filename>admin.fl</Filename> file on each Fileset Database machine.  If necessary, issue 
the <Command>bos lsadmin</Command> command to verify the members of an administrative list.
</Para>
</ListItem>
<ListItem>
<Para>Use the <Command>fts delserverentry</Command> command to delete the server entry for a
machine from the FLDB.  The command fails if the entry in the FLDB for any
fileset references the server entry to be removed as the location of the
fileset.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>fts delserverentry -server</Command> <Symbol Role="Variable">machine</Symbol>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>server</Option> <Symbol Role="Variable">machine</Symbol> option specifies the DCE pathname, host name, 
or IP address of the server machine whose entry in the FLDB is to be removed. 
The command fails if a fileset entry references the server entry to be removed.
</Para>
</ListItem>
</OrderedList>
<IndexTerm Id="DFSAGR.FTAV.indx.53" SpanEnd="DFSAGR.FTAV.indx.41">
</Sect4>
</Sect3>
<Sect3 Id="DFSAGR.FTAV.div.24">
<Title>Preparing a File Server Machine for Exporting</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.54">
<Primary>File Server machines</Primary>
<Secondary>preparing for export</Secondary>
</IndexTerm>
<Para>The following additional prerequisites must be met before a File Server
machine can begin to export aggregates or partitions:
</Para>
<ItemizedList>
<ListItem>
<Para>The BOS Server (<Command>bosserver</Command> process) must be running on the machine.
</Para>
</ListItem>
<ListItem>
<Para>A keytab file and a server encryption key must exist on the machine.
</Para>
</ListItem>
<ListItem>
<Para>The <Command>dfsbind</Command> process must be running on the machine.
</Para>
</ListItem>
<ListItem>
<Para>The <Command>fxd</Command> process must be running on the machine.
</Para>
</ListItem>
<ListItem>
<Para>The Fileset Server (<Command>ftserver</Command> process) must be running on the machine.
</Para>
</ListItem>
<ListItem>
<Para>The Replication Server (<Command>repserver</Command> process) must be running on the
machine, if the machine is to house read-only DCE LFS filesets.
</Para>
</ListItem>
</ItemizedList>
<Para>The following procedure provides instructions for starting these processes and
generating a key.  The instructions assume that the <Command>dcecp keytab create</Command>
command has already been used to create a keytab file on the machine.
</Para>
<OrderedList>
<ListItem>
<Para>Log in as <Literal>root</Literal> on the machine.
</Para>
</ListItem>
<ListItem>
<Para>Start the BOS Server (<Command>bosserver</Command> process) on the machine with the
<Command>bosserver</Command> command, using the <Option>noauth</Option> option to disable DFS
authorization checking on the server machine. (See Chapter 4 for a thorough
description of DFS authorization checking.) The process automatically creates
the <Filename>admin.bos</Filename> file when it starts.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Command>bosserver -noauth</Command>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>noauth</Option> option starts the <Command>bosserver</Command> with DFS authorization 
checking turned off.
</Para>
</ListItem>
<ListItem>
<Para>Use the <Command>bos addadmin</Command> command to add the necessary administrative users
and groups to the <Filename>admin.bos</Filename> file.  Make sure you are included in the list
of users or groups added to the list.  You must use the <Option>noauth</Option> option to
use the identity <Literal>nobody</Literal> as the identity of the issuer of the command.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Command>bos addadmin -server </Command><Symbol Role="Variable">machine</Symbol> <Option>adminlist</Option> <Replaceable>admin.bos</Replaceable> \
[<Option>principal </Option><Symbol Role="Variable">name</Symbol>...] [<Option>group </Option><Symbol Role="Variable">name</Symbol>...] <Option>noauth</Option>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>adminlist</Option> <Replaceable>admin.bos</Replaceable> option specifies that principals and groups
are to be added to the <Filename>admin.bos</Filename> list on the machine indicated with the
<Option>server</Option> option.
</Para>
<Para>The <Option>principal</Option> <Symbol Role="Variable">name</Symbol> option specifies the principal name of each 
user to be added to the <Filename>admin.bos</Filename> list.  A user from the local cell 
can be specified by a full or an abbreviated principal name (for example,
<Filename>/.../</Filename><Symbol Role="Variable">cellname</Symbol><Filename>/</Filename><Symbol Role="Variable">username</Symbol> or just <Symbol Role="Variable">username</Symbol>); a user from a
foreign cell can be specified only by a full principal name.
</Para>
<Para>The <Option>group</Option> <Symbol Role="Variable">name</Symbol> option specifies the name of each group to be 
added to the <Filename>admin.bos</Filename> list.  A group from the local cell can be 
specified by a full or an abbreviated group name (for example, 
<Filename>/.../</Filename><Symbol Role="Variable">cellname</Symbol><Filename>/</Filename><Symbol Role="Variable">group_name</Symbol> or just <Symbol Role="Variable">group_name</Symbol>); a group 
from a foreign cell can be specified only by a full group name.
</Para>
<Para>The <Option>noauth</Option> option directs the <Command>bos</Command> program to use the 
unprivileged identity <Literal>nobody</Literal> as the identity of the issuer.
</Para>
</ListItem>
<ListItem>
<Para>Add a server encryption key to the keytab file on the machine with the <Command>bos
genkey</Command> command, again using the <Option>noauth</Option> option. (See Chapter 4 for
complete details about managing a keytab file.)
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Command>bos genkey -server </Command><Symbol Role="Variable">machine</Symbol> <Option>kvno</Option> <Symbol Role="Variable">version_number</Symbol> <Option>noauth</Option>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>kvno</Option> <Symbol Role="Variable">version_number</Symbol> option is the key version number of the 
new key.  Valid arguments for this option are decimal integers from 0 (zero) 
to 255.
</Para>
<Para>The <Option>noauth</Option> option directs the <Command>bos</Command> program to use the 
unprivileged identity <Literal>nobody</Literal> as the identity of the issuer.
</Para>
</ListItem>
<ListItem>
<Para>Enable DFS authorization checking on the machine with the <Command>bos setauth</Command>
command, once again using the <Option>noauth</Option> option.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Command>bos setauth -server </Command><Symbol Role="Variable">machine</Symbol> <Option>authchecking</Option> <Literal>on</Literal> <Option>noauth</Option>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>authchecking</Option> <Literal>on</Literal> option enables DFS authorization checking by 
removing the <Filename>NoAuth</Filename> file from the machine specified with the 
<Option>server</Option> option.
</Para>
<Para>The <Option>noauth</Option> option directs the <Command>bos</Command> program to use the 
unprivileged identity <Literal>nobody</Literal> as the identity of the issuer.
</Para>
</ListItem>
<ListItem>
<Para>Start the <Command>dfsbind</Command> process on the machine.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Command>dfsbind</Command>
</UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
<ListItem>
<Para>Start the <Command>fxd</Command> process to initialize the File Exporter in the kernel of
the machine.  Specify the name of the proper administrative group with the
<Option>admingroup</Option> option. (See Chapter 3 for more information about using
administrative groups.)
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Command>fxd -admingroup </Command><Symbol Role="Variable">group</Symbol>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para RevisionFlag="Changed"><?og-ChangeStart enh, 13605, R1.2.2, Security enhancements">The <Option>admingroup</Option> <Symbol Role="Variable">group</Symbol> option specifies the group that can 
administer the File Exporter on the machine.  A group from the local cell can 
be specified by a full or an abbreviated group name (for example,
<Filename>/.../</Filename><Symbol Role="Variable">cellname</Symbol><Filename>/</Filename><Symbol Role="Variable">group_name</Symbol> or just <Symbol Role="Variable">group_name</Symbol>); a group
from a foreign cell can be specified only by a full group name. (You may add any other applicable options; see the <Symbol Role="Variable">Transarc DCE DFS Administration Reference</Symbol> for complete information about the <Literal>fxdprocess).
<?og-ChangeEnd enh, 13605, R1.2.2, Security enhancements"></Literal></Para>
</ListItem>
<ListItem>
<Para>Log out as <Literal>root</Literal> from the machine to return to your authenticated DCE
identity.
</Para>
</ListItem>
<ListItem>
<Para>Start the Fileset Server (<Command>ftserver</Command> process) with the <Command>bos create</Command>
command. (See Chapter 5 for complete information about starting a server
process.) The <Filename>admin.ft</Filename> file is created automatically when the process
starts.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>bos create -server </Command><Symbol Role="Variable">machine</Symbol><Literal> -process ftserver -type simple \
-cmd </Literal><Symbol Role="Variable">dcelocal</Symbol><Filename>/bin/ftserver</Filename>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>server</Option> option names the server machine on which to create the new 
process.  The BOS Server on this machine executes the command.  If you want to 
run this command using a privileged identity, specify the File Server machine 
using the full DCE pathname.  If you want to run this command using the 
unprivileged identity <Literal>nobody</Literal> (the equivalent of running the command 
with the <Option>noauth</Option> option), specify the File Server machine with 
either the machine's host name or IP address.
</Para>
<Para>The <Option>process</Option> <Replaceable>ftserver</Replaceable> option specifies that the process to be created
and started is to be identified by the name <Command>ftserver</Command>.
</Para>
<Para>The <Option>type</Option> <Literal>simple</Literal> option specifies that the <Command>ftserver</Command> process is 
to be a <Command>simple</Command> process.
</Para>
<Para>The <Option>cmd</Option> /<Symbol Role="Variable">dcelocal</Symbol>/<Literal>bin</Literal>/<Command>ftserver</Command> option provides the
full pathname to the binary file for the <Command>ftserver</Command> process.
</Para>
</ListItem>
<ListItem>
<Para>Use the <Command>bos addadmin</Command> command to add the necessary administrative users
and groups (and possibly server machines) to the <Filename>admin.ft</Filename> file.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>bos addadmin -server </Command><Symbol Role="Variable">machine</Symbol> <Option>adminlist</Option> <Replaceable>admin.ft</Replaceable> \
[<Option>principal </Option><Symbol Role="Variable">name</Symbol>...] [<Option>group </Option><Symbol Role="Variable">name</Symbol>...]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>server</Option> option names the server machine that houses the 
administrative list to which principals, groups, or both are to be added.  The 
BOS Server on this machine executes the command.  If you want to run this 
command using a privileged identity, specify the File Server machine using 
the full DCE pathname.  If you want to run this command using the unprivileged 
identity <Literal>nobody</Literal> (the equivalent of running the command with the 
<Option>noauth</Option> option), specify the File Server machine with either the 
machine's host name or IP address.
</Para>
<Para>The <Option>adminlist</Option> <Replaceable>admin.ft</Replaceable> option specifies that principals and groups
are to be added to the <Filename>admin.ft</Filename> list on the machine indicated with
the <Option>server</Option> option.
</Para>
<Para>The <Option>principal</Option> <Symbol Role="Variable">name</Symbol> option specifies the principal name of each 
user or server machine to be added to the <Filename>admin.ft</Filename> list.  A principal 
from the local cell can be specified by a full or an abbreviated principal 
name (for example, <Filename>/.../</Filename><Symbol Role="Variable">cellname</Symbol><Filename>/</Filename><Symbol Role="Variable">username</Symbol> or just 
<Symbol Role="Variable">username</Symbol>); a principal from a foreign cell can be specified only by 
a full principal name.
</Para>
<Para>The <Option>group</Option> <Symbol Role="Variable">name</Symbol> option specifies the name of each group to be 
added to the <Filename>admin.ft</Filename> list.  A group from the local cell can be 
specified by a full or an abbreviated group name (for example, 
<Filename>/.../</Filename><Symbol Role="Variable">cellname</Symbol><Filename>/</Filename><Symbol Role="Variable">group_name</Symbol> or just <Symbol Role="Variable">group_name</Symbol>); a group 
from a foreign cell can be specified only by a full group name.
</Para>
</ListItem>
<ListItem>
<Para>Start the Replication Server (<Command>repserver</Command> process) with the <Command>bos
create</Command> command.  No administrative list is associated with the
<Command>repserver</Command> process.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>bos create -server </Command><Symbol Role="Variable">machine</Symbol><Literal> -process repserver -type simple \
-cmd </Literal><Symbol Role="Variable">dcelocal</Symbol><Filename>/bin/repserver</Filename>
</UserInput></ProgramListing></Para>
</InformalExample>
<?sml-break>
<?sml-need 20>
<Para>The <Option>server</Option> option names the server machine on which to create the new 
process.  The BOS Server on this machine executes the command.  If you want to 
run this command using a privileged identity, specify the File Server machine 
using the full DCE pathname.  If you want to run this command using the 
unprivileged identity <Literal>nobody</Literal> (the equivalent of running the command 
with the <Option>noauth</Option> option), specify the File Server machine with 
either the machine's host name or IP address.
</Para>
<Para>The <Option>process</Option> <Replaceable>repserver</Replaceable> option specifies that the process to be created
and started is to be identified by the name <Command>repserver</Command>.
</Para>
<Para>The <Option>type</Option> <Literal>simple</Literal> option specifies that the <Command>repserver</Command> process 
is to be a <Command>simple</Command> process.
</Para>
<Para>The <Option>cmd</Option> /<Symbol Role="Variable">dcelocal</Symbol>/<Literal>bin</Literal>/<Command>repserver</Command> option provides the
full pathname to the binary file for the <Command>repserver</Command> process.
</Para>
</ListItem>
<ListItem>
<Para>After the Fileset Server process is started, use the <Command>fts statftserver</Command> 
command to verify that the process is performing requested actions.  This
command is useful mainly if you believe the process is not functioning
properly.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>fts statftserver -server </Command><Symbol Role="Variable">machine</Symbol>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Command>fts statftserver</Command> command displays the message <Literal>No active
transactions on</Literal> <Symbol Role="Variable">machine</Symbol> if the Fileset Server is functioning
properly.  It displays additional information if the Fileset Server is
currently performing an action.  Depending on the information displayed, the
Fileset Server may or may not be functioning properly.
</Para>
</ListItem>
</OrderedList>
<IndexTerm Id="DFSAGR.FTAV.indx.55" SpanEnd="DFSAGR.FTAV.indx.54">
<?sml-break>
<?sml-need 20>
</Sect3>
</Sect2>
<Sect2 Id="DFSAGR.FTAV.div.25">
<Title>Exporting DCE LFS Aggregates</Title>
<Para>The following subsections introduce and describe the steps that are involved 
in initializing and exporting a DCE LFS aggregate.  Before exporting a DCE LFS 
aggregate to the DCE namespace, the prerequisites described in the previous 
section must be met: the necessary Directory Service, Security Service, RPC, 
and DFS server processes must be running; an RPC binding must exist for the
DCE pathname of the machine; a DFS server principal must exist for the machine;
a server entry must exist for the machine; and a keytab file and a key must
exist on the machine.  You must also initialize the aggregate by formatting
it with the <Command>newaggr</Command> command before it can be exported.
</Para>
<Sect3 Id="DFSAGR.FTAV.div.26">
<Title>An Overview of Initializing DCE LFS Aggregates</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.56">
<Primary><Command>newaggr</Command> command</Primary>
</IndexTerm>
<IndexTerm Id="DFSAGR.FTAV.indx.57">
<Primary>partitions</Primary>
<Secondary>use of <Command>newaggr</Command> command</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.FTAV.indx.58">
<Primary>aggregates</Primary>
<Secondary>initializing partitions</Secondary>
</IndexTerm>
<Para>Prior to creating a DCE LFS aggregate, use the <Command>newaggr</Command> command to
initialize the raw partition on which the aggregate is to reside by formatting
it for use as a DCE LFS aggregate.  The <Command>newaggr</Command> command creates the
metadata structure used by the DCE LFS for ACL support, logging, multiple
fileset storage, and other fileset-related operations.  It also allocates
temporary space for use by the DCE LFS log for faster restarts after system
failures.  The DCE LFS log is not a file; it is a structure that resides on
an aggregate.  If the system fails, the logged metadata that was written to
disk is replayed at system restart to return the system to a consistent state.
</Para>
<Para>Because the <Command>newaggr</Command> command overwrites all data on the partition being
initialized, the partition being initialized should not contain data you want
to save when the command is issued.  Also, the command fails if the partition
or aggregate being initialized is currently exported to the DCE namespace.  It
also fails if the aggregate to be initialized houses a locally mounted fileset.
Finally, if the partition is mounted locally, the <Command>newaggr</Command> command causes
the kernel to panic. (Note that a non-LFS partition must be mounted locally
before it can be exported.)
<?sml-break><?sml-need 20></Para>
<Para>If you are uncertain about which arguments to supply with the <Command>newaggr</Command>
command, execute the command with the <Option>noaction</Option> option.  This option
directs the command to report on what it would do without actually modifying
the partition.  When using the <Option>noaction</Option> option, supply the other options
as you would when actually executing the command.
</Para>
<Para><IndexTerm Id="DFSAGR.FTAV.indx.59">
<Primary>aggregates</Primary>
<Secondary>reserved disk space</Secondary>
</IndexTerm>Note that DCE LFS reserves a variable amount of disk space on every DCE LFS
aggregate.  By default, DCE LFS reserves 2 megabytes of disk space on an
aggregate, but it never reserves less than 1% or more than 10% of the total
size of an aggregate (for example, it reserves only 1.5 megabytes on an
aggregate whose total size is only 15 megabytes).  DCE LFS reserves the disk
space for internal purposes (for example, to avoid potential problems with
routine administrative operations such as fileset moves and clones).  The
reserved space is not directly accessible to users and administrators.
</Para>
<Para>In operating systems that support logical volumes, the <Command>newaggr</Command> command
can be used to initialize a logical volume as a DCE LFS aggregate.  In such
cases, all of the command's functionality described here with respect to a disk
partition applies to the logical volume.
</Para>
</Sect3>
<Sect3 Id="DFSAGR.FTAV.div.27">
<Title>Initializing a DCE LFS Aggregate</Title>
<Caution>
<Para>Do not use the <Command>newaggr</Command> command to initialize a non-LFS
partition, especially if it contains data you want to retain, unless you want
to convert the partition to a DCE LFS aggregate; the command destroys all data
on the specified partition.  Also, do not use the command on a locally mounted
partition; doing so causes the kernel to panic.  Finally, do not use the command
on a partition or aggregate that is currently exported to the DCE namespace or
on an aggregate that houses a locally mounted fileset; the command fails in
these cases.
</Para>
</Caution>
<Para>To initialize a DCE LFS aggregate, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Log in as <Literal>root</Literal> on the machine on which the new aggregate is to be
initialized.
<?sml-break><?sml-need 20></Para>
</ListItem>
<ListItem>
<Para>Issue the <Command>newaggr</Command> command to initialize the aggregate. (See Part 2 of
this guide and reference for more detailed information about the <Command>newaggr</Command>
command.)
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Command>newaggr -aggregate </Command><Symbol Role="Variable">name</Symbol> <Option>blocksize</Option> <Symbol Role="Variable">bytes</Symbol> <Option>fragsize</Option> <Symbol Role="Variable">bytes</Symbol> \
[<Option>initialempty </Option><Symbol Role="Variable">blocks</Symbol>] [<Option>aggrsize </Option><Symbol Role="Variable">blocks</Symbol>] [<Option>logsize </Option><Symbol Role="Variable">blocks</Symbol>] \
[<Option>overwrite</Option>] [<Option>verbose</Option>] [<Option>noaction</Option>]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>aggregate</Option> <Symbol Role="Variable">name</Symbol> option is the device name or aggregate name 
of the disk partition to be initialized as a DCE LFS aggregate.  These 
identifiers are specified in the first and second fields of the entry for the 
aggregate in the <Symbol Role="Variable">dcelocal</Symbol><Filename>/var/dfs/dfstab</Filename> file.
</Para>
<Para>The <Option>blocksize</Option> <Symbol Role="Variable">bytes</Symbol> option is the number of bytes to be available 
in each DCE LFS block on the aggregate.  Allowable values are the powers of 2 
from 1024 to 65,536.
</Para>
<Para>The <Option>fragsize</Option> <Symbol Role="Variable">bytes</Symbol> option is the number of bytes to be 
available in each DCE LFS fragment on the aggregate.  Allowable values are 
the powers of 2 from 1024 to the number of bytes specified with 
the <Option>blocksize</Option> option.
</Para>
<Para>The <Option>initialempty</Option> <Symbol Role="Variable">blocks</Symbol> option is the number of DCE LFS blocks 
to be left empty at the beginning of the partition when the aggregate 
is initialized.  Allowable values are from 0 (zero) to 65,536 divided by the 
number of bytes specified with the <Option>blocksize</Option> option; for example, if 
65,536 is specified with the <Option>blocksize</Option> option, the <Option>initialempty</Option> 
option can be 0 or 1.  If this option is omitted, one block is left 
empty.
</Para>
<Para>The <Option>aggrsize</Option> <Symbol Role="Variable">blocks</Symbol> option is the total number of DCE LFS blocks 
that are to be available on the aggregate.  Because this value cannot exceed 
the size of the partition, it can be used only to restrict the size of the 
aggregate.  It must be large enough to accommodate at least the log and any 
blocks left empty at the beginning of the partition.  If this option is 
omitted, the size of the partition being initialized is used.
</Para>
<Para>The <Option>logsize</Option> <Symbol Role="Variable">blocks</Symbol> option is the number of DCE LFS blocks to 
be reserved for the log on the aggregate.  This value cannot exceed the number 
of DCE LFS blocks used for the <Option>aggrsize</Option> option, and it must specify at 
least enough blocks for the log to be initially created.  If this option is 
omitted, 1% of the total number of DCE LFS blocks on the aggregate 
(<Option>aggrsize</Option>) is used.
<?sml-break><?sml-need 20></Para>
<Para>The <Option>overwrite</Option> option specifies that an existing file system found on 
the partition can be overwritten.  If this option is omitted and a file system 
is found on the partition, the command informs you that a file system 
already exists.  It then terminates with an exit code of at least 16 
without overwriting the existing file system.
</Para>
<Para>The <Option>noaction</Option> option directs the command to display information 
about what it would do without actually modifying the partition.  Include the 
other options as you would to actually execute the command.  The command 
displays the default values it would use for its options and informs you if 
the partition already contains a file system.
</Para>
</ListItem>
</OrderedList>
<IndexTerm Id="DFSAGR.FTAV.indx.60" SpanEnd="DFSAGR.FTAV.indx.56">
<IndexTerm Id="DFSAGR.FTAV.indx.61" SpanEnd="DFSAGR.FTAV.indx.58">
</Sect3>
<Sect3 Id="DFSAGR.FTAV.div.28">
<Title>Exporting a DCE LFS Aggregate</Title>
<Para>To export a DCE LFS aggregate, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Verify that you have the necessary privileges.  You must be included in the 
<Filename>admin.ft</Filename> file on the machine from which the aggregate is to be 
exported, and you must be included in the <Filename>admin.fl</Filename> file on each 
Fileset Database machine or own the server entry for the machine from which 
the aggregate is to be exported.  If necessary, issue the <Command>bos lsadmin</Command> 
command to verify the members of an administrative list.
</Para>
</ListItem>
<ListItem>
<Para>Verify that you have the <Literal>w</Literal> (write), <Literal>x</Literal> (execute), and <Literal>i</Literal> 
(insert) ACL permissions for the directories in which the mount points for 
any filesets are to be created.  If necessary, issue the <Command>dcecp acl show</Command> 
command to check the ACL permissions for the directories.  Note that you need 
to have the <Literal>w</Literal> and <Literal>x</Literal> permissions for any directories in non-LFS 
filesets.
</Para>
</ListItem>
<ListItem>
<Para>Log in as <Literal>root</Literal> on the machine from which the aggregate is to be exported.
<?sml-break><?sml-need 20></Para>
</ListItem>
<ListItem>
<Para>Use a text editor to edit the <Literal>dfstab</Literal> file to include an entry for the
DCE LFS aggregate to be exported.  The following fields appear for each entry
in the file, in the order listed.  Each field must be separated by a minimum
of one space or tab; each entry must be on a separate line.
</Para>
<ItemizedList>
<ListItem>
<Para>Device Name: The block device name of the aggregate (for example,
<Filename>/dev/lv03</Filename>).
</Para>
</ListItem>
<ListItem>
<Para>Aggregate Name: The name to be associated with the exported aggregate.
An aggregate name can contain any characters, but it can be no longer than 31
characters, and it must be different from any other aggregate name in the
file.  Aggregate names cannot be abbreviated, so you should choose a short,
explicit name (for example, <Literal>lfs1</Literal>).
</Para>
</ListItem>
<ListItem>
<Para>File System Type: The identifier for the file system type of the
aggregate.  For DCE LFS aggregates, this must be <Literal>lfs</Literal>.  It must be in
lowercase letters.
</Para>
</ListItem>
<ListItem>
<Para>Aggregate ID: A positive integer to act as the aggregate ID of the
exported aggregate.  The integer must be different from any other aggregate
ID in the <Literal>dfstab</Literal> file. (If the ID is changed after the aggregate
contains one or more filesets, fileset operations on those filesets will fail.)
</Para>
</ListItem>
</ItemizedList>
<Para>The following entry from a <Literal>dfstab</Literal> file is for a DCE LFS aggregate:
</Para>
<InformalExample>
<Para><ProgramListing>/dev/lv03 &ensp;lfs1 &ensp;lfs &ensp;3
</ProgramListing></Para>
</InformalExample>
</ListItem>
<ListItem>
<Para>Issue the <Command>dfsexport</Command> command to export the aggregate to the DCE namespace.
Before exporting, this command reads the <Literal>dfstab</Literal> file to determine which
aggregates and partitions are available to be exported.  Omit all of the
command's options to list the aggregates and partitions currently exported
from the local disk to the DCE namespace.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Command>dfsexport</Command> [{<Option>all</Option> | <Option>aggregate </Option><Symbol Role="Variable">name</Symbol>}] [<Option>type </Option><Symbol Role="Variable">name</Symbol>]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>all</Option> option specifies that all aggregates and partitions listed in 
the <Literal>dfstab</Literal> file are to be exported.  Use the <Option>all</Option> option with the
<Option>type</Option> option to export only DCE LFS aggregates or only non-LFS 
partitions.  Use this option or use the <Option>aggregate</Option> option.
<?sml-break><?sml-need 20></Para>
<Para>The <Option>aggregate</Option> <Symbol Role="Variable">name</Symbol> option specifies the device name or aggregate 
name of a specific aggregate or partition.  These names are specified in the 
first and second fields of the entry for the aggregate or partition in the 
<Literal>dfstab</Literal> file.  Use the <Option>aggregate</Option> option or use the <Option>all</Option> 
option.
</Para>
<Para>The <Option>type</Option> <Symbol Role="Variable">name</Symbol> option is the file system type to be exported. 
Specify <Literal>lfs</Literal> to export only DCE LFS aggregates; specify <Literal>ufs</Literal> to 
export only non-LFS partitions.  Use the <Option>type</Option> option only with the
<Option>all</Option> option (it is ignored if it is used without <Option>all</Option>); omit 
<Option>type</Option> and use <Option>all</Option> to export all aggregates and partitions.
</Para>
</ListItem>
<ListItem>
<Para>Log out as <Literal>root</Literal> from the machine to return to your authenticated DCE
identity.
</Para>
</ListItem>
<ListItem>
<Para>Issue the <Command>fts create</Command> command to create a DCE LFS fileset on the aggregate
and register the fileset in the FLDB.  The FL Server allocates a unique fileset
ID number for the fileset. (See Section 6.3 for detailed information about DCE
LFS fileset creation.)
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>fts create -ftname </Command><Symbol Role="Variable">name</Symbol> <Option>server</Option> <Symbol Role="Variable">machine</Symbol> <Option>aggregate</Option> <Symbol Role="Variable">name</Symbol>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>ftname</Option> <Symbol Role="Variable">name</Symbol> option is the complete name to be associated with
the fileset being created.  The name can contain no more than 102 characters,
and it must contain at least one alphabetic character or an _  (underscore).
(See Section 6.1.4.1 for more information on fileset naming conventions.)
</Para>
<Para>Repeat the <Command>fts create</Command> command for each fileset you want to create on
the aggregate.
</Para>
</ListItem>
<ListItem>
<Para>Enter the <Command>fts crmount</Command> command to create a mount point in the file system
for the new DCE LFS fileset.  This makes the contents of the fileset visible to
other users. (See Section 6.6 for more information about mounting filesets.)
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>fts crmount -dir </Command><Symbol Role="Variable">directory_name</Symbol> <Option>fileset</Option> {<Symbol Role="Variable">name</Symbol> | <Symbol Role="Variable">ID</Symbol>}
</UserInput></ProgramListing></Para>
</InformalExample>
<?sml-break>
<?sml-need 20>
<Para>The <Option>dir</Option> <Symbol Role="Variable">directory_name</Symbol> option is the location for the root 
directory of the fileset; the specified location must not already exist. 
However, the parent directory of the mount point must exist in the DCE 
namespace.  Include a complete pathname unless you want to mount the fileset 
in the working directory.
</Para>
<Para>Repeat the <Command>fts crmount</Command> command for each fileset created in the previous
step.
</Para>
</ListItem>
</OrderedList>
</Sect3>
</Sect2>
<Sect2 Id="DFSAGR.FTAV.div.29">
<Title>Exporting Non-LFS Partitions</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.62">
<Primary>partitions</Primary>
<Secondary>exporting</Secondary>
</IndexTerm>
<Para>This section describes the steps involved in exporting a non-LFS partition;
after it is exported, a non-LFS partition can be referred to as a non-LFS
aggregate.  Before exporting a non-LFS partition to the DCE namespace, the
prerequisites described in Section 6.2.1 must be met: the necessary CDS,
Security Service, RPC, and DFS server processes must be running; an RPC
binding must exist for the DCE pathname of the machine; a DFS server principal
and account must exist for the machine; a server entry must exist for the
machine; and a keytab file and a key must exist on the machine.  You must also
have created and locally mounted the partition (using the <Command>newfs</Command> and
<Command>mount</Command> commands or their equivalents), and you must have listed the
partition's name in the local <Literal>fstab</Literal> file (or its equivalent).
</Para>
<Para>Before exporting a non-LFS partition, make sure that no users have files open
on the partition.  DFS cannot effectively synchronize file access between users
who opened files from a non-LFS partition before the partition was exported and
users who open files from the partition after the partition is exported because
only the latter have tokens.
</Para>
<Para>To export a non-LFS partition, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Verify that you have the necessary privileges.  You must be included in the 
<Filename>admin.fl</Filename> file on each Fileset Database machine or own the server entry 
for the machine from which the partition is to be exported.  If necessary, issue
the <Command>bos lsadmin</Command> command to verify the members of an administrative list.
<?sml-break><?sml-need 20></Para>
</ListItem>
<ListItem>
<Para>Verify that you have the <Literal>w</Literal> (write), <Literal>x</Literal> (execute), and <Literal>i</Literal>
(insert) ACL permissions for the directory in which the mount point for the
fileset is to be created.  If necessary, issue the <Command>dcecp acl show</Command> command
to check the ACL permissions for the directory.  Note that you need to have
the <Literal>w</Literal> and <Literal>x</Literal> permissions if the directory is in a non-LFS fileset.
</Para>
</ListItem>
<ListItem>
<Para>Provide a name for the fileset (non-LFS file system) on the partition to be
exported and register the fileset in the FLDB with the <Command>fts crfldbentry</Command> 
command.  The number specified with the <Option>aggrid</Option> option is also used as the
partition's aggregate ID in the <Literal>dfstab</Literal> file; it must not already be in
use in the <Literal>dfstab</Literal> file.
</Para>
<Para>The FL Server allocates a unique fileset ID number for the partition's lone
non-LFS fileset.  The <Command>fts crfldbentry</Command> command returns this ID number,
along with two additional ID numbers allocated for read-only and backup
versions of the fileset, even though a non-LFS fileset cannot have these
versions.  Use the read/write ID number returned by the command as the fileset
ID in the <Literal>dfstab</Literal> file.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>fts crfldbentry -ftname </Command><Symbol Role="Variable">name</Symbol> <Option>server</Option> <Symbol Role="Variable">machine</Symbol> <Option>aggrid</Option> <Symbol Role="Variable">ID</Symbol>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>ftname</Option> <Symbol Role="Variable">name</Symbol> option is the complete name to be associated with
the fileset being registered.  The name can contain no more than 102 characters,
and it must contain at least one alphabetic character or an _ (underscore).
(See Section 6.1.4.1 for more information on fileset naming conventions.)
</Para>
<Para>The <Option>aggrid</Option> <Symbol Role="Variable">ID</Symbol> option is a positive integer to serve as the 
aggregate ID for the partition to be exported.  The number must not already be 
in use in the <Literal>dfstab</Literal> file on the machine where the partition resides.
</Para>
</ListItem>
<ListItem>
<Para>Log in as <Literal>root</Literal> on the machine from which the partition is to be exported.
</Para>
</ListItem>
<ListItem>
<Para>Use a text editor to edit the <Literal>dfstab</Literal> file to include an
entry for the non-LFS partition to be exported.  The following fields
appear for each entry in the file, in the order listed.  Each field must
be separated by a minimum of one space or tab; each entry must be on a
separate line.  Note that, because a non-LFS partition can contain only
a single fileset, you include the fileset ID number with the partition's
entry in the <Literal>dfstab</Literal> file.
<?sml-break><?sml-need 20></Para>
<ItemizedList>
<ListItem>
<Para>Device Name: The block device name of the partition; for example,
<Filename>/dev/lv02</Filename>.
</Para>
</ListItem>
<ListItem>
<Para>Aggregate Name: The name to be associated with the exported partition.
The aggregate name of a non-LFS partition must match the name of its local
mount point (for example, <Filename>/usr</Filename>).  An aggregate name can contain any
characters, but it can be no longer than 31 characters, and it must be
different from any other aggregate name in the file.  Aggregate names cannot
be abbreviated, so you should choose a short, explicit name.
</Para>
</ListItem>
<ListItem>
<Para>File System Type: The identifier for the file system type of the
partition.  For non-LFS file systems, this must be <Literal>ufs</Literal>.  It must be in
lowercase letters.
</Para>
</ListItem>
<ListItem>
<Para>Aggregate ID: A positive integer to serve as the aggregate ID of the
exported partition.  The integer must match the aggregate ID specified with
the <Option>aggrid</Option> option of the <Command>fts crfldbentry</Command> command, and it must be
different from any other aggregate ID in the <Literal>dfstab</Literal> file. (If the ID is
changed, fileset operations on the partition's fileset will fail.)
</Para>
</ListItem>
<ListItem>
<Para>Fileset ID: The unique fileset ID number returned by the <Command>fts
crfldbentry</Command> command for the fileset on the partition (for example,
<Literal>0,,18756</Literal>).  Use the read/write ID number, not the read-only or backup
ID number, returned by the command as the value for this field.
</Para>
</ListItem>
</ItemizedList>
<Para>The following entry from a <Literal>dfstab</Literal> file is for a non-LFS partition:
</Para>
<InformalExample>
<Para><ProgramListing>/dev/lv02 &ensp;/usr &ensp;ufs &ensp;1&ensp;&ensp;0,,18756
</ProgramListing></Para>
</InformalExample>
</ListItem>
<ListItem>
<Para>Issue the <Command>dfsexport</Command> command to export the partition to the DCE namespace.
Before exporting, this command reads the <Literal>dfstab</Literal> file to determine which
aggregates and partitions are available to be exported.  Omit all of the
command's options to list the aggregates and partitions currently exported
from the local disk to the DCE namespace.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Command>dfsexport</Command> [{<Option>all</Option> | <Option>aggregate </Option><Symbol Role="Variable">name</Symbol>}] [<Option>type </Option><Symbol Role="Variable">name</Symbol>]
</UserInput></ProgramListing></Para>
</InformalExample>
<?sml-break>
<?sml-need 20>
<Para>The <Option>all</Option> option specifies that all aggregates and partitions listed in 
the <Literal>dfstab</Literal> file are to be exported.  Use the <Option>all</Option> option with the
<Option>type</Option> option to export only DCE LFS aggregates or only non-LFS 
partitions.  Use this option or use the <Option>aggregate</Option> option.
</Para>
<Para>The <Option>aggregate</Option> <Symbol Role="Variable">name</Symbol> option specifies the device name or aggregate
name of a specific aggregate or partition.  These names are specified in the first
and second fields of the entry for the aggregate or partition in
the <Literal>dfstab</Literal> file.  Use the <Option>aggregate</Option> option or use the <Option>all</Option> 
option.
</Para>
<Para>The <Option>type</Option> <Symbol Role="Variable">name</Symbol> option is the file system type to be exported. 
Specify <Literal>lfs</Literal> to export only DCE LFS aggregates; specify <Literal>ufs</Literal> to 
export only non-LFS partitions.  Use the <Option>type</Option> option only with the
<Option>all</Option> option (it is ignored if it is used without <Option>all</Option>); omit 
<Option>type</Option> and use <Option>all</Option> to export all aggregates and partitions.
</Para>
</ListItem>
<ListItem>
<Para>Log out as <Literal>root</Literal> from the machine to return to your authenticated DCE
identity.
</Para>
</ListItem>
<ListItem>
<Para>Enter the <Command>fts crmount</Command> command to create a mount point in the file system
for the new non-LFS fileset.  This makes the contents of the fileset visible to
other users.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>fts crmount -dir </Command><Symbol Role="Variable">directory_name</Symbol> <Option>fileset</Option> {<Symbol Role="Variable">name</Symbol> | <Symbol Role="Variable">ID</Symbol>}
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>dir</Option> <Symbol Role="Variable">directory_name</Symbol> option is the location for the root 
directory of the fileset; the specified location must not already exist. 
However, the parent directory of the mount point must exist in the DCE 
namespace.  Include a complete pathname unless you want to mount the fileset 
in the working directory.
</Para>
</ListItem>
</OrderedList>
<IndexTerm Id="DFSAGR.FTAV.indx.63" SpanEnd="DFSAGR.FTAV.indx.62">
</Sect2>
<Sect2 Id="DFSAGR.FTAV.div.30">
<Title>Exporting Aggregates and Partitions at System Startup</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.64">
<Primary>aggregates</Primary>
<Secondary>exporting at system startup</Secondary>
</IndexTerm>
<Para>To export DCE LFS or non-LFS aggregates at system startup, use a text editor
to edit the appropriate initialization file for the File Server machine to
include the following DFS commands:
</Para>
<ItemizedList>
<ListItem>
<Para>The <Command>dfsbind</Command> command.
</Para>
</ListItem>
<ListItem>
<Para>The <Command>dfsexport</Command> command with the <Option>all</Option> option to export all
partitions and aggregates with entries in the <Literal>dfstab</Literal> file.
</Para>
</ListItem>
<ListItem>
<Para>The <Command>bosserver</Command> command to start the BOS Server.  If the
<Symbol Role="Variable">dcelocal</Symbol><Filename>/var/dfs/BosConfig</Filename> file includes the recommended entries,
this also starts the Fileset Server and the Replication Server on the machine.
</Para>
</ListItem>
<ListItem>
<Para>The <Command>fxd</Command> command to start the File Exporter.
</Para>
</ListItem>
</ItemizedList>
<Para>These commands may be included in the file <Literal>rc.dfs</Literal> (or its equivalent),
which is installed with DFS on the local machine.  The file may be automatically
modified to start the appropriate processes as you alter your DFS
configuration. (See your vendor's DCE installation and configuration
documentation for more information about installing and configuring DFS.)
</Para>
</Sect2>
<Sect2 Id="DFSAGR.FTAV.div.31">
<Title>Removing Aggregates and Partitions from the Namespace</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.65">
<Primary>namespace</Primary>
<Secondary>removing exported data</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.FTAV.indx.66">
<Primary>aggregates</Primary>
<Secondary>removing from namespace</Secondary>
</IndexTerm>
<Para>If you exported a DCE LFS aggregate or non-LFS partition (either by adding the
<Command>dfsexport</Command> command to the proper initialization file&mdash;<Filename>/etc/rc</Filename>
or its equivalent&mdash;or by issuing the command directly), you can issue the
<Command>dfsexport</Command> command with the <Option>detach</Option> option to remove the aggregate 
or partition from the DCE namespace.
</Para>
<Para>Before the command detaches an exported aggregate or partition, it first
revokes all of the tokens for data on the aggregate or partition.  When its 
tokens are revoked, a client flushes the data that is cached from the 
aggregate or partition, writing any modified data back to the File Server 
machine.  The command does not perform the detach operation if it cannot 
revoke all necessary tokens; it instead reports that the device is busy.  In 
this case, the command's <Option>force</Option> option can be included to force 
completion of the detach operation even if all necessary tokens cannot 
be revoked.
</Para>
<Para>In general, avoid detaching an aggregate or partition if users are still
accessing filesets that reside on it.  The <Command>dfsexport</Command> command revokes all 
tokens for data on the aggregate or partition before it detaches it, but 
users accessing data from the aggregate or partition will not be able to save 
the data.  Be especially cautious when using the <Option>force</Option> option, 
which forces an aggregate or partition to be detached even if all tokens 
cannot be revoked.
<IndexTerm Id="DFSAGR.FTAV.indx.67" SpanEnd="DFSAGR.FTAV.indx.34"></Para>
</Sect2>
<Sect2 Id="DFSAGR.FTAV.div.32">
<Title>Using DCE LFS Filesets Locally</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.68">
<Primary>filesets</Primary>
<Secondary>mounting locally</Secondary>
</IndexTerm>
<Note>
<Para>The information in this section assumes that your vendor has properly 
configured your operating system's <Command>mount</Command> command (or its equivalent) to 
handle DCE LFS filesets.  If this is not the case, the operations described in 
this section do not apply.
</Para>
</Note>
<Para>In addition to being exported for use in the DCE namespace, DCE LFS filesets
can also be used locally, as file systems on their File Server machines.  To
use a DCE LFS fileset locally, use your local operating system's <Command>mount</Command>
command (or its equivalent) to mount the fileset on the local disk of the
machine.
</Para>
<Para>Mounting a DCE LFS fileset locally does not improve access time to data in
the fileset if the fileset is accessed via a DCE pathname.  However, access
time to data in the fileset is improved if the fileset is accessed via a local
pathname.  Availability of the fileset is also generally improved because the
fileset can still be accessed via a local pathname in the event of a network
outage.  If data in a DCE LFS fileset that is physically located on the local
disk of your machine is available only through the DCE namespace, a network
outage makes it impossible to access the data.
</Para>
<Para>Provided the DCE LFS aggregate that contains a fileset is exported and the
fileset is mounted in the DCE namespace, you can also access a locally mounted
DCE LFS fileset globally.  The pathname associated with the fileset is different
for local and global access.  For example, a fileset that is accessed in the
local operating system as <Replaceable>/usr/jlw</Replaceable> may be accessed in the DCE namespace
as <Replaceable>/.../abc.com/fs/usr/jlw</Replaceable>.
</Para>
<Note>
<Para>A DCE LFS fileset that is mounted locally cannot be moved to a different File
Server machine (with the <Command>fts move</Command> command), and it cannot be deleted
(with the <Command>fts delete</Command> or <Command>fts zap</Command> command); you must unmount it
locally before attempting any of these operations.  Also, an aggregate that
houses a locally mounted fileset cannot be recovered or salvaged with the
<Command>salvage</Command> command, nor can it be reinitialized with the <Command>newaggr</Command>
command.
</Para>
</Note>
<Para>The following instructions describe the steps involved in mounting a DCE LFS
fileset locally.  It is assumed that the aggregate that houses the fileset
has already been initialized with the <Command>newaggr</Command> command and that the
fileset to be made available locally has already been created with the <Command>fts
create</Command> command.
</Para>
<OrderedList>
<ListItem>
<Para>Log in as <Literal>root</Literal> on the machine.  For example, issue the following command:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Literal>su root</Literal>
Password: <Symbol Role="Variable">root_password</Symbol>
</UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
<ListItem>
<Para>Create an empty directory on the local machine to serve as the local mount
point for the fileset.  For example, issue the following command:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Command>mkdir </Command><Symbol Role="Variable">directory_name</Symbol>
</UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
<ListItem>
<Para>Use the <Command>mount</Command> command for your local operating system to mount the DCE
LFS fileset just as you would a non-LFS partition.  The local <Command>mount</Command>
command may be modified for DCE LFS; for example, the <Command>mount</Command> command may
be altered to accept a fileset ID number, in which case you would specify
something like the following:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Command>mount</Command>  <Symbol Role="Variable">device_name</Symbol>  <Symbol Role="Variable">directory_name</Symbol>  <Symbol Role="Variable">fileset_ID</Symbol>
</UserInput></ProgramListing></Para>
</InformalExample>
<Note>
<Para>If your vendor has properly configured your local operating system, you may be
able to mount DCE LFS filesets automatically at system startup by including the
proper information in an initialization file (<Literal>fstab</Literal> or its equivalent).
Refer to your vendor's documentation for more information about mounting file
systems at system startup.
</Para>
</Note>
</ListItem>
</OrderedList>
<IndexTerm Id="DFSAGR.FTAV.indx.69" SpanEnd="DFSAGR.FTAV.indx.68">
</Sect2>
</Sect1>
<Sect1 Id="DFSAGR.FTAV.div.33">
<Title>Creating Read/Write DCE LFS Filesets</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.70">
<Primary>filesets</Primary>
<Secondary>creating</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.FTAV.indx.71">
<Primary><Command>fts</Command> command suite</Primary>
<Secondary><Command>create</Command></Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.FTAV.indx.72">
<Primary><Command>fts</Command> command suite</Primary>
<Secondary><Literal>aggrinfo</Literal></Secondary>
</IndexTerm>
<Para>Read/write DCE LFS filesets are created with the <Command>fts create</Command> command.  The
<Command>fts create</Command> command is used to create only DCE LFS filesets; non-LFS
filesets are created by exporting and mounting non-LFS partitions (as
described in Section 6.2.3).
<?sml-break><?sml-need 20></Para>
<Para>Before creating a read/write DCE LFS fileset, select a site for the fileset. A
site is an aggregate on the File Server machine where the fileset is to reside.
If necessary, issue the <Command>fts aggrinfo</Command> command to make sure the aggregate
you choose has enough space to accommodate the fileset. (See Chapter 7 for a
detailed description of the <Command>fts aggrinfo</Command> command.)
</Para>
<Para>You specify a fileset's name when you create it with the <Command>fts create</Command>
command.  A fileset's name should describe the fileset's contents; for example,
the name <Replaceable>user.terry</Replaceable> describes a fileset that contains data for the user
<Literal>terry</Literal>.  A fileset name must also be unique within the local cell.  It can
be no greater than 102 characters in length, and it must contain at least one
alphabetic character or an _ (underscore). (See Section 6.1.4.1 for more
information on fileset naming conventions.)
</Para>
<Para>The <Command>fts create</Command> command
</Para>
<ItemizedList>
<ListItem>
<Para>Creates a single FLDB entry for the read/write fileset and for any
potential read-only and backup versions of the fileset.
</Para>
</ListItem>
<ListItem>
<Para>Allocates a fileset ID number for the read/write fileset.  It also
reserves ID numbers for the read-only and backup versions of the fileset
in anticipation of their creation.
</Para>
</ListItem>
<ListItem>
<Para>Assigns the name that you specify to the fileset.
</Para>
</ListItem>
<ListItem>
<Para>Sets the FLDB site flag for the read/write fileset to <Literal>valid</Literal>, and sets
the site flags for the read-only and backup filesets to <Literal>invalid</Literal> because
they do not yet exist.
</Para>
</ListItem>
<ListItem>
<Para>Creates a fileset header at the site File Server machine and aggregate that you
designate as the location of the fileset.
</Para>
</ListItem>
<ListItem>
<Para>Creates an empty root directory in the fileset.  This directory becomes visible
when the <Command>fts crmount</Command> command is used to mount the fileset.
</Para>
</ListItem>
<ListItem>
<Para>Records null ACLs as the default for use by the root directory of the fileset.
Note that, due to the interaction between UNIX mode bits and ACLs, the directory
has a set of implicit initial ACLs that grant permissions to different users
and groups. (See Chapter 3 for information about the interaction between ACLs
and UNIX mode bits and for suggestions for initial ACLs.)
</Para>
</ListItem>
<ListItem>
<Para>Assigns a default quota of 5000 kilobytes to the fileset.
</Para>
</ListItem>
</ItemizedList>
<?sml-break>
<?sml-need 20>
<Para>The following subsections describe the steps involved in creating a read/write 
DCE LFS fileset.  After creating a read/write DCE LFS fileset with the <Command>fts
create</Command> command, use the <Command>fts crmount</Command> command to create a mount point
for the fileset.  The mount point makes the contents of the fileset visible
in the DCE namespace.  You can use the <Command>fts setquota</Command> command to alter the
fileset's default quota of 5000 kilobytes, and you can use the <Command>dcecp acl
modify</Command> command to modify the default ACLs of the fileset's root directory.
</Para>
<Para>Once a read/write fileset is created, you can create read-only and backup
copies of the read/write fileset.  The following sections provide detailed
information about creating read-only and backup DCE LFS filesets.
<!-- .cS-->
<!-- Note that the \*Lfts create\*O command is also used to create a fileset for -->
<!-- use as the top-level fileset for diskless machines. -->
<!-- .cE-->
<IndexTerm Id="DFSAGR.FTAV.indx.73" SpanEnd="DFSAGR.FTAV.indx.71"></Para>
<Sect2 Id="DFSAGR.FTAV.div.34">
<Title>Creating and Mounting a Read/Write Fileset</Title>
<Para>To create and mount a read/write fileset, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Verify that you have the necessary privileges.  You must be included in the 
<Filename>admin.ft</Filename> file on the machine on which the fileset is to reside, and 
you must be included in the <Filename>admin.fl</Filename> file on each Fileset Database 
machine or own the server entry for the machine on which the fileset is to 
reside.  If necessary, issue the <Command>bos lsadmin</Command> command to verify the 
members of an administrative list.
</Para>
</ListItem>
<ListItem>
<Para>Verify that you have the <Literal>w</Literal> (write), <Literal>x</Literal> (execute), and <Literal>i</Literal>
(insert) ACL permissions for the directory in which the fileset is to be
mounted.  If necessary, issue the <Command>dcecp acl show</Command> command to check the
permissions for the directory.
</Para>
</ListItem>
<ListItem>
<Para>If necessary, enter the <Command>fts aggrinfo</Command> command to check the available
space on the aggregate on which the fileset is to be created. (See Chapter
7 for a detailed description of the <Command>fts aggrinfo</Command> command.)
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>fts aggrinfo -server </Command><Symbol Role="Variable">machine</Symbol> <Option>aggregate</Option> <Symbol Role="Variable">name</Symbol>
</UserInput></ProgramListing></Para>
</InformalExample>
<?sml-break>
<?sml-need 20>
</ListItem>
<ListItem>
<Para>Enter the <Command>fts create</Command> command to create the fileset:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>fts create -ftname </Command><Symbol Role="Variable">name</Symbol> <Option>server</Option> <Symbol Role="Variable">machine</Symbol> <Option>aggregate</Option> <Symbol Role="Variable">name</Symbol>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>ftname</Option> <Symbol Role="Variable">name</Symbol> option is the complete name to be associated 
with the fileset being created.
</Para>
</ListItem>
<ListItem>
<Para>Enter the <Command>fts crmount</Command> command to create a mount point in
the file system for the new fileset.  This makes the contents of the fileset
visible to other users.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>fts crmount -dir </Command><Symbol Role="Variable">directory_name</Symbol> <Option>fileset</Option> {<Symbol Role="Variable">name</Symbol> | <Symbol Role="Variable">ID</Symbol>}
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>dir</Option> <Symbol Role="Variable">directory_name</Symbol> option is the location for
the root directory of the fileset; the specified location must not
already exist.  However, the parent directory of the mount point must
exist in the DCE namespace.  Include a complete pathname unless you
want to mount the fileset in the working directory.
</Para>
</ListItem>
</OrderedList>
</Sect2>
<Sect2 Id="DFSAGR.FTAV.div.35">
<Title>Resetting the Fileset Quota</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.74">
<Primary>filesets</Primary>
<Secondary>quotas</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.FTAV.indx.75">
<Primary>quotas</Primary>
<Secondary>resetting fileset</Secondary>
</IndexTerm>
<Para>To reset the quota for the new read/write fileset, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Verify that you have the necessary privileges.  You must be included in the
<Filename>admin.ft</Filename> file on the machine on which the fileset resides.  If necessary,
issue the <Command>bos lsadmin</Command> command to verify the members of the list.
</Para>
</ListItem>
<ListItem>
<Para>Issue the <Command>fts setquota</Command> command to change the fileset's quota:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>fts setquota </Command>{<Option>path</Option> {<Symbol Role="Variable">filename</Symbol> | <Symbol Role="Variable">directory_name</Symbol>} &bsol;
| <Option>fileset</Option> {<Symbol Role="Variable">name</Symbol> | <Symbol Role="Variable">ID</Symbol>}} <Option>size </Option><Symbol Role="Variable">kbytes</Symbol>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>path </Option><Symbol Role="Variable">filename</Symbol> or <Symbol Role="Variable">directory_name</Symbol> option is the name of a 
file or directory on the fileset whose quota you want to set.  Use the 
<Option>path</Option> option or use the <Option>fileset</Option> option.
<?sml-break><?sml-need 20></Para>
<Para>The <Option>size</Option> <Symbol Role="Variable">kbytes</Symbol> option is the maximum amount of disk space  
that all of the files and directories in the fileset can occupy, including
files referred to by this fileset but housed in another fileset type of this
fileset.  Specify the value in kilobytes; a value of 1024 kilobytes equals 1
megabyte.
</Para>
</ListItem>
</OrderedList>
<IndexTerm Id="DFSAGR.FTAV.indx.76" SpanEnd="DFSAGR.FTAV.indx.70">
<!-- .cS-->
<!-- .H 3 "Creating Read/Write Filesets for Diskless Machines"-->
<!-- .iX "-[" "diskless machines" "read/write filesets"-->
<!-- .iX "-[" "machines" "diskless"-->
<!-- .P-->
<!-- The \*Lfts create\*O command is also used to create a fileset for use as the-->
<!-- top-level diskless fileset.  After the fileset is created, the \*Lfts-->
<!-- crmount\*O command is used to mount the top-level diskless fileset in the DCE-->
<!-- namespace.  Because this fileset is to serve as the root directory for diskless-->
<!-- machines, you need to copy common binary and configuration files (such as-->
<!-- those found in the \*L/bin\*O and \*L/etc\*O directories or their equivalents)-->
<!-- to the fileset.-->
<!-- .P-->
<!-- .zA "defect,7219,R1.0.2,Review comments"-->
<!-- You also need to mount the root of the DCE global namespace under the top-level-->
<!-- diskless directory to enable the diskless machine to access the DCE namespace.-->
<!-- The \*L\-global\*O option is used with the \*Lfts crmount\*O command to mount-->
<!-- the root of the DCE namespace under the top-level diskless directory.  Note that-->
<!-- the \*L\-global\*O option was not displayed with previous examples of the-->
<!-- \*Lfts crmount\*O command.-->
<!-- .zZ "enh, 13605, R1.2.2, Security enhancements" "defect,7219,R1.0.2,Review comments"-->
<!-- .P-->
<!-- The DCE Diskless Support Service is used to enable the fileset to function as-->
<!-- the top-level diskless directory.  To create a read/write fileset to serve as-->
<!-- the top-level fileset for diskless machines, do the following:-->
<!-- .AL-->
<!-- .LI-->
<!-- Verify that you have the necessary privileges.  You must be included in the -->
<!-- \*Ladmin.ft\*O file on the machine on which the fileset is to reside, and -->
<!-- you must be included in the \*Ladmin.fl\*O file on each Fileset Database -->
<!-- machine or own the server entry for the machine on which the fileset is to -->
<!-- reside.  If necessary, issue the \*Lbos lsadmin\*O command to verify the -->
<!-- members of an administrative list.-->
<!-- .LI-->
<!-- .zA "defect,12535,R1.1,Incorporate dcecp commands"-->
<!-- Verify that you have the \*Lw\*O (write), \*Lx\*O (execute), and \*Li\*O -->
<!-- (insert) ACL permissions for the directory in which the fileset is to be -->
<!-- mounted.  If necessary, issue the \*Ldcecp acl show\*O command to check the -->
<!-- permissions for the directory.-->
<!-- .zZ "enh, 13605, R1.2.2, Security enhancements" "defect,12535,R1.1,Incorporate dcecp commands"-->
<!-- .LI-->
<!-- Issue the \*Lfts create\*O command to create the fileset that is to serve as-->
<!-- the top-level fileset for diskless machines:-->
<!-- .iS-->
<!-- \*C$ \*Lfts create -ftname \*Vname\*L -server \*Vmachine\*L -aggregate \*Vname\*O-->
<!-- .iE-->
<!-- .P-->
<!-- .zA "defect,7715,R1.0.3,Correct sysname examples"-->
<!-- The \*L\-ftname\*O \*Vname\*O option is the complete name to be associated -->
<!-- with the fileset being created (for example, \*Ldiskless.root.rs_aix32\*O).-->
<!-- .zZ "enh, 13605, R1.2.2, Security enhancements" "defect,7715,R1.0.3,Correct sysname examples"-->
<!-- .LI-->
<!-- Enter the \*Lfts crmount\*O command to create a mount point in the DCE-->
<!-- namespace for the fileset that is to serve as the top-level diskless fileset:-->
<!-- .iS-->
<!-- \*C$ \*Lfts crmount -dir \*Vdirectory_name\*L -fileset \*O{\*Vname\*O | \*VID\*O}-->
<!-- .iE-->
<!-- .P-->
<!-- .zA "defect,7715,R1.0.3,Correct sysname examples"-->
<!-- The \*L\-dir\*O \*Vdirectory_name\*O option is the location for the root -->
<!-- directory of the fileset; the specified location must not already exist. -->
<!-- However, the parent directory of the mount point must exist in the DCE -->
<!-- namespace (for example, \*L/.../abc.com/fs/diskless.root/rs_aix32\*O). -->
<!-- Include a complete pathname unless you want to mount the fileset in the -->
<!-- working directory.-->
<!-- .zZ "enh, 13605, R1.2.2, Security enhancements" "defect,7715,R1.0.3,Correct sysname examples"-->
<!-- .LI-->
<!-- Copy any necessary files (for example, those files found in the \*L/bin\*O and-->
<!-- \*L/etc\*O directories or their equivalents) to the diskless fileset with the-->
<!-- appropriate command (\*Lcp\*O or its equivalent).-->
<!-- .LI-->
<!-- Enter the \*Lfts crmount\*O command to create a mount point for the root of-->
<!-- the DCE global namespace under the top-level diskless fileset:-->
<!-- .iS-->
<!-- \*C$ \*Lfts crmount -dir \*Vdirectory_name\*L -global\*O-->
<!-- .iE-->
<!-- .P-->
<!-- .zA "defect,7715,R1.0.3,Correct sysname examples"-->
<!-- The \*L\-dir\*O \*Vdirectory_name\*O option is the location for the root of -->
<!-- the DCE namespace; the specified location must not already exist.  However, -->
<!-- the parent directory of the mount point must exist in the DCE namespace (for -->
<!-- example, \*L/.../abc.com/fs/diskless.root/rs_aix32/...\*O).-->
<!-- .zZ "enh, 13605, R1.2.2, Security enhancements" "defect,7715,R1.0.3,Correct sysname examples"-->
<!-- .P-->
<!-- The \*L\-global\*O option indicates that the mount point is for the root of the-->
<!-- DCE namespace.-->
<!-- .LI-->
<!-- Use the command appropriate for your system to make the fileset the top-level-->
<!-- directory for the diskless machine.-->
<!-- .LE-->
<!-- .iX "-]" "diskless machines" "read/write filesets"-->
<!-- .iX "-]" "machines" "diskless"-->
<!-- .cE-->
</Sect2>
</Sect1>
<Sect1 Id="DFSAGR.FTAV.div.36">
<Title>Creating Read-Only DCE LFS Filesets</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.77">
<Primary>filesets</Primary>
<Secondary>replicating</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.FTAV.indx.78">
<Primary>replicas</Primary>
<Secondary>criteria for creating (DFS)</Secondary>
</IndexTerm>
<Para>Replication is the process of creating read-only copies (replicas) of a
read/write DCE LFS fileset and placing the copies on multiple File Server
machines.  Replication increases the availability of the fileset in the event
of a network or server outage.  If one of the machines that houses the fileset
becomes unavailable, the fileset can usually still be accessed from another
machine.  Replication is not available for non-LFS filesets.
</Para>
<Para>Replicate read/write filesets that match the following criteria:
</Para>
<ItemizedList>
<ListItem>
<Para>The files in the fileset are read much more frequently than they are modified.
</Para>
</ListItem>
<ListItem>
<Para>The files in the fileset are heavily used (for example, binary files for text
editors or other frequently accessed application programs).  Replicating the
fileset lets you distribute the load for the files it contains across several
machines.
</Para>
</ListItem>
<ListItem>
<Para>The files in the fileset must remain available.  By replicating the fileset on
multiple File Server machines, even if one of the machines that houses the
fileset becomes unavailable, the fileset is still available from another
machine.
</Para>
</ListItem>
<ListItem>
<Para>The fileset is mounted at a high level in the cell's file tree (for example,
<Literal>root.dfs</Literal> and its subdirectories).
</Para>
</ListItem>
</ItemizedList>
<Para><IndexTerm Id="DFSAGR.FTAV.indx.79">
<Primary>replication</Primary>
<Secondary>types</Secondary>
</IndexTerm>The following two types of replication are available for DCE LFS filesets:
<?sml-break><?sml-need 20></Para>
<ItemizedList>
<ListItem>
<IndexTerm Id="DFSAGR.FTAV.indx.80">
<Primary>Release Replication</Primary>
<Secondary>about</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.FTAV.indx.81">
<Primary><Command>fts</Command> command suite</Primary>
<Secondary><Command>release</Command></Secondary>
</IndexTerm>
<Para><Replaceable>Release Replication</Replaceable>, which requires you to issue the <Command>fts release</Command>
command to explicitly update the read-only versions of the read/write source
fileset.  The command places a read-only copy of the source fileset on the same
File Server machine as the source.  The Replication Server (<Command>repserver</Command>
process) on each machine that houses a read-only replica then updates the
replica on its machine to match the replica stored on the same machine as the
read/write fileset.  The read-only replicas do not change until you issue the
<Command>fts release</Command> command.
</Para>
<Para>Use Release Replication for a fileset that seldom changes or for a fileset
whose replication you need to track closely.
</Para>
</ListItem>
<ListItem>
<IndexTerm Id="DFSAGR.FTAV.indx.82">
<Primary>Scheduled Replication</Primary>
<Secondary>about</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.FTAV.indx.83">
<Primary><Command>fts</Command> command suite</Primary>
<Secondary><Command>update</Command></Secondary>
</IndexTerm>
<Para><Replaceable>Scheduled Replication</Replaceable>, which requires you to specify replication
parameters that control the length of time between automatic updates of the
read-only replicas.  The Replication Server on each machine that houses a
replica updates the replica on its machine according to time intervals that
you supply.  For a fileset that uses Scheduled Replication, you can use the
<Command>fts update</Command> command to request an immediate update of the fileset's
replicas at any time.  The command can be used to update all replicas or only
the replica at a specific site.
</Para>
<Para>Use Scheduled Replication for a fileset if you prefer to have the system
automatically update the fileset's replicas and you do not need to monitor
the fileset's replication.
</Para>
</ListItem>
</ItemizedList>
<Para><IndexTerm Id="DFSAGR.FTAV.indx.84">
<Primary><Command>fts</Command> command suite</Primary>
<Secondary><Command>setrepinfo</Command></Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.FTAV.indx.85">
<Primary><Command>fts</Command> command suite</Primary>
<Secondary><Command>addsite</Command></Secondary>
</IndexTerm>A read/write fileset can be replicated via only one of the two types of
replication at any one time.  The type of replication to be used for a fileset
is set or changed with the <Command>fts setrepinfo</Command> command.  This command is also
used to set the replication parameters to be used with the fileset.  Some
replication parameters are used with both Release and Scheduled Replication to
specify how the replicated data is to be used by Cache Managers; other
parameters are used only with Scheduled Replication to define how often
Replication Servers are to check for updated versions of the source fileset.
(An additional site-specific parameter used with Scheduled Replication is set
with the <Command>fts addsite</Command> command; see Section 6.4.2.1 for more information
about these parameters.)
</Para>
<Para>Whenever you update a read-only replica by either type of
replication, DFS ignores any shared byte-range locks held against the
replica. Data accessed by a client during an update is not lost or
damaged; however, some of the data sent to the client may change
as the replica is updated even though the client holds a shared lock.
</Para>
<Para>Each replica of a read/write fileset resides at a specified replication site
(a specific File Server machine and aggregate).  Before read-only versions of a
fileset can be made, the <Command>fts addsite</Command> command must be used to define the
sites where the read-only replicas are to reside.  It is not possible to place
multiple read-only copies of the same fileset on a single File Server machine,
and it is not possible to place a replica of a fileset from one cell on a File
Server machine from another cell.
</Para>
<Para>With Release Replication, the <Command>fts addsite</Command> command must be used to define
a replication site on the File Server machine on which the source fileset
resides before any subsequent replication sites can be added.  The site for the
replica can be defined on any aggregate on the source's File Server machine.
However, it is best to define the site for this replica on the same aggregate
as that on which the source fileset resides, in which case the replica is
created as a clone of the source fileset.  Because it is created as a clone
fileset, which has the same structure as a backup fileset, a replica that
exists on the same aggregate as the source requires potentially much less
space than a full read-only replica created on a different aggregate. (See
Section 6.1.3 for more information about the structure of backup filesets and
the sharing of data among the different types of DCE LFS filesets.)
</Para>
<Note>
<IndexTerm Id="DFSAGR.FTAV.indx.86">
<Primary>replication</Primary>
<Secondary>restrictions</Secondary>
</IndexTerm>
<Para>Replication is available in a cell only if the following are true:
<Literal>root.dfs</Literal>, the cell's main read/write fileset, is a DCE LFS fileset;
<Literal>root.dfs</Literal> was mounted with an explicit read/write mount point as a
subdirectory of itself (the <Literal>root.dfs</Literal> fileset) when the cell was
configured; and <Literal>root.dfs</Literal> is replicated. (See Chapter 2 for information
about configuring <Literal>root.dfs</Literal> to support replication.)
</Para>
</Note>
<Sect2 Id="DFSAGR.FTAV.div.37">
<Title>Replication Information in the FLDB</Title>
<Para>The FLDB entry for a read/write fileset records the following replication
information for the fileset:
</Para>
<ItemizedList>
<ListItem>
<Para>The ID number of the fileset's read-only version
</Para>
</ListItem>
<ListItem>
<Para>The fileset's replication type and parameters
</Para>
</ListItem>
<ListItem>
<Para>The definitions for the fileset's replication sites
</Para>
</ListItem>
</ItemizedList>
<Para>All read-only copies of a read/write fileset share the same fileset ID number
in the FLDB.  The number, which is reserved when the read/write fileset is
created, is one greater than the ID number of the read/write fileset.  The
fileset ID number of a read-only fileset's source fileset is referred to as
the replica's parent ID number.
<?sml-break><?sml-need 20></Para>
<Para>When a read/write fileset is first created, the status flag for the read-only
version in the fileset's FLDB entry is set to <Literal>invalid</Literal>.  When the <Command>fts
addsite</Command> command is used to define the fileset's first replication site,
the status flag for the read-only version is changed to <Literal>valid</Literal>.  The
change is made because it is assumed that replicas of the fileset will be
placed at the replication sites shortly after the sites are defined.
</Para>
<Para>With respect to filesets, a site is a specific File Server machine and
aggregate on which the fileset resides.  The FLDB can record a maximum of 16
sites for all versions of a fileset combined.  A fileset's read/write version
and backup version (if it exists) share a single site definition.  If you define
a replication site for a fileset at the same site as its read/write and backup
versions, you can then define 15 additional replication sites for the fileset;
this approach allows you to define up to 16 replication sites.  If you choose
not to place a replica of a fileset at the same site as its read/write and
backup versions, you can define a maximum of 15 replication sites for the
fileset.  You should define a replication site for any fileset, especially one
that uses Release Replication, at the same site as its read/write fileset.
</Para>
</Sect2>
<Sect2 Id="DFSAGR.FTAV.div.38">
<Title>Preparing for Replication</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.87">
<Primary>replication</Primary>
<Secondary>prerequisites</Secondary>
</IndexTerm>
<Para>The following prerequisites must be met before you can replicate a read/write
fileset:
</Para>
<ItemizedList>
<ListItem>
<Para>Each File Server machine that is to house a replica of the fileset must have
a server entry in the FLDB. (See Section 6.2.1.3 for information on creating
server entries.)
</Para>
</ListItem>
<ListItem>
<Para>A Replication Server (<Command>repserver</Command> process) and a Fileset Server
(<Command>ftserver</Command> process) must be running on each File Server machine that is
to house a replica of the fileset.  Use the <Command>bos status</Command> command to verify
that the <Command>repserver</Command> and <Command>ftserver</Command> processes are running on the
machine at each replication site. (You can also use the <Command>fts statrepserver</Command>
command, which is described in Section 6.4.4, to verify the status of the
Replication Server on a machine.)
</Para>
</ListItem>
<ListItem>
<Para>You must use the <Command>fts setrepinfo</Command> command to indicate the type of
replication and to set the replication parameters to be used with the fileset
that is to be replicated.  This information is recorded in the FLDB entry for
the fileset.
<?sml-break><?sml-need 20></Para>
</ListItem>
<ListItem>
<Para>You must use the <Command>fts addsite</Command> command to add the replication sites to the
FLDB entry for the fileset.  If necessary, enter the <Command>fts aggrinfo</Command> command
to check the available space on a File Server machine's aggregates before
defining a replication site on the machine, and use the <Command>fts lsft</Command> command
to check the size of the read/write fileset. (See Chapter 7 for a description
of the <Command>fts aggrinfo</Command> and <Command>fts lsft</Command> commands.) Remember, a read-only
replica must also be stored on the same File Server machine as the read/write
fileset with Release Replication.
</Para>
</ListItem>
</ItemizedList>
<Para>The following subsections describe how to set the replication type and
parameters and how to add replication sites.
</Para>
<Sect3 Id="DFSAGR.FTAV.div.39">
<Title>Replication Type and Parameters</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.88">
<Primary><Command>fts</Command> command suite</Primary>
<Secondary><Command>setrepinfo</Command>, required parameters</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.FTAV.indx.89">
<Primary>Release Replication</Primary>
<Secondary>command parameters</Secondary>
</IndexTerm>
<Para>Before defining any replication sites, you must use the <Command>fts setrepinfo</Command>
command to indicate the type of replication to be used and to set the
replication parameters for the fileset to be replicated.  When initially
defining the type of replication to be used with a fileset, include either
the <Option>release</Option> option or the <Option>scheduled</Option> option with the command to
indicate the type of replication to be used.
</Para>
<Para>Most of the options available with the <Command>fts setrepinfo</Command> command determine
the replication parameters to be associated with the fileset; the primary
exceptions are the <Option>change</Option> and <Option>clear</Option> options, which are
described later in this section.  Replication parameters define the time
intervals used by Cache Managers on client machines that are accessing data
from the read-only replicas and Replication Servers on File Server machines
that house the replicas.  Descriptions of the replication parameters follow;
each parameter is set with an option of the same name. (Note that the term
<Replaceable>replication parameter</Replaceable> is used to refer to the <Replaceable>replication intervals</Replaceable>
that are defined for a fileset with the <Command>fts setrepinfo</Command> command, not to
the parameters of the command.)
</Para>
<Para><IndexTerm Id="DFSAGR.FTAV.indx.90">
<Primary>Scheduled Replication</Primary>
<Secondary>command parameters</Secondary>
</IndexTerm>The following parameters apply to <Replaceable>both</Replaceable> Release Replication and Scheduled
Replication:
<?sml-break><?sml-need 20></Para>
<ItemizedList>
<ListItem>
<Para>MaxAge specifies the amount of time the Cache Manager distributes data
cached from a read-only replica without attempting to verify that the data is
current.  The Replication Server maintains information about the currentness of
a read-only replica, which it communicates to the Cache Manager via the File
Exporter.  For Scheduled Replication, a replica must remain current with respect
to the read/write source fileset; for Release Replication, a replica must
remain current with respect to the read-only replica that resides on the same
File Server machine as the read/write source fileset.
</Para>
</ListItem>
<ListItem>
<Para>FailAge specifies the amount of time the Cache Manager distributes data
cached from a read-only replica if the data cannot be verified as current.  The
difference between FailAge and MaxAge is the amount of time the Cache Manager
continues to distribute data cached from a read-only replica after the data
cannot be verified as current.  An effective FailAge value is greater than or
equal to the MaxAge value.
</Para>
</ListItem>
<ListItem>
<Para>ReclaimWait specifies the amount of time the File Exporter waits before
it reclaims storage space from deleted files (those not referred to by any
directory).  It also determines the frequency of the Cache Manager's keep-alive
messages to the Replication Server.
</Para>
<Para>The Cache Manager sends keep-alive messages to indicate that it is still using
files from a read-only replica.  A file that is being accessed from a replica
remains available as long as the Cache Manager continues to notify the
Replication Server that the file is still in use and the Replication Server
continues to forward these notifications to the File Exporter.  This is true
even if the file has been removed from all directories on the read/write
fileset in the interim.  To prevent the File Exporter from reclaiming storage
space that was occupied by deleted files, the Cache Manager sends keep-alive
messages more frequently than the ReclaimWait interval.
</Para>
</ListItem>
</ItemizedList>
<Para>The following parameters apply <Replaceable>only</Replaceable> to Scheduled Replication:
</Para>
<ItemizedList>
<ListItem>
<Para>MinRepDelay specifies how long the Replication Server waits after a
read/write fileset changes before it attempts to get a new copy of the fileset.
The Replication Server tracks the currentness of replicas by maintaining a
whole-fileset token for each fileset.  If a Cache Manager changes the read/write
fileset, the Replication Server relinquishes its whole-fileset token and waits
for at least the time specified by MinRepDelay before requesting a new
whole-fileset token.
<?sml-break><?sml-need 20></Para>
</ListItem>
<ListItem>
<Para>MaxSiteAge controls the maximum amount of time that a replica can be out
of date.  The Replication Server attempts to keep a replica current within this
amount of time.  A MaxSiteAge value is stored with each site; the MaxSiteAge
for a site is set with the <Command>fts addsite</Command> command.
</Para>
</ListItem>
<ListItem>
<Para>DefaultSiteAge is the default value to be used as the MaxSiteAge for a
replication site if that value is not set with the <Command>fts addsite</Command> command.
</Para>
</ListItem>
</ItemizedList>
<Para>Table 6-1 summarizes the six parameters just described.  For each parameter,
the table describes the command with which the parameter is set, its default
value, its usage (if any) with Release Replication, and its usage with
Scheduled Replication; usage descriptions include details on the dependencies
between the different parameters.  Refer to this table when using the <Command>fts
setrepinfo</Command> (or <Command>fts addsite</Command>) command to specify the replication
parameters for a fileset (or site).
</Para>
<Note>
<Para>Unless it is absolutely necessary to change them, it is recommended that you
use the default parameters (with the exception of MaxAge) that are listed in
the table.
</Para>
</Note>
<?sml-break>
<?sml-need 30>
<Table Frame="all" Remap="center" Orient="Port">
<Title>Descriptions of Replication Parameters</Title>
<TGroup Rowsep="0" Colsep="0" Cols="4">
<ColSpec Rowsep="1" Colsep="1" Align="Left" Colwidth="1*" Colname="col1" Colnum="1">
<ColSpec Rowsep="1" Colsep="1" Align="Left" Colwidth="1*" Colname="col2" Colnum="2">
<ColSpec Rowsep="1" Colsep="1" Align="Left" Colwidth="1*" Colname="col3" Colnum="3">
<ColSpec Rowsep="1" Align="Left" Colwidth="1*" Colname="col4" Colnum="4">
<THead>
<Row>
<Entry Rowsep="1"><Literal>Parameter</Literal></Entry>
<Entry Rowsep="1"><Literal>Default</Literal></Entry>
<Entry Rowsep="1"><Literal>Release Replication</Literal></Entry>
<Entry Rowsep="1"><Literal>Scheduled Replication</Literal></Entry>
</Row>
</THead>
<TBody>
<Row>
<Entry rowsep="1">MaxAge
<?sml-break>(<Command>fts setrepinfo</Command>)
</Entry>
<Entry rowsep="1">2 hours
</Entry>
<Entry rowsep="1">Required only if
FailAge is specified
</Entry>
<Entry rowsep="1">Required only if
FailAge, MinRepDelay,
or DefaultSiteAge
is specified
</Entry>
</Row>
<!-- _-->
<Row>
<Entry rowsep="1">FailAge
<?sml-break>(<Command>fts setrepinfo</Command>)
</Entry>
<Entry rowsep="1">1 day or twice
MaxAge, whichever is
larger
</Entry>
<Entry rowsep="1">Optional
</Entry>
<Entry rowsep="1">Required only if
MinRepDelay or
DefaultSiteAge is
specified
</Entry>
</Row>
<!-- _-->
<Row>
<Entry rowsep="1">ReclaimWait
<?sml-break>(<Command>fts setrepinfo</Command>)
</Entry>
<Entry rowsep="1">18 hours
</Entry>
<Entry rowsep="1">Required only if
FailAge is specified
</Entry>
<Entry rowsep="1">Required only if
FailAge, MinRepDelay,
or DefaultSiteAge
is specified
</Entry>
</Row>
<!-- _-->
<Row>
<Entry rowsep="1">MinRepDelay
<?sml-break>(<Command>fts setrepinfo</Command>)
</Entry>
<Entry rowsep="1">5 minutes or
one-quarter of
DefaultSiteAge,
whichever is
smaller
</Entry>
<Entry rowsep="1">Not applicable
</Entry>
<Entry rowsep="1">Required only if
FailAge or
DefaultSiteAge
is specified
</Entry>
</Row>
<!-- _-->
<Row>
<Entry rowsep="1">MaxSiteAge
<?sml-break>(<Command>fts addsite</Command>)
</Entry>
<Entry rowsep="1">DefaultSiteAge
</Entry>
<Entry rowsep="1">Not applicable
</Entry>
<Entry rowsep="1">Required only if
DefaultSiteAge is <Symbol Role="Variable">not</Symbol>
specified
</Entry>
</Row>
<!-- _-->
<Row>
<Entry rowsep="1">DefaultSiteAge
<?sml-break>(<Command>fts setrepinfo</Command>)
</Entry>
<Entry rowsep="1">One-quarter of
MaxAge
</Entry>
<Entry rowsep="1">Not applicable
</Entry>
<Entry rowsep="1">Optional
</Entry>
</Row>
</TBody>
</TGroup>
</Table>
<?sml-indent 0>
<?sml-point-size 11>
<!--no-op:  12-->
<!--no-op:  l-->
<!--no-op:  b-->
<?sml-point-size 12>
<!--no-op:  14-->
<?sml-indent>
<?sml-break>
<?sml-need 20>
<IndexTerm Id="DFSAGR.FTAV.indx.91">
<Primary>replication</Primary>
<Secondary>command parameters (table)</Secondary>
</IndexTerm>
<Para>The system uses the guidelines listed in Table 6-1 to calculate default values
for each of the parameters <Replaceable>unless</Replaceable> you specify
</Para>
<ItemizedList>
<ListItem>
<Para>FailAge for Release Replication
</Para>
</ListItem>
<ListItem>
<Para>FailAge, MinRepDelay, or DefaultSiteAge for Scheduled Replication
</Para>
</ListItem>
</ItemizedList>
<Para>Once you specify one of these parameters, the system no longer performs any
default calculations; you must specify values for all applicable parameters.
The exception is DefaultSiteAge for Scheduled Replication, which is always
optional.  However, if the other parameters specified with the <Command>fts
setrepinfo</Command> command are supplied, the system does not calculate a default
value for DefaultSiteAge; you must specify the MaxSiteAge for each replication
site with the <Command>fts addsite</Command> command.  Also, because the MinRepDelay,
MaxSiteAge, and DefaultSiteAge parameters do not apply to Release Replication,
they are recorded but otherwise ignored if they are specified for a fileset
that uses Release Replication. (They are used if the fileset's style of
replication is ever changed to Scheduled Replication.)
<IndexTerm Id="DFSAGR.FTAV.indx.92" SpanEnd="DFSAGR.FTAV.indx.90"></Para>
<Sect4 Id="DFSAGR.FTAV.div.40">
<Title>Setting Replication Type and Parameters</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.93">
<Primary>replication</Primary>
<Secondary>setting parameters</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.FTAV.indx.94">
<Primary><Command>fts</Command> command suite</Primary>
<Secondary><Command>setrepinfo</Command></Secondary>
</IndexTerm>
<Para>To set a fileset's replication type and parameters, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Verify that you have the necessary privileges.  You must be included in the
<Filename>admin.fl</Filename> file on each Fileset Database machine or own the server entry
for each machine on which a version of the fileset resides.  If necessary, issue
the <Command>bos lsadmin</Command> command to verify the members of an administrative list.
</Para>
<Note>
<Para>If you use the command's <Option>change</Option> option to change a fileset's existing
replication type from Release to Scheduled, you must also be included in the
<Filename>admin.ft</Filename> file on the machine on which the read/write fileset resides if
a replica actually resides at the replication site on that machine. (The first
replication site defined for a fileset that uses Release Replication must be
on the same File Server machine as the read/write fileset.)
</Para>
</Note>
<?sml-break>
<?sml-need 20>
</ListItem>
<ListItem>
<Para>Enter the <Command>fts setrepinfo</Command> command to set the replication parameters for
the read/write fileset that is to be replicated.  To use the default parameters
described in Table 6-1, enter only the fileset name or ID number and the
replication type.  To specify one or more of the parameters, refer to the table
for information on which parameters apply for the two types of replication and
the dependencies between the parameters.
</Para>
<Para>Enter <Symbol Role="Variable">interval</Symbol> values as integers with the following abbreviations to
designate units: <Literal>d</Literal> for days, <Literal>h</Literal> for hours, <Literal>m</Literal> for minutes,
and <Literal>s</Literal> for seconds.  For example, to indicate 3 days and 2 hours, enter
<Literal>3d2h</Literal>.  At least one of the four values (days, hours, minutes, or seconds)
must be provided, and the unit abbreviations (<Literal>d</Literal>, <Literal>h</Literal>, <Literal>m</Literal>, or
<Literal>s</Literal>) must be used with any integer.  The unit abbreviations can be
uppercase or lowercase, and they can be entered in any order; for example,
<Literal>3m2h</Literal> is a valid entry for 2 hours and 3 minutes.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput><?sml-size -1>
$ <Command>fts setrepinfo -fileset </Command>{<Symbol Role="Variable">name</Symbol> | <Symbol Role="Variable">ID</Symbol>} {<Option>release</Option> | <Option>scheduled</Option>} \ 
[<Option>change</Option>] [<Option>maxage </Option><Symbol Role="Variable">interval</Symbol>] [<Option>failage </Option><Symbol Role="Variable">interval</Symbol>] \ 
[<Option>reclaimwait </Option><Symbol Role="Variable">interval</Symbol>]
[<Option>minrepdelay </Option><Symbol Role="Variable">interval</Symbol>] [<Option>defaultsiteage </Option><Symbol Role="Variable">interval</Symbol>] \
[<Option>clear</Option>]
<?sml-size +1>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>fileset </Option><Symbol Role="Variable">name</Symbol> or <Symbol Role="Variable">ID</Symbol> option is the complete name or ID
number of the read/write DCE LFS fileset to be replicated.
</Para>
<Para>The <Option>release</Option> option specifies that Release Replication is to be used
with the fileset.  When initially setting the replication type, use this option
or use the <Option>scheduled</Option> option.
</Para>
<Para>The <Option>scheduled</Option> option specifies that Scheduled Replication is to be
used with the fileset.  When initially setting the replication type, use this
option or use the <Option>release</Option> option.
</Para>
<Para>The <Option>change</Option> option is used with <Option>release</Option> or <Option>scheduled</Option> to
indicate that the replication type is to be changed.  When changing the
replication type for a fileset, you must include the <Option>change</Option> option.
(See Section 6.4.2.1.2.)
</Para>
<Para>The <Option>maxage</Option> <Symbol Role="Variable">interval</Symbol> option is the value for MaxAge. An effective
value must be greater than or equal to 2 minutes.
</Para>
<Para>The <Option>failage</Option> <Symbol Role="Variable">interval</Symbol> option is the value for FailAge. An
effective value must be greater than or equal to <Option>maxage</Option>.
<?sml-break><?sml-need 20></Para>
<Para>The <Option>reclaimwait</Option> <Symbol Role="Variable">interval</Symbol> option is the value for ReclaimWait.
An effective value must be greater than 2 hours; do not specify a value less
than 90 minutes.
</Para>
<Para>The <Option>minrepdelay</Option> <Symbol Role="Variable">interval</Symbol> option is the value for MinRepDelay.
This value must be less than the MaxSiteAge specified for each replication
site with the <Option>maxsiteage</Option> option of the <Command>fts addsite</Command> command.
</Para>
<Para>The <Option>defaultsiteage</Option> <Symbol Role="Variable">interval</Symbol> option is the value for
DefaultSiteAge.  This value is used as the MaxSiteAge for a replication site
if the <Option>maxsiteage</Option> option is omitted when the <Command>fts addsite</Command> command
is used to define the site.
</Para>
<Para>The <Option>clear</Option> option removes all replication parameters previously defined
for the fileset. (See Section 6.4.2.1.2.)
</Para>
</ListItem>
</OrderedList>
</Sect4>
<Sect4 Id="DFSAGR.FTAV.div.41">
<Title>Changing Replication Type and Parameters</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.95">
<Primary>replication</Primary>
<Secondary>changing parameters</Secondary>
</IndexTerm>
<Para>You can use the <Command>fts setrepinfo</Command> command to change the type of replication
or the replication parameters that are associated with a fileset at any time
after they are set.  Brief descriptions of the operations used to change
these values follow:
</Para>
<ItemizedList>
<ListItem>
<Para><Replaceable>To change some replication parameters</Replaceable>, use the options for the parameters
you want to change to indicate the new parameters.
</Para>
</ListItem>
<ListItem>
<Para><Replaceable>To change all replication parameters</Replaceable>, use the <Option>clear</Option> option to
remove all previous replication parameters, and either use the options for
the parameters you want to change to indicate the new parameters or omit the
options to allow the system to calculate new replication parameters.
</Para>
</ListItem>
<ListItem>
<Para><Replaceable>To change the replication type</Replaceable>, use the <Option>release</Option> or
<Option>scheduled</Option> option to indicate the new type of replication to be used,
and use the <Option>change</Option> option to indicate that the type is to be changed.
Although not required, you may also want to use the <Option>clear</Option> option to
clear all previous replication parameters and then reset them using parameters
that are better suited to the new type of replication.
<?sml-break><?sml-need 20></Para>
<Para>Because Scheduled Replication imposes more constraints than Release
Replication, Release Replication does not require a replication site to have
a MaxSiteAge.  Therefore, it is likely that one or more Release Replication
sites will have a MaxSiteAge of 0 (zero), which is the default value recorded
for a site if no MaxSiteAge or DefaultSiteAge is specified.  When changing from
Release Replication to Scheduled Replication, the <Option>defaultsiteage</Option> option
<Replaceable>must</Replaceable> be used to set a DefaultSiteAge if any replication site does not
have a MaxSiteAge and no DefaultSiteAge exists for the source fileset;
otherwise, the <Command>fts setrepinfo</Command> command fails.  If the command fails
for this reason, reissue it, specifying a DefaultSiteAge with the
<Option>defaultsiteage</Option> parameter.
</Para>
</ListItem>
</ItemizedList>
<Para>(See Section 6.4.2.1.1 for details about the syntax of the <Command>fts setrepinfo</Command>
command.  See Table 6-1 for information about which of the command's options
apply to the two types of replication and the dependencies between the
parameters.)
<IndexTerm Id="DFSAGR.FTAV.indx.96" SpanEnd="DFSAGR.FTAV.indx.93"><IndexTerm Id="DFSAGR.FTAV.indx.97" SpanEnd="DFSAGR.FTAV.indx.94"></Para>
</Sect4>
<Sect4 Id="DFSAGR.FTAV.div.42">
<Title>Listing Replication Type and Parameters</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.98">
<Primary>replication</Primary>
<Secondary>display parameter type</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.FTAV.indx.99">
<Primary>replication</Primary>
<Secondary>display replication type</Secondary>
</IndexTerm>
<Para>You can use the <Command>fts lsfldb</Command> or <Command>fts lsft</Command> command to list information
on the replication type and replication parameters defined for a fileset. (See
Chapter 7 for more information on the options and output associated with these
commands.)
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>fts lsfldb </Command>[<Option>fileset</Option> {<Symbol Role="Variable">name</Symbol> | <Symbol Role="Variable">ID</Symbol>}] [<Option>server </Option><Symbol Role="Variable">machine</Symbol>] \ 
[<Option>aggregate </Option><Symbol Role="Variable">name</Symbol>] [<Option>locked</Option>]
</UserInput></ProgramListing></Para>
</InformalExample>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>fts lsft </Command>[{<Option>path</Option> {<Symbol Role="Variable">filename</Symbol> | <Symbol Role="Variable">directory_name</Symbol>} | <Option>fileset</Option> {<Symbol Role="Variable">name</Symbol> | \ 
<Symbol Role="Variable">ID</Symbol>}}] [<Option>server </Option><Symbol Role="Variable">machine</Symbol>]
</UserInput></ProgramListing></Para>
</InformalExample>
<?sml-break>
<?sml-need 20>
</Sect4>
</Sect3>
<Sect3 Id="DFSAGR.FTAV.div.43">
<Title>Adding and Removing Replication Sites</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.100">
<Primary>replication</Primary>
<Secondary>removing sites</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.FTAV.indx.101">
<Primary>replication</Primary>
<Secondary>adding sites</Secondary>
</IndexTerm>
<Para>After you define the replication parameters that are associated with a
read/write fileset, you must define the sites (File Server machines and
aggregates) where read-only replicas of the fileset are to be stored.  Use the
<Command>fts addsite</Command> command to add a replication site for a read/write fileset.
If you define an incorrect site or decide at some later time that you no
longer want a replica to be stored at a specific site, you can use the
<Command>fts rmsite</Command> command to remove a replication site for a fileset.
</Para>
<Para>With Release Replication, you must choose the File Server machine on which
the read/write fileset resides as the first replication site.  You can define
one replication site on the same File Server machine and aggregate as the
read/write fileset, and you can define up to 15 additional replication sites
that are not on the same File Server machine and aggregate as the read/write
fileset, for a maximum of 16 possible replication sites.
</Para>
<Para>Note that you can store only a single read-only version of a given read/write
fileset on any File Server machine.  The <Command>fts addsite</Command> command prevents you
from defining multiple replication sites for a fileset on the same File Server
machine.  Also, it is not possible to place a replica of a fileset on a File
Server machine in a different cell.
</Para>
<Sect4 Id="DFSAGR.FTAV.div.44">
<Title>Adding a Replication Site</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.102">
<Primary><Command>fts</Command> command suite</Primary>
<Secondary><Command>addsite</Command></Secondary>
</IndexTerm>
<Para>To add a replication site for a fileset, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Verify that you have the necessary privileges.  You must be included in the
<Filename>admin.fl</Filename> file on each Fileset Database machine or own the server entry
for each machine on which a version of the fileset resides.  If necessary, issue
the <Command>bos lsadmin</Command> command to verify the members of an administrative list.
</Para>
</ListItem>
<ListItem>
<Para>Select a replication site for the read/write fileset that is to be replicated.
If necessary, enter the <Command>fts aggrinfo</Command> command to check the available space
on the aggregate; the <Command>fts lsft</Command> command can be used to check the size of
the read/write fileset.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>fts aggrinfo -server </Command><Symbol Role="Variable">machine</Symbol> <Option>aggregate</Option> <Symbol Role="Variable">name</Symbol>
</UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
<ListItem>
<Para>Enter the <Command>fts addsite</Command> command to add the replication site.  If Release
Replication is being used, you must define the first replication site on the
same File Server machine as the read/write fileset.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>fts addsite -fileset </Command>{<Symbol Role="Variable">name</Symbol> | <Symbol Role="Variable">ID</Symbol>} <Option>server </Option><Symbol Role="Variable">machine</Symbol> \ 
<Option>aggregate</Option> <Symbol Role="Variable">name</Symbol> [<Option>maxsiteage </Option><Symbol Role="Variable">interval</Symbol>]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>maxsiteage</Option> <Symbol Role="Variable">interval</Symbol> option can be used to override the
DefaultSiteAge set with the <Command>fts setrepinfo</Command> command.
</Para>
</ListItem>
</OrderedList>
<Para>Repeat the <Command>fts addsite</Command> command for each replication site you want to
define for the fileset.
</Para>
</Sect4>
<Sect4 Id="DFSAGR.FTAV.div.45">
<Title>Removing a Replication Site</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.103">
<Primary><Command>fts</Command> command suite</Primary>
<Secondary><Command>rmsite</Command></Secondary>
</IndexTerm>
<Para>To remove a replication site for a fileset, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Verify that you have the necessary privileges.  You must be included in the
<Filename>admin.fl</Filename> file on each Fileset Database machine or own the server entry
for each machine on which a version of the fileset resides.  If necessary,
issue the <Command>bos lsadmin</Command> command to verify the members of an administrative
list.
</Para>
<Note>
<Para>If the fileset uses Release Replication and you are using the <Command>fts rmsite</Command>
command to remove the replication site and replica on the same machine as the
read/write fileset, you must also be included in the <Filename>admin.ft</Filename> file on
the machine specified by the <Option>server</Option> option.  Be aware that, if you
remove the read-only replica on the same machine as the read/write fileset,
all other read-only replicas of that fileset become unavailable after the
expiration of the fileset's FailAge.
</Para>
</Note>
<?sml-break>
<?sml-need 20>
</ListItem>
<ListItem>
<Para>Enter the <Command>fts rmsite</Command> command to remove a replication site and to instruct
the Replication Server at the site to remove the read-only replica of the
fileset.  If the fileset uses Release Replication and the replication site is on
the same File Server machine as the read/write fileset, the  <Command>fts rmsite</Command>
command itself removes the replica.  Note that you must specify the aggregate
ID with the <Option>aggregate</Option> option if the aggregate on which the replica
resides is not currently exported or has been detached with the <Command>dfsexport</Command>
command.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>fts rmsite -fileset </Command>{<Symbol Role="Variable">name</Symbol> | <Symbol Role="Variable">ID</Symbol>} <Option>server \ 
</Option><Symbol Role="Variable">machine</Symbol> <Option>aggregate</Option> <Symbol Role="Variable">name</Symbol>
</UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
</OrderedList>
<Para>Repeat the <Command>fts rmsite</Command> command for each replication site and read-only
fileset you want to remove for the fileset.
<IndexTerm Id="DFSAGR.FTAV.indx.104" SpanEnd="DFSAGR.FTAV.indx.100"><IndexTerm Id="DFSAGR.FTAV.indx.105" SpanEnd="DFSAGR.FTAV.indx.101"><IndexTerm Id="DFSAGR.FTAV.indx.106" SpanEnd="DFSAGR.FTAV.indx.87"></Para>
</Sect4>
</Sect3>
</Sect2>
<Sect2 Id="DFSAGR.FTAV.div.46">
<Title>Creating Read-Only Filesets</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.107">
<Primary>replicas</Primary>
<Secondary>creating (DFS)</Secondary>
</IndexTerm>
<Para>The following subsections describe how to
</Para>
<ItemizedList>
<ListItem>
<Para>Use Release Replication to replicate a fileset.  You issue the <Command>fts release</Command>
command to release a new replica of a fileset on the same File Server machine
as the read/write version of the fileset.  The Replication Servers at the
fileset's other replication sites then update the replicas at their respective
sites to match the replica on the read/write fileset's machine.
</Para>
</ListItem>
<ListItem>
<Para>Use Scheduled Replication to replicate a fileset.  Although Scheduled
Replication is automatically performed according to the replication
parameters you define, you can use the <Command>fts update</Command> command to
request an immediate update of all replicas of a fileset or of only
the replica at a given site.  The Replication Servers at the specified
replication sites immediately begin to update their respective
replicas to match the version of the read/write fileset that exists at
the time the command issued.  The Replication Servers ignore the
MinRepDelay parameter associated with the fileset.
</Para>
</ListItem>
</ItemizedList>
<Para>Using the <Command>fts release</Command> or <Command>fts update</Command> command does not guarantee
immediate access to data in the new version of a replica.  A Cache Manager
continues to provide data cached from the old version of the replica until the
MaxAge for the fileset expires or until the Cache Manager needs to access data
from the replica that it has not already cached.
</Para>
<Para>Moreover, the <Command>fts release</Command> and <Command>fts update</Command> commands direct the
Replication Servers at a fileset's replication sites to begin updating the
replicas stored at their sites.  The Replication Servers begin
updating the replication sites in parallel. (This does not mean, however, that
all replicas will complete their updates at the same time.)
</Para>
<Para>Replicas are updated even if shared byte-range locks exist against
data within the replica. Shared byte-range locks are granted by DFS to
provide compatibility with applications that require them. However,
such locks are not honored by DFS during the replica update process.
</Para>
<Para>To attempt to gain immediate access to data in the new version of a
replica, issue the <Command>cm flush</Command> or <Command>cm flushfileset</Command> command to
flush the old data from the cache.  These commands force the Cache
Manager to discard and, as necessary, replace data it has cached from
the replica. Until all replicas have been updated, you cannot directly
force the Cache Manager to access data from the new version of the
replica.
</Para>
<Para>The operations described in the following subsections assume that the
preparatory steps described in Section 6.4.2 have all been performed.
</Para>
<Sect3 Id="DFSAGR.FTAV.div.47">
<Title>Using Release Replication to Create Read-Only Filesets</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.108">
<Primary><Command>fts</Command> command suite</Primary>
<Secondary><Command>release</Command></Secondary>
</IndexTerm>
<Para>For a fileset that uses Release Replication, do the following to create or
update the fileset's read-only replicas:
</Para>
<OrderedList>
<ListItem>
<Para>Verify that you have the necessary privileges.  You must be included in the
<Filename>admin.ft</Filename> file on the machine on which the read/write source fileset is
stored, and you must be included in the <Filename>admin.fl</Filename> file on each Fileset
Database machine or own the server entry for the machine on which the
read/write source fileset is stored and for each machine on which a read-only
replica is to reside.  If necessary, issue the <Command>bos lsadmin</Command> command to
verify the members of a list.
<?sml-break><?sml-need 20></Para>
</ListItem>
<ListItem>
<Para>Use the <Command>fts release</Command> command to create or update the read-only replica
of the read/write source fileset that resides on the same File Server machine
as the source fileset.  The Replication Servers at each replication site then
update the read-only filesets at their respective sites to match this replica.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>fts release -fileset </Command>{<Symbol Role="Variable">name</Symbol> | <Symbol Role="Variable">ID</Symbol>}
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>fileset </Option><Symbol Role="Variable">name</Symbol> or <Symbol Role="Variable">ID</Symbol> option is the name or ID number of the
read/write fileset whose replicas are to be updated.
</Para>
<Para>Use the <Option>wait</Option> option to ensure that command will not complete
(return a prompt) until all replicas are updated.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Literal>fts release -fileset {</Literal><Symbol Role="Variable">name</Symbol> | <Symbol Role="Variable">ID</Symbol>} <Option>wait</Option> 
</UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
</OrderedList>
</Sect3>
<Sect3 Id="DFSAGR.FTAV.div.48">
<Title>Using Scheduled Replication to Create Read-Only Filesets</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.109">
<Primary><Command>fts</Command> command suite</Primary>
<Secondary><Command>update</Command></Secondary>
</IndexTerm>
<Para>For a fileset that uses Scheduled Replication, replication occurs automatically
according to the parameters established previously with the <Command>fts
setrepinfo</Command> command.  You do <Symbol Role="Variable">not</Symbol> need to explicitly enter a command
to initiate Scheduled Replication.  However, you can use the <Command>fts update</Command>
command to request an immediate update of a fileset's read-only replicas at
any time.  Issue the <Command>fts update</Command> command to request an immediate update
of the replica at a specific replication site or of all replicas at all sites:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>fts update -fileset </Command>{<Symbol Role="Variable">name</Symbol> | <Symbol Role="Variable">ID</Symbol>} {<Option>all</Option> | <Option>server </Option><Symbol Role="Variable">machine</Symbol>}
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>fileset </Option><Symbol Role="Variable">name</Symbol> or <Symbol Role="Variable">ID</Symbol> option is the name or ID number of the
read/write fileset whose replicas are to be updated.
</Para>
<Para>The <Option>all</Option> option specifies that all replicas of the fileset indicated
with the <Option>fileset</Option> option are to be updated.  Use the <Option>all</Option> option
or use the <Option>server</Option> option.
</Para>
<Para>The <Option>server</Option> <Symbol Role="Variable">machine</Symbol> option names a specific File Server machine
on which the replica of the fileset indicated with the <Option>fileset</Option> option
is to be updated.  Specify the File Server machine's DCE pathname, its host
name, or its IP address.  Use the <Option>server</Option> option or use the <Option>all</Option>
option.
<IndexTerm Id="DFSAGR.FTAV.indx.110" SpanEnd="DFSAGR.FTAV.indx.107"></Para>
</Sect3>
</Sect2>
<Sect2 Id="DFSAGR.FTAV.div.49">
<Title>Displaying Replication Status</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.111">
<Primary>replicas</Primary>
<Secondary>checking status (DFS)</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.FTAV.indx.112">
<Primary>replicas</Primary>
<Secondary>updating</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.FTAV.indx.113">
<Primary>replication</Primary>
<Secondary>checking status (DFS)</Secondary>
</IndexTerm>
<Para>The following subsections describe how to
</Para>
<ItemizedList>
<ListItem>
<Para>Display the status of the Replication Server (<Command>repserver</Command> process) on a
File Server machine with the <Command>fts statrepserver</Command> command.  Use this command
to determine if the Replication Server at a replication site is functioning
properly.  If it is not, replicas stored on that machine may not be current.
</Para>
</ListItem>
<ListItem>
<Para>Display the statuses of all replicas of a fileset or the status of only the
replica at a specific site with the <Command>fts lsreplicas</Command> command.  Use this
command to determine if the replicas of a fileset have been properly updated
with the most recent version of the fileset.
</Para>
</ListItem>
</ItemizedList>
<Sect3 Id="DFSAGR.FTAV.div.50">
<Title>Displaying the Status of a Replication Server</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.114">
<Primary><Command>fts</Command> command suite</Primary>
<Secondary><Command>statrepserver</Command></Secondary>
</IndexTerm>
<Para>Enter the <Command>fts statrepserver</Command> command to determine if the Replication
Server on a File Server machine is running:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Literal>fts statrepserver -server </Literal><Symbol Role="Variable">machine</Symbol> [<Option>long</Option>]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>long</Option> option specifies that more detailed information about the
Replication Server on the File Server machine indicated with the <Option>server</Option>
option is to be displayed.  The additional information includes the status of
each replica managed by the Replication Server.
</Para>
</Sect3>
<Sect3 Id="DFSAGR.FTAV.div.51">
<Title>Displaying the Statuses of Read-Only Filesets</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.115">
<Primary><Command>fts</Command> command suite</Primary>
<Secondary><Command>lsreplicas</Command></Secondary>
</IndexTerm>
<Para>Use the <Command>fts lsreplicas</Command> command to verify the statuses of a fileset's
replicas at one or all of its replication sites:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>fts lsreplicas -fileset </Command>{<Symbol Role="Variable">name</Symbol> | <Symbol Role="Variable">ID</Symbol>} {<Option>all</Option> | <Option>server </Option><Symbol Role="Variable">machine</Symbol>}
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>fileset </Option><Symbol Role="Variable">name</Symbol> or <Symbol Role="Variable">ID</Symbol> option is the name or ID number of the
fileset whose replicas are to be checked.
</Para>
<Para>The <Option>all</Option> option specifies that all replicas of the fileset indicated
with the <Option>fileset</Option> option are to be examined.  Use the <Option>all</Option> option
or use the <Option>server</Option> option.
</Para>
<Para>The <Option>server</Option> <Symbol Role="Variable">machine</Symbol> option names a specific File Server machine
on which the replica of the fileset indicated with the <Option>fileset</Option> option
is to be checked.  Specify the File Server machine's DCE pathname, its host
name, or its IP address.  Use this option or use the <Option>all</Option> option.
<IndexTerm Id="DFSAGR.FTAV.indx.116" SpanEnd="DFSAGR.FTAV.indx.116"><IndexTerm Id="DFSAGR.FTAV.indx.117" SpanEnd="DFSAGR.FTAV.indx.113"><IndexTerm Id="DFSAGR.FTAV.indx.118" SpanEnd="DFSAGR.FTAV.indx.77"></Para>
</Sect3>
</Sect2>
</Sect1>
<Sect1 Id="DFSAGR.FTAV.div.52">
<Title>Creating Backup DCE LFS Filesets</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.119">
<Primary>filesets</Primary>
<Secondary>creating backup</Secondary>
</IndexTerm>
<Para>A backup fileset is a single copy of the read/write version of a DCE LFS
fileset.  A backup fileset is stored at the same site as the read/write fileset
on which it is based; it can serve as an online backup of the read/write
fileset.  Data in a backup fileset cannot be modified, but it can be read and
copied.  Backup versions of non-LFS filesets cannot be created.
</Para>
<Para>Creating backup DCE LFS filesets has the following purposes:
</Para>
<ItemizedList>
<ListItem>
<Para>It is the first step in using the Backup System to copy a DCE LFS fileset
permanently to tape.
</Para>
</ListItem>
<ListItem>
<Para>It allows you to create backup copies without interrupting a user's work.
</Para>
</ListItem>
<ListItem>
<Para>It enables users to restore deleted or changed data themselves.  A backup
version of a fileset captures the state of its read/write source at the time
the backup is made.  If you mount the backup version as a subdirectory of a
user's home directory (with a suitable subdirectory name, such as
<Filename>OldFiles</Filename> or <Literal>BackUp</Literal>), the user can restore files to the state
they were in at the time of the backup without your help.
</Para>
<Para>If you create and mount backup filesets for your users, you need to explain
to them how often you will make the backups and remind them that the data in
their backup filesets cannot be changed.  They can, however, copy the data to
a directory in a read/write fileset and use it there.
</Para>
</ListItem>
</ItemizedList>
<Sect2 Id="DFSAGR.FTAV.div.53">
<Title>An Overview of Backup Filesets</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.120">
<Primary>filesets</Primary>
<Secondary>backup and replicas compared</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.FTAV.indx.121">
<Primary>replicas</Primary>
<Secondary>compared to backup filesets</Secondary>
</IndexTerm>
<Para>Although backup and read-only filesets are created in a similar manner, they
serve a different purpose.  Backing up a fileset does not make data available
from multiple sites or reduce the load on a machine, as replication does.
However, backing up a fileset is an efficient way to make previous versions
of data such as user files available for restoration.
</Para>
<Para><IndexTerm Id="DFSAGR.FTAV.indx.122">
<Primary>filesets</Primary>
<Secondary>disk space for backup</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.FTAV.indx.123">
<Primary>disk space</Primary>
<Secondary>backup filesets</Secondary>
</IndexTerm>When you create a backup fileset, the backup fileset is filled with an array
of pointers to the data housed in the read/write source.  Then, the identities
of the read/write source and the backup fileset are switched; the backup
fileset becomes the read/write source, and the read/write source becomes the
backup fileset.  The sharing of data between the read/write and backup versions
of a fileset results in significant disk space savings. (See Section 6.1.3
for more information on data sharing among the different types of DCE LFS
filesets.)
</Para>
<Para>A backup version preserves the exact state of its read/write source at the
time the backup is created.  For example, if you make a new version of each
user's fileset every day at the same time, data that was deleted a week ago
cannot be restored from the backup version because that backup version will
have been overwritten six times since then.  Similarly, if you make a new
version of each user's fileset every day and a user revises a file three
times during the same day, there is no way to access the first and second
revisions the next day; the backup version records only the third and final
version of the file, which is the version that existed in the read/write
fileset when the backup fileset was made.
</Para>
<Para>A backup fileset must reside at the same site (File Server machine and
aggregate) as its read/write source.  It has the same name as the read/write
version, with the addition of a <Literal>.backup</Literal> extension.
<IndexTerm Id="DFSAGR.FTAV.indx.124" SpanEnd="DFSAGR.FTAV.indx.120"><?sml-break><?sml-need 20></Para>
</Sect2>
<Sect2 Id="DFSAGR.FTAV.div.54">
<Title>Backup Options</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.125">
<Primary><Command>fts</Command> command suite</Primary>
<Secondary><Literal>clone</Literal></Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.FTAV.indx.126">
<Primary><Command>fts</Command> command suite</Primary>
<Secondary><Command>clonesys</Command></Secondary>
</IndexTerm>
<Para>You can use the <Command>fts clone</Command> command to back up a single read/write DCE LFS
fileset; you can use the <Command>fts clonesys</Command> command to back up multiple
read/write DCE LFS filesets at one time.  You can combine the options available
with the <Command>fts clonesys</Command> command in different ways to indicate the filesets
that are to be backed up; the following list summarizes the possible
combinations.  To back up
</Para>
<ItemizedList>
<ListItem>
<Para>All filesets in the local cell, specify no options
</Para>
</ListItem>
<ListItem>
<Para>All filesets in the local cell with a name beginning with the same character
string (for example, <Literal>sys.</Literal> or <Literal>user.</Literal>), specify the string with the
<Option>prefix</Option> option
</Para>
</ListItem>
<ListItem>
<Para>All filesets on a File Server machine, specify the machine's name with the
<Option>server</Option> option
</Para>
</ListItem>
<ListItem>
<Para>Filesets on a specific aggregate on a File Server machine, specify both the
<Option>server</Option> and <Option>aggregate</Option> options
</Para>
</ListItem>
<ListItem>
<Para>Filesets with a certain prefix on a specific File Server machine, specify both
the <Option>prefix</Option> and <Option>server</Option> options
</Para>
</ListItem>
<ListItem>
<Para>Filesets with a certain prefix on a specific aggregate on a File Server
machine, specify the <Option>prefix</Option>, <Option>server</Option>, and <Option>aggregate</Option>
options
</Para>
</ListItem>
</ItemizedList>
<Para>You may want to make backup versions of particular filesets every day at the
same time.  You can issue the <Command>fts clonesys</Command> or <Command>fts clone</Command> commands at
the console, or you can create a <Literal>cron</Literal> entry in the <Filename>BosConfig</Filename> file
on each File Server machine where you want to back up filesets.
</Para>
<Para>The following example creates a <Literal>cron</Literal> process called <Literal>backupusers</Literal> in
the <Filename>BosConfig</Filename> file on the machine named <Literal>fs3</Literal>.  The process executes
every day at 5:30 a.m., making a backup version of every fileset in the cell's
filespace that has a name that starts with <Literal>user</Literal>.  The <Option>localauth</Option>
option allows the process, which runs unauthenticated, to use the DFS server
principal of <Literal>fs3</Literal> to execute the privileged <Command>fts clonesys</Command> command.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Literal>bos create /.../abc.com/hosts/fs3 backupusers cron "</Literal><Symbol Role="Variable">dcelocal</Symbol><Literal>/bin/fts \
clonesys -prefix user -localauth" 5:30</Literal>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para><IndexTerm Id="DFSAGR.FTAV.indx.127" SpanEnd="DFSAGR.FTAV.indx.119"></Para>
</Sect2>
<Sect2 Id="DFSAGR.FTAV.div.55">
<Title>Creating and Mounting Backup Filesets</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.128">
<Primary>filesets</Primary>
<Secondary>mounting backup</Secondary>
</IndexTerm>
<Para>To create and mount backup filesets, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Verify that you have the necessary privileges.  You must be included in the 
<Filename>admin.ft</Filename> file on each machine on which a backup fileset is to reside, 
and you must be included in the <Filename>admin.fl</Filename> file on each Fileset Database 
machine or own the server entry for each machine on which a version of a 
fileset to be backed up resides.  If necessary, issue the <Command>bos lsadmin</Command> 
command to verify the members on an administrative list.
</Para>
</ListItem>
<ListItem>
<Para>Verify that you have the <Literal>w</Literal> (write), <Literal>x</Literal> (execute), and <Literal>i</Literal> 
(insert) ACL permissions for each directory in which a backup fileset is to be
mounted.  If necessary, issue the <Command>dcecp acl show</Command> command to check the
permissions for the directories.
</Para>
</ListItem>
<ListItem>
<Para>Issue the <Command>fts clone</Command> command to create a single backup version of a
read/write source fileset.  The backup version is placed at the same site as
the read/write source, with the same name as the source fileset but with the
addition of a <Literal>.backup</Literal> extension.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>fts clone -fileset </Command>{<Symbol Role="Variable">name</Symbol> | <Symbol Role="Variable">ID</Symbol>}
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>Issue the <Command>fts clonesys</Command> command to create a backup version of every
read/write fileset that shares the same prefix or site.  Each backup version
is placed at the same site as its read/write source, with the same name, and
with a <Literal>.backup</Literal> extension.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>fts clonesys </Command>[<Option>prefix </Option><Symbol Role="Variable">string</Symbol>] [<Option>server </Option><Symbol Role="Variable">machine</Symbol>] \ 
[<Option>aggregate </Option><Symbol Role="Variable">name</Symbol>]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>prefix</Option> <Symbol Role="Variable">string</Symbol> option is the initial string in the name of 
each read/write fileset that you want to back up.
<?sml-break><?sml-need 20></Para>
</ListItem>
<ListItem>
<Para>Enter the <Command>fts crmount</Command> command to create a mount point for each backup
fileset.  The contents of filesets are inaccessible until you perform this
operation.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>fts crmount -dir </Command><Symbol Role="Variable">directory_name</Symbol> <Option>fileset</Option>
 <Symbol Role="Variable">name</Symbol><Literal>.backup</Literal>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>dir</Option> <Symbol Role="Variable">directory_name</Symbol> option is the location for
the root directory of the backup fileset; the specified location must
not already exist.  However, the parent directory of the mount point must
exist in the DCE namespace.  Include a complete pathname unless you
want to mount the fileset in the working directory.
</Para>
<Para>The <Option>fileset</Option> <Symbol Role="Variable">name</Symbol><Literal>.backup</Literal> option is the full name of the 
backup fileset, with the <Literal>.backup</Literal> extension.
</Para>
<Para>Repeat the <Command>fts crmount</Command> command for each backup fileset created in the
previous step.  Note that you do not need to create a mount point for a backup
fileset; for example, the DFS Backup System does not require a mount point
to locate a backup fileset.
</Para>
</ListItem>
</OrderedList>
</Sect2>
</Sect1>
<Sect1 Id="DFSAGR.FTAV.div.56">
<Title>Using Mount Points</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.129">
<Primary>filesets</Primary>
<Secondary>mounting</Secondary>
</IndexTerm>
<Para>To make a DCE LFS or non-LFS fileset visible in the DCE namespace, you must
use the <Command>fts crmount</Command> command to create a mount point for it in the DFS
filespace.  Mount points create the appearance of a single, seamless file system
even though different filesets are stored on different File Server machines.  A
fileset's contents are visible and accessible as files and directories in the
filespace only when the fileset is mounted; they are not available if the
fileset is not mounted.  Once its mount point is created, a fileset is
automatically mounted; you do not need to take any further actions or
explicitly mount it again at any time in the future.
</Para>
<Para>A mount point is a specific type of symbolic link stored in the file system.
It acts as an association between a directory location and a fileset.  The
root of a fileset contains an actual directory structure, to which the Cache
Manager assigns the name of the fileset's mount point.  A fileset's root
directory provides a pathname for all of the files, subdirectories, and
mount points contained in the fileset. 
</Para>
<Para>During file retrieval, the Cache Manager traverses a file's complete pathname
until it finds the file.  When it encounters a mount point in a pathname, the
Cache Manager reads the mount point to learn which fileset is mounted at the
mount point.  It then contacts the Fileset Location Server to locate the
fileset.  As it traverses a pathname, the Cache Manager interprets any
additional mount points it finds until it reaches the fileset that contains
the requested file.
</Para>
<Para><IndexTerm Id="DFSAGR.FTAV.indx.130">
<Primary>mount points</Primary>
<Secondary>multiple</Secondary>
</IndexTerm>Do not mount a fileset at more than one location in the file system.  Creating
multiple mount points can distort the hierarchical nature of the file system.
The Cache Manager stores a single pointer to the directory that contains the
root directory of each fileset; the Cache Manager can become confused about
which pathname to follow when searching for a file in a fileset with multiple
mount points.  This is true even if you specify the full pathname of a file.
Create multiple mount points for a fileset sparingly, in only a very limited
number of troubleshooting and testing situations.  Remove the extraneous mount
points as soon as they are no longer necessary.
</Para>
<Para>Different types of mount points exist.  Section 6.6.1 describes the different
types of mount points in detail.  Briefly, a mount point can be characterized
by its
</Para>
<ItemizedList>
<ListItem>
<Para>Fileset type (read/write, read-only, or backup)
</Para>
</ListItem>
<ListItem>
<Para>Mount point type (regular, read/write, or global root)
</Para>
</ListItem>
</ItemizedList>
<Para><IndexTerm Id="DFSAGR.FTAV.indx.131">
<Primary><Command>fts</Command> command suite</Primary>
<Secondary><Command>lsmount</Command></Secondary>
</IndexTerm>The <Command>fts lsmount</Command> command can be used to examine mount points to determine
their types and the filesets they name.  The command displays the following
message for each directory that is a mount point:
</Para>
<InformalExample>
<Para><ProgramListing>`<Symbol Role="Variable">directory_name</Symbol>' is a mount point for fileset `<Symbol Role="Variable">fileset_name</Symbol>'
</ProgramListing></Para>
</InformalExample>
<Para>In the output, <Symbol Role="Variable">directory_name</Symbol> is the name of a directory (in this case,
a mount point) that you specify, and <Symbol Role="Variable">fileset_name</Symbol> is the name of the
fileset for which <Symbol Role="Variable">directory_name</Symbol> serves as a mount point.  The command
also provides the following information about the directory and fileset:
</Para>
<ItemizedList>
<ListItem>
<Para>A <Literal>#</Literal> (number sign) precedes the fileset name if the directory is a regular
mount point.
</Para>
</ListItem>
<ListItem>
<Para>A % (percent sign) precedes the fileset name if the directory is a
read/write mount point.
</Para>
</ListItem>
<ListItem>
<Para>An <Literal>!</Literal> (exclamation point) replaces the fileset name if the directory is a
global root mount point.
</Para>
</ListItem>
</ItemizedList>
<Para>Do not create a symbolic link that begins with a <Literal>#</Literal> (number sign) or a
<Literal>%</Literal> (percent sign) character.  Because a mount point is a special type of
symbolic link that uses these characters internally to identify its type, the
Cache Manager becomes confused if it encounters a normal symbolic link that
begins with one of these characters.
</Para>
<Para><IndexTerm Id="DFSAGR.FTAV.indx.132">
<Primary><Command>fts</Command> command suite</Primary>
<Secondary><Command>delmount</Command></Secondary>
</IndexTerm>The <Command>fts delmount</Command> command is used to remove mount points.  The fileset
that is referred to by a removed mount point remains in existence, but its
contents are not accessible until another mount point is created for it.
</Para>
<Sect2 Id="DFSAGR.FTAV.div.57">
<Title>Types of Mount Points</Title>
<Para>A mount point can be distinguished by its fileset type and its mount point
type.  The following subsections describe the characteristics of the different
types of mount points.
</Para>
<Sect3 Id="DFSAGR.FTAV.div.58">
<Title>Fileset Type</Title>
<Para>The first characteristic of a mount point determines which type of fileset is
named in the mount point.  A read-only or backup fileset has a <Literal>.readonly</Literal>
or <Literal>.backup</Literal> extension; a read/write fileset has no extension.
</Para>
<Para>When a mount point names a fileset with a <Literal>.readonly</Literal> or <Literal>.backup</Literal>
extension, the Cache Manager uses only the specified version of the fileset.
The Cache Manager never accesses the read/write version of a fileset when it
encounters a mount point that names a read-only or backup version; if the
explicitly named version is unavailable, the Cache Manager reports an error.
However, depending on the mount point type, the Cache Manager can access the
read-only version of a fileset when it encounters a mount point that names the
read/write version (the fileset name with no extension).
</Para>
</Sect3>
<Sect3 Id="DFSAGR.FTAV.div.59">
<Title>Mount Point Type</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.133">
<Primary>mount points</Primary>
<Secondary>types</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.FTAV.indx.134">
<Primary>regular mount points</Primary>
</IndexTerm>
<Para>The second characteristic determines the type of the mount point.  The majority
of mount points are <Replaceable>regular mount points</Replaceable>.  When the Cache Manager
encounters a regular mount point, it checks the version of the fileset that 
the mount point indicates&mdash;read/write, read-only, or backup.  If the read-only
or backup version is indicated, the Cache Manager attempts to access that
version.  If the read/write version is indicated, the Cache Manager evaluates
the type of fileset in which the mount point itself resides:
</Para>
<ItemizedList>
<ListItem>
<Para>If the regular mount point for a read/write fileset resides in a read/write
fileset, the Cache Manager attempts to access only the read/write version of
the fileset.  If the read/write version does not exist or is inaccessible, the
Cache Manager cannot access the fileset.
</Para>
</ListItem>
<ListItem>
<Para>If the regular mount point for a read/write fileset resides in a read-only
fileset, the Cache Manager first attempts to access a read-only version of the
fileset.  If the fileset is not replicated, the Cache Manager attempts to access
the read/write version of the fileset.  If the fileset is replicated but all of
the replicas are unavailable, the Cache Manager cannot access the fileset; it
does not attempt to access the read/write version of the fileset.
</Para>
</ListItem>
</ItemizedList>
<Para>Regular mount points allow the Cache Manager to retrieve files better than
other types of mount points because regular mount points allow the Cache
Manager to access read-only filesets whenever possible.  There are normally
several different instances of the read-only version of a fileset, but there
is only one instance of the read/write version.  Because more read-only copies
are usually available, it is better to access the copies as often as possible.
</Para>
<Para><IndexTerm Id="DFSAGR.FTAV.indx.135">
<Primary>read/write mount points</Primary>
</IndexTerm>A much less common type of mount point is a <Replaceable>read/write mount point</Replaceable>.
Read-write mount points must name the read/write version of a fileset.  When
the Cache Manager encounters a read/write mount point, it attempts to access
only the read/write version of the fileset, regardless of the type of fileset
in which the mount point resides.  If the read/write version does not exist or
is inaccessible, the Cache Manager cannot access the fileset.
</Para>
<Para>You usually mount read/write filesets with regular mount points. A regular
mount point is explicitly <Symbol Role="Variable">not</Symbol> a read-only mount point.  The Cache Manager
can still access the read/write version of a fileset when it encounters a
regular mount point if no read-only versions of the fileset exist or if the
Cache Manager is already on a read/write traversal path.
</Para>
<Para><IndexTerm Id="DFSAGR.FTAV.indx.136">
<Primary>global mount points</Primary>
</IndexTerm>The least common type of mount point is the <Replaceable>global root mount point</Replaceable>.
This type of mount point is used to mount the root of the DCE global namespace.
(Because it is maintained for backward compatibility with other file systems,
it is not normally used.  This documentation provides no examples of its use.)
<!-- .cS-->
<!-- It is typically used only in filesets that serve as top-level directories for-->
<!-- diskless machines.-->
<!-- .cE-->
<IndexTerm Id="DFSAGR.FTAV.indx.137" SpanEnd="DFSAGR.FTAV.indx.133"></Para>
</Sect3>
</Sect2>
<Sect2 Id="DFSAGR.FTAV.div.60">
<Title>Manipulating Mount Points</Title>
<Para>The following subsections describe the commands used to create, list, and
remove mount points.
</Para>
<Sect3 Id="DFSAGR.FTAV.div.61">
<Title>Creating a Mount Point</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.138">
<Primary>mount points</Primary>
<Secondary>creating</Secondary>
</IndexTerm>
<Para>To create a mount point, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Verify that you have the necessary permissions for the directory in which the
fileset is to be mounted.  If the directory resides in a DCE LFS fileset, you
must have the <Literal>w</Literal> (write), <Literal>x</Literal> (execute), <Literal>c</Literal> control, and <Literal>i</Literal>
(insert) ACL permissions for the directory; if necessary, issue the <Command>dcecp
acl show</Command> command to list the permissions for the directory.  If the directory
resides in a non-LFS fileset, you must have the <Literal>w</Literal> and <Literal>x</Literal> permissions
for the directory.
</Para>
</ListItem>
<ListItem>
<Para>Enter the <Command>fts crmount</Command> command to create a mount point for a fileset:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>fts crmount -dir </Command><Symbol Role="Variable">directory_name</Symbol> {<Option>fileset</Option> {<Symbol Role="Variable">name</Symbol> | <Symbol Role="Variable">ID</Symbol>} | \
<Option>global</Option>} [<Option>rw</Option>] [<Option>fast</Option>]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>dir</Option> <Symbol Role="Variable">directory_name</Symbol> option is the location for the root 
directory of the fileset; the specified location must not already exist. 
However, the parent directory of the mount point must exist in the DCE 
namespace.  Include a complete pathname unless you want to mount the fileset 
in the working directory.
</Para>
<Para>The <Option>global</Option> option indicates that the mount point is for the root of 
the DCE global namespace.  Do not use this option; it exists for backward
compatibility with other file systems.
<!-- .cS-->
<!-- Use this option with diskless machines to create a mount point for the root-->
<!-- of the DCE namespace under the top-level diskless directory.  Use the-->
<!-- \*L\-global\*O option or use the \*L\-fileset\*O option.-->
<!-- .cE-->
<?sml-break><?sml-need 20></Para>
<Para>The <Option>rw</Option> option specifies the type of the mount point as read/write. The 
Cache Manager accesses only the read/write version of the fileset.  If the 
<Option>rw</Option> option is used, the <Option>fileset</Option> option must name the read/write 
version.  Omit the <Option>rw</Option> option to create a regular mount point.
</Para>
<Para>The <Option>fast</Option> option specifies that the existence of the fileset indicated 
with the <Option>fileset</Option> option is <Symbol Role="Variable">not</Symbol> to be verified.  By default, 
<Command>fts</Command> verifies the existence of the fileset and displays a warning if it 
does not exist.  The command always creates the mount point, regardless of
whether the fileset exists.
</Para>
<Para>The following examples illustrate the creation of a mount point for a user
fileset.  Initially, only the user filesets named <Replaceable>user.pat</Replaceable> and
<Replaceable>user.terry</Replaceable> are mounted in <Replaceable>/.../abc.com/fs/usr</Replaceable>.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Literal>cd /.../abc.com/fs/usr</Literal>
$ <Command>ls</Command>
</UserInput></ProgramListing></Para>
</InformalExample>
<InformalExample>
<Para><ProgramListing>pat&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;terry
</ProgramListing></Para>
</InformalExample>
<Para>The <Command>fts crmount</Command> command is used to mount the fileset named
<Replaceable>user.vijay</Replaceable> at <Replaceable>/.../abc.com/fs/usr/vijay</Replaceable>.  Because the <Option>rw</Option>
option is omitted, the fileset is mounted with a regular mount point.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Literal>fts crmount /.../abc.com/fs/usr/vijay user.vijay</Literal>
$ <Command>ls</Command>
</UserInput></ProgramListing></Para>
</InformalExample>
<InformalExample>
<Para><ProgramListing>pat&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;terry&ensp;&ensp;&ensp;&ensp;vijay
</ProgramListing></Para>
</InformalExample>
</ListItem>
</OrderedList>
<IndexTerm Id="DFSAGR.FTAV.indx.139" SpanEnd="DFSAGR.FTAV.indx.138">
</Sect3>
<Sect3 Id="DFSAGR.FTAV.div.62">
<Title>Listing a Mount Point</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.140">
<Primary>mount points</Primary>
<Secondary>viewing</Secondary>
</IndexTerm>
<Para>To list a mount point, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Verify that you have the <Literal>r</Literal> (read) permission for each mount point that
you want to examine.  If necessary, issue the <Command>dcecp acl show</Command> command to 
list the permissions for a mount point that resides in a DCE LFS fileset.
<?sml-break><?sml-need 20></Para>
</ListItem>
<ListItem>
<Para>Enter the <Command>fts lsmount</Command> command to list information about one or more
mount points:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>fts lsmount -dir </Command><Symbol Role="Variable">directory_name</Symbol>...
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>dir</Option> <Symbol Role="Variable">directory_name</Symbol> option specifies the name of each mount
point about which you want to list information.
</Para>
<Para>The following example lists the mount point for the fileset <Replaceable>user.vijay</Replaceable>,
which was created in the previous example.  The <Literal>#</Literal> (number sign) in the
output indicates that the mount point is a regular mount point.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Literal>fts lsmount vijay</Literal>
</UserInput></ProgramListing></Para>
</InformalExample>
<InformalExample>
<Para><ProgramListing>`vijay' is a mount point for fileset `#user.vijay'
</ProgramListing></Para>
</InformalExample>
</ListItem>
</OrderedList>
</Sect3>
<Sect3 Id="DFSAGR.FTAV.div.63">
<Title>Removing a Mount Point</Title>
<IndexTerm Id="DFSAGR.FTAV.indx.141">
<Primary>mount points</Primary>
<Secondary>deleting</Secondary>
</IndexTerm>
<Para>To remove a mount point, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Verify that you have the necessary permissions for each directory from which
you want to remove a mount point.  If a directory resides in a DCE LFS fileset,
you must have the <Literal>w</Literal> (write), <Literal>x</Literal> (execute), and <Literal>d</Literal> (delete) ACL
permissions for the directory; if necessary, issue the <Command>dcecp acl show</Command>
command to list the permissions for the directory.  If a directory resides in
a non-LFS fileset, you must have the <Literal>w</Literal> and <Literal>x</Literal> permissions for the
directory.
</Para>
</ListItem>
<ListItem>
<Para>Enter the <Command>fts delmount</Command> command to remove one or more mount points:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>fts delmount -dir </Command><Symbol Role="Variable">directory_name</Symbol>...
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>dir</Option> <Symbol Role="Variable">directory_name</Symbol> option specifies the name of each mount 
point that you want to remove.
<?sml-break><?sml-need 20></Para>
<Para>The following example removes the mount point for the fileset <Replaceable>user.vijay</Replaceable>.
The fileset itself is not deleted, just its mount point.  As a result, the
fileset is no longer visible or accessible in the DCE namespace.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>ls</Command>
</UserInput></ProgramListing></Para>
</InformalExample>
<InformalExample>
<Para><ProgramListing>pat&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;terry&ensp;&ensp;&ensp;&ensp;vijay
</ProgramListing></Para>
</InformalExample>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Literal>fts delmount vijay</Literal>
$ <Command>ls</Command>
</UserInput></ProgramListing></Para>
</InformalExample>
<InformalExample>
<Para><ProgramListing>pat&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;terry
</ProgramListing></Para>
</InformalExample>
</ListItem>
</OrderedList>
<IndexTerm Id="DFSAGR.FTAV.indx.142" SpanEnd="DFSAGR.FTAV.indx.129">
</Sect3>
</Sect2>
</Sect1>
</Chapter>
<!--+ 10/19/96 18:43:16
    | tagMorph:  $Id: ftavail.sgm,v 1.1.2.6 1996/12/15 23:01:54 wardr Exp $
    | tagMorph library:  $Id: ftavail.sgm,v 1.1.2.6 1996/12/15 23:01:54 wardr Exp $
    | sml-to-docbook:  1.23
    +-->
