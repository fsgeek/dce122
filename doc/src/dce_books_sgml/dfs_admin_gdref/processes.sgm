<!--
# @OSF_COPYRIGHT@
# 
# 
# HISTORY
# $Log: processes.sgm,v $
# Revision 1.1.2.6  1996/12/15  23:02:14  wardr
# 	{edit,R1.2.2}
# 	[D[DFiformatting problems before penultimate build
# 	[1996/12/15  23:00:45  wardr]
#
# Revision 1.1.2.5  1996/12/14  23:14:32  wardr
# 	{edit,R1.2.2}
# 	Fixed figure problems
# 	[1996/12/14  23:12:54  wardr]
# 
# Revision 1.1.2.4  1996/11/06  18:47:19  weir
# 	Cleaned up history
# 	[1996/11/06  18:46:15  weir]
# 
# Revision 1.1.2.3  1996/10/28  17:26:29  carrig
# 	{enh,R1.2.2}
# 	Ready for editor
# 	[1996/10/28  17:19:46  carrig]
# 
# Revision 1.1.2.2  1996/10/24  20:10:36  carrig
# 	{enh,R1.2.2}
# 	Fixed tables
# 	[1996/10/24  20:08:46  carrig]
# 
# Revision 1.1.2.1  1996/10/22  20:43:07  wardr
# 	{edit,R1.2.2}
# 	Initial checkin after sgml conversion
# 	[1996/10/22  20:41:22  wardr]
# 
# Revision 1.1.1.2  1996/10/22  20:41:22  wardr
# 	{edit,R1.2.2}
# 	Initial checkin after sgml conversion
# 
# $EndLog$
-->
<!---->
<!-- Fragment document type declaration subset:
ArborText, Inc., 1988-1993, v.4001
<!DOCTYPE Book PUBLIC "-//Davenport//DTD DocBook V2.4//EN" [
]>
-->
<!---->
<!-- COPYRIGHT NOTICE-->
<!-- Copyright (c) 1990, 1991, 1992, 1993 Open Software Foundation, Inc.-->
<!-- ALL RIGHTS RESERVED (DCE).  See the file named COPYRIGHT.DCE in the-->
<!-- src directory for the full copyright text.-->
<!---->
<!---->
<!-- HISTORY-->
<!-- Revision 1.1.8.1  1996/05/14  19:52:41  wardr-->
<!-- 	{enh,R1.2.2}-->
<!-- 	Removed changebars-->
<!-- 	[1996/05/14  19:51:24  wardr]-->
<!---->
<!-- Revision 1.1.6.16  1995/07/13  16:07:30  buckler-->
<!-- 	1.1 edits and Prentice Hall reformat-->
<!-- 	[1995/07/13  16:07:07  buckler]-->
<!-- -->
<!-- Revision 1.1.6.15  1994/08/03  21:15:57  jeff-->
<!-- 	More editorial stuff.-->
<!-- 	[1994/08/03  21:15:43  jeff]-->
<!-- -->
<!-- Revision 1.1.6.14  1994/08/02  12:54:50  jeff-->
<!-- 	{defect, 11180, R1.1}-->
<!-- 	Document DFS/NFS Secure Gateway.-->
<!-- 	[1994/08/02  12:54:23  jeff]-->
<!-- -->
<!-- Revision 1.1.6.13  1994/07/17  18:40:23  jeff-->
<!-- 	Editorial improvements.-->
<!-- 	[1994/07/17  18:39:40  jeff]-->
<!-- -->
<!-- Revision 1.1.6.12  1994/05/31  21:02:05  jeff-->
<!-- 	Small editorial improvements.-->
<!-- 	[1994/05/31  21:01:50  jeff]-->
<!-- -->
<!-- Revision 1.1.6.11  1994/05/19  20:49:51  jeff-->
<!-- 	{defect, 8118, R1.1}-->
<!-- 	Correct use of double quotes.-->
<!-- 	[1994/05/19  20:49:10  jeff]-->
<!-- -->
<!-- Revision 1.1.6.10  1994/05/10  20:11:44  jeff-->
<!-- 	Fix formatting error.-->
<!-- 	[1994/05/10  20:10:28  jeff]-->
<!-- -->
<!-- Revision 1.1.6.9  1994/05/06  13:52:22  jeff-->
<!-- 	{defect, 10552, R1.1}-->
<!-- 	Fix index entry inconsistencies.-->
<!-- 	[1994/05/06  13:50:40  jeff]-->
<!-- -->
<!-- Revision 1.1.6.8  1994/04/28  22:21:24  jeff-->
<!-- 	{defect, 10439, R1.1}-->
<!-- 	Correct cross-references for reorganization of DFS documentation.-->
<!-- 	[1994/04/28  22:15:14  jeff]-->
<!-- -->
<!-- Revision 1.1.6.7  1993/11/10  20:05:49  zahn-->
<!-- 	CR5778 had two starting change bars.  I removed-->
<!-- 	one of them.-->
<!-- 	[1993/11/10  20:05:17  zahn]-->
<!-- -->
<!-- Revision 1.1.6.6  1993/10/15  15:00:53  jeff-->
<!-- 	{def,9132,R1.0.3}-->
<!-- 	The protections set and checked by the bosserver are only defaults.-->
<!-- 	[1993/10/15  15:00:38  jeff]-->
<!-- -->
<!-- Revision 1.1.6.5  1993/09/27  03:26:22  tmw-->
<!-- 	Added index entries for second version of master index.-->
<!-- 	[1993/09/27  03:23:36  tmw]-->
<!-- -->
<!-- Revision 1.1.6.4  1993/09/16  11:29:32  kdu-->
<!-- 	{def,5778,R1.0.3}-->
<!-- 	Short forms of machine names.-->
<!-- 	[1993/09/16  11:29:02  kdu]-->
<!-- -->
<!-- Revision 1.1.6.3  1993/08/11  00:04:09  jeff-->
<!-- 	Changed versions for defect fixes from 1.0.2A to 1.0.3.-->
<!-- 	[1993/08/11  00:03:30  jeff]-->
<!-- -->
<!-- Revision 1.1.6.2  1993/07/30  17:54:57  kdu-->
<!-- 	{def,8386,R1.0.3}-->
<!-- 	Incorporate OSF editorial comments into DFS Admin Guide and related-->
<!-- 	documentation.-->
<!-- 	[1993/07/30  17:53:03  kdu]-->
<!-- -->
<!-- Revision 1.1.4.16  1993/02/21  22:54:11  jeff-->
<!-- 	Fix for defect 7219, review comments.-->
<!-- 	[1993/02/21  22:53:46  jeff]-->
<!-- -->
<!-- Revision 1.1.4.15  1993/02/05  20:36:02  jeff-->
<!-- 	Fix for defect 7135, change key file to keytab file.-->
<!-- 	[1993/02/05  20:11:59  jeff]-->
<!-- -->
<!-- Revision 1.1.4.14  1993/02/04  01:49:51  jeff-->
<!-- 	Fix for defect 7073.-->
<!-- 	[1993/02/04  01:49:26  jeff]-->
<!-- -->
<!-- Revision 1.1.4.13  1993/01/28  19:05:28  dbelch-->
<!-- 	Embedding copyright notice-->
<!-- 	[1993/01/28  18:29:25  dbelch]-->
<!-- -->
<!-- Revision 1.1.4.12  1993/01/27  21:09:26  buckler-->
<!-- 	Fixed cross-refs and figure calls for new book org-->
<!-- 	[1993/01/27  21:06:50  buckler]-->
<!-- -->
<!-- Revision 1.1.4.11  1993/01/08  15:41:01  jeff-->
<!-- 	Small addition for defect 6721.-->
<!-- 	[1993/01/08  15:40:21  jeff]-->
<!-- -->
<!-- Revision 1.1.4.10  1993/01/08  15:27:36  jeff-->
<!-- 	Fix for defect 6721, correct bos restart documentation.-->
<!-- 	[1993/01/08  15:27:01  jeff]-->
<!-- -->
<!-- Revision 1.1.4.9  1992/11/14  16:36:45  jeff-->
<!-- 	Fix for defect 6021, changes to -file and -dir options.-->
<!-- 	[1992/11/14  16:36:17  jeff]-->
<!-- -->
<!-- Revision 1.1.4.8  1992/11/13  01:03:15  jeff-->
<!-- 	Fix for defect 5120, correct description of -localauth option.-->
<!-- 	[1992/11/13  01:02:45  jeff]-->
<!-- -->
<!-- Revision 1.1.4.7  1992/11/10  22:35:12  jeff-->
<!-- 	Fix for defect 5782, document bos uninstall -all option and-->
<!-- 	clarify functionality.-->
<!-- 	[1992/11/10  22:34:32  jeff]-->
<!-- -->
<!-- Revision 1.1.4.6  1992/11/09  14:21:56  jeff-->
<!-- 	Fix for defect 5783, provide bos install details.-->
<!-- 	[1992/11/09  14:21:30  jeff]-->
<!-- -->
<!-- Revision 1.1.4.5  1992/10/31  01:28:31  jeff-->
<!-- 	Fix for defect 5791, bos status command displays NoAuth message.-->
<!-- 	[1992/10/31  01:26:21  jeff]-->
<!-- -->
<!-- Revision 1.1.4.4  1992/10/30  21:38:42  jeff-->
<!-- 	Fix for defect 4782, Update Server clarified for bos install/uninstall.-->
<!-- 	[1992/10/30  21:38:03  jeff]-->
<!-- -->
<!-- Revision 1.1.4.3  1992/10/29  00:21:53  jeff-->
<!-- 	Fix for defect 5801, remove bos exec command from the documentation.-->
<!-- 	[1992/10/28  23:38:36  jeff]-->
<!-- -->
<!-- Revision 1.1.4.2  1992/08/26  12:09:54  weir-->
<!-- 	Removed change bars-->
<!-- 	[1992/08/26  11:53:24  weir]-->
<!-- -->
<!-- Revision 1.1.2.5  1992/07/04  16:55:59  jeff-->
<!-- 	Included that the status flags for processes are represented-->
<!-- 	in the BosConfig file as 1 and 0.-->
<!-- 	[1992/07/04  16:55:01  jeff]-->
<!-- -->
<!-- Revision 1.1.2.4  1992/05/12  15:59:11  jeff-->
<!-- 	Verified and/or modified italics and other editorial-->
<!-- 	aspects of the file.-->
<!-- 	[1992/05/12  14:54:51  jeff]-->
<!-- -->
<!-- Revision 1.1.2.3  1992/04/29  22:18:09  jeff-->
<!-- 	Added .zA/.zZ tags around -noauth/-localauth changes.-->
<!-- 	[1992/04/29  22:12:26  jeff]-->
<!-- -->
<!-- Revision 1.1.2.2  1992/04/29  19:00:10  jeff-->
<!-- 	Modified syntax and description of -noauth and -localauth options.-->
<!-- 	[1992/04/28  23:48:46  jeff]-->
<!-- -->
<!-- Revision 1.1  1992/01/29  16:14:47  damon-->
<!-- 	Initial revision-->
<!-- -->
<!---->
<!-- (c) Copyright 1991, Open Software Foundation, Inc.  ALL RIGHTS RESERVED-->
<!--no-op:  Copyright (C) 1989, 1991, Transarc Corporation-->
<!--no-op:  The Gulf Tower-->
<!--no-op:  707 Grant Street-->
<!--no-op:  Pittsburgh, PA  15219-->
<!-- CHANGED-->
<!-- 12-09-91:  Removed two index tags that appeared on the first page.-->
<!-- 12-09-91:  Changed Command to Parameter in the last line of the bos-->
<!--            status output for the upserver process in Section 5.4.2.-->
<!-- 12-10-91:  Removed an extraneous index tag that followed the heading-->
<!--            for Section 5.10 (it was printing in the index).-->
<!-- 12-10-91:  In Section 5.2.1, removed a MarkerStyle formatting line that-->
<!--            was printing in the middle of page 5-4.-->
<!-- 12-10-91:  In Section 5.4.1, added a paragraph break after "Interpreting-->
<!--            Output Results" (bottom of page 5-7).-->
<!-- 12-10-91:  In Section 5.4.2, added a paragraph break after "Interpreting-->
<!--            Output Results" (middle of page 5-9).-->
<!-- END CHANGED-->
<!--DOCUMENTSTYLE [12pt]{book}-->
<Chapter Id="DFSAGR.PROCS.div.1">
<Title>Monitoring and Controlling Server Processes</Title>
<IndexTerm Id="DFSAGR.PROCS.indx.1">
<Primary>BOS Server</Primary>
<Secondary>how to use</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.PROCS.indx.2">
<Primary>server machines</Primary>
<Secondary>controlling and monitoring processes</Secondary>
</IndexTerm>
<Para>To provide efficient and correct operation, the processes that are running on 
DFS server machines in a cell must be configured properly.  The Basic OverSeer
Server (BOS Server) continually monitors and, if necessary, restarts the
other server processes on a machine; you specify the processes that the BOS 
Server is to monitor.  The BOS Server runs on all DFS server machines.
</Para>
<Para>You also control server process status by issuing <Command>bos</Command> commands to
perform routine maintenance or to correct errors the BOS Server cannot correct
by itself.  This chapter explains how to define a server machine's processes
and how to start and stop them.  The BOS Server can monitor and control
processes other than DFS processes.  However, the information in this chapter
refers specifically to DFS server processes.
</Para>
<Para><IndexTerm Id="DFSAGR.PROCS.indx.3">
<Primary>BOS Server</Primary>
<Secondary>unsupported processes</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.PROCS.indx.4">
<Primary><Command>fxd</Command> process</Primary>
<Secondary>BOS Server control</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.PROCS.indx.5">
<Primary><Command>dfsd</Command> process</Primary>
<Secondary>BOS Server control</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.PROCS.indx.6">
<Primary><Command>dfsbind</Command> process</Primary>
<Secondary>BOS Server control</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.PROCS.indx.7">
<Primary><Command>dfsexport</Command> command</Primary>
<Secondary>BOS Server control</Secondary>
</IndexTerm>Do not use the BOS Server to control the following processes on a machine:
<Command>fxd</Command>, <Command>dfsd</Command>, <Command>dfsbind</Command>, or <Command>dfsexport</Command>.  The first two
processes spawn kernel threads that, if continually restarted, can eventually
result in system failure on the machine.  The last two processes are usually
executed only when a machine initially starts, and they must be started in
the proper sequence with respect to other processes.  It is recommended that
all four of these processes be started by including a line in the proper
initialization file (<Filename>/etc/rc</Filename> or its equivalent).
</Para>
<Sect1 Id="DFSAGR.PROCS.div.2">
<Title>Process Entries in the BosConfig File</Title>
<IndexTerm Id="DFSAGR.PROCS.indx.8">
<Primary>DFS servers</Primary>
<Secondary>restarting</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.PROCS.indx.9">
<Primary><Filename>BosConfig</Filename> file</Primary>
<Secondary>entries</Secondary>
</IndexTerm>
<Para>You define which processes the BOS Server monitors by creating process
entries in the <Symbol Role="Variable">dcelocal</Symbol><Filename>/var/dfs/BosConfig</Filename> file on the local disk
of each server machine.  The information in a process entry defines how the
process is to run.  You control the process status (<Literal>Run</Literal> or <Literal>NotRun</Literal>)
by changing the entry with <Command>bos</Command> commands.  When the BOS Server starts, it
creates a <Filename>BosConfig</Filename> file with no process entries if the file does not
already exist.
</Para>
<Para>The order in which process entries are added to or appear in the
<Filename>BosConfig</Filename> file is irrelevant.  The BOS Server restarts multiple processes
virtually simultaneously.  However, do not depend on one process starting before
another simply because its entry precedes that of the other process in the
<Filename>BosConfig</Filename> file.  The BOS Server has no control over how long a process
takes to start.
</Para>
<Caution>
<IndexTerm Id="DFSAGR.PROCS.indx.10">
<Primary><Filename>BosConfig</Filename> file</Primary>
<Secondary>editing</Secondary>
</IndexTerm>
<Para>Do not directly edit the information in the <Filename>BosConfig</Filename>
file; use only the commands described in this chapter to alter the file.
Directly editing the <Filename>BosConfig</Filename> file can result in changes to process
entries of which the BOS Server is unaware.  Such changes do not take effect
until the BOS Server is restarted and again reads the file.
</Para>
</Caution>
<Para>Each process entry includes the following information about its process:
</Para>
<ItemizedList>
<ListItem>
<Para>Its name.  The name that appears in the <Filename>BosConfig</Filename> file for a process is
the name used to refer to that process with any <Command>bos</Command> commands that require
a process name.
</Para>
</ListItem>
<ListItem>
<Para>Its type.  The type can be one of the following:
</Para>
<ItemizedList>
<ListItem>
<IndexTerm Id="DFSAGR.PROCS.indx.11">
<Primary><Command>simple</Command> process</Primary>
</IndexTerm>
<Para><Command>simple</Command>: A <Command>simple</Command> process is a continuous process that runs
independently of any other processes on a server machine.  All standard DFS
processes are <Command>simple</Command> processes.  This process has a single parameter:
the command to be executed.
<IndexTerm Id="DFSAGR.PROCS.indx.12">
<Primary>processes</Primary>
<Secondary>simple</Secondary>
</IndexTerm></Para>
</ListItem>
<ListItem>
<IndexTerm Id="DFSAGR.PROCS.indx.13">
<Primary><Literal>cron</Literal> process</Primary>
</IndexTerm>
<Para><Literal>cron</Literal>: A <Literal>cron</Literal> process, like a <Command>simple</Command> process, runs
independently of other processes; however, a <Literal>cron</Literal> process runs
periodically, not continuously.  This process has two parameters: the first
is the command that is to be executed; the second is the time that the 
command is to be executed.
</Para>
</ListItem>
</ItemizedList>
</ListItem>
<ListItem>
<Para>Its status flag.  Status flags are for internal use only and do not appear in
any output.  The flag can have one of the following values:
</Para>
<ItemizedList>
<ListItem>
<Para><Literal>Run</Literal>, meaning the process needs to run whenever possible.  The BOS Server
starts the process initially at reboot and restarts it automatically if it 
fails at any time.  This flag is used to keep a process running at all times; 
for example, to ensure that the <Command>ftserver</Command> process on a File Server 
machine runs continuously. (The <Literal>Run</Literal> status flag appears in the 
<Filename>BosConfig</Filename> file as a <Literal>1</Literal>.)
</Para>
</ListItem>
<ListItem>
<Para><Literal>NotRun</Literal>, meaning the process never runs.  The BOS Server never starts or
automatically restarts the process; the process runs only when you instruct 
the BOS Server to start it.  This flag is used to stop a process for an 
extended period of time; for example, to stop the <Command>upclient</Command> process from 
accessing new binary files while you test the current binaries. (The 
<Literal>NotRun</Literal> status flag appears in the <Filename>BosConfig</Filename> file as a <Literal>0</Literal>.)
</Para>
</ListItem>
</ItemizedList>
</ListItem>
<ListItem>
<Para>Its command parameters.  These parameters are used by the BOS Server to run the
process.
</Para>
</ListItem>
</ItemizedList>
<Para>The following output from the <Command>bos status</Command> command displays an entry from
the <Filename>BosConfig</Filename> file. (See Section 5.4 for more information about the
<Command>bos status</Command> command, which is used to list entries from the
<Filename>BosConfig</Filename> file.)
<?sml-break><?sml-point-size 11>
<!--no-op:  12-->
</Para>
<InformalExample>
<Para><ProgramListing>Instance ftserver, (type is simple) currently running normally.
Process last started at Fri Nov 22 05:36:02 1991 (1 proc starts)
Parameter 1 is `<Symbol Role="Variable">dcelocal</Symbol>/bin/ftserver'
</ProgramListing></Para>
</InformalExample>
<?sml-point-size 12>
<!--no-op:  14-->
<Para>It is possible for the BOS Server's memory state to change independently of
the <Filename>BosConfig</Filename> file.  The BOS Server checks the <Filename>BosConfig</Filename> file
whenever it starts or restarts, (in response to the <Command>bos restart</Command>
command, at the general restart time, or at system reboot).  At that time, the
BOS Server transfers information from the file into memory and does not read
the file again until it restarts.
</Para>
<Para><IndexTerm Id="DFSAGR.PROCS.indx.14">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Command>shutdown</Command></Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.PROCS.indx.15">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Command>startup</Command></Secondary>
</IndexTerm>Therefore, it is possible to use the <Command>bos shutdown</Command> command to stop a
running process, even though its status flag in the <Filename>BosConfig</Filename> file is
<Literal>Run</Literal>.  Similarly, you can use the <Command>bos startup</Command> command to start a
process running by setting its memory state status flag to <Literal>Run</Literal> without
setting its status flag in the file to <Literal>Run</Literal>.  The commands discussed in
this chapter can affect the BOS Server's memory state, the information in the
<Filename>BosConfig</Filename> file, or both.
</Para>
<Para><IndexTerm Id="DFSAGR.PROCS.indx.16">
<Primary>DFS servers</Primary>
<Secondary>starting and stopping</Secondary>
</IndexTerm><?sml-need 8>Starting or stopping certain processes, either temporarily or permanently, has
an effect on the other processes that run on the other server machines in your
cell.  For example, an <Command>upserver</Command> process must run on each System Control
machine and Binary Distribution machine.  If you start or stop the process on
one machine, you must start it on a replacement System Control or Binary
Distribution machine.  You must also modify the <Command>upclient</Command> processes on the
appropriate server machines so that they reference the new System Control 
or Binary Distribution machine.
<IndexTerm Id="DFSAGR.PROCS.indx.17" SpanEnd="DFSAGR.PROCS.indx.9"></Para>
</Sect1>
<Sect1 Id="DFSAGR.PROCS.div.3">
<Title>Standard Information in this Chapter</Title>
<Para>The following subsections present options and arguments common to many of the 
commands described in this chapter.  It also presents some common operations 
that are explained in the chapter or that can be useful when performing other
operations.
</Para>
<Sect2 Id="DFSAGR.PROCS.div.4">
<Title>Standard Options and Arguments</Title>
<Para>The following options and arguments are used with many of the commands
described in this chapter.  If an option or argument is not described with a
command in the text, a description of it appears here. (See Part 2 of this
guide and reference for complete details about each command.)
</Para>
<ItemizedList>
<ListItem>
<Para>The <Option>server</Option> <Symbol Role="Variable">machine</Symbol> option specifies the server machine on
which the command is to execute.  This option names the machine whose process
or file is to be affected.  The BOS Server on this machine executes the command.
This option can be used to specify a server machine in a foreign cell.
</Para>
<Para>To run a privileged <Command>bos</Command> command (a <Command>bos</Command> command that requires the
issuer to have some level of administrative privilege) using a privileged
identity, always specify the full DCE pathname of the machine (for example,
<Replaceable>/.../abc.com/hosts/fs1</Replaceable>).
</Para>
<Para>To run an unprivileged <Command>bos</Command> command, you can use any of the following to
specify the machine:
</Para>
<ItemizedList>
<ListItem>
<Para>The machine's DCE pathname (for example, <Replaceable>/.../abc.com/hosts/fs1</Replaceable>)
</Para>
</ListItem>
<ListItem>
<Para>The machine's host name (for example, <Literal>fs1.abc.com</Literal> or <Literal>fs1</Literal>)
</Para>
</ListItem>
<ListItem>
<Para>The machine's IP address (for example, <Literal>11.22.33.44</Literal>)
</Para>
</ListItem>
</ItemizedList>
<Note>
<IndexTerm Id="DFSAGR.PROCS.indx.18">
<Primary>authorization checking</Primary>
<Secondary>unprivileged identity</Secondary>
</IndexTerm>
<Para>If you specify the host name or IP address of the machine, the command
executes using the unprivileged identity <Literal>nobody</Literal> (the equivalent of
running the command with the <Option>noauth</Option> option); unless DFS authorization
checking is disabled on the specified machine, a privileged <Command>bos</Command> command
issued in this manner fails.  If you specify the machine's host name or IP
address, the command displays the following message (using the <Option>noauth</Option>
option suppresses the message):
<?sml-break><?sml-point-size 11>
<!--no-op:  12-->
</Para>
<InformalExample>
<Para><ProgramListing>bos:  WARNING: short form for server used; no 
authentication information will be sent to the bosserver
</ProgramListing></Para>
</InformalExample>
<?sml-point-size 12>
<!--no-op:  14-->
</Note>
</ListItem>
<ListItem>
<Para>The <Option>process</Option> <Symbol Role="Variable">server_process</Symbol> option is the process to be created, 
started, or stopped.  The following names are recommended for DFS server 
processes, but a process can be given any name:
</Para>
<ItemizedList>
<ListItem>
<Para><Command>ftserver</Command>: The Fileset Server process
</Para>
</ListItem>
<ListItem>
<Para><Command>flserver</Command>: The Fileset Location Server process
</Para>
</ListItem>
<ListItem>
<Para><Command>upclient</Command>: The client portion of the Update Server that transfers binary
files (such as those for server processes) from <Symbol Role="Variable">dcelocal</Symbol><Filename>/bin</Filename> and
transfers configuration files (such as administrative lists) from
<Symbol Role="Variable">dcelocal</Symbol><Filename>/var/dfs</Filename> on the System Control machine
</Para>
</ListItem>
<ListItem>
<Para><Command>upserver</Command>: The server portion of the Update Server
</Para>
</ListItem>
<ListItem>
<Para><Command>repserver</Command>: The Replication Server process
</Para>
</ListItem>
<ListItem>
<Para><Command>bakserver</Command>: The Backup Server process
</Para>
</ListItem>
</ItemizedList>
</ListItem>
<ListItem>
<Para>The <Option>cmd</Option> <Symbol Role="Variable">cmd_line</Symbol> option specifies the commands and parameters
that the BOS Server uses to create a process.  For a <Command>simple</Command> process, only
one command line specifying the binary file's complete pathname is necessary.
This can be the pathname of a DFS command or any other command to be executed.
For example, the command <Literal>"</Literal><Symbol Role="Variable">dcelocal</Symbol><Literal>/bin/fts clonesys"</Literal> backs up every
fileset in the file system.  As this example shows, you must enclose the
parameter in "&thinsp;" (double quotes) if it contains spaces, and you must specify
the complete pathname for the command.
</Para>
<Para>For a <Literal>cron</Literal> process, <Symbol Role="Variable">cmd_line</Symbol> specifies the following two command
parameters: 
</Para>
<ItemizedList>
<ListItem>
<Para>The <Symbol Role="Variable">first parameter</Symbol> is the command that the BOS Server executes.  As with
the sole parameter for a <Command>simple</Command> process, this parameter can be the 
complete pathname of the binary file for a DFS command or any other command 
to be executed.  As the example for the <Command>simple</Command> process shows, you must 
enclose the parameter in double quotes if it contains spaces, and you must 
specify the complete pathname for the command.
</Para>
</ListItem>
<ListItem>
<Para>The <Symbol Role="Variable">second parameter</Symbol> specifies the time at which the BOS Server is to
execute the command.  This parameter must also be surrounded with double quotes
if it contains spaces.  Valid values are
</Para>
<ItemizedList>
<ListItem>
<Para><Literal>never</Literal>
</Para>
<Para>The command does not execute, but the process entry remains in
the <Filename>BosConfig</Filename> file.
</Para>
</ListItem>
<ListItem>
<Para><Literal>now</Literal>
</Para>
<Para>The command executes immediately, but it never executes again; the
process entry is removed from the <Filename>BosConfig</Filename> file after the command is
executed.
</Para>
</ListItem>
<ListItem>
<Para>A specific day of the week at a specific time (<Literal>"</Literal><Symbol Role="Variable">day hh:mm</Symbol><Literal>"</Literal>).  The
command executes weekly at the specified day and time.
</Para>
</ListItem>
<ListItem>
<Para>A specific time (<Symbol Role="Variable">hh:mm</Symbol>).  The command executes daily at the specified
time.
</Para>
<Para>If you specify a day, it must appear first, in lowercase letters. You can enter
either the entire name or just the first three letters; for example,
<Literal>sunday</Literal> or <Literal>sun</Literal>.  When indicating a time, separate hours from minutes
with a colon.  You can use 24-hour time or 1:00 through 12:00 with <Literal>am</Literal> or
<Literal>pm</Literal> (for example, <Literal>14:30</Literal> or <Literal>"2:30 pm"</Literal>).  You must enclose the
entry in "&thinsp;" (double quotes) if it contains spaces (for example, <Literal>"sun 2:30
pm"</Literal>).
</Para>
</ListItem>
</ItemizedList>
</ListItem>
</ItemizedList>
<?sml-break>
<?sml-need 15>
</ListItem>
<ListItem>
<Para>The <Option>noauth</Option> option directs the <Command>bos</Command> program to use the unprivileged
identity <Literal>nobody</Literal> as the identity of the issuer of the command.  If DFS
authorization checking has been disabled with the <Command>bos setauth</Command> command,
the identity <Literal>nobody</Literal> has the necessary privileges to perform any
operation. (See Chapter 4 for information about disabling DFS authorization
checking.) If you use this option, do not use the <Option>localauth</Option> option.
</Para>
</ListItem>
<ListItem>
<Para>The <Option>localauth</Option> option directs the <Command>bos</Command> program to use the DFS
server principal of the machine on which the command is issued as the identity
of the issuer.  Each DFS server machine has a DFS server principal stored in
the Registry Database.  A DFS server principal is a unique, fully qualified
principal name that ends with the string <Literal>dfs-server</Literal>; for example,
<Replaceable>/.../abc.com/hosts/fs1/dfs-server</Replaceable>.  Do not confuse a machine's DFS
server principal with its unique <Literal>self</Literal> identity. (See Chapter 6 for
information about DFS server principals.)
</Para>
<Para>Use this option only if the command is issued from a DFS server machine. You
must be logged into the server machine as <Literal>root</Literal> for this option to work.
If you use this option, do not use the <Option>noauth</Option> option.
</Para>
</ListItem>
</ItemizedList>
<Para>The <Option>noauth</Option> and <Option>localauth</Option> options are always optional.
</Para>
</Sect2>
<Sect2 Id="DFSAGR.PROCS.div.5">
<Title>Standard Commands and Operations</Title>
<Para>Some of the following commands and operations are described in many places in
this chapter; others can prove useful when the operations in this chapter are
performed.  If a command or operation is described in detail here, it is not
described in depth in later sections of this chapter where it is used.
</Para>
<Sect3 Id="DFSAGR.PROCS.div.6">
<Title>Determining Administrative Privilege</Title>
<IndexTerm Id="DFSAGR.PROCS.indx.19">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary>determining appropriate privileges</Secondary>
</IndexTerm>
<Para>To perform the majority of <Literal>bos commands</Literal>, the issuer must be listed in the
<Filename>admin.bos</Filename> file on the machine used in the command.  To determine the
members of a list, issue the <Command>bos lsadmin</Command> command:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>bos lsadmin -server </Command><Symbol Role="Variable">machine</Symbol> <Option>adminlist</Option> <Replaceable>admin.bos</Replaceable>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>adminlist</Option> <Filename>admin.bos</Filename> option specifies that members of the 
<Filename>admin.bos</Filename> file are to be listed.
</Para>
</Sect3>
<Sect3 Id="DFSAGR.PROCS.div.7">
<Title>Examining Log Files</Title>
<IndexTerm Id="DFSAGR.PROCS.indx.20">
<Primary>BOS Server</Primary>
<Secondary>log files</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.PROCS.indx.21">
<Primary>log files</Primary>
<Secondary>viewing (DFS)</Secondary>
</IndexTerm>
<Para>The <Command>bosserver</Command> process and most of the server processes it monitors 
generate log files.  The log files record execution messages and error 
messages generated by the server processes as they execute.  By default, the 
processes write the files to the <Symbol Role="Variable">dcelocal</Symbol><Filename>/var/dfs/adm</Filename> directory, 
although some server processes can be instructed to write their log files to a 
different directory.  A list of the log files and the processes that write 
them follows:
</Para>
<ItemizedList>
<ListItem>
<Para>The <Filename>BakLog</Filename> file is generated by the Backup Server process on each Backup
Database machine.
</Para>
</ListItem>
<ListItem>
<Para>The <Filename>BosLog</Filename> file is generated by the BOS Server process on each server
machine.
</Para>
</ListItem>
<ListItem>
<Para>The <Literal>DfsgwLog</Literal> file is generated by the Gateway Server process on each
Gateway Server machine.
</Para>
</ListItem>
<ListItem>
<Para>The <Filename>FlLog</Filename> file is generated by the Fileset Location Server process on 
each Fileset Database machine.
</Para>
</ListItem>
<ListItem>
<Para>The <Filename>FtLog</Filename> file is generated by the Fileset Server process on each File
Server machine.
</Para>
</ListItem>
<ListItem>
<Para>The <Filename>RepLog</Filename> file is generated by the Replication Server process on each
server machine.
</Para>
</ListItem>
<ListItem>
<Para>The <Literal>UpLog</Literal> file is generated by the <Command>upserver</Command> process on each server
machine that is running the server portion of the Update Server.
</Para>
</ListItem>
</ItemizedList>
<Para><IndexTerm Id="DFSAGR.PROCS.indx.22">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Command>getlog</Command></Secondary>
</IndexTerm>The <Command>bos getlog</Command> command can be used to examine any of these log files,
including the <Literal>.old</Literal> versions created by the associated server processes.
By default, the command looks in the <Symbol Role="Variable">dcelocal</Symbol><Filename>/var/dfs/adm</Filename> directory
for the log file that it is to display.  It is not necessary to specify the full
pathname of a log file if it resides in the default directory.  However, if the
file resides elsewhere, the full pathname of the log file must be provided.
</Para>
<Para><?sml-need 15>In addition, no privilege is necessary to view a log file that resides in the
default directory.  If the file resides in a different directory, the issuer of
the command must be listed in the <Filename>admin.bos</Filename> file on the machine on which
the file is located, which is specified by the <Option>server</Option> option.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>bos getlog -server </Command><Symbol Role="Variable">machine</Symbol> <Option>file</Option> <Symbol Role="Variable">log_file</Symbol>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>file</Option> <Symbol Role="Variable">log_file</Symbol> option specifies the log file that is to be 
displayed.  A simple filename is sufficient for a log file that resides in the
<Symbol Role="Variable">dcelocal</Symbol><Filename>/var/dfs/adm</Filename> directory.  A full pathname is required for a
log file that resides in a different directory.
<IndexTerm Id="DFSAGR.PROCS.indx.23" SpanEnd="DFSAGR.PROCS.indx.22"><IndexTerm Id="DFSAGR.PROCS.indx.24" SpanEnd="DFSAGR.PROCS.indx.20"><IndexTerm Id="DFSAGR.PROCS.indx.25" SpanEnd="DFSAGR.PROCS.indx.21"></Para>
</Sect3>
</Sect2>
</Sect1>
<Sect1 Id="DFSAGR.PROCS.div.8">
<Title>Creating and Starting Processes</Title>
<IndexTerm Id="DFSAGR.PROCS.indx.26">
<Primary><Filename>BosConfig</Filename> file</Primary>
<Secondary>adding entries</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.PROCS.indx.27">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Command>create</Command></Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.PROCS.indx.28">
<Primary>DFS servers</Primary>
<Secondary>creating</Secondary>
</IndexTerm>
<Para>To start a new process on a server machine, use the <Command>bos create</Command> command
to alter the <Filename>BosConfig</Filename> file.  This adds a process entry for the new
process to the <Filename>BosConfig</Filename> file and sets the status flag for the process
to <Literal>Run</Literal> in both the file and the BOS Server's memory, making the effect
immediate.  You can use the command to create both <Command>simple</Command> and <Literal>cron</Literal>
processes.
</Para>
<Para>The server process name included in this command is used by the BOS Server to
reference the process.  It is also used in any subsequent <Command>bos</Command> commands
that require a process name.  The BOS Server adds it to the <Filename>BosConfig</Filename>
file when it creates the process's entry.  The name does not appear in process
listings generated with the <Literal>ps</Literal> command or its equivalent.
</Para>
<Sect2 Id="DFSAGR.PROCS.div.9">
<Title>Creating and Starting a simple Process</Title>
<IndexTerm Id="DFSAGR.PROCS.indx.29">
<Primary><Command>simple</Command> process</Primary>
</IndexTerm>
<Para>To create and start a <Command>simple</Command> process, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Verify that you have the necessary privilege.  You must be included in the 
<Filename>admin.bos</Filename> file on the machine where the process is to be started. 
If necessary, issue the <Command>bos lsadmin</Command> command to check.
<?sml-break><?sml-need 15></Para>
</ListItem>
<ListItem>
<Para>Create an entry for the <Command>simple</Command> process in the <Filename>BosConfig</Filename> file, and
start it:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>bos create -server </Command><Symbol Role="Variable">machine</Symbol> <Option>process</Option> <Symbol Role="Variable">server_process</Symbol> <Option>type</Option> &bsol;
<Replaceable>simple</Replaceable> <Option>cmd </Option><Symbol Role="Variable">cmd_line</Symbol>...
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>type</Option> <Literal>simple</Literal> option specifies this as a <Command>simple</Command> process.
</Para>
<Para>Following is an example <Command>simple</Command> process entry named <Command>flserver</Command> on the
machine named <Literal>fs1</Literal>:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Literal>bos create /.../abc.com/hosts/fs1 flserver simple </Literal><Symbol Role="Variable">dcelocal</Symbol><Filename>/bin/flserver</Filename>
</UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
</OrderedList>
</Sect2>
<Sect2 Id="DFSAGR.PROCS.div.10">
<Title>Creating and Starting a cron Process</Title>
<IndexTerm Id="DFSAGR.PROCS.indx.30">
<Primary><Literal>cron</Literal> process</Primary>
</IndexTerm>
<Para>To create and start a <Literal>cron</Literal> process, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Verify that you have the necessary privilege.  You must be included in the 
<Filename>admin.bos</Filename> file on the machine where the process is to be started. 
If necessary, issue the <Command>bos lsadmin</Command> command to check.
</Para>
</ListItem>
<ListItem>
<Para>Create an entry for the <Literal>cron</Literal> process in the <Filename>BosConfig</Filename> file, and
start it:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>bos create -server </Command><Symbol Role="Variable">machine</Symbol> <Option>process</Option> <Symbol Role="Variable">server_process</Symbol> <Option>type</Option> &bsol;
<Replaceable>cron</Replaceable> <Option>cmd </Option><Symbol Role="Variable">cmd_line</Symbol>...
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>type</Option> <Literal>cron</Literal> option specifies this as a <Literal>cron</Literal> process.
</Para>
<Para>Following is a sample <Literal>cron</Literal> process entry named <Command>backup</Command> on the
machine named <Literal>fs1</Literal>.  The <Option>localauth</Option> option allows the
unauthenticated process to use the DFS server principal of <Literal>fs1</Literal> to
execute the privileged <Command>fts clonesys</Command> command.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Literal>bos create /.../abc.com/hosts/fs1 backup cron &bsol;
"</Literal><Symbol Role="Variable">dcelocal</Symbol><Literal>/bin/fts clonesys -s /.../abc.com/hosts/fs1 -localauth" 5:30</Literal>
</UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
</OrderedList>
<IndexTerm Id="DFSAGR.PROCS.indx.31" SpanEnd="DFSAGR.PROCS.indx.26">
<IndexTerm Id="DFSAGR.PROCS.indx.32" SpanEnd="DFSAGR.PROCS.indx.30">
<IndexTerm Id="DFSAGR.PROCS.indx.33" SpanEnd="DFSAGR.PROCS.indx.28">
</Sect2>
</Sect1>
<Sect1 Id="DFSAGR.PROCS.div.11">
<Title>Listing Status and Machine Information</Title>
<IndexTerm Id="DFSAGR.PROCS.indx.34">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Command>status</Command></Secondary>
</IndexTerm>
<Para>Use the <Command>bos status</Command> command to check the processes that are running on 
a server machine.  The command causes the BOS Server to probe and determine 
the status of each process on the machine.  It then displays output about the 
status of each process.  It also displays appropriate messages if DFS 
authorization checking is disabled on the machine or if the machine's 
<Symbol Role="Variable">dcelocal</Symbol> directory or its contents are not protected appropriately.
</Para>
<Para>The process information provided by the <Command>bos status</Command> command enables you 
to determine the role of the server machine (File Server machine, System 
Control machine, Binary Distribution machine, Fileset Database machine, 
Backup Database machine, or multiple machine roles).  When you are using the 
<Command>bos status</Command> command to determine server machine roles, include the 
<Option>long</Option> option to provide more detailed output.
</Para>
<Sect2 Id="DFSAGR.PROCS.div.12">
<Title>Checking the Statuses of Processes on a Server Machine</Title>
<IndexTerm Id="DFSAGR.PROCS.indx.35">
<Primary>server machines</Primary>
<Secondary>checking process status</Secondary>
</IndexTerm>
<Para>Enter the <Command>bos status</Command> command to check the statuses of the processes on
a server machine.  Use the <Option>process</Option> option to display the statuses of
specific processes on the specified server machine, or omit the option to
display the statuses of all processes on the machine.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>bos status -server </Command><Symbol Role="Variable">machine</Symbol> [<Option>process </Option><Symbol Role="Variable">server_process</Symbol>...] [<Option>long</Option>]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>long</Option> option indicates that more detailed information about the 
specified processes is to be displayed.
</Para>
<Para>The command first displays the following line if DFS authorization checking
is disabled on the machine (it does not display the line if DFS authorization
checking is enabled):
</Para>
<InformalExample>
<Para><ProgramListing>Bosserver reports machine is not checking authorization.
</ProgramListing></Para>
</InformalExample>
<Para>It then displays the following line if the BOS Server finds that the
<Symbol Role="Variable">dcelocal</Symbol> directory or a directory or file beneath it on the machine
has protections that the BOS Server believes are inappropriate:
</Para>
<InformalExample>
<Para><ProgramListing>Bosserver reports inappropriate access on server directories.
</ProgramListing></Para>
</InformalExample>
<Para>The BOS Server displays this message if the UNIX mode bits on the
<Symbol Role="Variable">dcelocal</Symbol> directory and its contents do not enforce certain protections;
for example, the message can indicate that users who should not be able to
write to the <Symbol Role="Variable">dcelocal</Symbol> directory and its subdirectories have write access.
The BOS Server also displays the message if a directory or file is not owned by
the appropriate user (for example, <Literal>root</Literal>).
</Para>
<Para>The BOS Server displays the message as a courtesy to the user. It does nothing
to change the protections, nor does it fail if the protections are violated.
(See the description of the <Command>bos status</Command> command in Part 2 of this guide
and reference for information about the protections the BOS Server wants to
see enforced.)
</Para>
<Note>
<Para>Your vendor can modify the default protections enforced by the BOS Server.
Refer to your vendor's documentation to determine the protections that apply
for your version of DFS.
</Para>
</Note>
<Para>The command then displays status information about the processes on the
machine.  The possible statuses for any process include
</Para>
<ItemizedList>
<ListItem>
<Para><ComputerOutput>currently running normally</ComputerOutput>
</Para>
<Para>For a <Command>simple</Command> process, this means
it is currently running; for a <Literal>cron</Literal> process, this means it is scheduled
to run.
</Para>
</ListItem>
<ListItem>
<Para><ComputerOutput>temporarily enabled</ComputerOutput>
</Para>
<Para>The status flag for the process in the
<Filename>BosConfig</Filename> file is <Literal>NotRun</Literal>, but the process has been enabled with
the <Command>bos startup</Command> or <Command>bos restart</Command> command.
</Para>
</ListItem>
<ListItem>
<Para><ComputerOutput>temporarily disabled</ComputerOutput>
</Para>
<Para>Either the <Command>bos shutdown</Command> command was used
to stop the process, or the BOS Server quit trying to restart the process, in
which case the message <ComputerOutput>stopped for too many errors</ComputerOutput> also appears.
</Para>
</ListItem>
<ListItem>
<Para><ComputerOutput>disabled</ComputerOutput>
</Para>
<Para>The status flag for the process in the <Filename>BosConfig</Filename> file
is <Literal>NotRun</Literal>, and the process has not been enabled. 
</Para>
</ListItem>
<ListItem>
<Para><ComputerOutput>has core file</ComputerOutput>
</Para>
<Para>The process failed or produced a core file at some
time.  This message can appear with any of the other messages.  Core files are
stored in <Symbol Role="Variable">dcelocal</Symbol><Filename>/var/dfs/adm</Filename>.  The name of the core file indicates
the process that failed; for example, <Literal>core.ftserver</Literal>.
</Para>
</ListItem>
</ItemizedList>
<Para>The output for a <Literal>cron</Literal> process includes an auxiliary status message,
reporting when the command is next scheduled to execute.
</Para>
<Para>The following additional information is displayed when the <Option>long</Option> option
is used:
</Para>
<ItemizedList>
<ListItem>
<Para>The process type (<Command>simple</Command> or <Literal>cron</Literal>).
</Para>
</ListItem>
<ListItem>
<Para>How many <Literal>proc start</Literal> procedures occurred; <Literal>proc start</Literal>
procedures occur when the process is
started or restarted by the current BOS Server.
</Para>
</ListItem>
<ListItem>
<Para>The time of the last <Literal>proc start</Literal>.
</Para>
</ListItem>
<ListItem>
<Para>The exit time and error exit time when the process last failed.  This appears
only if the process failed while the BOS Server was running. (Provided the BOS
Server was running both when the process was started and when it failed, the
BOS Server can provide this information for any process that has an entry in
the <Filename>BosConfig</Filename> file.)
</Para>
</ListItem>
<ListItem>
<Para>The command and its options that are used by the BOS Server to start the 
process.
</Para>
</ListItem>
</ItemizedList>
<Para>The following examples show two executions of the <Command>bos status</Command> command on
the same server machine.  The first example shows the output displayed when the
<Option>long</Option> option is omitted from the command.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Literal>bos status /.../abc.com/hosts/fs4</Literal>
</UserInput></ProgramListing></Para>
</InformalExample>
<?sml-break>
<?sml-point-size 11>
<!--no-op:  12-->
<InformalExample>
<Para><ProgramListing>Instance ftserver, currently running normally.
</ProgramListing></Para>
</InformalExample>
<?sml-point-size 12>
<!--no-op:  14-->
<Para>The second example shows the output displayed when the <Option>long</Option> option is
included with the command.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Literal>bos status /.../abc.com/hosts/fs4 -long</Literal>
</UserInput></ProgramListing></Para>
</InformalExample>
<?sml-break>
<?sml-point-size 11>
<!--no-op:  12-->
<InformalExample>
<Para><ProgramListing>Instance ftserver, (type is simple) currently running normally.
Process last started at Fri Nov 22 05:36:02 1991 (1 proc starts)
Parameter 1 is `<Symbol Role="Variable">dcelocal</Symbol>/bin/ftserver'
</ProgramListing></Para>
</InformalExample>
<?sml-point-size 12>
<!--no-op:  14-->
<Para><IndexTerm Id="DFSAGR.PROCS.indx.36" SpanEnd="DFSAGR.PROCS.indx.35"></Para>
</Sect2>
<Sect2 Id="DFSAGR.PROCS.div.13">
<Title>Determining Server Machine Roles</Title>
<IndexTerm Id="DFSAGR.PROCS.indx.37">
<Primary>machines</Primary>
<Secondary>roles in DFS</Secondary>
</IndexTerm>
<Para>The following instructions can help you use the <Command>bos status</Command> command to
determine which server machines are filling the various machine roles in your
cell or domain.  The instructions assume that your cell is configured 
according to the installation and configuration instructions for your system; 
for example, they assume that all machines except the System Control machine 
are running a client portion of the Update Server that references the 
<Symbol Role="Variable">dcelocal</Symbol><Filename>/var/dfs</Filename> directory on the System Control machine.  If your 
server machines are not configured in this manner, these instructions may not 
help you determine the roles of the machines.
</Para>
<Para><IndexTerm Id="DFSAGR.PROCS.indx.38">
<Primary>System Control machines</Primary>
<Secondary>how to identify</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.PROCS.indx.39">
<Primary>Binary Distribution machines</Primary>
</IndexTerm>To determine whether a server machine is a System Control machine, a Binary
Distribution machine, or neither of the two types of machines, issue the
<Command>bos status</Command> command on the machine with <Command>upserver</Command> as the argument
for the <Option>process</Option> option.  The output from the command indicates only
whether the machine is a System Control machine, a Binary Distribution machine,
or neither of the two; a machine that fits neither of the two roles can be a
File Server machine, a Fileset Database machine, a Backup Database machine, or
any combination of the three.
</Para>
<Para>To learn which machine is the System Control machine, issue the <Command>bos
status</Command> command on any server machine, using <Command>upclient</Command> as the argument
for the <Option>process</Option> option.  The output for the <Command>upclient</Command> process used
to obtain administrative lists from the System Control machine includes the
<Command>upclient</Command> command used to start the process.  The first parameter of the
command is the name of the System Control machine; the second parameter is the
pathname to the administrative lists on that machine; for example, 
<Symbol Role="Variable">dcelocal</Symbol><Filename>/var/dfs</Filename>.
</Para>
<Para>To learn which machine is a Binary Distribution machine, issue the <Command>bos
status</Command> command on a server machine of the CPU/OS type you wish to check,
again using <Command>upclient</Command> as the argument for <Option>process</Option>.  The output for
the <Command>upclient</Command> process used to obtain binary files from the Binary
Distribution machine includes the <Command>upclient</Command> command used to start the
process.  The first parameter of the command is the name of the Binary
Distribution machine; the second parameter is the pathname to the binary 
files on that machine; for example, <Symbol Role="Variable">dcelocal</Symbol><Filename>/bin</Filename>.
</Para>
<Para>When using the <Command>bos status</Command> command to determine machine roles, always use
the <Option>long</Option> option to display more detailed information about the specified
processes.  You must use the <Option>long</Option> option to determine the exact role of a
server machine.
</Para>
<Para>The following examples illustrate how to determine whether a machine is
a System Control machine or a Binary Distribution machine.  The output for a
server machine that is neither a System Control machine nor a Binary
Distribution machine displays that no <Command>upserver</Command> is running.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Literal>bos status /.../abc.com/fs1 upserver -long</Literal>
</UserInput></ProgramListing></Para>
</InformalExample>
<?sml-break>
<?sml-point-size 11>
<!--no-op:  12-->
<InformalExample>
<Para><ProgramListing>bos: failed to get instance info for `upserver' (no such entity)
</ProgramListing></Para>
</InformalExample>
<?sml-point-size 12>
<!--no-op:  14-->
<Para>The output for a System Control machine includes references to the
<Command>upserver</Command> process and the <Symbol Role="Variable">dcelocal</Symbol><Filename>/var/dfs</Filename> directory, where
administrative lists are stored.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Literal>bos status /.../abc.com/fs2 upserver -long</Literal>
</UserInput></ProgramListing></Para>
</InformalExample>
<?sml-break>
<?sml-point-size 11>
<!--no-op:  12-->
<InformalExample>
<Para><ProgramListing>Instance upserver, (type is simple) currently running normally.
Process last started at Mon Nov 4 05:23:54 1991 (1 proc starts)
Parameter 1 is `<Symbol Role="Variable">dcelocal</Symbol>/bin/upserver <Symbol Role="Variable">dcelocal</Symbol>/var/dfs'
</ProgramListing></Para>
</InformalExample>
<?sml-point-size 12>
<!--no-op:  14-->
<Para>The output for a Binary Distribution machine includes references to the
<Command>upserver</Command> process and the <Symbol Role="Variable">dcelocal</Symbol><Filename>/bin</Filename> directory, where binary
files for processes and programs are stored.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Literal>bos status /.../abc.com/fs3 upserver -long</Literal>
</UserInput></ProgramListing></Para>
</InformalExample>
<?sml-break>
<?sml-point-size 11>
<!--no-op:  12-->
<InformalExample>
<Para><ProgramListing>Instance upserver, (type is simple) currently running normally.
Process last started at Mon Nov 4 05:16:31 1991 (1 proc starts)
Parameter 1 is `<Symbol Role="Variable">dcelocal</Symbol>/bin/upserver <Symbol Role="Variable">dcelocal</Symbol>/bin'
</ProgramListing></Para>
</InformalExample>
<?sml-point-size 12>
<!--no-op:  14-->
<IndexTerm Id="DFSAGR.PROCS.indx.40" SpanEnd="DFSAGR.PROCS.indx.37">
<IndexTerm Id="DFSAGR.PROCS.indx.41" SpanEnd="DFSAGR.PROCS.indx.34">
</Sect2>
</Sect1>
<Sect1 Id="DFSAGR.PROCS.div.14">
<Title>Stopping and Removing Processes</Title>
<IndexTerm Id="DFSAGR.PROCS.indx.42">
<Primary>DFS servers</Primary>
<Secondary>stopping</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.PROCS.indx.43">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Command>stop</Command></Secondary>
</IndexTerm>
<Para>You can stop a process by using the <Command>bos stop</Command> command to set its status 
flag to <Literal>NotRun</Literal> in both the BOS Server's memory and the <Filename>BosConfig</Filename> 
file.  The process then appears as <ComputerOutput>disabled</ComputerOutput> in the output from the <Command>bos
status</Command> command.  The entry remains in the file, but it does not run again
until you issue the <Command>bos start</Command> command, which changes its status flag 
to <Literal>Run</Literal> in <Replaceable>both</Replaceable> the memory and the <Filename>BosConfig</Filename> file.  You 
can also issue the <Command>bos startup</Command> command to run the process by changing 
its status flag <Replaceable>only</Replaceable> in memory.
</Para>
<Para><IndexTerm Id="DFSAGR.PROCS.indx.44">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Command>shutdown</Command></Secondary>
</IndexTerm>To halt a process temporarily (for example, to perform maintenance or make
alterations to a configuration), use the <Command>bos shutdown</Command> command to change
the process's status in the BOS Server's memory to <Literal>NotRun</Literal>.  The effect is
immediate and remains until you again change the memory state or until the BOS
Server restarts, at which time it consults the <Filename>BosConfig</Filename> file and sets
the memory state to match the information in the file.
</Para>
<Para><IndexTerm Id="DFSAGR.PROCS.indx.45">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Command>delete</Command></Secondary>
</IndexTerm>After you stop a process with the <Command>bos stop</Command> command, you can remove it
from the <Filename>BosConfig</Filename> file with the <Command>bos delete</Command> command.  It then no
longer appears in the output from the <Command>bos status</Command> command.  You must use 
the <Command>bos stop</Command> command to stop a process (<Command>simple</Command> or <Literal>cron</Literal>) whose
status is <Literal>Run</Literal> before you use the <Command>bos delete</Command> command to remove it
from the <Filename>BosConfig</Filename> file.  An error occurs if the status of a process
being deleted is <Literal>Run</Literal> when the <Command>bos delete</Command> command is issued.
</Para>
<Caution>
<Para>Do not temporarily stop a database server process on all
machines simultaneously.  This would make the database totally unavailable.
</Para>
</Caution>
<Sect2 Id="DFSAGR.PROCS.div.15">
<Title>Stopping Processes by Changing Their Status Flags to NotRun</Title>
<Para>To stop processes by changing their status flags to <Literal>NotRun</Literal>, do the
following:
</Para>
<OrderedList>
<ListItem>
<Para>Verify that you have the necessary privilege.  You must be included in the
<Filename>admin.bos</Filename> file on the machine where the processes are to be
stopped.  If necessary, issue the <Command>bos lsadmin</Command> command to
check.
</Para>
</ListItem>
<ListItem>
<Para>Issue the <Command>bos stop</Command> command to stop the processes by changing their
status flags in the <Filename>BosConfig</Filename> file and in the BOS Server's memory to 
<Literal>NotRun</Literal>:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>bos stop -server </Command><Symbol Role="Variable">machine</Symbol> <Option>process</Option> <Symbol Role="Variable">server_process</Symbol>... [<Option>wait</Option>]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>wait</Option> option causes the command shell prompt to remain
absent until the processes have stopped.  If omitted, the prompt
immediately returns, even if the processes have not yet
stopped.
</Para>
</ListItem>
</OrderedList>
</Sect2>
<Sect2 Id="DFSAGR.PROCS.div.16">
<Title>Stopping Processes Temporarily</Title>
<IndexTerm Id="DFSAGR.PROCS.indx.46">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Command>shutdown</Command></Secondary>
</IndexTerm>
<Para>To stop processes temporarily, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Verify that you have the necessary privilege.  You must be included in the
<Filename>admin.bos</Filename> file on the machine where the processes are to be
stopped.  If necessary, issue the <Command>bos lsadmin</Command> command to
check.
</Para>
</ListItem>
<ListItem>
<Para>Issue the <Command>bos shutdown</Command> command to stop the processes by changing
their status flags in the BOS Server's memory to <Literal>NotRun</Literal>:
</Para>
<InformalExample role="page-wide">
<Para><ProgramListing><UserInput>$ <Command>bos shutdown -server </Command><Symbol Role="Variable">machine</Symbol> [<Option>process </Option><Symbol Role="Variable">server_process</Symbol>...] [<Option>wait</Option>]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>process</Option> <Symbol Role="Variable">server_process</Symbol> option specifies each
server process to be stopped.  Omit this option to stop all processes
except the BOS Server.
</Para>
<Para>The <Option>wait</Option> option causes the command shell prompt to remain
absent until the processes have stopped.  If omitted, the prompt
immediately returns, even if the processes have not yet
stopped.
</Para>
</ListItem>
</OrderedList>
</Sect2>
<Sect2 Id="DFSAGR.PROCS.div.17">
<Title>Removing Processes from the BosConfig File</Title>
<IndexTerm Id="DFSAGR.PROCS.indx.47">
<Primary><Filename>BosConfig</Filename> file</Primary>
<Secondary>removing entries</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.PROCS.indx.48">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Command>stop</Command></Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.PROCS.indx.49">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Command>delete</Command></Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.PROCS.indx.50">
<Primary>DFS servers</Primary>
<Secondary>deleting</Secondary>
</IndexTerm>
<Para>To remove processes from the <Filename>BosConfig</Filename> file, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Verify that you have the necessary privilege.  You must be included in the
<Filename>admin.bos</Filename> file on the machine from which the process is to
be removed.  If necessary, issue the <Command>bos lsadmin</Command> command to
check.
</Para>
</ListItem>
<ListItem>
<Para>Issue the <Command>bos stop</Command> command to stop the processes by changing their
status flags in the <Filename>BosConfig</Filename> file and in the BOS Server's memory to 
<Literal>NotRun</Literal>; you must also do this for <Literal>cron</Literal> processes, even though 
they do not run continuously.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>bos stop -server </Command><Symbol Role="Variable">machine</Symbol> <Option>process</Option> <Symbol Role="Variable">server_process</Symbol>... [<Option>wait</Option>]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>wait</Option> option causes the command shell prompt to remain absent until 
the processes have stopped.  If omitted, the prompt immediately returns, even if
the processes have not yet stopped.
</Para>
</ListItem>
<ListItem>
<Para>Remove the processes from the <Filename>BosConfig</Filename> file with the <Command>bos delete</Command>
command:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>bos delete -server </Command><Symbol Role="Variable">machine</Symbol> <Option>process</Option> <Symbol Role="Variable">server_process</Symbol>...
</UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
</OrderedList>
<IndexTerm Id="DFSAGR.PROCS.indx.51" SpanEnd="DFSAGR.PROCS.indx.42">
</Sect2>
</Sect1>
<Sect1 Id="DFSAGR.PROCS.div.18">
<Title>Starting Processes</Title>
<IndexTerm Id="DFSAGR.PROCS.indx.52">
<Primary>DFS servers</Primary>
<Secondary>starting</Secondary>
</IndexTerm>
<Para>When starting processes, you can use the <Command>bos start</Command> command to change
their status flags to <Literal>Run</Literal> in both the <Filename>BosConfig</Filename> file and in the
BOS Server's memory.  You can also start processes that are temporarily disabled
(processes that have a status of <Literal>Run</Literal> in the <Filename>BosConfig</Filename> file but a 
status of <Literal>NotRun</Literal> in memory) by using the <Command>bos startup</Command> command 
and changing only the memory state to <Literal>Run</Literal>.  You can use the 
<Command>bos startup</Command> command to change a process's status in memory to <Literal>Run</Literal> 
even if its status in the <Filename>BosConfig</Filename> file is <Literal>NotRun</Literal>; thus, you can 
use the <Command>bos startup</Command> command to run tests on a server process without 
enabling it permanently.
</Para>
<Para>A newly started process is a completely new instance; if you install new
binaries during the time a process is shut down, they are used when you issue
<Command>bos start</Command> or <Command>bos startup</Command>.  If an instance of a process is already
running, the only effect of these commands is to ensure that the process's
status flag is set to <Literal>Run</Literal> in memory and, if <Command>bos start</Command> is used, in
the <Filename>BosConfig</Filename> file; you must issue the <Command>bos restart</Command> command to start
a new instance of the process.
</Para>
<Sect2 Id="DFSAGR.PROCS.div.19">
<Title>Starting Processes by Changing Their Status Flags to Run</Title>
<IndexTerm Id="DFSAGR.PROCS.indx.53">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Command>start</Command></Secondary>
</IndexTerm>
<Para>To start processes by changing their status flags to <Literal>Run</Literal>, do the
following:
</Para>
<OrderedList>
<ListItem>
<Para>Verify that you have the necessary privilege.  You must be included in the
<Filename>admin.bos</Filename> file on the machine where the processes are to be
started.  If necessary, issue the <Command>bos lsadmin</Command> command to
check.
</Para>
</ListItem>
<ListItem>
<Para>Issue the <Command>bos start</Command> command to start the processes by changing their
status flags in the <Filename>BosConfig</Filename> file and in memory to <Literal>Run</Literal>:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>bos start -server </Command><Symbol Role="Variable">machine</Symbol> <Option>process</Option> <Symbol Role="Variable">server_process</Symbol>...
</UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
</OrderedList>
</Sect2>
<Sect2 Id="DFSAGR.PROCS.div.20">
<Title>Starting All Stopped Processes That Have BosConfig Flags of Run</Title>
<IndexTerm Id="DFSAGR.PROCS.indx.54">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Command>startup</Command></Secondary>
</IndexTerm>
<Para>To start all stopped processes that have status flags of <Literal>Run</Literal> in the
<Filename>BosConfig</Filename> file, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Verify that you have the necessary privilege.  You must be included in the
<Filename>admin.bos</Filename> file on the machine where the processes are to be
started.  If necessary, issue the <Command>bos lsadmin</Command> command to
check.
</Para>
</ListItem>
<ListItem>
<Para>Use the <Command>bos startup</Command> command to start each process that has a status 
flag of <Literal>Run</Literal> in the <Filename>BosConfig</Filename> file; this changes each process's 
status flag in the BOS Server's memory from <Literal>NotRun</Literal> to <Literal>Run</Literal>.  Each 
process's status flag in the <Filename>BosConfig</Filename> file remains the same.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>bos startup -server </Command><Symbol Role="Variable">machine</Symbol>
</UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
</OrderedList>
</Sect2>
<Sect2 Id="DFSAGR.PROCS.div.21">
<Title>Starting Specific Temporarily Stopped Processes</Title>
<Para>To start processes that were temporarily stopped, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Verify that you have the necessary privilege.  You must be included in the
<Filename>admin.bos</Filename> file on the machine where the processes are to be
started.  If necessary, issue the <Command>bos lsadmin</Command> command to
check.
</Para>
</ListItem>
<ListItem>
<Para>Use the <Command>bos startup</Command> command to start each specified process by
changing its status flag in the BOS Server's memory to <Literal>Run</Literal>.  Each 
process's status flag in the <Filename>BosConfig</Filename> file remains unchanged.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>bos startup -server </Command><Symbol Role="Variable">machine</Symbol> <Option>process</Option> <Symbol Role="Variable">server_process</Symbol>...
</UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
</OrderedList>
<IndexTerm Id="DFSAGR.PROCS.indx.55" SpanEnd="DFSAGR.PROCS.indx.52">
</Sect2>
</Sect1>
<Sect1 Id="DFSAGR.PROCS.div.22">
<Title>Restarting Processes</Title>
<IndexTerm Id="DFSAGR.PROCS.indx.56">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Command>restart</Command></Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.PROCS.indx.57">
<Primary>DFS servers</Primary>
<Secondary>restarting</Secondary>
</IndexTerm>
<Para>You may sometimes need to stop and then restart a process (for example, to load
a new binary file immediately rather than wait for the BOS Server to perform
its daily check for new files, which is described in Section 5.9).  You can use
the <Command>bos restart</Command> command to stop and restart any or all processes on a
server machine, including the BOS Server itself.  The <Command>bos restart</Command> command
can be used to restart only those processes already controlled by the BOS
Server.  It does not change the status flag for a process in the <Filename>BosConfig</Filename>
file.
</Para>
<Caution>
<Para>Restarting some processes can cause a service outage.  You should
schedule these outages for times of low usage on the system.
</Para>
</Caution>
<OrderedList>
<ListItem>
<Para>Verify that you have the necessary privilege.  You must be included in the 
<Filename>admin.bos</Filename> file on the machine on which the processes are to be 
restarted.  If necessary, issue the <Command>bos lsadmin</Command> command to check.
</Para>
</ListItem>
<ListItem>
<Para>There are three ways to use the <Command>bos restart</Command> command: you can stop and
restart specific processes; you can stop and restart all processes,
<Replaceable>including</Replaceable> the BOS Server; or you can stop and restart all processes
<Replaceable>except</Replaceable> the BOS Server.
</Para>
<Para><Replaceable>To stop and restart specific processes</Replaceable>, use the <Option>process</Option> option
with the <Command>bos restart</Command> command.  Specify the name of each server process 
to be stopped and restarted.  The BOS Server stops and immediately restarts 
all specified processes, regardless of their status flags in the 
<Filename>BosConfig</Filename> file.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>bos restart -server </Command><Symbol Role="Variable">machine</Symbol> <Option>process</Option> <Symbol Role="Variable">server_process</Symbol>...
</UserInput></ProgramListing></Para>
</InformalExample>
<Para><Replaceable>To restart all processes including the BOS Server</Replaceable>, use the
<Option>bosserver</Option> option with <Command>bos restart</Command> the command.  The BOS Server 
stops all processes, including itself.  A new BOS Server immediately starts; 
it then restarts all processes with the status flag <Literal>Run</Literal> in the 
<Filename>BosConfig</Filename> file.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>bos restart -server </Command><Symbol Role="Variable">machine</Symbol> <Option>bosserver</Option>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para><?sml-need 8>The <Option>bosserver</Option> option indicates that the BOS Server on <Option>server</Option> 
is to stop all processes, including itself; a new BOS Server starts, 
restarting all processes with the status flag <Literal>Run</Literal>.
</Para>
<Para><Replaceable>To stop and restart all processes except the BOS Server</Replaceable>, omit both the
<Option>process</Option> and <Option>bosserver</Option> options from the <Command>bos restart</Command> command.
The BOS Server stops all processes except itself.  It then immediately 
restarts all processes with the status flag <Literal>Run</Literal> in the <Filename>BosConfig</Filename> 
file.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>bos restart -server </Command><Symbol Role="Variable">machine</Symbol>
</UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
</OrderedList>
<IndexTerm Id="DFSAGR.PROCS.indx.58" SpanEnd="DFSAGR.PROCS.indx.57">
</Sect1>
<Sect1 Id="DFSAGR.PROCS.div.23">
<Title>Installing Process Binary Files</Title>
<IndexTerm Id="DFSAGR.PROCS.indx.59">
<Primary>binary files</Primary>
<Secondary>installing</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.PROCS.indx.60">
<Primary>binary files</Primary>
<Secondary>storing</Secondary>
</IndexTerm>
<Para>Binary files for DFS server processes are stored on the local disk of each
server machine.  By default, the files are stored in the <Symbol Role="Variable">dcelocal</Symbol><Filename>/bin</Filename>
directory.  The Binary Distribution machine for each CPU/OS type in a cell
houses the master versions of the binary files for its machine and operating
system type in this same local directory.  The files can be stored in a
different directory on any machine, but it avoids potential confusion if they
are stored in the default directory on all machines.
</Para>
<Para><IndexTerm Id="DFSAGR.PROCS.indx.61">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Literal>install</Literal></Secondary>
</IndexTerm>The <Command>bos install</Command> command can be used to install a new process binary file
on a server machine.  It should be used to install new binary files only on
Binary Distribution machines.  The files are then distributed from each Binary
Distribution machine to other server machines of the same CPU/OS type via the
Update Server.  By default, the <Command>upclient</Command> process on each server
machine checks the Binary Distribution machine of its CPU/OS type for new (or
different) versions of binary files every 5 minutes; if it finds that versions
of files installed on the Binary Distribution machine are different from those
on the local machine, it automatically copies the files to its local machine
via the <Command>upserver</Command> process on the Binary Distribution machine.
</Para>
<Para>Do not install new binary files on a server machine other than the Binary
Distribution machine.  The binary files are overwritten the next time the
<Command>upclient</Command> process on the machine copies versions of files from the Binary
Distribution machine of its CPU/OS type.
</Para>
<Para><?sml-need 15>The <Command>bos install</Command> command preserves former versions of files in the
installation directory by assigning <Literal>.BAK</Literal> and <Literal>.OLD</Literal> extensions as
follows:
</Para>
<ItemizedList>
<ListItem>
<Para>If a current version of the file exists, the command adds a <Literal>.BAK</Literal>
extension to its name.
</Para>
</ListItem>
<ListItem>
<Para>If a <Literal>.BAK</Literal> version of the file exists, the command changes its extension
to <Literal>.OLD</Literal> before giving the current version a <Literal>.BAK</Literal> extension.
</Para>
</ListItem>
<ListItem>
<Para>If <Literal>.BAK</Literal> and <Literal>.OLD</Literal> versions of the file exist and the current
<Literal>.BAK</Literal> version is less than 7 days old, the current version of the file
overwrites the current <Literal>.BAK</Literal> version, but the <Literal>.OLD</Literal> version remains
unchanged.
</Para>
</ListItem>
<ListItem>
<Para>If <Literal>.BAK</Literal> and <Literal>.OLD</Literal> versions of the file exist and the current
<Literal>.BAK</Literal> version is at least 7 days old, the current <Literal>.BAK</Literal> version
overwrites the current <Literal>.OLD</Literal> version, and the current version of the file
overwrites the current <Literal>.BAK</Literal> version.  Use the <Command>bos getdates</Command> command
to examine the time stamps of current, <Literal>.BAK</Literal>, and <Literal>.OLD</Literal> versions of
binary files to determine when they were installed.
</Para>
</ListItem>
</ItemizedList>
<Para>The <Command>bos install</Command> command installs all files with the UNIX mode bits set
to <Literal>755</Literal>, regardless of the mode bits associated with a version of the
file that currently exists in the installation directory.  These permissions
are subject to the <Command>umask</Command> associated with the BOS Server on the machine
on which the files are installed.  The mode bits associated with the current
version of the file are preserved when it becomes the <Literal>.BAK</Literal> version.  The
<Command>bos install</Command> command neither preserves nor manipulates the Access 
Control List (ACL) permissions of a file installed from or to a DCE LFS 
fileset.
</Para>
<Para><IndexTerm Id="DFSAGR.PROCS.indx.62">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Literal>uninstall</Literal></Secondary>
</IndexTerm>The <Command>bos uninstall</Command> command replaces the current version of a binary file
with the next-oldest version of the file: the <Literal>.BAK</Literal> version, if it
exists; otherwise, the <Literal>.OLD</Literal> version.  If both the <Literal>.BAK</Literal> and
<Literal>.OLD</Literal> versions exist, the <Literal>.OLD</Literal> version replaces the <Literal>.BAK</Literal>
version when the latter becomes the current version.  The <Command>bos uninstall</Command>
command's <Option>all</Option> option can be used to remove all versions of a 
binary file.
</Para>
<Para><IndexTerm Id="DFSAGR.PROCS.indx.63">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Literal>prune</Literal></Secondary>
</IndexTerm>The <Command>bos prune</Command> command can be used to remove only the <Literal>.BAK</Literal> and
<Literal>.OLD</Literal> versions of binary files from the <Symbol Role="Variable">dcelocal</Symbol><Filename>/bin</Filename> directory.
The <Command>bos prune</Command> command can also be used to remove core files, which are
generated when processes monitored by the BOS Server go down, from the 
<Symbol Role="Variable">dcelocal</Symbol><Filename>/var/dfs/adm</Filename> directory.
</Para>
<Para><IndexTerm Id="DFSAGR.PROCS.indx.64">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Command>restart</Command></Secondary>
</IndexTerm><?sml-need 8>After new versions of binary files for processes controlled by the BOS Server
are installed on a machine, you can use the <Command>bos restart</Command> command to begin
using them immediately.  Otherwise, the new versions are not used until the next
new binary restart time (specified in the <Symbol Role="Variable">dcelocal</Symbol><Filename>/var/dfs/BosConfig</Filename>
file) of the BOS Server on the machine. (See Section 5.9 for detailed
information about checking and setting scheduled restart times.)
</Para>
<Sect2 Id="DFSAGR.PROCS.div.24">
<Title>Installing New Binary Files</Title>
<Para>To install new binary files, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Verify that you have the necessary privilege.  You must be included in the 
<Filename>admin.bos</Filename> file on the machine on which the binary files are to be 
installed.  If necessary, issue the <Command>bos lsadmin</Command> command to check.
</Para>
</ListItem>
<ListItem>
<Para>Enter the <Command>bos install</Command> command to install a new version of each specified
binary file:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>bos install -server </Command><Symbol Role="Variable">machine</Symbol> <Option>file</Option> <Symbol Role="Variable">binary_file</Symbol>... &bsol;
[<Option>dir </Option><Symbol Role="Variable">alternate_dest</Symbol>]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>file</Option> <Symbol Role="Variable">binary_file</Symbol> option specifies the pathname of each 
binary file to be installed on the machine specified with <Option>server</Option>.  For 
each file, specify either a full or a relative pathname; relative pathnames 
are interpreted relative to the current working directory.  An installed file 
replaces a file of the same name.
</Para>
<Para>The <Option>dir</Option> <Symbol Role="Variable">alternate_dest</Symbol> option specifies the pathname of the 
directory on <Option>server</Option> in which all specified files are to be installed. 
Omit the <Option>dir</Option> option to install the files in the default directory, 
<Symbol Role="Variable">dcelocal</Symbol><Filename>/bin</Filename>; otherwise, provide a full or relative pathname. 
Relative pathnames are interpreted relative to the <Symbol Role="Variable">dcelocal</Symbol> directory 
on <Option>server</Option>.
<!-- -->
</Para>
</ListItem>
</OrderedList>
<IndexTerm Id="DFSAGR.PROCS.indx.65" SpanEnd="DFSAGR.PROCS.indx.59">
<?sml-break>
<?sml-need 15>
</Sect2>
<Sect2 Id="DFSAGR.PROCS.div.25">
<Title>Replacing Binary Files with Older Versions</Title>
<IndexTerm Id="DFSAGR.PROCS.indx.66">
<Primary>binary files</Primary>
<Secondary>replacing</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.PROCS.indx.67">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Literal>uninstall</Literal></Secondary>
</IndexTerm>
<Para>To replace binary files with older versions of the files, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Verify that you have the necessary privilege.  You must be included in the 
<Filename>admin.bos</Filename> file on the machine on which the binary files reside.  If 
necessary, issue the <Command>bos lsadmin</Command> command to check.
</Para>
</ListItem>
<ListItem>
<Para>Enter the <Command>bos uninstall</Command> command to replace the current version of each
specified binary file with its next-oldest (<Literal>.BAK</Literal> or <Literal>.OLD</Literal>) version:
<?sml-break><?sml-point-size 11>
<!--no-op:  12-->
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>bos uninstall -server </Command><Symbol Role="Variable">machine</Symbol> <Option>file</Option> <Symbol Role="Variable">binary_file</Symbol>... &bsol;
[<Option>dir </Option><Symbol Role="Variable">alternate_dest</Symbol>] [<Option>all</Option>]
</UserInput></ProgramListing></Para>
</InformalExample>
<?sml-point-size 12>
<!--no-op:  14-->
<Para>The <Option>file</Option> <Symbol Role="Variable">binary_file</Symbol> option specifies the name of each binary 
file to be replaced with its next-oldest version.  Each specified file is 
replaced with its <Literal>.BAK</Literal> version, if it exists; otherwise, it is replaced 
with its <Literal>.OLD</Literal> version.  If both the <Literal>.BAK</Literal> and <Literal>.OLD</Literal> versions 
exist, the <Literal>.OLD</Literal> version also replaces the <Literal>.BAK</Literal> version.  All 
specified files must reside in the same directory (<Symbol Role="Variable">dcelocal</Symbol><Filename>/bin</Filename> or 
an alternate directory specified with the <Option>dir</Option> option).  Specify only 
filenames; the command ignores all but the final component of a pathname.
</Para>
<Para>The <Option>dir</Option> <Symbol Role="Variable">alternate_dest</Symbol> option provides the pathname of the 
directory in which all specified files reside.  Omit the <Option>dir</Option> option if 
the files reside in the default directory, <Symbol Role="Variable">dcelocal</Symbol><Filename>/bin</Filename>; otherwise, 
provide a full or relative pathname.  Relative pathnames are interpreted 
relative to the <Symbol Role="Variable">dcelocal</Symbol> directory on <Option>server</Option>.
</Para>
<Para>The <Option>all</Option> option indicates that all versions (current, <Literal>.BAK</Literal>, 
and <Literal>.OLD</Literal>) of each specified file are to be removed.
<!-- -->
</Para>
</ListItem>
</OrderedList>
</Sect2>
<Sect2 Id="DFSAGR.PROCS.div.26">
<Title>Checking the Time Stamps on Binary Files</Title>
<IndexTerm Id="DFSAGR.PROCS.indx.68">
<Primary>binary files</Primary>
<Secondary>timestamps</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.PROCS.indx.69">
<Primary>timestamps</Primary>
<Secondary>on binary files</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.PROCS.indx.70">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Command>getdates</Command></Secondary>
</IndexTerm>
<Para>Enter the <Command>bos getdates</Command> command to determine when binary files were
installed:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>bos getdates -server </Command><Symbol Role="Variable">machine</Symbol> <Option>file</Option> <Symbol Role="Variable">binary_file</Symbol>... &bsol;
[<Option>dir </Option><Symbol Role="Variable">alternate_dest</Symbol>]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para><?sml-need 10>The <Option>file</Option> <Symbol Role="Variable">binary_file</Symbol> option specifies the name of the current 
version of each binary file whose time stamps are to be displayed.  The time 
stamps on the current, <Literal>.BAK</Literal>, and <Literal>.OLD</Literal> versions of each file are 
displayed.  All specified files must reside in the same directory, 
<Symbol Role="Variable">dcelocal</Symbol><Filename>/bin</Filename>, or an alternate directory specified with the <Option>dir</Option>
option.  Specify only filenames; the command ignores all but the final 
component of a pathname.
</Para>
<Para>The <Option>dir</Option> <Symbol Role="Variable">alternate_dest</Symbol> option specifies the pathname of the 
directory in which all specified files reside.  Omit this option if the files 
reside in the default directory, <Symbol Role="Variable">dcelocal</Symbol><Filename>/bin</Filename>; otherwise, provide 
a full or relative pathname.  Relative pathnames are interpreted relative 
to the <Symbol Role="Variable">dcelocal</Symbol> directory on <Option>server</Option>.
<!-- -->
</Para>
</Sect2>
<Sect2 Id="DFSAGR.PROCS.div.27">
<Title>Removing Old Binary and Core Files</Title>
<IndexTerm Id="DFSAGR.PROCS.indx.71">
<Primary>binary files</Primary>
<Secondary>removing</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.PROCS.indx.72">
<Primary>core files</Primary>
<Secondary>deleting</Secondary>
</IndexTerm>
<Para>To remove old binary and core files, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Verify that you have the necessary privilege.  You must be included in the 
<Filename>admin.bos</Filename> file on the machine on which the binary and core files reside.
If necessary, issue the <Command>bos lsadmin</Command> command to check.
</Para>
</ListItem>
<ListItem>
<Para>Enter the <Command>bos prune</Command> command to remove old versions of <Literal>.BAK</Literal> files,
<Literal>.OLD</Literal> files, core files, or any combination of the files from the
<Symbol Role="Variable">dcelocal</Symbol><Filename>/bin</Filename> and <Symbol Role="Variable">dcelocal</Symbol><Filename>/var/dfs/adm</Filename> directories:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>bos prune -server </Command><Symbol Role="Variable">machine</Symbol> [<Option>bak</Option>] [<Option>old</Option>] [<Option>core</Option>] [<Option>all</Option>]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>bak</Option> option specifies that all <Literal>.BAK</Literal> files are to be 
removed from <Symbol Role="Variable">dcelocal</Symbol><Filename>/bin</Filename>.  Use this option and optionally 
<Option>old</Option>, <Option>core</Option>, or both, or use <Option>all</Option>.
</Para>
<Para>The <Option>old</Option> option specifies that all <Literal>.OLD</Literal> files are to be removed 
from <Symbol Role="Variable">dcelocal</Symbol><Filename>/bin</Filename>.  Use this option and optionally <Option>bak</Option>, 
<Option>core</Option>, or both, or use <Option>all</Option>.
</Para>
<Para>The <Option>core</Option> option specifies that all core files are to be removed from
<Symbol Role="Variable">dcelocal</Symbol><Filename>/var/dfs/adm</Filename>.  Use this option and optionally <Option>bak</Option>,
<Option>old</Option>, or both, or use <Option>all</Option>.
</Para>
<Para><?sml-need 10>The <Option>all</Option> option specifies that all <Literal>.BAK</Literal> and <Literal>.OLD</Literal> files are 
to be removed from <Symbol Role="Variable">dcelocal</Symbol><Filename>/bin</Filename> and all core files are to be 
removed from <Symbol Role="Variable">dcelocal</Symbol><Filename>/var/dfs/adm</Filename>.  Use this option or use some 
combination of <Option>bak</Option>, <Option>old</Option>, and <Option>core</Option>.
<!-- -->
</Para>
</ListItem>
</OrderedList>
</Sect2>
<Sect2 Id="DFSAGR.PROCS.div.28">
<Title>Removing All Versions of Binary Files</Title>
<IndexTerm Id="DFSAGR.PROCS.indx.73">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Literal>uninstall</Literal></Secondary>
</IndexTerm>
<Para>To remove all versions of binary files, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Verify that you have the necessary privilege.  You must be included in the 
<Filename>admin.bos</Filename> file on the machine on which the binary files reside.  If 
necessary, issue the <Command>bos lsadmin</Command> command to check.
</Para>
</ListItem>
<ListItem>
<Para>Enter the <Command>bos uninstall</Command> command and include its <Option>all</Option> option to
remove all versions of each specified binary file:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>bos uninstall -server </Command><Symbol Role="Variable">machine</Symbol> <Option>file</Option> <Symbol Role="Variable">binary_file</Symbol>... &bsol;
[<Option>dir </Option><Symbol Role="Variable">alternate_dest</Symbol>] [<Option>all</Option>]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>file</Option> <Symbol Role="Variable">binary_file</Symbol> option specifies the name of each binary 
file to be removed.  The current, <Literal>.BAK</Literal>, and <Literal>.OLD</Literal> versions of 
each file are removed.  All specified files must reside in the same directory,
<Symbol Role="Variable">dcelocal</Symbol><Filename>/bin</Filename>, or an alternate directory specified with the <Option>dir</Option>
option.  Specify only filenames; the command ignores all but the final 
component of a pathname.
</Para>
<Para>The <Option>dir</Option> <Symbol Role="Variable">alternate_dest</Symbol> option specifies the pathname of 
the directory in which all specified files reside.  Omit this option if the 
files reside in the default directory, <Symbol Role="Variable">dcelocal</Symbol><Filename>/bin</Filename>; otherwise, 
provide a full or relative pathname.  Relative pathnames are interpreted 
relative to the <Symbol Role="Variable">dcelocal</Symbol> directory on <Option>server</Option>.
</Para>
<Para>The <Option>all</Option> option indicates that all versions (current, <Literal>.BAK</Literal>, and 
<Literal>.OLD</Literal>) of each specified file are to be removed.
<!-- -->
</Para>
</ListItem>
</OrderedList>
<IndexTerm Id="DFSAGR.PROCS.indx.74" SpanEnd="DFSAGR.PROCS.indx.71">
<IndexTerm Id="DFSAGR.PROCS.indx.75" SpanEnd="DFSAGR.PROCS.indx.72">
</Sect2>
</Sect1>
<Sect1 Id="DFSAGR.PROCS.div.29">
<Title>Setting Scheduled Restart Times</Title>
<IndexTerm Id="DFSAGR.PROCS.indx.76">
<Primary>BOS Server</Primary>
<Secondary>setting restart times</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.PROCS.indx.77">
<Primary>BOS Server</Primary>
<Secondary>types of restarts</Secondary>
</IndexTerm>
<Para>The BOS Server performs two types of scheduled restarts: a general restart and
a new binary restart.  During a general restart, the BOS Server first restarts
itself (using a new binary file, if one exists); it then restarts all other
server processes on its machine that have a status flag of <Literal>Run</Literal> in the
<Filename>BosConfig</Filename> file.  It is recommended that the general restart time be set
as a weekly time; by default, the BOS Server performs this type of restart
weekly, on Sunday at 4:00 a.m.
</Para>
<Para>During a new binary restart, the BOS Server checks for newly installed binary
files.  Binary files are installed on Binary Distribution machines with the
<Command>bos install</Command> command, after which they are propagated to other machines
by the Update Server.  If a new version of a process's binary file was installed
in <Symbol Role="Variable">dcelocal</Symbol><Filename>/bin</Filename> after the process last started on the server machine,
the BOS Server restarts the process so that the new instance of the binary file
is used.  It is recommended that the new binary restart time be specified as a
daily time; by default, the BOS Server executes this type of restart daily, at
5:00 a.m.
</Para>
<Para>The default general and new binary restart times are set for early morning,
when system usage is typically lowest.  The <Filename>BosConfig</Filename> file on every
server machine records the two restart times.  This is a local file, so the
information can be different for different machines.  You can check and reset
both time settings with the <Command>bos getrestart</Command> and <Command>bos setrestart</Command>
commands.
</Para>
<Para>You can set a restart time as a day and time or as just a time. When including
a day, specify the day first, in lowercase letters; you can enter the entire
name or just the first three letters (for example, <Literal>sunday</Literal> or <Literal>sun</Literal>).
When indicating a time, separate hours from minutes with a <Literal>:</Literal> (colon);
you can use 24-hour time or 1:00 through 12:00 with <Literal>am</Literal> or <Literal>pm</Literal> (for
example, <Literal>14:30</Literal> or <Literal>"2:30 pm"</Literal>).  You must enclose the entire entry in
"&thinsp;" (double quotes) if it contains spaces (for example, <Literal>"2:30 pm"</Literal> or
<Literal>"sun 14:30"</Literal>).
</Para>
<Para>You can also set a restart time as <Literal>never</Literal> or <Literal>now</Literal>. The setting
<Literal>never</Literal> indicates that the BOS Server does not perform the indicated type
of restart.  For a restart time, the setting <Literal>now</Literal> is equivalent to
specifying the current day and time.
<?sml-break><?sml-need 10></Para>
<Caution>
<IndexTerm Id="DFSAGR.PROCS.indx.78">
<Primary><Filename>BosConfig</Filename> file</Primary>
<Secondary>editing</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.PROCS.indx.79">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Command>setrestart</Command></Secondary>
</IndexTerm>
<Para>Never edit the restart times in the <Filename>BosConfig</Filename> file directly; use the
<Command>bos setrestart</Command> command only.  If you edit the restart times directly, the
BOS Server does not recognize the new times until it is restarted and again
reads the <Filename>BosConfig</Filename> file.
</Para>
</Caution>
<Sect2 Id="DFSAGR.PROCS.div.30">
<Title>Checking the Current Restart Times</Title>
<IndexTerm Id="DFSAGR.PROCS.indx.80">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Command>getrestart</Command></Secondary>
</IndexTerm>
<Para>To check the current time settings, issue the <Command>bos getrestart</Command> command:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>bos getrestart -server </Command><Symbol Role="Variable">machine</Symbol>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>Following is an example of the output from this command:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Literal>bos getrestart /.../abc.com/hosts/fs3</Literal>
</UserInput></ProgramListing></Para>
</InformalExample>
<?sml-break>
<?sml-point-size 11>
<!--no-op:  12-->
<InformalExample>
<Para><ProgramListing>Server /.../abc.com/hosts/fs3 restarts at sun 4:00 am
Server /.../abc.com/hosts/fs3 restarts for new binaries at 5:00 am
</ProgramListing></Para>
</InformalExample>
<?sml-point-size 12>
<!--no-op:  14-->
</Sect2>
<Sect2 Id="DFSAGR.PROCS.div.31">
<Title>Setting the General Restart Time</Title>
<IndexTerm Id="DFSAGR.PROCS.indx.81">
<Primary><Command>bos</Command> command suite</Primary>
<Secondary><Command>setrestart</Command></Secondary>
</IndexTerm>
<Para>To set the general restart time, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Verify that you have the necessary privilege.  You must be included in the
<Filename>admin.bos</Filename> file on the machine whose general restart time is to be set.
If necessary, issue the <Command>bos lsadmin</Command> command to check.
</Para>
</ListItem>
<ListItem>
<Para>Set the general restart time by issuing the <Command>bos setrestart</Command> command with
the <Option>general</Option> option:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>bos setrestart -server </Command><Symbol Role="Variable">machine</Symbol> <Option>general</Option> <Symbol Role="Variable">time</Symbol>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>general</Option> option identifies this as the general restart
time, not the new binary restart time; <Symbol Role="Variable">time</Symbol> is the time at which 
the BOS Server is to restart itself and the other processes it controls.
</Para>
</ListItem>
</OrderedList>
</Sect2>
<Sect2 Id="DFSAGR.PROCS.div.32">
<Title>Setting the New Binary Restart Time</Title>
<Para>To set the new binary restart time, do the following:
</Para>
<OrderedList>
<ListItem>
<Para>Verify that you have the necessary privilege.  You must be included in the
<Filename>admin.bos</Filename> file on the machine whose new binary restart time is to be
set.  If necessary, issue the <Command>bos lsadmin</Command> command to check.
</Para>
</ListItem>
<ListItem>
<Para>Set the new binary restart time by issuing the <Command>bos setrestart</Command> command
with the <Option>newbinary</Option> option:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>bos setrestart -server </Command><Symbol Role="Variable">machine</Symbol> <Option>newbinary</Option> <Symbol Role="Variable">time</Symbol>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>newbinary</Option> option identifies this as the new binary restart time, 
not the general restart time; <Symbol Role="Variable">time</Symbol> is the time at which the BOS Server 
is to check for new binary files in <Symbol Role="Variable">dcelocal</Symbol><Filename>/bin</Filename>.
</Para>
</ListItem>
</OrderedList>
<IndexTerm Id="DFSAGR.PROCS.indx.82" SpanEnd="DFSAGR.PROCS.indx.76">
</Sect2>
</Sect1>
<Sect1 Id="DFSAGR.PROCS.div.33">
<Title>Rebooting a Server Machine</Title>
<IndexTerm Id="DFSAGR.PROCS.indx.83">
<Primary>server machines</Primary>
<Secondary>rebooting</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.PROCS.indx.84">
<Primary>Fileset Database machines</Primary>
</IndexTerm>
<Note>
<Para>Consult other DCE component documentation to determine the impact of rebooting
on other DCE components.
</Para>
</Note>
<Para>Rebooting a server machine, while not difficult, should never be the first
method used to solve DFS-related problems.  You should reboot a server machine
only if no other recourse is available, such as when a process that is not 
controlled by the BOS Server fails.  Rebooting causes a service outage.  If 
the machine being rebooted is the only Fileset Database machine, it can make 
the entire file system unavailable to all users; if the machine is a File 
Server machine, people using filesets located only on that machine (for 
example, user filesets) cannot access those filesets.
</Para>
<Para>To prepare a server machine for powering down, you can issue the <Command>bos
shutdown</Command> command to have the BOS Server shut down the other server
processes that are running on the machine; the BOS Server does not shut 
itself down&mdash;it terminates correctly when you turn off the machine.  You 
can then reboot the machine by issuing the machine's <Literal>reboot</Literal> command 
(or its equivalent).
</Para>
<Para><?sml-need 10>You can reboot a machine from either the local console or the console of a
remote machine (via <Command>telnet</Command> or an appropriate program).  The two
approaches are essentially the same, with the exception that rebooting from
the local console lets you track the status of the reboot as it occurs, which
you cannot do with remote rebooting.  Regardless of the reboot method you use,
server processes restart automatically after the reboot if the machine's
initialization file (<Filename>/etc/rc</Filename> or its equivalent) contains the following
instruction to restart the BOS Server:
</Para>
<InformalExample>
<Para><ProgramListing><Symbol Role="Variable">dcelocal</Symbol>/bin/bosserver
</ProgramListing></Para>
</InformalExample>
<Para>To reboot a server machine, do the following:
</Para>
<OrderedList>
<ListItem>
<Para><Replaceable>To reboot from the console of a remote machine</Replaceable>, open a remote connection
to the machine you want to reboot (using <Command>telnet</Command> or an appropriate
program).  To reboot from the local console of the machine you want to 
reboot, omit this step.
</Para>
</ListItem>
<ListItem>
<Para>Verify that you have the necessary privilege.  You must be included in the 
<Filename>admin.bos</Filename> file on the machine to be rebooted.  If necessary, issue the 
<Command>bos lsadmin</Command> command to check.
</Para>
</ListItem>
<ListItem>
<Para>Issue the <Command>bos shutdown</Command> command to prepare to power down the machine to
be rebooted.  This command directs the BOS Server to shut down the other DFS
server processes that are running on the machine by changing their status 
flags in the BOS Server's memory to <Literal>NotRun</Literal>.  The BOS Server does not 
shut itself down; it terminates safely when you turn off the machine. 
Include the <Option>wait</Option> option to be sure that all processes have stopped 
before performing the next step.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>bos shutdown -server </Command><Symbol Role="Variable">machine</Symbol> <Option>wait</Option>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The <Option>wait</Option> option causes the command shell prompt to remain absent 
until the processes are stopped.  If the <Option>wait</Option> option is omitted, the 
prompt returns immediately, even if the processes are not yet stopped.
</Para>
</ListItem>
<ListItem>
<Para>Log in as <Literal>root</Literal> in the native UNIX file system of the machine to be
rebooted.  For example:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Literal>su root</Literal>
Password: <Symbol Role="Variable">root_password</Symbol>
</UserInput></ProgramListing></Para>
</InformalExample>
<?sml-need 10>
</ListItem>
<ListItem>
<Para>Issue the appropriate reboot command (<Filename>/etc/reboot</Filename> or its equivalent) for
the machine to be rebooted.  For example:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Filename>/etc/reboot</Filename>
</UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
</OrderedList>
<IndexTerm Id="DFSAGR.PROCS.indx.85" SpanEnd="DFSAGR.PROCS.indx.83">
<IndexTerm Id="DFSAGR.PROCS.indx.86" SpanEnd="DFSAGR.PROCS.indx.2">
<IndexTerm Id="DFSAGR.PROCS.indx.87" SpanEnd="DFSAGR.PROCS.indx.1">
</Sect1>
</Chapter>
<!--+ 10/19/96 18:43:16
    | tagMorph:  $Id: processes.sgm,v 1.1.2.6 1996/12/15 23:02:14 wardr Exp $
    | tagMorph library:  $Id: processes.sgm,v 1.1.2.6 1996/12/15 23:02:14 wardr Exp $
    | sml-to-docbook:  1.23
    +-->
