<!--
# @OSF_COPYRIGHT@
# 
# 
# HISTORY
# $Log: fts_update.8dfs,v $
# Revision 1.1.2.4  1996/11/07  18:55:32  weir
# 	Cleaned up history
# 	[1996/11/07  18:55:07  weir]
#
# Revision 1.1.2.3  1996/10/28  17:45:46  carrig
# 	{enh,R1.2.2}
# 	Ready for editing
# 	[1996/10/28  17:42:25  carrig]
# 
# Revision 1.1.2.2  1996/10/25  16:46:26  carrig
# 	{enh,R1.2.2}
# 	Fixed VarLists
# 	[1996/10/25  16:45:56  carrig]
# 
# Revision 1.1.2.1  1996/10/22  20:57:19  wardr
# 	{edit,R1.2.2}
# 	Initial checkin after sgml conversion
# 	[1996/10/22  20:52:10  wardr]
# 
# Revision 1.1.1.2  1996/10/22  20:52:10  wardr
# 	{edit,R1.2.2}
# 	Initial checkin after sgml conversion
# 
# $EndLog$
-->
<!---->
<!-- Fragment document type declaration subset:
ArborText, Inc., 1988-1993, v.4001
<!DOCTYPE Book PUBLIC "-//Davenport//DTD DocBook V2.4//EN" [
]>
-->
<RefEntry Id="DFSAGR.MAN172.rsml.1">
<RefMeta>
<RefEntryTitle>fts update</RefEntryTitle>
<ManVolNum>8dfs</ManVolNum>
</RefMeta>
<RefNameDiv>
<RefName><Command>fts update</Command></RefName>
<RefPurpose><Command>fts update</Command> &minus; Requests an immediate update of replicas of a read/write
DCE LFS fileset that uses Scheduled Replication
</RefPurpose>
</RefNameDiv>
<!---->
<!--  COPYRIGHT NOTICE-->
<!--  Copyright (c) 1990, 1991, 1992, 1993 Open Software Foundation, Inc.-->
<!--  Copyright (C) 1989, 1991, 1992, 1993 Transarc Corporation-->
<!--  ALL RIGHTS RESERVED (DCE).  See the file named COPYRIGHT.DCE in the-->
<!--  src directory for the full copyright text.-->
<!---->
<!---->
<!-- HISTORY-->
<!-- Revision 1.1.12.1  1996/05/14  20:26:56  wardr-->
<!-- 	{enh,R1.2.2}-->
<!-- 	Removed changebars-->
<!-- 	[1996/05/14  20:22:14  wardr]-->
<!---->
<!-- Revision 1.1.10.2  1995/10/04  15:45:44  wfl-->
<!-- 	{def, 13140, R1.2.1}-->
<!-- 	Fixed quotes in change markers-->
<!-- 	[1995/10/04  15:45:02  wfl]-->
<!-- -->
<!-- Revision 1.1.10.1  1995/09/15  19:46:36  wfl-->
<!-- 	{enh, 13096, R1.2.1}-->
<!-- 	Add Information detailing that read-only fileset replication is now-->
<!-- 	parallel (not serial).  This is a minor documentation update.-->
<!-- 	[1995/09/15  19:42:24  wfl]-->
<!-- -->
<!-- Revision 1.1.8.9  1995/07/24  14:15:03  buckler-->
<!-- 	1.1 edits and Prentice Hall reformat-->
<!-- 	[1995/07/24  14:13:18  buckler]-->
<!-- -->
<!-- Revision 1.1.8.8  1995/07/13  23:01:10  buckler-->
<!-- 	no change-->
<!-- 	[1995/07/13  22:58:43  buckler]-->
<!-- -->
<!-- Revision 1.1.8.7  1994/07/16  20:41:19  jeff-->
<!-- 	Editorial work to clarify option and command descriptions.-->
<!-- 	[1994/07/16  20:41:02  jeff]-->
<!-- -->
<!-- Revision 1.1.8.6  1994/05/27  18:42:52  jeff-->
<!-- 	{defect, 10752, R1.1}-->
<!-- 	Minor technical clarification for replication commands.-->
<!-- 	[1994/05/27  18:41:33  jeff]-->
<!-- -->
<!-- Revision 1.1.8.5  1993/10/08  15:03:55  weir-->
<!-- 	Inserted Transarc copyright-->
<!-- 	[1993/10/08  14:59:49  weir]-->
<!-- -->
<!-- Revision 1.1.8.4  1993/09/23  13:42:37  kdu-->
<!-- 	{def,7715,R1.0.3}-->
<!-- 	Examples of sysname.-->
<!-- -->
<!-- 	{def,8634,R1.0.3}-->
<!-- 	Change anonymous to nobody.-->
<!-- 	[1993/09/23  13:42:01  kdu]-->
<!-- -->
<!-- Revision 1.1.8.3  1993/09/15  21:45:21  kdu-->
<!-- 	{def,5778,R1.0.3}-->
<!-- 	Short forms of machine names.-->
<!-- -->
<!-- 	{def,8515,R1.0.3}-->
<!-- 	Availability of read-only filesets.-->
<!-- 	[1993/09/15  21:44:09  kdu]-->
<!-- -->
<!-- Revision 1.1.8.2  1993/08/04  19:00:13  tmw-->
<!-- 	Added index entries for second version of master index.-->
<!-- 	[1993/08/04  18:42:34  tmw]-->
<!-- -->
<!-- Revision 1.1.6.6  1993/01/28  02:35:15  dbelch-->
<!-- 	Embedding copyright notice-->
<!-- 	[1993/01/28  00:52:52  dbelch]-->
<!-- -->
<!-- Revision 1.1.6.5  1992/11/12  18:58:07  jeff-->
<!-- 	Fix for defect 5120, correct description of -localauth option.-->
<!-- 	[1992/11/12  18:41:47  jeff]-->
<!-- -->
<!-- Revision 1.1.6.4  1992/11/05  01:08:18  jeff-->
<!-- 	Fix for defect 5933, include privilege required.-->
<!-- 	[1992/11/05  01:08:02  jeff]-->
<!-- -->
<!-- Revision 1.1.6.3  1992/11/02  20:24:35  jeff-->
<!-- 	Fix for defect 5879, remove additional local-mounting restrictions.-->
<!-- 	[1992/11/02  20:16:32  jeff]-->
<!-- -->
<!-- Revision 1.1.6.2  1992/09/10  15:46:57  weir-->
<!-- 	Removed change bar macros; moved into 1.0.2doc tree-->
<!-- 	[1992/09/10  14:25:06  weir]-->
<!-- -->
<!-- Revision 1.1.4.2  1992/09/08  19:09:25  casey-->
<!-- 	Prentice Hall production-->
<!-- 	[1992/09/08  17:00:04  casey]-->
<!-- -->
<!-- Revision 1.1.2.7  1992/05/07  15:36:24  jeff-->
<!-- 	Modified parenthetical description of "mounted locally."-->
<!-- 	[1992/05/07  00:36:40  jeff]-->
<!-- -->
<!-- Revision 1.1.2.6  1992/05/01  18:44:45  jeff-->
<!-- 	Edited to clearly reflect the fact that the command works only-->
<!-- 	with DCE LFS filesets.-->
<!-- 	[1992/05/01  16:49:43  jeff]-->
<!-- -->
<!-- Revision 1.1.2.5  1992/04/29  20:34:26  jeff-->
<!-- 	Modified syntax and description of -noauth and -localauth options.-->
<!-- 	Also fixed formatting problems with italicized text and changed-->
<!-- 	lists of commands under Related Information to be inline.-->
<!-- 	[1992/04/28  00:46:27  jeff]-->
<!-- -->
<!-- Revision 1.1.2.4  1992/04/20  21:50:54  jeff-->
<!-- 	Updated to better describe use of local replica with Release-->
<!-- 	Replication.-->
<!-- 	[1992/04/20  16:48:25  jeff]-->
<!-- -->
<!-- Revision 1.1.2.3  1992/04/17  14:20:21  jeff-->
<!-- 	Removed all references to the optional -aggregate name option, which-->
<!-- 	  is to be removed from the command because it provides no useful-->
<!-- 	  functionality.-->
<!-- 	[1992/04/17  13:23:55  jeff]-->
<!-- -->
<!-- Revision 1.1.2.2  1992/04/09  14:57:50  jeff-->
<!-- 	Added a note describing the command's limitation with respect to-->
<!-- 	  locally mounted DCE LFS filesets.-->
<!-- 	[1992/04/08  22:54:25  jeff]-->
<!-- -->
<!-- Revision 1.1  1992/01/29  15:52:21  damon-->
<!-- 	Initial revision-->
<!-- -->
<!---->
<!-- (c) Copyright 1991, Open Software Foundation, Inc.  ALL RIGHTS RESERVED-->
<IndexTerm Id="DFSAGR.MAN172.indx.1">
<Primary><Command>fts</Command> command suite</Primary>
<Secondary><Command>update</Command></Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.MAN172.indx.2">
<Primary>replicas</Primary>
<Secondary>updating (DFS)</Secondary>
</IndexTerm>
<RefSynopsisDiv>
<CmdSynopsis>
<Command>fts update</Command>
<Arg Choice="plain"><Option>fileset</Option></Arg>
<Group Choice="req">
<Arg Choice="plain"><Replaceable>name</Replaceable></Arg>
<Arg Choice="plain"><Replaceable>ID</Replaceable></Arg>
</Group>
<Group Choice="req">
<Arg Choice="plain"><Option>all</Option></Arg>
<Arg Choice="plain"><Option>server</Option><Replaceable>machine</Replaceable></Arg>
</Group>
<Arg Choice="opt"><Option>cell</Option><Replaceable>cellname</Replaceable></Arg>
<Group Choice="opt">
<Group Choice="req">
<Arg Choice="plain"><Option>noauth</Option></Arg>
<Arg Choice="plain"><Option>localauth</Option></Arg>
</Group>
</Group>
<Arg Choice="opt"><Option>verbose</Option></Arg>
<Arg Choice="opt"><Option>help</Option></Arg>
</CmdSynopsis>
</RefSynopsisDiv>
<RefSect1>
<Title>OPTIONS</Title>
<VariableList>
<VarListEntry role="linebreak">
<Term><Option>fileset</Option> {<Symbol Role="Variable">name</Symbol> | <Symbol Role="Variable">ID</Symbol>}</Term>
<ListItem>
<Para>Specifies the complete name or fileset ID number of the read/write fileset
whose replicas are to be updated immediately.  For a fileset that uses Scheduled
Replication, the command updates the indicated replicas to match the read/write
version of the fileset.  For a fileset that uses Release Replication, the
command updates the replicas to match the read-only version that resides at
the same site as the read/write version of the fileset.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Option>all</Option></Term>
<ListItem>
<Para>Specifies that all replicas of the fileset indicated with the <Option>fileset</Option>
option are to be updated.  Use this option or use the <Option>server</Option> option.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term><Option>server </Option><Symbol Role="Variable">machine</Symbol></Term>
<ListItem>
<Para>Names a specific File Server machine on which the replica of the fileset
indicated with the <Option>fileset</Option> option is to be updated.  Only the replica
on the specified File Server machine is updated.  Specify the machine's DCE
pathname, its host name, or its IP address.  Use this option or use the
<Option>all</Option> option.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term><Option>cell </Option><Symbol Role="Variable">cellname</Symbol></Term>
<ListItem>
<Para>Specifies the cell where the command is to be run.  The default is the local
cell of the issuer of the command.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Option>noauth</Option></Term>
<ListItem>
<Para>Directs <Command>fts</Command> to use the unprivileged identity <Literal>nobody</Literal> as the
identity of the issuer of the command.  If you use this option, do not use the
<Option>localauth</Option> option.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Option>localauth</Option></Term>
<ListItem>
<Para>Directs <Command>fts</Command> to use the DFS server principal name of the machine on which
the command is issued as the identity of the issuer.  Use this option only if
the command is issued from a DFS server machine (a machine that has a DFS
server principal in the local Registry Database).  You must be logged into the
server machine as <Literal>root</Literal> for this option to work.  If you use this option,
do not use the <Option>noauth</Option> option.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Option>verbose</Option></Term>
<ListItem>
<Para>Directs <Command>fts</Command> to provide detailed information about its actions as it
executes the command.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Option>help</Option></Term>
<ListItem>
<Para>Prints the online help for this command.  All other valid options specified
with this option are ignored.
</Para>
</ListItem>
</VarListEntry>
</VariableList>
</RefSect1>
<RefSect1>
<Title>DESCRIPTION</Title>
<Para>The <Command>fts update</Command> command asks the Replication Server to make an immediate
update of replicas of the read/write DCE LFS fileset specified with the
<Option>fileset</Option> option.  The effect of the command depends on whether the
fileset to be updated uses Scheduled or Release Replication, as follows:
<!--no-op:  l-->
</Para>
<ItemizedList>
<ListItem>
<Para><Replaceable>For a fileset that uses Scheduled Replication</Replaceable>, the command directs the
Replication Servers on the indicated File Server machines to perform an
immediate update based on the read/write version of the fileset.  The
Replication Servers ignore the value of the MinRepDelay parameter associated
with the fileset; they immediately begin updating the replicas to match the
version of the read/write fileset that exists at the time the command is
issued.
</Para>
</ListItem>
<ListItem>
<Para><Replaceable>For a fileset that uses Release Replication</Replaceable>, the command directs the
Replication Servers on the indicated File Server machines to perform an
immediate update based on the read-only replica that is stored on the same
File Server machine as the read/write fileset (the replica that was created
when the <Command>fts release</Command> command was last used for the fileset).  The command
does <Symbol Role="Variable">not</Symbol> first update the read-only replica on the read/write fileset's
File Server machine.  Because the MinRepDelay parameter does not apply to a
fileset that uses Release Replication, the replicas should already be updated
to match the replica on the read/write fileset's machine; the command should
have no effect.
</Para>
</ListItem>
</ItemizedList>
<!--no-op:  b-->
<Para>To indicate the replicas of the specified fileset that are to be updated, use
the command's <Option>all</Option> or <Option>server</Option> option as follows:
<!--no-op:  l-->
</Para>
<ItemizedList>
<ListItem>
<Para>To update all replicas of the specified fileset, use the <Option>all</Option> option.
</Para>
</ListItem>
<ListItem>
<Para>To update the replica stored on a specific File Server machine, identity the
machine with the <Option>server</Option> option.
</Para>
</ListItem>
</ItemizedList>
<!--no-op:  b-->
<Para>Note that, as with releasing a new version of a fileset that uses Release
Replication, forcing an update of a fileset that uses Scheduled Replication
does not ensure immediate access to data in the new version of the replica.
A Cache Manager continues to provide data cached from the old version of the
replica until the MaxAge for the fileset expires or until the Cache Manager
needs to access data from the replica that it has not already cached.
</Para>
<Para>To gain immediate access to data in the new version of the replica,
issue the <Command>cm flush</Command> or <Command>cm flushfileset</Command> command to flush the
old data from the cache.  This forces the Cache Manager to replace
data it has cached from the replica.  Replication Servers begin
replication in parallel; however, until all replicas have been
updated, you cannot directly force the Cache Manager to access data
from the new version of the replica.
</Para>
<Para>The <Command>fts update</Command> command does not change the replication type and
parameters defined for the specified fileset.  Before the <Command>fts update</Command>
command can be used, the <Command>fts setrepinfo</Command> command must be used to define
the replication parameters for the read/write fileset.  The <Command>fts addsite</Command>
command must also be used to define at least one replication site for the
read/write fileset.
</Para>
<Para>Use the <Command>fts lsreplicas</Command> command to check the status of replicas of the
fileset.  Use the <Command>fts statrepserver</Command> command to check the status of the
Replication Server on a File Server machine.
</Para>
<RefSect2>
<Title>Privilege Required</Title>
<Para>No privileges are required.
</Para>
</RefSect2>
</RefSect1>
<RefSect1>
<Title>EXAMPLES</Title>
<Para>The following command requests an immediate update of the replica of the
read/write fileset named <Literal>pmax_osf1.bin</Literal> at the replication site defined
on the File Server machine named <Literal>fs3</Literal>:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Literal>fts update pmax_osf1.bin /.../abc.com/hosts/fs3</Literal>
</UserInput></ProgramListing></Para>
</InformalExample>
</RefSect1>
<RefSect1>
<Title>RELATED INFORMATION</Title>
<!--no-op:  l-->
<Para>Commands:
<Literal>cm&ensp;flush(8dfs)</Literal>,
<Literal>cm&ensp;flushfileset(8dfs)</Literal>,
<Literal>fts&ensp;addsite(8dfs)</Literal>,
<Literal>fts&ensp;lsreplicas(8dfs)</Literal>,
<Literal>fts&ensp;release(8dfs)</Literal>,
<Literal>fts&ensp;setrepinfo(8dfs)</Literal>,
<Literal>fts&ensp;statrepserver(8dfs).
<!--no-op:  b-->
<IndexTerm Id="DFSAGR.MAN172.indx.3" SpanEnd="DFSAGR.MAN172.indx.1"><IndexTerm Id="DFSAGR.MAN172.indx.4" SpanEnd="DFSAGR.MAN172.indx.2"></Literal></Para>
</RefSect1>
<!--+ 10/19/96 18:43:16
    | tagMorph:  $Id: fts_update.8dfs,v 1.1.2.4 1996/11/07 18:55:32 weir Exp $
    | tagMorph library:  $Id: fts_update.8dfs,v 1.1.2.4 1996/11/07 18:55:32 weir Exp $
    | sml-to-docbook:  1.23
    +-->
</RefEntry>
