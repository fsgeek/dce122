<!--
# @OSF_COPYRIGHT@
# 
# 
# HISTORY
# $Log: gateway_app.sgm,v $
# Revision 1.1.2.6  1996/12/15  23:02:01  wardr
# 	{edit,R1.2.2}
# 	[D[DFiformatting problems before penultimate build
# 	[1996/12/15  23:00:30  wardr]
#
# Revision 1.1.2.5  1996/12/14  23:14:22  wardr
# 	{edit,R1.2.2}
# 	Fixed figure problems
# 	[1996/12/14  23:12:42  wardr]
# 
# Revision 1.1.2.4  1996/11/06  18:47:11  weir
# 	Cleaned up history
# 	[1996/11/06  18:46:04  weir]
# 
# Revision 1.1.2.3  1996/10/25  17:06:21  carrig
# 	{enh,R1.2.2}
# 	Fixed VarLists
# 	[1996/10/25  17:06:05  carrig]
# 
# Revision 1.1.2.2  1996/10/24  20:10:28  carrig
# 	{enh,R1.2.2}
# 	Fixed tables
# 	[1996/10/24  20:08:33  carrig]
# 
# Revision 1.1.2.1  1996/10/22  20:42:55  wardr
# 	{edit,R1.2.2}
# 	Initial checkin after sgml conversion
# 	[1996/10/22  20:41:13  wardr]
# 
# Revision 1.1.1.2  1996/10/22  20:41:13  wardr
# 	{edit,R1.2.2}
# 	Initial checkin after sgml conversion
# 
# $EndLog$
-->
<!---->
<!-- Fragment document type declaration subset:
ArborText, Inc., 1988-1993, v.4001
<!DOCTYPE Book PUBLIC "-//Davenport//DTD DocBook V2.4//EN" [
]>
-->
<!-- COPYRIGHT NOTICE-->
<!-- Copyright (c) 1990, 1991, 1992, 1993, 1994 Open Software Foundation, Inc.-->
<!-- Copyright (c) 1994 Hewlett-Packard Company-->
<!-- Copyright (c) 1994 Transarc Corporation-->
<!-- ALL RIGHTS RESERVED (DCE).  See the file named COPYRIGHT.DCE for-->
<!-- the full copyright text.-->
<!-- -->
<!-- HISTORY-->
<!-- Revision 1.1.7.1  1996/05/14  19:52:28  wardr-->
<!-- 	{enh,R1.2.2}-->
<!-- 	Removed changebars-->
<!-- 	[1996/05/14  19:51:16  wardr]-->
<!---->
<!-- Revision 1.1.4.2  1995/12/29  17:31:13  wfl-->
<!-- 	{edit, R1.2.1}-->
<!-- 	made copy edits-->
<!-- 	[1995/12/29  17:30:08  wfl]-->
<!-- -->
<!-- Revision 1.1.4.1  1995/11/06  15:51:52  wfl-->
<!-- 	{enh,13187,R1.2.1}-->
<!-- 	HP update to NFS gateway-->
<!-- 	[1995/11/06  15:51:11  wfl]-->
<!-- -->
<!-- Revision 1.1.2.3  1995/07/24  18:42:42  weir-->
<!-- 	Prentice-Hall corrections-->
<!-- 	[1995/07/24  18:42:07  weir]-->
<!-- -->
<!-- Revision 1.1.2.1  1994/08/25  20:54:21  jeff-->
<!-- 	{defect, 11180, R1.1}-->
<!-- 	Incorporate DFS/NFS Gateway documentation.-->
<!-- 	[1994/08/25  20:53:36  jeff]-->
<!-- -->
<!-- -->
<Appendix Id="DFSAGR.GAPP.div.1">
<Title>The DFS/NFS Secure Gateway</Title>
<IndexTerm Id="DFSAGR.GAPP.indx.1">
<Primary>DFS/NFS Gateway</Primary>
<Secondary>about</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.GAPP.indx.2">
<Primary>NFS</Primary>
<Secondary>access to DFS</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.GAPP.indx.3">
<Primary>DFS</Primary>
<Secondary>accessing from NFS</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.GAPP.indx.4">
<Primary>accessing DFS from NFS</Primary>
</IndexTerm>
<Para>The Distributed File Service/Network File System (DFS/NFS) Secure Gateway
provides a mechanism for granting authenticated access to the DFS filespace
from an NFS client.  The DFS/NFS Secure Gateway allows users to access data
in the DFS filespace from a machine that is configured as an NFS client but
not as a DCE client.
</Para>
<Para>To use the DFS/NFS Secure Gateway for authenticated access to DFS, you
must configure at least one Gateway Server machine.  A Gateway Server
machine must be a DFS client in the DCE cell to which access is to be
provided.  One function of a Gateway Server machine is to export the
root of the DCE global namespace, <Filename>/...</Filename>, via NFS.  On each NFS
client from which users are to access DFS, you then mount <Filename>/...</Filename>.
All users of the NFS clients then have unauthenticated access to DFS.
</Para>
<Para><IndexTerm Id="DFSAGR.GAPP.indx.5">
<Primary>Gateway</Primary>
</IndexTerm>
<IndexTerm Id="DFSAGR.GAPP.indx.6">
<Primary>Secure Gateway</Primary>
</IndexTerm>
<IndexTerm Id="DFSAGR.GAPP.indx.7">
<Primary>DFS/NFS Gateway</Primary>
<Secondary><Literal>@host</Literal> variable</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.GAPP.indx.8">
<Primary>DFS/NFS Gateway</Primary>
<Secondary><Literal>@sys</Literal> variable</Secondary>
</IndexTerm>The DFS/NFS Secure Gateway recognizes the <Literal>@sys</Literal> and
<Literal>@host</Literal> variables on the NFS client system. This allows the Gateway
system to resolve pathnames to binaries and other system-dependent
files correctly, based on the user's login system name and system type.
</Para>
<Para>The <Literal>@host</Literal> variable contains the name of the NFS client, as
returned by <Literal>gethostname()</Literal>, that is accessing the DFS
namespace. The <Literal>@sys</Literal> variable, which is a unique name derived from
<Literal>uname()</Literal>, describes the machine architecture and OS type.
Examples of <Literal>@sys</Literal> values include <Literal>pmax_osf1</Literal> and <Literal>rs_aix32</Literal>.
</Para>
<Para>The primary function of a Gateway Server machine is to provide DCE
authentication to users of NFS clients.  NFS users who have valid accounts in
the registry database of the DCE cell authenticate to DCE to gain authenticated
access to DFS.  Depending on the needs of your users and the security
considerations of your DCE cell, you can provide local authentication to
DCE from Gateway Server machines, remote authentication to DCE from NFS
clients, or both.  Local and remote authentication work as follows:
</Para>
<ItemizedList>
<ListItem>
<IndexTerm Id="DFSAGR.GAPP.indx.9">
<Primary>DFS/NFS Gateway</Primary>
<Secondary>local authentication</Secondary>
</IndexTerm>
<Para><Replaceable>Local authentication</Replaceable> to DCE from Gateway Server machines is provided via
the <Command>dfsgw add</Command> command.  With local authentication, you can allow users to
issue the <Command>dfsgw add</Command> command to authenticate themselves, or you can
control access to DFS by allowing only system administrators to provide
authentication via the <Command>dfsgw add</Command> command. (The <Command>dfsgw</Command> command suite
includes additional commands to provide for central administration from Gateway
Server machines.)
</Para>
<Para>Local authentication requires little configuration, but it provides a limited
approach to authentication.  Configuration consists only of installing the
<Command>dfsgw</Command> commands on the Gateway Server machines.  However, authentication
requires either administrative intervention or remote access to the Gateway
Server machine (via the <Command>telnet</Command> program, for example); the latter approach
results in user passwords being sent over the network in the clear.
</Para>
</ListItem>
<ListItem>
<IndexTerm Id="DFSAGR.GAPP.indx.10">
<Primary>DFS/NFS Gateway</Primary>
<Secondary>remote authentication</Secondary>
</IndexTerm>
<Para><Replaceable>Remote authentication</Replaceable> to DCE from NFS clients is provided via the
<Command>dfs_login</Command> command.  With remote authentication, you allow users to issue
the <Command>dfs_login</Command> command to authenticate themselves.
</Para>
<Para>Remote authentication requires additional configuration, but it provides a less
burdensome and more secure approach to authentication.  Configuration consists
of installing and configuring the Gateway Server (<Command>dfsgwd</Command>) process on the
Gateway Server machines, installing the <Command>dfs_login</Command> command (and the
<Command>dfs_logout</Command> command) on the NFS clients, configuring Kerberos on the NFS
clients, and configuring the remote authentication service on both the Gateway
Server machines and the NFS clients.  However, authentication requires no
administrative measures, and user passwords are never sent in the clear.
</Para>
</ListItem>
</ItemizedList>
<Para><IndexTerm Id="DFSAGR.GAPP.indx.11">
<Primary>DFS/NFS Gateway</Primary>
<Secondary>Process Activation Group</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.GAPP.indx.12">
<Primary>Process Activation Group</Primary>
</IndexTerm>The <Command>dfsgw add</Command> and <Command>dfs_login</Command> commands both result in authenticated
access to DFS from an NFS client.  To provide a user with authenticated access,
each command obtains a ticket-granting ticket (TGT) for the user from the DCE
Security Service.  The TGT is used to create a valid login context for the user.
The login context includes a Process Activation Group (PAG), which DFS stores
in the kernel of the Gateway Server machine.  The PAG identifies the user's TGT;
the TGT serves as the user's DCE credentials.
<?sml-break><?sml-need 20></Para>
<Para><IndexTerm Id="DFSAGR.GAPP.indx.13">
<Primary>DFS/NFS Gateway</Primary>
<Secondary>authentication table</Secondary>
</IndexTerm>On the Gateway Server machine, an association is created between the UNIX user
identification number (UID) of the user and the network address of the NFS
client from which DFS access is desired.  A mapping is then created between
this pair and the PAG created for the user.  The mapping is stored as an entry
in a local authentication table (AT), which, like the PAG, resides in the
kernel of the machine.  The mapping provides the user with authenticated access
to DFS from the NFS client.
</Para>
<Para>Each mapping grants a user authenticated access only from the specific NFS
client for which the mapping exists.  For authenticated access from a different
NFS client, a user must use the <Command>dfsgw add</Command> or <Command>dfs_login</Command> command to
create a new mapping for that client.
</Para>
<Para>A user's DCE credentials are good only for the lifetime of the
TGT. The ticket lifetime is dictated by the registry database of the
DCE cell.  By default, each ticket receives the default ticket
lifetime in effect in the registry database.  The <Command>dfs_login</Command>
command includes a <Option>l</Option> option that can be used to request a
different lifetime, but a requested lifetime is constrained by the
policies in effect in the registry database.  Once a user's TGT
expires, the user must obtain new DCE credentials.
</Para>
<Para>A user who wants to cancel authenticated access to DFS before the credentials
expire can issue either the <Command>dfs_logout</Command> command from the NFS client for
which the credentials were granted or the <Command>dfsgw delete</Command> command from the
Gateway Server machine.  Both commands remove the user's entry for the NFS
client from the authentication table on the Gateway Server machine.  Either
command can be used to end the authenticated session, regardless of which
command was used to obtain the credentials.  Because the authentication table
resides in memory, all authenticated sessions are terminated if the machine
configured as a Gateway Server is rebooted.
</Para>
<Para>The following sections provide complete instructions for
configuring Gateway Server machines and NFS clients to provide NFS
users with either local or remote authentication to DCE.  The final
section in this appendix provides detailed information about how
users authenticate to DCE and how they access DFS from an NFS client.
<?sml-break><?sml-need 20></Para>
<Sect1 Id="DFSAGR.GAPP.div.2">
<Title>Configuring Gateway Server Machines</Title>
<IndexTerm Id="DFSAGR.GAPP.indx.14">
<Primary>DFS/NFS Gateway</Primary>
<Secondary>about Gateway Servers</Secondary>
</IndexTerm>
<Para>A Gateway Server machine provides authenticated access to the DFS filespace to
users on NFS clients.  You can configure any machine that is configured as a
DFS client and an NFS server as a Gateway Server.  Following successful
configuration, the machine provides authenticated access to the DFS filespace,
and it exports the root of the DCE namespace, <Filename>/...</Filename>, via NFS.
</Para>
<Para>You can configure multiple Gateway Server machines to provide DFS access from
multiple sources.  However, users do not randomly select Gateway Server machines
from NFS clients.  By default, users on an NFS client contact the Gateway Server
machine that exports <Filename>/...</Filename> to the client.  If you want to balance the load
among multiple Gateway Servers, you must configure your NFS clients so that
each client mounts <Filename>/...</Filename> from a different Gateway Server machine. (Section
A.2 provides information about configuring NFS clients.)
</Para>
<Para>Depending on how closely you want to control access to the DFS filespace, 
configure your Gateway Server machines in one of the following ways:
</Para>
<ItemizedList>
<ListItem>
<Para>Configure the Gateway Server machines so that users <Replaceable>cannot</Replaceable> issue the
<Command>dfs_login</Command> command to authenticate to DCE.
</Para>
<Para>This configuration allows system administrators to manage all DCE
authentication from the Gateway Server machines.  You can allow users to issue
the <Command>dfsgw add</Command> command themselves, or you can limit use of the command to
administrators only.  To configure a Gateway Server machine without enabling
remote authentication via the <Command>dfs_login</Command> command, follow the instructions
in Section A.1.1.
</Para>
</ListItem>
<ListItem>
<Para>Configure the Gateway Server machines so that users <Replaceable>can</Replaceable> issue the
<Command>dfs_login</Command> command to authenticate to DCE.
</Para>
<Para>This configuration allows users of NFS clients to acquire their own DCE
credentials from the NFS clients.  To configure a Gateway Server machine and
enable remote authentication via the <Command>dfs_login</Command> command, follow the
instructions in Section A.1.2.
</Para>
</ListItem>
</ItemizedList>
<?sml-break>
<?sml-need 20>
<Para>Before configuring a Gateway Server machine, you must do the following:
</Para>
<ItemizedList>
<ListItem>
<Para>Configure a DCE cell that includes DFS.
</Para>
</ListItem>
<ListItem>
<Para>Configure each machine that is to become a Gateway Server as a DFS client and
an NFS server.
</Para>
</ListItem>
<ListItem>
<Para>Ensure proper synchronization among the system clocks on machines that are
to become Gateway Servers, machines configured as NFS clients that are to
contact the Gateway Servers, and machines in the DCE cell to be contacted.
You must keep the system clocks on these machines synchronized at all times.
</Para>
</ListItem>
</ItemizedList>
<Para>Once you have met these prerequisites, you can configure your Gateway Server
machines.
</Para>
<Sect2 Id="DFSAGR.GAPP.div.3">
<Title>Configuring a Gateway Server Without Enabling Remote Authentication</Title>
<IndexTerm Id="DFSAGR.GAPP.indx.15">
<Primary>DFS/NFS Gateway</Primary>
<Secondary>configuring Gateway Servers without remote authentication</Secondary>
</IndexTerm>
<Para>Perform the steps in this section to enable DCE authentication from a Gateway
Server machine without enabling it from NFS clients that contact the Gateway
Server.  Users can authenticate only by issuing the <Command>dfsgw add</Command> command on
the Gateway Server machine (or by having a system administrator issue the
command for them, if administrators control authentication to the DCE cell).
</Para>
<Para>To allow users of NFS clients to authenticate to DCE from the Gateway Server
machine but not from NFS clients that contact the Gateway Server, perform the
following steps on the machine to be configured as a Gateway Server:
</Para>
<OrderedList>
<ListItem>
<Para>Log in as the local <Literal>root</Literal> user on the machine.
</Para>
</ListItem>
<ListItem>
<IndexTerm Id="DFSAGR.GAPP.indx.16">
<Primary><Command>dfsgw</Command> command suite</Primary>
</IndexTerm>
<IndexTerm Id="DFSAGR.GAPP.indx.17">
<Primary>DFS/NFS Gateway</Primary>
<Secondary><Command>dfsgw</Command> commands</Secondary>
</IndexTerm>
<Para>Install the binary file for the <Command>dfsgw</Command> command suite in the
directory <Symbol Role="Variable">dcelocal</Symbol><Filename>/bin</Filename> on the machine.  The <Command>dfsgw</Command>
command suite provides a local interface to the authentication table
maintained on the Gateway Server machine.  Commands in the <Command>dfsgw</Command>
suite can be used to add, delete, and view mappings in the
authentication table. (See Sections A.3.2.2 through A.3.2.4 for
information about using these commands.)
<?sml-break><?sml-need 20></Para>
</ListItem>
<ListItem>
<Para>Export the DCE global root directory, <Filename>/...</Filename>, via NFS.  This is typically
accomplished via the <Command>exportfs</Command> command; the exact command and procedure
depends on your vendor's implementation of NFS. (See your vendor's NFS
documentation for more information.)
</Para>
</ListItem>
</OrderedList>
<Para>The Gateway Server machine is now configured to provide DCE
authentication via only the <Command>dfsgw add</Command> command.  Repeat these
steps on each DFS client that is to be configured as a Gateway Server
in this manner.  Should you later decide to allow users to
authenticate to DCE from NFS clients that contact the Gateway Server,
simply perform the steps in Section A.1.2 on the Gateway Server
machine.
</Para>
</Sect2>
<Sect2 Id="DFSAGR.GAPP.div.4">
<Title>Using dce_config to Configure the Gateway Server and Enable Remote Authentication</Title>
<Para><IndexTerm Id="DFSAGR.GAPP.indx.18">
<Primary>DFS/NFS Gateway</Primary>
<Secondary>default results</Secondary>
</IndexTerm>To configure a DFS/NFS Secure Gateway by using <Literal>dce_config</Literal>, and get
the default results, perform the following steps. If you
want to manually configure the Gateway and make specific changes, go
to Section A.1.3.
</Para>
<Para>On each server machine:
</Para>
<OrderedList>
<ListItem>
<Para>Log in as the local <Literal>root</Literal> user on the machine.
</Para>
</ListItem>
<ListItem>
<Para>Install the binary file for the <Command>dfsgwd</Command> process in the
directory <Symbol Role="Variable">dcelocal</Symbol><Filename>/bin</Filename>. The <Command>dfsgwd</Command> process provides users of NFS clients with a
remote interface to the authentication table maintained on the Gateway Server
machine.
</Para>
</ListItem>
<ListItem>
<Para>Use the <Command>exportfs</Command><Literal> command to export the DCE global </Literal><Literal>root</Literal>
directory (<Filename>/...</Filename>) via NFS.
</Para>
</ListItem>
<ListItem>
<Para>Add the <Command>dfsgw</Command> service to the Internet services database.
The <Command>dfsgw</Command> service provides the login facility for the
DFS/NFS Secure Gateway. To add the service, do one of the following:
</Para>
<ItemizedList>
<ListItem>
<Para><Replaceable>If you use the </Replaceable><Filename>/etc/services</Filename><Replaceable> file in your environment</Replaceable>, add an
entry for the <Command>dfsgw</Command> services to the <Filename>/etc/services</Filename> file.
</Para>
</ListItem>
<ListItem>
<Para><Replaceable>If you use a Network Information Service (NIS) services map in your
environment</Replaceable>, add an entry for the <Command>dfsgw</Command> service to the NIS
services map file on the NIS master. Add the entry to the services
map for the first Gateway Server process only; do not add the entry
for additional Gateway Server processes or NFS clients.
</Para>
</ListItem>
</ItemizedList>
<Para>In either case, you must add the following entry for the service:
</Para>
<InformalExample>
<Para><ProgramListing>dfsgw     438/udp     dlog
</ProgramListing></Para>
</InformalExample>
<Para>where <Command>dfsgw</Command> is the name of the service, <Literal>438</Literal> is the port at
which the service receives RPCs, <Literal>udp</Literal> is the protocol the service
uses to communicate, and <Literal>dlog</Literal> is an alias for the <Command>dfsgw</Command>
service. 
</Para>
<Para>Run <Literal>dce_config</Literal> as follows:
</Para>
<ItemizedList>
<ListItem>
<Para>From the Main <Literal>DCE Configuration</Literal> menu, select <Literal>4</Literal> (DFS Client).
</Para>
</ListItem>
<ListItem>
<Para>Enter the cell administrator's name and password.
</Para>
</ListItem>
<ListItem>
<Para>Enter <Literal>y</Literal> at the prompt <Literal>Would you like to configure this client
as an NFS Gateway?</Literal>
</Para>
</ListItem>
<ListItem>
<Para>Respond to the prompt <Literal>Would you like to use BOS server to
monitor and administer the dfsgwd process?</Literal> as follows:
</Para>
<Para>If you want the <Command>dfsgw</Command> server administrator to be able to
administer and monitor the <Command>dfsgw</Command> server via BOS commands,
enter <Literal>y</Literal>. Otherwise, enter <Literal>n</Literal>.
</Para>
</ListItem>
</ItemizedList>
<Para>Configuration of the node as an NFS/DFS Gateway Server is complete.
</Para>
</ListItem>
</OrderedList>
</Sect2>
<Sect2 Id="DFSAGR.GAPP.div.5">
<Title>Manually Configuring a Gateway Server and Enabling Remote Authentication</Title>
<IndexTerm Id="DFSAGR.GAPP.indx.19">
<Primary>DFS/NFS Gateway</Primary>
<Secondary>configuring Gateway Servers with remote authentication</Secondary>
</IndexTerm>
<Para>Perform the steps in this section to enable DCE authentication either from a
Gateway Server machine or from NFS clients that contact the Gateway Server.
Users authenticate from the Gateway Server machine by issuing the <Command>dfsgw
add</Command> command; they authenticate from an NFS client by issuing the
<Command>dfs_login</Command> command.  A Gateway Server machine to be configured in this
manner runs the Gateway Server (<Command>dfsgwd</Command>) process.  The steps in Section
A.1.3.2 configure the <Command>dfsgwd</Command> process on the Gateway Server machine.
</Para>
<Para>A Gateway Server machine configured in this way should also run the Basic
OverSeer (BOS) Server to monitor and simplify administration of the
<Command>dfsgwd</Command> process.  The steps in Section A.1.2.1 configure a BOS Server
(<Command>bosserver</Command>) process on the Gateway Server machine.  Perform the steps in
Section A.1.3.1 only if the BOS Server is not already running on the machine.
(Note that you typically run the BOS Server only on DFS servers, but you can
also run it on DFS clients.  See Chapters 4 and 5 for more information about
the BOS Server.)
<?sml-break><?sml-need 20></Para>
<Sect3 Id="DFSAGR.GAPP.div.6">
<Title>Configuring the BOS Server Process</Title>
<IndexTerm Id="DFSAGR.GAPP.indx.20">
<Primary>DFS/NFS Gateway</Primary>
<Secondary>configuring the BOS Server process</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.GAPP.indx.21">
<Primary>BOS Server</Primary>
<Secondary>configuring for DFS/NFS Gateway</Secondary>
</IndexTerm>
<Para>To configure the BOS Server (<Command>bosserver</Command>) process, perform the following
steps on the machine to be configured as a Gateway Server.  In all cases,
<Symbol Role="Variable">hostname</Symbol> is the hostname of the local machine. (Note that you may need
to install the <Command>bosserver</Command> binary file on the machine if it is not already
present.  See your vendor's installation and configuration documentation for
information about installing the binary file.)
</Para>
<OrderedList>
<ListItem>
<Para>Authenticate to DCE as a principal who has the following ACL permissions on
entries in the registry database:
</Para>
<ItemizedList>
<ListItem>
<Para>The <Literal>i</Literal> permission on the directory <Literal>hosts/</Literal><Symbol Role="Variable">hostname</Symbol>.
</Para>
</ListItem>
<ListItem>
<Para>The <Literal>m</Literal>, <Literal>a</Literal>, <Literal>u</Literal>, <Literal>g</Literal>, and <Literal>c</Literal> permissions on the
principal <Literal>hosts/</Literal><Symbol Role="Variable">hostname</Symbol><Filename>/dfs-server</Filename>.  The principal is created
during the configuration steps.
</Para>
</ListItem>
<ListItem>
<Para>The <Literal>t</Literal> and <Literal>M</Literal> permissions on the group <Literal>subsys/dce/dfs-admin</Literal>.
</Para>
</ListItem>
<ListItem>
<Para>The <Literal>R</Literal>, <Literal>t</Literal>, and <Literal>M</Literal> permissions on the organization <Literal>none</Literal>.
</Para>
</ListItem>
<ListItem>
<Para>The <Literal>r</Literal> permission on the registry Policy object for the DCE cell.
</Para>
</ListItem>
</ItemizedList>
<Para>This requirement is most easily met by authenticating to a privileged DCE
identity (for example, <Literal>cell_admin</Literal> or a principal who is a member of the
group <Literal>acct-admin</Literal>).
</Para>
</ListItem>
<ListItem>
<Para>Create the principal <Literal>hosts/</Literal><Symbol Role="Variable">hostname</Symbol><Filename>/dfs-server</Filename>, and create an
account for the principal.  Use the following <Command>dcecp</Command> commands to create
the principal and account in the registry database.  In the commands,
<Symbol Role="Variable">password</Symbol> is the password of the DCE identity to which you are
authenticated.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>dcecp</Command>
dcecp> <Literal>principal create hosts/</Literal><Symbol Role="Variable">hostname</Symbol><Filename>/dfs-server
</Filename>dcecp> \
<Literal>account create hosts/</Literal><Symbol Role="Variable">hostname</Symbol><Literal>/dfs-server</Literal>> \
<Literal>-group subsys/dce/dfs-admin </Literal>> <Option>org</Option> <Replaceable>none</Replaceable> \
<Option>password</Option><Symbol Role="Variable">password</Symbol> <Option>mypwd</Option> <Symbol Role="Variable">password</Symbol>
</UserInput></ProgramListing></Para>
</InformalExample>
<?sml-break>
<?sml-need 20>
</ListItem>
<ListItem>
<Para>Grant the group <Literal>subsys/dce/dfs-admin</Literal> the appropriate permissions on the
ACL for the <Literal>hosts/</Literal><Symbol Role="Variable">hostname</Symbol><Filename>/dfs-server</Filename> principal in the registry
database:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>dcecp> <Literal>acl mod /.:/sec/principal/hosts/</Literal><Symbol Role="Variable">hostname</Symbol><Literal>/dfs-server</Literal>> \
<Option>add</Option> <Replaceable>{group subsys/dce/dfs-admin rcDnfmag}</Replaceable>
dcecp> <Command>exit</Command>
</UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
<ListItem>
<Para>Use the <Command>su</Command> command to become the local <Literal>root</Literal> user on the machine:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>su</Command>
Password: <Symbol Role="Variable">root_password</Symbol>
</UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
<ListItem>
<Para>Add a server key for the <Literal>hosts/</Literal><Symbol Role="Variable">hostname</Symbol><Filename>/dfs-server</Filename> principal to
the <Filename>/krb5/v5srvtab</Filename> keytab file on the machine.  The <Command>dced</Command> process
recognizes the keytab file by the entry name <Literal>self</Literal>.  The command creates
the keytab file if the file does not already exist.  In the commands,
<Symbol Role="Variable">password</Symbol> is the password of the DCE identity to which you were
authenticated when you created the principal.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Command>dcecp</Command>
dcecp> <Literal>keytab add self -member hosts/</Literal><Symbol Role="Variable">hostname</Symbol><Literal>/dfs-server \
</Literal>> <Option>key</Option> <Symbol Role="Variable">password</Symbol>
dcecp> <Literal>keytab add self -member hosts/</Literal><Symbol Role="Variable">hostname</Symbol><Literal>/dfs-server \
</Literal>> \
<Option>random</Option> <Option>registry</Option>
dcecp> <Command>exit</Command>
</UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
<ListItem>
<Para>Remove the <Filename>BosConfig</Filename> file and any administrative lists that may exist
from a previous configuration of the BOS Server on the machine:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Command>rm -f </Command><Symbol Role="Variable">dcelocal</Symbol><Filename>/var/dfs/BosConfig</Filename>
# <Command>rm -f </Command><Symbol Role="Variable">dcelocal</Symbol><Literal>/var/dfs/admin.*</Literal>
</UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
<ListItem>
<Para>Start the <Command>bosserver</Command> process with DFS authorization checking disabled.
The process creates a new <Filename>BosConfig</Filename> file and a new <Filename>admin.bos</Filename>
file, which is the administrative list for the BOS Server.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Symbol Role="Variable">dcelocal</Symbol><Filename>/bin/bosserver -noauth &amp;</Filename>
</UserInput></ProgramListing></Para>
</InformalExample>
<?sml-break>
<?sml-need 20>
</ListItem>
<ListItem>
<Para>Add the group <Literal>subsys/dce/dfs-admin</Literal> to the <Filename>admin.bos</Filename> file:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Symbol Role="Variable">dcelocal</Symbol><Literal>/bin/bos addadmin -server /.:/hosts/</Literal><Symbol Role="Variable">hostname</Symbol><Literal> -adminlist \
admin.bos -group subsys/dce/dfs-admin</Literal>
</UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
<ListItem>
<Para>Enable DFS authorization checking by the BOS Server:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Symbol Role="Variable">dcelocal</Symbol><Literal>/bin/bos setauth -server /.:/hosts/</Literal><Symbol Role="Variable">hostname</Symbol> <Option>authchecking</Option> on
</UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
<ListItem>
<Para>Configure the <Command>bosserver</Command> process to start automatically when the system
is rebooted by removing the two <Literal>#</Literal> (number signs) from the following line
of the <Filename>/etc/rc.dfs</Filename> file (or its equivalent):
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>##daemonrunning $DCELOCAL/bin/bosserver
</UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
</OrderedList>
<Para>The BOS Server process is now fully configured on the machine.
</Para>
</Sect3>
<Sect3 Id="DFSAGR.GAPP.div.7">
<Title>Configuring the Gateway Server Process</Title>
<IndexTerm Id="DFSAGR.GAPP.indx.22">
<Primary>DFS/NFS Gateway</Primary>
<Secondary>configuring the Gateway Server process</Secondary>
</IndexTerm>
<Para>To configure the Gateway Server (<Command>dfsgwd</Command>) process, perform the following
steps on the machine to be configured as a Gateway Server.  The steps assume
that the BOS Server is already running on the machine.  In all of the steps,
<Symbol Role="Variable">hostname</Symbol> is the hostname of the local machine.
</Para>
<Note>
<Para>You need to perform some steps only when you configure the first Gateway
Server process.  Such steps are qualified with the phrase <Replaceable>for the first
Gateway Server process</Replaceable>.
</Para>
</Note>
<OrderedList>
<ListItem>
<Para><Replaceable>If you have not already done so</Replaceable>, perform all of the steps in Section
A.1.1 to install the <Command>dfsgw</Command> binary file on the machine and to export
<Filename>/...</Filename> from the machine.
</Para>
</ListItem>
<ListItem>
<Para><Replaceable>If you have not already done so</Replaceable>, log in as the local <Literal>root</Literal> user on
the machine.
</Para>
</ListItem>
<ListItem>
<IndexTerm Id="DFSAGR.GAPP.indx.23">
<Primary><Command>dfsgwd</Command> command</Primary>
</IndexTerm>
<IndexTerm Id="DFSAGR.GAPP.indx.24">
<Primary>DFS/NFS Gateway</Primary>
<Secondary><Command>dfsgwd</Command> command</Secondary>
</IndexTerm>
<Para>Install the binary file for the <Command>dfsgwd</Command> process in the directory
<Symbol Role="Variable">dcelocal</Symbol><Filename>/bin</Filename> on the machine.  The <Command>dfsgwd</Command> process provides users
of NFS clients with a remote interface to the authentication table maintained
on the Gateway Server machine.
<?sml-break><?sml-need 20></Para>
</ListItem>
<ListItem>
<Para>Add the <Command>dfsgw</Command> service to the Internet services database.  The <Command>dfsgw</Command>
service provides the login facility for the DFS/NFS Secure Gateway.  To add the
service, do one of the following:
</Para>
<ItemizedList>
<ListItem>
<Para><Replaceable>If you use the </Replaceable><Filename>/etc/services</Filename><Replaceable> file</Replaceable> in your environment, add an entry
for the <Command>dfsgw</Command> service to the <Filename>/etc/services</Filename> file on the machine.
</Para>
</ListItem>
<ListItem>
<Para><Replaceable>If you use a Network Information Service (NIS) services map</Replaceable> in your
environment, add an entry for the <Command>dfsgw</Command> service to the NIS services map
file on the NIS master.  Add the entry to the services map only <Replaceable>for the first
Gateway Server process</Replaceable>; do not add the entry for additional Gateway Server
processes or NFS clients.
</Para>
</ListItem>
</ItemizedList>
<Para>In either case, you need to add the following entry for the service:
</Para>
<InformalExample>
<Para><ProgramListing>dfsgw     438/udp     dlog
</ProgramListing></Para>
</InformalExample>
<Para>where <Command>dfsgw</Command> is the name of the service, <Literal>438</Literal> is the port at which
the service receives RPCs, <Literal>udp</Literal> is the protocol the service uses to
communicate, and <Literal>dlog</Literal> is an alias for the <Command>dfsgw</Command> service.  See the
reference page for the <Filename>services</Filename> file for more information.
</Para>
</ListItem>
<ListItem>
<Para>Authenticate to DCE as a principal who has the following ACL permissions on
entries in the registry database:
</Para>
<ItemizedList>
<ListItem>
<Para>The <Literal>i</Literal> permission on the directory <Literal>hosts/</Literal><Symbol Role="Variable">hostname</Symbol>.
</Para>
</ListItem>
<ListItem>
<Para><Replaceable>For the first Gateway Server process</Replaceable>, the <Literal>i</Literal> permission on the
directory <Literal>subsys/dce</Literal>.
</Para>
</ListItem>
<ListItem>
<Para>The <Literal>m</Literal>, <Literal>a</Literal>, <Literal>u</Literal>, and <Literal>g</Literal> permissions on the principal
<Literal>hosts/</Literal><Symbol Role="Variable">hostname</Symbol><Filename>/dfsgw-server</Filename>.  The principal is created during the
configuration steps.
</Para>
</ListItem>
<ListItem>
<Para>The <Literal>t</Literal> and <Literal>M</Literal> permissions on the group <Literal>subsys/dce/dfsgw-admin</Literal>.
The group is created during the configuration steps.
</Para>
</ListItem>
<ListItem>
<Para>The <Literal>R</Literal>, <Literal>t</Literal>, and <Literal>M</Literal> permissions on the organization <Literal>none</Literal>.
</Para>
</ListItem>
<ListItem>
<Para>The <Literal>r</Literal> permission on the registry Policy object for the DCE cell.
</Para>
</ListItem>
</ItemizedList>
<Para>This requirement is most easily met by authenticating to a privileged DCE
identity (for example, <Literal>cell_admin</Literal> or a principal who is a member of the
group <Literal>acct-admin</Literal>).
<?sml-break><?sml-need 20></Para>
</ListItem>
<ListItem>
<Para>Invoke the <Command>dcecp</Command> command:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>dcecp</Command>
</UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
<ListItem>
<Para><Replaceable>For the first Gateway Server process</Replaceable>, create the group
<Literal>subsys/dce/dfsgw-admin</Literal> in the registry database.  Use the following
<Command>dcecp</Command> command to create the group:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>dcecp> <Literal>group create subsys/dce/dfsgw-admin
</Literal></UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
<ListItem>
<Para>Create the principal <Literal>hosts/</Literal><Symbol Role="Variable">hostname</Symbol><Filename>/dfsgw-server</Filename>, and create an
account for the principal.  The Gateway Server process communicates as the
principal <Literal>hosts/</Literal><Symbol Role="Variable">hostname</Symbol><Filename>/dfsgw-server</Filename>.  Use the following
<Command>dcecp</Command> commands to create the principal and account in the registry
database.  In the commands, <Symbol Role="Variable">password</Symbol> is the password of the DCE identity
to which you are authenticated.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>dcecp> <Literal>principal create hosts/</Literal><Symbol Role="Variable">hostname</Symbol><Filename>/dfsgw-server
</Filename>dcecp> \
<Literal>account create hosts/</Literal><Symbol Role="Variable">hostname</Symbol><Literal>/dfsgw-server</Literal>> \
<Option>group</Option> <Replaceable>subsys/dce/dfsgw-admin</Replaceable> <Option>org</Option> <Replaceable>none</Replaceable> <Option>password </Option><Symbol Role="Variable">password</Symbol><Literal> </Literal>>  \
<Option>mypwd</Option> <Symbol Role="Variable">password</Symbol>
dcecp> <Command>exit</Command>
</UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
<ListItem>
<Para>Use the <Command>su</Command> command to become the local <Literal>root</Literal> user on the machine:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>su</Command>
Password: <Symbol Role="Variable">root_password</Symbol>
</UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
<ListItem>
<Para>Add a server key for the <Literal>hosts/</Literal><Symbol Role="Variable">hostname</Symbol><Filename>/dfsgw-server</Filename> principal
to the <Filename>/krb5/v5srvtab</Filename> keytab file on the machine.  The <Command>dced</Command> process
recognizes the keytab file by the entry name <Literal>self</Literal>.  In the commands,
<Symbol Role="Variable">password</Symbol> is the password of the DCE identity to which you were
authenticated when you created the principal.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Command>dcecp</Command>
dcecp> <Literal>keytab add self -member hosts/</Literal><Symbol Role="Variable">hostname</Symbol><Literal>/dfsgw-server \
</Literal>> \
<Option>key</Option> <Symbol Role="Variable">password</Symbol>
dcecp> <Literal>keytab add self -member hosts/</Literal><Symbol Role="Variable">hostname</Symbol><Literal>/dfsgw-server \
</Literal>> \
<Option>random</Option> <Option>registry</Option>
dcecp> <Command>exit</Command>
</UserInput></ProgramListing></Para>
</InformalExample>
<?sml-break>
<?sml-need 20>
</ListItem>
<ListItem>
<Para>Log out as <Literal>root</Literal> to return to your authenticated DCE identity.
</Para>
</ListItem>
<ListItem>
<Para>If your current DCE identity is not included in the
<Symbol Role="Variable">dcelocal</Symbol><Filename>/var/dfs/admin.bos</Filename> file on the machine, either add the
identity to the file or authenticate to DCE as a principal who is included
in the file.  You can use the <Command>bos lsadmin</Command> command to list the principals
and groups included in the <Filename>admin.bos</Filename> file:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Symbol Role="Variable">dcelocal</Symbol><Literal>/bin/bos lsadmin -server /.:/hosts/</Literal><Symbol Role="Variable">hostname</Symbol><Literal> \
-adminlist admin.bos</Literal>
</UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
<ListItem>
<Para>Create a <Command>simple</Command> BOS Server process named <Command>dfsgw</Command> to run the
<Command>dfsgwd</Command> server process:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Symbol Role="Variable">dcelocal</Symbol><Literal>/bin/bos create -server /.:/hosts/</Literal><Symbol Role="Variable">hostname</Symbol><Literal> -process dfsgw \
-type simple -cmd </Literal><Symbol Role="Variable">dcelocal</Symbol><Filename>/bin/dfsgwd</Filename>
</UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
</OrderedList>
<Para>The Gateway Server process is now fully configured on the machine.
</Para>
</Sect3>
</Sect2>
</Sect1>
<Sect1 Id="DFSAGR.GAPP.div.8">
<Title>Configuring NFS Clients to Access DFS</Title>
<IndexTerm Id="DFSAGR.GAPP.indx.25">
<Primary>NFS</Primary>
<Secondary>configuring for DFS/NFS Gateway</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.GAPP.indx.26">
<Primary>DFS/NFS Gateway</Primary>
<Secondary>about NFS clients</Secondary>
</IndexTerm>
<Para>Once you have configured at least one Gateway Server machine according to the
instructions in Section A.1, you can configure your NFS clients to provide
access to the DFS filespace.  Users who have DCE accounts can then authenticate
to DCE for authenticated access to DFS from the NFS clients.  Authenticating to
DCE provides these users with the privileges and permissions associated with
their DCE identities.
</Para>
<Para>Depending on how you configured your Gateway Server machines, configure each
NFS client that is to provide access to DFS in one of the following ways:
</Para>
<ItemizedList>
<ListItem>
<Para>If you configured your Gateway Servers so that users <Replaceable>cannot</Replaceable> issue the
<Command>dfs_login</Command> command to authenticate to DCE, configure your NFS clients
without enabling DCE authentication via the <Command>dfs_login</Command> command; follow
the instructions in Section A.2.1.
<?sml-break><?sml-need 20></Para>
</ListItem>
<ListItem>
<Para>If you configured your Gateway Servers so that users <Replaceable>can</Replaceable> issue the
<Command>dfs_login</Command> command to authenticate to DCE, configure your NFS clients
and enable DCE authentication via the <Command>dfs_login</Command> command; follow the
instructions in Section A.2.2.
</Para>
</ListItem>
</ItemizedList>
<Para>Because the steps in each of these sections mount <Filename>/...</Filename> on an NFS
client, users who do not have DCE accounts can still use the NFS client for
unauthenticated access to DFS. (See Section A.3.1 for more information about
unauthenticated access; see Section A.3.2 for more information about
authenticated access.)
</Para>
<Sect2 Id="DFSAGR.GAPP.div.9">
<Title>Configuring a Client Without Enabling Remote Authentication</Title>
<IndexTerm Id="DFSAGR.GAPP.indx.27">
<Primary>DFS/NFS Gateway</Primary>
<Secondary>configuring NFS clients without remote authentication</Secondary>
</IndexTerm>
<Para>If you configured your Gateway Server machines so that users cannot issue the
<Command>dfs_login</Command> command to authenticate to DCE, perform the steps in this
section to configure your NFS clients.  The steps enable DFS access from an
NFS client without enabling DCE authentication from the client.  Users can
authenticate only via the <Command>dfsgw add</Command> command.
</Para>
<Para>To provide users of an NFS client with access to DFS but not the
<Command>dfs_login</Command> command, perform the following steps on the client:
</Para>
<OrderedList>
<ListItem>
<Para>Log in as the local <Literal>root</Literal> user on the machine.
</Para>
</ListItem>
<ListItem>
<Para>Mount the root of the DCE namespace, <Filename>/...</Filename>, on the machine.  In the
command, <Symbol Role="Variable">hostname</Symbol> is the hostname of a machine that exports <Filename>/...</Filename>.
Each machine configured as a Gateway Server exports <Filename>/...</Filename>.  When users
access DFS from an NFS client, they go through the Gateway Server machine that
exports <Filename>/...</Filename> to the client.  To achieve proper load balancing if you
configure multiple Gateway Server machines, ensure that the mounts of
<Filename>/...</Filename> on your NFS clients are divided evenly among your Gateway Servers.
(You can use the NFS automount mechanism with a direct automount map to mount
<Filename>/...</Filename>; see your vendor's NFS documentation for more information.)
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Literal>mkdir  /...</Literal>
# <Command>mount  </Command><Symbol Role="Variable">hostname</Symbol><Literal>:/...  /...</Literal>
</UserInput></ProgramListing></Para>
</InformalExample>
<?sml-break>
<?sml-need 20>
</ListItem>
<ListItem>
<Para>Create a symbolic link from <Literal>/:</Literal> to the root of the DFS filespace for the
host DCE cell, <Filename>/.../</Filename><Symbol Role="Variable">cellname</Symbol><Filename>/fs</Filename>.  In the command, <Symbol Role="Variable">cellname</Symbol> is
the name of the DCE cell to be accessed from the NFS client (the cell in which
the machine that exports <Filename>/...</Filename> is configured as a DFS client).
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Literal>ln  -s  /.../</Literal><Symbol Role="Variable">cellname</Symbol><Literal>/fs  /:</Literal>
</UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
<ListItem>
<Para>Verify that the NFS mount of DCE was successful by using the <Command>ls</Command> command
to list the contents of <Literal>/:</Literal>, which leads to the root directory of the DFS
filespace.  The command should yield the same output from the NFS client that
it does from a DFS client of the DCE cell.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Literal>ls  /:</Literal>
</UserInput></ProgramListing></Para>
</InformalExample>
</ListItem>
</OrderedList>
<Para>The NFS client is now configured to provide access to DFS but not to allow
users of the client to authenticate to DCE with the <Command>dfs_login</Command> command.
Repeat these steps on each NFS client to be configured in this manner.  Should
you later decide to allow users to authenticate to DCE from the NFS client,
simply perform the steps in Section A.2.2 on the client.
</Para>
</Sect2>
<Sect2 Id="DFSAGR.GAPP.div.10">
<Title>Configuring a Client and Enabling Remote Authentication</Title>
<IndexTerm Id="DFSAGR.GAPP.indx.28">
<Primary>DFS/NFS Gateway</Primary>
<Secondary>configuring NFS clients with remote authentication</Secondary>
</IndexTerm>
<Para>If you configured your Gateway Server machines so that users can issue the
<Command>dfs_login</Command> command to authenticate to DCE, perform the steps in this
section to configure your NFS clients.  The steps enable both DFS access and
DCE authentication from an NFS client.  Users can authenticate via either the
<Command>dfsgw add</Command> command or the <Command>dfs_login</Command> command.
</Para>
<Para>To provide users of an NFS client with access to both DFS and the
<Command>dfs_login</Command> command, perform the following steps on the client:
</Para>
<OrderedList>
<ListItem>
<Para><Replaceable>If you have not already done so</Replaceable>, perform all of the steps in Section
A.2.1 to mount <Filename>/...</Filename> on the machine.
</Para>
</ListItem>
<ListItem>
<Para><Replaceable>If you have not already done so</Replaceable>, log in as the local <Literal>root</Literal> user on
the machine.
<?sml-break><?sml-need 20></Para>
</ListItem>
<ListItem>
<Para>Install the binary files for the <Command>dfs_login</Command> and <Command>dfs_logout</Command> commands
in the directory <Filename>/usr/bin</Filename> on the machine.  These commands provide the
following functionality:
</Para>
<VariableList>
<VarListEntry>
<Term><Command>dfs_login</Command></Term>
<ListItem>
<IndexTerm Id="DFSAGR.GAPP.indx.29">
<Primary>DFS/NFS Gateway</Primary>
<Secondary><Command>dfs_login</Command> command</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.GAPP.indx.30">
<Primary><Command>dfs_login</Command> command</Primary>
</IndexTerm>
<Para>Allows users of the NFS client to establish an authenticated session by
obtaining DCE credentials on a Gateway Server machine. (See Section A.3.2.1
for information about using this command.)
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Command>dfs_logout</Command></Term>
<ListItem>
<IndexTerm Id="DFSAGR.GAPP.indx.31">
<Primary>DFS/NFS Gateway</Primary>
<Secondary><Command>dfs_logout</Command> command</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.GAPP.indx.32">
<Primary><Command>dfs_logout</Command> command</Primary>
</IndexTerm>
<Para>Allows users on the NFS client to end an authenticated session established with
the <Command>dfs_login</Command> command. (See Section A.3.2.1 for information about using
this command.)
</Para>
</ListItem>
</VarListEntry>
</VariableList>
<Para>The <Command>dfs_login</Command> and <Command>dfs_logout</Command> commands use version 5 of Kerberos to
communicate with the DCE Security Service.
</Para>
</ListItem>
<ListItem>
<Para>Create the Kerberos configuration file named <Filename>/krb5/krb.conf</Filename>.  The
<Command>dfs_login</Command> command reads this file to determine the name of a DCE
Security Server that it can contact.  This file must be identical to the
<Filename>/krb5/krb.conf</Filename> file on machines in the host DCE cell; copy it from a
machine in the DCE cell.
</Para>
</ListItem>
<ListItem>
<Para>Create the Kerberos configuration file named <Filename>/krb5/krb.realms</Filename>.  The
Kerberos runtime uses the information in this file to translate Internet
domains to the corresponding Kerberos realms.  In the file, the Kerberos realm
has the same name as the DCE cell.  Each line of the file must have the
following format:
</Para>
<InformalExample>
<Para><ProgramListing><Symbol Role="Variable">domain</Symbol>  <Symbol Role="Variable">krb-realm</Symbol>
</ProgramListing></Para>
</InformalExample>
<Para>where <Symbol Role="Variable">domain</Symbol> is the name of the local Internet domain, and
<Symbol Role="Variable">krb-realm</Symbol> is the name of the Kerberos realm (the name of the DCE cell
to be accessed).  For example, in the following <Literal>krb.realms</Literal> file,
<Literal>def.com</Literal> is the name of the Internet domain, and <Replaceable>abc.com</Replaceable> is the
name of the DCE cell.  If machines from multiple domains are to contact the
DCE cell, you need a separate line for each domain.  Note that realm names
are case-sensitive.
</Para>
<InformalExample>
<Para><ProgramListing>.DEF.COM  abc.com
</ProgramListing></Para>
</InformalExample>
<?sml-break>
<?sml-need 20>
</ListItem>
<ListItem>
<Para><Replaceable>If you use the </Replaceable><Filename>/etc/services</Filename><Replaceable> file</Replaceable> in your environment, add the
following entry for the <Command>dfsgw</Command> service to the <Filename>/etc/services</Filename> file
on the machine:
</Para>
<InformalExample>
<Para><ProgramListing>dfsgw     438/udp     dlog
</ProgramListing></Para>
</InformalExample>
<Para>where <Command>dfsgw</Command> is the name of the service, <Literal>438</Literal> is the port at which
the service receives RPCs, <Literal>udp</Literal> is the protocol the service uses to
communicate, and <Literal>dlog</Literal> is an alias for the <Command>dfsgw</Command> service.
</Para>
<Para><Replaceable>If you use an NIS services map</Replaceable> in your environment, you added an entry to
the services map file when you configured the first Gateway Server process.  You
do <Symbol Role="Variable">not</Symbol> need to add the entry to the services map when you configure NFS
clients.
</Para>
</ListItem>
</OrderedList>
<Para>The NFS client is now configured to provide access to DFS and to allow users
of the client to authenticate to DCE with the <Command>dfs_login</Command> command.  Repeat
these steps on each NFS client to be configured in this manner.
</Para>
</Sect2>
</Sect1>
<Sect1 Id="DFSAGR.GAPP.div.11">
<Title>Accessing DFS from an NFS Client</Title>
<IndexTerm Id="DFSAGR.GAPP.indx.33">
<Primary>DFS/NFS Gateway</Primary>
<Secondary>accessing DFS</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.GAPP.indx.34">
<Primary>NFS</Primary>
<Secondary>access to DFS</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.GAPP.indx.35">
<Primary>DFS</Primary>
<Secondary>accessing from NFS</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.GAPP.indx.36">
<Primary>accessing DFS from NFS</Primary>
</IndexTerm>
<Para>Once a Gateway Server machine and one or more NFS clients are configured
according to the instructions in Sections A.1 and A.2, users of the NFS clients
can access data in the DFS filespace.  Users can access files and directories in
DFS by full <Filename>/.../</Filename><Symbol Role="Variable">cellname</Symbol><Filename>/fs</Filename> pathnames or by abbreviated pathnames
that use the <Literal>/:</Literal> link to the DFS filespace.  The following are equivalent
pathnames for the file <Literal>myfile</Literal> in the DFS filespace of the DCE cell
<Replaceable>abc.com</Replaceable>:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput><Replaceable>/.../abc.com/fs/myfile</Replaceable>
</UserInput></ProgramListing></Para>
</InformalExample>
<InformalExample>
<Para><ProgramListing><UserInput><Literal>/:/myfile</Literal>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>All users have unauthenticated access to DFS. Users who have DCE accounts can
authenticate to their DCE identities for authenticated access to DFS.  The
following subsections provide more information about these two types of access.
<?sml-break><?sml-need 20></Para>
<Para>When accessing DFS data from a DFS client, the DFS Cache Manager caches local
copies of files accessed from File Server machines.  When accessing DFS data
from an NFS client, NFS background I/O daemons cache local copies of files
accessed via the NFS server.  The caching of information by the NFS daemons
can affect how quickly changes you make to data in DFS become visible to other
users.
</Para>
<Sect2 Id="DFSAGR.GAPP.div.12">
<Title>Unauthenticated Access to DFS</Title>
<IndexTerm Id="DFSAGR.GAPP.indx.37">
<Primary>DFS/NFS Gateway</Primary>
<Secondary>unauthenticated access</Secondary>
</IndexTerm>
<Para>Unauthenticated access is provided to users who access DFS without first
authenticating to DCE.  For a user who does not have an account in the DCE
registry database, unauthenticated access is the only form of access available.
Unauthenticated access requires no preliminary steps; users simply access data
in DFS from an NFS client.
</Para>
<Para>Unauthenticated users receive the following permissions for objects (files and
directories) in the DFS filespace:
</Para>
<ItemizedList>
<ListItem>
<Para><Replaceable>For objects in nonLFS filesets</Replaceable>, unauthenticated users receive the
permissions granted by the <Literal>other</Literal> mode bits of the object.
</Para>
</ListItem>
<ListItem>
<Para><Replaceable>For objects in DCE LFS filesets</Replaceable>, unauthenticated users receive the
permissions granted  by the <Literal>any_other</Literal> entry, if it exists, on the ACL
of the object.  The <Literal>mask_obj</Literal> entry filters permissions granted via the
<Literal>any_other</Literal> entry.
</Para>
</ListItem>
</ItemizedList>
<Para>When an unauthenticated user creates an object, the object is owned by the user
<Literal>nobody</Literal> and the group <Literal>nogroup</Literal>.  The UID of the user <Literal>nobody</Literal> is
<Literal>-2</Literal>, and the GID of the group <Literal>nogroup</Literal> is also <Literal>-2</Literal>. (Note that
identities and ID numbers of an unauthenticated user and group can vary between
systems; see your vendor's documentation for more information.)
</Para>
<Para>Unauthenticated access is provided with the DFS/NFS Secure Gateway as a side
effect of configuring Gateway Server machines and NFS clients.  Unauthenticated
access is available without the DFS/NFS Secure Gateway.  Simply export
<Filename>/...</Filename> from a DFS client that is also an NFS Server, and mount <Filename>/...</Filename>
on each NFS client from which users are to access DFS.
<?sml-break><?sml-need 20></Para>
</Sect2>
<Sect2 Id="DFSAGR.GAPP.div.13">
<Title>Authenticated Access to DFS</Title>
<IndexTerm Id="DFSAGR.GAPP.indx.38">
<Primary>DFS/NFS Gateway</Primary>
<Secondary>authenticated access</Secondary>
</IndexTerm>
<Para>Authenticated access is available to users who have accounts in the DCE cell.
When an authenticated user accesses an object in the DFS filespace, the user
receives the permissions associated with the DCE identity to which the user
is authenticated.  When the user creates an object, the object is owned by the
user and the user's primary group.
</Para>
<Para>To authenticate to DCE, you can issue either of the following commands, both
of which establish credentials recognized by the DCE Security Service:
</Para>
<ItemizedList>
<ListItem>
<Para>From an NFS client, enter the <Command>dfs_login</Command> command. (See Section A.3.2.1.)
</Para>
</ListItem>
<ListItem>
<Para>From a Gateway Server machine, enter the <Command>dfsgw add</Command> command. (See Section
A.3.2.2.)
</Para>
</ListItem>
</ItemizedList>
<Para><IndexTerm Id="DFSAGR.GAPP.indx.39">
<Primary>DFS/NFS Gateway</Primary>
<Secondary>authenticated access prerequisites</Secondary>
</IndexTerm>A user who desires authenticated access to DFS must have a principal and
account in the registry database of the DCE cell.  An entry must exist for the
user in the <Filename>/etc/passwd</Filename> file on the machine configured as a Gateway
Server and on each NFS client from which the user is to access DCE.  The user's
UID in the <Filename>/etc/passwd</Filename> file must match the user's UID in the DCE registry
database. (On a DCE client, the <Literal>passwd_export</Literal> command can be used to keep
<Filename>/etc/passwd</Filename> files current with respect to the registry database; see the
&DCEAc; for more information.)
</Para>
<Para><IndexTerm Id="DFSAGR.GAPP.indx.40">
<Primary>DFS/NFS Gateway</Primary>
<Secondary>authentication table</Secondary>
</IndexTerm>The <Command>dfs_login</Command> and <Command>dfsgw add</Command> commands do not obtain a new TGT if
you already have a valid TGT in your current login context and you do not
request DCE credentials for a different user.  However, the commands do allow
you to use your existing TGT to establish authenticated access to DFS from
additional NFS clients.  If you do not already have an entry in the
authentication table for an NFS client from which you request authenticated
access, the commands create a new entry for you, using the existing TGT as the
basis of the new entry; if you already have an entry in the authentication
table for the NFS client, the commands have no effect.  In either case, the
commands do not affect existing entries in the authentication table, and they
do not affect the remaining ticket lifetime of your existing TGT.
<?sml-break><?sml-need 20></Para>
<Para>DCE credentials (tickets) expire after the lifetime specified by the DCE
Security Service.  Once they expire, the tickets can no longer be used for
authenticated access.  To end an authenticated session before the ticket
lifetime has passed, you can issue either of the following commands:
</Para>
<ItemizedList>
<ListItem>
<Para>From the NFS client from which authenticated access to DFS is provided, enter
the <Command>dfs_logout</Command> command. (See Section A.3.2.1.)
</Para>
</ListItem>
<ListItem>
<Para>From the Gateway Server machine via which DFS is accessed, enter the <Command>dfsgw
delete</Command> command. (See Section A.3.2.2.)
</Para>
</ListItem>
</ItemizedList>
<Para>Both commands remove the entry from the authentication table that provides
authenticated access from the NFS client.  Regardless of which command you used
to establish the DCE credentials (<Command>dfs_login</Command> or <Command>dfsgw add</Command>), you can
end the authenticated session with the <Command>dfs_logout</Command> command or the <Command>dfsgw
delete</Command> command.  Neither command affects authenticated access from other
NFS clients.  If your DCE credentials are the basis of another entry in the
authentication table, you still have authenticated access via that other entry.
</Para>
<Para><IndexTerm Id="DFSAGR.GAPP.indx.41">
<Primary>DFS/NFS Gateway</Primary>
<Secondary>refreshing credentials</Secondary>
</IndexTerm>To refresh your DCE credentials before they expire, use the <Literal>kinit</Literal>
command to obtain new credentials, then use the <Command>dfs_login</Command> or <Command>dfsgw
add</Command> command to replace your existing TGT with the new TGT.  This procedure
provides you with authenticated access to DFS for the ticket lifetime of your
new TGT.  If you do not have access to the <Literal>kinit</Literal> command, you cannot
refresh your DCE credentials.
</Para>
<Para>Note that if you configure multiple Gateway Server machines, each server
machine houses its own authentication table.  The <Command>dfs_login</Command> and
<Command>dfs_logout</Command> commands affect entries only in the authentication table
maintained on the Gateway Server machine they contact; commands in the
<Command>dfsgw</Command> suite affect entries only in the authentication table on the
machine on which they are issued.
<?sml-break><?sml-need 20></Para>
<Sect3 Id="DFSAGR.GAPP.div.14">
<Title>Authenticating to DCE from an NFS Client</Title>
<IndexTerm Id="DFSAGR.GAPP.indx.42">
<Primary>DFS/NFS Gateway</Primary>
<Secondary>authenticated access from NFS clients</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.GAPP.indx.43">
<Primary>DFS/NFS Gateway</Primary>
<Secondary><Command>dfs_login</Command> command</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.GAPP.indx.44">
<Primary><Command>dfs_login</Command> command</Primary>
<Secondary>logging into DCE</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.GAPP.indx.45">
<Primary>DFS/NFS Gateway</Primary>
<Secondary>remote authentication</Secondary>
</IndexTerm>
<Para>The <Command>dfs_login</Command> command authenticates a user to DCE from an NFS client.
The command contacts the DCE Security Service to obtain a TGT and a service
ticket for the Gateway Server (<Command>dfsgwd</Command>) process for the user.  It encrypts
the user's TGT with the service ticket and sends these to the Gateway Server
process.  It also sends the UID of the user who issues the command and the
network address of the NFS client from which the command is issued.  The Gateway
Server process uses this information to create a valid login context, including
a PAG, and an entry in the authentication table for the user.
</Para>
<Para>The syntax of the <Command>dfs_login</Command> command follows:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput><Command>dfs_login</Command> [<Option>h</Option> <Symbol Role="Variable">hostname</Symbol>] [<Option>l</Option> <Symbol Role="Variable">hh</Symbol> [ <Literal>:</Literal><Symbol Role="Variable">mm </Symbol>]] [<Symbol Role="Variable">dce_principal</Symbol>] [<Symbol Role="Variable">dce_password</Symbol>]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The command includes the following options and arguments:
</Para>
<VariableList>
<VarListEntry role="linebreak">
<Term><Option>h</Option> <Symbol Role="Variable">hostname</Symbol></Term>
<ListItem>
<?sml-break>
<Para>Specifies the hostname of the Gateway Server machine.  By default, the command
uses the hostname of the machine that exports <Filename>/...</Filename> to the NFS client.  Use
this option to contact a different Gateway Server.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term><Option>l</Option> <Symbol Role="Variable">hours</Symbol>[<Literal>:</Literal><Symbol Role="Variable">minutes</Symbol>]</Term>
<ListItem>
<?sml-break>
<Para>Specifies the lifetime to be assigned to the service ticket obtained with the
command.  Enter the lifetime as a number of hours and, optionally, minutes.  A
value specified with this option is subject to the policies in effect in the
registry database of the DCE cell.  By default, the ticket is assigned the
default lifetime assigned to tickets in the DCE cell.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term><Symbol Role="Variable">dce_principal</Symbol></Term>
<ListItem>
<?sml-break>
<Para>Specifies the DCE principal name of the user who is to be logged into DCE.  By
default, the command uses the name of the issuer of the command.
<?sml-break><?sml-need 20></Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term><Symbol Role="Variable">dce_password</Symbol></Term>
<ListItem>
<?sml-break>
<Para>Provides the DCE password of the specified user.  If you do not specify a
password, the command prompts for a password if one of the following is true:
You name a user other than yourself, you name yourself and you do not already
have a valid TGT, or you do not name a user and you do not already have a valid
TGT.  The command does not prompt for a password if you do not name a different
user and you already have a valid TGT.
</Para>
</ListItem>
</VarListEntry>
</VariableList>
<Para>For example, the user named <Literal>ludwig</Literal> issues the following <Command>dfs_login</Command>
command to authenticate to DCE from an NFS client:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>dfs_login</Command>
</UserInput></ProgramListing></Para>
</InformalExample>
<InformalExample>
<Para><ProgramListing>Password for ludwig@abc.com: <Symbol Role="Variable">password</Symbol>
</ProgramListing></Para>
</InformalExample>
<Para>where <Symbol Role="Variable">password</Symbol> is the DCE password of the user <Literal>ludwig</Literal>. In the
example, the user <Literal>ludwig</Literal> does not already have a valid TGT, so the
command prompts for the user's password and obtains a TGT for the user.  If
the login succeeds, the <Command>dfs_login</Command> command returns no messages.
</Para>
<Para><IndexTerm Id="DFSAGR.GAPP.indx.46">
<Primary>DFS/NFS Gateway</Primary>
<Secondary><Command>dfs_logout</Command> command</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.GAPP.indx.47">
<Primary><Command>dfs_logout</Command> command</Primary>
<Secondary>logging out of DCE</Secondary>
</IndexTerm>To end the authenticated session before the DCE credentials expire, issue the
<Command>dfs_logout</Command> command from the NFS client.  The command removes the user's
entry from the authentication table on the Gateway Server machine.  The command
can be issued either by the user whose entry is to be removed from the
authentication table or by a user who is logged into the NFS client as the
local <Literal>root</Literal> user.  The command has no effect on authenticated access the
user may have from other NFS clients.
</Para>
<Para>The syntax of the <Command>dfs_logout</Command> command follows:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput><Command>dfs_logout</Command> [<Option>h</Option> <Symbol Role="Variable">hostname</Symbol>] [<Symbol Role="Variable">dce_principal</Symbol>]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The command includes the following option and argument:
</Para>
<VariableList>
<VarListEntry>
<Term><Option>h</Option> <Symbol Role="Variable">hostname</Symbol></Term>
<ListItem>
<?sml-break>
<Para>Specifies the hostname of the Gateway Server machine.  By default, the command
uses the hostname of the machine that exports <Filename>/...</Filename> to the NFS client.  Use
this option to contact a different Gateway Server.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Symbol Role="Variable">dce_principal</Symbol></Term>
<ListItem>
<?sml-break>
<Para>Specifies the DCE principal name of the user whose entry is to be removed from
the authentication table.  By default, the command deletes the entry for the
user who issues the command.
</Para>
</ListItem>
</VarListEntry>
</VariableList>
<Para>For example, the following ends the authenticated session of the issuer of the
command:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>dfs_logout</Command>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>See the reference pages for the <Command>dfs_login</Command> and <Command>dfs_logout</Command> commands
for detailed information about the use and syntax of the commands.
</Para>
</Sect3>
<Sect3 Id="DFSAGR.GAPP.div.15">
<Title>Authenticating to DCE from a Gateway Server Machine</Title>
<IndexTerm Id="DFSAGR.GAPP.indx.48">
<Primary>DFS/NFS Gateway</Primary>
<Secondary>authenticated access from Gateway Servers</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.GAPP.indx.49">
<Primary>DFS/NFS Gateway</Primary>
<Secondary>administering DCE authentication</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.GAPP.indx.50">
<Primary>DFS/NFS Gateway</Primary>
<Secondary><Command>dfsgw add</Command> command</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.GAPP.indx.51">
<Primary><Command>dfsgw</Command> command suite</Primary>
<Secondary><Command>add</Command></Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.GAPP.indx.52">
<Primary>DFS/NFS Gateway</Primary>
<Secondary>local authentication</Secondary>
</IndexTerm>
<Para>The <Command>dfsgw add</Command> command authenticates a user to DCE from a Gateway Server
machine.  Users can use the <Command>dfsgw add</Command> command if the <Command>dfs_login</Command>
command is not installed on the NFS client from which they desire access to
DFS.  System administrators can use the command to administer authenticated
access to DFS from a Gateway Server machine.  Note that for NFS clients not
configured to enable DCE authentication, the <Command>dfsgw add</Command> command represents
the only avenue to DCE authentication.
</Para>
<Para>The <Command>dfsgw add</Command> command provides essentially the same functionality as
the <Command>dfs_login</Command> command.  However, unlike the <Command>dfs_login</Command> command,
the <Command>dfsgw add</Command> command does not communicate with the Gateway Server
(<Command>dfsgwd</Command>) process; it creates the login context and entry in the
authentication table for the user.  In addition, it requires the issuer to
identify the user for whom authenticated access is desired and the NFS client
from which the user is to access DFS.  Also, the <Command>dfs_login</Command> command allows
the issuer to request a ticket lifetime; the <Command>dfsgw add</Command> command does not.
</Para>
<Para>The <Command>dfsgw add</Command> command has the following syntax:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput><Command>dfsgw add -id </Command><Symbol Role="Variable">networkID:userID</Symbol> [<Option>dceid</Option> <Symbol Role="Variable">login_name</Symbol>[<Symbol Role="Variable">:password</Symbol>]] \
[<Option>af</Option> <Symbol Role="Variable">address_family</Symbol>]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The command includes the following options:
</Para>
<VariableList>
<VarListEntry role="linebreak">
<Term><Option>id</Option> <Symbol Role="Variable">networkID:userID</Symbol></Term>
<ListItem>
<?sml-break>
<Para>Specifies the network address or hostname of an NFS client and the UID of the
user who is to be authenticated to DCE from that client.
<?sml-break><?sml-need 20></Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term><Option>dceid</Option> <Symbol Role="Variable">login_name</Symbol>[<Symbol Role="Variable">:password</Symbol>]</Term>
<ListItem>
<?sml-break>
<Para>Specifies the DCE principal name and, optionally, the password of the user
who is to be authenticated to DCE.  The command does not prompt for a principal
name and password if you do not specify a principal name and you have a valid
TGT; the command does not prompt for a password if you specify your own
principal name and you have a valid TGT.  The command always prompts for a
password if you name a principal other than yourself.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term><Option>af</Option> <Symbol Role="Variable">address_family</Symbol></Term>
<ListItem>
<?sml-break>
<Para>Specifies the style of network address to be used to identify hosts.  By
default, the command uses the only address family currently supported,
<Literal>inet</Literal> (Internet).
</Para>
</ListItem>
</VarListEntry>
</VariableList>
<Para>For example, the following <Command>dfsgw add</Command> command obtains DCE credentials
for the user <Literal>ludwig</Literal>, who has UID <Literal>7439</Literal>, from the NFS client that
has network address <Literal>15.27.32.40</Literal>:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Literal>dfsgw add -id 15.27.32.40:7439 -dceid ludwig</Literal>
</UserInput></ProgramListing></Para>
</InformalExample>
<InformalExample>
<Para><ProgramListing>Enter Password: <Symbol Role="Variable">password</Symbol>
Mapping added successfully, PAG is 41ffffe4
</ProgramListing></Para>
</InformalExample>
<Para>where <Symbol Role="Variable">password</Symbol> is the DCE password of the user <Literal>ludwig</Literal>. The
command reports that a mapping for the user was successfully added to the
authentication table on the Gateway Server machine; the user's PAG is
<Literal>41ffffe4</Literal>.
</Para>
<Para><IndexTerm Id="DFSAGR.GAPP.indx.53">
<Primary>DFS/NFS Gateway</Primary>
<Secondary><Command>dfsgw delete</Command> command</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.GAPP.indx.54">
<Primary><Command>dfsgw</Command> command suite</Primary>
<Secondary><Command>delete</Command></Secondary>
</IndexTerm>To end a user's authenticated session from a specified NFS client, issue the
<Command>dfsgw delete</Command> command on the Gateway Server machine.  The command provides
the same functionality from a Gateway Server machine that the <Command>dfs_logout</Command>
command provides from an NFS client.  The <Command>dfsgw delete</Command> command can be
issued either by the user whose entry is to be removed from the authentication
table or by a user who is logged into the Gateway Server machine as the local
<Literal>root</Literal> user.  The command has no effect on authenticated sessions the user
may have for other NFS clients.
</Para>
<Para>The syntax of the <Command>dfsgw delete</Command> command follows:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput><Command>dfsgw delete -id </Command><Symbol Role="Variable">networkID:userID</Symbol> [<Option>af</Option> <Symbol Role="Variable">address_family</Symbol>]
</UserInput></ProgramListing></Para>
</InformalExample>
<?sml-break>
<?sml-need 20>
<Para>The command includes the following options:
</Para>
<VariableList>
<VarListEntry role="linebreak">
<Term><Option>id</Option> <Symbol Role="Variable">networkID:userID</Symbol></Term>
<ListItem>
<?sml-break>
<Para>Specifies the network address or hostname of an NFS client and the UID of the
user whose authenticated access from that client is to be canceled.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term><Option>af</Option> <Symbol Role="Variable">address_family</Symbol></Term>
<ListItem>
<?sml-break>
<Para>Specifies the style of network address to be used to identify hosts.  By
default, the command uses the only address family currently supported,
<Literal>inet</Literal> (Internet).
</Para>
</ListItem>
</VarListEntry>
</VariableList>
<Para>For example, the following <Command>dfsgw delete</Command> command ends the authenticated
session for the user <Literal>ludwig</Literal> from the NFS client that has network address
<Literal>15.27.32.40</Literal>.  The command is issued by the local <Literal>root</Literal> user on the
Gateway Server machine.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Literal>dfsgw delete -id 15.27.32.40:7439</Literal>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>See the reference pages for the <Command>dfsgw add</Command> and <Command>dfsgw delete</Command> commands
for detailed information about the use and syntax of the commands.
</Para>
</Sect3>
<Sect3 Id="DFSAGR.GAPP.div.16">
<Title>Determining Whether a Specific User Is Authenticated to DCE</Title>
<IndexTerm Id="DFSAGR.GAPP.indx.55">
<Primary>DFS/NFS Gateway</Primary>
<Secondary>administering DCE authentication</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.GAPP.indx.56">
<Primary>DFS/NFS Gateway</Primary>
<Secondary><Command>dfsgw query</Command> command</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.GAPP.indx.57">
<Primary><Command>dfsgw</Command> command suite</Primary>
<Secondary><Literal>query</Literal></Secondary>
</IndexTerm>
<Para>The <Command>dfsgw query</Command> command determines whether a specific user is
authenticated to DCE via the Gateway Server machine.  The command can be issued
either by the user whose authentication is to be determined or by a user who is
logged in as the local <Literal>root</Literal> user on the machine configured as a Gateway
Server.
</Para>
<Para>The command looks for an entry for the user in the authentication table on the
Gateway Server machine on which it is issued.  If your environment includes
multiple Gateway Server machines, you must issue the command on the Gateway
Server machine whose authentication table is to be examined.  The command
displays information about a user's entry regardless of whether the user
authenticated via the <Command>dfs_login</Command> command or the <Command>dfsgw add</Command> command. 
</Para>
<Para>The <Command>dfsgw query</Command> command has the following syntax:
<?sml-break><?sml-need 20></Para>
<InformalExample>
<Para><ProgramListing><UserInput><Command>dfsgw query -id </Command><Symbol Role="Variable">networkID:userID</Symbol> [<Option>af</Option> <Symbol Role="Variable">address_family</Symbol>]
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>The command includes the following options:
</Para>
<VariableList>
<VarListEntry role="linebreak">
<Term><Option>id</Option> <Symbol Role="Variable">networkID:userID</Symbol></Term>
<ListItem>
<?sml-break>
<Para>Specifies the network address or hostname of an NFS client and the UID of the
user whose DCE authentication for that client is to be determined.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term><Option>af</Option> <Symbol Role="Variable">address_family</Symbol></Term>
<ListItem>
<?sml-break>
<Para>Specifies the style of network address to be used to identify hosts.  By
default, the command uses the only address family currently supported,
<Literal>inet</Literal> (Internet).
</Para>
</ListItem>
</VarListEntry>
</VariableList>
<Para>For example, the following <Command>dfsgw query</Command> command determines whether the
user <Literal>ludwig</Literal> is authenticated from the NFS client that has network address
<Literal>15.27.32.40</Literal>.  The command is issued by the local <Literal>root</Literal> user on the
Gateway Server machine.
</Para>
<InformalExample>
<Para><ProgramListing><UserInput># <Literal>dfsgw query -id 15.27.32.40:7439</Literal>
</UserInput></ProgramListing></Para>
</InformalExample>
<InformalExample>
<Para><ProgramListing>Mapping found, PAG is 41ffffe4
</ProgramListing></Para>
</InformalExample>
<Para>The command reports that a mapping for the user for the specified NFS client
exists in the local authentication table.  The user's PAG is <Literal>41ffffe4</Literal>.
See the reference page for the <Command>dfsgw query</Command> command for more information
about the command.
</Para>
</Sect3>
<Sect3 Id="DFSAGR.GAPP.div.17">
<Title>Displaying Information About All Users Who Are Authenticated to DCE</Title>
<IndexTerm Id="DFSAGR.GAPP.indx.58">
<Primary>DFS/NFS Gateway</Primary>
<Secondary>administering DCE authentication</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.GAPP.indx.59">
<Primary>DFS/NFS Gateway</Primary>
<Secondary><Command>dfsgw list</Command> command</Secondary>
</IndexTerm>
<IndexTerm Id="DFSAGR.GAPP.indx.60">
<Primary><Command>dfsgw</Command> command suite</Primary>
<Secondary><Literal>list</Literal></Secondary>
</IndexTerm>
<Para>The <Command>dfsgw list</Command> command lists all users who are authenticated to DCE
via the Gateway Server machine.  The command lists all entries from the
authentication table on the Gateway Server machine on which it is issued.  If
your environment includes multiple Gateway Server machines, you must issue the
command on the Gateway Server machine from whose authentication table entries
are to be displayed.  The command makes no distinction between entries created
with the <Command>dfs_login</Command> command and entries created with the <Command>dfsgw add</Command>
command.  No privileges are required to issue the command.
</Para>
<Para>The <Command>dfsgw list</Command> command has the following syntax:
</Para>
<InformalExample>
<Para><ProgramListing><UserInput><Command>dfsgw list</Command>
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>For example, the following <Command>dfsgw list</Command> command displays all of the users
currently authenticated to DCE (all users who have entries in the
authentication table):
<?sml-break><?sml-need 20></Para>
<InformalExample>
<Para><ProgramListing><UserInput>$ <Command>dfsgw list</Command>
<?sml-size -1>Mapping: nfs1.abc.com : ludwig => 41ffffe4 Expires at \
Sat Jul 23 01:33:18 1994<?sml-size 0>
<?sml-size -1>Mapping: nfs2.abc.com : frost => 41ffffa3 Expires at \
Sat Jul 23 08:36:23 1994<?sml-size 0>
<?sml-size -1>Mapping: nfs2.abc.com : wvh => 41ffffbe Expires at \
Sun Jul 24 00:51:21 1994<?sml-size 0>
 . . .
</UserInput></ProgramListing></Para>
</InformalExample>
<Para>Note that the <Command>dfsgw list</Command> command provides additional information not
available with the <Command>dfsgw query</Command> command, such as the hostname of the NFS
client from which each user has DFS access, the principal name of each user who
has DFS access, and the date and time at which each user's DCE credentials
expire.  See the reference page for the <Command>dfsgw list</Command> command for more
information about the command.
</Para>
</Sect3>
</Sect2>
</Sect1>
</Appendix>
<!--+ 10/19/96 18:43:16
    | tagMorph:  $Id: gateway_app.sgm,v 1.1.2.6 1996/12/15 23:02:01 wardr Exp $
    | tagMorph library:  $Id: gateway_app.sgm,v 1.1.2.6 1996/12/15 23:02:01 wardr Exp $
    | sml-to-docbook:  1.23
    +-->
