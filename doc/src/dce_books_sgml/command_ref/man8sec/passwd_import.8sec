<!--
# @OSF_COPYRIGHT@
# 
# 
# HISTORY
# $Log: passwd_import.8sec,v $
# Revision 1.1.2.7  1996/12/14  17:41:51  carrig
# 	{enh,R1.2.2}
# 	Final edits
# 	[1996/12/14  17:41:30  carrig]
#
# Revision 1.1.2.6  1996/12/13  18:13:24  carrig
# 	{enh,R1.2.2}
# 	Corrections to Synopses
# 	[1996/12/13  18:12:33  carrig]
# 
# Revision 1.1.2.5  1996/12/01  20:57:40  carrig
# 	{enh,R1.2.2}
# 	Ward's comments
# 	[1996/12/01  20:56:50  carrig]
# 
# Revision 1.1.2.4  1996/11/22  21:20:40  carrig
# 	{enh,R1.2.2}
# 	Ready for editor
# 	[1996/11/22  21:19:47  carrig]
# 
# Revision 1.1.2.3  1996/11/21  20:43:20  wardr
# 	{edit,R1.2.2}
# 	Init capped heads
# 	[1996/11/21  20:42:21  wardr]
# 
# Revision 1.1.2.2  1996/11/20  20:15:59  carrig
# 	{enh,R1.2.2}
# 	VarListEntry
# 	[1996/11/20  20:15:07  carrig]
# 
# Revision 1.1.2.1  1996/11/11  23:23:39  wardr
# 	{edit,R1.2.2}
# 	Initial checkin after sgml conversion
# 	[1996/11/11  23:17:47  wardr]
# 
# $EndLog$
-->
<!---->
<!-- Fragment document type declaration subset:
ArborText, Inc., 1988-1993, v.4001
<!DOCTYPE Book PUBLIC "-//Davenport//DTD DocBook V2.4//EN" [
]>
-->
<RefEntry Id="DCECR.MAN164.rsml.1">
<RefMeta>
<RefEntryTitle>passwd_import</RefEntryTitle>
<ManVolNum>8sec</ManVolNum>
</RefMeta>
<RefNameDiv>
<RefName><Command>passwd_import</Command></RefName>
<RefPurpose>Creates registry database entries from group and password files
</RefPurpose>
</RefNameDiv>
<!---->
<!-- COPYRIGHT NOTICE-->
<!-- Copyright (c) 1990, 1991, 1992, 1993 Open Software Foundation, Inc.-->
<!-- ALL RIGHTS RESERVED (DCE).  See the file named COPYRIGHT.DCE in the-->
<!-- src directory for the full copyright text.-->
<!---->
<!--         -->
<!-- HISTORY -->
<!-- Revision 1.1.8.7  1995/12/18  17:25:04  rcb-->
<!-- 	PH1.1: final fixes-->
<!-- 	[1995/12/18  13:43:08  rcb]-->
<!---->
<!-- Revision 1.1.8.6  1995/10/18  13:52:20  rcb-->
<!-- 	PH1.1: editorial improvement and Prentice-Hall publish formatting-->
<!-- 	[1995/10/13  21:34:17  rcb]-->
<!-- -->
<!-- Revision 1.1.8.5  1995/09/22  18:39:36  rcb-->
<!-- 	preliminary editing (including outstanding 1.1 edits) for 1.1PH, 1.2-->
<!-- 	[1995/09/22  18:31:53  rcb]-->
<!-- -->
<!-- Revision 1.1.8.4  1994/10/04  22:38:54  millette-->
<!-- 	{def,9992,R1.1)-->
<!-- 	Org named with -o option must exist.-->
<!-- 	[1994/10/04  22:37:46  millette]-->
<!-- -->
<!-- Revision 1.1.8.3  1993/07/27  03:12:40  tmw-->
<!-- 	Added index entries for second version of master index.-->
<!-- 	[1993/07/27  02:57:46  tmw]-->
<!-- -->
<!-- Revision 1.1.8.2  1993/06/25  19:40:49  buckler-->
<!-- 	{defect, 6211, R1.0.3}-->
<!-- 	Removed full pathname in SYNOPSIS.-->
<!-- 	[1993/06/25  19:26:00  buckler]-->
<!-- -->
<!-- Revision 1.1.6.5  1993/02/22  22:25:08  millette-->
<!-- 	Bug 7274: 1.0.2 review changes-->
<!-- 	[1993/02/22  22:22:40  millette]-->
<!-- -->
<!-- Revision 1.1.6.4  1993/01/28  02:37:54  dbelch-->
<!-- 	Embedding copyright notice-->
<!-- 	[1993/01/28  00:56:50  dbelch]-->
<!-- -->
<!-- Revision 1.1.6.3  1992/10/07  14:13:20  millette-->
<!-- 	Bug 4466: Tightened up consistency between passwd_import section in Admin Guide and this-->
<!-- 	reference page.  Also clarified processing steps.-->
<!-- 	[1992/10/07  14:12:03  millette]-->
<!-- -->
<!-- Revision 1.1.6.2  1992/09/10  17:49:08  weir-->
<!-- 	Removed change bar macros; moved to 1.0.2doc tree-->
<!-- 	[1992/09/10  17:41:00  weir]-->
<!-- -->
<!-- Revision 1.1.4.2  1992/09/08  21:52:52  casey-->
<!-- 	Prentice Hall production - index corrections-->
<!-- 	[1992/09/08  17:28:46  casey]-->
<!-- -->
<!-- 	Prentice Hall production-->
<!-- 	[1992/08/14  19:28:52  casey]-->
<!-- -->
<!-- Revision 1.1.2.3  1992/06/10  18:45:16  millette-->
<!-- 	Bug 4132: Miscellaneous technical and editorial changes (Mike Burati's)-->
<!-- 	[1992/06/10  18:21:10  millette]-->
<!-- -->
<!-- Revision 1.1.2.2  1992/05/07  21:23:01  millette-->
<!-- 	Bug 3165: Add passwd_import enhancements.-->
<!-- 	[1992/05/07  21:21:24  millette]-->
<!-- -->
<!-- Revision 1.1  1992/01/29  15:59:43  damon-->
<!-- 	Initial revision-->
<!-- -->
<!---->
<!-- (c) Copyright 1991, Open Software Foundation, Inc.  ALL RIGHTS RESERVED-->
<!-- Copyright (c) 1987 Apollo Computer, Inc.-->
<!---->
<!--All Rights Reserved.  Reproduction, adaptation,-->
<!--or translation without prior written permission-->
<!--is prohibited, except as allowed under the-->
<!--copyright laws.-->
<IndexTerm Id="DCECR.MAN164.indx.1">
<Primary>Security Service commands</Primary>
<Secondary><Command>passwd_import</Command></Secondary>
</IndexTerm>
<IndexTerm Id="DCECR.MAN164.indx.2">
<Primary>accounts</Primary>
<Secondary>importing</Secondary>
</IndexTerm>
<RefSynopsisDiv>
<CmdSynopsis>
<Command>passwd_import</Command>
<Arg Choice="opt"><Option>c</Option></Arg>
<Arg Choice="plain"><Option>d</Option><Replaceable>path</Replaceable></Arg>
<Arg Choice="opt"><Option>h</Option></Arg>
<Arg Choice="opt"><Option>i</Option></Arg>
<Arg Choice="opt"><Option>o</Option><Replaceable>org</Replaceable></Arg>
<Arg Choice="opt"><Option>p</Option><Replaceable>password</Replaceable></Arg>
<Arg Choice="opt"><Option>u</Option><Replaceable>username</Replaceable></Arg>
<Arg Choice="opt"><Option>v</Option></Arg>
</CmdSynopsis>
</RefSynopsisDiv>
<RefSect1>
<Title>Options</Title>
<VariableList>
<VarListEntry>
<Term><Option>c</Option></Term>
<ListItem>
<Para>Runs in check mode: processes the command, showing all conflicts, but makes no 
requests for resolution.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Option>d</Option> <Symbol Role="Variable">path</Symbol></Term>
<ListItem>
<Para>Specifies the path of the directory containing the foreign password
and group files to be imported.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Option>h</Option></Term>
<ListItem>
<Para>Displays help information.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Option>i</Option></Term>
<ListItem>
<Para>Ignores name conflicts.  Names in the registry and the group and 
password files represent the same identity.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Option>o</Option> <Symbol Role="Variable">org</Symbol></Term>
<ListItem>
<Para>Specifies the name of an organization to be assigned to all imported entries.  
The default organization is <Literal>none</Literal>.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Option>p</Option> <Symbol Role="Variable">password</Symbol></Term>
<ListItem>
<Para>Specifies the password for the account with whose privileges 
<Command>passwd_import</Command> runs. 
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Option>u</Option> <Symbol Role="Variable">username</Symbol></Term>
<ListItem>
<Para>Specifies the principal name of the account with whose privileges 
<Command>passwd_import</Command> will run.  This account must have the privileges 
to access the registry and add principals, groups, accounts, 
and organizations, and to add members to groups and organizations.
The principal name and password are used to obtain network authentication.  
If you do not supply them, <Command>passwd_import</Command> prompts for them, even 
if you have already performed a network login. 
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Option>v</Option></Term>
<ListItem>
<Para>Runs in verbose mode, generating a verbose transcript of 
<Command>passwd_import</Command> activity.
</Para>
</ListItem>
</VarListEntry>
</VariableList>
</RefSect1>
<RefSect1>
<Title>Description</Title>
<Para>The <Command>passwd_import</Command> command is a mechanism for creating registry database 
entries that are consistent with foreign password and group file entries.
Use <Command>passwd_import</Command> to ensure consistency between DCE 
and foreign protection mechanisms when you do any of the following:
<?sml-break><?sml-need 5></Para>
<ItemizedList>
<ListItem>
<Para>Attach DCE node(s) to an existing UNIX network 
</Para>
</ListItem>
<ListItem>
<Para>Attach UNIX node(s) to a DCE network
</Para>
</ListItem>
<ListItem>
<Para>Connect DCE and UNIX networks 
</Para>
</ListItem>
</ItemizedList>
<Para>If the password and group file entries do not exist in 
the DCE registry, <Command>passwd_import</Command> creates them.
If there are duplicate entries, <Command>passwd_import</Command> 
follows your directions on how to handle them.
</Para>
<RefSect2>
<Title>The Process</Title>
<Para>The DCE registry database 
must exist and be running before you can use <Command>passwd_import</Command>.
If you are simply adding a few DCE nodes to a foreign network, 
you can create a new, but empty, registry to meet this requirement.
</Para>
<Para>As <Command>passwd_import</Command> processes, it performs the following steps: 
</Para>
<OrderedList>
<ListItem>
<Para>It opens the group and password files and establishes a connection 
to the registry. 
</Para>
</ListItem>
<ListItem>
<Para>It compares the group file entries to groups in the registry. 
If there are no conflicts, it creates groups in the registry 
corresponding to the groups in the group file.  
</Para>
</ListItem>
<ListItem>
<Para>It compares the entries in the password file 
to principals in the registry.  Again, if there are no conflicts, it
does the following:
</Para>
<OrderedList>
<ListItem>
<Para>Creates principals in the registry corresponding to the entries in 
the password file.
</Para>
</ListItem>
<ListItem>
<Para>Adds the newly created principals to the appropriate groups.
</Para>
</ListItem>
<ListItem>
<Para>Creates accounts for the newly created principals. 
</Para>
</ListItem>
</OrderedList>
</ListItem>
<ListItem>
<Para>It reexamines the group file and adds the principals as members of any 
addtional groups it finds there.
</Para>
</ListItem>
</OrderedList>
<Para>The changes to the registry are made individually as each step is
processed. If 
you do not specify the organization, the principals are added to the 
organization <Literal>none</Literal>.
</Para>
</RefSect2>
<RefSect2>
<Title>Conflicts</Title>
<Para>During this process, <Command>passwd_import</Command> can find conflicts 
in name strings (for example, in the password file: 
<Literal>joe</Literal> <Literal>102</Literal>; in the registry database:<Literal>joe</Literal> <Literal>555</Literal>) 
and in UNIX IDs (for example, in the password file: <Literal>joe 102</Literal>; 
in DCE: <Literal>carmelita</Literal> 102). 
When <Command>passwd_import</Command> finds a conflict, it prompts for changes 
to make to the <Filename>/etc/passwd</Filename> and <Filename>/etc/group</Filename> entries.
No changes are made to the registry entries. 
In other words, all conflicts are resolved in favor 
of the registry entry.
</Para>
<Para>The <Option>i</Option> option specifies that duplicate names are not in conflict but, 
in fact, represent the same identity.  Therefore, when duplicate names arise, no
action is necessary.   If you do not use the <Option>i</Option> option,  
<Command>passwd_import</Command> prompts for how to handle the name conflicts. 
</Para>
</RefSect2>
<RefSect2>
<Title>Resolving Conflicts</Title>
<Para>The <Command>passwd_import</Command> command prompts for instructions to resolve 
the conflicts it finds.  You have the following choices:
</Para>
<ItemizedList>
<ListItem>
<Para>You can create an alias to resolve a UNIX ID conflict.  This action creates 
an alias for the registry object in conflict.  
The <Command>passwd_import</Command> command 
assigns this alias the same name as the conflicting entry in the 
<Filename>/etc/group</Filename> or <Filename>/etc/passwd</Filename> file.  
For example, if the entry <Literal>joe 555</Literal> exists in the 
registry and the entry <Literal>tim 555</Literal> exists in the <Filename>/etc/passwd</Filename> file, 
choosing this option creates the alias <Literal>tim</Literal> for <Literal>joe 555</Literal>.
</Para>
</ListItem>
<ListItem>
<Para>You &ensp;can &ensp;generate &ensp;a &ensp;new UNIX ID &ensp;automatically &ensp;or &ensp;enter &ensp;a &ensp;new &ensp;
one explicitly to resolve a UNIX ID conflict.  
For example, if there is a conflict between the entry <Literal>joe 555</Literal> in the 
registry and <Literal>tim 555</Literal> in the <Filename>/etc/passwd</Filename> file, 
you can generate a new UNIX ID for <Literal>tim</Literal>.
</Para>
</ListItem>
<ListItem>
<Para>You can enter a new name to resolve a name conflict.  
For example if there is a conflict between the entry 
<Literal>joe 555</Literal> in the registry and <Literal>joe 383</Literal> in the 
<Filename>/etc/passwd</Filename> file, 
you can generate a new name for <Literal>joe 383</Literal>.  This new name 
will then be added to the registry.
</Para>
</ListItem>
</ItemizedList>
<Para>In addition, you are given the option of ignoring the conflict and 
skipping the entry.
</Para>
<Para>Generally, you should run <Command>passwd_import</Command> with 
the <Option>c</Option> option.  Using the results 
of this run, you can determine how to handle the conflicts.  
If there are many conflicts, it may be more efficient to manually 
edit either the registry or the group and password files 
to resolve some of them before you run <Command>import_passwd</Command>.     
</Para>
</RefSect2>
<RefSect2>
<Title>Registry Database Entries</Title>
<Para>New registry entries created by <Command>passwd_import</Command> are assigned the 
following values:
</Para>
<Para><Literal>For Principal and Group Entries:</Literal>
</Para>
<VariableList>
<VarListEntry role="linebreak">
<Term><Literal>alias/primary</Literal></Term>
<ListItem>
<Para>If the <Filename>/etc/passwd</Filename> file contains two entries with the same UNIX number, 
<Command>passwd_import</Command> creates a primary name entry for the 
first occurrence of the UNIX number and 
alias entries for each subsequent occurrence.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Literal>fullname</Literal></Term>
<ListItem>
<Para>A blank string; no full name is added for the entry. 
<?sml-break><?sml-need 4></Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term><Literal>membership list</Literal></Term>
<ListItem>
<Para>For new groups only; all principals listed in the group 
file, and all principals with accounts in the password file with that group.
<?sml-break></Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Literal>projlist_ok</Literal> </Term>
<ListItem>
<Para>Yes (for groups only).
</Para>
</ListItem>
</VarListEntry>
</VariableList>
<Para><Literal>For Account Entries:</Literal>
</Para>
<VariableList>
<VarListEntry role="linebreak">
<Term><Literal>Account expiration date</Literal></Term>
<ListItem>
<Para>None.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term><Literal>Account_valid</Literal></Term>
<ListItem>
<Para>False.  
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Literal>Client flag</Literal></Term>
<ListItem>
<Para>True.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term><Literal>Duplicate certificate flag</Literal></Term>
<ListItem>
<Para>False.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term><Literal>Forwardable certificate flag</Literal></Term>
<ListItem>
<Para>True.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Literal>Gecos</Literal></Term>
<ListItem>
<Para>Same as password file.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term><Literal>Good since date</Literal></Term>
<ListItem>
<Para>Time of account creation. 
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Literal>Homedir</Literal></Term>
<ListItem>
<Para>Same as password file. 
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term><Literal>Maximum certificate lifetime</Literal></Term>
<ListItem>
<Para>Default to registry authentication policy.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term><Literal>Maximum certificate renewable</Literal></Term>
<ListItem>
<Para>Default to registry authentication policy.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Literal>Passwd</Literal></Term>
<ListItem>
<Para>Randomly generated.  Note that you must modify 
or reset randomly generated passwords before user authentication is possible. 
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term><Literal>Passwd_dtm</Literal></Term>
<ListItem>
<Para>Date and time <Command>passwd_import</Command> was run.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term><Literal>Passwd_valid</Literal></Term>
<ListItem>
<Para>False. 
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term><Literal>Postdated certificate flag</Literal></Term>
<ListItem>
<Para>False.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term><Literal>Proxiable certificate flag</Literal></Term>
<ListItem>
<Para>False.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term><Literal>Renewable certificate flag</Literal></Term>
<ListItem>
<Para>True. 
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Literal>Server flag</Literal></Term>
<ListItem>
<Para>True.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry>
<Term><Literal>Shell</Literal></Term>
<ListItem>
<Para>Same as password file.
</Para>
</ListItem>
</VarListEntry>
<VarListEntry role="linebreak">
<Term><Literal>TGT authentication flag</Literal> </Term>
<ListItem>
<Para>True.
</Para>
</ListItem>
</VarListEntry>
</VariableList>
</RefSect2>
</RefSect1>
<RefSect1>
<Title>Related Information</Title>
<Para><!--no-op:  l-->
Commands:
<Filename MoreInfo="RefEntry">rgy_edit(8sec)</Filename>,
<Filename MoreInfo="RefEntry">sec_admin(8sec)</Filename>,
<Filename MoreInfo="RefEntry">secd(8sec)</Filename>.
<!--no-op:  b-->
<IndexTerm Id="DCECR.MAN164.indx.3" SpanEnd="DCECR.MAN164.indx.1"><IndexTerm Id="DCECR.MAN164.indx.4" SpanEnd="DCECR.MAN164.indx.2"></Para>
</RefSect1>
<!--+ 11/07/96 22:10:27
    | tagMorph:  $Id: passwd_import.8sec,v 1.1.2.7 1996/12/14 17:41:51 carrig Exp $
    | tagMorph library:  $Id: passwd_import.8sec,v 1.1.2.7 1996/12/14 17:41:51 carrig Exp $
    | sml-to-docbook:  1.24
    +-->
</RefEntry>
