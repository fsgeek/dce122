%!PS-Adobe-1.0
%%BoundingBox: 0.0 0.0 612.0 792.0
%%DocumentFonts: (atend)
%%Creator: walt@lobster with Eroff/eps release 3.1.4A
%%CreationDate: Wed Oct 11 16:17:32 1995
%%Pages: (atend)
%%EndComments
/DocState6269 save def
/pid 6269 def

0.2400 dup scale
/inch { 300.0000 mul } bind def
/pgtop 10.875 inch def
/stm usertime def
/ps { print flush } bind def
1.0 setlinewidth
/page { showpage restore save home } bind def
/home { newpath 0 pgtop moveto } bind def
/mf { statusdict /manualfeed true put } bind def
/af { statusdict /manualfeed false put } bind def
af
/xform { transform round exch round exch itransform } bind def
0 0 xform moveto
0 setlinecap
/y { neg 0 exch xform rmoveto } bind def
/X { currentpoint exch pop xform moveto } bind def
/Y { pgtop exch sub currentpoint pop exch xform moveto } bind def
/s { show } bind def
/S { exch currentpoint exch pop xform moveto show } bind def
/rgb { setrgbcolor } bind def
/fadecolor {
/_fadegray exch def
currentrgbcolor 1.0 exch sub _fadegray mul 1.0 exch sub 3 1 roll
1.0 exch sub _fadegray mul 1.0 exch sub 3 1 roll
1.0 exch sub _fadegray mul 1.0 exch sub 3 1 roll setrgbcolor
} bind def
/l { neg rlineto currentpoint stroke moveto } bind def
/elanpatternstep 16 def
/elanfillpat1 {
gsave
flattenpath pathbbox
/_ury exch def
/_urx exch def
/_lly exch def
/_llx exch def
/_height _ury _lly sub def
/_width _urx _llx sub def
clip newpath
_lly elanpatternstep _ury {
	_llx exch moveto _width 0 rlineto stroke
} for
grestore
} bind def
/elanfillpat2 {
gsave
flattenpath pathbbox
/_ury exch def
/_urx exch def
/_lly exch def
/_llx exch def
/_height _ury _lly sub def
/_width _urx _llx sub def
clip newpath
_llx elanpatternstep _urx {
	_lly moveto 0 _height rlineto stroke
} for
grestore
} bind def
/elanfillpat3 {
gsave
flattenpath pathbbox
/_ury exch def
/_urx exch def
/_lly exch def
/_llx exch def
/_height _ury _lly sub def
/_width _urx _llx sub def
clip newpath
_lly _width sub elanpatternstep _ury {
	_llx exch moveto _width _width rlineto stroke
} for
grestore
} bind def
/elanfillpat4 {
gsave
flattenpath pathbbox
/_ury exch def
/_urx exch def
/_lly exch def
/_llx exch def
/_height _ury _lly sub def
/_width _urx _llx sub def
clip newpath
_lly elanpatternstep _ury _width add {
	_llx exch moveto _width _width neg rlineto stroke
} for
grestore
} bind def
/elanfillpat5 { elanfillpat1 elanfillpat2 } bind def
/elanfillpat6 { elanfillpat3 elanfillpat4 } bind def
/elanfillpatterns 7 array def
elanfillpatterns 1 /elanfillpat1 put
elanfillpatterns 2 /elanfillpat2 put
elanfillpatterns 3 /elanfillpat3 put
elanfillpatterns 4 /elanfillpat4 put
elanfillpatterns 5 /elanfillpat5 put
elanfillpatterns 6 /elanfillpat6 put
/elanfillwith {
gsave 1 setgray fill grestore
gsave 0 setlinewidth elanfillpatterns exch get load exec grestore
} bind def
/boxpath { /_bpdy exch def /_bpdx exch def
currentpoint /_bpcury exch def /_bpcurx exch def
newpath _bpcurx _bpcury moveto 0 _bpdy rlineto _bpdx 0 rlineto
0 _bpdy neg rlineto closepath } bind def
/boxpathC { /_bprad exch def /_bpdy exch def /_bpdx exch def
currentpoint /_bpcury exch def /_bpcurx exch def newpath
_bpcurx _bpcury moveto _bprad 0 rmoveto
_bpcurx _bprad add _bpcury _bprad sub _bprad 90 180 arc
_bpcurx _bprad add _bpcury _bpdy add _bprad add _bprad 180 270 arc
_bpcurx _bpdx add _bprad sub _bpcury _bpdy add _bprad add
_bprad 270 0 arc
_bpcurx _bpdx add _bprad sub _bpcury _bprad sub _bprad 0 90 arc
closepath } bind def
/bnf { /dy exch def /dx exch def
currentpoint /cury exch def /curx exch def
dx dy boxpath
stroke curx dx add cury moveto } bind def
/bnfC { /_rad exch def /dy exch def /dx exch def
currentpoint /cury exch def /curx exch def
dx dy _rad boxpathC
stroke curx dx add cury moveto } bind def
/b { /dy exch def /dx exch def
currentpoint /cury exch def /curx exch def
dx dy boxpath
gsave fadecolor fill grestore
gsave stroke grestore
newpath curx dx add cury moveto } bind def
/bC { /_rad exch def /dy exch def /dx exch def
currentpoint /cury exch def /curx exch def
dx dy _rad boxpathC
gsave fadecolor fill grestore
gsave stroke grestore
newpath curx dx add cury moveto } bind def
/B { /dy exch def /dx exch def
currentpoint /cury exch def /curx exch def
gsave dx dy boxpath
fadecolor fill grestore curx dx add cury moveto } bind def
/BC { /_rad exch def /dy exch def /dx exch def
currentpoint /cury exch def /curx exch def
gsave dx dy _rad boxpathC
fadecolor fill grestore curx dx add cury moveto } bind def
/bP { /patno exch def /dy exch def /dx exch def
currentpoint /cury exch def /curx exch def
dx dy boxpath
patno elanfillwith
stroke
curx dx add cury moveto } bind def
/bPC { /_rad exch def /patno exch def /dy exch def /dx exch def
currentpoint /cury exch def /curx exch def
dx dy _rad boxpathC
patno elanfillwith
stroke
curx dx add cury moveto } bind def
/BP { /patno exch def /dy exch def /dx exch def
currentpoint /cury exch def /curx exch def
dx dy boxpath
patno elanfillwith
newpath
curx dx add cury moveto } bind def
/BPC { /_rad exch def /patno exch def /dy exch def /dx exch def
currentpoint /cury exch def /curx exch def
dx dy _rad boxpathC
patno elanfillwith
newpath
curx dx add cury moveto } bind def
/polystart { currentpoint newpath moveto } bind def
/polynext { rlineto } bind def
/polyclose { closepath } bind def
/polyfill { gsave closepath fadecolor fill grestore
currentpoint stroke moveto } bind def
/polyfillP { gsave closepath elanfillwith grestore
currentpoint stroke moveto } bind def
/polyfillnb { gsave closepath fadecolor fill grestore
currentpoint newpath moveto } bind def
/polyfillnbP { currentpoint closepath 3 -1 roll
elanfillwith newpath moveto } bind def
/polydraw { currentpoint stroke moveto } bind def
/c {
2 div /rad exch def currentpoint /y0 exch def /x0 exch def
newpath x0 rad add y0 xform rad 0 360 arc closepath stroke
x0 rad add rad add y0 xform moveto
 } bind def
/cf {
2 div /rad exch def currentpoint /y0 exch def /x0 exch def
newpath x0 rad add y0 xform rad 0 360 arc closepath
gsave fadecolor fill grestore stroke
x0 rad add rad add y0 xform moveto
 } bind def
/cP {
2 div /rad exch def currentpoint /y0 exch def /x0 exch def
newpath x0 rad add y0 xform rad 0 360 arc closepath
elanfillwith stroke
x0 rad add rad add y0 xform moveto
 } bind def
/Cf {
2 div /rad exch def currentpoint /y0 exch def /x0 exch def
gsave newpath x0 rad add y0 xform rad 0 360 arc closepath
fadecolor fill grestore
x0 rad add rad add y0 xform moveto
 } bind def
/CP {
2 div /rad exch def currentpoint /y0 exch def /x0 exch def
newpath x0 rad add y0 xform rad 0 360 arc closepath
elanfillwith newpath
x0 rad add rad add y0 xform moveto
 } bind def
/a {
/y2 exch neg def /x2 exch def /y1 exch neg def /x1 exch def
x1 y1 xform rmoveto currentpoint
currentpoint
x2 x2 mul y2 y2 mul add sqrt
y1 neg x1 neg atan
y2 x2 atan
newpath arc stroke moveto x2 y2 rmoveto
} bind def
/e {
currentlinewidth /elw exch def
gsave
2 div /yrad exch def 2 div /xrad exch def
currentpoint /y0 exch def /x0 exch def
x0 xrad add y0 translate
xrad yrad scale
newpath 0 0 xform 1 0 360 arc closepath
elw xrad div setlinewidth
stroke
grestore
elw setlinewidth
x0 xrad add xrad add y0 xform moveto
} bind def
/ef {
currentlinewidth /elw exch def
gsave
2 div /yrad exch def 2 div /xrad exch def
currentpoint /y0 exch def /x0 exch def
x0 xrad add y0 translate
xrad yrad scale
newpath 0 0 xform 1 0 360 arc closepath
elw xrad div setlinewidth
gsave fadecolor fill grestore stroke
grestore
elw setlinewidth
x0 xrad add xrad add y0 xform moveto
} bind def
/eP {
currentlinewidth /elw exch def
gsave
2 div /yrad exch def 2 div /xrad exch def
currentpoint /y0 exch def /x0 exch def
x0 xrad add y0 translate
xrad yrad scale
newpath 0 0 xform 1 0 360 arc closepath
elw xrad div setlinewidth
1 xrad div 1 yrad div scale elanfillwith stroke
grestore
elw setlinewidth
x0 xrad add xrad add y0 xform moveto
} bind def
/Ef {
currentlinewidth /elw exch def
gsave
2 div /yrad exch def 2 div /xrad exch def
currentpoint /y0 exch def /x0 exch def
x0 xrad add y0 translate
xrad yrad scale
newpath 0 0 xform 1 0 360 arc closepath
elw xrad div setlinewidth
fadecolor fill
grestore
elw setlinewidth
x0 xrad add xrad add y0 xform moveto
} bind def
/EP {
currentlinewidth /elw exch def
gsave
2 div /yrad exch def 2 div /xrad exch def
currentpoint /y0 exch def /x0 exch def
x0 xrad add y0 translate
xrad yrad scale
newpath 0 0 xform 1 0 360 arc closepath
elw xrad div setlinewidth
1 xrad div 1 yrad div scale elanfillwith newpath
grestore
elw setlinewidth
x0 xrad add xrad add y0 xform moveto
} bind def
/spln {
rcurveto currentpoint stroke moveto
} bind def
/ft { /fonttype exch def /xsiz exch def /ysiz exch def /sl exch def
 fonttype [ xsiz pt 0 sl sin sl cos div ysiz pt mul ysiz pt 0 0 ]
 makefont setfont } bind def
/doImage {{currentfile rasterString
readhexstring pop} imagemask} bind def
/pt { 4.166667 mul } bind def

0.375 0.000000 add inch 0.25 inch translate
/savematrix matrix currentmatrix def
/roman-8-dict 20 dict def	% Local storage
/roman-8-mappings [
8#260 /Adieresis 8#265 /Aring 8#276 /Aacute 8#300 /Agrave
8#311 /Acircumflex 8#314 /Atilde 8#321 /Ccedilla 8#322 /Edieresis
8#323 /Eacute 8#324 /Egrave 8#325 /Ecircumflex 8#326 /Idieresis
8#327 /Iacute 8#330 /Igrave 8#331 /Icircumflex 8#332 /Ntilde
8#333 /Odieresis 8#334 /Oacute 8#335 /Ograve 8#336 /Ocircumflex
8#337 /Otilde 8#340 /Scaron 8#342 /Udieresis 8#344 /Uacute
8#345 /Ugrave 8#346 /Ydieresis 8#347 /adieresis 8#354 /aring
8#355 /aacute 8#356 /agrave 8#357 /acircumflex 8#360 /atilde
8#362 /ccedilla 8#363 /edieresis 8#364 /eacute 8#366 /egrave
8#367 /ecircumflex 8#374 /idieresis 8#375 /iacute 8#376 /igrave
8#220 /icircumflex 8#221 /ntilde 8#222 /odieresis 8#223 /oacute
8#224 /ograve 8#225 /ocircumflex 8#226 /otilde 8#227 /scaron
8#230 /udieresis 8#231 /uacute 8#232 /ugrave 8#233 /ucircumflex
8#234 /ydieresis 8#235 /Ucircumflex
] def
/AddRoman-8 {
	roman-8-dict begin
		/roman-8-mappings exch def
		/newName exch def
		/oldName exch def
		/oldDict oldName findfont def
		/newDict oldDict maxlength dict def
		oldDict {
			exch dup /FID ne
			{
				dup /Encoding eq
				{
					exch dup length array copy
					newDict 3 1 roll put
				}
				{
					exch newDict 3 1 roll put
				} ifelse
			}
			{
				pop pop
			} ifelse
		} forall
		newDict /FontName newName put
		0 2 roman-8-mappings length 1 sub {
			dup
			roman-8-mappings exch get
			exch 1 add roman-8-mappings exch get
			newDict /Encoding get 3 1 roll put
		} for
		newName newDict definefont pop
	end
} bind def
/BracketFontDict 9 dict def /$workingdict 10 dict def
BracketFontDict begin
/FontType 3 def
/FontName (Bracket) cvn def
/FontMatrix [ 0.001 0 0 0.001 0 0] def
/FontBBox [ -50 -250 1000 1000 ] def
/Encoding 256 array def 0 1 255 { Encoding exch /.notdef put } for
Encoding
dup 65 /Cbv put
dup 66 /Clt put
dup 67 /Clk put
dup 68 /Clb put
dup 69 /Crt put
dup 70 /Crk put
dup 71 /Crb put
dup 72 /Clc put
dup 73 /Clf put
dup 74 /Crc put
dup 75 /Crf put
dup 76 /Cbr put
dup 77 /Crn put
dup 78 /Cci put
dup 79 /C|| put
dup 80 /C^^ put
dup 81 /Cr1 put
dup 82 /Cr2 put
pop
/CharProcs 24 dict dup begin
/setC { 0 -50 -250 500 1000 setcachedevice} bind def
/C.bv {220 -250 moveto 0 1000 rlineto
60 0 rlineto 0 -1000 rlineto fill } bind def
/C.cbar { 750 moveto 180 0 rlineto 0 -60 rlineto -180 0 rlineto fill } bind def
/C.fbar { -250 moveto 180 0 rlineto 0 60 rlineto -180 0 rlineto fill } bind def
/C.brk.end { 1 setlinewidth moveto rlineto rcurveto
reversepath 60 0 rlineto rlineto rcurveto fill } bind def
/C.setl {dup dtransform exch round exch idtransform pop setlinewidth } bind def
/Cbv {
208 setC
C.bv
} bind def
/Clt {
208 setC
 0 150 50 210 140 250
 0 730
 0 150 50 250 200 250
 0 750
 220 -250
 C.brk.end

} bind def
/Clk {
208 setC
 1 setlinewidth
 220 -250 moveto
 0 400 rlineto
 0 50 -50 100 -100 100 rcurveto
 50 0 100 50 100 100 rcurveto
 0 400 rlineto
 60 0 rlineto
 0 -400 rlineto
 0 -50 -50 -100 -100 -100 rcurveto
 50 0 100 -50 100 -100 rcurveto
 0 -400 rlineto
 closepath fill

} bind def
/Clb {
208 setC
 0 -150 50 -210 140 -250
 0 -730
 0 -150 50 -250 200 -250
 0 -750
 220 750
 C.brk.end

} bind def
/Crt {
208 setC
 0 150 -50 250 -200 250
 0 750
 0 150 -50 210 -140 250
 0 730
 220 -250
 C.brk.end

} bind def
/Crk {
208 setC
 1 setlinewidth
 220 -250 moveto
 0 400 rlineto
 0 50 50 100 100 100 rcurveto
 -50 0 -100 50 -100 100 rcurveto
 0 400 rlineto
 60 0 rlineto
 0 -400 rlineto
 0 -50 50 -100 100 -100 rcurveto
 -50 0 -100 -50 -100 -100 rcurveto
 0 -400 rlineto
 fill

} bind def
/Crb {
208 setC
 0 -150 -50 -250 -200 -250
 0 -750
 0 -150 -50 -210 -140 -250
 0 -730
 220 750
 C.brk.end

} bind def
/Clc {
208 setC
 C.bv
 280
 C.cbar

} bind def
/Clf {
208 setC
 C.bv 280 C.fbar

} bind def
/Crc {
208 setC
 C.bv 40 C.cbar

} bind def
/Crf {
208 setC
 C.bv 40 C.fbar

} bind def
/Cbr {
0 0 -50 -250 0 1000 setcachedevice
 40 C.setl
 0 -250 moveto
 0 1000 rlineto
 stroke

} bind def
/Crn {
208 setC
 40 C.setl
 0 770 moveto
 500 0 rlineto
 stroke

} bind def
/Cci {
937 0 -50 -250 937 1000 setcachedevice
 40 C.setl
 500 250
 400
 0 360 arc
 stroke

} bind def
/C|| {
70 0 -50 -250 70 1000 setcachedevice


} bind def
/C^^ {
33 0 -50 -250 33 1000 setcachedevice


} bind def
/Cr1 {
333 0 -50 -250 333 1000 setcachedevice
 40 C.setl
 0 setlinejoin
 700 180 moveto -650 currentlinewidth add 0 rlineto 200 -200 rlineto
 50 360 moveto 650 currentlinewidth sub 0 rlineto -200 200 rlineto
 stroke

} bind def
/Cr2 {
333 0 -50 -250 333 1000 setcachedevice
 40 C.setl
 2 setlinejoin
 217 18 moveto

 -150 150 rlineto 150 150 rlineto -150 -150 rlineto
 633 0 rlineto
 50 360 moveto
 633 0 rlineto
 -150 150 rlineto 150 -150 rlineto -150 -150 rlineto
 stroke

} bind def
end def
/BuildChar
{
	$workingdict begin
	/charcode exch def
	/fontdict exch def
	fontdict /CharProcs get begin
	fontdict /Encoding get
	charcode get load
	gsave
	0 setlinecap 0 setgray newpath
	exec
	grestore
	end end
} bind def end
/BracketFont BracketFontDict definefont pop

1.0000 setlinewidth
[] 0 setdash

%%EndProlog
%%Page: label 1
%%PageFonts: (atend)

/PageState6269 save def
home

0 Y
225 X
400 Y
0.000000 setgray
%%IncludeFont: Helvetica-Bold

/Helvetica-Bold /Helvetica-Bold-8 roman-8-mappings AddRoman-8
/f.HB /Helvetica-Bold-8 findfont def

0.0 10 10 f.HB ft(O)s
257(p)S
282(e)S
305(n)S
330( )S
342(S)S
370(o)S
395(f)S
409(t)S
423(w)S
455(a)S
478(r)S
494(e)S
517( )S
529(F)S
553(o)S
578(u)S
603(n)S
628(d)S
653(a)S
676(t)S
690(i)S
702(o)S
727(n)S
1726 X(B)s
1756(l)S
1768(a)S
1791(k)S
1814(e)S
1837( )S
1849(L)S
1874(e)S
1897(w)S
1929(i)S
1941(s)S
1964( )S
1976(\()S
1990(T)S
2012(r)S
2028(a)S
2051(n)S
2076(s)S
2099(a)S
2122(r)S
2138(c)S
2161(\))S
225 X
450 Y(R)s
255(e)S
278(q)S
303(u)S
328(e)S
351(s)S
374(t)S
388( )S
400(F)S
424(o)S
449(r)S
465( )S
477(C)S
507(o)S
532(m)S
569(m)S
606(e)S
629(n)S
654(t)S
668(s)S
691(:)S
705( )S
717(7)S
740(5)S
763(.)S
775(0)S
225 X
500 Y(O)s
257(c)S
280(t)S
294(o)S
319(b)S
344(e)S
367(r)S
383( )S
395(1)S
418(9)S
441(9)S
464(5)S
225 X
708 Y
867 X
0.0 12 12 f.HB ft(EPISODE)s
1105(VM)S
1195(I)S
1209(N)S
1245(T)S
1275(E)S
1309(G)S
1347(R)S
1383(A)S
1415(T)S
1445(I)S
1459(O)S
1497(N)S
225 X
816 Y
0.0 10 10 f.HB ft(1)s
248(.)S
260( )S
272(I)S
284(N)S
314(T)S
339(R)S
369(O)S
401(D)S
431(U)S
461(C)S
491(T)S
516(I)S
528(O)S
560(N)S
225 X
891 Y
%%IncludeFont: Times-Roman

/Times-Roman /Times-Roman-8 roman-8-mappings AddRoman-8
/f.R /Times-Roman-8 findfont def

0.0 10 10 f.R ft(This)s
312(document)S
491(describes)S
661(the)S
727(r)S
741(e)S
760(o)S
781(r)S
795(g)S
816(a)S
835(n)S
856(i)S
868(z)S
887(a)S
906(t)S
918(i)S
930(o)S
951(n)S
986(of)S
1035(the)S
1101(Episode)S
1250(I/O)S
1320(path)S
1407(for)S
1470(the)S
1536(10/94)S
1646(release.)S
1798(This)S
1886(work)S
1986(was)S
2065(under)S
2161 X(-)s
225 X
941 Y(taken)s
327(with)S
412(the)S
474(following)S
648(g)S
669(o)S
690(a)S
709(l)S
721(s)S
737(:)S
225 X
1016 Y
283(\()S
297(a)S
316(\))S
351(I)S
365(m)S
397(p)S
418(r)S
432(o)S
453(v)S
474(e)S
503(write)S
600(latency)S
733(\(eliminate)S
915(unnecessary)S
1131(synchronous)S
1353(w)S
1383(r)S
1397(i)S
1409(t)S
1421(e)S
1440(s)S
1456(\))S
1470(.)S
225 X
1091 Y
281(\()S
295(b)S
316(\))S
351(E)S
376(l)S
388(i)S
400(m)S
432(i)S
444(n)S
465(a)S
484(t)S
496(e)S
525(disk)S
605(block)S
709(reservation)S
907(s)S
923(y)S
944(s)S
960(t)S
972(e)S
991(m)S
1023(.)S
225 X
1166 Y
283(\()S
297(c)S
316(\))S
351(S)S
374(i)S
386(m)S
418(p)S
439(l)S
451(i)S
463(f)S
477(y)S
508(source)S
628(code)S
718(\(improved)S
903(m)S
935(a)S
954(i)S
966(n)S
987(t)S
999(a)S
1018(i)S
1030(n)S
1051(a)S
1070(b)S
1091(i)S
1103(l)S
1115(i)S
1127(t)S
1139(y)S
1160(,)S
1180(p)S
1201(o)S
1222(r)S
1236(t)S
1248(a)S
1267(b)S
1288(i)S
1300(l)S
1312(i)S
1324(t)S
1336(y)S
1357(\))S
1371(.)S
225 X
1241 Y
281(\()S
295(d)S
316(\))S
351(R)S
379(e)S
398(d)S
419(u)S
440(c)S
459(e)S
488(CPU)S
579(u)S
600(s)S
616(a)S
635(g)S
656(e)S
675(.)S
225 X
1316 Y
283(\()S
297(e)S
316(\))S
351(M)S
388(a)S
407(i)S
419(n)S
440(t)S
452(a)S
471(i)S
483(n)S
514(throughput;)S
721(no)S
773(deleterious)S
969(side-e)S
1070 X
/Cff{ (f) show xsiz pt 20 div neg 0 rmoveto (f) s
}bind def

Cff
1096(ects.)S
225 X
1391 Y
288(\()S
302(f)S
316(\))S
351(G)S
381(e)S
400(t)S
422(correct)S
550(``zero)S
651 X(\256)s
674(ll'')S
736(semantics)S
912(\()S
926(u)S
947(n)S
968(i)S
980(n)S
1001(i)S
1013(t)S
1025(i)S
1037(a)S
1056(l)S
1068(i)S
1080(z)S
1099(e)S
1118(d)S
1149(parts)S
1241(of)S
1286(the)S
1348 X(\256)s
1371(le)S
1412(always)S
1539(contain)S
1674(z)S
1693(e)S
1712(r)S
1726(o)S
1747(e)S
1766(s)S
1782(\))S
1796(.)S
225 X
1466 Y(The)s
302(main)S
398(result)S
504(of)S
551(the)S
615(r)S
629(e)S
648(o)S
669(r)S
683(g)S
704(a)S
723(n)S
744(i)S
756(z)S
775(a)S
794(t)S
806(i)S
818(o)S
839(n)S
872(is)S
912(the)S
976(separation)S
1162(of)S
1209(disk)S
1291(block)S
1397(allocation)S
1577(and)S
1650 X(\256)s
1673(le)S
1717(promotion)S
1905(\(i.e.,)S
1993(changes)S
2142(in)S
225 X
1516 Y(on-disk)s
364(r)S
378(e)S
397(p)S
418(r)S
432(e)S
451(s)S
467(e)S
486(n)S
507(t)S
519(a)S
538(t)S
550(i)S
562(o)S
583(n)S
604(\))S
631(from)S
725(the)S
790(write)S
890(path,)S
986(allowing)S
1146(us)S
1195(to)S
1240(perform)S
1387(these)S
1486(functions)S
1655(at)S
1698(a)S
1729(higher)S
1849(level)S
1944(in)S
1989(advance)S
2140(of)S
225 X
1566 Y(scheduling)s
418(any)S
489(disk)S
569(w)S
599(r)S
613(i)S
625(t)S
637(e)S
656(s)S
672(.)S
225 X
1641 Y
0.0 10 10 f.HB ft(1)s
248(.)S
260(1)S
283(.)S
295( )S
307(A)S
337(d)S
362(v)S
385(a)S
408(n)S
433(t)S
447(a)S
470(g)S
495(e)S
518(s)S
225 X
1716 Y
0.0 10 10 f.R ft
283(\()S
297(a)S
316(\))S
351(T)S
376(h)S
397(e)S
428(strategy)S
574(\(disk)S
671(I/O\))S
754(path)S
840(becomes)S
1000(much)S
1106(simpler.)S
1265(In-line)S
1391 X(\256)s
1414(les)S
1474(need)S
1567(a)S
1599(bit)S
1657(of)S
1705(special)S
1836(handling,)S
2007(but)S
2074(other)S
2161 X(-)s
225 X
1766 Y
351 X(wise)s
439(strategy)S
584(becomes)S
742(essentially)S
932(a)S
961(wrapper)S
1109(for)S
1168(the)S
1230(device)S
1351(driver)S
1462(strategy)S
1606(routine.)S
1756(There)S
1864(is)S
1902(no)S
1954(need)S
2044(for)S
2103(syn)S
2161 X(-)s
225 X
1816 Y
351 X(chronous)s
515(``slow)S
632(p)S
653(a)S
672(t)S
684(h)S
703(')S
717(')S
741(w)S
771(r)S
785(i)S
797(t)S
809(e)S
828(s)S
844(.)S
225 X
1891 Y
281(\()S
295(b)S
316(\))S
351(T)S
376(h)S
397(e)S
426(reservation)S
624(system)S
750(disappears.)S
958(W)S
995(e)S
1024(no)S
1076(longer)S
1194(need)S
1284(to)S
1327(reserve)S
1459(space)S
1563(since)S
1660(it)S
1694(is)S
1732(now)S
1814(allocated)S
1978(in)S
2021(a)S
2040(d)S
2061(v)S
2082(a)S
2101(n)S
2122(c)S
2141(e)S
2160(.)S
225 X
1966 Y
283(\()S
297(c)S
316(\))S
351(T)S
376(h)S
397(e)S
428(new)S
510(interfaces)S
687(will)S
765(let)S
820(getpage)S
965(detect)S
1080(holes)S
1182(and)S
1256(unwritable)S
1450(backing)S
1597(storage)S
1732(and)S
1806(turn)S
1887(o)S
1908 X
Cff
1947(write)S
2047(permis)S
2161 X(-)s
225 X
2016 Y
351 X(sion)s
431(when)S
532(reading)S
669(from)S
760(t)S
772(h)S
793(e)S
812(s)S
828(e)S
847(.)S
225 X
2091 Y
281(\()S
295(d)S
316(\))S
351(B)S
379(e)S
398(c)S
417(a)S
436(u)S
457(s)S
473(e)S
502(they)S
585(know)S
688(how)S
770(the)S
832(disk)S
912(blocks)S
1032(are)S
1094(laid)S
1168(out,)S
1242(getpage)S
1384(and)S
1455(putpage)S
1599(will)S
1675(only)S
1760(lock)S
1843(as)S
1888(many)S
1991(as)S
2037(pages)S
2144(at)S
225 X
2141 Y
351 X(a)s
383(time)S
471(as)S
519(they)S
605(can)S
677(transfer)S
819(in)S
865(a)S
897(single)S
1011(disk)S
1094(I/O.)S
1182(P)S
1204(r)S
1218(e)S
1237(s)S
1253(e)S
1272(n)S
1293(t)S
1305(l)S
1317(y)S
1338(,)S
1360(they)S
1445(lock)S
1530(arbitrarily)S
1712(sized)S
1811(page)S
1903(lists,)S
1993(p)S
2014(o)S
2035(t)S
2047(e)S
2066(n)S
2087(t)S
2099(i)S
2111(a)S
2130(l)S
2142(l)S
2154(y)S
225 X
2191 Y
351 X(over)s
436(several)S
566(disk)S
646(I)S
660(/)S
672(O)S
702(')S
715(s)S
731(.)S
225 X
2266 Y
0.0 10 10 f.HB ft(1)s
248(.)S
260(2)S
283(.)S
295( )S
307(D)S
337(r)S
353(a)S
376(w)S
408(b)S
433(a)S
456(c)S
479(k)S
502(s)S
225 X
2341 Y
0.0 10 10 f.R ft(The)s
301(current)S
432(lazy)S
514(allocation)S
693(scheme)S
831(permits)S
969(a)S
1000(simple)S
1124(block)S
1230(allocator)S
1391(\(or)S
1452(at)S
1495(least)S
1585(minimizes)S
1772(its)S
1824(de)S
1864 X(\256)s
1887(ciencies\).)S
2070(Doing)S
225 X
2391 Y(allocation)s
406(in)S
452(advance)S
603(requires)S
751(a)S
782(more)S
880(complex)S
1037(mechanism)S
1240(so)S
1289(that)S
1365(concurrent)S
1558(updates)S
1699(will)S
1777 X(\256)s
1800(nd)S
1854(contiguous)S
2051(r)S
2065(e)S
2084(g)S
2105(i)S
2117(o)S
2138(n)S
2159(s)S
225 X
2441 Y(of)s
271(disk)S
352(blocks)S
473(without)S
613(interfering)S
803(with)S
889(each)S
978(other.)S
1096(UFS)S
1183(may)S
1266(o)S
1287 X
Cff
1313(er)S
1357(some)S
1456(useful)S
1571(lessons.)S
1724(So)S
1780(far,)S
1849(the)S
1913(existing)S
2059(alloca)S
2161 X(-)s
225 X
2491 Y(tor)s
284(appears)S
425(adequate.)S
608(However,)S
784(we)S
845(should)S
969(do)S
1023(further)S
1150(i)S
1162(n)S
1183(v)S
1204(e)S
1223(s)S
1239(t)S
1251(i)S
1263(g)S
1284(a)S
1303(t)S
1315(i)S
1327(o)S
1348(n)S
1381(as)S
1428(part)S
1506(of)S
1553(any)S
1626(serious)S
1757(e)S
1776 X
Cff
1802(ort)S
1861(to)S
1906(improve)S
2058(perfor)S
2161 X(-)s
225 X
2541 Y(mance.)s
225 X
2616 Y
0.0 10 10 f.HB ft(1)s
248(.)S
260(3)S
283(.)S
295( )S
307(S)S
335(i)S
347(m)S
384(p)S
409(l)S
421(i)S
433(f)S
447(y)S
470(i)S
482(n)S
507(g)S
544(A)S
574(s)S
597(s)S
620(u)S
645(m)S
682(p)S
707(t)S
721(i)S
733(o)S
758(n)S
783(s)S
225 X
2691 Y
0.0 10 10 f.R ft(In)s
273(order)S
375(to)S
421(simplify)S
574(the)S
639(i)S
651(m)S
683(p)S
704(l)S
716(e)S
735(m)S
767(e)S
786(n)S
807(t)S
819(a)S
838(t)S
850(i)S
862(o)S
883(n)S
904(,)S
927(we)S
989(impose)S
1123(the)S
1189(following)S
1367(constraints)S
1564(on)S
1620(the)S
1686(con)S
1747 X(\256)s
1770(guration)S
1925(of)S
1974(the)S
2040 X(\256)s
2063(le)S
2108(sys)S
2161 X(-)s
225 X
2741 Y(tem:)s
225 X
2816 Y
283(\()S
297(a)S
316(\))S
351(P)S
373(a)S
392(g)S
413(e)S
442(size)S
518 X
%%IncludeFont: Symbol

/f.S /Symbol findfont def

0.0 10 10 f.S ft(\243)s
551 X
0.0 10 10 f.R ft(\256)s
574(le)S
615(system)S
741(block)S
845(size.)S
225 X
2891 Y
281(\()S
295(b)S
316(\))S
351(D)S
381(i)S
393(s)S
409(k)S
440(block)S
544(\(sector\))S
683(size)S
759 X
0.0 10 10 f.S ft(\243)s
792 X
0.0 10 10 f.R ft(\256)s
815(le)S
856(system)S
982(fragment)S
1144(size.)S
225 X
2966 Y
283(\()S
297(c)S
316(\))S
351(A)S
381(l)S
393(l)S
415(sizes)S
507(are)S
569(powers)S
700(of)S
745(two)S
818(\(so)S
879(that)S
953(every)S
1057(smaller)S
1191(unit)S
1267(divides)S
1399(evenly)S
1522(into)S
1598(every)S
1702(larger)S
1811(u)S
1832(n)S
1853(i)S
1865(t)S
1877(\))S
1891(.)S
225 X
3220 Y
%%IncludeFont: Helvetica

/Helvetica /Helvetica-8 roman-8-mappings AddRoman-8
/f.H /Helvetica-8 findfont def

0.0 10 10 f.H ft(Lewis)s
2044 X(P)s
2071(a)S
2094(g)S
2117(e)S
2140( )S
2152(1)S
3300 Y
showpage
PageState6269 restore

%%PageFonts: Helvetica-Bold Times-Roman Symbol Helvetica
%%Page: label 2
%%PageFonts: (atend)
/PageState6269 save def
home

0.000000 setgray
%%IncludeFont: Helvetica

/Helvetica /Helvetica-8 roman-8-mappings AddRoman-8
/f.H /Helvetica-8 findfont def

0.0 10 10 f.H ft
1.0000 setlinewidth
[] 0 setdash

225 X
200 Y(OSF-RFC 75.0)s
983 X(E)s
1011(p)S
1034(i)S
1043(s)S
1064(o)S
1087(d)S
1110(e)S
1133( )S
1145(V)S
1173(M)S
1208( )S
1220(I)S
1232(n)S
1255(t)S
1267(e)S
1290(g)S
1313(r)S
1327(a)S
1350(t)S
1362(i)S
1371(o)S
1394(n)S
1923 X(O)s
1955(c)S
1976(t)S
1988(o)S
2011(b)S
2034(e)S
2057(r)S
2071( )S
2083(1)S
2106(9)S
2129(9)S
2152(5)S
225 X
400 Y
%%IncludeFont: Helvetica-Bold

/Helvetica-Bold /Helvetica-Bold-8 roman-8-mappings AddRoman-8
/f.HB /Helvetica-Bold-8 findfont def

0.0 10 10 f.HB ft(2. NEW)s
381(I)S
393(N)S
423(T)S
448(E)S
476(R)S
506(F)S
530(A)S
560(C)S
590(E)S
618(S)S
225 X
475 Y
%%IncludeFont: Times-Roman

/Times-Roman /Times-Roman-8 roman-8-mappings AddRoman-8
/f.R /Times-Roman-8 findfont def

0.0 10 10 f.R ft
283(\()S
297(a)S
316(\))S
351(i)S
363(n)S
384(t)S
406(e)S
425(f)S
439(s)S
455(_)S
476(M)S
513(a)S
532(k)S
553(e)S
571(W)S
608(r)S
622(i)S
634(t)S
646(a)S
665(b)S
686(l)S
698(e)S
717(B)S
745(l)S
757(o)S
778(c)S
797(k)S
818(s)S
834(\()S
848(v)S
869(p)S
890(,)S
910(o)S
931 X
/Cff{ (f) show xsiz pt 20 div neg 0 rmoveto (f) s
}bind def

Cff
957(,)S
977(len,)S
1049 X(\257)s
1072(ags\);)S
225 X
550 Y
351 X(Makes)s
473(sure)S
553(that)S
627(writable)S
776(disk)S
856(storage)S
988(backs)S
1094(vnode)S
1207(vp)S
1259(over)S
1344(the)S
1406(range)S
1510(speci)S
1597 X(\256)s
1620(ed)S
1670(by)S
1723(o)S
1744 X
Cff
1781(and)S
1853(len,)S
1926(allocating)S
2105(new)S
225 X
600 Y
351 X(disk)s
435(blocks)S
559(if)S
598(necessary.)S
795(If)S
836(COW)S
946(blocks)S
1069(back)S
1162(any)S
1236(part)S
1315(of)S
1363(the)S
1428(range,)S
1545(their)S
1636(contents)S
1790(is)S
1831(copied)S
1957(into)S
2036(w)S
2066(r)S
2080(i)S
2092(t)S
2104(a)S
2123(b)S
2144(l)S
2156(e)S
225 X
650 Y
351 X(blocks)s
472(\(unless)S
602(the)S
665 X(\257)s
688(ags)S
755(say)S
822(not)S
888(to)S
933 X(\320)s
987(see)S
1053(below\).)S
1202(Returns)S
1345(an)S
1397(error)S
1491(if)S
1529(the)S
1593(allocation)S
1773(cannot)S
1898(be)S
1950(done.)S
2064(C)S
2092(a)S
2111(l)S
2123(l)S
2135(e)S
2154(d)S
225 X
700 Y
351 X(with)s
436(the)S
498(v)S
519(n)S
540(o)S
561(d)S
582(e)S
598(')S
611(s)S
637 X(\256)s
660(le)S
701(and)S
772(vm)S
835(locks)S
934(held.)S
225 X
775 Y
351 X(efs_vmwrite)s
574(\(VOP_WRITE\))S
850(and)S
924(efs_getpage)S
1139(\()S
1153(V)S
1183(O)S
1213(P)S
1236(_)S
1257(G)S
1287(E)S
1312(T)S
1337(P)S
1359(A)S
1389(G)S
1419(E)S
1444(\))S
1471(use)S
1540(this)S
1615(routine)S
1749(to)S
1796(do)S
1852(any)S
1927(necessary)S
2105(disk)S
225 X
825 Y
351 X(allocation)s
529(before)S
647(they)S
730(initiate)S
859(a)S
888(write.)S
1005(v)S
1026(n)S
1047(m)S
1079(_)S
1100(T)S
1122(r)S
1136(u)S
1157(n)S
1178(c)S
1197(a)S
1216(t)S
1228(e)S
1257(also)S
1335(uses)S
1417(it)S
1451(to)S
1494(handle)S
1617(truncations)S
1815(into)S
1891(a)S
1920(COW)S
2027(b)S
2048(l)S
2060(o)S
2081(c)S
2100(k)S
2121(.)S
225 X
900 Y
351 X(The)s
430 X(\257)s
453(ags)S
523(contain)S
662(three)S
762(bits)S
838(of)S
888(information.)S
1122(MWB_ZEROFILL)S
1457(indicates)S
1623(that)S
1702(any)S
1778(newly)S
1896(allocated)S
2065(b)S
2086(l)S
2098(o)S
2119(c)S
2138(k)S
2159(s)S
225 X
950 Y
351 X(should)s
478(be)S
533(initialized)S
719(with)S
809(zeroes.)S
952(W)S
989(e)S
1023(set)S
1085(this)S
1160 X(\257)s
1183(ags)S
1253(at)S
1298(all)S
1355(times)S
1460(except)S
1585(during)S
1709(volume)S
1849(write.)S
1970(The)S
2049(v)S
2070(o)S
2091(l)S
2103(u)S
2124(m)S
2156(e)S
225 X
1000 Y
351 X(operations)s
537(always)S
664(initialize)S
824(allocated)S
988(blocks)S
1108(before)S
1226(making)S
1362(them)S
1456(a)S
1475(c)S
1494(c)S
1513(e)S
1532(s)S
1548(s)S
1564(i)S
1576(b)S
1597(l)S
1609(e)S
1628(.)S
225 X
1075 Y
351 X(If)s
396(MWB_USE_VM)S
704(is)S
749(set,)S
823(we)S
889(do)S
948(the)S
1017(zeroing)S
1161(by)S
1220(creating)S
1374(dirty,)S
1482(zero-)S
1569 X(\256)s
1592(lled)S
1674(pages)S
1788(to)S
1839(cover)S
1951(the)S
2021(a)S
2040(l)S
2052(l)S
2064(o)S
2085(c)S
2104(a)S
2123(t)S
2135(e)S
2154(d)S
225 X
1125 Y
351 X(blocks,)s
482(thus)S
563(avoiding)S
722(the)S
785(cost)S
864(of)S
910(an)S
961(immediate)S
1150(write)S
1248(and)S
1320(also)S
1399(a)S
1429(read)S
1513(when)S
1615(V)S
1645(O)S
1675(P)S
1698(_)S
1719(G)S
1749(E)S
1774(T)S
1799(P)S
1821(A)S
1851(G)S
1881(E)S
1917(is)S
1955(s)S
1971(u)S
1992(b)S
2013(s)S
2029(e)S
2048(q)S
2069(u)S
2090(e)S
2109(n)S
2130(t)S
2142(l)S
2154(y)S
225 X
1175 Y
351 X(called.)s
483(If)S
521(it)S
555(is)S
593(not)S
657(set,)S
724(we)S
783(zero)S
866(the)S
928(blocks)S
1048(directly)S
1188(by)S
1241(a)S
1271(disk)S
1352(write.)S
1470(W)S
1507(e)S
1537(use)S
1604(MWB_USE_VM)S
1906(on)S
1959(SunOS)S
2088(in)S
2132(all)S
225 X
1225 Y
351 X(cases)s
454(except)S
579(volume)S
719(writes)S
836(\(when)S
955(we)S
1018(bypass)S
1146(the)S
1212(VM)S
1293(system\);)S
1449(because)S
1597(of)S
1646(the)S
1712(limitations)S
1907(of)S
1956(the)S
2021(AIX)S
2108(VM)S
225 X
1275 Y
351 X(system,)s
487(we)S
546(cannot)S
669(use)S
735(it)S
769(on)S
821(AIX.)S
225 X
1350 Y
351 X(MWB_OVERWRITE)s
732(is)S
772(set)S
831(in)S
876(cases)S
977(where)S
1092(we)S
1153(know)S
1258(that)S
1334(we)S
1395(are)S
1459(going)S
1567(to)S
1612(replace)S
1747(the)S
1811(entire)S
1921(contents)S
2075(of)S
2123(the)S
225 X
1400 Y
351 X(speci)s
438 X(\256)s
461(ed)S
511(range.)S
635(Thus,)S
738(we)S
797(do)S
849(not)S
913(bother)S
1031(copying)S
1177(any)S
1248(data)S
1329(from)S
1420(COW)S
1527(b)S
1548(l)S
1560(o)S
1581(c)S
1600(k)S
1621(s)S
1637(.)S
225 X
1475 Y
351 X(Assumption:)s
575(vp)S
627(has)S
693(the)S
755(correct)S
883(storage)S
1015(type)S
1098(\(no)S
1164(promotion)S
1349(n)S
1370(e)S
1389(e)S
1408(d)S
1429(e)S
1448(d)S
1469(\))S
1483(.)S
225 X
1550 Y
281(\()S
295(b)S
316(\))S
351(i)S
363(n)S
384(t)S
406(e)S
425(f)S
439(s)S
455(_)S
476(F)S
499(i)S
511(n)S
532(d)S
553(B)S
581(l)S
593(o)S
614(c)S
633(k)S
654(s)S
670(\()S
684(v)S
705(p)S
726(,)S
746(o)S
767 X
Cff
793(,)S
813(b)S
834(l)S
846(o)S
867(c)S
886(k)S
907(P)S
929(,)S
949(w)S
979(r)S
993(L)S
1018(e)S
1037(n)S
1058(P)S
1080(,)S
1100(r)S
1114(d)S
1135(L)S
1160(e)S
1179(n)S
1200(P)S
1223(\))S
1237(;)S
225 X
1625 Y
351 X(Find)s
445(disk)S
532(blocks)S
659(c)S
678(o)S
699(r)S
713(r)S
727(e)S
746(s)S
762(p)S
783(o)S
804(n)S
825(d)S
846(i)S
858(n)S
879(g)S
917(to)S
967(\(vp,)S
1050(o)S
1071 X
Cff
1097(\),)S
1138(without)S
1284(allocating.)S
1489(*blockP)S
1644(is)S
1689(the)S
1758(disk)S
1845(address)S
1988(of)S
2040(the)S
2110 X(\256)s
2133(rst)S
225 X
1675 Y
351 X(block;)s
470(*wrLenP)S
636(is)S
677(the)S
742(number)S
883(of)S
931(bytes)S
1033(of)S
1081(contiguous,)S
1289(writable)S
1440(allocated)S
1606(disk)S
1688(space)S
1794(starting)S
1933(at)S
1976(this)S
2049(a)S
2068(d)S
2089(d)S
2110(r)S
2124(e)S
2143(s)S
2159(s)S
225 X
1725 Y
351 X(and)s
423(*rdLenP)S
578(is)S
617(the)S
680(number)S
820(of)S
867(readable)S
1023(bytes.)S
1144(Note)S
1238(that)S
1314(the)S
1378(returned)S
1531(disk)S
1613(address)S
1751(is)S
1791(in)S
1836(units)S
1930(of)S
%%IncludeFont: Times-Italic

/Times-Italic /Times-Italic-8 roman-8-mappings AddRoman-8
/f.I /Times-Italic-8 findfont def

0.0 10 10 f.I ft
1977(disk)S
2057(blocks)S
0.0 10 10 f.R ft
2165(,)S
225 X
1775 Y
351 X(not)s
419 X(\256)s
442(le)S
487(system)S
617(blocks,)S
751(so)S
802(that)S
880(this)S
955(interface)S
1118(can)S
1191(be)S
1245(used)S
1336(for)S
1399(both)S
1488(blocked)S
1636(and)S
1711(fragmented)S
1917 X(\256)s
1940(les.)S
2021(Also,)S
2123(the)S
225 X
1825 Y
351 X(returned)s
507(lengths)S
644(need)S
739(not)S
808(be)S
863(maximal.)S
1045(The)S
1126(i)S
1138(m)S
1170(p)S
1191(l)S
1203(e)S
1222(m)S
1254(e)S
1273(n)S
1294(t)S
1306(a)S
1325(t)S
1337(i)S
1349(o)S
1370(n)S
1407(will)S
1489(likely)S
1602(stop)S
1688(searching)S
1866(when)S
1973(it)S
2013(reaches)S
2156(a)S
225 X
1875 Y
351 X(natural)s
483(boundary,)S
666(e.g.,)S
750(at)S
795(the)S
861(end)S
936(of)S
985(an)S
1039(indirect)S
1183(block.)S
1311(Finally,)S
1455(if)S
1494(there)S
1592(is)S
1633(a)S
1665(hole)S
1751(at)S
1795(\(vp,)S
1874(o)S
1895 X
Cff
1921(\),)S
1958(*blockP)S
2109(will)S
225 X
1925 Y
351 X(contain)s
492(E)S
517(P)S
540(I)S
554(X)S
584(_)S
605(A)S
635(N)S
665(O)S
695(D)S
725(E)S
750(_)S
771(B)S
799(L)S
824(O)S
854(C)S
882(K)S
912(E)S
937(M)S
974(P)S
997(T)S
1022(Y)S
1049(,)S
1075(and)S
1152(both)S
1244(*rdLenP)S
1405(and)S
1483(*wrLenP)S
1653(will)S
1736(be)S
1793(zero.)S
1903(Called)S
2031(with)S
2123(the)S
225 X
1975 Y
351 X(v)s
372(n)S
393(o)S
414(d)S
435(e)S
451(')S
464(s)S
490 X(\256)s
513(le)S
554(lock)S
637(held.)S
225 X
2050 Y
283(\()S
297(c)S
316(\))S
351(i)S
363(n)S
384(t)S
406(e)S
425(f)S
439(s)S
455(_)S
476(F)S
499(i)S
511(n)S
532(d)S
553(W)S
590(r)S
604(i)S
616(t)S
628(a)S
647(b)S
668(l)S
680(e)S
699(B)S
727(l)S
739(o)S
760(c)S
779(k)S
800(s)S
816(\()S
830(v)S
851(p)S
872(,)S
892(o)S
913 X
Cff
939(,)S
959(b)S
980(l)S
992(o)S
1013(c)S
1032(k)S
1053(P)S
1075(,)S
1095(l)S
1107(e)S
1126(n)S
1147(P)S
1170(\))S
1184(;)S
225 X
2125 Y
351 X(Find)s
443(disk)S
528(blocks)S
653(for)S
717(the)S
784(given)S
893(vp)S
951(and)S
1028(o)S
1049 X
Cff
1075(set,)S
1148(without)S
1293(allocating.)S
1497(*blockP)S
1651(is)S
1695(the)S
1763(disk)S
1849(address)S
1991(of)S
2042(the)S
2110 X(\256)s
2133(rst)S
225 X
2175 Y
351 X(block;)s
471(*lenP)S
581(is)S
623(the)S
689(number)S
831(of)S
880(contiguous)S
1079(writable)S
1232(bytes)S
1335(starting)S
1476(at)S
1521(this)S
1596(address.)S
1756(Like)S
1847(FindBlocks,)S
2064(e)S
2083(x)S
2104(c)S
2123(e)S
2142(p)S
2163(t)S
225 X
2225 Y
351 X(that)s
429(it)S
467(only)S
556(returns)S
687(information)S
900(about)S
1008(writable)S
1161(blocks,)S
1295(so)S
1346(that)S
1424(it)S
1462(can)S
1536(return)S
1652(immediately)S
1878(if)S
1919(it)S
1958(encounters)S
2156(a)S
225 X
2275 Y
351 X(read-only)s
523(block.)S
647(Called)S
768(with)S
853(the)S
915(v)S
936(n)S
957(o)S
978(d)S
999(e)S
1015(')S
1028(s)S
1054 X(\256)s
1077(le)S
1118(lock)S
1201(held.)S
225 X
2350 Y
281(\()S
295(d)S
316(\))S
351(l)S
363(o)S
384(n)S
405(g)S
436(e)S
455(f)S
469(s)S
485(_)S
506(C)S
534(h)S
555(e)S
574(c)S
593(k)S
614(A)S
644(l)S
656(l)S
668(o)S
689(c)S
708(a)S
727(t)S
739(i)S
751(o)S
772(n)S
793(\()S
807(a)S
826(p)S
847(,)S
867(o)S
888 X
Cff
914(,)S
934(d)S
955(b)S
976(l)S
988(k)S
1009(P)S
1031(,)S
1051(l)S
1063(e)S
1082(n)S
1103(P)S
1125(,)S
1145(i)S
1157(s)S
1173(C)S
1201(o)S
1222(w)S
1252(P)S
1275(\))S
1289(;)S
225 X
2425 Y
351 X(This)s
437(is)S
477(the)S
541(lower-level)S
746(interface)S
907(used)S
996(by)S
1050(the)S
1114(two)S
1189(preceding)S
1368(functions.)S
1557(It)S
1595(returns)S
1725(the)S
1790(disk)S
1873(address)S
2012(for)S
2074(anode)S
225 X
2475 Y
351 X(ap)s
405(at)S
450(o)S
471 X
Cff
497(set)S
558(o)S
579 X
Cff
619(\(or)S
682(EFS_HOLE)S
898(if)S
938(this)S
1013(is)S
1054(a)S
1086(hole\),)S
1196(and)S
1270(the)S
1335(length)S
1454(in)S
1500(bytes)S
1602(of)S
1650(the)S
1715(number)S
1856(of)S
1904(")S
1919(s)S
1935(i)S
1947(m)S
1979(i)S
1991(l)S
2003(a)S
2022(r)S
2035(")S
2065(b)S
2086(l)S
2098(o)S
2119(c)S
2138(k)S
2159(s)S
225 X
2525 Y
351 X(beginning)s
531(at)S
573(that)S
648(address.)S
805(That)S
893(is,)S
942(if)S
979(there)S
1075(is)S
1114(a)S
1144(writable)S
1294(block)S
1399(at)S
1441(o)S
1462 X
Cff
1488(set)S
1546(o)S
1567 X
Cff
1593(,)S
1614(*lenP)S
1721(will)S
1798(be)S
1849(the)S
1913(number)S
2053(of)S
2100(con)S
2161 X(-)s
225 X
2575 Y
351 X(tiguous)s
491(writable)S
646(bytes)S
751(starting)S
893(at)S
939(that)S
1018(o)S
1039 X
Cff
1065(set,)S
1137(and)S
1213(similarly)S
1378(for)S
1442(COW)S
1554(blocks)S
1679(and)S
1755(holes.)S
1879(isCowP)S
2024(i)S
2036(n)S
2057(d)S
2078(i)S
2090(c)S
2109(a)S
2128(t)S
2140(e)S
2159(s)S
225 X
2625 Y
351 X(whether)s
497(the)S
559(region)S
677(consists)S
820(of)S
865(COW)S
972(blocks.)S
1112(Must)S
1208(not)S
1272(be)S
1322(used)S
1409(with)S
1494(in-line)S
1615 X(\256)s
1638(les.)S
225 X
2700 Y
283(\()S
297(e)S
316(\))S
351(o)S
372 X
Cff
398(_t)S
441(e)S
460(f)S
474(s)S
490(_)S
511(N)S
541(e)S
560(x)S
581(t)S
593(B)S
621(l)S
633(o)S
654(c)S
673(k)S
694(\()S
708(v)S
729(p)S
750(,)S
770(o)S
791 X
Cff
817(,)S
837(len\);)S
225 X
2750 Y
351 X(o)s
372 X
Cff
398(_t)S
441(e)S
460(f)S
474(s)S
490(_)S
511(N)S
541(e)S
560(x)S
581(t)S
593(W)S
630(r)S
644(i)S
656(t)S
668(a)S
687(b)S
708(l)S
720(e)S
739(B)S
767(l)S
779(o)S
800(c)S
819(k)S
840(\()S
854(v)S
875(p)S
896(,)S
916(o)S
937 X
Cff
963(,)S
983(len\);)S
225 X
2825 Y
351 X(Return)s
478(the)S
542(o)S
563 X
Cff
589(set)S
648(at)S
691(which)S
806(the)S
870(next)S
955(\(writable\))S
1134(disk)S
1216(block)S
1323(appears.)S
1485(len)S
1550(speci)S
1637 X(\256)s
1660(es)S
1708(how)S
1793(far)S
1853(to)S
1899(search)S
2020(\(0)S
2068(means)S
225 X
2875 Y
351 X(until)s
443(EOF\);)S
560(returns)S
690(-1)S
738(if)S
777(no)S
832(suitable)S
977(block)S
1084(is)S
1125(found.)S
1256(These)S
1369(are)S
1434(intended)S
1593(to)S
1639(make)S
1743(operations)S
1932(on)S
1987(sparse)S
2105 X(\256)s
2128(les)S
225 X
2925 Y
351 X(more)s
447(e)S
466 X
/CFi{ (f) show xsiz pt 20 div neg 0 rmoveto (\256) s
}bind def

CFi
501(cient.)S
614(Called)S
735(with)S
820(v)S
841(n)S
862(o)S
883(d)S
904(e)S
920(')S
933(s)S
959 X(\256)s
982(le)S
1023(lock)S
1106(held.)S
225 X
3000 Y
288(\()S
302(f)S
316(\))S
351(i)S
363(n)S
384(t)S
406(e)S
425(f)S
439(s)S
455(_)S
476(P)S
498(r)S
512(o)S
533(m)S
565(o)S
586(t)S
598(e)S
617(\()S
631(v)S
652(p)S
673(,)S
693(new_len,)S
856(u)S
877(s)S
893(e)S
910(V)S
940(M)S
977(\))S
991(;)S
225 X
3220 Y
0.0 10 10 f.H ft(Lewis)s
2044 X(P)s
2071(a)S
2094(g)S
2117(e)S
2140( )S
2152(2)S
3300 Y
showpage
PageState6269 restore

%%PageFonts: Helvetica Helvetica-Bold Times-Roman Times-Italic
%%Page: label 3
%%PageFonts: (atend)
/PageState6269 save def
home

0.000000 setgray
%%IncludeFont: Helvetica

/Helvetica /Helvetica-8 roman-8-mappings AddRoman-8
/f.H /Helvetica-8 findfont def

0.0 10 10 f.H ft
1.0000 setlinewidth
[] 0 setdash

225 X
200 Y(OSF-RFC 75.0)s
983 X(E)s
1011(p)S
1034(i)S
1043(s)S
1064(o)S
1087(d)S
1110(e)S
1133( )S
1145(V)S
1173(M)S
1208( )S
1220(I)S
1232(n)S
1255(t)S
1267(e)S
1290(g)S
1313(r)S
1327(a)S
1350(t)S
1362(i)S
1371(o)S
1394(n)S
1923 X(O)s
1955(c)S
1976(t)S
1988(o)S
2011(b)S
2034(e)S
2057(r)S
2071( )S
2083(1)S
2106(9)S
2129(9)S
2152(5)S
225 X
400 Y
351 X
%%IncludeFont: Times-Roman

/Times-Roman /Times-Roman-8 roman-8-mappings AddRoman-8
/f.R /Times-Roman-8 findfont def

0.0 10 10 f.R ft(Does)s
448(any)S
520(storage)S
653(class)S
746(conversion)S
942(necessary)S
1117(so)S
1165(that)S
1240(vp)S
1293(can)S
1364(represent)S
1531(a)S
1562 X(\256)s
1585(le)S
1628(of)S
1675(the)S
1739(speci)S
1826 X(\256)s
1849(ed)S
1901(length,)S
2029(and)S
2102(then)S
225 X
450 Y
351 X(sets)s
433(the)S
504(length.)S
649(The)S
733(vnode)S
855(must)S
955(not)S
1028(have)S
1127(any)S
1207(allocated)S
1380(disk)S
1469(storage)S
1610(or)S
1664(pages)S
1779(beyond)S
1922(new_len)S
2084(when)S
225 X
500 Y
351 X(e)s
370(f)S
384(s)S
400(_)S
421(P)S
443(r)S
457(o)S
478(m)S
510(o)S
531(t)S
543(e)S
572(is)S
610(called.)S
742(Called)S
863(with)S
948(the)S
1010(v)S
1031(n)S
1052(o)S
1073(d)S
1094(e)S
1110(')S
1123(s)S
1149(vm)S
1212(lock)S
1295(held.)S
225 X
575 Y
351 X(The)s
426(u)S
447(s)S
463(e)S
480(V)S
510(M)S
558(argument)S
728(indicates)S
890(whether)S
1037(e)S
1056(f)S
1070(s)S
1086(_)S
1107(P)S
1129(r)S
1143(o)S
1164(m)S
1196(o)S
1217(t)S
1229(e)S
1259(should)S
1382(zero)S
1466(newly)S
1580(allocated)S
1745(storage)S
1878(by)S
1931(creating)S
2079(pages)S
225 X
625 Y
351 X(or)s
396(by)S
448(doing)S
554(direct)S
661(disk)S
741(writes.)S
874(It)S
910(is)S
948(true)S
1024(except)S
1145(during)S
1265(volume)S
1401(operations)S
1587(and)S
1658(on)S
1710(AIX.)S
225 X
700 Y
281(\()S
295(g)S
316(\))S
351(i)S
363(n)S
384(t)S
406(e)S
425(f)S
439(s)S
455(_)S
476(H)S
506(a)S
525(s)S
541(H)S
571(o)S
592(l)S
604(e)S
623(s)S
639(\()S
653(v)S
674(p)S
695(\))S
709(;)S
225 X
775 Y
351 X(Calculate)s
523(whether)S
670(vp)S
723(has)S
790(any)S
862(holes)S
962(or)S
1008(COW)S
1116(blocks)S
1237(by)S
1290(comparing)S
1481(allocated)S
1646(blocks)S
1767(to)S
1811(length.)S
1948(Lets)S
2032(us)S
2081(avoid)S
225 X
825 Y
351 X(doing)s
457(e)S
476(f)S
490(s)S
506(_)S
527(F)S
550(i)S
562(n)S
583(d)S
604(B)S
632(l)S
644(o)S
665(c)S
684(k)S
705(s)S
731(on)S
783 X(\256)s
806(les)S
863(that)S
937(are)S
999(completely)S
1197(allocated.)S
1381(Called)S
1502(with)S
1587(v)S
1608(n)S
1629(o)S
1650(d)S
1671(e)S
1687(')S
1700(s)S
1726 X(\256)s
1749(le)S
1790(lock)S
1873(held.)S
225 X
900 Y
281(\()S
295(h)S
316(\))S
351(i)S
363(n)S
384(t)S
406(e)S
425(f)S
439(s)S
455(_)S
476(D)S
506(i)S
518(s)S
534(c)S
553(a)S
572(r)S
586(d)S
607(V)S
637(M)S
674(\()S
688(v)S
709(p)S
730(,)S
750(oldLen,)S
889(newLen,)S
1044(c)S
1063(r)S
1077(e)S
1096(d)S
1117(p)S
1138(\))S
1152(;)S
225 X
975 Y
351 X(Invalidates)s
547(all)S
600(pages)S
706(for)S
765(vnode)S
878(vp)S
930(between)S
1081(o)S
1102 X
/Cff{ (f) show xsiz pt 20 div neg 0 rmoveto (f) s
}bind def

Cff
1128(sets)S
1201(oldLen)S
1330(and)S
1401(n)S
1422(e)S
1441(w)S
1471(L)S
1496(e)S
1515(n)S
1536(.)S
225 X
1050 Y
290(\()S
304(i)S
316(\))S
351(v)S
372(o)S
393(i)S
405(d)S
436(e)S
455(f)S
469(s)S
485(_)S
506(C)S
534(r)S
548(e)S
567(a)S
586(t)S
598(e)S
617(D)S
647(i)S
659(r)S
673(t)S
685(y)S
706(Z)S
731(e)S
750(r)S
764(o)S
785(P)S
807(a)S
826(g)S
847(e)S
866(s)S
882(\()S
896(v)S
917(p)S
938(,)S
958(start,)S
1051(end\))S
225 X
1125 Y
351 X(Cover)s
466(the)S
530(region)S
650(of)S
697(vp)S
751(between)S
904(start)S
990(and)S
1064(end)S
1138(with)S
1226(dirty,)S
1329(zero-)S
1416 X(\256)s
1439(lled)S
1516(pages.)S
1645(This)S
1732(region)S
1853(must)S
1947(be)S
2000(backed)S
2133(by)S
225 X
1175 Y
351 X(disk)s
431(s)S
447(t)S
459(o)S
480(r)S
494(a)S
513(g)S
534(e)S
553(.)S
225 X
1250 Y
290(\()S
304(j)S
316(\))S
351(i)S
363(n)S
384(t)S
406(E)S
431(F)S
454(S)S
477(_)S
498(Z)S
523(E)S
548(R)S
576(O)S
606(F)S
629(I)S
643(L)S
668(L)S
693(_)S
714(L)S
739(A)S
769(S)S
792(T)S
817(_)S
838(P)S
860(A)S
890(G)S
920(E)S
945(\()S
959(v)S
980(p)S
1001(,)S
1021(len\);)S
225 X
1325 Y
351 X(Fill)s
421(the)S
484(page)S
575(containing)S
766(o)S
787 X
Cff
813(set)S
872(len)S
936(with)S
1023(zeroes)S
1143(from)S
1236(len)S
1300(to)S
1345(the)S
1409(end)S
1482(of)S
1529(the)S
1593(page.)S
1705(Used)S
1803(when)S
1906(truncating)S
2090(a)S
2121 X(\256)s
2144(le)S
225 X
1375 Y
351 X(downwards)s
554(to)S
597(make)S
698(sure)S
778(that)S
852(the)S
914(portion)S
1046(of)S
1091(the)S
1153(last)S
1222(page)S
1312(following)S
1486(EOF)S
1574(contains)S
1725(z)S
1744(e)S
1763(r)S
1777(o)S
1798(e)S
1817(s)S
1833(.)S
225 X
1450 Y
281(\()S
295(k)S
316(\))S
351(s)S
367(t)S
379(r)S
393(u)S
414(c)S
433(t)S
455(buf)S
521(*)S
542(v)S
563(o)S
584(l)S
596(_)S
617(e)S
636(f)S
650(s)S
666(G)S
696(e)S
715(t)S
727(B)S
755(u)S
776(f)S
790(\()S
804(v)S
825(p)S
846(,)S
866(b)S
887 X(\257)s
910(ags,)S
986(len,)S
1058(d)S
1079(a)S
1098(d)S
1119(d)S
1140(r)S
1154(\))S
1168(;)S
225 X
1525 Y
351 X(Creates)s
489(a)S
519(struct)S
624(buf)S
691(to)S
735(describe)S
887(a)S
917(volume)S
1054(I/O)S
1121(operation.)S
1312(The)S
1388(b_un.b_addr)S
1611(member)S
1760(will)S
1838(point)S
1937(to)S
1982(a)S
2013(bu)S
2055 X
Cff
2081(er)S
2126(for)S
225 X
1575 Y
351 X(the)s
413(data.)S
225 X
1650 Y
290(\()S
304(l)S
316(\))S
351(v)S
372(o)S
393(l)S
405(_)S
426(e)S
445(f)S
459(s)S
475(S)S
498(t)S
510(a)S
529(r)S
543(t)S
555(I)S
569(O)S
599(\()S
613(b)S
634(p)S
655(\))S
669(;)S
225 X
1725 Y
351 X(Interface)s
512(for)S
571(reading)S
708(and)S
779(writing)S
911(without)S
1050(using)S
1151(either)S
1258(the)S
1320(VM)S
1397(or)S
1442(bu)S
1484 X
Cff
1510(er)S
1553(systems,)S
1705(to)S
1748(be)S
1798(used)S
1885(by)S
1937(volume)S
2073(ops.)S
225 X
1800 Y
270(\()S
284(m)S
316(\))S
351(i)S
363(n)S
384(t)S
406(v)S
427(o)S
448(l)S
460(_)S
481(e)S
500(f)S
514(s)S
530(B)S
558(i)S
570(o)S
590(W)S
627(a)S
646(i)S
658(t)S
670(\()S
684(b)S
705(p)S
726(\))S
740(;)S
225 X
1875 Y
351 X(W)s
388(a)S
407(i)S
419(t)S
431(s)S
457(for)S
516(volume)S
652(I/O)S
718(on)S
770(buf)S
836(bp)S
888(to)S
931(complete;)S
1108(returns)S
1235(error)S
1327(s)S
1343(t)S
1355(a)S
1374(t)S
1386(u)S
1407(s)S
1423(.)S
225 X
1950 Y([The)s
314(remaining)S
495(interfaces)S
670(are)S
732(not)S
796(currently)S
959(i)S
971(m)S
1003(p)S
1024(l)S
1036(e)S
1055(m)S
1087(e)S
1106(n)S
1127(t)S
1139(e)S
1158(d)S
1179(.)S
1189(])S
225 X
2025 Y
283(\()S
297(a)S
316(\))S
351(e)S
370(p)S
391(i)S
403(a)S
422(_)S
443(R)S
471(e)S
490(c)S
509(o)S
530(r)S
544(d)S
565(U)S
595(n)S
616(d)S
637(o)S
658(Z)S
683(e)S
702(r)S
716(o)S
737(\()S
751(t)S
763(r)S
777(a)S
796(n)S
817(I)S
831(d)S
852(,)S
872(bp\))S
225 X
2100 Y
351 X(Record)s
486(the)S
551(disk)S
634(blocks)S
757(associated)S
944(with)S
1032(the)S
1097(speci)S
1184 X(\256)s
1207(ed)S
1260(undo-zero)S
1444(transaction)S
1643(so)S
1693(that)S
1770(we)S
1832(can)S
1904(detect)S
2019(when)S
2123(the)S
225 X
2150 Y
351 X(transaction)s
547(can)S
616(be)S
666(c)S
685(o)S
706(m)S
738(p)S
759(l)S
771(e)S
790(t)S
802(e)S
821(d)S
842(.)S
225 X
2225 Y
281(\()S
295(b)S
316(\))S
351(e)S
370(p)S
391(i)S
403(a)S
422(_)S
443(U)S
473(p)S
494(d)S
515(a)S
534(t)S
546(e)S
565(U)S
595(n)S
616(d)S
637(o)S
658(Z)S
683(e)S
702(r)S
716(o)S
737(\()S
751(b)S
772(p)S
793(,)S
813 X(\256)s
836(n)S
857(i)S
869(s)S
885(h)S
904(T)S
926(r)S
940(a)S
959(n)S
980(\))S
225 X
2300 Y
351 X(F)s
373(o)S
394(l)S
406(l)S
418(o)S
439(w)S
469(i)S
481(n)S
502(g)S
536(completion)S
739(of)S
788(a)S
821(disk)S
905(write,)S
1016(remove)S
1156(p)S
1177(e)S
1196(n)S
1217(d)S
1238(i)S
1250(n)S
1271(g)S
1292(-)S
1306(b)S
1327(l)S
1339(o)S
1360(c)S
1379(k)S
1414(info.)S
1506(for)S
1569(the)S
1635(write)S
1736(and)S
1811(update)S
1938(the)S
2004(u)S
2025(n)S
2046(d)S
2067(o)S
2088(-)S
2102(z)S
2121(e)S
2140(r)S
2154(o)S
225 X
2350 Y
351 X(pending-block)s
610(count.)S
739(If)S
782(the)S
849(count)S
957(reaches)S
1098(zero)S
1185(and)S
1260 X(\256)s
1283(n)S
1304(i)S
1316(s)S
1332(h)S
1351(T)S
1373(r)S
1387(a)S
1406(n)S
1441(is)S
1483(true,)S
1573(end)S
1648(the)S
1714(transaction;)S
1926(if)S
1966 X(\256)s
1989(n)S
2010(i)S
2022(s)S
2038(h)S
2057(T)S
2079(r)S
2093(a)S
2112(n)S
2147(is)S
225 X
2400 Y
351 X(false,)s
451(put)S
515(it)S
549(on)S
601(a)S
630(queue)S
741(for)S
800(processing)S
990(by)S
1042(the)S
1104(async)S
1210(d)S
1231(a)S
1250(e)S
1269(m)S
1301(o)S
1322(n)S
1343(.)S
225 X
2475 Y
283(\()S
297(c)S
316(\))S
351(e)S
370(p)S
391(i)S
403(a)S
422(_)S
443(P)S
465(u)S
486(r)S
500(g)S
521(e)S
540(U)S
570(n)S
591(d)S
612(o)S
633(Z)S
658(e)S
677(r)S
691(o)S
712(\()S
726(v)S
747(p)S
768(,)S
788(o)S
809 X
Cff
835(,)S
855(len\))S
225 X
2550 Y
351 X(When)s
463(removing)S
636(allocated)S
802(blocks)S
924(by)S
978(truncation,)S
1172(put)S
1238(any)S
1311(p)S
1332(e)S
1351(n)S
1372(d)S
1393(i)S
1405(n)S
1426(g)S
1447(-)S
1461(b)S
1482(l)S
1494(o)S
1515(c)S
1534(k)S
1568(records)S
1705(on)S
1760(a)S
1792(special)S
1923(list)S
1988(and)S
2062(u)S
2083(p)S
2104(d)S
2125(a)S
2144(t)S
2156(e)S
225 X
2600 Y
351 X(the)s
413(undo-zero)S
594(p)S
615(e)S
634(n)S
655(d)S
676(i)S
688(n)S
709(g)S
730(-)S
744(b)S
765(l)S
777(o)S
798(c)S
817(k)S
848(count.)S
972(Always)S
1110(ends)S
1197(the)S
1259(transaction)S
1455(if)S
1491(the)S
1553(count)S
1657(reaches)S
1794(zero.)S
225 X
2675 Y
281(\()S
295(d)S
316(\))S
351(e)S
370(p)S
391(i)S
403(a)S
422(_)S
443(F)S
465(o)S
486(r)S
500(c)S
519(e)S
538(U)S
568(n)S
589(d)S
610(o)S
631(Z)S
656(e)S
675(r)S
689(o)S
710(\()S
724(t)S
736(r)S
750(a)S
769(n)S
790(I)S
804(d)S
825(\))S
225 X
2750 Y
351 X(F)s
373(o)S
394(r)S
408(c)S
427(e)S
456(completion)S
656(of)S
701(an)S
751(undo-zero)S
932(transaction)S
1128(by)S
1180(initializing)S
1375(all)S
1428(as)S
1473(yet)S
1535(unwritten)S
1707(disk)S
1788(blocks)S
1909(with)S
1995(zeroes)S
2114(and)S
225 X
2800 Y
351 X(ending)s
476(the)S
538(t)S
550(r)S
564(a)S
583(n)S
604(s)S
620(a)S
639(c)S
658(t)S
670(i)S
682(o)S
703(n)S
724(.)S
225 X
2875 Y
283(\()S
297(e)S
316(\))S
351(e)S
370(p)S
391(i)S
403(a)S
422(_)S
443(W)S
480(a)S
499(i)S
511(t)S
523(F)S
545(o)S
566(r)S
580(U)S
610(n)S
631(d)S
652(o)S
673(Z)S
698(e)S
717(r)S
731(o)S
752(\()S
766(\))S
225 X
2950 Y
351 X(Called)s
472(by)S
524(the)S
586(transaction)S
782(system)S
908(when)S
1009(the)S
1071(log)S
1135(is)S
1173(full;)S
1254(sleeps)S
1367(until)S
1455(an)S
1505(undo-zero)S
1686(transaction)S
1882(has)S
1948(c)S
1967(o)S
1988(m)S
2020(p)S
2041(l)S
2053(e)S
2072(t)S
2084(e)S
2103(d)S
2124(.)S
225 X
3220 Y
0.0 10 10 f.H ft(Lewis)s
2044 X(P)s
2071(a)S
2094(g)S
2117(e)S
2140( )S
2152(3)S
3300 Y
showpage
PageState6269 restore

%%PageFonts: Helvetica Times-Roman
%%Page: label 4
%%PageFonts: (atend)
/PageState6269 save def
home

0.000000 setgray
%%IncludeFont: Helvetica

/Helvetica /Helvetica-8 roman-8-mappings AddRoman-8
/f.H /Helvetica-8 findfont def

0.0 10 10 f.H ft
1.0000 setlinewidth
[] 0 setdash

225 X
200 Y(OSF-RFC 75.0)s
983 X(E)s
1011(p)S
1034(i)S
1043(s)S
1064(o)S
1087(d)S
1110(e)S
1133( )S
1145(V)S
1173(M)S
1208( )S
1220(I)S
1232(n)S
1255(t)S
1267(e)S
1290(g)S
1313(r)S
1327(a)S
1350(t)S
1362(i)S
1371(o)S
1394(n)S
1923 X(O)s
1955(c)S
1976(t)S
1988(o)S
2011(b)S
2034(e)S
2057(r)S
2071( )S
2083(1)S
2106(9)S
2129(9)S
2152(5)S
225 X
400 Y
%%IncludeFont: Helvetica-Bold

/Helvetica-Bold /Helvetica-Bold-8 roman-8-mappings AddRoman-8
/f.HB /Helvetica-Bold-8 findfont def

0.0 10 10 f.HB ft(3. ZERO-FILL)s
500(C)S
530(O)S
562(R)S
592(R)S
622(E)S
650(C)S
680(T)S
705(N)S
735(E)S
763(S)S
791(S)S
225 X
475 Y
%%IncludeFont: Times-Roman

/Times-Roman /Times-Roman-8 roman-8-mappings AddRoman-8
/f.R /Times-Roman-8 findfont def

0.0 10 10 f.R ft(Unix)s
319(semantics)S
495(require)S
625(that)S
699(reading)S
836(from)S
927(a)S
956(part)S
1032(of)S
1077(the)S
1139 X(\256)s
1162(le)S
1203(where)S
1316(nothing)S
1455(has)S
1521(previously)S
1709(been)S
1799(written)S
1929(returns)S
2057(z)S
2076(e)S
2095(r)S
2109(o)S
2130(e)S
2149(s)S
2165(.)S
225 X
525 Y(T)s
247(w)S
277(o)S
310(consequences)S
554(of)S
601(this)S
674(are)S
738(that)S
814(when)S
916(we)S
976(create)S
1089(a)S
1119(new)S
1200(page,)S
1301(any)S
1373(parts)S
1466(of)S
1512(it)S
1547(not)S
1612(initialized)S
1794(with)S
1880(user)S
1961(data)S
2043(must)S
2135(be)S
225 X
575 Y
225 X(\256)s
248(lled)S
326(with)S
415(zeroes,)S
547(and)S
622(similarly,)S
796(when)S
901(we)S
964(write)S
1065(a)S
1098(partially)S
1254 X(\256)s
1277(lled)S
1355(block)S
1463(to)S
1510(disk,)S
1604(the)S
1670(unused)S
1803(portions)S
1955(must)S
2050(c)S
2069(o)S
2090(n)S
2111(t)S
2123(a)S
2142(i)S
2154(n)S
225 X
625 Y(zeroes.)s
366(The)S
444(new-block)S
635(security)S
782(mechanism)S
986(handles)S
1128(situations)S
1303(where)S
1419(the)S
1484(machine)S
1640(crashes)S
1776(between)S
1929(the)S
1993(time)S
2080(that)S
2156(a)S
225 X
675 Y(disk)s
308(block)S
415(is)S
456(allocated)S
623(for)S
685(user)S
768(data)S
852(and)S
926(the)S
991(time)S
1080(that)S
1158(the)S
1224(data)S
1309(is)S
1351(actually)S
1500(written,)S
1644(so)S
1695(we)S
1758(need)S
1852(only)S
1941(consider)S
2098(non-)S
225 X
725 Y(crash)s
324(cases)S
423(here,)S
516(of)S
561(which)S
674(there)S
769(are)S
831(s)S
847(e)S
866(v)S
887(e)S
906(r)S
920(a)S
939(l)S
951(:)S
225 X
800 Y
283(\()S
297(a)S
316(\))S
351(A)S
392 X(\256)s
415(le)S
457(is)S
496(extended)S
660(into)S
737(a)S
767(new)S
849(page)S
941(\(with)S
1042(EOF)S
1132(on)S
1186(a)S
1217(non-page)S
1386(boundary\),)S
1581(and)S
1654(then)S
1739(extended)S
1904(farther)S
2029(via)S
2093(trun)S
2161 X(-)s
225 X
850 Y
351 X(cate.)s
225 X
925 Y
281(\()S
295(b)S
316(\))S
351(A)S
391(few)S
464(bytes)S
563(are)S
625(written)S
755(into)S
831(the)S
893(middle)S
1020(of)S
1065(what)S
1157(was)S
1232(formerly)S
1389(a)S
1418(hole)S
1501(in)S
1544(the)S
1606 X(\256)s
1629(le.)S
225 X
1000 Y
283(\()S
297(c)S
316(\))S
351(T)S
376(h)S
397(e)S
426 X(\256)s
449(le)S
490(is)S
528(truncated)S
696(down)S
799(to)S
842(a)S
871(non-page)S
1038(boundary)S
1207(and)S
1278(then)S
1361(extended)S
1524(via)S
1586(t)S
1598(r)S
1612(u)S
1633(n)S
1654(c)S
1673(a)S
1692(t)S
1704(e)S
1723(.)S
225 X
1075 Y(The)s
303 X(\256)s
326(rst)S
381(two)S
457(cases)S
559(are)S
624(handled)S
771(correctly)S
935(because)S
1082(e)S
1101(f)S
1115(s)S
1131(_)S
1152(M)S
1189(a)S
1208(k)S
1229(e)S
1247(W)S
1284(r)S
1298(i)S
1310(t)S
1322(a)S
1341(b)S
1362(l)S
1374(e)S
1393(B)S
1421(l)S
1433(o)S
1454(c)S
1473(k)S
1494(s)S
1523(creates)S
1654(dirty)S
1748(zero-)S
1835 X(\256)s
1858(lled)S
1936(pages)S
2046(when)S
2151(it)S
225 X
1125 Y(allocates)s
392(new)S
480(blocks.)S
628(Any)S
718(part)S
801(of)S
853(the)S
922(page)S
1019(not)S
1090(subsequently)S
1327(initialized)S
1515(will)S
1598(therefore)S
1768(contain)S
1910(zeroes,)S
2045(and)S
2123(the)S
225 X
1175 Y(zeroes)s
343(will)S
419(be)S
469(written)S
599(to)S
642(disk)S
722(when)S
823(the)S
885(page)S
975(is)S
1013(c)S
1032(l)S
1044(e)S
1063(a)S
1082(n)S
1103(e)S
1122(d)S
1143(.)S
225 X
1250 Y(E)s
250(F)S
273(S)S
296(_)S
317(Z)S
342(E)S
367(R)S
395(O)S
425(F)S
448(I)S
462(L)S
487(L)S
512(_)S
533(L)S
558(A)S
588(S)S
611(T)S
636(_)S
657(P)S
679(A)S
709(G)S
739(E)S
774(handles)S
913(the)S
975(third)S
1065(case)S
1148(when)S
1249(we)S
1308(reduce)S
1431(a)S
1460 X(\256)s
1483(l)S
1495(e)S
1511(')S
1524(s)S
1550(length)S
1666(by)S
1718(t)S
1730(r)S
1744(u)S
1765(n)S
1786(c)S
1805(a)S
1824(t)S
1836(i)S
1848(o)S
1869(n)S
1890(.)S
225 X
1325 Y(W)s
262(e)S
296(assume)S
434(that)S
513(these)S
615(c)S
634(o)S
655(n)S
676(s)S
692(i)S
704(d)S
725(e)S
744(r)S
758(a)S
777(t)S
789(i)S
801(o)S
822(n)S
843(s)S
874(only)S
964(apply)S
1073(to)S
1121(ordinary)S
1279(user-level)S
1461(I/O.)S
1552(F)S
1574(o)S
1595(r)S
1624(instance,)S
1789(volume)S
1931(operations)S
2123(are)S
225 X
1375 Y(su)s
262 X
/CFi{ (f) show xsiz pt 20 div neg 0 rmoveto (\256) s
}bind def

CFi
297(ciently)S
423(well-behaved)S
661(that)S
735(we)S
794(do)S
846(not)S
910(have)S
1000(to)S
1043(worry)S
1153(about)S
1257(the)S
1319(cases)S
1418(described)S
1590(a)S
1609(b)S
1630(o)S
1651(v)S
1672(e)S
1691(.)S
225 X
1475 Y
0.0 10 10 f.HB ft(4)s
248(.)S
260( )S
272(L)S
297(O)S
329(C)S
359(K)S
389(I)S
401(N)S
431(G)S
225 X
1550 Y
0.0 10 10 f.R ft(W)s
262(e)S
292(use)S
359(three)S
455(per-vnode)S
638(locks)S
739(\(four)S
835(on)S
889(AIX\).)S
1009(At)S
1063(the)S
1127(highest)S
1261(level,)S
1366(we)S
1427(have)S
1519(the)S
1583(per-vnode)S
1766(r)S
1780(e)S
1799(a)S
1818(d)S
1839(e)S
1858(r)S
1872(/)S
1883(w)S
1913(r)S
1927(i)S
1939(t)S
1951(e)S
1970(r)S
1996(lock.)S
2101(This)S
225 X
1600 Y(lock)s
312(is)S
354(obtained)S
514(upon)S
612(entry)S
713(to)S
760(the)S
826(various)S
963(VOP)S
1059(operations.)S
1268(It)S
1307(allows)S
1430(concurrent)S
1624(access)S
1745(by)S
1800(operations)S
1989(that)S
2066(do)S
2121(not)S
225 X
1650 Y(a)s
244 X
/Cff{ (f) show xsiz pt 20 div neg 0 rmoveto (f) s
}bind def

Cff
270(ect)S
330(the)S
392(on-disk)S
528(r)S
542(e)S
561(p)S
582(r)S
596(e)S
615(s)S
631(e)S
650(n)S
671(t)S
683(a)S
702(t)S
714(i)S
726(o)S
747(n)S
778(of)S
823(the)S
885(vnode)S
998(\(read,)S
1105(getattr\),)S
1248(while)S
1352(serializing)S
1539(those)S
1639(that)S
1714(do)S
1767(\(write,)S
1889(setattr,)S
2014(t)S
2026(r)S
2040(u)S
2061(n)S
2082(c)S
2101(a)S
2120(t)S
2132(e)S
2151(\))S
2165(.)S
225 X
1700 Y(The)s
305(other)S
407(two)S
485(are)S
552(described)S
729(in)S
777(RFC)S
871(78.0:)S
971(the)S
1038(vm)S
1106(lock)S
1194(and)S
1270(the)S
1337 X(\256)s
1360(le)S
1406(lock.)S
1514(The)S
1594(vm)S
1662(lock)S
1749(serializes)S
1921(operations)S
2111(that)S
225 X
1750 Y(create)s
337(or)S
382(destroy)S
516(pages,)S
632(preventing)S
823(races,)S
930(for)S
989(instance,)S
1149(between)S
1301(page)S
1392(faults)S
1497(and)S
1569 X(\256)s
1592(le)S
1634(truncation;)S
1829(the)S
1892 X(\256)s
1915(le)S
1957(lock)S
2041(p)S
2062(r)S
2076(o)S
2097(t)S
2109(e)S
2128(c)S
2147(t)S
2159(s)S
225 X
1800 Y(the)s
291(contents)S
446(of)S
495(the)S
561(anode)S
676(\(that)S
768(is,)S
820(its)S
874(metadata\).)S
1074(Finally,)S
1217(because)S
1364(of)S
1412(the)S
1477(di)S
1510 X
CFi
1545(culties)S
1669(of)S
1717(s)S
1733(y)S
1754(n)S
1775(c)S
1794(h)S
1815(r)S
1829(o)S
1850(n)S
1871(i)S
1883(z)S
1902(i)S
1914(n)S
1935(g)S
1969(between)S
2123(the)S
225 X
1850 Y
225 X(\256)s
248(le)S
289(system)S
415(and)S
486(the)S
548(AIX)S
632(VMM,)S
756(the)S
818(AIX)S
902(i)S
914(m)S
946(p)S
967(l)S
979(e)S
998(m)S
1030(e)S
1049(n)S
1070(t)S
1082(a)S
1101(t)S
1113(i)S
1125(o)S
1146(n)S
1177(requires)S
1323(a)S
1352(fourth)S
1465(per-vnode)S
1647(lock,)S
1741(the)S
1804(vmmLenLock,)S
2061(to)S
2105(pro)S
2161 X(-)s
225 X
1900 Y(tect)s
297(the)S
359 X(\256)s
382(le)S
423(length.)S
559(This)S
643(lock)S
726(is)S
764(at)S
805(the)S
867(top)S
931(of)S
976(the)S
1038(h)S
1059(i)S
1071(e)S
1090(r)S
1104(a)S
1123(r)S
1137(c)S
1156(h)S
1177(y)S
1198(.)S
225 X
1975 Y(In)s
274(addition,)S
437(we)S
500(use)S
570(an)S
624(`)S
638(`)S
652(i)S
664(n)S
685(-)S
699(t)S
711(r)S
725(a)S
744(n)S
765(s)S
781(i)S
793(t)S
805(')S
819(')S
847(data)S
932(base)S
1021(to)S
1068(keep)S
1162(track)S
1261(of)S
1310(disk)S
1394(blocks)S
1518(on)S
1575(which)S
1693(I/O)S
1764(is)S
1807(currently)S
1975(in)S
2023(p)S
2044(r)S
2058(o)S
2079(g)S
2100(r)S
2114(e)S
2133(s)S
2149(s)S
2165(.)S
225 X
2025 Y(This)s
311(is)S
351(to)S
396(prevent)S
535(races)S
634(where)S
749(I/O)S
817(is)S
857(initiated)S
1009(through)S
1151(two)S
1225(di)S
1258 X
Cff
1284(erent)S
1380(pathways,)S
1560(e.g.,)S
1641(an)S
1692(ordinary)S
1846(asynchronous)S
2088(write)S
225 X
2075 Y(followed)s
387(by)S
441(a)S
472(write)S
571(initiated)S
723(by)S
777(a)S
808(volume)S
946(operation.)S
1138(When)S
1250(we)S
1311(begin)S
1417(a)S
1448(disk)S
1530(write,)S
1639(we)S
1700(set)S
1759(an)S
1811(in-transit)S
1977(bit)S
2035(for)S
2097(each)S
225 X
2125 Y(disk)s
306(block)S
411(and)S
483(we)S
543(clear)S
637(this)S
709(bit)S
765(when)S
867(the)S
930(write)S
1027(completes.)S
1228(No)S
1289(read)S
1372(or)S
1417(write)S
1514(can)S
1583(begin)S
1687(until)S
1775(the)S
1837(in-transit)S
2000(bits)S
2071(for)S
2130(all)S
225 X
2175 Y(the)s
287(disk)S
367(blocks)S
487(involved)S
645(are)S
707(c)S
726(l)S
738(e)S
757(a)S
776(r)S
790(.)S
225 X
2250 Y(An)s
288(awkward)S
454(problem)S
606(is)S
646(that)S
723(we)S
785(cannot)S
911(a)S
930 X
Cff
956(ord)S
1025(to)S
1071(block)S
1178(in)S
1224(V)S
1254(O)S
1284(P)S
1307(_)S
1328(P)S
1351(U)S
1381(T)S
1406(P)S
1428(A)S
1458(G)S
1488(E)S
1526(since)S
1626(delaying)S
1785(the)S
1850(pageout)S
1997(thread)S
2116(can)S
225 X
2300 Y(deadlock)s
391(the)S
455(system.)S
603(T)S
625(o)S
658(solve)S
759(this)S
832(problem,)S
994(the)S
1058(CM)S
1135(examines)S
1306(the)S
1370(putpage)S
1516 X(\257)s
1539(ags)S
1607(to)S
1652(distinguish)S
1849(pageout)S
1995(from)S
2088(other)S
225 X
2350 Y(callers,)s
363(and)S
442(returns)S
577(failure)S
706(if)S
750(the)S
820(caller)S
933(is)S
979(pageout)S
1131(and)S
1210(it)S
1252(cannot)S
1383(obtain)S
1507(its)S
1565(locks)S
1672(without)S
1819(blocking,)S
1995(relying)S
2133(on)S
225 X
2400 Y(pageout)s
371(to)S
416(make)S
518(progress)S
671(elsewhere.)S
871(The)S
947(approach)S
1113(that)S
1188(we)S
1248(have)S
1339(taken)S
1442(in)S
1486(Episode)S
1632(is)S
1671(to)S
1715(write)S
1813(efs_putpage)S
2028(so)S
2076(that)S
2151(it)S
225 X
2450 Y(d)s
246(o)S
267(e)S
286(s)S
302(n)S
321(')S
335(t)S
358(obtain)S
475(any)S
547(locks.)S
667(Thus,)S
771(we)S
831(must)S
923(face)S
1005(the)S
1068(prospect)S
1222(of)S
1268(pageouts)S
1429(happening)S
1616(concurrently)S
1842(with)S
1929(truncates.)S
2114(See)S
225 X
2500 Y(the)s
287(block)S
391(comment)S
557(preceding)S
734(efs_putpage)S
948(for)S
1007(the)S
1069(argument)S
1238(about)S
1342(why)S
1424(we)S
1483(can)S
1552(do)S
1604(this.)S
225 X
2600 Y
0.0 10 10 f.HB ft(5)s
248(.)S
260( )S
272(P)S
300(S)S
328(E)S
356(U)S
386(D)S
416(O)S
448(-)S
462(C)S
492(O)S
524(D)S
554(E)S
594(VM)S
669(I)S
681(M)S
716(P)S
744(L)S
769(E)S
797(M)S
832(E)S
860(N)S
890(T)S
912(A)S
939(T)S
964(I)S
976(O)S
1008(N)S
225 X
2675 Y
%%IncludeFont: Courier

/Courier /Courier-8 roman-8-mappings AddRoman-8
/f.CW /Courier-8 findfont def

0.0 10 10 f.CW ft(/*)s
225 X
2725 Y
250(*)S
300(Generic)S
500(i)S
525(n)S
550(t)S
575(e)S
600(r)S
625(f)S
650(a)S
675(c)S
700(e)S
725(s)S
225 X
2775 Y
250(*/)S
225 X
2875 Y(/*)s
225 X
2925 Y
250(*)S
300(Do)S
375(all)S
475(l)S
500(e)S
525(n)S
550(g)S
575(t)S
600(h)S
625(-)S
650(s)S
675(e)S
700(t)S
725(t)S
750(i)S
775(n)S
800(g)S
850(&)S
900(promotion)S
1150(here.)S
225 X
2975 Y
250(*)S
225 X
3025 Y
250(*)S
300(Note:)S
450(this)S
575(function)S
800(may)S
900(cause)S
1050(a)S
1100(page)S
1225(fault)S
1375(when)S
1500(it)S
1575(zeroes)S
1750(out)S
225 X
3075 Y
250(*)S
300(the)S
400(remainder)S
650(of)S
725(the)S
825(final)S
975(page.)S
225 X
3220 Y
0.0 10 10 f.H ft(Lewis)s
2043 X(P)s
2070(a)S
2093(g)S
2116(e)S
2139( )S
2151(4)S
3300 Y
showpage
PageState6269 restore

%%PageFonts: Helvetica Helvetica-Bold Times-Roman Courier
%%Page: label 5
%%PageFonts: (atend)
/PageState6269 save def
home

0.000000 setgray
%%IncludeFont: Helvetica

/Helvetica /Helvetica-8 roman-8-mappings AddRoman-8
/f.H /Helvetica-8 findfont def

0.0 10 10 f.H ft
1.0000 setlinewidth
[] 0 setdash

225 X
200 Y(OSF-RFC 75.0)s
983 X(E)s
1011(p)S
1034(i)S
1043(s)S
1064(o)S
1087(d)S
1110(e)S
1133( )S
1145(V)S
1173(M)S
1208( )S
1220(I)S
1232(n)S
1255(t)S
1267(e)S
1290(g)S
1313(r)S
1327(a)S
1350(t)S
1362(i)S
1371(o)S
1394(n)S
1923 X(O)s
1955(c)S
1976(t)S
1988(o)S
2011(b)S
2034(e)S
2057(r)S
2071( )S
2083(1)S
2106(9)S
2129(9)S
2152(5)S
225 X
400 Y
%%IncludeFont: Courier

/Courier /Courier-8 roman-8-mappings AddRoman-8
/f.CW /Courier-8 findfont def

0.0 10 10 f.CW ft
250(*/)S
225 X
450 Y(v)s
250(n)S
275(m)S
300(_)S
325(T)S
350(r)S
375(u)S
400(n)S
425(c)S
450(a)S
475(t)S
500(e)S
525(\()S
550(v)S
575(p)S
600(,)S
650(len,)S
775(c)S
800(r)S
825(e)S
850(d)S
875(p)S
900(\))S
225 X
500 Y({)s
225 X
550 Y
325 X(if)s
400(\(new)S
525(length)S
700(too)S
800(big\))S
225 X
600 Y
425 X(drop)s
550(VMLock)S
725(&)S
775(return)S
950(E)S
975(F)S
1000(B)S
1025(I)S
1050(G)S
1075(;)S
225 X
700 Y
325 X(grab)s
450(vm)S
525(lock)S
650(to)S
725(prevent)S
925(page)S
1050(creation)S
1275(&)S
1325(rival)S
1475(t)S
1500(r)S
1525(u)S
1550(n)S
1575(c)S
1600(a)S
1625(t)S
1650(e)S
1675(s)S
1700(;)S
225 X
750 Y
325 X(write-lock)s
600(fileLock)S
825(to)S
900(change)S
1075(anode)S
1225(c)S
1250(o)S
1275(n)S
1300(t)S
1325(e)S
1350(n)S
1375(t)S
1400(s)S
1425(;)S
225 X
800 Y(#ifdef)s
400(A)S
425(F)S
450(S)S
475(_)S
500(A)S
525(I)S
550(X)S
575(_)S
600(E)S
625(N)S
650(V)S
225 X
850 Y
325 X(Iteratively)s
625(w)S
650(r)S
675(i)S
700(t)S
725(e)S
750(-)S
775(p)S
800(r)S
825(o)S
850(t)S
875(e)S
900(c)S
925(t)S
975(pages)S
1125(beyond)S
1300(new)S
1400(EOF,)S
1525(flush)S
1675(them,)S
225 X
900 Y
325 X(and)s
425(count)S
575(w)S
600(r)S
625(i)S
650(t)S
675(e)S
700(-)S
725(p)S
750(r)S
775(o)S
800(t)S
825(e)S
850(c)S
875(t)S
900(i)S
925(o)S
950(n)S
1000(faults)S
1175(until)S
1325(VM)S
1400(activity)S
1625(on)S
1700(this)S
225 X
950 Y
325 X(vnode)s
475(stops.)S
675(AIX)S
775(provides)S
1000(no)S
1075(way)S
1175(to)S
1250(avoid)S
1400(to)S
1475(s)S
1500(y)S
1525(n)S
1550(c)S
1575(h)S
1600(r)S
1625(o)S
1650(n)S
1675(i)S
1700(z)S
1725(e)S
225 X
1000 Y
325 X(with)s
450(the)S
550(VMM,)S
675(so)S
750(this)S
875(is)S
950(the)S
1050(best)S
1175(we)S
1250(can)S
1350(do.)S
225 X
1050 Y(#endif)s
400(/*)S
475(AFS_AIX_ENV)S
775(*/)S
225 X
1100 Y
325 X(if)s
400(\(shrinking\))S
700({)S
225 X
1150 Y
425 X(discard)s
625(pages)S
775(beyond)S
950(new)S
1050(EOF;)S
225 X
1200 Y
425 X(if)s
500(\(file)S
650(is)S
725(COW)S
825(&&)S
900(not)S
1000(truncating)S
1275(to)S
1350(block)S
1500(b)S
1525(o)S
1550(u)S
1575(n)S
1600(d)S
1625(a)S
1650(r)S
1675(y)S
1700(\))S
225 X
1250 Y
525 X(e)s
550(f)S
575(s)S
600(_)S
625(M)S
650(a)S
675(k)S
700(e)S
725(W)S
750(r)S
775(i)S
800(t)S
825(a)S
850(b)S
875(l)S
900(e)S
925(B)S
950(l)S
975(o)S
1000(c)S
1025(k)S
1050(s)S
1075(\()S
1100(v)S
1125(p)S
1150(,)S
1200(preceding)S
1450(block)S
1600(b)S
1625(n)S
1650(d)S
1675(r)S
1700(y)S
1725(,)S
225 X
1300 Y
1100 X(len,)s
1225(...\);)S
225 X
1350 Y
425 X(discard)s
625(on-disk)S
825(storage)S
1025(beyond)S
1200(new)S
1300(EOF)S
1400(\()S
1425(e)S
1450(p)S
1475(i)S
1500(a)S
1525(_)S
1550(T)S
1575(r)S
1600(u)S
1625(n)S
1650(c)S
1675(a)S
1700(t)S
1725(e)S
1750(\))S
1775(;)S
225 X
1400 Y
425 X(if)s
500(\(vp)S
600(does)S
725(not)S
825(require)S
1025(promotion)S
1275(&&)S
1350(is)S
1425(not)S
1525(inline)S
1700(&&)S
225 X
1450 Y
525 X(EOF)s
625(is)S
700(not)S
800(in)S
875(an)S
950(allocation)S
1225(hole\))S
1375({)S
225 X
1500 Y
600 X(create)s
775(zero-filled)S
1075(pages)S
1225(for)S
1325(the)S
1425(region)S
1600(b)S
1625(e)S
1650(t)S
1675(w)S
1700(e)S
1725(e)S
1750(n)S
225 X
1550 Y
600 X(EOF)s
700(and)S
800(the)S
900(end)S
1000(of)S
1075(allocated)S
1325(disk)S
1450(s)S
1475(t)S
1500(o)S
1525(r)S
1550(a)S
1575(g)S
1600(e)S
1625(;)S
225 X
1600 Y
325 X(})s
225 X
1650 Y
325 X(e)s
350(f)S
375(s)S
400(_)S
425(P)S
450(r)S
475(o)S
500(m)S
525(o)S
550(t)S
575(e)S
600(\()S
625(v)S
650(p)S
675(,)S
725(len\);)S
225 X
1700 Y
325 X(if)s
400(\(shrinking)S
675(&&)S
750(not)S
850(on)S
925(page)S
1050(b)S
1075(o)S
1100(u)S
1125(n)S
1150(d)S
1175(a)S
1200(r)S
1225(y)S
1250(\))S
225 X
1750 Y
425 X(zero-fill)s
675(last)S
800(page)S
925(following)S
1175(EOF;)S
225 X
1800 Y
325 X(drop)s
450(l)S
475(o)S
500(c)S
525(k)S
550(s)S
575(;)S
225 X
1850 Y(})s
225 X
1950 Y(/*)s
225 X
2000 Y
250(*)S
300(Do)S
375(the)S
475(disk)S
600(I/O)S
700(described)S
950(by)S
1025(a)S
1075(buf)S
1175(structure;)S
1450(handle)S
1625(i)S
1650(n)S
1675(-)S
1700(l)S
1725(i)S
1750(n)S
1775(e)S
225 X
2050 Y
250(*)S
300(data)S
425(as)S
500(a)S
550(special)S
750(case.)S
925(At)S
1000(this)S
1125(level,)S
1300(we)S
1375(assume)S
1550(that)S
1675(all)S
1775(the)S
225 X
2100 Y
250(*)S
300(allocation)S
575(has)S
675(already)S
875(been)S
1000(done.)S
225 X
2150 Y
250(*)S
225 X
2200 Y
250(*)S
300(P)S
325(r)S
350(e)S
375(c)S
400(o)S
425(n)S
450(d)S
475(i)S
500(t)S
525(i)S
550(o)S
575(n)S
600(s)S
625(:)S
225 X
2250 Y
250(*)S
225 X
2300 Y
250(*)S
300(Either)S
475(the)S
575(file)S
700(is)S
775(in-line)S
975(or)S
1050(the)S
1150(region)S
1325(described)S
1575(by)S
1650(bp)S
1725(is)S
1800(b)S
1825(a)S
1850(c)S
1875(k)S
1900(e)S
1925(d)S
225 X
2350 Y
250(*)S
300(by)S
375(a)S
425(\(physically\))S
750(contiguous)S
1025(set)S
1125(of)S
1200(disk)S
1325(b)S
1350(l)S
1375(o)S
1400(c)S
1425(k)S
1450(s)S
1475(.)S
225 X
2400 Y
250(*)S
225 X
2450 Y
250(*)S
300(bp)S
375(is)S
450(handed)S
625(to)S
700(us)S
775(initialized)S
1075(with)S
1200(count,)S
1375(blkno,)S
1550(vp,)S
1650(flags,)S
1825(and)S
225 X
2500 Y
250(*)S
300(whatever)S
525(information)S
825(is)S
900(needed)S
1075(to)S
1150(identify)S
1375(the)S
1475(in-core)S
1675(data)S
1800(area)S
225 X
2550 Y
250(*)S
300(\(b_pages)S
525(or)S
600(b)S
625(_)S
650(u)S
675(n)S
700(.)S
725(b)S
750(_)S
775(a)S
800(d)S
825(d)S
850(r)S
875(\))S
900(.)S
975(We)S
1050(will)S
1175(initialize)S
1450(the)S
1550(device)S
1725(n)S
1750(u)S
1775(m)S
1800(b)S
1825(e)S
1850(r)S
225 X
2600 Y
250(*)S
300(from)S
425(the)S
525(anode,)S
700(and)S
800(set)S
900(the)S
1000(iodone)S
1175(f)S
1200(u)S
1225(n)S
1250(c)S
1275(t)S
1300(i)S
1325(o)S
1350(n)S
1375(.)S
225 X
2650 Y
250(*/)S
225 X
2700 Y(e)s
250(p)S
275(i)S
300(a)S
325(_)S
350(S)S
375(t)S
400(r)S
425(a)S
450(t)S
475(e)S
500(g)S
525(y)S
550(\()S
575(b)S
600(p)S
625(\))S
225 X
2750 Y({)s
225 X
2800 Y
325 X(ap)s
400(=)S
450(E)S
475(V)S
500(T)S
525(O)S
550(A)S
575(\()S
600(V)S
625(T)S
650(O)S
675(E)S
700(V)S
725(\()S
750(b)S
775(p)S
800(-)S
825(>)S
850(b)S
875(_)S
900(v)S
925(p)S
950(\))S
975(\))S
1000(;)S
225 X
2850 Y
325 X(if)s
400(\(ap)S
500(is)S
575(in-line\))S
800({)S
225 X
2900 Y
425 X(b)s
450(p)S
475(_)S
500(m)S
525(a)S
550(p)S
575(i)S
600(n)S
625(\()S
650(b)S
675(p)S
700(\))S
725(;)S
225 X
2950 Y
425 X(copy)s
550(data)S
675(to/from)S
875(ap;)S
225 X
3000 Y
425 X(b)s
450(p)S
475(_)S
500(m)S
525(a)S
550(p)S
575(o)S
600(u)S
625(t)S
650(\()S
675(b)S
700(p)S
725(\))S
750(;)S
225 X
3050 Y
425 X(r)s
450(e)S
475(t)S
500(u)S
525(r)S
550(n)S
575(;)S
225 X
3100 Y
325 X(})s
225 X
3220 Y
0.0 10 10 f.H ft(Lewis)s
2043 X(P)s
2070(a)S
2093(g)S
2116(e)S
2139( )S
2151(5)S
3300 Y
showpage
PageState6269 restore

%%PageFonts: Helvetica Courier
%%Page: label 6
%%PageFonts: (atend)
/PageState6269 save def
home

0.000000 setgray
%%IncludeFont: Helvetica

/Helvetica /Helvetica-8 roman-8-mappings AddRoman-8
/f.H /Helvetica-8 findfont def

0.0 10 10 f.H ft
1.0000 setlinewidth
[] 0 setdash

225 X
200 Y(OSF-RFC 75.0)s
983 X(E)s
1011(p)S
1034(i)S
1043(s)S
1064(o)S
1087(d)S
1110(e)S
1133( )S
1145(V)S
1173(M)S
1208( )S
1220(I)S
1232(n)S
1255(t)S
1267(e)S
1290(g)S
1313(r)S
1327(a)S
1350(t)S
1362(i)S
1371(o)S
1394(n)S
1923 X(O)s
1955(c)S
1976(t)S
1988(o)S
2011(b)S
2034(e)S
2057(r)S
2071( )S
2083(1)S
2106(9)S
2129(9)S
2152(5)S
225 X
400 Y
325 X
%%IncludeFont: Courier

/Courier /Courier-8 roman-8-mappings AddRoman-8
/f.CW /Courier-8 findfont def

0.0 10 10 f.CW ft(bp->b_dev)s
575(=)S
625(ap's)S
750(d)S
775(e)S
800(v)S
825(i)S
850(c)S
875(e)S
900(-)S
925(n)S
950(u)S
975(m)S
1000(b)S
1025(e)S
1050(r)S
1075(;)S
225 X
450 Y
325 X(bp->b_iodone)s
650(=)S
700(e)S
725(p)S
750(i)S
775(a)S
800(_)S
825(I)S
850(o)S
875(d)S
900(o)S
925(n)S
950(e)S
975(;)S
225 X
550 Y
325 X(/*)s
225 X
600 Y
350 X(*)s
400(Check)S
550(in-transit)S
825(state)S
975(of)S
1050(each)S
1175(disk)S
1300(block)S
1450(in)S
1525(the)S
1625(t)S
1650(r)S
1675(a)S
1700(n)S
1725(s)S
1750(f)S
1775(e)S
1800(r)S
1825(.)S
225 X
650 Y
350 X(*)s
400(If)S
475(we)S
550(are)S
650(writing,)S
875(we)S
950(must)S
1075(wait)S
1200(for)S
1300(any)S
1400(write)S
1550(already)S
1750(in)S
225 X
700 Y
350 X(*)s
400(progress)S
625(to)S
700(finish.)S
925(If)S
1000(we)S
1075(are)S
1175(reading,)S
1400(the)S
1500(fact)S
1625(that)S
1750(we)S
225 X
750 Y
350 X(*)s
400(are)S
500(here)S
625(means)S
775(that)S
900(there)S
1050(are)S
1150(no)S
1225(pages)S
1375(with)S
1500(the)S
1600(data;)S
1750(hence)S
225 X
800 Y
350 X(*)s
400(the)S
500(fact)S
625(that)S
750(a)S
800(write)S
950(is)S
1025(in)S
1100(progress)S
1325(implies)S
1525(that)S
1650(we)S
1725(must)S
225 X
850 Y
350 X(*)s
400(be)S
475(writing)S
675(zeroes)S
850(to)S
925(an)S
1000(initialized)S
1300(block.)S
1500(We)S
1575(can)S
1675(t)S
1700(h)S
1725(e)S
1750(r)S
1775(e)S
1800(f)S
1825(o)S
1850(r)S
1875(e)S
225 X
900 Y
350 X(*)s
400(return)S
575(zeroes)S
750(immediately)S
1050(in)S
1125(the)S
1225(read)S
1350(case.)S
1525(However,)S
1750(this)S
225 X
950 Y
350 X(*)s
400(will)S
525(mean)S
650(partitioning)S
975(the)S
1075(read)S
1200(to)S
1275(separate)S
1500(the)S
1600(i)S
1625(n)S
1650(-)S
1675(t)S
1700(r)S
1725(a)S
1750(n)S
1775(s)S
1800(i)S
1825(t)S
225 X
1000 Y
350 X(*)s
400(blocks)S
575(from)S
700(the)S
800(rest.)S
975(So)S
1050(for)S
1150(now,)S
1275(we)S
1350(will)S
1475(just)S
1600(wait)S
1725(in)S
225 X
1050 Y
350 X(*)s
400(both)S
525(c)S
550(a)S
575(s)S
600(e)S
625(s)S
650(.)S
225 X
1100 Y
350 X(*/)s
225 X
1150 Y
325 X(wait)s
450(for)S
550(in-transit)S
825(disk)S
950(b)S
975(l)S
1000(o)S
1025(c)S
1050(k)S
1075(s)S
1100(;)S
225 X
1200 Y
325 X(if)s
400(\()S
425(w)S
450(r)S
475(i)S
500(t)S
525(i)S
550(n)S
575(g)S
600(\))S
225 X
1250 Y
425 X(mark)s
550(all)S
650(disk)S
775(blocks)S
950(i)S
975(n)S
1000(-)S
1025(t)S
1050(r)S
1075(a)S
1100(n)S
1125(s)S
1150(i)S
1175(t)S
1200(;)S
225 X
1350 Y
325 X(start)s
475(disk)S
600(I/O;)S
225 X
1400 Y
325 X(if)s
400(\(!error)S
600(&&)S
675(!)S
700(s)S
725(y)S
750(n)S
775(c)S
800(h)S
825(r)S
850(o)S
875(n)S
900(o)S
925(u)S
950(s)S
975(\))S
225 X
1450 Y
425 X(r)s
450(e)S
475(t)S
500(u)S
525(r)S
550(n)S
575(;)S
225 X
1550 Y
325 X(if)s
400(\()S
425(e)S
450(r)S
475(r)S
500(o)S
525(r)S
550(\))S
225 X
1600 Y
425 X(do)s
500(error)S
650(p)S
675(r)S
700(o)S
725(c)S
750(e)S
775(s)S
800(s)S
825(i)S
850(n)S
875(g)S
900(;)S
225 X
1650 Y
325 X(else)s
450(if)S
525(\()S
550(s)S
575(y)S
600(n)S
625(c)S
650(h)S
675(r)S
700(o)S
725(n)S
750(o)S
775(u)S
800(s)S
825(\))S
225 X
1700 Y
425 X(b)s
450(i)S
475(o)S
500(w)S
525(a)S
550(i)S
575(t)S
600(\()S
625(b)S
650(p)S
675(\))S
700(;)S
225 X
1800 Y
325 X(clear)s
475(in-transit)S
750(bits;)S
225 X
1850 Y(})s
225 X
1950 Y(/*)s
225 X
2000 Y
250(*)S
300(I)S
325(n)S
350(t)S
375(e)S
400(r)S
425(r)S
450(u)S
475(p)S
500(t)S
525(-)S
550(t)S
575(i)S
600(m)S
625(e)S
675(processing)S
950(for)S
1050(strategy)S
1275(I/O.)S
1425(The)S
1525(rules)S
225 X
2050 Y
250(*)S
300(are)S
400(that)S
525(if)S
600(the)S
700(I/O)S
800(is)S
875(synchronous,)S
1200(we)S
1275(simply)S
1450(wake)S
1575(up)S
1650(a)S
1675(n)S
1700(y)S
1725(o)S
1750(n)S
1775(e)S
225 X
2100 Y
250(*)S
300(waiting)S
500(for)S
600(completion;)S
900(if)S
975(it)S
1050(is)S
1125(a)S
1150(s)S
1175(y)S
1200(n)S
1225(c)S
1250(h)S
1275(r)S
1300(o)S
1325(n)S
1350(o)S
1375(u)S
1400(s)S
1425(,)S
1475(we)S
1550(must)S
1675(do)S
225 X
2150 Y
250(*)S
300(all)S
400(necessary)S
650(post-I/O)S
875(cleanup.)S
1125(Cleanup)S
1325(includes)S
1550(c)S
1575(l)S
1600(e)S
1625(a)S
1650(r)S
1675(i)S
1700(n)S
1725(g)S
225 X
2200 Y
250(*)S
300(the)S
400(in-transit)S
675(bits)S
800(for)S
900(the)S
1000(blocks)S
1175(and)S
1275(marking)S
1475(the)S
1575(b)S
1600(l)S
1625(o)S
1650(c)S
1675(k)S
1700(s)S
225 X
2250 Y
250(*)S
300(as)S
375(initialized)S
675(in)S
750(the)S
850(undo-zero)S
1100(database)S
1325(\(for)S
1450(w)S
1475(r)S
1500(i)S
1525(t)S
1550(e)S
1575(s)S
1600(\))S
1625(;)S
225 X
2300 Y
250(*)S
300(detecting)S
550(completion)S
825(of)S
900(undo-zero)S
1150(transactions)S
1475(and)S
1575(w)S
1600(a)S
1625(k)S
1650(i)S
1675(n)S
1700(g)S
225 X
2350 Y
250(*)S
300(the)S
400(async)S
550(daemon;)S
750(doing)S
900(any)S
1000(s)S
1025(y)S
1050(s)S
1075(t)S
1100(e)S
1125(m)S
1150(-)S
1175(s)S
1200(p)S
1225(e)S
1250(c)S
1275(i)S
1300(f)S
1325(i)S
1350(c)S
1400(cleanup)S
1600(such)S
225 X
2400 Y
250(*)S
300(as)S
375(unlocking)S
625(pages;)S
800(and)S
900(disposing)S
1150(of)S
1225(the)S
1325(buf.)S
225 X
2450 Y
250(*/)S
225 X
2500 Y(e)s
250(p)S
275(i)S
300(a)S
325(_)S
350(I)S
375(o)S
400(d)S
425(o)S
450(n)S
475(e)S
500(\()S
525(b)S
550(p)S
575(\))S
225 X
2550 Y({)s
225 X
2600 Y
325 X(if)s
400(\(bp->b_flags)S
725(&)S
775(B_ASYNC\))S
1000({)S
225 X
2650 Y
425 X(clear)s
575(in-transit)S
850(bits;)S
225 X
2700 Y
425 X(e)s
450(p)S
475(i)S
500(a)S
525(_)S
550(U)S
575(p)S
600(d)S
625(a)S
650(t)S
675(e)S
700(U)S
725(n)S
750(d)S
775(o)S
800(Z)S
825(e)S
850(r)S
875(o)S
900(\()S
925(b)S
950(p)S
975(,)S
1025(0\);)S
225 X
2750 Y
325 X(})s
225 X
2800 Y
325 X(o)s
350(s)S
375(i)S
400(_)S
425(b)S
450(i)S
475(o)S
500(d)S
525(o)S
550(n)S
575(e)S
600(\()S
625(b)S
650(p)S
675(\))S
700(;)S
225 X
2850 Y(})s
225 X
2950 Y(#ifdef)s
400(A)S
425(F)S
450(S)S
475(_)S
500(S)S
525(U)S
550(N)S
575(O)S
600(S)S
625(5)S
650(_)S
675(E)S
700(N)S
725(V)S
225 X
3000 Y(/*)s
225 X
3050 Y
250(*)S
300(S)S
325(u)S
350(n)S
375(O)S
400(S)S
425(-)S
450(s)S
475(p)S
500(e)S
525(c)S
550(i)S
575(f)S
600(i)S
625(c)S
675(VM)S
750(i)S
775(n)S
800(t)S
825(e)S
850(r)S
875(f)S
900(a)S
925(c)S
950(e)S
975(s)S
225 X
3100 Y
250(*/)S
225 X
3220 Y
0.0 10 10 f.H ft(Lewis)s
2043 X(P)s
2070(a)S
2093(g)S
2116(e)S
2139( )S
2151(6)S
3300 Y
showpage
PageState6269 restore

%%PageFonts: Helvetica Courier
%%Page: label 7
%%PageFonts: (atend)
/PageState6269 save def
home

0.000000 setgray
%%IncludeFont: Helvetica

/Helvetica /Helvetica-8 roman-8-mappings AddRoman-8
/f.H /Helvetica-8 findfont def

0.0 10 10 f.H ft
1.0000 setlinewidth
[] 0 setdash

225 X
200 Y(OSF-RFC 75.0)s
983 X(E)s
1011(p)S
1034(i)S
1043(s)S
1064(o)S
1087(d)S
1110(e)S
1133( )S
1145(V)S
1173(M)S
1208( )S
1220(I)S
1232(n)S
1255(t)S
1267(e)S
1290(g)S
1313(r)S
1327(a)S
1350(t)S
1362(i)S
1371(o)S
1394(n)S
1923 X(O)s
1955(c)S
1976(t)S
1988(o)S
2011(b)S
2034(e)S
2057(r)S
2071( )S
2083(1)S
2106(9)S
2129(9)S
2152(5)S
225 X
400 Y
%%IncludeFont: Courier

/Courier /Courier-8 roman-8-mappings AddRoman-8
/f.CW /Courier-8 findfont def

0.0 10 10 f.CW ft(/*)s
225 X
450 Y
250(*)S
300(Gather)S
475(up)S
550(vp's)S
675(pages)S
825(between)S
1025(off)S
1125(and)S
1225(off)S
1325(+)S
1375(len,)S
1500(and)S
1600(take)S
1725(some)S
225 X
500 Y
250(*)S
300(action)S
500(depending)S
750(on)S
825(flags.)S
1025(We)S
1100(may)S
1200(write)S
1350(out)S
1450(the)S
1550(dirty)S
1700(p)S
1725(a)S
1750(g)S
1775(e)S
1800(s)S
1825(,)S
225 X
550 Y
250(*)S
300(put)S
400(them)S
525(onto)S
650(the)S
750(free)S
875(list,)S
1025(or)S
1100(destroy)S
1300(their)S
1450(identity.)S
1725(All)S
225 X
600 Y
250(*)S
300(allocation)S
575(has)S
675(already)S
875(taken)S
1025(place)S
1175(by)S
1250(now.)S
225 X
650 Y
250(*)S
225 X
700 Y
250(*)S
300(LOCKING)S
500(NOTES)S
650(--)S
225 X
750 Y
250(*)S
300(Because)S
500(we)S
575(are)S
675(called)S
850(by)S
925(the)S
1025(pageout)S
1225(daemon,)S
1425(we)S
1500(cannot)S
1675(afford)S
1850(to)S
225 X
800 Y
250(*)S
300(block)S
450(for)S
550(extended)S
775(periods)S
975(here.)S
1150(We)S
1225(therefore)S
1475(must)S
1600(not)S
1700(try)S
1800(to)S
225 X
850 Y
250(*)S
300(obtain)S
475(any)S
575(of)S
650(the)S
750(per-vnode)S
1000(locks)S
1150(\(the)S
1275(tlock,)S
1450(VM)S
1525(lock,)S
1675(and)S
1775(file)S
225 X
900 Y
250(*)S
300(lock\),)S
475(since)S
625(the)S
725(holders)S
925(of)S
1000(these)S
1150(locks)S
1300(may)S
1400(block,)S
1575(e.g.,)S
1725(w)S
1750(a)S
1775(i)S
1800(t)S
1825(i)S
1850(n)S
1875(g)S
225 X
950 Y
250(*)S
300(to)S
375(start)S
525(a)S
575(new)S
675(transaction.)S
1025(The)S
1125(only)S
1250(Episode)S
1450(lock)S
1575(that)S
1700(we)S
1775(hold)S
225 X
1000 Y
250(*)S
300(transiently)S
600(is)S
675(the)S
775(per-anode)S
1025(ap)S
1100(lock,)S
1250(whose)S
1400(purpose)S
1600(is)S
1675(to)S
1750(give)S
1875(us)S
225 X
1050 Y
250(*)S
300(a)S
350(consistent)S
625(view)S
750(of)S
825(the)S
925(anode)S
1075(data)S
1200(structures)S
1475(\(i.e.,)S
1650(so)S
1725(that)S
1850(we)S
225 X
1100 Y
250(*)S
300(don't)S
450(see)S
550(them)S
675(when)S
800(they)S
925(are)S
1025(partially)S
1275(updated\).)S
1550(We)S
1625(depend)S
1800(on)S
225 X
1150 Y
250(*)S
300(anode-level)S
600(code)S
725(not)S
825(to)S
900(block)S
1050(while)S
1200(holding)S
1400(this)S
1525(lock.)S
1700(Of)S
1775(c)S
1800(o)S
1825(u)S
1850(r)S
1875(s)S
1900(e)S
1925(,)S
225 X
1200 Y
250(*)S
300(we)S
375(also)S
500(acquire)S
700(locks)S
850(on)S
925(pages,)S
1100(and)S
1200(it)S
1275(is)S
1350(these)S
1500(locks)S
1650(that)S
225 X
1250 Y
250(*)S
300(guarantee)S
550(proper)S
725(s)S
750(y)S
775(n)S
800(c)S
825(h)S
850(r)S
875(o)S
900(n)S
925(i)S
950(z)S
975(a)S
1000(t)S
1025(i)S
1050(o)S
1075(n)S
1100(.)S
225 X
1300 Y
250(*)S
225 X
1350 Y
250(*)S
300(We)S
375(must)S
500(make)S
625(sure)S
750(that)S
875(a)S
925(concurrent)S
1200(truncate)S
1425(cannot)S
1600(free)S
1725(disk)S
225 X
1400 Y
250(*)S
300(blocks)S
475(that)S
600(we)S
675(are)S
775(writing)S
975(into,)S
1125(and)S
1225(also)S
1350(that)S
1475(promotion)S
1725(c)S
1750(a)S
1775(n)S
1800(n)S
1825(o)S
1850(t)S
225 X
1450 Y
250(*)S
300(modify)S
475(the)S
575(on-disk)S
775(r)S
800(e)S
825(p)S
850(r)S
875(e)S
900(s)S
925(e)S
950(n)S
975(t)S
1000(a)S
1025(t)S
1050(i)S
1075(o)S
1100(n)S
1150(of)S
1225(the)S
1325(anode)S
1475(as)S
1550(we)S
1625(are)S
1725(w)S
1750(r)S
1775(i)S
1800(t)S
1825(i)S
1850(n)S
1875(g)S
225 X
1500 Y
250(*)S
300(to)S
375(it.)S
225 X
1550 Y
250(*)S
225 X
1600 Y
250(*)S
300(Before)S
475(discarding)S
750(any)S
850(disk)S
975(blocks,)S
1175(vnm_Truncate)S
1500(destroys)S
1725(all)S
1825(pages)S
225 X
1650 Y
250(*)S
300(beyond)S
475(the)S
575(new)S
675(EOF.)S
825(This)S
950(step)S
1075(will)S
1200(not)S
1300(complete)S
1525(until)S
1675(any)S
225 X
1700 Y
250(*)S
300(in-progress)S
600(I/O)S
700(on)S
775(the)S
875(pages)S
1025(has)S
1125(completed.)S
1425(Because)S
1625(v)S
1650(n)S
1675(m)S
1700(_)S
1725(T)S
1750(r)S
1775(u)S
1800(n)S
1825(c)S
1850(a)S
1875(t)S
1900(e)S
225 X
1750 Y
250(*)S
300(holds)S
450(the)S
550(VM)S
625(lock,)S
775(we)S
850(can)S
950(be)S
1025(sure)S
1150(that)S
1275(the)S
1375(pages)S
1525(will)S
1650(not)S
1750(r)S
1775(e)S
1800(a)S
1825(p)S
1850(p)S
1875(e)S
1900(a)S
1925(r)S
225 X
1800 Y
250(*)S
300(once)S
425(they)S
550(have)S
675(been)S
800(destroyed.)S
1100(Thus,)S
1250(when)S
1375(it)S
1450(frees)S
1600(disk)S
1725(blocks)S
1900(by)S
225 X
1850 Y
250(*)S
300(calling)S
500(e)S
525(p)S
550(i)S
575(a)S
600(_)S
625(T)S
650(r)S
675(u)S
700(n)S
725(c)S
750(a)S
775(t)S
800(e)S
825(,)S
875(vnm_Truncate)S
1200(is)S
1275(sure)S
1400(that)S
1525(no)S
1600(p)S
1625(a)S
1650(g)S
1675(e)S
1700(o)S
1725(u)S
1750(t)S
1775(s)S
225 X
1900 Y
250(*)S
300(beyond)S
475(the)S
575(new)S
675(EOF)S
775(are)S
875(p)S
900(o)S
925(s)S
950(s)S
975(i)S
1000(b)S
1025(l)S
1050(e)S
1075(.)S
225 X
1950 Y
250(*)S
225 X
2000 Y
250(*)S
300(Fragmented)S
575(files)S
725(present)S
925(a)S
975(special)S
1175(problem)S
1375(because)S
1575(the)S
1675(f)S
1700(r)S
1725(a)S
1750(g)S
1775(m)S
1800(e)S
1825(n)S
1850(t)S
225 X
2050 Y
250(*)S
300(size)S
425(may)S
525(be)S
600(less)S
725(than)S
850(PAGESIZE.)S
1125(Thus,)S
1275(the)S
1375(last)S
1500(allocated)S
1750(f)S
1775(r)S
1800(a)S
1825(g)S
1850(m)S
1875(e)S
1900(n)S
1925(t)S
225 X
2100 Y
250(*)S
300(may)S
400(end)S
500(in)S
575(the)S
675(middle)S
850(of)S
925(a)S
975(page.)S
1150(To)S
1225(avoid)S
1375(the)S
1475(possibility)S
1775(that)S
1900(a)S
225 X
2150 Y
250(*)S
300(pageout)S
500(of)S
575(the)S
675(page)S
800(covering)S
1025(EOF)S
1125(will)S
1250(write)S
1400(into)S
1525(newly)S
1675(freed)S
225 X
2200 Y
250(*)S
300(fragments,)S
575(vnm_Truncate)S
900(leaves)S
1075(the)S
1175(job)S
1275(of)S
1350(freeing)S
1550(fragments)S
1800(to)S
225 X
2250 Y
250(*)S
300(e)S
325(f)S
350(s)S
375(_)S
400(P)S
425(r)S
450(o)S
475(m)S
500(o)S
525(t)S
550(e)S
575(.)S
225 X
2300 Y
250(*)S
225 X
2350 Y
250(*)S
300(efs_Promote)S
600(may)S
700(free)S
825(fragments,)S
1100(change)S
1275(the)S
1375(on-disk)S
1575(r)S
1600(e)S
1625(p)S
1650(r)S
1675(e)S
1700(s)S
1725(e)S
1750(n)S
1775(t)S
1800(a)S
1825(t)S
1850(i)S
1875(o)S
1900(n)S
225 X
2400 Y
250(*)S
300(of)S
375(the)S
475(anode,)S
650(and)S
750(move)S
875(data)S
1000(from)S
1125(one)S
1225(place)S
1375(on)S
1450(the)S
1550(disk)S
1675(to)S
1750(a)S
1775(n)S
1800(o)S
1825(t)S
1850(h)S
1875(e)S
1900(r)S
1925(.)S
225 X
2450 Y
250(*)S
300(To)S
375(avoid)S
525(races)S
675(with)S
800(efs_putpage,)S
1125(it)S
1200(locks)S
1350(all)S
1450(of)S
1525(the)S
1625(vnode's)S
1825(pages)S
225 X
2500 Y
250(*)S
300(before)S
475(making)S
650(any)S
750(changes.)S
1000(Thus,)S
1150(it)S
1225(cannot)S
1400(proceed)S
1600(until)S
1750(any)S
225 X
2550 Y
250(*)S
300(in-progress)S
600(pageouts)S
825(complete,)S
1075(and)S
1175(once)S
1300(it)S
1375(has)S
1475(locked)S
1650(the)S
1750(p)S
1775(a)S
1800(g)S
1825(e)S
1850(s)S
1875(,)S
225 X
2600 Y
250(*)S
300(efs_putpage)S
600(will)S
725(block)S
875(until)S
1025(it)S
1100(has)S
1200(finished)S
1425(updating)S
1650(the)S
1750(disk.)S
225 X
2650 Y
250(*)S
300(We)S
375(do)S
450(not)S
550(risk)S
675(deadlock)S
900(or)S
975(catastrophic)S
1300(performance)S
1600(degradation)S
1900(in)S
225 X
2700 Y
250(*)S
300(the)S
400(latter)S
575(case)S
700(because)S
900(efs_Promote)S
1200(does)S
1325(not)S
1425(start)S
1575(any)S
225 X
2750 Y
250(*)S
300(transactions)S
625(or)S
700(block)S
850(for)S
950(long)S
1075(p)S
1100(e)S
1125(r)S
1150(i)S
1175(o)S
1200(d)S
1225(s)S
1250(.)S
225 X
2800 Y
250(*/)S
225 X
2850 Y(e)s
250(f)S
275(s)S
300(_)S
325(p)S
350(u)S
375(t)S
400(p)S
425(a)S
450(g)S
475(e)S
500(\()S
525(v)S
550(p)S
575(,)S
625(off,)S
750(len,)S
875(flags,)S
1050(c)S
1075(r)S
1100(e)S
1125(d)S
1150(p)S
1175(\))S
225 X
2900 Y({)s
225 X
2950 Y
325 X(if)s
400(\(len)S
525(==)S
600(0\))S
675(/*)S
750(Special)S
950(case:)S
1100(go)S
1175(from)S
1300(off)S
1400(to)S
1475(EOF)S
1575(*/)S
225 X
3000 Y
425 X(return)s
600(p)S
625(v)S
650(n)S
675(_)S
700(v)S
725(p)S
750(l)S
775(i)S
800(s)S
825(t)S
850(_)S
875(d)S
900(i)S
925(r)S
950(t)S
975(y)S
1000(\()S
1025(v)S
1050(p)S
1075(,)S
1125(off,)S
1250(e)S
1275(f)S
1300(s)S
1325(_)S
1350(p)S
1375(u)S
1400(t)S
1425(a)S
1450(p)S
1475(a)S
1500(g)S
1525(e)S
1550(,)S
1600(flags,)S
1775(c)S
1800(r)S
1825(e)S
1850(d)S
1875(p)S
1900(\))S
1925(;)S
225 X
3100 Y
325 X(eoff)s
450(=)S
500(off)S
600(+)S
650(len;)S
225 X
3220 Y
0.0 10 10 f.H ft(Lewis)s
2043 X(P)s
2070(a)S
2093(g)S
2116(e)S
2139( )S
2151(7)S
3300 Y
showpage
PageState6269 restore

%%PageFonts: Helvetica Courier
%%Page: label 8
%%PageFonts: (atend)
/PageState6269 save def
home

0.000000 setgray
%%IncludeFont: Helvetica

/Helvetica /Helvetica-8 roman-8-mappings AddRoman-8
/f.H /Helvetica-8 findfont def

0.0 10 10 f.H ft
1.0000 setlinewidth
[] 0 setdash

225 X
200 Y(OSF-RFC 75.0)s
983 X(E)s
1011(p)S
1034(i)S
1043(s)S
1064(o)S
1087(d)S
1110(e)S
1133( )S
1145(V)S
1173(M)S
1208( )S
1220(I)S
1232(n)S
1255(t)S
1267(e)S
1290(g)S
1313(r)S
1327(a)S
1350(t)S
1362(i)S
1371(o)S
1394(n)S
1923 X(O)s
1955(c)S
1976(t)S
1988(o)S
2011(b)S
2034(e)S
2057(r)S
2071( )S
2083(1)S
2106(9)S
2129(9)S
2152(5)S
225 X
400 Y
325 X
%%IncludeFont: Courier

/Courier /Courier-8 roman-8-mappings AddRoman-8
/f.CW /Courier-8 findfont def

0.0 10 10 f.CW ft(while)s
475(\(off)S
600(<=)S
675(o)S
725(<)S
775(eoff\))S
925({)S
225 X
450 Y
425 X(/*)s
225 X
500 Y
450 X(*)s
500(page_lookup)S
800(returns)S
1000(with)S
1125(the)S
1225(page)S
1350(exclusively)S
1650(l)S
1675(o)S
1700(c)S
1725(k)S
1750(e)S
1775(d)S
1800(.)S
225 X
550 Y
450 X(*/)s
225 X
600 Y
425 X(pp)s
500(=)S
550(p)S
575(a)S
600(g)S
625(e)S
650(_)S
675(l)S
700(o)S
725(o)S
750(k)S
775(u)S
800(p)S
825(\()S
850(v)S
875(p)S
900(,)S
950(o\);)S
225 X
650 Y
425 X(if)s
500(\(pp)S
600(==)S
675(NULL\))S
225 X
700 Y
525 X(o)s
575(+=)S
650(P)S
675(A)S
700(G)S
725(E)S
750(S)S
775(I)S
800(Z)S
825(E)S
850(;)S
225 X
750 Y
425 X(else)s
550({)S
225 X
800 Y
525 X(/*)s
225 X
850 Y
550 X(*)s
600(pvn_getdirty)S
925(tells)S
1075(us)S
1150(whether)S
1350(the)S
1450(page)S
1575(needs)S
1725(to)S
1800(be)S
225 X
900 Y
550 X(*)s
600(written)S
800(out;)S
925(as)S
1000(a)S
1050(side-effect,)S
1375(it)S
1450(will)S
1575(destroy)S
1775(pages)S
225 X
950 Y
550 X(*)s
600(when)S
725(B_TRUNC)S
925(is)S
1000(set)S
1100(and)S
1200(also)S
1325(does)S
1450(the)S
1550(a)S
1575(p)S
1600(p)S
1625(r)S
1650(o)S
1675(p)S
1700(r)S
1725(i)S
1750(a)S
1775(t)S
1800(e)S
225 X
1000 Y
550 X(*)s
600(page)S
725(lock)S
850(o)S
875(p)S
900(e)S
925(r)S
950(a)S
975(t)S
1000(i)S
1025(o)S
1050(n)S
1075(s)S
1100(.)S
225 X
1050 Y
550 X(*/)s
225 X
1100 Y
525 X(if)s
600(\()S
625(p)S
650(v)S
675(n)S
700(_)S
725(g)S
750(e)S
775(t)S
800(d)S
825(i)S
850(r)S
875(t)S
900(y)S
925(\()S
950(p)S
975(p)S
1000(,)S
1050(flags\)\))S
1250({)S
225 X
1150 Y
600 X(e)s
625(f)S
650(s)S
675(_)S
700(p)S
725(u)S
750(t)S
775(a)S
800(p)S
825(a)S
850(g)S
875(e)S
900(\()S
925(v)S
950(p)S
975(,)S
1025(pp,)S
1125(&o,)S
1225(&delta,)S
1425(flags,)S
1600(c)S
1625(r)S
1650(e)S
1675(d)S
1700(p)S
1725(\))S
1750(;)S
225 X
1200 Y
600 X(o)s
650(+=)S
725(d)S
750(e)S
775(l)S
800(t)S
825(a)S
850(;)S
225 X
1250 Y
525 X(})s
225 X
1300 Y
525 X(if)s
600(\(flags)S
775(&)S
825(B)S
850(_)S
875(T)S
900(R)S
925(U)S
950(N)S
975(C)S
1000(\))S
225 X
1350 Y
600 X(e)s
625(p)S
650(i)S
675(a)S
700(_)S
725(P)S
750(u)S
775(r)S
800(g)S
825(e)S
850(U)S
875(n)S
900(d)S
925(o)S
950(Z)S
975(e)S
1000(r)S
1025(o)S
1050(\()S
1075(v)S
1100(p)S
1125(,)S
1175(pp->offset,)S
1475(P)S
1500(A)S
1525(G)S
1550(E)S
1575(S)S
1600(I)S
1625(Z)S
1650(E)S
1675(\))S
1700(;)S
225 X
1400 Y
425 X(})s
225 X
1450 Y
325 X(})s
225 X
1500 Y(})s
225 X
1600 Y(/*)s
225 X
1650 Y
250(*)S
300(Write)S
450(out)S
550(page)S
675(pp)S
750(and)S
850(possibly)S
1075(other)S
1225(pages)S
1375(as)S
1450(well;)S
1600(return)S
1775(the)S
225 X
1700 Y
250(*)S
300(actual)S
475(offset)S
650(and)S
750(length)S
925(of)S
1000(the)S
1100(transfer)S
1325(in)S
1400(\(offp,)S
1575(lenp\).)S
1775(We)S
1850(look)S
225 X
1750 Y
250(*)S
300(at)S
375(the)S
475(disk)S
600(to)S
675(see)S
775(how)S
875(many)S
1000(contiguous)S
1275(space)S
1425(exists,)S
1625(then)S
1750(try)S
1850(to)S
225 X
1800 Y
250(*)S
300(find)S
425(enough)S
600(pages)S
750(to)S
825(fill)S
950(it.)S
1075(At)S
1150(this)S
1275(stage,)S
1450(all)S
1550(allocation)S
1825(must)S
225 X
1850 Y
250(*)S
300(already)S
500(have)S
625(been)S
750(done.)S
225 X
1900 Y
250(*/)S
225 X
1950 Y(e)s
250(f)S
275(s)S
300(_)S
325(p)S
350(u)S
375(t)S
400(a)S
425(p)S
450(a)S
475(g)S
500(e)S
525(\()S
550(v)S
575(p)S
600(,)S
650(pp,)S
750(offp,)S
900(lenp,)S
1050(flags,)S
1225(c)S
1250(r)S
1275(e)S
1300(d)S
1325(p)S
1350(\))S
225 X
2000 Y({)s
225 X
2050 Y
325 X(e)s
350(f)S
375(s)S
400(_)S
425(f)S
450(i)S
475(n)S
500(d)S
525(W)S
550(r)S
575(i)S
600(t)S
625(a)S
650(b)S
675(l)S
700(e)S
725(B)S
750(l)S
775(o)S
800(c)S
825(k)S
850(s)S
875(\()S
900(v)S
925(p)S
950(,)S
1000(*offp,)S
1175(&blkno,)S
1375(&)S
1400(c)S
1425(o)S
1450(n)S
1475(t)S
1500(i)S
1525(g)S
1550(\))S
1575(;)S
225 X
2100 Y
325 X(assert\(contig)s
675(>=)S
750(MIN\(distance)S
1075(to)S
1150(EOF,)S
1275(P)S
1300(A)S
1325(G)S
1350(E)S
1375(S)S
1400(I)S
1425(Z)S
1450(E)S
1475(\))S
1500(\))S
1525(;)S
225 X
2150 Y
325 X(/*)s
225 X
2200 Y
350 X(*)s
400(Find)S
525(contiguous)S
800(dirty)S
950(pages)S
1100(between)S
1300(*offp)S
1450(and)S
1550(*offp)S
1700(+)S
1750(c)S
1775(o)S
1800(n)S
1825(t)S
1850(i)S
1875(g)S
225 X
2250 Y
350 X(*)s
400(and)S
500(add)S
600(these)S
750(to)S
825(the)S
925(vp's)S
1050(page)S
1175(list.)S
1350(Update)S
1525(offp)S
1650(and)S
1750(lenp)S
1875(to)S
225 X
2300 Y
350 X(*)s
400(describe)S
625(the)S
725(resulting)S
975(page)S
1100(list.)S
225 X
2350 Y
350 X(*/)s
225 X
2400 Y
325 X(pp)s
400(=)S
450(p)S
475(v)S
500(n)S
525(_)S
550(w)S
575(r)S
600(i)S
625(t)S
650(e)S
675(_)S
700(k)S
725(l)S
750(u)S
775(s)S
800(t)S
825(e)S
850(r)S
875(\()S
900(v)S
925(p)S
950(,)S
1000(offp,)S
1150(lenp,)S
1300(*offp,)S
1475(*offp)S
1625(+)S
1675(c)S
1700(o)S
1725(n)S
1750(t)S
1775(i)S
1800(g)S
1825(\))S
1850(;)S
225 X
2450 Y
325 X(bp)s
400(=)S
450(p)S
475(a)S
500(g)S
525(e)S
550(i)S
575(o)S
600(_)S
625(s)S
650(e)S
675(t)S
700(u)S
725(p)S
750(\()S
775(v)S
800(p)S
825(,)S
875(pp,)S
975(...\);)S
225 X
2500 Y
325 X(e)s
350(p)S
375(i)S
400(a)S
425(_)S
450(S)S
475(t)S
500(r)S
525(a)S
550(t)S
575(e)S
600(g)S
625(y)S
650(\()S
675(b)S
700(p)S
725(\))S
750(;)S
225 X
2550 Y
325 X(if)s
400(\(synchronous)S
725(or)S
800(error\))S
975({)S
225 X
2600 Y
425 X(e)s
450(p)S
475(i)S
500(a)S
525(_)S
550(U)S
575(p)S
600(d)S
625(a)S
650(t)S
675(e)S
700(U)S
725(n)S
750(d)S
775(o)S
800(Z)S
825(e)S
850(r)S
875(o)S
900(\()S
925(b)S
950(p)S
975(,)S
1025(1\);)S
225 X
2650 Y
425 X(post-I/O)s
650(c)S
675(l)S
700(e)S
725(a)S
750(n)S
775(u)S
800(p)S
825(;)S
225 X
2700 Y
325 X(})s
225 X
2750 Y(})s
225 X
2850 Y(/*)s
225 X
2900 Y
250(*)S
300(Get)S
400(vp's)S
525(pages)S
675(from)S
800(off)S
900(to)S
975(off)S
1075(+)S
1125(len)S
1225(\(possibly)S
1475(plus)S
1600(extra)S
225 X
2950 Y
250(*)S
300(adjoining)S
550(p)S
575(a)S
600(g)S
625(e)S
650(s)S
675(\))S
700(.)S
225 X
3000 Y
250(*/)S
225 X
3050 Y(e)s
250(f)S
275(s)S
300(_)S
325(g)S
350(e)S
375(t)S
400(p)S
425(a)S
450(g)S
475(e)S
500(\()S
525(v)S
550(p)S
575(,)S
625(off,)S
750(len,)S
875(protp,)S
1050(pl,)S
1150(plsz,)S
1300(seg,)S
1425(addr,)S
1575(rw,)S
1675(c)S
1700(r)S
1725(e)S
1750(d)S
1775(p)S
1800(\))S
225 X
3100 Y({)s
225 X
3220 Y
0.0 10 10 f.H ft(Lewis)s
2043 X(P)s
2070(a)S
2093(g)S
2116(e)S
2139( )S
2151(8)S
3300 Y
showpage
PageState6269 restore

%%PageFonts: Helvetica Courier
%%Page: label 9
%%PageFonts: (atend)
/PageState6269 save def
home

0.000000 setgray
%%IncludeFont: Helvetica

/Helvetica /Helvetica-8 roman-8-mappings AddRoman-8
/f.H /Helvetica-8 findfont def

0.0 10 10 f.H ft
1.0000 setlinewidth
[] 0 setdash

225 X
200 Y(OSF-RFC 75.0)s
983 X(E)s
1011(p)S
1034(i)S
1043(s)S
1064(o)S
1087(d)S
1110(e)S
1133( )S
1145(V)S
1173(M)S
1208( )S
1220(I)S
1232(n)S
1255(t)S
1267(e)S
1290(g)S
1313(r)S
1327(a)S
1350(t)S
1362(i)S
1371(o)S
1394(n)S
1923 X(O)s
1955(c)S
1976(t)S
1988(o)S
2011(b)S
2034(e)S
2057(r)S
2071( )S
2083(1)S
2106(9)S
2129(9)S
2152(5)S
225 X
400 Y
325 X
%%IncludeFont: Courier

/Courier /Courier-8 roman-8-mappings AddRoman-8
/f.CW /Courier-8 findfont def

0.0 10 10 f.CW ft(*protp)s
500(=)S
550(PROT_ALL;)S
825(/*)S
900(default)S
1100(protection)S
1375(*/)S
225 X
450 Y
325 X(if)s
400(\()S
425(e)S
450(f)S
475(s)S
500(_)S
525(H)S
550(a)S
575(s)S
600(H)S
625(o)S
650(l)S
675(e)S
700(s)S
725(\()S
750(v)S
775(p)S
800(\))S
825(\))S
875({)S
225 X
500 Y
425 X(if)s
500(\(rw)S
600(!=)S
675(S_WRITE)S
875(&&)S
950(rw)S
1025(!=)S
1100(S)S
1125(_)S
1150(C)S
1175(R)S
1200(E)S
1225(A)S
1250(T)S
1275(E)S
1300(\))S
225 X
550 Y
525 X(turn)s
650(off)S
750(write)S
900(permission)S
1175(in)S
1250(*)S
1275(p)S
1300(r)S
1325(o)S
1350(t)S
1375(p)S
1400(;)S
225 X
600 Y
425 X(else)s
550({)S
225 X
650 Y
425 X(/*)s
225 X
700 Y
450 X(*)s
500(We)S
575(will)S
700(already)S
900(have)S
1025(taken)S
1175(care)S
1300(of)S
1375(storage)S
1575(class)S
1725(p)S
1750(r)S
1775(o)S
1800(m)S
1825(o)S
1850(t)S
1875(i)S
1900(o)S
1925(n)S
225 X
750 Y
450 X(*)s
500(and)S
600(extending)S
850(allocation)S
1125(in)S
1200(efs_vmwrite,)S
1525(so)S
1600(the)S
1700(only)S
1825(case)S
225 X
800 Y
450 X(*)s
500(that)S
625(we)S
700(handle)S
875(here)S
1000(is)S
1075(filling)S
1275(in)S
1350(a)S
1400(hole)S
1525(or)S
1600(a)S
1650(COW)S
1750(b)S
1775(l)S
1800(o)S
1825(c)S
1850(k)S
1875(.)S
225 X
850 Y
450 X(*/)s
225 X
900 Y
525 X(e)s
550(f)S
575(s)S
600(_)S
625(M)S
650(a)S
675(k)S
700(e)S
725(W)S
750(r)S
775(i)S
800(t)S
825(a)S
850(b)S
875(l)S
900(e)S
925(B)S
950(l)S
975(o)S
1000(c)S
1025(k)S
1050(s)S
1075(\()S
1100(v)S
1125(p)S
1150(,)S
1200(offset,)S
1400(*lenp,)S
1575(1\);)S
225 X
950 Y
525 X(if)s
600(\(pp)S
700(=)S
750(p)S
775(a)S
800(g)S
825(e)S
850(_)S
875(l)S
900(o)S
925(o)S
950(k)S
975(u)S
1000(p)S
1025(_)S
1050(n)S
1075(o)S
1100(w)S
1125(a)S
1150(i)S
1175(t)S
1200(\()S
1225(v)S
1250(p)S
1275(,)S
1325(offset\)\))S
1550({)S
225 X
1000 Y
600 X(/*)s
675(e)S
700(f)S
725(s)S
750(_)S
775(M)S
800(a)S
825(k)S
850(e)S
875(W)S
900(r)S
925(i)S
950(t)S
975(a)S
1000(b)S
1025(l)S
1050(e)S
1075(B)S
1100(l)S
1125(o)S
1150(c)S
1175(k)S
1200(s)S
1250(may)S
1350(have)S
1475(made)S
1600(the)S
1700(page)S
1825(for)S
225 X
1050 Y
675 X(us)s
750(*/)S
225 X
1100 Y
600 X(pl[.])s
750(=)S
800(pp;)S
225 X
1150 Y
600 X(clean)s
750(up)S
825(&)S
875(r)S
900(e)S
925(t)S
950(u)S
975(r)S
1000(n)S
1025(;)S
225 X
1200 Y
525 X(})s
225 X
1250 Y
425 X(})s
225 X
1300 Y
325 X(})s
225 X
1350 Y
325 X(eoff)s
450(=)S
500(off)S
600(+)S
650(len;)S
225 X
1400 Y
325 X(while)s
475(\(off)S
600(<=)S
675(o)S
725(<)S
775(eoff\))S
925({)S
225 X
1450 Y
425 X(delta)s
575(=)S
625(0;)S
225 X
1500 Y
425 X(while)s
575(\(contiguous)S
875(pages)S
1025(starting)S
1250(at)S
1325(o)S
1375(exist\))S
1550({)S
225 X
1550 Y
525 X(lock)s
650(next)S
775(page)S
900(&)S
950(insert)S
1125(in)S
1200(pl)S
1275(a)S
1300(r)S
1325(r)S
1350(a)S
1375(y)S
1400(;)S
225 X
1600 Y
525 X(delta)s
675(+=)S
750(P)S
775(A)S
800(G)S
825(E)S
850(S)S
875(I)S
900(Z)S
925(E)S
950(;)S
225 X
1650 Y
425 X(})s
225 X
1700 Y
425 X(if)s
500(\(no)S
600(pages)S
750(already)S
950(exist\))S
1125({)S
225 X
1750 Y
525 X(/*)s
600(Get)S
700(page)S
825(from)S
950(disk)S
1075(\(possibly)S
1325(plus)S
1450(extras\))S
1650(*/)S
225 X
1800 Y
525 X(delta)s
675(=)S
725(len;)S
225 X
1850 Y
525 X(e)s
550(f)S
575(s)S
600(_)S
625(g)S
650(e)S
675(t)S
700(p)S
725(a)S
750(g)S
775(e)S
800(_)S
825(i)S
850(o)S
875(\()S
900(v)S
925(p)S
950(,)S
1000(o,)S
1075(&pl[],)S
1250(plsz,)S
1400(&delta,)S
1600(protp,)S
1775(...\);)S
225 X
1900 Y
425 X(})s
225 X
1950 Y
425 X(o)s
475(+=)S
550(d)S
575(e)S
600(l)S
625(t)S
650(a)S
675(;)S
225 X
2000 Y
325 X(})s
225 X
2050 Y
325 X(put)s
425(a)S
475(null)S
600(at)S
675(the)S
775(end)S
875(of)S
950(the)S
1050(pl[])S
1175(a)S
1200(r)S
1225(r)S
1250(a)S
1275(y)S
1300(;)S
225 X
2100 Y(})s
225 X
2200 Y(/*)s
225 X
2250 Y
250(*)S
300(This)S
425(function)S
650(handles)S
850(getpage)S
1050(requests)S
1275(where)S
1425(the)S
1525(required)S
1750(pages)S
225 X
2300 Y
250(*)S
300(do)S
375(not)S
475(already)S
675(exist.)S
875(Creates)S
1075(a)S
1125(page)S
1250(for)S
1350(\(vp,)S
1475(offset\),)S
1700(u)S
1725(s)S
1750(u)S
1775(a)S
1800(l)S
1825(l)S
1850(y)S
225 X
2350 Y
250(*)S
300(after)S
450(reading)S
650(the)S
750(data)S
875(from)S
1000(disk.)S
1175(lenp)S
1300(is)S
1375(an)S
1450(in/out)S
1625(p)S
1650(a)S
1675(r)S
1700(a)S
1725(m)S
1750(e)S
1775(t)S
1800(e)S
1825(r)S
1850(;)S
225 X
2400 Y
250(*)S
300(it)S
375(initially)S
625(says)S
750(how)S
850(many)S
975(bytes)S
1125(we)S
1200(want,)S
1350(and)S
1450(on)S
1525(return)S
1700(i)S
1725(n)S
1750(d)S
1775(i)S
1800(c)S
1825(a)S
1850(t)S
1875(e)S
1900(s)S
225 X
2450 Y
250(*)S
300(how)S
400(many)S
525(we)S
600(actually)S
825(got)S
925(\(PAGESIZE)S
1175(<=)S
1250(final)S
1400(value)S
1550(<=)S
1625(i)S
1650(n)S
1675(i)S
1700(t)S
1725(i)S
1750(a)S
1775(l)S
225 X
2500 Y
250(*)S
300(v)S
325(a)S
350(l)S
375(u)S
400(e)S
425(\))S
450(.)S
225 X
2550 Y
250(*/)S
225 X
2600 Y(e)s
250(f)S
275(s)S
300(_)S
325(g)S
350(e)S
375(t)S
400(p)S
425(a)S
450(g)S
475(e)S
500(_)S
525(i)S
550(o)S
575(\()S
600(v)S
625(p)S
650(,)S
700(offset,)S
900(pl[],)S
1050(plsz,)S
1200(lenp,)S
1350(protp,)S
1525(...\);)S
225 X
2650 Y({)s
225 X
2750 Y
325 X(if)s
400(\(conditions)S
700(w)S
725(a)S
750(r)S
775(r)S
800(a)S
825(n)S
850(t)S
875(\))S
225 X
2800 Y
425 X(start)s
575(r)S
600(e)S
625(a)S
650(d)S
675(a)S
700(h)S
725(e)S
750(a)S
775(d)S
800(;)S
225 X
2900 Y
325 X(if)s
400(\(rw)S
500(==)S
575(S_CREATE\))S
825({)S
875(/*)S
950(Make)S
1075(a)S
1125(new)S
1225(page)S
1350(out)S
1450(of)S
1525(whole)S
1675(cloth)S
1825(*/)S
225 X
2950 Y
425 X(pl[.])s
575(=)S
625(p)S
650(a)S
675(g)S
700(e)S
725(_)S
750(c)S
775(r)S
800(e)S
825(a)S
850(t)S
875(e)S
900(\()S
925(v)S
950(p)S
975(,)S
1025(offset,)S
1225(P)S
1250(A)S
1275(G)S
1300(E)S
1325(S)S
1350(I)S
1375(Z)S
1400(E)S
1425(\))S
1450(;)S
225 X
3000 Y
425 X(*lenp)s
575(=)S
625(P)S
650(A)S
675(G)S
700(E)S
725(S)S
750(I)S
775(Z)S
800(E)S
825(;)S
225 X
3050 Y
325 X(})s
375(else)S
500({)S
625 X(/*)s
700(Get)S
800(as)S
875(many)S
1000(contiguous)S
1275(pages)S
1425(as)S
1500(we)S
1575(can)S
1675(*/)S
225 X
3100 Y
425 X(e)s
450(f)S
475(s)S
500(_)S
525(F)S
550(i)S
575(n)S
600(d)S
625(B)S
650(l)S
675(o)S
700(c)S
725(k)S
750(s)S
775(\()S
800(v)S
825(p)S
850(,)S
900(offset,)S
1100(&blkno,)S
1300(&writeLen,)S
1575(&)S
1600(r)S
1625(e)S
1650(a)S
1675(d)S
1700(L)S
1725(e)S
1750(n)S
1775(\))S
1800(;)S
225 X
3220 Y
0.0 10 10 f.H ft(Lewis)s
2043 X(P)s
2070(a)S
2093(g)S
2116(e)S
2139( )S
2151(9)S
3300 Y
showpage
PageState6269 restore

%%PageFonts: Helvetica Courier
%%Page: label 10
%%PageFonts: (atend)
/PageState6269 save def
home

0.000000 setgray
%%IncludeFont: Helvetica

/Helvetica /Helvetica-8 roman-8-mappings AddRoman-8
/f.H /Helvetica-8 findfont def

0.0 10 10 f.H ft
1.0000 setlinewidth
[] 0 setdash

225 X
200 Y(OSF-RFC 75.0)s
983 X(E)s
1011(p)S
1034(i)S
1043(s)S
1064(o)S
1087(d)S
1110(e)S
1133( )S
1145(V)S
1173(M)S
1208( )S
1220(I)S
1232(n)S
1255(t)S
1267(e)S
1290(g)S
1313(r)S
1327(a)S
1350(t)S
1362(i)S
1371(o)S
1394(n)S
1923 X(O)s
1955(c)S
1976(t)S
1988(o)S
2011(b)S
2034(e)S
2057(r)S
2071( )S
2083(1)S
2106(9)S
2129(9)S
2152(5)S
225 X
400 Y
425 X
%%IncludeFont: Courier

/Courier /Courier-8 roman-8-mappings AddRoman-8
/f.CW /Courier-8 findfont def

0.0 10 10 f.CW ft(if)s
500(\(rw)S
600(!=)S
675(S_WRITE)S
875(&&)S
225 X
450 Y
525 X(\(blkno)s
700(is)S
775(a)S
825(hole)S
950(||)S
1025(writeLen)S
1250(!=)S
1325(r)S
1350(e)S
1375(a)S
1400(d)S
1425(L)S
1450(e)S
1475(n)S
1500(\))S
1525(\))S
225 X
500 Y
525 X(turn)s
650(off)S
750(write)S
900(permission)S
1175(in)S
1250(*)S
1275(p)S
1300(r)S
1325(o)S
1350(t)S
1375(p)S
1400(;)S
225 X
550 Y
425 X(if)s
500(\(blkno)S
675(is)S
750(a)S
800(hole\))S
950({)S
225 X
600 Y
525 X(assert\(rw)s
775(!=)S
850(S)S
875(_)S
900(W)S
925(R)S
950(I)S
975(T)S
1000(E)S
1025(\))S
1050(;)S
225 X
650 Y
525 X(pp)s
600(=)S
650(p)S
675(a)S
700(g)S
725(e)S
750(_)S
775(c)S
800(r)S
825(e)S
850(a)S
875(t)S
900(e)S
925(\()S
950(v)S
975(p)S
1000(,)S
1050(offset,)S
1250(P)S
1275(A)S
1300(G)S
1325(E)S
1350(S)S
1375(I)S
1400(Z)S
1425(E)S
1450(\))S
1475(;)S
225 X
700 Y
525 X(pagezero\(pp,)s
850(0,)S
925(P)S
950(A)S
975(G)S
1000(E)S
1025(S)S
1050(I)S
1075(Z)S
1100(E)S
1125(\))S
1150(;)S
225 X
750 Y
525 X(pl[.])s
675(=)S
725(pp;)S
225 X
800 Y
425 X(})s
475(else)S
600({)S
225 X
850 Y
525 X(io_off)s
700(=)S
750(first)S
900(block)S
1050(boundary)S
1275(<=)S
1350(o)S
1375(f)S
1400(f)S
1425(s)S
1450(e)S
1475(t)S
1500(;)S
225 X
900 Y
525 X(io_len)s
700(=)S
750(\(doing)S
925(seq.)S
1050(reads)S
1200(on)S
1275(vp\))S
1375(?)S
1425(readLen)S
1625(:)S
1675(block)S
1825(size;)S
225 X
950 Y
525 X(pp)s
600(=)S
650(r)S
675(e)S
700(a)S
725(d)S
750(_)S
775(k)S
800(l)S
825(u)S
850(s)S
875(t)S
900(e)S
925(r)S
950(\()S
975(v)S
1000(p)S
1025(,)S
1075(io_off,)S
1275(lenp,)S
1425(from)S
1550(io_off)S
1725(to)S
1800(i)S
1825(o)S
1850(_)S
1875(o)S
1900(f)S
1925(f)S
225 X
1000 Y
975 X(+)s
1025(i)S
1050(o)S
1075(_)S
1100(l)S
1125(e)S
1150(n)S
1175(\))S
1200(;)S
225 X
1050 Y
525 X(bp)s
600(=)S
650(p)S
675(a)S
700(g)S
725(e)S
750(i)S
775(o)S
800(_)S
825(s)S
850(e)S
875(t)S
900(u)S
925(p)S
950(\()S
975(v)S
1000(p)S
1025(,)S
1075(pp,)S
1175(...\);)S
225 X
1100 Y
525 X(e)s
550(p)S
575(i)S
600(a)S
625(_)S
650(S)S
675(t)S
700(r)S
725(a)S
750(t)S
775(e)S
800(g)S
825(y)S
850(\()S
875(b)S
900(p)S
925(\))S
950(;)S
225 X
1150 Y
525 X(b)s
550(i)S
575(o)S
600(w)S
625(a)S
650(i)S
675(t)S
700(\()S
725(b)S
750(p)S
775(\))S
800(;)S
225 X
1200 Y
525 X(post)s
650(I/O)S
750(c)S
775(l)S
800(e)S
825(a)S
850(n)S
875(u)S
900(p)S
925(;)S
225 X
1250 Y
425 X(})s
225 X
1300 Y
325 X(})s
225 X
1350 Y(})s
225 X
1450 Y(/*)s
225 X
1500 Y
250(*)S
300(Map)S
400(in)S
475(vnode)S
625(in)S
700(MAXBSIZE)S
925(\(8KB\))S
1075(chunks,)S
1275(and)S
1375(use)S
1475(uiomove)S
1675(to)S
1750(copy)S
1875(the)S
225 X
1550 Y
250(*)S
300(data)S
425(from)S
550(the)S
650(user's)S
825(buffer.)S
1050(We)S
1125(will)S
1250(do)S
1325(all)S
1425(the)S
1525(allocation)S
1800(in)S
225 X
1600 Y
250(*)S
300(efs_getpage,)S
625(which)S
775(will)S
900(be)S
975(called)S
1150(via)S
1250(s)S
1275(e)S
1300(g)S
1325(m)S
1350(a)S
1375(p)S
1400(_)S
1425(g)S
1450(e)S
1475(t)S
1500(m)S
1525(a)S
1550(p)S
1575(f)S
1600(l)S
1625(t)S
1675(or)S
1750(as)S
1825(a)S
225 X
1650 Y
250(*)S
300(consequence)S
600(of)S
675(page)S
800(faults)S
975(during)S
1150(the)S
1250(uiomove;)S
1475(the)S
1575(only)S
1700(e)S
1725(x)S
1750(c)S
1775(e)S
1800(p)S
1825(t)S
1850(i)S
1875(o)S
1900(n)S
225 X
1700 Y
250(*)S
300(is)S
375(in)S
450(the)S
550(cases)S
700(where)S
850(we)S
925(are)S
1025(creating)S
1250(a)S
1300(new)S
1400(page)S
1525(without)S
1725(c)S
1750(a)S
1775(l)S
1800(l)S
1825(i)S
1850(n)S
1875(g)S
225 X
1750 Y
250(*)S
300(getpage,)S
525(in)S
600(which)S
750(case)S
875(we)S
950(do)S
1025(the)S
1125(allocation)S
1400(here.)S
225 X
1800 Y
250(*/)S
225 X
1850 Y(e)s
250(f)S
275(s)S
300(_)S
325(v)S
350(m)S
375(w)S
400(r)S
425(i)S
450(t)S
475(e)S
500(\()S
525(v)S
550(p)S
575(,)S
625(uiop,)S
775(...\))S
225 X
1900 Y({)s
225 X
1950 Y
325 X(/*)s
225 X
2000 Y
350 X(*)s
400(Update)S
575(length)S
750(and)S
850(change)S
1025(storage)S
1225(class)S
1375(of)S
1450(file)S
1575(if)S
1650(a)S
1675(p)S
1700(p)S
1725(r)S
1750(o)S
1775(p)S
1800(r)S
1825(i)S
1850(a)S
1875(t)S
1900(e)S
1925(.)S
225 X
2050 Y
350 X(*/)s
225 X
2100 Y
325 X(if)s
400(\(extending)S
675(file\))S
825({)S
225 X
2150 Y
425 X(if)s
500(\(new_length)S
800(>)S
850(max.)S
975(file)S
1100(size)S
1225(allowed\))S
1450({)S
225 X
2200 Y
525 X(too_big)s
725(=)S
775(TRUE;)S
225 X
2250 Y
525 X(new_length)s
800(=)S
850(max.)S
975(file)S
1100(size;)S
225 X
2300 Y
425 X(})s
225 X
2350 Y
425 X(v)s
450(n)S
475(m)S
500(_)S
525(T)S
550(r)S
575(u)S
600(n)S
625(c)S
650(a)S
675(t)S
700(e)S
725(\()S
750(v)S
775(p)S
800(,)S
850(new_length,)S
1150(...\);)S
225 X
2400 Y
325 X(})s
225 X
2500 Y
325 X(for)s
425(each)S
550(8K)S
625(chunk)S
775({)S
225 X
2550 Y
425 X(/*)s
225 X
2600 Y
450 X(*)s
500(We)S
575(could)S
725(set)S
825(create_page)S
1125(slightly)S
1350(more)S
1475(a)S
1500(g)S
1525(g)S
1550(r)S
1575(e)S
1600(s)S
1625(s)S
1650(i)S
1675(v)S
1700(e)S
1725(l)S
1750(y)S
1775(,)S
1825(i.e.,)S
225 X
2650 Y
450 X(*)s
500(whenever)S
725(the)S
825(write)S
975(starts)S
1150(in)S
1225(a)S
1275(page)S
1400(beyond)S
1575(the)S
1675(old)S
1775(EOF;)S
1900(in)S
225 X
2700 Y
450 X(*)s
500(that)S
625(case)S
750(we)S
825(would)S
975(also)S
1100(have)S
1225(to)S
1300(zero)S
1425(the)S
1525(beginning)S
1775(of)S
1850(the)S
225 X
2750 Y
450 X(*)s
500(page)S
625(when)S
750(not)S
850(aligned.)S
1100(Worth)S
1250(the)S
1350(e)S
1375(f)S
1400(f)S
1425(o)S
1450(r)S
1475(t)S
1500(?)S
225 X
2800 Y
450 X(*/)s
225 X
2850 Y
425 X(create_page)s
725(=)S
775(extending)S
1025(the)S
1125(file)S
1250(&&)S
1325(on)S
1400(an)S
1475(8K)S
1550(boundary)S
1800(||)S
225 X
2900 Y
750 X(overwriting)s
1050(a)S
1100(whole)S
1250(c)S
1275(h)S
1300(u)S
1325(n)S
1350(k)S
1375(;)S
225 X
2950 Y
425 X(create)s
600(segmap)S
775(mapping,)S
1000(faulting)S
1225(in)S
1300(pages)S
1450(if)S
1525(!)S
1550(c)S
1575(r)S
1600(e)S
1625(a)S
1650(t)S
1675(e)S
1700(_)S
1725(p)S
1750(a)S
1775(g)S
1800(e)S
1825(;)S
225 X
3000 Y
425 X(if)s
500(\()S
525(c)S
550(r)S
575(e)S
600(a)S
625(t)S
650(e)S
675(_)S
700(p)S
725(a)S
750(g)S
775(e)S
800(\))S
850({)S
225 X
3050 Y
525 X(e)s
550(f)S
575(s)S
600(_)S
625(M)S
650(a)S
675(k)S
700(e)S
725(W)S
750(r)S
775(i)S
800(t)S
825(a)S
850(b)S
875(l)S
900(e)S
925(B)S
950(l)S
975(o)S
1000(c)S
1025(k)S
1050(s)S
1075(\()S
1100(v)S
1125(p)S
1150(,)S
1200(off,)S
1325(8K,)S
1425(1\);)S
225 X
3100 Y
525 X(s)s
550(e)S
575(g)S
600(m)S
625(a)S
650(p)S
675(_)S
700(p)S
725(a)S
750(g)S
775(e)S
800(c)S
825(r)S
850(e)S
875(a)S
900(t)S
925(e)S
950(\()S
975(.)S
1000(.)S
1025(.)S
1050(\))S
1075(;)S
225 X
3220 Y
0.0 10 10 f.H ft(Lewis)s
2020 X(P)s
2047(a)S
2070(g)S
2093(e)S
2116( )S
2128(1)S
2151(0)S
3300 Y
showpage
PageState6269 restore

%%PageFonts: Helvetica Courier
%%Page: label 11
%%PageFonts: (atend)
/PageState6269 save def
home

0.000000 setgray
%%IncludeFont: Helvetica

/Helvetica /Helvetica-8 roman-8-mappings AddRoman-8
/f.H /Helvetica-8 findfont def

0.0 10 10 f.H ft
1.0000 setlinewidth
[] 0 setdash

225 X
200 Y(OSF-RFC 75.0)s
983 X(E)s
1011(p)S
1034(i)S
1043(s)S
1064(o)S
1087(d)S
1110(e)S
1133( )S
1145(V)S
1173(M)S
1208( )S
1220(I)S
1232(n)S
1255(t)S
1267(e)S
1290(g)S
1313(r)S
1327(a)S
1350(t)S
1362(i)S
1371(o)S
1394(n)S
1923 X(O)s
1955(c)S
1976(t)S
1988(o)S
2011(b)S
2034(e)S
2057(r)S
2071( )S
2083(1)S
2106(9)S
2129(9)S
2152(5)S
225 X
400 Y
425 X
%%IncludeFont: Courier

/Courier /Courier-8 roman-8-mappings AddRoman-8
/f.CW /Courier-8 findfont def

0.0 10 10 f.CW ft(})s
225 X
450 Y
425 X(error)s
575(=)S
625(u)S
650(i)S
675(o)S
700(m)S
725(o)S
750(v)S
775(e)S
800(\()S
825(.)S
850(.)S
875(.)S
900(\))S
925(;)S
225 X
500 Y
425 X(release)s
625(m)S
650(a)S
675(p)S
700(p)S
725(i)S
750(n)S
775(g)S
800(;)S
225 X
550 Y
325 X(})s
225 X
650 Y
325 X(update)s
500(mtime,)S
675(etc.)S
225 X
700 Y
325 X(if)s
400(\(too_big)S
625(&&)S
700(no)S
775(other)S
925(error)S
1075(occurred\))S
1325({)S
225 X
750 Y
425 X(generate)s
650(S)S
675(I)S
700(G)S
725(X)S
750(F)S
775(S)S
800(Z)S
825(;)S
225 X
800 Y
425 X(return)s
600(E)S
625(F)S
650(B)S
675(I)S
700(G)S
725(;)S
225 X
850 Y
325 X(})s
225 X
900 Y(})s
225 X
1000 Y(/*)s
225 X
1050 Y
250(*)S
300(Same)S
425(idea)S
550(as)S
625(efs_vmwrite,)S
950(only)S
1075(simpler)S
1275(because)S
1475(no)S
1550(allocation)S
1825(is)S
225 X
1100 Y
250(*)S
300(n)S
325(e)S
350(e)S
375(d)S
400(e)S
425(d)S
450(.)S
225 X
1150 Y
250(*/)S
225 X
1200 Y(e)s
250(f)S
275(s)S
300(_)S
325(v)S
350(m)S
375(r)S
400(e)S
425(a)S
450(d)S
475(\()S
500(v)S
525(p)S
550(,)S
600(uiop,)S
750(...\))S
225 X
1250 Y({)s
225 X
1300 Y
325 X(while)s
475(\(read)S
625(not)S
725(finished)S
950(&&)S
1025(not)S
1125(past)S
1250(EOF\))S
1375({)S
225 X
1350 Y
425 X(create)s
600(mapping)S
800(for)S
900(8K)S
975(c)S
1000(h)S
1025(u)S
1050(n)S
1075(k)S
1100(;)S
225 X
1400 Y
425 X(u)s
450(i)S
475(o)S
500(m)S
525(o)S
550(v)S
575(e)S
600(\()S
625(.)S
650(.)S
675(.)S
700(\))S
725(;)S
225 X
1450 Y
425 X(release)s
625(m)S
650(a)S
675(p)S
700(p)S
725(i)S
750(n)S
775(g)S
800(;)S
225 X
1500 Y
350 X(})s
225 X
1550 Y(})s
225 X
1650 Y(/*)s
225 X
1700 Y
250(*)S
300(Create)S
475(dirty,)S
650(zero-filled)S
950(pages)S
1100(starting)S
1325(at)S
1400(off.)S
225 X
1750 Y
250(*)S
300(e)S
325(f)S
350(s)S
375(_)S
400(M)S
425(a)S
450(k)S
475(e)S
500(W)S
525(r)S
550(i)S
575(t)S
600(a)S
625(b)S
650(l)S
675(e)S
700(B)S
725(l)S
750(o)S
775(c)S
800(k)S
825(s)S
875(uses)S
1000(this)S
1125(to)S
1200(make)S
1325(pages)S
1475(c)S
1500(o)S
1525(r)S
1550(r)S
1575(e)S
1600(s)S
1625(p)S
1650(o)S
1675(n)S
1700(d)S
1725(i)S
1750(n)S
1775(g)S
1825(to)S
225 X
1800 Y
250(*)S
300(newly)S
450(allocated)S
700(b)S
725(l)S
750(o)S
775(c)S
800(k)S
825(s)S
850(.)S
225 X
1850 Y
250(*)S
225 X
1900 Y
250(*)S
300(Assumes)S
500(that)S
625(vp)S
700(is)S
775(locked)S
950(so)S
1025(that)S
1150(no)S
1225(new)S
1325(pages)S
1475(are)S
1575(being)S
1725(c)S
1750(r)S
1775(e)S
1800(a)S
1825(t)S
1850(e)S
1875(d)S
225 X
1950 Y
250(*)S
300(c)S
325(o)S
350(n)S
375(c)S
400(u)S
425(r)S
450(r)S
475(e)S
500(n)S
525(t)S
550(l)S
575(y)S
600(;)S
650(otherwise,)S
925(we)S
1000(might)S
1150(overwrite)S
1400(valid)S
1550(data)S
1675(with)S
225 X
2000 Y
250(*)S
300(z)S
325(e)S
350(r)S
375(o)S
400(e)S
425(s)S
450(.)S
225 X
2050 Y
250(*)S
225 X
2100 Y
250(*)S
300(Note:)S
450(this)S
575(will)S
700(cause)S
850(page)S
975(f)S
1000(a)S
1025(u)S
1050(l)S
1075(t)S
1100(s)S
1125(.)S
225 X
2150 Y
250(*/)S
225 X
2200 Y(e)s
250(f)S
275(s)S
300(_)S
325(C)S
350(r)S
375(e)S
400(a)S
425(t)S
450(e)S
475(D)S
500(i)S
525(r)S
550(t)S
575(y)S
600(Z)S
625(e)S
650(r)S
675(o)S
700(P)S
725(a)S
750(g)S
775(e)S
800(s)S
825(\()S
850(v)S
875(p)S
900(,)S
950(off,)S
1075(len\))S
225 X
2250 Y({)s
225 X
2300 Y
350 X(set)s
450(vd_owner)S
675(to)S
750(c)S
775(u)S
800(r)S
825(t)S
850(h)S
875(r)S
900(e)S
925(a)S
950(d)S
975(;)S
225 X
2350 Y
350 X(for)s
450(each)S
575(8K)S
650(chunk)S
800({)S
225 X
2400 Y
425 X(fbzero\(vp,)s
700(off,)S
825(size,)S
975(&)S
1000(f)S
1025(b)S
1050(p)S
1075(\))S
1100(;)S
225 X
2450 Y
425 X(fbrelse\(fbp,)s
750(S)S
775(_)S
800(W)S
825(R)S
850(I)S
875(T)S
900(E)S
925(\))S
950(;)S
225 X
2500 Y
350 X(})s
225 X
2550 Y
350 X(set)s
450(vd_owner)S
675(to)S
750(NULL;)S
225 X
2600 Y(})s
225 X
2700 Y(#elif)s
375(d)S
400(e)S
425(f)S
450(i)S
475(n)S
500(e)S
525(d)S
550(\()S
575(A)S
600(F)S
625(S)S
650(_)S
675(A)S
700(I)S
725(X)S
750(_)S
775(E)S
800(N)S
825(V)S
850(\))S
225 X
2750 Y(/*)s
225 X
2800 Y
250(*)S
300(AIX-specific)S
625(VM)S
700(i)S
725(n)S
750(t)S
775(e)S
800(r)S
825(f)S
850(a)S
875(c)S
900(e)S
925(s)S
225 X
2850 Y
250(*/)S
225 X
2950 Y(/*)s
225 X
3000 Y
250(*)S
300(Routines)S
525(called)S
700(by)S
775(the)S
875(episode)S
1075(VM)S
1150(handling)S
1375(daemons)S
1575(with)S
1700(a)S
1750(list)S
1875(of)S
225 X
3050 Y
250(*)S
300(bufs.)S
450(Their)S
600(job)S
700(is)S
775(to)S
850(do)S
925(all)S
1025(the)S
1125(work)S
1250(necessary)S
1500(to)S
1575(call)S
225 X
3100 Y
250(*)S
300(e)S
325(p)S
350(i)S
375(a)S
400(_)S
425(S)S
450(t)S
475(r)S
500(a)S
525(t)S
550(e)S
575(g)S
600(y)S
625(.)S
225 X
3220 Y
0.0 10 10 f.H ft(Lewis)s
2020 X(P)s
2047(a)S
2070(g)S
2093(e)S
2116( )S
2128(1)S
2151(1)S
3300 Y
showpage
PageState6269 restore

%%PageFonts: Helvetica Courier
%%Page: label 12
%%PageFonts: (atend)
/PageState6269 save def
home

0.000000 setgray
%%IncludeFont: Helvetica

/Helvetica /Helvetica-8 roman-8-mappings AddRoman-8
/f.H /Helvetica-8 findfont def

0.0 10 10 f.H ft
1.0000 setlinewidth
[] 0 setdash

225 X
200 Y(OSF-RFC 75.0)s
983 X(E)s
1011(p)S
1034(i)S
1043(s)S
1064(o)S
1087(d)S
1110(e)S
1133( )S
1145(V)S
1173(M)S
1208( )S
1220(I)S
1232(n)S
1255(t)S
1267(e)S
1290(g)S
1313(r)S
1327(a)S
1350(t)S
1362(i)S
1371(o)S
1394(n)S
1923 X(O)s
1955(c)S
1976(t)S
1988(o)S
2011(b)S
2034(e)S
2057(r)S
2071( )S
2083(1)S
2106(9)S
2129(9)S
2152(5)S
225 X
400 Y
%%IncludeFont: Courier

/Courier /Courier-8 roman-8-mappings AddRoman-8
/f.CW /Courier-8 findfont def

0.0 10 10 f.CW ft
250(*)S
225 X
450 Y
250(*)S
300(General)S
500(D)S
525(e)S
550(s)S
575(c)S
600(r)S
625(i)S
650(p)S
675(t)S
700(i)S
725(o)S
750(n)S
225 X
500 Y
250(*)S
225 X
550 Y
250(*)S
425 X(In)s
500(AIX)S
600(we)S
675(have)S
800(3)S
850(daemons)S
1050(servicing)S
1300(p)S
1325(a)S
1350(g)S
1375(e)S
1400(f)S
1425(a)S
1450(u)S
1475(l)S
1500(t)S
1525(s)S
1550(:)S
225 X
600 Y
250(*)S
225 X
650 Y
250(*)S
625 X(1.)s
700(The)S
800(pageout)S
1000(daemon.)S
1200(This)S
1325(process)S
1525(s)S
1550(i)S
1575(m)S
1600(p)S
1625(l)S
1650(y)S
225 X
700 Y
250(*)S
425 X(schedules)s
675(the)S
775(I/O)S
875(to)S
950(the)S
1050(disk.)S
1200(It)S
1275(asserts)S
1475(that)S
1600(all)S
1700(the)S
1800(pages)S
225 X
750 Y
250(*)S
425 X(that)s
550(it)S
625(is)S
700(asked)S
850(to)S
925(write)S
1075(have)S
1200(backing)S
1400(disk)S
1525(space.)S
1700(It)S
1775(only)S
225 X
800 Y
250(*)S
425 X(read-locks)s
700(the)S
800(vnode's)S
1000(f)S
1025(i)S
1050(l)S
1075(e)S
1100(L)S
1125(o)S
1150(c)S
1175(k)S
225 X
850 Y
250(*)S
225 X
900 Y
250(*)S
625 X(2.)s
700(The)S
800(pagein)S
975(daemon.)S
1175(This)S
1300(process)S
1500(reads)S
1650(data)S
1775(into)S
225 X
950 Y
250(*)S
425 X(the)s
525(pages)S
675(from)S
800(disk.)S
950(If)S
1025(the)S
1125(page)S
1250(that)S
1375(it)S
1450(read)S
1575(does)S
1700(not)S
1800(have)S
225 X
1000 Y
250(*)S
425 X(allocated)s
675(writable)S
900(disk)S
1025(blocks,)S
1225(it)S
1300(returns)S
1500(the)S
1600(page)S
1725(write)S
225 X
1050 Y
250(*)S
425 X(protected)s
675(even)S
800(if)S
875(it)S
950(was)S
1050(called)S
1225(with)S
1350(PF_STORE)S
1575(set.)S
1700(It)S
1775(locks)S
225 X
1100 Y
250(*)S
425 X(the)s
525(vnode's)S
725(vmLock)S
900(and)S
1000(read-locks)S
1275(its)S
1375(fileLock.)S
1625(It)S
1700(also)S
225 X
1150 Y
250(*)S
425 X(increments)s
700(the)S
800(vnode's)S
1000(pagefault)S
1250(counter.)S
1475(If)S
1550(the)S
1650(p)S
1675(a)S
1700(g)S
1725(e)S
1750(i)S
1775(n)S
225 X
1200 Y
250(*)S
425 X(specified)s
675(offset+len)S
950(past)S
1075(EOF)S
1175(and)S
1275(it)S
1350(was)S
1450(called)S
1625(on)S
1700(behalf)S
1875(of)S
225 X
1250 Y
250(*)S
425 X(shmat\(\),)s
650(it)S
725(again)S
875(returns)S
1075(a)S
1125(w)S
1150(r)S
1175(i)S
1200(t)S
1225(e)S
1250(-)S
1275(p)S
1300(r)S
1325(o)S
1350(t)S
1375(e)S
1400(c)S
1425(t)S
1450(e)S
1475(d)S
1525(page)S
225 X
1300 Y
250(*)S
225 X
1350 Y
250(*)S
625 X(3.)s
700(The)S
800(p)S
825(a)S
850(g)S
875(e)S
900(-)S
925(u)S
950(n)S
975(p)S
1000(r)S
1025(o)S
1050(t)S
1075(e)S
1100(c)S
1125(t)S
1175(daemon.)S
1375(This)S
1500(process)S
1700(gets)S
1825(the)S
225 X
1400 Y
250(*)S
425 X(pagefaults)s
700(for)S
800(the)S
900(pages)S
1050(that)S
1175(the)S
1275(pagein)S
1450(daemon)S
1625(filled)S
1800(in)S
1875(but)S
225 X
1450 Y
250(*)S
425 X(returned)s
650(write)S
800(protected.)S
1075(It)S
1150(does)S
1275(disk)S
1400(allocation,)S
1700(l)S
1725(e)S
1750(n)S
1775(g)S
1800(t)S
1825(h)S
225 X
1500 Y
250(*)S
425 X(setting)s
625(and)S
725(promotion)S
975(if)S
1050(appropriate)S
1350(and)S
1450(returns.)S
1675(It)S
1750(write)S
225 X
1550 Y
250(*)S
425 X(locks)s
575(vnode's)S
775(vd_tlock,)S
1025(vmLock)S
1200(and)S
1300(f)S
1325(i)S
1350(l)S
1375(e)S
1400(L)S
1425(o)S
1450(c)S
1475(k)S
1500(.)S
225 X
1600 Y
250(*)S
225 X
1650 Y
250(*)S
425 X(Notes:)s
600(The)S
700(third)S
850(daemon)S
1025(is)S
1100(only)S
1225(used)S
1350(for)S
1450(mapped)S
1625(files.)S
1800(In)S
1875(the)S
225 X
1700 Y
250(*)S
425 X(efs_vmwrite)s
725(path)S
850(we)S
925(do)S
1000(all)S
1100(the)S
1200(length)S
1375(setting,)S
1600(promotion,)S
1875(and)S
225 X
1750 Y
250(*)S
425 X(disk)s
550(allocation,)S
850(before)S
1025(calling)S
1225(vm_move,)S
1450(and)S
1550(we)S
1625(call)S
1750(v)S
1775(m)S
1800(_)S
1825(m)S
1850(o)S
1875(v)S
1900(e)S
225 X
1800 Y
250(*)S
425 X(while)s
575(holding)S
775(the)S
875(vd_tlock)S
1100(because)S
1300(we)S
1375(know)S
1500(that)S
1625(the)S
1725(3rd)S
225 X
1850 Y
250(*)S
425 X(daemon)s
600(won't)S
750(be)S
825(needed)S
1000(for)S
1100(our)S
1200(vm_move)S
1400(to)S
1475(c)S
1500(o)S
1525(m)S
1550(p)S
1575(l)S
1600(e)S
1625(t)S
1650(e)S
1675(.)S
225 X
1900 Y
250(*)S
225 X
1950 Y
250(*)S
425 X(Since)s
575(AIX)S
675(does)S
800(not)S
900(use)S
1000(pages)S
1150(but)S
1250(bufs)S
1375(to)S
1450(communicate)S
1750(with)S
1875(us)S
225 X
2000 Y
250(*)S
425 X(and)s
525(bufs)S
650(don't)S
800(have)S
925(an)S
1000(offset)S
1175(field)S
1325(it)S
1400(puts)S
1525(the)S
1625(offset)S
1800(in)S
225 X
2050 Y
250(*)S
425 X(logical)s
625(disk)S
750(block)S
900(units)S
1050(in)S
1125(b)S
1150(u)S
1175(f)S
1200(-)S
1225(>)S
1250(b)S
1275(_)S
1300(b)S
1325(l)S
1350(k)S
1375(n)S
1400(o)S
1425(.)S
1475(Before)S
1650(we)S
1725(call)S
225 X
2100 Y
250(*)S
425 X(epia_Strategy)s
775(we)S
850(must)S
975(overwrite)S
1225(this)S
1350(field)S
1500(with)S
1625(the)S
1725(a)S
1750(c)S
1775(t)S
1800(u)S
1825(a)S
1850(l)S
225 X
2150 Y
250(*)S
425 X(disk)s
550(address)S
750(of)S
825(the)S
925(block)S
1075(that)S
1200(we)S
1275(want)S
1400(the)S
1500(transfer)S
1725(to)S
1800(start)S
225 X
2200 Y
250(*)S
425 X(at.)s
225 X
2250 Y
250(*/)S
225 X
2350 Y(/*)s
225 X
2400 Y
250(*)S
300(The)S
400(VOP-level)S
650(read/write)S
925(i)S
950(n)S
975(t)S
1000(e)S
1025(r)S
1050(f)S
1075(a)S
1100(c)S
1125(e)S
1150(.)S
225 X
2450 Y
250(*/)S
225 X
2500 Y(e)s
250(f)S
275(s)S
300(_)S
325(v)S
350(m)S
375(r)S
400(d)S
425(w)S
450(r)S
475(\()S
500(v)S
525(p)S
550(,)S
600(uiop,)S
750(...\))S
225 X
2550 Y({)s
225 X
2600 Y
325 X(get)s
425(v)S
450(m)S
475(m)S
500(L)S
525(e)S
550(n)S
575(L)S
600(o)S
625(c)S
650(k)S
675(;)S
225 X
2650 Y
325 X(make)s
450(VM)S
525(segment)S
725(if)S
800(n)S
825(e)S
850(e)S
875(d)S
900(e)S
925(d)S
950(;)S
225 X
2700 Y
325 X(if)s
400(\(reading\))S
650({)S
225 X
2750 Y
425 X(/*)s
500(Move)S
625(the)S
725(data)S
850(between)S
1050(user)S
1175(buffer)S
1350(and)S
1450(VM)S
1525(segment)S
1725(*/)S
225 X
2800 Y
425 X(vm_move\(...,)s
750(uiop,)S
900(...\);)S
225 X
2850 Y
325 X(})s
375(else)S
500({)S
550(/*)S
625(writing)S
825(*/)S
225 X
2900 Y
425 X(if)s
500(\(extending)S
775(file\))S
225 X
2950 Y
525 X(v)s
550(n)S
575(m)S
600(_)S
625(T)S
650(r)S
675(u)S
700(n)S
725(c)S
750(a)S
775(t)S
800(e)S
825(\()S
850(v)S
875(p)S
900(,)S
950(new_length,)S
1250(...\);)S
225 X
3000 Y
525 X(if)s
600(\(splitting)S
875(a)S
925(COW)S
1025(block\))S
1200({)S
225 X
3050 Y
625 X(push)s
750(out)S
850(any)S
950(memory)S
1125(pages)S
1275(covering)S
1500(this)S
1625(b)S
1650(l)S
1675(o)S
1700(c)S
1725(k)S
1750(,)S
225 X
3100 Y
625 X(since)s
775(otherwise)S
1025(we)S
1100(may)S
1200(copy)S
1325(stale)S
1475(data)S
1600(to)S
1675(the)S
225 X
3220 Y
0.0 10 10 f.H ft(Lewis)s
2020 X(P)s
2047(a)S
2070(g)S
2093(e)S
2116( )S
2128(1)S
2151(2)S
3300 Y
showpage
PageState6269 restore

%%PageFonts: Helvetica Courier
%%Page: label 13
%%PageFonts: (atend)
/PageState6269 save def
home

0.000000 setgray
%%IncludeFont: Helvetica

/Helvetica /Helvetica-8 roman-8-mappings AddRoman-8
/f.H /Helvetica-8 findfont def

0.0 10 10 f.H ft
1.0000 setlinewidth
[] 0 setdash

225 X
200 Y(OSF-RFC 75.0)s
983 X(E)s
1011(p)S
1034(i)S
1043(s)S
1064(o)S
1087(d)S
1110(e)S
1133( )S
1145(V)S
1173(M)S
1208( )S
1220(I)S
1232(n)S
1255(t)S
1267(e)S
1290(g)S
1313(r)S
1327(a)S
1350(t)S
1362(i)S
1371(o)S
1394(n)S
1923 X(O)s
1955(c)S
1976(t)S
1988(o)S
2011(b)S
2034(e)S
2057(r)S
2071( )S
2083(1)S
2106(9)S
2129(9)S
2152(5)S
225 X
400 Y
625 X
%%IncludeFont: Courier

/Courier /Courier-8 roman-8-mappings AddRoman-8
/f.CW /Courier-8 findfont def

0.0 10 10 f.CW ft(new)s
725(block.)S
925(Since)S
1075(there)S
1225(is)S
1300(s)S
1325(y)S
1350(n)S
1375(c)S
1400(h)S
1425(r)S
1450(o)S
1475(n)S
1500(i)S
1525(z)S
1550(a)S
1575(t)S
1600(i)S
1625(o)S
1650(n)S
1700(in)S
225 X
450 Y
625 X(AIX,)s
750(we)S
825(must)S
950(iteratively)S
1250(w)S
1275(r)S
1300(i)S
1325(t)S
1350(e)S
1375(-)S
1400(p)S
1425(r)S
1450(o)S
1475(t)S
1500(e)S
1525(c)S
1550(t)S
1600(and)S
1700(flush)S
225 X
500 Y
625 X(until)s
775(there)S
925(are)S
1025(no)S
1100(more)S
1225(page)S
1350(faults.)S
1575(On)S
1650(other)S
225 X
550 Y
625 X(systems,)s
850(we)S
925(would)S
1075(avoid)S
1225(the)S
1325(disk)S
1450(I/O)S
1550(e)S
1575(n)S
1600(t)S
1625(i)S
1650(r)S
1675(e)S
1700(l)S
1725(y)S
225 X
600 Y
625 X(by)s
700(temporarily)S
1000(locking)S
1200(the)S
1300(p)S
1325(a)S
1350(g)S
1375(e)S
1400(s)S
1425(.)S
225 X
650 Y
525 X(})s
225 X
700 Y
525 X(for)s
625(each)S
750(new)S
850(page)S
975({)S
225 X
750 Y
600 X(e)s
625(f)S
650(s)S
675(_)S
700(M)S
725(a)S
750(k)S
775(e)S
800(W)S
825(r)S
850(i)S
875(t)S
900(a)S
925(b)S
950(l)S
975(e)S
1000(B)S
1025(l)S
1050(o)S
1075(c)S
1100(k)S
1125(s)S
1150(\()S
1175(v)S
1200(p)S
1225(,)S
1275(off,)S
1400(len,)S
1525(0\);)S
225 X
800 Y
600 X(create)s
775(page;)S
225 X
850 Y
525 X(})s
225 X
900 Y
425 X(})s
225 X
1000 Y
425 X(/*)s
500(Move)S
625(the)S
725(data)S
850(between)S
1050(user)S
1175(buffer)S
1350(and)S
1450(VM)S
1525(segment)S
1725(*/)S
225 X
1050 Y
425 X(vm_move\(...,)s
750(uiop,)S
900(...\);)S
225 X
1150 Y
425 X(if)s
500(\(file)S
650(doesn't)S
850(end)S
950(on)S
1025(a)S
1075(page)S
1200(b)S
1225(o)S
1250(u)S
1275(n)S
1300(d)S
1325(a)S
1350(r)S
1375(y)S
1400(\))S
225 X
1200 Y
525 X(write-protect)s
875(last)S
1000(page)S
1125(to)S
1200(handle)S
1375(extending)S
1625(m)S
1650(m)S
1675(a)S
1700(p)S
1725(s)S
1750(;)S
225 X
1300 Y
425 X(update)s
600(mtime,)S
775(etc.;)S
225 X
1400 Y
425 X(if)s
500(\()S
525(s)S
550(y)S
575(n)S
600(c)S
625(h)S
650(r)S
675(o)S
700(n)S
725(o)S
750(u)S
775(s)S
800(\))S
225 X
1450 Y
525 X(write)s
675(out)S
775(dirty)S
925(p)S
950(a)S
975(g)S
1000(e)S
1025(s)S
1050(;)S
225 X
1500 Y
325 X(})s
225 X
1550 Y
325 X(drop)s
450(v)S
475(m)S
500(m)S
525(L)S
550(e)S
575(n)S
600(L)S
625(o)S
650(c)S
675(k)S
700(;)S
225 X
1600 Y(})s
225 X
1700 Y(/*)s
225 X
1750 Y
250(*)S
300(The)S
400(i)S
425(n)S
450(t)S
475(e)S
500(r)S
525(r)S
550(u)S
575(p)S
600(t)S
625(-)S
650(t)S
675(i)S
700(m)S
725(e)S
775(code)S
900(that)S
1025(queues)S
1200(I/O)S
1300(requests)S
1525(from)S
1650(the)S
1750(VMM)S
225 X
1800 Y
250(*/)S
225 X
1850 Y(e)s
250(f)S
275(s)S
300(_)S
325(v)S
350(m)S
375(s)S
400(t)S
425(r)S
450(a)S
475(t)S
500(e)S
525(g)S
550(y)S
575(\()S
600(b)S
625(p)S
650(\))S
225 X
1900 Y({)s
225 X
1950 Y
325 X(while)s
475(\(bp)S
575(!=)S
650(NULL\))S
800({)S
225 X
2000 Y
425 X(if)s
500(\(bp->b_flags)S
825(include)S
1025(B_PFSTORE)S
1275(or)S
1350(B)S
1375(_)S
1400(P)S
1425(F)S
1450(P)S
1475(R)S
1500(O)S
1525(T)S
1550(\))S
225 X
2050 Y
525 X(put)s
625(bp)S
700(on)S
775(the)S
875(p)S
900(a)S
925(g)S
950(e)S
975(u)S
1000(n)S
1025(p)S
1050(r)S
1075(o)S
1100(t)S
1125(e)S
1150(c)S
1175(t)S
1225(daemon's)S
1450(q)S
1475(u)S
1500(e)S
1525(u)S
1550(e)S
1575(;)S
225 X
2100 Y
425 X(else)s
550(if)S
625(\()S
650(r)S
675(e)S
700(a)S
725(d)S
750(i)S
775(n)S
800(g)S
825(\))S
225 X
2150 Y
525 X(put)s
625(bp)S
700(on)S
775(the)S
875(pagein)S
1050(daemon's)S
1275(q)S
1300(u)S
1325(e)S
1350(u)S
1375(e)S
1400(;)S
225 X
2200 Y
425 X(else)s
225 X
2250 Y
525 X(put)s
625(bp)S
700(on)S
775(the)S
875(pageout)S
1075(daemon's)S
1300(q)S
1325(u)S
1350(e)S
1375(u)S
1400(e)S
1425(;)S
225 X
2350 Y
425 X(if)s
500(\(we)S
600(have)S
725(just)S
850(started)S
1050(on)S
1125(a)S
1175(new)S
1275(q)S
1300(u)S
1325(e)S
1350(u)S
1375(e)S
1400(\))S
225 X
2400 Y
525 X(issue)s
675(wakeup)S
850(to)S
925(daemon)S
1100(for)S
1200(preceding)S
1450(q)S
1475(u)S
1500(e)S
1525(u)S
1550(e)S
1575(;)S
225 X
2500 Y
425 X(get)s
525(next)S
650(bp;)S
225 X
2550 Y
325 X(})s
225 X
2600 Y
325 X(wake)s
450(up)S
525(daemon)S
700(for)S
800(final)S
950(q)S
975(u)S
1000(e)S
1025(u)S
1050(e)S
1075(;)S
225 X
2650 Y(})s
225 X
2750 Y(/*)s
225 X
2800 Y
250(*)S
300(The)S
400(pagein)S
575(daemon,)S
775(whose)S
925(job)S
1025(is)S
1100(to)S
1175(process)S
1375(the)S
1475(read)S
1600(r)S
1625(e)S
1650(q)S
1675(u)S
1700(e)S
1725(s)S
1750(t)S
1775(s)S
225 X
2850 Y
250(*)S
300(queued)S
475(by)S
550(e)S
575(f)S
600(s)S
625(_)S
650(v)S
675(m)S
700(s)S
725(t)S
750(r)S
775(a)S
800(t)S
825(e)S
850(g)S
875(y)S
900(.)S
225 X
2900 Y
250(*/)S
225 X
2950 Y(e)s
250(f)S
275(s)S
300(_)S
325(P)S
350(a)S
375(g)S
400(e)S
425(I)S
450(n)S
475(D)S
500(a)S
525(e)S
550(m)S
575(o)S
600(n)S
625(\()S
650(\))S
225 X
3000 Y({)s
225 X
3050 Y
325 X(while)s
475(\(1\))S
575({)S
225 X
3100 Y
425 X(get)s
525(a)S
575(request)S
775(from)S
900(the)S
1000(q)S
1025(u)S
1050(e)S
1075(u)S
1100(e)S
1125(;)S
225 X
3220 Y
0.0 10 10 f.H ft(Lewis)s
2020 X(P)s
2047(a)S
2070(g)S
2093(e)S
2116( )S
2128(1)S
2151(3)S
3300 Y
showpage
PageState6269 restore

%%PageFonts: Helvetica Courier
%%Page: label 14
%%PageFonts: (atend)
/PageState6269 save def
home

0.000000 setgray
%%IncludeFont: Helvetica

/Helvetica /Helvetica-8 roman-8-mappings AddRoman-8
/f.H /Helvetica-8 findfont def

0.0 10 10 f.H ft
1.0000 setlinewidth
[] 0 setdash

225 X
200 Y(OSF-RFC 75.0)s
983 X(E)s
1011(p)S
1034(i)S
1043(s)S
1064(o)S
1087(d)S
1110(e)S
1133( )S
1145(V)S
1173(M)S
1208( )S
1220(I)S
1232(n)S
1255(t)S
1267(e)S
1290(g)S
1313(r)S
1327(a)S
1350(t)S
1362(i)S
1371(o)S
1394(n)S
1923 X(O)s
1955(c)S
1976(t)S
1988(o)S
2011(b)S
2034(e)S
2057(r)S
2071( )S
2083(1)S
2106(9)S
2129(9)S
2152(5)S
225 X
400 Y
425 X
%%IncludeFont: Courier

/Courier /Courier-8 roman-8-mappings AddRoman-8
/f.CW /Courier-8 findfont def

0.0 10 10 f.CW ft(if)s
500(\(volume)S
700(is)S
775(busy)S
900(&&)S
975(can't)S
1125(do)S
1200(o)S
1225(p)S
1250(e)S
1275(r)S
1300(a)S
1325(t)S
1350(i)S
1375(o)S
1400(n)S
1425(\))S
225 X
450 Y
525 X(save)s
650(bp)S
725(on)S
800("busy)S
950(buffer")S
1150(queue,)S
1325(to)S
1400(be)S
1475(placed)S
1650(back)S
225 X
500 Y
525 X(on)s
600(the)S
700(active)S
875(queue)S
1025(when)S
1150(the)S
1250(volume)S
1425(is)S
1500(c)S
1525(l)S
1550(o)S
1575(s)S
1600(e)S
1625(d)S
1650(;)S
225 X
550 Y
425 X(})s
475(else)S
225 X
600 Y
525 X(e)s
550(f)S
575(s)S
600(_)S
625(p)S
650(a)S
675(g)S
700(e)S
725(i)S
750(n)S
775(\()S
800(b)S
825(p)S
850(\))S
875(;)S
225 X
650 Y
325 X(})s
225 X
700 Y(})s
225 X
800 Y(e)s
250(f)S
275(s)S
300(_)S
325(P)S
350(a)S
375(g)S
400(e)S
425(O)S
450(u)S
475(t)S
500(D)S
525(a)S
550(e)S
575(m)S
600(o)S
625(n)S
650(\()S
675(\))S
725({)S
225 X
850 Y
300(/*)S
375(like)S
500(e)S
525(f)S
550(s)S
575(_)S
600(P)S
625(a)S
650(g)S
675(e)S
700(I)S
725(n)S
750(D)S
775(a)S
800(e)S
825(m)S
850(o)S
875(n)S
925(*/)S
225 X
900 Y(})s
225 X
1000 Y(e)s
250(f)S
275(s)S
300(_)S
325(P)S
350(a)S
375(g)S
400(e)S
425(U)S
450(n)S
475(p)S
500(r)S
525(o)S
550(t)S
575(e)S
600(c)S
625(t)S
650(D)S
675(a)S
700(e)S
725(m)S
750(o)S
775(n)S
800(\()S
825(\))S
875({)S
225 X
1050 Y
300(/*)S
375(like)S
500(e)S
525(f)S
550(s)S
575(_)S
600(P)S
625(a)S
650(g)S
675(e)S
700(I)S
725(n)S
750(D)S
775(a)S
800(e)S
825(m)S
850(o)S
875(n)S
925(*/)S
225 X
1100 Y(})s
225 X
1200 Y(/*)s
225 X
1250 Y
250(*)S
300(Read)S
425(a)S
475(set)S
575(of)S
650(pages)S
800(into)S
925(m)S
950(e)S
975(m)S
1000(o)S
1025(r)S
1050(y)S
1075(.)S
225 X
1300 Y
250(*/)S
225 X
1350 Y(e)s
250(f)S
275(s)S
300(_)S
325(p)S
350(a)S
375(g)S
400(e)S
425(i)S
450(n)S
475(\()S
500(s)S
525(t)S
550(r)S
575(u)S
600(c)S
625(t)S
675(buf)S
775(*bp\))S
225 X
1400 Y({)s
225 X
1450 Y
325 X(flags)s
475(=)S
525(0;)S
225 X
1500 Y
325 X(/*)s
225 X
1550 Y
350 X(*)s
400(Page-fault)S
675(on)S
750(write;)S
925(this)S
1050(may)S
1150(be)S
1225(because)S
1425(we)S
1500(are)S
1600(writing)S
1800(into)S
225 X
1600 Y
350 X(*)s
400(a)S
450(hole)S
575(on)S
650(a)S
700(mapped)S
875(file)S
1000(or)S
1075(extending)S
1325(a)S
1375(mapped)S
1550(file.)S
225 X
1650 Y
350 X(*/)s
225 X
1700 Y
325 X(if)s
400(\(PFSTORE\))S
650({)S
225 X
1750 Y
425 X(if)s
500(\(PFEOF)S
675(&&)S
750(bp)S
825(would)S
975(extend)S
1150(beyond)S
1325(EOF\))S
225 X
1800 Y
525 X(return)s
700(EXCEPT_EOF)S
975(I/O)S
1075(e)S
1100(r)S
1125(r)S
1150(o)S
1175(r)S
1200(;)S
225 X
1850 Y
425 X(if)s
500(\(extending)S
775(file\))S
225 X
1900 Y
525 X(flags)s
675(=)S
725(B)S
750(P)S
775(_)S
800(P)S
825(R)S
850(O)S
875(T)S
900(E)S
925(C)S
950(T)S
975(;)S
225 X
1950 Y
325 X(})s
225 X
2000 Y
325 X(increment)s
575(page)S
700(fault)S
850(c)S
875(o)S
900(u)S
925(n)S
950(t)S
975(;)S
225 X
2050 Y
325 X(e)s
350(f)S
375(s)S
400(_)S
425(s)S
450(t)S
475(r)S
500(a)S
525(t)S
550(e)S
575(g)S
600(y)S
625(\()S
650(b)S
675(p)S
700(,)S
750(f)S
775(l)S
800(a)S
825(g)S
850(s)S
875(\))S
900(;)S
225 X
2100 Y(})s
225 X
2200 Y(/*)s
225 X
2250 Y
250(*)S
300(Write)S
450(out)S
550(a)S
600(set)S
700(of)S
775(p)S
800(a)S
825(g)S
850(e)S
875(s)S
900(.)S
225 X
2300 Y
250(*/)S
225 X
2350 Y(e)s
250(f)S
275(s)S
300(_)S
325(p)S
350(a)S
375(g)S
400(e)S
425(o)S
450(u)S
475(t)S
500(\()S
525(s)S
550(t)S
575(r)S
600(u)S
625(c)S
650(t)S
700(buf)S
800(*bp\))S
225 X
2400 Y({)s
225 X
2450 Y
325 X(e)s
350(f)S
375(s)S
400(_)S
425(s)S
450(t)S
475(r)S
500(a)S
525(t)S
550(e)S
575(g)S
600(y)S
625(\()S
650(b)S
675(p)S
700(,)S
750(0\);)S
225 X
2500 Y
325 X(if)s
400(\(synchronous)S
725(w)S
750(r)S
775(i)S
800(t)S
825(e)S
850(\))S
225 X
2550 Y
425 X(e)s
450(p)S
475(i)S
500(a)S
525(_)S
550(U)S
575(p)S
600(d)S
625(a)S
650(t)S
675(e)S
700(U)S
725(n)S
750(d)S
775(o)S
800(Z)S
825(e)S
850(r)S
875(o)S
900(\()S
925(b)S
950(p)S
975(,)S
1025(1\);)S
225 X
2600 Y(})s
225 X
2700 Y(e)s
250(f)S
275(s)S
300(_)S
325(p)S
350(a)S
375(g)S
400(e)S
425(u)S
450(n)S
475(p)S
500(r)S
525(o)S
550(t)S
575(e)S
600(c)S
625(t)S
650(\()S
675(b)S
700(p)S
725(\))S
225 X
2750 Y({)s
225 X
2800 Y
325 X(increment)s
575(page)S
700(fault)S
850(c)S
875(o)S
900(u)S
925(n)S
950(t)S
975(;)S
225 X
2850 Y
325 X(if)s
400(\(writable)S
650(mappings)S
875(&&)S
950(extending)S
1200(file\))S
225 X
2900 Y
425 X(e)s
450(f)S
475(s)S
500(_)S
525(P)S
550(r)S
575(o)S
600(m)S
625(o)S
650(t)S
675(e)S
700(\()S
725(b)S
750(p)S
775(,)S
825(n)S
850(e)S
875(w)S
900(_)S
925(l)S
950(e)S
975(n)S
1000(g)S
1025(t)S
1050(h)S
1075(\))S
1100(;)S
225 X
2950 Y
325 X(e)s
350(f)S
375(s)S
400(_)S
425(M)S
450(a)S
475(k)S
500(e)S
525(W)S
550(r)S
575(i)S
600(t)S
625(a)S
650(b)S
675(l)S
700(e)S
725(B)S
750(l)S
775(o)S
800(c)S
825(k)S
850(s)S
875(\()S
900(v)S
925(p)S
950(,)S
1000(off,)S
1125(..\))S
225 X
3000 Y(})s
225 X
3100 Y(/*)s
225 X
3220 Y
0.0 10 10 f.H ft(Lewis)s
2020 X(P)s
2047(a)S
2070(g)S
2093(e)S
2116( )S
2128(1)S
2151(4)S
3300 Y
showpage
PageState6269 restore

%%PageFonts: Helvetica Courier
%%Page: label 15
%%PageFonts: (atend)
/PageState6269 save def
home

0.000000 setgray
%%IncludeFont: Helvetica

/Helvetica /Helvetica-8 roman-8-mappings AddRoman-8
/f.H /Helvetica-8 findfont def

0.0 10 10 f.H ft
1.0000 setlinewidth
[] 0 setdash

225 X
200 Y(OSF-RFC 75.0)s
983 X(E)s
1011(p)S
1034(i)S
1043(s)S
1064(o)S
1087(d)S
1110(e)S
1133( )S
1145(V)S
1173(M)S
1208( )S
1220(I)S
1232(n)S
1255(t)S
1267(e)S
1290(g)S
1313(r)S
1327(a)S
1350(t)S
1362(i)S
1371(o)S
1394(n)S
1923 X(O)s
1955(c)S
1976(t)S
1988(o)S
2011(b)S
2034(e)S
2057(r)S
2071( )S
2083(1)S
2106(9)S
2129(9)S
2152(5)S
225 X
400 Y
%%IncludeFont: Courier

/Courier /Courier-8 roman-8-mappings AddRoman-8
/f.CW /Courier-8 findfont def

0.0 10 10 f.CW ft
250(*)S
300(Do)S
375(I/O)S
475(on)S
550(a)S
600(chain)S
750(of)S
825(buffers,)S
1050(breaking)S
1275(it)S
1350(into)S
1475(pieces)S
1650(that)S
225 X
450 Y
250(*)S
300(correspond)S
575(to)S
650(contiguous)S
925(regions)S
1125(on)S
1200(disk.)S
1375(The)S
1475(buffer)S
1650(chain)S
225 X
500 Y
250(*)S
300(is)S
375(assumed)S
575(to)S
650(be)S
725(logically)S
975(c)S
1000(o)S
1025(n)S
1050(t)S
1075(i)S
1100(g)S
1125(u)S
1150(o)S
1175(u)S
1200(s)S
1225(.)S
225 X
550 Y
250(*/)S
225 X
600 Y(e)s
250(f)S
275(s)S
300(_)S
325(s)S
350(t)S
375(r)S
400(a)S
425(t)S
450(e)S
475(g)S
500(y)S
525(\()S
550(b)S
575(p)S
600(,)S
650(f)S
675(l)S
700(a)S
725(g)S
750(s)S
775(\))S
225 X
650 Y({)s
225 X
700 Y
325 X(while)s
475(\(bp)S
575(!=)S
650(NULL\))S
800({)S
225 X
750 Y
425 X(get)s
525(\(vp,)S
650(off\))S
775(from)S
900(bp;)S
225 X
800 Y
425 X(if)s
500(\(inline\(vp\)\))S
825({)S
225 X
850 Y
500 X(e)s
525(p)S
550(i)S
575(a)S
600(_)S
625(S)S
650(t)S
675(r)S
700(a)S
725(t)S
750(e)S
775(g)S
800(y)S
825(\()S
850(b)S
875(p)S
900(\))S
925(;)S
225 X
900 Y
500 X(break;)s
225 X
950 Y
425 X(})s
475(else)S
600(if)S
675(\(reading\))S
925({)S
225 X
1000 Y
525 X(e)s
550(f)S
575(s)S
600(_)S
625(F)S
650(i)S
675(n)S
700(d)S
725(B)S
750(l)S
775(o)S
800(c)S
825(k)S
850(s)S
875(\()S
900(v)S
925(p)S
950(,)S
1000(off,)S
1125(...\);)S
225 X
1050 Y
525 X(if)s
600(\(reading)S
825(from)S
950(a)S
1000(hole\))S
1150({)S
225 X
1100 Y
625 X(bzero)s
775(a)S
825(block)S
975(in)S
1050(buf)S
1150(&)S
1200(w)S
1225(r)S
1250(i)S
1275(t)S
1300(e)S
1325(-)S
1350(p)S
1375(r)S
1400(o)S
1425(t)S
1450(e)S
1475(c)S
1500(t)S
1525(;)S
225 X
1150 Y
625 X(adjust)s
800(buf)S
900(length)S
1075(and)S
1175(a)S
1200(d)S
1225(d)S
1250(r)S
1275(e)S
1300(s)S
1325(s)S
1350(;)S
225 X
1200 Y
625 X(c)s
650(o)S
675(n)S
700(t)S
725(i)S
750(n)S
775(u)S
800(e)S
825(;)S
225 X
1250 Y
525 X(})s
575(else)S
700(if)S
775(\(reading)S
1000(from)S
1125(COW)S
1225(b)S
1250(l)S
1275(o)S
1300(c)S
1325(k)S
1350(s)S
1375(\))S
225 X
1300 Y
625 X(remember)s
850(to)S
925(w)S
950(r)S
975(i)S
1000(t)S
1025(e)S
1050(-)S
1075(p)S
1100(r)S
1125(o)S
1150(t)S
1175(e)S
1200(c)S
1225(t)S
1275(pages)S
1425(after)S
1575(read;)S
225 X
1350 Y
425 X(})s
475(else)S
600(/*)S
675(writing)S
875(*/)S
225 X
1400 Y
500 X(e)s
525(f)S
550(s)S
575(_)S
600(F)S
625(i)S
650(n)S
675(d)S
700(W)S
725(r)S
750(i)S
775(t)S
800(a)S
825(b)S
850(l)S
875(e)S
900(B)S
925(l)S
950(o)S
975(c)S
1000(k)S
1025(s)S
1050(\()S
1075(v)S
1100(p)S
1125(,)S
1175(off,)S
1300(...\);)S
225 X
1500 Y
425 X(if)s
500(\(contiguous)S
800(region)S
975(>)S
1025(buf)S
1125(l)S
1150(e)S
1175(n)S
1200(g)S
1225(t)S
1250(h)S
1275(\))S
225 X
1550 Y
525 X(gather)s
700(as)S
775(many)S
900(bufs)S
1025(as)S
1100(will)S
1225(fit;)S
225 X
1600 Y
425 X(update)s
600(length,)S
800(addr)S
925(of)S
1000(last)S
1125(buf;)S
225 X
1700 Y
425 X(e)s
450(p)S
475(i)S
500(a)S
525(_)S
550(S)S
575(t)S
600(r)S
625(a)S
650(t)S
675(e)S
700(g)S
725(y)S
750(\()S
775(t)S
800(b)S
825(p)S
850(\))S
875(;)S
225 X
1800 Y
425 X(if)s
500(\(\(flags)S
700(&)S
750(BP_PROTECT\))S
1050(||)S
1125(read)S
1250(from)S
1375(COW)S
1475(b)S
1500(l)S
1525(o)S
1550(c)S
1575(k)S
1600(s)S
1625(\))S
225 X
1850 Y
525 X(write-protect)s
875(page;)S
225 X
1900 Y
325 X(})s
225 X
2000 Y
325 X(do)s
400(iodone)S
575(processing)S
850(on)S
925(any)S
1025(unconsumed)S
1300(bufs;)S
225 X
2050 Y(})s
225 X
2150 Y(e)s
250(f)S
275(s)S
300(_)S
325(C)S
350(r)S
375(e)S
400(a)S
425(t)S
450(e)S
475(D)S
500(i)S
525(r)S
550(t)S
575(y)S
600(Z)S
625(e)S
650(r)S
675(o)S
700(P)S
725(a)S
750(g)S
775(e)S
800(s)S
825(\()S
850(v)S
875(p)S
900(,)S
950(off,)S
1075(len\))S
225 X
2200 Y({)s
225 X
2250 Y
350 X(for)s
450(each)S
575(page)S
700({)S
225 X
2300 Y
425 X(vm_makep\(vm)s
725(segment)S
925(for)S
1025(vp,)S
1125(page)S
1250(no.)S
1350(for)S
1450(o)S
1475(f)S
1500(f)S
1525(s)S
1550(e)S
1575(t)S
1600(\))S
1625(;)S
225 X
2350 Y
425 X(offset)s
600(+=)S
675(P)S
700(A)S
725(G)S
750(E)S
775(S)S
800(I)S
825(Z)S
850(E)S
875(;)S
225 X
2400 Y
350 X(})s
225 X
2450 Y(})s
225 X
2500 Y(#endif)s
400(/*)S
475(AFS_AIX_ENV)S
775(*/)S
225 X
2600 Y(/*)s
225 X
2650 Y
250(*)S
300(New)S
400(i)S
425(n)S
450(t)S
475(e)S
500(r)S
525(f)S
550(a)S
575(c)S
600(e)S
625(s)S
225 X
2700 Y
250(*/)S
225 X
2800 Y(/*)s
225 X
2850 Y
250(*)S
300(Make)S
425(sure)S
550(that)S
675(writable)S
900(disk)S
1025(storage)S
1225(exists)S
1400(for)S
1500(the)S
1600(s)S
1625(p)S
1650(e)S
1675(c)S
1700(i)S
1725(f)S
1750(i)S
1775(e)S
1800(d)S
225 X
2900 Y
250(*)S
300(range)S
450(of)S
525(offsets)S
725(in)S
800(vp.)S
950 X(If)s
1025(allocation)S
1300(is)S
1375(required,)S
1625(try)S
1725(to)S
1800(lay)S
225 X
2950 Y
250(*)S
300(out)S
400(new)S
500(blocks)S
675(in)S
750(minimum)S
950(number)S
1125(of)S
1200(contiguous)S
1475(r)S
1500(e)S
1525(g)S
1550(i)S
1575(o)S
1600(n)S
1625(s)S
1650(.)S
225 X
3000 Y
250(*/)S
225 X
3050 Y(e)s
250(f)S
275(s)S
300(_)S
325(M)S
350(a)S
375(k)S
400(e)S
425(W)S
450(r)S
475(i)S
500(t)S
525(a)S
550(b)S
575(l)S
600(e)S
625(B)S
650(l)S
675(o)S
700(c)S
725(k)S
750(s)S
775(\()S
800(v)S
825(p)S
850(,)S
900(off,)S
1025(len,)S
1150(m)S
1175(a)S
1200(k)S
1225(e)S
1250(P)S
1275(a)S
1300(g)S
1325(e)S
1350(s)S
1375(\))S
225 X
3100 Y({)s
225 X
3220 Y
0.0 10 10 f.H ft(Lewis)s
2020 X(P)s
2047(a)S
2070(g)S
2093(e)S
2116( )S
2128(1)S
2151(5)S
3300 Y
showpage
PageState6269 restore

%%PageFonts: Helvetica Courier
%%Page: label 16
%%PageFonts: (atend)
/PageState6269 save def
home

0.000000 setgray
%%IncludeFont: Helvetica

/Helvetica /Helvetica-8 roman-8-mappings AddRoman-8
/f.H /Helvetica-8 findfont def

0.0 10 10 f.H ft
1.0000 setlinewidth
[] 0 setdash

225 X
200 Y(OSF-RFC 75.0)s
983 X(E)s
1011(p)S
1034(i)S
1043(s)S
1064(o)S
1087(d)S
1110(e)S
1133( )S
1145(V)S
1173(M)S
1208( )S
1220(I)S
1232(n)S
1255(t)S
1267(e)S
1290(g)S
1313(r)S
1327(a)S
1350(t)S
1362(i)S
1371(o)S
1394(n)S
1923 X(O)s
1955(c)S
1976(t)S
1988(o)S
2011(b)S
2034(e)S
2057(r)S
2071( )S
2083(1)S
2106(9)S
2129(9)S
2152(5)S
225 X
400 Y
325 X
%%IncludeFont: Courier

/Courier /Courier-8 roman-8-mappings AddRoman-8
/f.CW /Courier-8 findfont def

0.0 10 10 f.CW ft(ap)s
400(=)S
450(E)S
475(V)S
500(T)S
525(O)S
550(A)S
575(\()S
600(v)S
625(p)S
650(\))S
675(;)S
225 X
450 Y
325 X(write-lock)s
600(anode)S
750(allocation)S
1025(info;)S
225 X
500 Y
325 X(e)s
350(p)S
375(i)S
400(a)S
425(_)S
450(S)S
475(t)S
500(a)S
525(r)S
550(t)S
575(T)S
600(r)S
625(a)S
650(n)S
675(\()S
700(a)S
725(p)S
750(,)S
800(&)S
825(t)S
850(r)S
875(a)S
900(n)S
925(\))S
950(;)S
225 X
600 Y
325 X(while)s
475(\(len)S
600(!=)S
675(0\))S
750({)S
225 X
650 Y
425 X(/*)s
500(What)S
625(is)S
700(at)S
775(this)S
900(offset?)S
1100(*/)S
225 X
700 Y
425 X(C)s
450(h)S
475(e)S
500(c)S
525(k)S
550(A)S
575(l)S
600(l)S
625(o)S
650(c)S
675(a)S
700(t)S
725(i)S
750(o)S
775(n)S
800(\()S
825(a)S
850(p)S
875(,)S
925(off,)S
1050(&blkno,)S
1250(&)S
1275(a)S
1300(l)S
1325(e)S
1350(n)S
1375(\))S
225 X
750 Y
425 X(alen)s
550(=)S
600(MIN\(len,)S
825(a)S
850(l)S
875(e)S
900(n)S
925(\))S
950(;)S
225 X
800 Y
425 X(if)s
500(\(blkno)S
675(==)S
750(HOLE\))S
900({)S
225 X
850 Y
525 X(C)s
550(r)S
575(e)S
600(a)S
625(t)S
650(e)S
675(B)S
700(l)S
725(o)S
750(c)S
775(k)S
800(s)S
825(\()S
850(a)S
875(p)S
900(,)S
950(tran,)S
1100(off,)S
1225(&)S
1250(a)S
1275(l)S
1300(e)S
1325(n)S
1350(\))S
1375(;)S
225 X
900 Y
525 X(/*)s
225 X
950 Y
550 X(*)s
600(We)S
675(don't)S
825(want)S
950(to)S
1025(make)S
1150(pages)S
1300(beyond)S
1475(EOF,)S
1600(so)S
1675(if)S
1750(the)S
225 X
1000 Y
550 X(*)s
600(unused)S
775(portion)S
975(of)S
1050(the)S
1150(last)S
1275(block)S
1425(is)S
1500(a)S
1550(page)S
1675(or)S
1750(more)S
1875(in)S
225 X
1050 Y
550 X(*)s
600(size,)S
750(we)S
825(will)S
950(write)S
1100(zeroes)S
1275(to)S
1350(it)S
1425(here.)S
225 X
1100 Y
550 X(*/)s
225 X
1150 Y
525 X(if)s
600(\(next)S
750(FS)S
825(block)S
975(boundary)S
1200(-)S
1250(\(off)S
1375(+)S
1425(alen\))S
1575(>=)S
1650(P)S
1675(A)S
1700(G)S
1725(E)S
1750(S)S
1775(I)S
1800(Z)S
1825(E)S
1850(\))S
225 X
1200 Y
600 X(ZeroBlock\(ap,)s
950(tran,)S
1100(off)S
1200(+)S
1250(a)S
1275(l)S
1300(e)S
1325(n)S
1350(\))S
1375(;)S
225 X
1250 Y
525 X(if)s
600(\()S
625(m)S
650(a)S
675(k)S
700(e)S
725(P)S
750(a)S
775(g)S
800(e)S
825(s)S
850(\))S
225 X
1300 Y
600 X(e)s
625(f)S
650(s)S
675(_)S
700(C)S
725(r)S
750(e)S
775(a)S
800(t)S
825(e)S
850(D)S
875(i)S
900(r)S
925(t)S
950(y)S
975(Z)S
1000(e)S
1025(r)S
1050(o)S
1075(P)S
1100(a)S
1125(g)S
1150(e)S
1175(s)S
1200(\()S
1225(v)S
1250(p)S
1275(,)S
1325(off,)S
1450(a)S
1475(l)S
1500(e)S
1525(n)S
1550(\))S
1575(;)S
225 X
1350 Y
425 X(})s
475(else)S
600(if)S
675(\(blkno)S
850(is)S
925(read-only\))S
1200({)S
225 X
1400 Y
525 X(if)s
600(\()S
625(m)S
650(a)S
675(k)S
700(e)S
725(P)S
750(a)S
775(g)S
800(e)S
825(s)S
850(\))S
225 X
1450 Y
600 X(C)s
625(o)S
650(p)S
675(y)S
700(B)S
725(l)S
750(o)S
775(c)S
800(k)S
825(s)S
850(\()S
875(a)S
900(p)S
925(,)S
975(tran,)S
1125(off,)S
1250(&)S
1275(a)S
1300(l)S
1325(e)S
1350(n)S
1375(\))S
1400(;)S
225 X
1500 Y
525 X(else)s
225 X
1550 Y
600 X(C)s
625(r)S
650(e)S
675(a)S
700(t)S
725(e)S
750(B)S
775(l)S
800(o)S
825(c)S
850(k)S
875(s)S
900(\()S
925(a)S
950(p)S
975(,)S
1025(tran,)S
1175(off,)S
1300(&)S
1325(a)S
1350(l)S
1375(e)S
1400(n)S
1425(\))S
1450(;)S
225 X
1600 Y
425 X(})s
475(else)S
600(if)S
675(\()S
700(I)S
725(s)S
750(F)S
775(r)S
800(a)S
825(g)S
850(m)S
875(e)S
900(n)S
925(t)S
950(e)S
975(d)S
1000(\()S
1025(a)S
1050(p)S
1075(\))S
1125(&&)S
1200(off)S
1300(+)S
1350(len)S
1450(>)S
1500(alen\))S
225 X
1650 Y
525 X(E)s
550(x)S
575(t)S
600(e)S
625(n)S
650(d)S
675(F)S
700(r)S
725(a)S
750(g)S
775(m)S
800(e)S
825(n)S
850(t)S
875(e)S
900(d)S
925(F)S
950(i)S
975(l)S
1000(e)S
1025(\()S
1050(a)S
1075(p)S
1100(,)S
1150(blkno,)S
1325(alen,)S
1475(off)S
1575(+)S
1625(len\);)S
225 X
1700 Y
425 X(/*)s
500(do)S
575(nothing)S
775(if)S
850(already)S
1050(writable)S
1275(*/)S
225 X
1800 Y
425 X(len)s
525(-=)S
600(alen;)S
225 X
1850 Y
425 X(off)s
525(+=)S
600(alen;)S
225 X
1900 Y
325 X(})s
225 X
2000 Y
325 X(unlock)s
500(a)S
525(n)S
550(o)S
575(d)S
600(e)S
625(;)S
225 X
2050 Y
325 X(e)s
350(p)S
375(i)S
400(a)S
425(_)S
450(E)S
475(n)S
500(d)S
525(T)S
550(r)S
575(a)S
600(n)S
625(\()S
650(a)S
675(p)S
700(,)S
750(t)S
775(r)S
800(a)S
825(n)S
850(\))S
875(;)S
225 X
2100 Y(})s
225 X
2200 Y(/*)s
225 X
2250 Y
250(*)S
300(Find)S
425(the)S
525(number)S
700(of)S
775(allocated)S
1025(blocks)S
1200(starting)S
1425(at)S
1500(the)S
1600(s)S
1625(p)S
1650(e)S
1675(c)S
1700(i)S
1725(f)S
1750(i)S
1775(e)S
1800(d)S
225 X
2300 Y
250(*)S
300(offset.)S
525(wrLenP)S
700(returns)S
900(the)S
1000(number)S
1175(of)S
1250(contiguous)S
1525(writable)S
1750(b)S
1775(l)S
1800(o)S
1825(c)S
1850(k)S
1875(s)S
225 X
2350 Y
250(*)S
300(starting)S
525(at)S
600(off,)S
725(and)S
825(rdLenP)S
1000(returns)S
1200(the)S
1300(number)S
1475(of)S
1550(c)S
1575(o)S
1600(n)S
1625(t)S
1650(i)S
1675(g)S
1700(u)S
1725(o)S
1750(u)S
1775(s)S
225 X
2400 Y
250(*)S
300(readable)S
525(b)S
550(l)S
575(o)S
600(c)S
625(k)S
650(s)S
675(.)S
225 X
2450 Y
250(*/)S
225 X
2500 Y(e)s
250(f)S
275(s)S
300(_)S
325(F)S
350(i)S
375(n)S
400(d)S
425(B)S
450(l)S
475(o)S
500(c)S
525(k)S
550(s)S
575(\()S
600(v)S
625(p)S
650(,)S
700(off,)S
825(blockP,)S
1025(wrLenP,)S
1225(r)S
1250(d)S
1275(L)S
1300(e)S
1325(n)S
1350(P)S
1375(\))S
225 X
2550 Y({)s
225 X
2600 Y
325 X(int)s
425(wlen)S
550(=)S
600(0,)S
675(rlen)S
800(=)S
850(0;)S
225 X
2650 Y
325 X(daddr_t)s
525(first_blk,)S
800(ablk;)S
225 X
2750 Y
325 X(ap)s
400(=)S
450(E)S
475(V)S
500(T)S
525(O)S
550(A)S
575(\()S
600(v)S
625(p)S
650(\))S
675(;)S
225 X
2800 Y
325 X(read-lock)s
575(anode)S
725(allocation)S
1000(info;)S
225 X
2900 Y
325 X(C)s
350(h)S
375(e)S
400(c)S
425(k)S
450(A)S
475(l)S
500(l)S
525(o)S
550(c)S
575(a)S
600(t)S
625(i)S
650(o)S
675(n)S
700(\()S
725(a)S
750(p)S
775(,)S
825(off,)S
950(&ablk,)S
1125(&)S
1150(a)S
1175(l)S
1200(e)S
1225(n)S
1250(\))S
1275(;)S
225 X
2950 Y
325 X(first_blk)s
575(=)S
625(ablk;)S
225 X
3000 Y
325 X(while)s
475(\(ablk)S
625(!=)S
700(HOLE)S
825(&&)S
900(first_blk)S
1150(==)S
1225(ablk)S
1350(+)S
1400(rlen\))S
1550({)S
225 X
3050 Y
425 X(if)s
500(\(blkno)S
675(is)S
750(r)S
775(e)S
800(a)S
825(d)S
850(-)S
875(o)S
900(n)S
925(l)S
950(y)S
975(\))S
225 X
3100 Y
525 X(rlen)s
650(+=)S
725(alen;)S
225 X
3220 Y
0.0 10 10 f.H ft(Lewis)s
2020 X(P)s
2047(a)S
2070(g)S
2093(e)S
2116( )S
2128(1)S
2151(6)S
3300 Y
showpage
PageState6269 restore

%%PageFonts: Helvetica Courier
%%Page: label 17
%%PageFonts: (atend)
/PageState6269 save def
home

0.000000 setgray
%%IncludeFont: Helvetica

/Helvetica /Helvetica-8 roman-8-mappings AddRoman-8
/f.H /Helvetica-8 findfont def

0.0 10 10 f.H ft
1.0000 setlinewidth
[] 0 setdash

225 X
200 Y(OSF-RFC 75.0)s
983 X(E)s
1011(p)S
1034(i)S
1043(s)S
1064(o)S
1087(d)S
1110(e)S
1133( )S
1145(V)S
1173(M)S
1208( )S
1220(I)S
1232(n)S
1255(t)S
1267(e)S
1290(g)S
1313(r)S
1327(a)S
1350(t)S
1362(i)S
1371(o)S
1394(n)S
1923 X(O)s
1955(c)S
1976(t)S
1988(o)S
2011(b)S
2034(e)S
2057(r)S
2071( )S
2083(1)S
2106(9)S
2129(9)S
2152(5)S
225 X
400 Y
425 X
%%IncludeFont: Courier

/Courier /Courier-8 roman-8-mappings AddRoman-8
/f.CW /Courier-8 findfont def

0.0 10 10 f.CW ft(else)s
550(if)S
625(\(wlen)S
775(==)S
850(rlen\))S
1000({)S
225 X
450 Y
525 X(rlen)s
650(+=)S
725(alen;)S
225 X
500 Y
525 X(wlen)s
650(+=)S
725(alen;)S
225 X
550 Y
425 X(})s
475(else)S
225 X
600 Y
525 X(rlen)s
650(+=)S
725(alen;)S
225 X
650 Y
425 X(off)s
525(+=)S
600(alen;)S
225 X
700 Y
425 X(C)s
450(h)S
475(e)S
500(c)S
525(k)S
550(A)S
575(l)S
600(l)S
625(o)S
650(c)S
675(a)S
700(t)S
725(i)S
750(o)S
775(n)S
800(\()S
825(a)S
850(p)S
875(,)S
925(off,)S
1050(&ablk,)S
1225(&)S
1250(a)S
1275(l)S
1300(e)S
1325(n)S
1350(\))S
1375(;)S
225 X
750 Y
325 X(})s
225 X
800 Y
325 X(unlock)s
500(a)S
525(n)S
550(o)S
575(d)S
600(e)S
625(;)S
225 X
900 Y
325 X(*blockP)s
525(=)S
575(f)S
600(i)S
625(r)S
650(s)S
675(t)S
700(_)S
725(b)S
750(l)S
775(o)S
800(c)S
825(k)S
850(;)S
225 X
950 Y
325 X(*wrLenP)s
525(=)S
575(wlen;)S
225 X
1000 Y
325 X(*rdLenP)s
525(=)S
575(rlen;)S
225 X
1050 Y(})s
225 X
1150 Y(/*)s
225 X
1200 Y
250(*)S
300(Like)S
425(e)S
450(f)S
475(s)S
500(_)S
525(F)S
550(i)S
575(n)S
600(d)S
625(B)S
650(l)S
675(o)S
700(c)S
725(k)S
750(s)S
775(,)S
825(but)S
925(returns)S
1125(only)S
1250(the)S
1350(number)S
1525(of)S
1600(c)S
1625(o)S
1650(n)S
1675(s)S
1700(e)S
1725(c)S
1750(u)S
1775(t)S
1800(i)S
1825(v)S
1850(e)S
225 X
1250 Y
250(*)S
300(writable)S
525(b)S
550(l)S
575(o)S
600(c)S
625(k)S
650(s)S
675(.)S
225 X
1300 Y
250(*/)S
225 X
1350 Y(e)s
250(f)S
275(s)S
300(_)S
325(F)S
350(i)S
375(n)S
400(d)S
425(W)S
450(r)S
475(i)S
500(t)S
525(a)S
550(b)S
575(l)S
600(e)S
625(B)S
650(l)S
675(o)S
700(c)S
725(k)S
750(s)S
775(\()S
800(v)S
825(p)S
850(,)S
900(off,)S
1025(blockP,)S
1225(lenP\))S
225 X
1400 Y({)s
225 X
1450 Y
325 X(int)s
425(wlen)S
550(=)S
600(0;)S
225 X
1500 Y
325 X(daddr_t)s
525(first_blk,)S
800(ablk;)S
225 X
1600 Y
325 X(ap)s
400(=)S
450(E)S
475(V)S
500(T)S
525(O)S
550(A)S
575(\()S
600(v)S
625(p)S
650(\))S
675(;)S
225 X
1650 Y
325 X(read-lock)s
575(anode)S
725(allocation)S
1000(info;)S
225 X
1750 Y
325 X(C)s
350(h)S
375(e)S
400(c)S
425(k)S
450(A)S
475(l)S
500(l)S
525(o)S
550(c)S
575(a)S
600(t)S
625(i)S
650(o)S
675(n)S
700(\()S
725(a)S
750(p)S
775(,)S
825(off,)S
950(&ablk,)S
1125(&)S
1150(a)S
1175(l)S
1200(e)S
1225(n)S
1250(\))S
1275(;)S
225 X
1800 Y
325 X(first_blk)s
575(=)S
625(ablk;)S
225 X
1850 Y
325 X(while)s
475(\(ablk)S
625(is)S
700(writable)S
925(&&)S
1000(first_blk)S
1250(==)S
1325(ablk)S
1450(+)S
1500(wlen\))S
1650({)S
225 X
1900 Y
425 X(wlen)s
550(+=)S
625(alen;)S
225 X
1950 Y
425 X(off)s
525(+=)S
600(alen;)S
225 X
2000 Y
425 X(C)s
450(h)S
475(e)S
500(c)S
525(k)S
550(A)S
575(l)S
600(l)S
625(o)S
650(c)S
675(a)S
700(t)S
725(i)S
750(o)S
775(n)S
800(\()S
825(a)S
850(p)S
875(,)S
925(off,)S
1050(&ablk,)S
1225(&)S
1250(a)S
1275(l)S
1300(e)S
1325(n)S
1350(\))S
1375(;)S
225 X
2050 Y
325 X(})s
225 X
2100 Y
325 X(unlock)s
500(a)S
525(n)S
550(o)S
575(d)S
600(e)S
625(;)S
225 X
2200 Y
325 X(*blockP)s
525(=)S
575(f)S
600(i)S
625(r)S
650(s)S
675(t)S
700(_)S
725(b)S
750(l)S
775(o)S
800(c)S
825(k)S
850(;)S
225 X
2250 Y
325 X(*wrLenP)s
525(=)S
575(wlen;)S
225 X
2300 Y(})s
225 X
2400 Y(/*)s
225 X
2450 Y
250(*)S
300(Return)S
475(offset)S
650(where)S
800(next)S
925(allocated)S
1175(block)S
1325(appears)S
1525(in)S
1600(the)S
1700(given)S
225 X
2500 Y
250(*)S
300(range,)S
475(or)S
550(-1)S
625(if)S
700(none.)S
225 X
2550 Y
250(*/)S
225 X
2600 Y(off_t)s
225 X
2650 Y(e)s
250(f)S
275(s)S
300(_)S
325(N)S
350(e)S
375(x)S
400(t)S
425(B)S
450(l)S
475(o)S
500(c)S
525(k)S
550(\()S
575(v)S
600(p)S
625(,)S
675(off,)S
800(len\))S
225 X
2700 Y({)s
225 X
2750 Y
325 X(ap)s
400(=)S
450(E)S
475(V)S
500(T)S
525(O)S
550(A)S
575(\()S
600(v)S
625(p)S
650(\))S
675(;)S
225 X
2800 Y
325 X(read-lock)s
575(anode)S
725(allocation)S
1000(info;)S
225 X
2900 Y
325 X(if)s
400(\(len)S
525(==)S
600(0\))S
225 X
2950 Y
425 X(len)s
525(=)S
575(distance)S
800(from)S
925(off)S
1025(to)S
1100(EOF;)S
225 X
3050 Y
325 X(C)s
350(h)S
375(e)S
400(c)S
425(k)S
450(A)S
475(l)S
500(l)S
525(o)S
550(c)S
575(a)S
600(t)S
625(i)S
650(o)S
675(n)S
700(\()S
725(a)S
750(p)S
775(,)S
825(off,)S
950(&ablk,)S
1125(&)S
1150(a)S
1175(l)S
1200(e)S
1225(n)S
1250(\))S
1275(;)S
225 X
3220 Y
0.0 10 10 f.H ft(Lewis)s
2020 X(P)s
2047(a)S
2070(g)S
2093(e)S
2116( )S
2128(1)S
2151(7)S
3300 Y
showpage
PageState6269 restore

%%PageFonts: Helvetica Courier
%%Page: label 18
%%PageFonts: (atend)
/PageState6269 save def
home

0.000000 setgray
%%IncludeFont: Helvetica

/Helvetica /Helvetica-8 roman-8-mappings AddRoman-8
/f.H /Helvetica-8 findfont def

0.0 10 10 f.H ft
1.0000 setlinewidth
[] 0 setdash

225 X
200 Y(OSF-RFC 75.0)s
983 X(E)s
1011(p)S
1034(i)S
1043(s)S
1064(o)S
1087(d)S
1110(e)S
1133( )S
1145(V)S
1173(M)S
1208( )S
1220(I)S
1232(n)S
1255(t)S
1267(e)S
1290(g)S
1313(r)S
1327(a)S
1350(t)S
1362(i)S
1371(o)S
1394(n)S
1923 X(O)s
1955(c)S
1976(t)S
1988(o)S
2011(b)S
2034(e)S
2057(r)S
2071( )S
2083(1)S
2106(9)S
2129(9)S
2152(5)S
225 X
400 Y
325 X
%%IncludeFont: Courier

/Courier /Courier-8 roman-8-mappings AddRoman-8
/f.CW /Courier-8 findfont def

0.0 10 10 f.CW ft(for)s
425(\(o)S
500(=)S
550(off;)S
675(ablk)S
800(==)S
875(HOLE)S
1000(&&)S
1075(o)S
1125(<)S
1175(off)S
1275(+)S
1325(len;)S
1450(o)S
1500(+=)S
1575(alen\))S
225 X
450 Y
425 X(C)s
450(h)S
475(e)S
500(c)S
525(k)S
550(A)S
575(l)S
600(l)S
625(o)S
650(c)S
675(a)S
700(t)S
725(i)S
750(o)S
775(n)S
800(\()S
825(a)S
850(p)S
875(,)S
925(off,)S
1050(&ablk,)S
1225(&)S
1250(a)S
1275(l)S
1300(e)S
1325(n)S
1350(\))S
1375(;)S
225 X
550 Y
325 X(unlock)s
500(a)S
525(n)S
550(o)S
575(d)S
600(e)S
625(;)S
225 X
600 Y
325 X(return)s
500(\(ablk)S
650(==)S
725(HOLE)S
850(?)S
900(-1)S
975(:)S
1025(o\);)S
225 X
650 Y(})s
225 X
800 Y(/*)s
225 X
850 Y
250(*)S
300(Like)S
425(e)S
450(f)S
475(s)S
500(_)S
525(N)S
550(e)S
575(x)S
600(t)S
625(B)S
650(l)S
675(o)S
700(c)S
725(k)S
750(,)S
800(but)S
900(finds)S
1050(next)S
1175(writable)S
1400(b)S
1425(l)S
1450(o)S
1475(c)S
1500(k)S
1525(.)S
225 X
900 Y
250(*/)S
225 X
950 Y(off_t)s
375(e)S
400(f)S
425(s)S
450(_)S
475(N)S
500(e)S
525(x)S
550(t)S
575(W)S
600(r)S
625(i)S
650(t)S
675(a)S
700(b)S
725(l)S
750(e)S
775(B)S
800(l)S
825(o)S
850(c)S
875(k)S
900(\()S
925(v)S
950(p)S
975(,)S
1025(off,)S
1150(len\))S
225 X
1000 Y({)s
225 X
1050 Y
325 X(/*)s
400(Do)S
475(the)S
575(obvious)S
775(*/)S
225 X
1100 Y(})s
225 X
1200 Y(/*)s
225 X
1250 Y
250(*)S
300(Convert)S
500(vnode)S
650(to)S
725(whatever)S
950(storage)S
1150(type)S
1275(is)S
1350(the)S
1450("best")S
1625(fit)S
225 X
1300 Y
250(*)S
300(for)S
400(the)S
500(specified)S
750(l)S
775(e)S
800(n)S
825(g)S
850(t)S
875(h)S
900(.)S
225 X
1350 Y
250(*/)S
225 X
1450 Y(/*)s
225 X
1500 Y
250(*)S
300(Table)S
450(of)S
525(conversion)S
800(f)S
825(u)S
850(n)S
875(c)S
900(t)S
925(i)S
950(o)S
975(n)S
1000(s)S
225 X
1550 Y
250(*/)S
225 X
1600 Y(#define)s
425(NALLOCTYPES)S
825 X(4)s
1000 X(/*)s
1075(EMPTY,)S
1250(INLINE,)S
1450(FRAGS,)S
1625(BLOCKS)S
1800(*/)S
225 X
1650 Y(static)s
400(\()S
425(*)S
450(p)S
475(r)S
500(o)S
525(m)S
550(o)S
575(t)S
600(e)S
625(_)S
650(f)S
675(u)S
700(n)S
725(c)S
750([)S
775(N)S
800(A)S
825(L)S
850(L)S
875(O)S
900(C)S
925(T)S
950(Y)S
975(P)S
1000(E)S
1025(S)S
1050(])S
1075([)S
1100(N)S
1125(A)S
1150(L)S
1175(L)S
1200(O)S
1225(C)S
1250(T)S
1275(Y)S
1300(P)S
1325(E)S
1350(S)S
1375(])S
1400(\))S
225 X
1700 Y
400 X(\(vnode_t)s
625(*vp,)S
750(int)S
850(len\))S
975(=)S
1025({)S
225 X
1750 Y
325 X(...)s
225 X
1800 Y(};)s
225 X
1900 Y(/*)s
225 X
1950 Y
250(*)S
300(Convert)S
500(storage)S
700(class)S
850(of)S
925(vp)S
1000(if)S
1075(necessary)S
1325(so)S
1400(that)S
1525(it)S
1600(can)S
1700(grow)S
1825(to)S
225 X
2000 Y
250(*)S
300(desired_len.)S
650(In)S
725(this)S
850(function,)S
1100(we)S
1175(are)S
1275(only)S
1400(concerned)S
1650(with)S
1775(c)S
1800(o)S
1825(p)S
1850(y)S
1875(i)S
1900(n)S
1925(g)S
225 X
2050 Y
250(*)S
300(whatever)S
525(data)S
650(the)S
750(file)S
875(already)S
1075(contains,)S
1325(e.g.,)S
1475(from)S
1600(fragments)S
1850(to)S
225 X
2100 Y
250(*)S
300(blocks,)S
500(and)S
600(updating)S
825(the)S
925(anode.)S
1125(We)S
1200(do)S
1275(not)S
1375(do)S
1450(any)S
1550(invalidate)S
1825(any)S
225 X
2150 Y
250(*)S
300(pages)S
450(here)S
575(or)S
650(do)S
725(any)S
825(truncation.)S
1150(After)S
1300(doing)S
1450(the)S
1550(n)S
1575(e)S
1600(c)S
1625(e)S
1650(s)S
1675(s)S
1700(a)S
1725(r)S
1750(y)S
225 X
2200 Y
250(*)S
300(conversion,)S
600(we)S
675(set)S
775(the)S
875(length)S
1050(to)S
1125(d)S
1150(e)S
1175(s)S
1200(i)S
1225(r)S
1250(e)S
1275(d)S
1300(_)S
1325(l)S
1350(e)S
1375(n)S
1400(.)S
225 X
2250 Y
250(*)S
225 X
2300 Y
250(*)S
300(While)S
450(changing)S
675(the)S
775(disk)S
900(storage)S
1100(for)S
1200(a)S
1250(file,)S
1400(we)S
1475(must)S
1600(p)S
1625(r)S
1650(e)S
1675(v)S
1700(e)S
1725(n)S
1750(t)S
225 X
2350 Y
250(*)S
300(any)S
400(I/O)S
500(that)S
625(could)S
775(result)S
950(in)S
1025(stale)S
1175(data,)S
1325(either)S
1500(on)S
1575(disk)S
1700(or)S
225 X
2400 Y
250(*)S
300(in)S
375(core.)S
550(On)S
625(SunOS,)S
800(this)S
925(is)S
1000(done)S
1125(by)S
1200(locking)S
1400(the)S
1500(r)S
1525(e)S
1550(l)S
1575(e)S
1600(v)S
1625(a)S
1650(n)S
1675(t)S
225 X
2450 Y
250(*)S
300(pages;)S
475(on)S
550(AIX,)S
675(we)S
750(must)S
875(flush)S
1025(all)S
1125(the)S
1225(data)S
1350(to)S
1425(disk)S
1550(b)S
1575(e)S
1600(f)S
1625(o)S
1650(r)S
1675(e)S
225 X
2500 Y
250(*)S
300(p)S
325(r)S
350(o)S
375(c)S
400(e)S
425(e)S
450(d)S
475(i)S
500(n)S
525(g)S
550(.)S
225 X
2550 Y
250(*)S
225 X
2600 Y
250(*)S
300(LOCKS)S
450(--)S
525(vnode's)S
725(file)S
850(lock)S
975(should)S
1150(be)S
1225(write-locked)S
1550(on)S
1625(e)S
1650(n)S
1675(t)S
1700(r)S
1725(y)S
1750(.)S
225 X
2650 Y
250(*/)S
225 X
2700 Y(e)s
250(f)S
275(s)S
300(_)S
325(P)S
350(r)S
375(o)S
400(m)S
425(o)S
450(t)S
475(e)S
500(\()S
525(v)S
550(p)S
575(,)S
625(d)S
650(e)S
675(s)S
700(i)S
725(r)S
750(e)S
775(d)S
800(_)S
825(l)S
850(e)S
875(n)S
900(\))S
225 X
2750 Y({)s
225 X
2800 Y
325 X(dstType)s
525(=)S
575(s)S
600(m)S
625(a)S
650(l)S
675(l)S
700(e)S
725(s)S
750(t)S
775(_)S
800(c)S
825(l)S
850(a)S
875(s)S
900(s)S
925(_)S
950(t)S
975(h)S
1000(a)S
1025(t)S
1050(_)S
1075(c)S
1100(o)S
1125(n)S
1150(t)S
1175(a)S
1200(i)S
1225(n)S
1250(s)S
1275(\()S
1300(d)S
1325(e)S
1350(s)S
1375(i)S
1400(r)S
1425(e)S
1450(d)S
1475(_)S
1500(l)S
1525(e)S
1550(n)S
1575(\))S
1600(;)S
225 X
2850 Y
325 X(srcType)s
525(=)S
575(s)S
600(t)S
625(o)S
650(r)S
675(a)S
700(g)S
725(e)S
750(_)S
775(c)S
800(l)S
825(a)S
850(s)S
875(s)S
900(\()S
925(v)S
950(p)S
975(\))S
1000(;)S
225 X
2900 Y
325 X(if)s
400(\(srcType)S
625(!=)S
700(d)S
725(s)S
750(t)S
775(T)S
800(y)S
825(p)S
850(e)S
875(\))S
225 X
2950 Y
425 X(\()s
450(*)S
475(p)S
500(r)S
525(o)S
550(m)S
575(o)S
600(t)S
625(e)S
650(_)S
675(f)S
700(u)S
725(n)S
750(c)S
775([)S
800(s)S
825(r)S
850(c)S
875(T)S
900(y)S
925(p)S
950(e)S
975(])S
1000([)S
1025(d)S
1050(s)S
1075(t)S
1100(T)S
1125(y)S
1150(p)S
1175(e)S
1200(])S
1225(\))S
1250(\()S
1275(v)S
1300(p)S
1325(,)S
1375(d)S
1400(e)S
1425(s)S
1450(i)S
1475(r)S
1500(e)S
1525(d)S
1550(_)S
1575(l)S
1600(e)S
1625(n)S
1650(\))S
1675(;)S
225 X
3000 Y(})s
225 X
3100 Y(/*)s
225 X
3220 Y
0.0 10 10 f.H ft(Lewis)s
2020 X(P)s
2047(a)S
2070(g)S
2093(e)S
2116( )S
2128(1)S
2151(8)S
3300 Y
showpage
PageState6269 restore

%%PageFonts: Helvetica Courier
%%Page: label 19
%%PageFonts: (atend)
/PageState6269 save def
home

0.000000 setgray
%%IncludeFont: Helvetica

/Helvetica /Helvetica-8 roman-8-mappings AddRoman-8
/f.H /Helvetica-8 findfont def

0.0 10 10 f.H ft
1.0000 setlinewidth
[] 0 setdash

225 X
200 Y(OSF-RFC 75.0)s
983 X(E)s
1011(p)S
1034(i)S
1043(s)S
1064(o)S
1087(d)S
1110(e)S
1133( )S
1145(V)S
1173(M)S
1208( )S
1220(I)S
1232(n)S
1255(t)S
1267(e)S
1290(g)S
1313(r)S
1327(a)S
1350(t)S
1362(i)S
1371(o)S
1394(n)S
1923 X(O)s
1955(c)S
1976(t)S
1988(o)S
2011(b)S
2034(e)S
2057(r)S
2071( )S
2083(1)S
2106(9)S
2129(9)S
2152(5)S
225 X
400 Y
%%IncludeFont: Courier

/Courier /Courier-8 roman-8-mappings AddRoman-8
/f.CW /Courier-8 findfont def

0.0 10 10 f.CW ft
250(*)S
300(Check)S
450(whether)S
650(vnode)S
800(has)S
900(any)S
1000(holes)S
1150(or)S
1225(COW)S
1325(blocks.)S
1550(We)S
1625(do)S
1700(this)S
225 X
450 Y
250(*)S
300(by)S
375(calculating)S
675(the)S
775(number)S
950(of)S
1025(blocks)S
1200(needed)S
1375(for)S
1475(a)S
1525(c)S
1550(o)S
1575(m)S
1600(p)S
1625(l)S
1650(e)S
1675(t)S
1700(e)S
1725(l)S
1750(y)S
225 X
500 Y
250(*)S
300(filled-in)S
550(file)S
675(of)S
750(this)S
875(length,)S
1075(and)S
1175(comparing)S
1425(that)S
1550(with)S
1675(the)S
225 X
550 Y
250(*)S
300(number)S
475(of)S
550(blocks)S
725(actually)S
950(a)S
975(l)S
1000(l)S
1025(o)S
1050(c)S
1075(a)S
1100(t)S
1125(e)S
1150(d)S
1175(.)S
225 X
600 Y
250(*/)S
225 X
650 Y(e)s
250(f)S
275(s)S
300(_)S
325(H)S
350(a)S
375(s)S
400(H)S
425(o)S
450(l)S
475(e)S
500(s)S
525(\()S
550(v)S
575(p)S
600(\))S
225 X
700 Y({)s
225 X
750 Y
325 X(if)s
400(\()S
425(i)S
450(n)S
475(-)S
500(l)S
525(i)S
550(n)S
575(e)S
600(\()S
625(v)S
650(p)S
675(\))S
700(\))S
225 X
800 Y
425 X(return)s
600(0;)S
225 X
850 Y
350 X(else)s
475(if)S
550(\()S
575(f)S
600(r)S
625(a)S
650(g)S
675(m)S
700(e)S
725(n)S
750(t)S
775(e)S
800(d)S
825(\()S
850(v)S
875(p)S
900(\))S
925(\))S
1025 X(/*)s
1100(it)S
1175(may)S
1275(be)S
1350(entirely)S
1575(COW)S
1675(*/)S
225 X
900 Y
425 X(return)s
600(\(fragment)S
850(is)S
925(C)S
950(O)S
975(W)S
1000(?)S
1025(\))S
1050(;)S
225 X
1000 Y
325 X(/*)s
400(compute)S
600(total)S
750(#)S
800(of)S
875(data)S
1000(&)S
1050(metadata)S
1275(blocks)S
1450(from)S
1575(length)S
1750(*/)S
225 X
1050 Y
325 X(data_blks)s
575(=)S
625(h)S
650(o)S
675(w)S
700(m)S
725(a)S
750(n)S
775(y)S
800(\()S
825(a)S
850(n)S
875(o)S
900(d)S
925(e)S
975(length,)S
1175(fs)S
1250(block)S
1400(s)S
1425(i)S
1450(z)S
1475(e)S
1500(\))S
1525(;)S
225 X
1100 Y
325 X(b)s
350(l)S
375(k)S
400(s)S
425(_)S
450(p)S
475(e)S
500(r)S
525(_)S
550(i)S
575(n)S
600(d)S
625(i)S
650(r)S
700(=)S
750(\(usable)S
950(space)S
1100(in)S
1175(indirect)S
1400(block\))S
1575(/)S
225 X
1150 Y
750 X(s)s
775(i)S
800(z)S
825(e)S
850(o)S
875(f)S
900(\()S
925(d)S
950(a)S
975(d)S
1000(d)S
1025(r)S
1050(_)S
1075(t)S
1100(\))S
1125(;)S
225 X
1250 Y
325 X(indir_blks)s
600(=)S
650(0;)S
825 X(/*)s
900(No.)S
1000(of)S
1075(indirect)S
1300(blocks)S
1475(used)S
1600(*/)S
225 X
1300 Y
325 X(uncovered)s
575(=)S
625(data_blks)S
875(-)S
925(\(number)S
1125(of)S
1200(direct)S
1375(b)S
1400(l)S
1425(o)S
1450(c)S
1475(k)S
1500(s)S
1525(\))S
1550(;)S
225 X
1400 Y
325 X(while)s
475(\(uncovered)S
750(>)S
800(0\))S
875({)S
225 X
1450 Y
425 X(indir_blks)s
700(+=)S
775(h)S
800(o)S
825(w)S
850(m)S
875(a)S
900(n)S
925(y)S
950(\()S
975(u)S
1000(n)S
1025(c)S
1050(o)S
1075(v)S
1100(e)S
1125(r)S
1150(e)S
1175(d)S
1200(,)S
1250(b)S
1275(l)S
1300(k)S
1325(s)S
1350(_)S
1375(p)S
1400(e)S
1425(r)S
1450(_)S
1475(i)S
1500(n)S
1525(d)S
1550(i)S
1575(r)S
1600(\))S
1625(;)S
225 X
1500 Y
425 X(uncovered)s
675(=)S
725(h)S
750(o)S
775(w)S
800(m)S
825(a)S
850(n)S
875(y)S
900(\()S
925(u)S
950(n)S
975(c)S
1000(o)S
1025(v)S
1050(e)S
1075(r)S
1100(e)S
1125(d)S
1150(,)S
1200(b)S
1225(l)S
1250(k)S
1275(s)S
1300(_)S
1325(p)S
1350(e)S
1375(r)S
1400(_)S
1425(i)S
1450(n)S
1475(d)S
1500(i)S
1525(r)S
1550(\))S
1600(-)S
1650(1;)S
225 X
1550 Y
425 X(/*)s
500(The)S
600(-1)S
675(is)S
750(for)S
850(the)S
950(1st)S
1050(block,)S
1225(which)S
1375(we)S
1450(leave)S
1600(uncovered)S
1850(*/)S
225 X
1600 Y
325 X(})s
225 X
1650 Y
325 X(return)s
500(\(#)S
575(of)S
650(allocated)S
900(blocks)S
1075(in)S
1150(vp)S
1225(!=)S
1300(data_blks)S
1550(+)S
1600(i)S
1625(n)S
1650(d)S
1675(i)S
1700(r)S
1725(_)S
1750(b)S
1775(l)S
1800(k)S
1825(s)S
1850(\))S
1875(;)S
225 X
1700 Y(})s
225 X
1800 Y(/*)s
225 X
1850 Y
250(*)S
300(Internal)S
525(i)S
550(n)S
575(t)S
600(e)S
625(r)S
650(f)S
675(a)S
700(c)S
725(e)S
750(s)S
225 X
1900 Y
250(*/)S
225 X
2000 Y(/*)s
225 X
2050 Y
250(*)S
300(C)S
325(h)S
350(e)S
375(c)S
400(k)S
425(A)S
450(l)S
475(l)S
500(o)S
525(c)S
550(a)S
575(t)S
600(i)S
625(o)S
650(n)S
700(returns)S
900(the)S
1000(disk)S
1125(address)S
1325(of)S
1400(the)S
1500(block)S
1650(at)S
1725(the)S
225 X
2100 Y
250(*)S
300(specified)S
550(offset)S
725(\(or)S
825(HOLE)S
950(if)S
1025(there)S
1175(is)S
1250(none\),)S
1425(and)S
1525(the)S
1625(l)S
1650(e)S
1675(n)S
1700(g)S
1725(t)S
1750(h)S
225 X
2150 Y
250(*)S
300(in)S
375(bytes)S
525(of)S
600(contiguous)S
875(storage)S
1075(starting)S
1300(at)S
1375(the)S
1475(offset.)S
1700(B)S
1725(l)S
1750(o)S
1775(c)S
1800(k)S
1825(s)S
225 X
2200 Y
250(*)S
300(are)S
400(only)S
525(considered)S
800(contiguous)S
1075(if)S
1150(they)S
1275(are)S
1375(of)S
1450(the)S
1550(same)S
1675(type)S
225 X
2250 Y
250(*)S
300(\(i.e.,)S
475(writable)S
700(or)S
775(read-only\).)S
1100(The)S
1200(returned)S
1425(length)S
1600(is)S
1675(r)S
1700(e)S
1725(a)S
1750(l)S
1775(l)S
1800(y)S
225 X
2300 Y
250(*)S
300(a)S
350(lower)S
500(bound)S
650(on)S
725(the)S
825(size)S
950(of)S
1025(the)S
1125(contiguous)S
1400(region,)S
1600(since)S
1750(the)S
225 X
2350 Y
250(*)S
300(function)S
525(stops)S
675(upon)S
800(reaching)S
1025(the)S
1125(end)S
1225(of)S
1300(the)S
1400(current)S
1600(a)S
1625(l)S
1650(l)S
1675(o)S
1700(c)S
1725(a)S
1750(t)S
1775(i)S
1800(o)S
1825(n)S
225 X
2400 Y
250(*)S
300(b)S
325(l)S
350(o)S
375(c)S
400(k)S
425(.)S
225 X
2450 Y
250(*)S
225 X
2500 Y
250(*)S
300(Should)S
475(be)S
550(called)S
725(with)S
850(the)S
950(ap)S
1025(allocation)S
1300(info)S
1425(read-locked)S
1725(\(at)S
225 X
2550 Y
250(*)S
300(l)S
325(e)S
350(a)S
375(s)S
400(t)S
425(\))S
450(.)S
225 X
2600 Y
250(*/)S
225 X
2650 Y(C)s
250(h)S
275(e)S
300(c)S
325(k)S
350(A)S
375(l)S
400(l)S
425(o)S
450(c)S
475(a)S
500(t)S
525(i)S
550(o)S
575(n)S
600(\()S
625(a)S
650(p)S
675(,)S
725(off,)S
850(blkP,)S
1000(a)S
1025(l)S
1050(e)S
1075(n)S
1100(P)S
1125(\))S
225 X
2700 Y({)s
225 X
2750 Y
325 X(if)s
400(\(file)S
550(is)S
625(fragmented\))S
925({)S
225 X
2800 Y
425 X(handle)s
600(fragmented)S
875(case)S
1000(separately)S
1275(\()S
1300(b)S
1325(l)S
1350(e)S
1375(c)S
1400(h)S
1425(\))S
1450(;)S
225 X
2850 Y
425 X(r)s
450(e)S
475(t)S
500(u)S
525(r)S
550(n)S
575(;)S
225 X
2900 Y
325 X(})s
225 X
3000 Y
325 X(lbn)s
425(=)S
475(file)S
600(system)S
775(block)S
925(containing)S
1200(off;)S
225 X
3050 Y
325 X(if)s
400(\(lbn)S
525(is)S
600(a)S
650(direct)S
825(block\))S
1000({)S
225 X
3100 Y
425 X(startAlloc)s
700(=)S
750(&)S
775(a)S
800(p)S
825(-)S
850(>)S
875(d)S
900(b)S
925([)S
950(l)S
975(b)S
1000(n)S
1025(])S
1050(;)S
225 X
3220 Y
0.0 10 10 f.H ft(Lewis)s
2020 X(P)s
2047(a)S
2070(g)S
2093(e)S
2116( )S
2128(1)S
2151(9)S
3300 Y
showpage
PageState6269 restore

%%PageFonts: Helvetica Courier
%%Page: label 20
%%PageFonts: (atend)
/PageState6269 save def
home

0.000000 setgray
%%IncludeFont: Helvetica

/Helvetica /Helvetica-8 roman-8-mappings AddRoman-8
/f.H /Helvetica-8 findfont def

0.0 10 10 f.H ft
1.0000 setlinewidth
[] 0 setdash

225 X
200 Y(OSF-RFC 75.0)s
983 X(E)s
1011(p)S
1034(i)S
1043(s)S
1064(o)S
1087(d)S
1110(e)S
1133( )S
1145(V)S
1173(M)S
1208( )S
1220(I)S
1232(n)S
1255(t)S
1267(e)S
1290(g)S
1313(r)S
1327(a)S
1350(t)S
1362(i)S
1371(o)S
1394(n)S
1923 X(O)s
1955(c)S
1976(t)S
1988(o)S
2011(b)S
2034(e)S
2057(r)S
2071( )S
2083(1)S
2106(9)S
2129(9)S
2152(5)S
225 X
400 Y
425 X
%%IncludeFont: Courier

/Courier /Courier-8 roman-8-mappings AddRoman-8
/f.CW /Courier-8 findfont def

0.0 10 10 f.CW ft(endAlloc)s
650(=)S
700(&ap->db[#)S
950(of)S
1025(direct)S
1200(b)S
1225(l)S
1250(o)S
1275(c)S
1300(k)S
1325(s)S
1350(])S
1375(;)S
225 X
450 Y
325 X(})s
375(else)S
500({)S
225 X
500 Y
425 X(allocBlk)s
650(=)S
700(G)S
725(e)S
750(t)S
775(A)S
800(l)S
825(l)S
850(o)S
875(c)S
900(a)S
925(t)S
950(i)S
975(o)S
1000(n)S
1025(B)S
1050(l)S
1075(o)S
1100(c)S
1125(k)S
1150(\()S
1175(a)S
1200(p)S
1225(,)S
1275(lbn,)S
1400(&)S
1425(n)S
1450(e)S
1475(x)S
1500(t)S
1525(_)S
1550(l)S
1575(b)S
1600(n)S
1625(\))S
1650(;)S
225 X
550 Y
425 X(if)s
500(\(allocBlk)S
750(==)S
825(NULL\))S
975({)S
1200 X(/*)s
1275(No)S
1350(allocation)S
1625(block)S
1775(*/)S
225 X
600 Y
525 X(*blkP)s
675(=)S
725(HOLE;)S
225 X
650 Y
525 X(*alenP)s
700(=)S
750(f)S
775(s)S
800(b)S
825(t)S
850(o)S
875(b)S
900(\()S
925(n)S
950(e)S
975(x)S
1000(t)S
1025(_)S
1050(l)S
1075(b)S
1100(n)S
1150(-)S
1200(lbn\);)S
225 X
700 Y
525 X(r)s
550(e)S
575(t)S
600(u)S
625(r)S
650(n)S
675(;)S
225 X
750 Y
425 X(})s
225 X
800 Y
425 X(startAlloc)s
700(=)S
750(address)S
950(of)S
1025(entry)S
1175(for)S
1275(lbn;)S
225 X
850 Y
425 X(endAlloc)s
650(=)S
700(address)S
900(of)S
975(end)S
1075(of)S
1150(allocation)S
1425(block)S
1575(\(or)S
1675(EOF\);)S
225 X
900 Y
325 X(})s
225 X
950 Y
325 X(first_blk)s
575(=)S
625(*)S
650(s)S
675(t)S
700(a)S
725(r)S
750(t)S
775(A)S
800(l)S
825(l)S
850(o)S
875(c)S
900(;)S
225 X
1000 Y
325 X(for)s
425(\(p)S
500(=)S
550(&)S
575(s)S
600(t)S
625(a)S
650(r)S
675(t)S
700(A)S
725(l)S
750(l)S
775(o)S
800(c)S
825([)S
850(1)S
875(])S
900(;)S
950(p)S
1000(!=)S
1075(endAlloc;)S
1325(p++\))S
1450({)S
225 X
1050 Y
425 X(if)s
500(\()S
525(!)S
550(s)S
575(a)S
600(m)S
625(e)S
650(_)S
675(t)S
700(y)S
725(p)S
750(e)S
775(\()S
800(f)S
825(i)S
850(r)S
875(s)S
900(t)S
925(_)S
950(b)S
975(l)S
1000(k)S
1025(,)S
1075(*p\)\))S
225 X
1100 Y
525 X(break;)s
225 X
1150 Y
325 X(})s
225 X
1200 Y
325 X(*blkP)s
475(=)S
525(f)S
550(i)S
575(r)S
600(s)S
625(t)S
650(_)S
675(b)S
700(l)S
725(k)S
750(;)S
225 X
1250 Y
325 X(*alenP)s
500(=)S
550(p)S
600(-)S
650(f)S
675(i)S
700(r)S
725(s)S
750(t)S
775(_)S
800(b)S
825(l)S
850(k)S
875(;)S
225 X
1300 Y
325 X(if)s
400(\(lbn)S
525(is)S
600(not)S
700(a)S
750(direct)S
925(b)S
950(l)S
975(o)S
1000(c)S
1025(k)S
1050(\))S
225 X
1350 Y
425 X(R)s
450(e)S
475(l)S
500(e)S
525(a)S
550(s)S
575(e)S
600(A)S
625(l)S
650(l)S
675(o)S
700(c)S
725(a)S
750(t)S
775(i)S
800(o)S
825(n)S
850(B)S
875(l)S
900(o)S
925(c)S
950(k)S
975(\()S
1000(a)S
1025(l)S
1050(l)S
1075(o)S
1100(c)S
1125(B)S
1150(l)S
1175(k)S
1200(\))S
1225(;)S
225 X
1400 Y(})s
225 X
1500 Y(/*)s
225 X
1550 Y
250(*)S
300(CreateBlocks)S
625(allocates)S
875(a)S
925(set)S
1025(of)S
1100(contiguous)S
1375(disk)S
1500(blocks)S
1675(for)S
1775(the)S
225 X
1600 Y
250(*)S
300(anode)S
450(at)S
525(the)S
625(specified)S
875(offset.)S
1100(lenP)S
1225(is)S
1300(an)S
1375(in-out)S
1550(p)S
1575(a)S
1600(r)S
1625(a)S
1650(m)S
1675(e)S
1700(t)S
1725(e)S
1750(r)S
1775(.)S
225 X
1650 Y
250(*)S
300(On)S
375(entry,)S
550(it)S
625(contains)S
850(the)S
950(number)S
1125(of)S
1200(bytes)S
1350(of)S
1425(storage)S
1625(d)S
1650(e)S
1675(s)S
1700(i)S
1725(r)S
1750(e)S
1775(d)S
1800(.)S
225 X
1700 Y
250(*)S
300(If)S
375(this)S
500(much)S
625(contiguous)S
900(space)S
1050(cannot)S
1225(be)S
1300(found,)S
1475(CreateBlocks)S
1800(may)S
225 X
1750 Y
250(*)S
300(allocate)S
525(to)S
600(a)S
650(smaller)S
850(amount)S
1025(\(but)S
1150(not)S
1250(zero\);)S
1425(the)S
1525(caller)S
1700(is)S
225 X
1800 Y
250(*)S
300(responsible)S
600(for)S
700(calling)S
900(CreateBlocks)S
1225(as)S
1300(many)S
1425(times)S
1575(as)S
1650(n)S
1675(e)S
1700(c)S
1725(e)S
1750(s)S
1775(s)S
1800(a)S
1825(r)S
1850(y)S
225 X
1850 Y
250(*)S
300(until)S
450(all)S
550(the)S
650(allocation)S
925(is)S
1000(p)S
1025(e)S
1050(r)S
1075(f)S
1100(o)S
1125(r)S
1150(m)S
1175(e)S
1200(d)S
1225(.)S
225 X
1900 Y
250(*)S
225 X
1950 Y
250(*)S
300(This)S
425(routine)S
625(handles)S
825(both)S
950(blocked)S
1150(and)S
1250(fragmented)S
1525(files.)S
1725(H)S
1750(o)S
1775(w)S
1800(e)S
1825(v)S
1850(e)S
1875(r)S
1900(,)S
225 X
2000 Y
250(*)S
300(it)S
375(does)S
500(not)S
600(do)S
675(p)S
700(r)S
725(o)S
750(m)S
775(o)S
800(t)S
825(i)S
850(o)S
875(n)S
900(.)S
225 X
2050 Y
250(*/)S
225 X
2100 Y(C)s
250(r)S
275(e)S
300(a)S
325(t)S
350(e)S
375(B)S
400(l)S
425(o)S
450(c)S
475(k)S
500(s)S
525(\()S
550(a)S
575(p)S
600(,)S
650(tran,)S
800(off,)S
925(lenP\))S
225 X
2150 Y({)s
225 X
2200 Y
300(allocate)S
525(up)S
600(to)S
675(*lenP)S
825(of)S
900(contiguous)S
1175(disk)S
1300(s)S
1325(p)S
1350(a)S
1375(c)S
1400(e)S
1425(;)S
225 X
2250 Y
300(update)S
475(ap)S
550(&)S
600(start)S
750(undo-zero)S
1000(t)S
1025(r)S
1050(a)S
1075(n)S
1100(s)S
1125(a)S
1150(c)S
1175(t)S
1200(i)S
1225(o)S
1250(n)S
1275(;)S
225 X
2300 Y
300(e)S
325(p)S
350(i)S
375(a)S
400(_)S
425(R)S
450(e)S
475(c)S
500(o)S
525(r)S
550(d)S
575(U)S
600(n)S
625(d)S
650(o)S
675(Z)S
700(e)S
725(r)S
750(o)S
775(\()S
800(.)S
825(.)S
850(.)S
875(\))S
900(;)S
225 X
2350 Y
300(update)S
475(*)S
500(l)S
525(e)S
550(n)S
575(P)S
600(;)S
225 X
2400 Y(})s
225 X
2500 Y(/*)s
225 X
2550 Y
250(*)S
300(CopyBlocks)S
575(produces)S
800(writable)S
1025(copies)S
1200(of)S
1275(a)S
1325(set)S
1425(of)S
1500(read-only)S
1750(disk)S
225 X
2600 Y
250(*)S
300(blocks.)S
525(lenP)S
650(has)S
750(the)S
850(same)S
975(i)S
1000(n)S
1025(t)S
1050(e)S
1075(r)S
1100(p)S
1125(r)S
1150(e)S
1175(t)S
1200(a)S
1225(t)S
1250(i)S
1275(o)S
1300(n)S
1350(as)S
1425(for)S
1525(C)S
1550(r)S
1575(e)S
1600(a)S
1625(t)S
1650(e)S
1675(B)S
1700(l)S
1725(o)S
1750(c)S
1775(k)S
1800(s)S
1825(.)S
225 X
2650 Y
250(*)S
300(The)S
400(read-only)S
650(blocks)S
825(are)S
925(guaranteed)S
1200(to)S
1275(be)S
1350(contiguous,)S
1650(and)S
1750(the)S
1850(new)S
225 X
2700 Y
250(*)S
300(writable)S
525(copies)S
700(must)S
825(be)S
900(contiguous)S
1175(also.)S
225 X
2750 Y
250(*)S
225 X
2800 Y
250(*)S
300(This)S
425(routine)S
625(presents)S
850(some)S
975(tricky)S
1150(problems.)S
1425(Initializing)S
1750(the)S
1850(new)S
225 X
2850 Y
250(*)S
300(copies)S
475(s)S
500(y)S
525(n)S
550(c)S
575(h)S
600(r)S
625(o)S
650(n)S
675(o)S
700(u)S
725(s)S
750(l)S
775(y)S
825(here)S
950(is)S
1025(easy)S
1150(but)S
1250(probably)S
1475(slow.)S
1650(If)S
1725(we)S
1800(do)S
1875(the)S
225 X
2900 Y
250(*)S
300(write)S
450(a)S
475(s)S
500(y)S
525(n)S
550(c)S
575(h)S
600(r)S
625(o)S
650(n)S
675(o)S
700(u)S
725(s)S
750(l)S
775(y)S
800(,)S
850(we)S
925(must)S
1050(make)S
1175(sure)S
1300(there)S
1450(are)S
1550(pages)S
1700(c)S
1725(o)S
1750(n)S
1775(t)S
1800(a)S
1825(i)S
1850(n)S
1875(i)S
1900(n)S
1925(g)S
225 X
2950 Y
250(*)S
300(the)S
400(data)S
525(so)S
600(that)S
725(we)S
800(don't)S
950(read)S
1075(from)S
1200(the)S
1300(disk)S
1425(until)S
1575(the)S
1675(new)S
1775(b)S
1800(l)S
1825(o)S
1850(c)S
1875(k)S
1900(s)S
225 X
3000 Y
250(*)S
300(are)S
400(i)S
425(n)S
450(i)S
475(t)S
500(i)S
525(a)S
550(l)S
575(i)S
600(z)S
625(e)S
650(d)S
675(.)S
225 X
3050 Y
250(*/)S
225 X
3100 Y(C)s
250(o)S
275(p)S
300(y)S
325(B)S
350(l)S
375(o)S
400(c)S
425(k)S
450(s)S
475(\()S
500(a)S
525(p)S
550(,)S
600(tran,)S
750(off,)S
875(lenP\))S
225 X
3220 Y
0.0 10 10 f.H ft(Lewis)s
2020 X(P)s
2047(a)S
2070(g)S
2093(e)S
2116( )S
2128(2)S
2151(0)S
3300 Y
showpage
PageState6269 restore

%%PageFonts: Helvetica Courier
%%Page: label 21
%%PageFonts: (atend)
/PageState6269 save def
home

0.000000 setgray
%%IncludeFont: Helvetica

/Helvetica /Helvetica-8 roman-8-mappings AddRoman-8
/f.H /Helvetica-8 findfont def

0.0 10 10 f.H ft
1.0000 setlinewidth
[] 0 setdash

225 X
200 Y(OSF-RFC 75.0)s
983 X(E)s
1011(p)S
1034(i)S
1043(s)S
1064(o)S
1087(d)S
1110(e)S
1133( )S
1145(V)S
1173(M)S
1208( )S
1220(I)S
1232(n)S
1255(t)S
1267(e)S
1290(g)S
1313(r)S
1327(a)S
1350(t)S
1362(i)S
1371(o)S
1394(n)S
1923 X(O)s
1955(c)S
1976(t)S
1988(o)S
2011(b)S
2034(e)S
2057(r)S
2071( )S
2083(1)S
2106(9)S
2129(9)S
2152(5)S
225 X
400 Y
%%IncludeFont: Courier

/Courier /Courier-8 roman-8-mappings AddRoman-8
/f.CW /Courier-8 findfont def

0.0 10 10 f.CW ft({)s
225 X
450 Y(#ifdef)s
400(A)S
425(F)S
450(S)S
475(_)S
500(S)S
525(U)S
550(N)S
575(O)S
600(S)S
625(5)S
650(_)S
675(E)S
700(N)S
725(V)S
225 X
500 Y
300(...)S
225 X
550 Y
300(e)S
325(p)S
350(i)S
375(a)S
400(_)S
425(R)S
450(e)S
475(c)S
500(o)S
525(r)S
550(d)S
575(U)S
600(n)S
625(d)S
650(o)S
675(Z)S
700(e)S
725(r)S
750(o)S
775(\()S
800(.)S
825(.)S
850(.)S
875(\))S
900(;)S
225 X
600 Y
300(...)S
225 X
650 Y
300(e)S
325(p)S
350(i)S
375(a)S
400(_)S
425(S)S
450(t)S
475(r)S
500(a)S
525(t)S
550(e)S
575(g)S
600(y)S
625(\()S
650(.)S
675(.)S
700(.)S
725(\))S
750(;)S
225 X
700 Y
300(...)S
225 X
750 Y(#endif)s
225 X
800 Y(})s
225 X
900 Y(/*)s
225 X
950 Y
250(*)S
300(Return)S
475(a)S
525(pointer)S
725(to)S
800(the)S
900(allocation)S
1175(block)S
1325(that)S
1450(covers)S
1625(l)S
1650(o)S
1675(g)S
1700(i)S
1725(c)S
1750(a)S
1775(l)S
225 X
1000 Y
250(*)S
300(block)S
450(blkno,)S
625(or)S
700(NULL)S
825(if)S
900(none)S
1025(exists.)S
1250(We)S
1325(search)S
1500(through)S
1700(the)S
225 X
1050 Y
250(*)S
300(appropriate)S
600(indirect)S
825(block)S
975(tree)S
1100(until)S
1250(we)S
1325(find)S
1450(the)S
1550(block)S
1700(that)S
225 X
1100 Y
250(*)S
300(we)S
375(want)S
500(or)S
575(a)S
625(hole.)S
800(*nextBlkP)S
1050(is)S
1125(set)S
1225(to)S
1300(the)S
1400(lowest)S
1575(f)S
1600(o)S
1625(l)S
1650(l)S
1675(o)S
1700(w)S
1725(i)S
1750(n)S
1775(g)S
225 X
1150 Y
250(*)S
300(block)S
450(for)S
550(which)S
700(an)S
775(allocation)S
1050(block)S
1200(may)S
1300(exist,)S
1475(i.e.,)S
1625(the)S
1725(next)S
225 X
1200 Y
250(*)S
300(possible)S
525(leaf)S
650(in)S
725(the)S
825(tree.)S
1000(We)S
1075(won't)S
1225(actually)S
1450(verify)S
1625(that)S
1750(the)S
225 X
1250 Y
250(*)S
300(leaf)S
425(exists)S
600(in)S
675(all)S
775(cases,)S
950(e.g.,)S
1100(if)S
1175(it)S
1250(is)S
1325(the)S
1425(next)S
1550(tree,)S
1700(so)S
225 X
1300 Y
250(*)S
300(this)S
425(may)S
525(be)S
600(an)S
675(u)S
700(n)S
725(d)S
750(e)S
775(r)S
800(e)S
825(s)S
850(t)S
875(i)S
900(m)S
925(a)S
950(t)S
975(e)S
1000(.)S
225 X
1350 Y
250(*/)S
225 X
1400 Y(daddr_t)s
425(*)S
225 X
1450 Y(G)s
250(e)S
275(t)S
300(A)S
325(l)S
350(l)S
375(o)S
400(c)S
425(a)S
450(t)S
475(i)S
500(o)S
525(n)S
550(B)S
575(l)S
600(o)S
625(c)S
650(k)S
675(\()S
700(a)S
725(p)S
750(,)S
800(blkno,)S
975(n)S
1000(e)S
1025(x)S
1050(t)S
1075(B)S
1100(l)S
1125(k)S
1150(P)S
1175(\))S
225 X
1500 Y({)s
225 X
1550 Y
325 X(calculate)s
575(root)S
700(of)S
775(indirect)S
1000(tree)S
1125(from)S
1250(b)S
1275(l)S
1300(k)S
1325(n)S
1350(o)S
1375(;)S
225 X
1600 Y
325 X(calculate)s
575(span,)S
725(etc.;)S
225 X
1650 Y
325 X(iterate)s
525(from)S
650(root)S
775(to)S
850(leaf:)S
1000({)S
225 X
1700 Y
425 X(get)s
525(allocation)S
800(block)S
950(&)S
1000(find)S
1125(entry)S
1275(c)S
1300(o)S
1325(r)S
1350(r)S
1375(e)S
1400(s)S
1425(p)S
1450(o)S
1475(n)S
1500(d)S
1525(i)S
1550(n)S
1575(g)S
1625(to)S
1700(b)S
1725(l)S
1750(k)S
1775(n)S
1800(o)S
1825(;)S
225 X
1750 Y
425 X(if)s
500(\(entry)S
675(is)S
750(a)S
800(hole\))S
950({)S
225 X
1800 Y
525 X(next_entry)s
800(=)S
850(first)S
1000(non-hole)S
1225(following)S
1475(e)S
1500(n)S
1525(t)S
1550(r)S
1575(y)S
1600(;)S
225 X
1850 Y
525 X(if)s
600(\(suitable)S
850(next_entry)S
1125(not)S
1225(f)S
1250(o)S
1275(u)S
1300(n)S
1325(d)S
1350(\))S
225 X
1900 Y
600 X(next_entry)s
875(=)S
925(first)S
1075(entry)S
1225(in)S
1300(following)S
1550(a)S
1575(l)S
1600(l)S
1625(o)S
1650(c)S
1675(a)S
1700(t)S
1725(i)S
1750(o)S
1775(n)S
225 X
1950 Y
925 X(block;)s
225 X
2000 Y
525 X(*nextBlkP)s
775(=)S
825(logical)S
1025(block)S
1175(no.)S
1275(c)S
1300(o)S
1325(r)S
1350(r)S
1375(e)S
1400(s)S
1425(p)S
1450(o)S
1475(n)S
1500(d)S
1525(i)S
1550(n)S
1575(g)S
1625(to)S
225 X
2050 Y
825 X(n)s
850(e)S
875(x)S
900(t)S
925(_)S
950(e)S
975(n)S
1000(t)S
1025(r)S
1050(y)S
1075(;)S
225 X
2100 Y
525 X(release)s
725(allocation)S
1000(b)S
1025(l)S
1050(o)S
1075(c)S
1100(k)S
1125(;)S
225 X
2150 Y
525 X(return)s
700(NULL;)S
225 X
2200 Y
425 X(})s
225 X
2250 Y
425 X(if)s
500(\(!leaf)S
675(node\))S
225 X
2300 Y
525 X(release)s
725(allocation)S
1000(b)S
1025(l)S
1050(o)S
1075(c)S
1100(k)S
1125(;)S
225 X
2350 Y
325 X(})s
225 X
2400 Y
325 X(calculate)s
575(*nextBlkP)S
825(as)S
900(a)S
925(b)S
950(o)S
975(v)S
1000(e)S
1025(;)S
225 X
2450 Y
325 X(return)s
500(allocation)S
775(b)S
800(l)S
825(o)S
850(c)S
875(k)S
900(;)S
225 X
2500 Y(})s
225 X
2600 Y(/*)s
225 X
2650 Y
250(*)S
300(Undo-zero)S
550(p)S
575(r)S
600(o)S
625(c)S
650(e)S
675(s)S
700(s)S
725(i)S
750(n)S
775(g)S
225 X
2700 Y
250(*/)S
225 X
2800 Y(/*)s
225 X
2850 Y
250(*)S
300(This)S
425(structure)S
675(provides)S
900(a)S
950(handle)S
1125(for)S
1225(undo-zero)S
1475(t)S
1500(r)S
1525(a)S
1550(n)S
1575(s)S
1600(a)S
1625(c)S
1650(t)S
1675(i)S
1700(o)S
1725(n)S
1750(s)S
1775(.)S
1850(In)S
225 X
2900 Y
250(*)S
300(addition)S
525(to)S
600(the)S
700(tranId,)S
900(it)S
975(contains)S
1200(a)S
1250(ref.)S
1375(count)S
1525(of)S
1600(allocated)S
1850(but)S
225 X
2950 Y
250(*)S
300(still)S
450(u)S
475(n)S
500(i)S
525(n)S
550(i)S
575(t)S
600(i)S
625(a)S
650(l)S
675(i)S
700(z)S
725(e)S
750(d)S
800(user)S
925(data)S
1050(blocks,)S
1250(and)S
1350(a)S
1400(pointer)S
1600(so)S
1675(that)S
225 X
3000 Y
250(*)S
300(completed)S
550(transactions)S
875(can)S
975(be)S
1050(linked)S
1225(together)S
1450(on)S
1525(a)S
1575(q)S
1600(u)S
1625(e)S
1650(u)S
1675(e)S
1700(.)S
225 X
3050 Y
250(*/)S
225 X
3100 Y(struct)s
400(e)S
425(p)S
450(i)S
475(a)S
500(_)S
525(u)S
550(n)S
575(d)S
600(o)S
625(Z)S
650(e)S
675(r)S
700(o)S
750({)S
225 X
3220 Y
0.0 10 10 f.H ft(Lewis)s
2020 X(P)s
2047(a)S
2070(g)S
2093(e)S
2116( )S
2128(2)S
2151(1)S
3300 Y
showpage
PageState6269 restore

%%PageFonts: Helvetica Courier
%%Page: label 22
%%PageFonts: (atend)
/PageState6269 save def
home

0.000000 setgray
%%IncludeFont: Helvetica

/Helvetica /Helvetica-8 roman-8-mappings AddRoman-8
/f.H /Helvetica-8 findfont def

0.0 10 10 f.H ft
1.0000 setlinewidth
[] 0 setdash

225 X
200 Y(OSF-RFC 75.0)s
983 X(E)s
1011(p)S
1034(i)S
1043(s)S
1064(o)S
1087(d)S
1110(e)S
1133( )S
1145(V)S
1173(M)S
1208( )S
1220(I)S
1232(n)S
1255(t)S
1267(e)S
1290(g)S
1313(r)S
1327(a)S
1350(t)S
1362(i)S
1371(o)S
1394(n)S
1923 X(O)s
1955(c)S
1976(t)S
1988(o)S
2011(b)S
2034(e)S
2057(r)S
2071( )S
2083(1)S
2106(9)S
2129(9)S
2152(5)S
225 X
400 Y
325 X
%%IncludeFont: Courier

/Courier /Courier-8 roman-8-mappings AddRoman-8
/f.CW /Courier-8 findfont def

0.0 10 10 f.CW ft(struct)s
500(u)S
525(n)S
550(d)S
575(o)S
600(_)S
625(z)S
650(e)S
675(r)S
700(o)S
725(_)S
750(t)S
775(r)S
800(a)S
825(n)S
875(*)S
900(n)S
925(e)S
950(x)S
975(t)S
1000(;)S
225 X
450 Y
325 X(e)s
350(l)S
375(b)S
400(b)S
425(_)S
450(t)S
475(r)S
500(a)S
525(n)S
550(R)S
575(e)S
600(c)S
625(_)S
650(t)S
700(t)S
725(r)S
750(a)S
775(n)S
800(I)S
825(d)S
850(;)S
225 X
500 Y
325 X(u_int)s
475(p)S
500(e)S
525(n)S
550(d)S
575(i)S
600(n)S
625(g)S
650(_)S
675(b)S
700(l)S
725(o)S
750(c)S
775(k)S
800(s)S
825(;)S
225 X
550 Y(};)s
225 X
650 Y(typedef)s
425(struct)S
600(e)S
625(p)S
650(i)S
675(a)S
700(_)S
725(u)S
750(n)S
775(d)S
800(o)S
825(Z)S
850(e)S
875(r)S
900(o)S
950(e)S
975(p)S
1000(i)S
1025(a)S
1050(_)S
1075(u)S
1100(n)S
1125(d)S
1150(o)S
1175(Z)S
1200(e)S
1225(r)S
1250(o)S
1275(_)S
1300(t)S
1325(;)S
225 X
750 Y(/*)s
225 X
800 Y
250(*)S
300(Queue)S
450(of)S
525(undo-zero)S
775(transactions)S
1100(that)S
1225(can)S
1325(be)S
1400(e)S
1425(n)S
1450(d)S
1475(e)S
1500(d)S
1525(.)S
225 X
850 Y
250(*/)S
225 X
900 Y(e)s
250(p)S
275(i)S
300(a)S
325(_)S
350(u)S
375(n)S
400(d)S
425(o)S
450(Z)S
475(e)S
500(r)S
525(o)S
550(_)S
575(t)S
625(*)S
650(e)S
675(p)S
700(i)S
725(a)S
750(_)S
775(c)S
800(o)S
825(m)S
850(p)S
875(l)S
900(e)S
925(t)S
950(e)S
975(d)S
1000(U)S
1025(n)S
1050(d)S
1075(o)S
1100(Z)S
1125(e)S
1150(r)S
1175(o)S
1200(e)S
1225(s)S
1250(;)S
225 X
1000 Y(/*)s
225 X
1050 Y
250(*)S
300(This)S
425(structure)S
675(associates)S
950(a)S
1000(disk)S
1125(block)S
1275(with)S
1400(an)S
1475(u)S
1500(n)S
1525(d)S
1550(o)S
1575(-)S
1600(z)S
1625(e)S
1650(r)S
1675(o)S
225 X
1100 Y
250(*)S
300(transaction.)S
650(We)S
725(create)S
900(a)S
950(instance)S
1175(of)S
1250(the)S
1350(structure)S
1600(for)S
1700(each)S
225 X
1150 Y
250(*)S
300(allocated,)S
575(but)S
675(not)S
775(yet)S
875(initialized,)S
1200(user)S
1325(data)S
1450(block)S
1600(and)S
1700(store)S
1850(them)S
225 X
1200 Y
250(*)S
300(in)S
375(a)S
425(hash)S
550(table.)S
750(When)S
875(a)S
925(write)S
1075(completes,)S
1350(we)S
1425(remove)S
1600(the)S
225 X
1250 Y
250(*)S
300(c)S
325(o)S
350(r)S
375(r)S
400(e)S
425(s)S
450(p)S
475(o)S
500(n)S
525(d)S
550(i)S
575(n)S
600(g)S
650(blocks)S
825(from)S
950(the)S
1050(hash)S
1175(table)S
1325(and)S
1425(decrement)S
1675(the)S
1775(p)S
1800(e)S
1825(n)S
1850(d)S
1875(i)S
1900(n)S
1925(g)S
225 X
1300 Y
250(*)S
300(block)S
450(count)S
600(on)S
675(the)S
775(undo-zero)S
1025(transaction.)S
1375(When)S
1500(the)S
1600(ref.)S
1725(count)S
225 X
1350 Y
250(*)S
300(reaches)S
500(zero,)S
650(we)S
725(either)S
900(end)S
1000(the)S
1100(undo-zero)S
1350(transaction)S
1650(or)S
1725(queue)S
1875(it)S
225 X
1400 Y
250(*)S
300(for)S
400(completion)S
675(by)S
750(the)S
850(async)S
1000(d)S
1025(a)S
1050(e)S
1075(m)S
1100(o)S
1125(n)S
1150(.)S
225 X
1450 Y
250(*/)S
225 X
1500 Y(struct)s
400(e)S
425(p)S
450(i)S
475(a)S
500(_)S
525(p)S
550(e)S
575(n)S
600(d)S
625(i)S
650(n)S
675(g)S
700(B)S
725(l)S
750(o)S
775(c)S
800(k)S
850({)S
225 X
1550 Y
325 X(struct)s
500(e)S
525(p)S
550(i)S
575(a)S
600(_)S
625(p)S
650(e)S
675(n)S
700(d)S
725(i)S
750(n)S
775(g)S
800(B)S
825(l)S
850(o)S
875(c)S
900(k)S
950(*)S
975(n)S
1000(e)S
1025(x)S
1050(t)S
1075(;)S
225 X
1600 Y
325 X(epi_anode_t)s
625(a)S
650(n)S
675(o)S
700(d)S
725(e)S
750(;)S
225 X
1650 Y
325 X(daddr_t)s
525(b)S
550(l)S
575(k)S
600(n)S
625(o)S
650(;)S
225 X
1700 Y
325 X(e)s
350(p)S
375(i)S
400(a)S
425(_)S
450(U)S
475(n)S
500(d)S
525(o)S
550(Z)S
575(e)S
600(r)S
625(o)S
650(_)S
675(t)S
725(*)S
750(t)S
775(r)S
800(a)S
825(n)S
850(;)S
225 X
1750 Y(})s
225 X
1850 Y(typedef)s
425(struct)S
600(e)S
625(p)S
650(i)S
675(a)S
700(_)S
725(p)S
750(e)S
775(n)S
800(d)S
825(i)S
850(n)S
875(g)S
900(B)S
925(l)S
950(o)S
975(c)S
1000(k)S
1050(e)S
1075(p)S
1100(i)S
1125(a)S
1150(_)S
1175(p)S
1200(e)S
1225(n)S
1250(d)S
1275(i)S
1300(n)S
1325(g)S
1350(B)S
1375(l)S
1400(o)S
1425(c)S
1450(k)S
1475(_)S
1500(t)S
1525(;)S
225 X
1950 Y(/*)s
225 X
2000 Y
250(*)S
300(Head)S
425(for)S
525(a)S
575(hash)S
700(chain)S
225 X
2050 Y
250(*/)S
225 X
2100 Y(struct)s
400(p)S
425(e)S
450(n)S
475(d)S
500(i)S
525(n)S
550(g)S
575(B)S
600(l)S
625(o)S
650(c)S
675(k)S
700(_)S
725(h)S
750(a)S
775(s)S
800(h)S
825(L)S
850(i)S
875(s)S
900(t)S
950({)S
225 X
2150 Y
325 X(osi_mutex_t)s
625(h)S
650(a)S
675(s)S
700(h)S
725(_)S
750(m)S
775(u)S
800(t)S
825(e)S
850(x)S
875(;)S
225 X
2200 Y
325 X(e)s
350(p)S
375(i)S
400(a)S
425(_)S
450(p)S
475(e)S
500(n)S
525(d)S
550(i)S
575(n)S
600(g)S
625(B)S
650(l)S
675(o)S
700(c)S
725(k)S
750(_)S
775(t)S
825(*)S
850(b)S
875(l)S
900(o)S
925(c)S
950(k)S
975(s)S
1000(;)S
225 X
2250 Y(};)s
225 X
2350 Y(static)s
400(struct)S
575(p)S
600(e)S
625(n)S
650(d)S
675(i)S
700(n)S
725(g)S
750(B)S
775(l)S
800(o)S
825(c)S
850(k)S
875(_)S
900(h)S
925(a)S
950(s)S
975(h)S
1000(L)S
1025(i)S
1050(s)S
1075(t)S
225 X
2400 Y
400 X(p)s
425(e)S
450(n)S
475(d)S
500(i)S
525(n)S
550(g)S
575(B)S
600(l)S
625(o)S
650(c)S
675(k)S
700(_)S
725(H)S
750(a)S
775(s)S
800(h)S
825(T)S
850(a)S
875(b)S
900([)S
925(H)S
950(A)S
975(S)S
1000(H)S
1025(T)S
1050(A)S
1075(B)S
1100(S)S
1125(I)S
1150(Z)S
1175(E)S
1200(])S
1225(;)S
225 X
2500 Y(e)s
250(p)S
275(i)S
300(a)S
325(_)S
350(R)S
375(e)S
400(c)S
425(o)S
450(r)S
475(d)S
500(U)S
525(n)S
550(d)S
575(o)S
600(Z)S
625(e)S
650(r)S
675(o)S
700(\()S
725(t)S
750(r)S
775(a)S
800(n)S
825(I)S
850(d)S
875(,)S
925(bp\))S
225 X
2550 Y({)s
225 X
2600 Y
325 X(tran)s
450(=)S
500(new)S
600(e)S
625(p)S
650(i)S
675(a)S
700(_)S
725(u)S
750(n)S
775(d)S
800(o)S
825(Z)S
850(e)S
875(r)S
900(o)S
925(_)S
950(t)S
975(;)S
225 X
2650 Y
325 X(tran->tranId)s
650(=)S
700(t)S
725(r)S
750(a)S
775(n)S
800(I)S
825(d)S
850(;)S
225 X
2700 Y
325 X(t)s
350(r)S
375(a)S
400(n)S
425(-)S
450(>)S
475(p)S
500(e)S
525(n)S
550(d)S
575(i)S
600(n)S
625(g)S
650(_)S
675(b)S
700(l)S
725(o)S
750(c)S
775(k)S
800(s)S
850(=)S
900(0;)S
225 X
2800 Y
325 X(for)s
425(each)S
550(disk)S
675(block)S
825(covered)S
1025(by)S
1100(bp)S
1175({)S
225 X
2850 Y
425 X(t)s
450(r)S
475(a)S
500(n)S
525(-)S
550(>)S
575(p)S
600(e)S
625(n)S
650(d)S
675(i)S
700(n)S
725(g)S
750(_)S
775(b)S
800(l)S
825(o)S
850(c)S
875(k)S
900(s)S
925(+)S
950(+)S
975(;)S
225 X
2900 Y
425 X(p)s
475(=)S
525(new)S
625(e)S
650(p)S
675(i)S
700(a)S
725(_)S
750(p)S
775(e)S
800(n)S
825(d)S
850(i)S
875(n)S
900(g)S
925(B)S
950(l)S
975(o)S
1000(c)S
1025(k)S
1050(_)S
1075(t)S
1100(;)S
225 X
2950 Y
425 X(p->tran)s
625(=)S
675(tran;)S
225 X
3000 Y
425 X(p->blkno)s
650(=)S
700(this)S
825(b)S
850(l)S
875(o)S
900(c)S
925(k)S
950(;)S
225 X
3050 Y
425 X(p->anode)s
650(=)S
700(anode)S
850(for)S
950(this)S
1075(b)S
1100(l)S
1125(o)S
1150(c)S
1175(k)S
1200(;)S
225 X
3100 Y
425 X(insert)s
600(p)S
650(in)S
725(p)S
750(e)S
775(n)S
800(d)S
825(i)S
850(n)S
875(g)S
900(B)S
925(l)S
950(o)S
975(c)S
1000(k)S
1025(_)S
1050(H)S
1075(a)S
1100(s)S
1125(h)S
1150(T)S
1175(a)S
1200(b)S
1225(;)S
225 X
3220 Y
0.0 10 10 f.H ft(Lewis)s
2020 X(P)s
2047(a)S
2070(g)S
2093(e)S
2116( )S
2128(2)S
2151(2)S
3300 Y
showpage
PageState6269 restore

%%PageFonts: Helvetica Courier
%%Page: label 23
%%PageFonts: (atend)
/PageState6269 save def
home

0.000000 setgray
%%IncludeFont: Helvetica

/Helvetica /Helvetica-8 roman-8-mappings AddRoman-8
/f.H /Helvetica-8 findfont def

0.0 10 10 f.H ft
1.0000 setlinewidth
[] 0 setdash

225 X
200 Y(OSF-RFC 75.0)s
983 X(E)s
1011(p)S
1034(i)S
1043(s)S
1064(o)S
1087(d)S
1110(e)S
1133( )S
1145(V)S
1173(M)S
1208( )S
1220(I)S
1232(n)S
1255(t)S
1267(e)S
1290(g)S
1313(r)S
1327(a)S
1350(t)S
1362(i)S
1371(o)S
1394(n)S
1923 X(O)s
1955(c)S
1976(t)S
1988(o)S
2011(b)S
2034(e)S
2057(r)S
2071( )S
2083(1)S
2106(9)S
2129(9)S
2152(5)S
225 X
400 Y
325 X
%%IncludeFont: Courier

/Courier /Courier-8 roman-8-mappings AddRoman-8
/f.CW /Courier-8 findfont def

0.0 10 10 f.CW ft(})s
225 X
450 Y(})s
225 X
550 Y(/*)s
225 X
600 Y
250(*)S
300(Update)S
475(any)S
575(undo-zero)S
825(transactions)S
1150(affected)S
1375(by)S
1450(completion)S
1725(of)S
1800(a)S
225 X
650 Y
250(*)S
300(write)S
450(on)S
525(bp.)S
650(If)S
725(the)S
825(p)S
850(e)S
875(n)S
900(d)S
925(i)S
950(n)S
975(g)S
1000(_)S
1025(b)S
1050(l)S
1075(o)S
1100(c)S
1125(k)S
1175(count)S
1325(on)S
1400(the)S
1500(t)S
1525(r)S
1550(a)S
1575(n)S
1600(s)S
1625(a)S
1650(c)S
1675(t)S
1700(i)S
1725(o)S
1750(n)S
225 X
700 Y
250(*)S
300(reaches)S
500(zero,)S
650(we)S
725(either)S
900(end)S
1000(the)S
1100(transaction)S
1400(or)S
1475(queue)S
1625(it)S
1700(for)S
225 X
750 Y
250(*)S
300(completion)S
575(by)S
650(the)S
750(async)S
900(daemon,)S
1100(depending)S
1350(on)S
1425(the)S
1525(value)S
1675(of)S
225 X
800 Y
250(*)S
300(f)S
325(i)S
350(n)S
375(i)S
400(s)S
425(h)S
450(T)S
475(r)S
500(a)S
525(n)S
550(.)S
225 X
850 Y
250(*)S
225 X
900 Y
250(*)S
300(This)S
425(function)S
650(is)S
725(called)S
900(at)S
975(interrupt)S
1225(time)S
1350(when)S
1475(an)S
1550(a)S
1575(s)S
1600(y)S
1625(n)S
1650(c)S
1675(h)S
1700(r)S
1725(o)S
1750(n)S
1775(o)S
1800(u)S
1825(s)S
225 X
950 Y
250(*)S
300(write)S
450(completes,)S
725(and)S
825(also)S
950(from)S
1075(putpage)S
1275(after)S
1425(a)S
1475(sync)S
1600(w)S
1625(r)S
1650(i)S
1675(t)S
1700(e)S
1725(.)S
225 X
1000 Y
250(*/)S
225 X
1050 Y(e)s
250(p)S
275(i)S
300(a)S
325(_)S
350(U)S
375(p)S
400(d)S
425(a)S
450(t)S
475(e)S
500(U)S
525(n)S
550(d)S
575(o)S
600(Z)S
625(e)S
650(r)S
675(o)S
700(\()S
725(b)S
750(p)S
775(,)S
825(f)S
850(i)S
875(n)S
900(i)S
925(s)S
950(h)S
975(T)S
1000(r)S
1025(a)S
1050(n)S
1075(\))S
225 X
1100 Y({)s
225 X
1150 Y
325 X(for)s
425(each)S
550(disk)S
675(block)S
825(covered)S
1025(by)S
1100(bp)S
1175({)S
225 X
1200 Y
425 X(R)s
450(e)S
475(m)S
500(o)S
525(v)S
550(e)S
575(P)S
600(e)S
625(n)S
650(d)S
675(i)S
700(n)S
725(g)S
750(B)S
775(l)S
800(o)S
825(c)S
850(k)S
875(\()S
900(b)S
925(l)S
950(o)S
975(c)S
1000(k)S
1025(,)S
1075(anode,)S
1250(f)S
1275(i)S
1300(n)S
1325(i)S
1350(s)S
1375(h)S
1400(T)S
1425(r)S
1450(a)S
1475(n)S
1500(\))S
1525(;)S
225 X
1250 Y
325 X(})s
225 X
1300 Y(})s
225 X
1400 Y(/*)s
225 X
1450 Y
250(*)S
300(Remove)S
475(a)S
525(specific)S
750(block)S
900(from)S
1025(the)S
1125(hash)S
1250(table)S
1400(and)S
1500(update)S
1675(its)S
225 X
1500 Y
250(*)S
300(undo-zero)S
550(t)S
575(r)S
600(a)S
625(n)S
650(s)S
675(a)S
700(c)S
725(t)S
750(i)S
775(o)S
800(n)S
825(.)S
225 X
1550 Y
250(*/)S
225 X
1600 Y(R)s
250(e)S
275(m)S
300(o)S
325(v)S
350(e)S
375(P)S
400(e)S
425(n)S
450(d)S
475(i)S
500(n)S
525(g)S
550(B)S
575(l)S
600(o)S
625(c)S
650(k)S
675(\()S
700(b)S
725(l)S
750(o)S
775(c)S
800(k)S
825(,)S
875(anode,)S
1050(f)S
1075(i)S
1100(n)S
1125(i)S
1150(s)S
1175(h)S
1200(T)S
1225(r)S
1250(a)S
1275(n)S
1300(\))S
225 X
1650 Y({)s
225 X
1700 Y
325 X(p)s
375(=)S
425(lookup)S
600(&)S
650(remove)S
825(from)S
950(hash)S
1075(tab\(block,)S
1350(a)S
1375(n)S
1400(o)S
1425(d)S
1450(e)S
1475(\))S
1500(;)S
225 X
1750 Y
325 X(if)s
400(\(p)S
475(!=)S
550(NULL\))S
700({)S
225 X
1800 Y
425 X(if)s
500(\()S
525(-)S
550(-)S
575(p)S
600(-)S
625(>)S
650(t)S
675(r)S
700(a)S
725(n)S
750(-)S
775(>)S
800(p)S
825(e)S
850(n)S
875(d)S
900(i)S
925(n)S
950(g)S
975(_)S
1000(b)S
1025(l)S
1050(o)S
1075(c)S
1100(k)S
1125(s)S
1175(==)S
1250(0\))S
1325({)S
225 X
1850 Y
525 X(if)s
600(\()S
625(f)S
650(i)S
675(n)S
700(i)S
725(s)S
750(h)S
775(T)S
800(r)S
825(a)S
850(n)S
875(\))S
225 X
1900 Y
600 X(E)s
625(n)S
650(d)S
675(U)S
700(n)S
725(d)S
750(o)S
775(Z)S
800(e)S
825(r)S
850(o)S
875(\()S
900(.)S
925(.)S
950(.)S
975(\))S
1000(;)S
225 X
1950 Y
525 X(else)s
650({)S
225 X
2000 Y
600 X(add)s
700(p->tran)S
900(to)S
975(c)S
1000(o)S
1025(m)S
1050(p)S
1075(l)S
1100(e)S
1125(t)S
1150(e)S
1175(d)S
1200(U)S
1225(n)S
1250(d)S
1275(o)S
1300(Z)S
1325(e)S
1350(r)S
1375(o)S
1400(e)S
1425(s)S
1475(list;)S
225 X
2050 Y
600 X(wake)s
725(daemon)S
900(if)S
975(list)S
1100(was)S
1200(e)S
1225(m)S
1250(p)S
1275(t)S
1300(y)S
1325(;)S
225 X
2100 Y
525 X(})s
225 X
2150 Y
425 X(})s
225 X
2200 Y
425 X(discard)s
625(p;)S
800 X(/*)s
875(free)S
1000(list)S
1125(or)S
1200(osi_Free)S
1425(*/)S
225 X
2250 Y
325 X(})s
225 X
2300 Y(})s
225 X
2400 Y(/*)s
225 X
2450 Y
250(*)S
300(We)S
375(use)S
475(this)S
600(interface)S
850(to)S
925(discard)S
1125(pending)S
1325(block)S
1475(records)S
1675(when)S
225 X
2500 Y
250(*)S
300(we)S
375(destroy)S
575(the)S
675(c)S
700(o)S
725(r)S
750(r)S
775(e)S
800(s)S
825(p)S
850(o)S
875(n)S
900(d)S
925(i)S
950(n)S
975(g)S
1025(blocks)S
1200(by)S
1275(truncation)S
1550(or)S
1625(d)S
1650(e)S
1675(l)S
1700(e)S
1725(t)S
1750(i)S
1775(o)S
1800(n)S
1825(.)S
225 X
2550 Y
250(*)S
300(In)S
375(this)S
500(case,)S
650(all)S
750(we)S
825(get)S
925(is)S
1000(an)S
1075(offset)S
1250(and)S
1350(length,)S
1550(so)S
1625(we)S
1700(have)S
225 X
2600 Y
250(*)S
300(to)S
375(find)S
500(the)S
600(disk)S
725(blocks)S
900(o)S
925(u)S
950(r)S
975(s)S
1000(e)S
1025(l)S
1050(v)S
1075(e)S
1100(s)S
1125(.)S
225 X
2650 Y
250(*/)S
225 X
2700 Y(e)s
250(p)S
275(i)S
300(a)S
325(_)S
350(P)S
375(u)S
400(r)S
425(g)S
450(e)S
475(U)S
500(n)S
525(d)S
550(o)S
575(Z)S
600(e)S
625(r)S
650(o)S
675(\()S
700(v)S
725(p)S
750(,)S
800(off,)S
925(len\))S
225 X
2750 Y({)s
225 X
2800 Y
325 X(int)s
425(wlen)S
550(=)S
600(0;)S
225 X
2850 Y
325 X(for)s
425(each)S
550(block)S
700(offset)S
875(in)S
950(range)S
1100({)S
225 X
2900 Y
425 X(if)s
500(\(wlen)S
650(==)S
725(0\))S
225 X
2950 Y
525 X(e)s
550(f)S
575(s)S
600(_)S
625(F)S
650(i)S
675(n)S
700(d)S
725(W)S
750(r)S
775(i)S
800(t)S
825(a)S
850(b)S
875(l)S
900(e)S
925(B)S
950(l)S
975(o)S
1000(c)S
1025(k)S
1050(s)S
1075(\()S
1100(v)S
1125(p)S
1150(,)S
1200(offset,)S
1400(&blkno,)S
1600(&)S
1625(w)S
1650(l)S
1675(e)S
1700(n)S
1725(\))S
1750(;)S
225 X
3000 Y
425 X(R)s
450(e)S
475(m)S
500(o)S
525(v)S
550(e)S
575(P)S
600(e)S
625(n)S
650(d)S
675(i)S
700(n)S
725(g)S
750(B)S
775(l)S
800(o)S
825(c)S
850(k)S
875(\()S
900(b)S
925(l)S
950(o)S
975(c)S
1000(k)S
1025(,)S
1075(anode,)S
1250(1\);)S
225 X
3050 Y
425 X(b)s
450(l)S
475(k)S
500(n)S
525(o)S
550(+)S
575(+)S
600(;)S
225 X
3100 Y
425 X(wlen)s
550(-=)S
625(block)S
775(size;)S
225 X
3220 Y
0.0 10 10 f.H ft(Lewis)s
2020 X(P)s
2047(a)S
2070(g)S
2093(e)S
2116( )S
2128(2)S
2151(3)S
3300 Y
showpage
PageState6269 restore

%%PageFonts: Helvetica Courier
%%Page: label 24
%%PageFonts: (atend)
/PageState6269 save def
home

0.000000 setgray
%%IncludeFont: Helvetica

/Helvetica /Helvetica-8 roman-8-mappings AddRoman-8
/f.H /Helvetica-8 findfont def

0.0 10 10 f.H ft
1.0000 setlinewidth
[] 0 setdash

225 X
200 Y(OSF-RFC 75.0)s
983 X(E)s
1011(p)S
1034(i)S
1043(s)S
1064(o)S
1087(d)S
1110(e)S
1133( )S
1145(V)S
1173(M)S
1208( )S
1220(I)S
1232(n)S
1255(t)S
1267(e)S
1290(g)S
1313(r)S
1327(a)S
1350(t)S
1362(i)S
1371(o)S
1394(n)S
1923 X(O)s
1955(c)S
1976(t)S
1988(o)S
2011(b)S
2034(e)S
2057(r)S
2071( )S
2083(1)S
2106(9)S
2129(9)S
2152(5)S
225 X
400 Y
325 X
%%IncludeFont: Courier

/Courier /Courier-8 roman-8-mappings AddRoman-8
/f.CW /Courier-8 findfont def

0.0 10 10 f.CW ft(})s
225 X
450 Y(})s
225 X
550 Y(E)s
250(n)S
275(d)S
300(U)S
325(n)S
350(d)S
375(o)S
400(Z)S
425(e)S
450(r)S
475(o)S
500(\()S
525(a)S
550(p)S
575(,)S
625(tran\))S
225 X
600 Y({)s
225 X
650 Y
350 X(e)s
375(p)S
400(i)S
425(a)S
450(_)S
475(E)S
500(n)S
525(d)S
550(T)S
575(r)S
600(a)S
625(n)S
650(\()S
675(a)S
700(p)S
725(,)S
775(t)S
800(r)S
825(a)S
850(n)S
875(\))S
900(;)S
225 X
700 Y
350 X(lock)s
475(c)S
500(o)S
525(m)S
550(p)S
575(l)S
600(e)S
625(t)S
650(e)S
675(d)S
700(U)S
725(n)S
750(d)S
775(o)S
800(Z)S
825(e)S
850(r)S
875(o)S
900(e)S
925(s)S
975(list;)S
225 X
750 Y
350 X(E)s
375(n)S
400(d)S
425(C)S
450(o)S
475(m)S
500(p)S
525(l)S
550(e)S
575(t)S
600(e)S
625(d)S
650(U)S
675(n)S
700(d)S
725(o)S
750(Z)S
775(e)S
800(r)S
825(o)S
850(e)S
875(s)S
900(\()S
925(\))S
950(;)S
1025(/*)S
1100(clean)S
1250(out)S
1350(the)S
1450(list)S
1575(*/)S
225 X
800 Y(})s
225 X
900 Y(E)s
250(n)S
275(d)S
300(C)S
325(o)S
350(m)S
375(p)S
400(l)S
425(e)S
450(t)S
475(e)S
500(d)S
525(U)S
550(n)S
575(d)S
600(o)S
625(Z)S
650(e)S
675(r)S
700(o)S
725(e)S
750(s)S
775(\()S
800(\))S
225 X
950 Y({)s
225 X
1000 Y
325 X(foreach)s
525(record)S
700(on)S
775(e)S
800(p)S
825(i)S
850(a)S
875(_)S
900(C)S
925(o)S
950(m)S
975(p)S
1000(l)S
1025(e)S
1050(t)S
1075(e)S
1100(d)S
1125(U)S
1150(n)S
1175(d)S
1200(o)S
1225(Z)S
1250(e)S
1275(r)S
1300(o)S
1325(e)S
1350(s)S
1400({)S
225 X
1050 Y
425 X(remove)s
600(record)S
775(from)S
900(list;)S
225 X
1100 Y
425 X(e)s
450(p)S
475(i)S
500(a)S
525(_)S
550(E)S
575(n)S
600(d)S
625(T)S
650(r)S
675(a)S
700(n)S
725(\()S
750(a)S
775(n)S
800(o)S
825(d)S
850(e)S
875(,)S
925(T)S
950(r)S
975(a)S
1000(n)S
1025(\))S
1050(;)S
225 X
1150 Y
425 X(free)s
550(r)S
575(e)S
600(c)S
625(o)S
650(r)S
675(d)S
700(;)S
225 X
1200 Y
325 X(})s
225 X
1250 Y(})s
225 X
1350 Y(e)s
250(p)S
275(i)S
300(a)S
325(_)S
350(A)S
375(s)S
400(y)S
425(n)S
450(c)S
475(D)S
500(a)S
525(e)S
550(m)S
575(o)S
600(n)S
625(\()S
650(\))S
225 X
1400 Y({)s
225 X
1450 Y
325 X(while)s
475(\(1\))S
575({)S
225 X
1500 Y
425 X(lock)s
550(e)S
575(p)S
600(i)S
625(a)S
650(_)S
675(C)S
700(o)S
725(m)S
750(p)S
775(l)S
800(e)S
825(t)S
850(e)S
875(d)S
900(U)S
925(n)S
950(d)S
975(o)S
1000(Z)S
1025(e)S
1050(r)S
1075(o)S
1100(e)S
1125(s)S
1175(list;)S
225 X
1550 Y
425 X(while)s
575(\(list)S
725(is)S
800(empty\))S
975({)S
225 X
1600 Y
525 X(drop)s
650(lock)S
775(&)S
825(s)S
850(l)S
875(e)S
900(e)S
925(p)S
950(;)S
225 X
1650 Y
525 X(reaquire)s
750(lock;)S
225 X
1700 Y
425 X(})s
225 X
1750 Y
425 X(E)s
450(n)S
475(d)S
500(C)S
525(o)S
550(m)S
575(p)S
600(l)S
625(e)S
650(t)S
675(e)S
700(d)S
725(U)S
750(n)S
775(d)S
800(o)S
825(Z)S
850(e)S
875(r)S
900(o)S
925(e)S
950(s)S
975(\()S
1000(\))S
1025(;)S
225 X
1800 Y
425 X(if)s
500(\(transaction)S
825(system)S
1000(is)S
1075(blocked)S
1275(by)S
1350(full)S
1475(log\))S
1600({)S
225 X
1850 Y
525 X(set)s
625(w)S
650(a)S
675(i)S
700(t)S
725(i)S
750(n)S
775(g)S
800(F)S
825(o)S
850(r)S
875(U)S
900(n)S
925(d)S
950(o)S
975(Z)S
1000(e)S
1025(r)S
1050(o)S
1100(to)S
1175(f)S
1200(a)S
1225(l)S
1250(s)S
1275(e)S
1300(;)S
225 X
1900 Y
525 X(wake)s
650(up)S
725(transaction)S
1025(s)S
1050(y)S
1075(s)S
1100(t)S
1125(e)S
1150(m)S
1175(;)S
225 X
1950 Y
425 X(})s
225 X
2000 Y
325 X(})s
225 X
2050 Y(})s
225 X
2150 Y(e)s
250(p)S
275(i)S
300(a)S
325(_)S
350(F)S
375(o)S
400(r)S
425(c)S
450(e)S
475(U)S
500(n)S
525(d)S
550(o)S
575(Z)S
600(e)S
625(r)S
650(o)S
675(\()S
700(t)S
725(r)S
750(a)S
775(n)S
800(I)S
825(d)S
850(\))S
225 X
2200 Y({)s
225 X
2250 Y(})s
225 X
2350 Y(e)s
250(p)S
275(i)S
300(a)S
325(_)S
350(W)S
375(a)S
400(i)S
425(t)S
450(F)S
475(o)S
500(r)S
525(U)S
550(n)S
575(d)S
600(o)S
625(Z)S
650(e)S
675(r)S
700(o)S
725(\()S
750(\))S
225 X
2400 Y({)s
225 X
2450 Y
325 X(get)s
425(lock)S
550(on)S
625(w)S
650(a)S
675(i)S
700(t)S
725(i)S
750(n)S
775(g)S
800(F)S
825(o)S
850(r)S
875(U)S
900(n)S
925(d)S
950(o)S
975(Z)S
1000(e)S
1025(r)S
1050(o)S
1100(c.v.;)S
225 X
2500 Y
325 X(if)s
400(\(no)S
500(unfinished)S
775(undo-zero)S
1025(t)S
1050(r)S
1075(a)S
1100(n)S
1125(s)S
1150(a)S
1175(c)S
1200(t)S
1225(i)S
1250(o)S
1275(n)S
1300(s)S
1325(\))S
1375({)S
225 X
2550 Y
425 X(drop)s
550(lock;)S
225 X
2600 Y
425 X(return)s
600(f)S
625(a)S
650(i)S
675(l)S
700(u)S
725(r)S
750(e)S
775(;)S
225 X
2650 Y
325 X(})s
225 X
2700 Y
325 X(set)s
425(w)S
450(a)S
475(i)S
500(t)S
525(i)S
550(n)S
575(g)S
600(F)S
625(o)S
650(r)S
675(U)S
700(n)S
725(d)S
750(o)S
775(Z)S
800(e)S
825(r)S
850(o)S
900(to)S
975(true;)S
225 X
2750 Y
325 X(while)s
475(\()S
500(w)S
525(a)S
550(i)S
575(t)S
600(i)S
625(n)S
650(g)S
675(F)S
700(o)S
725(r)S
750(U)S
775(n)S
800(d)S
825(o)S
850(Z)S
875(e)S
900(r)S
925(o)S
950(\))S
1000({)S
225 X
2800 Y
425 X(drop)s
550(lock)S
675(&)S
725(s)S
750(l)S
775(e)S
800(e)S
825(p)S
850(;)S
225 X
2850 Y
425 X(reacquire)s
675(lock;)S
225 X
2900 Y
325 X(})s
225 X
2950 Y
325 X(drop)s
450(lock;)S
225 X
3000 Y
325 X(return)s
500(s)S
525(u)S
550(c)S
575(c)S
600(e)S
625(s)S
650(s)S
675(;)S
225 X
3050 Y(})s
225 X
3220 Y
0.0 10 10 f.H ft(Lewis)s
2020 X(P)s
2047(a)S
2070(g)S
2093(e)S
2116( )S
2128(2)S
2151(4)S
3300 Y
showpage
PageState6269 restore

%%PageFonts: Helvetica Courier
%%Page: label 25
%%PageFonts: (atend)
/PageState6269 save def
home

0.000000 setgray
%%IncludeFont: Helvetica

/Helvetica /Helvetica-8 roman-8-mappings AddRoman-8
/f.H /Helvetica-8 findfont def

0.0 10 10 f.H ft
1.0000 setlinewidth
[] 0 setdash

225 X
200 Y(OSF-RFC 75.0)s
983 X(E)s
1011(p)S
1034(i)S
1043(s)S
1064(o)S
1087(d)S
1110(e)S
1133( )S
1145(V)S
1173(M)S
1208( )S
1220(I)S
1232(n)S
1255(t)S
1267(e)S
1290(g)S
1313(r)S
1327(a)S
1350(t)S
1362(i)S
1371(o)S
1394(n)S
1923 X(O)s
1955(c)S
1976(t)S
1988(o)S
2011(b)S
2034(e)S
2057(r)S
2071( )S
2083(1)S
2106(9)S
2129(9)S
2152(5)S
225 X
400 Y
%%IncludeFont: Helvetica-Bold

/Helvetica-Bold /Helvetica-Bold-8 roman-8-mappings AddRoman-8
/f.HB /Helvetica-Bold-8 findfont def

0.0 10 10 f.HB ft(AUTHOR'S)s
454(A)S
484(D)S
514(D)S
544(R)S
574(E)S
602(S)S
630(S)S
225 X
475 Y
%%IncludeFont: Times-Roman

/Times-Roman /Times-Roman-8 roman-8-mappings AddRoman-8
/f.R /Times-Roman-8 findfont def

0.0 10 10 f.R ft(Blake Lewis)s
1713 X(e)s
1732(m)S
1764(a)S
1783(i)S
1795(l)S
1807(:)S
1819( )S
1829(b)S
1850(l)S
1862(a)S
1881(k)S
1902(e)S
1921(@)S
1959(t)S
1971(r)S
1985(a)S
2004(n)S
2025(s)S
2041(a)S
2060(r)S
2074(c)S
2093(.)S
2103(c)S
2122(o)S
2143(m)S
225 X
525 Y(T)s
247(r)S
261(a)S
280(n)S
301(s)S
317(a)S
336(r)S
350(c)S
369( )S
379(C)S
407(o)S
428(r)S
442(p)S
463(o)S
484(r)S
498(a)S
517(t)S
529(i)S
541(o)S
562(n)S
1681 X(T)s
1703(e)S
1722(l)S
1734(e)S
1753(p)S
1774(h)S
1795(o)S
1816(n)S
1837(e)S
1856(:)S
1868( )S
1878(+)S
1902(1)S
1923(-)S
1937(4)S
1958(1)S
1979(2)S
2000(-)S
2014(3)S
2035(3)S
2056(8)S
2077(-)S
2091(6)S
2112(9)S
2133(2)S
2154(4)S
225 X
575 Y(T)s
250(h)S
271(e)S
290( )S
300(G)S
330(u)S
351(l)S
363(f)S
377( )S
387(T)S
409(o)S
430(w)S
460(e)S
479(r)S
225 X
625 Y(7)s
246(0)S
267(7)S
288( )S
298(G)S
328(r)S
342(a)S
361(n)S
382(t)S
394( )S
404(S)S
427(t)S
439(r)S
453(e)S
472(e)S
491(t)S
225 X
675 Y(P)s
248(i)S
260(t)S
272(t)S
284(s)S
300(b)S
321(u)S
342(r)S
356(g)S
377(h)S
398(,)S
408( )S
418(P)S
440(A)S
470( )S
480(1)S
501(5)S
522(2)S
543(1)S
564(9)S
225 X
3220 Y
0.0 10 10 f.H ft(Lewis)s
2021 X(P)s
2048(a)S
2071(g)S
2094(e)S
2117( )S
2129(2)S
2152(5)S
3300 Y
showpage
PageState6269 restore

%%PageFonts: Helvetica Helvetica-Bold Times-Roman
%%Page: label 26
%%PageFonts: (atend)
/PageState6269 save def
home

0.000000 setgray
%%IncludeFont: Helvetica

/Helvetica /Helvetica-8 roman-8-mappings AddRoman-8
/f.H /Helvetica-8 findfont def

0.0 10 10 f.H ft
1.0000 setlinewidth
[] 0 setdash

PageState6269 restore
%%Trailer
%%DocumentFonts: Helvetica-Bold Times-Roman Symbol Helvetica Times-Italic Courier
%%Pages: 25
DocState6269 restore
%%EOF
